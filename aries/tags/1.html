<h3><span class=" glyphicon glyphicon-tag"/>&nbspNullVerifier</h3><kbd>Verifies whether objects are null</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.aries.ant.taskdefs.EsaTaskTest </h4><pre class="type-4 type-5 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void generateArchiveNoManifest(){
  File srcDir=new File("../src/test/resources");
  File destfile=new File("target/esa-test1.esa");
  if (destfile.exists()) {
    destfile.delete();
  }
  assertFalse(destfile.exists());
  EsaTask esaTask=new EsaTask();
  Project testProject=new Project();
  esaTask.setProject(testProject);
  FileSet fileSet=new FileSet();
  fileSet.setDir(srcDir);
  fileSet.setIncludes("*.jar");
  esaTask.addFileset(fileSet);
  esaTask.setDestFile(destfile);
  esaTask.setSymbolicName("esatask-test");
  esaTask.setVersion("1.0.0");
  esaTask.execute();
  assertTrue(destfile.exists());
  try {
    ZipFile esaArchive=new ZipFile(destfile);
    assertNotNull(esaArchive);
    ZipEntry subsystemManifest=esaArchive.getEntry("OSGI-INF/SUBSYSTEM.MF");
    assertNull(subsystemManifest);
  }
 catch (  IOException e) {
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void generateArchiveWithFileManifest(){
  File srcDir=new File("../src/test/resources");
  File destfile=new File("target/esa-test2.esa");
  if (destfile.exists()) {
    destfile.delete();
  }
  assertFalse(destfile.exists());
  EsaTask esaTask=new EsaTask();
  Project testProject=new Project();
  esaTask.setProject(testProject);
  FileSet fileSet=new FileSet();
  fileSet.setDir(srcDir);
  fileSet.setIncludes("*.jar");
  esaTask.addFileset(fileSet);
  esaTask.setDestFile(destfile);
  esaTask.setSymbolicName("esatask-test");
  esaTask.setVersion("1.0.0");
  esaTask.setManifest(new File(srcDir,"SUBSYSTEM.MF"));
  esaTask.execute();
  assertTrue(destfile.exists());
  try {
    ZipFile esaArchive=new ZipFile(destfile);
    assertNotNull(esaArchive);
    ZipEntry subsystemManifest=esaArchive.getEntry("OSGI-INF/SUBSYSTEM.MF");
    assertNotNull(subsystemManifest);
  }
 catch (  IOException e) {
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void generateArchiveWithNewManifest(){
  File srcDir=new File("../src/test/resources");
  assertTrue(srcDir.exists());
  File destfile=new File("target/esa-test.esa");
  if (destfile.exists()) {
    destfile.delete();
  }
  assertFalse(destfile.exists());
  EsaTask esaTask=new EsaTask();
  Project testProject=new Project();
  esaTask.setProject(testProject);
  FileSet fileSet=new FileSet();
  fileSet.setDir(srcDir);
  fileSet.setIncludes("*.jar");
  esaTask.addFileset(fileSet);
  esaTask.setDestFile(destfile);
  esaTask.setSymbolicName("esatask-test");
  esaTask.setName("ESA Test Task");
  esaTask.setVersion("1.0.0");
  esaTask.setGenerateManifest(true);
  esaTask.execute();
  assertTrue(destfile.exists());
  try {
    ZipFile esaArchive=new ZipFile(destfile);
    assertNotNull(esaArchive);
    ZipEntry subsystemManifest=esaArchive.getEntry("OSGI-INF/SUBSYSTEM.MF");
    assertNotNull(subsystemManifest);
  }
 catch (  IOException e) {
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.management.impl.AriesApplicationManagerImplTest </h4><pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateAndConversion() throws Exception {
  AriesApplication app=createApplication(CONVERSION_EBA);
  ApplicationMetadata appMeta=app.getApplicationMetadata();
  assertEquals(appMeta.getApplicationName(),"conversion.eba");
  assertEquals(appMeta.getApplicationSymbolicName(),"conversion.eba");
  assertEquals(appMeta.getApplicationVersion(),new Version("0.0"));
  List<Content> appContent=appMeta.getApplicationContents();
  assertEquals(2,appContent.size());
  Content fbw=new ContentImpl("hello.world.jar;version=\"[1.1.0, 1.1.0]\"");
  Content mbl=new ContentImpl("helloWorld.war;version=\"[0.0.0, 0.0.0]\"");
  assertTrue(appContent.contains(fbw));
  assertTrue(appContent.contains(mbl));
  DeploymentMetadata dm=app.getDeploymentMetadata();
  List<DeploymentContent> dcList=dm.getApplicationDeploymentContents();
  assertEquals(2,dcList.size());
  DeploymentContent dc1=new DeploymentContentImpl("hello.world.jar;deployed-version=1.1.0");
  DeploymentContent dc2=new DeploymentContentImpl("helloWorld.war;deployed-version=0.0.0");
  DeploymentContent dc3=new DeploymentContentImpl("a.handy.persistence.library;deployed-version=1.1.0");
  assertTrue(dcList.contains(dc1));
  assertTrue(dcList.contains(dc2));
  dcList=dm.getApplicationProvisionBundles();
  assertEquals(1,dcList.size());
  assertTrue(dcList.contains(dc3));
  assertEquals(2,app.getBundleInfo().size());
  BundleInfo info;
  info=findBundleInfo(app.getBundleInfo(),"hello.world.jar");
  assertNotNull(info);
  assertEquals("HelloWorldJar",info.getHeaders().get(Constants.BUNDLE_NAME));
  info=findBundleInfo(app.getBundleInfo(),"helloWorld.war");
  assertNotNull(info);
  assertEquals("helloWorld.war",info.getHeaders().get(Constants.BUNDLE_NAME));
  assertEquals("/test",info.getHeaders().get("Bundle-ContextPath"));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStoreAndReload() throws Exception {
  AriesApplication app=createApplication(TEST_EBA);
  File dest=new File("ariesApplicationManagerImplTest/stored.eba");
  app.store(dest);
  IDirectory storedEba=FileSystem.getFSRoot(dest);
  assertNotNull(storedEba);
  assertEquals(storedEba.listFiles().size(),3);
  IFile ifile=storedEba.getFile("META-INF/APPLICATION.MF");
  assertNotNull(ifile);
  ifile=storedEba.getFile("META-INF/DEPLOYMENT.MF");
  assertNotNull(ifile);
  ifile=storedEba.getFile("foo.bar.widgets.jar");
  assertNotNull(ifile);
  ifile=storedEba.getFile("my.business.logic.jar");
  assertNotNull(ifile);
  AriesApplication newApp=_appMgr.createApplication(storedEba);
  DeploymentMetadata dm=newApp.getDeploymentMetadata();
  assertEquals(2,dm.getApplicationDeploymentContents().size());
  assertEquals(1,dm.getApplicationProvisionBundles().size());
  assertEquals(dm.getApplicationSymbolicName(),app.getApplicationMetadata().getApplicationSymbolicName());
  assertEquals(dm.getApplicationVersion(),app.getApplicationMetadata().getApplicationVersion());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.management.repository.ApplicationRepositoryTest </h4><pre class="type-7 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testBundleNotInApp(){
  AriesApplication app=Skeleton.newMock(AriesApplication.class);
  BundleInfo bi=Skeleton.newMock(BundleInfo.class);
  Skeleton.getSkeleton(bi).setReturnValue(new MethodCall(BundleInfo.class,"getSymbolicName"),"test.bundle");
  Skeleton.getSkeleton(bi).setReturnValue(new MethodCall(BundleInfo.class,"getVersion"),new Version("1.0.0"));
  Skeleton.getSkeleton(app).setReturnValue(new MethodCall(AriesApplication.class,"getBundleInfo"),new HashSet<BundleInfo>());
  ApplicationRepository rep=new ApplicationRepository(app);
  BundleSuggestion sug=rep.suggestBundleToUse(new DeploymentContentImpl("test.bundle",new Version("2.0.0")));
  assertNull("We have apparently found a bundle that is not in the application in the ApplicationRepository",sug);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.resolve.transform.cm.itest.ConfigurationPostResolverTest </h4><pre class="type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This test validates that the transformer is correctly detecting the config admin package. Checks
 * are performed to validate that an existing import package is still honored etc.
 * @throws Exception
 */
@Test public void validatePostResolveTransform() throws Exception {
  RichBundleContext ctx=new RichBundleContext(bundleContext);
  PostResolveTransformer transformer=ctx.getService(PostResolveTransformer.class);
  Assert.assertNotNull("Unable to locate transformer",transformer);
  ApplicationMetadata mockApplicationMetadata=Skeleton.newMock(ApplicationMetadata.class);
  MockDeployedBundles originalDeployedBundles=new MockDeployedBundles();
  originalDeployedBundles.setDeployedContent(getNonConfigModelledResources());
  DeployedBundles transformedDeployedBundles=transformer.postResolveProcess(mockApplicationMetadata,originalDeployedBundles);
  Assert.assertNotNull("An instance should have been returned",transformedDeployedBundles);
  Assert.assertEquals(originalDeployedBundles.getImportPackage(),transformedDeployedBundles.getImportPackage());
  originalDeployedBundles=new MockDeployedBundles();
  originalDeployedBundles.setDeployedContent(getConfigModelledResources());
  transformedDeployedBundles=transformer.postResolveProcess(mockApplicationMetadata,originalDeployedBundles);
  Assert.assertNotNull("An instance should have been returned",transformedDeployedBundles);
  Assert.assertNotSame("Missing config package",originalDeployedBundles.getImportPackage(),transformedDeployedBundles.getImportPackage());
  Assert.assertEquals("Missing config package","org.osgi.service.cm;version=\"1.2.0\"",transformedDeployedBundles.getImportPackage());
  originalDeployedBundles=new MockDeployedBundles();
  originalDeployedBundles.setDeployedContent(getConfigModelledResources());
  originalDeployedBundles.setImportPackage("org.foo.bar;version=\1.0.0\",org.bar.foo;version=\"1.0.0\"");
  transformedDeployedBundles=transformer.postResolveProcess(mockApplicationMetadata,originalDeployedBundles);
  Assert.assertNotNull("An instance should have been returned",transformedDeployedBundles);
  Assert.assertNotSame("Missing config package",originalDeployedBundles.getImportPackage(),transformedDeployedBundles.getImportPackage());
  Assert.assertEquals("Missing config package","org.foo.bar;version=\1.0.0\",org.bar.foo;version=\"1.0.0\",org.osgi.service.cm;version=\"1.2.0\"",transformedDeployedBundles.getImportPackage());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.runtime.itests.IsolatedCfgAdminRuntimeTest </h4><pre class="type-9 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Creates two applications, as follows:
 * <p/>
 * - helloworld-bp.eba ------
 * |
 * | This application contains a helloworld bundle which contains an interface and impl for HelloWorld. Upon being started
 * | blueprint will create a new container for this bundle and register the HelloWorld service. The service will be injected
 * | with a message coming from the ConfigurationAdmin service using the PID: helloworld-bp. As a CM property placeholder is
 * | used, a ManagedService will also be registered on the bundles behalf so that further updates can be captured. Note that
 * | the blueprint configuration is wired to reload the container on a configuration update (to allow easier tracking of when
 * | to test service contents etc).
 * |
 * | The application also contains a configuration admin bundle (pulled from Maven).
 * ---------------------------
 * <p/>
 * - helloworld-mn.eba -------
 * |
 * | This application contains a helloworld bundle containing an activator that will register itself as a ManagedService for the
 * | PID: helloworld-mn. The activator will also expose out a HelloWorld service. Upon recieving an update from the packaged
 * | Configuration Admin service, the HelloWorld service will be re-registered using the latest configuration, namely the "message".
 * |
 * | The application also contains a configuration admin bundle (pulled from Maven).
 * ---------------------------
 * @throws Exception
 */
@Before public void constructApplications() throws Exception {
  Assert.assertNotNull("Could not find Maven URL handler",(new RichBundleContext(context())).getService(URLStreamHandlerService.class,"url.handler.protocol=mvn",300000));
  MavenArtifactProvisionOption configAdminProvisionOption=mavenBundleInTest(getClass().getClassLoader(),"org.apache.felix","org.apache.felix.configadmin");
  Assert.assertNotNull("Unable to lookup config admin maven bundle",configAdminProvisionOption);
  URL configAdminUrl=new URL(configAdminProvisionOption.getURL());
  ZipFixture helloWorldBluePrintEba=ArchiveFixture.newZip().binary("META-INF/APPLICATION.MF",IsolatedCfgAdminRuntimeTest.class.getClassLoader().getResourceAsStream("isolated/config/APPLICATION-BP.MF")).binary("org.apache.felix.configadmin.jar",configAdminUrl.openStream()).jar("helloworld-bundle.jar").manifest().symbolicName("org.apache.aries.isolated.helloworldbp").attribute("Bundle-Version","1.0.0").attribute("Import-Package","org.osgi.service.cm").end().binary("org/apache/aries/isolated/sample/HelloWorld.class",IsolatedCfgAdminRuntimeTest.class.getClassLoader().getResourceAsStream("org/apache/aries/isolated/sample/HelloWorld.class")).binary("org/apache/aries/isolated/sample/HelloWorldImpl.class",IsolatedCfgAdminRuntimeTest.class.getClassLoader().getResourceAsStream("org/apache/aries/isolated/sample/HelloWorldImpl.class")).binary("OSGI-INF/blueprint/blueprint.xml",IsolatedCfgAdminRuntimeTest.class.getClassLoader().getResourceAsStream("isolated/config/blueprint.xml")).end();
  ZipFixture helloWorldManualEba=ArchiveFixture.newZip().binary("META-INF/APPLICATION.MF",IsolatedCfgAdminRuntimeTest.class.getClassLoader().getResourceAsStream("isolated/config/APPLICATION-MN.MF")).binary("org.apache.felix.configadmin.jar",configAdminUrl.openStream()).jar("helloworld-bundle.jar").manifest().symbolicName("org.apache.aries.isolated.helloworldmn").attribute("Bundle-Version","1.0.0").attribute("Bundle-Activator","org.apache.aries.isolated.config.HelloWorldManagedServiceImpl").attribute("Import-Package","org.osgi.framework,org.osgi.service.cm").end().binary("org/apache/aries/isolated/sample/HelloWorld.class",IsolatedCfgAdminRuntimeTest.class.getClassLoader().getResourceAsStream("org/apache/aries/isolated/sample/HelloWorld.class")).binary("org/apache/aries/isolated/sample/HelloWorldImpl.class",IsolatedCfgAdminRuntimeTest.class.getClassLoader().getResourceAsStream("org/apache/aries/isolated/sample/HelloWorldImpl.class")).binary("org/apache/aries/isolated/config/HelloWorldManagedServiceImpl.class",IsolatedCfgAdminRuntimeTest.class.getClassLoader().getResourceAsStream("org/apache/aries/isolated/config/HelloWorldManagedServiceImpl.class")).end();
  FileOutputStream fout=new FileOutputStream(APP_HWBP);
  helloWorldBluePrintEba.writeOut(fout);
  fout.close();
  fout=new FileOutputStream(APP_HWMN);
  helloWorldManualEba.writeOut(fout);
  fout.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.runtime.itests.IsolatedRuntimeTest </h4><pre class="type-1 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testUninstallReinstall() throws Exception {
  AriesApplicationManager manager=context().getService(AriesApplicationManager.class);
  AriesApplication app=manager.createApplication(FileSystem.getFSRoot(new File("test2.eba")));
  AriesApplicationContext ctx=manager.install(app);
  app=ctx.getApplication();
  ctx.start();
  assertHelloWorldService("org.apache.aries.sample2");
  ctx.stop();
  manager.uninstall(ctx);
  assertNull(IsolationTestUtils.findIsolatedAppBundleContext(bundleContext,"org.apache.aries.sample2"));
  ctx=manager.install(app);
  ctx.start();
  assertHelloWorldService("org.apache.aries.sample2");
  manager.uninstall(ctx);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.runtime.itests.MinimumImportsTest </h4><pre class="type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAppUsingAriesApplicationManager() throws Exception {
  AppMgrClientBlueprintListener acbl=new AppMgrClientBlueprintListener();
  ServiceRegistration sr=bundleContext.registerService("org.osgi.service.blueprint.container.BlueprintListener",acbl,null);
  AriesApplicationManager manager=context().getService(AriesApplicationManager.class);
  AriesApplication app=manager.createApplication(FileSystem.getFSRoot(new File("appmgrclienttest.eba")));
  RepositoryAdmin repositoryAdmin=context().getService(RepositoryAdmin.class);
  Repository[] repos=repositoryAdmin.listRepositories();
  for (  Repository repo : repos) {
    repositoryAdmin.removeRepository(repo.getURI());
  }
  repositoryAdmin.addRepository(new File("repository.xml").toURI().toURL());
  AriesApplicationContext ctx=manager.install(app);
  ctx.start();
  int sleepfor=3000;
  while ((acbl.success == null || acbl.success == false) && sleepfor > 0) {
    Thread.sleep(100);
    sleepfor-=100;
  }
  assertNotNull("Timed out - didn't receive Blueprint CREATED or FAILURE event",acbl.success);
  assertTrue("Received Blueprint FAILURE event",acbl.success);
  ctx.stop();
  manager.uninstall(ctx);
  sr.unregister();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.runtime.itests.UpdateAppTest </h4><pre class="type-4 type-3 type-1 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testUpdateThenStart() throws Exception {
  AriesApplicationManager manager=context().getService(AriesApplicationManager.class);
  AriesApplication app=manager.createApplication(FileSystem.getFSRoot(new File("test.eba")));
  AriesApplicationContext ctx=manager.install(app);
  app=ctx.getApplication();
  BundleContext oldCtx=IsolationTestUtils.findIsolatedAppBundleContext(bundleContext,SAMPLE_APP_NAME);
  installMockUpdateStrategy();
  ctx=updateApp(manager,app);
  BundleContext newCtx=IsolationTestUtils.findIsolatedAppBundleContext(bundleContext,SAMPLE_APP_NAME);
  assertNull("App is not started yet but HelloWorld service is already there",IsolationTestUtils.findHelloWorldService(bundleContext,SAMPLE_APP_NAME));
  ctx.start();
  assertAppMessage("hello brave new world");
  assertTrue("We bounced the app where the update was supposed to do an update in place",oldCtx == newCtx);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.utils.manifest.ManifestProcessorTest </h4><pre class="type-4 type-3 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check a simple manifest can be read.
 * @throws Exception
 */
@Test public void testSimpleManifest() throws Exception {
  Map<String,String> pairs=new HashMap<String,String>();
  pairs.put("Manifest-Version","1.0");
  pairs.put("Application-ManifestVersion","1.0");
  pairs.put("Application-Name",appName);
  pairs.put("Application-SymbolicName","com.travel.reservation");
  pairs.put("Application-Version","1.2");
  pairs.put("Application-Content","com.travel.reservation.web;version=\"[1.1.0,1.2.0)\",com.travel.reservation.business");
  pairs.put("Export-Package","com.travel.reservation.api;version=1.2");
  pairs.put("Import-Package","com.travel.flight.api;version=\"[2.1.1,3.0.0)\",com.travel.rail.api;version=\"[1.0.0,2.0.0)\"");
  pairs.put("Application-Services","services.xml");
  InputStream in=getClass().getClassLoader().getResourceAsStream("META-INF/APPLICATION.MF");
  Manifest mf=new Manifest(in);
  Map<String,String> map=ManifestProcessor.readManifestIntoMap(mf);
  assertNotNull(map);
  for (  String key : pairs.keySet()) {
    assertTrue("Key: " + key + " was not found",map.containsKey(key));
    String value=map.get(key);
    assertNotNull("Value was not present for key: " + key,value);
    assertEquals("Value was not correct for key: " + key,pairs.get(key),value);
  }
  assertEquals("The maps did not match",pairs,map);
}

</code></pre>

<br>
<pre class="type-12 type-5 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check metadata can be extracted from a simple manifest.
 */
@Test public void testManifestMetadata() throws Exception {
  ApplicationMetadataFactoryImpl manager=new ApplicationMetadataFactoryImpl();
  InputStream in=getClass().getClassLoader().getResourceAsStream("META-INF/APPLICATION.MF");
  ApplicationMetadata am=manager.parseApplicationMetadata(in);
  assertNotNull(am);
  assertEquals(am.getApplicationName(),appName);
  List<Content> contents=am.getApplicationContents();
  for (  Content content : contents) {
    if ("com.travel.reservation.web".equals(content.getContentName())) {
      VersionRange vr=content.getVersion();
      assertEquals(vr.getMinimumVersion(),new Version("1.1.0"));
      assertEquals(vr.getMaximumVersion(),new Version("1.2.0"));
    }
 else     if ("com.travel.reservation.business".equals(content.getContentName())) {
      VersionRange vr=content.getVersion();
      assertEquals(new Version(0,0,0),vr.getMinimumVersion());
    }
 else     fail("Unexepcted content name " + content.getContentName());
  }
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testManifestWithoutEndingInNewLine() throws Exception {
  ApplicationMetadataFactoryImpl manager=new ApplicationMetadataFactoryImpl();
  InputStream in=getClass().getClassLoader().getResourceAsStream("META-INF/APPLICATION3.MF");
  ApplicationMetadata am=manager.parseApplicationMetadata(in);
  assertNotNull(am);
  assertEquals("Wrong number of bundles are in the application",1,am.getApplicationContents().size());
  assertEquals("Wrong bundle name","org.apache.aries.applications.test.bundle",am.getApplicationContents().get(0).getContentName());
}

</code></pre>

<br>
<pre class="type-12 type-5 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check metadata can be extracted from a manifest that uses multiple lines
 * for a single manifest attribute.
 */
@Test public void testManifestMetadataWithMultiLineEntries() throws Exception {
  ApplicationMetadataFactoryImpl manager=new ApplicationMetadataFactoryImpl();
  InputStream in=getClass().getClassLoader().getResourceAsStream("META-INF/APPLICATION2.MF");
  ApplicationMetadata am=manager.parseApplicationMetadata(in);
  assertNotNull(am);
  assertEquals(am.getApplicationName(),appName);
  List<Content> contents=am.getApplicationContents();
  for (  Content content : contents) {
    if ("com.travel.reservation.web".equals(content.getContentName())) {
      VersionRange vr=content.getVersion();
      assertEquals(vr.getMinimumVersion(),new Version("1.1.0"));
      assertEquals(vr.getMaximumVersion(),new Version("1.2.0"));
    }
 else     if ("com.travel.reservation.business".equals(content.getContentName())) {
      VersionRange vr=content.getVersion();
      assertEquals(new Version(0,0,0),vr.getMinimumVersion());
    }
 else     fail("Unexepcted content name " + content.getContentName());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.async.promise.test.ChainTest </h4><pre class="type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThenNullResolved() throws Exception {
  Deferred<String> def=new Deferred<String>();
  def.resolve("ok");
  Promise<String> chain=def.getPromise().then(null);
  assertTrue("chain resolved",chain.isDone());
  assertNull("chain value null",chain.getValue());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThenNull() throws Exception {
  Deferred<String> def=new Deferred<String>();
  final Promise<String> promise=def.getPromise();
  Promise<String> chain=promise.then(null);
  assertFalse("chain not resolved",chain.isDone());
  def.resolve("ok");
  assertTrue("chain resolved",chain.isDone());
  assertNull("chain value null",chain.getValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.async.promise.test.DeferredTest </h4><pre class="type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveWithSuccess() throws Exception {
  Deferred<String> def=new Deferred<String>();
  Promise<String> promise=def.getPromise();
  Deferred<String> with=new Deferred<String>();
  Promise<Void> resolvedWith=def.resolveWith(with.getPromise());
  with.resolve("resolveWith");
  assertTrue("Promise resolved",promise.isDone());
  assertEquals("Value matches","resolveWith",promise.getValue());
  assertNull("resolveWith null",resolvedWith.getValue());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolve() throws Exception {
  Deferred<String> def=new Deferred<String>();
  Promise<String> promise=def.getPromise();
  assertFalse("Initial Promise not resolved",promise.isDone());
  def.resolve("Hello");
  assertTrue("Promise resolved",promise.isDone());
  assertEquals("Value matches","Hello",promise.getValue());
  assertNull("Failure is null",promise.getFailure());
  try {
    def.resolve("Again");
    fail("Already resolved didn't throw IllegalStateException");
  }
 catch (  IllegalStateException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveWithFailure() throws Exception {
  Deferred<String> def=new Deferred<String>();
  Promise<String> promise=def.getPromise();
  Deferred<String> def2=new Deferred<String>();
  Promise<String> promise2=def2.getPromise();
  Promise<Void> with=def.resolveWith(promise2);
  Exception failure=new Exception("resolveWithFailure");
  def2.fail(failure);
  assertTrue("Promise resolved",promise.isDone());
  assertEquals("Failure matches",failure,promise.getFailure());
  assertNull("resolveWith null",with.getValue());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFail() throws Exception {
  Deferred<String> def=new Deferred<String>();
  Promise<String> promise=def.getPromise();
  Exception failure=new Exception("Oops");
  def.fail(failure);
  assertTrue("Promise resolved",promise.isDone());
  assertEquals("Failure matches",failure,promise.getFailure());
  try {
    promise.getValue();
    fail("getValue didn't throw InvocationTargetException");
  }
 catch (  InvocationTargetException e) {
    assertEquals("Failure matches",failure,e.getCause());
  }
  try {
    def.fail(failure);
    fail("Already failed didn't throw IllegalStateException");
  }
 catch (  IllegalStateException e) {
    assertNotNull(e);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.BlueprintContainerTest </h4><pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimple() throws Exception {
  URL url=getClass().getClassLoader().getResource("test.xml");
  BlueprintContainerImpl container=new BlueprintContainerImpl(getClass().getClassLoader(),Arrays.asList(url));
  Foo foo=(Foo)container.getComponentInstance("foo");
  System.out.println(foo);
  assertNotNull(foo);
  assertEquals(5,foo.getA());
  assertEquals(1,foo.getB());
  container.destroy();
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPlaceholders() throws Exception {
  URL url1=getClass().getClassLoader().getResource("test.xml");
  URL url2=getClass().getClassLoader().getResource("test2.xml");
  BlueprintContainerImpl container=new BlueprintContainerImpl(getClass().getClassLoader(),Arrays.asList(url1,url2));
  Foo foo=(Foo)container.getComponentInstance("foo");
  System.out.println(foo);
  assertNotNull(foo);
  assertEquals(5,foo.getA());
  assertEquals(1,foo.getB());
  container.destroy();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.container.BeanRecipeTest </h4><pre class="type-5 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void protectedClassAccess() throws Exception {
  BlueprintContainerImpl container=new BlueprintContainerImpl(null,null,null,null,null,null,null,null,null,null);
  BeanRecipe recipe=new BeanRecipe("a",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory().create()));
  recipe.setFactoryMethod("getA");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
  recipe=new BeanRecipe("b",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory().create()));
  recipe.setFactoryMethod("getB");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
  recipe=new BeanRecipe("c",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory().create()));
  recipe.setFactoryMethod("getC");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
  recipe=new BeanRecipe("d",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory().create()));
  recipe.setFactoryMethod("getD");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  try {
    assertNotNull(recipe.create());
    fail("Should have thrown an exception");
  }
 catch (  ComponentDefinitionException e) {
  }
  recipe=new BeanRecipe("a",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory()));
  recipe.setFactoryMethod("create");
  recipe.setProperty("a","a");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
  recipe=new BeanRecipe("b",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory()));
  recipe.setFactoryMethod("create");
  recipe.setProperty("b","b");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
  recipe=new BeanRecipe("c",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory()));
  recipe.setFactoryMethod("create");
  recipe.setProperty("c","c");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
  recipe=new BeanRecipe("d",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory()));
  recipe.setFactoryMethod("create");
  recipe.setProperty("d","d");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  try {
    assertNotNull(recipe.create());
    fail("Should have thrown an exception");
  }
 catch (  ComponentDefinitionException e) {
  }
  recipe=new BeanRecipe("a",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory()));
  recipe.setFactoryMethod("create");
  recipe.setInitMethod("init");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.ASMMultiBundleTest </h4><pre class="type-3 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void multiBundleTest() throws Exception {
  Bundle bundlea=context().getBundleByName("org.apache.aries.blueprint.testbundlea");
  assertNotNull(bundlea);
  bundlea.start();
  Bundle bundleb=context().getBundleByName("org.apache.aries.blueprint.testbundleb");
  assertNotNull(bundleb);
  bundleb.start();
  BlueprintContainer beanContainer=Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.blueprint.testbundleb");
  assertNotNull(beanContainer);
  Object obj1=beanContainer.getComponentInstance("TestBeanA");
  assertTrue(obj1 instanceof TestBean);
  TestBean testBeanA=(TestBean)obj1;
  org.junit.Assert.assertEquals("RED",testBeanA.getRed());
  org.junit.Assert.assertEquals("GREEN",testBeanA.getGreen());
  org.junit.Assert.assertEquals("BLUE",testBeanA.getBlue());
  Object obj2=beanContainer.getComponentInstance("TestBeanB");
  assertTrue(obj2 instanceof TestBean);
  TestBean testBeanB=(TestBean)obj2;
  org.junit.Assert.assertEquals("ONE_VALUE",testBeanB.getRed());
  org.junit.Assert.assertEquals("GREEN",testBeanB.getGreen());
  org.junit.Assert.assertEquals("BLUE",testBeanB.getBlue());
  Object obj3=beanContainer.getComponentInstance("TestBeanC");
  assertTrue(obj3 instanceof TestBean);
  TestBean testBeanC=(TestBean)obj3;
  BlueprintContainer handlerContainer=Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.blueprint.testbundlea");
  assertNotNull(handlerContainer);
  Object ns1=handlerContainer.getComponentInstance("NSHandlerOne");
  assertTrue(ns1 instanceof NSHandlerOne);
  Object ns2=handlerContainer.getComponentInstance("NSHandlerTwo");
  assertTrue(ns2 instanceof NSHandlerTwo);
  NSHandlerTwo nstwo=(NSHandlerTwo)ns2;
  List<String> log=nstwo.getLog();
  checkInterceptorLog(new String[]{"PRECALL:TestBeanC:methodToInvoke:[RED]:","POSTCALL[true]:TestBeanC:methodToInvoke:[RED]:","PRECALL:TestBeanC:methodToInvoke:[BLUE]:","POSTCALL[false]:TestBeanC:methodToInvoke:[BLUE]:"},log);
  RuntimeException re=null;
  try {
    testBeanC.methodToInvoke("GREEN");
  }
 catch (  RuntimeException e) {
    re=e;
  }
  assertNotNull("invocation of Green did not cause an exception as expected",re);
  log=nstwo.getLog();
  checkInterceptorLog(new String[]{"PRECALL:TestBeanC:methodToInvoke:[RED]:","POSTCALL[true]:TestBeanC:methodToInvoke:[RED]:","PRECALL:TestBeanC:methodToInvoke:[BLUE]:","POSTCALL[false]:TestBeanC:methodToInvoke:[BLUE]:","PRECALL:TestBeanC:methodToInvoke:[GREEN]:","POSTCALLEXCEPTION[java.lang.RuntimeException: MATCHED ON GREEN (GREEN)]:TestBeanC:methodToInvoke:[GREEN]:"},log);
  Object obj4=beanContainer.getComponentInstance("ProcessedBean");
  assertTrue(obj4 instanceof ProcessableBean);
  ProcessableBean pb=(ProcessableBean)obj4;
  Object bp=beanContainer.getComponentInstance("http://ns.handler.three/BeanProcessor");
  assertNotNull(bp);
  assertTrue(bp instanceof BeanProcessor);
  assertEquals(1,pb.getProcessedBy().size());
  assertEquals(pb.getProcessedBy().get(0),bp);
  assertEquals(pb.getProcessedBy(Phase.BEFORE_INIT).get(0),bp);
  assertEquals(pb.getProcessedBy(Phase.AFTER_INIT).get(0),bp);
  Object objOther=beanContainer.getComponentInstance("PlaceHolderTestBean");
  assertTrue(objOther instanceof OtherBean);
  assertEquals("test1value",((OtherBean)objOther).getTestValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.BlueprintAnnotationTest </h4><pre class="type-9 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setUp() throws InvalidSyntaxException, InterruptedException {
  blueprintContainer=getBlueprintContainerForBundle("org.apache.aries.blueprint.sample-annotation");
  assertNotNull(blueprintContainer);
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testXmlConfig(){
  Object obj=blueprintContainer.getComponentInstance("testXmlConfigBean");
  assertNotNull(obj);
  assertEquals("org.apache.aries.blueprint.sample.TestXmlConfigBean",obj.getClass().getName());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Object obj=blueprintContainer.getComponentInstance("bar");
  assertNotNull(obj);
  assertEquals(Bar.class,obj.getClass());
  Bar bar=(Bar)obj;
  assertEquals("Hello FooBar",bar.getValue());
  obj=blueprintContainer.getComponentInstance("foo");
  assertNotNull(obj);
  assertEquals(Foo.class,obj.getClass());
  Foo foo=(Foo)obj;
  assertEquals(5,foo.getA());
  assertSame(bar,foo.getBar());
  assertEquals(Currency.getInstance("PLN"),foo.getCurrency());
  assertEquals(new SimpleDateFormat("yyyy.MM.dd").parse("2009.04.17"),foo.getDate());
  assertTrue(foo.isInitialized());
  assertFalse(foo.isDestroyed());
  assertNotNull(blueprintContainer.getComponentInstance("fragment"));
  obj=context().getService(Foo.class,"(blueprint.annotation.sample=true)",5000);
  assertNotNull(obj);
  assertEquals(foo.toString(),obj.toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.BlueprintContainerTest </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void test() throws Exception {
  applyCommonConfiguration(context());
  Bundle bundle=context().getBundleByName("org.apache.aries.blueprint.sample");
  assertNotNull(bundle);
  bundle.start();
  Helper.testBlueprintContainer(context(),bundle);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.BlueprintContainerUseSystemContextTest </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void test() throws Exception {
  applyCommonConfiguration(context());
  Bundle bundle=context().installBundle(sampleBundleOption().getURL());
  assertNotNull(bundle);
  bundle.start();
  Helper.testBlueprintContainer(context(),bundle);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.DeadLockTest </h4><pre class="type-15 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects are null
"></span><br>
@Test public void testReferenceListenerDeadlock() throws Exception {
  for (int i=0; i < TOTAL_REF_TEST_BUNDLES; i++) {
    Bundle b=context().getBundleByName("sample" + i);
    b.start();
  }
  for (int i=0; i < TOTAL_REF_TEST_BUNDLES; i++) {
    assertNotNull(Helper.getBlueprintContainerForBundle(context(),"sample" + i));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.FragmentTest </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testFragmentProvidesBlueprintFile() throws Exception {
  Runnable r=context().getService(Runnable.class);
  Assert.assertNotNull("Could not find blueprint registered service",r);
  BlueprintContainer bc=Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.test.host");
  Assert.assertNotNull("Could not find blueprint container for bundle",bc);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.FragmentTestBundleBlueprintAttribute </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testFragmentProvidesBlueprintFile() throws Exception {
  Runnable r=context().getService(Runnable.class);
  Assert.assertNotNull("Could not find blueprint registered service",r);
  BlueprintContainer bc=Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.test.host");
  Assert.assertNotNull("Could not find blueprint container for bundle",bc);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.QuiesceBlueprintTest </h4><pre class="type-12 type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiBundleQuiesce() throws Exception {
  System.out.println("In testMultiBundleQuiesce");
  Object obj=context().getService(TestBean.class);
  if (obj != null) {
    QuiesceParticipant participant=getParticipant("org.apache.aries.blueprint.core");
    if (participant != null) {
      TestQuiesceCallback callback=new TestQuiesceCallback();
      Bundle bundlea=getBundle("org.apache.aries.blueprint.testbundlea");
      assertNotNull(bundlea);
      bundlea.start();
      Bundle bundleq=getBundle("org.apache.aries.blueprint.testquiescebundle");
      System.out.println("Got the bundle");
      List<Bundle> bundles=new ArrayList<Bundle>();
      bundles.add(bundlea);
      bundles.add(bundleq);
      Thread t=new Thread(new TestBeanClient((TestBean)obj,1500));
      t.start();
      Thread.sleep(200);
      participant.quiesce(callback,bundles);
      System.out.println("Called Quiesce");
      Thread.sleep(500);
      Assert.assertTrue("Quiesce callback should have occurred once for bundle a but not for bundle q; calls should be 1, but it is " + callback.getCalls(),callback.getCalls() == 1);
      Thread.sleep(1500);
      System.out.println("After second sleep");
      Assert.assertTrue("Quiesce callback should have occurred twice, once for bundle a and q respectively; calls should be 2, but it is " + callback.getCalls(),callback.getCalls() == 2);
    }
 else {
      throw new Exception("No Quiesce Participant found for the blueprint service");
    }
  }
 else {
    throw new Exception("No Service returned for " + TestBean.class);
  }
}

</code></pre>

<br>
<pre class="type-12 type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoServicesQuiesce() throws Exception {
  System.out.println("In testNoServicesQuiesce");
  Object obj=context().getService(TestBean.class);
  if (obj != null) {
    QuiesceParticipant participant=getParticipant("org.apache.aries.blueprint.core");
    if (participant != null) {
      TestQuiesceCallback callbackA=new TestQuiesceCallback();
      TestQuiesceCallback callbackB=new TestQuiesceCallback();
      Bundle bundlea=getBundle("org.apache.aries.blueprint.testbundlea");
      assertNotNull(bundlea);
      bundlea.start();
      Bundle bundleb=getBundle("org.apache.aries.blueprint.testbundleb");
      assertNotNull(bundleb);
      bundleb.start();
      Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.blueprint.testbundleb");
      participant.quiesce(callbackB,Collections.singletonList(getBundle("org.apache.aries.blueprint.testbundleb")));
      System.out.println("Called Quiesce");
      Thread.sleep(200);
      Assert.assertTrue("Quiesce callback B should have occurred; calls should be 1, but it is " + callbackB.getCalls(),callbackB.getCalls() == 1);
      Assert.assertTrue("Quiesce callback A should not have occurred yet; calls should be 0, but it is " + callbackA.getCalls(),callbackA.getCalls() == 0);
      bundleb.stop();
      participant.quiesce(callbackA,Collections.singletonList(getBundle("org.apache.aries.blueprint.testbundlea")));
      Thread.sleep(1000);
      System.out.println("After second sleep");
      Assert.assertTrue("Quiesce callback A should have occurred once; calls should be 1, but it is " + callbackA.getCalls(),callbackA.getCalls() == 1);
      Assert.assertTrue("Quiesce callback B should have occurred once; calls should be 1, but it is " + callbackB.getCalls(),callbackB.getCalls() == 1);
    }
 else {
      throw new Exception("No Quiesce Participant found for the blueprint service");
    }
  }
 else {
    throw new Exception("No Service returned for " + TestBean.class);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.SpringExtenderTest </h4><pre class="type-5 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSpringBundle() throws Exception {
  try {
    context().getService(BeanCItf.class,1);
    fail("The service should not be registered");
  }
 catch (  RuntimeException e) {
  }
  Bundle bundles=context().getBundleByName("org.apache.aries.blueprint.testbundlee");
  assertNotNull(bundles);
  bundles.start();
  BlueprintContainer container=startBundleBlueprint("org.apache.aries.blueprint.testbundlee");
  assertNotNull(container);
  BeanCItf beanC1=context().getService(BeanCItf.class,"(name=BeanC-1)");
  assertEquals(1,beanC1.getInitialized());
  BeanCItf beanC2=context().getService(BeanCItf.class,"(name=BeanC-2)");
  assertEquals(1,beanC2.getInitialized());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.SpringTest </h4><pre class="type-4 type-5 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSpringBundle() throws Exception {
  Bundle bundles=context().getBundleByName("org.apache.aries.blueprint.testbundles");
  assertNotNull(bundles);
  bundles.start();
  BlueprintContainer container=startBundleBlueprint("org.apache.aries.blueprint.testbundles");
  List list=(List)container.getComponentInstance("springList");
  System.out.println(list);
  BeanCItf beanC=(BeanCItf)list.get(4);
  assertEquals(1,beanC.getInitialized());
  try {
    beanC.doSomething();
    fail("Should have thrown an exception because the transaction manager is not defined");
  }
 catch (  NoSuchBeanDefinitionException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.TestConfigAdmin </h4><pre class="type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("rawtypes") @Test public void testManagedServiceFactory() throws Exception {
  Configuration cf=ca.createFactoryConfiguration("blueprint-sample-managed-service-factory",null);
  cf.update(getConfig1());
  startTestBundle();
  Foo foo=context().getService(Foo.class,"(service.pid=blueprint-sample-managed-service-factory.*)");
  ServiceReference[] refs=context().getAllServiceReferences(Foo.class.getName(),"(service.pid=blueprint-sample-managed-service-factory.*)");
  assertNotNull("No services were registered for the managed service factory",refs);
  assertEquals("Multiple services were registered for the same pid.",1,refs.length);
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStrategyComponent() throws Exception {
  ca.getConfiguration("blueprint-sample-managed.component",null).update(getConfig1());
  startTestBundle();
  Foo foo=getComponent("component-managed");
  assertEquals(5,foo.getA());
  assertEquals(Currency.getInstance("PLN"),foo.getCurrency());
  ca.getConfiguration("blueprint-sample-managed.component",null).update(getConfig2());
  Thread.sleep(100);
  assertEquals(5,foo.getA());
  assertEquals(Currency.getInstance("PLN"),foo.getCurrency());
  assertNotNull(foo.getProps());
  assertEquals("10",foo.getProps().get("a"));
  assertEquals("USD",foo.getProps().get("currency"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.TestReferences </h4><pre class="type-5 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("rawtypes") @Test public void testUnaryReference() throws Exception {
  BlueprintContainer blueprintContainer=Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.blueprint.sample");
  assertNotNull(blueprintContainer);
  BindingListener listener=(BindingListener)blueprintContainer.getComponentInstance("bindingListener");
  assertNull(listener.getA());
  assertNull(listener.getReference());
  InterfaceA a=(InterfaceA)blueprintContainer.getComponentInstance("ref2");
  try {
    a.hello("world");
    fail("A ServiceUnavailableException should have been thrown");
  }
 catch (  ServiceUnavailableException e) {
  }
  ServiceRegistration reg1=bundleContext.registerService(InterfaceA.class.getName(),new InterfaceA(){
    public String hello(    String msg){
      return "Hello " + msg + "!";
    }
  }
,null);
  waitForAsynchronousHandling();
  assertNotNull(listener.getA());
  assertNotNull(listener.getReference());
  assertEquals("Hello world!",a.hello("world"));
  Hashtable<String,Object> props=new Hashtable<String,Object>();
  props.put(Constants.SERVICE_RANKING,Integer.valueOf(1));
  ServiceRegistration reg2=bundleContext.registerService(InterfaceA.class.getName(),new InterfaceA(){
    public String hello(    String msg){
      return "Good morning " + msg + "!";
    }
  }
,props);
  waitForAsynchronousHandling();
  assertNotNull(listener.getA());
  assertNotNull(listener.getReference());
  assertEquals("Hello world!",a.hello("world"));
  reg1.unregister();
  waitForAsynchronousHandling();
  assertNotNull(listener.getA());
  assertNotNull(listener.getReference());
  assertEquals("Good morning world!",a.hello("world"));
  reg2.unregister();
  waitForAsynchronousHandling();
  assertNull(listener.getA());
  assertNull(listener.getReference());
  try {
    a.hello("world");
    fail("A ServiceUnavailableException should have been thrown");
  }
 catch (  ServiceUnavailableException e) {
  }
}

</code></pre>

<br>
<pre class="type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReferencesCallableInDestroy() throws Exception {
  bundleContext.registerService(Runnable.class.getName(),new Thread(),null);
  BlueprintContainer blueprintContainer=Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.blueprint.sample");
  assertNotNull(blueprintContainer);
  DestroyTest dt=(DestroyTest)blueprintContainer.getComponentInstance("destroyCallingReference");
  Bundle b=findBundle("org.apache.aries.blueprint.sample");
  assertNotNull(b);
  b.stop();
  assertTrue("The destroy method was called",dt.waitForDestruction(1000));
  Exception e=dt.getDestroyFailure();
  if (e != null)   throw e;
}

</code></pre>

<br>
<pre class="type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("rawtypes") @Test public void testDefaultReference() throws Exception {
  BlueprintContainer blueprintContainer=Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.blueprint.sample");
  assertNotNull(blueprintContainer);
  Runnable refRunnable=(Runnable)blueprintContainer.getComponentInstance("refWithDefault");
  DefaultRunnable defaultRunnable=(DefaultRunnable)blueprintContainer.getComponentInstance("defaultRunnable");
  refRunnable.run();
  waitForAsynchronousHandling();
  Thread.sleep(2000);
  assertEquals("The default runnable was not called",1,defaultRunnable.getCount());
  final AtomicBoolean called=new AtomicBoolean(false);
  Runnable mockService=new Runnable(){
    public void run(){
      called.set(true);
    }
  }
;
  ServiceRegistration reg=bundleContext.registerService(Runnable.class.getName(),mockService,null);
  waitForAsynchronousHandling();
  Thread.sleep(2000);
  refRunnable.run();
  assertEquals("The default runnable was called when a service was bound",1,defaultRunnable.getCount());
  Assert.assertTrue("Service should have been called",called.get());
  reg.unregister();
  waitForAsynchronousHandling();
  Thread.sleep(2000);
  refRunnable.run();
  assertEquals("The default runnable was not called",2,defaultRunnable.getCount());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testListReferences() throws Exception {
  BlueprintContainer blueprintContainer=Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.blueprint.sample");
  assertNotNull(blueprintContainer);
  BindingListener listener=(BindingListener)blueprintContainer.getComponentInstance("listBindingListener");
  assertNull(listener.getA());
  assertNull(listener.getReference());
  List<?> refs=(List<?>)blueprintContainer.getComponentInstance("ref-list");
  assertNotNull(refs);
  assertTrue(refs.isEmpty());
  InterfaceA testService=new InterfaceA(){
    public String hello(    String msg){
      return "Hello " + msg + "!";
    }
  }
;
  bundleContext.registerService(InterfaceA.class.getName(),testService,null);
  waitForAsynchronousHandling();
  assertNotNull(listener.getA());
  assertNotNull(listener.getReference());
  assertEquals(1,refs.size());
  InterfaceA a=(InterfaceA)refs.get(0);
  assertNotNull(a);
  assertEquals("Hello world!",a.hello("world"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.TestRegistrationListener </h4><pre class="type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWithAutoExportEnabled() throws Exception {
  BlueprintContainer blueprintContainer=Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.blueprint.sample");
  assertNotNull(blueprintContainer);
  Foo foo=context().getService(Foo.class,"(" + BlueprintConstants.COMPONENT_NAME_PROPERTY + "=foo)");
  assertEquals(5,foo.getA());
  FooRegistrationListener listener=(FooRegistrationListener)blueprintContainer.getComponentInstance("fooRegistrationListener");
  Map<?,?> props=listener.getProperties();
  assertNotNull(props);
  assertTrue(props.containsKey(BlueprintConstants.COMPONENT_NAME_PROPERTY));
  assertEquals("foo",props.get(BlueprintConstants.COMPONENT_NAME_PROPERTY));
  assertTrue(props.containsKey("key"));
  assertEquals("value",props.get("key"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.cm.ManagedServiceFactoryTest </h4><pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test2() throws Exception {
  Configuration cf=ca.createFactoryConfiguration("blueprint-sample-managed-service-factory2",null);
  Hashtable<String,String> props=new Hashtable<String,String>();
  props.put("a","5");
  cf.update(props);
  @SuppressWarnings("rawtypes") ServiceReference sr=getServiceRef(Foo.class,"(key=foo2)");
  Foo foo=(Foo)context().getService(sr);
  assertNotNull(foo);
  assertEquals(5,foo.getA());
  assertEquals("default",foo.getB());
  assertNull(sr.getProperty("a"));
  assertNull(sr.getProperty("b"));
  props=new Hashtable<String,String>();
  props.put("a","5");
  props.put("b","foo");
  cf.update(props);
  Thread.sleep(500);
  assertEquals(5,foo.getA());
  assertEquals("foo",foo.getB());
  assertNull(sr.getProperty("a"));
  assertNull(sr.getProperty("b"));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFactoryCreation() throws Exception {
  Configuration cf=ca.createFactoryConfiguration("blueprint-sample-managed-service-factory5",null);
  Hashtable<String,String> props=new Hashtable<String,String>();
  props.put("a","5");
  cf.update(props);
  @SuppressWarnings("rawtypes") ServiceReference sr=getServiceRef(Foo.class,"(key=foo5)");
  Foo foo=(Foo)context().getService(sr);
  assertNotNull(foo);
  assertEquals(5,foo.getA());
  assertEquals("default",foo.getB());
  assertEquals("5",sr.getProperty("a"));
  assertNull(sr.getProperty("b"));
  props=new Hashtable<String,String>();
  props.put("a","5");
  props.put("b","foo");
  cf.update(props);
  Thread.sleep(500);
  assertEquals(5,foo.getA());
  assertEquals("default",foo.getB());
  assertEquals("5",sr.getProperty("a"));
  assertNull(sr.getProperty("b"));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test3() throws Exception {
  Configuration cf=ca.createFactoryConfiguration("blueprint-sample-managed-service-factory3",null);
  Hashtable<String,String> props=new Hashtable<String,String>();
  props.put("a","5");
  cf.update(props);
  @SuppressWarnings("rawtypes") ServiceReference sr=getServiceRef(Foo.class,"(&(key=foo3)(a=5))");
  assertNotNull(sr);
  Foo foo=(Foo)context().getService(sr);
  assertNotNull(foo);
  assertEquals(5,foo.getA());
  assertEquals("default",foo.getB());
  assertEquals("5",sr.getProperty("a"));
  assertNull(sr.getProperty("b"));
  props=new Hashtable<String,String>();
  props.put("a","5");
  props.put("b","foo");
  cf.update(props);
  Thread.sleep(500);
  assertEquals(5,foo.getA());
  assertEquals("foo",foo.getB());
  assertEquals("5",sr.getProperty("a"));
  assertEquals("foo",sr.getProperty("b"));
  cf.delete();
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test1() throws Exception {
  Configuration cf=ca.createFactoryConfiguration("blueprint-sample-managed-service-factory",null);
  Hashtable<String,String> props=new Hashtable<String,String>();
  props.put("a","5");
  cf.update(props);
  @SuppressWarnings("rawtypes") ServiceReference sr=getServiceRef(Foo.class,"(key=foo1)");
  Foo foo=(Foo)context().getService(sr);
  assertNotNull(foo);
  assertEquals(5,foo.getA());
  assertEquals("default",foo.getB());
  assertEquals("5",sr.getProperty("a"));
  assertNull(sr.getProperty("b"));
  props=new Hashtable<String,String>();
  props.put("a","5");
  props.put("b","foo");
  cf.update(props);
  Thread.sleep(500);
  assertEquals(5,foo.getA());
  assertEquals("default",foo.getB());
  assertEquals("5",sr.getProperty("a"));
  assertNull(sr.getProperty("b"));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("rawtypes") @Test public void testCreateAndUpdateUsingUpdateMethod() throws Exception {
  Configuration cf=ca.createFactoryConfiguration("blueprint-sample-managed-service-factory4",null);
  Hashtable<String,String> props=new Hashtable<String,String>();
  props.put("a","5");
  cf.update(props);
  Configuration cf2=ca.createFactoryConfiguration("blueprint-sample-managed-service-factory4",null);
  Hashtable<String,String> props2=new Hashtable<String,String>();
  props2.put("a","7");
  cf2.update(props2);
  ServiceReference sr=getServiceRef(Foo.class,"(&(key=foo4)(a=5))");
  ServiceReference sr2=getServiceRef(Foo.class,"(&(key=foo4)(a=7))");
  Foo foo=(Foo)context().getService(sr);
  assertNotNull(foo);
  assertEquals(5,foo.getA());
  assertEquals("default",foo.getB());
  assertEquals("5",sr.getProperty("a"));
  assertNull(sr.getProperty("b"));
  Foo foo2=(Foo)context().getService(sr2);
  assertNotNull(foo2);
  assertEquals(7,foo2.getA());
  assertEquals("default",foo2.getB());
  assertEquals("7",sr2.getProperty("a"));
  assertNull(sr2.getProperty("b"));
  props=new Hashtable<String,String>();
  props.put("a","5");
  props.put("b","foo");
  cf.update(props);
  props2=new Hashtable<String,String>();
  props2.put("a","7");
  props2.put("b","foo2");
  cf2.update(props2);
  Thread.sleep(500);
  assertEquals(5,foo.getA());
  assertEquals("foo",foo.getB());
  assertEquals("5",sr.getProperty("a"));
  assertEquals("foo",sr.getProperty("b"));
  assertEquals(7,foo2.getA());
  assertEquals("foo2",foo2.getB());
  assertEquals("7",sr2.getProperty("a"));
  assertEquals("foo2",sr2.getProperty("b"));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("rawtypes") @Test public void testCreateAndUpdate() throws Exception {
  Configuration cf=ca.createFactoryConfiguration("blueprint-sample-managed-service-factory3",null);
  Hashtable<String,String> props=new Hashtable<String,String>();
  props.put("a","5");
  cf.update(props);
  Configuration cf2=ca.createFactoryConfiguration("blueprint-sample-managed-service-factory3",null);
  Hashtable<String,String> props2=new Hashtable<String,String>();
  props2.put("a","7");
  cf2.update(props2);
  ServiceReference sr=getServiceRef(Foo.class,"(&(key=foo3)(a=5))");
  ServiceReference sr2=getServiceRef(Foo.class,"(&(key=foo3)(a=7))");
  Foo foo=(Foo)context().getService(sr);
  assertNotNull(foo);
  assertEquals(5,foo.getA());
  assertEquals("default",foo.getB());
  assertEquals("5",sr.getProperty("a"));
  assertNull(sr.getProperty("b"));
  Foo foo2=(Foo)context().getService(sr2);
  assertNotNull(foo2);
  assertEquals(7,foo2.getA());
  assertEquals("default",foo2.getB());
  assertEquals("7",sr2.getProperty("a"));
  assertNull(sr2.getProperty("b"));
  props=new Hashtable<String,String>();
  props.put("a","5");
  props.put("b","foo");
  cf.update(props);
  props2=new Hashtable<String,String>();
  props2.put("a","7");
  props2.put("b","foo2");
  cf2.update(props2);
  Thread.sleep(500);
  assertEquals(5,foo.getA());
  assertEquals("foo",foo.getB());
  assertEquals("5",sr.getProperty("a"));
  assertEquals("foo",sr.getProperty("b"));
  assertEquals(7,foo2.getA());
  assertEquals("foo2",foo2.getB());
  assertEquals("7",sr2.getProperty("a"));
  assertEquals("foo2",sr2.getProperty("b"));
  cf.delete();
  cf2.delete();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.plugin.model.BeanTest </h4><pre class="type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testParseNamedBean(){
  Bean bean=new Bean(ServiceAImpl1.class);
  bean.resolve(new Context());
  String definedName=ServiceAImpl1.class.getAnnotation(Named.class).value();
  assertEquals("my1",definedName);
  assertEquals("Name should be defined using @Named",definedName,bean.id);
  assertNull("There should be no initMethod",bean.initMethod);
  assertNull("There should be no destroyMethod",bean.destroyMethod);
  assertEquals("There should be no persistence fields",0,bean.persistenceFields.size());
  assertTrue("There should be no transaction definition",bean.transactionDefs.isEmpty());
  assertEquals("There should be no properties",0,bean.properties.size());
  assertTrue(bean.isPrototype);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testParseMyBean3(){
  Bean bean=new Bean(MyBean3.class);
  bean.resolve(new Context());
  assertEquals(MyBean3.class,bean.clazz);
  assertEquals("myBean3",bean.id);
  assertNull("There should be no initMethod",bean.initMethod);
  assertNull("There should be no destroyMethod",bean.destroyMethod);
  assertEquals("There should be no persistence fields",0,bean.persistenceFields.size());
  assertEquals(5,bean.properties.size());
  assertTrue(bean.isPrototype);
  Set<TransactionalDef> expectedTxs=Sets.newHashSet(new TransactionalDef("*","RequiresNew"),new TransactionalDef("txNotSupported","NotSupported"),new TransactionalDef("txMandatory","Mandatory"),new TransactionalDef("txNever","Never"),new TransactionalDef("txRequired","Required"),new TransactionalDef("txRequiresNew","RequiresNew"),new TransactionalDef("txSupports","Supports"));
  assertEquals(expectedTxs,bean.transactionDefs);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.plugin.model.PropertyTest </h4><pre class="type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testNoProperty() throws XMLStreamException {
  Field field=TestBeanForRef.class.getDeclaredFields()[3];
  Property property=Property.create(null,field);
  Assert.assertNull("Should not be a property",property);
}

</code></pre>

<br>
<pre class="type-4 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRefInject() throws XMLStreamException {
  Field field=TestBeanForRef.class.getDeclaredFields()[0];
  Matcher matcher=new Matcher(){
    public Bean getMatching(    BeanRef template){
      return new Bean(ServiceAImpl1.class);
    }
  }
;
  Property property=Property.create(matcher,field);
  Assert.assertEquals("serviceA",property.name);
  Assert.assertNull("Value should be null",property.value);
  Assert.assertEquals("my1",property.ref);
}

</code></pre>

<br>
<pre class="type-4 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRefAutowired() throws XMLStreamException {
  Field field=TestBeanForRef.class.getDeclaredFields()[1];
  Matcher matcher=new Matcher(){
    public Bean getMatching(    BeanRef template){
      return null;
    }
  }
;
  Property property=Property.create(matcher,field);
  Assert.assertEquals("serviceB",property.name);
  Assert.assertNull("Value should be null",property.value);
  Assert.assertEquals("Should be default name as no match is found","serviceB",property.ref);
}

</code></pre>

<br>
<pre class="type-4 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValue() throws XMLStreamException {
  Field field=TestBeanForRef.class.getDeclaredFields()[2];
  Property property=Property.create(null,field);
  Assert.assertEquals("name",property.name);
  Assert.assertEquals("${name}",property.value);
  Assert.assertNull("Ref should be null",property.ref);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.proxy.AbstractProxyTest </h4><pre class="type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that we don't generate classes twice
 */
@Test public void testRetrieveClass() throws Exception {
  Class<?> retrieved=getProxyClass(getTestClass());
  assertNotNull("The new class was null",retrieved);
  assertEquals("The same class was not returned",retrieved,getProxyClass(getTestClass()));
}

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testInner() throws Exception {
  assertNotNull(getProxyClass(ProxyTestClassInner.class));
}

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testStaticInner() throws Exception {
  assertNotNull(getProxyInstance(getProxyClass(ProxyTestClassStaticInner.class)));
}

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
/** 
 * This test uses the ProxySubclassGenerator to generate and load a subclass
 * of the specified getTestClass().
 * Once the subclass is generated we check that it wasn't null. We check
 * that the InvocationHandler constructor doesn't return a null object
 * either
 * Test method for{@link org.apache.aries.proxy.impl.ProxySubclassGenerator#generateAndLoadSubclass()}.
 */
@Test public void testGenerateAndLoadProxy() throws Exception {
  assertNotNull("Generated proxy subclass was null",getProxyClass(getTestClass()));
  assertNotNull("Generated proxy subclass instance was null",getProxyInstance(getProxyClass(getTestClass())));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.proxy.InterfaceProxyingTest </h4><pre class="type-4 type-5 type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test a class whose super couldn't be woven
 */
@Test public void testDelegationAndInterception() throws Exception {
  Collection<Class<?>> classes=new ArrayList<Class<?>>(Arrays.asList(Callable.class));
  TestListener tl=new TestListener();
  TestCallable tc=new TestCallable();
  Callable o=(Callable)InterfaceProxyGenerator.getProxyInstance(testBundle,null,classes,tc,tl);
  assertCalled(tl,false,false,false);
  assertNull(null,o.call());
  assertCalled(tl,true,true,false);
  assertEquals(Callable.class.getMethod("call"),tl.getLastMethod());
  tl.clear();
  assertCalled(tl,false,false,false);
  tc.setReturn(new Callable(){
    public Object call() throws Exception {
      throw new RuntimeException();
    }
  }
);
  try {
    o.call();
    fail("Should throw an exception");
  }
 catch (  RuntimeException re) {
    assertCalled(tl,true,false,true);
    assertSame(re,tl.getLastThrowable());
  }
  tl.clear();
  assertCalled(tl,false,false,false);
  tc.setReturn(new Callable(){
    public Object call() throws Exception {
      try {
        throw new RuntimeException();
      }
 catch (      RuntimeException re) {
        return new Object();
      }
    }
  }
);
  try {
    assertNotNull(o.call());
  }
  finally {
    assertCalled(tl,true,true,false);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.proxy.ProxySubclassGeneratorTest </h4><pre class="type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
/** 
 * Test a private constructor
 */
@Test public void testPrivateConstructor() throws Exception {
  Object o=ProxySubclassGenerator.newProxySubclassInstance(ProxyTestClassPrivateConstructor.class,ih);
  assertNotNull("The new instance was null",o);
}

</code></pre>

<br>
<pre class="type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
/** 
 * Test a generating proxy class of class with package access constructor.
 */
@SuppressWarnings("unchecked") @Test public void testPackageAccessCtor() throws Exception {
  Class<ProxyTestClassPackageAccessCtor> proxyClass=(Class<ProxyTestClassPackageAccessCtor>)ProxySubclassGenerator.getProxySubclass(ProxyTestClassPackageAccessCtor.class);
  ProxyTestClassPackageAccessCtor proxy=(ProxyTestClassPackageAccessCtor)getProxyInstance(proxyClass);
  assertNotNull("The new instance was null",proxy);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.proxy.WovenProxyGeneratorTest </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
/** 
 * Test a method marked final
 */
@Test public void testFinalMethod() throws Exception {
  assertNotNull(weavingLoader.loadClass(ProxyTestClassFinalMethod.class.getName()));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test a class whose super couldn't be woven
 */
@Test public void testUnweavableSuper() throws Exception {
  Class<?> woven=getProxyClass(ProxyTestClassUnweavableChild.class);
  assertNotNull(woven);
  assertNotNull(getProxyInstance(woven));
  TestListener tl=new TestListener();
  Object ptcuc=getProxyInstance(woven,tl);
  assertCalled(tl,false,false,false);
  Method m=ptcuc.getClass().getMethod("doStuff");
  assertEquals("Hi!",m.invoke(ptcuc));
  assertCalled(tl,true,true,false);
  assertEquals(ProxyTestClassUnweavableGrandParent.class.getMethod("doStuff"),tl.getLastMethod());
  tl.clear();
  m=getDeclaredMethod(ProxyTestClassUnweavableChild.class,"doStuff2");
  m.setAccessible(true);
  assertEquals("Hello!",m.invoke(ptcuc));
  assertCalled(tl,true,true,false);
  assertEquals(weavingLoader.loadClass(ProxyTestClassUnweavableSuper.class.getName()).getDeclaredMethod("doStuff2"),tl.getLastMethod());
}

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
/** 
 * Test a class marked final
 */
@Test public void testFinalClass() throws Exception {
  assertNotNull(weavingLoader.loadClass(ProxyTestClassFinal.class.getName()));
}

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
/** 
 * Test a private constructor
 */
@Test public void testPrivateConstructor() throws Exception {
  assertNotNull(weavingLoader.loadClass(ProxyTestClassFinal.class.getName()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.ejb.modelling.impl.EJBLocatorFactoryTest </h4><pre class="type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetEJBLocator(){
  EJBLocator locator=EJBLocatorFactory.getEJBLocator();
  assertNotNull(locator);
  assertTrue(locator.getClass().getName(),locator instanceof OpenEJBLocator);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetEJBLocatorNoOpenEJB() throws Exception {
  Class<?> elf=new ClassLoader(getClass().getClassLoader()){
    @Override public Class<?> loadClass(    String className) throws ClassNotFoundException {
      if (className.startsWith("org.apache.openejb"))       throw new ClassNotFoundException(className);
      if (className.equals(EJBLocatorFactory.class.getName())) {
        ByteArrayOutputStream baos=new ByteArrayOutputStream();
        try {
          IOUtils.copy(getResourceAsStream(className.replace('.','/') + ".class"),baos);
        }
 catch (        IOException e) {
          throw new ClassNotFoundException(className,e);
        }
        return defineClass(className,baos.toByteArray(),0,baos.size());
      }
      return super.loadClass(className);
    }
  }
.loadClass(EJBLocatorFactory.class.getName());
  EJBLocator locator=(EJBLocator)elf.getMethod("getEJBLocator").invoke(null);
  assertNotNull(locator);
  assertTrue(locator.getClass().getName(),locator instanceof EJBLocationUnavailable);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.ejb.openejb.extender.itest.AdvancedEJBBundleTest </h4><pre class="type-4 type-13 type-1 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testTransactionalEJB() throws Exception {
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ZipOutputStream zos=new ZipOutputStream(baos);
  addToZip(zos,"TX_MANIFEST.MF","META-INF/MANIFEST.MF");
  addToZip(zos,"beans/integration/impl/TxSingleton.class");
  addToZip(zos,"beans/integration/Tx.class");
  zos.close();
  Bundle test=context().installBundle("",new ByteArrayInputStream(baos.toByteArray()));
  try {
    test.start();
    Object bean=context().getService(context().getServiceReference(Tx.class.getName()));
    UserTransaction ut=context().getService(UserTransaction.class);
    Method no=bean.getClass().getMethod("getNoTransactionId");
    Method maybe=bean.getClass().getMethod("getMaybeTransactionId");
    Method tx=bean.getClass().getMethod("getTransactionId");
    Method newTx=bean.getClass().getMethod("getNewTransactionId");
    assertNull(no.invoke(bean));
    assertNull(maybe.invoke(bean));
    assertNotNull(tx.invoke(bean));
    assertNotNull(newTx.invoke(bean));
    ut.begin();
    try {
      Object key=context().getService(TransactionSynchronizationRegistry.class).getTransactionKey();
      assertNotNull(key);
      assertNull(no.invoke(bean));
      assertSame(key,maybe.invoke(bean));
      assertSame(key,tx.invoke(bean));
      Object o=newTx.invoke(bean);
      assertNotNull(o);
      assertNotSame(key,o);
    }
  finally {
      ut.commit();
    }
    test.stop();
  }
  finally {
    test.uninstall();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.blueprint.impl.BlueprintMetadataTest </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void noBlueprintContainerServiceIds() throws Exception {
  mockery.checking(new Expectations(){
{
      oneOf(mockContext).getServiceReferences(with(any(String.class)),with(any(String.class)));
      will(returnValue(null));
    }
  }
);
  assertNull(metadata.getBlueprintContainerServiceIds());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.cm.ConfigurationAdminMBeanHandlerTest </h4><pre class="type-7 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testConstructInjectMBean(){
  BundleContext bundleContext=mock(BundleContext.class);
  Logger agentLogger=mock(Logger.class);
  JMXAgentContext agentContext=new JMXAgentContext(bundleContext,null,agentLogger);
  ConfigurationAdmin cAdmin=mock(ConfigurationAdmin.class);
  ConfigurationAdminMBeanHandler handler=new ConfigurationAdminMBeanHandler(agentContext);
  StandardMBean mbean=handler.constructInjectMBean(cAdmin);
  assertNotNull(mbean);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.cm.ConfigurationAdminMBeanTest </h4><pre class="type-3 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("ManagedServiceFactory tests failing.. " + "Some issues surrounding creating a factory configuration and then retrieving by pid to update.. Needs investigation") @Test @SuppressWarnings("unchecked") public void testMBeanInterface() throws Exception {
  Bundle a=getBundleByName("org.apache.aries.jmx.test.bundlea");
  assertNull(managedServiceA.getConfig());
  TabularData data=mbean.getProperties("org.apache.aries.jmx.test.ServiceA");
  assertEquals(0,data.size());
  PropertyData<String> p1=PropertyData.newInstance("A1","first");
  data.put(p1.toCompositeData());
  PropertyData<Integer> p2=PropertyData.newInstance("A2",2);
  data.put(p2.toCompositeData());
  mbean.update("org.apache.aries.jmx.test.ServiceA",data);
  Thread.sleep(1000);
  Dictionary<String,Object> config=managedServiceA.getConfig();
  assertNotNull(config);
  assertEquals(3,config.size());
  assertEquals("org.apache.aries.jmx.test.ServiceA",config.get(Constants.SERVICE_PID));
  assertEquals("first",config.get("A1"));
  assertEquals(2,config.get("A2"));
  mbean.deleteForLocation("org.apache.aries.jmx.test.ServiceA",a.getLocation());
  Thread.sleep(1000);
  assertNull(managedServiceA.getConfig());
  String cpid=mbean.createFactoryConfiguration("jmx.test.B.factory");
  assertNotNull(cpid);
  assertTrue(cpid.contains("jmx.test.B.factory"));
  TabularData fConfig=mbean.getProperties(cpid);
  assertNotNull(fConfig);
  assertEquals(0,fConfig.values().size());
  PropertyData<String> prop1=PropertyData.newInstance("B1","value1");
  fConfig.put(prop1.toCompositeData());
  PropertyData<Boolean> prop2=PropertyData.newInstance("B2",true);
  fConfig.put(prop2.toCompositeData());
  mbean.update(cpid,fConfig);
  Thread.sleep(1000);
  InterfaceB configured=managedFactory.getConfigured(cpid);
  assertNotNull(configured);
  config=configured.getConfig();
  assertNotNull(config);
  assertTrue(config.size() >= 4);
  assertEquals("jmx.test.B.factory",config.get(ConfigurationAdmin.SERVICE_FACTORYPID));
  assertEquals(cpid,config.get(Constants.SERVICE_PID));
  assertEquals("value1",config.get("B1"));
  assertEquals("true",config.get("B2"));
  assertEquals("jmx.test.B.factory",mbean.getFactoryPid(cpid));
  mbean.delete(cpid);
  Thread.sleep(1000);
  assertNull(managedFactory.getConfigured(cpid));
  data=mbean.getProperties("org.apache.aries.jmx.test.ServiceA");
  assertEquals(0,data.size());
  p1=PropertyData.newInstance("A1","a1Value");
  data.put(p1.toCompositeData());
  mbean.update("org.apache.aries.jmx.test.ServiceA",data);
  Thread.sleep(1000);
  config=managedServiceA.getConfig();
  assertNotNull(config);
  assertEquals(2,config.size());
  assertEquals("org.apache.aries.jmx.test.ServiceA",config.get(Constants.SERVICE_PID));
  assertEquals("a1Value",config.get("A1"));
  String[][] configurations=mbean.getConfigurations("(A1=a1Value)");
  assertNotNull(configurations);
  assertEquals(1,configurations.length);
  assertEquals("org.apache.aries.jmx.test.ServiceA",configurations[0][0]);
  assertEquals(a.getLocation(),configurations[0][1]);
  mbean.deleteConfigurations("(A1=a1Value)");
  Thread.sleep(1000);
  assertNull(managedServiceA.getConfig());
}

</code></pre>

<br>
<pre class="type-9 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void doSetUp() throws Exception {
  waitForMBean(ConfigurationAdminMBean.OBJECTNAME);
  mbean=getMBean(ConfigurationAdminMBean.OBJECTNAME,ConfigurationAdminMBean.class);
  assertNotNull(mbean);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.cm.ConfigurationAdminTest </h4><pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProperties() throws Exception {
  org.osgi.service.cm.ConfigurationAdmin admin=mock(org.osgi.service.cm.ConfigurationAdmin.class);
  String pid="org.apache.aries.jmx.mock";
  Configuration config=mock(Configuration.class);
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put("one","value");
  props.put("two",2);
  when(admin.getConfiguration(eq(pid),anyString())).thenReturn(config);
  when(config.getProperties()).thenReturn(props);
  ConfigurationAdmin mbean=new ConfigurationAdmin(admin);
  TabularData properties=mbean.getPropertiesForLocation(pid,null);
  assertNotNull(properties);
  assertEquals(PROPERTIES_TYPE,properties.getTabularType());
  assertEquals(2,properties.values().size());
  PropertyData<? extends Object> oneData=PropertyData.from(properties.get(new Object[]{"one"}));
  assertEquals("value",oneData.getValue());
  PropertyData<? extends Object> twoData=PropertyData.from(properties.get(new Object[]{"two"}));
  assertEquals(2,twoData.getValue());
  assertEquals("2",twoData.getEncodedValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.codec.BundleDataTest </h4><pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testToCompositeData() throws Exception {
  Bundle bundle=mock(Bundle.class);
  BundleContext context=mock(BundleContext.class);
  PackageAdmin packageAdmin=mock(PackageAdmin.class);
  StartLevel startLevel=mock(StartLevel.class);
  Bundle b1=mock(Bundle.class);
  when(b1.getSymbolicName()).thenReturn("b1");
  when(b1.getBundleId()).thenReturn(new Long(44));
  Bundle b2=mock(Bundle.class);
  when(b2.getSymbolicName()).thenReturn("b2");
  when(b2.getBundleId()).thenReturn(new Long(55));
  Bundle b3=mock(Bundle.class);
  when(b3.getSymbolicName()).thenReturn("b3");
  when(b3.getBundleId()).thenReturn(new Long(66));
  when(context.getBundles()).thenReturn(new Bundle[]{bundle,b1,b2,b3});
  when(bundle.getSymbolicName()).thenReturn("test");
  when(bundle.getVersion()).thenReturn(Version.emptyVersion);
  when(bundle.getBundleId()).thenReturn(new Long(1));
  when(bundle.getLastModified()).thenReturn(new Long(12345));
  when(bundle.getLocation()).thenReturn("location");
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(Constants.BUNDLE_SYMBOLICNAME,"test");
  headers.put(Constants.BUNDLE_VERSION,"0.0.0");
  when(bundle.getHeaders()).thenReturn(headers);
  ExportedPackage exported=mock(ExportedPackage.class);
  when(exported.getName()).thenReturn("org.apache.aries.jmx");
  when(exported.getVersion()).thenReturn(new Version("1.0.0"));
  when(exported.getExportingBundle()).thenReturn(bundle);
  when(packageAdmin.getExportedPackages(bundle)).thenReturn(new ExportedPackage[]{exported});
  ExportedPackage ep1=mock(ExportedPackage.class);
  when(ep1.getImportingBundles()).thenReturn(new Bundle[]{bundle,b2,b3});
  when(ep1.getName()).thenReturn("org.apache.aries.jmx.b1");
  when(ep1.getVersion()).thenReturn(Version.emptyVersion);
  when(ep1.getExportingBundle()).thenReturn(b1);
  ExportedPackage ep2=mock(ExportedPackage.class);
  when(ep2.getImportingBundles()).thenReturn(new Bundle[]{bundle,b3});
  when(ep2.getName()).thenReturn("org.apache.aries.jmx.b2");
  when(ep2.getVersion()).thenReturn(Version.parseVersion("2.0.1"));
  when(ep2.getExportingBundle()).thenReturn(b2);
  headers.put(Constants.DYNAMICIMPORT_PACKAGE,"*");
  when(packageAdmin.getExportedPackages(b1)).thenReturn(new ExportedPackage[]{ep1});
  when(packageAdmin.getExportedPackages(b2)).thenReturn(new ExportedPackage[]{ep2});
  when(packageAdmin.getExportedPackages(b3)).thenReturn(null);
  RequiredBundle rb1=mock(RequiredBundle.class);
  when(rb1.getBundle()).thenReturn(b1);
  when(rb1.getRequiringBundles()).thenReturn(new Bundle[]{bundle,b2});
  RequiredBundle rb2=mock(RequiredBundle.class);
  when(rb2.getBundle()).thenReturn(b2);
  when(rb2.getRequiringBundles()).thenReturn(new Bundle[]{b1});
  RequiredBundle rb3=mock(RequiredBundle.class);
  when(rb3.getBundle()).thenReturn(b3);
  when(rb3.getRequiringBundles()).thenReturn(new Bundle[]{bundle,b1,b2});
  headers.put(Constants.REQUIRE_BUNDLE,"b1;bundle-version=\"1.0.0\",b3;bundle-version=\"2.0.0\"");
  when(packageAdmin.getRequiredBundles("b1")).thenReturn(new RequiredBundle[]{rb1});
  when(packageAdmin.getRequiredBundles("b2")).thenReturn(new RequiredBundle[]{rb2});
  when(packageAdmin.getRequiredBundles("b3")).thenReturn(new RequiredBundle[]{rb3});
  ServiceReference s1=mock(ServiceReference.class);
  when(s1.getProperty(Constants.SERVICE_ID)).thenReturn(new Long(15));
  ServiceReference s2=mock(ServiceReference.class);
  when(s2.getProperty(Constants.SERVICE_ID)).thenReturn(new Long(16));
  ServiceReference s3=mock(ServiceReference.class);
  when(s3.getProperty(Constants.SERVICE_ID)).thenReturn(new Long(17));
  when(bundle.getServicesInUse()).thenReturn(new ServiceReference[]{s1,s2,s3});
  BundleData b=new BundleData(context,bundle,packageAdmin,startLevel);
  CompositeData compositeData=b.toCompositeData();
  assertEquals("test",compositeData.get(SYMBOLIC_NAME));
  assertEquals("0.0.0",compositeData.get(VERSION));
  TabularData headerTable=(TabularData)compositeData.get(HEADERS);
  assertEquals(4,headerTable.values().size());
  CompositeData header=headerTable.get(new Object[]{Constants.BUNDLE_SYMBOLICNAME});
  assertNotNull(header);
  String value=(String)header.get(VALUE);
  assertEquals("test",value);
  String key=(String)header.get(KEY);
  assertEquals(Constants.BUNDLE_SYMBOLICNAME,key);
  TabularData bundleTable=new TabularDataSupport(BUNDLES_TYPE);
  bundleTable.put(b.toCompositeData());
  CompositeData bundleData=bundleTable.get(new Object[]{Long.valueOf(1)});
  assertNotNull(bundleData);
  String location=(String)bundleData.get(LOCATION);
  assertEquals("location",location);
  assertArrayEquals(new String[]{"org.apache.aries.jmx;1.0.0"},(String[])compositeData.get(EXPORTED_PACKAGES));
  assertArrayEquals(new String[]{"org.apache.aries.jmx.b1;0.0.0","org.apache.aries.jmx.b2;2.0.1"},(String[])compositeData.get(IMPORTED_PACKAGES));
  assertEquals(toSet(new long[]{44,55,66}),toSet((Long[])compositeData.get(REQUIRED_BUNDLES)));
  assertArrayEquals(new Long[]{new Long(15),new Long(16),new Long(17)},(Long[])compositeData.get(SERVICES_IN_USE));
  assertEquals("UNKNOWN",compositeData.get(STATE));
  assertEquals(0,((Long[])compositeData.get(HOSTS)).length);
  assertEquals(0,((Long[])compositeData.get(FRAGMENTS)).length);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.framework.BundleStateMBeanHandlerTest </h4><pre class="type-7 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testOpenAndClose() throws Exception {
  BundleContext context=mock(BundleContext.class);
  when(context.getProperty(Constants.FRAMEWORK_UUID)).thenReturn("some-uuid");
  Logger logger=mock(Logger.class);
  Bundle mockSystemBundle=mock(Bundle.class);
  when(mockSystemBundle.getSymbolicName()).thenReturn("the.sytem.bundle");
  when(context.getBundle(0)).thenReturn(mockSystemBundle);
  ServiceReference packageAdminRef=mock(ServiceReference.class);
  PackageAdmin packageAdmin=mock(PackageAdmin.class);
  when(context.getServiceReference(PackageAdmin.class.getName())).thenReturn(packageAdminRef);
  when(context.getService(packageAdminRef)).thenReturn(packageAdmin);
  ServiceReference startLevelRef=mock(ServiceReference.class);
  StartLevel startLevel=mock(StartLevel.class);
  when(context.getServiceReference(StartLevel.class.getName())).thenReturn(startLevelRef);
  when(context.getService(startLevelRef)).thenReturn(startLevel);
  JMXAgent agent=mock(JMXAgent.class);
  JMXAgentContext agentContext=new JMXAgentContext(context,agent,logger);
  BundleStateMBeanHandler handler=new BundleStateMBeanHandler(agentContext,new StateConfig());
  handler.open();
  assertNotNull(handler.getMbean());
  handler.close();
  verify(context).ungetService(packageAdminRef);
  verify(context).ungetService(startLevelRef);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.framework.BundleStateMBeanTest </h4><pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMBeanInterface() throws Exception {
  String[] exports=mbean.getExportedPackages(a.getBundleId());
  assertEquals(2,exports.length);
  List<String> packages=Arrays.asList(exports);
  assertTrue(packages.contains("org.apache.aries.jmx.test.bundlea.api;2.0.0"));
  assertTrue(packages.contains("org.apache.aries.jmx.test.fragmentc;0.0.0"));
  long[] fragments=mbean.getFragments(a.getBundleId());
  assertEquals(1,fragments.length);
  assertEquals(fragc.getBundleId(),fragments[0]);
  TabularData headers=mbean.getHeaders(b.getBundleId());
  assertNotNull(headers);
  assertEquals(BundleStateMBean.HEADERS_TYPE,headers.getTabularType());
  assertTrue(headers.values().size() >= 4);
  assertEquals("org.apache.aries.jmx.test.bundleb",Header.from(headers.get(new Object[]{Constants.BUNDLE_SYMBOLICNAME})).getValue());
  long[] hosts=mbean.getHosts(fragc.getBundleId());
  assertEquals(1,hosts.length);
  assertEquals(a.getBundleId(),hosts[0]);
  String[] imports=mbean.getImportedPackages(a.getBundleId());
  assertTrue(imports.length >= 3);
  List<String> importedPackages=Arrays.asList(imports);
  Version version=getPackageVersion("org.osgi.framework");
  assertTrue(importedPackages.contains("org.osgi.framework;" + version.toString()));
  assertTrue(importedPackages.contains("org.apache.aries.jmx.test.bundleb.api;1.1.0"));
  assertTrue(mbean.getLastModified(b.getBundleId()) > 0);
  assertEquals(b.getLocation(),mbean.getLocation(b.getBundleId()));
  long[] serviceIds=mbean.getRegisteredServices(a.getBundleId());
  assertEquals(1,serviceIds.length);
  long[] required=mbean.getRequiredBundles(d.getBundleId());
  assertEquals(1,required.length);
  assertEquals(a.getBundleId(),required[0]);
  long[] requiring=mbean.getRequiringBundles(a.getBundleId());
  assertEquals(2,requiring.length);
  assertTrue(fragc.getSymbolicName(),arrayContains(fragc.getBundleId(),requiring));
  assertTrue(d.getSymbolicName(),arrayContains(d.getBundleId(),requiring));
  long[] servicesInUse=mbean.getServicesInUse(a.getBundleId());
  assertEquals(1,servicesInUse.length);
  long startLevel=mbean.getStartLevel(b.getBundleId());
  assertTrue(startLevel >= 0);
  assertEquals("ACTIVE",mbean.getState(b.getBundleId()));
  assertFalse(mbean.isFragment(b.getBundleId()));
  assertTrue(mbean.isFragment(fragc.getBundleId()));
  assertFalse(mbean.isRemovalPending(b.getBundleId()));
  assertTrue(mbean.isRequired(a.getBundleId()));
  assertTrue(mbean.isRequired(b.getBundleId()));
  TabularData bundlesTable=mbean.listBundles();
  assertNotNull(bundlesTable);
  assertEquals(BundleStateMBean.BUNDLES_TYPE,bundlesTable.getTabularType());
  assertEquals(bundleContext.getBundles().length,bundlesTable.values().size());
  final List<Notification> received=new ArrayList<Notification>();
  mbeanServer.addNotificationListener(objectName,new NotificationListener(){
    public void handleNotification(    Notification notification,    Object handback){
      received.add(notification);
    }
  }
,null,null);
  assertEquals(Bundle.ACTIVE,b.getState());
  b.stop();
  assertEquals(Bundle.RESOLVED,b.getState());
  b.start();
  assertEquals(Bundle.ACTIVE,b.getState());
  int i=0;
  while (received.size() < 2 && i < 3) {
    Thread.sleep(1000);
    i++;
  }
  assertEquals(2,received.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.framework.BundleStateTest </h4><pre class="type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLifeCycleOfNotificationSupport() throws Exception {
  BundleContext context=mock(BundleContext.class);
  PackageAdmin admin=mock(PackageAdmin.class);
  StartLevel startLevel=mock(StartLevel.class);
  Logger logger=mock(Logger.class);
  BundleState bundleState=new BundleState(context,admin,startLevel,new StateConfig(),logger);
  MBeanServer server1=mock(MBeanServer.class);
  MBeanServer server2=mock(MBeanServer.class);
  ObjectName objectName=new ObjectName(OBJECTNAME);
  bundleState.preRegister(server1,objectName);
  bundleState.postRegister(true);
  ArgumentCaptor<BundleListener> argument=ArgumentCaptor.forClass(BundleListener.class);
  verify(context).addBundleListener(argument.capture());
  assertEquals(1,argument.getAllValues().size());
  BundleListener listener=argument.getValue();
  assertNotNull(listener);
  ExecutorService dispatcher=bundleState.getEventDispatcher();
  bundleState.preRegister(server2,objectName);
  bundleState.postRegister(true);
  argument=ArgumentCaptor.forClass(BundleListener.class);
  verify(context,atMost(1)).addBundleListener(argument.capture());
  assertEquals(1,argument.getAllValues().size());
  bundleState.postDeregister();
  verify(context,never()).removeBundleListener(listener);
  assertFalse(dispatcher.isShutdown());
  bundleState.postDeregister();
  verify(context).removeBundleListener(listener);
  assertTrue(dispatcher.isShutdown());
  dispatcher.awaitTermination(2,TimeUnit.SECONDS);
  assertTrue(dispatcher.isTerminated());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.framework.FrameworkMBeanTest </h4><pre class="type-4 type-5 type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMBeanInterface() throws IOException {
  long[] bundleIds=new long[]{1,2};
  int[] newlevels=new int[]{1,1};
  CompositeData compData=framework.setBundleStartLevels(bundleIds,newlevels);
  assertNotNull(compData);
  BatchActionResult batch2=BatchActionResult.from(compData);
  assertNotNull(batch2.getCompleted());
  assertTrue(batch2.isSuccess());
  assertNull(batch2.getError());
  assertNull(batch2.getRemainingItems());
  File file=File.createTempFile("bundletest",".jar");
  file.deleteOnExit();
  Manifest man=new Manifest();
  man.getMainAttributes().putValue("Manifest-Version","1.0");
  JarOutputStream jaros=new JarOutputStream(new FileOutputStream(file),man);
  jaros.flush();
  jaros.close();
  long bundleId=0;
  try {
    bundleId=framework.installBundleFromURL(file.getAbsolutePath(),file.toURI().toString());
  }
 catch (  Exception e) {
    fail("Installation of test bundle shouldn't fail");
  }
  try {
    framework.uninstallBundle(bundleId);
  }
 catch (  Exception e) {
    fail("Uninstallation of test bundle shouldn't fail");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.framework.FrameworkTest </h4><pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInstallBundlesFromURL() throws Exception {
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.installBundle(Mockito.anyString(),Mockito.any(InputStream.class))).thenReturn(bundle);
  Mockito.when(bundle.getBundleId()).thenReturn(Long.valueOf(2));
  Framework spiedMBean=Mockito.spy(mbean);
  InputStream stream=Mockito.mock(InputStream.class);
  Mockito.doReturn(stream).when(spiedMBean).createStream(Mockito.anyString());
  CompositeData data=spiedMBean.installBundlesFromURL(new String[]{"file:test.jar"},new String[]{"test.jar"});
  Assert.assertNotNull(data);
  BatchInstallResult batch=BatchInstallResult.from(data);
  Assert.assertEquals(2,batch.getCompleted()[0]);
  Assert.assertTrue(batch.isSuccess());
  Assert.assertNull(batch.getError());
  Assert.assertNull(batch.getRemainingLocationItems());
  Mockito.reset(context);
  Mockito.when(spiedMBean.createStream(Mockito.anyString())).thenReturn(stream);
  Mockito.when(context.installBundle(Mockito.anyString(),Mockito.any(InputStream.class))).thenThrow(new BundleException("location doesn't exist"));
  CompositeData data2=spiedMBean.installBundlesFromURL(new String[]{"file:test.jar"},new String[]{"test.jar"});
  BatchInstallResult batch2=BatchInstallResult.from(data2);
  Assert.assertNotNull(batch2);
  Assert.assertNotNull(batch2.getCompleted());
  Assert.assertEquals(0,batch2.getCompleted().length);
  Assert.assertFalse(batch2.isSuccess());
  Assert.assertNotNull(batch2.getError());
  Assert.assertEquals("file:test.jar",batch2.getBundleInError());
  Assert.assertNotNull(batch2.getRemainingLocationItems());
  Assert.assertEquals(0,batch2.getRemainingLocationItems().length);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStartBundles() throws Exception {
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.getBundle(5)).thenReturn(bundle);
  CompositeData data=mbean.startBundles(new long[]{5});
  Mockito.verify(bundle).start();
  BatchActionResult batch=BatchActionResult.from(data);
  Assert.assertEquals(5,batch.getCompleted()[0]);
  Assert.assertTrue(batch.isSuccess());
  Assert.assertNull(batch.getError());
  Assert.assertNull(batch.getRemainingItems());
  CompositeData data2=mbean.startBundles(null);
  BatchActionResult batch2=BatchActionResult.from(data2);
  Assert.assertNull(batch2.getCompleted());
  Assert.assertFalse(batch2.isSuccess());
  Assert.assertNotNull(batch2.getError());
  Assert.assertNull(batch2.getRemainingItems());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateBundlesFromURL() throws Exception {
  Framework spiedMBean=Mockito.spy(mbean);
  InputStream stream=Mockito.mock(InputStream.class);
  Mockito.doReturn(stream).when(spiedMBean).createStream(Mockito.anyString());
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.getBundle(5)).thenReturn(bundle);
  CompositeData data=spiedMBean.updateBundlesFromURL(new long[]{5},new String[]{"file:test.jar"});
  Mockito.verify(bundle).update(stream);
  BatchActionResult batch=BatchActionResult.from(data);
  Assert.assertEquals(5,batch.getCompleted()[0]);
  Assert.assertTrue(batch.isSuccess());
  Assert.assertNull(batch.getError());
  Assert.assertNull(batch.getRemainingItems());
  CompositeData data2=spiedMBean.updateBundlesFromURL(new long[]{2,4},new String[]{"file:test.jar"});
  BatchActionResult batch2=BatchActionResult.from(data2);
  Assert.assertFalse(batch2.isSuccess());
  Assert.assertNotNull(batch2.getError());
  Assert.assertNotNull(batch2.getError());
  Assert.assertNull(batch2.getRemainingItems());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInstallBundles() throws Exception {
  String[] locations=new String[]{"file:test.jar"};
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.installBundle("file:test.jar")).thenReturn(bundle);
  Mockito.when(bundle.getBundleId()).thenReturn(Long.valueOf(2));
  CompositeData data=mbean.installBundles(locations);
  BatchInstallResult batch=BatchInstallResult.from(data);
  Assert.assertNotNull(batch);
  Assert.assertEquals(2,batch.getCompleted()[0]);
  Assert.assertTrue(batch.isSuccess());
  Assert.assertNull(batch.getError());
  Assert.assertNull(batch.getRemainingLocationItems());
  Mockito.reset(context);
  Mockito.when(context.installBundle("file:test.jar")).thenThrow(new BundleException("location doesn't exist"));
  CompositeData data2=mbean.installBundles(locations);
  BatchInstallResult batch2=BatchInstallResult.from(data2);
  Assert.assertNotNull(batch2);
  Assert.assertNotNull(batch2.getCompleted());
  Assert.assertEquals(0,batch2.getCompleted().length);
  Assert.assertFalse(batch2.isSuccess());
  Assert.assertNotNull(batch2.getError());
  Assert.assertEquals("file:test.jar",batch2.getBundleInError());
  Assert.assertNotNull(batch2.getRemainingLocationItems());
  Assert.assertEquals(0,batch2.getRemainingLocationItems().length);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetBundleStartLevels() throws IOException {
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.getBundle(2)).thenReturn(bundle);
  CompositeData data=mbean.setBundleStartLevels(new long[]{2},new int[]{2});
  Mockito.verify(startLevel).setBundleStartLevel(bundle,2);
  BatchActionResult batch=BatchActionResult.from(data);
  Assert.assertEquals(2,batch.getCompleted()[0]);
  Assert.assertTrue(batch.isSuccess());
  Assert.assertNull(batch.getError());
  Assert.assertNull(batch.getRemainingItems());
  CompositeData data2=mbean.setBundleStartLevels(new long[]{2},new int[]{2,4});
  BatchActionResult batch2=BatchActionResult.from(data2);
  Assert.assertNull(batch2.getCompleted());
  Assert.assertFalse(batch2.isSuccess());
  Assert.assertNotNull(batch2.getError());
  Assert.assertNull(batch2.getRemainingItems());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateBundles() throws Exception {
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.getBundle(5)).thenReturn(bundle);
  CompositeData data=mbean.updateBundles(new long[]{5});
  Mockito.verify(bundle).update();
  BatchActionResult batch=BatchActionResult.from(data);
  Assert.assertEquals(5,batch.getCompleted()[0]);
  Assert.assertTrue(batch.isSuccess());
  Assert.assertNull(batch.getError());
  Assert.assertNull(batch.getRemainingItems());
  CompositeData data2=mbean.updateBundles(null);
  BatchActionResult batch2=BatchActionResult.from(data2);
  Assert.assertNull(batch2.getCompleted());
  Assert.assertFalse(batch2.isSuccess());
  Assert.assertNotNull(batch2.getError());
  Assert.assertNull(batch2.getRemainingItems());
  Mockito.reset(bundle);
  CompositeData data3=mbean.updateBundles(new long[]{6});
  Mockito.when(context.getBundle(6)).thenReturn(bundle);
  Mockito.doThrow(new BundleException("")).when(bundle).update();
  BatchActionResult batch3=BatchActionResult.from(data3);
  Assert.assertEquals(0,batch3.getCompleted().length);
  Assert.assertFalse(batch3.isSuccess());
  Assert.assertNotNull(batch3.getError());
  Assert.assertEquals(6,batch3.getBundleInError());
  Bundle bundle6=Mockito.mock(Bundle.class);
  Bundle bundle8=Mockito.mock(Bundle.class);
  Bundle bundle7=Mockito.mock(Bundle.class);
  Mockito.when(context.getBundle(6)).thenReturn(bundle6);
  Mockito.when(context.getBundle(8)).thenReturn(bundle8);
  Mockito.when(context.getBundle(7)).thenReturn(bundle7);
  Mockito.doThrow(new BundleException("")).when(bundle8).update();
  CompositeData data4=mbean.updateBundles(new long[]{6,8,7});
  BatchActionResult batch4=BatchActionResult.from(data4);
  Mockito.verify(bundle6).update();
  Assert.assertEquals(1,batch4.getCompleted().length);
  Assert.assertEquals(6,batch4.getCompleted()[0]);
  Assert.assertFalse(batch4.isSuccess());
  Assert.assertNotNull(batch4.getError());
  Assert.assertEquals(8,batch4.getBundleInError());
  Assert.assertEquals(1,batch4.getRemainingItems().length);
  Assert.assertEquals(7,batch4.getRemainingItems()[0]);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUninstallBundles() throws Exception {
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.getBundle(5)).thenReturn(bundle);
  CompositeData data=mbean.uninstallBundles(new long[]{5});
  Mockito.verify(bundle).uninstall();
  BatchActionResult batch=BatchActionResult.from(data);
  Assert.assertEquals(5,batch.getCompleted()[0]);
  Assert.assertTrue(batch.isSuccess());
  Assert.assertNull(batch.getError());
  Assert.assertNull(batch.getRemainingItems());
  CompositeData data2=mbean.uninstallBundles(null);
  BatchActionResult batch2=BatchActionResult.from(data2);
  Assert.assertNull(batch2.getCompleted());
  Assert.assertFalse(batch2.isSuccess());
  Assert.assertNotNull(batch2.getError());
  Assert.assertNull(batch2.getRemainingItems());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStopBundles() throws Exception {
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.getBundle(5)).thenReturn(bundle);
  CompositeData data=mbean.stopBundles(new long[]{5});
  Mockito.verify(bundle).stop();
  BatchActionResult batch=BatchActionResult.from(data);
  Assert.assertEquals(5,batch.getCompleted()[0]);
  Assert.assertTrue(batch.isSuccess());
  Assert.assertNull(batch.getError());
  Assert.assertNull(batch.getRemainingItems());
  CompositeData data2=mbean.stopBundles(null);
  BatchActionResult batch2=BatchActionResult.from(data2);
  Assert.assertNull(batch2.getCompleted());
  Assert.assertFalse(batch2.isSuccess());
  Assert.assertNotNull(batch2.getError());
  Assert.assertNull(batch2.getRemainingItems());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.framework.PackageStateMBeanTest </h4><pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMBeanInterface() throws IOException {
  PackageStateMBean packagaState=getMBean(PackageStateMBean.OBJECTNAME,PackageStateMBean.class);
  assertNotNull(packagaState);
  long[] exportingBundles=packagaState.getExportingBundles("org.osgi.jmx.framework","1.7.0");
  assertNotNull(exportingBundles);
  assertTrue("Should find a bundle exporting org.osgi.jmx.framework",exportingBundles.length > 0);
  long[] exportingBundles2=packagaState.getExportingBundles("test","1.0.0");
  assertNull("Shouldn't find a bundle exporting test package",exportingBundles2);
  long[] importingBundlesId=packagaState.getImportingBundles("org.osgi.jmx.framework","1.7.0",exportingBundles[0]);
  assertTrue("Should find bundles importing org.osgi.jmx.framework",importingBundlesId.length > 0);
  TabularData table=packagaState.listPackages();
  assertNotNull("TabularData containing CompositeData with packages info shouldn't be null",table);
  assertEquals("TabularData should be a type PACKAGES",PackageStateMBean.PACKAGES_TYPE,table.getTabularType());
  Collection<?> colData=table.values();
  assertNotNull("Collection of CompositeData shouldn't be null",colData);
  assertFalse("Collection of CompositeData should contain elements",colData.isEmpty());
  boolean isRemovalPending=packagaState.isRemovalPending("org.osgi.jmx.framework","1.7.0",exportingBundles[0]);
  assertFalse("Should removal pending on org.osgi.jmx.framework be false",isRemovalPending);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.framework.PackageStateTest </h4><pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetExportingBundles() throws IOException {
  ExportedPackage exported=Mockito.mock(ExportedPackage.class);
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(exported.getVersion()).thenReturn(Version.parseVersion("1.0.0"));
  Mockito.when(exported.getExportingBundle()).thenReturn(bundle);
  Mockito.when(bundle.getBundleId()).thenReturn(Long.valueOf(5));
  ExportedPackage exported2=Mockito.mock(ExportedPackage.class);
  Bundle bundle2=Mockito.mock(Bundle.class);
  Mockito.when(exported2.getVersion()).thenReturn(Version.parseVersion("1.0.0"));
  Mockito.when(exported2.getExportingBundle()).thenReturn(bundle2);
  Mockito.when(bundle2.getBundleId()).thenReturn(Long.valueOf(6));
  Mockito.when(admin.getExportedPackages(Mockito.anyString())).thenReturn(new ExportedPackage[]{exported,exported2});
  long[] ids=mbean.getExportingBundles("test","1.0.0");
  Assert.assertNotNull(ids);
  Assert.assertArrayEquals(new long[]{5,6},ids);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.framework.ServiceStateMBeanHandlerTest </h4><pre class="type-7 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testOpen() throws Exception {
  BundleContext context=mock(BundleContext.class);
  when(context.getProperty(Constants.FRAMEWORK_UUID)).thenReturn("some-uuid");
  Logger logger=mock(Logger.class);
  Bundle mockSystemBundle=mock(Bundle.class);
  when(mockSystemBundle.getSymbolicName()).thenReturn("the.sytem.bundle");
  when(context.getBundle(0)).thenReturn(mockSystemBundle);
  JMXAgent agent=mock(JMXAgent.class);
  JMXAgentContext agentContext=new JMXAgentContext(context,agent,logger);
  ServiceStateMBeanHandler handler=new ServiceStateMBeanHandler(agentContext,new StateConfig());
  handler.open();
  assertNotNull(handler.getMbean());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.framework.ServiceStateMBeanTest </h4><pre class="type-4 type-9 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Allocates resources before the execution of the test cases
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void doSetUp(){
  waitForMBean(ServiceStateMBean.OBJECTNAME);
  objectName=waitForMBean(ServiceStateMBean.OBJECTNAME);
  mbean=getMBean(objectName,ServiceStateMBean.class);
  assertNotNull(mbean);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMBeanInterface() throws Exception {
  Bundle a=getBundleByName("org.apache.aries.jmx.test.bundlea");
  assertBundleStarted(a);
  Bundle b=getBundleByName("org.apache.aries.jmx.test.bundleb");
  assertBundleStarted(b);
  ServiceReference refA=bundleContext.getServiceReference(InterfaceA.class.getName());
  assertNotNull(refA);
  long serviceAId=(Long)refA.getProperty(Constants.SERVICE_ID);
  assertTrue(serviceAId > -1);
  ServiceReference refB=bundleContext.getServiceReference(InterfaceB.class.getName());
  assertNotNull(refB);
  long serviceBId=(Long)refB.getProperty(Constants.SERVICE_ID);
  assertTrue(serviceBId > -1);
  ServiceReference[] refs=bundleContext.getServiceReferences(ManagedServiceFactory.class.getName(),"(" + Constants.SERVICE_PID + "=jmx.test.B.factory)");
  assertNotNull(refs);
  assertEquals(1,refs.length);
  ServiceReference msf=refs[0];
  assertEquals(a.getBundleId(),mbean.getBundleIdentifier(serviceAId));
  String[] objectClass=mbean.getObjectClass(serviceAId);
  assertEquals(2,objectClass.length);
  List<String> classNames=Arrays.asList(objectClass);
  assertTrue(classNames.contains(InterfaceA.class.getName()));
  assertTrue(classNames.contains(ManagedService.class.getName()));
  TabularData serviceProperties=mbean.getProperties(serviceBId);
  assertNotNull(serviceProperties);
  assertEquals(JmxConstants.PROPERTIES_TYPE,serviceProperties.getTabularType());
  assertTrue(serviceProperties.values().size() > 1);
  assertEquals("org.apache.aries.jmx.test.ServiceB",PropertyData.from(serviceProperties.get(new Object[]{Constants.SERVICE_PID})).getValue());
  long[] usingBundles=mbean.getUsingBundles(serviceBId);
  assertEquals(1,usingBundles.length);
  assertEquals(a.getBundleId(),usingBundles[0]);
  ServiceReference[] allSvsRefs=bundleContext.getAllServiceReferences(null,null);
  TabularData allServices=mbean.listServices();
  assertNotNull(allServices);
  assertEquals(allSvsRefs.length,allServices.values().size());
  final List<Notification> received=new ArrayList<Notification>();
  final List<AttributeChangeNotification> attributeChanges=new ArrayList<AttributeChangeNotification>();
  mbeanServer.addNotificationListener(objectName,new NotificationListener(){
    public void handleNotification(    Notification notification,    Object handback){
      if (notification instanceof AttributeChangeNotification) {
        attributeChanges.add((AttributeChangeNotification)notification);
      }
 else {
        received.add(notification);
      }
    }
  }
,null,null);
  assertNotNull(refB);
  assertNotNull(msf);
  b.stop();
  refB=bundleContext.getServiceReference(InterfaceB.class.getName());
  refs=bundleContext.getServiceReferences(ManagedServiceFactory.class.getName(),"(" + Constants.SERVICE_PID + "=jmx.test.B.factory)");
  assertNull(refs);
  assertNull(refB);
  b.start();
  refB=bundleContext.getServiceReference(InterfaceB.class.getName());
  refs=bundleContext.getServiceReferences(ManagedServiceFactory.class.getName(),"(" + Constants.SERVICE_PID + "=jmx.test.B.factory)");
  assertNotNull(refB);
  assertNotNull(refs);
  assertEquals(1,refs.length);
  waitForListToReachSize(received,4);
  assertEquals(4,received.size());
  assertEquals(4,attributeChanges.size());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testListServicesSelectiveItems() throws Exception {
  String filter="(|(service.pid=org.apache.aries.jmx.test.ServiceB)(service.pid=jmx.test.B.factory))";
  ServiceReference[] refs=bundleContext.getAllServiceReferences(null,filter);
  TabularData svcData=mbean.listServices(null,filter,ServiceStateMBean.BUNDLE_IDENTIFIER);
  assertEquals(refs.length,svcData.size());
  long id=refs[0].getBundle().getBundleId();
  for (  ServiceReference ref : refs) {
    assertEquals("Precondition",id,ref.getBundle().getBundleId());
  }
  for (  CompositeData cd : new ArrayList<CompositeData>((Collection<CompositeData>)svcData.values())) {
    assertEquals(id,cd.get(ServiceStateMBean.BUNDLE_IDENTIFIER));
    assertNotNull(cd.get(ServiceStateMBean.IDENTIFIER));
    assertNull(cd.get(ServiceStateMBean.OBJECT_CLASS));
    assertNull(cd.get(ServiceStateMBean.USING_BUNDLES));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.framework.ServiceStateTest </h4><pre class="type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLifeCycleOfNotificationSupport() throws Exception {
  BundleContext context=mock(BundleContext.class);
  Logger logger=mock(Logger.class);
  ServiceState serviceState=new ServiceState(context,new StateConfig(),logger);
  MBeanServer server1=mock(MBeanServer.class);
  MBeanServer server2=mock(MBeanServer.class);
  ObjectName objectName=new ObjectName(OBJECTNAME);
  serviceState.preRegister(server1,objectName);
  serviceState.postRegister(true);
  ArgumentCaptor<AllServiceListener> argument=ArgumentCaptor.forClass(AllServiceListener.class);
  verify(context).addServiceListener(argument.capture());
  AllServiceListener serviceListener=argument.getValue();
  assertNotNull(serviceListener);
  ExecutorService dispatcher=serviceState.getEventDispatcher();
  serviceState.preRegister(server2,objectName);
  serviceState.postRegister(true);
  argument=ArgumentCaptor.forClass(AllServiceListener.class);
  verify(context,atMost(1)).addServiceListener(argument.capture());
  assertEquals(1,argument.getAllValues().size());
  serviceState.postDeregister();
  verify(context,never()).removeServiceListener(serviceListener);
  assertFalse(dispatcher.isShutdown());
  serviceState.postDeregister();
  verify(context).removeServiceListener(serviceListener);
  assertTrue(dispatcher.isShutdown());
  dispatcher.awaitTermination(2,TimeUnit.SECONDS);
  assertTrue(dispatcher.isTerminated());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.permissionadmin.PermissionAdminMBeanTest </h4><pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMBeanInterface() throws IOException {
  PermissionAdminMBean mBean=getMBean(PermissionAdminMBean.OBJECTNAME,PermissionAdminMBean.class);
  PermissionAdmin permAdminService=context().getService(PermissionAdmin.class);
  assertNotNull(permAdminService);
  String[] serviceLocation=permAdminService.getLocations();
  String[] mBeanLocations=mBean.listLocations();
  assertArrayEquals(serviceLocation,mBeanLocations);
  PermissionInfo defPerm=new PermissionInfo("AllPermission","*","*");
  permAdminService.setDefaultPermissions(new PermissionInfo[]{defPerm});
  PermissionInfo[] permissions=permAdminService.getDefaultPermissions();
  assertNotNull(permissions);
  String[] encoded=toEncodedPerm(permissions);
  String[] mBeanDefPermissions=mBean.listDefaultPermissions();
  assertArrayEquals(encoded,mBeanDefPermissions);
  Bundle a=context().getBundleByName("org.apache.aries.jmx.test.bundlea");
  assertNotNull(a);
  String location=a.getLocation();
  PermissionInfo bundleaPerm=new PermissionInfo("ServicePermission","ServiceA","GET");
  mBean.setPermissions(location,new String[]{bundleaPerm.getEncoded()});
  String[] serviceBundleaPerm=toEncodedPerm(permAdminService.getPermissions(location));
  String[] mBeanBundleaPerm=mBean.getPermissions(location);
  assertNotNull(mBeanBundleaPerm);
  assertArrayEquals(serviceBundleaPerm,mBeanBundleaPerm);
  PermissionInfo defaultPerm=new PermissionInfo("AllPermission","*","GET");
  mBean.setDefaultPermissions(new String[]{defaultPerm.getEncoded()});
  String[] serviceDefaultPerm=toEncodedPerm(permAdminService.getDefaultPermissions());
  String[] mBeanDefaultPerm=mBean.listDefaultPermissions();
  assertNotNull(mBeanDefaultPerm);
  assertArrayEquals(serviceDefaultPerm,mBeanDefaultPerm);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.permissionadmin.PermissionAdminTest </h4><pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPermissions() throws IOException {
  PermissionInfo info=new PermissionInfo("Admin","test","get");
  PermissionInfo[] permInfos=new PermissionInfo[]{info,info};
  Mockito.when(permAdmin.getPermissions(Mockito.anyString())).thenReturn(permInfos);
  String[] permissions=mbean.getPermissions("test");
  Assert.assertNotNull(permissions);
  Assert.assertEquals(2,permissions.length);
  Assert.assertArrayEquals("Checks encoded permissions",new String[]{info.getEncoded(),info.getEncoded()},permissions);
  Mockito.reset(permAdmin);
  Mockito.when(permAdmin.getPermissions(Mockito.anyString())).thenReturn(null);
  String[] permissions2=mbean.getPermissions("test");
  Assert.assertNull(permissions2);
}

</code></pre>

<br>
<pre class="type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testListLocations() throws IOException {
  String[] locations1=new String[]{"test1","test2"};
  Mockito.when(permAdmin.getLocations()).thenReturn(locations1);
  String[] locations2=mbean.listLocations();
  Assert.assertNotNull(locations2);
  Assert.assertEquals(2,locations2.length);
  Assert.assertSame(locations1,locations2);
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testListDefaultPermissions() throws IOException {
  PermissionInfo info=new PermissionInfo("Admin","test","get");
  PermissionInfo[] permInfos=new PermissionInfo[]{info,info};
  Mockito.when(permAdmin.getDefaultPermissions()).thenReturn(permInfos);
  String[] permissions=mbean.listDefaultPermissions();
  Assert.assertNotNull(permissions);
  Assert.assertEquals(2,permissions.length);
  Assert.assertArrayEquals("Checks encoded default permissions",new String[]{info.getEncoded(),info.getEncoded()},permissions);
  Mockito.reset(permAdmin);
  Mockito.when(permAdmin.getDefaultPermissions()).thenReturn(null);
  String[] permissions2=mbean.listDefaultPermissions();
  Assert.assertNull(permissions2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.provisioning.ProvisioningServiceMBeanHandlerTest </h4><pre class="type-7 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testConstructInjectMBean(){
  BundleContext bundleContext=mock(BundleContext.class);
  Logger agentLogger=mock(Logger.class);
  JMXAgentContext agentContext=new JMXAgentContext(bundleContext,null,agentLogger);
  ProvisioningService provService=mock(ProvisioningService.class);
  ProvisioningServiceMBeanHandler handler=new ProvisioningServiceMBeanHandler(agentContext);
  StandardMBean mbean=handler.constructInjectMBean(provService);
  assertNotNull(mbean);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.provisioning.ProvisioningServiceMBeanTest </h4><pre class="type-4 type-3 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("For now.. Cannot find public repo for org.eclipse.equinox.ip") @Test @SuppressWarnings({"unchecked"}) public void testMBeanInterface() throws Exception {
  ProvisioningServiceMBean mbean=getMBean(ProvisioningServiceMBean.OBJECTNAME,ProvisioningServiceMBean.class);
  Dictionary<String,Object> info;
  File provZip=createProvAgentConfigZip();
  mbean.addInformationFromZip(provZip.toURI().toURL().toExternalForm());
  info=ps.getInformation();
  assertNotNull(info);
  assertTrue(info.size() >= 1);
  assertProvAgentConfigCorrect(info);
  TabularData data=mbean.listInformation();
  assertNotNull(data);
  assertEquals(JmxConstants.PROPERTIES_TYPE,data.getTabularType());
  assertTrue(data.values().size() >= 1);
  PropertyData<byte[]> configEntry=PropertyData.from(data.get(new Object[]{PROVISIONING_AGENT_CONFIG}));
  assertNotNull(configEntry);
  assertArrayEquals(new byte[]{10,20,30},configEntry.getValue());
  PropertyData<String> reference=PropertyData.newInstance(PROVISIONING_REFERENCE,"rsh://0.0.0.0/provX");
  data.put(reference.toCompositeData());
  mbean.addInformation(data);
  info=ps.getInformation();
  assertNotNull(info);
  assertTrue(info.size() >= 2);
  assertProvAgentConfigCorrect(info);
  String ref=(String)info.get(PROVISIONING_REFERENCE);
  assertNotNull(ref);
  assertEquals("rsh://0.0.0.0/provX",ref);
  data.clear();
  PropertyData<String> newRef=PropertyData.newInstance(PROVISIONING_REFERENCE,"rsh://0.0.0.0/newProvRef");
  data.put(newRef.toCompositeData());
  mbean.setInformation(data);
  info=ps.getInformation();
  assertNotNull(info);
  assertTrue(info.size() >= 1);
  assertNull(info.get(PROVISIONING_AGENT_CONFIG));
  ref=(String)info.get(PROVISIONING_REFERENCE);
  assertNotNull(ref);
  assertEquals("rsh://0.0.0.0/newProvRef",ref);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.provisioning.ProvisioningServiceTest </h4><pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testListInformation() throws Exception {
  org.osgi.service.provisioning.ProvisioningService provService=mock(org.osgi.service.provisioning.ProvisioningService.class);
  ProvisioningService mbean=new ProvisioningService(provService);
  Dictionary<String,Object> info=new Hashtable<String,Object>();
  info.put(PROVISIONING_AGENT_CONFIG,new byte[]{20,30,40});
  info.put(PROVISIONING_SPID,"x.test");
  info.put(PROVISIONING_REFERENCE,"rsh://0.0.0.0/provX");
  info.put(PROVISIONING_RSH_SECRET,new byte[]{15,25,35});
  info.put(PROVISIONING_UPDATE_COUNT,1);
  when(provService.getInformation()).thenReturn(info);
  TabularData provData=mbean.listInformation();
  assertNotNull(provData);
  assertEquals(PROPERTIES_TYPE,provData.getTabularType());
  assertEquals(5,provData.values().size());
  PropertyData<byte[]> agentConfig=PropertyData.from(provData.get(new Object[]{PROVISIONING_AGENT_CONFIG}));
  assertArrayEquals(new byte[]{20,30,40},agentConfig.getValue());
  PropertyData<String> spid=PropertyData.from(provData.get(new Object[]{PROVISIONING_SPID}));
  assertEquals("x.test",spid.getValue());
  PropertyData<String> ref=PropertyData.from(provData.get(new Object[]{PROVISIONING_REFERENCE}));
  assertEquals("rsh://0.0.0.0/provX",ref.getValue());
  PropertyData<byte[]> sec=PropertyData.from(provData.get(new Object[]{PROVISIONING_RSH_SECRET}));
  assertArrayEquals(new byte[]{15,25,35},sec.getValue());
  PropertyData<Integer> count=PropertyData.from(provData.get(new Object[]{PROVISIONING_UPDATE_COUNT}));
  assertEquals(new Integer(1),count.getValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.useradmin.UserAdminTest </h4><pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for {@link org.apache.aries.jmx.useradmin.UserAdmin#getAuthorization(java.lang.String)}.
 * @throws IOException
 */
@Test public void testGetAuthorization() throws IOException {
  Authorization auth=Mockito.mock(Authorization.class);
  User user=Mockito.mock(User.class);
  Mockito.when(user.getType()).thenReturn(Role.USER);
  Mockito.when(userAdmin.getAuthorization(user)).thenReturn(auth);
  Mockito.when(userAdmin.getRole("role1")).thenReturn(user);
  Mockito.when(auth.getName()).thenReturn("auth1");
  Mockito.when(auth.getRoles()).thenReturn(new String[]{"role1"});
  CompositeData data=mbean.getAuthorization("role1");
  Assert.assertNotNull(data);
  AuthorizationData authData=AuthorizationData.from(data);
  Assert.assertNotNull(authData);
  Assert.assertEquals("auth1",authData.getName());
  Assert.assertArrayEquals(new String[]{"role1"},authData.getRoles());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for {@link org.apache.aries.jmx.useradmin.UserAdmin#getRole(java.lang.String)}.
 * @throws IOException
 */
@Test public void testGetRole() throws IOException {
  User user1=Mockito.mock(User.class);
  Mockito.when(user1.getType()).thenReturn(Role.USER);
  Mockito.when(user1.getName()).thenReturn("user1");
  Mockito.when(userAdmin.getRole(Mockito.anyString())).thenReturn(user1);
  CompositeData data=mbean.getRole("user1");
  Assert.assertNotNull(data);
  RoleData role=RoleData.from(data);
  Assert.assertNotNull(role);
  Assert.assertEquals("user1",role.getName());
  Assert.assertEquals(Role.USER,role.getType());
  Mockito.verify(userAdmin).getRole(Mockito.anyString());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for {@link org.apache.aries.jmx.useradmin.UserAdmin#getGroup(java.lang.String)}.
 * @throws IOException
 */
@Test public void testGetGroup() throws IOException {
  Group group1=Mockito.mock(Group.class);
  Mockito.when(group1.getType()).thenReturn(Role.GROUP);
  Mockito.when(group1.getName()).thenReturn("group1");
  Role role1=Mockito.mock(Role.class);
  Mockito.when(role1.getName()).thenReturn("role1");
  Role role2=Mockito.mock(Role.class);
  Mockito.when(role2.getName()).thenReturn("role2");
  Mockito.when(group1.getRequiredMembers()).thenReturn(new Role[]{role1});
  Mockito.when(group1.getMembers()).thenReturn(new Role[]{role2});
  Mockito.when(userAdmin.getRole(Mockito.anyString())).thenReturn(group1);
  CompositeData data=mbean.getGroup("group1");
  Assert.assertNotNull(data);
  GroupData group=GroupData.from(data);
  Assert.assertNotNull(group);
  Assert.assertEquals("group1",group.getName());
  Assert.assertEquals(Role.GROUP,group.getType());
  Assert.assertArrayEquals(new String[]{"role2"},group.getMembers());
  Assert.assertArrayEquals(new String[]{"role1"},group.getRequiredMembers());
  Mockito.verify(userAdmin).getRole(Mockito.anyString());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for {@link org.apache.aries.jmx.useradmin.UserAdmin#getProperties(java.lang.String)}.
 * @throws IOException
 */
@Test public void testGetProperties() throws IOException {
  User user1=Mockito.mock(User.class);
  Dictionary<String,Object> properties=new Hashtable<String,Object>();
  properties.put("key","value");
  Mockito.when(user1.getProperties()).thenReturn(properties);
  Mockito.when(userAdmin.getRole(Mockito.anyString())).thenReturn(user1);
  TabularData data=mbean.getProperties("user1");
  Assert.assertNotNull(data);
  Assert.assertEquals(JmxConstants.PROPERTIES_TYPE,data.getTabularType());
  CompositeData composite=data.get(new Object[]{"key"});
  Assert.assertNotNull(composite);
  Assert.assertEquals("key",(String)composite.get(JmxConstants.KEY));
  Assert.assertEquals("value",(String)composite.get(JmxConstants.VALUE));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for {@link org.apache.aries.jmx.useradmin.UserAdmin#getUser(java.lang.String)}.
 * @throws IOException
 */
@Test public void testGetUser() throws IOException {
  User user1=Mockito.mock(User.class);
  Mockito.when(user1.getType()).thenReturn(Role.USER);
  Mockito.when(user1.getName()).thenReturn("user1");
  Mockito.when(userAdmin.getRole(Mockito.anyString())).thenReturn(user1);
  CompositeData data=mbean.getUser("user1");
  Assert.assertNotNull(data);
  UserData user=UserData.from(data);
  Assert.assertNotNull(user);
  Assert.assertEquals("user1",user.getName());
  Assert.assertEquals(Role.USER,user.getType());
  Mockito.verify(userAdmin).getRole(Mockito.anyString());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for {@link org.apache.aries.jmx.useradmin.UserAdmin#getCredentials(java.lang.String)}.
 * @throws IOException
 */
@Test public void testGetCredentials() throws IOException {
  User user1=Mockito.mock(User.class);
  Dictionary<String,Object> properties=new Hashtable<String,Object>();
  properties.put("key","value");
  Mockito.when(user1.getCredentials()).thenReturn(properties);
  Mockito.when(user1.getType()).thenReturn(Role.USER);
  Mockito.when(userAdmin.getRole(Mockito.anyString())).thenReturn(user1);
  TabularData data=mbean.getCredentials("user1");
  Assert.assertNotNull(data);
  Assert.assertEquals(JmxConstants.PROPERTIES_TYPE,data.getTabularType());
  CompositeData composite=data.get(new Object[]{"key"});
  Assert.assertNotNull(composite);
  Assert.assertEquals("key",(String)composite.get(JmxConstants.KEY));
  Assert.assertEquals("value",(String)composite.get(JmxConstants.VALUE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.util.FrameworkUtilsTest </h4><pre class="type-4 type-7 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testResolveService() throws Exception {
  BundleContext context=mock(BundleContext.class);
  ServiceReference reference=mock(ServiceReference.class);
  when(context.getAllServiceReferences(anyString(),anyString())).thenReturn(new ServiceReference[]{reference});
  ServiceReference result=resolveService(context,998);
  assertNotNull(result);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jndi.InitialContextTest </h4><pre class="type-5 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testURLContextErrorPropagation() throws Exception {
  ObjectFactory of=new ObjectFactory(){
    public Object getObjectInstance(    Object obj,    Name name,    Context nameCtx,    Hashtable<?,?> environment) throws Exception {
      throw new Exception("doh");
    }
  }
;
  registerURLObjectFactory(of,"test");
  ic=initialContext();
  try {
    ic.lookup("test:something");
    Assert.fail("Expected NamingException");
  }
 catch (  NamingException ne) {
    assertNotNull(ne.getCause());
    assertEquals("doh",ne.getCause().getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jndi.itests.JndiUrlIntegrationTest </h4><pre class="type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This test exercises the blueprint:comp/ jndi namespace by driving
 * a Servlet which then looks up some blueprint components from its own
 * bundle, including a reference which it uses to call a service from a 
 * second bundle.  
 * @throws Exception
 */
@Test public void testBlueprintCompNamespaceWorks() throws Exception {
  Bundle bBiz=context().getBundleByName("org.apache.aries.jndi.url.itest.biz");
  assertNotNull(bBiz);
  Bundle bweb=context().getBundleByName("org.apache.aries.jndi.url.itest.web");
  assertNotNull(bweb);
  context().getBundleByName("org.ops4j.pax.web.pax-web-extender-war").start();
  printBundleStatus("Before making web request");
  try {
    Thread.sleep(5000);
  }
 catch (  InterruptedException ix) {
  }
  System.out.println("In test and trying to get connection....");
  String response=getTestServletResponse();
  System.out.println("Got response `" + response + "`");
  assertEquals("ITest servlet response wrong","Mark.2.0.three",response);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jndi.url.BlueprintURLContextTest </h4><pre class="type-4 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Validate that we can create an InitialContext at blueprint:comp scope, and then 
 * look components up within it
 */
@Test public void testTwoLevelComponentLookup() throws Exception {
  InitialContext ctx=new InitialContext();
  Context ctx2=(Context)ctx.lookup("blueprint:comp");
  SimpleComponent sc=(SimpleComponent)ctx2.lookup("comp2");
  assertNotNull(sc);
  String msg=sc.getIdMessage();
  assertEquals("comp2 message wrong","AnotherComponent with id comp2",msg);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check that we can directly address a blueprint component
 */
@Test public void testSimpleComponentLookup() throws Exception {
  BlueprintURLContext bpURLc=new BlueprintURLContext(bundle,new Hashtable<String,String>());
  SimpleComponent sc=(SimpleComponent)bpURLc.lookup("blueprint:comp/comp1");
  assertNotNull(sc);
  String msg=sc.getIdMessage();
  assertEquals("comp1 message wrong","comp1_message",msg);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jndi.url.ServiceRegistryContextTest </h4><pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkServiceListListBindings() throws NamingException {
  BundleMock mock=new BundleMock("scooby.doo",new Properties());
  Thread.currentThread().setContextClassLoader(mock.getClassLoader());
  InitialContext ctx=new InitialContext();
  String className=Runnable.class.getName();
  MethodCall run=new MethodCall(Runnable.class,"run");
  Runnable t=Skeleton.newMock(Runnable.class);
  Runnable t2=Skeleton.newMock(Runnable.class);
  reg.unregister();
  ServiceRegistration reg=bc.registerService(className,t,null);
  ServiceRegistration reg2=bc.registerService(className,t2,null);
  NamingEnumeration<Binding> ne=ctx.listBindings("osgi:servicelist/" + className);
  assertTrue(ne.hasMoreElements());
  Binding bnd=ne.nextElement();
  assertEquals(String.valueOf(reg.getReference().getProperty(Constants.SERVICE_ID)),bnd.getName());
  assertTrue("Class name not correct. Was: " + bnd.getClassName(),bnd.getClassName().contains("Proxy") || bnd.getClassName().contains("EnhancerByCGLIB"));
  Runnable r=(Runnable)bnd.getObject();
  assertNotNull(r);
  r.run();
  Skeleton.getSkeleton(t).assertCalledExactNumberOfTimes(run,1);
  Skeleton.getSkeleton(t2).assertNotCalled(run);
  assertTrue(ne.hasMoreElements());
  bnd=ne.nextElement();
  assertEquals(String.valueOf(reg2.getReference().getProperty(Constants.SERVICE_ID)),bnd.getName());
  assertTrue("Class name not correct. Was: " + bnd.getClassName(),bnd.getClassName().contains("Proxy") || bnd.getClassName().contains("EnhancerByCGLIB"));
  r=(Runnable)bnd.getObject();
  assertNotNull(r);
  r.run();
  Skeleton.getSkeleton(t).assertCalledExactNumberOfTimes(run,1);
  Skeleton.getSkeleton(t2).assertCalledExactNumberOfTimes(run,1);
  assertFalse(ne.hasMoreElements());
}

</code></pre>

<br>
<pre class="type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
/** 
 * This test checks that we can pass a filter in without things blowing up.
 * Right now our mock service registry does not implement filtering, so the
 * effect is the same as simpleJNDILookup, but we at least know it is not
 * blowing up.
 * @throws NamingException
 */
@Test public void jndiLookupWithFilter() throws NamingException {
  BundleMock mock=new BundleMock("scooby.doo",new Properties());
  Thread.currentThread().setContextClassLoader(mock.getClassLoader());
  InitialContext ctx=new InitialContext();
  Object s=ctx.lookup("osgi:service/java.lang.Runnable/(rubbish=smelly)");
  assertNotNull("We didn't get a service back from our lookup :(",s);
  service.run();
  Skeleton.getSkeleton(service).assertCalledExactNumberOfTimes(new MethodCall(Runnable.class,"run"),1);
  Skeleton.getSkeleton(mock.getBundleContext()).assertCalled(new MethodCall(BundleContext.class,"getServiceReferences","java.lang.Runnable","(rubbish=smelly)"));
}

</code></pre>

<br>
<pre class="type-4 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBaseLookup() throws NamingException {
  BundleMock mock=new BundleMock("scooby.doo",new Properties());
  Thread.currentThread().setContextClassLoader(mock.getClassLoader());
  InitialContext ctx=new InitialContext();
  Context ctx2=(Context)ctx.lookup("osgi:service");
  Runnable r1=(Runnable)ctx2.lookup("java.lang.Runnable");
  assertNotNull(r1);
  assertTrue("expected proxied service class",r1 != service);
  Runnable r2=(Runnable)ctx.lookup("aries:services/java.lang.Runnable");
  assertNotNull(r2);
  assertTrue("expected non-proxied service class",r2 == service);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This test does a simple JNDI lookup to prove that works.
 * @throws NamingException
 */
@Test public void simpleJNDILookup() throws NamingException {
  System.setProperty(Context.URL_PKG_PREFIXES,"helloMatey");
  InitialContext ctx=new InitialContext(new Hashtable<Object,Object>());
  BundleMock mock=new BundleMock("scooby.doo.1",new Properties());
  Thread.currentThread().setContextClassLoader(mock.getClassLoader());
  Runnable s=(Runnable)ctx.lookup("osgi:service/java.lang.Runnable");
  assertNotNull("We didn't get a service back from our lookup :(",s);
  s.run();
  Skeleton.getSkeleton(service).assertCalledExactNumberOfTimes(new MethodCall(Runnable.class,"run"),1);
  Skeleton skel=Skeleton.getSkeleton(mock.getBundleContext());
  skel.assertCalled(new MethodCall(BundleContext.class,"getServiceReferences","java.lang.Runnable",null));
  ctx=new InitialContext(new Hashtable<Object,Object>());
  mock=new BundleMock("scooby.doo.2",new Properties());
  Thread.currentThread().setContextClassLoader(mock.getClassLoader());
  s=(Runnable)ctx.lookup("osgi:service/java.lang.Runnable");
  String packages=System.getProperty(Context.URL_PKG_PREFIXES,null);
  assertTrue(ctx.getEnvironment().containsValue(packages));
  assertNotNull("We didn't get a service back from our lookup :(",s);
  s.run();
  Skeleton.getSkeleton(service).assertCalledExactNumberOfTimes(new MethodCall(Runnable.class,"run"),2);
  skel=Skeleton.getSkeleton(mock.getBundleContext());
  skel.assertCalled(new MethodCall(BundleContext.class,"getServiceReferences","java.lang.Runnable",null));
}

</code></pre>

<br>
<pre class="type-7 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * This test checks that we correctly register and deregister the url context
 * object factory in the service registry.
 */
@Test public void testJNDIRegistration(){
  ServiceReference ref=bc.getServiceReference(ObjectFactory.class.getName());
  assertNotNull("The aries url context object factory was not registered",ref);
  ObjectFactory factory=(ObjectFactory)bc.getService(ref);
  assertNotNull("The aries url context object factory was null",factory);
}

</code></pre>

<br>
<pre class="type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void jndiLookupServiceNameTest() throws NamingException, SQLException {
  InitialContext ctx=new InitialContext(new Hashtable<Object,Object>());
  BundleMock mock=new BundleMock("scooby.doo",new Properties());
  Thread.currentThread().setContextClassLoader(mock.getClassLoader());
  DataSource first=Skeleton.newMock(DataSource.class);
  DataSource second=Skeleton.newMock(DataSource.class);
  Hashtable<String,String> properties=new Hashtable<String,String>();
  properties.put("osgi.jndi.service.name","jdbc/myDataSource");
  bc.registerService(DataSource.class.getName(),first,properties);
  properties=new Hashtable<String,String>();
  properties.put("osgi.jndi.service.name","jdbc/myDataSource2");
  bc.registerService(DataSource.class.getName(),second,properties);
  DataSource s=(DataSource)ctx.lookup("osgi:service/jdbc/myDataSource");
  assertNotNull(s);
  s=(DataSource)ctx.lookup("osgi:service/javax.sql.DataSource/(osgi.jndi.service.name=jdbc/myDataSource2)");
  assertNotNull(s);
  s.isWrapperFor(DataSource.class);
  Skeleton.getSkeleton(second).assertCalled(new MethodCall(DataSource.class,"isWrapperFor",Class.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jpa.impl.EmSupplierTest </h4><pre class="type-3 type-7 type-13 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void lifeCycleTest(){
  EntityManagerFactory emf=mockEmf();
  Coordinator coordinator=new DummyCoordinator();
  EMSupplierImpl emSupplier=new EMSupplierImpl("myunit",emf,coordinator);
  assertIllegalState(emSupplier);
  coordinator.begin("test",0);
  EntityManager em=emSupplier.get();
  Assert.assertNotNull("EM should be present after preCall",em);
  coordinator.begin("testinner",0);
  Assert.assertSame("Same EM for inner preCall",em,emSupplier.get());
  coordinator.pop().end();
  Assert.assertSame("EM must still be the same after inner postCall",em,emSupplier.get());
  coordinator.pop().end();
  assertIllegalState(emSupplier);
  boolean clean=emSupplier.close();
  Assert.assertTrue("Shutdown should be clean",clean);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jpa.support.osgi.impl.EmfTrackerTest </h4><pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testLifecycle(){
  BundleContext context=mock(BundleContext.class);
  Coordinator coordinator=mock(Coordinator.class);
  EMFTracker tracker=new EMFTracker(context,coordinator);
  ServiceReference<EntityManagerFactory> ref=mock(ServiceReference.class);
  Mockito.when(ref.getProperty(EntityManagerFactoryBuilder.JPA_UNIT_NAME)).thenReturn("testunit");
  Mockito.when(ref.getProperty(PersistenceUnitTransactionType.class.getName())).thenReturn("JTA");
  Bundle puBundle=mock(Bundle.class);
  BundleContext puContext=mock(BundleContext.class);
  when(puBundle.getBundleContext()).thenReturn(puContext);
  when(ref.getBundle()).thenReturn(puBundle);
  EntityManagerFactory emf=mock(EntityManagerFactory.class);
  when(puContext.getService(ref)).thenReturn(emf);
  ServiceRegistration<?> emSupplierReg=mock(ServiceRegistration.class,"emSupplierReg");
  ServiceRegistration<?> emProxyReg=mock(ServiceRegistration.class,"emProxyReg");
  when(puContext.registerService(any(Class.class),any(),any(Dictionary.class))).thenReturn(emSupplierReg,emProxyReg);
  EMFTracker.TrackedEmf tracked=(TrackedEmf)tracker.addingService(ref);
  Assert.assertEquals(emf,tracked.emf);
  Assert.assertEquals(emSupplierReg,tracked.emSupplierReg);
  Assert.assertEquals(emProxyReg,tracked.emProxyReg);
  Assert.assertNotNull(tracked.tmTracker);
  Assert.assertNull(tracked.rlTxManagerReg);
  tracker.removedService(ref,tracked);
  verify(emSupplierReg,times(1)).unregister();
  verify(emProxyReg,times(1)).unregister();
  verify(puContext,times(1)).ungetService(ref);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.samples.blueprint.helloworld.itests.HelloworldSampleTest </h4><pre class="type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBundlesStart() throws Exception {
  Bundle bapi=getInstalledBundle("org.apache.aries.samples.blueprint.helloworld.api");
  assertNotNull(bapi);
  failInBundleNotActiveInFiveSeconds(bapi);
  assertEquals(Bundle.ACTIVE,bapi.getState());
  Bundle bcli=getInstalledBundle("org.apache.aries.samples.blueprint.helloworld.client");
  assertNotNull(bcli);
  failInBundleNotActiveInFiveSeconds(bcli);
  Bundle bser=getInstalledBundle("org.apache.aries.samples.blueprint.helloworld.server");
  assertNotNull(bser);
  failInBundleNotActiveInFiveSeconds(bser);
}

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testClientBlueprintContainerOnlyStartsWhenServiceStarted() throws Exception {
  Bundle bcli=getInstalledBundle("org.apache.aries.samples.blueprint.helloworld.client");
  assertNotNull(bcli);
  bcli.stop();
  Bundle bser=getInstalledBundle("org.apache.aries.samples.blueprint.helloworld.server");
  assertNotNull(bser);
  bser.stop();
  Thread.sleep(1000);
  assertClientBlueprintContainerNull();
  assertServerBlueprintContainerNull();
  bcli.start();
  Thread.sleep(1000);
  assertClientBlueprintContainerNull();
  bser.start();
  Thread.sleep(1000);
  assertClientBlueprintContainerNotNull();
  assertServerBlueprintContainerNotNull();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.ProviderBundleTrackerCustomizerGenericCapabilityTest </h4><pre class="type-4 type-12 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testProvidedSPIDirective() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  BundleContext implBC=mockSPIBundleContext4();
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.PROVIDER_REQUIREMENT);
  headers.put(SpiFlyConstants.PROVIDE_CAPABILITY,SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE + "; " + SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "=org.apache.aries.mytest.MySPI; approval=yeah, "+ SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "; "+ SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "=org.apache.aries.mytest.MySPI2");
  Bundle implBundle=mockSPIBundle4(implBC,headers);
  List<ServiceRegistration> registrations=customizer.addingBundle(implBundle,null);
  assertEquals("Expected 3 registrations, one for MySPI and 2 for MySPI2",3,registrations.size());
  Set<String> expectedObjectClasses=new HashSet<String>(Arrays.asList("org.apache.aries.mytest.MySPI","org.apache.aries.mytest.MySPI2"));
  Set<String> actualObjectClasses=new HashSet<String>();
  boolean foundMySPI=false;
  boolean foundMySPI2=false;
  for (  ServiceRegistration sr : registrations) {
    List<String> objectClasses=Arrays.asList((String[])sr.getReference().getProperty(Constants.OBJECTCLASS));
    actualObjectClasses.addAll(objectClasses);
    assertNotNull(sr.getReference().getProperty(SpiFlyConstants.SERVICELOADER_MEDIATOR_PROPERTY));
    if (objectClasses.contains("org.apache.aries.mytest.MySPI")) {
      assertEquals("yeah",sr.getReference().getProperty("approval"));
      foundMySPI=true;
    }
 else     if (objectClasses.contains("org.apache.aries.mytest.MySPI2")) {
      assertNull(sr.getReference().getProperty("approval"));
      foundMySPI2=true;
    }
  }
  assertTrue(foundMySPI);
  assertTrue(foundMySPI2);
  assertEquals(expectedObjectClasses,actualObjectClasses);
}

</code></pre>

<br>
<pre class="type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void testAddingBundleWithBundleClassPath() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  BundleContext implBC=EasyMock.createMock(BundleContext.class);
  EasyMock.expect(implBC.registerService(EasyMock.eq("org.apache.aries.mytest.MySPI"),EasyMock.isA(ServiceFactory.class),(Dictionary<String,?>)EasyMock.anyObject())).andReturn(EasyMock.createNiceMock(ServiceRegistration.class)).times(3);
  EasyMock.replay(implBC);
  Bundle implBundle=EasyMock.createNiceMock(Bundle.class);
  EasyMock.expect(implBundle.getBundleContext()).andReturn(implBC).anyTimes();
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.PROVIDER_REQUIREMENT);
  headers.put(SpiFlyConstants.PROVIDE_CAPABILITY,SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE + "; " + SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "=org.apache.aries.mytest.MySPI");
  headers.put(Constants.BUNDLE_CLASSPATH,".,non-jar.jar,embedded.jar,embedded2.jar");
  EasyMock.expect(implBundle.getHeaders()).andReturn(headers).anyTimes();
  URL embeddedJar=getClass().getResource("/embedded.jar");
  assertNotNull("precondition",embeddedJar);
  EasyMock.expect(implBundle.getResource("embedded.jar")).andReturn(embeddedJar).anyTimes();
  URL embedded2Jar=getClass().getResource("/embedded2.jar");
  assertNotNull("precondition",embedded2Jar);
  EasyMock.expect(implBundle.getResource("embedded2.jar")).andReturn(embedded2Jar).anyTimes();
  URL dir=new URL("jar:" + embeddedJar + "!/META-INF/services");
  assertNotNull("precondition",dir);
  EasyMock.expect(implBundle.getResource("/META-INF/services")).andReturn(dir).anyTimes();
  EasyMock.expect(implBundle.findEntries((String)EasyMock.anyObject(),(String)EasyMock.anyObject(),EasyMock.anyBoolean())).andReturn(null).anyTimes();
  ClassLoader cl=new URLClassLoader(new URL[]{embeddedJar},getClass().getClassLoader());
  Class<?> clsA=cl.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2a");
  EasyMock.expect(implBundle.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2a")).andReturn(clsA).anyTimes();
  Class<?> clsB=cl.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2b");
  EasyMock.expect(implBundle.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2b")).andReturn(clsB).anyTimes();
  ClassLoader cl2=new URLClassLoader(new URL[]{embedded2Jar},getClass().getClassLoader());
  Class<?> clsC=cl2.loadClass("org.apache.aries.spifly.impl3.MySPIImpl3");
  EasyMock.expect(implBundle.loadClass("org.apache.aries.spifly.impl3.MySPIImpl3")).andReturn(clsC).anyTimes();
  EasyMock.replay(implBundle);
  assertEquals("Precondition",0,activator.findProviderBundles("org.apache.aries.mytest.MySPI").size());
  customizer.addingBundle(implBundle,null);
  Collection<Bundle> bundles=activator.findProviderBundles("org.apache.aries.mytest.MySPI");
  assertEquals(1,bundles.size());
  assertSame(implBundle,bundles.iterator().next());
  EasyMock.verify(implBC);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testServiceSubsetSelectionAndRegistrationProperties() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  BundleContext implBC=mockSPIBundleContext4();
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.PROVIDER_REQUIREMENT);
  headers.put(SpiFlyConstants.PROVIDE_CAPABILITY,SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE + "; " + SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "=org.apache.aries.mytest.MySPI2; approval=yeah; "+ SpiFlyConstants.REGISTER_DIRECTIVE+ ":=\"org.apache.aries.spifly.impl4.MySPIImpl4b\"");
  Bundle implBundle=mockSPIBundle4(implBC,headers);
  List<ServiceRegistration> registrations=customizer.addingBundle(implBundle,null);
  assertEquals(1,registrations.size());
  String[] objectClassProp=(String[])registrations.iterator().next().getReference().getProperty(Constants.OBJECTCLASS);
  assertEquals(1,objectClassProp.length);
  assertEquals("org.apache.aries.mytest.MySPI2",objectClassProp[0]);
  assertNotNull(registrations.iterator().next().getReference().getProperty(SpiFlyConstants.SERVICELOADER_MEDIATOR_PROPERTY));
  assertEquals("yeah",registrations.iterator().next().getReference().getProperty("approval"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.ProviderBundleTrackerCustomizerTest </h4><pre class="type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testAddingBundleSPIBundle() throws Exception {
  BundleContext implBC=mockSPIBundleContext(EasyMock.createNiceMock(ServiceRegistration.class));
  Bundle spiBundle=mockSPIBundle(implBC);
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(EasyMock.createNiceMock(BaseActivator.class),spiBundle);
  assertNull("The SpiFly bundle itself should be ignored",customizer.addingBundle(spiBundle,null));
}

</code></pre>

<br>
<pre class="type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void testAddingBundleWithBundleClassPath() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  BundleContext implBC=EasyMock.createMock(BundleContext.class);
  EasyMock.expect(implBC.registerService(EasyMock.eq("org.apache.aries.mytest.MySPI"),EasyMock.isA(ServiceFactory.class),(Dictionary<String,?>)EasyMock.anyObject())).andReturn(EasyMock.createNiceMock(ServiceRegistration.class)).times(3);
  EasyMock.replay(implBC);
  Bundle implBundle=EasyMock.createNiceMock(Bundle.class);
  EasyMock.expect(implBundle.getBundleContext()).andReturn(implBC).anyTimes();
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.SPI_PROVIDER_HEADER,"*");
  headers.put(Constants.BUNDLE_CLASSPATH,".,non-jar.jar,embedded.jar,embedded2.jar");
  EasyMock.expect(implBundle.getHeaders()).andReturn(headers).anyTimes();
  URL embeddedJar=getClass().getResource("/embedded.jar");
  assertNotNull("precondition",embeddedJar);
  EasyMock.expect(implBundle.getResource("embedded.jar")).andReturn(embeddedJar).anyTimes();
  URL embedded2Jar=getClass().getResource("/embedded2.jar");
  assertNotNull("precondition",embedded2Jar);
  EasyMock.expect(implBundle.getResource("embedded2.jar")).andReturn(embedded2Jar).anyTimes();
  URL dir=new URL("jar:" + embeddedJar + "!/META-INF/services");
  assertNotNull("precondition",dir);
  EasyMock.expect(implBundle.getResource("/META-INF/services")).andReturn(dir).anyTimes();
  EasyMock.expect(implBundle.findEntries((String)EasyMock.anyObject(),(String)EasyMock.anyObject(),EasyMock.anyBoolean())).andReturn(null).anyTimes();
  ClassLoader cl=new URLClassLoader(new URL[]{embeddedJar},getClass().getClassLoader());
  Class<?> clsA=cl.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2a");
  EasyMock.expect(implBundle.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2a")).andReturn(clsA).anyTimes();
  Class<?> clsB=cl.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2b");
  EasyMock.expect(implBundle.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2b")).andReturn(clsB).anyTimes();
  ClassLoader cl2=new URLClassLoader(new URL[]{embedded2Jar},getClass().getClassLoader());
  Class<?> clsC=cl2.loadClass("org.apache.aries.spifly.impl3.MySPIImpl3");
  EasyMock.expect(implBundle.loadClass("org.apache.aries.spifly.impl3.MySPIImpl3")).andReturn(clsC).anyTimes();
  EasyMock.replay(implBundle);
  assertEquals("Precondition",0,activator.findProviderBundles("org.apache.aries.mytest.MySPI").size());
  List<ServiceRegistration> registrations=customizer.addingBundle(implBundle,null);
  Collection<Bundle> bundles=activator.findProviderBundles("org.apache.aries.mytest.MySPI");
  assertEquals(1,bundles.size());
  assertSame(implBundle,bundles.iterator().next());
  EasyMock.verify(implBC);
}

</code></pre>

<br>
<pre class="type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testAddingNonOptInBundle() throws Exception {
  BundleContext implBC=mockSPIBundleContext(EasyMock.createNiceMock(ServiceRegistration.class));
  Bundle implBundle=mockSPIBundle(implBC,null);
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(EasyMock.createNiceMock(BaseActivator.class),null);
  assertNull("Bundle doesn't opt-in so should be ignored",customizer.addingBundle(implBundle,null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.UtilTest </h4><pre class="type-13 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNotInitialized() throws Exception {
  BaseActivator.activator=null;
  URL url=getClass().getResource("/embedded3.jar");
  assertNotNull("precondition",url);
  Bundle providerBundle=EasyMock.createMock(Bundle.class);
  final ClassLoader providerCL=new TestBundleClassLoader(new URL[]{url},getClass().getClassLoader(),providerBundle);
  EasyMock.expect(providerBundle.getBundleId()).andReturn(42L).anyTimes();
  EasyMock.expect(providerBundle.getEntryPaths((String)EasyMock.anyObject())).andReturn(null).anyTimes();
  Dictionary<String,String> providerHeaders=new Hashtable<String,String>();
  providerHeaders.put(Constants.BUNDLE_CLASSPATH,".,embedded3.jar");
  EasyMock.expect(providerBundle.getHeaders()).andReturn(providerHeaders).anyTimes();
  EasyMock.expect(providerBundle.getResource("embedded3.jar")).andReturn(url).anyTimes();
  providerBundle.loadClass((String)EasyMock.anyObject());
  EasyMock.expectLastCall().andAnswer(new IAnswer<Class<?>>(){
    @Override public Class<?> answer() throws Throwable {
      return providerCL.loadClass((String)EasyMock.getCurrentArguments()[0]);
    }
  }
).anyTimes();
  EasyMock.replay(providerBundle);
  Bundle clientBundle=EasyMock.createMock(Bundle.class);
  EasyMock.replay(clientBundle);
  ClassLoader clientCL=new TestBundleClassLoader(new URL[]{},getClass().getClassLoader(),clientBundle);
  Thread.currentThread().setContextClassLoader(null);
  Util.fixContextClassloader(ServiceLoader.class.getName(),"load",MySPI.class,clientCL);
  assertSame("The system is not yet initialized, so the TCCL should not be set",null,Thread.currentThread().getContextClassLoader());
}

</code></pre>

<br>
<pre class="type-13 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFixContextClassLoaderSimpleViaEmbeddedJar() throws Exception {
  BaseActivator activator=new BaseActivator(){
    public void start(    BundleContext context) throws Exception {
    }
  }
;
  BaseActivator.activator=activator;
  URL url=getClass().getResource("/embedded3.jar");
  assertNotNull("precondition",url);
  Bundle providerBundle=EasyMock.createMock(Bundle.class);
  final ClassLoader providerCL=new TestBundleClassLoader(new URL[]{url},getClass().getClassLoader(),providerBundle);
  EasyMock.expect(providerBundle.getBundleContext()).andThrow(new IllegalStateException("Disable getBundleClassLoaderViaAdapt"));
  EasyMock.expect(providerBundle.getBundleId()).andReturn(42L).anyTimes();
  EasyMock.expect(providerBundle.getEntryPaths((String)EasyMock.anyObject())).andReturn(null).anyTimes();
  Dictionary<String,String> providerHeaders=new Hashtable<String,String>();
  providerHeaders.put(Constants.BUNDLE_CLASSPATH,".,embedded3.jar");
  EasyMock.expect(providerBundle.getHeaders()).andReturn(providerHeaders).anyTimes();
  EasyMock.expect(providerBundle.getResource("embedded3.jar")).andReturn(url).anyTimes();
  providerBundle.loadClass((String)EasyMock.anyObject());
  EasyMock.expectLastCall().andAnswer(new IAnswer<Class<?>>(){
    @Override public Class<?> answer() throws Throwable {
      return providerCL.loadClass((String)EasyMock.getCurrentArguments()[0]);
    }
  }
).anyTimes();
  EasyMock.replay(providerBundle);
  activator.registerProviderBundle(MySPI.class.getName(),providerBundle,new HashMap<String,Object>());
  Bundle clientBundle=EasyMock.createMock(Bundle.class);
  EasyMock.replay(clientBundle);
  ClassLoader clientCL=new TestBundleClassLoader(new URL[]{},getClass().getClassLoader(),clientBundle);
  Thread.currentThread().setContextClassLoader(null);
  Util.fixContextClassloader(ServiceLoader.class.getName(),"load",MySPI.class,clientCL);
  assertSame(providerCL,Thread.currentThread().getContextClassLoader());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.dynamic.ClientWeavingHookGenericCapabilityTest </h4><pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHeadersFromFragment() throws Exception {
  Bundle providerBundle=mockProviderBundle("impl1",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle,new HashMap<String,Object>());
  Dictionary<String,String> fragmentConsumerHeaders=new Hashtable<String,String>();
  fragmentConsumerHeaders.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.CLIENT_REQUIREMENT);
  Bundle fragment=EasyMock.createMock(Bundle.class);
  EasyMock.expect(fragment.getHeaders()).andReturn(fragmentConsumerHeaders).anyTimes();
  EasyMock.replay(fragment);
  BundleRevision frev=EasyMock.createMock(BundleRevision.class);
  EasyMock.expect(frev.getBundle()).andReturn(fragment).anyTimes();
  EasyMock.replay(frev);
  BundleRequirement req=EasyMock.createMock(BundleRequirement.class);
  EasyMock.expect(req.getRevision()).andReturn(frev).anyTimes();
  EasyMock.replay(req);
  BundleWire wire=EasyMock.createMock(BundleWire.class);
  EasyMock.expect(wire.getRequirement()).andReturn(req).anyTimes();
  EasyMock.replay(wire);
  List<BundleWire> wires=Collections.singletonList(wire);
  BundleWiring wiring=EasyMock.createMock(BundleWiring.class);
  EasyMock.expect(wiring.getProvidedWires("osgi.wiring.host")).andReturn(wires).anyTimes();
  EasyMock.replay(wiring);
  BundleRevision rev=EasyMock.createMock(BundleRevision.class);
  EasyMock.expect(rev.getWiring()).andReturn(wiring).anyTimes();
  EasyMock.replay(rev);
  Bundle consumerBundle=mockConsumerBundle(new Hashtable<String,String>(),rev,providerBundle);
  activator.addConsumerWeavingData(consumerBundle,SpiFlyConstants.REQUIRE_CAPABILITY);
  Bundle spiFlyBundle=mockSpiFlyBundle("spifly",Version.parseVersion("1.9.4"),consumerBundle,providerBundle);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("TestClient.class");
  Assert.assertNotNull("Precondition",clsUrl);
  String clientClassName="org.apache.aries.spifly.dynamic.TestClient";
  WovenClass wc=new MyWovenClass(clsUrl,clientClassName,consumerBundle);
  Assert.assertEquals("Precondition",0,wc.getDynamicImports().size());
  wh.weave(wc);
  Assert.assertEquals(1,wc.getDynamicImports().size());
  String di1="org.apache.aries.spifly;bundle-symbolic-name=spifly;bundle-version=1.9.4";
  String di2="org.apache.aries.spifly;bundle-version=1.9.4;bundle-symbolic-name=spifly";
  String di=wc.getDynamicImports().get(0);
  Assert.assertTrue("Weaving should have added a dynamic import",di1.equals(di) || di2.equals(di));
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  Object result=method.invoke(cls.newInstance(),"hello");
  Assert.assertEquals(Collections.singleton("olleh"),result);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAltServiceLoaderLoadUnprocessed() throws Exception {
  Bundle spiFlyBundle=mockSpiFlyBundle();
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.CLIENT_REQUIREMENT);
  Bundle consumerBundle=mockConsumerBundle(headers,spiFlyBundle);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("UnaffectedTestClient.class");
  Assert.assertNotNull("Precondition",clsUrl);
  WovenClass wc=new MyWovenClass(clsUrl,"org.apache.aries.spifly.dynamic.UnaffectedTestClient",consumerBundle);
  Assert.assertEquals("Precondition",0,wc.getDynamicImports().size());
  wh.weave(wc);
  Assert.assertEquals("The client is not affected so no additional imports should have been added",0,wc.getDynamicImports().size());
  Bundle providerBundle=mockProviderBundle("impl1",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle,new HashMap<String,Object>());
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  Object result=method.invoke(cls.newInstance(),"hello");
  Assert.assertEquals("impl4",result);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTCCLResetting() throws Exception {
  ClassLoader cl=new URLClassLoader(new URL[]{});
  Thread.currentThread().setContextClassLoader(cl);
  Assert.assertSame("Precondition",cl,Thread.currentThread().getContextClassLoader());
  Dictionary<String,String> consumerHeaders=new Hashtable<String,String>();
  consumerHeaders.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.CLIENT_REQUIREMENT);
  Bundle providerBundle=mockProviderBundle("impl1",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle,new HashMap<String,Object>());
  Bundle consumerBundle=mockConsumerBundle(consumerHeaders,providerBundle);
  activator.addConsumerWeavingData(consumerBundle,SpiFlyConstants.REQUIRE_CAPABILITY);
  Bundle spiFlyBundle=mockSpiFlyBundle("spifly",Version.parseVersion("1.9.4"),consumerBundle,providerBundle);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("TestClient.class");
  Assert.assertNotNull("Precondition",clsUrl);
  String clientClassName="org.apache.aries.spifly.dynamic.TestClient";
  WovenClass wc=new MyWovenClass(clsUrl,clientClassName,consumerBundle);
  Assert.assertEquals("Precondition",0,wc.getDynamicImports().size());
  wh.weave(wc);
  Assert.assertEquals(1,wc.getDynamicImports().size());
  String di1="org.apache.aries.spifly;bundle-symbolic-name=spifly;bundle-version=1.9.4";
  String di2="org.apache.aries.spifly;bundle-version=1.9.4;bundle-symbolic-name=spifly";
  String di=wc.getDynamicImports().get(0);
  Assert.assertTrue("Weaving should have added a dynamic import",di1.equals(di) || di2.equals(di));
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  method.invoke(cls.newInstance(),"hi there");
  Assert.assertSame(cl,Thread.currentThread().getContextClassLoader());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasicServiceLoaderUsage() throws Exception {
  Dictionary<String,String> consumerHeaders=new Hashtable<String,String>();
  consumerHeaders.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.CLIENT_REQUIREMENT);
  Bundle providerBundle=mockProviderBundle("impl1",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle,new HashMap<String,Object>());
  Bundle consumerBundle=mockConsumerBundle(consumerHeaders,providerBundle);
  activator.addConsumerWeavingData(consumerBundle,SpiFlyConstants.REQUIRE_CAPABILITY);
  Bundle spiFlyBundle=mockSpiFlyBundle("spifly",Version.parseVersion("1.9.4"),consumerBundle,providerBundle);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("TestClient.class");
  Assert.assertNotNull("Precondition",clsUrl);
  String clientClassName="org.apache.aries.spifly.dynamic.TestClient";
  WovenClass wc=new MyWovenClass(clsUrl,clientClassName,consumerBundle);
  Assert.assertEquals("Precondition",0,wc.getDynamicImports().size());
  wh.weave(wc);
  Assert.assertEquals(1,wc.getDynamicImports().size());
  String di1="org.apache.aries.spifly;bundle-symbolic-name=spifly;bundle-version=1.9.4";
  String di2="org.apache.aries.spifly;bundle-version=1.9.4;bundle-symbolic-name=spifly";
  String di=wc.getDynamicImports().get(0);
  Assert.assertTrue("Weaving should have added a dynamic import",di1.equals(di) || di2.equals(di));
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  Object result=method.invoke(cls.newInstance(),"hello");
  Assert.assertEquals(Collections.singleton("olleh"),result);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.dynamic.ClientWeavingHookOSGi43Test </h4><pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasicServiceLoaderUsageWithClassLoaderFromBundleRevision() throws Exception {
  Dictionary<String,String> consumerHeaders=new Hashtable<String,String>();
  consumerHeaders.put(SpiFlyConstants.SPI_CONSUMER_HEADER,"*");
  Bundle providerBundle=mockProviderBundle("impl1",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle,new HashMap<String,Object>());
  Bundle consumerBundle=mockConsumerBundle(consumerHeaders,providerBundle);
  activator.addConsumerWeavingData(consumerBundle,SpiFlyConstants.SPI_CONSUMER_HEADER);
  Bundle spiFlyBundle=mockSpiFlyBundle("spifly",Version.parseVersion("1.9.4"),consumerBundle,providerBundle);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("TestClient.class");
  Assert.assertNotNull("Precondition",clsUrl);
  String clientClassName="org.apache.aries.spifly.dynamic.TestClient";
  WovenClass wc=new MyWovenClass(clsUrl,clientClassName,consumerBundle);
  Assert.assertEquals("Precondition",0,wc.getDynamicImports().size());
  wh.weave(wc);
  Assert.assertEquals(1,wc.getDynamicImports().size());
  String di1="org.apache.aries.spifly;bundle-symbolic-name=spifly;bundle-version=1.9.4";
  String di2="org.apache.aries.spifly;bundle-version=1.9.4;bundle-symbolic-name=spifly";
  String di=wc.getDynamicImports().get(0);
  Assert.assertTrue("Weaving should have added a dynamic import",di1.equals(di) || di2.equals(di));
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  Object result=method.invoke(cls.newInstance(),"hello");
  Assert.assertEquals(Collections.singleton("olleh"),result);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.dynamic.ClientWeavingHookTest </h4><pre class="type-4 type-3 type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTCCLResetting() throws Exception {
  ClassLoader cl=new URLClassLoader(new URL[]{});
  Thread.currentThread().setContextClassLoader(cl);
  Assert.assertSame("Precondition",cl,Thread.currentThread().getContextClassLoader());
  Dictionary<String,String> consumerHeaders=new Hashtable<String,String>();
  consumerHeaders.put(SpiFlyConstants.SPI_CONSUMER_HEADER,"*");
  Bundle providerBundle=mockProviderBundle("impl1",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle,new HashMap<String,Object>());
  Bundle consumerBundle=mockConsumerBundle(consumerHeaders,providerBundle);
  activator.addConsumerWeavingData(consumerBundle,SpiFlyConstants.SPI_CONSUMER_HEADER);
  Bundle spiFlyBundle=mockSpiFlyBundle("spifly",Version.parseVersion("1.9.4"),consumerBundle,providerBundle);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("TestClient.class");
  Assert.assertNotNull("Precondition",clsUrl);
  String clientClassName="org.apache.aries.spifly.dynamic.TestClient";
  WovenClass wc=new MyWovenClass(clsUrl,clientClassName,consumerBundle);
  Assert.assertEquals("Precondition",0,wc.getDynamicImports().size());
  wh.weave(wc);
  Assert.assertEquals(1,wc.getDynamicImports().size());
  String di1="org.apache.aries.spifly;bundle-symbolic-name=spifly;bundle-version=1.9.4";
  String di2="org.apache.aries.spifly;bundle-version=1.9.4;bundle-symbolic-name=spifly";
  String di=wc.getDynamicImports().get(0);
  Assert.assertTrue("Weaving should have added a dynamic import",di1.equals(di) || di2.equals(di));
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  method.invoke(cls.newInstance(),"hi there");
  Assert.assertSame(cl,Thread.currentThread().getContextClassLoader());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAltServiceLoaderLoadUnprocessed() throws Exception {
  Bundle spiFlyBundle=mockSpiFlyBundle();
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.SPI_CONSUMER_HEADER,"*");
  Bundle consumerBundle=mockConsumerBundle(headers,spiFlyBundle);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("UnaffectedTestClient.class");
  Assert.assertNotNull("Precondition",clsUrl);
  WovenClass wc=new MyWovenClass(clsUrl,"org.apache.aries.spifly.dynamic.UnaffectedTestClient",consumerBundle);
  Assert.assertEquals("Precondition",0,wc.getDynamicImports().size());
  wh.weave(wc);
  Assert.assertEquals("The client is not affected so no additional imports should have been added",0,wc.getDynamicImports().size());
  Bundle providerBundle=mockProviderBundle("impl1",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle,new HashMap<String,Object>());
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  Object result=method.invoke(cls.newInstance(),"hello");
  Assert.assertEquals("impl4",result);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasicServiceLoaderUsage() throws Exception {
  Dictionary<String,String> consumerHeaders=new Hashtable<String,String>();
  consumerHeaders.put(SpiFlyConstants.SPI_CONSUMER_HEADER,"*");
  Bundle providerBundle=mockProviderBundle("impl1",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle,new HashMap<String,Object>());
  Bundle consumerBundle=mockConsumerBundle(consumerHeaders,providerBundle);
  activator.addConsumerWeavingData(consumerBundle,SpiFlyConstants.SPI_CONSUMER_HEADER);
  Bundle spiFlyBundle=mockSpiFlyBundle("spifly",Version.parseVersion("1.9.4"),consumerBundle,providerBundle);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("TestClient.class");
  Assert.assertNotNull("Precondition",clsUrl);
  String clientClassName="org.apache.aries.spifly.dynamic.TestClient";
  WovenClass wc=new MyWovenClass(clsUrl,clientClassName,consumerBundle);
  Assert.assertEquals("Precondition",0,wc.getDynamicImports().size());
  wh.weave(wc);
  Assert.assertEquals(1,wc.getDynamicImports().size());
  String di1="org.apache.aries.spifly;bundle-symbolic-name=spifly;bundle-version=1.9.4";
  String di2="org.apache.aries.spifly;bundle-version=1.9.4;bundle-symbolic-name=spifly";
  String di=wc.getDynamicImports().get(0);
  Assert.assertTrue("Weaving should have added a dynamic import",di1.equals(di) || di2.equals(di));
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  Object result=method.invoke(cls.newInstance(),"hello");
  Assert.assertEquals(Collections.singleton("olleh"),result);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.statictool.ConsumerTest </h4><pre class="type-4 type-3 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConsumerBundle() throws Exception {
  String testClassFileName=TestClass.class.getName().replace('.','/') + ".class";
  URL testClassURL=getClass().getResource("/" + testClassFileName);
  String test2ClassFileName=Test2Class.class.getName().replace('.','/') + ".class";
  URL test2ClassURL=getClass().getResource("/" + test2ClassFileName);
  String test3ClassFileName=Test3Class.class.getName().replace('.','/') + ".class";
  URL test3ClassURL=getClass().getResource("/" + test3ClassFileName);
  File jarFile=new File(System.getProperty("java.io.tmpdir") + "/testjar_" + System.currentTimeMillis()+ ".jar");
  File expectedFile=null;
  try {
    Manifest mf=new Manifest();
    Attributes mainAttributes=mf.getMainAttributes();
    mainAttributes.putValue("Manifest-Version","1.0");
    mainAttributes.putValue("Bundle-ManifestVersion","2.0");
    mainAttributes.putValue("Bundle-SymbolicName","testbundle");
    mainAttributes.putValue("Foo","Bar Bar");
    mainAttributes.putValue(SpiFlyConstants.SPI_CONSUMER_HEADER,Test2Class.class.getName() + "#getTCCL()");
    JarOutputStream jos=new JarOutputStream(new FileOutputStream(jarFile),mf);
    jos.putNextEntry(new ZipEntry(testClassFileName));
    Streams.pump(testClassURL.openStream(),jos);
    jos.putNextEntry(new ZipEntry(test2ClassFileName));
    Streams.pump(test2ClassURL.openStream(),jos);
    jos.putNextEntry(new ZipEntry(test3ClassFileName));
    Streams.pump(test3ClassURL.openStream(),jos);
    jos.close();
    Main.main(jarFile.getCanonicalPath());
    expectedFile=new File(jarFile.getParent(),jarFile.getName().replaceAll("[.]jar","_spifly.jar"));
    Assert.assertTrue("A processed separate bundle should have been created",expectedFile.exists());
    JarFile transformedJarFile=new JarFile(expectedFile);
    Manifest expectedMF=transformedJarFile.getManifest();
    Assert.assertEquals("1.0",expectedMF.getMainAttributes().getValue("Manifest-Version"));
    Assert.assertEquals("2.0",expectedMF.getMainAttributes().getValue("Bundle-ManifestVersion"));
    Assert.assertEquals("testbundle",expectedMF.getMainAttributes().getValue("Bundle-SymbolicName"));
    Assert.assertEquals("Bar Bar",expectedMF.getMainAttributes().getValue("Foo"));
    Assert.assertEquals("org.apache.aries.spifly;version=\"[1.0.0,1.1.0)\"",expectedMF.getMainAttributes().getValue("Import-Package"));
    Assert.assertNull(expectedMF.getMainAttributes().get(SpiFlyConstants.SPI_CONSUMER_HEADER));
    JarFile initialJarFile=new JarFile(jarFile);
    byte[] orgBytes=Streams.suck(initialJarFile.getInputStream(new ZipEntry(testClassFileName)));
    byte[] transBytes=Streams.suck(transformedJarFile.getInputStream(new ZipEntry(testClassFileName)));
    Assert.assertFalse("The transformed class should be different",Arrays.equals(orgBytes,transBytes));
    byte[] orgBytes2=Streams.suck(initialJarFile.getInputStream(new ZipEntry(test2ClassFileName)));
    byte[] nonTransBytes2=Streams.suck(transformedJarFile.getInputStream(new ZipEntry(test2ClassFileName)));
    Assert.assertArrayEquals(orgBytes2,nonTransBytes2);
    byte[] orgBytes3=Streams.suck(initialJarFile.getInputStream(new ZipEntry(test3ClassFileName)));
    byte[] nonTransBytes3=Streams.suck(transformedJarFile.getInputStream(new ZipEntry(test3ClassFileName)));
    Assert.assertArrayEquals(orgBytes3,nonTransBytes3);
    initialJarFile.close();
    transformedJarFile.close();
  }
  finally {
    jarFile.delete();
    if (expectedFile != null)     expectedFile.delete();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.statictool.RequirementTest </h4><pre class="type-4 type-3 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConsumerBundle() throws Exception {
  String testClassFileName=TestClass.class.getName().replace('.','/') + ".class";
  URL testClassURL=getClass().getResource("/" + testClassFileName);
  String test2ClassFileName=Test2Class.class.getName().replace('.','/') + ".class";
  URL test2ClassURL=getClass().getResource("/" + test2ClassFileName);
  String test3ClassFileName=Test3Class.class.getName().replace('.','/') + ".class";
  URL test3ClassURL=getClass().getResource("/" + test3ClassFileName);
  File jarFile=new File(System.getProperty("java.io.tmpdir") + "/testjar_" + System.currentTimeMillis()+ ".jar");
  File expectedFile=null;
  try {
    Manifest mf=new Manifest();
    Attributes mainAttributes=mf.getMainAttributes();
    mainAttributes.putValue("Manifest-Version","1.0");
    mainAttributes.putValue("Bundle-ManifestVersion","2.0");
    mainAttributes.putValue("Bundle-SymbolicName","testbundle");
    mainAttributes.putValue("Foo","Bar Bar");
    mainAttributes.putValue("Import-Package","org.foo.bar");
    mainAttributes.putValue(SpiFlyConstants.REQUIRE_CAPABILITY,"osgi.serviceloader; filter:=\"(osgi.serviceloader=org.apache.aries.spifly.mysvc.SPIProvider)\";cardinality:=multiple, " + "osgi.extender; filter:=\"(osgi.extender=osgi.serviceloader.processor)\"");
    JarOutputStream jos=new JarOutputStream(new FileOutputStream(jarFile),mf);
    jos.putNextEntry(new ZipEntry(testClassFileName));
    Streams.pump(testClassURL.openStream(),jos);
    jos.putNextEntry(new ZipEntry(test2ClassFileName));
    Streams.pump(test2ClassURL.openStream(),jos);
    jos.putNextEntry(new ZipEntry(test3ClassFileName));
    Streams.pump(test3ClassURL.openStream(),jos);
    jos.close();
    Main.main(jarFile.getCanonicalPath());
    expectedFile=new File(jarFile.getParent(),jarFile.getName().replaceAll("[.]jar","_spifly.jar"));
    Assert.assertTrue("A processed separate bundle should have been created",expectedFile.exists());
    JarFile transformedJarFile=new JarFile(expectedFile);
    Manifest actualMF=transformedJarFile.getManifest();
    Assert.assertEquals("1.0",actualMF.getMainAttributes().getValue("Manifest-Version"));
    Assert.assertEquals("2.0",actualMF.getMainAttributes().getValue("Bundle-ManifestVersion"));
    Assert.assertEquals("testbundle",actualMF.getMainAttributes().getValue("Bundle-SymbolicName"));
    Assert.assertEquals("Bar Bar",actualMF.getMainAttributes().getValue("Foo"));
    Assert.assertEquals("osgi.serviceloader; filter:=\"(osgi.serviceloader=org.apache.aries.spifly.mysvc.SPIProvider)\";cardinality:=multiple",actualMF.getMainAttributes().getValue(SpiFlyConstants.REQUIRE_CAPABILITY));
    Assert.assertNull("Should not generate this header when processing Require-Capability",actualMF.getMainAttributes().getValue(SpiFlyConstants.PROCESSED_SPI_CONSUMER_HEADER));
    String importPackage=actualMF.getMainAttributes().getValue("Import-Package");
    Assert.assertTrue("org.foo.bar,org.apache.aries.spifly;version=\"[1.0.0,1.1.0)\"".equals(importPackage) || "org.apache.aries.spifly;version=\"[1.0.0,1.1.0)\",org.foo.bar".equals(importPackage));
    JarFile initialJarFile=new JarFile(jarFile);
    byte[] orgBytes=Streams.suck(initialJarFile.getInputStream(new ZipEntry(testClassFileName)));
    byte[] nonTransBytes=Streams.suck(transformedJarFile.getInputStream(new ZipEntry(testClassFileName)));
    Assert.assertArrayEquals(orgBytes,nonTransBytes);
    byte[] orgBytes2=Streams.suck(initialJarFile.getInputStream(new ZipEntry(test2ClassFileName)));
    byte[] nonTransBytes2=Streams.suck(transformedJarFile.getInputStream(new ZipEntry(test2ClassFileName)));
    Assert.assertArrayEquals(orgBytes2,nonTransBytes2);
    byte[] orgBytes3=Streams.suck(initialJarFile.getInputStream(new ZipEntry(test3ClassFileName)));
    byte[] transBytes3=Streams.suck(transformedJarFile.getInputStream(new ZipEntry(test3ClassFileName)));
    Assert.assertFalse("The transformed class should be different",Arrays.equals(orgBytes3,transBytes3));
    initialJarFile.close();
    transformedJarFile.close();
  }
  finally {
    jarFile.delete();
    if (expectedFile != null)     expectedFile.delete();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.core.internal.LocationTest </h4><pre class="type-5 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAnyLocationString(){
  String locationStr="anyLocation";
  Location location=null;
  try {
    location=new Location(locationStr);
  }
 catch (  Throwable t) {
    t.printStackTrace();
    fail("Any location string must be supported");
  }
  assertNull("Wrong symbolic name",location.getSymbolicName());
  assertEquals("Wrong value",locationStr,location.getValue());
  assertNull("Wrong version",location.getVersion());
  try {
    location.open();
    fail("Opening a location that does not represent a URL should fail");
  }
 catch (  MalformedURLException e) {
  }
catch (  Throwable t) {
    t.printStackTrace();
    fail("Wrong exception");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.CompositeServiceTest </h4><pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompositeServiceImportExportWildcards() throws Exception {
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put("test","testCompositeServiceImports");
  ServiceRegistration<String> reg=bundleContext.registerService(String.class,"testCompositeServiceImports",props);
  Filter filter=bundleContext.createFilter("(&(objectClass=java.lang.String)(test=tb4))");
  ServiceTracker<String,String> st=new ServiceTracker<String,String>(bundleContext,filter,null);
  st.open();
  Subsystem subsystem=installSubsystemFromFile("composite2.esa");
  try {
    assertEquals(Subsystem.State.INSTALLED,subsystem.getState());
    subsystem.start();
    String svc=st.waitForService(5000);
    assertNotNull("The service registered by the bundle inside the composite cannot be found",svc);
    assertEquals(Subsystem.State.ACTIVE,subsystem.getState());
  }
  finally {
    subsystem.stop();
    uninstallSubsystem(subsystem);
    reg.unregister();
    st.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.CustomContentHandlerTest </h4><pre class="type-12 type-5 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("This test currently doesn't pass, the bundle moves to the active state, while it shouldn't") public void testCustomContentStartException() throws Exception {
  for (  Bundle b : bundleContext.getBundles()) {
    if ("org.apache.aries.subsystem.itests.customcontent.bundleC".equals(b.getSymbolicName())) {
      fail("Precondition");
    }
  }
  SausagesContentHandler handler=new SausagesContentHandler(true,"start");
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(ContentHandler.CONTENT_TYPE_PROPERTY,"foo.sausages");
  ServiceRegistration<ContentHandler> reg=bundleContext.registerService(ContentHandler.class,handler,props);
  assertEquals("Precondition",0,handler.calls.size());
  Subsystem subsystem=installSubsystemFromFile("customContent2.esa");
  try {
    assertEquals(Arrays.asList("install:customContent3 sausages = 3"),handler.calls);
    try {
      Bundle theBundle=null;
      for (      Bundle b : bundleContext.getBundles()) {
        if ("org.apache.aries.subsystem.itests.customcontent.bundleC".equals(b.getSymbolicName())) {
          assertEquals(Bundle.INSTALLED,b.getState());
          theBundle=b;
        }
      }
      assertNotNull(theBundle);
      try {
        subsystem.start();
      }
 catch (      Exception ex) {
      }
      assertEquals("There was an exception during start, so the bundle should not be started",Bundle.INSTALLED,theBundle.getState());
    }
  finally {
      subsystem.uninstall();
    }
  }
  finally {
    reg.unregister();
  }
}

</code></pre>

<br>
<pre class="type-12 type-5 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("This test currently doesn't pass, the bundle moves to the active state, while it shouldn't") public void testCustomContentStartFailCoordination() throws Exception {
  for (  Bundle b : bundleContext.getBundles()) {
    if ("org.apache.aries.subsystem.itests.customcontent.bundleD".equals(b.getSymbolicName())) {
      fail("Precondition");
    }
  }
  SausagesContentHandler handler=new SausagesContentHandler(false,"start");
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(ContentHandler.CONTENT_TYPE_PROPERTY,"foo.sausages");
  ServiceRegistration<ContentHandler> reg=bundleContext.registerService(ContentHandler.class,handler,props);
  assertEquals("Precondition",0,handler.calls.size());
  Subsystem subsystem=installSubsystemFromFile("customContent3.esa");
  try {
    assertEquals(Arrays.asList("install:customContent4 sausages = 4"),handler.calls);
    try {
      Bundle theBundle=null;
      for (      Bundle b : bundleContext.getBundles()) {
        if ("org.apache.aries.subsystem.itests.customcontent.bundleD".equals(b.getSymbolicName())) {
          assertEquals(Bundle.INSTALLED,b.getState());
          theBundle=b;
        }
      }
      assertNotNull(theBundle);
      try {
        subsystem.start();
      }
 catch (      Exception ex) {
      }
      assertEquals("The coordination failued during start, so the bundle should not be started",Bundle.INSTALLED,theBundle.getState());
    }
  finally {
      subsystem.uninstall();
    }
  }
  finally {
    reg.unregister();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.DynamicImportTest </h4><pre class="type-4 type-5 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("rawtypes") @Test public void testDynamicPackageImportsAddedToSharingPolicyWhenNoImportPackageHeader() throws Exception {
  final AtomicBoolean weavingHookCalled=new AtomicBoolean(false);
  ServiceRegistration reg=bundleContext.registerService(WeavingHook.class,new WeavingHook(){
    @Override public void weave(    WovenClass wovenClass){
      if (BUNDLE_A.equals(wovenClass.getBundleWiring().getBundle().getSymbolicName())) {
        wovenClass.getDynamicImports().add("org.osgi.framework");
        weavingHookCalled.set(true);
      }
    }
  }
,null);
  try {
    Subsystem s=installSubsystemFromFile(APPLICATION_A);
    try {
      assertNull("Import-Package header should not exist",s.getSubsystemHeaders(null).get(Constants.IMPORT_PACKAGE));
      Bundle a=getConstituentAsBundle(s,BUNDLE_A,null,null);
      a.loadClass("Empty");
      assertTrue("Weaving hook not called",weavingHookCalled.get());
      try {
        a.loadClass("org.osgi.framework.Bundle");
      }
 catch (      Exception e) {
        fail("Woven dynamic package import not added to the region's sharing policy");
      }
    }
  finally {
      try {
        s.uninstall();
      }
 catch (      Exception e) {
      }
    }
  }
  finally {
    try {
      reg.unregister();
    }
 catch (    Exception e) {
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.ServiceDependencyTest </h4><pre class="type-4 type-5 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportServiceDependencySatisfiedByContent() throws Exception {
  try {
    Subsystem subsystem=installSubsystemFromFile(APPLICATION_C);
    try {
      assertNull("Generated application Subsystem-ImportService header when dependency satisfied by content",subsystem.getSubsystemHeaders(null).get(SubsystemConstants.SUBSYSTEM_IMPORTSERVICE));
    }
  finally {
      uninstallSubsystemSilently(subsystem);
    }
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    fail("Installation must succeed if service dependency is satisfied");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1368Test </h4><pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testApplicationWithFragmentInRepositoryWithSubsystemContentHeaderWithType() throws Exception {
  Subsystem applicationB=installSubsystemFromFile(APPLICATION_B);
  try {
    assertConstituents(3,applicationB);
    startSubsystem(applicationB);
    assertBundleState(Bundle.ACTIVE,BUNDLE_A,applicationB);
    assertBundleState(Bundle.RESOLVED,FRAGMENT_A,applicationB);
    Bundle bundle=context(applicationB).getBundleByName(FRAGMENT_A);
    assertNotNull("Bundle not found: " + FRAGMENT_A,bundle);
    Resource resource=bundle.adapt(BundleRevision.class);
    Capability capability=resource.getCapabilities(IdentityNamespace.IDENTITY_NAMESPACE).get(0);
    String type=String.valueOf(capability.getAttributes().get(IdentityNamespace.CAPABILITY_TYPE_ATTRIBUTE));
    assertEquals("Wrong type",IdentityNamespace.TYPE_FRAGMENT,type);
  }
  finally {
    stopAndUninstallSubsystemSilently(applicationB);
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testApplicationWithFragmentInArchiveWithSubsystemContentHeaderWithType() throws Exception {
  Subsystem applicationA=installSubsystemFromFile(APPLICATION_A);
  try {
    assertConstituents(3,applicationA);
    startSubsystem(applicationA);
    assertBundleState(Bundle.ACTIVE,BUNDLE_A,applicationA);
    assertBundleState(Bundle.RESOLVED,FRAGMENT_A,applicationA);
    Bundle bundle=context(applicationA).getBundleByName(FRAGMENT_A);
    assertNotNull("Bundle not found: " + FRAGMENT_A,bundle);
    Resource resource=bundle.adapt(BundleRevision.class);
    Capability capability=resource.getCapabilities(IdentityNamespace.IDENTITY_NAMESPACE).get(0);
    assertEquals("Wrong type",IdentityNamespace.TYPE_FRAGMENT,capability.getAttributes().get(IdentityNamespace.CAPABILITY_TYPE_ATTRIBUTE));
  }
  finally {
    stopAndUninstallSubsystemSilently(applicationA);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1383Test </h4><pre class="type-7 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void test5() throws Exception {
  Subsystem root=getRootSubsystem();
  subsystemEvents.clear();
  Subsystem subsystem=root.install("application",new SubsystemArchiveBuilder().header(SubsystemConstants.SUBSYSTEM_SYMBOLICNAME,"application").header(SubsystemConstants.SUBSYSTEM_TYPE,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION + ';' + AriesProvisionDependenciesDirective.RESOLVE.toString()).build());
  try {
    long id=subsystem.getSubsystemId();
    assertEvent(subsystem,State.INSTALLING,subsystemEvents.poll(id,5000));
    assertNull(subsystemEvents.poll(id,1));
    subsystem.start();
    try {
      assertEvent(subsystem,State.INSTALLED,subsystemEvents.poll(id,5000));
      assertEvent(subsystem,State.RESOLVING,subsystemEvents.poll(id,5000));
      assertEvent(subsystem,State.RESOLVED,subsystemEvents.poll(id,5000));
      assertEvent(subsystem,State.STARTING,subsystemEvents.poll(id,5000));
      assertEvent(subsystem,State.ACTIVE,subsystemEvents.poll(id,5000));
      assertNull(subsystemEvents.poll(id,1));
    }
  finally {
      stopSubsystemSilently(subsystem);
    }
  }
  finally {
    uninstallSubsystemSilently(subsystem);
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test19() throws Exception {
  Subsystem root=getRootSubsystem();
  subsystemEvents.clear();
  Subsystem feature1=installSubsystem(root,"feature1",new SubsystemArchiveBuilder().symbolicName("feature1").type(SubsystemConstants.SUBSYSTEM_TYPE_FEATURE).build());
  try {
    Subsystem feature2=installSubsystem(root,"feature2",new SubsystemArchiveBuilder().symbolicName("feature2").type(SubsystemConstants.SUBSYSTEM_TYPE_FEATURE + ';' + AriesProvisionDependenciesDirective.INSTALL.toString()).build());
    try {
      SubsystemArchiveBuilder applicationArchive=new SubsystemArchiveBuilder().symbolicName("application").type(SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION + ';' + AriesProvisionDependenciesDirective.RESOLVE.toString()+ ';'+ SubsystemConstants.PROVISION_POLICY_DIRECTIVE+ ":="+ SubsystemConstants.PROVISION_POLICY_ACCEPT_DEPENDENCIES).content("bundle1").bundle("bundle1",new BundleArchiveBuilder().symbolicName("bundle1").importPackage("a").build()).bundle("bundle2",new BundleArchiveBuilder().symbolicName("bundle2").exportPackage("a").build());
      Subsystem application1=feature1.install("application",applicationArchive.build());
      Subsystem application2=feature2.install("application",applicationArchive.build());
      assertSame("Wrong subsystem",application1,application2);
      assertEquals("Wrong subsystem",application1,application2);
      assertChild(feature1,"application");
      assertChild(feature2,"application");
      long id=application1.getSubsystemId();
      assertEvent(id,"application",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALLING,subsystemEvents.poll(id,5000),ServiceEvent.REGISTERED);
      assertNull("Unexpected event",subsystemEvents.poll(id,1));
      assertConstituent(application1,"bundle1");
      assertNotConstituent(application1,"bundle2");
      application1.start();
      try {
        assertEvent(id,"application",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALLED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
        assertEvent(id,"application",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.RESOLVING,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
        assertEvent(id,"application",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.RESOLVED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
        assertEvent(id,"application",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.STARTING,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
        assertEvent(id,"application",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.ACTIVE,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
        assertNull("Unexpected event",subsystemEvents.poll(id,1));
        assertConstituent(application1,"bundle2");
      }
  finally {
        stopSubsystemSilently(application1);
      }
    }
  finally {
      uninstallSubsystemSilently(feature2);
    }
  }
  finally {
    uninstallSubsystemSilently(feature1);
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void test17() throws Exception {
  Subsystem root=getRootSubsystem();
  subsystemEvents.clear();
  Subsystem parent=root.install(APPLICATION_B,applicationB());
  try {
    long id=parent.getSubsystemId();
    assertEvent(id,APPLICATION_B,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALLING,subsystemEvents.poll(id,5000),ServiceEvent.REGISTERED);
    assertNull("Unexpected event",subsystemEvents.poll(id,1));
    assertNotConstituent(root,BUNDLE_B);
    assertConstituent(parent,BUNDLE_A);
    Subsystem child=getChild(parent,APPLICATION_A);
    assertNotNull("Missing child",child);
    id=child.getSubsystemId();
    assertEvent(id,APPLICATION_A,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALLING,subsystemEvents.poll(id,5000),ServiceEvent.REGISTERED);
    assertNull("Unexpected event",subsystemEvents.poll(id,1));
    assertNotConstituent(root,BUNDLE_D);
    assertConstituent(child,BUNDLE_A);
    assertConstituent(child,BUNDLE_C);
    parent.start();
    try {
      id=parent.getSubsystemId();
      assertEvent(id,APPLICATION_B,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALLED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
      assertEvent(id,APPLICATION_B,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.RESOLVING,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
      assertEvent(id,APPLICATION_B,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.RESOLVED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
      assertEvent(id,APPLICATION_B,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.STARTING,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
      assertEvent(id,APPLICATION_B,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.ACTIVE,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
      assertNull("Unexpected event",subsystemEvents.poll(id,1));
      assertConstituent(root,BUNDLE_B);
      id=child.getSubsystemId();
      assertEvent(id,APPLICATION_A,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALLED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
      assertEvent(id,APPLICATION_A,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.RESOLVING,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
      assertEvent(id,APPLICATION_A,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.RESOLVED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
      assertEvent(id,APPLICATION_A,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.STARTING,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
      assertEvent(id,APPLICATION_A,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.ACTIVE,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
      assertNull("Unexpected event",subsystemEvents.poll(id,1));
      assertConstituent(root,BUNDLE_D);
    }
  finally {
      stopSubsystemSilently(parent);
    }
  }
  finally {
    uninstallSubsystemSilently(parent);
  }
}

</code></pre>

<br>
<pre class="type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testRestart() throws Exception {
  Subsystem root=getRootSubsystem();
  Subsystem a1=installSubsystem(root,"a1",new SubsystemArchiveBuilder().symbolicName("a1").type(SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION + ';' + AriesProvisionDependenciesDirective.RESOLVE.toString()).content("b1,c1;type=osgi.subsystem.composite").bundle("b1",new BundleArchiveBuilder().symbolicName("b1").importPackage("b2").build()).bundle("b2",new BundleArchiveBuilder().symbolicName("b2").exportPackage("b2").build()).subsystem("c1",new SubsystemArchiveBuilder().symbolicName("c1").type(SubsystemConstants.SUBSYSTEM_TYPE_COMPOSITE + ';' + AriesProvisionDependenciesDirective.RESOLVE.toString()).content("b1;version=\"[0,0]\"").importPackage("b2").bundle("b1",new BundleArchiveBuilder().symbolicName("b1").importPackage("b2").build()).build()).build(),false);
  uninstallableSubsystems.add(a1);
  assertChild(root,"a1");
  assertState(State.INSTALLING,a1);
  Subsystem c1=getChild(a1,"c1",null,SubsystemConstants.SUBSYSTEM_TYPE_COMPOSITE);
  assertNotNull("Missing child",c1);
  assertState(State.INSTALLING,c1);
  restartSubsystemsImplBundle();
  root=getRootSubsystem();
  a1=getChild(root,"a1");
  assertNotNull("Missing child",a1);
  uninstallableSubsystems.add(a1);
  assertState(State.INSTALLING,a1);
  assertConstituent(a1,"b1");
  assertNotConstituent(root,"b2");
  c1=getChild(a1,"c1",null,SubsystemConstants.SUBSYSTEM_TYPE_COMPOSITE);
  assertNotNull("Missing child",c1);
  uninstallableSubsystems.add(c1);
  assertConstituent(c1,"b1");
  startSubsystem(c1,false);
  stoppableSubsystems.add(c1);
  assertState(State.INSTALLED,a1);
  stoppableSubsystems.add(a1);
  assertConstituent(root,"b2");
}

</code></pre>

<br>
<pre class="type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testRestart2() throws Exception {
  Subsystem root=getRootSubsystem();
  Subsystem c1=installSubsystem(root,"c1",new SubsystemArchiveBuilder().symbolicName("c1").type(SubsystemConstants.SUBSYSTEM_TYPE_COMPOSITE + ';' + AriesProvisionDependenciesDirective.RESOLVE.toString()).content("c1b1;version=\"[0,0]\"").exportPackage("c1b1").importPackage("c2b1").bundle("c1b1",new BundleArchiveBuilder().symbolicName("c1b1").exportPackage("c1b1").importPackage("c2b1").build()).build(),false);
  uninstallableSubsystems.add(c1);
  Subsystem c2=installSubsystem(root,"c2",new SubsystemArchiveBuilder().symbolicName("c2").type(SubsystemConstants.SUBSYSTEM_TYPE_COMPOSITE + ';' + AriesProvisionDependenciesDirective.RESOLVE.toString()).content("c2b1;version=\"[0,0]\"").exportPackage("c2b1").importPackage("c1b1").bundle("c2b1",new BundleArchiveBuilder().symbolicName("c2b1").exportPackage("c2b1").importPackage("c1b1").build()).build(),false);
  uninstallableSubsystems.add(c2);
  assertChild(root,"c1",null,SubsystemConstants.SUBSYSTEM_TYPE_COMPOSITE);
  assertChild(root,"c2",null,SubsystemConstants.SUBSYSTEM_TYPE_COMPOSITE);
  restartSubsystemsImplBundle();
  root=getRootSubsystem();
  c1=getChild(root,"c1",null,SubsystemConstants.SUBSYSTEM_TYPE_COMPOSITE);
  assertNotNull("Missing child",c1);
  uninstallableSubsystems.add(c1);
  c2=getChild(root,"c2",null,SubsystemConstants.SUBSYSTEM_TYPE_COMPOSITE);
  assertNotNull("Missing child",c2);
  uninstallableSubsystems.add(c2);
  startSubsystem(c1,false);
  stoppableSubsystems.add(c1);
  try {
    assertState(EnumSet.of(State.RESOLVED,State.ACTIVE),c2);
  }
 catch (  AssertionError e) {
    System.out.println(c2.getState());
  }
}

</code></pre>

<br>
<pre class="type-7 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void test18() throws Exception {
  Subsystem root=getRootSubsystem();
  subsystemEvents.clear();
  Subsystem parent=root.install("parent",new SubsystemArchiveBuilder().symbolicName("parent").type(SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION + ';' + AriesProvisionDependenciesDirective.INSTALL.toString()+ ';'+ SubsystemConstants.PROVISION_POLICY_DIRECTIVE+ ":="+ SubsystemConstants.PROVISION_POLICY_ACCEPT_DEPENDENCIES).content("bundle1").bundle("bundle1",new BundleArchiveBuilder().symbolicName("bundle1").importPackage("a").build()).bundle("bundle2",new BundleArchiveBuilder().symbolicName("bundle2").exportPackage("a").build()).build());
  try {
    long id=parent.getSubsystemId();
    assertEvent(id,"parent",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALLING,subsystemEvents.poll(id,5000),ServiceEvent.REGISTERED);
    assertEvent(id,"parent",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALLED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
    assertNull("Unexpected event",subsystemEvents.poll(id,1));
    assertConstituent(parent,"bundle2");
    assertConstituent(parent,"bundle1");
    parent.start();
    Subsystem child=parent.install("child",new SubsystemArchiveBuilder().symbolicName("child").type(SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION + ';' + AriesProvisionDependenciesDirective.RESOLVE.toString()).content("bundle3").bundle("bundle3",new BundleArchiveBuilder().symbolicName("bundle3").importPackage("b").build()).bundle("bundle4",new BundleArchiveBuilder().symbolicName("bundle4").exportPackage("b").build()).build());
    id=child.getSubsystemId();
    assertEvent(id,"child",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALLING,subsystemEvents.poll(id,5000),ServiceEvent.REGISTERED);
    assertNull("Unexpected event",subsystemEvents.poll(id,1));
    assertNotConstituent(parent,"bundle4");
    assertConstituent(child,"bundle3");
    child.start();
    try {
      id=parent.getSubsystemId();
      assertEvent(id,"parent",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.RESOLVING,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
      assertEvent(id,"parent",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.RESOLVED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
      assertEvent(id,"parent",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.STARTING,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
      assertEvent(id,"parent",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.ACTIVE,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
      assertNull("Unexpected event",subsystemEvents.poll(id,1));
      id=child.getSubsystemId();
      assertEvent(id,"child",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALLED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
      assertEvent(id,"child",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.RESOLVING,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
      assertEvent(id,"child",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.RESOLVED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
      assertEvent(id,"child",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.STARTING,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
      assertEvent(id,"child",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.ACTIVE,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
      assertNull("Unexpected event",subsystemEvents.poll(id,1));
      assertConstituent(parent,"bundle4");
    }
  finally {
      stopSubsystemSilently(parent);
    }
  }
  finally {
    uninstallSubsystemSilently(parent);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1426Test </h4><pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoEffectOnSharingPolicy() throws Exception {
  Subsystem applicationA=installSubsystemFromFile(APPLICATION_A);
  try {
    Map<String,String> headers=applicationA.getDeploymentHeaders();
    assertNull("Wrong Require-Capability",headers.get(Constants.REQUIRE_CAPABILITY));
    assertNull("Wrong Subsystem-ImportService",headers.get(SubsystemConstants.SUBSYSTEM_IMPORTSERVICE));
    org.apache.aries.subsystem.core.archive.Header<?> expected=new SubsystemContentHeader("bundle.a.jar;version=\"[0,0]\"");
    org.apache.aries.subsystem.core.archive.Header<?> actual=new SubsystemContentHeader(headers.get(SubsystemConstants.SUBSYSTEM_CONTENT));
    assertEquals("Wrong Subsystem-Content",expected,actual);
    expected=new GenericHeader("Application-ImportService","org.osgi.service.coordinator.Coordinator");
    actual=new GenericHeader("Application-ImportService",headers.get("Application-ImportService"));
    assertEquals("Wrong Application-ImportService",expected,actual);
    BundleContext context=applicationA.getBundleContext();
    assertNull("Coordinator service should not be visible",context.getServiceReference(Coordinator.class));
  }
  finally {
    uninstallSubsystemSilently(applicationA);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1429Test </h4><pre class="type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMissingParentChildEdgeTolerated() throws Exception {
  final AtomicBoolean weavingHookCalled=new AtomicBoolean();
  final AtomicReference<FrameworkEvent> frameworkEvent=new AtomicReference<FrameworkEvent>();
  bundleContext.registerService(WeavingHook.class,new WeavingHook(){
    @Override public void weave(    WovenClass wovenClass){
      Bundle bundle=wovenClass.getBundleWiring().getBundle();
      if (BUNDLE_A.equals(bundle.getSymbolicName())) {
        wovenClass.getDynamicImports().add("com.acme.tnt");
        weavingHookCalled.set(true);
      }
    }
  }
,null);
  Subsystem applicationA=installSubsystemFromFile(APPLICATION_A);
  try {
    removeConnectionWithParent(applicationA);
    BundleContext context=applicationA.getBundleContext();
    Bundle bundleA=context.installBundle(BUNDLE_A,TinyBundles.bundle().add(getClass().getClassLoader().loadClass("a.A"),InnerClassStrategy.NONE).set(Constants.BUNDLE_SYMBOLICNAME,BUNDLE_A).build(TinyBundles.withBnd()));
    bundleContext.addFrameworkListener(new FrameworkListener(){
      @Override public void frameworkEvent(      FrameworkEvent event){
        if (FrameworkEvent.ERROR == event.getType() && getSubsystemCoreBundle().equals(event.getBundle())) {
          frameworkEvent.set(event);
          if (event.getThrowable() != null) {
            event.getThrowable().printStackTrace();
          }
        }
      }
    }
);
    bundleA.loadClass("a.A");
    assertTrue("Weaving hook not called",weavingHookCalled.get());
    Thread.sleep(1000);
    assertNull("An exception was thrown",frameworkEvent.get());
  }
  finally {
    uninstallSubsystemSilently(applicationA);
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMissingParentChildEdgeNotTolerated() throws Exception {
  Subsystem applicationA=installSubsystemFromFile(APPLICATION_A);
  try {
    removeConnectionWithParent(applicationA);
    try {
      ((AriesSubsystem)applicationA).addRequirements(Collections.singletonList((Requirement)new TestRequirement.Builder().namespace(PackageNamespace.PACKAGE_NAMESPACE).attribute(PackageNamespace.PACKAGE_NAMESPACE,"org.osgi.framework").build()));
      fail("No exception received");
    }
 catch (    SubsystemException e) {
      Throwable cause=e.getCause();
      assertNotNull("Wrong cause",cause);
      assertEquals("Wrong cause",IllegalStateException.class,cause.getClass());
    }
  }
  finally {
    uninstallSubsystemSilently(applicationA);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.BasicTest </h4><pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInstallBundleIntoRootScope() throws Exception {
  Scope scope=getScope();
  int previousSize=scope.getBundles().size();
  String location=getBundleLocation("tb-2.jar");
  URL url=new URL(location);
  InstallInfo tb2Info=new InstallInfo(location,url.openStream());
  ScopeUpdate scopeUpdate=scope.newScopeUpdate();
  scopeUpdate.getBundlesToInstall().add(tb2Info);
  assertTrue(scopeUpdate.commit());
  Bundle b=bundleContext.getBundle(location);
  assertNotNull(b);
  Collection<Bundle> bundles=scope.getBundles();
  assertEquals(previousSize + 1,bundles.size());
  assertTrue(bundles.contains(b));
}

</code></pre>

<br>
<pre class="type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateChildScope() throws Exception {
  Scope scope=getScope();
  String name="scope1";
  ScopeUpdate parent=scope.newScopeUpdate();
  ScopeUpdate child=parent.newChild(name);
  parent.getChildren().add(child);
  assertTrue(parent.commit());
  Collection<Scope> children=scope.getChildren();
  assertEquals(1,children.size());
  Scope feature1=null;
  for (  Scope s : children) {
    if (name.equals(s.getName())) {
      feature1=s;
      break;
    }
  }
  assertNotNull(feature1);
  assertEmpty(feature1.getBundles());
  assertEmpty(feature1.getChildren());
  assertEquals(1,feature1.getId());
  assertNull(feature1.getLocation());
  assertEquals(name,feature1.getName());
  assertEquals(scope,feature1.getParent());
  assertEmpty(feature1.getSharePolicies(SharePolicy.TYPE_EXPORT));
  assertEmpty(feature1.getSharePolicies(SharePolicy.TYPE_IMPORT));
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Basic test of the initial state of the root scope.
 */
@Test public void testRootScopeInitialState(){
  Scope scope=getScope();
  Collection<Bundle> bundles=Arrays.asList(bundleContext.getBundles());
  assertCollectionEquals(bundles,scope.getBundles());
  assertEmpty(scope.getChildren());
  assertEquals(0,scope.getId());
  assertNull(scope.getLocation());
  assertEquals("root",scope.getName());
  assertNull(scope.getParent());
  assertEmpty(scope.getSharePolicies(SharePolicy.TYPE_EXPORT));
  assertEmpty(scope.getSharePolicies(SharePolicy.TYPE_IMPORT));
  assertNotNull(scope.newScopeUpdate());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.BundleVisibilityTest </h4><pre class="type-4 type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Install a bundle into the same scope as this one. Both bundles should be
 * able to see each other.
 * @throws Exception
 */
@Test public void test1() throws Exception {
  Scope scope=getScope();
  assertTrue(scope.getBundles().contains(bundleContext.getBundle()));
  ScopeUpdate scopeUpdate=scope.newScopeUpdate();
  String location=getBundleLocation("tb-4.jar");
  assertNull(bundleContext.getBundle(location));
  URL url=new URL(location);
  InstallInfo installInfo=new InstallInfo(location,url.openStream());
  scopeUpdate.getBundlesToInstall().add(installInfo);
  scopeUpdate.commit();
  Bundle bundle=bundleContext.getBundle(location);
  assertTrue(scope.getBundles().contains(bundle));
  bundle.start();
  ServiceReference<BundleProvider> bundleProviderRef=bundleContext.getServiceReference(BundleProvider.class);
  BundleProvider bundleProvider=bundleContext.getService(bundleProviderRef);
  assertTrue(bundleProvider.getBundles().contains(bundleContext.getBundle()));
  assertTrue(Arrays.asList(bundleContext.getBundles()).contains(bundle));
  assertNotNull(bundleContext.getBundle(bundle.getBundleId()));
  assertNotNull(bundleProvider.getBundle(bundle.getBundleId()));
  bundleContext.ungetService(bundleProviderRef);
  bundle.uninstall();
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Install a bundle into a different scope than this one. Neither bundle
 * should be able to see the other.
 * @throws Exception
 */
@Test public void test2() throws Exception {
  Scope scope=getScope();
  assertTrue(scope.getBundles().contains(bundleContext.getBundle()));
  ScopeUpdate scopeUpdate=scope.newScopeUpdate();
  ScopeUpdate child=scopeUpdate.newChild("tb4");
  scopeUpdate.getChildren().add(child);
  String location=getBundleLocation("tb-4.jar");
  assertNull(bundleContext.getBundle(location));
  URL url=new URL(location);
  InstallInfo installInfo=new InstallInfo(location,url.openStream());
  child.getBundlesToInstall().add(installInfo);
  addPackageImportPolicy("org.osgi.framework",child);
  addPackageImportPolicy("org.apache.aries.subsystem.scope",child);
  addPackageImportPolicy("org.apache.aries.subsystem.scope.itests",child);
  addServiceExportPolicy(BundleProvider.class,child);
  scopeUpdate.commit();
  Bundle bundle=bundleContext.getBundle(location);
  assertNotNull(bundle);
  Collection<Scope> childScopes=scope.getChildren();
  assertEquals(1,childScopes.size());
  assertTrue(childScopes.iterator().next().getBundles().contains(bundle));
  bundle.start();
  ServiceReference<BundleProvider> bundleProviderRef=bundleContext.getServiceReference(BundleProvider.class);
  BundleProvider bundleProvider=bundleContext.getService(bundleProviderRef);
  assertFalse(Arrays.asList(bundleContext.getBundles()).contains(bundle));
  assertNull(bundleContext.getBundle(bundle.getBundleId()));
  assertFalse(bundleProvider.getBundles().contains(bundleContext.getBundle()));
  assertNull(bundleProvider.getBundle(bundleContext.getBundle().getBundleId()));
  bundleContext.ungetService(bundleProviderRef);
  bundle.uninstall();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.PersistenceTest </h4><pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Stopping and starting the Scope Admin bundle should cause it to pull
 * from the persistent storage. If nothing changed after the original
 * bundle start, the persisted root bundle should look exactly the same
 * as before.
 * @throws Exception
 */
@Test public void test2() throws Exception {
  Scope scope=getScope();
  Bundle bundle=findBundle("org.apache.aries.subsystem.scope.impl");
  assertNotNull(bundle);
  bundle.stop();
  bundle.start();
  assertEquals(0,scope.getId());
  assertEquals("root",scope.getName());
  assertEquals(null,scope.getLocation());
  assertEquals(null,scope.getParent());
  assertEquals(0,scope.getChildren().size());
  assertCollectionEquals(Arrays.asList(bundleContext.getBundles()),scope.getBundles());
  assertEquals(0,scope.getSharePolicies(SharePolicy.TYPE_EXPORT).size());
  assertEquals(0,scope.getSharePolicies(SharePolicy.TYPE_IMPORT).size());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Create two scopes off of the root scope with the following structure.
 * R
 * / \
 * S1   S2
 * S1 contains bundle tb1, one import policy, and one export policy.
 * S2 contains bundle tb2 and two import policies.
 * This configuration should persist between restarts of the Scope Admin
 * bundle.
 * @throws Exception
 */
@Test public void test4() throws Exception {
  Scope root=getScope();
  ScopeUpdate rootUpdate=root.newScopeUpdate();
  ScopeUpdate s1Update=rootUpdate.newChild("S1");
  rootUpdate.getChildren().add(s1Update);
  ScopeUpdate s2Update=rootUpdate.newChild("S2");
  rootUpdate.getChildren().add(s2Update);
  s1Update.getBundlesToInstall().add(new InstallInfo(null,new URL(getBundleLocation("tb-1.jar"))));
  s2Update.getBundlesToInstall().add(new InstallInfo(null,new URL(getBundleLocation("tb-2.jar"))));
  addPackageImportPolicy("org.osgi.framework",s1Update);
  addPackageExportPolicy("org.apache.aries.subsystem.scope.itests.tb1",s1Update);
  addPackageImportPolicy("org.osgi.framework",s2Update);
  addPackageImportPolicy("org.apache.aries.subsystem.scope.itests.tb1",s2Update);
  assertTrue(rootUpdate.commit());
  root=getScope();
  assertEquals(2,root.getChildren().size());
  Scope s1=findChildScope("S1",root);
  Bundle tb1=findBundle("org.apache.aries.subsystem.scope.itests.tb1",s1);
  assertNotNull(tb1);
  assertTrue(s1.getBundles().contains(tb1));
  assertEquals(1,s1.getSharePolicies(SharePolicy.TYPE_IMPORT).get("osgi.wiring.package").size());
  assertEquals(1,s1.getSharePolicies(SharePolicy.TYPE_EXPORT).get("osgi.wiring.package").size());
  Scope s2=findChildScope("S2",root);
  Bundle tb2=findBundle("org.apache.aries.subsystem.scope.itests.tb2",s2);
  assertNotNull(tb2);
  assertTrue(s2.getBundles().contains(tb2));
  assertEquals(2,s2.getSharePolicies(SharePolicy.TYPE_IMPORT).get("osgi.wiring.package").size());
  Bundle scopeAdmin=findBundle("org.apache.aries.subsystem.scope.impl");
  assertNotNull(scopeAdmin);
  scopeAdmin.stop();
  scopeAdmin.start();
  root=getScope();
  assertEquals(2,root.getChildren().size());
  s1=findChildScope("S1",root);
  assertTrue(s1.getBundles().contains(tb1));
  assertEquals(1,s1.getSharePolicies(SharePolicy.TYPE_IMPORT).get("osgi.wiring.package").size());
  assertEquals(1,s1.getSharePolicies(SharePolicy.TYPE_EXPORT).get("osgi.wiring.package").size());
  s2=findChildScope("S2",root);
  assertTrue(s2.getBundles().contains(tb2));
  assertEquals(2,s2.getSharePolicies(SharePolicy.TYPE_IMPORT).get("osgi.wiring.package").size());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * A scope's persisted bundle data will become stale if bundles are 
 * installed or uninstalled while Scope Admin is not connected to the 
 * environment. This should be detected and dealt with.
 * @throws Exception
 */
@Test @Ignore public void test3() throws Exception {
  Scope scope=getScope();
  Bundle tb1=findBundle("org.apache.aries.subsystem.scope.itests.tb1",scope);
  assertNull(tb1);
  tb1=installBundle("tb-1.jar");
  assertTrue(scope.getBundles().contains(tb1));
  Bundle scopeAdmin=findBundle("org.apache.aries.subsystem.scope.impl");
  assertNotNull(scopeAdmin);
  scopeAdmin.stop();
  scopeAdmin.start();
  scope=getScope();
  assertTrue(scope.getBundles().contains(tb1));
  scopeAdmin.stop();
  tb1.uninstall();
  Bundle tb2=findBundle("org.apache.aries.subsystem.scope.itests.tb2",scope);
  assertNull(tb2);
  tb2=installBundle("tb-2.jar");
  scopeAdmin.start();
  scope=getScope();
  assertFalse(scope.getBundles().contains(tb1));
  assertTrue(scope.getBundles().contains(tb2));
  tb2.uninstall();
  assertFalse(scope.getBundles().contains(tb2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.ScopeAdminTest </h4><pre class="type-4 type-12 type-5 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBundleServiceIsolation() throws Exception {
  assertNotNull("scope admin should not be null",scope);
  System.out.println("able to get scope admin service");
  bt=new BundleTracker(bundleContext,Bundle.INSTALLED | Bundle.UNINSTALLED | Bundle.ACTIVE,new BundleTrackerCustomizer(){
    public synchronized Object addingBundle(    Bundle bundle,    BundleEvent event){
      if (event == null) {
        System.out.println("ScopeAdminTest - adding Bundle: " + bundle.getSymbolicName() + " event: null");
      }
 else {
        System.out.println("ScopeAdminTest - adding Bundle: " + bundle.getSymbolicName() + " event: "+ event.getType());
        addEventCount++;
      }
      return bundle;
    }
    public synchronized void modifiedBundle(    Bundle bundle,    BundleEvent event,    Object object){
      if (event == null) {
        System.out.println("ScopeAdminTest - modifying Bundle: " + bundle.getSymbolicName() + " event: null");
      }
 else {
        System.out.println("ScopeAdminTest - modifying Bundle: " + bundle.getSymbolicName() + " event: "+ event.getType());
        modifyEventCount++;
      }
    }
    public synchronized void removedBundle(    Bundle bundle,    BundleEvent event,    Object object){
      if (event == null) {
        System.out.println("ScopeAdminTest - removing Bundle: " + bundle.getSymbolicName() + " event: null");
      }
 else {
        System.out.println("ScopeAdminTest - removing Bundle: " + bundle.getSymbolicName() + " event: "+ event.getType());
        removeEventCount++;
      }
    }
  }
);
  bt.open();
  ScopeUpdate su=scope.newScopeUpdate();
  ScopeUpdate childScopeUpdate=su.newChild("scope_test1");
  su.getChildren().add(childScopeUpdate);
  addPackageImportPolicy("org.osgi.framework",childScopeUpdate);
  addPackageImportPolicy("org.osgi.util.tracker",childScopeUpdate);
  InstallInfo info1=new InstallInfo("helloIsolation",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT"));
  InstallInfo info2=new InstallInfo("helloIsolationRef",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT"));
  List<InstallInfo> bundlesToInstall=childScopeUpdate.getBundlesToInstall();
  bundlesToInstall.add(info1);
  bundlesToInstall.add(info2);
  su.commit();
  assertEquals("add event count should be 0 since 0 bundles are installed in root scope",0,addEventCount);
  assertEquals("modify event count should be 0",0,modifyEventCount);
  assertEquals("remove event count should be 0",0,removeEventCount);
  Collection<Bundle> bundlesToStart=childScopeUpdate.getScope().getBundles();
  for (  Bundle b : bundlesToStart) {
    b.start();
  }
  assertEquals("add event count should be 0 since 0 bundles are installed in root scope",0,addEventCount);
  assertEquals("modify event count should be 0",0,modifyEventCount);
  assertEquals("remove event count should be 0",0,removeEventCount);
  try {
    ServiceReference sr=bundleContext.getServiceReference(HelloIsolation.class.getName());
    fail("should not be able to get the sr for HelloIsolation service");
  }
 catch (  Exception ex) {
  }
catch (  Error er) {
  }
  Bundle[] bundles=bundleContext.getBundles();
  for (  Bundle b : bundles) {
    System.out.println("Bundle is " + b.getBundleId() + ": "+ b.getSymbolicName());
    if (b.getSymbolicName().indexOf("org.apache.aries.subsystem.example.helloIsolation") > -1) {
      fail("bundles with name starts with org.apache.aries.subsystem.example.helloIsolation should be in a different scope");
    }
  }
  Collection<Scope> children=scope.getChildren();
  assertEquals(1,children.size());
  for (  Scope child : children) {
    if (child.getName().equals("scope_test1")) {
      Collection<Bundle> buns=child.getBundles();
      assertEquals(2,buns.size());
      assertEquals(0,child.getChildren().size());
      for (      Bundle b : buns) {
        assertTrue(b.getSymbolicName().indexOf("org.apache.aries.subsystem.example.helloIsolation") > -1);
      }
    }
  }
  URL url=new URL("mvn:org.apache.felix/org.apache.felix.fileinstall/2.0.8");
  bundleContext.installBundle("org.apache.felix.fileinstall-rootScope",url.openStream());
  assertEquals("add event count should be 1 since 1 bundles are installed",1,addEventCount);
  assertEquals("modify event count should be 0",0,modifyEventCount);
  assertEquals("remove event count should be 0",0,removeEventCount);
  su=scope.newScopeUpdate();
  Collection<ScopeUpdate> scopes=su.getChildren();
  childScopeUpdate=scopes.iterator().next();
  Scope childScopeAdmin=childScopeUpdate.getScope();
  assertEquals(scope,childScopeAdmin.getParent());
  scopes.remove(childScopeUpdate);
  su.commit();
  assertFalse(scope.getChildren().contains(childScopeAdmin));
  su=scope.newScopeUpdate();
  assertFalse(su.getChildren().contains(childScopeUpdate));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-3 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testPackageSharingFromTestScope() throws Exception {
  assertNotNull("scope admin should not be null",scope);
  System.out.println("able to get scope admin service");
  ScopeUpdate su=scope.newScopeUpdate();
  ScopeUpdate childScopeUpdate=su.newChild("scope_test1");
  su.getChildren().add(childScopeUpdate);
  addPackageImportPolicy("org.osgi.framework",childScopeUpdate);
  addPackageImportPolicy("org.osgi.util.tracker",childScopeUpdate);
  Map<String,List<SharePolicy>> sharePolicies=childScopeUpdate.getSharePolicies(SharePolicy.TYPE_EXPORT);
  final Filter filter1=FrameworkUtil.createFilter("(&" + "(osgi.wiring.package=org.apache.aries.subsystem.example.helloIsolation)" + ")");
  final Filter filter2=FrameworkUtil.createFilter("(&" + "(scope.share.service=org.apache.aries.subsystem.example.helloIsolation.HelloIsolation)" + ")");
  List<SharePolicy> packagePolicies=sharePolicies.get(BundleRevision.PACKAGE_NAMESPACE);
  if (packagePolicies == null) {
    packagePolicies=new ArrayList<SharePolicy>();
    sharePolicies.put(BundleRevision.PACKAGE_NAMESPACE,packagePolicies);
  }
  packagePolicies.add(new SharePolicy(SharePolicy.TYPE_EXPORT,BundleRevision.PACKAGE_NAMESPACE,filter1));
  List<SharePolicy> servicePolicies=sharePolicies.get("scope.share.service");
  if (servicePolicies == null) {
    servicePolicies=new ArrayList<SharePolicy>();
    sharePolicies.put("scope.share.service",servicePolicies);
  }
  servicePolicies.add(new SharePolicy(SharePolicy.TYPE_EXPORT,"scope.share.service",filter2));
  InstallInfo info1=new InstallInfo("helloIsolation",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT"));
  InstallInfo info2=new InstallInfo("helloIsolationRef",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT"));
  List<InstallInfo> bundlesToInstall=childScopeUpdate.getBundlesToInstall();
  bundlesToInstall.add(info1);
  bundlesToInstall.add(info2);
  su.commit();
  Collection<Bundle> bundlesToStart=childScopeUpdate.getScope().getBundles();
  for (  Bundle b : bundlesToStart) {
    b.start();
  }
  URL url1=new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT");
  Bundle helloIsolationRef=bundleContext.installBundle("helloIsolationRef1-rootScope",url1.openStream());
  try {
    helloIsolationRef.start();
  }
 catch (  Exception ex) {
    fail("should be able to start helloIsolationRef by import packages from scope_test1");
  }
  helloIsolationRef.uninstall();
  su=scope.newScopeUpdate();
  Collection<ScopeUpdate> scopes=su.getChildren();
  childScopeUpdate=scopes.iterator().next();
  Scope childScopeAdmin=childScopeUpdate.getScope();
  assertEquals(scope,childScopeAdmin.getParent());
  scopes.remove(childScopeUpdate);
  su.commit();
  assertFalse(scope.getChildren().contains(childScopeAdmin));
  su=scope.newScopeUpdate();
  assertFalse(su.getChildren().contains(childScopeUpdate));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-3 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testPackageIsolation() throws Exception {
  assertNotNull("scope admin should not be null",scope);
  System.out.println("able to get scope admin service");
  ScopeUpdate su=scope.newScopeUpdate();
  ScopeUpdate childScopeUpdate=su.newChild("scope_test1");
  su.getChildren().add(childScopeUpdate);
  addPackageImportPolicy("org.osgi.framework",childScopeUpdate);
  addPackageImportPolicy("org.osgi.util.tracker",childScopeUpdate);
  InstallInfo info1=new InstallInfo("helloIsolation",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT"));
  InstallInfo info2=new InstallInfo("helloIsolationRef",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT"));
  List<InstallInfo> bundlesToInstall=childScopeUpdate.getBundlesToInstall();
  bundlesToInstall.add(info1);
  bundlesToInstall.add(info2);
  su.commit();
  Collection<Bundle> bundlesToStart=childScopeUpdate.getScope().getBundles();
  for (  Bundle b : bundlesToStart) {
    b.start();
  }
  URL url1=new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT");
  Bundle helloIsolationRef=bundleContext.installBundle("helloIsolationRef1-rootScope",url1.openStream());
  try {
    helloIsolationRef.start();
    fail("should not be able to start helloIsolationRef since missing import packages");
  }
 catch (  Exception ex) {
  }
  URL url2=new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT");
  Bundle helloIsolation=bundleContext.installBundle("helloIsolation1-rootScope",url2.openStream());
  helloIsolation.start();
  helloIsolationRef.start();
  helloIsolationRef.uninstall();
  helloIsolation.uninstall();
  su=scope.newScopeUpdate();
  Collection<ScopeUpdate> scopes=su.getChildren();
  childScopeUpdate=scopes.iterator().next();
  Scope childScopeAdmin=childScopeUpdate.getScope();
  assertEquals(scope,childScopeAdmin.getParent());
  scopes.remove(childScopeUpdate);
  su.commit();
  assertFalse(scope.getChildren().contains(childScopeAdmin));
  su=scope.newScopeUpdate();
  assertFalse(su.getChildren().contains(childScopeUpdate));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.ServiceVisibilityTest </h4><pre class="type-4 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Install a bundle registering a service into the same scope as this one. 
 * This bundle should be able to see the service.
 * @throws Exception
 */
@Test public void test1() throws Exception {
  assertTrue(getScope().getBundles().contains(bundleContext.getBundle()));
  ScopeUpdate scopeUpdate=getScope().newScopeUpdate();
  String location=getBundleLocation("tb-7.jar");
  assertNull(bundleContext.getBundle(location));
  URL url=new URL(location);
  InstallInfo installInfo=new InstallInfo(location,url.openStream());
  scopeUpdate.getBundlesToInstall().add(installInfo);
  scopeUpdate.commit();
  Bundle bundle=bundleContext.getBundle(location);
  assertNotNull(bundle);
  assertTrue(getScope().getBundles().contains(bundle));
  bundle.start();
  ServiceReference<Service> serviceRef=bundleContext.getServiceReference(Service.class);
  assertNotNull(serviceRef);
  Service service=bundleContext.getService(serviceRef);
  assertNotNull(service);
  bundleContext.ungetService(serviceRef);
  bundle.uninstall();
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Install a bundle registering a service into a different scope than this 
 * one. This bundle should not be able to see the service.
 * @throws Exception
 */
@Test public void test2() throws Exception {
  assertTrue(getScope().getBundles().contains(bundleContext.getBundle()));
  String location=getBundleLocation("tb-7.jar");
  assertNull(bundleContext.getBundle(location));
  URL url=new URL(location);
  InstallInfo installInfo=new InstallInfo(location,url.openStream());
  ScopeUpdate scopeUpdate=getScope().newScopeUpdate();
  ScopeUpdate child=scopeUpdate.newChild("tb7");
  scopeUpdate.getChildren().add(child);
  child.getBundlesToInstall().add(installInfo);
  addPackageImportPolicy("org.osgi.framework",child);
  addPackageImportPolicy("org.apache.aries.subsystem.scope.itests",child);
  scopeUpdate.commit();
  Bundle bundle=bundleContext.getBundle(location);
  assertNotNull(bundle);
  assertTrue(child.getScope().getBundles().contains(bundle));
  bundle.start();
  ServiceReference<Service> serviceRef=bundleContext.getServiceReference(Service.class);
  assertNull(serviceRef);
  bundle.uninstall();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.SharePolicyTest </h4><pre class="type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Bundle tb5
 * Bundle tb6
 * tb5 imports package exported by tb6
 * tb5 and tb6 in same scope
 * tb5 should resolve
 * Share policies have no effect within the same scope.
 * @throws Exception
 */
@Test public void test1() throws Exception {
  Bundle tb5=null;
  Bundle tb6=null;
  try {
    String tb5Location=getBundleLocation("tb-5.jar");
    String tb6Location=getBundleLocation("tb-6.jar");
    InstallInfo tb5Info=new InstallInfo(tb5Location,new URL(tb5Location));
    InstallInfo tb6Info=new InstallInfo(tb6Location,new URL(tb6Location));
    ScopeUpdate scopeUpdate=getScope().newScopeUpdate();
    scopeUpdate.getBundlesToInstall().add(tb5Info);
    scopeUpdate.commit();
    tb5=findBundleInRootScope("org.apache.aries.subsystem.scope.itests.tb5");
    assertNotNull(tb5);
    FrameworkWiring frameworkWiring=bundleContext.getBundle(0).adapt(FrameworkWiring.class);
    assertFalse(frameworkWiring.resolveBundles(Arrays.asList(new Bundle[]{tb5})));
    scopeUpdate=getScope().newScopeUpdate();
    scopeUpdate.getBundlesToInstall().add(tb6Info);
    scopeUpdate.commit();
    tb6=findBundleInRootScope("org.apache.aries.subsystem.scope.itests.tb6");
    assertNotNull(tb6);
    assertTrue(frameworkWiring.resolveBundles(Arrays.asList(new Bundle[]{tb5,tb6})));
  }
  finally {
    uninstallQuietly(tb6);
    uninstallQuietly(tb5);
  }
}

</code></pre>

<br>
<pre class="type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Bundle tb5
 * Bundle tb6
 * tb5 imports package exported by tb6
 * tb5 in root scope
 * tb6 in child scope of root
 * tb6 scope exports tb6 package
 * tb5 should resolve
 * There is an implicit import between parent and child. In other words,
 * anything exported by a child is automatically available without the
 * parent explicitly importing it.
 * @throws Exception
 */
@Test public void test3() throws Exception {
  Bundle tb5=null;
  Bundle tb6=null;
  try {
    String tb5Location=getBundleLocation("tb-5.jar");
    String tb6Location=getBundleLocation("tb-6.jar");
    InstallInfo tb5Info=new InstallInfo(tb5Location,new URL(tb5Location));
    InstallInfo tb6Info=new InstallInfo(tb6Location,new URL(tb6Location));
    ScopeUpdate scopeUpdate=getScope().newScopeUpdate();
    scopeUpdate.getBundlesToInstall().add(tb5Info);
    scopeUpdate.commit();
    tb5=findBundleInRootScope("org.apache.aries.subsystem.scope.itests.tb5");
    assertNotNull(tb5);
    FrameworkWiring frameworkWiring=bundleContext.getBundle(0).adapt(FrameworkWiring.class);
    assertFalse(frameworkWiring.resolveBundles(Arrays.asList(new Bundle[]{tb5})));
    scopeUpdate=getScope().newScopeUpdate();
    ScopeUpdate tb6ScopeUpdate=scopeUpdate.newChild("tb6");
    scopeUpdate.getChildren().add(tb6ScopeUpdate);
    tb6ScopeUpdate.getBundlesToInstall().add(tb6Info);
    addPackageExportPolicy("org.apache.aries.subsystem.scope.itests.tb6",tb6ScopeUpdate);
    scopeUpdate.commit();
    tb6=findBundle("org.apache.aries.subsystem.scope.itests.tb6",tb6ScopeUpdate.getScope());
    assertNotNull(tb6);
    tb5.start();
    assertTrue(frameworkWiring.resolveBundles(Arrays.asList(new Bundle[]{tb5,tb6})));
  }
  finally {
    uninstallQuietly(tb6);
    uninstallQuietly(tb5);
  }
}

</code></pre>

<br>
<pre class="type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Bundle tb5
 * Bundle tb6
 * tb5 imports package exported by tb6
 * tb5 in child scope of root
 * tb6 in different child scope of root
 * tb6 scope exports tb6 package
 * root scope exports tb6 package
 * tb5 scope imports tb6 package
 * tb5 should resolve
 * @throws Exception
 */
@Test public void test4() throws Exception {
  Bundle tb5=null;
  Bundle tb6=null;
  try {
    String tb5Location=getBundleLocation("tb-5.jar");
    String tb6Location=getBundleLocation("tb-6.jar");
    InstallInfo tb5Info=new InstallInfo(tb5Location,new URL(tb5Location));
    InstallInfo tb6Info=new InstallInfo(tb6Location,new URL(tb6Location));
    ScopeUpdate rootUpdate=getScope().newScopeUpdate();
    addPackageExportPolicy("org.apache.aries.subsystem.scope.itests.tb6",rootUpdate);
    ScopeUpdate tb5Update=rootUpdate.newChild("tb5");
    rootUpdate.getChildren().add(tb5Update);
    tb5Update.getBundlesToInstall().add(tb5Info);
    addPackageImportPolicy("org.apache.aries.subsystem.scope.itests.tb6",tb5Update);
    rootUpdate.commit();
    tb5=findBundle("org.apache.aries.subsystem.scope.itests.tb5",tb5Update.getScope());
    assertNotNull(tb5);
    FrameworkWiring frameworkWiring=bundleContext.getBundle(0).adapt(FrameworkWiring.class);
    assertFalse(frameworkWiring.resolveBundles(Arrays.asList(new Bundle[]{tb5})));
    rootUpdate=getScope().newScopeUpdate();
    ScopeUpdate tb6Update=rootUpdate.newChild("tb6");
    rootUpdate.getChildren().add(tb6Update);
    tb6Update.getBundlesToInstall().add(tb6Info);
    addPackageExportPolicy("org.apache.aries.subsystem.scope.itests.tb6",tb6Update);
    rootUpdate.commit();
    tb6=findBundle("org.apache.aries.subsystem.scope.itests.tb6",tb6Update.getScope());
    assertNotNull(tb6);
    assertTrue(frameworkWiring.resolveBundles(Arrays.asList(new Bundle[]{tb5,tb6})));
  }
  finally {
    uninstallQuietly(tb6);
    uninstallQuietly(tb5);
  }
}

</code></pre>

<br>
<pre class="type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Bundle tb5
 * Bundle tb6
 * tb5 imports package exported by tb6
 * tb5 in root scope
 * tb6 in child scope of root
 * tb6 scope does not export tb6 package
 * tb5 should not resolve
 * @throws Exception
 */
@Test public void test2() throws Exception {
  Bundle tb5=null;
  Bundle tb6=null;
  try {
    String tb5Location=getBundleLocation("tb-5.jar");
    String tb6Location=getBundleLocation("tb-6.jar");
    InstallInfo tb5Info=new InstallInfo(tb5Location,new URL(tb5Location));
    InstallInfo tb6Info=new InstallInfo(tb6Location,new URL(tb6Location));
    ScopeUpdate scopeUpdate=getScope().newScopeUpdate();
    scopeUpdate.getBundlesToInstall().add(tb5Info);
    scopeUpdate.commit();
    tb5=findBundleInRootScope("org.apache.aries.subsystem.scope.itests.tb5");
    assertNotNull(tb5);
    FrameworkWiring frameworkWiring=bundleContext.getBundle(0).adapt(FrameworkWiring.class);
    assertFalse(frameworkWiring.resolveBundles(Arrays.asList(new Bundle[]{tb5})));
    scopeUpdate=getScope().newScopeUpdate();
    ScopeUpdate tb6ScopeUpdate=scopeUpdate.newChild("tb6");
    scopeUpdate.getChildren().add(tb6ScopeUpdate);
    tb6ScopeUpdate.getBundlesToInstall().add(tb6Info);
    scopeUpdate.commit();
    tb6=findBundle("org.apache.aries.subsystem.scope.itests.tb6",tb6ScopeUpdate.getScope());
    assertNotNull(tb6);
    assertFalse(frameworkWiring.resolveBundles(Arrays.asList(new Bundle[]{tb5,tb6})));
  }
  finally {
    uninstallQuietly(tb6);
    uninstallQuietly(tb5);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.UninstallBundleTest </h4><pre class="type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  ScopeUpdate scopeUpdate=getScope().newScopeUpdate();
  assertTrue("The bundle should have been removed",scopeUpdate.getBundles().remove(bundle));
  assertTrue("The commit should have been successful",scopeUpdate.commit());
  assertFalse(scopeUpdate.getScope().getBundles().contains(bundle));
  assertFalse("The bundle should have been removed from the scope",getScope().getBundles().contains(bundle));
  assertFalse(Arrays.asList(bundleContext.getBundles()).contains(bundle));
  assertNull("The bundle should have been uninstalled",bundleContext.getBundle(location));
}

</code></pre>

<br>
<pre class="type-4 type-9 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void before0() throws Exception {
  location=getBundleLocation("tb-2.jar");
  bundle=bundleContext.getBundle(location);
  assertNull("The bundle should not exist",bundle);
  installBundles(getScope(),new String[]{"tb-2.jar"});
  bundle=bundleContext.getBundle(location);
  assertNotNull("The bundle should exist",bundle);
  assertTrue("The bundle should part of the scope",getScope().getBundles().contains(bundle));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.transaction.AnnotationEnablingNameSpaceHandlerTest </h4><pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAnnotationEnabled() throws Exception {
  ComponentDefinitionRegistry cdr=parseCDR("enable-annotations.xml");
  checkCompTop(cdr);
  BeanMetadata pmd=(BeanMetadata)cdr.getComponentDefinition(TxNamespaceHandler.ANNOTATION_PARSER_BEAN_NAME);
  assertNotNull(pmd);
  assertEquals(3,pmd.getArguments().size());
  assertEquals(cdr,((PassThroughMetadata)pmd.getArguments().get(0).getValue()).getObject());
}

</code></pre>

<br>
<pre class="type-7 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testAnnotationDisabled() throws Exception {
  ComponentDefinitionRegistry cdr=parseCDR("enable-annotations2.xml");
  checkCompTop(cdr);
  BeanMetadata pmd=(BeanMetadata)cdr.getComponentDefinition(TxNamespaceHandler.ANNOTATION_PARSER_BEAN_NAME);
  assertNull(pmd);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.transaction.TranStrategyTest </h4><pre class="type-15 type-5 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequiresNew_BeginNoActiveTran() throws Exception {
  int[] manStatus=new int[]{Status.STATUS_COMMITTED,Status.STATUS_COMMITTING,Status.STATUS_MARKED_ROLLBACK,Status.STATUS_NO_TRANSACTION,Status.STATUS_PREPARED,Status.STATUS_PREPARING,Status.STATUS_ROLLEDBACK,Status.STATUS_ROLLING_BACK,Status.STATUS_UNKNOWN};
  for (int i=0; i < manStatus.length; i++) {
    c.reset();
    expect(tm.getStatus()).andReturn(manStatus[i]);
    expect(tm.getTransaction()).andReturn(null);
    tm.begin();
    expectLastCall();
    c.replay();
    try {
      assertNull("TransactionStrategy.REQUIRES_NEW.begin() did not return null when manager status value is " + manStatus[i],TransactionAttribute.REQUIRES_NEW.begin(tm).getActiveTransaction());
    }
 catch (    Exception ise) {
      fail("TransactionStrategy.REQUIRES_NEW.begin() threw unexpected exception when manager status value is " + manStatus[i]);
    }
    c.verify();
  }
}

</code></pre>

<br>
<pre class="type-15 type-5 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNotSupportedBegin() throws Exception {
  expect(tm.getStatus()).andReturn(Status.STATUS_ACTIVE);
  expect(tm.suspend()).andReturn(null);
  c.replay();
  TransactionAttribute.NOT_SUPPORTED.begin(tm);
  c.verify();
  int[] invalids=new int[]{Status.STATUS_COMMITTED,Status.STATUS_COMMITTING,Status.STATUS_MARKED_ROLLBACK,Status.STATUS_NO_TRANSACTION,Status.STATUS_PREPARED,Status.STATUS_PREPARING,Status.STATUS_ROLLEDBACK,Status.STATUS_ROLLING_BACK,Status.STATUS_UNKNOWN};
  for (int i=0; i < invalids.length; i++) {
    c.reset();
    expect(tm.getStatus()).andReturn(invalids[i]);
    expect(tm.getTransaction()).andReturn(null).anyTimes();
    c.replay();
    try {
      assertNull("TransactionStrategy.NOT_SUPPORTED.begin() did not return null when manager status value is " + invalids[i],TransactionAttribute.NOT_SUPPORTED.begin(tm).getActiveTransaction());
    }
 catch (    Exception ise) {
      fail("TransactionStrategy.NOT_SUPPORTED.begin() threw unexpected exception when manager status value is " + invalids[i]);
    }
    c.verify();
  }
}

</code></pre>

<br>
<pre class="type-15 type-5 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNeverBegin() throws Exception {
  expect(tm.getStatus()).andReturn(Status.STATUS_ACTIVE);
  try {
    assertNotNull("TransactionStrategy.NEVER.begin() returned null when manager status is STATUS_ACTIVE",TransactionAttribute.NEVER.begin(tm));
  }
 catch (  IllegalStateException ise) {
  }
catch (  Exception e) {
    fail("TransactionStrategy.NEVER.begin() threw an unexpected exception when tran manager status is STATUS_ACTIVE");
  }
  int[] invalids=new int[]{Status.STATUS_COMMITTED,Status.STATUS_COMMITTING,Status.STATUS_MARKED_ROLLBACK,Status.STATUS_NO_TRANSACTION,Status.STATUS_PREPARED,Status.STATUS_PREPARING,Status.STATUS_ROLLEDBACK,Status.STATUS_ROLLING_BACK,Status.STATUS_UNKNOWN};
  for (int i=0; i < invalids.length; i++) {
    c.reset();
    expect(tm.getStatus()).andReturn(invalids[i]);
    expect(tm.getTransaction()).andReturn(null).anyTimes();
    c.replay();
    try {
      assertNull("TransactionStrategy.NEVER.begin() did not return null when manager status value is " + invalids[i],TransactionAttribute.NEVER.begin(tm).getActiveTransaction());
    }
 catch (    Exception ise) {
      fail("TransactionStrategy.NEVER.begin() threw unexpected exception when manager status value is " + invalids[i]);
    }
    c.verify();
  }
}

</code></pre>

<br>
<pre class="type-7 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testSupports() throws Exception {
  expect(tm.getTransaction()).andReturn(null);
  expect(tm.getStatus()).andReturn(Status.STATUS_ACTIVE);
  c.replay();
  assertNull("TransTransactionStrategy.SUPPORTS.begin(tm) did not return null",TransactionAttribute.SUPPORTS.begin(tm).getActiveTransaction());
  c.verify();
}

</code></pre>

<br>
<pre class="type-4 type-15 type-5 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMandatoryBegin() throws Exception {
  expect(tm.getStatus()).andReturn(Status.STATUS_NO_TRANSACTION);
  try {
    assertNotNull("TransactionStrategy.MANDATORY.begin(tm) returned null when manager " + "status is STATUS_NO_TRANSACTION",TransactionAttribute.MANDATORY.begin(tm).getActiveTransaction());
  }
 catch (  IllegalStateException ise) {
  }
catch (  Exception e) {
    fail("TransactionStrategy.MANDATORY.begin() threw an unexpected exception when tran manager status is STATUS_NO_TRANSACTION");
  }
  int[] invalids=new int[]{Status.STATUS_COMMITTED,Status.STATUS_COMMITTING,Status.STATUS_MARKED_ROLLBACK,Status.STATUS_ACTIVE,Status.STATUS_PREPARED,Status.STATUS_PREPARING,Status.STATUS_ROLLEDBACK,Status.STATUS_ROLLING_BACK,Status.STATUS_UNKNOWN};
  for (int i=0; i < invalids.length; i++) {
    c.reset();
    expect(tm.getStatus()).andReturn(invalids[i]);
    expect(tm.getTransaction()).andReturn(null);
    c.replay();
    try {
      Transaction tran=TransactionAttribute.MANDATORY.begin(tm).getActiveTransaction();
      assertNull("TransactionStrategy.MANDATORY.begin() did not return null when manager status value is " + invalids[i],tran);
    }
 catch (    Exception ise) {
      fail("TransactionStrategy.MANDATORY.begin() threw Exception when manager status value is " + invalids[i]);
    }
    c.verify();
  }
}

</code></pre>

<br>
<pre class="type-15 type-5 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequiredBegin() throws Exception {
  expect(tm.getStatus()).andReturn(Status.STATUS_NO_TRANSACTION);
  expect(tm.getTransaction()).andReturn(null);
  tm.begin();
  expectLastCall();
  c.replay();
  TransactionAttribute.REQUIRED.begin(tm);
  c.verify();
  c.reset();
  int[] invalids=new int[]{Status.STATUS_COMMITTED,Status.STATUS_COMMITTING,Status.STATUS_MARKED_ROLLBACK,Status.STATUS_ACTIVE,Status.STATUS_PREPARED,Status.STATUS_PREPARING,Status.STATUS_ROLLEDBACK,Status.STATUS_ROLLING_BACK,Status.STATUS_UNKNOWN};
  for (int i=0; i < invalids.length; i++) {
    c.reset();
    expect(tm.getStatus()).andReturn(invalids[i]);
    expect(tm.getTransaction()).andReturn(null);
    c.replay();
    try {
      assertNull("TransactionStrategy.REQUIRED.begin() did not return null when manager status value is " + invalids[i],TransactionAttribute.REQUIRED.begin(tm).getActiveTransaction());
    }
 catch (    Exception ise) {
      fail("TransactionStrategy.REQUIRED.begin() threw unexpected exception when manager status value is " + invalids[i]);
    }
    c.verify();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.FragmentUtilsTest </h4><pre class="type-4 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testFragmentCreation() throws Exception {
  Bundle exportBundle=makeBundleWithExports("export.bundle","1.2.3","export.package;version=\"1.0.0\";uses:=\"foo.jar,bar.jar\";singleton:=true");
  Dictionary fragmentHeaders=makeFragmentFromExportBundle(exportBundle).getHeaders();
  assertNotNull("No headers in the fragment",fragmentHeaders);
  assertEquals("Wrong symbolicName","scooby.doo.test.fragment",fragmentHeaders.get(Constants.BUNDLE_SYMBOLICNAME));
  assertEquals("Wrong version","0.0.0",fragmentHeaders.get(Constants.BUNDLE_VERSION));
  assertEquals("Wrong Bundle manifest version","2",fragmentHeaders.get(Constants.BUNDLE_MANIFESTVERSION));
  assertEquals("Wrong Fragment host","scooby.doo;bundle-version=\"0.0.0\"",fragmentHeaders.get(Constants.FRAGMENT_HOST));
  assertEquals("Wrong Bundle Name","Test Fragment bundle",fragmentHeaders.get(Constants.BUNDLE_NAME));
  assertEquals("Wrong Imports","export.package;version=\"1.0.0\";bundle-symbolic-name=\"export.bundle\";bundle-version=\"[1.2.3,1.2.3]\"",fragmentHeaders.get(Constants.IMPORT_PACKAGE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.SingleServiceTrackerTest </h4><pre class="type-7 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testRegistrationWhileClosed(){
  createSut();
  sut.close();
  ctx.registerService("java.lang.String","uno",null);
  Skeleton.getSkeleton(listener).assertSkeletonNotCalled();
  assertNull(sut.getService());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.VersionRangeTest </h4><pre class="type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test the version range created correctly
 * @throws Exception
 */
@Test public void testVersionRange() throws Exception {
  String version1="[1.2.3, 4.5.6]";
  String version2="(1, 2]";
  String version3="[2,4)";
  String version4="(1,2)";
  String version5="2";
  String version6="2.3";
  String version7="[1.2.3.q, 2.3.4.p)";
  String version8="1.2.2.5";
  String version9="a.b.c";
  String version10=null;
  String version11="";
  String version12="\"[1.2.3, 4.5.6]\"";
  VersionRange vr=new VersionRange(version1);
  assertEquals("The value is wrong","1.2.3",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","4.5.6",vr.getMaximumVersion().toString());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  vr=new VersionRange(version2);
  assertEquals("The value is wrong","1.0.0",vr.getMinimumVersion().toString());
  assertTrue("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","2.0.0",vr.getMaximumVersion().toString());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  vr=new VersionRange(version3);
  assertEquals("The value is wrong","2.0.0",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","4.0.0",vr.getMaximumVersion().toString());
  assertTrue("The value is wrong",vr.isMaximumExclusive());
  vr=new VersionRange(version4);
  assertEquals("The value is wrong","1.0.0",vr.getMinimumVersion().toString());
  assertTrue("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","2.0.0",vr.getMaximumVersion().toString());
  assertTrue("The value is wrong",vr.isMaximumExclusive());
  vr=new VersionRange(version5);
  assertEquals("The value is wrong","2.0.0",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertNull("The value is wrong",vr.getMaximumVersion());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  vr=new VersionRange(version6);
  assertEquals("The value is wrong","2.3.0",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertNull("The value is wrong",vr.getMaximumVersion());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  vr=new VersionRange(version7);
  assertEquals("The value is wrong","1.2.3.q",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","2.3.4.p",vr.getMaximumVersion().toString());
  assertTrue("The value is wrong",vr.isMaximumExclusive());
  vr=new VersionRange(version8);
  assertEquals("The value is wrong","1.2.2.5",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertNull("The value is wrong",vr.getMaximumVersion());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  boolean exception=false;
  try {
    vr=new VersionRange(version9);
  }
 catch (  Exception e) {
    exception=true;
  }
  assertTrue("The value is wrong",exception);
  boolean exceptionNull=false;
  try {
    vr=new VersionRange(version10);
  }
 catch (  Exception e) {
    exceptionNull=true;
  }
  assertTrue("The value is wrong",exceptionNull);
  vr=new VersionRange(version11);
  assertEquals("The value is wrong","0.0.0",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertNull("The value is wrong",vr.getMaximumVersion());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  vr=new VersionRange(version12);
  assertEquals("The value is wrong","1.2.3",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","4.5.6",vr.getMaximumVersion().toString());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIntersectVersionRange_Valid1(){
  VersionRange v1=new VersionRange("[1.0.0,3.0.0]");
  VersionRange v2=new VersionRange("[2.0.0,3.0.0)");
  VersionRange result=v1.intersect(v2);
  assertNotNull(result);
  assertEquals("[2.0.0,3.0.0)",result.toString());
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIntersectVersionRange_Valid3(){
  VersionRange v1=new VersionRange("[2.0.0,2.0.0]");
  VersionRange v2=new VersionRange("[1.0.0,3.0.0]");
  VersionRange result=v1.intersect(v2);
  assertNotNull(result);
  assertEquals("[2.0.0,2.0.0]",result.toString());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExactVersion() throws Exception {
  VersionRange vr;
  try {
    vr=new VersionRange("[1.0.0, 2.0.0]",true);
    fail("from 1 to 2 not excludsive is not an exact range");
  }
 catch (  IllegalArgumentException e) {
  }
  vr=new VersionRange("[1.0.0, 1.0.0]",true);
  assertTrue(vr.isExactVersion());
  try {
    vr=new VersionRange("(1.0.0, 1.0.0]",true);
    fail("from 1 (not including 1) to 1, is not valid");
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    vr=new VersionRange("[1.0.0, 1.0.0)",true);
    fail("sfrom 1 to 1 (not including 1), is not valid");
  }
 catch (  IllegalArgumentException e) {
  }
  vr=new VersionRange("1.0.0",true);
  assertTrue(vr.isExactVersion());
  vr=new VersionRange("1.0.0",false);
  assertFalse(vr.isExactVersion());
  vr=new VersionRange("[1.0.0, 2.0.0]");
  assertFalse(vr.isExactVersion());
  vr=new VersionRange("[1.0.0, 1.0.0]");
  assertTrue(vr.isExactVersion());
  vr=new VersionRange("1.0.0",true);
  assertEquals(new Version("1.0.0"),vr.getMinimumVersion());
  assertTrue(vr.isExactVersion());
  vr=new VersionRange("1.0.0",false);
  assertEquals(new Version("1.0.0"),vr.getMinimumVersion());
  assertNull(vr.getMaximumVersion());
  assertFalse(vr.isExactVersion());
  vr=new VersionRange("[1.0.0,2.0.0)",false);
  assertFalse(vr.isExactVersion());
  vr=new VersionRange("[1.0.0, 2.0.0]");
  assertFalse(vr.isExactVersion());
  vr=new VersionRange("[1.0.0, 1.0.0]");
  assertTrue(vr.isExactVersion());
}

</code></pre>

<br>
<pre class="type-7 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testIntersectVersionRange_Invalid3(){
  VersionRange v1=new VersionRange("[1.0.0,1.0.0]");
  VersionRange v2=new VersionRange("[2.0.0,2.0.0]");
  VersionRange result=v1.intersect(v2);
  assertNull(result);
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIntersectVersionRange_Valid2(){
  VersionRange v1=new VersionRange("[1.0.0,3.0.0)");
  VersionRange v2=new VersionRange("(2.0.0,3.0.0]");
  VersionRange result=v1.intersect(v2);
  assertNotNull(result);
  assertEquals("(2.0.0,3.0.0)",result.toString());
}

</code></pre>

<br>
<pre class="type-7 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testIntersectVersionRange_Invalid1(){
  VersionRange v1=new VersionRange("[1.0.0,2.0.0]");
  VersionRange v2=new VersionRange("(2.0.0,3.0.0]");
  VersionRange result=v1.intersect(v2);
  assertNull(result);
}

</code></pre>

<br>
<pre class="type-7 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testIntersectVersionRange_Invalid2(){
  VersionRange v1=new VersionRange("[1.0.0,2.0.0)");
  VersionRange v2=new VersionRange("[2.0.0,3.0.0]");
  VersionRange result=v1.intersect(v2);
  assertNull(result);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.filesystem.FileSystemTest </h4><pre class="type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Make sure that the operations work with zip files inside other zip files. Performance is not going to be great though :)
 */
@Test public void nestedZipInZipInputStream() throws Exception {
  ICloseableDirectory outer=FileSystem.getFSRoot(new FileInputStream("fileSystemTest/outer.zip"));
  try {
    IFile innerFile=outer.getFile("app2.zip");
    assertNotNull(innerFile);
    IDirectory inner=innerFile.convertNested();
    assertNotNull(inner);
    File desiredFile=new File(new File(getTestResourceDir(),"/app1"),"META-INF/APPLICATION.MF");
    runBasicDirTest(inner,"app2.zip/",-1,desiredFile.lastModified());
    runBasicDirTest(inner.toCloseable(),"app2.zip/",desiredFile.length(),desiredFile.lastModified());
  }
  finally {
    outer.close();
    Field f=outer.getClass().getDeclaredField("tempFile");
    f.setAccessible(true);
    assertFalse(((File)f.get(outer)).exists());
  }
}

</code></pre>

<br>
<pre class="type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Make sure that operations work on zip files nested in file IDirectories
 * @throws IOException
 */
@Test public void nestedZipInDirectory() throws IOException {
  IDirectory dir=FileSystem.getFSRoot(new File("").getAbsoluteFile());
  IDirectory zip=dir.getFile("fileSystemTest/app2.zip").convert();
  assertNull(zip);
  zip=dir.getFile("fileSystemTest/app2.zip").convertNested();
  assertNotNull(zip);
  assertNotNull(zip.getParent());
  assertEquals("fileSystemTest",zip.getParent().getName());
  assertEquals("fileSystemTest/app2.zip",zip.getName());
  IFile appMf=zip.getFile("META-INF/APPLICATION.MF");
  assertNotNull(appMf);
  assertEquals("fileSystemTest/app2.zip/META-INF/APPLICATION.MF",appMf.getName());
  checkManifest(appMf.open());
  assertFalse(zip.isRoot());
  assertEquals(dir,zip.getRoot());
  assertEquals(dir,appMf.getRoot());
  checkManifest(appMf.toURL().openStream());
  runBasicDirTest(zip,"fileSystemTest/app2.zip/",appMf.getSize(),appMf.getLastModified());
}

</code></pre>

<br>
<pre class="type-7 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * Make sure that the operations work with zip files inside other zip files. Performance is not going to be great though :)
 */
@Test public void nestedZipInZip() throws IOException {
  IDirectory outer=FileSystem.getFSRoot(new File("fileSystemTest/outer.zip"));
  IFile innerFile=outer.getFile("app2.zip");
  assertNotNull(innerFile);
  IDirectory inner=innerFile.convertNested();
  assertNotNull(inner);
  File desiredFile=new File(new File(getTestResourceDir(),"/app1"),"META-INF/APPLICATION.MF");
  runBasicDirTest(inner,"app2.zip/",-1,desiredFile.lastModified());
  runBasicDirTest(inner.toCloseable(),"app2.zip/",desiredFile.length(),desiredFile.lastModified());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.filesystem.IOUtilsTest </h4><pre class="type-3 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteOut() throws IOException {
  File tmpDir=new File("target/ioUtilsTest/tmp");
  tmpDir.mkdirs();
  IOUtils.writeOut(tmpDir,"simple.txt",new ByteArrayInputStream("abc".getBytes()));
  IOUtils.writeOut(tmpDir,"some/relative/directory/complex.txt",new ByteArrayInputStream("def".getBytes()));
  IOUtils.writeOut(tmpDir,"some/relative/directory/complex2.txt",new ByteArrayInputStream("ghi".getBytes()));
  File simple=new File(tmpDir,"simple.txt");
  assertTrue(simple.exists());
  File complex=new File(tmpDir,"some/relative/directory/complex.txt");
  assertTrue(complex.exists());
  File complex2=new File(tmpDir,"some/relative/directory/complex2.txt");
  assertTrue(complex2.exists());
  BufferedReader r=new BufferedReader(new FileReader(simple));
  assertEquals("abc",r.readLine());
  assertNull(r.readLine());
  r.close();
  r=new BufferedReader(new FileReader(complex));
  assertEquals("def",r.readLine());
  assertNull(r.readLine());
  r.close();
  r=new BufferedReader(new FileReader(complex2));
  assertEquals("ghi",r.readLine());
  assertNull(r.readLine());
  r.close();
}

</code></pre>

<br>
<pre class="type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testZipUpAndUnzipAndDeleteRecursive() throws IOException {
  new File("ioUtilsTest").mkdir();
  IOUtils.zipUp(new File("../src/test/resources/zip"),new File("ioUtilsTest/test.zip"));
  ZipFile zip=new ZipFile("ioUtilsTest/test.zip");
  assertNotNull(zip.getEntry("file.txt"));
  assertNotNull(zip.getEntry("subdir/someFile.txt"));
  zip.close();
  IDirectory dir=FileSystem.getFSRoot(new File("ioUtilsTest"));
  IFile izip=dir.getFile("test.zip");
  File output=new File("ioUtilsTest/zipout");
  output.mkdirs();
  IOUtils.unpackZip(izip,output);
  File a=new File(output,"file.txt");
  File b=new File(output,"subdir");
  File c=new File(b,"someFile.txt");
  assertTrue(output.exists());
  assertTrue(a.exists() && a.isFile());
  assertTrue(b.exists() && b.isDirectory());
  assertTrue(c.exists() && c.isFile());
  IOUtils.deleteRecursive(output);
  assertFalse(output.exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.manifest.BundleManifestTest </h4><pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testZipWithName() throws Exception {
  JarInputStream jarIs=new JarInputStream(new FileInputStream(BUNDLE_WITH_NAME_HEADER));
  assertNull(jarIs.getManifest());
  jarIs.close();
  BundleManifest sut=BundleManifest.fromBundle(BUNDLE_WITH_NAME_HEADER);
  assertEquals(EXPECTED_SYMBOLIC_NAME,sut.getSymbolicName());
  assertEquals(EXPECTED_VERSION,sut.getVersion().toString());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testZipWithNameFromIDirectory() throws Exception {
  JarInputStream jarIs=new JarInputStream(new FileInputStream(BUNDLE_WITH_NAME_HEADER));
  assertNull(jarIs.getManifest());
  jarIs.close();
  BundleManifest sut=BundleManifest.fromBundle(FileSystem.getFSRoot(BUNDLE_WITH_NAME_HEADER));
  assertEquals(EXPECTED_SYMBOLIC_NAME,sut.getSymbolicName());
  assertEquals(EXPECTED_VERSION,sut.getVersion().toString());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testZipFromIDirectory() throws Exception {
  JarInputStream jarIs=new JarInputStream(new FileInputStream(BUNDLE_WITHOUT_NAME_HEADER));
  assertNull(jarIs.getManifest());
  jarIs.close();
  BundleManifest sut=BundleManifest.fromBundle(FileSystem.getFSRoot(BUNDLE_WITHOUT_NAME_HEADER));
  assertEquals(EXPECTED_SYMBOLIC_NAME,sut.getSymbolicName());
  assertEquals(EXPECTED_VERSION,sut.getVersion().toString());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testZip() throws Exception {
  JarInputStream jarIs=new JarInputStream(new FileInputStream(BUNDLE_WITHOUT_NAME_HEADER));
  assertNull(jarIs.getManifest());
  jarIs.close();
  BundleManifest sut=BundleManifest.fromBundle(BUNDLE_WITHOUT_NAME_HEADER);
  assertEquals(EXPECTED_SYMBOLIC_NAME,sut.getSymbolicName());
  assertEquals(EXPECTED_VERSION,sut.getVersion().toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.manifest.ManifestHeaderProcessorTest </h4><pre class="type-4 type-12 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testParseExportString(){
  String exportPackage="com.acme.foo,com.acme.bar;version=1,com.acme.bar;version=2;uses:=\"a.b.c,d.e.f\";security=false;mandatory:=security";
  List<NameValuePair> exportPackageReturn=ManifestHeaderProcessor.parseExportString(exportPackage);
  int i=0;
  assertEquals("The number of the packages is wrong.",3,exportPackageReturn.size());
  for (  NameValuePair nvp : exportPackageReturn) {
    if (nvp.getName().equals("com.acme.foo")) {
      i++;
      assertTrue("The directive or attribute should not be set.",nvp.getAttributes().isEmpty());
    }
 else     if ((nvp.getName().equals("com.acme.bar")) && ("2".equals(nvp.getAttributes().get("version")))) {
      i++;
      assertEquals("The directive is wrong.","a.b.c,d.e.f",nvp.getAttributes().get("uses:"));
      assertEquals("The directive is wrong.","false",nvp.getAttributes().get("security"));
      assertEquals("The directive is wrong.","security",nvp.getAttributes().get("mandatory:"));
    }
 else     if ((nvp.getName().equals("com.acme.bar")) && ("1".equals(nvp.getAttributes().get("version")))) {
      i++;
      assertNull("The directive is wrong.",nvp.getAttributes().get("uses:"));
      assertNull("The directive is wrong.",nvp.getAttributes().get("security"));
      assertNull("The directive is wrong.",nvp.getAttributes().get("mandatory:"));
    }
  }
  assertEquals("The names of the packages are wrong.",3,i);
  exportPackage="com.acme.foo";
  exportPackageReturn=ManifestHeaderProcessor.parseExportString(exportPackage);
  int k=0;
  assertEquals("The number of the packages is wrong.",1,exportPackageReturn.size());
  for (  NameValuePair nvp : exportPackageReturn) {
    if (nvp.getName().equals("com.acme.foo")) {
      k++;
      assertTrue("The directive or attribute should not be set.",nvp.getAttributes().isEmpty());
    }
  }
  assertEquals("The names of the packages are wrong.",1,k);
  exportPackage="com.acme.foo;com.acme.bar;version=\"2\";resolution:=optional";
  exportPackageReturn=ManifestHeaderProcessor.parseExportString(exportPackage);
  k=0;
  assertEquals("The number of the packages is wrong.",2,exportPackageReturn.size());
  for (  NameValuePair nvp : exportPackageReturn) {
    if (nvp.getName().equals("com.acme.foo")) {
      k++;
      assertEquals("The attribute is wrong.","2",nvp.getAttributes().get("version"));
      assertEquals("The attribute is wrong.","optional",nvp.getAttributes().get("resolution:"));
    }
 else     if (nvp.getName().equals("com.acme.bar")) {
      k++;
      assertEquals("The attribute is wrong.","2",nvp.getAttributes().get("version"));
      assertEquals("The attribute is wrong.","optional",nvp.getAttributes().get("resolution:"));
    }
  }
  assertEquals("The names of the packages are wrong.",2,k);
  exportPackageReturn=ManifestHeaderProcessor.parseExportString("some.export.with.space.in;directive := spacey");
  assertEquals(exportPackageReturn.toString(),"spacey",exportPackageReturn.get(0).getAttributes().get("directive:"));
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test the version range created correctly
 * @throws Exception
 */
@Test public void testVersionRange() throws Exception {
  String version1="[1.2.3, 4.5.6]";
  String version2="(1, 2]";
  String version3="[2,4)";
  String version4="(1,2)";
  String version5="2";
  String version6="2.3";
  String version7="[1.2.3.q, 2.3.4.p)";
  String version8="1.2.2.5";
  String version9="a.b.c";
  String version10=null;
  String version11="";
  String version12="\"[1.2.3, 4.5.6]\"";
  VersionRange vr=ManifestHeaderProcessor.parseVersionRange(version1);
  assertEquals("The value is wrong","1.2.3",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","4.5.6",vr.getMaximumVersion().toString());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  vr=ManifestHeaderProcessor.parseVersionRange(version2);
  assertEquals("The value is wrong","1.0.0",vr.getMinimumVersion().toString());
  assertTrue("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","2.0.0",vr.getMaximumVersion().toString());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  vr=ManifestHeaderProcessor.parseVersionRange(version3);
  assertEquals("The value is wrong","2.0.0",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","4.0.0",vr.getMaximumVersion().toString());
  assertTrue("The value is wrong",vr.isMaximumExclusive());
  vr=ManifestHeaderProcessor.parseVersionRange(version4);
  assertEquals("The value is wrong","1.0.0",vr.getMinimumVersion().toString());
  assertTrue("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","2.0.0",vr.getMaximumVersion().toString());
  assertTrue("The value is wrong",vr.isMaximumExclusive());
  vr=ManifestHeaderProcessor.parseVersionRange(version5);
  assertEquals("The value is wrong","2.0.0",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertNull("The value is wrong",vr.getMaximumVersion());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  vr=ManifestHeaderProcessor.parseVersionRange(version6);
  assertEquals("The value is wrong","2.3.0",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertNull("The value is wrong",vr.getMaximumVersion());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  vr=ManifestHeaderProcessor.parseVersionRange(version7);
  assertEquals("The value is wrong","1.2.3.q",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","2.3.4.p",vr.getMaximumVersion().toString());
  assertTrue("The value is wrong",vr.isMaximumExclusive());
  vr=ManifestHeaderProcessor.parseVersionRange(version8);
  assertEquals("The value is wrong","1.2.2.5",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertNull("The value is wrong",vr.getMaximumVersion());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  boolean exception=false;
  try {
    vr=ManifestHeaderProcessor.parseVersionRange(version9);
  }
 catch (  Exception e) {
    exception=true;
  }
  assertTrue("The value is wrong",exception);
  boolean exceptionNull=false;
  try {
    vr=ManifestHeaderProcessor.parseVersionRange(version10);
  }
 catch (  Exception e) {
    exceptionNull=true;
  }
  assertTrue("The value is wrong",exceptionNull);
  vr=ManifestHeaderProcessor.parseVersionRange(version11);
  assertEquals("The value is wrong","0.0.0",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertNull("The value is wrong",vr.getMaximumVersion());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  vr=ManifestHeaderProcessor.parseVersionRange(version12);
  assertEquals("The value is wrong","1.2.3",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","4.5.6",vr.getMaximumVersion().toString());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.versioning.tests.BinaryCompatibilityTest </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
/** 
 * Test a binary incompatibility where a class was public is changed to not public.
 */
@Test public void test_jdk_chap13_4_3_1(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC + ACC_FINAL,"pkg/Test",null,"java/lang/Object",null);
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_FINAL,"pkg/Test",null,"java/lang/Object",null);
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  assertNull("When a class is changed from public to non-public, this should break binary compatibility.",newCV.getClassDeclaration());
}

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
/** 
 * Changing an interface that is declared public to not be declared public should break compatibility.
 */
@Test public void test_jdk_chap13_5_1_2(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC + ACC_ABSTRACT + ACC_INTERFACE,"pkg/Test",null,"java/lang/Object",new String[]{"versioning/java/files/TestB"});
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_ABSTRACT + ACC_INTERFACE,"pkg/Test",null,"java/lang/Object",new String[]{"versioning/java/files/TestB"});
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  assertNull("Changing an interface that is declared public to not be declared public should break compatibility.",newCV.getClassDeclaration());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.web.converter.itest.WabConverterITest </h4><pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getStarted() throws Exception {
  File testWar=File.createTempFile("test",".war");
  createTestWar(testWar);
  String baseUrl="webbundle:" + testWar.toURI().toURL().toExternalForm();
  assertTrue("Time out waiting for webbundle URL handler",waitForURLHandler(baseUrl));
  Bundle converted=bundleContext.installBundle(baseUrl + "?Bundle-SymbolicName=test.war.bundle&Web-ContextPath=foo");
  assertNotNull(converted);
  Dictionary<String,String> man=converted.getHeaders();
  assertEquals("test.war.bundle",man.get(Constants.BUNDLE_SYMBOLICNAME));
  assertEquals("/foo",man.get("Web-ContextPath"));
  assertTrue(man.get(Constants.IMPORT_PACKAGE).contains("javax.naming"));
  new File("test.war").delete();
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
