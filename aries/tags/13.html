<h3><span class=" glyphicon glyphicon-tag"/>&nbspIdentityVerifier</h3><kbd>Verifies whether two objects/variables are the same</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.aries.application.resolve.transform.cm.itest.ConfigurationPostResolverTest </h4><pre class="type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This test validates that the transformer is correctly detecting the config admin package. Checks
 * are performed to validate that an existing import package is still honored etc.
 * @throws Exception
 */
@Test public void validatePostResolveTransform() throws Exception {
  RichBundleContext ctx=new RichBundleContext(bundleContext);
  PostResolveTransformer transformer=ctx.getService(PostResolveTransformer.class);
  Assert.assertNotNull("Unable to locate transformer",transformer);
  ApplicationMetadata mockApplicationMetadata=Skeleton.newMock(ApplicationMetadata.class);
  MockDeployedBundles originalDeployedBundles=new MockDeployedBundles();
  originalDeployedBundles.setDeployedContent(getNonConfigModelledResources());
  DeployedBundles transformedDeployedBundles=transformer.postResolveProcess(mockApplicationMetadata,originalDeployedBundles);
  Assert.assertNotNull("An instance should have been returned",transformedDeployedBundles);
  Assert.assertEquals(originalDeployedBundles.getImportPackage(),transformedDeployedBundles.getImportPackage());
  originalDeployedBundles=new MockDeployedBundles();
  originalDeployedBundles.setDeployedContent(getConfigModelledResources());
  transformedDeployedBundles=transformer.postResolveProcess(mockApplicationMetadata,originalDeployedBundles);
  Assert.assertNotNull("An instance should have been returned",transformedDeployedBundles);
  Assert.assertNotSame("Missing config package",originalDeployedBundles.getImportPackage(),transformedDeployedBundles.getImportPackage());
  Assert.assertEquals("Missing config package","org.osgi.service.cm;version=\"1.2.0\"",transformedDeployedBundles.getImportPackage());
  originalDeployedBundles=new MockDeployedBundles();
  originalDeployedBundles.setDeployedContent(getConfigModelledResources());
  originalDeployedBundles.setImportPackage("org.foo.bar;version=\1.0.0\",org.bar.foo;version=\"1.0.0\"");
  transformedDeployedBundles=transformer.postResolveProcess(mockApplicationMetadata,originalDeployedBundles);
  Assert.assertNotNull("An instance should have been returned",transformedDeployedBundles);
  Assert.assertNotSame("Missing config package",originalDeployedBundles.getImportPackage(),transformedDeployedBundles.getImportPackage());
  Assert.assertEquals("Missing config package","org.foo.bar;version=\1.0.0\",org.bar.foo;version=\"1.0.0\",org.osgi.service.cm;version=\"1.2.0\"",transformedDeployedBundles.getImportPackage());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.BlueprintAnnotationTest </h4><pre class="type-3 type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Object obj=blueprintContainer.getComponentInstance("bar");
  assertNotNull(obj);
  assertEquals(Bar.class,obj.getClass());
  Bar bar=(Bar)obj;
  assertEquals("Hello FooBar",bar.getValue());
  obj=blueprintContainer.getComponentInstance("foo");
  assertNotNull(obj);
  assertEquals(Foo.class,obj.getClass());
  Foo foo=(Foo)obj;
  assertEquals(5,foo.getA());
  assertSame(bar,foo.getBar());
  assertEquals(Currency.getInstance("PLN"),foo.getCurrency());
  assertEquals(new SimpleDateFormat("yyyy.MM.dd").parse("2009.04.17"),foo.getDate());
  assertTrue(foo.isInitialized());
  assertFalse(foo.isDestroyed());
  assertNotNull(blueprintContainer.getComponentInstance("fragment"));
  obj=context().getService(Foo.class,"(blueprint.annotation.sample=true)",5000);
  assertNotNull(obj);
  assertEquals(foo.toString(),obj.toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.proxy.InterfaceProxyingTest </h4><pre class="type-4 type-5 type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test a class whose super couldn't be woven
 */
@Test public void testDelegationAndInterception() throws Exception {
  Collection<Class<?>> classes=new ArrayList<Class<?>>(Arrays.asList(Callable.class));
  TestListener tl=new TestListener();
  TestCallable tc=new TestCallable();
  Callable o=(Callable)InterfaceProxyGenerator.getProxyInstance(testBundle,null,classes,tc,tl);
  assertCalled(tl,false,false,false);
  assertNull(null,o.call());
  assertCalled(tl,true,true,false);
  assertEquals(Callable.class.getMethod("call"),tl.getLastMethod());
  tl.clear();
  assertCalled(tl,false,false,false);
  tc.setReturn(new Callable(){
    public Object call() throws Exception {
      throw new RuntimeException();
    }
  }
);
  try {
    o.call();
    fail("Should throw an exception");
  }
 catch (  RuntimeException re) {
    assertCalled(tl,true,false,true);
    assertSame(re,tl.getLastThrowable());
  }
  tl.clear();
  assertCalled(tl,false,false,false);
  tc.setReturn(new Callable(){
    public Object call() throws Exception {
      try {
        throw new RuntimeException();
      }
 catch (      RuntimeException re) {
        return new Object();
      }
    }
  }
);
  try {
    assertNotNull(o.call());
  }
  finally {
    assertCalled(tl,true,true,false);
  }
}

</code></pre>

<br>
<pre class="type-4 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testCaching() throws Exception {
  Collection<Class<?>> classes=new ArrayList<Class<?>>(Arrays.asList(Closeable.class));
  Object o1=InterfaceProxyGenerator.getProxyInstance(testBundle,null,classes,constantly(null),null);
  Object o2=InterfaceProxyGenerator.getProxyInstance(testBundle,null,classes,constantly(null),null);
  assertSame(o1.getClass(),o2.getClass());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.ejb.openejb.extender.itest.AdvancedEJBBundleTest </h4><pre class="type-4 type-13 type-1 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testTransactionalEJB() throws Exception {
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ZipOutputStream zos=new ZipOutputStream(baos);
  addToZip(zos,"TX_MANIFEST.MF","META-INF/MANIFEST.MF");
  addToZip(zos,"beans/integration/impl/TxSingleton.class");
  addToZip(zos,"beans/integration/Tx.class");
  zos.close();
  Bundle test=context().installBundle("",new ByteArrayInputStream(baos.toByteArray()));
  try {
    test.start();
    Object bean=context().getService(context().getServiceReference(Tx.class.getName()));
    UserTransaction ut=context().getService(UserTransaction.class);
    Method no=bean.getClass().getMethod("getNoTransactionId");
    Method maybe=bean.getClass().getMethod("getMaybeTransactionId");
    Method tx=bean.getClass().getMethod("getTransactionId");
    Method newTx=bean.getClass().getMethod("getNewTransactionId");
    assertNull(no.invoke(bean));
    assertNull(maybe.invoke(bean));
    assertNotNull(tx.invoke(bean));
    assertNotNull(newTx.invoke(bean));
    ut.begin();
    try {
      Object key=context().getService(TransactionSynchronizationRegistry.class).getTransactionKey();
      assertNotNull(key);
      assertNull(no.invoke(bean));
      assertSame(key,maybe.invoke(bean));
      assertSame(key,tx.invoke(bean));
      Object o=newTx.invoke(bean);
      assertNotNull(o);
      assertNotSame(key,o);
    }
  finally {
      ut.commit();
    }
    test.stop();
  }
  finally {
    test.uninstall();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.permissionadmin.PermissionAdminTest </h4><pre class="type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testListLocations() throws IOException {
  String[] locations1=new String[]{"test1","test2"};
  Mockito.when(permAdmin.getLocations()).thenReturn(locations1);
  String[] locations2=mbean.listLocations();
  Assert.assertNotNull(locations2);
  Assert.assertEquals(2,locations2.length);
  Assert.assertSame(locations1,locations2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jndi.ObjectFactoryTest </h4><pre class="type-4 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testSpecifiedFactoryWithRegisteredButNotMatchingFactory() throws Exception {
  String testObject="Test object";
  ObjectFactory factory=Skeleton.newMock(ObjectFactory.class);
  Skeleton.getSkeleton(factory).setReturnValue(new MethodCall(ObjectFactory.class,"getObjectInstance",Object.class,Name.class,Context.class,Hashtable.class),testObject);
  Reference ref=new Reference("dummy.class.name","dummy.factory.class.name","");
  bc.registerService(new String[]{ObjectFactory.class.getName(),factory.getClass().getName()},factory,null);
  Object obj=NamingManager.getObjectInstance(ref,null,null,env);
  assertSame("The naming manager should have returned the reference object",ref,obj);
}

</code></pre>

<br>
<pre class="type-4 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testURLReferenceWithNoMatchingHandler() throws Exception {
  Reference ref=new Reference(null);
  ref.add(new StringRefAddr("URL","wibble"));
  Object obj=NamingManager.getObjectInstance(ref,null,null,env);
  assertSame("The naming manager should have returned the reference object",ref,obj);
}

</code></pre>

<br>
<pre class="type-4 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testSpecifiedFactoryWithNoMatchingFactory() throws Exception {
  Reference ref=new Reference("dummy.class.name");
  Object obj=NamingManager.getObjectInstance(ref,null,null,env);
  assertSame("The naming manager should have returned the reference object",ref,obj);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jpa.impl.EmSupplierTest </h4><pre class="type-3 type-7 type-13 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void lifeCycleTest(){
  EntityManagerFactory emf=mockEmf();
  Coordinator coordinator=new DummyCoordinator();
  EMSupplierImpl emSupplier=new EMSupplierImpl("myunit",emf,coordinator);
  assertIllegalState(emSupplier);
  coordinator.begin("test",0);
  EntityManager em=emSupplier.get();
  Assert.assertNotNull("EM should be present after preCall",em);
  coordinator.begin("testinner",0);
  Assert.assertSame("Same EM for inner preCall",em,emSupplier.get());
  coordinator.pop().end();
  Assert.assertSame("EM must still be the same after inner postCall",em,emSupplier.get());
  coordinator.pop().end();
  assertIllegalState(emSupplier);
  boolean clean=emSupplier.close();
  Assert.assertTrue("Shutdown should be clean",clean);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.proxy.itests.AbstractWeavingProxyTest </h4><pre class="type-4 type-12 type-5 type-13 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This test does two things. First of all it checks that we can proxy a final 
 * class. It also validates that the class implements WovenProxy, and that the
 * delegation still works
 */
@Test public void checkProxyFinalClass() throws Exception {
  Bundle b=bundleContext.getBundle();
  TestCallable dispatcher=new TestCallable();
  TestCallable template=new TestCallable();
  Collection<Class<?>> classes=new ArrayList<Class<?>>();
  classes.add(TestCallable.class);
  @SuppressWarnings("unchecked") Callable o=(Callable)mgr.createDelegatingProxy(b,classes,dispatcher,template);
  if (!!!(o instanceof WovenProxy))   fail("Proxy should be woven!");
  Object inner=new Integer(3);
  dispatcher.setReturn(new TestCallable());
  ((TestCallable)dispatcher.call()).setReturn(inner);
  assertSame("Should return the same object",inner,o.call());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.ProviderBundleTrackerCustomizerGenericCapabilityTest </h4><pre class="type-4 type-7 type-13 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCustomAttributesBundle() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  ServiceRegistration sreg=EasyMock.createMock(ServiceRegistration.class);
  EasyMock.replay(sreg);
  BundleContext implBC=mockSPIBundleContext(sreg);
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.PROVIDER_REQUIREMENT);
  headers.put(SpiFlyConstants.PROVIDE_CAPABILITY,SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE + "; " + SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "=org.apache.aries.mytest.MySPI; approval=yeah; ");
  Bundle implBundle=mockSPIBundle(implBC,headers);
  List<ServiceRegistration> registrations=customizer.addingBundle(implBundle,null);
  assertEquals(1,registrations.size());
  Collection<Bundle> bundles=activator.findProviderBundles("org.apache.aries.mytest.MySPI");
  assertEquals(1,bundles.size());
  assertSame(implBundle,bundles.iterator().next());
  Map<String,Object> attrs=activator.getCustomBundleAttributes("org.apache.aries.mytest.MySPI",implBundle);
  assertEquals(1,attrs.size());
  assertEquals("yeah",attrs.get("approval"));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCapReqHeadersInFragment() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  ServiceRegistration<?> sreg=EasyMock.createNiceMock(ServiceRegistration.class);
  EasyMock.replay(sreg);
  BundleContext implBC=mockSPIBundleContext(sreg);
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,"osgi.ee;filter:=\"(&(osgi.ee=JavaSE)(version=1.6))\"");
  List<BundleWire> wires=new ArrayList<BundleWire>();
  BundleWire wire=EasyMock.createMock(BundleWire.class);
  Bundle fragment=EasyMock.createMock(Bundle.class);
  BundleRevision frev=EasyMock.createMock(BundleRevision.class);
  EasyMock.expect(frev.getBundle()).andReturn(fragment).anyTimes();
  EasyMock.replay(frev);
  BundleRequirement req=EasyMock.createMock(BundleRequirement.class);
  EasyMock.expect(req.getRevision()).andReturn(frev).anyTimes();
  EasyMock.replay(req);
  EasyMock.expect(wire.getRequirement()).andReturn(req).anyTimes();
  EasyMock.replay(wire);
  wires.add(wire);
  BundleWiring bw=EasyMock.createMock(BundleWiring.class);
  EasyMock.expect(bw.getProvidedWires("osgi.wiring.host")).andReturn(wires).anyTimes();
  EasyMock.replay(bw);
  BundleRevision rev=EasyMock.createMock(BundleRevision.class);
  EasyMock.expect(rev.getWiring()).andReturn(bw).anyTimes();
  EasyMock.replay(rev);
  Bundle implBundle=mockSPIBundle(implBC,headers,rev);
  Dictionary<String,String> fheaders=new Hashtable<String,String>();
  fheaders.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.PROVIDER_REQUIREMENT);
  fheaders.put(SpiFlyConstants.PROVIDE_CAPABILITY,SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE + "; " + SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "=org.apache.aries.mytest.MySPI");
  EasyMock.expect(fragment.getHeaders()).andReturn(fheaders).anyTimes();
  EasyMock.replay(fragment);
  assertEquals("Precondition",0,activator.findProviderBundles("org.apache.aries.mytest.MySPI").size());
  customizer.addingBundle(implBundle,null);
  Collection<Bundle> bundles=activator.findProviderBundles("org.apache.aries.mytest.MySPI");
  assertEquals(1,bundles.size());
  assertSame(implBundle,bundles.iterator().next());
}

</code></pre>

<br>
<pre class="type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void testAddingBundleWithBundleClassPath() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  BundleContext implBC=EasyMock.createMock(BundleContext.class);
  EasyMock.expect(implBC.registerService(EasyMock.eq("org.apache.aries.mytest.MySPI"),EasyMock.isA(ServiceFactory.class),(Dictionary<String,?>)EasyMock.anyObject())).andReturn(EasyMock.createNiceMock(ServiceRegistration.class)).times(3);
  EasyMock.replay(implBC);
  Bundle implBundle=EasyMock.createNiceMock(Bundle.class);
  EasyMock.expect(implBundle.getBundleContext()).andReturn(implBC).anyTimes();
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.PROVIDER_REQUIREMENT);
  headers.put(SpiFlyConstants.PROVIDE_CAPABILITY,SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE + "; " + SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "=org.apache.aries.mytest.MySPI");
  headers.put(Constants.BUNDLE_CLASSPATH,".,non-jar.jar,embedded.jar,embedded2.jar");
  EasyMock.expect(implBundle.getHeaders()).andReturn(headers).anyTimes();
  URL embeddedJar=getClass().getResource("/embedded.jar");
  assertNotNull("precondition",embeddedJar);
  EasyMock.expect(implBundle.getResource("embedded.jar")).andReturn(embeddedJar).anyTimes();
  URL embedded2Jar=getClass().getResource("/embedded2.jar");
  assertNotNull("precondition",embedded2Jar);
  EasyMock.expect(implBundle.getResource("embedded2.jar")).andReturn(embedded2Jar).anyTimes();
  URL dir=new URL("jar:" + embeddedJar + "!/META-INF/services");
  assertNotNull("precondition",dir);
  EasyMock.expect(implBundle.getResource("/META-INF/services")).andReturn(dir).anyTimes();
  EasyMock.expect(implBundle.findEntries((String)EasyMock.anyObject(),(String)EasyMock.anyObject(),EasyMock.anyBoolean())).andReturn(null).anyTimes();
  ClassLoader cl=new URLClassLoader(new URL[]{embeddedJar},getClass().getClassLoader());
  Class<?> clsA=cl.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2a");
  EasyMock.expect(implBundle.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2a")).andReturn(clsA).anyTimes();
  Class<?> clsB=cl.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2b");
  EasyMock.expect(implBundle.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2b")).andReturn(clsB).anyTimes();
  ClassLoader cl2=new URLClassLoader(new URL[]{embedded2Jar},getClass().getClassLoader());
  Class<?> clsC=cl2.loadClass("org.apache.aries.spifly.impl3.MySPIImpl3");
  EasyMock.expect(implBundle.loadClass("org.apache.aries.spifly.impl3.MySPIImpl3")).andReturn(clsC).anyTimes();
  EasyMock.replay(implBundle);
  assertEquals("Precondition",0,activator.findProviderBundles("org.apache.aries.mytest.MySPI").size());
  customizer.addingBundle(implBundle,null);
  Collection<Bundle> bundles=activator.findProviderBundles("org.apache.aries.mytest.MySPI");
  assertEquals(1,bundles.size());
  assertSame(implBundle,bundles.iterator().next());
  EasyMock.verify(implBC);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoServiceRegistration() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  ServiceRegistration sreg=EasyMock.createMock(ServiceRegistration.class);
  EasyMock.replay(sreg);
  BundleContext implBC=mockSPIBundleContext(sreg);
  Bundle implBundle=mockSPIBundle(implBC,SpiFlyConstants.PROVIDER_REQUIREMENT);
  List<ServiceRegistration> registrations=customizer.addingBundle(implBundle,null);
  assertEquals(0,registrations.size());
  Collection<Bundle> bundles=activator.findProviderBundles("org.apache.aries.mytest.MySPI");
  assertEquals(1,bundles.size());
  assertSame(implBundle,bundles.iterator().next());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddingRemovedBundle() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  ServiceRegistration sreg=EasyMock.createMock(ServiceRegistration.class);
  sreg.unregister();
  EasyMock.expectLastCall();
  EasyMock.replay(sreg);
  BundleContext implBC=mockSPIBundleContext(sreg);
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.PROVIDER_REQUIREMENT);
  headers.put(SpiFlyConstants.PROVIDE_CAPABILITY,SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE + "; " + SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "=org.apache.aries.mytest.MySPI");
  Bundle implBundle=mockSPIBundle(implBC,headers);
  assertEquals("Precondition",0,activator.findProviderBundles("org.apache.aries.mytest.MySPI").size());
  List<ServiceRegistration> registrations=customizer.addingBundle(implBundle,null);
  Collection<Bundle> bundles=activator.findProviderBundles("org.apache.aries.mytest.MySPI");
  assertEquals(1,bundles.size());
  assertSame(implBundle,bundles.iterator().next());
  EasyMock.verify(implBC);
  customizer.removedBundle(implBundle,null,registrations);
  Collection<Bundle> bundles2=activator.findProviderBundles("org.apache.aries.mytest.MySPI");
  assertEquals(0,bundles2.size());
  EasyMock.verify(sreg);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNonServiceRegistryBundle() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  ServiceRegistration sreg=EasyMock.createMock(ServiceRegistration.class);
  EasyMock.replay(sreg);
  BundleContext implBC=mockSPIBundleContext(sreg);
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.PROVIDER_REQUIREMENT);
  headers.put(SpiFlyConstants.PROVIDE_CAPABILITY,SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE + "; " + SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "=org.apache.aries.mytest.MySPI; approval=yeah;"+ SpiFlyConstants.REGISTER_DIRECTIVE+ ":=\"\"");
  Bundle implBundle=mockSPIBundle(implBC,headers);
  List<ServiceRegistration> registrations=customizer.addingBundle(implBundle,null);
  assertEquals(0,registrations.size());
  Collection<Bundle> bundles=activator.findProviderBundles("org.apache.aries.mytest.MySPI");
  assertEquals(1,bundles.size());
  assertSame(implBundle,bundles.iterator().next());
  Map<String,Object> attrs=activator.getCustomBundleAttributes("org.apache.aries.mytest.MySPI",implBundle);
  assertEquals(1,attrs.size());
  assertEquals("yeah",attrs.get("approval"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.ProviderBundleTrackerCustomizerTest </h4><pre class="type-4 type-7 type-13 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddingRemovedBundle() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  ServiceRegistration sreg=EasyMock.createMock(ServiceRegistration.class);
  sreg.unregister();
  EasyMock.expectLastCall();
  EasyMock.replay(sreg);
  BundleContext implBC=mockSPIBundleContext(sreg);
  Bundle implBundle=mockSPIBundle(implBC);
  assertEquals("Precondition",0,activator.findProviderBundles("org.apache.aries.mytest.MySPI").size());
  List<ServiceRegistration> registrations=customizer.addingBundle(implBundle,null);
  Collection<Bundle> bundles=activator.findProviderBundles("org.apache.aries.mytest.MySPI");
  assertEquals(1,bundles.size());
  assertSame(implBundle,bundles.iterator().next());
  EasyMock.verify(implBC);
  customizer.removedBundle(implBundle,null,registrations);
  EasyMock.verify(sreg);
}

</code></pre>

<br>
<pre class="type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void testAddingBundleWithBundleClassPath() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  BundleContext implBC=EasyMock.createMock(BundleContext.class);
  EasyMock.expect(implBC.registerService(EasyMock.eq("org.apache.aries.mytest.MySPI"),EasyMock.isA(ServiceFactory.class),(Dictionary<String,?>)EasyMock.anyObject())).andReturn(EasyMock.createNiceMock(ServiceRegistration.class)).times(3);
  EasyMock.replay(implBC);
  Bundle implBundle=EasyMock.createNiceMock(Bundle.class);
  EasyMock.expect(implBundle.getBundleContext()).andReturn(implBC).anyTimes();
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.SPI_PROVIDER_HEADER,"*");
  headers.put(Constants.BUNDLE_CLASSPATH,".,non-jar.jar,embedded.jar,embedded2.jar");
  EasyMock.expect(implBundle.getHeaders()).andReturn(headers).anyTimes();
  URL embeddedJar=getClass().getResource("/embedded.jar");
  assertNotNull("precondition",embeddedJar);
  EasyMock.expect(implBundle.getResource("embedded.jar")).andReturn(embeddedJar).anyTimes();
  URL embedded2Jar=getClass().getResource("/embedded2.jar");
  assertNotNull("precondition",embedded2Jar);
  EasyMock.expect(implBundle.getResource("embedded2.jar")).andReturn(embedded2Jar).anyTimes();
  URL dir=new URL("jar:" + embeddedJar + "!/META-INF/services");
  assertNotNull("precondition",dir);
  EasyMock.expect(implBundle.getResource("/META-INF/services")).andReturn(dir).anyTimes();
  EasyMock.expect(implBundle.findEntries((String)EasyMock.anyObject(),(String)EasyMock.anyObject(),EasyMock.anyBoolean())).andReturn(null).anyTimes();
  ClassLoader cl=new URLClassLoader(new URL[]{embeddedJar},getClass().getClassLoader());
  Class<?> clsA=cl.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2a");
  EasyMock.expect(implBundle.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2a")).andReturn(clsA).anyTimes();
  Class<?> clsB=cl.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2b");
  EasyMock.expect(implBundle.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2b")).andReturn(clsB).anyTimes();
  ClassLoader cl2=new URLClassLoader(new URL[]{embedded2Jar},getClass().getClassLoader());
  Class<?> clsC=cl2.loadClass("org.apache.aries.spifly.impl3.MySPIImpl3");
  EasyMock.expect(implBundle.loadClass("org.apache.aries.spifly.impl3.MySPIImpl3")).andReturn(clsC).anyTimes();
  EasyMock.replay(implBundle);
  assertEquals("Precondition",0,activator.findProviderBundles("org.apache.aries.mytest.MySPI").size());
  List<ServiceRegistration> registrations=customizer.addingBundle(implBundle,null);
  Collection<Bundle> bundles=activator.findProviderBundles("org.apache.aries.mytest.MySPI");
  assertEquals(1,bundles.size());
  assertSame(implBundle,bundles.iterator().next());
  EasyMock.verify(implBC);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.UtilTest </h4><pre class="type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testSetRestoreTCCL(){
  ClassLoader cl=new URLClassLoader(new URL[]{});
  Thread.currentThread().setContextClassLoader(cl);
  Util.storeContextClassloader();
  Thread.currentThread().setContextClassLoader(null);
  Util.restoreContextClassloader();
  assertSame(cl,Thread.currentThread().getContextClassLoader());
}

</code></pre>

<br>
<pre class="type-13 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNotInitialized() throws Exception {
  BaseActivator.activator=null;
  URL url=getClass().getResource("/embedded3.jar");
  assertNotNull("precondition",url);
  Bundle providerBundle=EasyMock.createMock(Bundle.class);
  final ClassLoader providerCL=new TestBundleClassLoader(new URL[]{url},getClass().getClassLoader(),providerBundle);
  EasyMock.expect(providerBundle.getBundleId()).andReturn(42L).anyTimes();
  EasyMock.expect(providerBundle.getEntryPaths((String)EasyMock.anyObject())).andReturn(null).anyTimes();
  Dictionary<String,String> providerHeaders=new Hashtable<String,String>();
  providerHeaders.put(Constants.BUNDLE_CLASSPATH,".,embedded3.jar");
  EasyMock.expect(providerBundle.getHeaders()).andReturn(providerHeaders).anyTimes();
  EasyMock.expect(providerBundle.getResource("embedded3.jar")).andReturn(url).anyTimes();
  providerBundle.loadClass((String)EasyMock.anyObject());
  EasyMock.expectLastCall().andAnswer(new IAnswer<Class<?>>(){
    @Override public Class<?> answer() throws Throwable {
      return providerCL.loadClass((String)EasyMock.getCurrentArguments()[0]);
    }
  }
).anyTimes();
  EasyMock.replay(providerBundle);
  Bundle clientBundle=EasyMock.createMock(Bundle.class);
  EasyMock.replay(clientBundle);
  ClassLoader clientCL=new TestBundleClassLoader(new URL[]{},getClass().getClassLoader(),clientBundle);
  Thread.currentThread().setContextClassLoader(null);
  Util.fixContextClassloader(ServiceLoader.class.getName(),"load",MySPI.class,clientCL);
  assertSame("The system is not yet initialized, so the TCCL should not be set",null,Thread.currentThread().getContextClassLoader());
}

</code></pre>

<br>
<pre class="type-13 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFixContextClassLoaderSimpleViaEmbeddedJar() throws Exception {
  BaseActivator activator=new BaseActivator(){
    public void start(    BundleContext context) throws Exception {
    }
  }
;
  BaseActivator.activator=activator;
  URL url=getClass().getResource("/embedded3.jar");
  assertNotNull("precondition",url);
  Bundle providerBundle=EasyMock.createMock(Bundle.class);
  final ClassLoader providerCL=new TestBundleClassLoader(new URL[]{url},getClass().getClassLoader(),providerBundle);
  EasyMock.expect(providerBundle.getBundleContext()).andThrow(new IllegalStateException("Disable getBundleClassLoaderViaAdapt"));
  EasyMock.expect(providerBundle.getBundleId()).andReturn(42L).anyTimes();
  EasyMock.expect(providerBundle.getEntryPaths((String)EasyMock.anyObject())).andReturn(null).anyTimes();
  Dictionary<String,String> providerHeaders=new Hashtable<String,String>();
  providerHeaders.put(Constants.BUNDLE_CLASSPATH,".,embedded3.jar");
  EasyMock.expect(providerBundle.getHeaders()).andReturn(providerHeaders).anyTimes();
  EasyMock.expect(providerBundle.getResource("embedded3.jar")).andReturn(url).anyTimes();
  providerBundle.loadClass((String)EasyMock.anyObject());
  EasyMock.expectLastCall().andAnswer(new IAnswer<Class<?>>(){
    @Override public Class<?> answer() throws Throwable {
      return providerCL.loadClass((String)EasyMock.getCurrentArguments()[0]);
    }
  }
).anyTimes();
  EasyMock.replay(providerBundle);
  activator.registerProviderBundle(MySPI.class.getName(),providerBundle,new HashMap<String,Object>());
  Bundle clientBundle=EasyMock.createMock(Bundle.class);
  EasyMock.replay(clientBundle);
  ClassLoader clientCL=new TestBundleClassLoader(new URL[]{},getClass().getClassLoader(),clientBundle);
  Thread.currentThread().setContextClassLoader(null);
  Util.fixContextClassloader(ServiceLoader.class.getName(),"load",MySPI.class,clientCL);
  assertSame(providerCL,Thread.currentThread().getContextClassLoader());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.dynamic.ClientWeavingHookGenericCapabilityTest </h4><pre class="type-4 type-5 type-13 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTCCLResettingOnException() throws Exception {
  ClassLoader cl=new URLClassLoader(new URL[]{});
  Thread.currentThread().setContextClassLoader(cl);
  Assert.assertSame("Precondition",cl,Thread.currentThread().getContextClassLoader());
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.CLIENT_REQUIREMENT);
  Bundle providerBundle5=mockProviderBundle("impl5",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle5,new HashMap<String,Object>());
  Bundle consumerBundle=mockConsumerBundle(headers,providerBundle5);
  activator.addConsumerWeavingData(consumerBundle,SpiFlyConstants.REQUIRE_CAPABILITY);
  Bundle spiFlyBundle=mockSpiFlyBundle(consumerBundle,providerBundle5);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("TestClient.class");
  WovenClass wc=new MyWovenClass(clsUrl,"org.apache.aries.spifly.dynamic.TestClient",consumerBundle);
  wh.weave(wc);
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  try {
    method.invoke(cls.newInstance(),"hello");
    Assert.fail("Invocation should have thrown an exception");
  }
 catch (  InvocationTargetException ite) {
    RuntimeException re=(RuntimeException)ite.getCause();
    String msg=re.getMessage();
    Assert.assertEquals("Uh-oh: hello",msg);
    Assert.assertSame(cl,Thread.currentThread().getContextClassLoader());
  }
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTCCLResetting() throws Exception {
  ClassLoader cl=new URLClassLoader(new URL[]{});
  Thread.currentThread().setContextClassLoader(cl);
  Assert.assertSame("Precondition",cl,Thread.currentThread().getContextClassLoader());
  Dictionary<String,String> consumerHeaders=new Hashtable<String,String>();
  consumerHeaders.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.CLIENT_REQUIREMENT);
  Bundle providerBundle=mockProviderBundle("impl1",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle,new HashMap<String,Object>());
  Bundle consumerBundle=mockConsumerBundle(consumerHeaders,providerBundle);
  activator.addConsumerWeavingData(consumerBundle,SpiFlyConstants.REQUIRE_CAPABILITY);
  Bundle spiFlyBundle=mockSpiFlyBundle("spifly",Version.parseVersion("1.9.4"),consumerBundle,providerBundle);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("TestClient.class");
  Assert.assertNotNull("Precondition",clsUrl);
  String clientClassName="org.apache.aries.spifly.dynamic.TestClient";
  WovenClass wc=new MyWovenClass(clsUrl,clientClassName,consumerBundle);
  Assert.assertEquals("Precondition",0,wc.getDynamicImports().size());
  wh.weave(wc);
  Assert.assertEquals(1,wc.getDynamicImports().size());
  String di1="org.apache.aries.spifly;bundle-symbolic-name=spifly;bundle-version=1.9.4";
  String di2="org.apache.aries.spifly;bundle-version=1.9.4;bundle-symbolic-name=spifly";
  String di=wc.getDynamicImports().get(0);
  Assert.assertTrue("Weaving should have added a dynamic import",di1.equals(di) || di2.equals(di));
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  method.invoke(cls.newInstance(),"hi there");
  Assert.assertSame(cl,Thread.currentThread().getContextClassLoader());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.dynamic.ClientWeavingHookTest </h4><pre class="type-4 type-3 type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTCCLResetting() throws Exception {
  ClassLoader cl=new URLClassLoader(new URL[]{});
  Thread.currentThread().setContextClassLoader(cl);
  Assert.assertSame("Precondition",cl,Thread.currentThread().getContextClassLoader());
  Dictionary<String,String> consumerHeaders=new Hashtable<String,String>();
  consumerHeaders.put(SpiFlyConstants.SPI_CONSUMER_HEADER,"*");
  Bundle providerBundle=mockProviderBundle("impl1",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle,new HashMap<String,Object>());
  Bundle consumerBundle=mockConsumerBundle(consumerHeaders,providerBundle);
  activator.addConsumerWeavingData(consumerBundle,SpiFlyConstants.SPI_CONSUMER_HEADER);
  Bundle spiFlyBundle=mockSpiFlyBundle("spifly",Version.parseVersion("1.9.4"),consumerBundle,providerBundle);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("TestClient.class");
  Assert.assertNotNull("Precondition",clsUrl);
  String clientClassName="org.apache.aries.spifly.dynamic.TestClient";
  WovenClass wc=new MyWovenClass(clsUrl,clientClassName,consumerBundle);
  Assert.assertEquals("Precondition",0,wc.getDynamicImports().size());
  wh.weave(wc);
  Assert.assertEquals(1,wc.getDynamicImports().size());
  String di1="org.apache.aries.spifly;bundle-symbolic-name=spifly;bundle-version=1.9.4";
  String di2="org.apache.aries.spifly;bundle-version=1.9.4;bundle-symbolic-name=spifly";
  String di=wc.getDynamicImports().get(0);
  Assert.assertTrue("Weaving should have added a dynamic import",di1.equals(di) || di2.equals(di));
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  method.invoke(cls.newInstance(),"hi there");
  Assert.assertSame(cl,Thread.currentThread().getContextClassLoader());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.core.archive.Aries1453Test </h4><pre class="type-4 type-3 type-7 type-13 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldResolveFragmentHostWithVersionRangeAndMatchWithBundlesInThatRange(){
  FragmentHostHeader header=new FragmentHostHeader("host-bundle;bundle-version=\"[9.6.0,10)\"");
  FragmentHostRequirement requirement=new FragmentHostRequirement(header.getClauses().iterator().next(),null);
  FragmentHostCapability capability=new FragmentHostCapability(new BundleSymbolicNameHeader("host-bundle"),new BundleVersionHeader("9.6.1"),new Resource(){
    @Override public List<Capability> getCapabilities(    String namespace){
      return null;
    }
    @Override public List<Requirement> getRequirements(    String namespace){
      return null;
    }
  }
);
  String filterDirective=requirement.getDirectives().get(Namespace.REQUIREMENT_FILTER_DIRECTIVE);
  SimpleFilter simpleFilter=SimpleFilter.parse(filterDirective);
  CapabilitySet capabilitySet=new CapabilitySet(Arrays.asList(HostNamespace.HOST_NAMESPACE),true);
  capabilitySet.addCapability(capability);
  Set<Capability> capabilities=capabilitySet.match(simpleFilter,true);
  Assert.assertTrue(capabilities.size() == 1);
  Assert.assertSame(capabilities.iterator().next(),capability);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.core.internal.ResolveContextTest </h4><pre class="type-13 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInsertHostedCapability() throws Exception {
  Activator prev=getActivator();
  try {
    Activator activator=createActivator();
    setActivator(activator);
    SubsystemResource res=new SubsystemResource(new File("."));
    ResolveContext rc=new ResolveContext(res);
    HostedCapability hc=EasyMock.createNiceMock(HostedCapability.class);
    List<Capability> caps=new ArrayList<Capability>(){
      @Override public boolean add(      Capability e){
        throw new UnsupportedOperationException();
      }
      @Override public boolean addAll(      Collection<? extends Capability> c){
        throw new UnsupportedOperationException();
      }
      @Override public boolean addAll(      int index,      Collection<? extends Capability> c){
        throw new UnsupportedOperationException();
      }
    }
;
    caps.add(0,EasyMock.createNiceMock(HostedCapability.class));
    assertEquals(1,rc.insertHostedCapability(caps,hc));
    assertSame(hc,caps.get(1));
  }
  finally {
    setActivator(prev);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.AriesSubsystemTest </h4><pre class="type-5 type-13 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testServiceRegistrations(){
  Subsystem root1=null;
  try {
    root1=getRootSubsystem();
  }
 catch (  Exception e) {
    fail(Subsystem.class.getName() + " service not registered");
  }
  AriesSubsystem root2=null;
  try {
    root2=getRootAriesSubsystem();
  }
 catch (  Exception e) {
    fail(AriesSubsystem.class.getName() + " service not registered");
  }
  assertSame("Services should be the same instance",root1,root2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.InstallTest </h4><pre class="type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testReturnExistingSubsystemWithSameLocation() throws Exception {
  Subsystem subsystem1=installSubsystemFromFile("feature3.esa");
  try {
    Subsystem subsystem2=subsystem1.install(subsystem1.getLocation());
    assertSame(subsystem1,subsystem2);
  }
  finally {
    uninstallSubsystemSilently(subsystem1);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1383Test </h4><pre class="type-4 type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test19() throws Exception {
  Subsystem root=getRootSubsystem();
  subsystemEvents.clear();
  Subsystem feature1=installSubsystem(root,"feature1",new SubsystemArchiveBuilder().symbolicName("feature1").type(SubsystemConstants.SUBSYSTEM_TYPE_FEATURE).build());
  try {
    Subsystem feature2=installSubsystem(root,"feature2",new SubsystemArchiveBuilder().symbolicName("feature2").type(SubsystemConstants.SUBSYSTEM_TYPE_FEATURE + ';' + AriesProvisionDependenciesDirective.INSTALL.toString()).build());
    try {
      SubsystemArchiveBuilder applicationArchive=new SubsystemArchiveBuilder().symbolicName("application").type(SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION + ';' + AriesProvisionDependenciesDirective.RESOLVE.toString()+ ';'+ SubsystemConstants.PROVISION_POLICY_DIRECTIVE+ ":="+ SubsystemConstants.PROVISION_POLICY_ACCEPT_DEPENDENCIES).content("bundle1").bundle("bundle1",new BundleArchiveBuilder().symbolicName("bundle1").importPackage("a").build()).bundle("bundle2",new BundleArchiveBuilder().symbolicName("bundle2").exportPackage("a").build());
      Subsystem application1=feature1.install("application",applicationArchive.build());
      Subsystem application2=feature2.install("application",applicationArchive.build());
      assertSame("Wrong subsystem",application1,application2);
      assertEquals("Wrong subsystem",application1,application2);
      assertChild(feature1,"application");
      assertChild(feature2,"application");
      long id=application1.getSubsystemId();
      assertEvent(id,"application",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALLING,subsystemEvents.poll(id,5000),ServiceEvent.REGISTERED);
      assertNull("Unexpected event",subsystemEvents.poll(id,1));
      assertConstituent(application1,"bundle1");
      assertNotConstituent(application1,"bundle2");
      application1.start();
      try {
        assertEvent(id,"application",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALLED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
        assertEvent(id,"application",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.RESOLVING,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
        assertEvent(id,"application",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.RESOLVED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
        assertEvent(id,"application",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.STARTING,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
        assertEvent(id,"application",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.ACTIVE,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
        assertNull("Unexpected event",subsystemEvents.poll(id,1));
        assertConstituent(application1,"bundle2");
      }
  finally {
        stopSubsystemSilently(application1);
      }
    }
  finally {
      uninstallSubsystemSilently(feature2);
    }
  }
  finally {
    uninstallSubsystemSilently(feature1);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.log.LoggerTest </h4><pre class="type-13 type-8 type-16 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLogger3(){
  Logger logger=new Logger(ctx);
  logger.open();
  TestLogService tls=new TestLogService();
  ctx.registerService(LogService.class.getName(),tls,null);
  Assert.assertEquals("Precondition",0,tls.logData.size());
  ServiceReference sr=new MockServiceReference();
  logger.log(sr,LogService.LOG_INFO,"Hi");
  Assert.assertEquals(1,tls.logData.size());
  LogData ld=tls.logData.get(0);
  Assert.assertSame(sr,ld.serviceReference);
  Assert.assertEquals(LogService.LOG_INFO,ld.level);
  Assert.assertEquals("Hi",ld.message);
}

</code></pre>

<br>
<pre class="type-13 type-8 type-16 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLogger4(){
  Logger logger=new Logger(ctx);
  logger.open();
  TestLogService tls=new TestLogService();
  ctx.registerService(LogService.class.getName(),tls,null);
  Assert.assertEquals("Precondition",0,tls.logData.size());
  ServiceReference sr=new MockServiceReference();
  Throwable th=new Throwable();
  logger.log(sr,LogService.LOG_INFO,"Hi",th);
  Assert.assertEquals(1,tls.logData.size());
  LogData ld=tls.logData.get(0);
  Assert.assertSame(sr,ld.serviceReference);
  Assert.assertEquals(LogService.LOG_INFO,ld.level);
  Assert.assertEquals("Hi",ld.message);
  Assert.assertEquals(th,ld.throwable);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.manifest.ManifestHeaderProcessorTest </h4><pre class="type-7 type-13 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNameValuePair() throws Exception {
  HashMap<String,String> attrs=new HashMap<String,String>();
  attrs.put("some","value");
  NameValuePair nvp=new NameValuePair("key",attrs);
  assertEquals("The name value pair is not set properly.",nvp.getName(),"key");
  assertEquals("The value is not set properly.",nvp.getAttributes().get("some"),"value");
  attrs=new HashMap<String,String>();
  attrs.put("some","value");
  NameValuePair anotherNvp=new NameValuePair("key",attrs);
  assertEquals("The two objects of NameValuePair is not equal.",nvp,anotherNvp);
  nvp.setName("newKey");
  attrs=new HashMap<String,String>();
  attrs.put("some","newValue");
  nvp.setAttributes(attrs);
  assertEquals("The name value pair is not set properly.",nvp.getName(),"newKey");
  assertEquals("The value is not set properly.",nvp.getAttributes().get("some"),"newValue");
  Map<String,String> nvm1=new HashMap<String,String>();
  nvm1.put("a","b");
  nvm1.put("c","d");
  Map<String,String> nvm2=new HashMap<String,String>();
  nvm2.put("c","d");
  nvm2.put("a","b");
  assertEquals("The maps are not equal.",nvm1,nvm2);
  nvm2.put("e","f");
  assertNotSame("The maps are the same.",nvm1,nvm2);
  NameValuePair nvp1=new NameValuePair("one",nvm1);
  NameValuePair nvp2=new NameValuePair("one",nvm2);
  assertNotSame("The pairs are identical ",nvp1,nvp2);
  nvm1.put("e","f");
  assertEquals("The pairs are not equal.",nvp1,nvp2);
  List<NameValuePair> bundleInfoList1=new ArrayList<NameValuePair>();
  bundleInfoList1.add(nvp1);
  List<NameValuePair> bundleInfoList2=new ArrayList<NameValuePair>();
  bundleInfoList2.add(nvp1);
  bundleInfoList1.removeAll(bundleInfoList2);
  assertEquals("The List should be empty",bundleInfoList1.isEmpty(),true);
  assertNotSame("The two objects of NameValuePair is not equal.",nvp,anotherNvp);
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
