<h3><span class=" glyphicon glyphicon-tag"/>&nbspUtilityVerifier</h3><kbd>Verifies (un)successful execution of the test case by reporting explicitly a failure</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.aries.ant.taskdefs.EsaTaskTest </h4><pre class="type-4 type-5 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void generateArchiveNoManifest(){
  File srcDir=new File("../src/test/resources");
  File destfile=new File("target/esa-test1.esa");
  if (destfile.exists()) {
    destfile.delete();
  }
  assertFalse(destfile.exists());
  EsaTask esaTask=new EsaTask();
  Project testProject=new Project();
  esaTask.setProject(testProject);
  FileSet fileSet=new FileSet();
  fileSet.setDir(srcDir);
  fileSet.setIncludes("*.jar");
  esaTask.addFileset(fileSet);
  esaTask.setDestFile(destfile);
  esaTask.setSymbolicName("esatask-test");
  esaTask.setVersion("1.0.0");
  esaTask.execute();
  assertTrue(destfile.exists());
  try {
    ZipFile esaArchive=new ZipFile(destfile);
    assertNotNull(esaArchive);
    ZipEntry subsystemManifest=esaArchive.getEntry("OSGI-INF/SUBSYSTEM.MF");
    assertNull(subsystemManifest);
  }
 catch (  IOException e) {
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void generateArchiveWithFileManifest(){
  File srcDir=new File("../src/test/resources");
  File destfile=new File("target/esa-test2.esa");
  if (destfile.exists()) {
    destfile.delete();
  }
  assertFalse(destfile.exists());
  EsaTask esaTask=new EsaTask();
  Project testProject=new Project();
  esaTask.setProject(testProject);
  FileSet fileSet=new FileSet();
  fileSet.setDir(srcDir);
  fileSet.setIncludes("*.jar");
  esaTask.addFileset(fileSet);
  esaTask.setDestFile(destfile);
  esaTask.setSymbolicName("esatask-test");
  esaTask.setVersion("1.0.0");
  esaTask.setManifest(new File(srcDir,"SUBSYSTEM.MF"));
  esaTask.execute();
  assertTrue(destfile.exists());
  try {
    ZipFile esaArchive=new ZipFile(destfile);
    assertNotNull(esaArchive);
    ZipEntry subsystemManifest=esaArchive.getEntry("OSGI-INF/SUBSYSTEM.MF");
    assertNotNull(subsystemManifest);
  }
 catch (  IOException e) {
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void generateArchiveWithNewManifest(){
  File srcDir=new File("../src/test/resources");
  assertTrue(srcDir.exists());
  File destfile=new File("target/esa-test.esa");
  if (destfile.exists()) {
    destfile.delete();
  }
  assertFalse(destfile.exists());
  EsaTask esaTask=new EsaTask();
  Project testProject=new Project();
  esaTask.setProject(testProject);
  FileSet fileSet=new FileSet();
  fileSet.setDir(srcDir);
  fileSet.setIncludes("*.jar");
  esaTask.addFileset(fileSet);
  esaTask.setDestFile(destfile);
  esaTask.setSymbolicName("esatask-test");
  esaTask.setName("ESA Test Task");
  esaTask.setVersion("1.0.0");
  esaTask.setGenerateManifest(true);
  esaTask.execute();
  assertTrue(destfile.exists());
  try {
    ZipFile esaArchive=new ZipFile(destfile);
    assertNotNull(esaArchive);
    ZipEntry subsystemManifest=esaArchive.getEntry("OSGI-INF/SUBSYSTEM.MF");
    assertNotNull(subsystemManifest);
  }
 catch (  IOException e) {
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.deployment.management.DeploymentGeneratorTest </h4><pre class="type-5 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkBasicCircularDependenciesDetected() throws Exception {
  Collection<ModelledResource> cmr=new ArrayList<ModelledResource>();
  ExportedPackage testIsolatedPkg=createExportedPackage("test.isolated","1.0.0",new String[]{"test.shared"},new String[]{"test.isolated.pkg"});
  cmr.add(testIsolatedPkg.getBundle());
  ExportedPackage testSharedPkg=createExportedPackage("test.shared","1.0.0",new String[]{"test.isolated.pkg"},new String[]{"test.shared"});
  cmr.add(testSharedPkg.getBundle());
  _resolver.addResult(cmr);
  _resolver.addResult(cmr);
  Skeleton.getSkeleton(appMetadata).setReturnValue(new MethodCall(ApplicationMetadata.class,"getApplicationContents"),Arrays.asList(mockContent("test.isolated","1.0.0")));
  try {
    DeployedBundles deployedBundles=deplMFMgr.generateDeployedBundles(appMetadata,new ArrayList<ModelledResource>(),new ArrayList<Content>());
    deplMFMgr.generateDeploymentManifest(appMetadata.getApplicationSymbolicName(),appMetadata.getApplicationVersion().toString(),deployedBundles);
  }
 catch (  ResolverException rx) {
    List<String> usr=rx.getUnsatisfiedRequirements();
    assertEquals("One unsatisfied requirement expected, not " + usr.size(),usr.size(),1);
    String chkMsg="Shared bundle test.shared_1.0.0 has a dependency for package " + "test.shared which is exported from application bundle [test.isolated_1.0.0]";
    assertTrue(chkMsg + " expected, not " + usr,usr.contains(chkMsg));
    return;
  }
  fail("ResolverException expected");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void checkBundleInAppContentAndProvisionContent() throws Exception {
  List<ModelledResource> cmr=new ArrayList<ModelledResource>();
  cmr.add(createModelledResource("test.api","1.1.0",Collections.<String>emptyList(),Arrays.asList("test.api.pack;version=1.1.0")));
  cmr.add(createModelledResource("test.api","1.0.0",Collections.<String>emptyList(),Arrays.asList("test.api.pack;version=1.0.0")));
  cmr.add(createModelledResource("test.consumer","1.0.0",Arrays.asList("test.api.pack;version=\"[1.0.0,2.0.0)\""),Collections.<String>emptyList()));
  cmr.add(createModelledResource("test.provider","1.0.0",Arrays.asList("test.api.pack;version=\"[1.0.0,1.1.0)\""),Collections.<String>emptyList()));
  _resolver.addResult(cmr);
  Skeleton.getSkeleton(appMetadata).setReturnValue(new MethodCall(ApplicationMetadata.class,"getApplicationContents"),Arrays.asList(mockContent("test.api","1.1.0"),mockContent("test.consumer","1.0.0"),mockContent("test.provider","1.0.0")));
  app=Skeleton.newMock(AriesApplication.class);
  Skeleton.getSkeleton(app).setReturnValue(new MethodCall(AriesApplication.class,"getApplicationMetadata"),appMetadata);
  try {
    DeployedBundles deployedBundles=deplMFMgr.generateDeployedBundles(appMetadata,Arrays.asList(new ModelledResource[]{cmr.get(0),cmr.get(2),cmr.get(3)}),new ArrayList<Content>());
    deplMFMgr.generateDeploymentManifest(appMetadata.getApplicationSymbolicName(),appMetadata.getApplicationVersion().toString(),deployedBundles);
    fail("Expected exception because we can't provision an isolated bundle twice");
  }
 catch (  ResolverException rx) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.management.impl.AriesApplicationManagerImplTest </h4><pre class="type-4 type-5 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFailedUpdate() throws Exception {
  AriesApplication app=createApplication(TEST_EBA);
  DeploymentMetadata depMf=createUpdateDepMf();
  AriesApplicationContext ctx=Skeleton.newMock(AriesApplicationContext.class);
  Skeleton.getSkeleton(ctx).setReturnValue(new MethodCall(AriesApplicationContext.class,"getApplication"),app);
  AriesApplicationContextManager ctxMgr=Skeleton.newMock(AriesApplicationContextManager.class);
  Skeleton.getSkeleton(ctxMgr).setReturnValue(new MethodCall(AriesApplicationContextManager.class,"getApplicationContexts"),Collections.singleton(ctx));
  Skeleton.getSkeleton(ctxMgr).setThrows(new MethodCall(AriesApplicationContextManager.class,"update",AriesApplication.class,DeploymentMetadata.class),new UpdateException("",null,false,null));
  _appMgr.setApplicationContextManager(ctxMgr);
  try {
    _appMgr.update(app,depMf);
    fail("Update should have failed.");
  }
 catch (  UpdateException e) {
    assertTrue("Deployment.mf should have been updated",app.getDeploymentMetadata() == depMf);
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRolledbackUpdate() throws Exception {
  AriesApplication app=createApplication(TEST_EBA);
  DeploymentMetadata depMf=createUpdateDepMf();
  DeploymentMetadata oldMf=app.getDeploymentMetadata();
  AriesApplicationContext ctx=Skeleton.newMock(AriesApplicationContext.class);
  Skeleton.getSkeleton(ctx).setReturnValue(new MethodCall(AriesApplicationContext.class,"getApplication"),app);
  AriesApplicationContextManager ctxMgr=Skeleton.newMock(AriesApplicationContextManager.class);
  Skeleton.getSkeleton(ctxMgr).setReturnValue(new MethodCall(AriesApplicationContextManager.class,"getApplicationContexts"),Collections.singleton(ctx));
  Skeleton.getSkeleton(ctxMgr).setThrows(new MethodCall(AriesApplicationContextManager.class,"update",AriesApplication.class,DeploymentMetadata.class),new UpdateException("",null,true,null));
  _appMgr.setApplicationContextManager(ctxMgr);
  try {
    _appMgr.update(app,depMf);
    fail("Update should have failed.");
  }
 catch (  UpdateException e) {
    assertTrue("Deployment.mf should have been rolled back to the old",app.getDeploymentMetadata() == oldMf);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.modelling.utils.DeployedBundlesTest </h4><pre class="type-5 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetImportPackage_InvalidDuplicates() throws Exception {
  DeployedBundles deployedBundles=getSimpleDeployedBundles(ternary.CONTENT,ternary.CONTENT,ternary.NONE);
  deployedBundles.addBundle(createModelledResource("bundle.a","1.0.0",Arrays.asList("package.c;version=\"[1.0.0,2.0.0)\""),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.b","1.0.0",Arrays.asList("package.c;version=2.0.0"),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.c","1.0.0",new ArrayList<String>(),Arrays.asList("package.c;version=2.0.0;was_internal=true")));
  String importPackageEntry=null;
  try {
    importPackageEntry=deployedBundles.getImportPackage();
    Assert.fail("Expected exception. ImportPackage=" + importPackageEntry);
  }
 catch (  ResolverException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRequiredUseBundle_Valid() throws Exception {
  DeployedBundles deployedBundles=validDeployedBundles();
  packagesResolve(deployedBundles);
  Collection<ModelledResource> requiredUseBundle=null;
  try {
    requiredUseBundle=deployedBundles.getRequiredUseBundle();
  }
 catch (  ResolverException e) {
    e.printStackTrace();
    Assert.fail(e.toString());
  }
  Assert.assertTrue("RequiredUseBundle=" + requiredUseBundle,requiredUseBundle.size() == 2);
}

</code></pre>

<br>
<pre class="type-5 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetImportPackage_rfc138PreventsBundleSymbolicNameWorking() throws Exception {
  DeployedBundles deployedBundles=getSimpleDeployedBundles(ternary.CONTENT,ternary.USES,ternary.NONE);
  deployedBundles.addBundle(createModelledResource("bundle.a","1.0.0",Arrays.asList("package.b;version=1.0.0;bundle-symbolic-name=bundle.b"),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.b","1.0.0",new ArrayList<String>(),Arrays.asList("package.b;version=2.0.0")));
  String importPackageEntry=null;
  try {
    importPackageEntry=deployedBundles.getImportPackage();
    Assert.fail("Expected exception. ImportPackage=" + importPackageEntry);
  }
 catch (  ResolverException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetImportPackage_ValidResolutionAttribute() throws Exception {
  DeployedBundles deployedBundles=getSimpleDeployedBundles(ternary.CONTENT,ternary.CONTENT,ternary.NONE);
  deployedBundles.addBundle(createModelledResource("bundle.a","1.0.0",Arrays.asList("package.c;version=1.0.0;resolution:=optional"),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.b","1.0.0",Arrays.asList("package.c;version=1.0.0"),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.c","1.0.0",new ArrayList<String>(),Arrays.asList("package.c;version=1.0.0")));
  String importPackageEntry=null;
  try {
    importPackageEntry=deployedBundles.getImportPackage();
  }
 catch (  ResolverException e) {
    e.printStackTrace();
    Assert.fail(e.toString());
  }
  String expectedResult="package.c;version=1.0.0";
  Assert.assertTrue("ImportPackage=" + importPackageEntry,isEqual(importPackageEntry,expectedResult));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetImportPackage_ValidDuplicatesWithAttributes() throws Exception {
  DeployedBundles deployedBundles=getSimpleDeployedBundles(ternary.CONTENT,ternary.CONTENT,ternary.NONE);
  deployedBundles.addBundle(createModelledResource("bundle.a","1.0.0",Arrays.asList("package.c;version=1.0.0;was_internal=true"),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.b","1.0.0",Arrays.asList("package.c;version=2.0.0;was_internal=true"),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.c","1.0.0",new ArrayList<String>(),Arrays.asList("package.c;version=2.0.0;was_internal=true")));
  String importPackageEntry=null;
  try {
    importPackageEntry=deployedBundles.getImportPackage();
  }
 catch (  ResolverException e) {
    e.printStackTrace();
    Assert.fail(e.toString());
  }
  String expectedResult="package.c;was_internal=\"true\";version=\"2.0.0\"";
  Assert.assertTrue("ImportPackage=" + importPackageEntry,isEqual(importPackageEntry,expectedResult));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetImportPackage_Valid() throws Exception {
  String importPackageEntry=null;
  try {
    DeployedBundles deployedBundles=validDeployedBundles();
    packagesResolve(deployedBundles);
    importPackageEntry=deployedBundles.getImportPackage();
  }
 catch (  ResolverException e) {
    e.printStackTrace();
    Assert.fail(e.toString());
  }
  String expectedResult="package.c;version=\"1.0.0\";bundle-symbolic-name=\"bundle.c\";bundle-version=\"[1.0.0,1.0.0]\"," + "package.d;version=\"1.0.0\";bundle-symbolic-name=\"bundle.d\";bundle-version=\"[1.0.0,1.0.0]\"," + "package.e;version=\"[1.0.0,2.0.0)\","+ "package.g;version=\"0.0.0\"";
  Assert.assertTrue("ImportPackage=" + importPackageEntry,isEqual(importPackageEntry,expectedResult));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetImportPackage_bundleSymbolicNameOK() throws Exception {
  DeployedBundles deployedBundles=getSimpleDeployedBundles(ternary.CONTENT,ternary.CONTENT,ternary.NONE);
  deployedBundles.addBundle(createModelledResource("bundle.a","1.0.0",Arrays.asList("package.b;version=1.0.0;bundle-symbolic-name=bundle.b;bundle-version=\"[1.0.0,2.0.0)\""),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.b","1.0.0",new ArrayList<String>(),Arrays.asList("package.b;version=2.0.0")));
  String importPackageEntry=null;
  try {
    importPackageEntry=deployedBundles.getImportPackage();
  }
 catch (  ResolverException e) {
    e.printStackTrace();
    Assert.fail(e.toString());
  }
  String expectedResult="";
  Assert.assertTrue("ImportPackage=" + importPackageEntry,isEqual(importPackageEntry,expectedResult));
}

</code></pre>

<br>
<pre class="type-5 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetImportPackage_InvalidDuplicatesWithAttributes() throws Exception {
  DeployedBundles deployedBundles=getSimpleDeployedBundles(ternary.CONTENT,ternary.CONTENT,ternary.NONE);
  deployedBundles.addBundle(createModelledResource("bundle.a","1.0.0",Arrays.asList("package.c;version=1.0.0;was_internal=true"),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.b","1.0.0",Arrays.asList("package.c;version=2.0.0"),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.c","1.0.0",new ArrayList<String>(),Arrays.asList("package.c;version=2.0.0;was_internal=true")));
  String importPackageEntry=null;
  try {
    importPackageEntry=deployedBundles.getImportPackage();
    Assert.fail("Expected exception. ImportPackage=" + importPackageEntry);
  }
 catch (  ResolverException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetImportPackage_ValidDuplicates() throws Exception {
  DeployedBundles deployedBundles=getSimpleDeployedBundles(ternary.CONTENT,ternary.CONTENT,ternary.CONTENT);
  deployedBundles.addBundle(createModelledResource("bundle.a","1.0.0",Arrays.asList("package.d;version=\"[1.0.0,3.0.0)\""),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.b","1.0.0",Arrays.asList("package.d;version=\"2.0.0\""),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.c","1.0.0",Arrays.asList("package.d;version=\"1.0.0\""),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.d","1.0.0",new ArrayList<String>(),Arrays.asList("package.d;version=2.0.1")));
  String importPackageEntry=null;
  try {
    importPackageEntry=deployedBundles.getImportPackage();
  }
 catch (  ResolverException e) {
    e.printStackTrace();
    Assert.fail(e.toString());
  }
  String expectedResult="package.d;version=\"[2.0.0,3.0.0)\"";
  Assert.assertTrue("ImportPackage=" + importPackageEntry,isEqual(importPackageEntry,expectedResult));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRequiredUseBundle_RedundantEntry() throws Exception {
  DeployedBundles deployedBundles=getSimpleDeployedBundles(ternary.CONTENT,ternary.USES,ternary.USES);
  deployedBundles.addBundle(createModelledResource("bundle.a","1.0.0",Arrays.asList("package.b"),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.b","1.0.0",Arrays.asList("package.c"),Arrays.asList("package.b;version=1.0.0")));
  deployedBundles.addBundle(createModelledResource("bundle.c","1.0.0",Arrays.asList("package.b;version=1.0.0"),Arrays.asList("package.c;version=1.0.0")));
  Collection<ModelledResource> requiredUseBundle=null;
  try {
    requiredUseBundle=deployedBundles.getRequiredUseBundle();
  }
 catch (  ResolverException e) {
    e.printStackTrace();
    Assert.fail(e.toString());
  }
  Assert.assertTrue("RequiredUseBundle=" + requiredUseBundle,requiredUseBundle.size() == 1);
}

</code></pre>

<br>
<pre class="type-5 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetImportPackage_InvalidBundleVersion() throws Exception {
  DeployedBundles deployedBundles=getSimpleDeployedBundles(ternary.CONTENT,ternary.USES,ternary.NONE);
  deployedBundles.addBundle(createModelledResource("bundle.a","1.0.0",Arrays.asList("package.b;version=\"[1.0.0,1.0.0]\";bundle-symbolic-name=bundle.b;bundle-version=\"[0.0.0,1.0.0)\""),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.b","1.0.0",new ArrayList<String>(),Arrays.asList("package.b;version=1.0.0")));
  String importPackageEntry=null;
  try {
    importPackageEntry=deployedBundles.getImportPackage();
    Assert.fail("Expected exception. ImportPackage=" + importPackageEntry);
  }
 catch (  ResolverException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetImportPackage_rfc138PreventsBundleVersionWorking() throws Exception {
  DeployedBundles deployedBundles=getSimpleDeployedBundles(ternary.CONTENT,ternary.NONE,ternary.NONE);
  deployedBundles.addBundle(createModelledResource("bundle.a","1.0.0",Arrays.asList("package.b;version=1.0.0;bundle-version=1.0.0"),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.b","1.0.0",new ArrayList<String>(),Arrays.asList("package.b;version=2.0.0")));
  String importPackageEntry=null;
  try {
    importPackageEntry=deployedBundles.getImportPackage();
    Assert.fail("Expected exception. ImportPackage=" + importPackageEntry);
  }
 catch (  ResolverException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.modelling.utils.PackageRequirementMergerTest </h4><pre class="type-5 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMergeInvalid() throws Exception {
  Collection<ImportedPackage> reqs=new ArrayList<ImportedPackage>();
  reqs.add(newImportedPackage("a","[1.0.0,2.0.0]"));
  reqs.add(newImportedPackage("a","[3.0.0,3.0.0]"));
  reqs.add(newImportedPackage("b","1.0.0"));
  reqs.add(newImportedPackage("b","2.0.0"));
  reqs.add(newImportedPackage("c","[1.0.0,2.0.0)"));
  reqs.add(newImportedPackage("c","2.0.0"));
  PackageRequirementMerger merger=new PackageRequirementMerger(reqs);
  Assert.assertFalse(merger.isMergeSuccessful());
  try {
    merger.getMergedRequirements();
    Assert.fail("getMergedRequirements should throw IllegalStateException.");
  }
 catch (  IllegalStateException e) {
  }
  Set<String> result=merger.getInvalidRequirements();
  Set<String> expected=new HashSet<String>();
  expected.add("a");
  expected.add("c");
  Assert.assertEquals(expected,result);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMergeInvalidAdditionalAttributes() throws Exception {
  Collection<ImportedPackage> reqs=new ArrayList<ImportedPackage>();
  reqs.add(newImportedPackage("a","1.0.0","foo=bar"));
  reqs.add(newImportedPackage("a","2.0.0","foo=blah"));
  reqs.add(newImportedPackage("b","1.0.0"));
  PackageRequirementMerger merger=new PackageRequirementMerger(reqs);
  Assert.assertFalse(merger.isMergeSuccessful());
  try {
    merger.getMergedRequirements();
    Assert.fail("getMergedRequirements should throw IllegalStateException.");
  }
 catch (  IllegalStateException e) {
  }
  Set<String> result=merger.getInvalidRequirements();
  Set<String> expected=new HashSet<String>();
  expected.add("a");
  Assert.assertEquals(expected,result);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.runtime.framework.management.BundleFrameworkManagerTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testFailedInstall() throws Exception {
  BundleFramework fwk=Skeleton.newMock(new Object(){
    public Bundle install(    BundleSuggestion suggestion,    AriesApplication app) throws BundleException {
      throw new BundleException("Expected failure");
    }
  }
,BundleFramework.class);
  frameworkFactory.setReturnValue(new MethodCall(BundleFrameworkFactory.class,"createBundleFramework",BundleContext.class,BundleFrameworkConfiguration.class),fwk);
  try {
    sut.installIsolatedBundles(Arrays.asList(Skeleton.newMock(BundleSuggestion.class)),Skeleton.newMock(AriesApplication.class));
    fail("Expected a BundleException");
  }
 catch (  BundleException be) {
    Skeleton.getSkeleton(fwk).assertCalled(new MethodCall(BundleFramework.class,"close"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.utils.manifest.ManifestProcessorTest </h4><pre class="type-12 type-5 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check metadata can be extracted from a simple manifest.
 */
@Test public void testManifestMetadata() throws Exception {
  ApplicationMetadataFactoryImpl manager=new ApplicationMetadataFactoryImpl();
  InputStream in=getClass().getClassLoader().getResourceAsStream("META-INF/APPLICATION.MF");
  ApplicationMetadata am=manager.parseApplicationMetadata(in);
  assertNotNull(am);
  assertEquals(am.getApplicationName(),appName);
  List<Content> contents=am.getApplicationContents();
  for (  Content content : contents) {
    if ("com.travel.reservation.web".equals(content.getContentName())) {
      VersionRange vr=content.getVersion();
      assertEquals(vr.getMinimumVersion(),new Version("1.1.0"));
      assertEquals(vr.getMaximumVersion(),new Version("1.2.0"));
    }
 else     if ("com.travel.reservation.business".equals(content.getContentName())) {
      VersionRange vr=content.getVersion();
      assertEquals(new Version(0,0,0),vr.getMinimumVersion());
    }
 else     fail("Unexepcted content name " + content.getContentName());
  }
}

</code></pre>

<br>
<pre class="type-12 type-5 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check metadata can be extracted from a manifest that uses multiple lines
 * for a single manifest attribute.
 */
@Test public void testManifestMetadataWithMultiLineEntries() throws Exception {
  ApplicationMetadataFactoryImpl manager=new ApplicationMetadataFactoryImpl();
  InputStream in=getClass().getClassLoader().getResourceAsStream("META-INF/APPLICATION2.MF");
  ApplicationMetadata am=manager.parseApplicationMetadata(in);
  assertNotNull(am);
  assertEquals(am.getApplicationName(),appName);
  List<Content> contents=am.getApplicationContents();
  for (  Content content : contents) {
    if ("com.travel.reservation.web".equals(content.getContentName())) {
      VersionRange vr=content.getVersion();
      assertEquals(vr.getMinimumVersion(),new Version("1.1.0"));
      assertEquals(vr.getMaximumVersion(),new Version("1.2.0"));
    }
 else     if ("com.travel.reservation.business".equals(content.getContentName())) {
      VersionRange vr=content.getVersion();
      assertEquals(new Version(0,0,0),vr.getMinimumVersion());
    }
 else     fail("Unexepcted content name " + content.getContentName());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.async.promise.test.ChainTest </h4><pre class="type-5 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThenFail() throws Exception {
  Deferred<String> def=new Deferred<String>();
  final Promise<String> promise=def.getPromise();
  Promise<String> chain=promise.then(null,new Failure(){
    @Override public void fail(    Promise<?> resolved) throws Exception {
    }
  }
);
  assertFalse("chain not resolved",chain.isDone());
  Throwable failure=new Throwable("fail!");
  def.fail(failure);
  assertTrue("chain resolved",chain.isDone());
  assertEquals("chain failure matches",failure,chain.getFailure());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThenFailNoCallback() throws Exception {
  Deferred<String> def=new Deferred<String>();
  final Promise<String> promise=def.getPromise();
  Promise<String> chain=promise.then(null);
  assertFalse("chain not resolved",chain.isDone());
  Throwable failure=new Throwable("fail!");
  def.fail(failure);
  assertTrue("chain resolved",chain.isDone());
  assertEquals("chain failure matches",failure,chain.getFailure());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThenFailException() throws Exception {
  Deferred<String> def=new Deferred<String>();
  final Promise<String> promise=def.getPromise();
  final Exception thenException=new Exception("eek!");
  Promise<String> chain=promise.then(null,new Failure(){
    @Override public void fail(    Promise<?> resolved) throws Exception {
      throw thenException;
    }
  }
);
  assertFalse("chain not resolved",chain.isDone());
  def.fail(new Throwable("failed"));
  assertTrue("chain resolved",chain.isDone());
  assertEquals("chain failure matches",thenException,chain.getFailure());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.async.promise.test.DeferredTest </h4><pre class="type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveWithAlreadyFailed() throws Exception {
  Deferred<String> def=new Deferred<String>();
  Deferred<String> with=new Deferred<String>();
  Promise<Void> resolvedWith=def.resolveWith(with.getPromise());
  def.resolve("Already resolved");
  with.fail(new Throwable("failed"));
  @SuppressWarnings({"not thrown","all"}) Throwable failure=resolvedWith.getFailure();
  assertTrue("resolveWith IllegalStateException",failure instanceof IllegalStateException);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolve() throws Exception {
  Deferred<String> def=new Deferred<String>();
  Promise<String> promise=def.getPromise();
  assertFalse("Initial Promise not resolved",promise.isDone());
  def.resolve("Hello");
  assertTrue("Promise resolved",promise.isDone());
  assertEquals("Value matches","Hello",promise.getValue());
  assertNull("Failure is null",promise.getFailure());
  try {
    def.resolve("Again");
    fail("Already resolved didn't throw IllegalStateException");
  }
 catch (  IllegalStateException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveWithFailure() throws Exception {
  Deferred<String> def=new Deferred<String>();
  Promise<String> promise=def.getPromise();
  Deferred<String> def2=new Deferred<String>();
  Promise<String> promise2=def2.getPromise();
  Promise<Void> with=def.resolveWith(promise2);
  Exception failure=new Exception("resolveWithFailure");
  def2.fail(failure);
  assertTrue("Promise resolved",promise.isDone());
  assertEquals("Failure matches",failure,promise.getFailure());
  assertNull("resolveWith null",with.getValue());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFail() throws Exception {
  Deferred<String> def=new Deferred<String>();
  Promise<String> promise=def.getPromise();
  Exception failure=new Exception("Oops");
  def.fail(failure);
  assertTrue("Promise resolved",promise.isDone());
  assertEquals("Failure matches",failure,promise.getFailure());
  try {
    promise.getValue();
    fail("getValue didn't throw InvocationTargetException");
  }
 catch (  InvocationTargetException e) {
    assertEquals("Failure matches",failure,e.getCause());
  }
  try {
    def.fail(failure);
    fail("Already failed didn't throw IllegalStateException");
  }
 catch (  IllegalStateException e) {
    assertNotNull(e);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.container.BeanRecipeTest </h4><pre class="type-5 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void protectedClassAccess() throws Exception {
  BlueprintContainerImpl container=new BlueprintContainerImpl(null,null,null,null,null,null,null,null,null,null);
  BeanRecipe recipe=new BeanRecipe("a",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory().create()));
  recipe.setFactoryMethod("getA");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
  recipe=new BeanRecipe("b",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory().create()));
  recipe.setFactoryMethod("getB");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
  recipe=new BeanRecipe("c",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory().create()));
  recipe.setFactoryMethod("getC");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
  recipe=new BeanRecipe("d",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory().create()));
  recipe.setFactoryMethod("getD");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  try {
    assertNotNull(recipe.create());
    fail("Should have thrown an exception");
  }
 catch (  ComponentDefinitionException e) {
  }
  recipe=new BeanRecipe("a",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory()));
  recipe.setFactoryMethod("create");
  recipe.setProperty("a","a");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
  recipe=new BeanRecipe("b",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory()));
  recipe.setFactoryMethod("create");
  recipe.setProperty("b","b");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
  recipe=new BeanRecipe("c",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory()));
  recipe.setFactoryMethod("create");
  recipe.setProperty("c","c");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
  recipe=new BeanRecipe("d",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory()));
  recipe.setFactoryMethod("create");
  recipe.setProperty("d","d");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  try {
    assertNotNull(recipe.create());
    fail("Should have thrown an exception");
  }
 catch (  ComponentDefinitionException e) {
  }
  recipe=new BeanRecipe("a",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory()));
  recipe.setFactoryMethod("create");
  recipe.setInitMethod("init");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.MultiInterfacesTest </h4><pre class="type-5 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiInterfaceReferences() throws Exception {
  startBundleBlueprint("org.apache.aries.blueprint.testbundlea");
  BlueprintContainer beanContainer=startBundleBlueprint("org.apache.aries.blueprint.testbundleb");
  Object obj1=beanContainer.getComponentInstance("OnlyA");
  Object obj2=beanContainer.getComponentInstance("AandB");
  Object obj3=beanContainer.getComponentInstance("AandBandC");
  Object obj4=beanContainer.getComponentInstance("AandBandCandD");
  assertEquals("A",((InterfaceA)obj1).methodA());
  assertEquals("A",((InterfaceA)obj2).methodA());
  assertEquals("A",((InterfaceA)obj3).methodA());
  assertEquals("B",((InterfaceB)obj2).methodB());
  assertEquals("C",((InterfaceC)obj3).methodC());
  assertFalse(obj1 instanceof InterfaceC);
  assertFalse(obj2 instanceof InterfaceC);
  assertFalse(obj1 instanceof InterfaceB);
  assertTrue(obj4 instanceof InterfaceD);
  try {
    ((InterfaceD)obj4).methodD();
    fail("This should not work");
  }
 catch (  org.osgi.service.blueprint.container.ServiceUnavailableException t) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.SpringExtenderTest </h4><pre class="type-5 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSpringBundle() throws Exception {
  try {
    context().getService(BeanCItf.class,1);
    fail("The service should not be registered");
  }
 catch (  RuntimeException e) {
  }
  Bundle bundles=context().getBundleByName("org.apache.aries.blueprint.testbundlee");
  assertNotNull(bundles);
  bundles.start();
  BlueprintContainer container=startBundleBlueprint("org.apache.aries.blueprint.testbundlee");
  assertNotNull(container);
  BeanCItf beanC1=context().getService(BeanCItf.class,"(name=BeanC-1)");
  assertEquals(1,beanC1.getInitialized());
  BeanCItf beanC2=context().getService(BeanCItf.class,"(name=BeanC-2)");
  assertEquals(1,beanC2.getInitialized());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.SpringTest </h4><pre class="type-4 type-5 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSpringBundle() throws Exception {
  Bundle bundles=context().getBundleByName("org.apache.aries.blueprint.testbundles");
  assertNotNull(bundles);
  bundles.start();
  BlueprintContainer container=startBundleBlueprint("org.apache.aries.blueprint.testbundles");
  List list=(List)container.getComponentInstance("springList");
  System.out.println(list);
  BeanCItf beanC=(BeanCItf)list.get(4);
  assertEquals(1,beanC.getInitialized());
  try {
    beanC.doSomething();
    fail("Should have thrown an exception because the transaction manager is not defined");
  }
 catch (  NoSuchBeanDefinitionException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.TestReferences </h4><pre class="type-5 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("rawtypes") @Test public void testUnaryReference() throws Exception {
  BlueprintContainer blueprintContainer=Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.blueprint.sample");
  assertNotNull(blueprintContainer);
  BindingListener listener=(BindingListener)blueprintContainer.getComponentInstance("bindingListener");
  assertNull(listener.getA());
  assertNull(listener.getReference());
  InterfaceA a=(InterfaceA)blueprintContainer.getComponentInstance("ref2");
  try {
    a.hello("world");
    fail("A ServiceUnavailableException should have been thrown");
  }
 catch (  ServiceUnavailableException e) {
  }
  ServiceRegistration reg1=bundleContext.registerService(InterfaceA.class.getName(),new InterfaceA(){
    public String hello(    String msg){
      return "Hello " + msg + "!";
    }
  }
,null);
  waitForAsynchronousHandling();
  assertNotNull(listener.getA());
  assertNotNull(listener.getReference());
  assertEquals("Hello world!",a.hello("world"));
  Hashtable<String,Object> props=new Hashtable<String,Object>();
  props.put(Constants.SERVICE_RANKING,Integer.valueOf(1));
  ServiceRegistration reg2=bundleContext.registerService(InterfaceA.class.getName(),new InterfaceA(){
    public String hello(    String msg){
      return "Good morning " + msg + "!";
    }
  }
,props);
  waitForAsynchronousHandling();
  assertNotNull(listener.getA());
  assertNotNull(listener.getReference());
  assertEquals("Hello world!",a.hello("world"));
  reg1.unregister();
  waitForAsynchronousHandling();
  assertNotNull(listener.getA());
  assertNotNull(listener.getReference());
  assertEquals("Good morning world!",a.hello("world"));
  reg2.unregister();
  waitForAsynchronousHandling();
  assertNull(listener.getA());
  assertNull(listener.getReference());
  try {
    a.hello("world");
    fail("A ServiceUnavailableException should have been thrown");
  }
 catch (  ServiceUnavailableException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.proxy.AbstractProxyTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testInterception() throws Throwable {
  TestListener tl=new TestListener();
  Object obj=getProxyInstance(getProxyClass(getTestClass()),tl);
  assertCalled(tl,false,false,false);
  Method m=getDeclaredMethod(getTestClass(),"testReturnInteger",new Class[]{});
  m.invoke(obj);
  assertCalled(tl,true,true,false);
  tl.clear();
  assertCalled(tl,false,false,false);
  m=getDeclaredMethod(getTestClass(),"testException",new Class[]{});
  try {
    m.invoke(obj);
    fail("Should throw an exception");
  }
 catch (  InvocationTargetException re) {
    if (!!!re.getTargetException().getClass().equals(RuntimeException.class))     throw re.getTargetException();
    assertCalled(tl,true,false,true);
  }
  tl.clear();
  assertCalled(tl,false,false,false);
  m=getDeclaredMethod(getTestClass(),"testInternallyCaughtException",new Class[]{});
  try {
    m.invoke(obj);
  }
  finally {
    assertCalled(tl,true,true,false);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.proxy.InterfaceProxyingTest </h4><pre class="type-4 type-5 type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test a class whose super couldn't be woven
 */
@Test public void testDelegationAndInterception() throws Exception {
  Collection<Class<?>> classes=new ArrayList<Class<?>>(Arrays.asList(Callable.class));
  TestListener tl=new TestListener();
  TestCallable tc=new TestCallable();
  Callable o=(Callable)InterfaceProxyGenerator.getProxyInstance(testBundle,null,classes,tc,tl);
  assertCalled(tl,false,false,false);
  assertNull(null,o.call());
  assertCalled(tl,true,true,false);
  assertEquals(Callable.class.getMethod("call"),tl.getLastMethod());
  tl.clear();
  assertCalled(tl,false,false,false);
  tc.setReturn(new Callable(){
    public Object call() throws Exception {
      throw new RuntimeException();
    }
  }
);
  try {
    o.call();
    fail("Should throw an exception");
  }
 catch (  RuntimeException re) {
    assertCalled(tl,true,false,true);
    assertSame(re,tl.getLastThrowable());
  }
  tl.clear();
  assertCalled(tl,false,false,false);
  tc.setReturn(new Callable(){
    public Object call() throws Exception {
      try {
        throw new RuntimeException();
      }
 catch (      RuntimeException re) {
        return new Object();
      }
    }
  }
);
  try {
    assertNotNull(o.call());
  }
  finally {
    assertCalled(tl,true,true,false);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.proxy.WovenProxyGeneratorTest </h4><pre class="type-5 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test a class whose super couldn't be woven
 */
@Test public void testUnweavableSuperWithFinalMethod() throws Exception {
  try {
    getProxyClass(ProxyTestClassUnweavableChildWithFinalMethodParent.class);
    fail();
  }
 catch (  RuntimeException re) {
    assertTrue(re.getCause() instanceof FinalModifierException);
    assertEquals(ProxyTestClassUnweavableSuperWithFinalMethod.class.getName(),((FinalModifierException)re.getCause()).getClassName());
    assertEquals("doStuff2",((FinalModifierException)re.getCause()).getFinalMethods());
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test a class whose super couldn't be woven
 */
@Test public void testUnweavableSuperWithDefaultMethodInWrongPackage() throws Exception {
  try {
    getProxyClass(ProxyTestClassUnweavableChildWithDefaultMethodWrongPackageParent.class);
    fail();
  }
 catch (  RuntimeException re) {
    assertTrue(re.getCause() instanceof UnableToProxyException);
    assertEquals(ProxyTestClassUnweavableSuperWithDefaultMethodWrongPackageParent.class.getName(),((UnableToProxyException)re.getCause()).getClassName());
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnweavableSuperWithNoNoargsAllTheWay() throws Exception {
  try {
    getProxyClass(ProxyTestClassUnweavableSibling.class);
    fail();
  }
 catch (  RuntimeException re) {
    assertTrue(re.getCause() instanceof UnableToProxyException);
    assertEquals(ProxyTestClassUnweavableSibling.class.getName(),((UnableToProxyException)re.getCause()).getClassName());
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInnerWithNoParentNoArgs() throws Exception {
  try {
    getProxyClass(ProxyTestClassUnweavableInnerChild.class);
    fail();
  }
 catch (  RuntimeException re) {
    assertTrue(re.getCause() instanceof UnableToProxyException);
    assertEquals(ProxyTestClassUnweavableInnerChild.class.getName(),((UnableToProxyException)re.getCause()).getClassName());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.codec.ServiceDataTest </h4><pre class="type-4 type-12 type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testToCompositeData() throws Exception {
  ServiceReference<?> reference=mock(ServiceReference.class);
  Bundle bundle=mock(Bundle.class);
  String[] interfaces=new String[]{"org.apache.aries.jmx.Test","org.apache.aries.jmx.Mock"};
  Bundle b1=mock(Bundle.class);
  when(b1.getBundleId()).thenReturn(new Long(6));
  Bundle b2=mock(Bundle.class);
  when(b2.getBundleId()).thenReturn(new Long(9));
  when(reference.getProperty(Constants.SERVICE_ID)).thenReturn(new Long(98));
  when(reference.getBundle()).thenReturn(bundle);
  when(bundle.getBundleId()).thenReturn(new Long(34));
  when(reference.getProperty(Constants.OBJECTCLASS)).thenReturn(interfaces);
  when(reference.getUsingBundles()).thenReturn(new Bundle[]{b1,b2});
  when(reference.getPropertyKeys()).thenReturn(new String[]{"x.vendor","x.domain","x.index","x.optimized"});
  when(reference.getProperty("x.vendor")).thenReturn("aries");
  when(reference.getProperty("x.domain")).thenReturn("test");
  when(reference.getProperty("x.index")).thenReturn(new Long(67));
  when(reference.getProperty("x.optimized")).thenReturn(true);
  ServiceData serviceData=new ServiceData(reference);
  CompositeData compositeData=serviceData.toCompositeData();
  assertEquals(new Long(98),compositeData.get(IDENTIFIER));
  assertEquals(new Long(34),compositeData.get(BUNDLE_IDENTIFIER));
  assertArrayEquals(new Long[]{new Long(6),new Long(9)},(Long[])compositeData.get(USING_BUNDLES));
  assertArrayEquals(interfaces,(String[])compositeData.get(OBJECT_CLASS));
  TabularData propertiesTable=(TabularData)compositeData.get(PROPERTIES);
  @SuppressWarnings("unchecked") Collection<CompositeData> propertyData=(Collection<CompositeData>)propertiesTable.values();
  assertEquals(4,propertyData.size());
  for (  CompositeData propertyRow : propertyData) {
    String key=(String)propertyRow.get(KEY);
    if (key.equals("x.vendor")) {
      assertEquals("aries",propertyRow.get(VALUE));
      assertEquals(STRING,propertyRow.get(TYPE));
    }
 else     if (key.equals("x.domain")) {
      assertEquals("test",propertyRow.get(VALUE));
      assertEquals(STRING,propertyRow.get(TYPE));
    }
 else     if (key.equals("x.index")) {
      assertEquals("67",propertyRow.get(VALUE));
      assertEquals(LONG,propertyRow.get(TYPE));
    }
 else     if (key.equals("x.optimized")) {
      assertEquals("true",propertyRow.get(VALUE));
      assertEquals(BOOLEAN,propertyRow.get(TYPE));
    }
 else {
      fail("unknown key parsed from properties");
    }
  }
}

</code></pre>

<br>
<pre class="type-4 type-12 type-5 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFromCompositeData() throws Exception {
  Map<String,Object> items=new HashMap<String,Object>();
  items.put(IDENTIFIER,new Long(99));
  items.put(BUNDLE_IDENTIFIER,new Long(5));
  items.put(USING_BUNDLES,new Long[]{new Long(10),new Long(11)});
  items.put(OBJECT_CLASS,new String[]{"org.apache.aries.jmx.Test","org.apache.aries.jmx.Mock"});
  TabularData propertyTable=new TabularDataSupport(JmxConstants.PROPERTIES_TYPE);
  propertyTable.put(PropertyData.newInstance("a",true).toCompositeData());
  propertyTable.put(PropertyData.newInstance("b","value").toCompositeData());
  propertyTable.put(PropertyData.newInstance("c",new int[]{1,2}).toCompositeData());
  propertyTable.put(PropertyData.newInstance("d",new Long[]{new Long(3),new Long(4)}).toCompositeData());
  items.put(ServiceStateMBean.PROPERTIES,propertyTable);
  CompositeData compositeData=new CompositeDataSupport(SERVICE_TYPE,items);
  ServiceData data=ServiceData.from(compositeData);
  assertEquals(99,data.getServiceId());
  assertEquals(5,data.getBundleId());
  assertArrayEquals(new long[]{10,11},data.getUsingBundles());
  assertArrayEquals(new String[]{"org.apache.aries.jmx.Test","org.apache.aries.jmx.Mock"},data.getServiceInterfaces());
  List<PropertyData<? extends Object>> properties=data.getProperties();
  assertEquals(4,properties.size());
  for (  PropertyData<? extends Object> property : properties) {
    if (property.getKey().equals("a")) {
      assertTrue((Boolean)property.getValue());
      assertEquals(P_BOOLEAN,property.getEncodedType());
    }
 else     if (property.getKey().equals("b")) {
      assertEquals("value",property.getValue());
      assertEquals(STRING,property.getEncodedType());
    }
 else     if (property.getKey().equals("c")) {
      assertArrayEquals(new int[]{1,2},(int[])property.getValue());
      assertEquals("Array of int",property.getEncodedType());
      assertEquals("1,2",property.getEncodedValue());
    }
 else     if (property.getKey().equals("d")) {
      assertArrayEquals(new Long[]{new Long(3),new Long(4)},(Long[])property.getValue());
      assertEquals("Array of Long",property.getEncodedType());
      assertEquals("3,4",property.getEncodedValue());
    }
 else {
      fail("unknown key parsed from properties");
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.framework.FrameworkMBeanTest </h4><pre class="type-4 type-5 type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMBeanInterface() throws IOException {
  long[] bundleIds=new long[]{1,2};
  int[] newlevels=new int[]{1,1};
  CompositeData compData=framework.setBundleStartLevels(bundleIds,newlevels);
  assertNotNull(compData);
  BatchActionResult batch2=BatchActionResult.from(compData);
  assertNotNull(batch2.getCompleted());
  assertTrue(batch2.isSuccess());
  assertNull(batch2.getError());
  assertNull(batch2.getRemainingItems());
  File file=File.createTempFile("bundletest",".jar");
  file.deleteOnExit();
  Manifest man=new Manifest();
  man.getMainAttributes().putValue("Manifest-Version","1.0");
  JarOutputStream jaros=new JarOutputStream(new FileOutputStream(file),man);
  jaros.flush();
  jaros.close();
  long bundleId=0;
  try {
    bundleId=framework.installBundleFromURL(file.getAbsolutePath(),file.toURI().toString());
  }
 catch (  Exception e) {
    fail("Installation of test bundle shouldn't fail");
  }
  try {
    framework.uninstallBundle(bundleId);
  }
 catch (  Exception e) {
    fail("Uninstallation of test bundle shouldn't fail");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.framework.FrameworkTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testStopBundle() throws Exception {
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.getBundle(5)).thenReturn(bundle);
  mbean.stopBundle(5);
  Mockito.verify(bundle).stop();
  Mockito.when(context.getBundle(5)).thenReturn(null);
  try {
    mbean.stopBundle(5);
    Assert.fail("IOException should be thrown");
  }
 catch (  IOException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testStartBundle() throws Exception {
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.getBundle(5)).thenReturn(bundle);
  mbean.startBundle(5);
  Mockito.verify(bundle).start();
  Mockito.reset(context);
  Mockito.when(context.getBundle(6)).thenReturn(bundle);
  Mockito.doThrow(new BundleException("")).when(bundle).start();
  try {
    mbean.startBundle(6);
    Assert.fail("Shouldn't go to this stage, BundleException was thrown");
  }
 catch (  IOException ioe) {
  }
  Mockito.when(context.getBundle(6)).thenReturn(null);
  try {
    mbean.startBundle(6);
    Assert.fail("IOException should be thrown");
  }
 catch (  IOException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInstallBundle() throws Exception {
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.installBundle("file:test.jar")).thenReturn(bundle);
  Mockito.when(bundle.getBundleId()).thenReturn(Long.valueOf(2));
  long bundleId=mbean.installBundle("file:test.jar");
  Assert.assertEquals(2,bundleId);
  Mockito.reset(context);
  Mockito.when(context.installBundle("file:test2.jar")).thenThrow(new BundleException("location doesn't exist"));
  try {
    mbean.installBundle("file:test2.jar");
    Assert.fail("Shouldn't go to this stage, location doesn't exist");
  }
 catch (  IOException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testRefreshBundle() throws Exception {
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.getBundle(1)).thenReturn(bundle);
  mbean.refreshBundle(1);
  Mockito.verify(admin).refreshPackages((Bundle[])Mockito.any());
  try {
    mbean.refreshBundle(2);
    Assert.fail("IOException should be thrown");
  }
 catch (  IOException e) {
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInstallBundleFromURL() throws Exception {
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.installBundle(Mockito.anyString(),Mockito.any(InputStream.class))).thenReturn(bundle);
  Mockito.when(bundle.getBundleId()).thenReturn(Long.valueOf(2));
  Framework spiedMBean=Mockito.spy(mbean);
  InputStream stream=Mockito.mock(InputStream.class);
  Mockito.doReturn(stream).when(spiedMBean).createStream("test.jar");
  long bundleId=spiedMBean.installBundleFromURL("file:test.jar","test.jar");
  Assert.assertEquals(2,bundleId);
  Mockito.reset(context);
  Mockito.doReturn(stream).when(spiedMBean).createStream(Mockito.anyString());
  Mockito.when(context.installBundle(Mockito.anyString(),Mockito.any(InputStream.class))).thenThrow(new BundleException("location doesn't exist"));
  try {
    spiedMBean.installBundleFromURL("file:test2.jar","test.jar");
    Assert.fail("Shouldn't go to this stage, location doesn't exist");
  }
 catch (  IOException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.useradmin.UserAdminTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
/** 
 * Test method for {@link org.apache.aries.jmx.useradmin.UserAdmin#createRole(java.lang.String)}.
 * @throws IOException
 */
@Test public void testCreateRole() throws IOException {
  try {
    mbean.createRole("role1");
    Assert.fail("Function did not throw exception as expected");
  }
 catch (  IOException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jndi.InitialContextTest </h4><pre class="type-5 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testURLContextErrorPropagation() throws Exception {
  ObjectFactory of=new ObjectFactory(){
    public Object getObjectInstance(    Object obj,    Name name,    Context nameCtx,    Hashtable<?,?> environment) throws Exception {
      throw new Exception("doh");
    }
  }
;
  registerURLObjectFactory(of,"test");
  ic=initialContext();
  try {
    ic.lookup("test:something");
    Assert.fail("Expected NamingException");
  }
 catch (  NamingException ne) {
    assertNotNull(ne.getCause());
    assertEquals("doh",ne.getCause().getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jndi.url.ServiceRegistryContextTest </h4><pre class="type-5 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkServiceListLookup() throws NamingException {
  BundleMock mock=new BundleMock("scooby.doo",new Properties());
  Thread.currentThread().setContextClassLoader(mock.getClassLoader());
  InitialContext ctx=new InitialContext();
  String className=Runnable.class.getName();
  Runnable t=Skeleton.newMock(Runnable.class);
  reg.unregister();
  ServiceRegistration reg=bc.registerService(className,t,null);
  ServiceRegistration reg2=bc.registerService("java.lang.Thread",new Thread(),null);
  Context ctx2=(Context)ctx.lookup("osgi:servicelist/java.lang.Runnable");
  Runnable r=(Runnable)ctx2.lookup(String.valueOf(reg.getReference().getProperty(Constants.SERVICE_ID)));
  r.run();
  Skeleton.getSkeleton(t).assertCalled(new MethodCall(Runnable.class,"run"));
  reg.unregister();
  try {
    r.run();
    fail("Should have received a ServiceException");
  }
 catch (  ServiceException e) {
    assertEquals("service exception has the wrong type",ServiceException.UNREGISTERED,e.getType());
  }
  try {
    ctx2.lookup(String.valueOf(reg2.getReference().getProperty(Constants.SERVICE_ID)));
    fail("Expected a NameNotFoundException");
  }
 catch (  NameNotFoundException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLookupWithPause() throws NamingException {
  BundleMock mock=new BundleMock("scooby.doo",new Properties());
  Thread.currentThread().setContextClassLoader(mock.getClassLoader());
  Hashtable<Object,Object> env=new Hashtable<Object,Object>();
  env.put(JNDIConstants.REBIND_TIMEOUT,1000);
  InitialContext ctx=new InitialContext(env);
  Context ctx2=(Context)ctx.lookup("osgi:service");
  Runnable r1=(Runnable)ctx2.lookup("java.lang.Runnable");
  reg.unregister();
  long startTime=System.currentTimeMillis();
  try {
    r1.run();
    fail("Should have received an exception");
  }
 catch (  ServiceException e) {
    long endTime=System.currentTimeMillis();
    long diff=endTime - startTime;
    assertTrue("The run method did not fail in the expected time (1s): " + diff,diff >= 1000);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jpa.container.itest.EclipseAdditionalTest </h4><pre class="type-5 type-10 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=IllegalStateException.class) public void testEntityManagerFactoryWithIncompletePersistenceUnit() throws Exception {
  getService(EntityManagerFactory.class,"(osgi.unit.name=incompleteTestUnit)",1000);
  Assert.fail("There should be no EntityManagerFactory registered since this persistence unit is incomplete");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.proxy.itests.AbstractProxyTest </h4><pre class="type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInterception() throws Exception {
  Bundle b=bundleContext.getBundle();
  TestDelegate td=new TestDelegate("Hello");
  Collection<Class<?>> classes=new ArrayList<Class<?>>();
  classes.add(TestDelegate.class);
  TestListener tl=new TestListener();
  TestDelegate proxy=(TestDelegate)mgr.createInterceptingProxy(b,classes,td,tl);
  tl.clear();
  assertCalled(tl,false,false,false);
  assertEquals("Wrong message","Hello",proxy.call());
  assertCalled(tl,true,true,false);
  tl.clear();
  assertCalled(tl,false,false,false);
  try {
    proxy.throwException();
    fail("Should throw an exception");
  }
 catch (  RuntimeException re) {
    assertCalled(tl,true,false,true);
  }
  tl.clear();
  assertCalled(tl,false,false,false);
  try {
    proxy.testInternallyCaughtException();
  }
  finally {
    assertCalled(tl,true,true,false);
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDelegationAndInterception() throws Exception {
  Bundle b=bundleContext.getBundle();
  TestCallable c=new TestCallable();
  Collection<Class<?>> classes=new ArrayList<Class<?>>();
  classes.add(TestDelegate.class);
  TestListener tl=new TestListener();
  TestDelegate proxy=(TestDelegate)mgr.createDelegatingInterceptingProxy(b,classes,c,new TestDelegate(""),tl);
  c.setReturn(new TestDelegate("Hello"));
  tl.clear();
  assertCalled(tl,false,false,false);
  assertEquals("Wrong message","Hello",proxy.call());
  assertCalled(tl,true,true,false);
  tl.clear();
  assertCalled(tl,false,false,false);
  c.setReturn(new TestDelegate("Hello again"));
  assertEquals("Wrong message","Hello again",proxy.call());
  assertCalled(tl,true,true,false);
  tl.clear();
  assertCalled(tl,false,false,false);
  try {
    proxy.throwException();
    fail("Should throw an exception");
  }
 catch (  RuntimeException re) {
    assertCalled(tl,true,false,true);
  }
  tl.clear();
  assertCalled(tl,false,false,false);
  try {
    proxy.testInternallyCaughtException();
  }
  finally {
    assertCalled(tl,true,true,false);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.proxy.itests.AbstractWeavingProxyTest </h4><pre class="type-12 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
/** 
 * This method checks that we correctly proxy a class with final methods.
 */
@Test public void checkProxyFinalMethods() throws Exception {
  Bundle b=bundleContext.getBundle();
  Callable c=new TestCallable();
  Collection<Class<?>> classes=new ArrayList<Class<?>>();
  Runnable r=new Runnable(){
    public final void run(){
    }
  }
;
  classes.add(r.getClass());
  Object o=mgr.createDelegatingProxy(b,classes,c,r);
  if (!!!(o instanceof WovenProxy))   fail("Proxy should be woven!");
}

</code></pre>

<br>
<pre class="type-12 type-5 type-10 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=FinalModifierException.class) public void checkProxyController() throws Exception {
  context().registerService(ProxyWeavingController.class.getName(),new ProxyWeavingController(){
    public boolean shouldWeave(    WovenClass arg0,    WeavingHelper arg1){
      return false;
    }
  }
,null);
  Bundle b=bundleContext.getBundle();
  Callable c=new TestCallable();
  Collection<Class<?>> classes=new ArrayList<Class<?>>();
  Callable<?> callable=new TestFinalDelegate();
  classes.add(callable.getClass());
  Object o=mgr.createDelegatingProxy(b,classes,c,callable);
  if (o instanceof WovenProxy)   fail("Proxy should not have been woven!");
}

</code></pre>

<br>
<pre class="type-4 type-12 type-5 type-13 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This test does two things. First of all it checks that we can proxy a final 
 * class. It also validates that the class implements WovenProxy, and that the
 * delegation still works
 */
@Test public void checkProxyFinalClass() throws Exception {
  Bundle b=bundleContext.getBundle();
  TestCallable dispatcher=new TestCallable();
  TestCallable template=new TestCallable();
  Collection<Class<?>> classes=new ArrayList<Class<?>>();
  classes.add(TestCallable.class);
  @SuppressWarnings("unchecked") Callable o=(Callable)mgr.createDelegatingProxy(b,classes,dispatcher,template);
  if (!!!(o instanceof WovenProxy))   fail("Proxy should be woven!");
  Object inner=new Integer(3);
  dispatcher.setReturn(new TestCallable());
  ((TestCallable)dispatcher.call()).setReturn(inner);
  assertSame("Should return the same object",inner,o.call());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.quiesce.manager.itest.QuiesceManagerTest </h4><pre class="type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFutureWithWait() throws Exception {
  bundleContext.registerService(QuiesceParticipant.class.getName(),participant2,null);
  bundleContext.registerService(QuiesceParticipant.class.getName(),participant3,null);
  bundleList=new ArrayList<Bundle>();
  bundleList.add(b1);
  assertEquals("Bundle " + b1.getSymbolicName() + " should be in active state",Bundle.ACTIVE,b1.getState());
  Future<?> future=manager.quiesceWithFuture(2000,Arrays.asList(b1));
  try {
    future.get(500,TimeUnit.MILLISECONDS);
    fail("Too short wait, should have thrown TimeoutException");
  }
 catch (  TimeoutException te) {
  }
  assertEquals("Participant 2 has started",1,participant2.getStartedCount());
  assertEquals("Participant 2 has finished",0,participant2.getFinishedCount());
  assertEquals("Participant 3 has started",1,participant3.getStartedCount());
  assertEquals("Participant 3 has finished",0,participant3.getFinishedCount());
  assertEquals("Bundle " + b1.getSymbolicName() + " should still be active, because we did not wait long enough",Bundle.ACTIVE,b1.getState());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.dynamic.ClientWeavingHookGenericCapabilityTest </h4><pre class="type-4 type-5 type-13 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTCCLResettingOnException() throws Exception {
  ClassLoader cl=new URLClassLoader(new URL[]{});
  Thread.currentThread().setContextClassLoader(cl);
  Assert.assertSame("Precondition",cl,Thread.currentThread().getContextClassLoader());
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.CLIENT_REQUIREMENT);
  Bundle providerBundle5=mockProviderBundle("impl5",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle5,new HashMap<String,Object>());
  Bundle consumerBundle=mockConsumerBundle(headers,providerBundle5);
  activator.addConsumerWeavingData(consumerBundle,SpiFlyConstants.REQUIRE_CAPABILITY);
  Bundle spiFlyBundle=mockSpiFlyBundle(consumerBundle,providerBundle5);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("TestClient.class");
  WovenClass wc=new MyWovenClass(clsUrl,"org.apache.aries.spifly.dynamic.TestClient",consumerBundle);
  wh.weave(wc);
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  try {
    method.invoke(cls.newInstance(),"hello");
    Assert.fail("Invocation should have thrown an exception");
  }
 catch (  InvocationTargetException ite) {
    RuntimeException re=(RuntimeException)ite.getCause();
    String msg=re.getMessage();
    Assert.assertEquals("Uh-oh: hello",msg);
    Assert.assertSame(cl,Thread.currentThread().getContextClassLoader());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.core.archive.FragmentHostHeaderTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testMultipleClauses(){
  String headerStr="foo;bundle-version=1.0,bar";
  try {
    new FragmentHostHeader(headerStr);
    fail("Multiple clauses not allowed");
  }
 catch (  IllegalArgumentException e) {
  }
catch (  Exception e) {
    fail("Multiple cluases should result in IAE");
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testEmptyClause(){
  String headerStr="";
  try {
    new FragmentHostHeader(headerStr);
    fail("Empty clause not allowed");
  }
 catch (  IllegalArgumentException e) {
  }
catch (  Exception e) {
    fail("Empty clause should result in IAE");
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testNullClause(){
  String headerStr=null;
  try {
    new FragmentHostHeader(headerStr);
    fail("Null clause not allowed");
  }
 catch (  NullPointerException e) {
  }
catch (  Exception e) {
    fail("Null clause should result in NPE");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.core.archive.GenericHeaderTest </h4><pre class="type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmptyHeader(){
  try {
    GenericHeader header=new GenericHeader("Foo-Bar","");
    assertEquals("Empty headers are treated the same as those with an empty quoted string","\"\"",header.getValue());
    assertEquals("Empty headers should have one clause",1,header.getClauses().size());
  }
 catch (  Exception e) {
    fail("Empty headers are allowed");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.core.internal.LocationTest </h4><pre class="type-5 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAnyLocationString(){
  String locationStr="anyLocation";
  Location location=null;
  try {
    location=new Location(locationStr);
  }
 catch (  Throwable t) {
    t.printStackTrace();
    fail("Any location string must be supported");
  }
  assertNull("Wrong symbolic name",location.getSymbolicName());
  assertEquals("Wrong value",locationStr,location.getValue());
  assertNull("Wrong version",location.getVersion());
  try {
    location.open();
    fail("Opening a location that does not represent a URL should fail");
  }
 catch (  MalformedURLException e) {
  }
catch (  Throwable t) {
    t.printStackTrace();
    fail("Wrong exception");
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSubsystemLocationInvalid() throws Exception {
  String locationString="subsystem://?Subsystem-SymbolicName=org.osgi.service.subsystem.root&Subsystem-Version=1.0.0!/my-subsystem@0.5.0";
  Location location=new Location(locationString);
  assertEquals(locationString,location.getValue());
  try {
    String sn=location.getSymbolicName();
    fail("Expecting an error: " + sn);
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    Version v=location.getVersion();
    fail("Expecting an error: " + v);
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.AriesSubsystemTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testAddRequirements() throws Exception {
  AriesSubsystem compositeA=(AriesSubsystem)installSubsystemFromFile(COMPOSITE_A);
  try {
    startSubsystem(compositeA);
    assertCompositeABefore(compositeA);
    try {
      installSubsystemFromFile(compositeA,APPLICATION_A);
      fail("Subsystem should not have installed due to unresolved org.osgi.framework package requirement");
    }
 catch (    SubsystemException e) {
    }
    Requirement requirement=new BasicRequirement.Builder().namespace(PackageNamespace.PACKAGE_NAMESPACE).directive(PackageNamespace.REQUIREMENT_FILTER_DIRECTIVE,"(osgi.wiring.package=org.osgi.framework)").resource(EasyMock.createMock(Resource.class)).build();
    compositeA.addRequirements(Collections.singleton(requirement));
    assertCompositeABefore(compositeA);
    assertRefreshAndResolve(Collections.singletonList(getConstituentAsBundle(compositeA,BUNDLE_B,null,null)));
    assertRefreshAndResolve(Collections.singletonList(getConstituentAsBundle(getConstituentAsSubsystem(compositeA,APPLICATION_B,null,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION),BUNDLE_B,null,null)));
    AriesSubsystem applicationA;
    try {
      applicationA=(AriesSubsystem)installSubsystemFromFile(compositeA,APPLICATION_A);
      startSubsystem(applicationA);
    }
 catch (    SubsystemException e) {
      fail("Subsystem should have installed and started");
    }
    assertCompositeAAfter(compositeA);
  }
  finally {
    stopAndUninstallSubsystemSilently(compositeA);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testAddRequirementWithVisibleBundleNamespace() throws Exception {
  Requirement requirement=new BasicRequirement.Builder().namespace(RegionFilter.VISIBLE_BUNDLE_NAMESPACE).directive(Namespace.REQUIREMENT_FILTER_DIRECTIVE,"(id=0)").resource(EasyMock.createMock(Resource.class)).build();
  AriesSubsystem compositeA=(AriesSubsystem)installSubsystemFromFile(COMPOSITE_A);
  try {
    startSubsystem(compositeA);
    try {
      installSubsystemFromFile(compositeA,APPLICATION_A);
      fail("Subsystem should not have installed due to unresolved org.osgi.framework package requirement");
    }
 catch (    SubsystemException e) {
    }
    compositeA.addRequirements(Collections.singleton(requirement));
    AriesSubsystem applicationA;
    try {
      applicationA=(AriesSubsystem)installSubsystemFromFile(compositeA,APPLICATION_A);
      startSubsystem(applicationA);
    }
 catch (    SubsystemException e) {
      fail("Subsystem should have installed and started");
    }
    assertCompositeAAfter(compositeA);
  }
  finally {
    stopAndUninstallSubsystemSilently(compositeA);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testInstallIDirectory(){
  File file=new File(COMPOSITE_A);
  IDirectory directory=FileSystem.getFSRoot(file);
  try {
    AriesSubsystem compositeA=getRootAriesSubsystem().install(COMPOSITE_A,directory);
    uninstallSubsystemSilently(compositeA);
  }
 catch (  Exception e) {
    fail("Installation from IDirectory should have succeeded");
  }
}

</code></pre>

<br>
<pre class="type-5 type-13 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testServiceRegistrations(){
  Subsystem root1=null;
  try {
    root1=getRootSubsystem();
  }
 catch (  Exception e) {
    fail(Subsystem.class.getName() + " service not registered");
  }
  AriesSubsystem root2=null;
  try {
    root2=getRootAriesSubsystem();
  }
 catch (  Exception e) {
    fail(AriesSubsystem.class.getName() + " service not registered");
  }
  assertSame("Services should be the same instance",root1,root2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.BundleEventHookTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testIgnoreUninstalledBundleInAsyncInstalledEvent() throws Exception {
  final Bundle core=getSubsystemCoreBundle();
  core.stop();
  final AtomicReference<Bundle> a=new AtomicReference<Bundle>();
  bundleContext.addServiceListener(new ServiceListener(){
    @SuppressWarnings("unchecked") @Override public void serviceChanged(    ServiceEvent event){
      if ((event.getType() & (ServiceEvent.REGISTERED | ServiceEvent.MODIFIED)) == 0)       return;
      if (a.get() != null)       return;
      ServiceReference sr=(ServiceReference)event.getServiceReference();
      bundleContext.getService(sr);
      try {
        a.set(core.getBundleContext().installBundle(BUNDLE_A,new FileInputStream(BUNDLE_A)));
        a.get().uninstall();
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
  }
,"(&(objectClass=org.osgi.service.subsystem.Subsystem)(subsystem.id=0)(subsystem.state=RESOLVED))");
  try {
    core.start();
  }
 catch (  BundleException e) {
    e.printStackTrace();
    fail("Subsystems failed to handle an asynchronous bundle installed event after the bundle was uninstalled");
  }
  assertBundleState(a.get(),Bundle.UNINSTALLED);
  Subsystem root=getRootSubsystem();
  assertState(Subsystem.State.ACTIVE,root);
  assertNotConstituent(root,a.get().getSymbolicName());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoDeadlockWhenSubsystemsInitializing() throws Exception {
  final Bundle bundle=getSubsystemCoreBundle();
  bundle.stop();
  final AtomicBoolean completed=new AtomicBoolean(false);
  final ExecutorService executor=Executors.newFixedThreadPool(2);
  try {
    bundleContext.addServiceListener(new ServiceListener(){
      @Override public void serviceChanged(      ServiceEvent event){
        Future<?> future=executor.submit(new Runnable(){
          public void run(){
            try {
              Bundle a=bundle.getBundleContext().installBundle(BUNDLE_A,new FileInputStream(BUNDLE_A));
              completed.set(true);
              a.uninstall();
            }
 catch (            Exception e) {
              e.printStackTrace();
            }
          }
        }
);
        try {
          future.get();
          completed.set(true);
        }
 catch (        Exception e) {
          e.printStackTrace();
        }
      }
    }
,"(&(objectClass=org.osgi.service.subsystem.Subsystem)(subsystem.id=0))");
    Future<?> future=executor.submit(new Runnable(){
      public void run(){
        try {
          bundle.start();
        }
 catch (        Exception e) {
          e.printStackTrace();
        }
      }
    }
);
    try {
      future.get(3,TimeUnit.SECONDS);
      assertTrue("Deadlock detected",completed.get());
    }
 catch (    TimeoutException e) {
      fail("Deadlock detected");
    }
  }
  finally {
    executor.shutdownNow();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testIgnoreUninstalledOriginBundleInAsyncInstalledEvent() throws Exception {
  final Bundle core=getSubsystemCoreBundle();
  core.stop();
  final Bundle b=bundleContext.installBundle(BUNDLE_B,new FileInputStream(BUNDLE_B));
  b.start();
  final AtomicReference<Bundle> a=new AtomicReference<Bundle>();
  bundleContext.addServiceListener(new ServiceListener(){
    @SuppressWarnings("unchecked") @Override public void serviceChanged(    ServiceEvent event){
      if ((event.getType() & (ServiceEvent.REGISTERED | ServiceEvent.MODIFIED)) == 0)       return;
      if (a.get() != null)       return;
      ServiceReference sr=(ServiceReference)event.getServiceReference();
      bundleContext.getService(sr);
      try {
        a.set(b.getBundleContext().installBundle(BUNDLE_A,new FileInputStream(BUNDLE_A)));
        b.uninstall();
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
  }
,"(&(objectClass=org.osgi.service.subsystem.Subsystem)(subsystem.id=0)(subsystem.state=RESOLVED))");
  try {
    core.start();
  }
 catch (  BundleException e) {
    e.printStackTrace();
    fail("Subsystems failed to handle an asynchronous bundle installed event after the origin bundle was uninstalled");
  }
  assertBundleState(a.get(),Bundle.INSTALLED);
  assertBundleState(b,Bundle.UNINSTALLED);
  Subsystem root=getRootSubsystem();
  assertState(Subsystem.State.ACTIVE,root);
  assertConstituent(root,a.get().getSymbolicName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.CustomContentHandlerTest </h4><pre class="type-12 type-5 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCustomContentInstallationException() throws Exception {
  for (  Bundle b : bundleContext.getBundles()) {
    if ("org.apache.aries.subsystem.itests.customcontent.bundleB".equals(b.getSymbolicName())) {
      fail("Precondition");
    }
  }
  SausagesContentHandler handler=new SausagesContentHandler(true,"install");
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(ContentHandler.CONTENT_TYPE_PROPERTY,"foo.sausages");
  ServiceRegistration<ContentHandler> reg=bundleContext.registerService(ContentHandler.class,handler,props);
  assertEquals("Precondition",0,handler.calls.size());
  try {
    installSubsystemFromFile("customContent1.esa");
  }
 catch (  Exception ex) {
  }
  try {
    for (    Bundle b : bundleContext.getBundles()) {
      if ("org.apache.aries.subsystem.itests.customcontent.bundleB".equals(b.getSymbolicName())) {
        fail("Should not have installed the bundle");
      }
    }
  }
  finally {
    reg.unregister();
  }
}

</code></pre>

<br>
<pre class="type-12 type-5 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("This test exposes a problem that needs to be fixed, namely that the previous test leaves stuff behind and that " + "customContent1.esa cannot be installed again. Currently ignored until someone finds the time to fix it.") public void testCustomContentInstallationSecondTime() throws Exception {
  for (  Bundle b : bundleContext.getBundles()) {
    if ("org.apache.aries.subsystem.itests.customcontent.bundleB".equals(b.getSymbolicName())) {
      fail("Precondition");
    }
  }
  SausagesContentHandler handler=new SausagesContentHandler();
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(ContentHandler.CONTENT_TYPE_PROPERTY,"foo.sausages");
  ServiceRegistration<ContentHandler> reg=bundleContext.registerService(ContentHandler.class,handler,props);
  try {
    Subsystem subsystem=installSubsystemFromFile("customContent1.esa");
    subsystem.uninstall();
  }
  finally {
    reg.unregister();
  }
}

</code></pre>

<br>
<pre class="type-12 type-5 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("This test currently doesn't pass, the bundle moves to the active state, while it shouldn't") public void testCustomContentStartException() throws Exception {
  for (  Bundle b : bundleContext.getBundles()) {
    if ("org.apache.aries.subsystem.itests.customcontent.bundleC".equals(b.getSymbolicName())) {
      fail("Precondition");
    }
  }
  SausagesContentHandler handler=new SausagesContentHandler(true,"start");
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(ContentHandler.CONTENT_TYPE_PROPERTY,"foo.sausages");
  ServiceRegistration<ContentHandler> reg=bundleContext.registerService(ContentHandler.class,handler,props);
  assertEquals("Precondition",0,handler.calls.size());
  Subsystem subsystem=installSubsystemFromFile("customContent2.esa");
  try {
    assertEquals(Arrays.asList("install:customContent3 sausages = 3"),handler.calls);
    try {
      Bundle theBundle=null;
      for (      Bundle b : bundleContext.getBundles()) {
        if ("org.apache.aries.subsystem.itests.customcontent.bundleC".equals(b.getSymbolicName())) {
          assertEquals(Bundle.INSTALLED,b.getState());
          theBundle=b;
        }
      }
      assertNotNull(theBundle);
      try {
        subsystem.start();
      }
 catch (      Exception ex) {
      }
      assertEquals("There was an exception during start, so the bundle should not be started",Bundle.INSTALLED,theBundle.getState());
    }
  finally {
      subsystem.uninstall();
    }
  }
  finally {
    reg.unregister();
  }
}

</code></pre>

<br>
<pre class="type-12 type-5 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCustomContentInstallationCoordinationFails() throws Exception {
  for (  Bundle b : bundleContext.getBundles()) {
    if ("org.apache.aries.subsystem.itests.customcontent.bundleC".equals(b.getSymbolicName())) {
      fail("Precondition");
    }
  }
  SausagesContentHandler handler=new SausagesContentHandler(false,"install");
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(ContentHandler.CONTENT_TYPE_PROPERTY,"foo.sausages");
  ServiceRegistration<ContentHandler> reg=bundleContext.registerService(ContentHandler.class,handler,props);
  assertEquals("Precondition",0,handler.calls.size());
  try {
    installSubsystemFromFile("customContent2.esa");
  }
 catch (  Exception ex) {
  }
  try {
    for (    Bundle b : bundleContext.getBundles()) {
      if ("org.apache.aries.subsystem.itests.customcontent.bundleC".equals(b.getSymbolicName())) {
        fail("Should not have installed the bundle");
      }
    }
  }
  finally {
    reg.unregister();
  }
}

</code></pre>

<br>
<pre class="type-12 type-5 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("This test currently doesn't pass, the bundle moves to the active state, while it shouldn't") public void testCustomContentStartFailCoordination() throws Exception {
  for (  Bundle b : bundleContext.getBundles()) {
    if ("org.apache.aries.subsystem.itests.customcontent.bundleD".equals(b.getSymbolicName())) {
      fail("Precondition");
    }
  }
  SausagesContentHandler handler=new SausagesContentHandler(false,"start");
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(ContentHandler.CONTENT_TYPE_PROPERTY,"foo.sausages");
  ServiceRegistration<ContentHandler> reg=bundleContext.registerService(ContentHandler.class,handler,props);
  assertEquals("Precondition",0,handler.calls.size());
  Subsystem subsystem=installSubsystemFromFile("customContent3.esa");
  try {
    assertEquals(Arrays.asList("install:customContent4 sausages = 4"),handler.calls);
    try {
      Bundle theBundle=null;
      for (      Bundle b : bundleContext.getBundles()) {
        if ("org.apache.aries.subsystem.itests.customcontent.bundleD".equals(b.getSymbolicName())) {
          assertEquals(Bundle.INSTALLED,b.getState());
          theBundle=b;
        }
      }
      assertNotNull(theBundle);
      try {
        subsystem.start();
      }
 catch (      Exception ex) {
      }
      assertEquals("The coordination failued during start, so the bundle should not be started",Bundle.INSTALLED,theBundle.getState());
    }
  finally {
      subsystem.uninstall();
    }
  }
  finally {
    reg.unregister();
  }
}

</code></pre>

<br>
<pre class="type-12 type-5 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCustomContentHandler() throws Exception {
  for (  Bundle b : bundleContext.getBundles()) {
    if ("org.apache.aries.subsystem.itests.customcontent.bundleA".equals(b.getSymbolicName())) {
      fail("Precondition");
    }
  }
  SausagesContentHandler handler=new SausagesContentHandler();
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(ContentHandler.CONTENT_TYPE_PROPERTY,"foo.sausages");
  ServiceRegistration<ContentHandler> reg=bundleContext.registerService(ContentHandler.class,handler,props);
  try {
    assertEquals("Precondition",0,handler.calls.size());
    Subsystem subsystem=installSubsystemFromFile("customContent.esa");
    try {
      assertEquals(Arrays.asList("install:customContent1 sausages = 1"),handler.calls);
      Collection<Resource> constituents=subsystem.getConstituents();
      assertEquals("The custom content should not show up as a subsystem constituent",1,constituents.size());
      boolean foundBundle=false;
      for (      Bundle b : bundleContext.getBundles()) {
        if ("org.apache.aries.subsystem.itests.customcontent.bundleA".equals(b.getSymbolicName())) {
          foundBundle=true;
        }
      }
      assertTrue(foundBundle);
      boolean foundBundleInConstituents=false;
      for (      Resource c : constituents) {
        for (        Capability idCap : c.getCapabilities(IdentityNamespace.IDENTITY_NAMESPACE)) {
          Object name=idCap.getAttributes().get(IdentityNamespace.IDENTITY_NAMESPACE);
          if ("org.apache.aries.subsystem.itests.customcontent.bundleA".equals(name))           foundBundleInConstituents=true;
        }
      }
      assertTrue(foundBundleInConstituents);
      handler.calls.clear();
      assertEquals(Subsystem.State.INSTALLED,subsystem.getState());
      subsystem.start();
      assertEquals(Arrays.asList("start:customContent1"),handler.calls);
      handler.calls.clear();
      assertEquals(Subsystem.State.ACTIVE,subsystem.getState());
      subsystem.stop();
      assertEquals(Arrays.asList("stop:customContent1"),handler.calls);
      assertEquals(Subsystem.State.RESOLVED,subsystem.getState());
    }
  finally {
      handler.calls.clear();
      subsystem.uninstall();
      assertEquals(Arrays.asList("uninstall:customContent1"),handler.calls);
      assertEquals(Subsystem.State.UNINSTALLED,subsystem.getState());
    }
  }
  finally {
    reg.unregister();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.DynamicImportTest </h4><pre class="type-4 type-5 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("rawtypes") @Test public void testDynamicPackageImportsAddedToSharingPolicyWhenNoImportPackageHeader() throws Exception {
  final AtomicBoolean weavingHookCalled=new AtomicBoolean(false);
  ServiceRegistration reg=bundleContext.registerService(WeavingHook.class,new WeavingHook(){
    @Override public void weave(    WovenClass wovenClass){
      if (BUNDLE_A.equals(wovenClass.getBundleWiring().getBundle().getSymbolicName())) {
        wovenClass.getDynamicImports().add("org.osgi.framework");
        weavingHookCalled.set(true);
      }
    }
  }
,null);
  try {
    Subsystem s=installSubsystemFromFile(APPLICATION_A);
    try {
      assertNull("Import-Package header should not exist",s.getSubsystemHeaders(null).get(Constants.IMPORT_PACKAGE));
      Bundle a=getConstituentAsBundle(s,BUNDLE_A,null,null);
      a.loadClass("Empty");
      assertTrue("Weaving hook not called",weavingHookCalled.get());
      try {
        a.loadClass("org.osgi.framework.Bundle");
      }
 catch (      Exception e) {
        fail("Woven dynamic package import not added to the region's sharing policy");
      }
    }
  finally {
      try {
        s.uninstall();
      }
 catch (      Exception e) {
      }
    }
  }
  finally {
    try {
      reg.unregister();
    }
 catch (    Exception e) {
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyThatDynamicImportNeedsHandling() throws Exception {
  Subsystem subsystem=installSubsystemFromFile("dynamicImport.esa");
  try {
    startSubsystem(subsystem);
    Bundle[] bundles=subsystem.getBundleContext().getBundles();
    for (    Bundle b : bundles) {
      System.out.println(b.getSymbolicName() + " -> " + b.getState());
    }
    fail("dynamicImport.esa started when we didn't expect it to");
  }
 catch (  SubsystemException sx) {
    Throwable cause=sx.getCause();
    assertTrue("BundleException expected",cause instanceof BundleException);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.HelloWorldTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testHelloFromIDirectory() throws Exception {
  try {
    installSubsystem(getRootSubsystem(),TestIDirectoryFinder.HELLO_ID_STRING,null,(Boolean[])null);
    fail("installed esa application from idir without an idirfinder service, shouldn't be possible.");
  }
 catch (  SubsystemException se) {
  }
  Dictionary<String,String> properties=new Hashtable<String,String>();
  properties.put(IDirectoryFinder.IDIR_FINDERID_KEY,TestIDirectoryFinder.IDIR_FINDERID_VALUE);
  ServiceRegistration serviceRegistration=bundleContext.registerService(IDirectoryFinder.class,new TestIDirectoryFinder(),properties);
  Subsystem subsystem=installSubsystem(getRootSubsystem(),TestIDirectoryFinder.HELLO_ID_STRING,null,(Boolean[])null);
  try {
    checkHelloSubsystem(subsystem);
  }
  finally {
    uninstallSubsystemSilently(subsystem);
    if (serviceRegistration != null)     serviceRegistration.unregister();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.InstallTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testLocationAsDirectoryUrl() throws Exception {
  File file=new File("compositeDir");
  try {
    Subsystem subsystem=installSubsystem(getRootSubsystem(),file.toURI().toString(),null,(Boolean[])null);
    try {
      assertSymbolicName("org.apache.aries.subsystem.itests.composite.dir",subsystem);
      assertConstituents(3,subsystem);
      assertConstituent(subsystem,"org.apache.aries.subsystem.itests.composite.dir.bundle.a");
      Bundle b=getConstituentAsBundle(subsystem,"org.apache.aries.subsystem.itests.composite.dir.bundle.a",null,null);
      assertLocation(subsystem.getLocation() + "!/" + "a.jar",b.getLocation());
      assertClassLoadable("a.A",b);
      assertChildren(1,subsystem);
      Subsystem child=subsystem.getChildren().iterator().next();
      assertSymbolicName("org.apache.aries.subsystem.itests.application.dir",child);
      assertConstituent(child,"org.apache.aries.subsystem.itests.composite.dir.bundle.b");
      b=getConstituentAsBundle(child,"org.apache.aries.subsystem.itests.composite.dir.bundle.b",null,null);
      assertLocation(child.getLocation() + "!/" + "b.jar",b.getLocation());
      assertClassLoadable("b.B",b);
      assertChildren(1,child);
      child=child.getChildren().iterator().next();
      assertSymbolicName("org.apache.aries.subsystem.itests.feature.dir",child);
      assertConstituent(subsystem,"org.apache.aries.subsystem.itests.composite.dir.bundle.a");
      b=getConstituentAsBundle(child,"org.apache.aries.subsystem.itests.composite.dir.bundle.a",null,null);
      assertLocation(child.getLocation() + "!/" + "a.jar",b.getLocation());
      assertClassLoadable("a.A",b);
      assertConstituent(child,"org.apache.aries.subsystem.itests.composite.dir.bundle.b",Version.parseVersion("1"));
      b=getConstituentAsBundle(child,"org.apache.aries.subsystem.itests.composite.dir.bundle.b",Version.parseVersion("1"),null);
      assertLocation(child.getLocation() + "!/" + "b.jar",b.getLocation());
      assertClassLoadable("b.B",b);
    }
  finally {
      uninstallSubsystemSilently(subsystem);
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("Subsystem installation using directory URL as location failed");
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLocationAsEmptyString() throws Exception {
  try {
    Subsystem a=installSubsystemFromFile(getRootSubsystem(),new File(APPLICATION_A),"");
    try {
      BasicSubsystem basic=(BasicSubsystem)a;
      String location=basic.getLocation();
      assertEquals("Location value should be an empty string","",location);
    }
  finally {
      uninstallSubsystemSilently(a);
    }
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    fail("Subsystem should have installed");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.OptionalDependenciesTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testOptionalImportPackage() throws Exception {
  try {
    Subsystem subsystem=installSubsystemFromFile(APPLICATION_A);
    try {
      try {
        startSubsystem(subsystem);
      }
 catch (      Exception e) {
        e.printStackTrace();
        fail("Missing optional requirements must not cause subsystem start failure");
      }
    }
  finally {
      stopAndUninstallSubsystemSilently(subsystem);
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("Missing optional requirements must not cause subsystem installation failure");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.ProvisionPolicyTest </h4><pre class="type-5 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFailInstallFeatureAcceptDependencies() throws Exception {
  Subsystem subsystem=null;
  try {
    subsystem=installSubsystemFromFile(FEATURE_A);
    fail("Feature with provision-policy:=acceptDependencies did not fail installation");
  }
 catch (  SubsystemException e) {
    assertTrue(e.getMessage().contains("Feature subsystems may not declare a provision-policy of acceptDependencies"));
  }
 finally {
    uninstallSubsystemSilently(subsystem);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.ResolutionTest </h4><pre class="type-5 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMissingBundleRequiredExecutionEnvironment() throws Exception {
  Subsystem applicationB=null;
  try {
    applicationB=installSubsystemFromFile(APPLICATION_B);
    fail("Missing BREE should result in installation failure");
  }
 catch (  Exception e) {
    e.printStackTrace();
    assertTrue("Installation failure should be due to resolution error",e.getCause() instanceof ResolutionException);
  }
 finally {
    uninstallSubsystemSilently(applicationB);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testMissingNativeCodeRequirement() throws Exception {
  Subsystem applicationE=null;
  try {
    applicationE=installSubsystemFromFile(APPLICATION_E);
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    fail("Installation should succeed for Bundle-NativeCode");
  }
  try {
    applicationE.start();
    fail("Expected to fail to install");
  }
 catch (  Exception e) {
  }
 finally {
    uninstallSubsystemSilently(applicationE);
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testContentWithNonConstituentDependencyWithNonConstituentDependency() throws Exception {
  registerRepositoryService(BUNDLE_B);
  Subsystem root=getRootSubsystem();
  Bundle bundleC=installBundleFromFile(BUNDLE_C,root);
  try {
    Subsystem applicationA=installSubsystemFromFile(APPLICATION_A);
    assertHeaderExists(applicationA,Constants.REQUIRE_CAPABILITY);
    RequireCapabilityHeader header=new RequireCapabilityHeader(applicationA.getSubsystemHeaders(null).get(Constants.REQUIRE_CAPABILITY));
    assertEquals("Wrong number of clauses",1,header.getClauses().size());
    Clause clause=header.getClauses().iterator().next();
    assertEquals("Wrong path","a",clause.getPath());
    assertEquals("Wrong resolution directive",Constants.RESOLUTION_MANDATORY,clause.getDirective(Constants.RESOLUTION_DIRECTIVE).getValue());
    assertEquals("Wrong effective directive",Constants.EFFECTIVE_RESOLVE,clause.getDirective(Constants.EFFECTIVE_DIRECTIVE).getValue());
    try {
      applicationA.start();
    }
 catch (    SubsystemException e) {
      fail("Application A should have started");
    }
 finally {
      stopAndUninstallSubsystemSilently(applicationA);
    }
  }
 catch (  SubsystemException e) {
    fail("Application A should have installed." + e.getMessage());
  }
 finally {
    uninstallSilently(bundleC);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testMultipleBundleRequiredExecutionEnvironments() throws Exception {
  Subsystem applicationC=null;
  try {
    applicationC=installSubsystemFromFile(APPLICATION_C);
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("Installation should succeed when at least one BREE is present");
  }
 finally {
    uninstallSubsystemSilently(applicationC);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testNativeCodeRequirement() throws Exception {
  Subsystem applicationD=null;
  try {
    applicationD=installSubsystemFromFile(APPLICATION_D);
    applicationD.start();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("Installation should succeed for Bundle-NativeCode");
  }
 finally {
    uninstallSubsystemSilently(applicationD);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.RootSubsystemTest </h4><pre class="type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegion() throws Exception {
  RegionDigraph digraph=context().getService(RegionDigraph.class);
  Bundle core=getSubsystemCoreBundle();
  Region kernel=digraph.getRegion(core);
  Subsystem root=getRootSubsystem();
  Bundle rootRegionContext=root.getBundleContext().getBundle();
  Region region=digraph.getRegion(root.getBundleContext().getBundle());
  assertEquals("Wrong region",kernel,region);
  core.uninstall();
  rootRegionContext.uninstall();
  Region user=digraph.createRegion("user");
  user.connectRegion(kernel,digraph.createRegionFilterBuilder().allowAll(RegionFilter.VISIBLE_ALL_NAMESPACE).build());
  kernel.connectRegion(user,digraph.createRegionFilterBuilder().allowAll(RegionFilter.VISIBLE_ALL_NAMESPACE).build());
  core=user.installBundle(normalizeBundleLocation(core.getLocation()));
  user=digraph.getRegion(core);
  core.start();
  root=getRootSubsystem();
  region=digraph.getRegion(root.getBundleContext().getBundle());
  assertEquals("Wrong region",user,region);
  try {
    Subsystem applicationA=installSubsystemFromFile(root,APPLICATION_A);
    uninstallSubsystemSilently(applicationA);
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("Subsystem should have installed");
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testUninstallRootRegionBundleWithNoBundleEventHook() throws Exception {
  Bundle bundleA=bundleContext.installBundle(new File(BUNDLE_A).toURI().toURL().toString());
  try {
    Bundle core=getSubsystemCoreBundle();
    core.stop();
    bundleA.uninstall();
    try {
      core.start();
    }
 catch (    BundleException e) {
      fail("Could not start subsystems bundle after uninstalling a root region bundle with no bundle event hook registered");
    }
  }
  finally {
    if (Bundle.UNINSTALLED != bundleA.getState())     bundleA.uninstall();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.ServiceDependencyTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testMissingImportServiceDependencyMandatory() throws Exception {
  try {
    Subsystem subsystem=installSubsystemFromFile(APPLICATION_A);
    uninstallSubsystemSilently(subsystem);
    fail("Installation must fail due to missing service dependency");
  }
 catch (  SubsystemException e) {
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportServiceDependencySatisfiedByContent() throws Exception {
  try {
    Subsystem subsystem=installSubsystemFromFile(APPLICATION_C);
    try {
      assertNull("Generated application Subsystem-ImportService header when dependency satisfied by content",subsystem.getSubsystemHeaders(null).get(SubsystemConstants.SUBSYSTEM_IMPORTSERVICE));
    }
  finally {
      uninstallSubsystemSilently(subsystem);
    }
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    fail("Installation must succeed if service dependency is satisfied");
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testMissingImportServiceDependencyOptional() throws Exception {
  try {
    Subsystem subsystem=installSubsystemFromFile(APPLICATION_B);
    try {
      assertSubsystemImportServiceHeader(subsystem,"bundle.a;resolution:=optional;cardinality:=single;effective:=active");
    }
  finally {
      uninstallSubsystemSilently(subsystem);
    }
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    fail("Installation must succeed if missing service dependency is optional");
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testImportServiceDependencySatisfiedByParent() throws Exception {
  try {
    Subsystem parent=installSubsystemFromFile(APPLICATION_B);
    try {
      Subsystem child=installSubsystemFromFile(parent,APPLICATION_A);
      try {
        assertSubsystemImportServiceHeader(child,"bundle.b;filter:=\"(&(active=true)(mode=shared))\";resolution:=mandatory;cardinality:=single;effective:=active");
      }
  finally {
        uninstallSubsystemSilently(child);
      }
    }
 catch (    SubsystemException e) {
      e.printStackTrace();
      fail("Installation must succeed if service dependency is satisfied");
    }
 finally {
      uninstallSubsystemSilently(parent);
    }
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    fail("Installation must succeed if missing service dependency is optional");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1328Test </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testServiceAndRequireCapabilityInServiceNamespaceVisibilityInImportSharingPolicy() throws Exception {
  Bundle bundleB=installBundleFromFile(BUNDLE_B);
  try {
    Subsystem applicationA=installSubsystemFromFile(APPLICATION_A);
    try {
      applicationA.start();
    }
 catch (    SubsystemException e) {
      e.printStackTrace();
      fail("Subsystem should have started");
    }
 finally {
      stopAndUninstallSubsystemSilently(applicationA);
    }
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    fail("Subsystem should have installed");
  }
 finally {
    uninstallSilently(bundleB);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1381Test </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testVersionAttributeVerusVersionDirective() throws Exception {
  Bundle bundleA=installBundleFromFile(BUNDLE_A);
  try {
    Subsystem compositeA=installSubsystemFromFile(COMPOSITE_A);
    uninstallSubsystemSilently(compositeA);
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    fail("Subsystem should have installed");
  }
 finally {
    uninstallSilently(bundleA);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1383Test </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testStop() throws Exception {
  Subsystem root=getRootSubsystem();
  Subsystem subsystem=installSubsystem(root,APPLICATION_EMPTY,applicationEmpty(),false);
  try {
    startSubsystem(subsystem,false);
    try {
      stopSubsystem(subsystem);
    }
 catch (    Exception e) {
      e.printStackTrace();
      fail("Subsystem should have stopped");
    }
  }
  finally {
    uninstallSubsystemSilently(subsystem);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test7() throws Exception {
  Subsystem root=getRootSubsystem();
  subsystemEvents.clear();
  try {
    Subsystem subsystem=root.install(APPLICATION_INSTALL_FAILED,applicationInstallFailed());
    uninstallSubsystemSilently(subsystem);
    fail("Subsystem should not have installed");
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    long id=lastSubsystemId();
    assertEvent(id,APPLICATION_INSTALL_FAILED,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALLING,subsystemEvents.poll(id,5000),ServiceEvent.REGISTERED);
    assertEvent(id,APPLICATION_INSTALL_FAILED,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALL_FAILED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
    assertEvent(id,APPLICATION_INSTALL_FAILED,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.UNINSTALLING,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
    assertEvent(id,APPLICATION_INSTALL_FAILED,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.UNINSTALLED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testStart() throws Exception {
  Subsystem root=getRootSubsystem();
  Subsystem subsystem=installSubsystem(root,APPLICATION_EMPTY,applicationEmpty(),false);
  try {
    startSubsystem(subsystem,false);
    stopSubsystemSilently(subsystem);
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("Subsystem should have started");
  }
 finally {
    uninstallSubsystemSilently(subsystem);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testInstall() throws Exception {
  Subsystem root=getRootSubsystem();
  try {
    Subsystem subsystem=installSubsystem(root,APPLICATION_EMPTY,applicationEmpty(),false);
    uninstallSubsystemSilently(subsystem);
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("Subsystem should have installed");
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testAutoInstallDependenciesComposite() throws Exception {
  Subsystem root=getRootSubsystem();
  Subsystem b=installSubsystem(root,"b",new SubsystemArchiveBuilder().symbolicName("b").type(SubsystemConstants.SUBSYSTEM_TYPE_COMPOSITE + ';' + AriesProvisionDependenciesDirective.RESOLVE.toString()).content("a;version=\"[0,0]\"").exportPackage("a").importPackage("b").bundle("a",new BundleArchiveBuilder().symbolicName("a").importPackage("b").exportPackage("a").build()).bundle("b",new BundleArchiveBuilder().symbolicName("b").exportPackage("b").build()).build(),false);
  uninstallableSubsystems.add(b);
  try {
    Subsystem a=installSubsystem(root,"a",new SubsystemArchiveBuilder().symbolicName("a").type(SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION).bundle("a",new BundleArchiveBuilder().symbolicName("a").importPackage("a").build()).build(),true);
    uninstallableSubsystems.add(a);
    assertState(EnumSet.of(State.INSTALLED,State.RESOLVED),b);
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("Subsystem should have installed");
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testMatchingCapabilityInDisconnectedRegion() throws Exception {
  Subsystem root=getRootSubsystem();
  BundleArchiveBuilder b1Builder=new BundleArchiveBuilder().symbolicName("b1").exportPackage("b1");
  Bundle b1=root.getBundleContext().installBundle("b1",b1Builder.build());
  try {
    Subsystem a1=installSubsystem(root,"a1",new SubsystemArchiveBuilder().symbolicName("a1").type(SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION + ';' + AriesProvisionDependenciesDirective.RESOLVE.toString()+ ';'+ SubsystemConstants.PROVISION_POLICY_DIRECTIVE+ ":="+ SubsystemConstants.PROVISION_POLICY_ACCEPT_DEPENDENCIES).build(),false);
    uninstallableSubsystems.add(a1);
    startSubsystem(a1,false);
    stoppableSubsystems.add(a1);
    removeConnectionWithParent(a1);
    Subsystem a2=installSubsystem(a1,"a2",new SubsystemArchiveBuilder().symbolicName("a2").type(SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION).content("b2").bundle("b2",new BundleArchiveBuilder().symbolicName("b2").importPackage("b1").build()).bundle("b1",b1Builder.build()).build(),false);
    uninstallableSubsystems.add(a2);
    assertState(State.INSTALLING,a2);
    assertNotConstituent(a1,"b1");
    try {
      startSubsystem(a2,false);
      stoppableSubsystems.add(a2);
      assertConstituent(a1,"b1");
    }
 catch (    SubsystemException e) {
      e.printStackTrace();
      fail("Subsystem should have started");
    }
  }
  finally {
    uninstallSilently(b1);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test4e3bCompliance() throws Exception {
  serviceRegistrations.add(bundleContext.registerService(Repository.class,new TestRepository.Builder().resource(new TestRepositoryContent.Builder().capability(new TestCapability.Builder().namespace(IdentityNamespace.IDENTITY_NAMESPACE).attribute(IdentityNamespace.IDENTITY_NAMESPACE,"a").attribute(IdentityNamespace.CAPABILITY_VERSION_ATTRIBUTE,Version.emptyVersion).attribute(IdentityNamespace.CAPABILITY_TYPE_ATTRIBUTE,IdentityNamespace.TYPE_BUNDLE)).capability(new TestCapability.Builder().namespace(PackageNamespace.PACKAGE_NAMESPACE).attribute(PackageNamespace.PACKAGE_NAMESPACE,"x").attribute(IdentityNamespace.CAPABILITY_VERSION_ATTRIBUTE,Version.emptyVersion)).capability(new TestCapability.Builder().namespace(BundleNamespace.BUNDLE_NAMESPACE).attribute(BundleNamespace.BUNDLE_NAMESPACE,"a").attribute(BundleNamespace.CAPABILITY_BUNDLE_VERSION_ATTRIBUTE,Version.emptyVersion)).content(new BundleArchiveBuilder().symbolicName("a").exportPackage("x").buildAsBytes()).build()).resource(new TestRepositoryContent.Builder().capability(new TestCapability.Builder().namespace(IdentityNamespace.IDENTITY_NAMESPACE).attribute(IdentityNamespace.IDENTITY_NAMESPACE,"b").attribute(IdentityNamespace.CAPABILITY_VERSION_ATTRIBUTE,Version.emptyVersion).attribute(IdentityNamespace.CAPABILITY_TYPE_ATTRIBUTE,IdentityNamespace.TYPE_BUNDLE)).capability(new TestCapability.Builder().namespace("y")).content(new BundleArchiveBuilder().symbolicName("b").header("Provide-Capability","y").buildAsBytes()).build()).build(),null));
  Subsystem root=getRootSubsystem();
  try {
    Subsystem s1=installSubsystem(root,"s1",new SubsystemArchiveBuilder().symbolicName("s1").type(SubsystemConstants.SUBSYSTEM_TYPE_COMPOSITE).subsystem("s3",new SubsystemArchiveBuilder().symbolicName("s3").type(SubsystemConstants.SUBSYSTEM_TYPE_COMPOSITE).subsystem("s2",new SubsystemArchiveBuilder().symbolicName("s2").type(SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION).bundle("c",new BundleArchiveBuilder().symbolicName("c").importPackage("x").build()).bundle("d",new BundleArchiveBuilder().symbolicName("d").header("Require-Bundle","a").build()).bundle("e",new BundleArchiveBuilder().symbolicName("e").header("Require-Capability","y").build()).build()).build()).build(),true);
    uninstallableSubsystems.add(s1);
    fail("Subsystem should not have installed");
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test12() throws Exception {
  Subsystem root=getRootSubsystem();
  subsystemEvents.clear();
  Subsystem subsystem=root.install(APPLICATION_START_FAILURE,applicationStartFailure());
  try {
    subsystem.start();
    stopSubsystemSilently(subsystem);
    fail("Subsystem should not have started");
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    long id=lastSubsystemId();
    assertEvent(id,APPLICATION_START_FAILURE,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALLING,subsystemEvents.poll(id,5000),ServiceEvent.REGISTERED);
    assertEvent(id,APPLICATION_START_FAILURE,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALLED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
    assertEvent(id,APPLICATION_START_FAILURE,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.RESOLVING,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
    assertEvent(id,APPLICATION_START_FAILURE,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.RESOLVED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
    assertEvent(id,APPLICATION_START_FAILURE,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.STARTING,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
    assertEvent(id,APPLICATION_START_FAILURE,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.RESOLVED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
  }
 finally {
    uninstallSubsystemSilently(subsystem);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testUninstall() throws Exception {
  Subsystem root=getRootSubsystem();
  Subsystem subsystem=installSubsystem(root,APPLICATION_EMPTY,applicationEmpty(),false);
  try {
    uninstallSubsystem(subsystem);
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("Subsystem should have uninstalled");
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test10() throws Exception {
  Subsystem root=getRootSubsystem();
  try {
    Subsystem subsystem=installSubsystem(root,APPLICATION_INVALID_PROVISION_DEPENDENCIES,applicationInvalidProvisionDependencies(),false);
    uninstallSubsystemSilently(subsystem);
    fail("Subsystem should not have installed");
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testAutoInstallDependenciesFeature() throws Exception {
  Subsystem root=getRootSubsystem();
  Subsystem shared=installSubsystem(root,"shared",new SubsystemArchiveBuilder().symbolicName("shared").type(SubsystemConstants.SUBSYSTEM_TYPE_COMPOSITE + ';' + AriesProvisionDependenciesDirective.RESOLVE.toString()+ ';'+ SubsystemConstants.PROVISION_POLICY_DIRECTIVE+ ":="+ SubsystemConstants.PROVISION_POLICY_ACCEPT_DEPENDENCIES).build(),false);
  uninstallableSubsystems.add(shared);
  startSubsystem(shared,false);
  Subsystem b=installSubsystem(shared,"b",new SubsystemArchiveBuilder().symbolicName("b").type(SubsystemConstants.SUBSYSTEM_TYPE_FEATURE).content("a").bundle("a",new BundleArchiveBuilder().symbolicName("a").importPackage("b").exportPackage("a").build()).bundle("b",new BundleArchiveBuilder().symbolicName("b").exportPackage("b").build()).build(),false);
  try {
    installSubsystem(shared,"a",new SubsystemArchiveBuilder().symbolicName("a").type(SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION + ';' + AriesProvisionDependenciesDirective.INSTALL.toString()).bundle("a",new BundleArchiveBuilder().symbolicName("a").importPackage("a").build()).build(),true);
    assertState(EnumSet.of(State.INSTALLED,State.RESOLVED),b);
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("Subsystem should have installed");
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test15a() throws Exception {
  Subsystem root=getRootSubsystem();
  try {
    Subsystem subsystem=installSubsystem(root,FEATURE_PROVISION_DEPENDENCIES_RESOLVE,featureProvisionDependenciesResolve(),false);
    uninstallSubsystemSilently(subsystem);
    fail("Subsystem should not have installed");
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test16b() throws Exception {
  Subsystem root=getRootSubsystem();
  Subsystem application=installSubsystem(root,"application",new SubsystemArchiveBuilder().symbolicName("application").type(SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION + ';' + AriesProvisionDependenciesDirective.INSTALL.toString()).build(),true);
  try {
    Subsystem feature=installSubsystem(application,"feature",new SubsystemArchiveBuilder().symbolicName("feature").type(SubsystemConstants.SUBSYSTEM_TYPE_FEATURE + ';' + AriesProvisionDependenciesDirective.INSTALL.toString()).build(),true);
    uninstallSubsystemSilently(feature);
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    fail("Subsystem should have installed");
  }
 finally {
    uninstallSubsystemSilently(application);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testProvideCapabilityNamespaceOnly() throws Exception {
  Subsystem root=getRootSubsystem();
  Subsystem c1=installSubsystem(root,"c1",new SubsystemArchiveBuilder().symbolicName("c1").type(SubsystemConstants.SUBSYSTEM_TYPE_COMPOSITE).provideCapability("y").build());
  uninstallableSubsystems.add(c1);
  try {
    startSubsystem(c1);
    stoppableSubsystems.add(c1);
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    fail("Subsystem should have started");
  }
}

</code></pre>

<br>
<pre class="type-5 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test8() throws Exception {
  Subsystem root=getRootSubsystem();
  try {
    Subsystem subsystem=installSubsystem(root,APPLICATION_INSTALL_FAILED,applicationInstallFailed(),false);
    uninstallSubsystemSilently(subsystem);
    fail("Subsystem should not have installed");
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    assertEquals("Subsystem service should not exist",0,bundleContext.getServiceReferences(Subsystem.class,"(" + SubsystemConstants.SUBSYSTEM_ID_PROPERTY + "="+ lastSubsystemId()+ ")").size());
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test11() throws Exception {
  Subsystem root=getRootSubsystem();
  subsystemEvents.clear();
  Subsystem subsystem=root.install(APPLICATION_DEPENDENCY_IN_ARCHIVE,applicationDependencyInArchive());
  ServiceRegistration<ResolverHookFactory> registration=bundleContext.registerService(ResolverHookFactory.class,new ResolverHookFactory(){
    @Override public ResolverHook begin(    Collection<BundleRevision> triggers){
      return new ResolverHook(){
        @Override public void filterResolvable(        Collection<BundleRevision> candidates){
          for (Iterator<BundleRevision> i=candidates.iterator(); i.hasNext(); ) {
            BundleRevision revision=i.next();
            if (revision.getSymbolicName().equals(BUNDLE_B)) {
              i.remove();
            }
          }
        }
        @Override public void filterSingletonCollisions(        BundleCapability singleton,        Collection<BundleCapability> collisionCandidates){
        }
        @Override public void filterMatches(        BundleRequirement requirement,        Collection<BundleCapability> candidates){
        }
        @Override public void end(){
        }
      }
;
    }
  }
,null);
  try {
    subsystem.start();
    stopSubsystemSilently(subsystem);
    fail("Subsystem should not have started");
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    long id=lastSubsystemId();
    assertEvent(id,APPLICATION_DEPENDENCY_IN_ARCHIVE,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALLING,subsystemEvents.poll(id,5000),ServiceEvent.REGISTERED);
    assertEvent(id,APPLICATION_DEPENDENCY_IN_ARCHIVE,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALLED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
    assertEvent(id,APPLICATION_DEPENDENCY_IN_ARCHIVE,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.RESOLVING,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
    assertEvent(id,APPLICATION_DEPENDENCY_IN_ARCHIVE,Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALLED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
  }
 finally {
    registration.unregister();
    uninstallSubsystemSilently(subsystem);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testImplicitlyInstalledChildOverridesProvisionDependencies() throws Exception {
  Subsystem root=getRootSubsystem();
  subsystemEvents.clear();
  try {
    Subsystem subsystem=root.install("parent",new SubsystemArchiveBuilder().symbolicName("parent").type(SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION + ';' + AriesProvisionDependenciesDirective.INSTALL.toString()).subsystem("child",new SubsystemArchiveBuilder().symbolicName("child").type(SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION + ';' + AriesProvisionDependenciesDirective.RESOLVE.toString()).build()).build());
    uninstallSubsystemSilently(subsystem);
    fail("Subsystem should not have installed");
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test16a() throws Exception {
  Subsystem root=getRootSubsystem();
  try {
    Subsystem subsystem=installSubsystem(root,FEATURE_PROVISION_DEPENDENCIES_INSTALL,new SubsystemArchiveBuilder().symbolicName("application").type(SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION + ';' + AriesProvisionDependenciesDirective.INSTALL.toString()).build(),true);
    uninstallSubsystemSilently(subsystem);
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    fail("Subsystem should have installed");
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test15b() throws Exception {
  Subsystem root=getRootSubsystem();
  Subsystem application=installSubsystem(root,APPLICATION_PROVISION_DEPENDENCIES_INSTALL,applicationProvisionDependenciesInstall(),true);
  try {
    Subsystem feature=installSubsystem(application,FEATURE_PROVISION_DEPENDENCIES_RESOLVE,featureProvisionDependenciesResolve(),false);
    uninstallSubsystemSilently(feature);
    fail("Subsystem should not have installed");
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
  }
 finally {
    uninstallSubsystemSilently(application);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testInstallChildIntoInstallingParent() throws Exception {
  Subsystem root=getRootSubsystem();
  Subsystem subsystem=installSubsystem(root,APPLICATION_DEPENDENCY_IN_ARCHIVE,applicationDependencyInArchive(),false);
  try {
    assertState(State.INSTALLING,subsystem);
    installSubsystem(subsystem,APPLICATION_A,applicationA(),false);
    fail("Subsystem should not have installed");
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
  }
 finally {
    uninstallSubsystemSilently(subsystem);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test16c() throws Exception {
  Subsystem root=getRootSubsystem();
  try {
    Subsystem subsystem=installSubsystem(root,"application",new SubsystemArchiveBuilder().symbolicName("application").type(SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION + ';' + AriesProvisionDependenciesDirective.RESOLVE.toString()).subsystem("feature",new SubsystemArchiveBuilder().symbolicName("feature").type(SubsystemConstants.SUBSYSTEM_TYPE_FEATURE + ';' + AriesProvisionDependenciesDirective.RESOLVE.toString()).build()).build(),false);
    uninstallSubsystemSilently(subsystem);
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    fail("Subsystem should have installed");
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test9() throws Exception {
  Subsystem root=getRootSubsystem();
  Subsystem subsystem=installSubsystem(root,APPLICATION_MISSING_DEPENDENCY,applicationMissingDependency(),false);
  try {
    startSubsystem(subsystem,false);
    stopSubsystemSilently(subsystem);
    fail("Subsystem should not have started");
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    assertState(State.INSTALLING,subsystem);
  }
 finally {
    uninstallSubsystemSilently(subsystem);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1404Test </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testProvisionedSyntheticResourceWithMandatoryRequirementAndApplicationImportService() throws Exception {
  Subsystem applicationB=installSubsystemFromFile(APPLICATION_B);
  try {
    try {
      restartSubsystemsImplBundle();
    }
 catch (    SubsystemException e) {
      e.printStackTrace();
      fail("Core bundle should have restarted");
    }
  }
  finally {
    stopAndUninstallSubsystemSilently(applicationB);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testProvisionedSyntheticResourceWithOptionalRequirement() throws Exception {
  Subsystem applicationA=installSubsystemFromFile(APPLICATION_A);
  try {
    try {
      restartSubsystemsImplBundle();
    }
 catch (    SubsystemException e) {
      e.printStackTrace();
      fail("Core bundle should have restarted");
    }
  }
  finally {
    stopAndUninstallSubsystemSilently(applicationA);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1408Test </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testRequirementFromRemoteRepositoryConvertsToRequireCapability() throws Exception {
  Bundle bundleB=installBundleFromFile(BUNDLE_B);
  try {
    Subsystem applicationA=installSubsystemFromFile(APPLICATION_A);
    uninstallSubsystemSilently(applicationA);
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    fail("Subsystem should have installed");
  }
 finally {
    uninstallSilently(bundleB);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1416Test </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testSystemRepositoryBundlePreferredProvider() throws Exception {
  Subsystem root=getRootSubsystem();
  Bundle bundleB=installBundleFromFile(BUNDLE_B,root);
  try {
    Subsystem applicationA=installSubsystemFromFile(APPLICATION_A);
    uninstallSubsystemSilently(applicationA);
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    fail("Subsystem should have installed");
  }
 finally {
    uninstallSilently(bundleB);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testSharedContentBundlePreferredProvider() throws Exception {
  Subsystem featureA=installSubsystemFromFile(FEATURE_A);
  try {
    Subsystem featureB=installSubsystemFromFile(FEATURE_B);
    uninstallSubsystemSilently(featureB);
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    fail("Subsystem should have installed");
  }
 finally {
    uninstallSubsystemSilently(featureA);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1419Test </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testProvideCapability() throws Exception {
  Bundle bundleB=installBundleFromFile(BUNDLE_B);
  try {
    Subsystem applicationB=installSubsystemFromFile(APPLICATION_B);
    uninstallSubsystemSilently(applicationB);
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    fail("Subsystem should have installed");
  }
 finally {
    uninstallSilently(bundleB);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1423Test </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testEmptyNonOsgiHeaders() throws Exception {
  try {
    Subsystem applicationA=installSubsystemFromFile(APPLICATION_A);
    uninstallSubsystemSilently(applicationA);
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    fail("Subsystem should have installed");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1425Test </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testFragmentSelected() throws Exception {
  try {
    Subsystem applicationA=installSubsystemFromFile(APPLICATION_A);
    try {
      assertConstituent(applicationA,BUNDLE_A,null,IdentityNamespace.TYPE_FRAGMENT);
    }
  finally {
      uninstallSubsystemSilently(applicationA);
    }
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    fail("Subsystem should have installed");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1429Test </h4><pre class="type-5 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMissingParentChildEdgeNotTolerated() throws Exception {
  Subsystem applicationA=installSubsystemFromFile(APPLICATION_A);
  try {
    removeConnectionWithParent(applicationA);
    try {
      ((AriesSubsystem)applicationA).addRequirements(Collections.singletonList((Requirement)new TestRequirement.Builder().namespace(PackageNamespace.PACKAGE_NAMESPACE).attribute(PackageNamespace.PACKAGE_NAMESPACE,"org.osgi.framework").build()));
      fail("No exception received");
    }
 catch (    SubsystemException e) {
      Throwable cause=e.getCause();
      assertNotNull("Wrong cause",cause);
      assertEquals("Wrong cause",IllegalStateException.class,cause.getClass());
    }
  }
  finally {
    uninstallSubsystemSilently(applicationA);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1435Test </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testNoProviders() throws Exception {
  registerWeavingHook("b");
  Subsystem applicationB=installSubsystemFromFile(APPLICATION_B);
  try {
    Bundle bundleA=getConstituentAsBundle(applicationB,BUNDLE_A,null,null);
    bundleA.loadClass("a.A");
    try {
      bundleA.loadClass("b.B");
      fail("Class should not have loaded");
    }
 catch (    ClassNotFoundException e) {
    }
    testSharingPolicy(applicationB,"b",false);
  }
  finally {
    uninstallSubsystemSilently(applicationB);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testConnectedNonSubsystemRegions() throws Exception {
  registerWeavingHook("b");
  Bundle bundleB=getRootSubsystem().getBundleContext().installBundle(BUNDLE_B,new ByteArrayInputStream(createBundleBContent()));
  uninstallableBundles.add(bundleB);
  Subsystem applicationA=installSubsystemFromFile(APPLICATION_A);
  uninstallableSubsystems.add(applicationA);
  Subsystem applicationB=getChild(applicationA,APPLICATION_B);
  uninstallSubsystem(applicationB);
  removeConnectionWithParent(applicationA);
  Region region=getRegion(applicationA);
  RegionDigraph digraph=region.getRegionDigraph();
  Region r1=digraph.createRegion("R1");
  deletableRegions.add(r1);
  region.connectRegion(r1,digraph.createRegionFilterBuilder().allow("y","(y=x)").build());
  Region r2a=digraph.createRegion("R2A");
  deletableRegions.add(r2a);
  Bundle bundleB1=r2a.installBundleAtLocation(BUNDLE_B + '1',new ByteArrayInputStream(createBundleBContent()));
  uninstallableBundles.add(bundleB1);
  Region r2b=digraph.createRegion("R2B");
  deletableRegions.add(r2b);
  r2b.connectRegion(r2a,digraph.createRegionFilterBuilder().allow("osgi.wiring.package","(&(osgi.wiring.package=b)(version=0))").build());
  region.connectRegion(r2b,digraph.createRegionFilterBuilder().allow("osgi.wiring.package","(&(osgi.wiring.package=b)(version=0))").build());
  applicationB=installSubsystemFromFile(applicationA,APPLICATION_B);
  uninstallableSubsystems.add(applicationB);
  try {
    testDynamicImport(applicationB,"b.B");
  }
 catch (  AssertionError e) {
    fail("Dynamic import should have succeeded");
  }
  testSharingPolicy(applicationB,"b",true);
  testSharingPolicy(applicationA,"b",true);
  testSharingPolicy(getRootSubsystem(),"b",false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testDisconnectedEdgeWithParent() throws Exception {
  registerWeavingHook("b");
  Bundle bundleB=getRootSubsystem().getBundleContext().installBundle(BUNDLE_B,new ByteArrayInputStream(createBundleBContent()));
  try {
    Subsystem applicationA=installSubsystemFromFile(APPLICATION_A);
    try {
      Subsystem applicationB=getChild(applicationA,APPLICATION_B);
      uninstallSubsystem(applicationB);
      removeConnectionWithParent(applicationA);
      applicationB=installSubsystemFromFile(applicationA,APPLICATION_B);
      try {
        try {
          testDynamicImport(applicationB,"b.B");
          fail("Dynamic import should have failed");
        }
 catch (        AssertionError e) {
        }
        testSharingPolicy(applicationB,"b",true);
        testSharingPolicy(applicationA,"b",false);
        testSharingPolicy(getRootSubsystem(),"b",false);
      }
  finally {
        uninstallSubsystemSilently(applicationB);
      }
    }
  finally {
      uninstallSubsystemSilently(applicationA);
    }
  }
  finally {
    uninstallSilently(bundleB);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.MoveBundleTest </h4><pre class="type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Create one scope off of the root scope with the following structure. 
 * R
 * |
 * S
 * Install a bundle using the test bundle's bundle context. This should add 
 * the bundle to R since the test bundle is in R. Next, move the bundle into
 * S without removing it from R. This should result in an 
 * IllegalStateException. Finally, correct the error using the same 
 * ScopeUpdate objects and commit again. This should succeed, and the bundle
 * should now be in S.
 * @throws Exception
 */
@Test public void test2() throws Exception {
  Bundle tb2=installBundle("tb-2.jar");
  Scope root=getScope();
  ScopeUpdate rootUpdate=root.newScopeUpdate();
  ScopeUpdate sUpdate=rootUpdate.newChild("S");
  rootUpdate.getChildren().add(sUpdate);
  rootUpdate.commit();
  Scope s=sUpdate.getScope();
  assertTrue(root.getBundles().contains(tb2));
  assertFalse(s.getBundles().contains(tb2));
  rootUpdate=root.newScopeUpdate();
  sUpdate=findChildUpdate("S",rootUpdate);
  sUpdate.getBundles().add(tb2);
  try {
    rootUpdate.commit();
    fail();
  }
 catch (  IllegalStateException e) {
  }
  assertTrue(root.getBundles().contains(tb2));
  assertFalse(s.getBundles().contains(tb2));
  rootUpdate.getBundles().remove(tb2);
  rootUpdate.commit();
  assertFalse(root.getBundles().contains(tb2));
  assertTrue(s.getBundles().contains(tb2));
  tb2.uninstall();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.ScopeAdminTest </h4><pre class="type-4 type-12 type-5 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBundleServiceIsolation() throws Exception {
  assertNotNull("scope admin should not be null",scope);
  System.out.println("able to get scope admin service");
  bt=new BundleTracker(bundleContext,Bundle.INSTALLED | Bundle.UNINSTALLED | Bundle.ACTIVE,new BundleTrackerCustomizer(){
    public synchronized Object addingBundle(    Bundle bundle,    BundleEvent event){
      if (event == null) {
        System.out.println("ScopeAdminTest - adding Bundle: " + bundle.getSymbolicName() + " event: null");
      }
 else {
        System.out.println("ScopeAdminTest - adding Bundle: " + bundle.getSymbolicName() + " event: "+ event.getType());
        addEventCount++;
      }
      return bundle;
    }
    public synchronized void modifiedBundle(    Bundle bundle,    BundleEvent event,    Object object){
      if (event == null) {
        System.out.println("ScopeAdminTest - modifying Bundle: " + bundle.getSymbolicName() + " event: null");
      }
 else {
        System.out.println("ScopeAdminTest - modifying Bundle: " + bundle.getSymbolicName() + " event: "+ event.getType());
        modifyEventCount++;
      }
    }
    public synchronized void removedBundle(    Bundle bundle,    BundleEvent event,    Object object){
      if (event == null) {
        System.out.println("ScopeAdminTest - removing Bundle: " + bundle.getSymbolicName() + " event: null");
      }
 else {
        System.out.println("ScopeAdminTest - removing Bundle: " + bundle.getSymbolicName() + " event: "+ event.getType());
        removeEventCount++;
      }
    }
  }
);
  bt.open();
  ScopeUpdate su=scope.newScopeUpdate();
  ScopeUpdate childScopeUpdate=su.newChild("scope_test1");
  su.getChildren().add(childScopeUpdate);
  addPackageImportPolicy("org.osgi.framework",childScopeUpdate);
  addPackageImportPolicy("org.osgi.util.tracker",childScopeUpdate);
  InstallInfo info1=new InstallInfo("helloIsolation",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT"));
  InstallInfo info2=new InstallInfo("helloIsolationRef",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT"));
  List<InstallInfo> bundlesToInstall=childScopeUpdate.getBundlesToInstall();
  bundlesToInstall.add(info1);
  bundlesToInstall.add(info2);
  su.commit();
  assertEquals("add event count should be 0 since 0 bundles are installed in root scope",0,addEventCount);
  assertEquals("modify event count should be 0",0,modifyEventCount);
  assertEquals("remove event count should be 0",0,removeEventCount);
  Collection<Bundle> bundlesToStart=childScopeUpdate.getScope().getBundles();
  for (  Bundle b : bundlesToStart) {
    b.start();
  }
  assertEquals("add event count should be 0 since 0 bundles are installed in root scope",0,addEventCount);
  assertEquals("modify event count should be 0",0,modifyEventCount);
  assertEquals("remove event count should be 0",0,removeEventCount);
  try {
    ServiceReference sr=bundleContext.getServiceReference(HelloIsolation.class.getName());
    fail("should not be able to get the sr for HelloIsolation service");
  }
 catch (  Exception ex) {
  }
catch (  Error er) {
  }
  Bundle[] bundles=bundleContext.getBundles();
  for (  Bundle b : bundles) {
    System.out.println("Bundle is " + b.getBundleId() + ": "+ b.getSymbolicName());
    if (b.getSymbolicName().indexOf("org.apache.aries.subsystem.example.helloIsolation") > -1) {
      fail("bundles with name starts with org.apache.aries.subsystem.example.helloIsolation should be in a different scope");
    }
  }
  Collection<Scope> children=scope.getChildren();
  assertEquals(1,children.size());
  for (  Scope child : children) {
    if (child.getName().equals("scope_test1")) {
      Collection<Bundle> buns=child.getBundles();
      assertEquals(2,buns.size());
      assertEquals(0,child.getChildren().size());
      for (      Bundle b : buns) {
        assertTrue(b.getSymbolicName().indexOf("org.apache.aries.subsystem.example.helloIsolation") > -1);
      }
    }
  }
  URL url=new URL("mvn:org.apache.felix/org.apache.felix.fileinstall/2.0.8");
  bundleContext.installBundle("org.apache.felix.fileinstall-rootScope",url.openStream());
  assertEquals("add event count should be 1 since 1 bundles are installed",1,addEventCount);
  assertEquals("modify event count should be 0",0,modifyEventCount);
  assertEquals("remove event count should be 0",0,removeEventCount);
  su=scope.newScopeUpdate();
  Collection<ScopeUpdate> scopes=su.getChildren();
  childScopeUpdate=scopes.iterator().next();
  Scope childScopeAdmin=childScopeUpdate.getScope();
  assertEquals(scope,childScopeAdmin.getParent());
  scopes.remove(childScopeUpdate);
  su.commit();
  assertFalse(scope.getChildren().contains(childScopeAdmin));
  su=scope.newScopeUpdate();
  assertFalse(su.getChildren().contains(childScopeUpdate));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-3 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testPackageSharingFromTestScope() throws Exception {
  assertNotNull("scope admin should not be null",scope);
  System.out.println("able to get scope admin service");
  ScopeUpdate su=scope.newScopeUpdate();
  ScopeUpdate childScopeUpdate=su.newChild("scope_test1");
  su.getChildren().add(childScopeUpdate);
  addPackageImportPolicy("org.osgi.framework",childScopeUpdate);
  addPackageImportPolicy("org.osgi.util.tracker",childScopeUpdate);
  Map<String,List<SharePolicy>> sharePolicies=childScopeUpdate.getSharePolicies(SharePolicy.TYPE_EXPORT);
  final Filter filter1=FrameworkUtil.createFilter("(&" + "(osgi.wiring.package=org.apache.aries.subsystem.example.helloIsolation)" + ")");
  final Filter filter2=FrameworkUtil.createFilter("(&" + "(scope.share.service=org.apache.aries.subsystem.example.helloIsolation.HelloIsolation)" + ")");
  List<SharePolicy> packagePolicies=sharePolicies.get(BundleRevision.PACKAGE_NAMESPACE);
  if (packagePolicies == null) {
    packagePolicies=new ArrayList<SharePolicy>();
    sharePolicies.put(BundleRevision.PACKAGE_NAMESPACE,packagePolicies);
  }
  packagePolicies.add(new SharePolicy(SharePolicy.TYPE_EXPORT,BundleRevision.PACKAGE_NAMESPACE,filter1));
  List<SharePolicy> servicePolicies=sharePolicies.get("scope.share.service");
  if (servicePolicies == null) {
    servicePolicies=new ArrayList<SharePolicy>();
    sharePolicies.put("scope.share.service",servicePolicies);
  }
  servicePolicies.add(new SharePolicy(SharePolicy.TYPE_EXPORT,"scope.share.service",filter2));
  InstallInfo info1=new InstallInfo("helloIsolation",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT"));
  InstallInfo info2=new InstallInfo("helloIsolationRef",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT"));
  List<InstallInfo> bundlesToInstall=childScopeUpdate.getBundlesToInstall();
  bundlesToInstall.add(info1);
  bundlesToInstall.add(info2);
  su.commit();
  Collection<Bundle> bundlesToStart=childScopeUpdate.getScope().getBundles();
  for (  Bundle b : bundlesToStart) {
    b.start();
  }
  URL url1=new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT");
  Bundle helloIsolationRef=bundleContext.installBundle("helloIsolationRef1-rootScope",url1.openStream());
  try {
    helloIsolationRef.start();
  }
 catch (  Exception ex) {
    fail("should be able to start helloIsolationRef by import packages from scope_test1");
  }
  helloIsolationRef.uninstall();
  su=scope.newScopeUpdate();
  Collection<ScopeUpdate> scopes=su.getChildren();
  childScopeUpdate=scopes.iterator().next();
  Scope childScopeAdmin=childScopeUpdate.getScope();
  assertEquals(scope,childScopeAdmin.getParent());
  scopes.remove(childScopeUpdate);
  su.commit();
  assertFalse(scope.getChildren().contains(childScopeAdmin));
  su=scope.newScopeUpdate();
  assertFalse(su.getChildren().contains(childScopeUpdate));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPackageSharingFromRootScope() throws Exception {
  URL url1=new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT");
  Bundle helloIsolation=bundleContext.installBundle("helloIsolation1-rootScope",url1.openStream());
  try {
    helloIsolation.start();
  }
 catch (  Exception ex) {
    fail("should be able to start helloIsolation");
  }
  ScopeUpdate su=scope.newScopeUpdate();
  ScopeUpdate childScopeUpdate=su.newChild("scope_test1");
  su.getChildren().add(childScopeUpdate);
  addPackageImportPolicy("org.osgi.framework",childScopeUpdate);
  Map<String,List<SharePolicy>> sharePolicies=childScopeUpdate.getSharePolicies(SharePolicy.TYPE_IMPORT);
  final Filter filter1=FrameworkUtil.createFilter("(&" + "(osgi.wiring.package=org.apache.aries.subsystem.example.helloIsolation)" + ")");
  final Filter filter2=FrameworkUtil.createFilter("(&" + "(scope.share.service=org.apache.aries.subsystem.example.helloIsolation.HelloIsolation)" + ")");
  List<SharePolicy> packagePolicies=sharePolicies.get(BundleRevision.PACKAGE_NAMESPACE);
  if (packagePolicies == null) {
    packagePolicies=new ArrayList<SharePolicy>();
    sharePolicies.put(BundleRevision.PACKAGE_NAMESPACE,packagePolicies);
  }
  packagePolicies.add(new SharePolicy(SharePolicy.TYPE_IMPORT,BundleRevision.PACKAGE_NAMESPACE,filter1));
  List<SharePolicy> servicePolicies=sharePolicies.get("scope.share.service");
  if (servicePolicies == null) {
    servicePolicies=new ArrayList<SharePolicy>();
    sharePolicies.put("scope.share.service",servicePolicies);
  }
  servicePolicies.add(new SharePolicy(SharePolicy.TYPE_IMPORT,"scope.share.service",filter2));
  InstallInfo info2=new InstallInfo("helloIsolationRef",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT"));
  List<InstallInfo> bundlesToInstall=childScopeUpdate.getBundlesToInstall();
  bundlesToInstall.add(info2);
  su.commit();
  Collection<Bundle> bundlesToStart=childScopeUpdate.getScope().getBundles();
  for (  Bundle b : bundlesToStart) {
    try {
      b.start();
    }
 catch (    Exception ex) {
      ex.printStackTrace();
      fail("should be able to start helloIsolationRef in scope_test1");
    }
  }
  helloIsolation.uninstall();
  su=scope.newScopeUpdate();
  Collection<ScopeUpdate> scopes=su.getChildren();
  childScopeUpdate=scopes.iterator().next();
  Scope childScopeAdmin=childScopeUpdate.getScope();
  assertEquals(scope,childScopeAdmin.getParent());
  scopes.remove(childScopeUpdate);
  su.commit();
  assertFalse(scope.getChildren().contains(childScopeAdmin));
  su=scope.newScopeUpdate();
  assertFalse(su.getChildren().contains(childScopeUpdate));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testScopeAffinity() throws Exception {
  Scope scope1=createScope(scope,"scope_test1","mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT","0.3");
  Scope scope2=createScope(scope,"scope_test2","mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT","2.0");
  ScopeUpdate su=scope.newScopeUpdate();
  ScopeUpdate childScopeUpdate=su.newChild("scope_test3");
  su.getChildren().add(childScopeUpdate);
  addPackageImportPolicy("org.osgi.framework",childScopeUpdate);
  Scope scope3=childScopeUpdate.getScope();
  Map<String,List<SharePolicy>> sharePolicies=childScopeUpdate.getSharePolicies(SharePolicy.TYPE_IMPORT);
  final Filter filter1=FrameworkUtil.createFilter("(&" + "(osgi.wiring.package=org.apache.aries.subsystem.example.helloIsolation)" + ")");
  final Filter filter2=FrameworkUtil.createFilter("(&" + "(scope.share.service=org.apache.aries.subsystem.example.helloIsolation.HelloIsolation)" + ")");
  List<SharePolicy> packagePolicies=sharePolicies.get(BundleRevision.PACKAGE_NAMESPACE);
  if (packagePolicies == null) {
    packagePolicies=new ArrayList<SharePolicy>();
    sharePolicies.put(BundleRevision.PACKAGE_NAMESPACE,packagePolicies);
  }
  packagePolicies.add(new SharePolicy(SharePolicy.TYPE_IMPORT,BundleRevision.PACKAGE_NAMESPACE,filter1));
  List<SharePolicy> servicePolicies=sharePolicies.get("scope.share.service");
  if (servicePolicies == null) {
    servicePolicies=new ArrayList<SharePolicy>();
    sharePolicies.put("scope.share.service",servicePolicies);
  }
  servicePolicies.add(new SharePolicy(SharePolicy.TYPE_IMPORT,"scope.share.service",filter2));
  InstallInfo info2=new InstallInfo("helloIsolationRef",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT"));
  List<InstallInfo> bundlesToInstall=childScopeUpdate.getBundlesToInstall();
  bundlesToInstall.add(info2);
  su.commit();
  Collection<Bundle> bundlesToStart=childScopeUpdate.getScope().getBundles();
  for (  Bundle b : bundlesToStart) {
    try {
      b.start();
    }
 catch (    Exception ex) {
      ex.printStackTrace();
      fail("should be able to start helloIsolationRef in scope_test1");
    }
  }
  su=scope.newScopeUpdate();
  Collection<ScopeUpdate> scopes=su.getChildren();
  scopes.clear();
  su.commit();
  assertTrue(scope.getChildren().isEmpty());
  assertTrue(scope.newScopeUpdate().getChildren().isEmpty());
}

</code></pre>

<br>
<pre class="type-4 type-5 type-3 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testPackageIsolation() throws Exception {
  assertNotNull("scope admin should not be null",scope);
  System.out.println("able to get scope admin service");
  ScopeUpdate su=scope.newScopeUpdate();
  ScopeUpdate childScopeUpdate=su.newChild("scope_test1");
  su.getChildren().add(childScopeUpdate);
  addPackageImportPolicy("org.osgi.framework",childScopeUpdate);
  addPackageImportPolicy("org.osgi.util.tracker",childScopeUpdate);
  InstallInfo info1=new InstallInfo("helloIsolation",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT"));
  InstallInfo info2=new InstallInfo("helloIsolationRef",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT"));
  List<InstallInfo> bundlesToInstall=childScopeUpdate.getBundlesToInstall();
  bundlesToInstall.add(info1);
  bundlesToInstall.add(info2);
  su.commit();
  Collection<Bundle> bundlesToStart=childScopeUpdate.getScope().getBundles();
  for (  Bundle b : bundlesToStart) {
    b.start();
  }
  URL url1=new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT");
  Bundle helloIsolationRef=bundleContext.installBundle("helloIsolationRef1-rootScope",url1.openStream());
  try {
    helloIsolationRef.start();
    fail("should not be able to start helloIsolationRef since missing import packages");
  }
 catch (  Exception ex) {
  }
  URL url2=new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT");
  Bundle helloIsolation=bundleContext.installBundle("helloIsolation1-rootScope",url2.openStream());
  helloIsolation.start();
  helloIsolationRef.start();
  helloIsolationRef.uninstall();
  helloIsolation.uninstall();
  su=scope.newScopeUpdate();
  Collection<ScopeUpdate> scopes=su.getChildren();
  childScopeUpdate=scopes.iterator().next();
  Scope childScopeAdmin=childScopeUpdate.getScope();
  assertEquals(scope,childScopeAdmin.getParent());
  scopes.remove(childScopeUpdate);
  su.commit();
  assertFalse(scope.getChildren().contains(childScopeAdmin));
  su=scope.newScopeUpdate();
  assertFalse(su.getChildren().contains(childScopeUpdate));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.transaction.TranStrategyTest </h4><pre class="type-15 type-5 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequiresNew_BeginNoActiveTran() throws Exception {
  int[] manStatus=new int[]{Status.STATUS_COMMITTED,Status.STATUS_COMMITTING,Status.STATUS_MARKED_ROLLBACK,Status.STATUS_NO_TRANSACTION,Status.STATUS_PREPARED,Status.STATUS_PREPARING,Status.STATUS_ROLLEDBACK,Status.STATUS_ROLLING_BACK,Status.STATUS_UNKNOWN};
  for (int i=0; i < manStatus.length; i++) {
    c.reset();
    expect(tm.getStatus()).andReturn(manStatus[i]);
    expect(tm.getTransaction()).andReturn(null);
    tm.begin();
    expectLastCall();
    c.replay();
    try {
      assertNull("TransactionStrategy.REQUIRES_NEW.begin() did not return null when manager status value is " + manStatus[i],TransactionAttribute.REQUIRES_NEW.begin(tm).getActiveTransaction());
    }
 catch (    Exception ise) {
      fail("TransactionStrategy.REQUIRES_NEW.begin() threw unexpected exception when manager status value is " + manStatus[i]);
    }
    c.verify();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testNotSupportedFinish(){
  try {
    tm.resume(t);
    EasyMock.expectLastCall();
    c.replay();
    TransactionToken tranToken=new TransactionToken(null,t,TransactionAttribute.NOT_SUPPORTED);
    TransactionAttribute.NOT_SUPPORTED.finish(tm,tranToken);
    c.verify();
    c.reset();
    tranToken=new TransactionToken(null,null,TransactionAttribute.NOT_SUPPORTED);
    TransactionAttribute.NOT_SUPPORTED.finish(tm,tranToken);
  }
 catch (  Exception e) {
    fail("TransactionStrategy.NOT_SUPPORTED.finish() threw unexpected exception, " + e);
  }
}

</code></pre>

<br>
<pre class="type-15 type-5 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNotSupportedBegin() throws Exception {
  expect(tm.getStatus()).andReturn(Status.STATUS_ACTIVE);
  expect(tm.suspend()).andReturn(null);
  c.replay();
  TransactionAttribute.NOT_SUPPORTED.begin(tm);
  c.verify();
  int[] invalids=new int[]{Status.STATUS_COMMITTED,Status.STATUS_COMMITTING,Status.STATUS_MARKED_ROLLBACK,Status.STATUS_NO_TRANSACTION,Status.STATUS_PREPARED,Status.STATUS_PREPARING,Status.STATUS_ROLLEDBACK,Status.STATUS_ROLLING_BACK,Status.STATUS_UNKNOWN};
  for (int i=0; i < invalids.length; i++) {
    c.reset();
    expect(tm.getStatus()).andReturn(invalids[i]);
    expect(tm.getTransaction()).andReturn(null).anyTimes();
    c.replay();
    try {
      assertNull("TransactionStrategy.NOT_SUPPORTED.begin() did not return null when manager status value is " + invalids[i],TransactionAttribute.NOT_SUPPORTED.begin(tm).getActiveTransaction());
    }
 catch (    Exception ise) {
      fail("TransactionStrategy.NOT_SUPPORTED.begin() threw unexpected exception when manager status value is " + invalids[i]);
    }
    c.verify();
  }
}

</code></pre>

<br>
<pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testRequiresNew_Finish() throws Exception {
  int[] allStates=new int[]{Status.STATUS_COMMITTED,Status.STATUS_COMMITTING,Status.STATUS_NO_TRANSACTION,Status.STATUS_ACTIVE,Status.STATUS_PREPARED,Status.STATUS_PREPARING,Status.STATUS_ROLLEDBACK,Status.STATUS_MARKED_ROLLBACK,Status.STATUS_ROLLING_BACK,Status.STATUS_UNKNOWN};
  for (int i=0; i < allStates.length; i++) {
    c.reset();
    expect(tm.getStatus()).andReturn(allStates[i]);
    requiresNew_assertion(tm,allStates[i]);
    tm.resume(EasyMock.anyObject(Transaction.class));
    expectLastCall();
    c.replay();
    try {
      TransactionToken tranToken=new TransactionToken(t,t,TransactionAttribute.REQUIRES_NEW,true);
      TransactionAttribute.REQUIRES_NEW.finish(tm,tranToken);
    }
 catch (    Exception e) {
      fail("TransactionStrategy.REQUIRES_NEW.finish() threw unexpected exception when manager status is " + allStates[i]);
    }
    c.verify();
    c.reset();
    try {
      expect(tm.getStatus()).andReturn(allStates[i]);
      requiresNew_assertion(tm,allStates[i]);
      c.replay();
      TransactionToken tranToken=new TransactionToken(t,null,TransactionAttribute.REQUIRES_NEW,true);
      TransactionAttribute.REQUIRES_NEW.finish(tm,tranToken);
    }
 catch (    Throwable e) {
      e.printStackTrace();
      fail("TransactionStrategy.REQUIRES_NEW.finish() threw unexpected exception when manager status is " + allStates[i]);
    }
 finally {
    }
    c.verify();
  }
}

</code></pre>

<br>
<pre class="type-15 type-5 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNeverBegin() throws Exception {
  expect(tm.getStatus()).andReturn(Status.STATUS_ACTIVE);
  try {
    assertNotNull("TransactionStrategy.NEVER.begin() returned null when manager status is STATUS_ACTIVE",TransactionAttribute.NEVER.begin(tm));
  }
 catch (  IllegalStateException ise) {
  }
catch (  Exception e) {
    fail("TransactionStrategy.NEVER.begin() threw an unexpected exception when tran manager status is STATUS_ACTIVE");
  }
  int[] invalids=new int[]{Status.STATUS_COMMITTED,Status.STATUS_COMMITTING,Status.STATUS_MARKED_ROLLBACK,Status.STATUS_NO_TRANSACTION,Status.STATUS_PREPARED,Status.STATUS_PREPARING,Status.STATUS_ROLLEDBACK,Status.STATUS_ROLLING_BACK,Status.STATUS_UNKNOWN};
  for (int i=0; i < invalids.length; i++) {
    c.reset();
    expect(tm.getStatus()).andReturn(invalids[i]);
    expect(tm.getTransaction()).andReturn(null).anyTimes();
    c.replay();
    try {
      assertNull("TransactionStrategy.NEVER.begin() did not return null when manager status value is " + invalids[i],TransactionAttribute.NEVER.begin(tm).getActiveTransaction());
    }
 catch (    Exception ise) {
      fail("TransactionStrategy.NEVER.begin() threw unexpected exception when manager status value is " + invalids[i]);
    }
    c.verify();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testMandatoryFinish(){
  try {
    TransactionToken tranToken=new TransactionToken(t,null,TransactionAttribute.MANDATORY);
    TransactionAttribute.MANDATORY.finish(tm,tranToken);
  }
 catch (  Exception e) {
    fail("TransactionStrategy.MANDATORY.finish() threw an unexpected exception");
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testNeverFinish(){
  try {
    TransactionToken tranToken=new TransactionToken(null,null,TransactionAttribute.NEVER);
    TransactionAttribute.NEVER.finish(tm,tranToken);
  }
 catch (  Exception e) {
    fail("TransactionStrategy.NEVER.finish() threw an unexpected exception");
  }
}

</code></pre>

<br>
<pre class="type-4 type-15 type-5 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMandatoryBegin() throws Exception {
  expect(tm.getStatus()).andReturn(Status.STATUS_NO_TRANSACTION);
  try {
    assertNotNull("TransactionStrategy.MANDATORY.begin(tm) returned null when manager " + "status is STATUS_NO_TRANSACTION",TransactionAttribute.MANDATORY.begin(tm).getActiveTransaction());
  }
 catch (  IllegalStateException ise) {
  }
catch (  Exception e) {
    fail("TransactionStrategy.MANDATORY.begin() threw an unexpected exception when tran manager status is STATUS_NO_TRANSACTION");
  }
  int[] invalids=new int[]{Status.STATUS_COMMITTED,Status.STATUS_COMMITTING,Status.STATUS_MARKED_ROLLBACK,Status.STATUS_ACTIVE,Status.STATUS_PREPARED,Status.STATUS_PREPARING,Status.STATUS_ROLLEDBACK,Status.STATUS_ROLLING_BACK,Status.STATUS_UNKNOWN};
  for (int i=0; i < invalids.length; i++) {
    c.reset();
    expect(tm.getStatus()).andReturn(invalids[i]);
    expect(tm.getTransaction()).andReturn(null);
    c.replay();
    try {
      Transaction tran=TransactionAttribute.MANDATORY.begin(tm).getActiveTransaction();
      assertNull("TransactionStrategy.MANDATORY.begin() did not return null when manager status value is " + invalids[i],tran);
    }
 catch (    Exception ise) {
      fail("TransactionStrategy.MANDATORY.begin() threw Exception when manager status value is " + invalids[i]);
    }
    c.verify();
  }
}

</code></pre>

<br>
<pre class="type-15 type-5 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequiredBegin() throws Exception {
  expect(tm.getStatus()).andReturn(Status.STATUS_NO_TRANSACTION);
  expect(tm.getTransaction()).andReturn(null);
  tm.begin();
  expectLastCall();
  c.replay();
  TransactionAttribute.REQUIRED.begin(tm);
  c.verify();
  c.reset();
  int[] invalids=new int[]{Status.STATUS_COMMITTED,Status.STATUS_COMMITTING,Status.STATUS_MARKED_ROLLBACK,Status.STATUS_ACTIVE,Status.STATUS_PREPARED,Status.STATUS_PREPARING,Status.STATUS_ROLLEDBACK,Status.STATUS_ROLLING_BACK,Status.STATUS_UNKNOWN};
  for (int i=0; i < invalids.length; i++) {
    c.reset();
    expect(tm.getStatus()).andReturn(invalids[i]);
    expect(tm.getTransaction()).andReturn(null);
    c.replay();
    try {
      assertNull("TransactionStrategy.REQUIRED.begin() did not return null when manager status value is " + invalids[i],TransactionAttribute.REQUIRED.begin(tm).getActiveTransaction());
    }
 catch (    Exception ise) {
      fail("TransactionStrategy.REQUIRED.begin() threw unexpected exception when manager status value is " + invalids[i]);
    }
    c.verify();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.VersionRangeTest </h4><pre class="type-5 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExactVersion() throws Exception {
  VersionRange vr;
  try {
    vr=new VersionRange("[1.0.0, 2.0.0]",true);
    fail("from 1 to 2 not excludsive is not an exact range");
  }
 catch (  IllegalArgumentException e) {
  }
  vr=new VersionRange("[1.0.0, 1.0.0]",true);
  assertTrue(vr.isExactVersion());
  try {
    vr=new VersionRange("(1.0.0, 1.0.0]",true);
    fail("from 1 (not including 1) to 1, is not valid");
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    vr=new VersionRange("[1.0.0, 1.0.0)",true);
    fail("sfrom 1 to 1 (not including 1), is not valid");
  }
 catch (  IllegalArgumentException e) {
  }
  vr=new VersionRange("1.0.0",true);
  assertTrue(vr.isExactVersion());
  vr=new VersionRange("1.0.0",false);
  assertFalse(vr.isExactVersion());
  vr=new VersionRange("[1.0.0, 2.0.0]");
  assertFalse(vr.isExactVersion());
  vr=new VersionRange("[1.0.0, 1.0.0]");
  assertTrue(vr.isExactVersion());
  vr=new VersionRange("1.0.0",true);
  assertEquals(new Version("1.0.0"),vr.getMinimumVersion());
  assertTrue(vr.isExactVersion());
  vr=new VersionRange("1.0.0",false);
  assertEquals(new Version("1.0.0"),vr.getMinimumVersion());
  assertNull(vr.getMaximumVersion());
  assertFalse(vr.isExactVersion());
  vr=new VersionRange("[1.0.0,2.0.0)",false);
  assertFalse(vr.isExactVersion());
  vr=new VersionRange("[1.0.0, 2.0.0]");
  assertFalse(vr.isExactVersion());
  vr=new VersionRange("[1.0.0, 1.0.0]");
  assertTrue(vr.isExactVersion());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.filesystem.FileSystemTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testInvalidFSRoot() throws IOException {
  File baseDir=new File(getTestResourceDir(),"/app1");
  File manifest=new File(baseDir,"META-INF/APPLICATION.MF");
  try {
    IDirectory dir=FileSystem.getFSRoot(manifest);
    fail("Should have thrown an IORuntimeException");
  }
 catch (  IORuntimeException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.filesystem.IOUtilsTest </h4><pre class="type-5 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteOutAndDoNotCloseInputStream() throws IOException {
  InputStream is=new InputStream(){
    int idx=0;
    int data[]=new int[]{1,2,3,4,5,-1};
    @Override public int read() throws IOException {
      if (idx < data.length)       return data[idx++];
 else       return -1;
    }
    @Override public void close() throws IOException {
      fail("Close was invoked");
    }
  }
;
  File f=new File("ioUtilsTest/outtest1");
  f.mkdirs();
  IOUtils.writeOutAndDontCloseInputStream(f,"/fred",is);
  File fred=new File(f,"/fred");
  assertTrue(fred.exists());
  File outtest=fred.getParentFile();
  fred.delete();
  outtest.delete();
}

</code></pre>

<br>
<pre class="type-12 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testCopyAndDoNotClose() throws IOException {
  InputStream is=new InputStream(){
    int idx=0;
    int data[]=new int[]{1,2,3,4,5,-1};
    @Override public int read() throws IOException {
      if (idx < data.length)       return data[idx++];
 else       return -1;
    }
    @Override public void close() throws IOException {
      fail("Close invoked");
    }
  }
;
  OutputStream os=new OutputStream(){
    int idx=0;
    int data[]=new int[]{1,2,3,4,5,-1};
    @Override public void write(    int b) throws IOException {
      if (b != data[idx++]) {
        fail("Data written to outputstream was not as expected");
      }
    }
  }
;
  IOUtils.copyAndDoNotCloseInputStream(is,os);
}

</code></pre>

<br>
<pre class="type-12 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testCopy() throws IOException {
  InputStream is=new InputStream(){
    boolean closed=false;
    int idx=0;
    int data[]=new int[]{1,2,3,4,5,-1};
    @Override public int read() throws IOException {
      if (idx < data.length)       return data[idx++];
 else       return -1;
    }
    @Override public void close() throws IOException {
      closed=true;
    }
    @Override public int available() throws IOException {
      if (!closed)       return super.available();
 else       return 123456789;
    }
  }
;
  OutputStream os=new OutputStream(){
    int idx=0;
    int data[]=new int[]{1,2,3,4,5,-1};
    @Override public void write(    int b) throws IOException {
      if (b != data[idx++]) {
        fail("Data written to outputstream was not as expected");
      }
    }
  }
;
  IOUtils.copy(is,os);
  if (is.available() != 123456789) {
    fail("close was not invoked");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.manifest.ManifestHeaderProcessorTest </h4><pre class="type-5 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExactVersion() throws Exception {
  VersionRange vr;
  try {
    vr=ManifestHeaderProcessor.parseVersionRange("[1.0.0, 2.0.0]",true);
    fail("should not get here 1");
  }
 catch (  IllegalArgumentException e) {
  }
  vr=ManifestHeaderProcessor.parseVersionRange("[1.0.0, 1.0.0]",true);
  assertTrue(vr.isExactVersion());
  try {
    vr=ManifestHeaderProcessor.parseVersionRange("(1.0.0, 1.0.0]",true);
    fail("should not get here 2");
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    vr=ManifestHeaderProcessor.parseVersionRange("[1.0.0, 1.0.0)",true);
    fail("should not get here 3");
  }
 catch (  IllegalArgumentException e) {
  }
  vr=ManifestHeaderProcessor.parseVersionRange("[1.0.0, 2.0.0]");
  assertFalse(vr.isExactVersion());
  vr=ManifestHeaderProcessor.parseVersionRange("[1.0.0, 1.0.0]");
  assertTrue(vr.isExactVersion());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.versioning.tests.FilterResultsTest </h4><pre class="type-4 type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test an error is excluded when required. This test uses two bundles each containing the same
 * class, where the later versioned class has had a method removed.
 */
@Test public void testApiMethodErrorExcluded(){
  try {
    File oldBundleFile=new File("../src/test/resources/api_1.0.0.jar");
    BundleInfo oldBundle=new BundleInfo(BundleManifest.fromBundle(oldBundleFile),oldBundleFile);
    File newBundleFile=new File("../src/test/resources/api_1.0.1.jar");
    BundleInfo newBundle=new BundleInfo(BundleManifest.fromBundle(newBundleFile),newBundleFile);
    String bundleSymbolicName=newBundle.getBundleManifest().getSymbolicName();
    URLClassLoader oldClassLoader=new URLClassLoader(new URL[]{oldBundle.getBundle().toURI().toURL()});
    URLClassLoader newClassLoader=new URLClassLoader(new URL[]{newBundle.getBundle().toURI().toURL()});
    List<String> excludes=new ArrayList<String>();
    excludes.add("method void methodToBeExcludedFrom() has been deleted");
    BundleCompatibility bundleCompatibility=new BundleCompatibility(bundleSymbolicName,newBundle,oldBundle,oldClassLoader,newClassLoader,excludes);
    bundleCompatibility.invoke();
    String bundleElement=bundleCompatibility.getBundleElement();
    String pkgElement=bundleCompatibility.getPkgElements().toString();
    assertTrue("Unexpected bundle versioning issue",bundleElement == null);
    assertTrue("Unexpected package versioning issue",pkgElement.trim().length() == 0);
  }
 catch (  IOException e) {
    fail("Unexpected IOException " + e);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.web.converter.impl.WabConverterTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testBundleManifestOverride() throws Exception {
  Manifest m=new Manifest();
  Attributes attrs=m.getMainAttributes();
  attrs.putValue(Constants.BUNDLE_SYMBOLICNAME,"org.apache.test");
  attrs.putValue(WarToWabConverter.WEB_CONTEXT_PATH,"test");
  attrs.putValue(Constants.BUNDLE_VERSION,"1.0");
  attrs.putValue(Constants.IMPORT_PACKAGE,"org.apache.util,org.apache.test;version=1.0");
  attrs.putValue(Constants.BUNDLE_CLASSPATH,"jsp/classes");
  try {
    convertWithProperties(m,WarToWabConverter.WEB_CONTEXT_PATH,"WebFiles",Constants.BUNDLE_SYMBOLICNAME,"foobar");
    fail("Conversion did not fail as expected");
  }
 catch (  IOException e) {
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
