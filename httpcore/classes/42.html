<h3 style="margin:0px">Class: org.apache.hc.core5.http.impl.nio.TestChunkDecoder (20 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(13)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(12)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(12)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(8)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >ExceptionVerifier&nbsp;(7)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(6)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(5)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(3)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testInvalidConstructor(){
  final ReadableByteChannel channel=new ReadableByteChannelMock(new String[]{"stuff;","more stuff"},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf=new SessionInputBufferImpl(1024,256,StandardCharsets.US_ASCII);
  try {
    new ChunkDecoder(null,null,null);
    Assert.fail("IllegalArgumentException should have been thrown");
  }
 catch (  final IllegalArgumentException ex) {
  }
  try {
    new ChunkDecoder(channel,null,null);
    Assert.fail("IllegalArgumentException should have been thrown");
  }
 catch (  final IllegalArgumentException ex) {
  }
  try {
    new ChunkDecoder(channel,inbuf,null);
    Assert.fail("IllegalArgumentException should have been thrown");
  }
 catch (  final IllegalArgumentException ex) {
  }
}

</code></pre>

<pre class="type-10 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=TruncatedChunkException.class) public void testMalformedChunkTruncatedChunk() throws Exception {
  final String s="3\r\n12";
  final ReadableByteChannel channel=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf=new SessionInputBufferImpl(1024,256,StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder=new ChunkDecoder(channel,inbuf,metrics);
  final ByteBuffer dst=ByteBuffer.allocate(1024);
  Assert.assertEquals(2,decoder.read(dst));
  decoder.read(dst);
}

</code></pre>

<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testMalformedChunk() throws Exception {
  final String s="5\r\n01234----------------------------------------------------------" + "-----------------------------------------------------------------------------" + "-----------------------------------------------------------------------------";
  final ReadableByteChannel channel=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf=new SessionInputBufferImpl(32,32,StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder=new ChunkDecoder(channel,inbuf,metrics);
  final ByteBuffer dst=ByteBuffer.allocate(1024);
  try {
    decoder.read(dst);
    Assert.fail("MalformedChunkCodingException should have been thrown");
  }
 catch (  final MalformedChunkCodingException ex) {
  }
}

</code></pre>

<pre class="type-1 type-3 type-10 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEndOfStreamConditionReadingFooters() throws Exception {
  final String s="10\r\n1234567890123456\r\n" + "5\r\n12345\r\n5\r\n12345\r\n0\r\n";
  final ReadableByteChannel channel=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf=new SessionInputBufferImpl(1024,256,StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder=new ChunkDecoder(channel,inbuf,metrics);
  final ByteBuffer dst=ByteBuffer.allocate(1024);
  int bytesRead=0;
  while (dst.hasRemaining() && !decoder.isCompleted()) {
    final int i=decoder.read(dst);
    if (i > 0) {
      bytesRead+=i;
    }
  }
  Assert.assertEquals(26,bytesRead);
  Assert.assertEquals("12345678901234561234512345",CodecTestUtils.convert(dst));
  Assert.assertTrue(decoder.isCompleted());
}

</code></pre>

<pre class="type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedChunkCodingException.class) public void testMalformedChunkEndingDecoding() throws Exception {
  final String s="5\r\n01234\r\n5\r\n56789\r\r6\r\nabcdef\r\n0\r\n\r\n";
  final ReadableByteChannel channel=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf=new SessionInputBufferImpl(1024,256,StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder=new ChunkDecoder(channel,inbuf,metrics);
  final ByteBuffer dst=ByteBuffer.allocate(1024);
  decoder.read(dst);
}

</code></pre>

<pre class="type-9 type-1 type-10 type-2 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTooLongFoldedFooter() throws Exception {
  final String s="10\r\n1234567890123456\r\n" + "0\r\nFooter1: blah\r\n  blah\r\n  blah\r\n  blah\r\n  blah\r\n  blah\r\n  blah\r\n  blah\r\n\r\n";
  final ReadableByteChannel channel1=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf1=new SessionInputBufferImpl(1024,256,MessageConstraints.DEFAULT,StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics1=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder1=new ChunkDecoder(channel1,inbuf1,metrics1);
  final ByteBuffer dst=ByteBuffer.allocate(1024);
  final int bytesRead=decoder1.read(dst);
  Assert.assertEquals(16,bytesRead);
  Assert.assertEquals("1234567890123456",CodecTestUtils.convert(dst));
  final Header[] footers=decoder1.getFooters();
  Assert.assertNotNull(footers);
  Assert.assertEquals(1,footers.length);
  final MessageConstraints constraints=MessageConstraints.lineLen(25);
  final ReadableByteChannel channel2=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf2=new SessionInputBufferImpl(1024,256,constraints,StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics2=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder2=new ChunkDecoder(channel2,inbuf2,constraints,metrics2);
  dst.clear();
  try {
    decoder2.read(dst);
    Assert.fail("MessageConstraintException expected");
  }
 catch (  final MessageConstraintException ex) {
  }
}

</code></pre>

<pre class="type-1 type-3 type-10 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testComplexDecoding() throws Exception {
  final String s="10;key=\"value\"\r\n1234567890123456\r\n" + "5\r\n12345\r\n5\r\n12345\r\n0\r\nFooter1: abcde\r\nFooter2: fghij\r\n\r\n";
  final ReadableByteChannel channel=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf=new SessionInputBufferImpl(1024,256,StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder=new ChunkDecoder(channel,inbuf,metrics);
  final ByteBuffer dst=ByteBuffer.allocate(1024);
  int bytesRead=0;
  while (dst.hasRemaining() && !decoder.isCompleted()) {
    final int i=decoder.read(dst);
    if (i > 0) {
      bytesRead+=i;
    }
  }
  Assert.assertEquals(26,bytesRead);
  Assert.assertEquals("12345678901234561234512345",CodecTestUtils.convert(dst));
  final Header[] footers=decoder.getFooters();
  Assert.assertEquals(2,footers.length);
  Assert.assertEquals("Footer1",footers[0].getName());
  Assert.assertEquals("abcde",footers[0].getValue());
  Assert.assertEquals("Footer2",footers[1].getName());
  Assert.assertEquals("fghij",footers[1].getValue());
  dst.clear();
  bytesRead=decoder.read(dst);
  Assert.assertEquals(-1,bytesRead);
  Assert.assertTrue(decoder.isCompleted());
}

</code></pre>

<pre class="type-9 type-1 type-3 type-10 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTooLongChunkHeader() throws Exception {
  final String s="5; and some very looooong comment\r\n12345\r\n0\r\n";
  final ReadableByteChannel channel1=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf1=new SessionInputBufferImpl(1024,256,MessageConstraints.DEFAULT,null,null);
  final BasicHttpTransportMetrics metrics1=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder1=new ChunkDecoder(channel1,inbuf1,metrics1);
  final ByteBuffer dst=ByteBuffer.allocate(1024);
  while (dst.hasRemaining() && !decoder1.isCompleted()) {
    decoder1.read(dst);
  }
  Assert.assertEquals("12345",CodecTestUtils.convert(dst));
  Assert.assertTrue(decoder1.isCompleted());
  final ReadableByteChannel channel2=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf2=new SessionInputBufferImpl(1024,256,MessageConstraints.lineLen(10),null,null);
  final BasicHttpTransportMetrics metrics2=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder2=new ChunkDecoder(channel2,inbuf2,metrics2);
  dst.clear();
  try {
    decoder2.read(dst);
    Assert.fail("MessageConstraintException expected");
  }
 catch (  final MessageConstraintException ex) {
  }
}

</code></pre>

<pre class="type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IOException.class) public void testMalformedFooters() throws Exception {
  final String s="10;key=\"value\"\r\n1234567890123456\r\n" + "5\r\n12345\r\n5\r\n12345\r\n0\r\nFooter1 abcde\r\n\r\n";
  final ReadableByteChannel channel=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf=new SessionInputBufferImpl(1024,256,StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder=new ChunkDecoder(channel,inbuf,metrics);
  final ByteBuffer dst=ByteBuffer.allocate(1024);
  decoder.read(dst);
}

</code></pre>

<pre class="type-1 type-3 type-10 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadingWitSmallBuffer() throws Exception {
  final String s="10\r\n1234567890123456\r\n" + "40\r\n12345678901234561234567890123456" + "12345678901234561234567890123456\r\n0\r\n";
  final ReadableByteChannel channel=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf=new SessionInputBufferImpl(1024,256,StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder=new ChunkDecoder(channel,inbuf,metrics);
  final ByteBuffer dst=ByteBuffer.allocate(1024);
  final ByteBuffer tmp=ByteBuffer.allocate(10);
  int bytesRead=0;
  while (dst.hasRemaining() && !decoder.isCompleted()) {
    final int i=decoder.read(tmp);
    if (i > 0) {
      bytesRead+=i;
      tmp.flip();
      dst.put(tmp);
      tmp.compact();
    }
  }
  Assert.assertEquals(80,bytesRead);
  Assert.assertEquals("12345678901234561234567890123456" + "12345678901234561234567890123456" + "1234567890123456",CodecTestUtils.convert(dst));
  Assert.assertTrue(decoder.isCompleted());
}

</code></pre>

<pre class="type-9 type-1 type-10 type-2 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTooLongFooter() throws Exception {
  final String s="10\r\n1234567890123456\r\n" + "0\r\nFooter1: looooooooooooooooooooooooooooooooooooooooooooooooooooooog\r\n\r\n";
  final ReadableByteChannel channel1=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf1=new SessionInputBufferImpl(1024,256,MessageConstraints.DEFAULT,StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics1=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder1=new ChunkDecoder(channel1,inbuf1,metrics1);
  final ByteBuffer dst=ByteBuffer.allocate(1024);
  final int bytesRead=decoder1.read(dst);
  Assert.assertEquals(16,bytesRead);
  Assert.assertEquals("1234567890123456",CodecTestUtils.convert(dst));
  final Header[] footers=decoder1.getFooters();
  Assert.assertNotNull(footers);
  Assert.assertEquals(1,footers.length);
  final ReadableByteChannel channel2=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf2=new SessionInputBufferImpl(1024,256,MessageConstraints.lineLen(25),StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics2=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder2=new ChunkDecoder(channel2,inbuf2,metrics2);
  dst.clear();
  try {
    decoder2.read(dst);
    Assert.fail("MessageConstraintException expected");
  }
 catch (  final MessageConstraintException ex) {
  }
}

</code></pre>

<pre class="type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedChunkCodingException.class) public void testMalformedChunkSizeDecoding() throws Exception {
  final String s="5\r\n01234\r\n5zz\r\n56789\r\n6\r\nabcdef\r\n0\r\n\r\n";
  final ReadableByteChannel channel=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf=new SessionInputBufferImpl(1024,256,StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder=new ChunkDecoder(channel,inbuf,metrics);
  final ByteBuffer dst=ByteBuffer.allocate(1024);
  decoder.read(dst);
}

</code></pre>

<pre class="type-9 type-1 type-10 type-2 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTooManyFooters() throws Exception {
  final String s="10\r\n1234567890123456\r\n" + "0\r\nFooter1: blah\r\nFooter2: blah\r\nFooter3: blah\r\nFooter4: blah\r\n\r\n";
  final ReadableByteChannel channel1=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf1=new SessionInputBufferImpl(1024,256,MessageConstraints.DEFAULT,StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics1=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder1=new ChunkDecoder(channel1,inbuf1,metrics1);
  final ByteBuffer dst=ByteBuffer.allocate(1024);
  final int bytesRead=decoder1.read(dst);
  Assert.assertEquals(16,bytesRead);
  Assert.assertEquals("1234567890123456",CodecTestUtils.convert(dst));
  final Header[] footers=decoder1.getFooters();
  Assert.assertNotNull(footers);
  Assert.assertEquals(4,footers.length);
  final MessageConstraints constraints=MessageConstraints.custom().setMaxHeaderCount(3).build();
  final ReadableByteChannel channel2=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf2=new SessionInputBufferImpl(1024,256,constraints,StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics2=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder2=new ChunkDecoder(channel2,inbuf2,constraints,metrics2);
  dst.clear();
  try {
    decoder2.read(dst);
    Assert.fail("MessageConstraintException expected");
  }
 catch (  final MessageConstraintException ex) {
  }
}

</code></pre>

<pre class="type-1 type-3 type-10 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIncompleteChunkDecoding() throws Exception {
  final String[] chunks={"10;","key=\"value\"\r","\n123456789012345","6\r\n5\r\n12","345\r\n6\r","\nabcdef\r","\n0\r\nFoot","er1: abcde\r\nFooter2: f","ghij\r\n\r\n"};
  final ReadableByteChannel channel=new ReadableByteChannelMock(chunks,StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf=new SessionInputBufferImpl(1024,256,StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics=new BasicHttpTransportMetrics();
  final ByteBuffer dst=ByteBuffer.allocate(1024);
  final ChunkDecoder decoder=new ChunkDecoder(channel,inbuf,metrics);
  int bytesRead=0;
  while (dst.hasRemaining() && !decoder.isCompleted()) {
    final int i=decoder.read(dst);
    if (i > 0) {
      bytesRead+=i;
    }
  }
  Assert.assertEquals(27,bytesRead);
  Assert.assertEquals("123456789012345612345abcdef",CodecTestUtils.convert(dst));
  Assert.assertTrue(decoder.isCompleted());
  final Header[] footers=decoder.getFooters();
  Assert.assertEquals(2,footers.length);
  Assert.assertEquals("Footer1",footers[0].getName());
  Assert.assertEquals("abcde",footers[0].getValue());
  Assert.assertEquals("Footer2",footers[1].getName());
  Assert.assertEquals("fghij",footers[1].getValue());
  dst.clear();
  bytesRead=decoder.read(dst);
  Assert.assertEquals(-1,bytesRead);
  Assert.assertTrue(decoder.isCompleted());
}

</code></pre>

<pre class="type-1 type-3 type-10 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasicDecoding() throws Exception {
  final String s="5\r\n01234\r\n5\r\n56789\r\n6\r\nabcdef\r\n0\r\n\r\n";
  final ReadableByteChannel channel=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf=new SessionInputBufferImpl(1024,256,StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder=new ChunkDecoder(channel,inbuf,metrics);
  final ByteBuffer dst=ByteBuffer.allocate(1024);
  int bytesRead=decoder.read(dst);
  Assert.assertEquals(16,bytesRead);
  Assert.assertEquals("0123456789abcdef",CodecTestUtils.convert(dst));
  final Header[] footers=decoder.getFooters();
  Assert.assertEquals(0,footers.length);
  dst.clear();
  bytesRead=decoder.read(dst);
  Assert.assertEquals(-1,bytesRead);
  Assert.assertTrue(decoder.isCompleted());
  Assert.assertEquals("[chunk-coded; completed: true]",decoder.toString());
}

</code></pre>

<pre class="type-1 type-3 type-10 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDecodingWithSmallBuffer() throws Exception {
  final String s1="5\r\n01234\r\n5\r\n5678";
  final String s2="9\r\n6\r\nabcdef\r\n0\r\n\r\n";
  final ReadableByteChannel channel=new ReadableByteChannelMock(new String[]{s1,s2},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf=new SessionInputBufferImpl(1024,256,StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder=new ChunkDecoder(channel,inbuf,metrics);
  final ByteBuffer dst=ByteBuffer.allocate(1024);
  final ByteBuffer tmp=ByteBuffer.allocate(4);
  int bytesRead=0;
  while (dst.hasRemaining() && !decoder.isCompleted()) {
    final int i=decoder.read(tmp);
    if (i > 0) {
      bytesRead+=i;
    }
    tmp.flip();
    dst.put(tmp);
    tmp.compact();
  }
  Assert.assertEquals(16,bytesRead);
  Assert.assertEquals("0123456789abcdef",CodecTestUtils.convert(dst));
  Assert.assertTrue(decoder.isCompleted());
  dst.clear();
  bytesRead=decoder.read(dst);
  Assert.assertEquals(-1,bytesRead);
  Assert.assertTrue(decoder.isCompleted());
}

</code></pre>

<pre class="type-1 type-3 type-10 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=ConnectionClosedException.class) public void testMissingClosingChunk() throws Exception {
  final String s="10\r\n1234567890123456\r\n" + "5\r\n12345\r\n5\r\n12345\r\n";
  final ReadableByteChannel channel=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf=new SessionInputBufferImpl(1024,256,StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder=new ChunkDecoder(channel,inbuf,metrics);
  final ByteBuffer dst=ByteBuffer.allocate(1024);
  long bytesRead=0;
  try {
    while (dst.hasRemaining() && !decoder.isCompleted()) {
      final int i=decoder.read(dst);
      if (i > 0) {
        bytesRead+=i;
      }
    }
  }
 catch (  final MalformedChunkCodingException ex) {
    Assert.assertEquals(26L,bytesRead);
    Assert.assertEquals("12345678901234561234512345",CodecTestUtils.convert(dst));
    Assert.assertTrue(decoder.isCompleted());
    throw ex;
  }
}

</code></pre>

<pre class="type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testInvalidInput() throws Exception {
  final String s="10;key=\"value\"\r\n1234567890123456\r\n" + "5\r\n12345\r\n5\r\n12345\r\n0\r\nFooter1 abcde\r\n\r\n";
  final ReadableByteChannel channel=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf=new SessionInputBufferImpl(1024,256,StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder=new ChunkDecoder(channel,inbuf,metrics);
  decoder.read(null);
}

</code></pre>

<pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFoldedFooters() throws Exception {
  final String s="10;key=\"value\"\r\n1234567890123456\r\n" + "5\r\n12345\r\n5\r\n12345\r\n0\r\nFooter1: abcde\r\n   \r\n  fghij\r\n\r\n";
  final ReadableByteChannel channel=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf=new SessionInputBufferImpl(1024,256,StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder=new ChunkDecoder(channel,inbuf,metrics);
  final ByteBuffer dst=ByteBuffer.allocate(1024);
  final int bytesRead=decoder.read(dst);
  Assert.assertEquals(26,bytesRead);
  Assert.assertEquals("12345678901234561234512345",CodecTestUtils.convert(dst));
  final Header[] footers=decoder.getFooters();
  Assert.assertEquals(1,footers.length);
  Assert.assertEquals("Footer1",footers[0].getName());
  Assert.assertEquals("abcde  fghij",footers[0].getValue());
}

</code></pre>

<pre class="type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedChunkCodingException.class) public void testMissingLastCRLF() throws Exception {
  final String s="10\r\n1234567890123456\r\n" + "5\r\n12345\r\n5\r\n12345";
  final ReadableByteChannel channel=new ReadableByteChannelMock(new String[]{s},StandardCharsets.US_ASCII);
  final SessionInputBuffer inbuf=new SessionInputBufferImpl(1024,256,StandardCharsets.US_ASCII);
  final BasicHttpTransportMetrics metrics=new BasicHttpTransportMetrics();
  final ChunkDecoder decoder=new ChunkDecoder(channel,inbuf,metrics);
  final ByteBuffer dst=ByteBuffer.allocate(1024);
  while (dst.hasRemaining() && !decoder.isCompleted()) {
    decoder.read(dst);
  }
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
