<h3><span class=" glyphicon glyphicon-tag"/>&nbspIterativeVerifier</h3><kbd>Verifies assertions in iterations</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.etch.bindings.java.msg.TestStructValue </h4><pre class="type-10 type-11 type-2 type-3 type-8 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 */
@Test public void iterator(){
  StructValue sv=new StructValue(mt1,vf);
  assertFalse(sv.iterator().hasNext());
  sv.put(mf1,true);
  Iterator<Map.Entry<Field,Object>> i=sv.iterator();
  assertTrue(i.hasNext());
  Map.Entry<Field,Object> me=i.next();
  assertSame(mf1,me.getKey());
  assertEquals(true,me.getValue());
  assertFalse(i.hasNext());
  Map<Field,Object> vals=new HashMap<Field,Object>();
  vals.put(mf1,true);
  vals.put(mf3,2);
  vals.put(mf5,"a");
  sv.put(mf3,2);
  sv.put(mf5,"a");
  i=sv.iterator();
  while (i.hasNext()) {
    me=i.next();
    Field key=me.getKey();
    assertTrue(vals.containsKey(key));
    assertEquals(vals.remove(key),me.getValue());
  }
  assertTrue(vals.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.etch.bindings.java.support.TestFreePool </h4><pre class="type-11 type-2 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @throws Exception 
 */
@Test public void run2() throws Exception {
  FreePool p=new FreePool(2);
  for (int i=0; i < 100; i++) {
    MyPoolRunnable r=new MyPoolRunnable(0,false);
    assertFalse(r.done);
    assertNull(r.ex);
    p.run(r);
    Thread.sleep(Q1);
    assertTrue(r.done);
    assertNull(r.ex);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.etch.tests.TestAsyncClient </h4><pre class="type-11 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @throws Exception 
 */
@Test public void async_free() throws Exception {
  for (int i=0; i < 100; i++)   assertEquals(i,server.async_free(i));
}

</code></pre>

<br>
<pre class="type-11 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @throws Exception 
 */
@Test public void async_queued1() throws Exception {
  for (int i=0; i < 5; i++)   assertEquals(i,server.async_queued(i));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.etch.util.TestCircularQueue </h4><pre class="type-11 type-2 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @throws Exception 
 */
@Test public void putget1() throws Exception {
  CircularQueue<Integer> queue=new CircularQueue<Integer>();
  assertEquals(0,queue.count());
  assertTrue(queue.isEmpty());
  assertFalse(queue.isFull());
  for (int i=0; i < 10000; i++) {
    queue.put(i);
    assertEquals(1,queue.count());
    assertFalse(queue.isEmpty());
    assertEquals(i,queue.get());
    assertEquals(0,queue.count());
    assertTrue(queue.isEmpty());
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @throws Exception 
 */
@Test public void stress2() throws Exception {
  final CircularQueue<Integer> queue=new CircularQueue<Integer>(1);
  final int n=1000;
  new Thread(new Runnable(){
    public void run(){
      for (int i=0; i < n; i++) {
        try {
          Thread.sleep(5);
          queue.put(i);
        }
 catch (        InterruptedException e) {
          e.printStackTrace();
        }
      }
    }
  }
).start();
  for (int i=0; i < n; i++)   assertEquals(i,queue.get());
}

</code></pre>

<br>
<pre class="type-11 type-2 type-3 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @throws Exception 
 */
@Test public void stress6() throws Exception {
  final CircularQueue<Integer> queue=new CircularQueue<Integer>(5);
  Thread t1=new Thread(new Runnable(){
    public void run(){
      try {
        for (int i=0; i < 100; i++)         assertTrue(queue.put(i));
      }
 catch (      InterruptedException e) {
      }
    }
  }
,"t1");
  Thread t2=new Thread(new Runnable(){
    public void run(){
      try {
        for (int i=0; i < 100; i++)         assertTrue(queue.put(i));
      }
 catch (      InterruptedException e) {
      }
    }
  }
,"t2");
  Thread t3=new Thread(new Runnable(){
    public void run(){
      try {
        for (int i=0; i < 100; i++)         assertNotNull(queue.get());
      }
 catch (      InterruptedException e) {
      }
    }
  }
,"t3");
  Thread t4=new Thread(new Runnable(){
    public void run(){
      try {
        for (int i=0; i < 100; i++)         assertNotNull(queue.get());
      }
 catch (      InterruptedException e) {
      }
    }
  }
,"t4");
  t1.start();
  t2.start();
  t3.start();
  t4.start();
  harvest(t1);
  harvest(t2);
  harvest(t3);
  harvest(t4);
}

</code></pre>

<br>
<pre class="type-11 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @throws Exception 
 */
@Test public void stress1() throws Exception {
  final CircularQueue<Integer> queue=new CircularQueue<Integer>(1);
  final int n=10000;
  new Thread(new Runnable(){
    public void run(){
      for (int i=0; i < n; i++) {
        try {
          queue.put(i);
        }
 catch (        InterruptedException e) {
          e.printStackTrace();
        }
      }
    }
  }
).start();
  for (int i=0; i < n; i++)   assertEquals(i,queue.get());
}

</code></pre>

<br>
<pre class="type-11 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @throws Exception 
 */
@Test public void stress3() throws Exception {
  final CircularQueue<Integer> queue=new CircularQueue<Integer>(1);
  final int n=1000;
  new Thread(new Runnable(){
    public void run(){
      for (int i=0; i < n; i++) {
        try {
          queue.put(i);
        }
 catch (        InterruptedException e) {
          e.printStackTrace();
        }
      }
    }
  }
).start();
  for (int i=0; i < n; i++) {
    Thread.sleep(5);
    assertEquals(i,queue.get());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.etch.util.core.io.TestTcpConnection </h4><pre class="type-11 type-3 type-6 type-7 type-14 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @throws Exception 
 */
@Test public void restart1() throws Exception {
  Log.report("--- restart1 ------------------------------");
  MyDataHandler dh=new MyDataHandler();
  TcpTransport c=new TcpConnection(null,"tcp://127.0.0.1:" + port + "?TcpTransport.reconnectDelay=200",null);
  c.setSession(dh);
  c.start();
  c.waitUp(TIMEOUT);
  int n=10;
  int i=0;
  while (++i <= n) {
    Socket t=lh.accepted.waitUntilNotEqAndSet(null,TIMEOUT,null);
    Log.report("accepted","i",i,"t.local",t.getLocalSocketAddress(),"t.remote",t.getRemoteSocketAddress());
    assertWhat(What.UP,dh.what);
    assertEquals(t.getLocalSocketAddress(),c.remoteAddress());
    assertEquals(t.getRemoteSocketAddress(),c.localAddress());
    t.getOutputStream().write(i);
    assertWhat(What.DATA,dh.what);
    assertNull(dh.xsender);
    assertNotNull(dh.xbuf);
    assertEquals(1,dh.xbuf.length);
    assertEquals((byte)i,dh.xbuf[0]);
    t.shutdownOutput();
    t.close();
    t=null;
    assertWhat(What.DOWN,dh.what);
  }
  Thread t1=new MonitorHarvester<Socket>(lh.accepted);
  t1.start();
  Thread t2=new MonitorHarvester<What>(dh.what);
  t2.start();
  Log.report("stopping");
  c.stop();
  c.waitDown(TIMEOUT);
  Log.report("stoppped");
  t1.join();
  t2.join();
}

</code></pre>

<br>
<pre class="type-11 type-3 type-6 type-7 type-14 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @throws Exception 
 */
@Test public void restart2() throws Exception {
  Log.report("--- restart2 ------------------------------");
  MyDataHandler dh=new MyDataHandler();
  TcpTransport c=new TcpConnection(null,"tcp://127.0.0.1:" + port + "?TcpTransport.reconnectDelay=200",null);
  c.setSession(dh);
  c.start();
  c.waitUp(TIMEOUT);
  int n=10;
  int i=0;
  while (++i <= n) {
    Socket t=lh.accepted.waitUntilNotEqAndSet(null,TIMEOUT,null);
    Log.report("accepted","i",i,"t.local",t.getLocalSocketAddress(),"t.remote",t.getRemoteSocketAddress());
    assertWhat(What.UP,dh.what);
    assertEquals(t.getLocalSocketAddress(),c.remoteAddress());
    assertEquals(t.getRemoteSocketAddress(),c.localAddress());
    t.getOutputStream().write(i);
    assertWhat(What.DATA,dh.what);
    assertNull(dh.xsender);
    assertNotNull(dh.xbuf);
    assertEquals(1,dh.xbuf.length);
    assertEquals((byte)i,dh.xbuf[0]);
    c.shutdownOutput();
    assertEquals(-1,t.getInputStream().read());
    t.shutdownOutput();
    t.close();
    t=null;
    assertWhat(What.DOWN,dh.what);
  }
  Thread t1=new MonitorHarvester<Socket>(lh.accepted);
  t1.start();
  Thread t2=new MonitorHarvester<What>(dh.what);
  t2.start();
  Log.report("stopping");
  c.stop();
  c.waitDown(TIMEOUT);
  Log.report("stopped");
  t1.join();
  t2.join();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.etch.util.core.nio.TestTcp2Connection </h4><pre class="type-11 type-3 type-6 type-7 type-14 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @throws Exception 
 */
@Test public void restart1() throws Exception {
  Log.report("--- restart1 ------------------------------");
  MyDataHandler dh=new MyDataHandler();
  Tcp2Connection c=new Tcp2Connection("tcp://127.0.0.1:" + port + "?TcpTransport.reconnectDelay=200",r);
  c.setSession(dh);
  c.start();
  c.waitUp(TIMEOUT);
  int n=10;
  int i=0;
  while (++i <= n) {
    SocketChannel t=lh.accepted.waitUntilNotEqAndSet(null,TIMEOUT,null);
    Log.report("accepted","i",i,"t.local",t.socket().getLocalSocketAddress(),"t.remote",t.socket().getRemoteSocketAddress());
    assertWhat(What.UP,dh.what);
    assertEquals(t.socket().getLocalSocketAddress(),c.remoteAddress());
    assertEquals(t.socket().getRemoteSocketAddress(),c.localAddress());
    write(t,i);
    assertWhat(What.DATA,dh.what);
    assertNull(dh.xsender);
    assertNotNull(dh.xbuf);
    assertEquals(1,dh.xbuf.length);
    assertEquals((byte)i,dh.xbuf[0]);
    t.socket().shutdownOutput();
    t.close();
    t=null;
    assertWhat(What.DOWN,dh.what);
  }
  Thread t1=new MonitorHarvester<SocketChannel>(lh.accepted);
  t1.start();
  Thread t2=new MonitorHarvester<What>(dh.what);
  t2.start();
  Log.report("stopping");
  c.stop();
  c.waitDown(TIMEOUT);
  Log.report("stoppped");
  t1.join();
  t2.join();
}

</code></pre>

<br>
<pre class="type-11 type-3 type-6 type-7 type-14 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @throws Exception 
 */
@Test public void restart2() throws Exception {
  Log.report("--- restart2 ------------------------------");
  MyDataHandler dh=new MyDataHandler();
  Tcp2Connection c=new Tcp2Connection("tcp://127.0.0.1:" + port + "?TcpTransport.reconnectDelay=200",r);
  c.setSession(dh);
  c.start();
  c.waitUp(TIMEOUT);
  int n=10;
  int i=0;
  while (++i <= n) {
    SocketChannel t=lh.accepted.waitUntilNotEqAndSet(null,TIMEOUT,null);
    Log.report("accepted","i",i,"t.local",t.socket().getLocalSocketAddress(),"t.remote",t.socket().getRemoteSocketAddress());
    assertWhat(What.UP,dh.what);
    assertEquals(t.socket().getLocalSocketAddress(),c.remoteAddress());
    assertEquals(t.socket().getRemoteSocketAddress(),c.localAddress());
    write(t,i);
    assertWhat(What.DATA,dh.what);
    assertNull(dh.xsender);
    assertNotNull(dh.xbuf);
    assertEquals(1,dh.xbuf.length);
    assertEquals((byte)i,dh.xbuf[0]);
    c.shutdownOutput();
    assertEquals(-1,read(t));
    t.socket().shutdownOutput();
    t.close();
    t=null;
    assertWhat(What.DOWN,dh.what);
  }
  Thread t1=new MonitorHarvester<SocketChannel>(lh.accepted);
  t1.start();
  Thread t2=new MonitorHarvester<What>(dh.what);
  t2.start();
  Log.report("stopping");
  c.stop();
  c.waitDown(TIMEOUT);
  Log.report("stopped");
  t1.join();
  t2.join();
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
