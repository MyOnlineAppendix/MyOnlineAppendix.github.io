<h3><span class=" glyphicon glyphicon-tag"/>&nbspExecutionTester</h3><kbd>Executes methods or other tests from the same test unit</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.james.mailbox.AbstractMailboxManagerTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MailboxException.class) public void user1ShouldNotBeAbleToCreateInboxTwice() throws MailboxException, UnsupportedEncodingException {
  setMailboxManager(new MockMailboxManager(getMailboxManager()).getMockMailboxManager());
  session=getMailboxManager().createSystemSession(USER_1,LoggerFactory.getLogger("Mock"));
  getMailboxManager().startProcessingRequest(session);
  MailboxPath inbox=MailboxPath.inbox(session);
  getMailboxManager().createMailbox(inbox,session);
  getMailboxManager().createMailbox(inbox,session);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailbox.cassandra.mail.CassandraACLMapperTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void creatingACLMapperWithNegativeMaxRetryShouldFail(){
  new CassandraACLMapper(mailbox,cassandra.getConf(),-1);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void creatingACLMapperWithNoMailboxIdShouldFail(){
  new CassandraACLMapper(new SimpleMailbox<>(new MailboxPath("#private","user","name"),uidValidity),cassandra.getConf(),maxRetry);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void creatingACLMapperWithNullMaxRetryShouldFail(){
  new CassandraACLMapper(mailbox,cassandra.getConf(),0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailbox.cassandra.mail.utils.SimpleMailboxACLJsonConverterTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void multipleEntriesACLShouldBeWellSerialized() throws Exception {
  assertThatJson(SimpleMailboxACLJsonConverter.toJson(new ACLMapBuilder().addSingleUserEntryToMap().addSingleGroupEntryToMap().buildAsACL())).isEqualTo("{\"entries\":{\"-user\":2040,\"-$group\":2032}}").when(IGNORING_ARRAY_ORDER);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void singleSpecialEntryACLShouldBeWellSerialized() throws Exception {
  assertThatJson(SimpleMailboxACLJsonConverter.toJson(new ACLMapBuilder().addSingleSpecialEntryToMap().buildAsACL())).isEqualTo("{\"entries\":{\"-special\":1968}}").when(IGNORING_ARRAY_ORDER);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void emptyACLShouldBeWellSerialized() throws Exception {
  assertThatJson(SimpleMailboxACLJsonConverter.toJson(SimpleMailboxACL.EMPTY)).isEqualTo("{\"entries\":{}}").when(IGNORING_ARRAY_ORDER);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void singleUserEntryACLShouldBeWellSerialized() throws Exception {
  assertThatJson(SimpleMailboxACLJsonConverter.toJson(new ACLMapBuilder().addSingleUserEntryToMap().buildAsACL())).isEqualTo("{\"entries\":{\"-user\":2040}}").when(IGNORING_ARRAY_ORDER);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void singleGroupEntryACLShouldBeWellSerialized() throws Exception {
  assertThatJson(SimpleMailboxACLJsonConverter.toJson(new ACLMapBuilder().addSingleGroupEntryToMap().buildAsACL())).isEqualTo("{\"entries\":{\"-$group\":2032}}").when(IGNORING_ARRAY_ORDER);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailbox.cassandra.quota.CassandraCurrentQuotaManagerTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void increaseShouldThrowOnZeroCount() throws Exception {
  currentQuotaManager.increase(QUOTA_ROOT,0,5);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void increaseShouldThrowOnNegativeSize() throws Exception {
  currentQuotaManager.increase(QUOTA_ROOT,5,-1);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void decreaseShouldThrowOnZeroSize() throws Exception {
  currentQuotaManager.decrease(QUOTA_ROOT,5,0);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void decreaseShouldThrowOnZeroCount() throws Exception {
  currentQuotaManager.decrease(QUOTA_ROOT,0,5);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void decreaseShouldThrowOnNegativeSize() throws Exception {
  currentQuotaManager.decrease(QUOTA_ROOT,5,-1);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void decreaseShouldThrowOnNegativeCount() throws Exception {
  currentQuotaManager.decrease(QUOTA_ROOT,-1,5);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void increaseShouldThrowOnNegativeCount() throws Exception {
  currentQuotaManager.increase(QUOTA_ROOT,-1,5);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void increaseShouldThrowOnZeroSize() throws Exception {
  currentQuotaManager.increase(QUOTA_ROOT,5,0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailbox.copier.MailboxCopierTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Feed the source MailboxManager with the number of mailboxes and
 * messages per mailbox.
 * Copy the mailboxes to the destination Mailbox Manager, and assert the number 
 * of mailboxes and messages per mailbox is the same as in the source
 * Mailbox Manager.
 * @throws MailboxException 
 * @throws IOException 
 */
@Test public void testMailboxCopy() throws MailboxException, IOException {
  if (srcMemMailboxManager instanceof StoreMailboxManager) {
    ((StoreMailboxManager<?>)srcMemMailboxManager).init();
  }
  if (dstMemMailboxManager instanceof StoreMailboxManager) {
    ((StoreMailboxManager<?>)dstMemMailboxManager).init();
  }
  srcMemMailboxManager=new MockMailboxManager(srcMemMailboxManager).getMockMailboxManager();
  assertMailboxManagerSize(srcMemMailboxManager,1);
  mailboxCopier.copyMailboxes(srcMemMailboxManager,dstMemMailboxManager);
  assertMailboxManagerSize(dstMemMailboxManager,1);
  mailboxCopier.copyMailboxes(srcMemMailboxManager,dstMemMailboxManager);
  assertMailboxManagerSize(dstMemMailboxManager,2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailbox.elasticsearch.ElasticSearchIndexerTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void indexMessageShouldThrowWhenJsonIsNull() throws InterruptedException {
  testee.indexMessage("1",null);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void updateMessageShouldThrowWhenJsonIsNull() throws InterruptedException {
  String messageId="1:2";
  String content="{\"message\": \"trying out Elasticsearch\"}";
  testee.indexMessage(messageId,content);
  embeddedElasticSearch.awaitForElasticSearch();
  testee.updateMessage("1",null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailbox.elasticsearch.events.ElasticSearchListeningMessageSearchIndexTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @SuppressWarnings("unchecked") public void deleteShouldWork() throws Exception {
  MailboxSession session=control.createMock(MailboxSession.class);
  Mailbox<TestId> mailbox=control.createMock(Mailbox.class);
  long messageId=1;
  MessageRange messageRange=MessageRange.one(messageId);
  TestId mailboxId=TestId.of(12);
  expect(mailbox.getMailboxId()).andReturn(mailboxId);
  DeleteResponse expectedDeleteResponse=control.createMock(DeleteResponse.class);
  expect(indexer.deleteMessage(mailboxId.serialize() + ":" + messageId)).andReturn(expectedDeleteResponse);
  control.replay();
  testee.delete(session,mailbox,messageRange);
  control.verify();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @SuppressWarnings("unchecked") public void addShouldNotPropagateExceptionWhenExceptionOccurs() throws Exception {
  MailboxSession session=control.createMock(MailboxSession.class);
  Mailbox<TestId> mailbox=control.createMock(Mailbox.class);
  long messageId=1;
  TestId mailboxId=TestId.of(12);
  Message<TestId> message=mockedMessage(messageId,mailboxId);
  expect(mailbox.getMailboxId()).andReturn(mailboxId);
  expect(indexer.indexMessage(eq(mailboxId.serialize() + ":" + messageId),anyString())).andThrow(new ElasticsearchException(""));
  control.replay();
  testee.add(session,mailbox,message);
  control.verify();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @SuppressWarnings("unchecked") public void addShouldIndex() throws Exception {
  MailboxSession session=control.createMock(MailboxSession.class);
  Mailbox<TestId> mailbox=control.createMock(Mailbox.class);
  long messageId=1;
  TestId mailboxId=TestId.of(12);
  expect(mailbox.getMailboxId()).andReturn(mailboxId);
  Message<TestId> message=mockedMessage(messageId,mailboxId);
  IndexResponse expectedIndexResponse=control.createMock(IndexResponse.class);
  expect(indexer.indexMessage(eq(mailboxId.serialize() + ":" + messageId),anyString())).andReturn(expectedIndexResponse);
  control.replay();
  testee.add(session,mailbox,message);
  control.verify();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @SuppressWarnings("unchecked") public void deleteShouldNotPropagateExceptionWhenExceptionOccurs() throws Exception {
  MailboxSession session=control.createMock(MailboxSession.class);
  Mailbox<TestId> mailbox=control.createMock(Mailbox.class);
  long messageId=1;
  MessageRange messageRange=MessageRange.one(messageId);
  TestId mailboxId=TestId.of(12);
  expect(mailbox.getMailboxId()).andReturn(mailboxId);
  expect(indexer.deleteMessage(mailboxId.serialize() + ":" + messageId)).andThrow(new ElasticsearchException(""));
  control.replay();
  testee.delete(session,mailbox,messageRange);
  control.verify();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @SuppressWarnings("unchecked") public void updateShouldNotPropagateExceptionWhenExceptionOccurs() throws Exception {
  MailboxSession session=control.createMock(MailboxSession.class);
  Mailbox<TestId> mailbox=control.createMock(Mailbox.class);
  Flags flags=new Flags();
  long messageId=1;
  TestId mailboxId=TestId.of(12);
  MessageRange messageRange=MessageRange.one(messageId);
  expectLastCall();
  expect(mailbox.getMailboxId()).andReturn(mailboxId);
  expect(indexer.updateMessage(eq(mailboxId.serialize() + ":" + messageId),anyString())).andThrow(new ElasticsearchException(""));
  control.replay();
  testee.update(session,mailbox,messageRange,flags,MODSEQ);
  control.verify();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @SuppressWarnings("unchecked") public void updateShouldWork() throws Exception {
  MailboxSession session=control.createMock(MailboxSession.class);
  Mailbox<TestId> mailbox=control.createMock(Mailbox.class);
  Flags flags=new Flags();
  long messageId=1;
  TestId mailboxId=TestId.of(12);
  MessageRange messageRange=MessageRange.one(messageId);
  expectLastCall();
  expect(mailbox.getMailboxId()).andReturn(mailboxId);
  UpdateResponse expectedUpdateResponse=control.createMock(UpdateResponse.class);
  expect(indexer.updateMessage(eq(mailboxId.serialize() + ":" + messageId),anyString())).andReturn(expectedUpdateResponse);
  control.replay();
  testee.update(session,mailbox,messageRange,flags,MODSEQ);
  control.verify();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailbox.elasticsearch.json.HeaderCollectionTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NullPointerException.class) public void nullFieldShouldThrow(){
  HeaderCollection.builder().add(null).build();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailbox.elasticsearch.json.MessageToElasticSearchJsonTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NullPointerException.class) public void emailWithNoMailboxIdShouldThrow() throws IOException {
  MessageToElasticSearchJson messageToElasticSearchJson=new MessageToElasticSearchJson(new DefaultTextExtractor(),ZoneId.of("Europe/Paris"));
  Message<TestId> mailWithNoMailboxId;
  try {
    mailWithNoMailboxId=new SimpleMessage<>(date,SIZE,BODY_START_OCTET,new SharedByteArrayInputStream(IOUtils.toByteArray(ClassLoader.getSystemResourceAsStream("documents/recursiveMail.eml"))),new FlagsBuilder().add(Flags.Flag.DELETED,Flags.Flag.SEEN).add("debian","security").build(),propertyBuilder,null);
    mailWithNoMailboxId.setModSeq(MOD_SEQ);
    mailWithNoMailboxId.setUid(UID);
  }
 catch (  Exception exception) {
    throw Throwables.propagate(exception);
  }
  messageToElasticSearchJson.convertToJson(mailWithNoMailboxId);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void getUpdatedJsonMessagePartShouldBehaveWellOnEmptyFlags() throws Exception {
  MessageToElasticSearchJson messageToElasticSearchJson=new MessageToElasticSearchJson(new DefaultTextExtractor(),ZoneId.of("Europe/Paris"));
  assertThatJson(messageToElasticSearchJson.getUpdatedJsonMessagePart(new Flags(),MOD_SEQ)).isEqualTo("{\"modSeq\":42,\"isAnswered\":false,\"isDeleted\":false,\"isDraft\":false,\"isFlagged\":false,\"isRecent\":false,\"userFlags\":[],\"isUnread\":true}");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void recursiveEmailShouldBeWellConvertedToJson() throws IOException {
  MessageToElasticSearchJson messageToElasticSearchJson=new MessageToElasticSearchJson(new DefaultTextExtractor(),ZoneId.of("Europe/Paris"));
  Message<TestId> recursiveMail=new SimpleMessage<>(date,SIZE,BODY_START_OCTET,new SharedByteArrayInputStream(IOUtils.toByteArray(ClassLoader.getSystemResourceAsStream("documents/recursiveMail.eml"))),new FlagsBuilder().add(Flags.Flag.DELETED,Flags.Flag.SEEN).add("debian","security").build(),propertyBuilder,MAILBOX_ID);
  recursiveMail.setModSeq(MOD_SEQ);
  recursiveMail.setUid(UID);
  assertThatJson(messageToElasticSearchJson.convertToJson(recursiveMail)).when(IGNORING_ARRAY_ORDER).when(IGNORING_VALUES).isEqualTo(IOUtils.toString(ClassLoader.getSystemResource("documents/recursiveMail.json")));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void htmlEmailShouldBeWellConvertedToJson() throws IOException {
  MessageToElasticSearchJson messageToElasticSearchJson=new MessageToElasticSearchJson(new DefaultTextExtractor(),ZoneId.of("Europe/Paris"));
  Message<TestId> htmlMail=new SimpleMessage<>(date,SIZE,BODY_START_OCTET,new SharedByteArrayInputStream(IOUtils.toByteArray(ClassLoader.getSystemResourceAsStream("documents/htmlMail.eml"))),new FlagsBuilder().add(Flags.Flag.DELETED,Flags.Flag.SEEN).add("social","pocket-money").build(),propertyBuilder,MAILBOX_ID);
  htmlMail.setModSeq(MOD_SEQ);
  htmlMail.setUid(UID);
  assertThatJson(messageToElasticSearchJson.convertToJson(htmlMail)).when(IGNORING_ARRAY_ORDER).isEqualTo(IOUtils.toString(ClassLoader.getSystemResource("documents/htmlMail.json")));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void getUpdatedJsonMessagePartShouldBehaveWellOnNonEmptyFlags() throws Exception {
  MessageToElasticSearchJson messageToElasticSearchJson=new MessageToElasticSearchJson(new DefaultTextExtractor(),ZoneId.of("Europe/Paris"));
  assertThatJson(messageToElasticSearchJson.getUpdatedJsonMessagePart(new FlagsBuilder().add(Flags.Flag.DELETED,Flags.Flag.FLAGGED).add("user").build(),MOD_SEQ)).isEqualTo("{\"modSeq\":42,\"isAnswered\":false,\"isDeleted\":true,\"isDraft\":false,\"isFlagged\":true,\"isRecent\":false,\"userFlags\":[\"user\"],\"isUnread\":true}");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void pgpSignedEmailShouldBeWellConvertedToJson() throws IOException {
  MessageToElasticSearchJson messageToElasticSearchJson=new MessageToElasticSearchJson(new DefaultTextExtractor(),ZoneId.of("Europe/Paris"));
  Message<TestId> pgpSignedMail=new SimpleMessage<>(date,SIZE,BODY_START_OCTET,new SharedByteArrayInputStream(IOUtils.toByteArray(ClassLoader.getSystemResourceAsStream("documents/pgpSignedMail.eml"))),new FlagsBuilder().add(Flags.Flag.DELETED,Flags.Flag.SEEN).add("debian","security").build(),propertyBuilder,MAILBOX_ID);
  pgpSignedMail.setModSeq(MOD_SEQ);
  pgpSignedMail.setUid(UID);
  assertThatJson(messageToElasticSearchJson.convertToJson(pgpSignedMail)).when(IGNORING_ARRAY_ORDER).isEqualTo(IOUtils.toString(ClassLoader.getSystemResource("documents/pgpSignedMail.json")));
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NullPointerException.class) public void getUpdatedJsonMessagePartShouldThrowIfFlagsIsNull() throws Exception {
  MessageToElasticSearchJson messageToElasticSearchJson=new MessageToElasticSearchJson(new DefaultTextExtractor(),ZoneId.of("Europe/Paris"));
  messageToElasticSearchJson.getUpdatedJsonMessagePart(null,MOD_SEQ);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void spamEmailShouldBeWellConvertedToJsonWithApacheTika() throws IOException {
  MessageToElasticSearchJson messageToElasticSearchJson=new MessageToElasticSearchJson(new TikaTextExtractor(),ZoneId.of("Europe/Paris"));
  Message<TestId> spamMail=new SimpleMessage<>(date,SIZE,BODY_START_OCTET,new SharedByteArrayInputStream(IOUtils.toByteArray(ClassLoader.getSystemResourceAsStream("documents/nonTextual.eml"))),new Flags(),propertyBuilder,MAILBOX_ID);
  spamMail.setModSeq(MOD_SEQ);
  assertThatJson(messageToElasticSearchJson.convertToJson(spamMail)).when(IGNORING_ARRAY_ORDER).isEqualTo(IOUtils.toString(ClassLoader.getSystemResource("documents/nonTextual.json")));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void simpleEmailShouldBeWellConvertedToJson() throws IOException {
  MessageToElasticSearchJson messageToElasticSearchJson=new MessageToElasticSearchJson(new DefaultTextExtractor(),ZoneId.of("Europe/Paris"));
  Message<TestId> mail=new SimpleMessage<>(date,SIZE,BODY_START_OCTET,new SharedByteArrayInputStream(IOUtils.toByteArray(ClassLoader.getSystemResourceAsStream("documents/mail.eml"))),new FlagsBuilder().add(Flags.Flag.DELETED,Flags.Flag.SEEN).add("debian","security").build(),propertyBuilder,MAILBOX_ID);
  mail.setModSeq(MOD_SEQ);
  mail.setUid(UID);
  assertThatJson(messageToElasticSearchJson.convertToJson(mail)).when(IGNORING_ARRAY_ORDER).when(IGNORING_VALUES).isEqualTo(IOUtils.toString(ClassLoader.getSystemResource("documents/mail.json")));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void emailWithNoInternalDateShouldUseNowDate() throws IOException {
  MessageToElasticSearchJson messageToElasticSearchJson=new MessageToElasticSearchJson(new DefaultTextExtractor(),ZoneId.of("Europe/Paris"));
  Message<TestId> mailWithNoInternalDate=new SimpleMessage<>(null,SIZE,BODY_START_OCTET,new SharedByteArrayInputStream(IOUtils.toByteArray(ClassLoader.getSystemResourceAsStream("documents/recursiveMail.eml"))),new FlagsBuilder().add(Flags.Flag.DELETED,Flags.Flag.SEEN).add("debian","security").build(),propertyBuilder,MAILBOX_ID);
  mailWithNoInternalDate.setModSeq(MOD_SEQ);
  mailWithNoInternalDate.setUid(UID);
  assertThatJson(messageToElasticSearchJson.convertToJson(mailWithNoInternalDate)).when(IGNORING_ARRAY_ORDER).when(IGNORING_VALUES).isEqualTo(IOUtils.toString(ClassLoader.getSystemResource("documents/recursiveMail.json")));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void spamEmailShouldBeWellConvertedToJson() throws IOException {
  MessageToElasticSearchJson messageToElasticSearchJson=new MessageToElasticSearchJson(new DefaultTextExtractor(),ZoneId.of("Europe/Paris"));
  Message<TestId> spamMail=new SimpleMessage<>(date,SIZE,BODY_START_OCTET,new SharedByteArrayInputStream(IOUtils.toByteArray(ClassLoader.getSystemResourceAsStream("documents/spamMail.eml"))),new Flags(),propertyBuilder,MAILBOX_ID);
  spamMail.setModSeq(MOD_SEQ);
  assertThatJson(messageToElasticSearchJson.convertToJson(spamMail)).when(IGNORING_ARRAY_ORDER).isEqualTo(IOUtils.toString(ClassLoader.getSystemResource("documents/spamMail.json")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailbox.elasticsearch.query.QueryConverterTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void allCriterionShouldBeWellConverted() throws Exception {
  SearchQuery searchQuery=new SearchQuery();
  searchQuery.andCriteria(SearchQuery.all());
  assertThatJson(queryConverter.from(searchQuery,MAILBOX_UUID).toXContent(jsonBuilder(),QueryBuilder.EMPTY_PARAMS).string()).when(IGNORING_ARRAY_ORDER).isEqualTo("{" + "    \"filtered\": {" + "        \"query\": {"+ "                    \"match_all\": {}"+ "        },"+ "        \"filter\": {"+ "                    \"term\": {"+ "                        \"mailboxId\": \"12345\""+ "                    }"+ "        }"+ "    }"+ "}");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void filtersAloneShouldBeCombinedWithAMatchAll() throws Exception {
  SearchQuery searchQuery=new SearchQuery();
  searchQuery.andCriteria(SearchQuery.modSeqGreaterThan(42L));
  assertThatJson(queryConverter.from(searchQuery,MAILBOX_UUID).toXContent(jsonBuilder(),QueryBuilder.EMPTY_PARAMS).string()).when(IGNORING_ARRAY_ORDER).isEqualTo("{" + "  \"filtered\" : {" + "    \"query\" : {"+ "      \"match_all\" : { }"+ "    },"+ "    \"filter\" : {"+ "      \"bool\" : {"+ "        \"must\" : [ {"+ "          \"range\" : {"+ "            \"modSeq\" : {"+ "              \"from\" : 42,"+ "              \"to\" : null,"+ "              \"include_lower\" : true,"+ "              \"include_upper\" : true"+ "            }"+ "          }"+ "        }, {"+ "          \"term\" : {"+ "            \"mailboxId\" : \"12345\""+ "          }"+ "        } ]"+ "      }"+ "    }"+ "  }"+ "}");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void textCriterionShouldBeWellConverted() throws Exception {
  SearchQuery searchQuery=new SearchQuery();
  searchQuery.andCriteria(SearchQuery.bodyContains("awesome Linagora team"));
  assertThatJson(queryConverter.from(searchQuery,MAILBOX_UUID).toXContent(jsonBuilder(),QueryBuilder.EMPTY_PARAMS).string()).when(IGNORING_ARRAY_ORDER).isEqualTo("{" + "    \"filtered\": {" + "        \"query\": {"+ "                    \"match\": {"+ "                        \"textBody\": {"+ "                            \"query\": \"awesome Linagora team\","+ "                            \"type\": \"boolean\""+ "                        }"+ "            }"+ "        },"+ "        \"filter\": {"+ "                    \"term\": {"+ "                        \"mailboxId\": \"12345\""+ "                    }"+ "        }"+ "    }"+ "}");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void dateHeadersShouldBeWellConverted() throws Exception {
  SearchQuery searchQuery=new SearchQuery();
  searchQuery.andCriteria(SearchQuery.headerDateBefore("Date",new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse("2015-02-25 21:54:38"),SearchQuery.DateResolution.Hour));
  assertThatJson(queryConverter.from(searchQuery,MAILBOX_UUID).toXContent(jsonBuilder(),QueryBuilder.EMPTY_PARAMS).string()).when(IGNORING_VALUES).when(IGNORING_ARRAY_ORDER).isEqualTo("{" + "    \"filtered\": {" + "        \"query\": {"+ "            \"match_all\": {}"+ "        },"+ "        \"filter\": {"+ "            \"bool\": {"+ "                \"must\": ["+ "                    {"+ "                        \"range\": {"+ "                            \"sentDate\": {"+ "                                \"from\": null,"+ "                                \"to\": \"2015-02-25T22:00:00+01:00\","+ "                                \"include_lower\": true,"+ "                                \"include_upper\": true"+ "                            }"+ "                        }"+ "                    },"+ "                    {"+ "                        \"term\": {"+ "                            \"mailboxId\": \"12345\""+ "                        }"+ "                    }"+ "                ]"+ "            }"+ "        }"+ "    }"+ "}");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void criterionInjectionShouldBeJsonProofed() throws Exception {
  SearchQuery searchQuery=new SearchQuery();
  searchQuery.andCriteria(SearchQuery.modSeqGreaterThan(42L));
  assertThatJson(queryConverter.from(searchQuery,MAILBOX_UUID + "\"},{\"exist\":\"id\"},{\"match\":\"well done").toXContent(jsonBuilder(),QueryBuilder.EMPTY_PARAMS).string()).when(IGNORING_ARRAY_ORDER).isEqualTo("{" + "  \"filtered\" : {" + "    \"query\" : {"+ "      \"match_all\" : { }"+ "    },"+ "    \"filter\" : {"+ "      \"bool\" : {"+ "        \"must\" : [ {"+ "          \"range\" : {"+ "            \"modSeq\" : {"+ "              \"from\" : 42,"+ "              \"to\" : null,"+ "              \"include_lower\" : true,"+ "              \"include_upper\" : true"+ "            }"+ "          }"+ "        }, {"+ "          \"term\" : {"+ "            \"mailboxId\" : \"12345\\\"},{\\\"exist\\\":\\\"id\\\"},{\\\"match\\\":\\\"well done\""+ "          }"+ "        } ]"+ "      }"+ "    }"+ "  }"+ "}");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addressHeadersShouldBeWellConverted() throws Exception {
  SearchQuery searchQuery=new SearchQuery();
  searchQuery.andCriteria(SearchQuery.address(SearchQuery.AddressType.Bcc,"Benoit Tellier<btellier@free.fr>"));
  assertThatJson(queryConverter.from(searchQuery,MAILBOX_UUID).toXContent(jsonBuilder(),QueryBuilder.EMPTY_PARAMS).string()).when(IGNORING_ARRAY_ORDER).isEqualTo("{" + "  \"filtered\" : {" + "    \"query\" : {"+ "      \"nested\" : {"+ "        \"query\" : {"+ "          \"bool\" : {"+ "            \"should\" : [ {"+ "              \"match\" : {"+ "                \"bcc.name\" : {"+ "                  \"query\" : \"Benoit Tellier<btellier@free.fr>\","+ "                  \"type\" : \"boolean\""+ "                }"+ "              }"+ "            }, {"+ "              \"match\" : {"+ "                \"bcc.address\" : {"+ "                  \"query\" : \"Benoit Tellier<btellier@free.fr>\","+ "                  \"type\" : \"boolean\""+ "                }"+ "              }"+ "            } ]"+ "          }"+ "        },"+ "        \"path\" : \"bcc\""+ "      }"+ "    },"+ "    \"filter\" : {"+ "      \"term\" : {"+ "        \"mailboxId\" : \"12345\""+ "      }"+ "    }"+ "  }"+ "}");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void queriesAloneShouldBeCombinedWithABoolQuery() throws Exception {
  SearchQuery searchQuery=new SearchQuery();
  searchQuery.andCriteria(SearchQuery.bodyContains("awesome Linagora team"));
  searchQuery.andCriteria(SearchQuery.bodyContains("Gold fish"));
  assertThatJson(queryConverter.from(searchQuery,MAILBOX_UUID).toXContent(jsonBuilder(),QueryBuilder.EMPTY_PARAMS).string()).when(IGNORING_ARRAY_ORDER).isEqualTo("{" + "    \"filtered\": {" + "        \"query\": {"+ "                    \"bool\": {"+ "                        \"must\": ["+ "                            {"+ "                                \"match\": {"+ "                                    \"textBody\": {"+ "                                        \"query\": \"awesome Linagora team\","+ "                                        \"type\": \"boolean\""+ "                                    }"+ "                                }"+ "                            },"+ "                            {"+ "                                \"match\": {"+ "                                    \"textBody\": {"+ "                                        \"query\": \"Gold fish\","+ "                                        \"type\": \"boolean\""+ "                                    }"+ "                                }"+ "                            }"+ "                        ]"+ "            }"+ "        },"+ "        \"filter\": {"+ "                    \"term\": {"+ "                        \"mailboxId\": \"12345\""+ "                    }"+ "        }"+ "    }"+ "}");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailbox.hbase.mail.HBaseMailboxMapperTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test an ordered scenario with list, delete... methods.
 * @throws Exception
 */
@Test public void testMailboxMapperScenario() throws Exception {
  testFindMailboxByPath();
  testFindMailboxWithPathLike();
  testList();
  testSave();
  testDelete();
  testHasChildren();
  testDeleteAllMailboxes();
  testChunkStream();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailbox.hbase.mail.HBaseMessageMapperTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test an ordered scenario with count, find, add... methods.
 * @throws Exception
 */
@Test public void testMessageMapperScenario() throws Exception {
  testCountMessagesInMailbox();
  testCountUnseenMessagesInMailbox();
  testFindFirstUnseenMessageUid();
  testFindRecentMessageUidsInMailbox();
  testAdd();
  testGetLastUid();
  testGetHighestModSeq();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailbox.inmemory.quota.InMemoryCurrentQuotaManagerTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void decreaseShouldThrowOnNegativeCount() throws Exception {
  testee.decrease(QUOTA_ROOT,-1,5);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void decreaseShouldThrowOnNegativeSize() throws Exception {
  testee.decrease(QUOTA_ROOT,5,-1);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void increaseShouldThrowOnZeroCount() throws Exception {
  testee.increase(QUOTA_ROOT,0,5);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void decreaseShouldThrowOnZeroSize() throws Exception {
  testee.decrease(QUOTA_ROOT,5,0);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void increaseShouldThrowOnNegativeCount() throws Exception {
  testee.increase(QUOTA_ROOT,-1,5);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void decreaseShouldThrowOnZeroCount() throws Exception {
  testee.decrease(QUOTA_ROOT,0,5);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void increaseShouldThrowOnZeroSize() throws Exception {
  testee.increase(QUOTA_ROOT,5,0);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void increaseShouldThrowOnNegativeSize() throws Exception {
  testee.increase(QUOTA_ROOT,5,-1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailbox.maildir.MailderMessageNameTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testParsing() throws Exception {
  try {
    parseValidName(validName,parts);
  }
 catch (  Throwable e) {
    throw new Exception("Valid name '" + validName + "' failed.",e);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailbox.manager.QuotaMessageManagerTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=OverQuotaException.class) public void testCopyOverQuotaMessages() throws Exception {
  try {
    resources.fillMailbox();
  }
 catch (  OverQuotaException overQuotaException) {
  }
  maxQuotaManager.setMaxMessage(quotaRootResolver.getQuotaRoot(inbox),20l);
  mailboxManager.copyMessages(MessageRange.all(),inbox,subFolder,session);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRetrievalOverMaxMessage() throws Exception {
  maxQuotaManager.setMaxMessage(quotaRootResolver.getQuotaRoot(inbox),8l);
  try {
    resources.fillMailbox();
  }
 catch (  OverQuotaException overQuotaException) {
  }
  messageManager.expunge(MessageRange.all(),session);
  resources.appendMessage(messageManager,session,new FlagsBuilder().add(Flags.Flag.SEEN).build());
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=OverQuotaException.class) public void testAppendOverQuotaMessages() throws Exception {
  maxQuotaManager.setMaxMessage(quotaRootResolver.getQuotaRoot(inbox),8l);
  resources.fillMailbox();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRetrievalOverMaxStorage() throws Exception {
  maxQuotaManager.setMaxStorage(quotaRootResolver.getQuotaRoot(inbox),8 * MockMail.MAIL_TEXT_PLAIN.length() + 1);
  try {
    resources.fillMailbox();
  }
 catch (  OverQuotaException overQuotaException) {
  }
  messageManager.expunge(MessageRange.all(),session);
  resources.appendMessage(messageManager,session,new FlagsBuilder().add(Flags.Flag.SEEN).build());
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=OverQuotaException.class) public void testAppendOverQuotaSize() throws Exception {
  maxQuotaManager.setMaxStorage(quotaRootResolver.getQuotaRoot(inbox),3 * MockMail.MAIL_TEXT_PLAIN.length() + 1);
  resources.fillMailbox();
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=OverQuotaException.class) public void testCopyOverQuotaSize() throws Exception {
  maxQuotaManager.setMaxStorage(quotaRootResolver.getQuotaRoot(inbox),20l * MockMail.MAIL_TEXT_PLAIN.length());
  try {
    resources.fillMailbox();
  }
 catch (  OverQuotaException overQuotaException) {
  }
  mailboxManager.copyMessages(MessageRange.all(),inbox,subFolder,session);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailbox.store.PartContentBuilderComplexMultipartTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShouldLocateOuterPlain() throws Exception {
  int[] path={3};
  check(FULL_OUTER_PLAIN,OUTER_PLAIN_BODY,CONTENT_TYPE_PLAIN,path);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShouldLocateInnerPlain() throws Exception {
  int[] path={2,1};
  check(FULL_INNER_TXT,INNER_PLAIN_BODY,CONTENT_TYPE_PLAIN,path);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShouldLocateInnerMail() throws Exception {
  int[] path={2,3};
  check(FULL_INNERMOST_EMAIL,RFC822_PLAIN_MAIL,CONTENT_TYPE_RFC822,path);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShouldNotFoundSubPartOfNonMultiInnerPart() throws Exception {
  int[] path={2,2,1};
  for (int i=1; i < 10; i++) {
    path[2]=i;
    checkNotPartFound(path);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShouldLocateOuterHtml() throws Exception {
  int[] path={1};
  check(FULL_OUTER_HTML,OUTER_HTML_BODY,CONTENT_TYPE_HTML,path);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShouldLocateOuterMail() throws Exception {
  int[] path={2};
  check(FULL_INNER_MAIL,INNER_MAIL,CONTENT_TYPE_RFC822,path);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShouldLocateInnerHtml() throws Exception {
  int[] path={2,2};
  check(FULL_INNER_HTML,INNER_HTML_BODY,CONTENT_TYPE_HTML,path);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShouldNotFoundSubPartOfNonMultiPartTopLevel() throws Exception {
  int[] path={1,1};
  for (int i=1; i < 10; i++) {
    path[1]=i;
    checkNotPartFound(path);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailbox.store.PartContentBuilderMultipartAlternativeTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShouldLocateHeadersOfMultipartAlterative() throws Exception {
  checkContentType(CONTENT_TYPE_PLAIN,MULTIPART_ALTERNATIVE,1);
  checkContentType(CONTENT_TYPE_HTML,MULTIPART_ALTERNATIVE,2);
  checkContentType(CONTENT_TYPE_XHTML,MULTIPART_ALTERNATIVE,3);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailbox.store.mail.model.AbstractMailboxMapperTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MailboxNotFoundException.class) public void findMailboxByPathWhenAbsentShouldFail() throws MailboxException {
  mailboxMapper.findMailboxByPath(new MailboxPath("#private","benwa","INBOX"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailbox.store.quota.DefaultQuotaRootResolverTest </h4><pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void getQuotaRootShouldThrowWhenNamespaceContainsSeparator() throws Exception {
  testee.getQuotaRoot(new MailboxPath("#pr&ivate","benwa","INBOX"));
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MailboxException.class) public void retrieveAssociatedMailboxesShouldThrowWhenQuotaRootNotContainsSeparator2Times() throws Exception {
  testee.retrieveAssociatedMailboxes(QuotaRootImpl.quotaRoot("#private&be&nwa"),null);
}

</code></pre>

<br>
<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void getQuotaRootShouldThrowWhenUserContainsSeparator() throws Exception {
  testee.getQuotaRoot(new MailboxPath("#private","ben&wa","INBOX"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.mailbox.store.quota.ListeningCurrentQuotaUpdaterTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void emptyExpungedEventShouldNotTriggerDecrease() throws Exception {
  MailboxListener.Expunged expunged=mock(MailboxListener.Expunged.class);
  when(expunged.getUids()).thenAnswer(new Answer<List<Long>>(){
    @Override public List<Long> answer(    InvocationOnMock invocationOnMock) throws Throwable {
      return Lists.newArrayList();
    }
  }
);
  when(expunged.getMailboxPath()).thenAnswer(new Answer<MailboxPath>(){
    @Override public MailboxPath answer(    InvocationOnMock invocationOnMock) throws Throwable {
      return MAILBOX_PATH;
    }
  }
);
  when(mockedQuotaRootResolver.getQuotaRoot(MAILBOX_PATH)).thenAnswer(new Answer<QuotaRoot>(){
    @Override public QuotaRoot answer(    InvocationOnMock invocationOnMock) throws Throwable {
      return QUOTA_ROOT;
    }
  }
);
  testee.event(expunged);
  verify(mockedCurrentQuotaManager,never()).decrease(QUOTA_ROOT,0,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void addedEventShouldIncreaseCurrentQuotaValues() throws Exception {
  MailboxListener.Added added=mock(MailboxListener.Added.class);
  when(added.getMetaData(36)).thenAnswer(new Answer<MessageMetaData>(){
    @Override public MessageMetaData answer(    InvocationOnMock invocationOnMock) throws Throwable {
      return new SimpleMessageMetaData(36,0,new Flags(),SIZE,new Date());
    }
  }
);
  when(added.getMetaData(38)).thenAnswer(new Answer<MessageMetaData>(){
    @Override public MessageMetaData answer(    InvocationOnMock invocationOnMock) throws Throwable {
      return new SimpleMessageMetaData(38,0,new Flags(),SIZE,new Date());
    }
  }
);
  when(added.getUids()).thenAnswer(new Answer<List<Long>>(){
    @Override public List<Long> answer(    InvocationOnMock invocationOnMock) throws Throwable {
      return Lists.newArrayList(36L,38L);
    }
  }
);
  when(added.getMailboxPath()).thenAnswer(new Answer<MailboxPath>(){
    @Override public MailboxPath answer(    InvocationOnMock invocationOnMock) throws Throwable {
      return MAILBOX_PATH;
    }
  }
);
  when(mockedQuotaRootResolver.getQuotaRoot(MAILBOX_PATH)).thenAnswer(new Answer<QuotaRoot>(){
    @Override public QuotaRoot answer(    InvocationOnMock invocationOnMock) throws Throwable {
      return QUOTA_ROOT;
    }
  }
);
  testee.event(added);
  verify(mockedCurrentQuotaManager).increase(QUOTA_ROOT,2,2 * SIZE);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void emptyAddedEventShouldNotTriggerDecrease() throws Exception {
  MailboxListener.Added added=mock(MailboxListener.Added.class);
  when(added.getUids()).thenAnswer(new Answer<List<Long>>(){
    @Override public List<Long> answer(    InvocationOnMock invocationOnMock) throws Throwable {
      return Lists.newArrayList();
    }
  }
);
  when(added.getMailboxPath()).thenAnswer(new Answer<MailboxPath>(){
    @Override public MailboxPath answer(    InvocationOnMock invocationOnMock) throws Throwable {
      return MAILBOX_PATH;
    }
  }
);
  when(mockedQuotaRootResolver.getQuotaRoot(MAILBOX_PATH)).thenAnswer(new Answer<QuotaRoot>(){
    @Override public QuotaRoot answer(    InvocationOnMock invocationOnMock) throws Throwable {
      return QUOTA_ROOT;
    }
  }
);
  testee.event(added);
  verify(mockedCurrentQuotaManager,never()).increase(QUOTA_ROOT,0,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void expungedEventShouldDecreaseCurrentQuotaValues() throws Exception {
  MailboxListener.Expunged expunged=mock(MailboxListener.Expunged.class);
  when(expunged.getMetaData(36)).thenAnswer(new Answer<MessageMetaData>(){
    @Override public MessageMetaData answer(    InvocationOnMock invocationOnMock) throws Throwable {
      return new SimpleMessageMetaData(36,0,new Flags(),SIZE,new Date());
    }
  }
);
  when(expunged.getMetaData(38)).thenAnswer(new Answer<MessageMetaData>(){
    @Override public MessageMetaData answer(    InvocationOnMock invocationOnMock) throws Throwable {
      return new SimpleMessageMetaData(38,0,new Flags(),SIZE,new Date());
    }
  }
);
  when(expunged.getUids()).thenAnswer(new Answer<List<Long>>(){
    @Override public List<Long> answer(    InvocationOnMock invocationOnMock) throws Throwable {
      return Lists.newArrayList(36L,38L);
    }
  }
);
  when(expunged.getMailboxPath()).thenAnswer(new Answer<MailboxPath>(){
    @Override public MailboxPath answer(    InvocationOnMock invocationOnMock) throws Throwable {
      return MAILBOX_PATH;
    }
  }
);
  when(mockedQuotaRootResolver.getQuotaRoot(MAILBOX_PATH)).thenAnswer(new Answer<QuotaRoot>(){
    @Override public QuotaRoot answer(    InvocationOnMock invocationOnMock) throws Throwable {
      return QUOTA_ROOT;
    }
  }
);
  testee.event(expunged);
  verify(mockedCurrentQuotaManager).decrease(QUOTA_ROOT,2,2 * SIZE);
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
