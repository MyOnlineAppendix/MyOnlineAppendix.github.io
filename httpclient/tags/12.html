<h3><span class=" glyphicon glyphicon-tag"/>&nbspExecutionTester</h3><kbd>Executes methods or other tests from the same test unit</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.hc.client5.http.config.TestRequestConfig </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBasics(){
  final RequestConfig config=RequestConfig.custom().build();
  config.toString();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.entity.TestGZip </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCompressionIOExceptionLeavesOutputStreamOpen() throws Exception {
  final HttpEntity in=Mockito.mock(HttpEntity.class);
  Mockito.doThrow(new IOException("Ooopsie")).when(in).writeTo(Mockito.<OutputStream>any());
  final GzipCompressingEntity gzipe=new GzipCompressingEntity(in);
  final OutputStream out=Mockito.mock(OutputStream.class);
  try {
    gzipe.writeTo(out);
  }
 catch (  final IOException ex) {
    Mockito.verify(out,Mockito.never()).close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.fluent.TestFluent </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConnectionRelease() throws Exception {
  final HttpHost target=start();
  final String baseURL="http://localhost:" + target.getPort();
  for (int i=0; i < 20; i++) {
    Request.Get(baseURL + "/").execute().returnContent();
    Request.Get(baseURL + "/").execute().returnResponse();
    Request.Get(baseURL + "/").execute().discardContent();
    Request.Get(baseURL + "/").execute().handleResponse(new ResponseHandler(){
      @Override public Object handleResponse(      final HttpResponse response) throws IOException {
        return null;
      }
    }
);
    final File tmpFile=File.createTempFile("test",".bin");
    try {
      Request.Get(baseURL + "/").execute().saveContent(tmpFile);
    }
  finally {
      tmpFile.delete();
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ClientProtocolException.class) public void testGetRequestFailure() throws Exception {
  final HttpHost target=start();
  final String baseURL="http://localhost:" + target.getPort();
  Request.Get(baseURL + "/boom").execute().returnContent().asString();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.TestDefaultConnKeepAliveStrategy </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testIllegalResponseArg() throws Exception {
  final HttpContext context=new BasicHttpContext(null);
  final ConnectionKeepAliveStrategy keepAliveStrat=new DefaultConnectionKeepAliveStrategy();
  keepAliveStrat.getKeepAliveDuration(null,context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.auth.TestAuthChallengeParser </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ParseException.class) public void testParseMalformedAuthChallenge3() throws Exception {
  final CharArrayBuffer buffer=new CharArrayBuffer(64);
  buffer.append("blah blah blah");
  final ParserCursor cursor=new ParserCursor(0,buffer.length());
  parser.parse(buffer,cursor);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ParseException.class) public void testParseMalformedAuthChallenge2() throws Exception {
  final CharArrayBuffer buffer=new CharArrayBuffer(64);
  buffer.append("This = that");
  final ParserCursor cursor=new ParserCursor(0,buffer.length());
  parser.parse(buffer,cursor);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ParseException.class) public void testParseMalformedAuthChallenge1() throws Exception {
  final CharArrayBuffer buffer=new CharArrayBuffer(64);
  buffer.append("This , ");
  final ParserCursor cursor=new ParserCursor(0,buffer.length());
  parser.parse(buffer,cursor);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.auth.TestBasicAuthCache </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testNullKey() throws Exception {
  final BasicAuthCache cache=new BasicAuthCache();
  final AuthScheme authScheme=new BasicScheme();
  cache.put(null,authScheme);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.auth.TestDigestScheme </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedChallengeException.class) public void testDigestAuthenticationEmptyChallenge1() throws Exception {
  final AuthChallenge authChallenge=parse("Digest");
  final AuthScheme authscheme=new DigestScheme();
  authscheme.processChallenge(authChallenge,null);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedChallengeException.class) public void testDigestAuthenticationEmptyChallenge2() throws Exception {
  final AuthChallenge authChallenge=parse("Digest ");
  final AuthScheme authscheme=new DigestScheme();
  authscheme.processChallenge(authChallenge,null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.auth.TestNTLMEngineImpl </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNTLMUserSessionKey() throws Exception {
  final NTLMEngineImpl.CipherGen gen=new NTLMEngineImpl.CipherGen("DOMAIN","user","SecREt01".toCharArray(),toBytes("0123456789abcdef"),"DOMAIN",toBytes("02000c0044004f004d00410049004e0001000c005300450052005600450052000400140064006f006d00610069006e002e0063006f006d00030022007300650072007600650072002e0064006f006d00610069006e002e0063006f006d0000000000"),toBytes("ffffff0011223344"),toBytes("ffffff0011223344"),null,toBytes("0090d336b734c301"));
  checkArraysMatch(toBytes("3f373ea8e4af954f14faa506f8eebdc4"),gen.getNTLMUserSessionKey());
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLM2SessionResponse() throws Exception {
  final NTLMEngineImpl.CipherGen gen=new NTLMEngineImpl.CipherGen("DOMAIN","user","SecREt01".toCharArray(),toBytes("0123456789abcdef"),"DOMAIN",toBytes("02000c0044004f004d00410049004e0001000c005300450052005600450052000400140064006f006d00610069006e002e0063006f006d00030022007300650072007600650072002e0064006f006d00610069006e002e0063006f006d0000000000"),toBytes("ffffff0011223344"),toBytes("ffffff0011223344"),null,toBytes("0090d336b734c301"));
  checkArraysMatch(toBytes("ffffff001122334400000000000000000000000000000000"),gen.getLM2SessionResponse());
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testType1Message() throws Exception {
  new NTLMEngineImpl().getType1Message("myhost","mydomain");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testType3Message() throws Exception {
  new NTLMEngineImpl().getType3Message("me","mypassword".toCharArray(),"myhost","mydomain",toBytes("0001020304050607"),0xffffffff,null,null);
  new NTLMEngineImpl().getType3Message("me","mypassword".toCharArray(),"myhost","mydomain",toBytes("0001020304050607"),0xffffffff,"mytarget",toBytes("02000c0044004f004d00410049004e0001000c005300450052005600450052000400140064006f006d00610069006e002e0063006f006d00030022007300650072007600650072002e0064006f006d00610069006e002e0063006f006d0000000000"));
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNTLMv2Response() throws Exception {
  final NTLMEngineImpl.CipherGen gen=new NTLMEngineImpl.CipherGen("DOMAIN","user","SecREt01".toCharArray(),toBytes("0123456789abcdef"),"DOMAIN",toBytes("02000c0044004f004d00410049004e0001000c005300450052005600450052000400140064006f006d00610069006e002e0063006f006d00030022007300650072007600650072002e0064006f006d00610069006e002e0063006f006d0000000000"),toBytes("ffffff0011223344"),toBytes("ffffff0011223344"),null,toBytes("0090d336b734c301"));
  checkArraysMatch(toBytes("01010000000000000090d336b734c301ffffff00112233440000000002000c0044004f004d00410049004e0001000c005300450052005600450052000400140064006f006d00610069006e002e0063006f006d00030022007300650072007600650072002e0064006f006d00610069006e002e0063006f006d000000000000000000"),gen.getNTLMv2Blob());
  checkArraysMatch(toBytes("cbabbca713eb795d04c97abc01ee498301010000000000000090d336b734c301ffffff00112233440000000002000c0044004f004d00410049004e0001000c005300450052005600450052000400140064006f006d00610069006e002e0063006f006d00030022007300650072007600650072002e0064006f006d00610069006e002e0063006f006d000000000000000000"),gen.getNTLMv2Response());
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLMResponse() throws Exception {
  final NTLMEngineImpl.CipherGen gen=new NTLMEngineImpl.CipherGen(null,null,"SecREt01".toCharArray(),toBytes("0123456789abcdef"),null,null,null,null,null,null);
  checkArraysMatch(toBytes("c337cd5cbd44fc9782a667af6d427c6de67c20c2d3e77c56"),gen.getLMResponse());
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMD4() throws Exception {
  checkMD4("","31d6cfe0d16ae931b73c59d7e0c089c0");
  checkMD4("a","bde52cb31de33e46245e05fbdbd6fb24");
  checkMD4("abc","a448017aaf21d8525fc10ae87aa6729d");
  checkMD4("message digest","d9130a8164549fe818874806e1c7014b");
  checkMD4("abcdefghijklmnopqrstuvwxyz","d79e1c308aa5bbcdeea8ed63df412da9");
  checkMD4("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789","043f8582f241db351ce627e153e7f0e4");
  checkMD4("12345678901234567890123456789012345678901234567890123456789012345678901234567890","e33b4ddc9c38f2199c3e7b164fcc0536");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLMv2Response() throws Exception {
  final NTLMEngineImpl.CipherGen gen=new NTLMEngineImpl.CipherGen("DOMAIN","user","SecREt01".toCharArray(),toBytes("0123456789abcdef"),"DOMAIN",null,toBytes("ffffff0011223344"),toBytes("ffffff0011223344"),null,null);
  checkArraysMatch(toBytes("d6e6152ea25d03b7c6ba6629c2d6aaf0ffffff0011223344"),gen.getLMv2Response());
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNTLMResponse() throws Exception {
  final NTLMEngineImpl.CipherGen gen=new NTLMEngineImpl.CipherGen(null,null,"SecREt01".toCharArray(),toBytes("0123456789abcdef"),null,null,null,null,null,null);
  checkArraysMatch(toBytes("25a98c1c31e81847466b29b2df4680f39958fb8c213a9cc6"),gen.getNTLMResponse());
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRC4() throws Exception {
  checkArraysMatch(toBytes("e37f97f2544f4d7e"),NTLMEngineImpl.RC4(toBytes("0a003602317a759a"),toBytes("2785f595293f3e2813439d73a223810d")));
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNTLM2SessionResponse() throws Exception {
  final NTLMEngineImpl.CipherGen gen=new NTLMEngineImpl.CipherGen("DOMAIN","user","SecREt01".toCharArray(),toBytes("0123456789abcdef"),"DOMAIN",toBytes("02000c0044004f004d00410049004e0001000c005300450052005600450052000400140064006f006d00610069006e002e0063006f006d00030022007300650072007600650072002e0064006f006d00610069006e002e0063006f006d0000000000"),toBytes("ffffff0011223344"),toBytes("ffffff0011223344"),null,toBytes("0090d336b734c301"));
  checkArraysMatch(toBytes("10d550832d12b2ccb79d5ad1f4eed3df82aca4c3681dd455"),gen.getNTLM2SessionResponse());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.auth.TestRequestAuthCache </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testContextParameterCheck() throws Exception {
  final HttpRequest request=new BasicHttpRequest("GET","/");
  final HttpRequestInterceptor interceptor=new RequestAuthCache();
  interceptor.process(request,null);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testRequestParameterCheck() throws Exception {
  final HttpClientContext context=HttpClientContext.create();
  final HttpRequestInterceptor interceptor=new RequestAuthCache();
  interceptor.process(null,context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.cache.TestAsynchronousValidationRequest </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRunCallsCachingClientAndRemovesIdentifier() throws Exception {
  final String identifier="foo";
  final AsynchronousValidationRequest impl=new AsynchronousValidationRequest(mockParent,mockClient,route,request,context,mockExecAware,mockCacheEntry,identifier,0);
  when(mockClient.revalidateCacheEntry(route,request,context,mockExecAware,mockCacheEntry)).thenReturn(mockResponse);
  when(mockResponse.getStatusLine()).thenReturn(mockStatusLine);
  when(mockStatusLine.getStatusCode()).thenReturn(200);
  impl.run();
  verify(mockClient).revalidateCacheEntry(route,request,context,mockExecAware,mockCacheEntry);
  verify(mockResponse).getStatusLine();
  verify(mockParent).markComplete(identifier);
  verify(mockParent).jobSuccessful(identifier);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRunGracefullyHandlesProtocolException() throws Exception {
  final String identifier="foo";
  final AsynchronousValidationRequest impl=new AsynchronousValidationRequest(mockParent,mockClient,route,request,context,mockExecAware,mockCacheEntry,identifier,0);
  when(mockClient.revalidateCacheEntry(route,request,context,mockExecAware,mockCacheEntry)).thenThrow(new ProtocolException());
  impl.run();
  verify(mockClient).revalidateCacheEntry(route,request,context,mockExecAware,mockCacheEntry);
  verify(mockParent).markComplete(identifier);
  verify(mockParent).jobFailed(identifier);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRunReportsJobFailedForStaleResponse() throws Exception {
  final String identifier="foo";
  final Header[] warning=new Header[]{new BasicHeader(HeaderConstants.WARNING,"110 localhost \"Response is stale\"")};
  final AsynchronousValidationRequest impl=new AsynchronousValidationRequest(mockParent,mockClient,route,request,context,mockExecAware,mockCacheEntry,identifier,0);
  when(mockClient.revalidateCacheEntry(route,request,context,mockExecAware,mockCacheEntry)).thenReturn(mockResponse);
  when(mockResponse.getStatusLine()).thenReturn(mockStatusLine);
  when(mockStatusLine.getStatusCode()).thenReturn(200);
  when(mockResponse.getHeaders(HeaderConstants.WARNING)).thenReturn(warning);
  impl.run();
  verify(mockClient).revalidateCacheEntry(route,request,context,mockExecAware,mockCacheEntry);
  verify(mockResponse).getStatusLine();
  verify(mockStatusLine).getStatusCode();
  verify(mockResponse).getHeaders(HeaderConstants.WARNING);
  verify(mockParent).markComplete(identifier);
  verify(mockParent).jobFailed(identifier);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRunGracefullyHandlesRuntimeException() throws Exception {
  final String identifier="foo";
  final AsynchronousValidationRequest impl=new AsynchronousValidationRequest(mockParent,mockClient,route,request,context,mockExecAware,mockCacheEntry,identifier,0);
  when(mockClient.revalidateCacheEntry(route,request,context,mockExecAware,mockCacheEntry)).thenThrow(new RuntimeException());
  impl.run();
  verify(mockClient).revalidateCacheEntry(route,request,context,mockExecAware,mockCacheEntry);
  verify(mockParent).markComplete(identifier);
  verify(mockParent).jobFailed(identifier);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRunGracefullyHandlesIOException() throws Exception {
  final String identifier="foo";
  final AsynchronousValidationRequest impl=new AsynchronousValidationRequest(mockParent,mockClient,route,request,context,mockExecAware,mockCacheEntry,identifier,0);
  when(mockClient.revalidateCacheEntry(route,request,context,mockExecAware,mockCacheEntry)).thenThrow(new IOException());
  impl.run();
  verify(mockClient).revalidateCacheEntry(route,request,context,mockExecAware,mockCacheEntry);
  verify(mockParent).markComplete(identifier);
  verify(mockParent).jobFailed(identifier);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRunReportsJobFailedForServerError() throws Exception {
  final String identifier="foo";
  final AsynchronousValidationRequest impl=new AsynchronousValidationRequest(mockParent,mockClient,route,request,context,mockExecAware,mockCacheEntry,identifier,0);
  when(mockClient.revalidateCacheEntry(route,request,context,mockExecAware,mockCacheEntry)).thenReturn(mockResponse);
  when(mockResponse.getStatusLine()).thenReturn(mockStatusLine);
  when(mockStatusLine.getStatusCode()).thenReturn(200);
  impl.run();
  verify(mockClient).revalidateCacheEntry(route,request,context,mockExecAware,mockCacheEntry);
  verify(mockResponse).getStatusLine();
  verify(mockStatusLine).getStatusCode();
  verify(mockParent).markComplete(identifier);
  verify(mockParent).jobSuccessful(identifier);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.cache.TestAsynchronousValidator </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSchedulingStrategyShutdownOnClose() throws IOException {
  impl=new AsynchronousValidator(mockSchedulingStrategy);
  impl.close();
  verify(mockSchedulingStrategy).close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.cache.TestCacheInvalidator </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotInvalidateGETRequest() throws Exception {
  request=new BasicHttpRequest("GET","/",HTTP_1_1);
  impl.flushInvalidatedCacheEntries(host,request);
  verify(mockStorage).getEntry("http://foo.example.com:80/");
  verifyNoMoreInteractions(mockStorage);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInvalidatesHEADCacheEntryIfSubsequentGETRequestsAreMadeToTheSameURI() throws Exception {
  impl=new CacheInvalidator(cacheKeyGenerator,mockStorage);
  final String theURI="http://foo.example.com:80/";
  request=new BasicHttpRequest("GET",theURI,HTTP_1_1);
  cacheEntryisForMethod("HEAD");
  cacheEntryHasVariantMap(new HashMap<String,String>());
  cacheReturnsEntryForUri(theURI);
  impl.flushInvalidatedCacheEntries(host,request);
  verify(mockEntry).getRequestMethod();
  verify(mockEntry).getVariantMap();
  verify(mockStorage).getEntry(theURI);
  verify(mockStorage).removeEntry(theURI);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotInvalidateHEADCacheEntry() throws Exception {
  final String theURI="http://foo.example.com:80/";
  request=new BasicHttpRequest("HEAD",theURI,HTTP_1_1);
  cacheReturnsEntryForUri(theURI);
  impl.flushInvalidatedCacheEntries(host,request);
  verify(mockStorage).getEntry(theURI);
  verifyNoMoreInteractions(mockStorage);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void doesNotFlushEntrySpecifiedByContentLocationIfOlder() throws Exception {
  response.setHeader("ETag","\"new-etag\"");
  response.setHeader("Date",DateUtils.formatDate(tenSecondsAgo));
  final String theURI="http://foo.example.com:80/bar";
  response.setHeader("Content-Location",theURI);
  final HttpCacheEntry entry=HttpTestUtils.makeCacheEntry(new Header[]{new BasicHeader("Date",DateUtils.formatDate(now)),new BasicHeader("ETag","\"old-etag\"")});
  when(mockStorage.getEntry(theURI)).thenReturn(entry);
  impl.flushInvalidatedCacheEntries(host,request,response);
  verify(mockStorage).getEntry(theURI);
  verifyNoMoreInteractions(mockStorage);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void flushesEntryIfFresherAndSpecifiedByContentLocation() throws Exception {
  response.setHeader("ETag","\"new-etag\"");
  response.setHeader("Date",DateUtils.formatDate(now));
  final String theURI="http://foo.example.com:80/bar";
  response.setHeader("Content-Location",theURI);
  final HttpCacheEntry entry=HttpTestUtils.makeCacheEntry(new Header[]{new BasicHeader("Date",DateUtils.formatDate(tenSecondsAgo)),new BasicHeader("ETag","\"old-etag\"")});
  when(mockStorage.getEntry(theURI)).thenReturn(entry);
  impl.flushInvalidatedCacheEntries(host,request,response);
  verify(mockStorage).getEntry(theURI);
  verify(mockStorage).removeEntry(theURI);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void flushesEntrySpecifiedByContentLocationIfResponseHasNoDate() throws Exception {
  response.setHeader("ETag","\"new-etag\"");
  response.removeHeaders("Date");
  final String theURI="http://foo.example.com:80/bar";
  response.setHeader("Content-Location",theURI);
  final HttpCacheEntry entry=HttpTestUtils.makeCacheEntry(new Header[]{new BasicHeader("ETag","\"old-etag\""),new BasicHeader("Date",DateUtils.formatDate(tenSecondsAgo))});
  when(mockStorage.getEntry(theURI)).thenReturn(entry);
  impl.flushInvalidatedCacheEntries(host,request,response);
  verify(mockStorage).getEntry(theURI);
  verify(mockStorage).removeEntry(theURI);
  verifyNoMoreInteractions(mockStorage);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void flushesEntrySpecifiedByContentLocationIfResponseHasMalformedDate() throws Exception {
  response.setHeader("ETag","\"new-etag\"");
  response.setHeader("Date","blarg");
  final String theURI="http://foo.example.com:80/bar";
  response.setHeader("Content-Location",theURI);
  final HttpCacheEntry entry=HttpTestUtils.makeCacheEntry(new Header[]{new BasicHeader("ETag","\"old-etag\""),new BasicHeader("Date",DateUtils.formatDate(tenSecondsAgo))});
  when(mockStorage.getEntry(theURI)).thenReturn(entry);
  impl.flushInvalidatedCacheEntries(host,request,response);
  verify(mockStorage).getEntry(theURI);
  verify(mockStorage).removeEntry(theURI);
  verifyNoMoreInteractions(mockStorage);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void doesNotFlushEntrySpecifiedByContentLocationIfResponseHasNoEtag() throws Exception {
  response.removeHeaders("ETag");
  response.setHeader("Date",DateUtils.formatDate(now));
  final String theURI="http://foo.example.com:80/bar";
  response.setHeader("Content-Location",theURI);
  final HttpCacheEntry entry=HttpTestUtils.makeCacheEntry(new Header[]{new BasicHeader("Date",DateUtils.formatDate(tenSecondsAgo)),new BasicHeader("ETag","\"old-etag\"")});
  when(mockStorage.getEntry(theURI)).thenReturn(entry);
  impl.flushInvalidatedCacheEntries(host,request,response);
  verify(mockStorage).getEntry(theURI);
  verifyNoMoreInteractions(mockStorage);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotInvalidateGETCacheEntryIfSubsequentGETRequestsAreMadeToTheSameURI() throws Exception {
  impl=new CacheInvalidator(cacheKeyGenerator,mockStorage);
  final String theURI="http://foo.example.com:80/";
  request=new BasicHttpRequest("GET",theURI,HTTP_1_1);
  cacheEntryisForMethod("GET");
  cacheReturnsEntryForUri(theURI);
  impl.flushInvalidatedCacheEntries(host,request);
  verify(mockEntry).getRequestMethod();
  verify(mockStorage).getEntry(theURI);
  verifyNoMoreInteractions(mockStorage);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInvalidatesUrisInLocationHeadersOnPUTs() throws Exception {
  final HttpRequest putRequest=new BasicHttpRequest("PUT","/",HTTP_1_1);
  putRequest.setEntity(HttpTestUtils.makeBody(128));
  putRequest.setHeader("Content-Length","128");
  final String contentLocation="http://foo.example.com/content";
  putRequest.setHeader("Location",contentLocation);
  final String theUri="http://foo.example.com:80/";
  cacheEntryHasVariantMap(new HashMap<String,String>());
  cacheReturnsEntryForUri(theUri);
  impl.flushInvalidatedCacheEntries(host,putRequest);
  verify(mockEntry).getVariantMap();
  verify(mockStorage).getEntry(theUri);
  verify(mockStorage).removeEntry(theUri);
  verify(mockStorage).removeEntry(cacheKeyGenerator.canonicalizeUri(contentLocation));
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void flushesEntryIfFresherAndSpecifiedByLocation() throws Exception {
  response.setStatusCode(201);
  response.setHeader("ETag","\"new-etag\"");
  response.setHeader("Date",DateUtils.formatDate(now));
  final String theURI="http://foo.example.com:80/bar";
  response.setHeader("Location",theURI);
  final HttpCacheEntry entry=HttpTestUtils.makeCacheEntry(new Header[]{new BasicHeader("Date",DateUtils.formatDate(tenSecondsAgo)),new BasicHeader("ETag","\"old-etag\"")});
  when(mockStorage.getEntry(theURI)).thenReturn(entry);
  impl.flushInvalidatedCacheEntries(host,request,response);
  verify(mockStorage).getEntry(theURI);
  verify(mockStorage).removeEntry(theURI);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotInvalidateRequestsWithClientPragmaHeaders() throws Exception {
  request=new BasicHttpRequest("GET","/",HTTP_1_1);
  request.setHeader("Pragma","no-cache");
  impl.flushInvalidatedCacheEntries(host,request);
  verify(mockStorage).getEntry("http://foo.example.com:80/");
  verifyNoMoreInteractions(mockStorage);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void doesNotFlushEntrySpecifiedByContentLocationIfEtagsMatch() throws Exception {
  response.setHeader("ETag","\"same-etag\"");
  response.setHeader("Date",DateUtils.formatDate(now));
  final String theURI="http://foo.example.com:80/bar";
  response.setHeader("Content-Location",theURI);
  final HttpCacheEntry entry=HttpTestUtils.makeCacheEntry(new Header[]{new BasicHeader("Date",DateUtils.formatDate(tenSecondsAgo)),new BasicHeader("ETag","\"same-etag\"")});
  when(mockStorage.getEntry(theURI)).thenReturn(entry);
  impl.flushInvalidatedCacheEntries(host,request,response);
  verify(mockStorage).getEntry(theURI);
  verifyNoMoreInteractions(mockStorage);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void doesNotFlushEntryIfContentLocationFromDifferentHost() throws Exception {
  response.setHeader("ETag","\"new-etag\"");
  response.setHeader("Date",DateUtils.formatDate(now));
  final String cacheKey="http://baz.example.com:80/bar";
  response.setHeader("Content-Location",cacheKey);
  final HttpCacheEntry entry=HttpTestUtils.makeCacheEntry(new Header[]{new BasicHeader("Date",DateUtils.formatDate(tenSecondsAgo)),new BasicHeader("ETag","\"old-etag\"")});
  when(mockStorage.getEntry(cacheKey)).thenReturn(entry);
  impl.flushInvalidatedCacheEntries(host,request,response);
  verify(mockStorage).getEntry(cacheKey);
  verifyNoMoreInteractions(mockStorage);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void doesNotFlushForResponsesWithoutContentLocation() throws Exception {
  impl.flushInvalidatedCacheEntries(host,request,response);
  verifyNoMoreInteractions(mockStorage);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotInvalidateHEADRequest() throws Exception {
  request=new BasicHttpRequest("HEAD","/",HTTP_1_1);
  impl.flushInvalidatedCacheEntries(host,request);
  verify(mockStorage).getEntry("http://foo.example.com:80/");
  verifyNoMoreInteractions(mockStorage);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void flushesEntryIfFresherAndSpecifiedByRelativeContentLocation() throws Exception {
  response.setHeader("ETag","\"new-etag\"");
  response.setHeader("Date",DateUtils.formatDate(now));
  final String cacheKey="http://foo.example.com:80/bar";
  response.setHeader("Content-Location","/bar");
  final HttpCacheEntry entry=HttpTestUtils.makeCacheEntry(new Header[]{new BasicHeader("Date",DateUtils.formatDate(tenSecondsAgo)),new BasicHeader("ETag","\"old-etag\"")});
  when(mockStorage.getEntry(cacheKey)).thenReturn(entry);
  impl.flushInvalidatedCacheEntries(host,request,response);
  verify(mockStorage).getEntry(cacheKey);
  verify(mockStorage).removeEntry(cacheKey);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void doesNotFlushEntryIfNotInCache() throws Exception {
  response.setHeader("ETag","\"new-etag\"");
  response.setHeader("Date",DateUtils.formatDate(now));
  final String theURI="http://foo.example.com:80/bar";
  response.setHeader("Content-Location",theURI);
  when(mockStorage.getEntry(theURI)).thenReturn(null);
  impl.flushInvalidatedCacheEntries(host,request,response);
  verify(mockStorage).getEntry(theURI);
  verifyNoMoreInteractions(mockStorage);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInvalidatesVariantHEADCacheEntriesIfSubsequentGETRequestsAreMadeToTheSameURI() throws Exception {
  impl=new CacheInvalidator(cacheKeyGenerator,mockStorage);
  final String theURI="http://foo.example.com:80/";
  request=new BasicHttpRequest("GET",theURI,HTTP_1_1);
  final String theVariantKey="{Accept-Encoding=gzip%2Cdeflate&User-Agent=Apache-HttpClient}";
  final String theVariantURI="{Accept-Encoding=gzip%2Cdeflate&User-Agent=Apache-HttpClient}http://foo.example.com:80/";
  final Map<String,String> variants=HttpTestUtils.makeDefaultVariantMap(theVariantKey,theVariantURI);
  cacheEntryisForMethod("HEAD");
  cacheEntryHasVariantMap(variants);
  cacheReturnsEntryForUri(theURI);
  impl.flushInvalidatedCacheEntries(host,request);
  verify(mockEntry).getRequestMethod();
  verify(mockEntry).getVariantMap();
  verify(mockStorage).getEntry(theURI);
  verify(mockStorage).removeEntry(theURI);
  verify(mockStorage).removeEntry(theVariantURI);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotInvalidateUrisInContentLocationHeadersOnPUTsToDifferentHosts() throws Exception {
  final HttpRequest putRequest=new BasicHttpRequest("PUT","/",HTTP_1_1);
  putRequest.setEntity(HttpTestUtils.makeBody(128));
  putRequest.setHeader("Content-Length","128");
  final String contentLocation="http://bar.example.com/content";
  putRequest.setHeader("Content-Location",contentLocation);
  final String theUri="http://foo.example.com:80/";
  cacheEntryHasVariantMap(new HashMap<String,String>());
  cacheReturnsEntryForUri(theUri);
  impl.flushInvalidatedCacheEntries(host,putRequest);
  verify(mockEntry).getVariantMap();
  verify(mockStorage).getEntry(theUri);
  verify(mockStorage).removeEntry(theUri);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInvalidatesRelativeUrisInContentLocationHeadersOnPUTs() throws Exception {
  final HttpRequest putRequest=new BasicHttpRequest("PUT","/",HTTP_1_1);
  putRequest.setEntity(HttpTestUtils.makeBody(128));
  putRequest.setHeader("Content-Length","128");
  final String relativePath="/content";
  putRequest.setHeader("Content-Location",relativePath);
  final String theUri="http://foo.example.com:80/";
  cacheEntryHasVariantMap(new HashMap<String,String>());
  cacheReturnsEntryForUri(theUri);
  impl.flushInvalidatedCacheEntries(host,putRequest);
  verify(mockEntry).getVariantMap();
  verify(mockStorage).getEntry(theUri);
  verify(mockStorage).removeEntry(theUri);
  verify(mockStorage).removeEntry("http://foo.example.com:80/content");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotInvalidateHEADCacheEntryIfSubsequentHEADRequestsAreMadeToTheSameURI() throws Exception {
  impl=new CacheInvalidator(cacheKeyGenerator,mockStorage);
  final String theURI="http://foo.example.com:80/";
  request=new BasicHttpRequest("HEAD",theURI,HTTP_1_1);
  cacheReturnsEntryForUri(theURI);
  impl.flushInvalidatedCacheEntries(host,request);
  verify(mockStorage).getEntry(theURI);
  verifyNoMoreInteractions(mockStorage);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotInvalidateRequestsWithClientCacheControlHeaders() throws Exception {
  request=new BasicHttpRequest("GET","/",HTTP_1_1);
  request.setHeader("Cache-Control","no-cache");
  impl.flushInvalidatedCacheEntries(host,request);
  verify(mockStorage).getEntry("http://foo.example.com:80/");
  verifyNoMoreInteractions(mockStorage);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void doesNotFlushEntryForUnsuccessfulResponse() throws Exception {
  response=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_BAD_REQUEST,"Bad Request");
  response.setHeader("ETag","\"new-etag\"");
  response.setHeader("Date",DateUtils.formatDate(now));
  final String theURI="http://foo.example.com:80/bar";
  response.setHeader("Content-Location",theURI);
  impl.flushInvalidatedCacheEntries(host,request,response);
  verifyNoMoreInteractions(mockStorage);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInvalidatesUrisInContentLocationHeadersOnPUTs() throws Exception {
  final HttpRequest putRequest=new BasicHttpRequest("PUT","/",HTTP_1_1);
  putRequest.setEntity(HttpTestUtils.makeBody(128));
  putRequest.setHeader("Content-Length","128");
  final String contentLocation="http://foo.example.com/content";
  putRequest.setHeader("Content-Location",contentLocation);
  final String theUri="http://foo.example.com:80/";
  cacheEntryHasVariantMap(new HashMap<String,String>());
  cacheReturnsEntryForUri(theUri);
  impl.flushInvalidatedCacheEntries(host,putRequest);
  verify(mockEntry).getVariantMap();
  verify(mockStorage).getEntry(theUri);
  verify(mockStorage).removeEntry(theUri);
  verify(mockStorage).removeEntry("http://foo.example.com:80/content");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testVariantURIsAreFlushedAlso() throws Exception {
  request=new BasicHttpRequest("POST","/",HTTP_1_1);
  final String theUri="http://foo.example.com:80/";
  final String variantUri="theVariantURI";
  final Map<String,String> mapOfURIs=HttpTestUtils.makeDefaultVariantMap(variantUri,variantUri);
  cacheReturnsEntryForUri(theUri);
  cacheEntryHasVariantMap(mapOfURIs);
  impl.flushInvalidatedCacheEntries(host,request);
  verify(mockStorage).getEntry(theUri);
  verify(mockEntry).getVariantMap();
  verify(mockStorage).removeEntry(variantUri);
  verify(mockStorage).removeEntry(theUri);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInvalidatesRequestsThatArentGETorHEAD() throws Exception {
  request=new BasicHttpRequest("POST","/path",HTTP_1_1);
  final String theUri="http://foo.example.com:80/path";
  final Map<String,String> variantMap=new HashMap<>();
  cacheEntryHasVariantMap(variantMap);
  cacheReturnsEntryForUri(theUri);
  impl.flushInvalidatedCacheEntries(host,request);
  verify(mockEntry).getVariantMap();
  verify(mockStorage).getEntry(theUri);
  verify(mockStorage).removeEntry(theUri);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void flushesEntrySpecifiedByContentLocationIfEntryHasNoDate() throws Exception {
  response.setHeader("ETag","\"new-etag\"");
  response.setHeader("Date",DateUtils.formatDate(now));
  final String theURI="http://foo.example.com:80/bar";
  response.setHeader("Content-Location",theURI);
  final HttpCacheEntry entry=HttpTestUtils.makeCacheEntry(new Header[]{new BasicHeader("ETag","\"old-etag\"")});
  when(mockStorage.getEntry(theURI)).thenReturn(entry);
  impl.flushInvalidatedCacheEntries(host,request,response);
  verify(mockStorage).getEntry(theURI);
  verify(mockStorage).removeEntry(theURI);
  verifyNoMoreInteractions(mockStorage);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void flushesEntrySpecifiedByContentLocationIfEntryHasMalformedDate() throws Exception {
  response.setHeader("ETag","\"new-etag\"");
  response.setHeader("Date",DateUtils.formatDate(now));
  final String theURI="http://foo.example.com:80/bar";
  response.setHeader("Content-Location",theURI);
  final HttpCacheEntry entry=HttpTestUtils.makeCacheEntry(new Header[]{new BasicHeader("ETag","\"old-etag\""),new BasicHeader("Date","foo")});
  when(mockStorage.getEntry(theURI)).thenReturn(entry);
  impl.flushInvalidatedCacheEntries(host,request,response);
  verify(mockStorage).getEntry(theURI);
  verify(mockStorage).removeEntry(theURI);
  verifyNoMoreInteractions(mockStorage);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCacheFlushException() throws Exception {
  request=new BasicHttpRequest("POST","/",HTTP_1_1);
  final String theURI="http://foo.example.com:80/";
  cacheReturnsExceptionForUri(theURI);
  impl.flushInvalidatedCacheEntries(host,request);
  verify(mockStorage).getEntry(theURI);
  verifyNoMoreInteractions(mockStorage);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void flushesEntryIfFresherAndSpecifiedByNonCanonicalContentLocation() throws Exception {
  response.setHeader("ETag","\"new-etag\"");
  response.setHeader("Date",DateUtils.formatDate(now));
  final String cacheKey="http://foo.example.com:80/bar";
  response.setHeader("Content-Location","http://foo.example.com/bar");
  final HttpCacheEntry entry=HttpTestUtils.makeCacheEntry(new Header[]{new BasicHeader("Date",DateUtils.formatDate(tenSecondsAgo)),new BasicHeader("ETag","\"old-etag\"")});
  when(mockStorage.getEntry(cacheKey)).thenReturn(entry);
  impl.flushInvalidatedCacheEntries(host,request,response);
  verify(mockStorage).getEntry(cacheKey);
  verify(mockStorage).removeEntry(cacheKey);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void doesNotFlushEntrySpecifiedByContentLocationIfEntryHasNoEtag() throws Exception {
  response.setHeader("ETag","\"some-etag\"");
  response.setHeader("Date",DateUtils.formatDate(now));
  final String theURI="http://foo.example.com:80/bar";
  response.setHeader("Content-Location",theURI);
  final HttpCacheEntry entry=HttpTestUtils.makeCacheEntry(new Header[]{new BasicHeader("Date",DateUtils.formatDate(tenSecondsAgo))});
  when(mockStorage.getEntry(theURI)).thenReturn(entry);
  impl.flushInvalidatedCacheEntries(host,request,response);
  verify(mockStorage).getEntry(theURI);
  verifyNoMoreInteractions(mockStorage);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.cache.TestCachingExec </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRevalidationRewritesAbsoluteUri() throws Exception {
  mockImplMethods(GET_CURRENT_DATE);
  EasyMock.resetToStrict(mockBackend);
  final HttpRequestWrapper validate=HttpRequestWrapper.wrap(new HttpGet("http://foo.example.com/resource"),host);
  final HttpRequestWrapper relativeValidate=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/resource",HttpVersion.HTTP_1_1),host);
  final CloseableHttpResponse originResponse=Proxies.enhanceResponse(new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_OK,"Okay"));
  conditionalRequestBuilderReturns(validate);
  getCurrentDateReturns(requestDate);
  final CloseableHttpResponse resp=mockBackend.execute(EasyMock.isA(HttpRoute.class),eqRequest(relativeValidate),EasyMock.isA(HttpClientContext.class),EasyMock.<HttpExecutionAware>isNull());
  expect(resp).andReturn(originResponse);
  getCurrentDateReturns(responseDate);
  replayMocks();
  impl.revalidateCacheEntry(route,request,context,null,entry);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCallBackendMakesBackEndRequestAndHandlesResponse() throws Exception {
  mockImplMethods(GET_CURRENT_DATE,HANDLE_BACKEND_RESPONSE);
  final HttpResponse resp=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_OK,"OK");
  getCurrentDateReturns(requestDate);
  backendExpectsRequestAndReturn(request,resp);
  getCurrentDateReturns(responseDate);
  handleBackendResponseReturnsResponse(request,resp);
  replayMocks();
  impl.callBackend(route,request,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRevalidationUpdatesCacheEntryAndPutsItToCacheWhen304ReturningCachedResponse() throws Exception {
  mockImplMethods(GET_CURRENT_DATE);
  final HttpRequestWrapper validate=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  final HttpResponse originResponse=Proxies.enhanceResponse(new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_NOT_MODIFIED,"Not Modified"));
  final HttpCacheEntry updatedEntry=HttpTestUtils.makeCacheEntry();
  conditionalRequestBuilderReturns(validate);
  getCurrentDateReturns(requestDate);
  backendExpectsRequestAndReturn(validate,originResponse);
  getCurrentDateReturns(responseDate);
  expect(mockCache.updateCacheEntry(eq(host),same(request),same(entry),same(originResponse),eq(requestDate),eq(responseDate))).andReturn(updatedEntry);
  expect(mockSuitabilityChecker.isConditional(request)).andReturn(false);
  responseIsGeneratedFromCache();
  replayMocks();
  impl.revalidateCacheEntry(route,request,context,null,entry);
  verifyMocks();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.cache.TestCachingExecChain </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResponseIsGeneratedWhenCacheEntryIsUsable() throws Exception {
  requestIsFatallyNonCompliant(null);
  cacheInvalidatorWasCalled();
  requestPolicyAllowsCaching(true);
  cacheEntrySuitable(true);
  getCacheEntryReturns(mockCacheEntry);
  responseIsGeneratedFromCache();
  entryHasStaleness(0L);
  replayMocks();
  impl.execute(route,request,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetsRequestSentInContextOnCacheHit() throws Exception {
  final DummyBackend backend=new DummyBackend();
  final HttpResponse response=HttpTestUtils.make200Response();
  response.setHeader("Cache-Control","max-age=3600");
  backend.setResponse(response);
  impl=createCachingExecChain(backend,new BasicHttpCache(),CacheConfig.DEFAULT);
  final HttpClientContext ctx=HttpClientContext.create();
  ctx.setTargetHost(host);
  impl.execute(route,request,context,null);
  impl.execute(route,request,ctx,null);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCacheableResponsesGoIntoCache() throws Exception {
  impl=createCachingExecChain(mockBackend,new BasicHttpCache(),CacheConfig.DEFAULT);
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(HttpTestUtils.makeDefaultRequest(),host);
  final HttpResponse resp1=HttpTestUtils.make200Response();
  resp1.setHeader("Cache-Control","max-age=3600");
  backendExpectsAnyRequestAndReturn(resp1);
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(HttpTestUtils.makeDefaultRequest(),host);
  replayMocks();
  impl.execute(route,req1,context,null);
  impl.execute(route,req2,context,null);
  verifyMocks();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.cache.TestCachingHttpClientBuilder </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNullCacheConfig() throws Exception {
  CachingHttpClientBuilder.create().setCacheConfig(null).build();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAsynchronousWorkersMax0() throws Exception {
  final CacheConfig cacheConfig=CacheConfig.custom().setAsynchronousWorkersMax(0).build();
  CachingHttpClientBuilder.create().setCacheConfig(cacheConfig).build();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.cache.TestExponentialBackingOffSchedulingStrategy </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testScheduleWithThreeFailedAttempts(){
  final AsynchronousValidationRequest request=createAsynchronousValidationRequest(withErrorCount(3));
  expectRequestScheduledWithDelay(request,TimeUnit.SECONDS.toMillis(600));
  impl.schedule(request);
  verify(mockExecutor).schedule(request,600000,TimeUnit.MILLISECONDS);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testScheduleWithSixFailedAttempts(){
  final AsynchronousValidationRequest request=createAsynchronousValidationRequest(withErrorCount(6));
  expectRequestScheduledWithDelay(request,TimeUnit.SECONDS.toMillis(86400));
  impl.schedule(request);
  verify(mockExecutor).schedule(request,86400000,TimeUnit.MILLISECONDS);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testScheduleWithFiveFailedAttempts(){
  final AsynchronousValidationRequest request=createAsynchronousValidationRequest(withErrorCount(5));
  expectRequestScheduledWithDelay(request,TimeUnit.SECONDS.toMillis(60000));
  impl.schedule(request);
  verify(mockExecutor).schedule(request,60000000,TimeUnit.MILLISECONDS);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testScheduleWithFourFailedAttempts(){
  final AsynchronousValidationRequest request=createAsynchronousValidationRequest(withErrorCount(4));
  expectRequestScheduledWithDelay(request,TimeUnit.SECONDS.toMillis(6000));
  impl.schedule(request);
  verify(mockExecutor).schedule(request,6000000,TimeUnit.MILLISECONDS);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testScheduleWithoutPreviousError(){
  final AsynchronousValidationRequest request=createAsynchronousValidationRequest(withErrorCount(0));
  expectRequestScheduledWithoutDelay(request);
  impl.schedule(request);
  verify(mockExecutor).schedule(request,0,TimeUnit.MILLISECONDS);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testScheduleWithOneFailedAttempt(){
  final AsynchronousValidationRequest request=createAsynchronousValidationRequest(withErrorCount(1));
  expectRequestScheduledWithDelay(request,TimeUnit.SECONDS.toMillis(6));
  impl.schedule(request);
  verify(mockExecutor).schedule(request,6000,TimeUnit.MILLISECONDS);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testScheduleWithTwoFailedAttempts(){
  final AsynchronousValidationRequest request=createAsynchronousValidationRequest(withErrorCount(2));
  expectRequestScheduledWithDelay(request,TimeUnit.SECONDS.toMillis(60));
  impl.schedule(request);
  verify(mockExecutor).schedule(request,60000,TimeUnit.MILLISECONDS);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testScheduleWithMaxNumberOfFailedAttempts(){
  final AsynchronousValidationRequest request=createAsynchronousValidationRequest(withErrorCount(Integer.MAX_VALUE));
  expectRequestScheduledWithDelay(request,TimeUnit.SECONDS.toMillis(86400));
  impl.schedule(request);
  verify(mockExecutor).schedule(request,86400000,TimeUnit.MILLISECONDS);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.cache.TestHttpCacheEntrySerializers </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void canSerializeEntriesWithVariantMaps() throws Exception {
  readWriteVerify(makeCacheEntryWithVariantMap());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.cache.TestImmediateSchedulingStrategy </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRequestScheduledImmediately(){
  mockExecutor.execute(mockRevalidationRequest);
  schedulingStrategy.schedule(mockRevalidationRequest);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.cache.TestProtocolRecommendations </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyRetryAfterOnResponses() throws Exception {
  originResponse.setStatusCode(HttpStatus.SC_SERVICE_UNAVAILABLE);
  originResponse.setReasonPhrase("Service Unavailable");
  originResponse.setHeader("Retry-After","120");
  testDoesNotModifyHeaderOnResponses("Retry-After");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cacheGenerated304ForStrongEtagValidatorShouldNotContainContentType() throws Exception {
  cacheGenerated304ForStrongETagValidatorShouldNotContainEntityHeader("Content-Type","text/html");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyVaryOnResponses() throws Exception {
  request.setHeader("Accept-Encoding","identity");
  originResponse.setHeader("Vary","Accept-Encoding");
  testDoesNotModifyHeaderOnResponses("Vary");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cacheGenerated304ForStrongValidatorShouldNotContainContentLength() throws Exception {
  cacheGenerated304ForStrongETagValidatorShouldNotContainEntityHeader("Content-Length","128");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyLastModifiedOnResponses() throws Exception {
  originResponse.setHeader("Last-Modified",DateUtils.formatDate(new Date()));
  testDoesNotModifyHeaderOnResponses("Last-Modified");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyContentMD5OnRequests() throws Exception {
  final HttpRequest post=new BasicHttpRequest("POST","/",HttpVersion.HTTP_1_1);
  post.setEntity(HttpTestUtils.makeBody(128));
  post.setHeader("Content-Length","128");
  post.setHeader("Content-MD5","Q2hlY2sgSW50ZWdyaXR5IQ==");
  request=HttpRequestWrapper.wrap(post,host);
  testDoesNotModifyHeaderOnRequests("Content-MD5");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyAuthorizationOnRequests() throws Exception {
  request.setHeader("Authorization","Basic dXNlcjpwYXNzd2Q=");
  testDoesNotModifyHeaderOnRequests("Authorization");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyContentRangeOnRequests() throws Exception {
  final HttpRequest put=new BasicHttpRequest("PUT","/",HttpVersion.HTTP_1_1);
  put.setEntity(HttpTestUtils.makeBody(128));
  put.setHeader("Content-Length","128");
  put.setHeader("Content-Range","bytes 0-127/256");
  request=HttpRequestWrapper.wrap(put,host);
  testDoesNotModifyHeaderOnRequests("Content-Range");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyServerOnResponses() throws Exception {
  originResponse.setHeader("Server","SomeServer/1.0");
  testDoesNotModifyHeaderOnResponses("Server");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cacheGenerated304ForStrongEtagValidatorShouldNotContainContentEncoding() throws Exception {
  cacheGenerated304ForStrongETagValidatorShouldNotContainEntityHeader("Content-Encoding","gzip");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cacheGenerated304ForStrongDateValidatorShouldNotContainLastModified() throws Exception {
  cacheGenerated304ForStrongDateValidatorShouldNotContainEntityHeader("Last-Modified",DateUtils.formatDate(twoMinutesAgo));
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cacheGenerated304ForStrongDateValidatorShouldNotContainContentMD5() throws Exception {
  cacheGenerated304ForStrongDateValidatorShouldNotContainEntityHeader("Content-MD5","Q2hlY2sgSW50ZWdyaXR5IQ==");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyRangeOnRequests() throws Exception {
  request.setHeader("Range","bytes=0-128");
  testDoesNotModifyHeaderOnRequests("Range");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyContentLengthOnRequests() throws Exception {
  final HttpRequest post=new BasicHttpRequest("POST","/",HttpVersion.HTTP_1_1);
  post.setEntity(HttpTestUtils.makeBody(128));
  post.setHeader("Content-Length","128");
  request=HttpRequestWrapper.wrap(post,host);
  testDoesNotModifyHeaderOnRequests("Content-Length");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotReturnStaleResponseIfClientExplicitlyRequestsFreshWithMinFresh() throws Exception {
  final HttpRequestWrapper req=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req.setHeader("Cache-Control","min-fresh=2");
  testDoesNotReturnStaleResponseOnError(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldStripContentLanguageFromOrigin304ResponseToStrongValidation() throws Exception {
  shouldStripEntityHeaderFromOrigin304ResponseToStrongValidation("Content-Language","en");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldStripContentLengthFromOrigin304ResponseToStrongValidation() throws Exception {
  shouldStripEntityHeaderFromOrigin304ResponseToStrongValidation("Content-Length","128");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotReturnStaleResponseIfClientExplicitlyRequestsFirstHandOneWithCacheControl() throws Exception {
  final HttpRequestWrapper req=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req.setHeader("Cache-Control","no-cache");
  testDoesNotReturnStaleResponseOnError(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyContentMD5OnResponses() throws Exception {
  originResponse.setEntity(HttpTestUtils.makeBody(128));
  originResponse.setHeader("Content-MD5","Q2hlY2sgSW50ZWdyaXR5IQ==");
  testDoesNotModifyHeaderOnResponses("Content-MD5");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotReturnStaleResponseIfClientExplicitlyRequestsFreshWithMaxStale() throws Exception {
  final HttpRequestWrapper req=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req.setHeader("Cache-Control","max-stale=2");
  testDoesNotReturnStaleResponseOnError(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cacheGenerated304ForStrongEtagValidatorShouldNotContainContentLanguage() throws Exception {
  cacheGenerated304ForStrongETagValidatorShouldNotContainEntityHeader("Content-Language","en");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cacheGenerated304ForStrongDateValidatorShouldNotContainContentLanguage() throws Exception {
  cacheGenerated304ForStrongDateValidatorShouldNotContainEntityHeader("Content-Language","en");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cachedEntryShouldNotBeUsedIfMoreRecentMentionInContentLocation() throws Exception {
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(new HttpGet("http://foo.example.com/"),host);
  final HttpResponse resp1=HttpTestUtils.make200Response();
  resp1.setHeader("Cache-Control","max-age=3600");
  resp1.setHeader("ETag","\"old-etag\"");
  resp1.setHeader("Date",DateUtils.formatDate(tenSecondsAgo));
  backendExpectsAnyRequestAndReturn(resp1);
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new HttpPost("http://foo.example.com/bar"),host);
  final HttpResponse resp2=HttpTestUtils.make200Response();
  resp2.setHeader("ETag","\"new-etag\"");
  resp2.setHeader("Date",DateUtils.formatDate(now));
  resp2.setHeader("Content-Location","http://foo.example.com/");
  backendExpectsAnyRequestAndReturn(resp2);
  final HttpRequestWrapper req3=HttpRequestWrapper.wrap(new HttpGet("http://foo.example.com"),host);
  final HttpResponse resp3=HttpTestUtils.make200Response();
  backendExpectsAnyRequestAndReturn(resp3);
  replayMocks();
  impl.execute(route,req1,context,null);
  impl.execute(route,req2,context,null);
  impl.execute(route,req3,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyIfNoneMatchOnRequests() throws Exception {
  request.setHeader("If-None-Match","\"etag\"");
  testDoesNotModifyHeaderOnRequests("If-None-Match");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyContentRangeOnResponses() throws Exception {
  request.setHeader("Range","bytes=0-128");
  originResponse.setStatusCode(HttpStatus.SC_PARTIAL_CONTENT);
  originResponse.setReasonPhrase("Partial Content");
  originResponse.setEntity(HttpTestUtils.makeBody(128));
  originResponse.setHeader("Content-Range","bytes 0-127/256");
  testDoesNotModifyHeaderOnResponses("Content-Range");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyContentTypeOnResponses() throws Exception {
  originResponse.setHeader("Content-Type","application/octet-stream");
  testDoesNotModifyHeaderOnResponses("Content-Type");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void responseToGetWithQueryFrom1_0OriginAndNoExpiresIsNotCached() throws Exception {
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new HttpGet("http://foo.example.com/bar?baz=quux"),host);
  final HttpResponse resp2=new BasicHttpResponse(HttpVersion.HTTP_1_0,HttpStatus.SC_OK,"OK");
  resp2.setEntity(HttpTestUtils.makeBody(200));
  resp2.setHeader("Content-Length","200");
  resp2.setHeader("Date",DateUtils.formatDate(now));
  backendExpectsAnyRequestAndReturn(resp2);
  replayMocks();
  impl.execute(route,req2,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldStripContentTypeFromOrigin304ResponseToStrongValidation() throws Exception {
  shouldStripEntityHeaderFromOrigin304ResponseToStrongValidation("Content-Type","text/html;charset=utf-8");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyContentLengthOnResponses() throws Exception {
  originResponse.setEntity(HttpTestUtils.makeBody(128));
  originResponse.setHeader("Content-Length","128");
  testDoesNotModifyHeaderOnResponses("Content-Length");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyUserAgentOnRequests() throws Exception {
  request.setHeader("User-Agent","MyClient/1.0");
  testDoesNotModifyHeaderOnRequests("User-Agent");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldStripAllowFromOrigin304ResponseToStrongValidation() throws Exception {
  shouldStripEntityHeaderFromOrigin304ResponseToStrongValidation("Allow","GET,HEAD");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyContentTypeOnRequests() throws Exception {
  final HttpRequest post=new BasicHttpRequest("POST","/",HttpVersion.HTTP_1_1);
  post.setEntity(HttpTestUtils.makeBody(128));
  post.setHeader("Content-Length","128");
  post.setHeader("Content-Type","application/octet-stream");
  request=HttpRequestWrapper.wrap(post,host);
  testDoesNotModifyHeaderOnRequests("Content-Type");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotReturnStaleResponseIfClientExplicitlyRequestsFirstHandOneWithPragma() throws Exception {
  final HttpRequestWrapper req=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req.setHeader("Pragma","no-cache");
  testDoesNotReturnStaleResponseOnError(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyExtensionHeaderOnRequests() throws Exception {
  request.setHeader("X-Extension","x-value");
  testDoesNotModifyHeaderOnRequests("X-Extension");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyExtensionHeaderOnResponses() throws Exception {
  originResponse.setHeader("X-Extension","x-value");
  testDoesNotModifyHeaderOnResponses("X-Extension");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyIfUnmodifiedSinceOnRequests() throws Exception {
  request=HttpRequestWrapper.wrap(new BasicHttpRequest("DELETE","/",HttpVersion.HTTP_1_1),host);
  request.setHeader("If-Unmodified-Since",DateUtils.formatDate(new Date()));
  testDoesNotModifyHeaderOnRequests("If-Unmodified-Since");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotReturnStaleResponseIfClientExplicitlyRequestsFreshWithMaxAge() throws Exception {
  final HttpRequestWrapper req=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req.setHeader("Cache-Control","max-age=0");
  testDoesNotReturnStaleResponseOnError(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldStripLastModifiedFromOrigin304ResponseToStrongValidation() throws Exception {
  shouldStripEntityHeaderFromOrigin304ResponseToStrongValidation("Last-Modified",DateUtils.formatDate(twoMinutesAgo));
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyAcceptRangesOnResponses() throws Exception {
  final String headerName="Accept-Ranges";
  originResponse.setHeader(headerName,"bytes");
  testDoesNotModifyHeaderOnResponses(headerName);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cacheGenerated304ForStrongDateValidatorShouldNotContainAllow() throws Exception {
  cacheGenerated304ForStrongDateValidatorShouldNotContainEntityHeader("Allow","GET,HEAD");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldStripContentMD5FromOrigin304ResponseToStrongValidation() throws Exception {
  shouldStripEntityHeaderFromOrigin304ResponseToStrongValidation("Content-MD5","Q2hlY2sgSW50ZWdyaXR5IQ==");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyIfRangeOnRequests() throws Exception {
  request.setHeader("Range","bytes=0-128");
  request.setHeader("If-Range","\"etag\"");
  testDoesNotModifyHeaderOnRequests("If-Range");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResponseToExistingVariantsIsCachedForFutureResponses() throws Exception {
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req1.setHeader("User-Agent","agent1");
  final HttpResponse resp1=HttpTestUtils.make200Response();
  resp1.setHeader("Date",DateUtils.formatDate(tenSecondsAgo));
  resp1.setHeader("Vary","User-Agent");
  resp1.setHeader("Cache-Control","max-age=3600");
  resp1.setHeader("ETag","\"etag1\"");
  backendExpectsAnyRequestAndReturn(resp1);
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req2.setHeader("User-Agent","agent2");
  final HttpResponse resp2=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_NOT_MODIFIED,"Not Modified");
  resp2.setHeader("Date",DateUtils.formatDate(now));
  resp2.setHeader("ETag","\"etag1\"");
  backendExpectsAnyRequestAndReturn(resp2);
  final HttpRequestWrapper req3=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req3.setHeader("User-Agent","agent2");
  replayMocks();
  impl.execute(route,req1,context,null);
  impl.execute(route,req2,context,null);
  impl.execute(route,req3,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cacheGenerated304ForStrongDateValidatorShouldNotContainContentEncoding() throws Exception {
  cacheGenerated304ForStrongDateValidatorShouldNotContainEntityHeader("Content-Encoding","gzip");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyIfMatchOnRequests() throws Exception {
  request=HttpRequestWrapper.wrap(new BasicHttpRequest("DELETE","/",HttpVersion.HTTP_1_1),host);
  request.setHeader("If-Match","\"etag\"");
  testDoesNotModifyHeaderOnRequests("If-Match");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyFromOnRequests() throws Exception {
  request.setHeader("From","foo@example.com");
  testDoesNotModifyHeaderOnRequests("From");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void responseToGetWithQueryFrom1_0OriginVia1_1ProxyAndNoExpiresIsNotCached() throws Exception {
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new HttpGet("http://foo.example.com/bar?baz=quux"),host);
  final HttpResponse resp2=new BasicHttpResponse(HttpVersion.HTTP_1_0,HttpStatus.SC_OK,"OK");
  resp2.setEntity(HttpTestUtils.makeBody(200));
  resp2.setHeader("Content-Length","200");
  resp2.setHeader("Date",DateUtils.formatDate(now));
  resp2.setHeader("Via","1.0 someproxy");
  backendExpectsAnyRequestAndReturn(resp2);
  replayMocks();
  impl.execute(route,req2,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cacheGenerated304ForStrongEtagValidatorShouldNotContainAllow() throws Exception {
  cacheGenerated304ForStrongETagValidatorShouldNotContainEntityHeader("Allow","GET,HEAD");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cacheGenerated304ForStrongValidatorShouldNotContainContentMD5() throws Exception {
  cacheGenerated304ForStrongETagValidatorShouldNotContainEntityHeader("Content-MD5","Q2hlY2sgSW50ZWdyaXR5IQ==");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cacheGenerated304ForStrongEtagValidatorShouldNotContainLastModified() throws Exception {
  cacheGenerated304ForStrongETagValidatorShouldNotContainEntityHeader("Last-Modified",DateUtils.formatDate(tenSecondsAgo));
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyDateOnRequests() throws Exception {
  request.setHeader("Date",DateUtils.formatDate(new Date()));
  testDoesNotModifyHeaderOnRequests("Date");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotReturnStaleResponseIfClientExplicitlySpecifiesLargerMaxAge() throws Exception {
  final HttpRequestWrapper req=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req.setHeader("Cache-Control","max-age=20");
  testDoesNotReturnStaleResponseOnError(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cacheGenerated304ForStrongDateValidatorShouldNotContainContentLength() throws Exception {
  cacheGenerated304ForStrongDateValidatorShouldNotContainEntityHeader("Content-Length","128");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyIfModifiedSinceOnRequests() throws Exception {
  request.setHeader("If-Modified-Since",DateUtils.formatDate(new Date()));
  testDoesNotModifyHeaderOnRequests("If-Modified-Since");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyDateOnResponses() throws Exception {
  originResponse.setHeader("Date",DateUtils.formatDate(new Date()));
  testDoesNotModifyHeaderOnResponses("Date");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyLocationOnResponses() throws Exception {
  originResponse.setStatusCode(HttpStatus.SC_TEMPORARY_REDIRECT);
  originResponse.setReasonPhrase("Temporary Redirect");
  originResponse.setHeader("Location","http://foo.example.com/bar");
  testDoesNotModifyHeaderOnResponses("Location");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cacheGenerated304ForStrongDateValidatorShouldNotContainContentRange() throws Exception {
  cacheGenerated304ForStrongValidatorShouldNotContainContentRange("Last-Modified",DateUtils.formatDate(twoMinutesAgo),"If-Modified-Since");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cacheGenerated304ForStrongEtagValidatorShouldNotContainContentRange() throws Exception {
  cacheGenerated304ForStrongValidatorShouldNotContainContentRange("ETag","\"etag\"","If-None-Match");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyRefererOnRequests() throws Exception {
  request.setHeader("Referer","http://foo.example.com/bar");
  testDoesNotModifyHeaderOnRequests("Referer");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyExpiresOnResponses() throws Exception {
  originResponse.setHeader("Expires",DateUtils.formatDate(new Date()));
  testDoesNotModifyHeaderOnResponses("Expires");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cacheGenerated304ForStrongDateValidatorShouldNotContainContentType() throws Exception {
  cacheGenerated304ForStrongDateValidatorShouldNotContainEntityHeader("Content-Type","text/html");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyETagOnResponses() throws Exception {
  originResponse.setHeader("ETag","\"random-etag\"");
  testDoesNotModifyHeaderOnResponses("ETag");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldStripContentEncodingFromOrigin304ResponseToStrongValidation() throws Exception {
  shouldStripEntityHeaderFromOrigin304ResponseToStrongValidation("Content-Encoding","gzip");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.cache.TestProtocolRequirements </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyLastModifiedHeaderOnRequest() throws Exception {
  final long tenSecondsAgo=System.currentTimeMillis() - 10 * 1000L;
  final String lm=DateUtils.formatDate(new Date(tenSecondsAgo));
  testDoesNotModifyHeaderOnRequest("Last-Modified",lm);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeleteInvalidatesCacheForThatUriInRelativeContentLocationHeader() throws Exception {
  final HttpRequestWrapper req=HttpRequestWrapper.wrap(new BasicHttpRequest("DELETE","/"),host);
  testUnsafeMethodInvalidatesCacheForRelativeUriInContentLocationHeader(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testForwardsUnknownHeadersOnRequestsFromHigherProtocolVersions() throws Exception {
  request=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/foo",new ProtocolVersion("HTTP",1,2)),host);
  request.removeHeaders("Connection");
  request.addHeader("X-Unknown-Header","some-value");
  final HttpRequestWrapper downgraded=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/foo",HttpVersion.HTTP_1_1),host);
  downgraded.removeHeaders("Connection");
  downgraded.addHeader("X-Unknown-Header","some-value");
  EasyMock.expect(mockBackend.execute(EasyMock.isA(HttpRoute.class),eqRequest(downgraded),EasyMock.isA(HttpClientContext.class),EasyMock.<HttpExecutionAware>isNull())).andReturn(originResponse);
  replayMocks();
  impl.execute(route,request,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUnknownResponseStatusCodesAreNotCached() throws Exception {
  for (int i=102; i <= 199; i++) {
    testUnknownResponseStatusCodeIsNotCached(i);
  }
  for (int i=207; i <= 299; i++) {
    testUnknownResponseStatusCodeIsNotCached(i);
  }
  for (int i=308; i <= 399; i++) {
    testUnknownResponseStatusCodeIsNotCached(i);
  }
  for (int i=418; i <= 499; i++) {
    testUnknownResponseStatusCodeIsNotCached(i);
  }
  for (int i=506; i <= 999; i++) {
    testUnknownResponseStatusCodeIsNotCached(i);
  }
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOrderOfMultipleAcceptHeaderValuesIsPreservedOnRequests() throws Exception {
  request.addHeader("Accept","audio/*; q=0.2, audio/basic");
  request.addHeader("Accept","text/*, text/html, text/html;level=1, */*");
  testOrderOfMultipleHeadersIsPreservedOnRequests("Accept",request);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOrderOfMultipleViaHeadersIsPreservedOnResponses() throws Exception {
  originResponse.addHeader("Via","1.0 fred, 1.1 nowhere.com (Apache/1.1)");
  originResponse.addHeader("Via","1.0 ricky, 1.1 mertz, 1.0 lucy");
  testOrderOfMultipleHeadersIsPreservedOnResponses("Via");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPostInvalidatesCacheForThatUriInLocationHeader() throws Exception {
  final HttpRequestWrapper req=makeRequestWithBody("POST","/");
  testUnsafeMethodInvalidatesCacheForUriInLocationHeader(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyLastModifiedHeaderFromOrigin() throws Exception {
  final String lm=DateUtils.formatDate(new Date());
  testDoesNotModifyHeaderFromOrigin("Last-Modified",lm);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void test302ResponseWithoutExplicitCacheabilityIsNotReturnedFromCache() throws Exception {
  originResponse=Proxies.enhanceResponse(new BasicHttpResponse(HttpVersion.HTTP_1_1,302,"Temporary Redirect"));
  originResponse.setHeader("Location","http://foo.example.com/other");
  originResponse.removeHeaders("Expires");
  originResponse.removeHeaders("Cache-Control");
  backendExpectsAnyRequest().andReturn(originResponse).times(2);
  replayMocks();
  impl.execute(route,request,context,null);
  impl.execute(route,request,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddContentEncodingHeaderToOriginResponseWithNoTransformIfNotPresent() throws Exception {
  originResponse.addHeader("Cache-Control","no-transform");
  testDoesNotAddHeaderToOriginResponse("Content-Encoding");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOrderOfMultipleCacheControlHeadersIsPreservedOnResponses() throws Exception {
  originResponse.addHeader("Cache-Control","max-age=0");
  originResponse.addHeader("Cache-Control","no-store, must-revalidate");
  testOrderOfMultipleHeadersIsPreservedOnResponses("Cache-Control");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyExpiresHeaderFromOriginOnCacheHit() throws Exception {
  final long inTenSeconds=System.currentTimeMillis() + 10 * 1000L;
  final String expires=DateUtils.formatDate(new Date(inTenSeconds));
  testDoesNotModifyHeaderFromOriginOnCacheHit("Expires",expires);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSharedCacheMustNotNormallyCacheAuthorizedResponses() throws Exception {
  final HttpResponse resp=HttpTestUtils.make200Response();
  resp.setHeader("Cache-Control","max-age=3600");
  resp.setHeader("ETag","\"etag\"");
  testSharedCacheRevalidatesAuthorizedResponse(resp,1,1);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCacheDoesNotAssumeContentLocationHeaderIndicatesAnotherCacheableResource() throws Exception {
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/foo",HttpVersion.HTTP_1_1),host);
  final HttpResponse resp1=HttpTestUtils.make200Response();
  resp1.setHeader("Cache-Control","public,max-age=3600");
  resp1.setHeader("Etag","\"etag\"");
  resp1.setHeader("Content-Location","http://foo.example.com/bar");
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/bar",HttpVersion.HTTP_1_1),host);
  final HttpResponse resp2=HttpTestUtils.make200Response();
  resp2.setHeader("Cache-Control","public,max-age=3600");
  resp2.setHeader("Etag","\"etag\"");
  backendExpectsAnyRequestAndReturn(resp1);
  backendExpectsAnyRequestAndReturn(resp2);
  replayMocks();
  impl.execute(route,req1,context,null);
  impl.execute(route,req2,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOrderOfMultiplePragmaHeadersIsPreservedOnRequests() throws Exception {
  request.addHeader("Pragma","no-cache");
  request.addHeader("Pragma","x-pragma-1, x-pragma-2");
  testOrderOfMultipleHeadersIsPreservedOnRequests("Pragma",request);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddContentEncodingHeaderToRequestIfNotPresent() throws Exception {
  testDoesNotAddHeaderToRequestIfNotPresent("Content-Encoding");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void test206ResponsesAreNotCachedIfTheCacheDoesNotSupportRangeAndContentRangeHeaders() throws Exception {
  if (!supportsRangeAndContentRangeHeaders(impl)) {
    emptyMockCacheExpectsNoPuts();
    request=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
    request.addHeader("Range","bytes=0-50");
    originResponse=Proxies.enhanceResponse(new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_PARTIAL_CONTENT,"Partial Content"));
    originResponse.setHeader("Content-Range","bytes 0-50/128");
    originResponse.setHeader("Cache-Control","max-age=3600");
    final byte[] bytes=new byte[51];
    new Random().nextBytes(bytes);
    originResponse.setEntity(new ByteArrayEntity(bytes));
    EasyMock.expect(mockBackend.execute(EasyMock.isA(HttpRoute.class),EasyMock.isA(HttpRequestWrapper.class),EasyMock.isA(HttpClientContext.class),EasyMock.<HttpExecutionAware>isNull())).andReturn(originResponse);
    replayMocks();
    impl.execute(route,request,context,null);
    verifyMocks();
  }
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCannotCombinePartialResponseIfCacheValidatorsDoNotStronglyMatch() throws Exception {
  final Date now=new Date();
  final Date oneSecondAgo=new Date(now.getTime() - 1 * 1000L);
  final Date twoSecondsAgo=new Date(now.getTime() - 2 * 1000L);
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req1.setHeader("Range","bytes=0-49");
  final HttpResponse resp1=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_PARTIAL_CONTENT,"Partial Content");
  resp1.setEntity(HttpTestUtils.makeBody(50));
  resp1.setHeader("Cache-Control","max-age=3600");
  resp1.setHeader("Content-Range","bytes 0-49/128");
  resp1.setHeader("ETag","\"etag1\"");
  resp1.setHeader("Server","MockServer/1.0");
  resp1.setHeader("Date",DateUtils.formatDate(twoSecondsAgo));
  backendExpectsAnyRequestAndReturn(resp1);
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req2.setHeader("Range","bytes=50-127");
  final HttpResponse resp2=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_PARTIAL_CONTENT,"Partial Content");
  resp2.setEntity(HttpTestUtils.makeBody(78));
  resp2.setHeader("Cache-Control","max-age=3600");
  resp2.setHeader("Content-Range","bytes 50-127/128");
  resp2.setHeader("ETag","\"etag2\"");
  resp2.setHeader("Server","MockServer/1.0");
  resp2.setHeader("Date",DateUtils.formatDate(oneSecondAgo));
  backendExpectsAnyRequestAndReturn(resp2);
  final HttpRequestWrapper req3=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  final HttpResponse resp3=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_OK,"OK");
  resp3.setEntity(HttpTestUtils.makeBody(128));
  resp3.setHeader("Server","MockServer/1.0");
  resp3.setHeader("Date",DateUtils.formatDate(now));
  backendExpectsAnyRequestAndReturn(resp3);
  replayMocks();
  impl.execute(route,req1,context,null);
  impl.execute(route,req2,context,null);
  impl.execute(route,req3,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyContentTypeHeaderOnCachedResponseWithNoTransform() throws Exception {
  testDoesNotModifyHeaderOnCachedResponseWithNoTransform("Content-Type","text/html;charset=utf-8");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSharedCacheMayCacheAuthorizedResponsesWithMustRevalidate() throws Exception {
  final HttpResponse resp=HttpTestUtils.make200Response();
  resp.setHeader("Cache-Control","must-revalidate");
  resp.setHeader("ETag","\"etag\"");
  testSharedCacheRevalidatesAuthorizedResponse(resp,0,1);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSharedCacheMustRevalidateAuthorizedResponsesWhenSMaxAgeIsZero() throws Exception {
  final HttpResponse resp=HttpTestUtils.make200Response();
  resp.setHeader("Cache-Control","s-maxage=0");
  resp.setHeader("ETag","\"etag\"");
  testSharedCacheRevalidatesAuthorizedResponse(resp,1,1);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPostInvalidatesCacheForRelativeUriInContentLocationHeader() throws Exception {
  final HttpRequestWrapper req=makeRequestWithBody("POST","/");
  testUnsafeMethodInvalidatesCacheForRelativeUriInContentLocationHeader(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddContentLocationToOriginResponse() throws Exception {
  testDoesNotAddHeaderToOriginResponse("Content-Location");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeleteDoesNotInvalidateCacheForUriInContentLocationHeadersFromOtherHosts() throws Exception {
  final HttpRequestWrapper req=HttpRequestWrapper.wrap(new BasicHttpRequest("DELETE","/",HttpVersion.HTTP_1_1),host);
  testUnsafeMethodDoesNotInvalidateCacheForUriInContentLocationHeadersFromOtherHosts(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyContentLocationHeaderOnRequest() throws Exception {
  final String url="http://foo.example.com/other";
  testDoesNotModifyHeaderOnRequest("Content-Location",url);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSharedCacheMustUseNewRequestHeadersWhenRevalidatingAuthorizedResponsesWithSMaxAge() throws Exception {
  final Date now=new Date();
  final Date tenSecondsAgo=new Date(now.getTime() - 10 * 1000L);
  final HttpResponse resp1=HttpTestUtils.make200Response();
  resp1.setHeader("Date",DateUtils.formatDate(tenSecondsAgo));
  resp1.setHeader("ETag","\"etag\"");
  resp1.setHeader("Cache-Control","s-maxage=5");
  testSharedCacheMustUseNewRequestHeadersWhenRevalidatingAuthorizedResponse(resp1);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOrderOfMultipleContentEncodingHeadersIsPreservedOnRequests() throws Exception {
  final BasicHttpRequest post=new BasicHttpRequest("POST","/",HttpVersion.HTTP_1_1);
  post.setEntity(body);
  post.addHeader("Content-Encoding","gzip");
  post.addHeader("Content-Encoding","compress");
  post.addHeader("Content-Length","128");
  testOrderOfMultipleHeadersIsPreservedOnRequests("Content-Encoding",HttpRequestWrapper.wrap(post,host));
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNoCacheCannotSatisfyASubsequentRequestWithoutRevalidationEvenWithContraryIndications() throws Exception {
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  final HttpResponse resp1=HttpTestUtils.make200Response();
  resp1.setHeader("ETag","\"etag\"");
  resp1.setHeader("Cache-Control","no-cache,s-maxage=3600");
  backendExpectsAnyRequestAndReturn(resp1);
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req2.setHeader("Cache-Control","max-stale=7200");
  final HttpResponse resp2=HttpTestUtils.make200Response();
  backendExpectsAnyRequestAndReturn(resp2);
  replayMocks();
  impl.execute(route,req1,context,null);
  impl.execute(route,req2,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMustReturnACacheEntryIfItCanRevalidateIt() throws Exception {
  final Date now=new Date();
  final Date tenSecondsAgo=new Date(now.getTime() - 10 * 1000L);
  final Date nineSecondsAgo=new Date(now.getTime() - 9 * 1000L);
  final Date eightSecondsAgo=new Date(now.getTime() - 8 * 1000L);
  final Header[] hdrs=new Header[]{new BasicHeader("Date",DateUtils.formatDate(nineSecondsAgo)),new BasicHeader("Cache-Control","max-age=0"),new BasicHeader("ETag","\"etag\""),new BasicHeader("Content-Length","128")};
  final byte[] bytes=new byte[128];
  new Random().nextBytes(bytes);
  final HttpCacheEntry entry=HttpTestUtils.makeCacheEntry(tenSecondsAgo,eightSecondsAgo,hdrs,bytes);
  impl=new CachingExec(mockBackend,mockCache,config);
  request=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/thing",HttpVersion.HTTP_1_1),host);
  final HttpRequestWrapper validate=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/thing",HttpVersion.HTTP_1_1),host);
  validate.setHeader("If-None-Match","\"etag\"");
  final CloseableHttpResponse notModified=Proxies.enhanceResponse(new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_NOT_MODIFIED,"Not Modified"));
  notModified.setHeader("Date",DateUtils.formatDate(now));
  notModified.setHeader("ETag","\"etag\"");
  mockCache.flushInvalidatedCacheEntriesFor(EasyMock.eq(host),eqRequest(request));
  EasyMock.expect(mockCache.getCacheEntry(EasyMock.eq(host),eqRequest(request))).andReturn(entry);
  EasyMock.expect(mockBackend.execute(EasyMock.eq(route),eqRequest(validate),EasyMock.isA(HttpClientContext.class),EasyMock.<HttpExecutionAware>isNull())).andReturn(notModified);
  EasyMock.expect(mockCache.updateCacheEntry(EasyMock.eq(host),eqRequest(request),EasyMock.eq(entry),eqResponse(notModified),EasyMock.isA(Date.class),EasyMock.isA(Date.class))).andReturn(HttpTestUtils.makeCacheEntry());
  replayMocks();
  impl.execute(route,request,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOrderOfMultiplePragmaHeadersIsPreservedOnResponses() throws Exception {
  originResponse.addHeader("Pragma","no-cache, x-pragma-2");
  originResponse.addHeader("Pragma","x-pragma-1");
  testOrderOfMultipleHeadersIsPreservedOnResponses("Pragma");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPOSTRequestsAreWrittenThroughToOrigin() throws Exception {
  final HttpRequest req=new BasicHttpRequest("POST","/",HttpVersion.HTTP_1_1);
  req.setEntity(HttpTestUtils.makeBody(128));
  req.setHeader("Content-Length","128");
  testRequestIsWrittenThroughToOrigin(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddContentEncodingToRequestIfNotPresent() throws Exception {
  testDoesNotAddHeaderToRequestIfNotPresent("Content-Encoding");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPutInvalidatesCacheForThatUriInRelativeContentLocationHeader() throws Exception {
  final HttpRequestWrapper req=makeRequestWithBody("PUT","/");
  testUnsafeMethodInvalidatesCacheForRelativeUriInContentLocationHeader(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGenerates504IfSharedCacheCannotRevalidateAProxyRevalidateEntry() throws Exception {
  if (config.isSharedCache()) {
    final HttpResponse resp1=HttpTestUtils.make200Response();
    final Date now=new Date();
    final Date tenSecondsAgo=new Date(now.getTime() - 10 * 1000L);
    resp1.setHeader("ETag","\"etag\"");
    resp1.setHeader("Date",DateUtils.formatDate(tenSecondsAgo));
    resp1.setHeader("Cache-Control","max-age=5,proxy-revalidate");
    testGenerates504IfCannotRevalidateStaleResponse(resp1);
  }
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddContentEncodingHeaderToCachedResponseWithNoTransformIfNotPresent() throws Exception {
  originResponse.addHeader("Cache-Control","no-transform");
  testDoesNotAddHeaderOnCacheHit("Content-Encoding");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCONNECTRequestsAreWrittenThroughToOrigin() throws Exception {
  final HttpRequest req=HttpRequestWrapper.wrap(new BasicHttpRequest("CONNECT","/",HttpVersion.HTTP_1_1),host);
  testRequestIsWrittenThroughToOrigin(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNoStoreOnResponseIsNotStoredInCache() throws Exception {
  emptyMockCacheExpectsNoPuts();
  originResponse.setHeader("Cache-Control","no-store");
  backendExpectsAnyRequest().andReturn(originResponse);
  replayMocks();
  impl.execute(route,request,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCannotUseVariantCacheEntryIfNotAllSelectingRequestHeadersMatch() throws Exception {
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req1.setHeader("Accept-Encoding","gzip");
  final HttpResponse resp1=HttpTestUtils.make200Response();
  resp1.setHeader("ETag","\"etag1\"");
  resp1.setHeader("Cache-Control","max-age=3600");
  resp1.setHeader("Vary","Accept-Encoding");
  backendExpectsAnyRequestAndReturn(resp1);
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req2.removeHeaders("Accept-Encoding");
  final HttpResponse resp2=HttpTestUtils.make200Response();
  resp2.setHeader("ETag","\"etag1\"");
  resp2.setHeader("Cache-Control","max-age=3600");
  backendExpectsAnyRequestAndReturn(resp2);
  replayMocks();
  impl.execute(route,req1,context,null);
  impl.execute(route,req2,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddContentTypeHeaderToRequestIfNotPresent() throws Exception {
  testDoesNotAddHeaderToRequestIfNotPresent("Content-Type");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPutInvalidatesCacheForThatUriInContentLocationHeader() throws Exception {
  final HttpRequestWrapper req2=makeRequestWithBody("PUT","/");
  testUnsafeMethodInvalidatesCacheForUriInContentLocationHeader(req2);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testExpiresZeroHeaderIsTreatedAsStale() throws Exception {
  testInvalidExpiresHeaderIsTreatedAsStale("0");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGenerates504IfCannotRevalidateAMustRevalidateEntry() throws Exception {
  final HttpResponse resp1=HttpTestUtils.make200Response();
  final Date now=new Date();
  final Date tenSecondsAgo=new Date(now.getTime() - 10 * 1000L);
  resp1.setHeader("ETag","\"etag\"");
  resp1.setHeader("Date",DateUtils.formatDate(tenSecondsAgo));
  resp1.setHeader("Cache-Control","max-age=5,must-revalidate");
  testGenerates504IfCannotRevalidateStaleResponse(resp1);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddLastModifiedHeaderOnCacheHit() throws Exception {
  testDoesNotAddHeaderOnCacheHit("Last-Modified");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOrderOfMultipleCacheControlHeadersIsPreservedOnRequests() throws Exception {
  request.addHeader("Cache-Control","max-age=5");
  request.addHeader("Cache-Control","min-fresh=10");
  testOrderOfMultipleHeadersIsPreservedOnRequests("Cache-Control",request);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResponsesToTRACEsAreNotCached() throws Exception {
  emptyMockCacheExpectsNoPuts();
  request=HttpRequestWrapper.wrap(new BasicHttpRequest("TRACE","/",HttpVersion.HTTP_1_1),host);
  originResponse.setHeader("Cache-Control","max-age=3600");
  EasyMock.expect(mockBackend.execute(EasyMock.isA(HttpRoute.class),EasyMock.isA(HttpRequestWrapper.class),EasyMock.isA(HttpClientContext.class),EasyMock.<HttpExecutionAware>isNull())).andReturn(originResponse);
  replayMocks();
  impl.execute(route,request,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResponsesToPOSTWithoutCacheControlOrExpiresAreNotCached() throws Exception {
  emptyMockCacheExpectsNoPuts();
  final BasicHttpRequest post=new BasicHttpRequest("POST","/",HttpVersion.HTTP_1_1);
  post.setHeader("Content-Length","128");
  post.setEntity(HttpTestUtils.makeBody(128));
  originResponse.removeHeaders("Cache-Control");
  originResponse.removeHeaders("Expires");
  EasyMock.expect(mockBackend.execute(EasyMock.isA(HttpRoute.class),EasyMock.isA(HttpRequestWrapper.class),EasyMock.isA(HttpClientContext.class),EasyMock.<HttpExecutionAware>isNull())).andReturn(originResponse);
  replayMocks();
  impl.execute(route,HttpRequestWrapper.wrap(post,host),context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOrderOfMultipleWWWAuthenticateHeadersIsPreservedOnResponses() throws Exception {
  originResponse.addHeader("WWW-Authenticate","x-challenge-1");
  originResponse.addHeader("WWW-Authenticate","x-challenge-2");
  testOrderOfMultipleHeadersIsPreservedOnResponses("WWW-Authenticate");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void test303ResponsesAreNotCached() throws Exception {
  emptyMockCacheExpectsNoPuts();
  request=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  originResponse=Proxies.enhanceResponse(new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_SEE_OTHER,"See Other"));
  originResponse.setHeader("Date",DateUtils.formatDate(new Date()));
  originResponse.setHeader("Server","MockServer/1.0");
  originResponse.setHeader("Cache-Control","max-age=3600");
  originResponse.setHeader("Content-Type","application/x-cachingclient-test");
  originResponse.setHeader("Location","http://foo.example.com/other");
  originResponse.setEntity(HttpTestUtils.makeBody(entityLength));
  EasyMock.expect(mockBackend.execute(EasyMock.isA(HttpRoute.class),EasyMock.isA(HttpRequestWrapper.class),EasyMock.isA(HttpClientContext.class),EasyMock.<HttpExecutionAware>isNull())).andReturn(originResponse);
  replayMocks();
  impl.execute(route,request,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeleteDoesNotInvalidateCacheForUriInLocationHeadersFromOtherHosts() throws Exception {
  final HttpRequestWrapper req=HttpRequestWrapper.wrap(new BasicHttpRequest("DELETE","/",HttpVersion.HTTP_1_1),host);
  testUnsafeMethodDoesNotInvalidateCacheForUriInLocationHeadersFromOtherHosts(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testHEADResponseWithUpdatedLastModifiedFieldMakeACacheEntryStale() throws Exception {
  final Date now=new Date();
  final Date tenSecondsAgo=new Date(now.getTime() - 10 * 1000L);
  final Date sixSecondsAgo=new Date(now.getTime() - 6 * 1000L);
  testHEADResponseWithUpdatedEntityFieldsMakeACacheEntryStale("Last-Modified",DateUtils.formatDate(tenSecondsAgo),DateUtils.formatDate(sixSecondsAgo));
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddEtagToOriginResponse() throws Exception {
  testDoesNotAddHeaderToOriginResponse("ETag");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyContentMD5HeaderOnRequest() throws Exception {
  testDoesNotModifyHeaderOnRequest("Content-MD5","Q2hlY2sgSW50ZWdyaXR5IQ==");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPUTWithIfNoneMatchWeakETagIsNotAllowed() throws Exception {
  final HttpRequest put=new BasicHttpRequest("PUT","/",HttpVersion.HTTP_1_1);
  put.setEntity(HttpTestUtils.makeBody(128));
  put.setHeader("Content-Length","128");
  put.setHeader("If-None-Match","W/\"etag\"");
  request=HttpRequestWrapper.wrap(put,host);
  testRequestWithWeakETagValidatorIsNotAllowed("If-None-Match");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyContentLocationFromOriginOnCacheHit() throws Exception {
  final String url="http://foo.example.com/other";
  testDoesNotModifyHeaderFromOriginOnCacheHit("Content-Location",url);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNoCacheCannotSatisfyASubsequentRequestWithoutRevalidation() throws Exception {
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  final HttpResponse resp1=HttpTestUtils.make200Response();
  resp1.setHeader("ETag","\"etag\"");
  resp1.setHeader("Cache-Control","no-cache");
  backendExpectsAnyRequestAndReturn(resp1);
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  final HttpResponse resp2=HttpTestUtils.make200Response();
  backendExpectsAnyRequestAndReturn(resp2);
  replayMocks();
  impl.execute(route,req1,context,null);
  impl.execute(route,req2,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyETagHeaderOnRequest() throws Exception {
  testDoesNotModifyHeaderOnRequest("ETag","\"etag\"");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyContentMD5FromOriginOnCacheHit() throws Exception {
  testDoesNotModifyHeaderFromOriginOnCacheHit("Content-MD5","Q2hlY2sgSW50ZWdyaXR5IQ==");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDELETEWithIfMatchWeakETagIsNotAllowed() throws Exception {
  request=HttpRequestWrapper.wrap(new BasicHttpRequest("DELETE","/",HttpVersion.HTTP_1_1),host);
  request.setHeader("If-Match","W/\"etag\"");
  testRequestWithWeakETagValidatorIsNotAllowed("If-Match");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSharedCacheMustUseNewRequestHeadersWhenRevalidatingAuthorizedResponsesWithMustRevalidate() throws Exception {
  final Date now=new Date();
  final Date tenSecondsAgo=new Date(now.getTime() - 10 * 1000L);
  final HttpResponse resp1=HttpTestUtils.make200Response();
  resp1.setHeader("Date",DateUtils.formatDate(tenSecondsAgo));
  resp1.setHeader("ETag","\"etag\"");
  resp1.setHeader("Cache-Control","maxage=5, must-revalidate");
  testSharedCacheMustUseNewRequestHeadersWhenRevalidatingAuthorizedResponse(resp1);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddContentTypeHeaderToCachedResponseWithNoTransformIfNotPresent() throws Exception {
  originResponse.addHeader("Cache-Control","no-transform");
  testDoesNotAddHeaderOnCacheHit("Content-Type");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testHEADResponseWithUpdatedContentLengthFieldMakeACacheEntryStale() throws Exception {
  testHEADResponseWithUpdatedEntityFieldsMakeACacheEntryStale("Content-Length","128","127");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMustDiscardCachedPartialResponseIfCacheValidatorsDoNotStronglyMatchAndDateHeadersAreEqual() throws Exception {
  final Date now=new Date();
  final Date oneSecondAgo=new Date(now.getTime() - 1 * 1000L);
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req1.setHeader("Range","bytes=0-49");
  final HttpResponse resp1=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_PARTIAL_CONTENT,"Partial Content");
  resp1.setEntity(HttpTestUtils.makeBody(50));
  resp1.setHeader("Cache-Control","max-age=3600");
  resp1.setHeader("Content-Range","bytes 0-49/128");
  resp1.setHeader("Etag","\"etag1\"");
  resp1.setHeader("Server","MockServer/1.0");
  resp1.setHeader("Date",DateUtils.formatDate(oneSecondAgo));
  backendExpectsAnyRequestAndReturn(resp1);
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req2.setHeader("Range","bytes=50-127");
  final HttpResponse resp2=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_PARTIAL_CONTENT,"Partial Content");
  resp2.setEntity(HttpTestUtils.makeBody(78));
  resp2.setHeader("Cache-Control","max-age=3600");
  resp2.setHeader("Content-Range","bytes 50-127/128");
  resp2.setHeader("ETag","\"etag2\"");
  resp2.setHeader("Server","MockServer/1.0");
  resp2.setHeader("Date",DateUtils.formatDate(oneSecondAgo));
  backendExpectsAnyRequestAndReturn(resp2);
  final HttpRequestWrapper req3=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req3.setHeader("Range","bytes=0-49");
  final HttpResponse resp3=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_OK,"OK");
  resp3.setEntity(HttpTestUtils.makeBody(128));
  resp3.setHeader("Server","MockServer/1.0");
  resp3.setHeader("Date",DateUtils.formatDate(now));
  backendExpectsAnyRequestAndReturn(resp3);
  replayMocks();
  impl.execute(route,req1,context,null);
  impl.execute(route,req2,context,null);
  impl.execute(route,req3,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOrderOfMultipleContentLanguageHeadersIsPreservedOnResponses() throws Exception {
  originResponse.addHeader("Content-Language","mi");
  originResponse.addHeader("Content-Language","en");
  testOrderOfMultipleHeadersIsPreservedOnResponses("Content-Language");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCannotCombinePartialResponseIfIncomingResponseDoesNotHaveACacheValidator() throws Exception {
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req1.setHeader("Range","bytes=0-49");
  final Date now=new Date();
  final Date oneSecondAgo=new Date(now.getTime() - 1 * 1000L);
  final Date twoSecondsAgo=new Date(now.getTime() - 2 * 1000L);
  final HttpResponse resp1=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_PARTIAL_CONTENT,"Partial Content");
  resp1.setEntity(HttpTestUtils.makeBody(50));
  resp1.setHeader("Server","MockServer/1.0");
  resp1.setHeader("Date",DateUtils.formatDate(twoSecondsAgo));
  resp1.setHeader("Cache-Control","max-age=3600");
  resp1.setHeader("Content-Range","bytes 0-49/128");
  resp1.setHeader("ETag","\"etag1\"");
  backendExpectsAnyRequestAndReturn(resp1);
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req2.setHeader("Range","bytes=50-127");
  final HttpResponse resp2=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_PARTIAL_CONTENT,"Partial Content");
  resp2.setEntity(HttpTestUtils.makeBody(78));
  resp2.setHeader("Cache-Control","max-age=3600");
  resp2.setHeader("Content-Range","bytes 50-127/128");
  resp2.setHeader("Server","MockServer/1.0");
  resp2.setHeader("Date",DateUtils.formatDate(oneSecondAgo));
  backendExpectsAnyRequestAndReturn(resp2);
  final HttpRequestWrapper req3=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  final HttpResponse resp3=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_OK,"OK");
  resp3.setEntity(HttpTestUtils.makeBody(128));
  resp3.setHeader("Server","MockServer/1.0");
  resp3.setHeader("Date",DateUtils.formatDate(now));
  backendExpectsAnyRequestAndReturn(resp3);
  replayMocks();
  impl.execute(route,req1,context,null);
  impl.execute(route,req2,context,null);
  impl.execute(route,req3,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStaleEntryWithProxyRevalidateOnSharedCacheIsNotUsedWithoutRevalidatingWithOrigin() throws Exception {
  if (config.isSharedCache()) {
    final HttpResponse response=HttpTestUtils.make200Response();
    final Date now=new Date();
    final Date tenSecondsAgo=new Date(now.getTime() - 10 * 1000L);
    response.setHeader("Date",DateUtils.formatDate(tenSecondsAgo));
    response.setHeader("ETag","\"etag1\"");
    response.setHeader("Cache-Control","max-age=5, proxy-revalidate");
    testStaleCacheResponseMustBeRevalidatedWithOrigin(response);
  }
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testHEADResponseWithUpdatedContentMD5FieldMakeACacheEntryStale() throws Exception {
  testHEADResponseWithUpdatedEntityFieldsMakeACacheEntryStale("Content-MD5","Q2hlY2sgSW50ZWdyaXR5IQ==","Q2hlY2sgSW50ZWdyaXR5IR==");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddContentRangeToRequestIfNotPresent() throws Exception {
  testDoesNotAddHeaderToRequestIfNotPresent("Content-Range");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConditionalRequestWhereAllValidatorsMatchMayBeServedFromCache() throws Exception {
  final Date now=new Date();
  final Date tenSecondsAgo=new Date(now.getTime() - 10 * 1000L);
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  final HttpResponse resp1=HttpTestUtils.make200Response();
  resp1.setHeader("Date",DateUtils.formatDate(now));
  resp1.setHeader("Cache-Control","max-age=3600");
  resp1.setHeader("Last-Modified",DateUtils.formatDate(tenSecondsAgo));
  resp1.setHeader("ETag","W/\"etag\"");
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req2.setHeader("If-None-Match","W/\"etag\"");
  req2.setHeader("If-Modified-Since",DateUtils.formatDate(tenSecondsAgo));
  EasyMock.expect(mockBackend.execute(EasyMock.isA(HttpRoute.class),EasyMock.isA(HttpRequestWrapper.class),EasyMock.isA(HttpClientContext.class),EasyMock.<HttpExecutionAware>isNull())).andReturn(Proxies.enhanceResponse(resp1)).times(1,2);
  replayMocks();
  impl.execute(route,req1,context,null);
  impl.execute(route,req2,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyContentRangeHeaderFromOriginResponseWithNoTransform() throws Exception {
  request.setHeader("If-Range","\"etag\"");
  request.setHeader("Range","bytes=0-49");
  originResponse=Proxies.enhanceResponse(new BasicHttpResponse(HttpVersion.HTTP_1_1,206,"Partial Content"));
  originResponse.setEntity(HttpTestUtils.makeBody(50));
  testDoesNotModifyHeaderFromOriginResponseWithNoTransform("Content-Range","bytes 0-49/128");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPUTWithIfMatchWeakETagIsNotAllowed() throws Exception {
  final HttpRequest put=new BasicHttpRequest("PUT","/",HttpVersion.HTTP_1_1);
  put.setEntity(HttpTestUtils.makeBody(128));
  put.setHeader("Content-Length","128");
  put.setHeader("If-Match","W/\"etag\"");
  request=HttpRequestWrapper.wrap(put,host);
  testRequestWithWeakETagValidatorIsNotAllowed("If-Match");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSharedCacheMayCacheAuthorizedResponsesWithSMaxAgeHeader() throws Exception {
  final HttpResponse resp=HttpTestUtils.make200Response();
  resp.setHeader("Cache-Control","s-maxage=3600");
  resp.setHeader("ETag","\"etag\"");
  testSharedCacheRevalidatesAuthorizedResponse(resp,0,1);
}

</code></pre>

<br>
<pre class="type-17 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Is not executed with the test suite
- Executes methods or other tests from the same test unit
"></span><br>
@Test @Ignore public void testOPTIONSRequestsAreWrittenThroughToOrigin() throws Exception {
  final HttpRequest req=HttpRequestWrapper.wrap(new BasicHttpRequest("OPTIONS","*",HttpVersion.HTTP_1_1),host);
  testRequestIsWrittenThroughToOrigin(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOrderOfMultipleAcceptLanguageHeadersIsPreservedOnRequests() throws Exception {
  request.addHeader("Accept-Language","da, en-gb;q=0.8, en;q=0.7");
  request.addHeader("Accept-Language","i-cherokee");
  testOrderOfMultipleHeadersIsPreservedOnRequests("Accept-Encoding",request);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCacheIsNotUsedWhenRespondingToRequestWithCacheControlNoCache() throws Exception {
  final HttpRequestWrapper req=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req.setHeader("Cache-Control","no-cache");
  testCacheIsNotUsedWhenRespondingToRequest(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPutDoesNotInvalidateCacheForUriInLocationHeadersFromOtherHosts() throws Exception {
  final HttpRequestWrapper req=makeRequestWithBody("PUT","/");
  testUnsafeMethodDoesNotInvalidateCacheForUriInLocationHeadersFromOtherHosts(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResponsesToOPTIONSAreNotCacheable() throws Exception {
  emptyMockCacheExpectsNoPuts();
  request=HttpRequestWrapper.wrap(new BasicHttpRequest("OPTIONS","/",HttpVersion.HTTP_1_1),host);
  originResponse.addHeader("Cache-Control","max-age=3600");
  EasyMock.expect(mockBackend.execute(EasyMock.eq(route),EasyMock.isA(HttpRequestWrapper.class),EasyMock.isA(HttpClientContext.class),EasyMock.<HttpExecutionAware>isNull())).andReturn(originResponse);
  replayMocks();
  impl.execute(route,request,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPutDoesNotInvalidateCacheForUriInContentLocationHeadersFromOtherHosts() throws Exception {
  final HttpRequestWrapper req=makeRequestWithBody("PUT","/");
  testUnsafeMethodDoesNotInvalidateCacheForUriInContentLocationHeadersFromOtherHosts(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNotModifiedOfNonCachedEntityShouldRevalidateWithUnconditionalGET() throws Exception {
  final Date now=new Date();
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  final HttpResponse resp1=HttpTestUtils.make200Response();
  resp1.setHeader("ETag","\"etag1\"");
  resp1.setHeader("Cache-Control","max-age=3600");
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req2.setHeader("Cache-Control","max-age=0,max-stale=0");
  final HttpResponse resp2=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_NOT_MODIFIED,"Not Modified");
  resp2.setHeader("Date",DateUtils.formatDate(now));
  resp2.setHeader("Server","MockServer/1.0");
  resp2.setHeader("ETag","\"etag2\"");
  final HttpRequestWrapper conditionalValidation=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  conditionalValidation.setHeader("If-None-Match","\"etag1\"");
  final HttpRequestWrapper unconditionalValidation=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  final HttpResponse resp3=HttpTestUtils.make200Response();
  resp1.setHeader("ETag","\"etag2\"");
  resp1.setHeader("Cache-Control","max-age=3600");
  EasyMock.expect(mockBackend.execute(EasyMock.isA(HttpRoute.class),EasyMock.isA(HttpRequestWrapper.class),EasyMock.isA(HttpClientContext.class),EasyMock.<HttpExecutionAware>isNull())).andReturn(Proxies.enhanceResponse(resp1));
  EasyMock.expect(mockBackend.execute(EasyMock.eq(route),eqRequest(conditionalValidation),EasyMock.isA(HttpClientContext.class),EasyMock.<HttpExecutionAware>isNull())).andReturn(Proxies.enhanceResponse(resp2)).times(0,1);
  EasyMock.expect(mockBackend.execute(EasyMock.eq(route),eqRequest(unconditionalValidation),EasyMock.isA(HttpClientContext.class),EasyMock.<HttpExecutionAware>isNull())).andReturn(Proxies.enhanceResponse(resp3));
  replayMocks();
  impl.execute(route,req1,context,null);
  impl.execute(route,req2,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyLastModifiedFromOriginOnCacheHit() throws Exception {
  final String lm=DateUtils.formatDate(new Date(System.currentTimeMillis() - 10 * 1000L));
  testDoesNotModifyHeaderFromOriginOnCacheHit("Last-Modified",lm);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPutToUriInvalidatesCacheForThatUri() throws Exception {
  final HttpRequest req=makeRequestWithBody("PUT","/");
  testUnsafeOperationInvalidatesCacheForThatUri(HttpRequestWrapper.wrap(req,host));
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddContentMD5ToOriginResponse() throws Exception {
  testDoesNotAddHeaderToOriginResponse("Content-MD5");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOrderOfMultipleWarningHeadersIsPreservedOnRequests() throws Exception {
  request.addHeader("Warning","199 fred \"bargle\"");
  request.addHeader("Warning","199 barney \"bungle\"");
  testOrderOfMultipleHeadersIsPreservedOnRequests("Warning",request);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddETagToRequestIfNotPresent() throws Exception {
  testDoesNotAddHeaderToRequestIfNotPresent("ETag");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUnknownMethodRequestsAreWrittenThroughToOrigin() throws Exception {
  final HttpRequest req=HttpRequestWrapper.wrap(new BasicHttpRequest("UNKNOWN","/",HttpVersion.HTTP_1_1),host);
  testRequestIsWrittenThroughToOrigin(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testHEADResponseWithUpdatedETagFieldMakeACacheEntryStale() throws Exception {
  testHEADResponseWithUpdatedEntityFieldsMakeACacheEntryStale("ETag","\"etag1\"","\"etag2\"");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testExpiresHeaderEqualToDateHeaderIsTreatedAsStale() throws Exception {
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  final HttpResponse resp1=HttpTestUtils.make200Response();
  resp1.setHeader("Cache-Control","public");
  resp1.setHeader("ETag","\"etag\"");
  resp1.setHeader("Expires",resp1.getFirstHeader("Date").getValue());
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  final HttpResponse resp2=HttpTestUtils.make200Response();
  backendExpectsAnyRequestAndReturn(resp1);
  backendExpectsAnyRequestAndReturn(resp2);
  replayMocks();
  impl.execute(route,req1,context,null);
  impl.execute(route,req2,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNoStoreOnRequestIsNotStoredInCache() throws Exception {
  emptyMockCacheExpectsNoPuts();
  request.setHeader("Cache-Control","no-store");
  backendExpectsAnyRequest().andReturn(originResponse);
  replayMocks();
  impl.execute(route,request,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResponsesToDELETEsAreNotCached() throws Exception {
  emptyMockCacheExpectsNoPuts();
  request=HttpRequestWrapper.wrap(new BasicHttpRequest("DELETE","/",HttpVersion.HTTP_1_1),host);
  originResponse.setHeader("Cache-Control","max-age=3600");
  EasyMock.expect(mockBackend.execute(EasyMock.isA(HttpRoute.class),EasyMock.isA(HttpRequestWrapper.class),EasyMock.isA(HttpClientContext.class),EasyMock.<HttpExecutionAware>isNull())).andReturn(originResponse);
  replayMocks();
  impl.execute(route,request,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddContentRangeHeaderToCachedResponseWithNoTransformIfNotPresent() throws Exception {
  originResponse.addHeader("Cache-Control","no-transform");
  testDoesNotAddHeaderOnCacheHit("Content-Range");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOrderOfMultipleViaHeadersIsPreservedOnRequests() throws Exception {
  request.addHeader("Via","1.0 fred, 1.1 nowhere.com (Apache/1.1)");
  request.addHeader("Via","1.0 ricky, 1.1 mertz, 1.0 lucy");
  testOrderOfMultipleHeadersIsPreservedOnRequests("Via",request);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMustDiscardLeastRecentPartialResponseIfCacheValidatorsDoNotStronglyMatchEvenIfResponsesOutOfOrder() throws Exception {
  final Date now=new Date();
  final Date oneSecondAgo=new Date(now.getTime() - 1 * 1000L);
  final Date twoSecondsAgo=new Date(now.getTime() - 2 * 1000L);
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req1.setHeader("Range","bytes=0-49");
  final HttpResponse resp1=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_PARTIAL_CONTENT,"Partial Content");
  resp1.setEntity(HttpTestUtils.makeBody(50));
  resp1.setHeader("Cache-Control","max-age=3600");
  resp1.setHeader("Content-Range","bytes 0-49/128");
  resp1.setHeader("Etag","\"etag1\"");
  resp1.setHeader("Server","MockServer/1.0");
  resp1.setHeader("Date",DateUtils.formatDate(oneSecondAgo));
  backendExpectsAnyRequestAndReturn(resp1);
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req2.setHeader("Range","bytes=50-127");
  final HttpResponse resp2=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_PARTIAL_CONTENT,"Partial Content");
  resp2.setEntity(HttpTestUtils.makeBody(78));
  resp2.setHeader("Cache-Control","max-age=3600");
  resp2.setHeader("Content-Range","bytes 50-127/128");
  resp2.setHeader("ETag","\"etag2\"");
  resp2.setHeader("Server","MockServer/1.0");
  resp2.setHeader("Date",DateUtils.formatDate(twoSecondsAgo));
  backendExpectsAnyRequestAndReturn(resp2);
  final HttpRequestWrapper req3=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req3.setHeader("Range","bytes=50-127");
  final HttpResponse resp3=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_OK,"OK");
  resp3.setEntity(HttpTestUtils.makeBody(128));
  resp3.setHeader("Server","MockServer/1.0");
  resp3.setHeader("Date",DateUtils.formatDate(now));
  backendExpectsAnyRequestAndReturn(resp3);
  replayMocks();
  impl.execute(route,req1,context,null);
  impl.execute(route,req2,context,null);
  impl.execute(route,req3,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTRACERequestsAreWrittenThroughToOrigin() throws Exception {
  final HttpRequest req=HttpRequestWrapper.wrap(new BasicHttpRequest("TRACE","/",HttpVersion.HTTP_1_1),host);
  testRequestIsWrittenThroughToOrigin(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMustDiscardLeastRecentPartialResponseIfCacheValidatorsDoNotStronglyMatch() throws Exception {
  final Date now=new Date();
  final Date oneSecondAgo=new Date(now.getTime() - 1 * 1000L);
  final Date twoSecondsAgo=new Date(now.getTime() - 2 * 1000L);
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req1.setHeader("Range","bytes=0-49");
  final HttpResponse resp1=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_PARTIAL_CONTENT,"Partial Content");
  resp1.setEntity(HttpTestUtils.makeBody(50));
  resp1.setHeader("Cache-Control","max-age=3600");
  resp1.setHeader("Content-Range","bytes 0-49/128");
  resp1.setHeader("Etag","\"etag1\"");
  resp1.setHeader("Server","MockServer/1.0");
  resp1.setHeader("Date",DateUtils.formatDate(twoSecondsAgo));
  backendExpectsAnyRequestAndReturn(resp1);
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req2.setHeader("Range","bytes=50-127");
  final HttpResponse resp2=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_PARTIAL_CONTENT,"Partial Content");
  resp2.setEntity(HttpTestUtils.makeBody(78));
  resp2.setHeader("Cache-Control","max-age=3600");
  resp2.setHeader("Content-Range","bytes 50-127/128");
  resp2.setHeader("ETag","\"etag2\"");
  resp2.setHeader("Server","MockServer/1.0");
  resp2.setHeader("Date",DateUtils.formatDate(oneSecondAgo));
  backendExpectsAnyRequestAndReturn(resp2);
  final HttpRequestWrapper req3=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req3.setHeader("Range","bytes=0-49");
  final HttpResponse resp3=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_OK,"OK");
  resp3.setEntity(HttpTestUtils.makeBody(128));
  resp3.setHeader("Server","MockServer/1.0");
  resp3.setHeader("Date",DateUtils.formatDate(now));
  backendExpectsAnyRequestAndReturn(resp3);
  replayMocks();
  impl.execute(route,req1,context,null);
  impl.execute(route,req2,context,null);
  impl.execute(route,req3,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDELETEWithIfNoneMatchWeakETagIsNotAllowed() throws Exception {
  request=HttpRequestWrapper.wrap(new BasicHttpRequest("DELETE","/",HttpVersion.HTTP_1_1),host);
  request.setHeader("If-None-Match","W/\"etag\"");
  testRequestWithWeakETagValidatorIsNotAllowed("If-None-Match");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyEtagFromOriginOnCacheHit() throws Exception {
  testDoesNotModifyHeaderFromOriginOnCacheHit("Etag","\"the-etag\"");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOrderOfMultipleAcceptEncodingHeadersIsPreservedOnRequests() throws Exception {
  request.addHeader("Accept-Encoding","identity");
  request.addHeader("Accept-Encoding","compress, gzip");
  testOrderOfMultipleHeadersIsPreservedOnRequests("Accept-Encoding",request);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddContentTypeToRequestIfNotPresent() throws Exception {
  testDoesNotAddHeaderToRequestIfNotPresent("Content-Type");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDELETERequestsAreWrittenThroughToOrigin() throws Exception {
  final HttpRequest req=HttpRequestWrapper.wrap(new BasicHttpRequest("DELETE","/",HttpVersion.HTTP_1_1),host);
  testRequestIsWrittenThroughToOrigin(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyContentEncodingHeaderOnCachedResponseWithNoTransform() throws Exception {
  testDoesNotModifyHeaderOnCachedResponseWithNoTransform("Content-Encoding","gzip");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyContentLocationHeaderFromOrigin() throws Exception {
  final String url="http://foo.example.com/other";
  testDoesNotModifyHeaderFromOrigin("Content-Location",url);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCacheControlPrivateIsNotCacheableBySharedCache() throws Exception {
  if (config.isSharedCache()) {
    final HttpRequestWrapper req1=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
    final HttpResponse resp1=HttpTestUtils.make200Response();
    resp1.setHeader("Cache-Control","private,max-age=3600");
    backendExpectsAnyRequestAndReturn(resp1);
    final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
    final HttpResponse resp2=HttpTestUtils.make200Response();
    backendExpectsAnyRequestAndReturn(resp2);
    replayMocks();
    impl.execute(route,req1,context,null);
    impl.execute(route,req2,context,null);
    verifyMocks();
  }
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPutInvalidatesCacheForThatUriInLocationHeader() throws Exception {
  final HttpRequestWrapper req=makeRequestWithBody("PUT","/");
  testUnsafeMethodInvalidatesCacheForUriInLocationHeader(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNoStoreOnRequestIsNotStoredInCacheEvenIfResponseMarkedCacheable() throws Exception {
  emptyMockCacheExpectsNoPuts();
  request.setHeader("Cache-Control","no-store");
  originResponse.setHeader("Cache-Control","max-age=3600");
  backendExpectsAnyRequest().andReturn(originResponse);
  replayMocks();
  impl.execute(route,request,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPostToUriInvalidatesCacheForThatUri() throws Exception {
  final HttpRequestWrapper req=makeRequestWithBody("POST","/");
  testUnsafeOperationInvalidatesCacheForThatUri(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOrderOfMultipleExpectHeadersIsPreservedOnRequests() throws Exception {
  final BasicHttpRequest post=new BasicHttpRequest("POST","/",HttpVersion.HTTP_1_1);
  post.setEntity(body);
  post.addHeader("Expect","100-continue");
  post.addHeader("Expect","x-expect=true");
  post.addHeader("Content-Length","128");
  testOrderOfMultipleHeadersIsPreservedOnRequests("Expect",HttpRequestWrapper.wrap(post,host));
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResponsesToPUTsAreNotCached() throws Exception {
  emptyMockCacheExpectsNoPuts();
  final BasicHttpRequest put=new BasicHttpRequest("PUT","/",HttpVersion.HTTP_1_1);
  put.setEntity(HttpTestUtils.makeBody(128));
  put.addHeader("Content-Length","128");
  originResponse.setHeader("Cache-Control","max-age=3600");
  EasyMock.expect(mockBackend.execute(EasyMock.isA(HttpRoute.class),EasyMock.isA(HttpRequestWrapper.class),EasyMock.isA(HttpClientContext.class),EasyMock.<HttpExecutionAware>isNull())).andReturn(originResponse);
  replayMocks();
  impl.execute(route,HttpRequestWrapper.wrap(put,host),context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMalformedExpiresHeaderIsTreatedAsStale() throws Exception {
  testInvalidExpiresHeaderIsTreatedAsStale("garbage");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPostDoesNotInvalidateCacheForUriInLocationHeadersFromOtherHosts() throws Exception {
  final HttpRequestWrapper req=makeRequestWithBody("POST","/");
  testUnsafeMethodDoesNotInvalidateCacheForUriInLocationHeadersFromOtherHosts(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddETagHeaderOnCacheHit() throws Exception {
  testDoesNotAddHeaderOnCacheHit("ETag");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProperlyFormattedViaHeaderIsAddedToRequests() throws Exception {
  final Capture<HttpRequestWrapper> cap=new Capture<>();
  request.removeHeaders("Via");
  EasyMock.expect(mockBackend.execute(EasyMock.isA(HttpRoute.class),EasyMock.capture(cap),EasyMock.isA(HttpClientContext.class),EasyMock.<HttpExecutionAware>isNull())).andReturn(originResponse);
  replayMocks();
  impl.execute(route,request,context,null);
  verifyMocks();
  final HttpRequest captured=cap.getValue();
  final String via=captured.getFirstHeader("Via").getValue();
  assertValidViaHeader(via);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddContentMD5ToRequestIfNotPresent() throws Exception {
  testDoesNotAddHeaderToRequestIfNotPresent("Content-MD5");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMustDiscardLeastRecentPartialResponseIfIncomingRequestDoesNotHaveCacheValidator() throws Exception {
  final Date now=new Date();
  final Date oneSecondAgo=new Date(now.getTime() - 1 * 1000L);
  final Date twoSecondsAgo=new Date(now.getTime() - 2 * 1000L);
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req1.setHeader("Range","bytes=0-49");
  final HttpResponse resp1=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_PARTIAL_CONTENT,"Partial Content");
  resp1.setEntity(HttpTestUtils.makeBody(50));
  resp1.setHeader("Cache-Control","max-age=3600");
  resp1.setHeader("Content-Range","bytes 0-49/128");
  resp1.setHeader("ETag","\"etag1\"");
  resp1.setHeader("Server","MockServer/1.0");
  resp1.setHeader("Date",DateUtils.formatDate(twoSecondsAgo));
  backendExpectsAnyRequestAndReturn(resp1);
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req2.setHeader("Range","bytes=50-127");
  final HttpResponse resp2=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_PARTIAL_CONTENT,"Partial Content");
  resp2.setEntity(HttpTestUtils.makeBody(78));
  resp2.setHeader("Cache-Control","max-age=3600");
  resp2.setHeader("Content-Range","bytes 50-127/128");
  resp2.setHeader("Server","MockServer/1.0");
  resp2.setHeader("Date",DateUtils.formatDate(oneSecondAgo));
  backendExpectsAnyRequestAndReturn(resp2);
  final HttpRequestWrapper req3=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req3.setHeader("Range","bytes=0-49");
  final HttpResponse resp3=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_OK,"OK");
  resp3.setEntity(HttpTestUtils.makeBody(128));
  resp3.setHeader("Server","MockServer/1.0");
  resp3.setHeader("Date",DateUtils.formatDate(now));
  backendExpectsAnyRequestAndReturn(resp3);
  replayMocks();
  impl.execute(route,req1,context,null);
  impl.execute(route,req2,context,null);
  impl.execute(route,req3,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProperlyFormattedViaHeaderIsAddedToResponses() throws Exception {
  originResponse.removeHeaders("Via");
  backendExpectsAnyRequest().andReturn(originResponse);
  replayMocks();
  final HttpResponse result=impl.execute(route,request,context,null);
  verifyMocks();
  assertValidViaHeader(result.getFirstHeader("Via").getValue());
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCacheWithoutSupportForRangeAndContentRangeHeadersDoesNotCacheA206Response() throws Exception {
  if (!supportsRangeAndContentRangeHeaders(impl)) {
    emptyMockCacheExpectsNoPuts();
    final HttpRequestWrapper req=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
    req.setHeader("Range","bytes=0-50");
    final HttpResponse resp=new BasicHttpResponse(HttpVersion.HTTP_1_1,206,"Partial Content");
    resp.setHeader("Content-Range","bytes 0-50/128");
    resp.setHeader("ETag","\"etag\"");
    resp.setHeader("Cache-Control","max-age=3600");
    EasyMock.expect(mockBackend.execute(EasyMock.isA(HttpRoute.class),EasyMock.isA(HttpRequestWrapper.class),EasyMock.isA(HttpClientContext.class),EasyMock.<HttpExecutionAware>isNull())).andReturn(Proxies.enhanceResponse(resp));
    replayMocks();
    impl.execute(route,req,context,null);
    verifyMocks();
  }
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddContentLocationHeaderOnCacheHit() throws Exception {
  testDoesNotAddHeaderOnCacheHit("Content-Location");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNoStoreOnResponseIsNotStoredInCacheEvenWithContraryIndicators() throws Exception {
  emptyMockCacheExpectsNoPuts();
  originResponse.setHeader("Cache-Control","no-store,max-age=3600");
  backendExpectsAnyRequest().andReturn(originResponse);
  replayMocks();
  impl.execute(route,request,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddContentLocationToRequestIfNotPresent() throws Exception {
  testDoesNotAddHeaderToRequestIfNotPresent("Content-Location");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSharedCacheMayCacheAuthorizedResponsesWithCacheControlPublic() throws Exception {
  final HttpResponse resp=HttpTestUtils.make200Response();
  resp.setHeader("Cache-Control","public");
  testSharedCacheRevalidatesAuthorizedResponse(resp,0,1);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOrderOfMultipleAcceptCharsetHeadersIsPreservedOnRequests() throws Exception {
  request.addHeader("Accept-Charset","iso-8859-5");
  request.addHeader("Accept-Charset","unicode-1-1;q=0.8");
  testOrderOfMultipleHeadersIsPreservedOnRequests("Accept-Charset",request);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeleteInvalidatesCacheForThatUriInContentLocationHeader() throws Exception {
  final HttpRequestWrapper req=HttpRequestWrapper.wrap(new BasicHttpRequest("DELETE","/"),host);
  testUnsafeMethodInvalidatesCacheForUriInContentLocationHeader(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOrderOfMultipleAllowHeadersIsPreservedOnResponses() throws Exception {
  originResponse=Proxies.enhanceResponse(new BasicHttpResponse(HttpVersion.HTTP_1_1,405,"Method Not Allowed"));
  originResponse.addHeader("Allow","HEAD");
  originResponse.addHeader("Allow","DELETE");
  testOrderOfMultipleHeadersIsPreservedOnResponses("Allow");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPUTRequestsAreWrittenThroughToOrigin() throws Exception {
  final HttpRequest req=new BasicHttpRequest("PUT","/",HttpVersion.HTTP_1_1);
  req.setEntity(HttpTestUtils.makeBody(128));
  req.setHeader("Content-Length","128");
  testRequestIsWrittenThroughToOrigin(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyContentTypeHeaderFromOriginResponseWithNoTransform() throws Exception {
  testDoesNotModifyHeaderFromOriginResponseWithNoTransform("Content-Type","text/html;charset=utf-8");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCacheIsNotUsedWhenRespondingToRequestWithPragmaNoCache() throws Exception {
  final HttpRequestWrapper req=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req.setHeader("Pragma","no-cache");
  testCacheIsNotUsedWhenRespondingToRequest(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotForwardOPTIONSWhenMaxForwardsIsZeroOnAbsoluteURIRequest() throws Exception {
  request=HttpRequestWrapper.wrap(new BasicHttpRequest("OPTIONS","*",HttpVersion.HTTP_1_1),host);
  request.setHeader("Max-Forwards","0");
  replayMocks();
  impl.execute(route,request,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOrderOfMultipleContentEncodingHeadersIsPreservedOnResponses() throws Exception {
  originResponse.addHeader("Content-Encoding","gzip");
  originResponse.addHeader("Content-Encoding","compress");
  testOrderOfMultipleHeadersIsPreservedOnResponses("Content-Encoding");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddLastModifiedToOriginResponse() throws Exception {
  testDoesNotAddHeaderToOriginResponse("Last-Modified");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeleteToUriInvalidatesCacheForThatUri() throws Exception {
  final HttpRequestWrapper req=HttpRequestWrapper.wrap(new BasicHttpRequest("DELETE","/"),host);
  testUnsafeOperationInvalidatesCacheForThatUri(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyContentEncodingHeaderFromOriginResponseWithNoTransform() throws Exception {
  testDoesNotModifyHeaderFromOriginResponseWithNoTransform("Content-Encoding","gzip");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyEtagHeaderFromOrigin() throws Exception {
  testDoesNotModifyHeaderFromOrigin("Etag","\"the-etag\"");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPostDoesNotInvalidateCacheForUriInContentLocationHeadersFromOtherHosts() throws Exception {
  final HttpRequestWrapper req=makeRequestWithBody("POST","/");
  testUnsafeMethodDoesNotInvalidateCacheForUriInContentLocationHeadersFromOtherHosts(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCannotCombinePartialResponseIfCacheEntryDoesNotHaveACacheValidator() throws Exception {
  final Date now=new Date();
  final Date oneSecondAgo=new Date(now.getTime() - 1 * 1000L);
  final Date twoSecondsAgo=new Date(now.getTime() - 2 * 1000L);
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req1.setHeader("Range","bytes=0-49");
  final HttpResponse resp1=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_PARTIAL_CONTENT,"Partial Content");
  resp1.setEntity(HttpTestUtils.makeBody(50));
  resp1.setHeader("Cache-Control","max-age=3600");
  resp1.setHeader("Content-Range","bytes 0-49/128");
  resp1.setHeader("Server","MockServer/1.0");
  resp1.setHeader("Date",DateUtils.formatDate(twoSecondsAgo));
  backendExpectsAnyRequestAndReturn(resp1);
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req2.setHeader("Range","bytes=50-127");
  final HttpResponse resp2=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_PARTIAL_CONTENT,"Partial Content");
  resp2.setEntity(HttpTestUtils.makeBody(78));
  resp2.setHeader("Cache-Control","max-age=3600");
  resp2.setHeader("Content-Range","bytes 50-127/128");
  resp2.setHeader("ETag","\"etag1\"");
  resp2.setHeader("Server","MockServer/1.0");
  resp2.setHeader("Date",DateUtils.formatDate(oneSecondAgo));
  backendExpectsAnyRequestAndReturn(resp2);
  final HttpRequestWrapper req3=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  final HttpResponse resp3=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_OK,"OK");
  resp3.setEntity(HttpTestUtils.makeBody(128));
  resp3.setHeader("Server","MockServer/1.0");
  resp3.setHeader("Date",DateUtils.formatDate(now));
  backendExpectsAnyRequestAndReturn(resp3);
  replayMocks();
  impl.execute(route,req1,context,null);
  impl.execute(route,req2,context,null);
  impl.execute(route,req3,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCannotServeFromCacheForVaryStar() throws Exception {
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  final HttpResponse resp1=HttpTestUtils.make200Response();
  resp1.setHeader("ETag","\"etag1\"");
  resp1.setHeader("Cache-Control","max-age=3600");
  resp1.setHeader("Vary","*");
  backendExpectsAnyRequestAndReturn(resp1);
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  final HttpResponse resp2=HttpTestUtils.make200Response();
  resp2.setHeader("ETag","\"etag1\"");
  resp2.setHeader("Cache-Control","max-age=3600");
  backendExpectsAnyRequestAndReturn(resp2);
  replayMocks();
  impl.execute(route,req1,context,null);
  impl.execute(route,req2,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddContentRangeHeaderToRequestIfNotPresent() throws Exception {
  testDoesNotAddHeaderToRequestIfNotPresent("Content-Range");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPostInvalidatesCacheForThatUriInContentLocationHeader() throws Exception {
  final HttpRequestWrapper req=makeRequestWithBody("POST","/");
  testUnsafeMethodInvalidatesCacheForUriInContentLocationHeader(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddContentTypeHeaderToOriginResponseWithNoTransformIfNotPresent() throws Exception {
  originResponse.addHeader("Cache-Control","no-transform");
  testDoesNotAddHeaderToOriginResponse("Content-Type");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddContentMD5HeaderOnCacheHit() throws Exception {
  testDoesNotAddHeaderOnCacheHit("Content-MD5");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyContentMD5HeaderFromOrigin() throws Exception {
  testDoesNotModifyHeaderFromOrigin("Content-MD5","Q2hlY2sgSW50ZWdyaXR5IQ==");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStaleEntryWithMustRevalidateIsNotUsedWithoutRevalidatingWithOrigin() throws Exception {
  final HttpResponse response=HttpTestUtils.make200Response();
  final Date now=new Date();
  final Date tenSecondsAgo=new Date(now.getTime() - 10 * 1000L);
  response.setHeader("Date",DateUtils.formatDate(tenSecondsAgo));
  response.setHeader("ETag","\"etag1\"");
  response.setHeader("Cache-Control","max-age=5, must-revalidate");
  testStaleCacheResponseMustBeRevalidatedWithOrigin(response);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeleteInvalidatesCacheForThatUriInLocationHeader() throws Exception {
  final HttpRequestWrapper req=HttpRequestWrapper.wrap(new BasicHttpRequest("DELETE","/"),host);
  testUnsafeMethodInvalidatesCacheForUriInLocationHeader(req);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddContentRangeHeaderToOriginResponseWithNoTransformIfNotPresent() throws Exception {
  originResponse.addHeader("Cache-Control","no-transform");
  testDoesNotAddHeaderToOriginResponse("Content-Range");
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotModifyExpiresHeaderFromOrigin() throws Exception {
  final long inTenSeconds=System.currentTimeMillis() + 10 * 1000L;
  final String expires=DateUtils.formatDate(new Date(inTenSeconds));
  testDoesNotModifyHeaderFromOrigin("Expires",expires);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMustDiscardLeastRecentPartialResponseIfCachedResponseDoesNotHaveCacheValidator() throws Exception {
  final Date now=new Date();
  final Date oneSecondAgo=new Date(now.getTime() - 1 * 1000L);
  final Date twoSecondsAgo=new Date(now.getTime() - 2 * 1000L);
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req1.setHeader("Range","bytes=0-49");
  final HttpResponse resp1=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_PARTIAL_CONTENT,"Partial Content");
  resp1.setEntity(HttpTestUtils.makeBody(50));
  resp1.setHeader("Cache-Control","max-age=3600");
  resp1.setHeader("Content-Range","bytes 0-49/128");
  resp1.setHeader("Server","MockServer/1.0");
  resp1.setHeader("Date",DateUtils.formatDate(twoSecondsAgo));
  backendExpectsAnyRequestAndReturn(resp1);
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req2.setHeader("Range","bytes=50-127");
  final HttpResponse resp2=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_PARTIAL_CONTENT,"Partial Content");
  resp2.setEntity(HttpTestUtils.makeBody(78));
  resp2.setHeader("Cache-Control","max-age=3600");
  resp2.setHeader("Content-Range","bytes 50-127/128");
  resp2.setHeader("ETag","\"etag1\"");
  resp2.setHeader("Server","MockServer/1.0");
  resp2.setHeader("Date",DateUtils.formatDate(oneSecondAgo));
  backendExpectsAnyRequestAndReturn(resp2);
  final HttpRequestWrapper req3=HttpRequestWrapper.wrap(new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1),host);
  req3.setHeader("Range","bytes=0-49");
  final HttpResponse resp3=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_OK,"OK");
  resp3.setEntity(HttpTestUtils.makeBody(128));
  resp3.setHeader("Server","MockServer/1.0");
  resp3.setHeader("Date",DateUtils.formatDate(now));
  backendExpectsAnyRequestAndReturn(resp3);
  replayMocks();
  impl.execute(route,req1,context,null);
  impl.execute(route,req2,context,null);
  impl.execute(route,req3,context,null);
  verifyMocks();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOrderOfMultipleAllowHeadersIsPreservedOnRequests() throws Exception {
  final BasicHttpRequest put=new BasicHttpRequest("PUT","/",HttpVersion.HTTP_1_1);
  put.setEntity(body);
  put.addHeader("Allow","GET, HEAD");
  put.addHeader("Allow","DELETE");
  put.addHeader("Content-Length","128");
  testOrderOfMultipleHeadersIsPreservedOnRequests("Allow",HttpRequestWrapper.wrap(put,host));
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOrderOfMultipleContentLanguageHeadersIsPreservedOnRequests() throws Exception {
  final BasicHttpRequest post=new BasicHttpRequest("POST","/",HttpVersion.HTTP_1_1);
  post.setEntity(body);
  post.addHeader("Content-Language","mi");
  post.addHeader("Content-Language","en");
  post.addHeader("Content-Length","128");
  testOrderOfMultipleHeadersIsPreservedOnRequests("Content-Language",HttpRequestWrapper.wrap(post,host));
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoesNotAddLastModifiedToRequestIfNotPresent() throws Exception {
  testDoesNotAddHeaderToRequestIfNotPresent("Last-Modified");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.cache.TestRFC5861Compliance </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStaleIfErrorInRequestIsTrueReturnsStaleNonRevalidatableEntryWithWarning() throws Exception {
  final Date tenSecondsAgo=new Date(new Date().getTime() - 10 * 1000L);
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(HttpTestUtils.makeDefaultRequest(),host);
  final HttpResponse resp1=HttpTestUtils.make200Response();
  resp1.setHeader("Date",DateUtils.formatDate(tenSecondsAgo));
  resp1.setHeader("Cache-Control","public, max-age=5");
  backendExpectsAnyRequestAndReturn(resp1);
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(HttpTestUtils.makeDefaultRequest(),host);
  req2.setHeader("Cache-Control","public, stale-if-error=60");
  final HttpResponse resp2=HttpTestUtils.make500Response();
  backendExpectsAnyRequestAndReturn(resp2);
  replayMocks();
  impl.execute(route,req1,context,null);
  final HttpResponse result=impl.execute(route,req2,context,null);
  verifyMocks();
  HttpTestUtils.assert110WarningFound(result);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStaleIfErrorInResponseNeedNotYieldToProxyRevalidateForPrivateCache() throws Exception {
  final CacheConfig configUnshared=CacheConfig.custom().setSharedCache(false).build();
  impl=new CachingExec(mockBackend,new BasicHttpCache(configUnshared),configUnshared);
  final Date tenSecondsAgo=new Date(new Date().getTime() - 10 * 1000L);
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(HttpTestUtils.makeDefaultRequest(),host);
  final HttpResponse resp1=HttpTestUtils.make200Response(tenSecondsAgo,"public, max-age=5, stale-if-error=60, proxy-revalidate");
  backendExpectsAnyRequestAndReturn(resp1);
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(HttpTestUtils.makeDefaultRequest(),host);
  final HttpResponse resp2=HttpTestUtils.make500Response();
  backendExpectsAnyRequestAndReturn(resp2);
  replayMocks();
  impl.execute(route,req1,context,null);
  final HttpResponse result=impl.execute(route,req2,context,null);
  verifyMocks();
  HttpTestUtils.assert110WarningFound(result);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStaleIfErrorInResponseIsTrueReturnsStaleEntryWithWarning() throws Exception {
  final Date tenSecondsAgo=new Date(new Date().getTime() - 10 * 1000L);
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(HttpTestUtils.makeDefaultRequest(),host);
  final HttpResponse resp1=HttpTestUtils.make200Response(tenSecondsAgo,"public, max-age=5, stale-if-error=60");
  backendExpectsAnyRequestAndReturn(resp1);
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(HttpTestUtils.makeDefaultRequest(),host);
  final HttpResponse resp2=HttpTestUtils.make500Response();
  backendExpectsAnyRequestAndReturn(resp2);
  replayMocks();
  impl.execute(route,req1,context,null);
  final HttpResponse result=impl.execute(route,req2,context,null);
  verifyMocks();
  HttpTestUtils.assert110WarningFound(result);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStaleIfErrorInRequestIsTrueReturnsStaleEntryWithWarning() throws Exception {
  final Date tenSecondsAgo=new Date(new Date().getTime() - 10 * 1000L);
  final HttpRequestWrapper req1=HttpRequestWrapper.wrap(HttpTestUtils.makeDefaultRequest(),host);
  final HttpResponse resp1=HttpTestUtils.make200Response(tenSecondsAgo,"public, max-age=5");
  backendExpectsAnyRequestAndReturn(resp1);
  final HttpRequestWrapper req2=HttpRequestWrapper.wrap(HttpTestUtils.makeDefaultRequest(),host);
  req2.setHeader("Cache-Control","public, stale-if-error=60");
  final HttpResponse resp2=HttpTestUtils.make500Response();
  backendExpectsAnyRequestAndReturn(resp2);
  replayMocks();
  impl.execute(route,req1,context,null);
  final HttpResponse result=impl.execute(route,req2,context,null);
  verifyMocks();
  HttpTestUtils.assert110WarningFound(result);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.cache.TestResponseProtocolCompliance </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ClientProtocolException.class) public void throwsExceptionIfOriginReturnsPartialResponseWhenNotRequested() throws Exception {
  final HttpRequestWrapper wrapper=HttpRequestWrapper.wrap(new HttpGet("http://foo.example.com/"),host);
  final int nbytes=128;
  final HttpResponse resp=makePartialResponse(nbytes);
  resp.setEntity(HttpTestUtils.makeBody(nbytes));
  impl.ensureProtocolCompliance(wrapper,resp);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.cache.ehcache.TestEhcacheHttpCacheStorage </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCacheRemove(){
  final String key="foo";
  when(mockCache.remove(key)).thenReturn(true);
  impl.removeEntry(key);
  verify(mockCache).remove(key);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCachePut() throws IOException {
  final String key="foo";
  final HttpCacheEntry value=HttpTestUtils.makeCacheEntry();
  final Element e=new Element(key,new byte[]{});
  impl.putEntry(key,value);
  verify(mockSerializer).writeTo(same(value),isA(OutputStream.class));
  verify(mockCache).put(e);
  ;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.cache.memcached.TestMemcachedCacheEntryImpl </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MemcachedSerializationException.class) public void cannotReconstituteFromGarbage(){
  impl=new MemcachedCacheEntryImpl();
  final byte[] bytes=HttpTestUtils.getRandomBytes(128);
  impl.set(bytes);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.cache.memcached.TestMemcachedHttpCacheStorage </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCacheRemoveHandlesKeyHashingFailure() throws IOException {
  final String url="foo";
  when(mockKeyHashingScheme.hash(url)).thenReturn(null);
  impl.removeEntry(url);
  verify(mockKeyHashingScheme).hash(url);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCachePutFailsSilentlyWhenWeCannotHashAKey() throws IOException {
  final String url="foo";
  final HttpCacheEntry value=HttpTestUtils.makeCacheEntry();
  final byte[] serialized=HttpTestUtils.getRandomBytes(128);
  when(mockMemcachedCacheEntryFactory.getMemcachedCacheEntry(url,value)).thenReturn(mockMemcachedCacheEntry);
  when(mockMemcachedCacheEntry.toByteArray()).thenReturn(serialized);
  when(mockKeyHashingScheme.hash(url)).thenThrow(new MemcachedKeyHashingException(new Exception()));
  impl.putEntry(url,value);
  verify(mockMemcachedCacheEntryFactory).getMemcachedCacheEntry(url,value);
  verify(mockMemcachedCacheEntry).toByteArray();
  verify(mockKeyHashingScheme).hash(url);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCacheRemove() throws IOException {
  final String url="foo";
  final String key="key";
  when(mockKeyHashingScheme.hash(url)).thenReturn(key);
  when(mockMemcachedClient.delete(key)).thenReturn(null);
  impl.removeEntry(url);
  verify(mockKeyHashingScheme).hash(url);
  verify(mockMemcachedClient).delete(key);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSuccessfulCachePut() throws IOException {
  final String url="foo";
  final String key="key";
  final HttpCacheEntry value=HttpTestUtils.makeCacheEntry();
  final byte[] serialized=HttpTestUtils.getRandomBytes(128);
  when(mockMemcachedCacheEntryFactory.getMemcachedCacheEntry(url,value)).thenReturn(mockMemcachedCacheEntry);
  when(mockMemcachedCacheEntry.toByteArray()).thenReturn(serialized);
  when(mockKeyHashingScheme.hash(url)).thenReturn(key);
  when(mockMemcachedClient.set(key,0,serialized)).thenReturn(null);
  impl.putEntry(url,value);
  verify(mockMemcachedCacheEntryFactory).getMemcachedCacheEntry(url,value);
  verify(mockMemcachedCacheEntry).toByteArray();
  verify(mockKeyHashingScheme).hash(url);
  verify(mockMemcachedClient).set(key,0,serialized);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.cookie.TestBasicCookieAttribHandlers </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBasicDomainValidate3() throws Exception {
  final BasicClientCookie cookie=new BasicClientCookie("name","value");
  final CookieOrigin origin=new CookieOrigin("somedomain.com",80,"/",false);
  final CookieAttributeHandler h=new BasicDomainHandler();
  cookie.setDomain(".somedomain.com");
  h.validate(cookie,origin);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedCookieException.class) public void testBasicDomainParseInvalid2() throws Exception {
  final BasicClientCookie cookie=new BasicClientCookie("name","value");
  final CookieAttributeHandler h=new BasicDomainHandler();
  h.parse(cookie,null);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedCookieException.class) public void testBasicDomainParseInvalid1() throws Exception {
  final BasicClientCookie cookie=new BasicClientCookie("name","value");
  final CookieAttributeHandler h=new BasicDomainHandler();
  h.parse(cookie,"");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.cookie.TestLaxCookieAttribHandlers </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedCookieException.class) public void testParseExpiryInvalidDayOfMonth2() throws Exception {
  final BasicClientCookie cookie=new BasicClientCookie("name","value");
  final CookieAttributeHandler h=new LaxExpiresHandler();
  h.parse(cookie,"12:00:00 0 mar 1880");
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedCookieException.class) public void testExpiryGarbage() throws Exception {
  final BasicClientCookie cookie=new BasicClientCookie("name","value");
  final CookieAttributeHandler h=new LaxExpiresHandler();
  h.parse(cookie,";;blah,blah;yada  ");
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedCookieException.class) public void testParseExpiryInvalidMonth() throws Exception {
  final BasicClientCookie cookie=new BasicClientCookie("name","value");
  final CookieAttributeHandler h=new LaxExpiresHandler();
  h.parse(cookie,"1:00:00 8 dek 80");
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedCookieException.class) public void testParseExpiryInvalidTime2() throws Exception {
  final BasicClientCookie cookie=new BasicClientCookie("name","value");
  final CookieAttributeHandler h=new LaxExpiresHandler();
  h.parse(cookie,"24:00:00 8 dec 1980");
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedCookieException.class) public void testParseExpiryInvalidDayOfMonth3() throws Exception {
  final BasicClientCookie cookie=new BasicClientCookie("name","value");
  final CookieAttributeHandler h=new LaxExpiresHandler();
  h.parse(cookie,"12:00:00 32 mar 1880");
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedCookieException.class) public void testParseExpiryInvalidTime3() throws Exception {
  final BasicClientCookie cookie=new BasicClientCookie("name","value");
  final CookieAttributeHandler h=new LaxExpiresHandler();
  h.parse(cookie,"23:60:00 8 dec 1980");
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedCookieException.class) public void testParseExpiryInvalidYearTooLong() throws Exception {
  final BasicClientCookie cookie=new BasicClientCookie("name","value");
  final CookieAttributeHandler h=new LaxExpiresHandler();
  h.parse(cookie,"1:00:00 8 dec 88888");
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedCookieException.class) public void testParseExpiryInvalidTime4() throws Exception {
  final BasicClientCookie cookie=new BasicClientCookie("name","value");
  final CookieAttributeHandler h=new LaxExpiresHandler();
  h.parse(cookie,"23:00:60 8 dec 1980");
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedCookieException.class) public void testParseExpiryInvalidYearTooShort() throws Exception {
  final BasicClientCookie cookie=new BasicClientCookie("name","value");
  final CookieAttributeHandler h=new LaxExpiresHandler();
  h.parse(cookie,"1:00:00 8 dec 8");
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedCookieException.class) public void testParseExpiryInvalidYearTooLongAgo() throws Exception {
  final BasicClientCookie cookie=new BasicClientCookie("name","value");
  final CookieAttributeHandler h=new LaxExpiresHandler();
  h.parse(cookie,"1:00:00 8 dec 1600");
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedCookieException.class) public void testParseExpiryInvalidDayOfMonth1() throws Exception {
  final BasicClientCookie cookie=new BasicClientCookie("name","value");
  final CookieAttributeHandler h=new LaxExpiresHandler();
  h.parse(cookie,"12:00:00 888 mar 1880");
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedCookieException.class) public void testParseExpiryInvalidTime1() throws Exception {
  final BasicClientCookie cookie=new BasicClientCookie("name","value");
  final CookieAttributeHandler h=new LaxExpiresHandler();
  h.parse(cookie,"1:0:122 8 dec 1980");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.cookie.TestRFC6265CookieSpec </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testParseCookieMaxAgeOverExpires() throws Exception {
  final CommonCookieAttributeHandler h1=Mockito.mock(CommonCookieAttributeHandler.class);
  Mockito.when(h1.getAttributeName()).thenReturn("Expires");
  final CommonCookieAttributeHandler h2=Mockito.mock(CommonCookieAttributeHandler.class);
  Mockito.when(h2.getAttributeName()).thenReturn("Max-Age");
  final RFC6265CookieSpec cookiespec=new RFC6265CookieSpec(h1,h2);
  final Header header=new BasicHeader("Set-Cookie","name = value ; expires = stuff; max-age = otherstuff;");
  final CookieOrigin origin=new CookieOrigin("host",80,"/path/",true);
  cookiespec.parse(header,origin);
  Mockito.verify(h1,Mockito.never()).parse(Mockito.<SetCookie>any(),Mockito.anyString());
  Mockito.verify(h2).parse(Mockito.<SetCookie>any(),Mockito.eq("otherstuff"));
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testParseCookieMultipleAttributes() throws Exception {
  final CommonCookieAttributeHandler h1=Mockito.mock(CommonCookieAttributeHandler.class);
  Mockito.when(h1.getAttributeName()).thenReturn("this");
  final RFC6265CookieSpec cookiespec=new RFC6265CookieSpec(h1);
  final Header header=new BasicHeader("Set-Cookie","name = value ; this = stuff; this = morestuff;");
  final CookieOrigin origin=new CookieOrigin("host",80,"/path/",true);
  cookiespec.parse(header,origin);
  Mockito.verify(h1).parse(Mockito.<SetCookie>any(),Mockito.eq("morestuff"));
  Mockito.verify(h1,Mockito.times(1)).parse(Mockito.<SetCookie>any(),Mockito.anyString());
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testValidateCookieBasics() throws Exception {
  final CommonCookieAttributeHandler h1=Mockito.mock(CommonCookieAttributeHandler.class);
  Mockito.when(h1.getAttributeName()).thenReturn("this");
  final CommonCookieAttributeHandler h2=Mockito.mock(CommonCookieAttributeHandler.class);
  Mockito.when(h2.getAttributeName()).thenReturn("that");
  final RFC6265CookieSpec cookiespec=new RFC6265CookieSpec(h1,h2);
  final CookieOrigin origin=new CookieOrigin("host",80,"/path/",true);
  final BasicClientCookie cookie=new BasicClientCookie("name","value");
  cookiespec.validate(cookie,origin);
  Mockito.verify(h1).validate(cookie,origin);
  Mockito.verify(h2).validate(cookie,origin);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedCookieException.class) public void testParseCookieWrongHeader() throws Exception {
  final RFC6265CookieSpec cookiespec=new RFC6265CookieSpec();
  final Header header=new BasicHeader("Set-Cookie2","blah");
  final CookieOrigin origin=new CookieOrigin("host",80,"/path/",true);
  cookiespec.parse(header,origin);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MalformedCookieException.class) public void testParseCookieMissingValue2() throws Exception {
  final RFC6265CookieSpec cookiespec=new RFC6265CookieSpec();
  final Header header=new BasicHeader("Set-Cookie","blah;");
  final CookieOrigin origin=new CookieOrigin("host",80,"/path/",true);
  cookiespec.parse(header,origin);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.integration.TestBasicConnectionManager </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testConnectionStillInUse() throws Exception {
  this.clientBuilder.setConnectionManager(new BasicHttpClientConnectionManager());
  final HttpHost target=start();
  final HttpGet get1=new HttpGet("/random/1024");
  this.httpclient.execute(target,get1);
  final HttpGet get2=new HttpGet("/random/1024");
  this.httpclient.execute(target,get2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.integration.TestIdleConnectionEviction </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testIdleConnectionEviction() throws Exception {
  this.connManager.setDefaultMaxPerRoute(10);
  this.connManager.setMaxTotal(50);
  final HttpHost target=start();
  final IdleConnectionEvictor idleConnectionMonitor=new IdleConnectionEvictor(this.connManager,50,TimeUnit.MILLISECONDS);
  idleConnectionMonitor.start();
  final HttpGet httpget=new HttpGet("/random/1024");
  final WorkerThread[] workers=new WorkerThread[5];
  for (int i=0; i < workers.length; i++) {
    workers[i]=new WorkerThread(httpclient,target,httpget,200);
  }
  for (  final WorkerThread worker : workers) {
    worker.start();
  }
  for (  final WorkerThread worker : workers) {
    worker.join();
    final Exception ex=worker.getException();
    if (ex != null) {
      throw ex;
    }
  }
  idleConnectionMonitor.shutdown();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.integration.TestStatefulConnManagement </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRouteSpecificPoolRecylcing() throws Exception {
  final int maxConn=2;
  this.serverBootstrap.registerHandler("*",new SimpleService());
  this.connManager.setMaxTotal(maxConn);
  this.connManager.setDefaultMaxPerRoute(maxConn);
  final UserTokenHandler userTokenHandler=new UserTokenHandler(){
    @Override public Object getUserToken(    final HttpRoute route,    final HttpContext context){
      return context.getAttribute("user");
    }
  }
;
  this.clientBuilder.setUserTokenHandler(userTokenHandler);
  final HttpHost target=start();
  final HttpContext context1=new BasicHttpContext();
  context1.setAttribute("user","stuff");
  final HttpResponse response1=this.httpclient.execute(target,new HttpGet("/"),context1);
  EntityUtils.consume(response1.getEntity());
  Thread.sleep(100);
  final HttpContext context2=new BasicHttpContext();
  final HttpResponse response2=this.httpclient.execute(new HttpHost("127.0.0.1",this.server.getLocalPort()),new HttpGet("/"),context2);
  EntityUtils.consume(response2.getEntity());
  Thread.sleep(100);
  final HttpContext context3=new BasicHttpContext();
  final HttpResponse response3=this.httpclient.execute(target,new HttpGet("/"),context3);
  EntityUtils.consume(response3.getEntity());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.io.TestBasicHttpClientConnectionManager </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testLeaseInvalidArg() throws Exception {
  mgr.requestConnection(null,null);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testReleaseAnotherConnection() throws Exception {
  final HttpClientConnection wrongCon=Mockito.mock(HttpClientConnection.class);
  mgr.releaseConnection(wrongCon,null,0,TimeUnit.MILLISECONDS);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testReleaseInvalidArg() throws Exception {
  mgr.releaseConnection(null,null,0,TimeUnit.MILLISECONDS);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.io.TestDefaultHttpResponseParser </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NoHttpResponseException.class) public void testResponseParsingNoResponse() throws Exception {
  final SessionInputBuffer inbuffer=new SessionInputBufferMock("",StandardCharsets.US_ASCII);
  final HttpMessageParser<HttpResponse> parser=new LenientHttpResponseParser(MessageConstraints.DEFAULT);
  parser.parse(inbuffer);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MessageConstraintException.class) public void testResponseParsingWithTooMuchGarbage() throws Exception {
  final String s="garbage\r\n" + "garbage\r\n" + "more garbage\r\n"+ "HTTP/1.1 200 OK\r\n"+ "header1: value1\r\n"+ "header2: value2\r\n"+ "\r\n";
  final SessionInputBuffer inbuffer=new SessionInputBufferMock(s,StandardCharsets.US_ASCII);
  final MessageConstraints messageConstraints=MessageConstraints.custom().setMaxEmptyLineCount(2).build();
  final HttpMessageParser<HttpResponse> parser=new LenientHttpResponseParser(messageConstraints);
  parser.parse(inbuffer);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MessageConstraintException.class) public void testResponseParsingOnlyGarbage() throws Exception {
  final String s="garbage\r\n" + "garbage\r\n" + "more garbage\r\n"+ "a lot more garbage\r\n";
  final SessionInputBuffer inbuffer=new SessionInputBufferMock(s,StandardCharsets.US_ASCII);
  final HttpMessageParser<HttpResponse> parser=new LenientHttpResponseParser(MessageConstraints.DEFAULT);
  parser.parse(inbuffer);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.io.TestHttpClientConnectionOperator </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConnectFailover() throws Exception {
  final HttpContext context=new BasicHttpContext();
  final HttpHost host=new HttpHost("somehost");
  final InetAddress local=InetAddress.getByAddress(new byte[]{127,0,0,0});
  final InetAddress ip1=InetAddress.getByAddress(new byte[]{10,0,0,1});
  final InetAddress ip2=InetAddress.getByAddress(new byte[]{10,0,0,2});
  Mockito.when(dnsResolver.resolve("somehost")).thenReturn(new InetAddress[]{ip1,ip2});
  Mockito.when(socketFactoryRegistry.lookup("http")).thenReturn(plainSocketFactory);
  Mockito.when(schemePortResolver.resolve(host)).thenReturn(80);
  Mockito.when(plainSocketFactory.createSocket(Mockito.<HttpContext>any())).thenReturn(socket);
  Mockito.when(plainSocketFactory.connectSocket(Mockito.anyInt(),Mockito.<Socket>any(),Mockito.<HttpHost>any(),Mockito.eq(new InetSocketAddress(ip1,80)),Mockito.<InetSocketAddress>any(),Mockito.<HttpContext>any())).thenThrow(new ConnectException());
  Mockito.when(plainSocketFactory.connectSocket(Mockito.anyInt(),Mockito.<Socket>any(),Mockito.<HttpHost>any(),Mockito.eq(new InetSocketAddress(ip2,80)),Mockito.<InetSocketAddress>any(),Mockito.<HttpContext>any())).thenReturn(socket);
  final InetSocketAddress localAddress=new InetSocketAddress(local,0);
  connectionOperator.connect(conn,host,localAddress,1000,SocketConfig.DEFAULT,context);
  Mockito.verify(plainSocketFactory).connectSocket(1000,socket,host,new InetSocketAddress(ip2,80),localAddress,context);
  Mockito.verify(conn,Mockito.times(3)).bind(socket);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConnect() throws Exception {
  final HttpContext context=new BasicHttpContext();
  final HttpHost host=new HttpHost("somehost");
  final InetAddress local=InetAddress.getByAddress(new byte[]{127,0,0,0});
  final InetAddress ip1=InetAddress.getByAddress(new byte[]{127,0,0,1});
  final InetAddress ip2=InetAddress.getByAddress(new byte[]{127,0,0,2});
  Mockito.when(dnsResolver.resolve("somehost")).thenReturn(new InetAddress[]{ip1,ip2});
  Mockito.when(socketFactoryRegistry.lookup("http")).thenReturn(plainSocketFactory);
  Mockito.when(schemePortResolver.resolve(host)).thenReturn(80);
  Mockito.when(plainSocketFactory.createSocket(Mockito.<HttpContext>any())).thenReturn(socket);
  Mockito.when(plainSocketFactory.connectSocket(Mockito.anyInt(),Mockito.<Socket>any(),Mockito.<HttpHost>any(),Mockito.<InetSocketAddress>any(),Mockito.<InetSocketAddress>any(),Mockito.<HttpContext>any())).thenReturn(socket);
  final SocketConfig socketConfig=SocketConfig.custom().setSoKeepAlive(true).setSoReuseAddress(true).setSoTimeout(5000).setTcpNoDelay(true).setSoLinger(50).build();
  final InetSocketAddress localAddress=new InetSocketAddress(local,0);
  connectionOperator.connect(conn,host,localAddress,1000,socketConfig,context);
  Mockito.verify(socket).setKeepAlive(true);
  Mockito.verify(socket).setReuseAddress(true);
  Mockito.verify(socket).setSoTimeout(5000);
  Mockito.verify(socket).setSoLinger(true,50);
  Mockito.verify(socket).setTcpNoDelay(true);
  Mockito.verify(plainSocketFactory).connectSocket(1000,socket,host,new InetSocketAddress(ip1,80),localAddress,context);
  Mockito.verify(conn,Mockito.times(2)).bind(socket);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=UnsupportedSchemeException.class) public void testUpgradeNonLayeringScheme() throws Exception {
  final HttpContext context=new BasicHttpContext();
  final HttpHost host=new HttpHost("somehost",-1,"http");
  Mockito.when(socketFactoryRegistry.lookup("http")).thenReturn(plainSocketFactory);
  connectionOperator.upgrade(conn,host,context);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=HttpHostConnectException.class) public void testConnectFailure() throws Exception {
  final HttpContext context=new BasicHttpContext();
  final HttpHost host=new HttpHost("somehost");
  final InetAddress ip1=InetAddress.getByAddress(new byte[]{10,0,0,1});
  final InetAddress ip2=InetAddress.getByAddress(new byte[]{10,0,0,2});
  Mockito.when(dnsResolver.resolve("somehost")).thenReturn(new InetAddress[]{ip1,ip2});
  Mockito.when(socketFactoryRegistry.lookup("http")).thenReturn(plainSocketFactory);
  Mockito.when(schemePortResolver.resolve(host)).thenReturn(80);
  Mockito.when(plainSocketFactory.createSocket(Mockito.<HttpContext>any())).thenReturn(socket);
  Mockito.when(plainSocketFactory.connectSocket(Mockito.anyInt(),Mockito.<Socket>any(),Mockito.<HttpHost>any(),Mockito.<InetSocketAddress>any(),Mockito.<InetSocketAddress>any(),Mockito.<HttpContext>any())).thenThrow(new ConnectException());
  connectionOperator.connect(conn,host,null,1000,SocketConfig.DEFAULT,context);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConnectExplicitAddress() throws Exception {
  final HttpContext context=new BasicHttpContext();
  final InetAddress local=InetAddress.getByAddress(new byte[]{127,0,0,0});
  final InetAddress ip=InetAddress.getByAddress(new byte[]{127,0,0,23});
  final HttpHost host=new HttpHost(ip);
  Mockito.when(socketFactoryRegistry.lookup("http")).thenReturn(plainSocketFactory);
  Mockito.when(schemePortResolver.resolve(host)).thenReturn(80);
  Mockito.when(plainSocketFactory.createSocket(Mockito.<HttpContext>any())).thenReturn(socket);
  Mockito.when(plainSocketFactory.connectSocket(Mockito.anyInt(),Mockito.<Socket>any(),Mockito.<HttpHost>any(),Mockito.<InetSocketAddress>any(),Mockito.<InetSocketAddress>any(),Mockito.<HttpContext>any())).thenReturn(socket);
  final InetSocketAddress localAddress=new InetSocketAddress(local,0);
  connectionOperator.connect(conn,host,localAddress,1000,SocketConfig.DEFAULT,context);
  Mockito.verify(plainSocketFactory).connectSocket(1000,socket,host,new InetSocketAddress(ip,80),localAddress,context);
  Mockito.verify(dnsResolver,Mockito.never()).resolve(Mockito.anyString());
  Mockito.verify(conn,Mockito.times(2)).bind(socket);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUpgrade() throws Exception {
  final HttpContext context=new BasicHttpContext();
  final HttpHost host=new HttpHost("somehost",-1,"https");
  Mockito.when(socketFactoryRegistry.lookup("https")).thenReturn(sslSocketFactory);
  Mockito.when(schemePortResolver.resolve(host)).thenReturn(443);
  Mockito.when(sslSocketFactory.createSocket(Mockito.<HttpContext>any())).thenReturn(socket);
  Mockito.when(sslSocketFactory.createLayeredSocket(Mockito.<Socket>any(),Mockito.eq("somehost"),Mockito.eq(443),Mockito.<HttpContext>any())).thenReturn(socket);
  connectionOperator.upgrade(conn,host,context);
  Mockito.verify(conn).bind(socket);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ConnectTimeoutException.class) public void testConnectTimeout() throws Exception {
  final HttpContext context=new BasicHttpContext();
  final HttpHost host=new HttpHost("somehost");
  final InetAddress ip1=InetAddress.getByAddress(new byte[]{10,0,0,1});
  final InetAddress ip2=InetAddress.getByAddress(new byte[]{10,0,0,2});
  Mockito.when(dnsResolver.resolve("somehost")).thenReturn(new InetAddress[]{ip1,ip2});
  Mockito.when(socketFactoryRegistry.lookup("http")).thenReturn(plainSocketFactory);
  Mockito.when(schemePortResolver.resolve(host)).thenReturn(80);
  Mockito.when(plainSocketFactory.createSocket(Mockito.<HttpContext>any())).thenReturn(socket);
  Mockito.when(plainSocketFactory.connectSocket(Mockito.anyInt(),Mockito.<Socket>any(),Mockito.<HttpHost>any(),Mockito.<InetSocketAddress>any(),Mockito.<InetSocketAddress>any(),Mockito.<HttpContext>any())).thenThrow(new SocketTimeoutException());
  connectionOperator.connect(conn,host,null,1000,SocketConfig.DEFAULT,context);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=UnsupportedSchemeException.class) public void testUpgradeUpsupportedScheme() throws Exception {
  final HttpContext context=new BasicHttpContext();
  final HttpHost host=new HttpHost("somehost",-1,"httpsssss");
  Mockito.when(socketFactoryRegistry.lookup("http")).thenReturn(plainSocketFactory);
  connectionOperator.upgrade(conn,host,context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.io.TestPoolingHttpClientConnectionManager </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=InterruptedException.class) public void testLeaseFutureCancelled() throws Exception {
  final HttpHost target=new HttpHost("localhost",80);
  final HttpRoute route=new HttpRoute(target);
  final CPoolEntry entry=new CPoolEntry(LogFactory.getLog(getClass()),"id",route,conn,-1,TimeUnit.MILLISECONDS);
  entry.markRouteComplete();
  Mockito.when(future.isCancelled()).thenReturn(Boolean.TRUE);
  Mockito.when(future.get(1,TimeUnit.SECONDS)).thenReturn(entry);
  Mockito.when(pool.lease(route,null,null)).thenReturn(future);
  final ConnectionRequest connRequest1=mgr.requestConnection(route,null);
  connRequest1.get(1,TimeUnit.SECONDS);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ConnectionPoolTimeoutException.class) public void testLeaseFutureTimeout() throws Exception {
  final HttpHost target=new HttpHost("localhost",80);
  final HttpRoute route=new HttpRoute(target);
  Mockito.when(future.isCancelled()).thenReturn(Boolean.TRUE);
  Mockito.when(future.get(1,TimeUnit.SECONDS)).thenThrow(new TimeoutException());
  Mockito.when(pool.lease(route,null,null)).thenReturn(future);
  final ConnectionRequest connRequest1=mgr.requestConnection(route,null);
  connRequest1.get(1,TimeUnit.SECONDS);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.protocol.TestDefaultRedirectStrategy </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ProtocolException.class) public void testCreateLocationURIInvalid() throws Exception {
  final DefaultRedirectStrategy redirectStrategy=new DefaultRedirectStrategy();
  redirectStrategy.createLocationURI(":::::::");
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ProtocolException.class) public void testGetLocationUriInvalidLocation() throws Exception {
  final DefaultRedirectStrategy redirectStrategy=new DefaultRedirectStrategy();
  final HttpClientContext context=HttpClientContext.create();
  final HttpGet httpget=new HttpGet("http://localhost/");
  final HttpResponse response=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_MOVED_TEMPORARILY,"Redirect");
  response.addHeader("Location","http://localhost/not valid");
  redirectStrategy.getLocationURI(httpget,response,context);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=HttpException.class) public void testGetLocationUriMissingHeader() throws Exception {
  final DefaultRedirectStrategy redirectStrategy=new DefaultRedirectStrategy();
  final HttpClientContext context=HttpClientContext.create();
  final HttpGet httpget=new HttpGet("http://localhost/");
  final HttpResponse response=new BasicHttpResponse(HttpVersion.HTTP_1_1,HttpStatus.SC_MOVED_TEMPORARILY,"Redirect");
  redirectStrategy.getLocationURI(httpget,response,context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.routing.TestDefaultRoutePlanner </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ProtocolException.class) public void testNullTarget() throws Exception {
  final HttpRequest request=new BasicHttpRequest("GET","/",HttpVersion.HTTP_1_1);
  final HttpContext context=new BasicHttpContext();
  routePlanner.determineRoute(null,request,context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.routing.TestRouteDirector </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testIllegal(){
  final HttpRouteDirector rowdy=new BasicRouteDirector();
  final HttpRoute route=new HttpRoute(TARGET1);
  rowdy.nextStep(null,route);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.sync.TestCloseableHttpClient </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testExecuteRequestInvalidHost() throws Exception {
  final HttpGet httpget=new HttpGet("http://_/stuff");
  client.execute(httpget);
  Mockito.verify(client).doExecute(Mockito.eq(new HttpHost("_",-1,"http")),Mockito.same(httpget),(HttpContext)Mockito.isNull());
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testExecuteRequestRelativeURI() throws Exception {
  final HttpGet httpget=new HttpGet("/stuff");
  client.execute(httpget);
  Mockito.verify(client).doExecute((HttpHost)Mockito.isNull(),Mockito.same(httpget),(HttpContext)Mockito.isNull());
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @SuppressWarnings("unchecked") public void testExecuteRequestHandleResponse() throws Exception {
  final HttpGet httpget=new HttpGet("https://somehost:444/stuff");
  Mockito.when(client.doExecute(new HttpHost("somehost",444,"https"),httpget,null)).thenReturn(response);
  final ResponseHandler<HttpResponse> handler=Mockito.mock(ResponseHandler.class);
  client.execute(httpget,handler);
  Mockito.verify(client).doExecute(Mockito.eq(new HttpHost("somehost",444,"https")),Mockito.same(httpget),(HttpContext)Mockito.isNull());
  Mockito.verify(handler).handleResponse(response);
  Mockito.verify(content).close();
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ClientProtocolException.class) public void testExecuteRequestInvalidHost2() throws Exception {
  final HttpGet httpget=new HttpGet("http://@/stuff");
  client.execute(httpget);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testExecuteRequestAbsoluteURI() throws Exception {
  final HttpGet httpget=new HttpGet("https://somehost:444/stuff");
  client.execute(httpget);
  Mockito.verify(client).doExecute(Mockito.eq(new HttpHost("somehost",444,"https")),Mockito.same(httpget),(HttpContext)Mockito.isNull());
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RuntimeException.class) @SuppressWarnings("unchecked") public void testExecuteRequestHandleResponseHttpException() throws Exception {
  final HttpGet httpget=new HttpGet("https://somehost:444/stuff");
  Mockito.when(client.doExecute(new HttpHost("somehost",444,"https"),httpget,null)).thenReturn(response);
  final ResponseHandler<HttpResponse> handler=Mockito.mock(ResponseHandler.class);
  Mockito.when(handler.handleResponse(response)).thenThrow(new RuntimeException());
  try {
    client.execute(httpget,handler);
  }
 catch (  final RuntimeException ex) {
    Mockito.verify(client).doExecute(Mockito.eq(new HttpHost("somehost",444,"https")),Mockito.same(httpget),(HttpContext)Mockito.isNull());
    Mockito.verify(response).close();
    throw ex;
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IOException.class) @SuppressWarnings("unchecked") public void testExecuteRequestHandleResponseIOException() throws Exception {
  final HttpGet httpget=new HttpGet("https://somehost:444/stuff");
  Mockito.when(client.doExecute(new HttpHost("somehost",444,"https"),httpget,null)).thenReturn(response);
  final ResponseHandler<HttpResponse> handler=Mockito.mock(ResponseHandler.class);
  Mockito.when(handler.handleResponse(response)).thenThrow(new IOException());
  try {
    client.execute(httpget,handler);
  }
 catch (  final IOException ex) {
    Mockito.verify(client).doExecute(Mockito.eq(new HttpHost("somehost",444,"https")),Mockito.same(httpget),(HttpContext)Mockito.isNull());
    Mockito.verify(response).close();
    throw ex;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.sync.TestFutureRequestExecutionService </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=TimeoutException.class) public void shouldTimeout() throws InterruptedException, ExecutionException, TimeoutException {
  blocked.set(true);
  final HttpRequestFutureTask<Boolean> task=httpAsyncClientWithFuture.execute(new HttpGet(uri),HttpClientContext.create(),new OkidokiHandler());
  task.get(10,TimeUnit.MILLISECONDS);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=CancellationException.class) public void shouldCancel() throws InterruptedException, ExecutionException {
  final HttpRequestFutureTask<Boolean> task=httpAsyncClientWithFuture.execute(new HttpGet(uri),HttpClientContext.create(),new OkidokiHandler());
  task.cancel(true);
  task.get();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.sync.TestInternalHttpClient </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClientCloseIOException() throws Exception {
  Mockito.doThrow(new IOException()).when(closeable1).close();
  client.close();
  Mockito.verify(closeable1).close();
  Mockito.verify(closeable2).close();
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ClientProtocolException.class) public void testExecuteHttpException() throws Exception {
  final HttpGet httpget=new HttpGet("http://somehost/stuff");
  final HttpRoute route=new HttpRoute(new HttpHost("somehost",80));
  Mockito.when(routePlanner.determineRoute(Mockito.eq(new HttpHost("somehost")),Mockito.<HttpRequestWrapper>any(),Mockito.<HttpClientContext>any())).thenReturn(route);
  Mockito.when(execChain.execute(Mockito.same(route),Mockito.<HttpRequestWrapper>any(),Mockito.<HttpClientContext>any(),Mockito.same(httpget))).thenThrow(new HttpException());
  client.execute(httpget);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClientClose() throws Exception {
  client.close();
  Mockito.verify(closeable1).close();
  Mockito.verify(closeable2).close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.sync.TestMainClientExec </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=HttpException.class) public void testEstablishRouteViaProxyTunnelMultipleHops() throws Exception {
  final HttpHost proxy1=new HttpHost("this",8888);
  final HttpHost proxy2=new HttpHost("that",8888);
  final HttpRoute route=new HttpRoute(target,null,new HttpHost[]{proxy1,proxy2},true,RouteInfo.TunnelType.TUNNELLED,RouteInfo.LayerType.LAYERED);
  final HttpClientContext context=new HttpClientContext();
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  Mockito.when(managedConn.isOpen()).thenReturn(Boolean.TRUE);
  mainClientExec.establishRoute(managedConn,route,request,context);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSocketTimeoutExistingConnection() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpClientContext context=new HttpClientContext();
  final RequestConfig config=RequestConfig.custom().setSocketTimeout(3000).build();
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  context.setRequestConfig(config);
  final HttpResponse response=new BasicHttpResponse(HttpVersion.HTTP_1_1,200,"OK");
  Mockito.when(managedConn.isOpen()).thenReturn(true);
  Mockito.when(requestExecutor.execute(Mockito.same(request),Mockito.<HttpClientConnection>any(),Mockito.<HttpClientContext>any())).thenReturn(response);
  mainClientExec.execute(route,request,context,execAware);
  Mockito.verify(managedConn).setSocketTimeout(3000);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEstablishRouteViaProxyTunnelRetryOnAuthChallengePersistentConnection() throws Exception {
  final HttpRoute route=new HttpRoute(target,null,proxy,true);
  final HttpClientContext context=new HttpClientContext();
  final RequestConfig config=RequestConfig.custom().setConnectTimeout(567).build();
  context.setRequestConfig(config);
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  final HttpResponse response1=new BasicHttpResponse(HttpVersion.HTTP_1_1,407,"Huh?");
  response1.setHeader(HttpHeaders.PROXY_AUTHENTICATE,"Basic realm=test");
  final InputStream instream1=Mockito.spy(new ByteArrayInputStream(new byte[]{1,2,3}));
  response1.setEntity(EntityBuilder.create().setStream(instream1).build());
  final HttpResponse response2=new BasicHttpResponse(HttpVersion.HTTP_1_1,200,"OK");
  final BasicCredentialsProvider credentialsProvider=new BasicCredentialsProvider();
  credentialsProvider.setCredentials(new AuthScope(proxy),new UsernamePasswordCredentials("user","pass".toCharArray()));
  context.setCredentialsProvider(credentialsProvider);
  Mockito.when(managedConn.isOpen()).thenReturn(Boolean.TRUE);
  Mockito.when(reuseStrategy.keepAlive(Mockito.same(request),Mockito.<HttpResponse>any(),Mockito.<HttpClientContext>any())).thenReturn(Boolean.TRUE);
  Mockito.when(requestExecutor.execute(Mockito.<HttpRequest>any(),Mockito.<HttpClientConnection>any(),Mockito.<HttpClientContext>any())).thenReturn(response1,response2);
  Mockito.when(proxyAuthStrategy.select(Mockito.eq(ChallengeType.PROXY),Mockito.<Map<String,AuthChallenge>>any(),Mockito.<HttpClientContext>any())).thenReturn(Collections.<AuthScheme>singletonList(new BasicScheme()));
  mainClientExec.establishRoute(managedConn,route,request,context);
  Mockito.verify(connManager).connect(managedConn,route,567,context);
  Mockito.verify(connManager).routeComplete(managedConn,route,context);
  Mockito.verify(instream1).close();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEstablishRouteDirectProxy() throws Exception {
  final HttpRoute route=new HttpRoute(target,null,proxy,false);
  final HttpClientContext context=new HttpClientContext();
  final RequestConfig config=RequestConfig.custom().setConnectTimeout(567).build();
  context.setRequestConfig(config);
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  Mockito.when(managedConn.isOpen()).thenReturn(Boolean.TRUE);
  mainClientExec.establishRoute(managedConn,route,request,context);
  Mockito.verify(connManager).connect(managedConn,route,567,context);
  Mockito.verify(connManager).routeComplete(managedConn,route,context);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RequestAbortedException.class) public void testExecConnectionRequestFailed() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpClientContext context=new HttpClientContext();
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  Mockito.when(connRequest.get(Mockito.anyInt(),Mockito.<TimeUnit>any())).thenThrow(new ExecutionException("Opppsie",null));
  mainClientExec.execute(route,request,context,execAware);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSocketTimeoutReset() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpClientContext context=new HttpClientContext();
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  final HttpResponse response=new BasicHttpResponse(HttpVersion.HTTP_1_1,200,"OK");
  Mockito.when(managedConn.isOpen()).thenReturn(Boolean.TRUE);
  Mockito.when(requestExecutor.execute(Mockito.same(request),Mockito.<HttpClientConnection>any(),Mockito.<HttpClientContext>any())).thenReturn(response);
  mainClientExec.execute(route,request,context,execAware);
  Mockito.verify(managedConn,Mockito.never()).setSocketTimeout(Mockito.anyInt());
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEstablishRouteViaProxyTunnelRetryOnAuthChallengeNonPersistentConnection() throws Exception {
  final HttpRoute route=new HttpRoute(target,null,proxy,true);
  final HttpClientContext context=new HttpClientContext();
  final RequestConfig config=RequestConfig.custom().setConnectTimeout(567).build();
  context.setRequestConfig(config);
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  final HttpResponse response1=new BasicHttpResponse(HttpVersion.HTTP_1_1,407,"Huh?");
  response1.setHeader(HttpHeaders.PROXY_AUTHENTICATE,"Basic realm=test");
  final InputStream instream1=Mockito.spy(new ByteArrayInputStream(new byte[]{1,2,3}));
  response1.setEntity(EntityBuilder.create().setStream(instream1).build());
  final HttpResponse response2=new BasicHttpResponse(HttpVersion.HTTP_1_1,200,"OK");
  final BasicCredentialsProvider credentialsProvider=new BasicCredentialsProvider();
  credentialsProvider.setCredentials(new AuthScope(proxy),new UsernamePasswordCredentials("user","pass".toCharArray()));
  context.setCredentialsProvider(credentialsProvider);
  Mockito.when(managedConn.isOpen()).thenReturn(Boolean.TRUE);
  Mockito.when(reuseStrategy.keepAlive(Mockito.same(request),Mockito.<HttpResponse>any(),Mockito.<HttpClientContext>any())).thenReturn(Boolean.FALSE);
  Mockito.when(requestExecutor.execute(Mockito.<HttpRequest>any(),Mockito.<HttpClientConnection>any(),Mockito.<HttpClientContext>any())).thenReturn(response1,response2);
  Mockito.when(proxyAuthStrategy.select(Mockito.eq(ChallengeType.PROXY),Mockito.<Map<String,AuthChallenge>>any(),Mockito.<HttpClientContext>any())).thenReturn(Collections.<AuthScheme>singletonList(new BasicScheme()));
  mainClientExec.establishRoute(managedConn,route,request,context);
  Mockito.verify(connManager).connect(managedConn,route,567,context);
  Mockito.verify(connManager).routeComplete(managedConn,route,context);
  Mockito.verify(instream1,Mockito.never()).close();
  Mockito.verify(managedConn).close();
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NonRepeatableRequestException.class) public void testExecEntityEnclosingRequest() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpClientContext context=new HttpClientContext();
  final HttpPost post=new HttpPost("http://bar/test");
  final InputStream instream0=new ByteArrayInputStream(new byte[]{1,2,3});
  post.setEntity(EntityBuilder.create().setStream(instream0).build());
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(post,target);
  final HttpResponse response1=new BasicHttpResponse(HttpVersion.HTTP_1_1,401,"Huh?");
  response1.setHeader(HttpHeaders.WWW_AUTHENTICATE,"Basic realm=test");
  final InputStream instream1=new ByteArrayInputStream(new byte[]{1,2,3});
  response1.setEntity(EntityBuilder.create().setStream(instream1).build());
  final BasicCredentialsProvider credentialsProvider=new BasicCredentialsProvider();
  credentialsProvider.setCredentials(new AuthScope(target),new UsernamePasswordCredentials("user","pass".toCharArray()));
  context.setCredentialsProvider(credentialsProvider);
  Mockito.when(managedConn.isOpen()).thenReturn(Boolean.TRUE);
  Mockito.when(managedConn.isStale()).thenReturn(Boolean.FALSE);
  Mockito.when(requestExecutor.execute(Mockito.same(request),Mockito.<HttpClientConnection>any(),Mockito.<HttpClientContext>any())).thenAnswer(new Answer<HttpResponse>(){
    @Override public HttpResponse answer(    final InvocationOnMock invocationOnMock) throws Throwable {
      final Object[] args=invocationOnMock.getArguments();
      final HttpRequest requestEE=(HttpRequest)args[0];
      requestEE.getEntity().writeTo(new ByteArrayOutputStream());
      return response1;
    }
  }
);
  Mockito.when(reuseStrategy.keepAlive(Mockito.same(request),Mockito.<HttpResponse>any(),Mockito.<HttpClientContext>any())).thenReturn(Boolean.TRUE);
  Mockito.when(targetAuthStrategy.select(Mockito.eq(ChallengeType.TARGET),Mockito.<Map<String,AuthChallenge>>any(),Mockito.<HttpClientContext>any())).thenReturn(Collections.<AuthScheme>singletonList(new BasicScheme()));
  mainClientExec.execute(route,request,context,execAware);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RequestAbortedException.class) public void testExecAbortedPriorToConnectionLease() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpClientContext context=new HttpClientContext();
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  Mockito.when(managedConn.isOpen()).thenReturn(Boolean.FALSE);
  Mockito.when(execAware.isAborted()).thenReturn(Boolean.TRUE);
  try {
    mainClientExec.execute(route,request,context,execAware);
  }
 catch (  final IOException ex) {
    Mockito.verify(connRequest,Mockito.times(1)).cancel();
    throw ex;
  }
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEstablishDirectRoute() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpClientContext context=new HttpClientContext();
  final RequestConfig config=RequestConfig.custom().setConnectTimeout(567).build();
  context.setRequestConfig(config);
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  Mockito.when(managedConn.isOpen()).thenReturn(Boolean.TRUE);
  mainClientExec.establishRoute(managedConn,route,request,context);
  Mockito.verify(connManager).connect(managedConn,route,567,context);
  Mockito.verify(connManager).routeComplete(managedConn,route,context);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RequestAbortedException.class) public void testExecAbortedPriorToRequestExecution() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpClientContext context=new HttpClientContext();
  final RequestConfig config=RequestConfig.custom().setConnectTimeout(567).setConnectionRequestTimeout(345).build();
  context.setRequestConfig(config);
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  Mockito.when(managedConn.isOpen()).thenReturn(Boolean.FALSE);
  Mockito.when(execAware.isAborted()).thenReturn(Boolean.FALSE,Boolean.FALSE,Boolean.TRUE);
  try {
    mainClientExec.execute(route,request,context,execAware);
  }
 catch (  final IOException ex) {
    Mockito.verify(connRequest,Mockito.times(1)).get(345,TimeUnit.MILLISECONDS);
    Mockito.verify(connManager,Mockito.times(1)).connect(managedConn,route,567,context);
    Mockito.verify(requestExecutor,Mockito.never()).execute(Mockito.same(request),Mockito.<HttpClientConnection>any(),Mockito.<HttpClientContext>any());
    throw ex;
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RequestAbortedException.class) public void testExecAbortedPriorToConnectionSetup() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpClientContext context=new HttpClientContext();
  final RequestConfig config=RequestConfig.custom().setConnectionRequestTimeout(345).build();
  context.setRequestConfig(config);
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  Mockito.when(managedConn.isOpen()).thenReturn(Boolean.FALSE);
  Mockito.when(execAware.isAborted()).thenReturn(Boolean.FALSE,Boolean.TRUE);
  try {
    mainClientExec.execute(route,request,context,execAware);
  }
 catch (  final IOException ex) {
    Mockito.verify(connRequest,Mockito.times(1)).get(345,TimeUnit.MILLISECONDS);
    Mockito.verify(execAware,Mockito.times(2)).setCancellable(Mockito.<Cancellable>any());
    Mockito.verify(connManager,Mockito.never()).connect(Mockito.same(managedConn),Mockito.<HttpRoute>any(),Mockito.anyInt(),Mockito.<HttpContext>any());
    throw ex;
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=HttpException.class) public void testEstablishRouteViaProxyTunnelUnexpectedResponse() throws Exception {
  final HttpRoute route=new HttpRoute(target,null,proxy,true);
  final HttpClientContext context=new HttpClientContext();
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  final HttpResponse response=new BasicHttpResponse(HttpVersion.HTTP_1_1,101,"Lost");
  Mockito.when(managedConn.isOpen()).thenReturn(Boolean.TRUE);
  Mockito.when(requestExecutor.execute(Mockito.<HttpRequest>any(),Mockito.<HttpClientConnection>any(),Mockito.<HttpClientContext>any())).thenReturn(response);
  mainClientExec.establishRoute(managedConn,route,request,context);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RuntimeException.class) public void testExecRuntimeException() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpClientContext context=new HttpClientContext();
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  Mockito.when(requestExecutor.execute(Mockito.<HttpRequest>any(),Mockito.<HttpClientConnection>any(),Mockito.<HttpClientContext>any())).thenThrow(new RuntimeException("Ka-boom"));
  try {
    mainClientExec.execute(route,request,context,execAware);
  }
 catch (  final Exception ex) {
    Mockito.verify(connManager).releaseConnection(managedConn,null,0,TimeUnit.MILLISECONDS);
    throw ex;
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=InterruptedIOException.class) public void testExecConnectionShutDown() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpClientContext context=new HttpClientContext();
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  Mockito.when(requestExecutor.execute(Mockito.<HttpRequest>any(),Mockito.<HttpClientConnection>any(),Mockito.<HttpClientContext>any())).thenThrow(new ConnectionShutdownException());
  mainClientExec.execute(route,request,context,execAware);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=HttpException.class) public void testExecHttpException() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpClientContext context=new HttpClientContext();
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  Mockito.when(requestExecutor.execute(Mockito.<HttpRequest>any(),Mockito.<HttpClientConnection>any(),Mockito.<HttpClientContext>any())).thenThrow(new HttpException("Ka-boom"));
  try {
    mainClientExec.execute(route,request,context,execAware);
  }
 catch (  final Exception ex) {
    Mockito.verify(connManager).releaseConnection(managedConn,null,0,TimeUnit.MILLISECONDS);
    throw ex;
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IOException.class) public void testExecIOException() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpClientContext context=new HttpClientContext();
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  Mockito.when(requestExecutor.execute(Mockito.<HttpRequest>any(),Mockito.<HttpClientConnection>any(),Mockito.<HttpClientContext>any())).thenThrow(new IOException("Ka-boom"));
  try {
    mainClientExec.execute(route,request,context,execAware);
  }
 catch (  final Exception ex) {
    Mockito.verify(connManager).releaseConnection(managedConn,null,0,TimeUnit.MILLISECONDS);
    throw ex;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.sync.TestMinimalClientExec </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=InterruptedIOException.class) public void testExecConnectionShutDown() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpClientContext context=new HttpClientContext();
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  Mockito.when(requestExecutor.execute(Mockito.<HttpRequest>any(),Mockito.<HttpClientConnection>any(),Mockito.<HttpClientContext>any())).thenThrow(new ConnectionShutdownException());
  minimalClientExec.execute(route,request,context,execAware);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RuntimeException.class) public void testExecRuntimeException() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpClientContext context=new HttpClientContext();
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  Mockito.when(requestExecutor.execute(Mockito.<HttpRequest>any(),Mockito.<HttpClientConnection>any(),Mockito.<HttpClientContext>any())).thenThrow(new RuntimeException("Ka-boom"));
  try {
    minimalClientExec.execute(route,request,context,execAware);
  }
 catch (  final Exception ex) {
    Mockito.verify(connManager).releaseConnection(managedConn,null,0,TimeUnit.MILLISECONDS);
    throw ex;
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IOException.class) public void testExecIOException() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpClientContext context=new HttpClientContext();
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  Mockito.when(requestExecutor.execute(Mockito.<HttpRequest>any(),Mockito.<HttpClientConnection>any(),Mockito.<HttpClientContext>any())).thenThrow(new IOException("Ka-boom"));
  try {
    minimalClientExec.execute(route,request,context,execAware);
  }
 catch (  final Exception ex) {
    Mockito.verify(connManager).releaseConnection(managedConn,null,0,TimeUnit.MILLISECONDS);
    throw ex;
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=HttpException.class) public void testExecHttpException() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpClientContext context=new HttpClientContext();
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  Mockito.when(requestExecutor.execute(Mockito.<HttpRequest>any(),Mockito.<HttpClientConnection>any(),Mockito.<HttpClientContext>any())).thenThrow(new HttpException("Ka-boom"));
  try {
    minimalClientExec.execute(route,request,context,execAware);
  }
 catch (  final Exception ex) {
    Mockito.verify(connManager).releaseConnection(managedConn,null,0,TimeUnit.MILLISECONDS);
    throw ex;
  }
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSocketTimeoutExistingConnection() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpClientContext context=new HttpClientContext();
  final RequestConfig config=RequestConfig.custom().setSocketTimeout(3000).build();
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  context.setRequestConfig(config);
  final HttpResponse response=new BasicHttpResponse(HttpVersion.HTTP_1_1,200,"OK");
  Mockito.when(managedConn.isOpen()).thenReturn(true);
  Mockito.when(requestExecutor.execute(Mockito.same(request),Mockito.<HttpClientConnection>any(),Mockito.<HttpClientContext>any())).thenReturn(response);
  minimalClientExec.execute(route,request,context,execAware);
  Mockito.verify(managedConn).setSocketTimeout(3000);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RequestAbortedException.class) public void testExecConnectionRequestFailed() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpClientContext context=new HttpClientContext();
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  Mockito.when(connRequest.get(Mockito.anyInt(),Mockito.<TimeUnit>any())).thenThrow(new ExecutionException("Opppsie",null));
  minimalClientExec.execute(route,request,context,execAware);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RequestAbortedException.class) public void testExecAbortedPriorToConnectionLease() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpClientContext context=new HttpClientContext();
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  Mockito.when(managedConn.isOpen()).thenReturn(Boolean.FALSE);
  Mockito.when(execAware.isAborted()).thenReturn(Boolean.TRUE);
  try {
    minimalClientExec.execute(route,request,context,execAware);
  }
 catch (  final IOException ex) {
    Mockito.verify(connRequest,Mockito.times(1)).cancel();
    throw ex;
  }
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSocketTimeoutReset() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpClientContext context=new HttpClientContext();
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("http://bar/test"),target);
  final HttpResponse response=new BasicHttpResponse(HttpVersion.HTTP_1_1,200,"OK");
  Mockito.when(managedConn.isOpen()).thenReturn(Boolean.TRUE);
  Mockito.when(requestExecutor.execute(Mockito.same(request),Mockito.<HttpClientConnection>any(),Mockito.<HttpClientContext>any())).thenReturn(response);
  minimalClientExec.execute(route,request,context,execAware);
  Mockito.verify(managedConn,Mockito.never()).setSocketTimeout(Mockito.anyInt());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.sync.TestProtocolExec </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=HttpException.class) public void testPostProcessHttpException() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("/test"),target);
  final HttpClientContext context=HttpClientContext.create();
  final CloseableHttpResponse response=Mockito.mock(CloseableHttpResponse.class);
  Mockito.when(requestExecutor.execute(Mockito.eq(route),Mockito.<HttpRequestWrapper>any(),Mockito.<HttpClientContext>any(),Mockito.<HttpExecutionAware>any())).thenReturn(response);
  Mockito.doThrow(new HttpException("Ooopsie")).when(httpProcessor).process(Mockito.same(response),Mockito.<HttpContext>any());
  try {
    protocolExec.execute(route,request,context,execAware);
  }
 catch (  final Exception ex) {
    Mockito.verify(response).close();
    throw ex;
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RuntimeException.class) public void testPostProcessRuntimeException() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("/test"),target);
  final HttpClientContext context=HttpClientContext.create();
  final CloseableHttpResponse response=Mockito.mock(CloseableHttpResponse.class);
  Mockito.when(requestExecutor.execute(Mockito.eq(route),Mockito.<HttpRequestWrapper>any(),Mockito.<HttpClientContext>any(),Mockito.<HttpExecutionAware>any())).thenReturn(response);
  Mockito.doThrow(new RuntimeException("Ooopsie")).when(httpProcessor).process(Mockito.same(response),Mockito.<HttpContext>any());
  try {
    protocolExec.execute(route,request,context,execAware);
  }
 catch (  final Exception ex) {
    Mockito.verify(response).close();
    throw ex;
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IOException.class) public void testPostProcessIOException() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("/test"),target);
  final HttpClientContext context=HttpClientContext.create();
  final CloseableHttpResponse response=Mockito.mock(CloseableHttpResponse.class);
  Mockito.when(requestExecutor.execute(Mockito.eq(route),Mockito.<HttpRequestWrapper>any(),Mockito.<HttpClientContext>any(),Mockito.<HttpExecutionAware>any())).thenReturn(response);
  Mockito.doThrow(new IOException("Ooopsie")).when(httpProcessor).process(Mockito.same(response),Mockito.<HttpContext>any());
  try {
    protocolExec.execute(route,request,context,execAware);
  }
 catch (  final Exception ex) {
    Mockito.verify(response).close();
    throw ex;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.sync.TestRedirectExec </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=HttpException.class) public void testRelativeRedirect() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpGet get=new HttpGet("/test");
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(get,target);
  final HttpClientContext context=HttpClientContext.create();
  final CloseableHttpResponse response1=Mockito.mock(CloseableHttpResponse.class);
  final CloseableHttpResponse response2=Mockito.mock(CloseableHttpResponse.class);
  final HttpGet redirect=new HttpGet("/redirect");
  Mockito.when(requestExecutor.execute(Mockito.eq(route),Mockito.same(request),Mockito.<HttpClientContext>any(),Mockito.<HttpExecutionAware>any())).thenReturn(response1);
  Mockito.when(requestExecutor.execute(Mockito.eq(route),HttpRequestWrapperMatcher.same(redirect),Mockito.<HttpClientContext>any(),Mockito.<HttpExecutionAware>any())).thenReturn(response2);
  Mockito.when(redirectStrategy.isRedirected(Mockito.same(get),Mockito.same(response1),Mockito.<HttpClientContext>any())).thenReturn(Boolean.TRUE);
  Mockito.when(redirectStrategy.getRedirect(Mockito.same(get),Mockito.same(response1),Mockito.<HttpClientContext>any())).thenReturn(redirect);
  Mockito.when(httpRoutePlanner.determineRoute(Mockito.eq(target),Mockito.<HttpRequestWrapper>any(),Mockito.<HttpClientContext>any())).thenReturn(route);
  redirectExec.execute(route,request,context,execAware);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ProtocolException.class) public void testRedirectProtocolException() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpGet get=new HttpGet("/test");
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(get,target);
  final HttpClientContext context=HttpClientContext.create();
  final CloseableHttpResponse response1=Mockito.mock(CloseableHttpResponse.class);
  final InputStream instream1=Mockito.spy(new ByteArrayInputStream(new byte[]{1,2,3}));
  final HttpEntity entity1=EntityBuilder.create().setStream(instream1).build();
  Mockito.when(response1.getEntity()).thenReturn(entity1);
  Mockito.when(requestExecutor.execute(Mockito.eq(route),Mockito.same(request),Mockito.<HttpClientContext>any(),Mockito.<HttpExecutionAware>any())).thenReturn(response1);
  Mockito.when(redirectStrategy.isRedirected(Mockito.same(get),Mockito.same(response1),Mockito.<HttpClientContext>any())).thenReturn(Boolean.TRUE);
  Mockito.doThrow(new ProtocolException("Oppsie")).when(redirectStrategy).getRedirect(Mockito.same(get),Mockito.same(response1),Mockito.<HttpClientContext>any());
  try {
    redirectExec.execute(route,request,context,execAware);
  }
 catch (  final Exception ex) {
    Mockito.verify(instream1).close();
    Mockito.verify(response1).close();
    throw ex;
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RedirectException.class) public void testMaxRedirect() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpGet get=new HttpGet("/test");
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(get,target);
  final HttpClientContext context=HttpClientContext.create();
  final RequestConfig config=RequestConfig.custom().setRedirectsEnabled(true).setMaxRedirects(3).build();
  context.setRequestConfig(config);
  final CloseableHttpResponse response1=Mockito.mock(CloseableHttpResponse.class);
  final HttpGet redirect=new HttpGet("http://localhost:80/redirect");
  Mockito.when(requestExecutor.execute(Mockito.eq(route),Mockito.<HttpRequestWrapper>any(),Mockito.<HttpClientContext>any(),Mockito.<HttpExecutionAware>any())).thenReturn(response1);
  Mockito.when(redirectStrategy.isRedirected(Mockito.<HttpRequestWrapper>any(),Mockito.<HttpResponse>any(),Mockito.<HttpClientContext>any())).thenReturn(Boolean.TRUE);
  Mockito.when(redirectStrategy.getRedirect(Mockito.<HttpRequestWrapper>any(),Mockito.<HttpResponse>any(),Mockito.<HttpClientContext>any())).thenReturn(redirect);
  Mockito.when(httpRoutePlanner.determineRoute(Mockito.eq(target),Mockito.<HttpRequestWrapper>any(),Mockito.<HttpClientContext>any())).thenReturn(route);
  redirectExec.execute(route,request,context,execAware);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RuntimeException.class) public void testRedirectRuntimeException() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpGet get=new HttpGet("/test");
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(get,target);
  final HttpClientContext context=HttpClientContext.create();
  final CloseableHttpResponse response1=Mockito.mock(CloseableHttpResponse.class);
  Mockito.when(requestExecutor.execute(Mockito.eq(route),Mockito.same(request),Mockito.<HttpClientContext>any(),Mockito.<HttpExecutionAware>any())).thenReturn(response1);
  Mockito.when(redirectStrategy.isRedirected(Mockito.same(request),Mockito.same(response1),Mockito.<HttpClientContext>any())).thenReturn(Boolean.TRUE);
  Mockito.doThrow(new RuntimeException("Oppsie")).when(redirectStrategy.getRedirect(Mockito.same(request),Mockito.same(response1),Mockito.<HttpClientContext>any()));
  try {
    redirectExec.execute(route,request,context,execAware);
  }
 catch (  final Exception ex) {
    Mockito.verify(response1).close();
    throw ex;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.sync.TestResponseEntityWrapper </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReusableEntityStreamClosed() throws Exception {
  Mockito.when(entity.isStreaming()).thenReturn(true);
  Mockito.when(connHolder.isReusable()).thenReturn(true);
  EntityUtils.consume(wrapper);
  Mockito.verify(instream,Mockito.times(1)).close();
  Mockito.verify(connHolder).releaseConnection();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEntityStreamClosedIOErrorAlreadyReleased() throws Exception {
  Mockito.when(entity.isStreaming()).thenReturn(true);
  Mockito.when(connHolder.isReusable()).thenReturn(true);
  Mockito.when(connHolder.isReleased()).thenReturn(true);
  Mockito.doThrow(new SocketException()).when(instream).close();
  EntityUtils.consume(wrapper);
  Mockito.verify(connHolder).close();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReusableEntityWriteTo() throws Exception {
  final OutputStream outstream=Mockito.mock(OutputStream.class);
  Mockito.when(entity.isStreaming()).thenReturn(true);
  Mockito.when(connHolder.isReusable()).thenReturn(true);
  wrapper.writeTo(outstream);
  Mockito.verify(connHolder).releaseConnection();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.sync.TestRetryExec </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NonRepeatableRequestException.class) public void testNonRepeatableRequest() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpPost post=new HttpPost("/test");
  post.setEntity(EntityBuilder.create().setStream(new ByteArrayInputStream(new byte[]{})).build());
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(post,target);
  final HttpClientContext context=HttpClientContext.create();
  Mockito.when(requestExecutor.execute(Mockito.eq(route),Mockito.same(request),Mockito.<HttpClientContext>any(),Mockito.<HttpExecutionAware>any())).thenAnswer(new Answer(){
    @Override public Object answer(    final InvocationOnMock invocationOnMock) throws Throwable {
      final Object[] args=invocationOnMock.getArguments();
      final HttpRequest req=(HttpRequest)args[1];
      req.getEntity().writeTo(new ByteArrayOutputStream());
      throw new IOException("Ka-boom");
    }
  }
);
  Mockito.when(retryHandler.retryRequest(Mockito.<HttpRequest>any(),Mockito.<IOException>any(),Mockito.eq(1),Mockito.<HttpContext>any())).thenReturn(Boolean.TRUE);
  try {
    retryExec.execute(route,request,context,execAware);
  }
 catch (  final IOException ex) {
    Mockito.verify(requestExecutor,Mockito.times(1)).execute(Mockito.eq(route),Mockito.same(request),Mockito.same(context),Mockito.same(execAware));
    throw ex;
  }
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IOException.class) public void testAbortedRequest() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpGet get=new HttpGet("/test");
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(get,target);
  final HttpClientContext context=HttpClientContext.create();
  Mockito.when(requestExecutor.execute(Mockito.eq(route),Mockito.same(request),Mockito.<HttpClientContext>any(),Mockito.<HttpExecutionAware>any())).thenThrow(new IOException("Ka-boom"));
  Mockito.when(execAware.isAborted()).thenReturn(Boolean.TRUE);
  try {
    retryExec.execute(route,request,context,execAware);
  }
 catch (  final IOException ex) {
    Mockito.verify(requestExecutor,Mockito.times(1)).execute(Mockito.eq(route),Mockito.same(request),Mockito.same(context),Mockito.same(execAware));
    Mockito.verify(retryHandler,Mockito.never()).retryRequest(Mockito.<HttpRequest>any(),Mockito.<IOException>any(),Mockito.anyInt(),Mockito.<HttpContext>any());
    throw ex;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.sync.TestServiceUnavailableRetryExec </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFundamentals() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpGet get=new HttpGet("/test");
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(get,target);
  final HttpClientContext context=HttpClientContext.create();
  final CloseableHttpResponse response=Mockito.mock(CloseableHttpResponse.class);
  Mockito.when(requestExecutor.execute(Mockito.eq(route),Mockito.same(request),Mockito.<HttpClientContext>any(),Mockito.<HttpExecutionAware>any())).thenReturn(response);
  Mockito.when(retryStrategy.retryRequest(Mockito.<HttpResponse>any(),Mockito.anyInt(),Mockito.<HttpContext>any())).thenReturn(Boolean.TRUE,Boolean.FALSE);
  Mockito.when(retryStrategy.getRetryInterval(Mockito.<HttpResponse>any(),Mockito.<HttpContext>any())).thenReturn(0L);
  retryExec.execute(route,request,context,execAware);
  Mockito.verify(requestExecutor,Mockito.times(2)).execute(Mockito.eq(route),Mockito.same(request),Mockito.same(context),Mockito.same(execAware));
  Mockito.verify(response,Mockito.times(1)).close();
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RuntimeException.class) public void testStrategyRuntimeException() throws Exception {
  final HttpRoute route=new HttpRoute(target);
  final HttpRequestWrapper request=HttpRequestWrapper.wrap(new HttpGet("/test"),target);
  final HttpClientContext context=HttpClientContext.create();
  final CloseableHttpResponse response=Mockito.mock(CloseableHttpResponse.class);
  Mockito.when(requestExecutor.execute(Mockito.eq(route),Mockito.<HttpRequestWrapper>any(),Mockito.<HttpClientContext>any(),Mockito.<HttpExecutionAware>any())).thenReturn(response);
  Mockito.doThrow(new RuntimeException("Ooopsie")).when(retryStrategy).retryRequest(Mockito.<HttpResponse>any(),Mockito.anyInt(),Mockito.<HttpContext>any());
  try {
    retryExec.execute(route,request,context,execAware);
  }
 catch (  final Exception ex) {
    Mockito.verify(response).close();
    throw ex;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.impl.win.TestWindowsNegotiateScheme </h4><pre class="type-19 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testNoInfiniteLoopOnSPNOutsideDomain() throws Exception {
  Assume.assumeTrue("Test can only be run on Windows",WinHttpClients.isWinAuthAvailable());
  final Registry<AuthSchemeProvider> authSchemeRegistry=RegistryBuilder.<AuthSchemeProvider>create().register(AuthSchemes.SPNEGO,new AuthSchemeProvider(){
    @Override public AuthScheme create(    final HttpContext context){
      return new WindowsNegotiateSchemeGetTokenFail(AuthSchemes.SPNEGO,"HTTP/example.com");
    }
  }
).build();
  final CloseableHttpClient customClient=HttpClientBuilder.create().setDefaultAuthSchemeRegistry(authSchemeRegistry).build();
  final HttpHost target=start();
  final HttpGet httpGet=new HttpGet("/");
  try (CloseableHttpResponse response=customClient.execute(target,httpGet)){
    EntityUtils.consume(response.getEntity());
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.methods.TestRequestBuilder </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCopyNull() throws Exception {
  RequestBuilder.copy(null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.osgi.impl.MimeExportedIT </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void useContentBody(){
  final HttpPost httppost=new HttpPost("http://localhost:8181/cxf/annotator/annotate");
  httppost.addHeader("Accept","application/json");
  final StringBody options=new StringBody("{}",ContentType.APPLICATION_JSON);
  final byte[] atData=new byte[]{1};
  final ByteArrayBody bab=new ByteArrayBody(atData,ContentType.APPLICATION_JSON,"at.json");
  final HttpEntity reqEntity=MultipartEntityBuilder.create().setContentType(ContentType.create("multipart/mixed")).addPart("options",options).addPart("text",bab).build();
  httppost.setEntity(reqEntity);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.osgi.impl.TestPropertiesUtils </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void toSingleString(){
  assertConverted("fallback to default value",null,String.class,"fallback to default value");
  assertConverted("use the passed value",new StringBuilder("use the passed value"),String.class,null);
  assertConverted("use the passed value","use the passed value",String.class,null);
  assertConverted("456789",456789,String.class,null);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void toInt(){
  assertConverted(123,null,int.class,123);
  assertConverted(123,null,Integer.class,123);
  assertConverted(456,"456",int.class,null);
  assertConverted(456,"456",Integer.class,null);
  assertConverted(789,"not an integer",int.class,789);
  assertConverted(789,"not an integer",Integer.class,789);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void toLong(){
  assertConverted(123l,null,long.class,123l);
  assertConverted(123l,null,Long.class,123l);
  assertConverted(456l,"456",long.class,null);
  assertConverted(456l,"456",Long.class,null);
  assertConverted(789l,"not a long",long.class,789l);
  assertConverted(789l,"not a long",Long.class,789l);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void toStringArray(){
  assertConvertedArray(new String[]{"fallback to default value"},null,String[].class,new String[]{"fallback to default value"});
  assertConvertedArray(new String[]{"a single string"},"a single string",String[].class,null);
  assertConvertedArray(new String[]{"null objects","will be ignored"},new Object[]{new StringBuilder("null objects"),null,new StringBuilder("will be ignored")},String[].class,null);
  assertConvertedArray(new String[]{"null objects","will be ignored"},new Object[]{"null objects",null,"will be ignored"},String[].class,null);
  assertConvertedArray(new String[]{"fallback to default value"},456789,String[].class,new String[]{"fallback to default value"});
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void toBoolean(){
  assertConverted(true,null,boolean.class,true);
  assertConverted(true,null,Boolean.class,true);
  assertConverted(false,"false",boolean.class,null);
  assertConverted(false,"false",Boolean.class,null);
  assertConverted(false,"not a boolean",boolean.class,true);
  assertConverted(false,"not a boolean",Boolean.class,true);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void toDouble(){
  assertConverted(123d,null,double.class,123d);
  assertConverted(123d,null,Double.class,123d);
  assertConverted(456d,"456",double.class,null);
  assertConverted(456d,"456",Double.class,null);
  assertConverted(789d,"not a double",double.class,789d);
  assertConverted(789d,"not a double",Double.class,789d);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.protocol.TestRequestAddCookies </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testContextParameterCheck() throws Exception {
  final HttpRequest request=new BasicHttpRequest("GET","/");
  final HttpRequestInterceptor interceptor=new RequestAddCookies();
  interceptor.process(request,null);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAuthScopeInvalidRequestURI() throws Exception {
  final HttpRequest request=new BasicHttpRequest("GET","crap:");
  final HttpRoute route=new HttpRoute(this.target,null,false);
  final HttpClientContext context=HttpClientContext.create();
  context.setAttribute(HttpCoreContext.HTTP_TARGET_HOST,this.target);
  context.setAttribute(HttpClientContext.HTTP_ROUTE,route);
  context.setAttribute(HttpClientContext.COOKIE_STORE,this.cookieStore);
  context.setAttribute(HttpClientContext.COOKIESPEC_REGISTRY,this.cookieSpecRegistry);
  final HttpRequestInterceptor interceptor=new RequestAddCookies();
  interceptor.process(request,context);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testRequestParameterCheck() throws Exception {
  final HttpClientContext context=HttpClientContext.create();
  final HttpRequestInterceptor interceptor=new RequestAddCookies();
  interceptor.process(null,context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.protocol.TestRequestClientConnControl </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testRequestParameterCheck() throws Exception {
  final HttpClientContext context=HttpClientContext.create();
  final HttpRequestInterceptor interceptor=new RequestClientConnControl();
  interceptor.process(null,context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.protocol.TestRequestDefaultHeaders </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testRequestParameterCheck() throws Exception {
  final HttpContext context=new BasicHttpContext();
  final HttpRequestInterceptor interceptor=new RequestDefaultHeaders();
  interceptor.process(null,context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.protocol.TestResponseContentEncoding </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=HttpException.class) public void testUnknownContentEncoding() throws Exception {
  final HttpResponse response=new BasicHttpResponse(HttpVersion.HTTP_1_1,200,"OK");
  final StringEntity original=new StringEntity("encoded stuff");
  original.setContentEncoding("whatever");
  response.setEntity(original);
  final HttpContext context=new BasicHttpContext();
  final HttpResponseInterceptor interceptor=new ResponseContentEncoding(false);
  interceptor.process(response,context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.protocol.TestResponseProcessCookies </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testResponseParameterCheck() throws Exception {
  final HttpClientContext context=HttpClientContext.create();
  final HttpResponseInterceptor interceptor=new ResponseProcessCookies();
  interceptor.process(null,context);
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testContextParameterCheck() throws Exception {
  final HttpResponse response=new BasicHttpResponse(HttpVersion.HTTP_1_1,200,"OK");
  final HttpResponseInterceptor interceptor=new ResponseProcessCookies();
  interceptor.process(response,null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.ssl.TestDefaultHostnameVerifier </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testVerify() throws Exception {
  final CertificateFactory cf=CertificateFactory.getInstance("X.509");
  InputStream in;
  X509Certificate x509;
  in=new ByteArrayInputStream(CertificatesToPlayWith.X509_FOO);
  x509=(X509Certificate)cf.generateCertificate(in);
  impl.verify("foo.com",x509);
  exceptionPlease(impl,"a.foo.com",x509);
  exceptionPlease(impl,"bar.com",x509);
  in=new ByteArrayInputStream(CertificatesToPlayWith.X509_HANAKO);
  x509=(X509Certificate)cf.generateCertificate(in);
  impl.verify("\u82b1\u5b50.co.jp",x509);
  exceptionPlease(impl,"a.\u82b1\u5b50.co.jp",x509);
  in=new ByteArrayInputStream(CertificatesToPlayWith.X509_FOO_BAR);
  x509=(X509Certificate)cf.generateCertificate(in);
  exceptionPlease(impl,"foo.com",x509);
  exceptionPlease(impl,"a.foo.com",x509);
  impl.verify("bar.com",x509);
  exceptionPlease(impl,"a.bar.com",x509);
  in=new ByteArrayInputStream(CertificatesToPlayWith.X509_FOO_BAR_HANAKO);
  x509=(X509Certificate)cf.generateCertificate(in);
  exceptionPlease(impl,"foo.com",x509);
  exceptionPlease(impl,"a.foo.com",x509);
  impl.verify("bar.com",x509);
  exceptionPlease(impl,"a.bar.com",x509);
  exceptionPlease(impl,"a.\u82b1\u5b50.co.jp",x509);
  in=new ByteArrayInputStream(CertificatesToPlayWith.X509_NO_CNS_FOO);
  x509=(X509Certificate)cf.generateCertificate(in);
  impl.verify("foo.com",x509);
  exceptionPlease(impl,"a.foo.com",x509);
  in=new ByteArrayInputStream(CertificatesToPlayWith.X509_NO_CNS_FOO);
  x509=(X509Certificate)cf.generateCertificate(in);
  impl.verify("foo.com",x509);
  exceptionPlease(impl,"a.foo.com",x509);
  in=new ByteArrayInputStream(CertificatesToPlayWith.X509_THREE_CNS_FOO_BAR_HANAKO);
  x509=(X509Certificate)cf.generateCertificate(in);
  exceptionPlease(impl,"foo.com",x509);
  exceptionPlease(impl,"a.foo.com",x509);
  exceptionPlease(impl,"bar.com",x509);
  exceptionPlease(impl,"a.bar.com",x509);
  impl.verify("\u82b1\u5b50.co.jp",x509);
  exceptionPlease(impl,"a.\u82b1\u5b50.co.jp",x509);
  in=new ByteArrayInputStream(CertificatesToPlayWith.X509_WILD_FOO);
  x509=(X509Certificate)cf.generateCertificate(in);
  exceptionPlease(impl,"foo.com",x509);
  impl.verify("www.foo.com",x509);
  impl.verify("\u82b1\u5b50.foo.com",x509);
  exceptionPlease(impl,"a.b.foo.com",x509);
  in=new ByteArrayInputStream(CertificatesToPlayWith.X509_WILD_CO_JP);
  x509=(X509Certificate)cf.generateCertificate(in);
  impl.verify("*.co.jp",x509);
  impl.verify("foo.co.jp",x509);
  impl.verify("\u82b1\u5b50.co.jp",x509);
  exceptionPlease(implWithPublicSuffixCheck,"foo.co.jp",x509);
  exceptionPlease(implWithPublicSuffixCheck,"\u82b1\u5b50.co.jp",x509);
  in=new ByteArrayInputStream(CertificatesToPlayWith.X509_WILD_FOO_BAR_HANAKO);
  x509=(X509Certificate)cf.generateCertificate(in);
  exceptionPlease(impl,"foo.com",x509);
  exceptionPlease(impl,"www.foo.com",x509);
  exceptionPlease(impl,"\u82b1\u5b50.foo.com",x509);
  exceptionPlease(impl,"a.b.foo.com",x509);
  exceptionPlease(impl,"bar.com",x509);
  impl.verify("www.bar.com",x509);
  impl.verify("\u82b1\u5b50.bar.com",x509);
  exceptionPlease(impl,"a.b.bar.com",x509);
  in=new ByteArrayInputStream(CertificatesToPlayWith.X509_MULTIPLE_VALUE_AVA);
  x509=(X509Certificate)cf.generateCertificate(in);
  impl.verify("repository.infonotary.com",x509);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.ssl.TestSSLSocketFactory </h4><pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=SSLException.class) public void testSSLTrustVerification() throws Exception {
  this.server=ServerBootstrap.bootstrap().setServerInfo(LocalServerTestBase.ORIGIN).setSslContext(SSLTestContexts.createServerSSLContext()).create();
  this.server.start();
  final HttpContext context=new BasicHttpContext();
  final SSLContext defaultsslcontext=SSLContexts.createDefault();
  final SSLConnectionSocketFactory socketFactory=new SSLConnectionSocketFactory(defaultsslcontext,NoopHostnameVerifier.INSTANCE);
  final Socket socket=socketFactory.createSocket(context);
  final InetSocketAddress remoteAddress=new InetSocketAddress("localhost",this.server.getLocalPort());
  final HttpHost target=new HttpHost("localhost",this.server.getLocalPort(),"https");
  final SSLSocket sslSocket=(SSLSocket)socketFactory.connectSocket(0,socket,target,remoteAddress,null,context);
  sslSocket.close();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSSLTrustVerificationOverride() throws Exception {
  this.server=ServerBootstrap.bootstrap().setServerInfo(LocalServerTestBase.ORIGIN).setSslContext(SSLTestContexts.createServerSSLContext()).create();
  this.server.start();
  final HttpContext context=new BasicHttpContext();
  final TrustStrategy trustStrategy=new TrustStrategy(){
    @Override public boolean isTrusted(    final X509Certificate[] chain,    final String authType) throws CertificateException {
      return chain.length == 1;
    }
  }
;
  final SSLContext sslcontext=SSLContexts.custom().loadTrustMaterial(null,trustStrategy).build();
  final SSLConnectionSocketFactory socketFactory=new SSLConnectionSocketFactory(sslcontext,NoopHostnameVerifier.INSTANCE);
  final Socket socket=socketFactory.createSocket(context);
  final InetSocketAddress remoteAddress=new InetSocketAddress("localhost",this.server.getLocalPort());
  final HttpHost target=new HttpHost("localhost",this.server.getLocalPort(),"https");
  final SSLSocket sslSocket=(SSLSocket)socketFactory.connectSocket(0,socket,target,remoteAddress,null,context);
  sslSocket.close();
}

</code></pre>

<br>
<pre class="type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IOException.class) public void testSSLDisabledByDefault() throws Exception {
  this.server=ServerBootstrap.bootstrap().setServerInfo(LocalServerTestBase.ORIGIN).setSslContext(SSLTestContexts.createServerSSLContext()).setSslSetupHandler(new SSLServerSetupHandler(){
    @Override public void initialize(    final SSLServerSocket socket) throws SSLException {
      socket.setEnabledProtocols(new String[]{"SSLv3"});
    }
  }
).create();
  this.server.start();
  final HttpContext context=new BasicHttpContext();
  final SSLConnectionSocketFactory socketFactory=new SSLConnectionSocketFactory(SSLTestContexts.createClientSSLContext());
  final Socket socket=socketFactory.createSocket(context);
  final InetSocketAddress remoteAddress=new InetSocketAddress("localhost",this.server.getLocalPort());
  final HttpHost target=new HttpHost("localhost",this.server.getLocalPort(),"https");
  socketFactory.connectSocket(0,socket,target,remoteAddress,null,context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.utils.TestRequestBuilder </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBuildGETwithUTF8() throws Exception {
  assertBuild(StandardCharsets.UTF_8);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBuildGETwithISO88591() throws Exception {
  assertBuild(StandardCharsets.ISO_8859_1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.utils.TestURIBuilder </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBuildAddParametersISO88591() throws Exception {
  assertAddParameters(StandardCharsets.ISO_8859_1);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBuildSetParametersISO88591() throws Exception {
  assertSetParameters(StandardCharsets.ISO_8859_1);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBuildAddParametersUTF8() throws Exception {
  assertAddParameters(StandardCharsets.UTF_8);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBuildSetParametersUTF8() throws Exception {
  assertSetParameters(StandardCharsets.UTF_8);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hc.client5.http.utils.TestURLEncodedUtils </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testParseUTF8Ampersand2String() throws Exception {
  testParseUTF8String('&');
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testParseUTF8SemicolonString() throws Exception {
  testParseUTF8String(';');
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
