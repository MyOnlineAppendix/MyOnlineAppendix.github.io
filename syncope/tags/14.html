<h3><span class=" glyphicon glyphicon-tag"/>&nbspAssumptionSetter</h3><kbd>Sets implicit assumptions </kbd><br><br><br><h4 style="margin:0px">Class: org.apache.syncope.fit.core.AuthenticationITCase </h4><pre class="type-5 type-4 type-6 type-14 type-2 type-10 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void issueSYNCOPE434(){
  Assume.assumeTrue(ActivitiDetector.isActivitiEnabledForUsers(syncopeService));
  UserTO userTO=UserITCase.getUniqueSampleTO("createWithReject@syncope.apache.org");
  userTO.getMemberships().add(new MembershipTO.Builder().group(9L).build());
  userTO=createUser(userTO).getAny();
  assertNotNull(userTO);
  assertEquals("createApproval",userTO.getStatus());
  try {
    clientFactory.create(userTO.getUsername(),"password123").self();
    fail();
  }
 catch (  AccessControlException e) {
    assertNotNull(e);
  }
  WorkflowFormTO form=userWorkflowService.getFormForUser(userTO.getKey());
  form=userWorkflowService.claimForm(form.getTaskId());
  Map<String,WorkflowFormPropertyTO> props=form.getPropertyMap();
  props.get("approve").setValue(Boolean.TRUE.toString());
  form.getProperties().clear();
  form.getProperties().addAll(props.values());
  userTO=userWorkflowService.submitForm(form);
  assertNotNull(userTO);
  assertEquals("active",userTO.getStatus());
  Pair<Map<String,Set<String>>,UserTO> self=clientFactory.create(userTO.getUsername(),"password123").self();
  assertNotNull(self);
  assertNotNull(self.getKey());
  assertNotNull(self.getValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.syncope.fit.core.CamelRouteITCase </h4><pre class="type-14 type-2 type-10 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void groupRoutes(){
  Assume.assumeTrue(CamelDetector.isCamelEnabledForGroups(syncopeService));
  List<CamelRouteTO> groupRoutes=camelRouteService.list(AnyTypeKind.GROUP);
  assertNotNull(groupRoutes);
  assertEquals(8,groupRoutes.size());
  for (  CamelRouteTO route : groupRoutes) {
    assertNotNull(route.getContent());
  }
}

</code></pre>

<br>
<pre class="type-14 type-2 type-10 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void userRoutes(){
  Assume.assumeTrue(CamelDetector.isCamelEnabledForUsers(syncopeService));
  List<CamelRouteTO> userRoutes=camelRouteService.list(AnyTypeKind.USER);
  assertNotNull(userRoutes);
  assertEquals(16,userRoutes.size());
  for (  CamelRouteTO route : userRoutes) {
    assertNotNull(route.getContent());
  }
}

</code></pre>

<br>
<pre class="type-5 type-6 type-14 type-2 type-10 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void scriptingUpdate(){
  Assume.assumeTrue(CamelDetector.isCamelEnabledForUsers(syncopeService));
  CamelRouteTO oldRoute=camelRouteService.read("createUser");
  String routeContent="" + "  <route id=\"createUser\">\n" + "    <from uri=\"direct:createUser\"/>\n"+ "    <setProperty propertyName=\"actual\">\n"+ "      <simple>${body}</simple>\n"+ "    </setProperty>\n"+ "    <setBody>\n"+ "     <groovy>\n"+ "       org.apache.commons.collections4."+ "CollectionUtils.get(request.body.getPlainAttrs(), 3).getValues().set(0,\"true\")\n"+ "       return request.body\n"+ "     </groovy>\n"+ "    </setBody>\n"+ "    <doTry>\n"+ "      <bean ref=\"uwfAdapter\" method=\"create(${body},${property.disablePwdPolicyCheck},\n"+ "                                     ${property.enabled},${property.storePassword})\"/>\n"+ "      <process ref=\"userCreateProcessor\"/>\n"+ "      <to uri=\"direct:createPort\"/>\n"+ "      <doCatch>        \n"+ "        <exception>java.lang.RuntimeException</exception>\n"+ "        <handled>\n"+ "          <constant>false</constant>\n"+ "        </handled>\n"+ "        <to uri=\"direct:createPort\"/>\n"+ "      </doCatch>\n"+ "    </doTry>\n"+ "  </route> ";
  try {
    doUpdate("createUser",routeContent);
    PlainSchemaTO schemaTO=new PlainSchemaTO();
    schemaTO.setKey("camelAttribute");
    schemaTO.setType(AttrSchemaType.String);
    createSchema(SchemaType.PLAIN,schemaTO);
    AnyTypeClassTO typeClass=new AnyTypeClassTO();
    typeClass.setKey("camelAttribute");
    typeClass.getPlainSchemas().add(schemaTO.getKey());
    anyTypeClassService.create(typeClass);
    UserTO userTO=new UserTO();
    userTO.setRealm(SyncopeConstants.ROOT_REALM);
    userTO.getAuxClasses().add(typeClass.getKey());
    String userId=getUUIDString() + "camelUser@syncope.apache.org";
    userTO.setUsername(userId);
    userTO.setPassword("password123");
    userTO.getPlainAttrs().add(attrTO("userId",userId));
    userTO.getPlainAttrs().add(attrTO("fullname",userId));
    userTO.getPlainAttrs().add(attrTO("surname",userId));
    userTO.getPlainAttrs().add(attrTO("camelAttribute","false"));
    userTO=createUser(userTO).getAny();
    assertNotNull(userTO);
    assertEquals("true",IterableUtils.get(userTO.getPlainAttrs(),3).getValues().get(0));
  }
  finally {
    doUpdate(oldRoute.getKey(),oldRoute.getContent());
  }
}

</code></pre>

<br>
<pre class="type-5 type-14 type-2 type-10 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void update(){
  Assume.assumeTrue(CamelDetector.isCamelEnabledForUsers(syncopeService));
  CamelRouteTO oldRoute=camelRouteService.read("createUser");
  assertNotNull(oldRoute);
  String routeContent="<route id=\"createUser\">\n" + "  <from uri=\"direct:createUser\"/>\n" + "  <setProperty propertyName=\"actual\">\n"+ "    <simple>${body}</simple>\n"+ "  </setProperty>\n"+ "  <doTry>\n"+ "    <bean ref=\"uwfAdapter\" method=\"create(${body},${property.disablePwdPolicyCheck},\n"+ "                             ${property.enabled},${property.storePassword})\"/>\n"+ "    <process ref=\"userCreateProcessor\" />\n"+ "    <to uri=\"direct:createPort\"/>\n"+ "    <to uri=\"log:myLog\"/>\n"+ "    <doCatch>        \n"+ "      <exception>java.lang.RuntimeException</exception>\n"+ "      <handled>\n"+ "        <constant>false</constant>\n"+ "      </handled>\n"+ "      <to uri=\"direct:createPort\"/>\n"+ "    </doCatch>\n"+ "  </doTry>\n"+ "</route>";
  try {
    CamelRouteTO route=doUpdate("createUser",routeContent);
    assertEquals(routeContent,route.getContent());
  }
  finally {
    doUpdate(oldRoute.getKey(),oldRoute.getContent());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.syncope.fit.core.UserITCase </h4><pre class="type-5 type-4 type-1 type-6 type-14 type-2 type-10 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void customPolicyRules(){
  Assume.assumeTrue(MediaType.APPLICATION_JSON_TYPE.equals(clientFactory.getContentType().getMediaType()));
  AccountPolicyTO accountPolicy=new AccountPolicyTO();
  accountPolicy.setDescription("Account Policy with custom rules");
  accountPolicy.getRuleConfs().add(new TestAccountRuleConf());
  accountPolicy=createPolicy(accountPolicy);
  assertNotNull(accountPolicy);
  PasswordPolicyTO passwordPolicy=new PasswordPolicyTO();
  passwordPolicy.setDescription("Password Policy with custom rules");
  passwordPolicy.getRuleConfs().add(new TestPasswordRuleConf());
  passwordPolicy=createPolicy(passwordPolicy);
  assertNotNull(passwordPolicy);
  RealmTO realm=realmService.list("/even/two").get(0);
  Long oldAccountPolicy=realm.getAccountPolicy();
  realm.setAccountPolicy(accountPolicy.getKey());
  Long oldPasswordPolicy=realm.getPasswordPolicy();
  realm.setPasswordPolicy(passwordPolicy.getKey());
  realmService.update(realm);
  try {
    UserTO user=getUniqueSampleTO("custompolicyrules@syncope.apache.org");
    user.setRealm(realm.getFullPath());
    try {
      createUser(user);
      fail();
    }
 catch (    SyncopeClientException e) {
      assertEquals(ClientExceptionType.InvalidUser,e.getType());
      assertTrue(e.getElements().iterator().next().startsWith("InvalidPassword"));
    }
    user.setPassword(user.getPassword() + "XXX");
    try {
      createUser(user);
      fail();
    }
 catch (    SyncopeClientException e) {
      assertEquals(ClientExceptionType.InvalidUser,e.getType());
      assertTrue(e.getElements().iterator().next().startsWith("InvalidUsername"));
    }
    user.setUsername("YYY" + user.getUsername());
    user=createUser(user).getAny();
    assertNotNull(user);
  }
  finally {
    realm.setAccountPolicy(oldAccountPolicy);
    realm.setPasswordPolicy(oldPasswordPolicy);
    realmService.update(realm);
    policyService.delete(passwordPolicy.getKey());
    policyService.delete(accountPolicy.getKey());
  }
}

</code></pre>

<br>
<pre class="type-5 type-6 type-14 type-2 type-10 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createActivate(){
  Assume.assumeTrue(ActivitiDetector.isActivitiEnabledForUsers(syncopeService));
  UserTO userTO=getUniqueSampleTO("createActivate@syncope.apache.org");
  userTO.getMemberships().add(new MembershipTO.Builder().group(11L).build());
  userTO=createUser(userTO).getAny();
  assertNotNull(userTO);
  assertNotNull(userTO.getToken());
  assertNotNull(userTO.getTokenExpireTime());
  assertEquals("created",userTO.getStatus());
  StatusPatch statusPatch=new StatusPatch();
  statusPatch.setKey(userTO.getKey());
  statusPatch.setType(StatusPatchType.ACTIVATE);
  statusPatch.setToken(userTO.getToken());
  userTO=userService.status(statusPatch).readEntity(new GenericType<ProvisioningResult<UserTO>>(){
  }
).getAny();
  assertNotNull(userTO);
  assertNull(userTO.getToken());
  assertNull(userTO.getTokenExpireTime());
  assertEquals("active",userTO.getStatus());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.syncope.fit.core.UserSelfITCase </h4><pre class="type-5 type-4 type-1 type-6 type-14 type-2 type-10 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void updateWithApproval(){
  Assume.assumeTrue(ActivitiDetector.isActivitiEnabledForUsers(syncopeService));
  UserTO created=createUser(UserITCase.getUniqueSampleTO("anonymous@syncope.apache.org")).getAny();
  assertNotNull(created);
  assertFalse(created.getUsername().endsWith("XX"));
  UserPatch userPatch=new UserPatch();
  userPatch.setKey(created.getKey());
  userPatch.setUsername(new StringReplacePatchItem.Builder().value(created.getUsername() + "XX").build());
  userPatch.getMemberships().add(new MembershipPatch.Builder().operation(PatchOperation.ADD_REPLACE).membershipTO(new MembershipTO.Builder().group(7L).build()).build());
  userPatch.getResources().add(new StringPatchItem.Builder().operation(PatchOperation.ADD_REPLACE).value(RESOURCE_NAME_TESTDB).build());
  userPatch.setPassword(new PasswordPatch.Builder().value("newPassword123").onSyncope(false).resource(RESOURCE_NAME_TESTDB).build());
  SyncopeClient authClient=clientFactory.create(created.getUsername(),"password123");
  UserTO updated=authClient.getService(UserSelfService.class).update(userPatch).readEntity(new GenericType<ProvisioningResult<UserTO>>(){
  }
).getAny();
  assertNotNull(updated);
  assertEquals("updateApproval",updated.getStatus());
  assertFalse(updated.getUsername().endsWith("XX"));
  assertTrue(updated.getMemberships().isEmpty());
  assertTrue(updated.getResources().isEmpty());
  try {
    resourceService.readConnObject(RESOURCE_NAME_TESTDB,AnyTypeKind.USER.name(),updated.getKey());
    fail();
  }
 catch (  SyncopeClientException e) {
    assertEquals(ClientExceptionType.NotFound,e.getType());
  }
  WorkflowFormTO form=userWorkflowService.getFormForUser(updated.getKey());
  form=userWorkflowService.claimForm(form.getTaskId());
  Map<String,WorkflowFormPropertyTO> props=form.getPropertyMap();
  props.get("approve").setValue(Boolean.TRUE.toString());
  form.getProperties().clear();
  form.getProperties().addAll(props.values());
  updated=userWorkflowService.submitForm(form);
  assertNotNull(updated);
  assertEquals("active",updated.getStatus());
  assertTrue(updated.getUsername().endsWith("XX"));
  assertEquals(1,updated.getMemberships().size());
  assertTrue(updated.getResources().contains(RESOURCE_NAME_TESTDB));
  assertNotNull(resourceService.readConnObject(RESOURCE_NAME_TESTDB,AnyTypeKind.USER.name(),updated.getKey()));
}

</code></pre>

<br>
<pre class="type-4 type-6 type-14 type-2 type-10 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void create(){
  Assume.assumeTrue(ActivitiDetector.isActivitiEnabledForUsers(syncopeService));
  try {
    userSelfService.create(UserITCase.getUniqueSampleTO("anonymous@syncope.apache.org"),true);
    fail();
  }
 catch (  AccessControlException e) {
    assertNotNull(e);
  }
  SyncopeClient anonClient=clientFactory.create();
  UserTO self=anonClient.getService(UserSelfService.class).create(UserITCase.getUniqueSampleTO("anonymous@syncope.apache.org"),true).readEntity(new GenericType<ProvisioningResult<UserTO>>(){
  }
).getAny();
  assertNotNull(self);
  assertEquals("createApproval",self.getStatus());
}

</code></pre>

<br>
<pre class="type-5 type-4 type-1 type-6 type-14 type-2 type-10 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createAndApprove(){
  Assume.assumeTrue(ActivitiDetector.isActivitiEnabledForUsers(syncopeService));
  UserTO userTO=UserITCase.getUniqueSampleTO("anonymous@syncope.apache.org");
  userTO.getMemberships().add(new MembershipTO.Builder().group(3L).build());
  userTO.getResources().add(RESOURCE_NAME_TESTDB);
  SyncopeClient anonClient=clientFactory.create();
  userTO=anonClient.getService(UserSelfService.class).create(userTO,true).readEntity(new GenericType<ProvisioningResult<UserTO>>(){
  }
).getAny();
  assertNotNull(userTO);
  assertEquals("createApproval",userTO.getStatus());
  assertFalse(userTO.getMemberships().isEmpty());
  assertFalse(userTO.getResources().isEmpty());
  try {
    resourceService.readConnObject(RESOURCE_NAME_TESTDB,AnyTypeKind.USER.name(),userTO.getKey());
    fail();
  }
 catch (  SyncopeClientException e) {
    assertEquals(ClientExceptionType.NotFound,e.getType());
  }
  WorkflowFormTO form=userWorkflowService.getFormForUser(userTO.getKey());
  form=userWorkflowService.claimForm(form.getTaskId());
  Map<String,WorkflowFormPropertyTO> props=form.getPropertyMap();
  props.get("approve").setValue(Boolean.TRUE.toString());
  form.getProperties().clear();
  form.getProperties().addAll(props.values());
  userTO=userWorkflowService.submitForm(form);
  assertNotNull(userTO);
  assertEquals("active",userTO.getStatus());
  assertNotNull(resourceService.readConnObject(RESOURCE_NAME_TESTDB,AnyTypeKind.USER.name(),userTO.getKey()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.syncope.fit.core.UserWorkflowITCase </h4><pre class="type-5 type-11 type-4 type-1 type-6 type-14 type-2 type-10 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void issueSYNCOPE15(){
  Assume.assumeTrue(ActivitiDetector.isActivitiEnabledForUsers(syncopeService));
  List<WorkflowFormTO> forms=userWorkflowService.getForms();
  assertNotNull(forms);
  int preForms=forms.size();
  UserTO userTO=UserITCase.getUniqueSampleTO("issueSYNCOPE15@syncope.apache.org");
  userTO.getResources().clear();
  userTO.getVirAttrs().clear();
  userTO.getDerAttrs().clear();
  userTO.getMemberships().clear();
  userTO.getMemberships().add(new MembershipTO.Builder().group(9L).build());
  userTO=createUser(userTO).getAny();
  assertNotNull(userTO);
  assertNotEquals(0L,userTO.getKey(),0);
  assertNotNull(userTO.getCreationDate());
  assertNotNull(userTO.getCreator());
  assertNotNull(userTO.getLastChangeDate());
  assertNotNull(userTO.getLastModifier());
  assertEquals(userTO.getCreationDate(),userTO.getLastChangeDate());
  forms=userWorkflowService.getForms();
  assertEquals(preForms + 1,forms.size());
  WorkflowFormTO form=userWorkflowService.getFormForUser(userTO.getKey());
  assertNotNull(form);
  UserWorkflowService userService3=clientFactory.create("bellini",ADMIN_PWD).getService(UserWorkflowService.class);
  form=userService3.claimForm(form.getTaskId());
  assertNotNull(form);
  assertNotNull(form.getTaskId());
  assertNotNull(form.getOwner());
  form=userWorkflowService.claimForm(form.getTaskId());
  assertNotNull(form);
  Map<String,WorkflowFormPropertyTO> props=form.getPropertyMap();
  props.get("approve").setValue(Boolean.TRUE.toString());
  form.getProperties().clear();
  form.getProperties().addAll(props.values());
  userTO=userWorkflowService.submitForm(form);
  assertNotNull(userTO);
  assertEquals(preForms,userWorkflowService.getForms().size());
  assertNull(userWorkflowService.getFormForUser(userTO.getKey()));
  forms=userWorkflowService.getFormsByName(userTO.getKey(),"Create approval");
  assertFalse(forms.isEmpty());
  int count=0;
  for (  WorkflowFormTO hform : forms) {
    if (form.getTaskId().equals(hform.getTaskId())) {
      count++;
      assertEquals("createApproval",hform.getKey());
      assertNotNull(hform.getCreateTime());
      assertNotNull(hform.getDueDate());
      assertTrue(Boolean.parseBoolean(hform.getPropertyMap().get("approve").getValue()));
      assertNull(hform.getPropertyMap().get("rejectReason").getValue());
    }
  }
  assertEquals(1,count);
  userService.delete(userTO.getKey());
  try {
    userService.read(userTO.getKey());
    fail();
  }
 catch (  Exception ignore) {
    assertNotNull(ignore);
  }
  try {
    userWorkflowService.getFormsByName(userTO.getKey(),"Create approval");
    fail();
  }
 catch (  Exception ignore) {
    assertNotNull(ignore);
  }
}

</code></pre>

<br>
<pre class="type-5 type-4 type-1 type-6 type-14 type-2 type-10 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createWithReject(){
  Assume.assumeTrue(ActivitiDetector.isActivitiEnabledForUsers(syncopeService));
  UserTO userTO=UserITCase.getUniqueSampleTO("createWithReject@syncope.apache.org");
  userTO.getResources().add(RESOURCE_NAME_TESTDB);
  userTO.getMemberships().add(new MembershipTO.Builder().group(9L).build());
  userTO=createUser(userTO).getAny();
  assertNotNull(userTO);
  assertEquals(1,userTO.getMemberships().size());
  assertEquals(9,userTO.getMemberships().get(0).getRightKey());
  assertEquals("createApproval",userTO.getStatus());
  WorkflowFormTO form=userWorkflowService.getFormForUser(userTO.getKey());
  assertNotNull(form);
  assertNotNull(form.getUserKey());
  assertEquals(userTO.getKey(),form.getUserKey(),0);
  assertNotNull(form.getTaskId());
  assertNull(form.getOwner());
  UserTO rossini=userService.read(1L);
  if (!rossini.getRoles().contains("User manager")) {
    UserPatch userPatch=new UserPatch();
    userPatch.setKey(1L);
    userPatch.getRoles().add(new StringPatchItem.Builder().operation(PatchOperation.ADD_REPLACE).value("User manager").build());
    rossini=updateUser(userPatch).getAny();
  }
  assertTrue(rossini.getRoles().contains("User manager"));
  UserWorkflowService userService2=clientFactory.create("rossini",ADMIN_PWD).getService(UserWorkflowService.class);
  try {
    userService2.claimForm(form.getTaskId());
    fail();
  }
 catch (  SyncopeClientException e) {
    assertEquals(ClientExceptionType.Workflow,e.getType());
  }
  UserWorkflowService userService3=clientFactory.create("bellini",ADMIN_PWD).getService(UserWorkflowService.class);
  form=userService3.claimForm(form.getTaskId());
  assertNotNull(form);
  assertNotNull(form.getTaskId());
  assertNotNull(form.getOwner());
  Map<String,WorkflowFormPropertyTO> props=form.getPropertyMap();
  props.get("approve").setValue(Boolean.FALSE.toString());
  props.get("rejectReason").setValue("I don't like him.");
  form.getProperties().clear();
  form.getProperties().addAll(props.values());
  userTO=userService3.submitForm(form);
  assertNotNull(userTO);
  assertEquals("rejected",userTO.getStatus());
  JdbcTemplate jdbcTemplate=new JdbcTemplate(testDataSource);
  Exception exception=null;
  try {
    jdbcTemplate.queryForObject("SELECT id FROM test WHERE id=?",new String[]{userTO.getUsername()},Integer.class);
  }
 catch (  EmptyResultDataAccessException e) {
    exception=e;
  }
  assertNotNull(exception);
}

</code></pre>

<br>
<pre class="type-5 type-1 type-6 type-14 type-2 type-10 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createWithApproval(){
  Assume.assumeTrue(ActivitiDetector.isActivitiEnabledForUsers(syncopeService));
  List<WorkflowFormTO> forms=userWorkflowService.getForms();
  assertNotNull(forms);
  int preForms=forms.size();
  UserTO userTO=UserITCase.getUniqueSampleTO("createWithApproval@syncope.apache.org");
  userTO.getResources().add(RESOURCE_NAME_TESTDB);
  userTO.getMemberships().add(new MembershipTO.Builder().group(9L).build());
  ProvisioningResult<UserTO> result=createUser(userTO);
  assertNotNull(result);
  userTO=result.getAny();
  assertEquals(1,userTO.getMemberships().size());
  assertEquals(9,userTO.getMemberships().get(0).getRightKey());
  assertEquals("createApproval",userTO.getStatus());
  assertEquals(Collections.singleton(RESOURCE_NAME_TESTDB),userTO.getResources());
  assertTrue(result.getPropagationStatuses().isEmpty());
  JdbcTemplate jdbcTemplate=new JdbcTemplate(testDataSource);
  Exception exception=null;
  try {
    jdbcTemplate.queryForObject("SELECT id FROM test WHERE id=?",new String[]{userTO.getUsername()},Integer.class);
  }
 catch (  EmptyResultDataAccessException e) {
    exception=e;
  }
  assertNotNull(exception);
  forms=userWorkflowService.getForms();
  assertNotNull(forms);
  assertEquals(preForms + 1,forms.size());
  WorkflowFormTO form=userWorkflowService.getFormForUser(userTO.getKey());
  assertNotNull(form);
  assertNotNull(form.getTaskId());
  assertNull(form.getOwner());
  form=userWorkflowService.claimForm(form.getTaskId());
  assertNotNull(form);
  assertNotNull(form.getTaskId());
  assertNotNull(form.getOwner());
  Map<String,WorkflowFormPropertyTO> props=form.getPropertyMap();
  props.get("approve").setValue(Boolean.TRUE.toString());
  form.getProperties().clear();
  form.getProperties().addAll(props.values());
  userTO=userWorkflowService.submitForm(form);
  assertNotNull(userTO);
  assertEquals("active",userTO.getStatus());
  assertEquals(Collections.singleton(RESOURCE_NAME_TESTDB),userTO.getResources());
  exception=null;
  try {
    final String username=jdbcTemplate.queryForObject("SELECT id FROM test WHERE id=?",String.class,userTO.getUsername());
    assertEquals(userTO.getUsername(),username);
  }
 catch (  EmptyResultDataAccessException e) {
    exception=e;
  }
  assertNull(exception);
  UserPatch userPatch=new UserPatch();
  userPatch.setKey(userTO.getKey());
  userPatch.setPassword(new PasswordPatch.Builder().value("anotherPassword123").build());
  userTO=updateUser(userPatch).getAny();
  assertNotNull(userTO);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.syncope.fit.core.WorkflowITCase </h4><pre class="type-14 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void getGroupDefinition() throws IOException {
  Assume.assumeTrue(ActivitiDetector.isActivitiEnabledForGroups(syncopeService));
  exportDefinition(AnyTypeKind.GROUP);
}

</code></pre>

<br>
<pre class="type-14 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void updateUserDefinition() throws IOException {
  Assume.assumeTrue(ActivitiDetector.isActivitiEnabledForUsers(syncopeService));
  importDefinition(AnyTypeKind.USER);
}

</code></pre>

<br>
<pre class="type-14 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void exportUserDefinition() throws IOException {
  Assume.assumeTrue(ActivitiDetector.isActivitiEnabledForUsers(syncopeService));
  exportDefinition(AnyTypeKind.USER);
}

</code></pre>

<br>
<pre class="type-14 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void updateGroupDefinition() throws IOException {
  Assume.assumeTrue(ActivitiDetector.isActivitiEnabledForGroups(syncopeService));
  importDefinition(AnyTypeKind.GROUP);
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
