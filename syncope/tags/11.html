<h3><span class=" glyphicon glyphicon-tag"/>&nbspBranchVerifier</h3><kbd>Verifies assertions inside branch conditions</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.syncope.core.misc.security.EncryptorTest </h4><pre class="type-11 type-1 type-6 type-10 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verify all algorithms.
 */
@Test public void testEncoder() throws Exception {
  for (  CipherAlgorithm cipherAlgorithm : CipherAlgorithm.values()) {
    final String encPassword=encryptor.encode(password,cipherAlgorithm);
    assertNotNull(encPassword);
    assertTrue(encryptor.verify(password,cipherAlgorithm,encPassword));
    assertFalse(encryptor.verify("pass",cipherAlgorithm,encPassword));
    if (cipherAlgorithm.equals(CipherAlgorithm.BCRYPT) || cipherAlgorithm.getAlgorithm().startsWith("S-")) {
      final String encSamePassword=encryptor.encode(password,cipherAlgorithm);
      assertNotNull(encSamePassword);
      assertFalse(encSamePassword.equals(encPassword));
      assertTrue(encryptor.verify(password,cipherAlgorithm,encSamePassword));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.syncope.core.persistence.jpa.inner.ResourceTest </h4><pre class="type-11 type-1 type-6 type-2 type-10 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void saveWithGroupMappingType(){
  ExternalResource resource=entityFactory.newEntity(ExternalResource.class);
  resource.setKey("ws-target-resource-basic-save-invalid");
  ConnInstance connector=resourceDAO.find("ws-target-resource-1").getConnector();
  resource.setConnector(connector);
  Provision provision=entityFactory.newEntity(Provision.class);
  provision.setAnyType(anyTypeDAO.findUser());
  provision.setObjectClass(ObjectClass.ACCOUNT);
  provision.setResource(resource);
  resource.add(provision);
  Mapping mapping=entityFactory.newEntity(Mapping.class);
  mapping.setProvision(provision);
  provision.setMapping(mapping);
  MappingItem item=entityFactory.newEntity(MappingItem.class);
  item.setIntAttrName("fullname");
  item.setExtAttrName("fullname");
  item.setIntMappingType(IntMappingType.UserPlainSchema);
  item.setPurpose(MappingPurpose.BOTH);
  mapping.setConnObjectKeyItem(item);
  item=entityFactory.newEntity(MappingItem.class);
  item.setIntAttrName("icon");
  item.setExtAttrName("icon");
  item.setIntMappingType(IntMappingType.GroupPlainSchema);
  item.setPurpose(MappingPurpose.BOTH);
  mapping.add(item);
  item=entityFactory.newEntity(MappingItem.class);
  item.setIntAttrName("mderiveddata");
  item.setExtAttrName("mderiveddata");
  item.setIntMappingType(IntMappingType.AnyObjectDerivedSchema);
  item.setPurpose(MappingPurpose.PROPAGATION);
  mapping.add(item);
  ExternalResource actual=resourceDAO.save(resource);
  assertNotNull(actual);
  int items=0;
  for (  MappingItem mapItem : actual.getProvision(anyTypeDAO.findUser()).getMapping().getItems()) {
    items++;
    if ("icon".equals(mapItem.getIntAttrName())) {
      assertTrue(IntMappingType.contains(AnyTypeKind.GROUP,mapItem.getIntMappingType().toString()));
    }
    if ("mderiveddata".equals(mapItem.getIntAttrName())) {
      assertTrue(IntMappingType.contains(AnyTypeKind.ANY_OBJECT,mapItem.getIntMappingType().toString()));
    }
  }
  assertEquals(3,items);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.syncope.fit.core.ConnectorITCase </h4><pre class="type-11 type-6 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void checkSelectedLanguage(){
  List<ConnInstanceTO> connectorInstanceTOs=connectorService.list("it");
  Map<String,ConnConfProperty> instanceConfMap;
  for (  ConnInstanceTO instance : connectorInstanceTOs) {
    if ("net.tirasa.connid.bundles.db.table".equals(instance.getBundleName())) {
      instanceConfMap=instance.getConfMap();
      assertEquals("Utente",instanceConfMap.get("user").getSchema().getDisplayName());
    }
  }
  connectorInstanceTOs=connectorService.list(null);
  for (  ConnInstanceTO instance : connectorInstanceTOs) {
    if ("net.tirasa.connid.bundles.db.table".equals(instance.getBundleName())) {
      instanceConfMap=instance.getConfMap();
      assertEquals("User",instanceConfMap.get("user").getSchema().getDisplayName());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.syncope.fit.core.LoggerITCase </h4><pre class="type-11 type-1 type-6 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void listAuditEvents(){
  final List<EventCategoryTO> events=loggerService.events();
  boolean found=false;
  for (  EventCategoryTO eventCategoryTO : events) {
    if (UserLogic.class.getSimpleName().equals(eventCategoryTO.getCategory())) {
      assertEquals(EventCategoryType.REST,eventCategoryTO.getType());
      assertTrue(eventCategoryTO.getEvents().contains("create"));
      assertTrue(eventCategoryTO.getEvents().contains("list"));
      assertFalse(eventCategoryTO.getEvents().contains("doCreate"));
      assertFalse(eventCategoryTO.getEvents().contains("setStatusOnWfAdapter"));
      assertFalse(eventCategoryTO.getEvents().contains("resolveReference"));
      found=true;
    }
  }
  assertTrue(found);
  found=false;
  for (  EventCategoryTO eventCategoryTO : events) {
    if (GroupLogic.class.getSimpleName().equals(eventCategoryTO.getCategory())) {
      assertEquals(EventCategoryType.REST,eventCategoryTO.getType());
      assertTrue(eventCategoryTO.getEvents().contains("create"));
      assertTrue(eventCategoryTO.getEvents().contains("list"));
      assertFalse(eventCategoryTO.getEvents().contains("resolveReference"));
      found=true;
    }
  }
  assertTrue(found);
  found=false;
  for (  EventCategoryTO eventCategoryTO : events) {
    if (ResourceLogic.class.getSimpleName().equals(eventCategoryTO.getCategory())) {
      assertEquals(EventCategoryType.REST,eventCategoryTO.getType());
      assertTrue(eventCategoryTO.getEvents().contains("create"));
      assertTrue(eventCategoryTO.getEvents().contains("read"));
      assertTrue(eventCategoryTO.getEvents().contains("delete"));
      assertFalse(eventCategoryTO.getEvents().contains("resolveReference"));
      found=true;
    }
  }
  assertTrue(found);
  found=false;
  for (  EventCategoryTO eventCategoryTO : events) {
    if (AnyTypeKind.USER.name().toLowerCase().equals(eventCategoryTO.getCategory())) {
      if (RESOURCE_NAME_LDAP.equals(eventCategoryTO.getSubcategory()) && EventCategoryType.SYNCHRONIZATION == eventCategoryTO.getType()) {
        assertTrue(eventCategoryTO.getEvents().contains(ResourceOperation.CREATE.name().toLowerCase()));
        assertTrue(eventCategoryTO.getEvents().contains(ResourceOperation.UPDATE.name().toLowerCase()));
        assertTrue(eventCategoryTO.getEvents().contains(ResourceOperation.DELETE.name().toLowerCase()));
        found=true;
      }
    }
  }
  assertTrue(found);
  found=false;
  for (  EventCategoryTO eventCategoryTO : events) {
    if (AnyTypeKind.USER.name().toLowerCase().equals(eventCategoryTO.getCategory())) {
      if (RESOURCE_NAME_CSV.equals(eventCategoryTO.getSubcategory()) && EventCategoryType.PROPAGATION == eventCategoryTO.getType()) {
        assertTrue(eventCategoryTO.getEvents().contains(ResourceOperation.CREATE.name().toLowerCase()));
        assertTrue(eventCategoryTO.getEvents().contains(ResourceOperation.UPDATE.name().toLowerCase()));
        assertTrue(eventCategoryTO.getEvents().contains(ResourceOperation.DELETE.name().toLowerCase()));
        found=true;
      }
    }
  }
  assertTrue(found);
  found=false;
  for (  EventCategoryTO eventCategoryTO : events) {
    if (EventCategoryType.TASK == eventCategoryTO.getType() && "TestSampleJobDelegate".equals(eventCategoryTO.getCategory())) {
      found=true;
    }
  }
  assertTrue(found);
  found=false;
  for (  EventCategoryTO eventCategoryTO : events) {
    if (EventCategoryType.TASK == eventCategoryTO.getType() && "SyncJobDelegate".equals(eventCategoryTO.getCategory())) {
      found=true;
    }
  }
  assertTrue(found);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.syncope.fit.core.PushTaskITCase </h4><pre class="type-11 type-4 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void list(){
  PagedResult<PushTaskTO> tasks=taskService.list(new TaskQuery.Builder().type(TaskType.PUSH).build());
  assertFalse(tasks.getResult().isEmpty());
  for (  AbstractTaskTO task : tasks.getResult()) {
    if (!(task instanceof PushTaskTO)) {
      fail();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.syncope.fit.core.ResourceITCase </h4><pre class="type-5 type-11 type-6 type-2 type-10 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void issueSYNCOPE493(){
  String resourceName=RESOURCE_NAME_CREATE_NONE;
  ResourceTO resourceTO=new ResourceTO();
  resourceTO.setKey(resourceName);
  resourceTO.setConnector(102L);
  ProvisionTO provisionTO=new ProvisionTO();
  provisionTO.setAnyType(AnyTypeKind.USER.name());
  provisionTO.setObjectClass(ObjectClass.ACCOUNT_NAME);
  resourceTO.getProvisions().add(provisionTO);
  MappingTO mapping=new MappingTO();
  provisionTO.setMapping(mapping);
  MappingItemTO item=new MappingItemTO();
  item.setIntMappingType(IntMappingType.UserKey);
  item.setExtAttrName("userId");
  item.setConnObjectKey(true);
  item.setPurpose(MappingPurpose.PROPAGATION);
  mapping.setConnObjectKeyItem(item);
  MappingItemTO item2=new MappingItemTO();
  item2.setIntMappingType(IntMappingType.UserPlainSchema);
  item2.setConnObjectKey(false);
  item2.setIntAttrName("gender");
  item2.setExtAttrName("gender");
  item2.setPurpose(MappingPurpose.NONE);
  mapping.add(item2);
  Response response=resourceService.create(resourceTO);
  ResourceTO actual=getObject(response.getLocation(),ResourceService.class,ResourceTO.class);
  assertNotNull(actual);
  assertNotNull(actual.getProvision(AnyTypeKind.USER.name()).getMapping());
  assertNotNull(actual.getProvision(AnyTypeKind.USER.name()).getMapping().getItems());
  assertEquals(MappingPurpose.PROPAGATION,actual.getProvision(AnyTypeKind.USER.name()).getMapping().getConnObjectKeyItem().getPurpose());
  for (  MappingItemTO itemTO : actual.getProvision(AnyTypeKind.USER.name()).getMapping().getItems()) {
    if ("gender".equals(itemTO.getIntAttrName())) {
      assertEquals(MappingPurpose.NONE,itemTO.getPurpose());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.syncope.fit.core.SchedTaskITCase </h4><pre class="type-11 type-4 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void list(){
  PagedResult<SchedTaskTO> tasks=taskService.list(new TaskQuery.Builder().type(TaskType.SCHEDULED).build());
  assertFalse(tasks.getResult().isEmpty());
  for (  AbstractTaskTO task : tasks.getResult()) {
    if (!(task instanceof SchedTaskTO) || task instanceof SyncTaskTO || task instanceof PushTaskTO) {
      fail();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.syncope.fit.core.SyncTaskITCase </h4><pre class="type-11 type-4 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void list(){
  PagedResult<SyncTaskTO> tasks=taskService.list(new TaskQuery.Builder().type(TaskType.SYNCHRONIZATION).build());
  assertFalse(tasks.getResult().isEmpty());
  for (  AbstractTaskTO task : tasks.getResult()) {
    if (!(task instanceof SyncTaskTO)) {
      fail();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.syncope.fit.core.UserWorkflowITCase </h4><pre class="type-5 type-11 type-4 type-1 type-6 type-14 type-2 type-10 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void issueSYNCOPE15(){
  Assume.assumeTrue(ActivitiDetector.isActivitiEnabledForUsers(syncopeService));
  List<WorkflowFormTO> forms=userWorkflowService.getForms();
  assertNotNull(forms);
  int preForms=forms.size();
  UserTO userTO=UserITCase.getUniqueSampleTO("issueSYNCOPE15@syncope.apache.org");
  userTO.getResources().clear();
  userTO.getVirAttrs().clear();
  userTO.getDerAttrs().clear();
  userTO.getMemberships().clear();
  userTO.getMemberships().add(new MembershipTO.Builder().group(9L).build());
  userTO=createUser(userTO).getAny();
  assertNotNull(userTO);
  assertNotEquals(0L,userTO.getKey(),0);
  assertNotNull(userTO.getCreationDate());
  assertNotNull(userTO.getCreator());
  assertNotNull(userTO.getLastChangeDate());
  assertNotNull(userTO.getLastModifier());
  assertEquals(userTO.getCreationDate(),userTO.getLastChangeDate());
  forms=userWorkflowService.getForms();
  assertEquals(preForms + 1,forms.size());
  WorkflowFormTO form=userWorkflowService.getFormForUser(userTO.getKey());
  assertNotNull(form);
  UserWorkflowService userService3=clientFactory.create("bellini",ADMIN_PWD).getService(UserWorkflowService.class);
  form=userService3.claimForm(form.getTaskId());
  assertNotNull(form);
  assertNotNull(form.getTaskId());
  assertNotNull(form.getOwner());
  form=userWorkflowService.claimForm(form.getTaskId());
  assertNotNull(form);
  Map<String,WorkflowFormPropertyTO> props=form.getPropertyMap();
  props.get("approve").setValue(Boolean.TRUE.toString());
  form.getProperties().clear();
  form.getProperties().addAll(props.values());
  userTO=userWorkflowService.submitForm(form);
  assertNotNull(userTO);
  assertEquals(preForms,userWorkflowService.getForms().size());
  assertNull(userWorkflowService.getFormForUser(userTO.getKey()));
  forms=userWorkflowService.getFormsByName(userTO.getKey(),"Create approval");
  assertFalse(forms.isEmpty());
  int count=0;
  for (  WorkflowFormTO hform : forms) {
    if (form.getTaskId().equals(hform.getTaskId())) {
      count++;
      assertEquals("createApproval",hform.getKey());
      assertNotNull(hform.getCreateTime());
      assertNotNull(hform.getDueDate());
      assertTrue(Boolean.parseBoolean(hform.getPropertyMap().get("approve").getValue()));
      assertNull(hform.getPropertyMap().get("rejectReason").getValue());
    }
  }
  assertEquals(1,count);
  userService.delete(userTO.getKey());
  try {
    userService.read(userTO.getKey());
    fail();
  }
 catch (  Exception ignore) {
    assertNotNull(ignore);
  }
  try {
    userWorkflowService.getFormsByName(userTO.getKey(),"Create approval");
    fail();
  }
 catch (  Exception ignore) {
    assertNotNull(ignore);
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
