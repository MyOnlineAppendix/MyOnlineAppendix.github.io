<h3><span class=" glyphicon glyphicon-tag"/>&nbspIgnoredMethod</h3><kbd>Is not executed with the test suite</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.hadoop.hbase.TestPerformanceEvaluation </h4><pre class="type-4 type-7 type-8 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Exercise the mr spec writing.  Simple assertions to make sure it is basically working.
 * @throws IOException
 */
@Ignore @Test public void testWriteInputFile() throws IOException {
  TestOptions opts=new PerformanceEvaluation.TestOptions();
  final int clients=10;
  opts.setNumClientThreads(clients);
  opts.setPerClientRunRows(10);
  Path dir=PerformanceEvaluation.writeInputFile(HTU.getConfiguration(),opts,HTU.getDataTestDir());
  FileSystem fs=FileSystem.get(HTU.getConfiguration());
  Path p=new Path(dir,PerformanceEvaluation.JOB_INPUT_FILENAME);
  long len=fs.getFileStatus(p).getLen();
  assertTrue(len > 0);
  byte[] content=new byte[(int)len];
  FSDataInputStream dis=fs.open(p);
  try {
    dis.readFully(content);
    BufferedReader br=new BufferedReader(new InputStreamReader(new ByteArrayInputStream(content)));
    int count=0;
    while (br.readLine() != null) {
      count++;
    }
    assertEquals(clients * PerformanceEvaluation.TASKS_PER_CLIENT,count);
  }
  finally {
    dis.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.TestTimeout </h4><pre class="type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Is not executed with the test suite
"></span><br>
/** 
 * Enable to check if timeout works.
 * Can't enable as it waits 30seconds and expected doesn't do Exception catching
 */
@Ignore @Test public void infiniteLoop(){
  while (true) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestClientNoCluster </h4><pre class="type-11 type-8 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Remove the @Ignore to try out timeout and retry asettings
 * @throws IOException
 */
@Ignore @Test public void testTimeoutAndRetries() throws IOException {
  Configuration localConfig=HBaseConfiguration.create(this.conf);
  localConfig.set("hbase.client.connection.impl",RpcTimeoutConnection.class.getName());
  Connection connection=ConnectionFactory.createConnection(localConfig);
  Table table=connection.getTable(TableName.META_TABLE_NAME);
  Throwable t=null;
  LOG.info("Start");
  try {
    table.exists(new Get(Bytes.toBytes("abc")));
  }
 catch (  SocketTimeoutException e) {
    LOG.info("Got expected exception",e);
    t=e;
  }
catch (  RetriesExhaustedException e) {
    fail();
  }
 finally {
    table.close();
  }
  connection.close();
  LOG.info("Stop");
  assertTrue(t != null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestFastFail </h4><pre class="type-4 type-8 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("Can go zombie -- see HBASE-14421; FIX") @Test public void testFastFail() throws IOException, InterruptedException {
  Admin admin=TEST_UTIL.getHBaseAdmin();
  final String tableName="testClientRelearningExperiment";
  HTableDescriptor desc=new HTableDescriptor(TableName.valueOf(Bytes.toBytes(tableName)));
  desc.addFamily(new HColumnDescriptor(FAMILY));
  admin.createTable(desc,Bytes.toBytes("aaaa"),Bytes.toBytes("zzzz"),32);
  final long numRows=1000;
  Configuration conf=TEST_UTIL.getConfiguration();
  conf.setLong(HConstants.HBASE_CLIENT_OPERATION_TIMEOUT,SLEEPTIME * 100);
  conf.setInt(HConstants.HBASE_CLIENT_PAUSE,SLEEPTIME / 10);
  conf.setBoolean(HConstants.HBASE_CLIENT_FAST_FAIL_MODE_ENABLED,true);
  conf.setLong(HConstants.HBASE_CLIENT_FAST_FAIL_THREASHOLD_MS,0);
  conf.setClass(HConstants.HBASE_CLIENT_FAST_FAIL_INTERCEPTOR_IMPL,MyPreemptiveFastFailInterceptor.class,PreemptiveFastFailInterceptor.class);
  final Connection connection=ConnectionFactory.createConnection(conf);
  List<Put> puts=new ArrayList<>();
  for (long i=0; i < numRows; i++) {
    byte[] rowKey=longToByteArrayKey(i);
    Put put=new Put(rowKey);
    byte[] value=rowKey;
    put.addColumn(FAMILY,QUALIFIER,value);
    puts.add(put);
  }
  try (Table table=connection.getTable(TableName.valueOf(tableName))){
    table.put(puts);
    LOG.info("Written all puts.");
  }
   int nThreads=100;
  ExecutorService service=Executors.newFixedThreadPool(nThreads);
  final CountDownLatch continueOtherHalf=new CountDownLatch(1);
  final CountDownLatch doneHalfway=new CountDownLatch(nThreads);
  final AtomicInteger numSuccessfullThreads=new AtomicInteger(0);
  final AtomicInteger numFailedThreads=new AtomicInteger(0);
  final AtomicLong totalTimeTaken=new AtomicLong(0);
  final AtomicInteger numBlockedWorkers=new AtomicInteger(0);
  final AtomicInteger numPreemptiveFastFailExceptions=new AtomicInteger(0);
  List<Future<Boolean>> futures=new ArrayList<Future<Boolean>>();
  for (int i=0; i < nThreads; i++) {
    futures.add(service.submit(new Callable<Boolean>(){
      /** 
 * The workers are going to perform a couple of reads. The second read
 * will follow the killing of a regionserver so that we make sure that
 * some of threads go into PreemptiveFastFailExcception
 */
      public Boolean call() throws Exception {
        try (Table table=connection.getTable(TableName.valueOf(tableName))){
          Thread.sleep(Math.abs(random.nextInt()) % 250);
          byte[] row=longToByteArrayKey(Math.abs(random.nextLong()) % numRows);
          Get g=new Get(row);
          g.addColumn(FAMILY,QUALIFIER);
          try {
            table.get(g);
          }
 catch (          Exception e) {
            LOG.debug("Get failed : ",e);
            doneHalfway.countDown();
            return false;
          }
          doneHalfway.countDown();
          continueOtherHalf.await();
          long startTime=System.currentTimeMillis();
          g=new Get(row);
          g.addColumn(FAMILY,QUALIFIER);
          try {
            table.get(g);
            numSuccessfullThreads.addAndGet(1);
          }
 catch (          Exception e) {
            if (e instanceof PreemptiveFastFailException) {
              numPreemptiveFastFailExceptions.addAndGet(1);
            }
            numFailedThreads.addAndGet(1);
            return false;
          }
 finally {
            long enTime=System.currentTimeMillis();
            totalTimeTaken.addAndGet(enTime - startTime);
            if ((enTime - startTime) >= SLEEPTIME) {
              numBlockedWorkers.addAndGet(1);
            }
          }
          return true;
        }
 catch (        Exception e) {
          LOG.error("Caught unknown exception",e);
          doneHalfway.countDown();
          return false;
        }
      }
    }
));
  }
  doneHalfway.await();
  TEST_UTIL.getHBaseCluster().getRegionServer(0).getRpcServer().stop();
  TEST_UTIL.getHBaseCluster().getRegionServer(0).stop("Testing");
  continueOtherHalf.countDown();
  Thread.sleep(2 * SLEEPTIME);
  TEST_UTIL.getHBaseCluster().startRegionServer();
  int numThreadsReturnedFalse=0;
  int numThreadsReturnedTrue=0;
  int numThreadsThrewExceptions=0;
  for (  Future<Boolean> f : futures) {
    try {
      numThreadsReturnedTrue+=f.get() ? 1 : 0;
      numThreadsReturnedFalse+=f.get() ? 0 : 1;
    }
 catch (    Exception e) {
      numThreadsThrewExceptions++;
    }
  }
  LOG.debug("numThreadsReturnedFalse:" + numThreadsReturnedFalse + " numThreadsReturnedTrue:"+ numThreadsReturnedTrue+ " numThreadsThrewExceptions:"+ numThreadsThrewExceptions+ " numFailedThreads:"+ numFailedThreads.get()+ " numSuccessfullThreads:"+ numSuccessfullThreads.get()+ " numBlockedWorkers:"+ numBlockedWorkers.get()+ " totalTimeWaited: "+ totalTimeTaken.get() / (numBlockedWorkers.get() == 0 ? Long.MAX_VALUE : numBlockedWorkers.get()) + " numPFFEs: " + numPreemptiveFastFailExceptions.get());
  assertEquals("The expected number of all the successfull and the failed " + "threads should equal the total number of threads that we spawned",nThreads,numFailedThreads.get() + numSuccessfullThreads.get());
  assertEquals("All the failures should be coming from the secondput failure",numFailedThreads.get(),numThreadsReturnedFalse);
  assertEquals("Number of threads that threw execution exceptions " + "otherwise should be 0",numThreadsThrewExceptions,0);
  assertEquals("The regionservers that returned true should equal to the" + " number of successful threads",numThreadsReturnedTrue,numSuccessfullThreads.get());
  assertTrue("There will be atleast one thread that retried instead of failing",MyPreemptiveFastFailInterceptor.numBraveSouls.get() > 0);
  assertTrue("There will be atleast one PreemptiveFastFail exception," + " otherwise, the test makes little sense." + "numPreemptiveFastFailExceptions: "+ numPreemptiveFastFailExceptions.get(),numPreemptiveFastFailExceptions.get() > 0);
  assertTrue("Only few thread should ideally be waiting for the dead " + "regionserver to be coming back. numBlockedWorkers:" + numBlockedWorkers.get() + " threads that retried : "+ MyPreemptiveFastFailInterceptor.numBraveSouls.get(),numBlockedWorkers.get() <= MyPreemptiveFastFailInterceptor.numBraveSouls.get());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestFromClientSide </h4><pre class="type-14 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is an empty test case">EmptyTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Is an empty test case
- Is not executed with the test suite
"></span><br>
@Ignore @Test public void testMultipleRegionsAndBatchPuts() throws Exception {
}

</code></pre>

<br>
<pre class="type-14 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is an empty test case">EmptyTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Is an empty test case
- Is not executed with the test suite
"></span><br>
@Ignore @Test public void testMultipleRowMultipleFamily() throws Exception {
}

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-8 type-13 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("Flakey: HBASE-8989") @Test public void testClientPoolThreadLocal() throws IOException {
  final TableName tableName=TableName.valueOf("testClientPoolThreadLocal");
  int poolSize=Integer.MAX_VALUE;
  int numVersions=3;
  Configuration conf=TEST_UTIL.getConfiguration();
  conf.set(HConstants.HBASE_CLIENT_IPC_POOL_TYPE,"thread-local");
  conf.setInt(HConstants.HBASE_CLIENT_IPC_POOL_SIZE,poolSize);
  final Table table=TEST_UTIL.createTable(tableName,new byte[][]{FAMILY},3);
  final long ts=EnvironmentEdgeManager.currentTime();
  final Get get=new Get(ROW);
  get.addColumn(FAMILY,QUALIFIER);
  get.setMaxVersions();
  for (int versions=1; versions <= numVersions; versions++) {
    Put put=new Put(ROW);
    put.addColumn(FAMILY,QUALIFIER,ts + versions,VALUE);
    table.put(put);
    Result result=table.get(get);
    NavigableMap<Long,byte[]> navigableMap=result.getMap().get(FAMILY).get(QUALIFIER);
    assertEquals("The number of versions of '" + FAMILY + ":"+ QUALIFIER+ " did not match "+ versions+ "; "+ put.toString()+ ", "+ get.toString(),versions,navigableMap.size());
    for (    Map.Entry<Long,byte[]> entry : navigableMap.entrySet()) {
      assertTrue("The value at time " + entry.getKey() + " did not match what was put",Bytes.equals(VALUE,entry.getValue()));
    }
  }
  final Object waitLock=new Object();
  ExecutorService executorService=Executors.newFixedThreadPool(numVersions);
  final AtomicReference<AssertionError> error=new AtomicReference<AssertionError>(null);
  for (int versions=numVersions; versions < numVersions * 2; versions++) {
    final int versionsCopy=versions;
    executorService.submit(new Callable<Void>(){
      @Override public Void call(){
        try {
          Put put=new Put(ROW);
          put.addColumn(FAMILY,QUALIFIER,ts + versionsCopy,VALUE);
          table.put(put);
          Result result=table.get(get);
          NavigableMap<Long,byte[]> navigableMap=result.getMap().get(FAMILY).get(QUALIFIER);
          assertEquals("The number of versions of '" + Bytes.toString(FAMILY) + ":"+ Bytes.toString(QUALIFIER)+ " did not match "+ versionsCopy,versionsCopy,navigableMap.size());
          for (          Map.Entry<Long,byte[]> entry : navigableMap.entrySet()) {
            assertTrue("The value at time " + entry.getKey() + " did not match what was put",Bytes.equals(VALUE,entry.getValue()));
          }
synchronized (waitLock) {
            waitLock.wait();
          }
        }
 catch (        Exception e) {
        }
catch (        AssertionError e) {
          error.set(e);
          LOG.error(e);
        }
        return null;
      }
    }
);
  }
synchronized (waitLock) {
    waitLock.notifyAll();
  }
  executorService.shutdownNow();
  assertNull(error.get());
}

</code></pre>

<br>
<pre class="type-14 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is an empty test case">EmptyTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Is an empty test case
- Is not executed with the test suite
"></span><br>
@Ignore @Test public void testMillions() throws Exception {
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestHBaseAdminNoCluster </h4><pre class="type-11 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Verify that PleaseHoldException gets retried.
 * HBASE-8764
 * @throws IOException
 * @throws ZooKeeperConnectionException
 * @throws MasterNotRunningException
 * @throws ServiceException
 */
@Ignore @Test public void testMasterMonitorCallableRetries() throws MasterNotRunningException, ZooKeeperConnectionException, IOException, ServiceException {
  Configuration configuration=HBaseConfiguration.create();
  configuration.setLong(HConstants.HBASE_CLIENT_PAUSE,1);
  final int count=10;
  configuration.setInt(HConstants.HBASE_CLIENT_RETRIES_NUMBER,count);
  ClusterConnection connection=HConnectionTestingUtility.getMockedConnection(configuration);
  MasterKeepAliveConnection masterAdmin=Mockito.mock(MasterKeepAliveConnection.class);
  Mockito.when(masterAdmin.createTable((RpcController)Mockito.any(),(CreateTableRequest)Mockito.any())).thenThrow(new ServiceException("Test fail").initCause(new PleaseHoldException("test")));
  Mockito.when(connection.getKeepAliveMasterService()).thenReturn(masterAdmin);
  Admin admin=new HBaseAdmin(connection);
  try {
    HTableDescriptor htd=new HTableDescriptor(TableName.valueOf("testMasterMonitorCollableRetries"));
    try {
      admin.createTable(htd,HBaseTestingUtility.KEYS_FOR_HBA_CREATE_TABLE);
      fail();
    }
 catch (    RetriesExhaustedException e) {
      LOG.info("Expected fail",e);
    }
    Mockito.verify(masterAdmin,Mockito.atLeast(count)).createTable((RpcController)Mockito.any(),(CreateTableRequest)Mockito.any());
  }
  finally {
    admin.close();
    if (connection != null)     connection.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestHCM </h4><pre class="type-7 type-8 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("Test presumes RETRY_BACKOFF will never change; it has") @Test public void testErrorBackoffTimeCalculation() throws Exception {
  final long ANY_PAUSE=100;
  ServerName location=ServerName.valueOf("127.0.0.1",1,0);
  ServerName diffLocation=ServerName.valueOf("127.0.0.1",2,0);
  ManualEnvironmentEdge timeMachine=new ManualEnvironmentEdge();
  EnvironmentEdgeManager.injectEdge(timeMachine);
  try {
    long timeBase=timeMachine.currentTime();
    long largeAmountOfTime=ANY_PAUSE * 1000;
    ConnectionImplementation.ServerErrorTracker tracker=new ConnectionImplementation.ServerErrorTracker(largeAmountOfTime,100);
    assertEquals(0,tracker.calculateBackoffTime(location,ANY_PAUSE));
    tracker.reportServerError(location);
    assertEqualsWithJitter(ANY_PAUSE,tracker.calculateBackoffTime(location,ANY_PAUSE));
    tracker.reportServerError(location);
    tracker.reportServerError(location);
    tracker.reportServerError(location);
    assertEqualsWithJitter(ANY_PAUSE * 5,tracker.calculateBackoffTime(location,ANY_PAUSE));
    assertEquals(0,tracker.calculateBackoffTime(diffLocation,ANY_PAUSE));
    tracker.reportServerError(diffLocation);
    assertEqualsWithJitter(ANY_PAUSE,tracker.calculateBackoffTime(diffLocation,ANY_PAUSE));
    assertEqualsWithJitter(ANY_PAUSE * 10,tracker.calculateBackoffTime(location,ANY_PAUSE * 2));
    long timeShift=(long)(ANY_PAUSE * 0.5);
    timeMachine.setValue(timeBase + timeShift);
    assertEqualsWithJitter((ANY_PAUSE * 5) - timeShift,tracker.calculateBackoffTime(location,ANY_PAUSE),ANY_PAUSE * 2);
    timeMachine.setValue(timeBase + ANY_PAUSE * 100);
    assertEquals(0,tracker.calculateBackoffTime(location,ANY_PAUSE));
    long timeLeft=(long)(ANY_PAUSE * 0.5);
    timeMachine.setValue(timeBase + largeAmountOfTime - timeLeft);
    assertTrue(tracker.canTryMore(1));
    tracker.reportServerError(location);
    assertEquals(timeLeft,tracker.calculateBackoffTime(location,ANY_PAUSE));
    timeMachine.setValue(timeBase + largeAmountOfTime);
    assertFalse(tracker.canTryMore(1));
  }
  finally {
    EnvironmentEdgeManager.reset();
  }
}

</code></pre>

<br>
<pre class="type-7 type-13 type-17 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore @Test(expected=RegionServerStoppedException.class) public void testClusterStatus() throws Exception {
  TableName tn=TableName.valueOf("testClusterStatus");
  byte[] cf="cf".getBytes();
  byte[] rk="rk1".getBytes();
  JVMClusterUtil.RegionServerThread rs=TEST_UTIL.getHBaseCluster().startRegionServer();
  rs.waitForServerOnline();
  final ServerName sn=rs.getRegionServer().getServerName();
  Table t=TEST_UTIL.createTable(tn,cf);
  TEST_UTIL.waitTableAvailable(tn);
  while (TEST_UTIL.getHBaseCluster().getMaster().getAssignmentManager().getRegionStates().isRegionsInTransition()) {
    Thread.sleep(1);
  }
  final ConnectionImplementation hci=(ConnectionImplementation)TEST_UTIL.getConnection();
  try (RegionLocator l=TEST_UTIL.getConnection().getRegionLocator(tn)){
    while (l.getRegionLocation(rk).getPort() != sn.getPort()) {
      TEST_UTIL.getHBaseAdmin().move(l.getRegionLocation(rk).getRegionInfo().getEncodedNameAsBytes(),Bytes.toBytes(sn.toString()));
      while (TEST_UTIL.getHBaseCluster().getMaster().getAssignmentManager().getRegionStates().isRegionsInTransition()) {
        Thread.sleep(1);
      }
      hci.clearRegionCache(tn);
    }
    Assert.assertNotNull(hci.clusterStatusListener);
    TEST_UTIL.assertRegionOnServer(l.getRegionLocation(rk).getRegionInfo(),sn,20000);
  }
   Put p1=new Put(rk);
  p1.addColumn(cf,"qual".getBytes(),"val".getBytes());
  t.put(p1);
  rs.getRegionServer().abort("I'm dead");
  TEST_UTIL.waitFor(40000,1000,true,new Waiter.Predicate<Exception>(){
    @Override public boolean evaluate() throws Exception {
      return TEST_UTIL.getHBaseCluster().getMaster().getServerManager().getDeadServers().isDeadServer(sn);
    }
  }
);
  TEST_UTIL.waitFor(40000,1000,true,new Waiter.Predicate<Exception>(){
    @Override public boolean evaluate() throws Exception {
      return hci.clusterStatusListener.isDeadServer(sn);
    }
  }
);
  t.close();
  hci.getClient(sn);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.coprocessor.TestRegionObserverInterface </h4><pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore @Test(timeout=300000) public void testRecovery() throws Exception {
  LOG.info(TestRegionObserverInterface.class.getName() + ".testRecovery");
  TableName tableName=TableName.valueOf(TEST_TABLE.getNameAsString() + ".testRecovery");
  Table table=util.createTable(tableName,new byte[][]{A,B,C});
  try (RegionLocator locator=util.getConnection().getRegionLocator(tableName)){
    JVMClusterUtil.RegionServerThread rs1=cluster.startRegionServer();
    ServerName sn2=rs1.getRegionServer().getServerName();
    String regEN=locator.getAllRegionLocations().get(0).getRegionInfo().getEncodedName();
    util.getHBaseAdmin().move(regEN.getBytes(),sn2.getServerName().getBytes());
    while (!sn2.equals(locator.getAllRegionLocations().get(0).getServerName())) {
      Thread.sleep(100);
    }
    Put put=new Put(ROW);
    put.addColumn(A,A,A);
    put.addColumn(B,B,B);
    put.addColumn(C,C,C);
    table.put(put);
    verifyMethodResult(SimpleRegionObserver.class,new String[]{"hadPreGet","hadPostGet","hadPrePut","hadPostPut","hadPreBatchMutate","hadPostBatchMutate","hadDelete"},tableName,new Boolean[]{false,false,true,true,true,true,false});
    verifyMethodResult(SimpleRegionObserver.class,new String[]{"getCtPreWALRestore","getCtPostWALRestore","getCtPrePut","getCtPostPut","getCtPreWALRestoreDeprecated","getCtPostWALRestoreDeprecated"},tableName,new Integer[]{0,0,1,1,0,0});
    cluster.killRegionServer(rs1.getRegionServer().getServerName());
    Threads.sleep(1000);
    util.waitUntilAllRegionsAssigned(tableName);
    LOG.info("All regions assigned");
    verifyMethodResult(SimpleRegionObserver.class,new String[]{"getCtPreWALRestore","getCtPostWALRestore","getCtPrePut","getCtPostPut","getCtPreWALRestoreDeprecated","getCtPostWALRestoreDeprecated"},tableName,new Integer[]{1,1,0,0,0,0});
  }
  finally {
    util.deleteTable(tableName);
    table.close();
  }
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore @Test(timeout=300000) public void testLegacyRecovery() throws Exception {
  LOG.info(TestRegionObserverInterface.class.getName() + ".testLegacyRecovery");
  TableName tableName=TableName.valueOf(TEST_TABLE.getNameAsString() + ".testLegacyRecovery");
  Table table=util.createTable(tableName,new byte[][]{A,B,C});
  try {
    try (RegionLocator locator=util.getConnection().getRegionLocator(tableName)){
      JVMClusterUtil.RegionServerThread rs1=cluster.startRegionServer();
      ServerName sn2=rs1.getRegionServer().getServerName();
      String regEN=locator.getAllRegionLocations().get(0).getRegionInfo().getEncodedName();
      util.getHBaseAdmin().move(regEN.getBytes(),sn2.getServerName().getBytes());
      while (!sn2.equals(locator.getAllRegionLocations().get(0).getServerName())) {
        Thread.sleep(100);
      }
      Put put=new Put(ROW);
      put.addColumn(A,A,A);
      put.addColumn(B,B,B);
      put.addColumn(C,C,C);
      table.put(put);
      verifyMethodResult(SimpleRegionObserver.Legacy.class,new String[]{"hadPreGet","hadPostGet","hadPrePut","hadPostPut","hadPreBatchMutate","hadPostBatchMutate","hadDelete"},tableName,new Boolean[]{false,false,true,true,true,true,false});
      verifyMethodResult(SimpleRegionObserver.Legacy.class,new String[]{"getCtPreWALRestore","getCtPostWALRestore","getCtPrePut","getCtPostPut","getCtPreWALRestoreDeprecated","getCtPostWALRestoreDeprecated"},tableName,new Integer[]{0,0,1,1,0,0});
      cluster.killRegionServer(rs1.getRegionServer().getServerName());
      Threads.sleep(1000);
      util.waitUntilAllRegionsAssigned(tableName);
      LOG.info("All regions assigned");
      verifyMethodResult(SimpleRegionObserver.Legacy.class,new String[]{"getCtPreWALRestore","getCtPostWALRestore","getCtPrePut","getCtPostPut","getCtPreWALRestoreDeprecated","getCtPostWALRestoreDeprecated"},tableName,new Integer[]{1,1,0,0,1,1});
    }
   }
  finally {
    util.deleteTable(tableName);
    table.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.http.TestHttpServer </h4><pre class="type-4 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testContentTypes() throws Exception {
  URL cssUrl=new URL(baseUrl,"/static/test.css");
  HttpURLConnection conn=(HttpURLConnection)cssUrl.openConnection();
  conn.connect();
  assertEquals(200,conn.getResponseCode());
  assertEquals("text/css",conn.getContentType());
  URL servletUrl=new URL(baseUrl,"/echo?a=b");
  conn=(HttpURLConnection)servletUrl.openConnection();
  conn.connect();
  assertEquals(200,conn.getResponseCode());
  assertEquals("text/plain; charset=utf-8",conn.getContentType());
  servletUrl=new URL(baseUrl,"/echo?a=b.css");
  conn=(HttpURLConnection)servletUrl.openConnection();
  conn.connect();
  assertEquals(200,conn.getResponseCode());
  assertEquals("text/plain; charset=utf-8",conn.getContentType());
  servletUrl=new URL(baseUrl,"/htmlcontent");
  conn=(HttpURLConnection)servletUrl.openConnection();
  conn.connect();
  assertEquals(200,conn.getResponseCode());
  assertEquals("text/html; charset=utf-8",conn.getContentType());
  servletUrl=new URL(baseUrl,"/testjsp.jsp");
  conn=(HttpURLConnection)servletUrl.openConnection();
  conn.connect();
  assertEquals(200,conn.getResponseCode());
  assertEquals("text/html; charset=utf-8",conn.getContentType());
}

</code></pre>

<br>
<pre class="type-7 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Verify the access for /logs, /stacks, /conf, /logLevel and /metrics
 * servlets, when authentication filters are set, but authorization is not
 * enabled.
 * @throws Exception 
 */
@Test @Ignore public void testDisabledAuthorizationOfDefaultServlets() throws Exception {
  Configuration conf=new Configuration();
  conf.set(HttpServer.FILTER_INITIALIZERS_PROPERTY,DummyFilterInitializer.class.getName());
  conf.set(CommonConfigurationKeys.HADOOP_SECURITY_GROUP_MAPPING,MyGroupsProvider.class.getName());
  Groups.getUserToGroupsMappingService(conf);
  MyGroupsProvider.clearMapping();
  MyGroupsProvider.mapping.put("userA",Arrays.asList("groupA"));
  MyGroupsProvider.mapping.put("userB",Arrays.asList("groupB"));
  HttpServer myServer=new HttpServer.Builder().setName("test").addEndpoint(new URI("http://localhost:0")).setFindPort(true).build();
  myServer.setAttribute(HttpServer.CONF_CONTEXT_ATTRIBUTE,conf);
  myServer.start();
  String serverURL="http://" + NetUtils.getHostPortString(myServer.getConnectorAddress(0)) + "/";
  for (  String servlet : new String[]{"conf","logs","stacks","logLevel","metrics"}) {
    for (    String user : new String[]{"userA","userB"}) {
      assertEquals(HttpURLConnection.HTTP_OK,getHttpStatusCode(serverURL + servlet,user));
    }
  }
  myServer.stop();
}

</code></pre>

<br>
<pre class="type-4 type-7 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Verify the administrator access for /logs, /stacks, /conf, /logLevel and
 * /metrics servlets.
 * @throws Exception
 */
@Test @Ignore public void testAuthorizationOfDefaultServlets() throws Exception {
  Configuration conf=new Configuration();
  conf.setBoolean(CommonConfigurationKeys.HADOOP_SECURITY_AUTHORIZATION,true);
  conf.setBoolean(CommonConfigurationKeys.HADOOP_SECURITY_INSTRUMENTATION_REQUIRES_ADMIN,true);
  conf.set(HttpServer.FILTER_INITIALIZERS_PROPERTY,DummyFilterInitializer.class.getName());
  conf.set(CommonConfigurationKeys.HADOOP_SECURITY_GROUP_MAPPING,MyGroupsProvider.class.getName());
  Groups.getUserToGroupsMappingService(conf);
  MyGroupsProvider.clearMapping();
  MyGroupsProvider.mapping.put("userA",Arrays.asList("groupA"));
  MyGroupsProvider.mapping.put("userB",Arrays.asList("groupB"));
  MyGroupsProvider.mapping.put("userC",Arrays.asList("groupC"));
  MyGroupsProvider.mapping.put("userD",Arrays.asList("groupD"));
  MyGroupsProvider.mapping.put("userE",Arrays.asList("groupE"));
  HttpServer myServer=new HttpServer.Builder().setName("test").addEndpoint(new URI("http://localhost:0")).setFindPort(true).setConf(conf).setACL(new AccessControlList("userA,userB groupC,groupD")).build();
  myServer.setAttribute(HttpServer.CONF_CONTEXT_ATTRIBUTE,conf);
  myServer.start();
  String serverURL="http://" + NetUtils.getHostPortString(myServer.getConnectorAddress(0)) + "/";
  for (  String servlet : new String[]{"conf","logs","stacks","logLevel","metrics"}) {
    for (    String user : new String[]{"userA","userB","userC","userD"}) {
      assertEquals(HttpURLConnection.HTTP_OK,getHttpStatusCode(serverURL + servlet,user));
    }
    assertEquals(HttpURLConnection.HTTP_UNAUTHORIZED,getHttpStatusCode(serverURL + servlet,"userE"));
  }
  myServer.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.http.TestHttpServerLifecycle </h4><pre class="type-7 type-13 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Test that the server is alive once started
 * @throws Throwableon failure
 */
@Ignore("Hangs on occasion; see HBASE-14430") @Test(timeout=60000) public void testWepAppContextAfterServerStop() throws Throwable {
  HttpServer server=null;
  String key="test.attribute.key";
  String value="test.attribute.value";
  server=createTestServer();
  assertNotLive(server);
  server.start();
  server.setAttribute(key,value);
  assertAlive(server);
  assertEquals(value,server.getAttribute(key));
  stop(server);
  assertNull("Server context should have cleared",server.getAttribute(key));
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
/** 
 * Test that the server is not alive once stopped
 * @throws Throwable on failure
 */
@Ignore("Hangs on occasion; see HBASE-14430") @Test(timeout=60000) public void testStoppingTwiceServerIsAllowed() throws Throwable {
  HttpServer server=createAndStartTestServer();
  assertAlive(server);
  stop(server);
  assertNotLive(server);
  stop(server);
  assertNotLive(server);
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
/** 
 * Test that the server is alive once started
 * @throws Throwable on failure
 */
@Ignore("Hangs on occasion; see HBASE-14430") @Test(timeout=60000) public void testCreatedServerIsNotAlive() throws Throwable {
  HttpServer server=createTestServer();
  assertNotLive(server);
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore("Hangs on occasion; see HBASE-14430") @Test(timeout=60000) public void testStopUnstartedServer() throws Throwable {
  HttpServer server=createTestServer();
  stop(server);
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
/** 
 * Test that the server is not alive once stopped
 * @throws Throwable on failure
 */
@Ignore("Hangs on occasion; see HBASE-14430") @Test(timeout=60000) public void testStoppedServerIsNotAlive() throws Throwable {
  HttpServer server=createAndStartTestServer();
  assertAlive(server);
  stop(server);
  assertNotLive(server);
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
/** 
 * Test that the server is alive once started
 * @throws Throwable on failure
 */
@Ignore("Hangs on occasion; see HBASE-14430") @Test(timeout=60000) public void testStartedServerIsAlive() throws Throwable {
  HttpServer server=null;
  server=createTestServer();
  assertNotLive(server);
  server.start();
  assertAlive(server);
  stop(server);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.http.TestServletFilter </h4><pre class="type-9 type-10 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testServletFilter() throws Exception {
  Configuration conf=new Configuration();
  conf.set(HttpServer.FILTER_INITIALIZERS_PROPERTY,SimpleFilter.Initializer.class.getName());
  HttpServer http=createTestServer(conf);
  http.start();
  final String fsckURL="/fsck";
  final String stacksURL="/stacks";
  final String ajspURL="/a.jsp";
  final String logURL="/logs/a.log";
  final String hadooplogoURL="/static/hadoop-logo.jpg";
  final String[] urls={fsckURL,stacksURL,ajspURL,logURL,hadooplogoURL};
  final Random ran=new Random();
  final int[] sequence=new int[50];
  for (int i=0; i < sequence.length; i++) {
    sequence[i]=ran.nextInt(urls.length);
  }
  final String prefix="http://" + NetUtils.getHostPortString(http.getConnectorAddress(0));
  try {
    for (int i=0; i < sequence.length; i++) {
      access(prefix + urls[sequence[i]]);
      if (sequence[i] == 0) {
        assertEquals(null,uri);
      }
 else {
        assertEquals(urls[sequence[i]],uri);
        uri=null;
      }
    }
  }
  finally {
    http.stop();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.ipc.IntegrationTestRpcClient </h4><pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test(timeout=900000) @Ignore public void testRpcWithChaosMonkeyWithAsyncClient() throws Throwable {
  for (int i=0; i < numIterations; i++) {
    TimeoutThread.runWithTimeout(new Callable<Void>(){
      @Override public Void call() throws Exception {
        try {
          testRpcWithChaosMonkey(false);
        }
 catch (        Throwable e) {
          if (e instanceof Exception) {
            throw (Exception)e;
          }
 else {
            throw new Exception(e);
          }
        }
        return null;
      }
    }
,90000);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.ipc.TestRpcHandlerException </h4><pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore @Test public void testRpcScheduler() throws IOException, InterruptedException {
  PriorityFunction qosFunction=mock(PriorityFunction.class);
  Abortable abortable=new AbortServer();
  RpcScheduler scheduler=new SimpleRpcScheduler(CONF,2,0,0,qosFunction,abortable,0);
  RpcServer rpcServer=new TestRpcServer(scheduler);
  RpcClientImpl client=new RpcClientImpl(CONF,HConstants.CLUSTER_ID_DEFAULT);
  try {
    rpcServer.start();
    MethodDescriptor md=SERVICE.getDescriptorForType().findMethodByName("echo");
    EchoRequestProto param=EchoRequestProto.newBuilder().setMessage("hello").build();
    PayloadCarryingRpcController controller=new PayloadCarryingRpcController(CellUtil.createCellScanner(ImmutableList.of(CELL)));
    InetSocketAddress address=rpcServer.getListenerAddress();
    if (address == null) {
      throw new IOException("Listener channel is closed");
    }
    client.call(controller,md,param,md.getOutputType().toProto(),User.getCurrent(),address,new MetricsConnection.CallStats());
  }
 catch (  Throwable e) {
    assert (abortable.isAborted() == true);
  }
 finally {
    rpcServer.stop();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat2 </h4><pre class="type-7 type-8 type-16 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Test that {@link HFileOutputFormat2} RecordWriter amends timestamps if
 * passed a keyvalue whose timestamp is {@link HConstants#LATEST_TIMESTAMP}.
 * @see <a href="https://issues.apache.org/jira/browse/HBASE-2615">HBASE-2615</a>
 */
@Ignore("Goes zombie too frequently; needs work. See HBASE-14563") @Test public void test_LATEST_TIMESTAMP_isReplaced() throws Exception {
  Configuration conf=new Configuration(this.util.getConfiguration());
  RecordWriter<ImmutableBytesWritable,Cell> writer=null;
  TaskAttemptContext context=null;
  Path dir=util.getDataTestDir("test_LATEST_TIMESTAMP_isReplaced");
  try {
    Job job=new Job(conf);
    FileOutputFormat.setOutputPath(job,dir);
    context=createTestTaskAttemptContext(job);
    HFileOutputFormat2 hof=new HFileOutputFormat2();
    writer=hof.getRecordWriter(context);
    final byte[] b=Bytes.toBytes("b");
    KeyValue kv=new KeyValue(b,b,b);
    KeyValue original=kv.clone();
    writer.write(new ImmutableBytesWritable(),kv);
    assertFalse(original.equals(kv));
    assertTrue(Bytes.equals(CellUtil.cloneRow(original),CellUtil.cloneRow(kv)));
    assertTrue(Bytes.equals(CellUtil.cloneFamily(original),CellUtil.cloneFamily(kv)));
    assertTrue(Bytes.equals(CellUtil.cloneQualifier(original),CellUtil.cloneQualifier(kv)));
    assertNotSame(original.getTimestamp(),kv.getTimestamp());
    assertNotSame(HConstants.LATEST_TIMESTAMP,kv.getTimestamp());
    kv=new KeyValue(b,b,b,kv.getTimestamp() - 1,b);
    original=kv.clone();
    writer.write(new ImmutableBytesWritable(),kv);
    assertTrue(original.equals(kv));
  }
  finally {
    if (writer != null && context != null)     writer.close(context);
    dir.getFileSystem(conf).delete(dir,true);
  }
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
/** 
 * Test for HFileOutputFormat2.LOCALITY_SENSITIVE_CONF_KEY = true
 * This test could only check the correctness of original logic if LOCALITY_SENSITIVE_CONF_KEY
 * is set to true. Because MiniHBaseCluster always run with single hostname (and different ports),
 * it's not possible to check the region locality by comparing region locations and DN hostnames.
 * When MiniHBaseCluster supports explicit hostnames parameter (just like MiniDFSCluster does),
 * we could test region locality features more easily.
 */
@Ignore("Goes zombie too frequently; needs work. See HBASE-14563") @Test public void testMRIncrementalLoadWithLocality() throws Exception {
  LOG.info("\nStarting test testMRIncrementalLoadWithLocality\n");
  doIncrementalLoadTest(false,true);
  doIncrementalLoadTest(true,true);
}

</code></pre>

<br>
<pre class="type-4 type-9 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Test for {@link HFileOutputFormat2#configureBloomType(org.apache.hadoop.hbase.client.Table,Configuration)} and {@link HFileOutputFormat2#createFamilyBloomTypeMap(Configuration)}.
 * Tests that the compression map is correctly serialized into
 * and deserialized from configuration
 * @throws IOException
 */
@Ignore("Goes zombie too frequently; needs work. See HBASE-14563") @Test public void testSerializeDeserializeFamilyBloomTypeMap() throws IOException {
  for (int numCfs=0; numCfs <= 2; numCfs++) {
    Configuration conf=new Configuration(this.util.getConfiguration());
    Map<String,BloomType> familyToBloomType=getMockColumnFamiliesForBloomType(numCfs);
    Table table=Mockito.mock(HTable.class);
    setupMockColumnFamiliesForBloomType(table,familyToBloomType);
    HFileOutputFormat2.configureBloomType(table.getTableDescriptor(),conf);
    Map<byte[],BloomType> retrievedFamilyToBloomTypeMap=HFileOutputFormat2.createFamilyBloomTypeMap(conf);
    for (    Entry<String,BloomType> entry : familyToBloomType.entrySet()) {
      assertEquals("BloomType configuration incorrect for column family:" + entry.getKey(),entry.getValue(),retrievedFamilyToBloomTypeMap.get(entry.getKey().getBytes()));
    }
  }
}

</code></pre>

<br>
<pre class="type-4 type-9 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Test for {@link HFileOutputFormat2#configureCompression(org.apache.hadoop.hbase.client.Table,Configuration)} and {@link HFileOutputFormat2#createFamilyCompressionMap(Configuration)}.
 * Tests that the compression map is correctly serialized into
 * and deserialized from configuration
 * @throws IOException
 */
@Ignore("Goes zombie too frequently; needs work. See HBASE-14563") @Test public void testSerializeDeserializeFamilyCompressionMap() throws IOException {
  for (int numCfs=0; numCfs <= 3; numCfs++) {
    Configuration conf=new Configuration(this.util.getConfiguration());
    Map<String,Compression.Algorithm> familyToCompression=getMockColumnFamiliesForCompression(numCfs);
    Table table=Mockito.mock(HTable.class);
    setupMockColumnFamiliesForCompression(table,familyToCompression);
    HFileOutputFormat2.configureCompression(conf,table.getTableDescriptor());
    Map<byte[],Algorithm> retrievedFamilyToCompressionMap=HFileOutputFormat2.createFamilyCompressionMap(conf);
    for (    Entry<String,Algorithm> entry : familyToCompression.entrySet()) {
      assertEquals("Compression configuration incorrect for column family:" + entry.getKey(),entry.getValue(),retrievedFamilyToCompressionMap.get(entry.getKey().getBytes()));
    }
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("Goes zombie too frequently; needs work. See HBASE-14563") @Test public void test_TIMERANGE() throws Exception {
  Configuration conf=new Configuration(this.util.getConfiguration());
  RecordWriter<ImmutableBytesWritable,Cell> writer=null;
  TaskAttemptContext context=null;
  Path dir=util.getDataTestDir("test_TIMERANGE_present");
  LOG.info("Timerange dir writing to dir: " + dir);
  try {
    Job job=new Job(conf);
    FileOutputFormat.setOutputPath(job,dir);
    context=createTestTaskAttemptContext(job);
    HFileOutputFormat2 hof=new HFileOutputFormat2();
    writer=hof.getRecordWriter(context);
    final byte[] b=Bytes.toBytes("b");
    KeyValue kv=new KeyValue(b,b,b,2000,b);
    KeyValue original=kv.clone();
    writer.write(new ImmutableBytesWritable(),kv);
    assertEquals(original,kv);
    kv=new KeyValue(b,b,b,1000,b);
    original=kv.clone();
    writer.write(new ImmutableBytesWritable(),kv);
    assertEquals(original,kv);
    writer.close(context);
    FileSystem fs=FileSystem.get(conf);
    Path attemptDirectory=hof.getDefaultWorkFile(context,"").getParent();
    FileStatus[] sub1=fs.listStatus(attemptDirectory);
    FileStatus[] file=fs.listStatus(sub1[0].getPath());
    HFile.Reader rd=HFile.createReader(fs,file[0].getPath(),new CacheConfig(conf),conf);
    Map<byte[],byte[]> finfo=rd.loadFileInfo();
    byte[] range=finfo.get("TIMERANGE".getBytes());
    assertNotNull(range);
    TimeRangeTracker timeRangeTracker=new TimeRangeTracker();
    Writables.copyWritable(range,timeRangeTracker);
    LOG.info(timeRangeTracker.getMinimumTimestamp() + "...." + timeRangeTracker.getMaximumTimestamp());
    assertEquals(1000,timeRangeTracker.getMinimumTimestamp());
    assertEquals(2000,timeRangeTracker.getMaximumTimestamp());
    rd.close();
  }
  finally {
    if (writer != null && context != null)     writer.close(context);
    dir.getFileSystem(conf).delete(dir,true);
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Test that {@link HFileOutputFormat2} RecordWriter uses compression and
 * bloom filter settings from the column family descriptor
 */
@Ignore("Goes zombie too frequently; needs work. See HBASE-14563") @Test public void testColumnFamilySettings() throws Exception {
  Configuration conf=new Configuration(this.util.getConfiguration());
  RecordWriter<ImmutableBytesWritable,Cell> writer=null;
  TaskAttemptContext context=null;
  Path dir=util.getDataTestDir("testColumnFamilySettings");
  Table table=Mockito.mock(Table.class);
  RegionLocator regionLocator=Mockito.mock(RegionLocator.class);
  HTableDescriptor htd=new HTableDescriptor(TABLE_NAME);
  Mockito.doReturn(htd).when(table).getTableDescriptor();
  for (  HColumnDescriptor hcd : HBaseTestingUtility.generateColumnDescriptors()) {
    htd.addFamily(hcd);
  }
  setupMockStartKeys(regionLocator);
  try {
    conf.set("io.seqfile.compression.type","NONE");
    conf.set("hbase.fs.tmp.dir",dir.toString());
    conf.setBoolean(HFileOutputFormat2.LOCALITY_SENSITIVE_CONF_KEY,false);
    Job job=new Job(conf,"testLocalMRIncrementalLoad");
    job.setWorkingDirectory(util.getDataTestDirOnTestFS("testColumnFamilySettings"));
    setupRandomGeneratorMapper(job);
    HFileOutputFormat2.configureIncrementalLoad(job,table.getTableDescriptor(),regionLocator);
    FileOutputFormat.setOutputPath(job,dir);
    context=createTestTaskAttemptContext(job);
    HFileOutputFormat2 hof=new HFileOutputFormat2();
    writer=hof.getRecordWriter(context);
    writeRandomKeyValues(writer,context,htd.getFamiliesKeys(),ROWSPERSPLIT);
    writer.close(context);
    FileSystem fs=dir.getFileSystem(conf);
    hof.getOutputCommitter(context).commitTask(context);
    hof.getOutputCommitter(context).commitJob(context);
    FileStatus[] families=FSUtils.listStatus(fs,dir,new FSUtils.FamilyDirFilter(fs));
    assertEquals(htd.getFamilies().size(),families.length);
    for (    FileStatus f : families) {
      String familyStr=f.getPath().getName();
      HColumnDescriptor hcd=htd.getFamily(Bytes.toBytes(familyStr));
      Path dataFilePath=fs.listStatus(f.getPath())[0].getPath();
      Reader reader=HFile.createReader(fs,dataFilePath,new CacheConfig(conf),conf);
      Map<byte[],byte[]> fileInfo=reader.loadFileInfo();
      byte[] bloomFilter=fileInfo.get(StoreFile.BLOOM_FILTER_TYPE_KEY);
      if (bloomFilter == null)       bloomFilter=Bytes.toBytes("NONE");
      assertEquals("Incorrect bloom filter used for column family " + familyStr + "(reader: "+ reader+ ")",hcd.getBloomFilterType(),BloomType.valueOf(Bytes.toString(bloomFilter)));
      assertEquals("Incorrect compression used for column family " + familyStr + "(reader: "+ reader+ ")",hcd.getCompressionType(),reader.getFileContext().getCompression());
    }
  }
  finally {
    dir.getFileSystem(conf).delete(dir,true);
  }
}

</code></pre>

<br>
<pre class="type-4 type-9 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Test for {@link HFileOutputFormat2#configureDataBlockEncoding(HTableDescriptor,Configuration)}and {@link HFileOutputFormat2#createFamilyDataBlockEncodingMap(Configuration)}.
 * Tests that the compression map is correctly serialized into
 * and deserialized from configuration
 * @throws IOException
 */
@Ignore("Goes zombie too frequently; needs work. See HBASE-14563") @Test public void testSerializeDeserializeFamilyDataBlockEncodingMap() throws IOException {
  for (int numCfs=0; numCfs <= 3; numCfs++) {
    Configuration conf=new Configuration(this.util.getConfiguration());
    Map<String,DataBlockEncoding> familyToDataBlockEncoding=getMockColumnFamiliesForDataBlockEncoding(numCfs);
    Table table=Mockito.mock(HTable.class);
    setupMockColumnFamiliesForDataBlockEncoding(table,familyToDataBlockEncoding);
    HTableDescriptor tableDescriptor=table.getTableDescriptor();
    HFileOutputFormat2.configureDataBlockEncoding(tableDescriptor,conf);
    Map<byte[],DataBlockEncoding> retrievedFamilyToDataBlockEncodingMap=HFileOutputFormat2.createFamilyDataBlockEncodingMap(conf);
    for (    Entry<String,DataBlockEncoding> entry : familyToDataBlockEncoding.entrySet()) {
      assertEquals("DataBlockEncoding configuration incorrect for column family:" + entry.getKey(),entry.getValue(),retrievedFamilyToDataBlockEncodingMap.get(entry.getKey().getBytes()));
    }
  }
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore("Goes zombie too frequently; needs work. See HBASE-14563") @Test public void testMRIncrementalLoad() throws Exception {
  LOG.info("\nStarting test testMRIncrementalLoad\n");
  doIncrementalLoadTest(false,false);
}

</code></pre>

<br>
<pre class="type-7 type-8 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Run small MR job.
 */
@Ignore("Goes zombie too frequently; needs work. See HBASE-14563") @Test public void testWritingPEData() throws Exception {
  Configuration conf=util.getConfiguration();
  Path testDir=util.getDataTestDirOnTestFS("testWritingPEData");
  FileSystem fs=testDir.getFileSystem(conf);
  conf.setInt("mapreduce.task.io.sort.mb",20);
  conf.setLong(HConstants.HREGION_MAX_FILESIZE,64 * 1024);
  Job job=new Job(conf,"testWritingPEData");
  setupRandomGeneratorMapper(job);
  byte[] startKey=new byte[RandomKVGeneratingMapper.KEYLEN_DEFAULT];
  byte[] endKey=new byte[RandomKVGeneratingMapper.KEYLEN_DEFAULT];
  Arrays.fill(startKey,(byte)0);
  Arrays.fill(endKey,(byte)0xff);
  job.setPartitionerClass(SimpleTotalOrderPartitioner.class);
  SimpleTotalOrderPartitioner.setStartKey(job.getConfiguration(),startKey);
  SimpleTotalOrderPartitioner.setEndKey(job.getConfiguration(),endKey);
  job.setReducerClass(KeyValueSortReducer.class);
  job.setOutputFormatClass(HFileOutputFormat2.class);
  job.setNumReduceTasks(4);
  job.getConfiguration().setStrings("io.serializations",conf.get("io.serializations"),MutationSerialization.class.getName(),ResultSerialization.class.getName(),KeyValueSerialization.class.getName());
  FileOutputFormat.setOutputPath(job,testDir);
  assertTrue(job.waitForCompletion(false));
  FileStatus[] files=fs.listStatus(testDir);
  assertTrue(files.length > 0);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * This test is to test the scenario happened in HBASE-6901.
 * All files are bulk loaded and excluded from minor compaction.
 * Without the fix of HBASE-6901, an ArrayIndexOutOfBoundsException
 * will be thrown.
 */
@Ignore("Flakey: See HBASE-9051") @Test public void testExcludeAllFromMinorCompaction() throws Exception {
  Configuration conf=util.getConfiguration();
  conf.setInt("hbase.hstore.compaction.min",2);
  generateRandomStartKeys(5);
  util.startMiniCluster();
  try (Connection conn=ConnectionFactory.createConnection();Admin admin=conn.getAdmin();Table table=util.createTable(TABLE_NAME,FAMILIES);RegionLocator locator=conn.getRegionLocator(TABLE_NAME)){
    final FileSystem fs=util.getDFSCluster().getFileSystem();
    assertEquals("Should start with empty table",0,util.countRows(table));
    final Path storePath=new Path(FSUtils.getTableDir(FSUtils.getRootDir(conf),TABLE_NAME),new Path(admin.getTableRegions(TABLE_NAME).get(0).getEncodedName(),Bytes.toString(FAMILIES[0])));
    assertEquals(0,fs.listStatus(storePath).length);
    conf.setBoolean("hbase.mapreduce.hfileoutputformat.compaction.exclude",true);
    for (int i=0; i < 2; i++) {
      Path testDir=util.getDataTestDirOnTestFS("testExcludeAllFromMinorCompaction_" + i);
      runIncrementalPELoad(conf,table.getTableDescriptor(),conn.getRegionLocator(TABLE_NAME),testDir);
      new LoadIncrementalHFiles(conf).doBulkLoad(testDir,admin,table,locator);
    }
    int expectedRows=2 * NMapInputFormat.getNumMapTasks(conf) * ROWSPERSPLIT;
    assertEquals("LoadIncrementalHFiles should put expected data in table",expectedRows,util.countRows(table));
    assertEquals(2,fs.listStatus(storePath).length);
    admin.compact(TABLE_NAME);
    try {
      quickPoll(new Callable<Boolean>(){
        @Override public Boolean call() throws Exception {
          List<HRegion> regions=util.getMiniHBaseCluster().getRegions(TABLE_NAME);
          for (          HRegion region : regions) {
            for (            Store store : region.getStores()) {
              store.closeAndArchiveCompactedFiles();
            }
          }
          return fs.listStatus(storePath).length == 1;
        }
      }
,5000);
      throw new IOException("SF# = " + fs.listStatus(storePath).length);
    }
 catch (    AssertionError ae) {
    }
    admin.majorCompact(TABLE_NAME);
    quickPoll(new Callable<Boolean>(){
      @Override public Boolean call() throws Exception {
        List<HRegion> regions=util.getMiniHBaseCluster().getRegions(TABLE_NAME);
        for (        HRegion region : regions) {
          for (          Store store : region.getStores()) {
            store.closeAndArchiveCompactedFiles();
          }
        }
        return fs.listStatus(storePath).length == 1;
      }
    }
,5000);
  }
  finally {
    util.shutdownMiniCluster();
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("Goes zombie too frequently; needs work. See HBASE-14563") @Test public void testExcludeMinorCompaction() throws Exception {
  Configuration conf=util.getConfiguration();
  conf.setInt("hbase.hstore.compaction.min",2);
  generateRandomStartKeys(5);
  util.startMiniCluster();
  try (Connection conn=ConnectionFactory.createConnection(conf);Admin admin=conn.getAdmin()){
    Path testDir=util.getDataTestDirOnTestFS("testExcludeMinorCompaction");
    final FileSystem fs=util.getDFSCluster().getFileSystem();
    Table table=util.createTable(TABLE_NAME,FAMILIES);
    assertEquals("Should start with empty table",0,util.countRows(table));
    final Path storePath=new Path(FSUtils.getTableDir(FSUtils.getRootDir(conf),TABLE_NAME),new Path(admin.getTableRegions(TABLE_NAME).get(0).getEncodedName(),Bytes.toString(FAMILIES[0])));
    assertEquals(0,fs.listStatus(storePath).length);
    Put p=new Put(Bytes.toBytes("test"));
    p.addColumn(FAMILIES[0],Bytes.toBytes("1"),Bytes.toBytes("1"));
    table.put(p);
    admin.flush(TABLE_NAME);
    assertEquals(1,util.countRows(table));
    quickPoll(new Callable<Boolean>(){
      @Override public Boolean call() throws Exception {
        return fs.listStatus(storePath).length == 1;
      }
    }
,5000);
    conf.setBoolean("hbase.mapreduce.hfileoutputformat.compaction.exclude",true);
    RegionLocator regionLocator=conn.getRegionLocator(TABLE_NAME);
    runIncrementalPELoad(conf,table.getTableDescriptor(),regionLocator,testDir);
    new LoadIncrementalHFiles(conf).doBulkLoad(testDir,admin,table,regionLocator);
    int expectedRows=NMapInputFormat.getNumMapTasks(conf) * ROWSPERSPLIT;
    assertEquals("LoadIncrementalHFiles should put expected data in table",expectedRows + 1,util.countRows(table));
    assertEquals(2,fs.listStatus(storePath).length);
    admin.compact(TABLE_NAME);
    try {
      quickPoll(new Callable<Boolean>(){
        @Override public Boolean call() throws Exception {
          return fs.listStatus(storePath).length == 1;
        }
      }
,5000);
      throw new IOException("SF# = " + fs.listStatus(storePath).length);
    }
 catch (    AssertionError ae) {
    }
    admin.majorCompact(TABLE_NAME);
    quickPoll(new Callable<Boolean>(){
      @Override public Boolean call() throws Exception {
        return fs.listStatus(storePath).length == 1;
      }
    }
,5000);
  }
  finally {
    util.shutdownMiniCluster();
  }
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore("Goes zombie too frequently; needs work. See HBASE-14563") @Test public void testMRIncrementalLoadWithSplit() throws Exception {
  LOG.info("\nStarting test testMRIncrementalLoadWithSplit\n");
  doIncrementalLoadTest(true,false);
}

</code></pre>

<br>
<pre class="type-4 type-9 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Test for {@link HFileOutputFormat2#configureBlockSize(org.apache.hadoop.hbase.client.Table,Configuration)} and {@link HFileOutputFormat2#createFamilyBlockSizeMap(Configuration)}.
 * Tests that the compression map is correctly serialized into
 * and deserialized from configuration
 * @throws IOException
 */
@Ignore("Goes zombie too frequently; needs work. See HBASE-14563") @Test public void testSerializeDeserializeFamilyBlockSizeMap() throws IOException {
  for (int numCfs=0; numCfs <= 3; numCfs++) {
    Configuration conf=new Configuration(this.util.getConfiguration());
    Map<String,Integer> familyToBlockSize=getMockColumnFamiliesForBlockSize(numCfs);
    Table table=Mockito.mock(HTable.class);
    setupMockColumnFamiliesForBlockSize(table,familyToBlockSize);
    HFileOutputFormat2.configureBlockSize(table.getTableDescriptor(),conf);
    Map<byte[],Integer> retrievedFamilyToBlockSizeMap=HFileOutputFormat2.createFamilyBlockSizeMap(conf);
    for (    Entry<String,Integer> entry : familyToBlockSize.entrySet()) {
      assertEquals("BlockSize configuration incorrect for column family:" + entry.getKey(),entry.getValue(),retrievedFamilyToBlockSizeMap.get(entry.getKey().getBytes()));
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("Goes zombie too frequently; needs work. See HBASE-14563") @Test public void testJobConfiguration() throws Exception {
  Configuration conf=new Configuration(this.util.getConfiguration());
  conf.set(HConstants.TEMPORARY_FS_DIRECTORY_KEY,util.getDataTestDir("testJobConfiguration").toString());
  Job job=new Job(conf);
  job.setWorkingDirectory(util.getDataTestDir("testJobConfiguration"));
  Table table=Mockito.mock(Table.class);
  RegionLocator regionLocator=Mockito.mock(RegionLocator.class);
  setupMockStartKeys(regionLocator);
  setupMockTableName(regionLocator);
  HFileOutputFormat2.configureIncrementalLoad(job,table.getTableDescriptor(),regionLocator);
  assertEquals(job.getNumReduceTasks(),4);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.master.TestMasterTransitions </h4><pre class="type-14 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is an empty test case">EmptyTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Is an empty test case
- Is not executed with the test suite
"></span><br>
/** 
 * Test adding in a new server before old one on same host+port is dead.
 * Make the test more onerous by having the server under test carry the meta.
 * If confusion between old and new, purportedly meta never comes back.  Test
 * that meta gets redeployed.
 */
@Ignore @Test(timeout=300000) public void testAddingServerBeforeOldIsDead2413() throws IOException {
}

</code></pre>

<br>
<pre class="type-14 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is an empty test case">EmptyTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Is an empty test case
- Is not executed with the test suite
"></span><br>
/** 
 * In 2428, the meta region has just been set offline and then a close comes
 * in.
 * @see <a href="https://issues.apache.org/jira/browse/HBASE-2428">HBASE-2428</a>
 */
@Ignore @Test(timeout=300000) public void testRegionCloseWhenNoMetaHBase2428() throws Exception {
}

</code></pre>

<br>
<pre class="type-14 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is an empty test case">EmptyTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Is an empty test case
- Is not executed with the test suite
"></span><br>
/** 
 * In 2482, a RS with an opening region on it dies.  The said region is then
 * stuck in the master's regions-in-transition and never leaves it.  This
 * test works by bringing up a new regionserver, waiting for the load
 * balancer to give it some regions.  Then, we close all on the new server.
 * After sending all the close messages, we send the new regionserver the
 * special blocking message so it can not process any more messages.
 * Meantime reopening of the just-closed regions is backed up on the new
 * server.  Soon as master gets an opening region from the new regionserver,
 * we kill it.  We then wait on all regions to come back on line.  If bug
 * is fixed, this should happen soon as the processing of the killed server is
 * done.
 * @see <a href="https://issues.apache.org/jira/browse/HBASE-2482">HBASE-2482</a>
 */
@Ignore @Test(timeout=300000) public void testKillRSWithOpeningRegion2482() throws Exception {
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.master.TestRegionPlacement </h4><pre class="type-4 type-7 type-8 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("Test for unfinished feature") @Test public void testRegionPlacement() throws Exception {
  String tableStr="testRegionAssignment";
  TableName table=TableName.valueOf(tableStr);
  createTable(table,REGION_NUM);
  TEST_UTIL.waitTableAvailable(table);
  verifyRegionOnPrimaryRS(REGION_NUM);
  FavoredNodesPlan currentPlan=rp.getRegionAssignmentSnapshot().getExistingAssignmentPlan();
  verifyRegionServerUpdated(currentPlan);
  FavoredNodesPlan shuffledPlan=this.shuffleAssignmentPlan(currentPlan,FavoredNodesPlan.Position.SECONDARY,FavoredNodesPlan.Position.TERTIARY);
  rp.updateAssignmentPlan(shuffledPlan);
  verifyRegionAssignment(shuffledPlan,0,REGION_NUM);
  shuffledPlan=this.shuffleAssignmentPlan(currentPlan,FavoredNodesPlan.Position.PRIMARY,FavoredNodesPlan.Position.SECONDARY);
  rp.updateAssignmentPlan(shuffledPlan);
  verifyRegionAssignment(shuffledPlan,REGION_NUM,REGION_NUM);
  RegionPlacementMaintainer rp=new RegionPlacementMaintainer(TEST_UTIL.getConfiguration());
  rp.setTargetTableName(new String[]{tableStr});
  List<AssignmentVerificationReport> reports=rp.verifyRegionPlacement(false);
  AssignmentVerificationReport report=reports.get(0);
  assertTrue(report.getRegionsWithoutValidFavoredNodes().size() == 0);
  assertTrue(report.getNonFavoredAssignedRegions().size() == 0);
  assertTrue(report.getTotalFavoredAssignments() >= REGION_NUM);
  assertTrue(report.getNumRegionsOnFavoredNodeByPosition(FavoredNodesPlan.Position.PRIMARY) != 0);
  assertTrue(report.getNumRegionsOnFavoredNodeByPosition(FavoredNodesPlan.Position.SECONDARY) == 0);
  assertTrue(report.getNumRegionsOnFavoredNodeByPosition(FavoredNodesPlan.Position.TERTIARY) == 0);
  assertTrue(report.getUnassignedRegions().size() == 0);
  killRandomServerAndVerifyAssignment();
  reports=rp.verifyRegionPlacement(false);
  report=reports.get(0);
  assertTrue(report.getRegionsWithoutValidFavoredNodes().size() == 0);
  assertTrue(report.getNonFavoredAssignedRegions().size() == 0);
  assertTrue(report.getTotalFavoredAssignments() >= REGION_NUM);
  assertTrue(report.getNumRegionsOnFavoredNodeByPosition(FavoredNodesPlan.Position.PRIMARY) > 0);
  assertTrue("secondary " + report.getNumRegionsOnFavoredNodeByPosition(FavoredNodesPlan.Position.SECONDARY) + " tertiary "+ report.getNumRegionsOnFavoredNodeByPosition(FavoredNodesPlan.Position.TERTIARY),(report.getNumRegionsOnFavoredNodeByPosition(FavoredNodesPlan.Position.SECONDARY) > 0 || report.getNumRegionsOnFavoredNodeByPosition(FavoredNodesPlan.Position.TERTIARY) > 0));
  assertTrue((report.getNumRegionsOnFavoredNodeByPosition(FavoredNodesPlan.Position.PRIMARY) + report.getNumRegionsOnFavoredNodeByPosition(FavoredNodesPlan.Position.SECONDARY) + report.getNumRegionsOnFavoredNodeByPosition(FavoredNodesPlan.Position.TERTIARY)) == REGION_NUM);
  RegionPlacementMaintainer.printAssignmentPlan(currentPlan);
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
/** 
 * Used to test the correctness of this class.
 */
@Ignore("Test for unfinished feature") @Test public void testRandomizedMatrix(){
  int rows=100;
  int cols=100;
  float[][] matrix=new float[rows][cols];
  Random random=new Random();
  for (int i=0; i < rows; i++) {
    for (int j=0; j < cols; j++) {
      matrix[i][j]=random.nextFloat();
    }
  }
  RegionPlacementMaintainer.RandomizedMatrix rm=new RegionPlacementMaintainer.RandomizedMatrix(rows,cols);
  float[][] transformed=rm.transform(matrix);
  float[][] invertedTransformed=rm.invert(transformed);
  for (int i=0; i < rows; i++) {
    for (int j=0; j < cols; j++) {
      if (matrix[i][j] != invertedTransformed[i][j]) {
        throw new RuntimeException();
      }
    }
  }
  int[] transformedIndices=new int[rows];
  for (int i=0; i < rows; i++) {
    transformedIndices[i]=random.nextInt(cols);
  }
  int[] invertedTransformedIndices=rm.invertIndices(transformedIndices);
  float[] transformedValues=new float[rows];
  float[] invertedTransformedValues=new float[rows];
  for (int i=0; i < rows; i++) {
    transformedValues[i]=transformed[i][transformedIndices[i]];
    invertedTransformedValues[i]=matrix[i][invertedTransformedIndices[i]];
  }
  Arrays.sort(transformedValues);
  Arrays.sort(invertedTransformedValues);
  if (!Arrays.equals(transformedValues,invertedTransformedValues)) {
    throw new RuntimeException();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.master.TestSplitLogManager </h4><pre class="type-7 type-8 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("DLR is broken by HBASE-12751") @Test(timeout=60000) public void testGetPreviousRecoveryMode() throws Exception {
  LOG.info("testGetPreviousRecoveryMode");
  SplitLogCounters.resetCounters();
  conf.setBoolean(HConstants.DISTRIBUTED_LOG_REPLAY_KEY,true);
  zkw.getRecoverableZooKeeper().create(ZKSplitLog.getEncodedNodeName(zkw,"testRecovery"),new SplitLogTask.Unassigned(ServerName.valueOf("mgr,1,1"),RecoveryMode.LOG_SPLITTING).toByteArray(),Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  slm=new SplitLogManager(ds,conf,stopper,master,DUMMY_MASTER);
  LOG.info("Mode1=" + slm.getRecoveryMode());
  assertTrue(slm.isLogSplitting());
  zkw.getRecoverableZooKeeper().delete(ZKSplitLog.getEncodedNodeName(zkw,"testRecovery"),-1);
  LOG.info("Mode2=" + slm.getRecoveryMode());
  slm.setRecoveryMode(false);
  LOG.info("Mode3=" + slm.getRecoveryMode());
  assertTrue("Mode4=" + slm.getRecoveryMode(),slm.isLogReplaying());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.master.balancer.TestFavoredNodeAssignmentHelper </h4><pre class="type-4 type-7 type-8 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("Disabled for now until FavoredNodes gets finished as a feature") @Test public void testSecondaryAndTertiaryPlacementWithSingleRack(){
  Map<String,Integer> rackToServerCount=new HashMap<String,Integer>();
  rackToServerCount.put("rack1",10);
  Triple<Map<HRegionInfo,ServerName>,FavoredNodeAssignmentHelper,List<HRegionInfo>> primaryRSMapAndHelper=secondaryAndTertiaryRSPlacementHelper(60000,rackToServerCount);
  FavoredNodeAssignmentHelper helper=primaryRSMapAndHelper.getSecond();
  Map<HRegionInfo,ServerName> primaryRSMap=primaryRSMapAndHelper.getFirst();
  List<HRegionInfo> regions=primaryRSMapAndHelper.getThird();
  Map<HRegionInfo,ServerName[]> secondaryAndTertiaryMap=helper.placeSecondaryAndTertiaryRS(primaryRSMap);
  for (  HRegionInfo region : regions) {
    ServerName[] secondaryAndTertiaryServers=secondaryAndTertiaryMap.get(region);
    assertTrue(!secondaryAndTertiaryServers[0].equals(primaryRSMap.get(region)));
    assertTrue(!secondaryAndTertiaryServers[1].equals(primaryRSMap.get(region)));
    assertTrue(!secondaryAndTertiaryServers[0].equals(secondaryAndTertiaryServers[1]));
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("Disabled for now until FavoredNodes gets finished as a feature") @Test public void testSecondaryAndTertiaryPlacementWithMultipleRacks(){
  Map<String,Integer> rackToServerCount=new HashMap<String,Integer>();
  rackToServerCount.put("rack1",10);
  rackToServerCount.put("rack2",10);
  Triple<Map<HRegionInfo,ServerName>,FavoredNodeAssignmentHelper,List<HRegionInfo>> primaryRSMapAndHelper=secondaryAndTertiaryRSPlacementHelper(60000,rackToServerCount);
  FavoredNodeAssignmentHelper helper=primaryRSMapAndHelper.getSecond();
  Map<HRegionInfo,ServerName> primaryRSMap=primaryRSMapAndHelper.getFirst();
  assertTrue(primaryRSMap.size() == 60000);
  Map<HRegionInfo,ServerName[]> secondaryAndTertiaryMap=helper.placeSecondaryAndTertiaryRS(primaryRSMap);
  assertTrue(secondaryAndTertiaryMap.size() == 60000);
  for (  Map.Entry<HRegionInfo,ServerName[]> entry : secondaryAndTertiaryMap.entrySet()) {
    ServerName[] allServersForRegion=entry.getValue();
    String primaryRSRack=rackManager.getRack(primaryRSMap.get(entry.getKey()));
    String secondaryRSRack=rackManager.getRack(allServersForRegion[0]);
    String tertiaryRSRack=rackManager.getRack(allServersForRegion[1]);
    assertTrue(!primaryRSRack.equals(secondaryRSRack));
    assertTrue(secondaryRSRack.equals(tertiaryRSRack));
  }
}

</code></pre>

<br>
<pre class="type-4 type-8 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("Disabled for now until FavoredNodes gets finished as a feature") @Test public void testSmallCluster(){
  Map<String,Integer> rackToServerCount=new HashMap<String,Integer>();
  rackToServerCount.put("rack1",2);
  List<ServerName> servers=getServersFromRack(rackToServerCount);
  FavoredNodeAssignmentHelper helper=new FavoredNodeAssignmentHelper(servers,new Configuration());
  assertFalse(helper.canPlaceFavoredNodes());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("Disabled for now until FavoredNodes gets finished as a feature") @Test public void testSecondaryAndTertiaryPlacementWithLessThanTwoServersInRacks(){
  Map<String,Integer> rackToServerCount=new HashMap<String,Integer>();
  rackToServerCount.put("rack1",1);
  rackToServerCount.put("rack2",1);
  Triple<Map<HRegionInfo,ServerName>,FavoredNodeAssignmentHelper,List<HRegionInfo>> primaryRSMapAndHelper=secondaryAndTertiaryRSPlacementHelper(6,rackToServerCount);
  FavoredNodeAssignmentHelper helper=primaryRSMapAndHelper.getSecond();
  Map<HRegionInfo,ServerName> primaryRSMap=primaryRSMapAndHelper.getFirst();
  List<HRegionInfo> regions=primaryRSMapAndHelper.getThird();
  assertTrue(primaryRSMap.size() == 6);
  Map<HRegionInfo,ServerName[]> secondaryAndTertiaryMap=helper.placeSecondaryAndTertiaryRS(primaryRSMap);
  for (  HRegionInfo region : regions) {
    assertTrue(secondaryAndTertiaryMap.get(region) == null);
  }
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore("Disabled for now until FavoredNodes gets finished as a feature") @Test public void testRoundRobinAssignmentsWithUnevenSizedRacks(){
  primaryRSPlacement(6,null,10,10,10);
  primaryRSPlacement(600,null,10,10,5);
  primaryRSPlacement(600,null,10,5,10);
  primaryRSPlacement(600,null,5,10,10);
  primaryRSPlacement(500,null,10,10,5);
  primaryRSPlacement(500,null,10,5,10);
  primaryRSPlacement(500,null,5,10,10);
  primaryRSPlacement(500,null,9,7,8);
  primaryRSPlacement(500,null,8,7,9);
  primaryRSPlacement(500,null,7,9,8);
  primaryRSPlacement(459,null,7,9,8);
}

</code></pre>

<br>
<pre class="type-4 type-10 type-7 type-8 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("Disabled for now until FavoredNodes gets finished as a feature") @Test public void testSecondaryAndTertiaryPlacementWithMoreThanOneServerInPrimaryRack(){
  Map<String,Integer> rackToServerCount=new HashMap<String,Integer>();
  rackToServerCount.put("rack1",2);
  rackToServerCount.put("rack2",1);
  Triple<Map<HRegionInfo,ServerName>,FavoredNodeAssignmentHelper,List<HRegionInfo>> primaryRSMapAndHelper=secondaryAndTertiaryRSPlacementHelper(6,rackToServerCount);
  FavoredNodeAssignmentHelper helper=primaryRSMapAndHelper.getSecond();
  Map<HRegionInfo,ServerName> primaryRSMap=primaryRSMapAndHelper.getFirst();
  List<HRegionInfo> regions=primaryRSMapAndHelper.getThird();
  assertTrue(primaryRSMap.size() == 6);
  Map<HRegionInfo,ServerName[]> secondaryAndTertiaryMap=helper.placeSecondaryAndTertiaryRS(primaryRSMap);
  for (  HRegionInfo region : regions) {
    ServerName s=primaryRSMap.get(region);
    ServerName secondaryRS=secondaryAndTertiaryMap.get(region)[0];
    ServerName tertiaryRS=secondaryAndTertiaryMap.get(region)[1];
    if (rackManager.getRack(s).equals("rack1")) {
      assertTrue(rackManager.getRack(secondaryRS).equals("rack2") && rackManager.getRack(tertiaryRS).equals("rack1"));
    }
    if (rackManager.getRack(s).equals("rack2")) {
      assertTrue(rackManager.getRack(secondaryRS).equals("rack1") && rackManager.getRack(tertiaryRS).equals("rack1"));
    }
  }
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore("Disabled for now until FavoredNodes gets finished as a feature") @Test public void testPlacePrimaryRSAsRoundRobin(){
  primaryRSPlacement(6,null,10,10,10);
  primaryRSPlacement(600,null,10,10,10);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("Disabled for now until FavoredNodes gets finished as a feature") @Test public void testSecondaryAndTertiaryPlacementWithSingleServer(){
  Map<String,Integer> rackToServerCount=new HashMap<String,Integer>();
  rackToServerCount.put("rack1",1);
  Triple<Map<HRegionInfo,ServerName>,FavoredNodeAssignmentHelper,List<HRegionInfo>> primaryRSMapAndHelper=secondaryAndTertiaryRSPlacementHelper(1,rackToServerCount);
  FavoredNodeAssignmentHelper helper=primaryRSMapAndHelper.getSecond();
  Map<HRegionInfo,ServerName> primaryRSMap=primaryRSMapAndHelper.getFirst();
  List<HRegionInfo> regions=primaryRSMapAndHelper.getThird();
  Map<HRegionInfo,ServerName[]> secondaryAndTertiaryMap=helper.placeSecondaryAndTertiaryRS(primaryRSMap);
  assertTrue(secondaryAndTertiaryMap.get(regions.get(0)) == null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.master.balancer.TestStochasticLoadBalancer </h4><pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore @Test(timeout=800000) public void testRegionReplicationOnMidClusterSameHosts(){
  conf.setLong(StochasticLoadBalancer.MAX_STEPS_KEY,2000000L);
  conf.setLong("hbase.master.balancer.stochastic.maxRunningTime",90 * 1000);
  conf.setFloat("hbase.master.balancer.stochastic.maxMovePercent",1.0f);
  loadBalancer.setConf(conf);
  int numHosts=100;
  int numRegions=100 * 100;
  int replication=3;
  int numRegionsPerServer=5;
  int numTables=10;
  Map<ServerName,List<HRegionInfo>> serverMap=createServerMap(numHosts,numRegions,numRegionsPerServer,replication,numTables);
  int numNodesPerHost=4;
  Map<ServerName,List<HRegionInfo>> newServerMap=new TreeMap<ServerName,List<HRegionInfo>>(serverMap);
  for (  Map.Entry<ServerName,List<HRegionInfo>> entry : serverMap.entrySet()) {
    for (int i=1; i < numNodesPerHost; i++) {
      ServerName s1=entry.getKey();
      ServerName s2=ServerName.valueOf(s1.getHostname(),s1.getPort() + i,1);
      newServerMap.put(s2,new ArrayList<HRegionInfo>());
    }
  }
  testWithCluster(newServerMap,null,true,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestPerColumnFamilyFlush </h4><pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore("DLR is broken by HBASE-12751") @Test(timeout=180000) public void testLogReplayWithDistributedReplay() throws Exception {
  TEST_UTIL.getConfiguration().setBoolean(HConstants.DISTRIBUTED_LOG_REPLAY_KEY,true);
  doTestLogReplay();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.TestHBaseFsckOneRS </h4><pre class="type-10 type-8 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * This creates a table and simulates the race situation where a concurrent compaction or split
 * has removed an colfam dir before the corruption checker got to it.
 */
@Ignore @Test(timeout=180000) public void testQuarantineMissingFamdir() throws Exception {
  TableName table=TableName.valueOf(name.getMethodName());
  final FileSystem fs=FileSystem.get(conf);
  HBaseFsck hbck=new HBaseFsck(conf,hbfsckExecutorService){
    @Override public HFileCorruptionChecker createHFileCorruptionChecker(    boolean sidelineCorruptHFiles) throws IOException {
      return new HFileCorruptionChecker(conf,executor,sidelineCorruptHFiles){
        AtomicBoolean attemptedFirstHFile=new AtomicBoolean(false);
        @Override protected void checkColFamDir(        Path p) throws IOException {
          if (attemptedFirstHFile.compareAndSet(false,true)) {
            assertTrue(fs.delete(p,true));
          }
          super.checkColFamDir(p);
        }
      }
;
    }
  }
;
  doQuarantineTest(table,hbck,3,0,0,0,1);
  hbck.close();
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
