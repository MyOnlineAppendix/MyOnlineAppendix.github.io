<h3><span class=" glyphicon glyphicon-tag"/>&nbspNullVerifier</h3><kbd>Verifies whether objects are null</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.hadoop.hbase.TestCompoundConfiguration </h4><pre class="type-10 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWithStringMap(){
  Map<String,String> map=new HashMap<String,String>();
  map.put("B","2b");
  map.put("C","33");
  map.put("D","4");
  map.put("G",null);
  CompoundConfiguration compoundConf=new CompoundConfiguration().addStringMap(map);
  assertEquals("2b",compoundConf.get("B"));
  assertEquals(33,compoundConf.getInt("C",0));
  assertEquals("4",compoundConf.get("D"));
  assertEquals(4,compoundConf.getInt("D",0));
  assertNull(compoundConf.get("E"));
  assertEquals(6,compoundConf.getInt("F",6));
  assertNull(compoundConf.get("G"));
  int cnt=0;
  for (  Map.Entry<String,String> entry : compoundConf) {
    cnt++;
    if (entry.getKey().equals("B"))     assertEquals("2b",entry.getValue());
 else     if (entry.getKey().equals("G"))     assertEquals(null,entry.getValue());
  }
  assertEquals(4,cnt);
  CompoundConfiguration conf2=new CompoundConfiguration();
  conf2.set("X","modification");
  conf2.set("D","not4");
  assertEquals("modification",conf2.get("X"));
  assertEquals("not4",conf2.get("D"));
  conf2.addStringMap(map);
  assertEquals("4",conf2.get("D"));
}

</code></pre>

<br>
<pre class="type-4 type-10 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWithIbwMap(){
  Map<Bytes,Bytes> map=new HashMap<Bytes,Bytes>();
  map.put(strToIb("B"),strToIb("2b"));
  map.put(strToIb("C"),strToIb("33"));
  map.put(strToIb("D"),strToIb("4"));
  map.put(strToIb("G"),null);
  CompoundConfiguration compoundConf=new CompoundConfiguration().add(baseConf).addBytesMap(map);
  assertEquals("1",compoundConf.get("A"));
  assertEquals("2b",compoundConf.get("B"));
  assertEquals(33,compoundConf.getInt("C",0));
  assertEquals("4",compoundConf.get("D"));
  assertEquals(4,compoundConf.getInt("D",0));
  assertNull(compoundConf.get("E"));
  assertEquals(6,compoundConf.getInt("F",6));
  assertNull(compoundConf.get("G"));
  int cnt=0;
  for (  Map.Entry<String,String> entry : compoundConf) {
    cnt++;
    if (entry.getKey().equals("B"))     assertEquals("2b",entry.getValue());
 else     if (entry.getKey().equals("G"))     assertEquals(null,entry.getValue());
  }
  assertEquals(baseConfSize + 2,cnt);
  CompoundConfiguration conf2=new CompoundConfiguration();
  conf2.set("X","modification");
  conf2.set("D","not4");
  assertEquals("modification",conf2.get("X"));
  assertEquals("not4",conf2.get("D"));
  conf2.addBytesMap(map);
  assertEquals("4",conf2.get("D"));
}

</code></pre>

<br>
<pre class="type-4 type-10 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWithConfig(){
  Configuration conf=new Configuration();
  conf.set("B","2b");
  conf.set("C","33");
  conf.set("D","4");
  CompoundConfiguration compoundConf=new CompoundConfiguration().add(baseConf).add(conf);
  assertEquals("1",compoundConf.get("A"));
  assertEquals("2b",compoundConf.get("B"));
  assertEquals(33,compoundConf.getInt("C",0));
  assertEquals("4",compoundConf.get("D"));
  assertEquals(4,compoundConf.getInt("D",0));
  assertNull(compoundConf.get("E"));
  assertEquals(6,compoundConf.getInt("F",6));
  int cnt=0;
  for (  Map.Entry<String,String> entry : compoundConf) {
    cnt++;
    if (entry.getKey().equals("B"))     assertEquals("2b",entry.getValue());
 else     if (entry.getKey().equals("G"))     assertEquals(null,entry.getValue());
  }
  assertEquals(baseConfSize + 1,cnt);
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPut(){
  CompoundConfiguration compoundConf=new CompoundConfiguration().add(baseConf);
  assertEquals("1",compoundConf.get("A"));
  assertEquals(2,compoundConf.getInt("B",0));
  assertEquals(3,compoundConf.getInt("C",0));
  assertEquals(0,compoundConf.getInt("D",0));
  compoundConf.set("A","1337");
  compoundConf.set("string","stringvalue");
  assertEquals(1337,compoundConf.getInt("A",0));
  assertEquals("stringvalue",compoundConf.get("string"));
  assertEquals("1",baseConf.get("A"));
  assertNull(baseConf.get("string"));
  baseConf.set("setInParent","fromParent");
  assertEquals("fromParent",compoundConf.get("setInParent"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.TestHBaseConfiguration </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSubset() throws Exception {
  Configuration conf=HBaseConfiguration.create();
  String prefix="hbase.mapred.output.";
  conf.set("hbase.security.authentication","kerberos");
  conf.set("hbase.regionserver.kerberos.principal","hbasesource");
  HBaseConfiguration.setWithPrefix(conf,prefix,ImmutableMap.of("hbase.regionserver.kerberos.principal","hbasedest","","shouldbemissing").entrySet());
  Configuration subsetConf=HBaseConfiguration.subset(conf,prefix);
  assertNull(subsetConf.get(prefix + "hbase.regionserver.kerberos.principal"));
  assertEquals("hbasedest",subsetConf.get("hbase.regionserver.kerberos.principal"));
  assertNull(subsetConf.get("hbase.security.authentication"));
  assertNull(subsetConf.get(""));
  Configuration mergedConf=HBaseConfiguration.create(conf);
  HBaseConfiguration.merge(mergedConf,subsetConf);
  assertEquals("hbasedest",mergedConf.get("hbase.regionserver.kerberos.principal"));
  assertEquals("kerberos",mergedConf.get("hbase.security.authentication"));
  assertEquals("shouldbemissing",mergedConf.get(prefix));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.TestMetaTableAccessor </h4><pre class="type-4 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testGetRegion() throws IOException, InterruptedException {
  final String name="testGetRegion";
  LOG.info("Started " + name);
  Pair<HRegionInfo,ServerName> pair=MetaTableAccessor.getRegion(connection,Bytes.toBytes("nonexistent-region"));
  assertNull(pair);
  LOG.info("Finished " + name);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests whether maximum of masters system time versus RSs local system time is used
 */
@Test public void testMastersSystemTimeIsUsedInUpdateLocations() throws IOException {
  long regionId=System.currentTimeMillis();
  HRegionInfo regionInfo=new HRegionInfo(TableName.valueOf("table_foo"),HConstants.EMPTY_START_ROW,HConstants.EMPTY_END_ROW,false,regionId,0);
  ServerName sn=ServerName.valueOf("bar",0,0);
  Table meta=MetaTableAccessor.getMetaHTable(connection);
  try {
    List<HRegionInfo> regionInfos=Lists.newArrayList(regionInfo);
    MetaTableAccessor.addRegionsToMeta(connection,regionInfos,1);
    long masterSystemTime=EnvironmentEdgeManager.currentTime() + 123456789;
    MetaTableAccessor.updateRegionLocation(connection,regionInfo,sn,1,masterSystemTime);
    Get get=new Get(regionInfo.getRegionName());
    Result result=meta.get(get);
    Cell serverCell=result.getColumnLatestCell(HConstants.CATALOG_FAMILY,MetaTableAccessor.getServerColumn(0));
    Cell startCodeCell=result.getColumnLatestCell(HConstants.CATALOG_FAMILY,MetaTableAccessor.getStartCodeColumn(0));
    Cell seqNumCell=result.getColumnLatestCell(HConstants.CATALOG_FAMILY,MetaTableAccessor.getSeqNumColumn(0));
    assertNotNull(serverCell);
    assertNotNull(startCodeCell);
    assertNotNull(seqNumCell);
    assertTrue(serverCell.getValueLength() > 0);
    assertTrue(startCodeCell.getValueLength() > 0);
    assertTrue(seqNumCell.getValueLength() > 0);
    assertEquals(masterSystemTime,serverCell.getTimestamp());
    assertEquals(masterSystemTime,startCodeCell.getTimestamp());
    assertEquals(masterSystemTime,seqNumCell.getTimestamp());
  }
  finally {
    meta.close();
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMastersSystemTimeIsUsedInMergeRegions() throws IOException {
  long regionId=System.currentTimeMillis();
  HRegionInfo regionInfoA=new HRegionInfo(TableName.valueOf("table_foo"),HConstants.EMPTY_START_ROW,new byte[]{'a'},false,regionId,0);
  HRegionInfo regionInfoB=new HRegionInfo(TableName.valueOf("table_foo"),new byte[]{'a'},HConstants.EMPTY_END_ROW,false,regionId,0);
  HRegionInfo mergedRegionInfo=new HRegionInfo(TableName.valueOf("table_foo"),HConstants.EMPTY_START_ROW,HConstants.EMPTY_END_ROW,false,regionId,0);
  ServerName sn=ServerName.valueOf("bar",0,0);
  Table meta=MetaTableAccessor.getMetaHTable(connection);
  try {
    List<HRegionInfo> regionInfos=Lists.newArrayList(regionInfoA,regionInfoB);
    MetaTableAccessor.addRegionsToMeta(connection,regionInfos,1);
    long serverNameTime=EnvironmentEdgeManager.currentTime() + 100000000;
    long masterSystemTime=EnvironmentEdgeManager.currentTime() + 123456789;
    MetaTableAccessor.updateRegionLocation(connection,regionInfoA,sn,1,serverNameTime);
    Get get=new Get(mergedRegionInfo.getRegionName());
    Result result=meta.get(get);
    Cell serverCell=result.getColumnLatestCell(HConstants.CATALOG_FAMILY,MetaTableAccessor.getServerColumn(0));
    assertNotNull(serverCell);
    assertEquals(serverNameTime,serverCell.getTimestamp());
    MetaTableAccessor.mergeRegions(connection,mergedRegionInfo,regionInfoA,regionInfoB,sn,1,masterSystemTime);
    result=meta.get(get);
    serverCell=result.getColumnLatestCell(HConstants.CATALOG_FAMILY,MetaTableAccessor.getServerColumn(0));
    Cell startCodeCell=result.getColumnLatestCell(HConstants.CATALOG_FAMILY,MetaTableAccessor.getStartCodeColumn(0));
    Cell seqNumCell=result.getColumnLatestCell(HConstants.CATALOG_FAMILY,MetaTableAccessor.getSeqNumColumn(0));
    assertNull(serverCell);
    assertNull(startCodeCell);
    assertNull(seqNumCell);
  }
  finally {
    meta.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.TestMetaTableAccessorNoCluster </h4><pre class="type-4 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetHRegionInfo() throws IOException {
  assertNull(MetaTableAccessor.getHRegionInfo(new Result()));
  List<Cell> kvs=new ArrayList<Cell>();
  Result r=Result.create(kvs);
  assertNull(MetaTableAccessor.getHRegionInfo(r));
  byte[] f=HConstants.CATALOG_FAMILY;
  kvs.add(new KeyValue(HConstants.EMPTY_BYTE_ARRAY,f,HConstants.SERVER_QUALIFIER,f));
  r=Result.create(kvs);
  assertNull(MetaTableAccessor.getHRegionInfo(r));
  kvs.add(new KeyValue(HConstants.EMPTY_BYTE_ARRAY,f,HConstants.REGIONINFO_QUALIFIER,f));
  HRegionInfo hri=MetaTableAccessor.getHRegionInfo(Result.create(kvs));
  assertTrue(hri == null);
  kvs.clear();
  kvs.add(new KeyValue(HConstants.EMPTY_BYTE_ARRAY,f,HConstants.REGIONINFO_QUALIFIER,HRegionInfo.FIRST_META_REGIONINFO.toByteArray()));
  hri=MetaTableAccessor.getHRegionInfo(Result.create(kvs));
  assertNotNull(hri);
  assertTrue(hri.equals(HRegionInfo.FIRST_META_REGIONINFO));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.TestMetaTableLocator </h4><pre class="type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test interruptable while blocking wait on meta.
 * @throws IOException
 * @throws ServiceException
 * @throws InterruptedException
 */
@Test public void testInterruptWaitOnMeta() throws IOException, InterruptedException, ServiceException {
  final ClientProtos.ClientService.BlockingInterface client=Mockito.mock(ClientProtos.ClientService.BlockingInterface.class);
  Mockito.when(client.get((RpcController)Mockito.any(),(GetRequest)Mockito.any())).thenReturn(GetResponse.newBuilder().build());
  final MetaTableLocator mtl=new MetaTableLocator();
  ServerName meta=new MetaTableLocator().getMetaRegionLocation(this.watcher);
  assertNull(meta);
  Thread t=new Thread(){
    @Override public void run(){
      try {
        mtl.waitMetaRegionLocation(watcher);
      }
 catch (      InterruptedException e) {
        throw new RuntimeException("Interrupted",e);
      }
    }
  }
;
  t.start();
  while (!t.isAlive())   Threads.sleep(1);
  Threads.sleep(1);
  assertTrue(t.isAlive());
  mtl.stop();
  t.join();
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test normal operations
 */
@Test public void testMetaLookup() throws IOException, InterruptedException, ServiceException, KeeperException {
  final ClientProtos.ClientService.BlockingInterface client=Mockito.mock(ClientProtos.ClientService.BlockingInterface.class);
  Mockito.when(client.get((RpcController)Mockito.any(),(GetRequest)Mockito.any())).thenReturn(GetResponse.newBuilder().build());
  final MetaTableLocator mtl=new MetaTableLocator();
  assertNull(mtl.getMetaRegionLocation(this.watcher));
  for (  RegionState.State state : RegionState.State.values()) {
    if (state.equals(RegionState.State.OPEN))     continue;
    MetaTableLocator.setMetaLocation(this.watcher,SN,state);
    assertNull(mtl.getMetaRegionLocation(this.watcher));
    assertEquals(state,MetaTableLocator.getMetaRegionState(this.watcher).getState());
  }
  MetaTableLocator.setMetaLocation(this.watcher,SN,RegionState.State.OPEN);
  assertEquals(mtl.getMetaRegionLocation(this.watcher),SN);
  assertEquals(RegionState.State.OPEN,MetaTableLocator.getMetaRegionState(this.watcher).getState());
  mtl.deleteMetaLocation(this.watcher);
  assertNull(MetaTableLocator.getMetaRegionState(this.watcher).getServerName());
  assertEquals(MetaTableLocator.getMetaRegionState(this.watcher).getState(),RegionState.State.OFFLINE);
  assertNull(mtl.getMetaRegionLocation(this.watcher));
}

</code></pre>

<br>
<pre class="type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test waiting on meat w/ no timeout specified.
 * @throws IOException
 * @throws InterruptedException
 * @throws KeeperException
 */
@Test public void testNoTimeoutWaitForMeta() throws IOException, InterruptedException, KeeperException {
  final MetaTableLocator mtl=new MetaTableLocator();
  ServerName hsa=mtl.getMetaRegionLocation(watcher);
  assertNull(hsa);
  Thread t=new WaitOnMetaThread();
  startWaitAliveThenWaitItLives(t,1);
  MetaTableLocator.setMetaLocation(this.watcher,SN,RegionState.State.OPEN);
  hsa=SN;
  t.join();
  assertTrue(mtl.getMetaRegionLocation(watcher).equals(hsa));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.TestMultiVersions </h4><pre class="type-4 type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verifies versions across a cluster restart.
 * Port of old TestGetRowVersions test to here so can better utilize the spun
 * up cluster running more than a single test per spin up.  Keep old tests'
 * crazyness.
 */
@Test public void testGetRowVersions() throws Exception {
  final String tableName="testGetRowVersions";
  final byte[] contents=Bytes.toBytes("contents");
  final byte[] row=Bytes.toBytes("row");
  final byte[] value1=Bytes.toBytes("value1");
  final byte[] value2=Bytes.toBytes("value2");
  final long timestamp1=100L;
  final long timestamp2=200L;
  final HTableDescriptor desc=new HTableDescriptor(TableName.valueOf(tableName));
  HColumnDescriptor hcd=new HColumnDescriptor(contents);
  hcd.setMaxVersions(3);
  desc.addFamily(hcd);
  this.admin.createTable(desc);
  Put put=new Put(row,timestamp1);
  put.addColumn(contents,contents,value1);
  Table table=UTIL.getConnection().getTable(desc.getTableName());
  table.put(put);
  table.close();
  UTIL.shutdownMiniHBaseCluster();
  LOG.debug("HBase cluster shut down -- restarting");
  UTIL.startMiniHBaseCluster(1,NUM_SLAVES);
  table=UTIL.getConnection().getTable(desc.getTableName());
  put=new Put(row,timestamp2);
  put.addColumn(contents,contents,value2);
  table.put(put);
  Get get=new Get(row);
  Result r=table.get(get);
  assertNotNull(r);
  assertFalse(r.isEmpty());
  assertTrue(r.size() == 1);
  byte[] value=r.getValue(contents,contents);
  assertTrue(value.length != 0);
  assertTrue(Bytes.equals(value,value2));
  get=new Get(row);
  get.setMaxVersions();
  r=table.get(get);
  assertTrue(r.size() == 2);
  value=r.getValue(contents,contents);
  assertTrue(value.length != 0);
  assertTrue(Bytes.equals(value,value2));
  NavigableMap<byte[],NavigableMap<byte[],NavigableMap<Long,byte[]>>> map=r.getMap();
  NavigableMap<byte[],NavigableMap<Long,byte[]>> familyMap=map.get(contents);
  NavigableMap<Long,byte[]> versionMap=familyMap.get(contents);
  assertTrue(versionMap.size() == 2);
  assertTrue(Bytes.equals(value1,versionMap.get(timestamp1)));
  assertTrue(Bytes.equals(value2,versionMap.get(timestamp2)));
  table.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.TestNamespace </h4><pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testNamespaceOperations() throws IOException {
  admin.createNamespace(NamespaceDescriptor.create(prefix + "ns1").build());
  admin.createNamespace(NamespaceDescriptor.create(prefix + "ns2").build());
  runWithExpectedException(new Callable<Void>(){
    @Override public Void call() throws Exception {
      admin.createNamespace(NamespaceDescriptor.create(prefix + "ns1").build());
      return null;
    }
  }
,NamespaceExistException.class);
  runWithExpectedException(new Callable<Void>(){
    @Override public Void call() throws Exception {
      HTableDescriptor htd=new HTableDescriptor(TableName.valueOf("non_existing_namespace","table1"));
      htd.addFamily(new HColumnDescriptor("family1"));
      admin.createTable(htd);
      return null;
    }
  }
,NamespaceNotFoundException.class);
  admin.getNamespaceDescriptor(prefix + "ns1");
  runWithExpectedException(new Callable<NamespaceDescriptor>(){
    @Override public NamespaceDescriptor call() throws Exception {
      return admin.getNamespaceDescriptor("non_existing_namespace");
    }
  }
,NamespaceNotFoundException.class);
  admin.deleteNamespace(prefix + "ns2");
  runWithExpectedException(new Callable<Void>(){
    @Override public Void call() throws Exception {
      admin.deleteNamespace("non_existing_namespace");
      return null;
    }
  }
,NamespaceNotFoundException.class);
  NamespaceDescriptor ns1=admin.getNamespaceDescriptor(prefix + "ns1");
  ns1.setConfiguration("foo","bar");
  admin.modifyNamespace(ns1);
  runWithExpectedException(new Callable<Void>(){
    @Override public Void call() throws Exception {
      admin.modifyNamespace(NamespaceDescriptor.create("non_existing_namespace").build());
      return null;
    }
  }
,NamespaceNotFoundException.class);
  HTableDescriptor htd=new HTableDescriptor(TableName.valueOf(prefix + "ns1","table1"));
  htd.addFamily(new HColumnDescriptor("family1"));
  admin.createTable(htd);
  HTableDescriptor[] htds=admin.listTableDescriptorsByNamespace(prefix + "ns1");
  assertNotNull("Should have not returned null",htds);
  assertEquals("Should have returned non-empty array",1,htds.length);
  runWithExpectedException(new Callable<Void>(){
    @Override public Void call() throws Exception {
      admin.listTableDescriptorsByNamespace("non_existant_namespace");
      return null;
    }
  }
,NamespaceNotFoundException.class);
  TableName[] tableNames=admin.listTableNamesByNamespace(prefix + "ns1");
  assertNotNull("Should have not returned null",tableNames);
  assertEquals("Should have returned non-empty array",1,tableNames.length);
  runWithExpectedException(new Callable<Void>(){
    @Override public Void call() throws Exception {
      admin.listTableNamesByNamespace("non_existing_namespace");
      return null;
    }
  }
,NamespaceNotFoundException.class);
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createDoubleTest() throws IOException, InterruptedException {
  String testName="createDoubleTest";
  String nsName=prefix + "_" + testName;
  LOG.info(testName);
  TableName tableName=TableName.valueOf("my_table");
  TableName tableNameFoo=TableName.valueOf(nsName + ":my_table");
  admin.createNamespace(NamespaceDescriptor.create(nsName).build());
  TEST_UTIL.createTable(tableName,Bytes.toBytes(nsName));
  TEST_UTIL.createTable(tableNameFoo,Bytes.toBytes(nsName));
  assertEquals(2,admin.listTables().length);
  assertNotNull(admin.getTableDescriptor(tableName));
  assertNotNull(admin.getTableDescriptor(tableNameFoo));
  admin.disableTable(tableName);
  admin.deleteTable(tableName);
  assertEquals(1,admin.listTables().length);
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createRemoveTest() throws Exception {
  String testName="createRemoveTest";
  String nsName=prefix + "_" + testName;
  LOG.info(testName);
  admin.createNamespace(NamespaceDescriptor.create(nsName).build());
  assertEquals(3,admin.listNamespaceDescriptors().length);
  TEST_UTIL.waitFor(60000,new Waiter.Predicate<Exception>(){
    @Override public boolean evaluate() throws Exception {
      return zkNamespaceManager.list().size() == 3;
    }
  }
);
  assertNotNull(zkNamespaceManager.get(nsName));
  admin.deleteNamespace(nsName);
  assertEquals(2,admin.listNamespaceDescriptors().length);
  assertEquals(2,zkNamespaceManager.list().size());
  assertNull(zkNamespaceManager.get(nsName));
}

</code></pre>

<br>
<pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyReservedNS() throws IOException {
  NamespaceDescriptor ns=admin.getNamespaceDescriptor(NamespaceDescriptor.DEFAULT_NAMESPACE.getName());
  assertNotNull(ns);
  assertEquals(ns.getName(),NamespaceDescriptor.DEFAULT_NAMESPACE.getName());
  assertNotNull(zkNamespaceManager.get(NamespaceDescriptor.DEFAULT_NAMESPACE_NAME_STR));
  ns=admin.getNamespaceDescriptor(NamespaceDescriptor.SYSTEM_NAMESPACE.getName());
  assertNotNull(ns);
  assertEquals(ns.getName(),NamespaceDescriptor.SYSTEM_NAMESPACE.getName());
  assertNotNull(zkNamespaceManager.get(NamespaceDescriptor.SYSTEM_NAMESPACE_NAME_STR));
  assertEquals(2,admin.listNamespaceDescriptors().length);
  Set<TableName> systemTables=Sets.newHashSet(TableName.META_TABLE_NAME,TableName.NAMESPACE_TABLE_NAME);
  HTableDescriptor[] descs=admin.listTableDescriptorsByNamespace(NamespaceDescriptor.SYSTEM_NAMESPACE.getName());
  assertEquals(systemTables.size(),descs.length);
  for (  HTableDescriptor desc : descs) {
    assertTrue(systemTables.contains(desc.getTableName()));
  }
  assertEquals(0,admin.listTables().length);
  boolean exceptionCaught=false;
  try {
    admin.createNamespace(NamespaceDescriptor.DEFAULT_NAMESPACE);
  }
 catch (  IOException exp) {
    LOG.warn(exp);
    exceptionCaught=true;
  }
 finally {
    assertTrue(exceptionCaught);
  }
  exceptionCaught=false;
  try {
    admin.createNamespace(NamespaceDescriptor.SYSTEM_NAMESPACE);
  }
 catch (  IOException exp) {
    LOG.warn(exp);
    exceptionCaught=true;
  }
 finally {
    assertTrue(exceptionCaught);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.TestOffheapKeyValue </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testByteBufferBackedKeyValueWithTags() throws Exception {
  KeyValue kvCell=new KeyValue(row1,fam1,qual1,0l,Type.Put,row1,tags);
  ByteBuffer buf=ByteBuffer.allocateDirect(kvCell.getBuffer().length);
  ByteBufferUtils.copyFromArrayToBuffer(buf,kvCell.getBuffer(),0,kvCell.getBuffer().length);
  ByteBufferedCell offheapKV=new OffheapKeyValue(buf,0,buf.capacity(),true,0l);
  assertEquals(ROW1,ByteBufferUtils.toStringBinary(offheapKV.getRowByteBuffer(),offheapKV.getRowPosition(),offheapKV.getRowLength()));
  assertEquals(FAM1,ByteBufferUtils.toStringBinary(offheapKV.getFamilyByteBuffer(),offheapKV.getFamilyPosition(),offheapKV.getFamilyLength()));
  assertEquals(QUAL1,ByteBufferUtils.toStringBinary(offheapKV.getQualifierByteBuffer(),offheapKV.getQualifierPosition(),offheapKV.getQualifierLength()));
  assertEquals(ROW1,ByteBufferUtils.toStringBinary(offheapKV.getValueByteBuffer(),offheapKV.getValuePosition(),offheapKV.getValueLength()));
  assertEquals(0L,offheapKV.getTimestamp());
  assertEquals(Type.Put.getCode(),offheapKV.getTypeByte());
  List<Tag> resTags=TagUtil.asList(offheapKV.getTagsArray(),offheapKV.getTagsOffset(),offheapKV.getTagsLength());
  Tag tag1=resTags.get(0);
  assertEquals(t1.getType(),tag1.getType());
  assertEquals(TagUtil.getValueAsString(t1),TagUtil.getValueAsString(tag1));
  Tag tag2=resTags.get(1);
  assertEquals(tag2.getType(),tag2.getType());
  assertEquals(TagUtil.getValueAsString(t2),TagUtil.getValueAsString(tag2));
  Tag res=CellUtil.getTag(offheapKV,(byte)2);
  assertEquals(TagUtil.getValueAsString(t2),TagUtil.getValueAsString(tag2));
  res=CellUtil.getTag(offheapKV,(byte)3);
  assertNull(res);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.TestRegionLocations </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateLocationWithDifferentRegionId(){
  RegionLocations list;
  HRegionInfo info0=hri(regionId1,0);
  HRegionInfo info1=hri(regionId2,1);
  HRegionInfo info2=hri(regionId1,2);
  list=new RegionLocations(hrl(info0,sn1),hrl(info2,sn1));
  list=list.updateLocation(hrl(info1,sn2),false,true);
  assertNull(list.getRegionLocation(0));
  assertNotNull(list.getRegionLocation(1));
  assertNull(list.getRegionLocation(2));
  assertEquals(sn2,list.getRegionLocation(1).getServerName());
  assertEquals(3,list.size());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemove(){
  RegionLocations list;
  list=new RegionLocations();
  assertTrue(list == list.remove(hrl(info0,sn0)));
  list=hrll(hrl(info0,sn0));
  assertTrue(list == list.remove(hrl(info0,sn1)));
  list=list.remove(hrl(info0,sn0));
  assertTrue(list.isEmpty());
  list=hrll(hrl(info0,sn0),hrl(info1,sn1),hrl(info2,sn2),hrl(info9,sn2));
  assertTrue(list == list.remove(hrl(info1,sn3)));
  list=list.remove(hrl(info0,sn0));
  assertNull(list.getRegionLocation(0));
  assertEquals(sn1,list.getRegionLocation(1).getServerName());
  assertEquals(sn2,list.getRegionLocation(2).getServerName());
  assertNull(list.getRegionLocation(5));
  assertEquals(sn2,list.getRegionLocation(9).getServerName());
  list=list.remove(hrl(info9,sn2));
  assertNull(list.getRegionLocation(0));
  assertEquals(sn1,list.getRegionLocation(1).getServerName());
  assertEquals(sn2,list.getRegionLocation(2).getServerName());
  assertNull(list.getRegionLocation(5));
  assertNull(list.getRegionLocation(9));
  list=hrll(hrl(info0,sn1),hrl(info1,sn1),hrl(info2,sn0),hrl(info9,sn0));
  list=list.remove(hrl(info9,sn0));
  assertEquals(sn1,list.getRegionLocation(0).getServerName());
  assertEquals(sn1,list.getRegionLocation(1).getServerName());
  assertEquals(sn0,list.getRegionLocation(2).getServerName());
  assertNull(list.getRegionLocation(5));
  assertNull(list.getRegionLocation(9));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveByServer(){
  RegionLocations list;
  list=new RegionLocations();
  assertTrue(list == list.removeByServer(sn0));
  list=hrll(hrl(info0,sn0));
  assertTrue(list == list.removeByServer(sn1));
  list=list.removeByServer(sn0);
  assertEquals(0,list.numNonNullElements());
  list=hrll(hrl(info0,sn0),hrl(info1,sn1),hrl(info2,sn2),hrl(info9,sn2));
  assertTrue(list == list.removeByServer(sn3));
  list=list.removeByServer(sn0);
  assertNull(list.getRegionLocation(0));
  assertEquals(sn1,list.getRegionLocation(1).getServerName());
  assertEquals(sn2,list.getRegionLocation(2).getServerName());
  assertNull(list.getRegionLocation(5));
  assertEquals(sn2,list.getRegionLocation(9).getServerName());
  list=hrll(hrl(info0,sn1),hrl(info1,sn1),hrl(info2,sn0),hrl(info9,sn0));
  list=list.removeByServer(sn0);
  assertEquals(sn1,list.getRegionLocation(0).getServerName());
  assertEquals(sn1,list.getRegionLocation(1).getServerName());
  assertNull(list.getRegionLocation(2));
  assertNull(list.getRegionLocation(5));
  assertNull(list.getRegionLocation(9));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMergeLocationsWithDifferentRegionId(){
  RegionLocations list1, list2;
  HRegionInfo info0=hri(regionId1,0);
  HRegionInfo info1=hri(regionId1,1);
  HRegionInfo info2=hri(regionId2,2);
  list1=hrll(hrl(info2,sn1));
  list2=hrll(hrl(info0,sn2),hrl(info1,sn2));
  list1=list2.mergeLocations(list1);
  assertNull(list1.getRegionLocation(0));
  assertNull(list1.getRegionLocation(1));
  assertNotNull(list1.getRegionLocation(2));
  assertEquals(sn1,list1.getRegionLocation(2).getServerName());
  assertEquals(3,list1.size());
  list1=hrll(hrl(info2,sn1));
  list2=hrll(hrl(info0,sn2),hrl(info1,sn2));
  list2=list1.mergeLocations(list2);
  assertNotNull(list2.getRegionLocation(0));
  assertNotNull(list2.getRegionLocation(1));
  assertNull(list2.getRegionLocation(2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.TestSerialization </h4><pre class="type-4 type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testCompareFilter() throws Exception {
  Filter f=new RowFilter(CompareOp.EQUAL,new BinaryComparator(Bytes.toBytes("testRowOne-2")));
  byte[] bytes=f.toByteArray();
  Filter ff=RowFilter.parseFrom(bytes);
  assertNotNull(ff);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.TestZooKeeper </h4><pre class="type-11 type-7 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Create a bunch of znodes in a hierarchy, try deleting one that has childs (it will fail), then
 * delete it recursively, then delete the last znode
 * @throws Exception
 */
@Test public void testZNodeDeletes() throws Exception {
  ZooKeeperWatcher zkw=new ZooKeeperWatcher(new Configuration(TEST_UTIL.getConfiguration()),TestZooKeeper.class.getName(),null);
  ZKUtil.createWithParents(zkw,"/l1/l2/l3/l4");
  try {
    ZKUtil.deleteNode(zkw,"/l1/l2");
    fail("We should not be able to delete if znode has childs");
  }
 catch (  KeeperException ex) {
    assertNotNull(ZKUtil.getDataNoWatch(zkw,"/l1/l2/l3/l4",null));
  }
  ZKUtil.deleteNodeRecursively(zkw,"/l1/l2");
  assertNull(ZKUtil.getDataNoWatch(zkw,"/l1/l2/l3/l4",null));
  ZKUtil.deleteNodeRecursively(zkw,"/l1/l2");
  ZKUtil.deleteNode(zkw,"/l1");
  assertNull(ZKUtil.getDataNoWatch(zkw,"/l1/l2",null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.backup.TestHFileArchiving </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that the region directory is removed when we archive a region without store files, but
 * still has hidden files.
 * @throws Exception
 */
@Test public void testDeleteRegionWithNoStoreFiles() throws Exception {
  TableName TABLE_NAME=TableName.valueOf("testDeleteRegionWithNoStoreFiles");
  UTIL.createTable(TABLE_NAME,TEST_FAM);
  List<HRegion> servingRegions=UTIL.getHBaseCluster().getRegions(TABLE_NAME);
  assertEquals(1,servingRegions.size());
  HRegion region=servingRegions.get(0);
  FileSystem fs=region.getRegionFileSystem().getFileSystem();
  Path rootDir=FSUtils.getRootDir(fs.getConf());
  Path regionDir=HRegion.getRegionDir(rootDir,region.getRegionInfo());
  FileStatus[] regionFiles=FSUtils.listStatus(fs,regionDir,null);
  Assert.assertNotNull("No files in the region directory",regionFiles);
  if (LOG.isDebugEnabled()) {
    List<Path> files=new ArrayList<Path>();
    for (    FileStatus file : regionFiles) {
      files.add(file.getPath());
    }
    LOG.debug("Current files:" + files);
  }
  final PathFilter dirFilter=new FSUtils.DirFilter(fs);
  PathFilter nonHidden=new PathFilter(){
    @Override public boolean accept(    Path file){
      return dirFilter.accept(file) && !file.getName().toString().startsWith(".");
    }
  }
;
  FileStatus[] storeDirs=FSUtils.listStatus(fs,regionDir,nonHidden);
  for (  FileStatus store : storeDirs) {
    LOG.debug("Deleting store for test");
    fs.delete(store.getPath(),true);
  }
  HFileArchiver.archiveRegion(UTIL.getConfiguration(),fs,region.getRegionInfo());
  assertFalse("Region directory (" + regionDir + "), still exists.",fs.exists(regionDir));
  UTIL.deleteTable(TABLE_NAME);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestAsyncProcess </h4><pre class="type-11 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCallQueueTooLarge() throws IOException {
  ClusterConnection conn=new MyConnectionImpl(conf);
  BufferedMutatorImpl mutator=(BufferedMutatorImpl)conn.getBufferedMutator(DUMMY_TABLE);
  AsyncProcessWithFailure ap=new AsyncProcessWithFailure(conn,conf,new CallQueueTooBigException());
  mutator.ap=ap;
  Assert.assertNotNull(mutator.ap.createServerErrorTracker());
  Put p=createPut(1,true);
  mutator.mutate(p);
  try {
    mutator.flush();
    Assert.fail();
  }
 catch (  RetriesExhaustedWithDetailsException expected) {
  }
  Assert.assertEquals(NB_RETRIES + 1,ap.callsCt.get());
}

</code></pre>

<br>
<pre class="type-11 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testErrorsServers() throws IOException {
  Configuration configuration=new Configuration(conf);
  ClusterConnection conn=new MyConnectionImpl(configuration);
  BufferedMutatorImpl mutator=new BufferedMutatorImpl(conn,null,null,new BufferedMutatorParams(DUMMY_TABLE));
  configuration.setBoolean(ConnectionImplementation.RETRIES_BY_SERVER_KEY,true);
  MyAsyncProcess ap=new MyAsyncProcess(conn,configuration,true);
  mutator.ap=ap;
  Assert.assertNotNull(mutator.ap.createServerErrorTracker());
  Assert.assertTrue(mutator.ap.serverTrackerTimeout > 200);
  mutator.ap.serverTrackerTimeout=1;
  Put p=createPut(1,false);
  mutator.mutate(p);
  try {
    mutator.flush();
    Assert.fail();
  }
 catch (  RetriesExhaustedWithDetailsException expected) {
  }
  Assert.assertEquals(NB_RETRIES + 1,ap.callsCt.get());
}

</code></pre>

<br>
<pre class="type-11 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGlobalErrors() throws IOException {
  ClusterConnection conn=new MyConnectionImpl(conf);
  BufferedMutatorImpl mutator=(BufferedMutatorImpl)conn.getBufferedMutator(DUMMY_TABLE);
  AsyncProcessWithFailure ap=new AsyncProcessWithFailure(conn,conf,new IOException("test"));
  mutator.ap=ap;
  Assert.assertNotNull(mutator.ap.createServerErrorTracker());
  Put p=createPut(1,true);
  mutator.mutate(p);
  try {
    mutator.flush();
    Assert.fail();
  }
 catch (  RetriesExhaustedWithDetailsException expected) {
  }
  Assert.assertEquals(NB_RETRIES + 1,ap.callsCt.get());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestAttributes </h4><pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteAttributes(){
  Delete del=new Delete(new byte[]{'r'});
  Assert.assertTrue(del.getAttributesMap().isEmpty());
  Assert.assertNull(del.getAttribute("absent"));
  del.setAttribute("absent",null);
  Assert.assertTrue(del.getAttributesMap().isEmpty());
  Assert.assertNull(del.getAttribute("absent"));
  del.setAttribute("attribute1",Bytes.toBytes("value1"));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value1"),del.getAttribute("attribute1")));
  Assert.assertEquals(1,del.getAttributesMap().size());
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value1"),del.getAttributesMap().get("attribute1")));
  del.setAttribute("attribute1",Bytes.toBytes("value12"));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value12"),del.getAttribute("attribute1")));
  Assert.assertEquals(1,del.getAttributesMap().size());
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value12"),del.getAttributesMap().get("attribute1")));
  del.setAttribute("attribute2",Bytes.toBytes("value2"));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value2"),del.getAttribute("attribute2")));
  Assert.assertEquals(2,del.getAttributesMap().size());
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value2"),del.getAttributesMap().get("attribute2")));
  del.setAttribute("attribute2",null);
  Assert.assertNull(del.getAttribute("attribute2"));
  Assert.assertEquals(1,del.getAttributesMap().size());
  Assert.assertNull(del.getAttributesMap().get("attribute2"));
  del.setAttribute("attribute2",null);
  Assert.assertNull(del.getAttribute("attribute2"));
  Assert.assertEquals(1,del.getAttributesMap().size());
  Assert.assertNull(del.getAttributesMap().get("attribute2"));
  del.setAttribute("attribute1",null);
  Assert.assertNull(del.getAttribute("attribute1"));
  Assert.assertTrue(del.getAttributesMap().isEmpty());
  Assert.assertNull(del.getAttributesMap().get("attribute1"));
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScanId(){
  Scan scan=new Scan();
  Assert.assertNull("Make sure id is null if unset",scan.toMap().get("id"));
  scan.setId("myId");
  Assert.assertEquals("myId",scan.toMap().get("id"));
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutId(){
  Put put=new Put(ROW);
  Assert.assertNull("Make sure id is null if unset",put.toMap().get("id"));
  put.setId("myId");
  Assert.assertEquals("myId",put.toMap().get("id"));
}

</code></pre>

<br>
<pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutAttributes(){
  Put put=new Put(ROW);
  Assert.assertTrue(put.getAttributesMap().isEmpty());
  Assert.assertNull(put.getAttribute("absent"));
  put.setAttribute("absent",null);
  Assert.assertTrue(put.getAttributesMap().isEmpty());
  Assert.assertNull(put.getAttribute("absent"));
  put.setAttribute("attribute1",Bytes.toBytes("value1"));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value1"),put.getAttribute("attribute1")));
  Assert.assertEquals(1,put.getAttributesMap().size());
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value1"),put.getAttributesMap().get("attribute1")));
  put.setAttribute("attribute1",Bytes.toBytes("value12"));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value12"),put.getAttribute("attribute1")));
  Assert.assertEquals(1,put.getAttributesMap().size());
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value12"),put.getAttributesMap().get("attribute1")));
  put.setAttribute("attribute2",Bytes.toBytes("value2"));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value2"),put.getAttribute("attribute2")));
  Assert.assertEquals(2,put.getAttributesMap().size());
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value2"),put.getAttributesMap().get("attribute2")));
  put.setAttribute("attribute2",null);
  Assert.assertNull(put.getAttribute("attribute2"));
  Assert.assertEquals(1,put.getAttributesMap().size());
  Assert.assertNull(put.getAttributesMap().get("attribute2"));
  put.setAttribute("attribute2",null);
  Assert.assertNull(put.getAttribute("attribute2"));
  Assert.assertEquals(1,put.getAttributesMap().size());
  Assert.assertNull(put.getAttributesMap().get("attribute2"));
  put.setAttribute("attribute1",null);
  Assert.assertNull(put.getAttribute("attribute1"));
  Assert.assertTrue(put.getAttributesMap().isEmpty());
  Assert.assertNull(put.getAttributesMap().get("attribute1"));
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetId(){
  Get get=new Get(ROW);
  Assert.assertNull("Make sure id is null if unset",get.toMap().get("id"));
  get.setId("myId");
  Assert.assertEquals("myId",get.toMap().get("id"));
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteId(){
  Delete delete=new Delete(ROW);
  Assert.assertNull("Make sure id is null if unset",delete.toMap().get("id"));
  delete.setId("myId");
  Assert.assertEquals("myId",delete.toMap().get("id"));
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAppendId(){
  Append append=new Append(ROW);
  Assert.assertNull("Make sure id is null if unset",append.toMap().get("id"));
  append.setId("myId");
  Assert.assertEquals("myId",append.toMap().get("id"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestClientPushback </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testClientTracksServerPushback() throws Exception {
  Configuration conf=UTIL.getConfiguration();
  ClusterConnection conn=(ClusterConnection)ConnectionFactory.createConnection(conf);
  HTable table=(HTable)conn.getTable(tableName);
  HRegionServer rs=UTIL.getHBaseCluster().getRegionServer(0);
  Region region=rs.getOnlineRegions(tableName).get(0);
  LOG.debug("Writing some data to " + tableName);
  Put p=new Put(Bytes.toBytes("row"));
  p.addColumn(family,qualifier,Bytes.toBytes("value1"));
  table.put(p);
  int load=(int)((((HRegion)region).addAndGetGlobalMemstoreSize(0) * 100) / flushSizeBytes);
  LOG.debug("Done writing some data to " + tableName);
  ClientBackoffPolicy backoffPolicy=conn.getBackoffPolicy();
  assertTrue("Backoff policy is not correctly configured",backoffPolicy instanceof ExponentialClientBackoffPolicy);
  ServerStatisticTracker stats=conn.getStatisticsTracker();
  assertNotNull("No stats configured for the client!",stats);
  ServerName server=rs.getServerName();
  byte[] regionName=region.getRegionInfo().getRegionName();
  ServerStatistics serverStats=stats.getServerStatsForTesting(server);
  ServerStatistics.RegionStatistics regionStats=serverStats.getStatsForRegion(regionName);
  assertEquals("We did not find some load on the memstore",load,regionStats.getMemstoreLoadPercent());
  long backoffTime=backoffPolicy.getBackoffTime(server,regionName,serverStats);
  assertNotEquals("Reported load does not produce a backoff",backoffTime,0);
  LOG.debug("Backoff calculated for " + region.getRegionInfo().getRegionNameAsString() + " @ "+ server+ " is "+ backoffTime);
  List<Row> ops=new ArrayList<Row>(1);
  ops.add(p);
  final CountDownLatch latch=new CountDownLatch(1);
  final AtomicLong endTime=new AtomicLong();
  long startTime=EnvironmentEdgeManager.currentTime();
  table.mutator.ap.submit(tableName,ops,true,new Batch.Callback<Result>(){
    @Override public void update(    byte[] region,    byte[] row,    Result result){
      endTime.set(EnvironmentEdgeManager.currentTime());
      latch.countDown();
    }
  }
,true);
  String name=server.getServerName() + "," + Bytes.toStringBinary(regionName);
  MetricsConnection.RegionStats rsStats=conn.getConnectionMetrics().serverStats.get(server).get(regionName);
  assertEquals(name,rsStats.name);
  assertEquals(rsStats.heapOccupancyHist.getSnapshot().getMean(),(double)regionStats.getHeapOccupancyPercent(),0.1);
  assertEquals(rsStats.memstoreLoadHist.getSnapshot().getMean(),(double)regionStats.getMemstoreLoadPercent(),0.1);
  MetricsConnection.RunnerStats runnerStats=conn.getConnectionMetrics().runnerStats;
  assertEquals(runnerStats.delayRunners.getCount(),1);
  assertEquals(runnerStats.normalRunners.getCount(),1);
  assertEquals("",runnerStats.delayIntevalHist.getSnapshot().getMean(),(double)backoffTime,0.1);
  latch.await(backoffTime * 2,TimeUnit.MILLISECONDS);
  assertNotEquals("AsyncProcess did not submit the work time",endTime.get(),0);
  assertTrue("AsyncProcess did not delay long enough",endTime.get() - startTime >= backoffTime);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestClientScanner </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void testSizeLimit() throws IOException {
  final Result[] results=new Result[1];
  KeyValue kv1=new KeyValue("row".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum);
  results[0]=Result.create(new Cell[]{kv1});
  RpcRetryingCaller<Result[]> caller=Mockito.mock(RpcRetryingCaller.class);
  Mockito.when(rpcFactory.<Result[]>newCaller()).thenReturn(caller);
  Mockito.when(caller.callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt())).thenAnswer(new Answer<Result[]>(){
    private int count=0;
    @Override public Result[] answer(    InvocationOnMock invocation) throws Throwable {
      ScannerCallableWithReplicas callable=invocation.getArgumentAt(0,ScannerCallableWithReplicas.class);
switch (count) {
case 0:
case 2:
        count++;
      return null;
case 1:
    count++;
  callable.setHasMoreResultsContext(true);
callable.setServerHasMoreResults(false);
return results;
default :
throw new RuntimeException("Expected only 2 invocations");
}
}
}
);
Mockito.when(rpcFactory.<Result[]>newCaller()).thenReturn(caller);
scan.setCaching(100);
scan.setMaxResultSize(1);
try (MockClientScanner scanner=new MockClientScanner(conf,scan,TableName.valueOf("table"),clusterConn,rpcFactory,controllerFactory,pool,Integer.MAX_VALUE)){
Mockito.verify(caller).callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt());
InOrder inOrder=Mockito.inOrder(caller);
scanner.loadCache();
inOrder.verify(caller,Mockito.times(2)).callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt());
assertEquals(1,scanner.cache.size());
Result r=scanner.cache.poll();
assertNotNull(r);
CellScanner cs=r.cellScanner();
assertTrue(cs.advance());
assertEquals(kv1,cs.current());
assertFalse(cs.advance());
}
 }

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void testCacheLimit() throws IOException {
  KeyValue kv1=new KeyValue("row1".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum), kv2=new KeyValue("row2".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum), kv3=new KeyValue("row3".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum);
  final Result[] results=new Result[]{Result.create(new Cell[]{kv1}),Result.create(new Cell[]{kv2}),Result.create(new Cell[]{kv3})};
  RpcRetryingCaller<Result[]> caller=Mockito.mock(RpcRetryingCaller.class);
  Mockito.when(rpcFactory.<Result[]>newCaller()).thenReturn(caller);
  Mockito.when(caller.callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt())).thenAnswer(new Answer<Result[]>(){
    private int count=0;
    @Override public Result[] answer(    InvocationOnMock invocation) throws Throwable {
      ScannerCallableWithReplicas callable=invocation.getArgumentAt(0,ScannerCallableWithReplicas.class);
switch (count) {
case 0:
case 2:
        count++;
      return null;
case 1:
    count++;
  callable.setHasMoreResultsContext(true);
callable.setServerHasMoreResults(false);
return results;
default :
throw new RuntimeException("Expected only 2 invocations");
}
}
}
);
Mockito.when(rpcFactory.<Result[]>newCaller()).thenReturn(caller);
scan.setCaching(1);
scan.setMaxResultSize(1000 * 1000);
try (MockClientScanner scanner=new MockClientScanner(conf,scan,TableName.valueOf("table"),clusterConn,rpcFactory,controllerFactory,pool,Integer.MAX_VALUE)){
Mockito.verify(caller).callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt());
InOrder inOrder=Mockito.inOrder(caller);
scanner.loadCache();
inOrder.verify(caller,Mockito.times(2)).callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt());
assertEquals(3,scanner.cache.size());
Result r=scanner.cache.poll();
assertNotNull(r);
CellScanner cs=r.cellScanner();
assertTrue(cs.advance());
assertEquals(kv1,cs.current());
assertFalse(cs.advance());
r=scanner.cache.poll();
assertNotNull(r);
cs=r.cellScanner();
assertTrue(cs.advance());
assertEquals(kv2,cs.current());
assertFalse(cs.advance());
r=scanner.cache.poll();
assertNotNull(r);
cs=r.cellScanner();
assertTrue(cs.advance());
assertEquals(kv3,cs.current());
assertFalse(cs.advance());
}
 }

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void testNoMoreResults() throws IOException {
  final Result[] results=new Result[1];
  KeyValue kv1=new KeyValue("row".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum);
  results[0]=Result.create(new Cell[]{kv1});
  RpcRetryingCaller<Result[]> caller=Mockito.mock(RpcRetryingCaller.class);
  Mockito.when(rpcFactory.<Result[]>newCaller()).thenReturn(caller);
  Mockito.when(caller.callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt())).thenAnswer(new Answer<Result[]>(){
    private int count=0;
    @Override public Result[] answer(    InvocationOnMock invocation) throws Throwable {
      ScannerCallableWithReplicas callable=invocation.getArgumentAt(0,ScannerCallableWithReplicas.class);
switch (count) {
case 0:
case 2:
        count++;
      return null;
case 1:
    count++;
  callable.setHasMoreResultsContext(true);
callable.setServerHasMoreResults(false);
return results;
default :
throw new RuntimeException("Expected only 2 invocations");
}
}
}
);
Mockito.when(rpcFactory.<Result[]>newCaller()).thenReturn(caller);
scan.setCaching(100);
scan.setMaxResultSize(1000 * 1000);
try (MockClientScanner scanner=new MockClientScanner(conf,scan,TableName.valueOf("table"),clusterConn,rpcFactory,controllerFactory,pool,Integer.MAX_VALUE)){
Mockito.verify(caller).callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt());
scanner.setRpcFinished(true);
InOrder inOrder=Mockito.inOrder(caller);
scanner.loadCache();
inOrder.verify(caller,Mockito.times(2)).callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt());
assertEquals(1,scanner.cache.size());
Result r=scanner.cache.poll();
assertNotNull(r);
CellScanner cs=r.cellScanner();
assertTrue(cs.advance());
assertEquals(kv1,cs.current());
assertFalse(cs.advance());
}
 }

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void testMoreResults() throws IOException {
  final Result[] results1=new Result[1];
  KeyValue kv1=new KeyValue("row".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum);
  results1[0]=Result.create(new Cell[]{kv1});
  final Result[] results2=new Result[1];
  KeyValue kv2=new KeyValue("row2".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum);
  results2[0]=Result.create(new Cell[]{kv2});
  RpcRetryingCaller<Result[]> caller=Mockito.mock(RpcRetryingCaller.class);
  Mockito.when(rpcFactory.<Result[]>newCaller()).thenReturn(caller);
  Mockito.when(caller.callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt())).thenAnswer(new Answer<Result[]>(){
    private int count=0;
    @Override public Result[] answer(    InvocationOnMock invocation) throws Throwable {
      ScannerCallableWithReplicas callable=invocation.getArgumentAt(0,ScannerCallableWithReplicas.class);
switch (count) {
case 0:
case 3:
        count++;
      return null;
case 1:
    count++;
  callable.setHasMoreResultsContext(true);
callable.setServerHasMoreResults(true);
return results1;
case 2:
count++;
callable.setHasMoreResultsContext(true);
callable.setServerHasMoreResults(false);
return results2;
default :
throw new RuntimeException("Expected only 2 invocations");
}
}
}
);
scan.setCaching(100);
scan.setMaxResultSize(1000 * 1000);
try (MockClientScanner scanner=new MockClientScanner(conf,scan,TableName.valueOf("table"),clusterConn,rpcFactory,controllerFactory,pool,Integer.MAX_VALUE)){
Mockito.verify(caller).callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt());
InOrder inOrder=Mockito.inOrder(caller);
scanner.loadCache();
inOrder.verify(caller,Mockito.times(2)).callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt());
assertEquals(1,scanner.cache.size());
Result r=scanner.cache.poll();
assertNotNull(r);
CellScanner cs=r.cellScanner();
assertTrue(cs.advance());
assertEquals(kv1,cs.current());
assertFalse(cs.advance());
scanner.setRpcFinished(true);
inOrder=Mockito.inOrder(caller);
scanner.loadCache();
inOrder.verify(caller,Mockito.times(3)).callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt());
r=scanner.cache.poll();
assertNotNull(r);
cs=r.cellScanner();
assertTrue(cs.advance());
assertEquals(kv2,cs.current());
assertFalse(cs.advance());
}
 }

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void testNoResultsHint() throws IOException {
  final Result[] results=new Result[1];
  KeyValue kv1=new KeyValue("row".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum);
  results[0]=Result.create(new Cell[]{kv1});
  RpcRetryingCaller<Result[]> caller=Mockito.mock(RpcRetryingCaller.class);
  Mockito.when(rpcFactory.<Result[]>newCaller()).thenReturn(caller);
  Mockito.when(caller.callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt())).thenAnswer(new Answer<Result[]>(){
    private int count=0;
    @Override public Result[] answer(    InvocationOnMock invocation) throws Throwable {
      ScannerCallableWithReplicas callable=invocation.getArgumentAt(0,ScannerCallableWithReplicas.class);
switch (count) {
case 0:
case 2:
        count++;
      return null;
case 1:
    count++;
  callable.setHasMoreResultsContext(false);
return results;
default :
throw new RuntimeException("Expected only 2 invocations");
}
}
}
);
scan.setCaching(100);
scan.setMaxResultSize(1000 * 1000);
try (MockClientScanner scanner=new MockClientScanner(conf,scan,TableName.valueOf("table"),clusterConn,rpcFactory,controllerFactory,pool,Integer.MAX_VALUE)){
scanner.setRpcFinished(true);
InOrder inOrder=Mockito.inOrder(caller);
scanner.loadCache();
inOrder.verify(caller,Mockito.times(2)).callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt());
assertEquals(1,scanner.cache.size());
Result r=scanner.cache.poll();
assertNotNull(r);
CellScanner cs=r.cellScanner();
assertTrue(cs.advance());
assertEquals(kv1,cs.current());
assertFalse(cs.advance());
}
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestFromClientSide </h4><pre class="type-11 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRowMutation() throws Exception {
  LOG.info("Starting testRowMutation");
  final TableName TABLENAME=TableName.valueOf("testRowMutation");
  Table t=TEST_UTIL.createTable(TABLENAME,FAMILY);
  byte[][] QUALIFIERS=new byte[][]{Bytes.toBytes("a"),Bytes.toBytes("b")};
  RowMutations arm=new RowMutations(ROW);
  Put p=new Put(ROW);
  p.addColumn(FAMILY,QUALIFIERS[0],VALUE);
  arm.add(p);
  t.mutateRow(arm);
  Get g=new Get(ROW);
  Result r=t.get(g);
  assertEquals(0,Bytes.compareTo(VALUE,r.getValue(FAMILY,QUALIFIERS[0])));
  arm=new RowMutations(ROW);
  p=new Put(ROW);
  p.addColumn(FAMILY,QUALIFIERS[1],VALUE);
  arm.add(p);
  Delete d=new Delete(ROW);
  d.addColumns(FAMILY,QUALIFIERS[0]);
  arm.add(d);
  t.mutateRow(arm);
  r=t.get(g);
  assertEquals(0,Bytes.compareTo(VALUE,r.getValue(FAMILY,QUALIFIERS[1])));
  assertNull(r.getValue(FAMILY,QUALIFIERS[0]));
  try {
    arm=new RowMutations(ROW);
    p=new Put(ROW);
    p.addColumn(new byte[]{'b','o','g','u','s'},QUALIFIERS[0],VALUE);
    arm.add(p);
    t.mutateRow(arm);
    fail("Expected NoSuchColumnFamilyException");
  }
 catch (  NoSuchColumnFamilyException e) {
  }
}

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-8 type-13 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("Flakey: HBASE-8989") @Test public void testClientPoolThreadLocal() throws IOException {
  final TableName tableName=TableName.valueOf("testClientPoolThreadLocal");
  int poolSize=Integer.MAX_VALUE;
  int numVersions=3;
  Configuration conf=TEST_UTIL.getConfiguration();
  conf.set(HConstants.HBASE_CLIENT_IPC_POOL_TYPE,"thread-local");
  conf.setInt(HConstants.HBASE_CLIENT_IPC_POOL_SIZE,poolSize);
  final Table table=TEST_UTIL.createTable(tableName,new byte[][]{FAMILY},3);
  final long ts=EnvironmentEdgeManager.currentTime();
  final Get get=new Get(ROW);
  get.addColumn(FAMILY,QUALIFIER);
  get.setMaxVersions();
  for (int versions=1; versions <= numVersions; versions++) {
    Put put=new Put(ROW);
    put.addColumn(FAMILY,QUALIFIER,ts + versions,VALUE);
    table.put(put);
    Result result=table.get(get);
    NavigableMap<Long,byte[]> navigableMap=result.getMap().get(FAMILY).get(QUALIFIER);
    assertEquals("The number of versions of '" + FAMILY + ":"+ QUALIFIER+ " did not match "+ versions+ "; "+ put.toString()+ ", "+ get.toString(),versions,navigableMap.size());
    for (    Map.Entry<Long,byte[]> entry : navigableMap.entrySet()) {
      assertTrue("The value at time " + entry.getKey() + " did not match what was put",Bytes.equals(VALUE,entry.getValue()));
    }
  }
  final Object waitLock=new Object();
  ExecutorService executorService=Executors.newFixedThreadPool(numVersions);
  final AtomicReference<AssertionError> error=new AtomicReference<AssertionError>(null);
  for (int versions=numVersions; versions < numVersions * 2; versions++) {
    final int versionsCopy=versions;
    executorService.submit(new Callable<Void>(){
      @Override public Void call(){
        try {
          Put put=new Put(ROW);
          put.addColumn(FAMILY,QUALIFIER,ts + versionsCopy,VALUE);
          table.put(put);
          Result result=table.get(get);
          NavigableMap<Long,byte[]> navigableMap=result.getMap().get(FAMILY).get(QUALIFIER);
          assertEquals("The number of versions of '" + Bytes.toString(FAMILY) + ":"+ Bytes.toString(QUALIFIER)+ " did not match "+ versionsCopy,versionsCopy,navigableMap.size());
          for (          Map.Entry<Long,byte[]> entry : navigableMap.entrySet()) {
            assertTrue("The value at time " + entry.getKey() + " did not match what was put",Bytes.equals(VALUE,entry.getValue()));
          }
synchronized (waitLock) {
            waitLock.wait();
          }
        }
 catch (        Exception e) {
        }
catch (        AssertionError e) {
          error.set(e);
          LOG.error(e);
        }
        return null;
      }
    }
);
  }
synchronized (waitLock) {
    waitLock.notifyAll();
  }
  executorService.shutdownNow();
  assertNull(error.get());
}

</code></pre>

<br>
<pre class="type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testFilterAllRecords() throws IOException {
  Scan scan=new Scan();
  scan.setBatch(1);
  scan.setCaching(1);
  scan.setFilter(new FilterList(new FirstKeyOnlyFilter(),new InclusiveStopFilter(new byte[0])));
  try (Table table=TEST_UTIL.getConnection().getTable(TableName.NAMESPACE_TABLE_NAME)){
    try (ResultScanner s=table.getScanner(scan)){
      assertNull(s.next());
    }
   }
 }

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNonCachedGetRegionLocation() throws Exception {
  TableName TABLE=TableName.valueOf("testNonCachedGetRegionLocation");
  byte[] family1=Bytes.toBytes("f1");
  byte[] family2=Bytes.toBytes("f2");
  try (Table table=TEST_UTIL.createTable(TABLE,new byte[][]{family1,family2},10);Admin admin=TEST_UTIL.getHBaseAdmin();RegionLocator locator=TEST_UTIL.getConnection().getRegionLocator(TABLE)){
    List<HRegionLocation> allRegionLocations=locator.getAllRegionLocations();
    assertEquals(1,allRegionLocations.size());
    HRegionInfo regionInfo=allRegionLocations.get(0).getRegionInfo();
    ServerName addrBefore=allRegionLocations.get(0).getServerName();
    HRegionLocation addrCache=locator.getRegionLocation(regionInfo.getStartKey(),false);
    HRegionLocation addrNoCache=locator.getRegionLocation(regionInfo.getStartKey(),true);
    assertEquals(addrBefore.getPort(),addrCache.getPort());
    assertEquals(addrBefore.getPort(),addrNoCache.getPort());
    ServerName addrAfter=null;
    for (int i=0; i < SLAVES; i++) {
      HRegionServer regionServer=TEST_UTIL.getHBaseCluster().getRegionServer(i);
      ServerName addr=regionServer.getServerName();
      if (addr.getPort() != addrBefore.getPort()) {
        admin.move(regionInfo.getEncodedNameAsBytes(),Bytes.toBytes(addr.toString()));
        Thread.sleep(5000);
        addrAfter=addr;
        break;
      }
    }
    addrCache=locator.getRegionLocation(regionInfo.getStartKey(),false);
    addrNoCache=locator.getRegionLocation(regionInfo.getStartKey(),true);
    assertNotNull(addrAfter);
    assertTrue(addrAfter.getPort() != addrCache.getPort());
    assertEquals(addrAfter.getPort(),addrNoCache.getPort());
  }
 }

</code></pre>

<br>
<pre class="type-4 type-10 type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetClosestRowBefore() throws IOException, InterruptedException {
  final TableName tableName=TableName.valueOf("testGetClosestRowBefore");
  final byte[] firstRow=Bytes.toBytes("row111");
  final byte[] secondRow=Bytes.toBytes("row222");
  final byte[] thirdRow=Bytes.toBytes("row333");
  final byte[] forthRow=Bytes.toBytes("row444");
  final byte[] beforeFirstRow=Bytes.toBytes("row");
  final byte[] beforeSecondRow=Bytes.toBytes("row22");
  final byte[] beforeThirdRow=Bytes.toBytes("row33");
  final byte[] beforeForthRow=Bytes.toBytes("row44");
  try (Table t=TEST_UTIL.createTable(tableName,new byte[][]{HConstants.CATALOG_FAMILY,Bytes.toBytes("info2")},1,1024);RegionLocator locator=TEST_UTIL.getConnection().getRegionLocator(tableName)){
    if (t instanceof HTableInterface) {
      HTableInterface table=(HTableInterface)t;
      String regionName=locator.getAllRegionLocations().get(0).getRegionInfo().getEncodedName();
      Region region=TEST_UTIL.getRSForFirstRegionInTable(tableName).getFromOnlineRegions(regionName);
      Put put1=new Put(firstRow);
      Put put2=new Put(secondRow);
      Put put3=new Put(thirdRow);
      Put put4=new Put(forthRow);
      byte[] one=new byte[]{1};
      byte[] two=new byte[]{2};
      byte[] three=new byte[]{3};
      byte[] four=new byte[]{4};
      put1.addColumn(HConstants.CATALOG_FAMILY,null,one);
      put2.addColumn(HConstants.CATALOG_FAMILY,null,two);
      put3.addColumn(HConstants.CATALOG_FAMILY,null,three);
      put4.addColumn(HConstants.CATALOG_FAMILY,null,four);
      table.put(put1);
      table.put(put2);
      table.put(put3);
      table.put(put4);
      region.flush(true);
      Result result;
      result=getReverseScanResult(table,beforeFirstRow,HConstants.CATALOG_FAMILY);
      assertNull(result);
      result=getReverseScanResult(table,firstRow,HConstants.CATALOG_FAMILY);
      assertTrue(result.containsColumn(HConstants.CATALOG_FAMILY,null));
      assertTrue(Bytes.equals(result.getRow(),firstRow));
      assertTrue(Bytes.equals(result.getValue(HConstants.CATALOG_FAMILY,null),one));
      result=getReverseScanResult(table,beforeSecondRow,HConstants.CATALOG_FAMILY);
      assertTrue(result.containsColumn(HConstants.CATALOG_FAMILY,null));
      assertTrue(Bytes.equals(result.getRow(),firstRow));
      assertTrue(Bytes.equals(result.getValue(HConstants.CATALOG_FAMILY,null),one));
      result=getReverseScanResult(table,secondRow,HConstants.CATALOG_FAMILY);
      assertTrue(result.containsColumn(HConstants.CATALOG_FAMILY,null));
      assertTrue(Bytes.equals(result.getRow(),secondRow));
      assertTrue(Bytes.equals(result.getValue(HConstants.CATALOG_FAMILY,null),two));
      result=getReverseScanResult(table,beforeThirdRow,HConstants.CATALOG_FAMILY);
      assertTrue(result.containsColumn(HConstants.CATALOG_FAMILY,null));
      assertTrue(Bytes.equals(result.getRow(),secondRow));
      assertTrue(Bytes.equals(result.getValue(HConstants.CATALOG_FAMILY,null),two));
      result=getReverseScanResult(table,thirdRow,HConstants.CATALOG_FAMILY);
      assertTrue(result.containsColumn(HConstants.CATALOG_FAMILY,null));
      assertTrue(Bytes.equals(result.getRow(),thirdRow));
      assertTrue(Bytes.equals(result.getValue(HConstants.CATALOG_FAMILY,null),three));
      result=getReverseScanResult(table,beforeForthRow,HConstants.CATALOG_FAMILY);
      assertTrue(result.containsColumn(HConstants.CATALOG_FAMILY,null));
      assertTrue(Bytes.equals(result.getRow(),thirdRow));
      assertTrue(Bytes.equals(result.getValue(HConstants.CATALOG_FAMILY,null),three));
      result=getReverseScanResult(table,forthRow,HConstants.CATALOG_FAMILY);
      assertTrue(result.containsColumn(HConstants.CATALOG_FAMILY,null));
      assertTrue(Bytes.equals(result.getRow(),forthRow));
      assertTrue(Bytes.equals(result.getValue(HConstants.CATALOG_FAMILY,null),four));
      result=getReverseScanResult(table,Bytes.add(forthRow,one),HConstants.CATALOG_FAMILY);
      assertTrue(result.containsColumn(HConstants.CATALOG_FAMILY,null));
      assertTrue(Bytes.equals(result.getRow(),forthRow));
      assertTrue(Bytes.equals(result.getValue(HConstants.CATALOG_FAMILY,null),four));
    }
  }
 }

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test ScanMetrics
 * @throws Exception
 */
@Test @SuppressWarnings("unused") public void testScanMetrics() throws Exception {
  TableName TABLENAME=TableName.valueOf("testScanMetrics");
  Table ht=TEST_UTIL.createMultiRegionTable(TABLENAME,FAMILY);
  int numOfRegions=-1;
  try (RegionLocator r=TEST_UTIL.getConnection().getRegionLocator(TABLENAME)){
    numOfRegions=r.getStartKeys().length;
  }
   Put put1=new Put(Bytes.toBytes("zzz1"));
  put1.addColumn(FAMILY,QUALIFIER,VALUE);
  Put put2=new Put(Bytes.toBytes("zzz2"));
  put2.addColumn(FAMILY,QUALIFIER,VALUE);
  Put put3=new Put(Bytes.toBytes("zzz3"));
  put3.addColumn(FAMILY,QUALIFIER,VALUE);
  ht.put(Arrays.asList(put1,put2,put3));
  Scan scan1=new Scan();
  int numRecords=0;
  ResultScanner scanner=ht.getScanner(scan1);
  for (  Result result : scanner) {
    numRecords++;
  }
  scanner.close();
  LOG.info("test data has " + numRecords + " records.");
  assertEquals(null,scan1.getScanMetrics());
  Scan scan2=new Scan();
  scan2.setScanMetricsEnabled(true);
  scan2.setCaching(numRecords + 1);
  scanner=ht.getScanner(scan2);
  for (  Result result : scanner.next(numRecords - 1)) {
  }
  scanner.close();
  assertNotNull(scan2.getScanMetrics());
  scan2=new Scan();
  scan2.setScanMetricsEnabled(true);
  scan2.setCaching(1);
  scanner=ht.getScanner(scan2);
  for (  Result result : scanner.next(numRecords - 1)) {
  }
  scanner.close();
  ScanMetrics scanMetrics=scan2.getScanMetrics();
  assertEquals("Did not access all the regions in the table",numOfRegions,scanMetrics.countOfRegions.get());
  scan2=new Scan();
  scan2.setScanMetricsEnabled(true);
  scan2.setCaching(1);
  scanner=ht.getScanner(scan2);
  int numBytes=0;
  for (  Result result : scanner.next(1)) {
    for (    Cell cell : result.listCells()) {
      numBytes+=CellUtil.estimatedSerializedSizeOf(cell);
    }
  }
  scanner.close();
  scanMetrics=scan2.getScanMetrics();
  assertEquals("Did not count the result bytes",numBytes,scanMetrics.countOfBytesInResults.get());
  scan2=new Scan();
  scan2.setScanMetricsEnabled(true);
  scan2.setCaching(1);
  scan2.setSmall(true);
  scanner=ht.getScanner(scan2);
  numBytes=0;
  for (  Result result : scanner.next(1)) {
    for (    Cell cell : result.listCells()) {
      numBytes+=CellUtil.estimatedSerializedSizeOf(cell);
    }
  }
  scanner.close();
  scanMetrics=scan2.getScanMetrics();
  assertEquals("Did not count the result bytes",numBytes,scanMetrics.countOfBytesInResults.get());
  Scan scanWithClose=new Scan();
  scanWithClose.setCaching(numRecords);
  scanWithClose.setScanMetricsEnabled(true);
  ResultScanner scannerWithClose=ht.getScanner(scanWithClose);
  for (  Result result : scannerWithClose.next(numRecords + 1)) {
  }
  scannerWithClose.close();
  ScanMetrics scanMetricsWithClose=getScanMetrics(scanWithClose);
  assertEquals("Did not access all the regions in the table",numOfRegions,scanMetricsWithClose.countOfRegions.get());
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Basic client side validation of HBASE-10118
 */
@Test public void testPurgeFutureDeletes() throws Exception {
  final TableName TABLENAME=TableName.valueOf("testPurgeFutureDeletes");
  final byte[] ROW=Bytes.toBytes("row");
  final byte[] FAMILY=Bytes.toBytes("family");
  final byte[] COLUMN=Bytes.toBytes("column");
  final byte[] VALUE=Bytes.toBytes("value");
  Table table=TEST_UTIL.createTable(TABLENAME,FAMILY);
  long ts=System.currentTimeMillis() * 2;
  Put put=new Put(ROW,ts);
  put.addColumn(FAMILY,COLUMN,VALUE);
  table.put(put);
  Get get=new Get(ROW);
  Result result=table.get(get);
  assertArrayEquals(VALUE,result.getValue(FAMILY,COLUMN));
  Delete del=new Delete(ROW);
  del.addColumn(FAMILY,COLUMN,ts);
  table.delete(del);
  get=new Get(ROW);
  result=table.get(get);
  assertNull(result.getValue(FAMILY,COLUMN));
  TEST_UTIL.getHBaseAdmin().flush(TABLENAME);
  TEST_UTIL.getHBaseAdmin().majorCompact(TABLENAME);
  TEST_UTIL.waitFor(6000,new Waiter.Predicate<IOException>(){
    @Override public boolean evaluate() throws IOException {
      return TEST_UTIL.getHBaseAdmin().getCompactionState(TABLENAME) == AdminProtos.GetRegionInfoResponse.CompactionState.NONE;
    }
  }
);
  put=new Put(ROW,ts);
  put.addColumn(FAMILY,COLUMN,VALUE);
  table.put(put);
  get=new Get(ROW);
  result=table.get(get);
  assertArrayEquals(VALUE,result.getValue(FAMILY,COLUMN));
  table.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestFromClientSide3 </h4><pre class="type-4 type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testAdvancedConfigOverride() throws Exception {
  TEST_UTIL.getConfiguration().setInt("hbase.hstore.compaction.min",3);
  TableName tableName=TableName.valueOf("testAdvancedConfigOverride");
  Table hTable=TEST_UTIL.createTable(tableName,FAMILY,10);
  Admin admin=TEST_UTIL.getHBaseAdmin();
  ClusterConnection connection=(ClusterConnection)TEST_UTIL.getConnection();
  byte[] row=Bytes.toBytes(random.nextInt());
  performMultiplePutAndFlush((HBaseAdmin)admin,hTable,row,FAMILY,3,100);
  try (RegionLocator locator=TEST_UTIL.getConnection().getRegionLocator(tableName)){
    HRegionLocation loc=locator.getRegionLocation(row,true);
    byte[] regionName=loc.getRegionInfo().getRegionName();
    AdminProtos.AdminService.BlockingInterface server=connection.getAdmin(loc.getServerName());
    assertTrue(ProtobufUtil.getStoreFiles(server,regionName,FAMILY).size() > 1);
    admin.compact(tableName);
    for (int i=0; i < 10 * 1000 / 40; ++i) {
      loc=locator.getRegionLocation(row,true);
      if (!loc.getRegionInfo().isOffline()) {
        regionName=loc.getRegionInfo().getRegionName();
        server=connection.getAdmin(loc.getServerName());
        if (ProtobufUtil.getStoreFiles(server,regionName,FAMILY).size() <= 1) {
          break;
        }
      }
      Thread.sleep(40);
    }
    assertTrue(ProtobufUtil.getStoreFiles(server,regionName,FAMILY).size() <= 1);
    LOG.info("hbase.hstore.compaction.min should now be 5");
    HTableDescriptor htd=new HTableDescriptor(hTable.getTableDescriptor());
    htd.setValue("hbase.hstore.compaction.min",String.valueOf(5));
    admin.modifyTable(tableName,htd);
    Pair<Integer,Integer> st;
    while (null != (st=admin.getAlterStatus(tableName)) && st.getFirst() > 0) {
      LOG.debug(st.getFirst() + " regions left to update");
      Thread.sleep(40);
    }
    LOG.info("alter status finished");
    performMultiplePutAndFlush((HBaseAdmin)admin,hTable,row,FAMILY,3,10);
    admin.compact(tableName);
    Thread.sleep(10 * 1000);
    loc=locator.getRegionLocation(row,true);
    regionName=loc.getRegionInfo().getRegionName();
    server=connection.getAdmin(loc.getServerName());
    int sfCount=ProtobufUtil.getStoreFiles(server,regionName,FAMILY).size();
    assertTrue(sfCount > 1);
    LOG.info("hbase.hstore.compaction.min should now be 2");
    HColumnDescriptor hcd=new HColumnDescriptor(htd.getFamily(FAMILY));
    hcd.setValue("hbase.hstore.compaction.min",String.valueOf(2));
    htd.modifyFamily(hcd);
    admin.modifyTable(tableName,htd);
    while (null != (st=admin.getAlterStatus(tableName)) && st.getFirst() > 0) {
      LOG.debug(st.getFirst() + " regions left to update");
      Thread.sleep(40);
    }
    LOG.info("alter status finished");
    admin.compact(tableName);
    for (int i=0; i < 10 * 1000 / 40; ++i) {
      loc=locator.getRegionLocation(row,true);
      regionName=loc.getRegionInfo().getRegionName();
      try {
        server=connection.getAdmin(loc.getServerName());
        if (ProtobufUtil.getStoreFiles(server,regionName,FAMILY).size() < sfCount) {
          break;
        }
      }
 catch (      Exception e) {
        LOG.debug("Waiting for region to come online: " + regionName);
      }
      Thread.sleep(40);
    }
    assertTrue(ProtobufUtil.getStoreFiles(server,regionName,FAMILY).size() < sfCount);
    LOG.info("Removing CF config value");
    LOG.info("hbase.hstore.compaction.min should now be 5");
    hcd=new HColumnDescriptor(htd.getFamily(FAMILY));
    hcd.setValue("hbase.hstore.compaction.min",null);
    htd.modifyFamily(hcd);
    admin.modifyTable(tableName,htd);
    while (null != (st=admin.getAlterStatus(tableName)) && st.getFirst() > 0) {
      LOG.debug(st.getFirst() + " regions left to update");
      Thread.sleep(40);
    }
    LOG.info("alter status finished");
    assertNull(hTable.getTableDescriptor().getFamily(FAMILY).getValue("hbase.hstore.compaction.min"));
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestGet </h4><pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAttributes(){
  Get get=new Get(ROW);
  Assert.assertTrue(get.getAttributesMap().isEmpty());
  Assert.assertNull(get.getAttribute("absent"));
  get.setAttribute("absent",null);
  Assert.assertTrue(get.getAttributesMap().isEmpty());
  Assert.assertNull(get.getAttribute("absent"));
  get.setAttribute("attribute1",Bytes.toBytes("value1"));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value1"),get.getAttribute("attribute1")));
  Assert.assertEquals(1,get.getAttributesMap().size());
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value1"),get.getAttributesMap().get("attribute1")));
  get.setAttribute("attribute1",Bytes.toBytes("value12"));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value12"),get.getAttribute("attribute1")));
  Assert.assertEquals(1,get.getAttributesMap().size());
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value12"),get.getAttributesMap().get("attribute1")));
  get.setAttribute("attribute2",Bytes.toBytes("value2"));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value2"),get.getAttribute("attribute2")));
  Assert.assertEquals(2,get.getAttributesMap().size());
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value2"),get.getAttributesMap().get("attribute2")));
  get.setAttribute("attribute2",null);
  Assert.assertNull(get.getAttribute("attribute2"));
  Assert.assertEquals(1,get.getAttributesMap().size());
  Assert.assertNull(get.getAttributesMap().get("attribute2"));
  get.setAttribute("attribute2",null);
  Assert.assertNull(get.getAttribute("attribute2"));
  Assert.assertEquals(1,get.getAttributesMap().size());
  Assert.assertNull(get.getAttributesMap().get("attribute2"));
  get.setAttribute("attribute1",null);
  Assert.assertNull(get.getAttribute("attribute1"));
  Assert.assertTrue(get.getAttributesMap().isEmpty());
  Assert.assertNull(get.getAttributesMap().get("attribute1"));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAttributesSerialization() throws IOException {
  Get get=new Get(Bytes.toBytes("row"));
  get.setAttribute("attribute1",Bytes.toBytes("value1"));
  get.setAttribute("attribute2",Bytes.toBytes("value2"));
  get.setAttribute("attribute3",Bytes.toBytes("value3"));
  ClientProtos.Get getProto=ProtobufUtil.toGet(get);
  Get get2=ProtobufUtil.toGet(getProto);
  Assert.assertNull(get2.getAttribute("absent"));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value1"),get2.getAttribute("attribute1")));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value2"),get2.getAttribute("attribute2")));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value3"),get2.getAttribute("attribute3")));
  Assert.assertEquals(3,get2.getAttributesMap().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestHCM </h4><pre class="type-4 type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClusterConnection() throws IOException {
  ThreadPoolExecutor otherPool=new ThreadPoolExecutor(1,1,5,TimeUnit.SECONDS,new SynchronousQueue<Runnable>(),Threads.newDaemonThreadFactory("test-hcm"));
  Connection con1=ConnectionFactory.createConnection(TEST_UTIL.getConfiguration());
  Connection con2=ConnectionFactory.createConnection(TEST_UTIL.getConfiguration(),otherPool);
  assertTrue(otherPool == ((ConnectionImplementation)con2).getCurrentBatchPool());
  TableName tableName=TableName.valueOf("testClusterConnection");
  TEST_UTIL.createTable(tableName,FAM_NAM).close();
  HTable t=(HTable)con1.getTable(tableName,otherPool);
  assertNull("Internal Thread pool should be null",((ConnectionImplementation)con1).getCurrentBatchPool());
  assertTrue(otherPool == t.getPool());
  t.close();
  t=(HTable)con2.getTable(tableName);
  assertTrue(otherPool == t.getPool());
  t.close();
  t=(HTable)con2.getTable(tableName);
  assertTrue(otherPool == t.getPool());
  t.close();
  t=(HTable)con2.getTable(tableName);
  assertTrue(otherPool == t.getPool());
  t.close();
  t=(HTable)con1.getTable(tableName);
  ExecutorService pool=((ConnectionImplementation)con1).getCurrentBatchPool();
  assertNotNull("An internal Thread pool should have been created",pool);
  assertTrue(t.getPool() == pool);
  t.close();
  t=(HTable)con1.getTable(tableName);
  assertTrue(t.getPool() == pool);
  t.close();
  con1.close();
  assertTrue(pool.isShutdown());
  con2.close();
  assertFalse(otherPool.isShutdown());
  otherPool.shutdownNow();
}

</code></pre>

<br>
<pre class="type-4 type-11 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that when we delete a location using the first row of a region
 * that we really delete it.
 * @throws Exception
 */
@Test public void testRegionCaching() throws Exception {
  TEST_UTIL.createMultiRegionTable(TABLE_NAME,FAM_NAM).close();
  Configuration conf=new Configuration(TEST_UTIL.getConfiguration());
  conf.setInt(HConstants.HBASE_CLIENT_RETRIES_NUMBER,0);
  Connection connection=ConnectionFactory.createConnection(conf);
  final Table table=connection.getTable(TABLE_NAME);
  TEST_UTIL.waitUntilAllRegionsAssigned(table.getName());
  Put put=new Put(ROW);
  put.addColumn(FAM_NAM,ROW,ROW);
  table.put(put);
  ConnectionImplementation conn=(ConnectionImplementation)connection;
  assertNotNull(conn.getCachedLocation(TABLE_NAME,ROW));
  final int nextPort=conn.getCachedLocation(TABLE_NAME,ROW).getRegionLocation().getPort() + 1;
  HRegionLocation loc=conn.getCachedLocation(TABLE_NAME,ROW).getRegionLocation();
  conn.updateCachedLocation(loc.getRegionInfo(),loc.getServerName(),ServerName.valueOf("127.0.0.1",nextPort,HConstants.LATEST_TIMESTAMP),HConstants.LATEST_TIMESTAMP);
  Assert.assertEquals(conn.getCachedLocation(TABLE_NAME,ROW).getRegionLocation().getPort(),nextPort);
  conn.clearRegionCache(TABLE_NAME,ROW.clone());
  RegionLocations rl=conn.getCachedLocation(TABLE_NAME,ROW);
  assertNull("What is this location?? " + rl,rl);
  conn.clearRegionCache(TABLE_NAME);
  Assert.assertEquals(0,conn.getNumberOfCachedRegionLocations(TABLE_NAME));
  Put put2=new Put(ROW);
  put2.addColumn(FAM_NAM,ROW,ROW);
  table.put(put2);
  assertNotNull(conn.getCachedLocation(TABLE_NAME,ROW));
  assertNotNull(conn.getCachedLocation(TableName.valueOf(TABLE_NAME.getName()),ROW.clone()));
  TEST_UTIL.getHBaseAdmin().setBalancerRunning(false,false);
  HMaster master=TEST_UTIL.getMiniHBaseCluster().getMaster();
  while (master.getAssignmentManager().getRegionStates().isRegionsInTransition()) {
    Thread.sleep(1);
  }
  HRegionLocation toMove=conn.getCachedLocation(TABLE_NAME,ROW).getRegionLocation();
  byte[] regionName=toMove.getRegionInfo().getRegionName();
  byte[] encodedRegionNameBytes=toMove.getRegionInfo().getEncodedNameAsBytes();
  int curServerId=TEST_UTIL.getHBaseCluster().getServerWith(regionName);
  int destServerId=(curServerId == 0 ? 1 : 0);
  HRegionServer curServer=TEST_UTIL.getHBaseCluster().getRegionServer(curServerId);
  HRegionServer destServer=TEST_UTIL.getHBaseCluster().getRegionServer(destServerId);
  ServerName destServerName=destServer.getServerName();
  Assert.assertTrue(curServer != destServer);
  Assert.assertFalse(curServer.getServerName().equals(destServer.getServerName()));
  Assert.assertFalse(toMove.getPort() == destServerName.getPort());
  Assert.assertNotNull(curServer.getOnlineRegion(regionName));
  Assert.assertNull(destServer.getOnlineRegion(regionName));
  Assert.assertFalse(TEST_UTIL.getMiniHBaseCluster().getMaster().getAssignmentManager().getRegionStates().isRegionsInTransition());
  LOG.info("Move starting region=" + toMove.getRegionInfo().getRegionNameAsString());
  TEST_UTIL.getHBaseAdmin().move(toMove.getRegionInfo().getEncodedNameAsBytes(),destServerName.getServerName().getBytes());
  while (destServer.getOnlineRegion(regionName) == null || destServer.getRegionsInTransitionInRS().containsKey(encodedRegionNameBytes) || curServer.getRegionsInTransitionInRS().containsKey(encodedRegionNameBytes) || master.getAssignmentManager().getRegionStates().isRegionsInTransition()) {
    Thread.sleep(1);
  }
  LOG.info("Move finished for region=" + toMove.getRegionInfo().getRegionNameAsString());
  Assert.assertNull(curServer.getOnlineRegion(regionName));
  Assert.assertNotNull(destServer.getOnlineRegion(regionName));
  Assert.assertFalse(destServer.getRegionsInTransitionInRS().containsKey(encodedRegionNameBytes));
  Assert.assertFalse(curServer.getRegionsInTransitionInRS().containsKey(encodedRegionNameBytes));
  Assert.assertFalse(conn.getCachedLocation(TABLE_NAME,ROW).getRegionLocation().getPort() == destServerName.getPort());
  LOG.info("Put starting");
  Put put3=new Put(ROW);
  put3.addColumn(FAM_NAM,ROW,ROW);
  try {
    table.put(put3);
    Assert.fail("Unreachable point");
  }
 catch (  RetriesExhaustedWithDetailsException e) {
    LOG.info("Put done, exception caught: " + e.getClass());
    Assert.assertEquals(1,e.getNumExceptions());
    Assert.assertEquals(1,e.getCauses().size());
    Assert.assertArrayEquals(e.getRow(0).getRow(),ROW);
    Throwable cause=ClientExceptionsUtil.findException(e.getCause(0));
    Assert.assertNotNull(cause);
    Assert.assertTrue(cause instanceof RegionMovedException);
  }
  Assert.assertNotNull("Cached connection is null",conn.getCachedLocation(TABLE_NAME,ROW));
  Assert.assertEquals("Previous server was " + curServer.getServerName().getHostAndPort(),destServerName.getPort(),conn.getCachedLocation(TABLE_NAME,ROW).getRegionLocation().getPort());
  Assert.assertFalse(destServer.getRegionsInTransitionInRS().containsKey(encodedRegionNameBytes));
  Assert.assertFalse(curServer.getRegionsInTransitionInRS().containsKey(encodedRegionNameBytes));
  LOG.info("Move starting region=" + toMove.getRegionInfo().getRegionNameAsString());
  TEST_UTIL.getHBaseAdmin().move(toMove.getRegionInfo().getEncodedNameAsBytes(),curServer.getServerName().getServerName().getBytes());
  while (curServer.getOnlineRegion(regionName) == null || destServer.getRegionsInTransitionInRS().containsKey(encodedRegionNameBytes) || curServer.getRegionsInTransitionInRS().containsKey(encodedRegionNameBytes) || master.getAssignmentManager().getRegionStates().isRegionsInTransition()) {
    Thread.sleep(1);
  }
  Assert.assertNotNull(curServer.getOnlineRegion(regionName));
  Assert.assertNull(destServer.getOnlineRegion(regionName));
  LOG.info("Move finished for region=" + toMove.getRegionInfo().getRegionNameAsString());
  Assert.assertFalse(conn.getCachedLocation(TABLE_NAME,ROW).getRegionLocation().getPort() == curServer.getServerName().getPort());
  Scan sc=new Scan();
  sc.setStopRow(ROW);
  sc.setStartRow(ROW);
  TEST_UTIL.getConfiguration().setInt(HConstants.HBASE_CLIENT_RETRIES_NUMBER,1);
  try {
    ResultScanner rs=table.getScanner(sc);
    while (rs.next() != null) {
    }
    Assert.fail("Unreachable point");
  }
 catch (  RetriesExhaustedException e) {
    LOG.info("Scan done, expected exception caught: " + e.getClass());
  }
  Assert.assertNotNull(conn.getCachedLocation(TABLE_NAME,ROW));
  Assert.assertEquals("Previous server was " + destServer.getServerName().getHostAndPort(),curServer.getServerName().getPort(),conn.getCachedLocation(TABLE_NAME,ROW).getRegionLocation().getPort());
  TEST_UTIL.getConfiguration().setInt(HConstants.HBASE_CLIENT_RETRIES_NUMBER,HConstants.DEFAULT_HBASE_CLIENT_RETRIES_NUMBER);
  table.close();
  connection.close();
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that stale cache updates don't override newer cached values.
 */
@Test public void testCacheSeqNums() throws Exception {
  Table table=TEST_UTIL.createMultiRegionTable(TABLE_NAME2,FAM_NAM);
  Put put=new Put(ROW);
  put.addColumn(FAM_NAM,ROW,ROW);
  table.put(put);
  ConnectionImplementation conn=(ConnectionImplementation)TEST_UTIL.getConnection();
  HRegionLocation location=conn.getCachedLocation(TABLE_NAME2,ROW).getRegionLocation();
  assertNotNull(location);
  ServerName anySource=ServerName.valueOf(location.getHostname(),location.getPort() - 1,0L);
  int nextPort=location.getPort() + 1;
  conn.updateCachedLocation(location.getRegionInfo(),location.getServerName(),ServerName.valueOf("127.0.0.1",nextPort,0),location.getSeqNum() - 1);
  location=conn.getCachedLocation(TABLE_NAME2,ROW).getRegionLocation();
  Assert.assertEquals(nextPort,location.getPort());
  nextPort=location.getPort() + 1;
  conn.updateCachedLocation(location.getRegionInfo(),location.getServerName(),ServerName.valueOf("127.0.0.1",nextPort,0),location.getSeqNum() - 1);
  location=conn.getCachedLocation(TABLE_NAME2,ROW).getRegionLocation();
  Assert.assertEquals(nextPort,location.getPort());
  nextPort=location.getPort() + 1;
  conn.updateCachedLocation(location.getRegionInfo(),anySource,ServerName.valueOf("127.0.0.1",nextPort,0),location.getSeqNum() + 1);
  location=conn.getCachedLocation(TABLE_NAME2,ROW).getRegionLocation();
  Assert.assertEquals(nextPort,location.getPort());
  nextPort=location.getPort() + 1;
  conn.updateCachedLocation(location.getRegionInfo(),anySource,ServerName.valueOf("127.0.0.1",nextPort,0),location.getSeqNum() - 1);
  location=conn.getCachedLocation(TABLE_NAME2,ROW).getRegionLocation();
  Assert.assertEquals(nextPort - 1,location.getPort());
  table.close();
}

</code></pre>

<br>
<pre class="type-7 type-13 type-17 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore @Test(expected=RegionServerStoppedException.class) public void testClusterStatus() throws Exception {
  TableName tn=TableName.valueOf("testClusterStatus");
  byte[] cf="cf".getBytes();
  byte[] rk="rk1".getBytes();
  JVMClusterUtil.RegionServerThread rs=TEST_UTIL.getHBaseCluster().startRegionServer();
  rs.waitForServerOnline();
  final ServerName sn=rs.getRegionServer().getServerName();
  Table t=TEST_UTIL.createTable(tn,cf);
  TEST_UTIL.waitTableAvailable(tn);
  while (TEST_UTIL.getHBaseCluster().getMaster().getAssignmentManager().getRegionStates().isRegionsInTransition()) {
    Thread.sleep(1);
  }
  final ConnectionImplementation hci=(ConnectionImplementation)TEST_UTIL.getConnection();
  try (RegionLocator l=TEST_UTIL.getConnection().getRegionLocator(tn)){
    while (l.getRegionLocation(rk).getPort() != sn.getPort()) {
      TEST_UTIL.getHBaseAdmin().move(l.getRegionLocation(rk).getRegionInfo().getEncodedNameAsBytes(),Bytes.toBytes(sn.toString()));
      while (TEST_UTIL.getHBaseCluster().getMaster().getAssignmentManager().getRegionStates().isRegionsInTransition()) {
        Thread.sleep(1);
      }
      hci.clearRegionCache(tn);
    }
    Assert.assertNotNull(hci.clusterStatusListener);
    TEST_UTIL.assertRegionOnServer(l.getRegionLocation(rk).getRegionInfo(),sn,20000);
  }
   Put p1=new Put(rk);
  p1.addColumn(cf,"qual".getBytes(),"val".getBytes());
  t.put(p1);
  rs.getRegionServer().abort("I'm dead");
  TEST_UTIL.waitFor(40000,1000,true,new Waiter.Predicate<Exception>(){
    @Override public boolean evaluate() throws Exception {
      return TEST_UTIL.getHBaseCluster().getMaster().getServerManager().getDeadServers().isDeadServer(sn);
    }
  }
);
  TEST_UTIL.waitFor(40000,1000,true,new Waiter.Predicate<Exception>(){
    @Override public boolean evaluate() throws Exception {
      return hci.clusterStatusListener.isDeadServer(sn);
    }
  }
);
  t.close();
  hci.getClient(sn);
}

</code></pre>

<br>
<pre class="type-4 type-11 type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that the connection to the dead server is cut immediately when we receive the
 * notification.
 * @throws Exception
 */
@Test public void testConnectionCut() throws Exception {
  TableName tableName=TableName.valueOf("HCM-testConnectionCut");
  TEST_UTIL.createTable(tableName,FAM_NAM).close();
  boolean previousBalance=TEST_UTIL.getHBaseAdmin().setBalancerRunning(false,true);
  Configuration c2=new Configuration(TEST_UTIL.getConfiguration());
  c2.set(HConstants.HBASE_CLIENT_INSTANCE_ID,String.valueOf(-1));
  c2.setInt(HConstants.HBASE_CLIENT_RETRIES_NUMBER,0);
  c2.setInt(HConstants.HBASE_RPC_TIMEOUT_KEY,30 * 1000);
  final Connection connection=ConnectionFactory.createConnection(c2);
  final Table table=connection.getTable(tableName);
  Put p=new Put(FAM_NAM);
  p.addColumn(FAM_NAM,FAM_NAM,FAM_NAM);
  table.put(p);
  final ConnectionImplementation hci=(ConnectionImplementation)connection;
  final HRegionLocation loc;
  try (RegionLocator rl=connection.getRegionLocator(tableName)){
    loc=rl.getRegionLocation(FAM_NAM);
  }
   Get get=new Get(FAM_NAM);
  Assert.assertNotNull(table.get(get));
  get=new Get(FAM_NAM);
  get.setFilter(new BlockingFilter());
  Thread t=new Thread(){
    @Override public void run(){
synchronized (syncBlockingFilter) {
        try {
          syncBlockingFilter.wait();
        }
 catch (        InterruptedException e) {
          throw new RuntimeException(e);
        }
      }
      hci.clusterStatusListener.deadServerHandler.newDead(loc.getServerName());
    }
  }
;
  t.start();
  try {
    table.get(get);
    Assert.fail();
  }
 catch (  IOException expected) {
    LOG.debug("Received: " + expected);
    Assert.assertFalse(expected instanceof SocketTimeoutException);
    Assert.assertFalse(syncBlockingFilter.get());
  }
 finally {
    syncBlockingFilter.set(true);
    t.join();
    TEST_UTIL.getHBaseAdmin().setBalancerRunning(previousBalance,true);
  }
  table.close();
  connection.close();
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMulti() throws Exception {
  Table table=TEST_UTIL.createMultiRegionTable(TABLE_NAME3,FAM_NAM);
  try {
    ConnectionImplementation conn=(ConnectionImplementation)TEST_UTIL.getConnection();
    conn.clearRegionCache(TABLE_NAME3);
    Assert.assertEquals(0,conn.getNumberOfCachedRegionLocations(TABLE_NAME3));
    TEST_UTIL.getHBaseAdmin().setBalancerRunning(false,false);
    HMaster master=TEST_UTIL.getMiniHBaseCluster().getMaster();
    while (master.getAssignmentManager().getRegionStates().isRegionsInTransition()) {
      Thread.sleep(1);
    }
    Put put=new Put(ROW_X);
    put.addColumn(FAM_NAM,ROW_X,ROW_X);
    table.put(put);
    HRegionLocation toMove=conn.getCachedLocation(TABLE_NAME3,ROW_X).getRegionLocation();
    byte[] regionName=toMove.getRegionInfo().getRegionName();
    byte[] encodedRegionNameBytes=toMove.getRegionInfo().getEncodedNameAsBytes();
    int curServerId=TEST_UTIL.getHBaseCluster().getServerWith(regionName);
    int destServerId=(curServerId == 0 ? 1 : 0);
    HRegionServer curServer=TEST_UTIL.getHBaseCluster().getRegionServer(curServerId);
    HRegionServer destServer=TEST_UTIL.getHBaseCluster().getRegionServer(destServerId);
    ServerName destServerName=destServer.getServerName();
    List<Region> regions=curServer.getOnlineRegions(TABLE_NAME3);
    byte[] otherRow=null;
    for (    Region region : regions) {
      if (!region.getRegionInfo().getEncodedName().equals(toMove.getRegionInfo().getEncodedName()) && Bytes.BYTES_COMPARATOR.compare(region.getRegionInfo().getStartKey(),ROW_X) < 0) {
        otherRow=region.getRegionInfo().getStartKey();
        break;
      }
    }
    assertNotNull(otherRow);
    if (otherRow.length <= 0)     otherRow=Bytes.toBytes("aaa");
    Put put2=new Put(otherRow);
    put2.addColumn(FAM_NAM,otherRow,otherRow);
    table.put(put2);
    Assert.assertTrue(curServer != destServer);
    Assert.assertNotEquals(curServer.getServerName(),destServer.getServerName());
    Assert.assertNotEquals(toMove.getPort(),destServerName.getPort());
    Assert.assertNotNull(curServer.getOnlineRegion(regionName));
    Assert.assertNull(destServer.getOnlineRegion(regionName));
    Assert.assertFalse(TEST_UTIL.getMiniHBaseCluster().getMaster().getAssignmentManager().getRegionStates().isRegionsInTransition());
    LOG.info("Move starting region=" + toMove.getRegionInfo().getRegionNameAsString());
    TEST_UTIL.getHBaseAdmin().move(toMove.getRegionInfo().getEncodedNameAsBytes(),destServerName.getServerName().getBytes());
    while (destServer.getOnlineRegion(regionName) == null || destServer.getRegionsInTransitionInRS().containsKey(encodedRegionNameBytes) || curServer.getRegionsInTransitionInRS().containsKey(encodedRegionNameBytes) || master.getAssignmentManager().getRegionStates().isRegionsInTransition()) {
      Thread.sleep(1);
    }
    LOG.info("Move finished for region=" + toMove.getRegionInfo().getRegionNameAsString());
    Assert.assertNull(curServer.getOnlineRegion(regionName));
    Assert.assertNotNull(destServer.getOnlineRegion(regionName));
    Assert.assertFalse(destServer.getRegionsInTransitionInRS().containsKey(encodedRegionNameBytes));
    Assert.assertFalse(curServer.getRegionsInTransitionInRS().containsKey(encodedRegionNameBytes));
    Assert.assertFalse(conn.getCachedLocation(TABLE_NAME3,ROW_X).getRegionLocation().getPort() == destServerName.getPort());
    final int prevNumRetriesVal=setNumTries(conn,2);
    Put put3=new Put(ROW_X);
    put3.addColumn(FAM_NAM,ROW_X,ROW_X);
    Put put4=new Put(otherRow);
    put4.addColumn(FAM_NAM,otherRow,otherRow);
    ArrayList<Put> actions=Lists.newArrayList(put4,put3);
    table.batch(actions,null);
    setNumTries(conn,prevNumRetriesVal);
  }
  finally {
    table.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestLeaseRenewal </h4><pre class="type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLeaseRenewal() throws Exception {
  HTable table=TEST_UTIL.createTable(TableName.valueOf("testLeaseRenewal"),FAMILY);
  Put p=new Put(ROW_BYTES);
  p.addColumn(FAMILY,COL_QUAL,VAL_BYTES);
  table.put(p);
  p=new Put(ANOTHERROW);
  p.addColumn(FAMILY,COL_QUAL,VAL_BYTES);
  table.put(p);
  Scan s=new Scan();
  s.setCaching(1);
  ResultScanner rs=table.getScanner(s);
  assertTrue(rs.renewLease());
  assertTrue(Arrays.equals(rs.next().getRow(),ANOTHERROW));
  Thread.sleep(leaseTimeout / 2);
  assertTrue(rs.renewLease());
  Thread.sleep(leaseTimeout / 2);
  assertTrue(rs.renewLease());
  Thread.sleep(leaseTimeout / 2);
  assertTrue(rs.renewLease());
  assertTrue(Arrays.equals(rs.next().getRow(),ROW_BYTES));
  assertTrue(rs.renewLease());
  assertNull(rs.next());
  assertFalse(rs.renewLease());
  rs.close();
  table.close();
  MetricsHBaseServerSource serverSource=TEST_UTIL.getMiniHBaseCluster().getRegionServer(0).getRpcServer().getMetrics().getMetricsSource();
  HELPER.assertCounter("exceptions.OutOfOrderScannerNextException",0,serverSource);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestOperation </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test the client Operations' JSON encoding to ensure that produced JSON is
 * parseable and that the details are present and not corrupted.
 * @throws IOException
 */
@Test public void testOperationJSON() throws IOException {
  Scan scan=new Scan(ROW);
  scan.addColumn(FAMILY,QUALIFIER);
  String json=scan.toJSON();
  Map<String,Object> parsedJSON=mapper.readValue(json,HashMap.class);
  assertEquals("startRow incorrect in Scan.toJSON()",Bytes.toStringBinary(ROW),parsedJSON.get("startRow"));
  List familyInfo=(List)((Map)parsedJSON.get("families")).get(Bytes.toStringBinary(FAMILY));
  assertNotNull("Family absent in Scan.toJSON()",familyInfo);
  assertEquals("Qualifier absent in Scan.toJSON()",1,familyInfo.size());
  assertEquals("Qualifier incorrect in Scan.toJSON()",Bytes.toStringBinary(QUALIFIER),familyInfo.get(0));
  Get get=new Get(ROW);
  get.addColumn(FAMILY,QUALIFIER);
  json=get.toJSON();
  parsedJSON=mapper.readValue(json,HashMap.class);
  assertEquals("row incorrect in Get.toJSON()",Bytes.toStringBinary(ROW),parsedJSON.get("row"));
  familyInfo=(List)((Map)parsedJSON.get("families")).get(Bytes.toStringBinary(FAMILY));
  assertNotNull("Family absent in Get.toJSON()",familyInfo);
  assertEquals("Qualifier absent in Get.toJSON()",1,familyInfo.size());
  assertEquals("Qualifier incorrect in Get.toJSON()",Bytes.toStringBinary(QUALIFIER),familyInfo.get(0));
  Put put=new Put(ROW);
  put.addColumn(FAMILY,QUALIFIER,VALUE);
  json=put.toJSON();
  parsedJSON=mapper.readValue(json,HashMap.class);
  assertEquals("row absent in Put.toJSON()",Bytes.toStringBinary(ROW),parsedJSON.get("row"));
  familyInfo=(List)((Map)parsedJSON.get("families")).get(Bytes.toStringBinary(FAMILY));
  assertNotNull("Family absent in Put.toJSON()",familyInfo);
  assertEquals("KeyValue absent in Put.toJSON()",1,familyInfo.size());
  Map kvMap=(Map)familyInfo.get(0);
  assertEquals("Qualifier incorrect in Put.toJSON()",Bytes.toStringBinary(QUALIFIER),kvMap.get("qualifier"));
  assertEquals("Value length incorrect in Put.toJSON()",VALUE.length,kvMap.get("vlen"));
  Delete delete=new Delete(ROW);
  delete.addColumn(FAMILY,QUALIFIER);
  json=delete.toJSON();
  parsedJSON=mapper.readValue(json,HashMap.class);
  assertEquals("row absent in Delete.toJSON()",Bytes.toStringBinary(ROW),parsedJSON.get("row"));
  familyInfo=(List)((Map)parsedJSON.get("families")).get(Bytes.toStringBinary(FAMILY));
  assertNotNull("Family absent in Delete.toJSON()",familyInfo);
  assertEquals("KeyValue absent in Delete.toJSON()",1,familyInfo.size());
  kvMap=(Map)familyInfo.get(0);
  assertEquals("Qualifier incorrect in Delete.toJSON()",Bytes.toStringBinary(QUALIFIER),kvMap.get("qualifier"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestRpcControllerFactory </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFallbackToDefaultRpcControllerFactory(){
  Configuration conf=new Configuration(UTIL.getConfiguration());
  conf.set(RpcControllerFactory.CUSTOM_CONTROLLER_CONF_KEY,"foo.bar.Baz");
  RpcControllerFactory factory=RpcControllerFactory.instantiate(conf);
  assertNotNull(factory);
  assertEquals(factory.getClass(),RpcControllerFactory.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestScan </h4><pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScanAttributes(){
  Scan scan=new Scan();
  Assert.assertTrue(scan.getAttributesMap().isEmpty());
  Assert.assertNull(scan.getAttribute("absent"));
  scan.setAttribute("absent",null);
  Assert.assertTrue(scan.getAttributesMap().isEmpty());
  Assert.assertNull(scan.getAttribute("absent"));
  scan.setAttribute("attribute1",Bytes.toBytes("value1"));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value1"),scan.getAttribute("attribute1")));
  Assert.assertEquals(1,scan.getAttributesMap().size());
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value1"),scan.getAttributesMap().get("attribute1")));
  scan.setAttribute("attribute1",Bytes.toBytes("value12"));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value12"),scan.getAttribute("attribute1")));
  Assert.assertEquals(1,scan.getAttributesMap().size());
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value12"),scan.getAttributesMap().get("attribute1")));
  scan.setAttribute("attribute2",Bytes.toBytes("value2"));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value2"),scan.getAttribute("attribute2")));
  Assert.assertEquals(2,scan.getAttributesMap().size());
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value2"),scan.getAttributesMap().get("attribute2")));
  scan.setAttribute("attribute2",null);
  Assert.assertNull(scan.getAttribute("attribute2"));
  Assert.assertEquals(1,scan.getAttributesMap().size());
  Assert.assertNull(scan.getAttributesMap().get("attribute2"));
  scan.setAttribute("attribute2",null);
  Assert.assertNull(scan.getAttribute("attribute2"));
  Assert.assertEquals(1,scan.getAttributesMap().size());
  Assert.assertNull(scan.getAttributesMap().get("attribute2"));
  scan.setAttribute("attribute1",null);
  Assert.assertNull(scan.getAttribute("attribute1"));
  Assert.assertTrue(scan.getAttributesMap().isEmpty());
  Assert.assertNull(scan.getAttributesMap().get("attribute1"));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAttributesSerialization() throws IOException {
  Scan scan=new Scan();
  scan.setAttribute("attribute1",Bytes.toBytes("value1"));
  scan.setAttribute("attribute2",Bytes.toBytes("value2"));
  scan.setAttribute("attribute3",Bytes.toBytes("value3"));
  ClientProtos.Scan scanProto=ProtobufUtil.toScan(scan);
  Scan scan2=ProtobufUtil.toScan(scanProto);
  Assert.assertNull(scan2.getAttribute("absent"));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value1"),scan2.getAttribute("attribute1")));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value2"),scan2.getAttribute("attribute2")));
  Assert.assertTrue(Arrays.equals(Bytes.toBytes("value3"),scan2.getAttribute("attribute3")));
  Assert.assertEquals(3,scan2.getAttributesMap().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.replication.TestReplicationAdmin </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests that the peer configuration used by ReplicationAdmin contains all
 * the peer's properties.
 */
@Test public void testPeerConfig() throws Exception {
  ReplicationPeerConfig config=new ReplicationPeerConfig();
  config.setClusterKey(KEY_ONE);
  config.getConfiguration().put("key1","value1");
  config.getConfiguration().put("key2","value2");
  admin.addPeer(ID_ONE,config,null);
  List<ReplicationPeer> peers=admin.listValidReplicationPeers();
  assertEquals(1,peers.size());
  ReplicationPeer peerOne=peers.get(0);
  assertNotNull(peerOne);
  assertEquals("value1",peerOne.getConfiguration().get("key1"));
  assertEquals("value2",peerOne.getConfiguration().get("key2"));
  admin.removePeer(ID_ONE);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.coprocessor.TestClassLoading </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClassLoadingFromHDFS() throws Exception {
  FileSystem fs=cluster.getFileSystem();
  File jarFile1=buildCoprocessorJar(cpName1);
  File jarFile2=buildCoprocessorJar(cpName2);
  fs.copyFromLocalFile(new Path(jarFile1.getPath()),new Path(fs.getUri().toString() + Path.SEPARATOR));
  String jarFileOnHDFS1=fs.getUri().toString() + Path.SEPARATOR + jarFile1.getName();
  Path pathOnHDFS1=new Path(jarFileOnHDFS1);
  assertTrue("Copy jar file to HDFS failed.",fs.exists(pathOnHDFS1));
  LOG.info("Copied jar file to HDFS: " + jarFileOnHDFS1);
  fs.copyFromLocalFile(new Path(jarFile2.getPath()),new Path(fs.getUri().toString() + Path.SEPARATOR));
  String jarFileOnHDFS2=fs.getUri().toString() + Path.SEPARATOR + jarFile2.getName();
  Path pathOnHDFS2=new Path(jarFileOnHDFS2);
  assertTrue("Copy jar file to HDFS failed.",fs.exists(pathOnHDFS2));
  LOG.info("Copied jar file to HDFS: " + jarFileOnHDFS2);
  HTableDescriptor htd=new HTableDescriptor(tableName);
  htd.addFamily(new HColumnDescriptor("test"));
  htd.setValue("COPROCESSOR$1",jarFileOnHDFS1.toString() + "|" + cpName1+ "|"+ Coprocessor.PRIORITY_USER);
  htd.setValue("COPROCESSOR$2",jarFileOnHDFS2.toString() + "|" + cpName2+ "|"+ Coprocessor.PRIORITY_USER+ "|k1=v1,k2=v2,k3=v3");
  Admin admin=TEST_UTIL.getHBaseAdmin();
  if (admin.tableExists(tableName)) {
    if (admin.isTableEnabled(tableName)) {
      admin.disableTable(tableName);
    }
    admin.deleteTable(tableName);
  }
  CoprocessorClassLoader.clearCache();
  byte[] startKey={10,63};
  byte[] endKey={12,43};
  admin.createTable(htd,startKey,endKey,4);
  waitForTable(htd.getTableName());
  boolean foundTableRegion=false;
  boolean found1=true, found2=true, found2_k1=true, found2_k2=true, found2_k3=true;
  Map<Region,Set<ClassLoader>> regionsActiveClassLoaders=new HashMap<Region,Set<ClassLoader>>();
  MiniHBaseCluster hbase=TEST_UTIL.getHBaseCluster();
  for (  Region region : hbase.getRegionServer(0).getOnlineRegionsLocalContext()) {
    if (region.getRegionInfo().getRegionNameAsString().startsWith(tableName.getNameAsString())) {
      foundTableRegion=true;
      CoprocessorEnvironment env;
      env=region.getCoprocessorHost().findCoprocessorEnvironment(cpName1);
      found1=found1 && (env != null);
      env=region.getCoprocessorHost().findCoprocessorEnvironment(cpName2);
      found2=found2 && (env != null);
      if (env != null) {
        Configuration conf=env.getConfiguration();
        found2_k1=found2_k1 && (conf.get("k1") != null);
        found2_k2=found2_k2 && (conf.get("k2") != null);
        found2_k3=found2_k3 && (conf.get("k3") != null);
      }
 else {
        found2_k1=found2_k2=found2_k3=false;
      }
      regionsActiveClassLoaders.put(region,((CoprocessorHost)region.getCoprocessorHost()).getExternalClassLoaders());
    }
  }
  assertTrue("No region was found for table " + tableName,foundTableRegion);
  assertTrue("Class " + cpName1 + " was missing on a region",found1);
  assertTrue("Class " + cpName2 + " was missing on a region",found2);
  assertTrue("Configuration key 'k1' was missing on a region",found2_k1);
  assertTrue("Configuration key 'k2' was missing on a region",found2_k2);
  assertTrue("Configuration key 'k3' was missing on a region",found2_k3);
  assertNotNull(jarFileOnHDFS1 + " was not cached",CoprocessorClassLoader.getIfCached(pathOnHDFS1));
  assertNotNull(jarFileOnHDFS2 + " was not cached",CoprocessorClassLoader.getIfCached(pathOnHDFS2));
  assertEquals("The number of cached classloaders should be equal to the number" + " of external jar files",2,CoprocessorClassLoader.getAllCached().size());
  Set<ClassLoader> externalClassLoaders=new HashSet<ClassLoader>(CoprocessorClassLoader.getAllCached());
  for (  Map.Entry<Region,Set<ClassLoader>> regionCP : regionsActiveClassLoaders.entrySet()) {
    assertTrue("Some CP classloaders for region " + regionCP.getKey() + " are not cached."+ " ClassLoader Cache:"+ externalClassLoaders+ " Region ClassLoaders:"+ regionCP.getValue(),externalClassLoaders.containsAll(regionCP.getValue()));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.coprocessor.TestCoprocessorEndpoint </h4><pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCoprocessorService() throws Throwable {
  Table table=util.getConnection().getTable(TEST_TABLE);
  List<HRegionLocation> regions;
  try (RegionLocator rl=util.getConnection().getRegionLocator(TEST_TABLE)){
    regions=rl.getAllRegionLocations();
  }
   final TestProtos.EchoRequestProto request=TestProtos.EchoRequestProto.newBuilder().setMessage("hello").build();
  final Map<byte[],String> results=Collections.synchronizedMap(new TreeMap<byte[],String>(Bytes.BYTES_COMPARATOR));
  try {
    final RpcController controller=new ServerRpcController();
    table.coprocessorService(TestRpcServiceProtos.TestProtobufRpcProto.class,ROWS[0],ROWS[ROWS.length - 1],new Batch.Call<TestRpcServiceProtos.TestProtobufRpcProto,TestProtos.EchoResponseProto>(){
      public TestProtos.EchoResponseProto call(      TestRpcServiceProtos.TestProtobufRpcProto instance) throws IOException {
        LOG.debug("Default response is " + TestProtos.EchoRequestProto.getDefaultInstance());
        BlockingRpcCallback<TestProtos.EchoResponseProto> callback=new BlockingRpcCallback<TestProtos.EchoResponseProto>();
        instance.echo(controller,request,callback);
        TestProtos.EchoResponseProto response=callback.get();
        LOG.debug("Batch.Call returning result " + response);
        return response;
      }
    }
,new Batch.Callback<TestProtos.EchoResponseProto>(){
      public void update(      byte[] region,      byte[] row,      TestProtos.EchoResponseProto result){
        assertNotNull(result);
        assertEquals("hello",result.getMessage());
        results.put(region,result.getMessage());
      }
    }
);
    for (    Map.Entry<byte[],String> e : results.entrySet()) {
      LOG.info("Got value " + e.getValue() + " for region "+ Bytes.toStringBinary(e.getKey()));
    }
    assertEquals(3,results.size());
    for (    HRegionLocation info : regions) {
      LOG.info("Region info is " + info.getRegionInfo().getRegionNameAsString());
      assertTrue(results.containsKey(info.getRegionInfo().getRegionName()));
    }
    results.clear();
    table.coprocessorService(TestRpcServiceProtos.TestProtobufRpcProto.class,ROWS[rowSeperator1],ROWS[ROWS.length - 1],new Batch.Call<TestRpcServiceProtos.TestProtobufRpcProto,TestProtos.EchoResponseProto>(){
      public TestProtos.EchoResponseProto call(      TestRpcServiceProtos.TestProtobufRpcProto instance) throws IOException {
        LOG.debug("Default response is " + TestProtos.EchoRequestProto.getDefaultInstance());
        BlockingRpcCallback<TestProtos.EchoResponseProto> callback=new BlockingRpcCallback<TestProtos.EchoResponseProto>();
        instance.echo(controller,request,callback);
        TestProtos.EchoResponseProto response=callback.get();
        LOG.debug("Batch.Call returning result " + response);
        return response;
      }
    }
,new Batch.Callback<TestProtos.EchoResponseProto>(){
      public void update(      byte[] region,      byte[] row,      TestProtos.EchoResponseProto result){
        assertNotNull(result);
        assertEquals("hello",result.getMessage());
        results.put(region,result.getMessage());
      }
    }
);
    for (    Map.Entry<byte[],String> e : results.entrySet()) {
      LOG.info("Got value " + e.getValue() + " for region "+ Bytes.toStringBinary(e.getKey()));
    }
    assertEquals(2,results.size());
  }
  finally {
    table.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCoprocessorServiceNullResponse() throws Throwable {
  Table table=util.getConnection().getTable(TEST_TABLE);
  List<HRegionLocation> regions;
  try (RegionLocator rl=util.getConnection().getRegionLocator(TEST_TABLE)){
    regions=rl.getAllRegionLocations();
  }
   final TestProtos.EchoRequestProto request=TestProtos.EchoRequestProto.newBuilder().setMessage("hello").build();
  try {
    final RpcController controller=new ServerRpcController();
    Map<byte[],String> results=table.coprocessorService(TestRpcServiceProtos.TestProtobufRpcProto.class,ROWS[0],ROWS[ROWS.length - 1],new Batch.Call<TestRpcServiceProtos.TestProtobufRpcProto,String>(){
      public String call(      TestRpcServiceProtos.TestProtobufRpcProto instance) throws IOException {
        BlockingRpcCallback<TestProtos.EchoResponseProto> callback=new BlockingRpcCallback<TestProtos.EchoResponseProto>();
        instance.echo(controller,request,callback);
        TestProtos.EchoResponseProto response=callback.get();
        LOG.debug("Batch.Call got result " + response);
        return null;
      }
    }
);
    for (    Map.Entry<byte[],String> e : results.entrySet()) {
      LOG.info("Got value " + e.getValue() + " for region "+ Bytes.toStringBinary(e.getKey()));
    }
    assertEquals(3,results.size());
    for (    HRegionLocation region : regions) {
      HRegionInfo info=region.getRegionInfo();
      LOG.info("Region info is " + info.getRegionNameAsString());
      assertTrue(results.containsKey(info.getRegionName()));
      assertNull(results.get(info.getRegionName()));
    }
  }
  finally {
    table.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.coprocessor.TestCoprocessorInterface </h4><pre class="type-4 type-9 type-11 type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSharedData() throws IOException {
  TableName tableName=TableName.valueOf(name.getMethodName());
  byte[][] families={fam1,fam2,fam3};
  Configuration hc=initSplit();
  Region region=initHRegion(tableName,name.getMethodName(),hc,new Class<?>[]{},families);
  for (int i=0; i < 3; i++) {
    HBaseTestCase.addContent(region,fam3);
    region.flush(true);
  }
  region.compact(false);
  byte[] splitRow=((HRegion)region).checkSplit();
  assertNotNull(splitRow);
  Region[] regions=split(region,splitRow);
  for (int i=0; i < regions.length; i++) {
    regions[i]=reopenRegion(regions[i],CoprocessorImpl.class,CoprocessorII.class);
  }
  Coprocessor c=regions[0].getCoprocessorHost().findCoprocessor(CoprocessorImpl.class.getName());
  Coprocessor c2=regions[0].getCoprocessorHost().findCoprocessor(CoprocessorII.class.getName());
  Object o=((CoprocessorImpl)c).getSharedData().get("test1");
  Object o2=((CoprocessorII)c2).getSharedData().get("test2");
  assertNotNull(o);
  assertNotNull(o2);
  assertFalse(((CoprocessorImpl)c).getSharedData() == ((CoprocessorII)c2).getSharedData());
  for (int i=1; i < regions.length; i++) {
    c=regions[i].getCoprocessorHost().findCoprocessor(CoprocessorImpl.class.getName());
    c2=regions[i].getCoprocessorHost().findCoprocessor(CoprocessorII.class.getName());
    assertTrue(((CoprocessorImpl)c).getSharedData().get("test1") == o);
    assertTrue(((CoprocessorII)c2).getSharedData().get("test2") == o2);
  }
  for (int i=0; i < regions.length; i++) {
    try {
      byte[] r=regions[i].getRegionInfo().getStartKey();
      if (r == null || r.length <= 0) {
        r=new byte[]{0};
      }
      Get g=new Get(r);
      regions[i].get(g);
      fail();
    }
 catch (    org.apache.hadoop.hbase.DoNotRetryIOException xc) {
    }
    assertNull(regions[i].getCoprocessorHost().findCoprocessor(CoprocessorII.class.getName()));
  }
  c=regions[0].getCoprocessorHost().findCoprocessor(CoprocessorImpl.class.getName());
  assertTrue(((CoprocessorImpl)c).getSharedData().get("test1") == o);
  c=c2=null;
  System.gc();
  region=reopenRegion(regions[0],CoprocessorImpl.class,CoprocessorII.class);
  c=region.getCoprocessorHost().findCoprocessor(CoprocessorImpl.class.getName());
  assertTrue(((CoprocessorImpl)c).getSharedData().get("test1") == o);
  c2=region.getCoprocessorHost().findCoprocessor(CoprocessorII.class.getName());
  Object o3=((CoprocessorII)c2).getSharedData().get("test2");
  assertFalse(o3 == o2);
  HBaseTestingUtility.closeRegionAndWAL(region);
}

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCoprocessorInterface() throws IOException {
  TableName tableName=TableName.valueOf(name.getMethodName());
  byte[][] families={fam1,fam2,fam3};
  Configuration hc=initSplit();
  Region region=initHRegion(tableName,name.getMethodName(),hc,new Class<?>[]{CoprocessorImpl.class},families);
  for (int i=0; i < 3; i++) {
    HBaseTestCase.addContent(region,fam3);
    region.flush(true);
  }
  region.compact(false);
  byte[] splitRow=((HRegion)region).checkSplit();
  assertNotNull(splitRow);
  Region[] regions=split(region,splitRow);
  for (int i=0; i < regions.length; i++) {
    regions[i]=reopenRegion(regions[i],CoprocessorImpl.class);
  }
  HBaseTestingUtility.closeRegionAndWAL(region);
  Coprocessor c=region.getCoprocessorHost().findCoprocessor(CoprocessorImpl.class.getName());
  Scan s=new Scan();
  RegionScanner scanner=regions[0].getCoprocessorHost().postScannerOpen(s,regions[0].getScanner(s));
  assertTrue(scanner instanceof CustomScanner);
  scanner.next(new ArrayList<Cell>());
  assertTrue("Coprocessor not started",((CoprocessorImpl)c).wasStarted());
  assertTrue("Coprocessor not stopped",((CoprocessorImpl)c).wasStopped());
  assertTrue(((CoprocessorImpl)c).wasOpened());
  assertTrue(((CoprocessorImpl)c).wasClosed());
  assertTrue(((CoprocessorImpl)c).wasFlushed());
  assertTrue(((CoprocessorImpl)c).wasCompacted());
  assertTrue(((CoprocessorImpl)c).wasSplit());
  for (int i=0; i < regions.length; i++) {
    HBaseTestingUtility.closeRegionAndWAL(regions[i]);
    c=region.getCoprocessorHost().findCoprocessor(CoprocessorImpl.class.getName());
    assertTrue("Coprocessor not started",((CoprocessorImpl)c).wasStarted());
    assertTrue("Coprocessor not stopped",((CoprocessorImpl)c).wasStopped());
    assertTrue(((CoprocessorImpl)c).wasOpened());
    assertTrue(((CoprocessorImpl)c).wasClosed());
    assertTrue(((CoprocessorImpl)c).wasCompacted());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.coprocessor.TestMasterObserver </h4><pre class="type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=180000) public void testRegionTransitionOperations() throws Exception {
  final TableName tableName=TableName.valueOf(name.getMethodName());
  MiniHBaseCluster cluster=UTIL.getHBaseCluster();
  HMaster master=cluster.getMaster();
  MasterCoprocessorHost host=master.getMasterCoprocessorHost();
  CPMasterObserver cp=(CPMasterObserver)host.findCoprocessor(CPMasterObserver.class.getName());
  cp.enableBypass(false);
  cp.resetStates();
  Table table=UTIL.createMultiRegionTable(tableName,TEST_FAMILY);
  try (RegionLocator r=UTIL.getConnection().getRegionLocator(tableName)){
    UTIL.waitUntilAllRegionsAssigned(tableName);
    List<HRegionLocation> regions=r.getAllRegionLocations();
    HRegionLocation firstGoodPair=null;
    for (    HRegionLocation e : regions) {
      if (e.getServerName() != null) {
        firstGoodPair=e;
        break;
      }
    }
    assertNotNull("Found a non-null entry",firstGoodPair);
    LOG.info("Found " + firstGoodPair.toString());
    Collection<ServerName> servers=master.getClusterStatus().getServers();
    String destName=null;
    String serverNameForFirstRegion=firstGoodPair.getServerName().toString();
    LOG.info("serverNameForFirstRegion=" + serverNameForFirstRegion);
    ServerName masterServerName=master.getServerName();
    boolean found=false;
    for (    ServerName info : servers) {
      LOG.info("ServerName=" + info);
      if (!serverNameForFirstRegion.equals(info.getServerName()) && !masterServerName.equals(info)) {
        destName=info.toString();
        found=true;
        break;
      }
    }
    assertTrue("Found server",found);
    LOG.info("Found " + destName);
    master.getMasterRpcServices().moveRegion(null,RequestConverter.buildMoveRegionRequest(firstGoodPair.getRegionInfo().getEncodedNameAsBytes(),Bytes.toBytes(destName)));
    assertTrue("Coprocessor should have been called on region move",cp.wasMoveCalled());
    master.balanceSwitch(true);
    assertTrue("Coprocessor should have been called on balance switch",cp.wasBalanceSwitchCalled());
    master.balanceSwitch(false);
    AssignmentManager mgr=master.getAssignmentManager();
    Collection<RegionState> transRegions=mgr.getRegionStates().getRegionsInTransition().values();
    for (    RegionState state : transRegions) {
      mgr.getRegionStates().waitOnRegionToClearRegionsInTransition(state.getRegion());
    }
    HRegionServer rs=cluster.getRegionServer(0);
    byte[] destRS=Bytes.toBytes(cluster.getRegionServer(1).getServerName().toString());
    waitForRITtoBeZero(master);
    List<HRegionInfo> openRegions=ProtobufUtil.getOnlineRegions(rs.getRSRpcServices());
    int moveCnt=openRegions.size() / 2;
    for (int i=0; i < moveCnt; i++) {
      HRegionInfo info=openRegions.get(i);
      if (!info.isMetaTable()) {
        master.getMasterRpcServices().moveRegion(null,RequestConverter.buildMoveRegionRequest(openRegions.get(i).getEncodedNameAsBytes(),destRS));
      }
    }
    waitForRITtoBeZero(master);
    master.balanceSwitch(true);
    boolean balanceRun=master.balance();
    assertTrue("Coprocessor should be called on region rebalancing",cp.wasBalanceCalled());
  }
  finally {
    Admin admin=UTIL.getHBaseAdmin();
    admin.disableTable(tableName);
    deleteTable(admin,tableName);
  }
}

</code></pre>

<br>
<pre class="type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=180000) public void testTableOperations() throws Exception {
  MiniHBaseCluster cluster=UTIL.getHBaseCluster();
  final TableName tableName=TableName.valueOf(name.getMethodName());
  HMaster master=cluster.getMaster();
  MasterCoprocessorHost host=master.getMasterCoprocessorHost();
  CPMasterObserver cp=(CPMasterObserver)host.findCoprocessor(CPMasterObserver.class.getName());
  cp.enableBypass(true);
  cp.resetStates();
  assertFalse("No table created yet",cp.wasCreateTableCalled());
  HTableDescriptor htd=new HTableDescriptor(tableName);
  htd.addFamily(new HColumnDescriptor(TEST_FAMILY));
  try (Connection connection=ConnectionFactory.createConnection(UTIL.getConfiguration());Admin admin=connection.getAdmin()){
    tableCreationLatch=new CountDownLatch(1);
    admin.createTable(htd,Arrays.copyOfRange(HBaseTestingUtility.KEYS,1,HBaseTestingUtility.KEYS.length));
    assertTrue("Test table should be created",cp.wasCreateTableCalled());
    tableCreationLatch.await();
    assertTrue("Table pre create handler called.",cp.wasPreCreateTableHandlerCalled());
    assertTrue("Table create handler should be called.",cp.wasCreateTableHandlerCalled());
    RegionLocator regionLocator=connection.getRegionLocator(htd.getTableName());
    List<HRegionLocation> regions=regionLocator.getAllRegionLocations();
    admin.mergeRegions(regions.get(0).getRegionInfo().getEncodedNameAsBytes(),regions.get(1).getRegionInfo().getEncodedNameAsBytes(),true);
    assertTrue("Coprocessor should have been called on region merge",cp.wasDispatchMergeCalled());
    tableCreationLatch=new CountDownLatch(1);
    admin.disableTable(tableName);
    assertTrue(admin.isTableDisabled(tableName));
    assertTrue("Coprocessor should have been called on table disable",cp.wasDisableTableCalled());
    assertTrue("Disable table handler should be called.",cp.wasDisableTableHandlerCalled());
    assertFalse(cp.wasEnableTableCalled());
    admin.enableTable(tableName);
    assertTrue(admin.isTableEnabled(tableName));
    assertTrue("Coprocessor should have been called on table enable",cp.wasEnableTableCalled());
    assertTrue("Enable table handler should be called.",cp.wasEnableTableHandlerCalled());
    admin.disableTable(tableName);
    assertTrue(admin.isTableDisabled(tableName));
    htd.setMaxFileSize(512 * 1024 * 1024);
    modifyTableSync(admin,tableName,htd);
    assertTrue("Test table should have been modified",cp.wasModifyTableCalled());
    admin.addColumnFamily(tableName,new HColumnDescriptor(TEST_FAMILY2));
    assertTrue("New column family shouldn't have been added to test table",cp.preAddColumnCalledOnly());
    HColumnDescriptor hcd1=new HColumnDescriptor(TEST_FAMILY2);
    hcd1.setMaxVersions(25);
    admin.modifyColumnFamily(tableName,hcd1);
    assertTrue("Second column family should be modified",cp.preModifyColumnCalledOnly());
    admin.truncateTable(tableName,false);
    admin.disableTable(tableName);
    assertTrue(admin.isTableDisabled(tableName));
    deleteTable(admin,tableName);
    assertFalse("Test table should have been deleted",admin.tableExists(tableName));
    assertTrue("Coprocessor should have been called on table delete",cp.wasDeleteTableCalled());
    assertTrue("Delete table handler should be called.",cp.wasDeleteTableHandlerCalled());
    cp.enableBypass(false);
    cp.resetStates();
    admin.createTable(htd);
    assertTrue("Test table should be created",cp.wasCreateTableCalled());
    tableCreationLatch.await();
    assertTrue("Table pre create handler called.",cp.wasPreCreateTableHandlerCalled());
    assertTrue("Table create handler should be called.",cp.wasCreateTableHandlerCalled());
    assertFalse(cp.wasDisableTableCalled());
    assertFalse(cp.wasDisableTableHandlerCalled());
    admin.disableTable(tableName);
    assertTrue(admin.isTableDisabled(tableName));
    assertTrue("Coprocessor should have been called on table disable",cp.wasDisableTableCalled());
    assertTrue("Disable table handler should be called.",cp.wasDisableTableHandlerCalled());
    htd.setMaxFileSize(512 * 1024 * 1024);
    modifyTableSync(admin,tableName,htd);
    assertTrue("Test table should have been modified",cp.wasModifyTableCalled());
    admin.addColumnFamily(tableName,new HColumnDescriptor(TEST_FAMILY2));
    assertTrue("New column family should have been added to test table",cp.wasAddColumnCalled());
    assertTrue("Add column handler should be called.",cp.wasAddColumnHandlerCalled());
    HColumnDescriptor hcd=new HColumnDescriptor(TEST_FAMILY2);
    hcd.setMaxVersions(25);
    admin.modifyColumnFamily(tableName,hcd);
    assertTrue("Second column family should be modified",cp.wasModifyColumnCalled());
    assertTrue("Modify table handler should be called.",cp.wasModifyColumnHandlerCalled());
    assertFalse(cp.wasEnableTableCalled());
    assertFalse(cp.wasEnableTableHandlerCalled());
    admin.enableTable(tableName);
    assertTrue(admin.isTableEnabled(tableName));
    assertTrue("Coprocessor should have been called on table enable",cp.wasEnableTableCalled());
    assertTrue("Enable table handler should be called.",cp.wasEnableTableHandlerCalled());
    admin.disableTable(tableName);
    assertTrue(admin.isTableDisabled(tableName));
    assertFalse("No column family deleted yet",cp.wasDeleteColumnCalled());
    assertFalse("Delete table column handler should not be called.",cp.wasDeleteColumnHandlerCalled());
    admin.deleteColumnFamily(tableName,TEST_FAMILY2);
    HTableDescriptor tableDesc=admin.getTableDescriptor(tableName);
    assertNull("'" + Bytes.toString(TEST_FAMILY2) + "' should have been removed",tableDesc.getFamily(TEST_FAMILY2));
    assertTrue("Coprocessor should have been called on column delete",cp.wasDeleteColumnCalled());
    assertTrue("Delete table column handler should be called.",cp.wasDeleteColumnHandlerCalled());
    assertFalse("No table deleted yet",cp.wasDeleteTableCalled());
    assertFalse("Delete table handler should not be called.",cp.wasDeleteTableHandlerCalled());
    deleteTable(admin,tableName);
    assertFalse("Test table should have been deleted",admin.tableExists(tableName));
    assertTrue("Coprocessor should have been called on table delete",cp.wasDeleteTableCalled());
    assertTrue("Delete table handler should be called.",cp.wasDeleteTableHandlerCalled());
  }
 }

</code></pre>

<br>
<pre class="type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=180000) public void testNamespaceOperations() throws Exception {
  MiniHBaseCluster cluster=UTIL.getHBaseCluster();
  String testNamespace="observed_ns";
  HMaster master=cluster.getMaster();
  MasterCoprocessorHost host=master.getMasterCoprocessorHost();
  CPMasterObserver cp=(CPMasterObserver)host.findCoprocessor(CPMasterObserver.class.getName());
  cp.enableBypass(false);
  cp.resetStates();
  Admin admin=UTIL.getHBaseAdmin();
  admin.createNamespace(NamespaceDescriptor.create(testNamespace).build());
  assertTrue("Test namespace should be created",cp.wasCreateNamespaceCalled());
  assertNotNull(admin.getNamespaceDescriptor(testNamespace));
  assertTrue("Test namespace descriptor should have been called",cp.wasGetNamespaceDescriptorCalled());
  cp.enableBypass(true);
  cp.resetStates();
  boolean expected=false;
  try {
    admin.modifyNamespace(NamespaceDescriptor.create(testNamespace).build());
  }
 catch (  BypassCoprocessorException ce) {
    expected=true;
  }
  assertTrue(expected);
  assertTrue("Test namespace should not have been modified",cp.preModifyNamespaceCalledOnly());
  assertNotNull(admin.getNamespaceDescriptor(testNamespace));
  assertTrue("Test namespace descriptor should have been called",cp.wasGetNamespaceDescriptorCalled());
  expected=false;
  try {
    admin.deleteNamespace(testNamespace);
  }
 catch (  BypassCoprocessorException ce) {
    expected=true;
  }
  assertTrue(expected);
  assertTrue("Test namespace should not have been deleted",cp.preDeleteNamespaceCalledOnly());
  assertNotNull(admin.getNamespaceDescriptor(testNamespace));
  assertTrue("Test namespace descriptor should have been called",cp.wasGetNamespaceDescriptorCalled());
  cp.enableBypass(false);
  cp.resetStates();
  admin.modifyNamespace(NamespaceDescriptor.create(testNamespace).build());
  assertTrue("Test namespace should have been modified",cp.wasModifyNamespaceCalled());
  admin.deleteNamespace(testNamespace);
  assertTrue("Test namespace should have been deleted",cp.wasDeleteNamespaceCalled());
  cp.enableBypass(true);
  cp.resetStates();
  expected=false;
  try {
    admin.createNamespace(NamespaceDescriptor.create(testNamespace).build());
  }
 catch (  BypassCoprocessorException ce) {
    expected=true;
  }
  assertTrue(expected);
  assertTrue("Test namespace should not be created",cp.preCreateNamespaceCalledOnly());
  cp.enableBypass(true);
  cp.resetStates();
  admin.listNamespaceDescriptors();
  assertTrue("post listNamespace should not have been called",cp.preListNamespaceDescriptorsCalledOnly());
  cp.enableBypass(false);
  cp.resetStates();
  admin.listNamespaceDescriptors();
  assertTrue("post listNamespace should have been called",cp.wasListNamespaceDescriptorsCalled());
}

</code></pre>

<br>
<pre class="type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=180000) public void testStarted() throws Exception {
  MiniHBaseCluster cluster=UTIL.getHBaseCluster();
  HMaster master=cluster.getMaster();
  assertTrue("Master should be active",master.isActiveMaster());
  MasterCoprocessorHost host=master.getMasterCoprocessorHost();
  assertNotNull("CoprocessorHost should not be null",host);
  CPMasterObserver cp=(CPMasterObserver)host.findCoprocessor(CPMasterObserver.class.getName());
  assertNotNull("CPMasterObserver coprocessor not found or not installed!",cp);
  assertTrue("MasterObserver should have been started",cp.wasStarted());
  assertTrue("preMasterInitialization() hook should have been called",cp.wasMasterInitializationCalled());
  assertTrue("postStartMaster() hook should have been called",cp.wasStartMasterCalled());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.coprocessor.TestRegionObserverInterface </h4><pre class="type-4 type-9 type-7 type-8 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests overriding compaction handling via coprocessor hooks
 * @throws Exception
 */
@Test(timeout=300000) public void testCompactionOverride() throws Exception {
  TableName compactTable=TableName.valueOf("TestCompactionOverride");
  Admin admin=util.getHBaseAdmin();
  if (admin.tableExists(compactTable)) {
    admin.disableTable(compactTable);
    admin.deleteTable(compactTable);
  }
  HTableDescriptor htd=new HTableDescriptor(compactTable);
  htd.addFamily(new HColumnDescriptor(A));
  htd.addCoprocessor(EvenOnlyCompactor.class.getName());
  admin.createTable(htd);
  Table table=util.getConnection().getTable(compactTable);
  for (long i=1; i <= 10; i++) {
    byte[] iBytes=Bytes.toBytes(i);
    Put put=new Put(iBytes);
    put.setDurability(Durability.SKIP_WAL);
    put.addColumn(A,A,iBytes);
    table.put(put);
  }
  HRegion firstRegion=cluster.getRegions(compactTable).get(0);
  Coprocessor cp=firstRegion.getCoprocessorHost().findCoprocessor(EvenOnlyCompactor.class.getName());
  assertNotNull("EvenOnlyCompactor coprocessor should be loaded",cp);
  EvenOnlyCompactor compactor=(EvenOnlyCompactor)cp;
  long ts=System.currentTimeMillis();
  admin.flush(compactTable);
  for (int i=0; i < 10; i++) {
    if (compactor.lastFlush >= ts) {
      break;
    }
    Thread.sleep(1000);
  }
  assertTrue("Flush didn't complete",compactor.lastFlush >= ts);
  LOG.debug("Flush complete");
  ts=compactor.lastFlush;
  admin.majorCompact(compactTable);
  for (int i=0; i < 30; i++) {
    if (compactor.lastCompaction >= ts) {
      break;
    }
    Thread.sleep(1000);
  }
  LOG.debug("Last compaction was at " + compactor.lastCompaction);
  assertTrue("Compaction didn't complete",compactor.lastCompaction >= ts);
  ResultScanner scanner=table.getScanner(new Scan());
  try {
    for (long i=2; i <= 10; i+=2) {
      Result r=scanner.next();
      assertNotNull(r);
      assertFalse(r.isEmpty());
      byte[] iBytes=Bytes.toBytes(i);
      assertArrayEquals("Row should be " + i,r.getRow(),iBytes);
      assertArrayEquals("Value should be " + i,r.getValue(A,A),iBytes);
    }
  }
  finally {
    scanner.close();
  }
  table.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.coprocessor.TestRegionObserverScannerOpenHook </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Unfortunately, the easiest way to test this is to spin up a mini-cluster since we want to do
 * the usual compaction mechanism on the region, rather than going through the backdoor to the
 * region
 */
@Test public void testRegionObserverCompactionTimeStacking() throws Exception {
  Configuration conf=UTIL.getConfiguration();
  conf.setClass(HConstants.REGION_IMPL,CompactionCompletionNotifyingRegion.class,HRegion.class);
  conf.setInt("hbase.hstore.compaction.min",2);
  UTIL.startMiniCluster();
  String tableName="testRegionObserverCompactionTimeStacking";
  byte[] ROW=Bytes.toBytes("testRow");
  byte[] A=Bytes.toBytes("A");
  HTableDescriptor desc=new HTableDescriptor(TableName.valueOf(tableName));
  desc.addFamily(new HColumnDescriptor(A));
  desc.addCoprocessor(EmptyRegionObsever.class.getName(),null,Coprocessor.PRIORITY_USER,null);
  desc.addCoprocessor(NoDataFromCompaction.class.getName(),null,Coprocessor.PRIORITY_HIGHEST,null);
  Admin admin=UTIL.getHBaseAdmin();
  admin.createTable(desc);
  Table table=UTIL.getConnection().getTable(desc.getTableName());
  Put put=new Put(ROW);
  put.addColumn(A,A,A);
  table.put(put);
  HRegionServer rs=UTIL.getRSForFirstRegionInTable(desc.getTableName());
  List<Region> regions=rs.getOnlineRegions(desc.getTableName());
  assertEquals("More than 1 region serving test table with 1 row",1,regions.size());
  Region region=regions.get(0);
  admin.flushRegion(region.getRegionInfo().getRegionName());
  CountDownLatch latch=((CompactionCompletionNotifyingRegion)region).getCompactionStateChangeLatch();
  put=new Put(Bytes.toBytes("anotherrow"));
  put.addColumn(A,A,A);
  table.put(put);
  admin.flushRegion(region.getRegionInfo().getRegionName());
  latch.await();
  Get get=new Get(ROW);
  Result r=table.get(get);
  assertNull("Got an unexpected number of rows - no data should be returned with the NoDataFromScan coprocessor. Found: " + r,r.listCells());
  get=new Get(Bytes.toBytes("anotherrow"));
  r=table.get(get);
  assertNull("Got an unexpected number of rows - no data should be returned with the NoDataFromScan coprocessor Found: " + r,r.listCells());
  table.close();
  UTIL.shutdownMiniCluster();
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testRegionObserverFlushTimeStacking() throws Exception {
  byte[] ROW=Bytes.toBytes("testRow");
  byte[] TABLE=Bytes.toBytes(getClass().getName());
  byte[] A=Bytes.toBytes("A");
  byte[][] FAMILIES=new byte[][]{A};
  Configuration conf=HBaseConfiguration.create();
  Region region=initHRegion(TABLE,getClass().getName(),conf,FAMILIES);
  RegionCoprocessorHost h=region.getCoprocessorHost();
  h.load(NoDataFromFlush.class,Coprocessor.PRIORITY_HIGHEST,conf);
  h.load(EmptyRegionObsever.class,Coprocessor.PRIORITY_USER,conf);
  Put put=new Put(ROW);
  put.addColumn(A,A,A);
  region.put(put);
  region.flush(true);
  Get get=new Get(ROW);
  Result r=region.get(get);
  assertNull("Got an unexpected number of rows - no data should be returned with the NoDataFromScan coprocessor. Found: " + r,r.listCells());
  HBaseTestingUtility.closeRegionAndWAL(region);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testRegionObserverScanTimeStacking() throws Exception {
  byte[] ROW=Bytes.toBytes("testRow");
  byte[] TABLE=Bytes.toBytes(getClass().getName());
  byte[] A=Bytes.toBytes("A");
  byte[][] FAMILIES=new byte[][]{A};
  Configuration conf=HBaseConfiguration.create();
  Region region=initHRegion(TABLE,getClass().getName(),conf,FAMILIES);
  RegionCoprocessorHost h=region.getCoprocessorHost();
  h.load(NoDataFromScan.class,Coprocessor.PRIORITY_HIGHEST,conf);
  h.load(EmptyRegionObsever.class,Coprocessor.PRIORITY_USER,conf);
  Put put=new Put(ROW);
  put.addColumn(A,A,A);
  region.put(put);
  Get get=new Get(ROW);
  Result r=region.get(get);
  assertNull("Got an unexpected number of rows - no data should be returned with the NoDataFromScan coprocessor. Found: " + r,r.listCells());
  HBaseTestingUtility.closeRegionAndWAL(region);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.coprocessor.TestWALObserver </h4><pre class="type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * Test to see CP loaded successfully or not. There is a duplication at
 * TestHLog, but the purpose of that one is to see whether the loaded CP will
 * impact existing WAL tests or not.
 */
@Test public void testWALObserverLoaded() throws Exception {
  WAL log=wals.getWAL(UNSPECIFIED_REGION,null);
  assertNotNull(getCoprocessor(log,SampleRegionWALObserver.class));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test WAL replay behavior with WALObserver.
 */
@Test public void testWALCoprocessorReplay() throws Exception {
  TableName tableName=TableName.valueOf("testWALCoprocessorReplay");
  final HTableDescriptor htd=getBasic3FamilyHTableDescriptor(tableName);
  MultiVersionConcurrencyControl mvcc=new MultiVersionConcurrencyControl();
  final HRegionInfo hri=new HRegionInfo(tableName,null,null);
  final Path basedir=FSUtils.getTableDir(this.hbaseRootDir,tableName);
  deleteDir(basedir);
  fs.mkdirs(new Path(basedir,hri.getEncodedName()));
  final Configuration newConf=HBaseConfiguration.create(this.conf);
  WAL wal=wals.getWAL(UNSPECIFIED_REGION,null);
  WALEdit edit=new WALEdit();
  long now=EnvironmentEdgeManager.currentTime();
  final int countPerFamily=1000;
  for (  HColumnDescriptor hcd : htd.getFamilies()) {
    addWALEdits(tableName,hri,TEST_ROW,hcd.getName(),countPerFamily,EnvironmentEdgeManager.getDelegate(),wal,htd,mvcc);
  }
  wal.append(htd,hri,new WALKey(hri.getEncodedNameAsBytes(),tableName,now,mvcc),edit,true);
  wal.sync();
  User user=HBaseTestingUtility.getDifferentUser(newConf,".replay.wal.secondtime");
  user.runAs(new PrivilegedExceptionAction(){
    public Object run() throws Exception {
      Path p=runWALSplit(newConf);
      LOG.info("WALSplit path == " + p);
      FileSystem newFS=FileSystem.get(newConf);
      final WALFactory wals2=new WALFactory(conf,null,currentTest.getMethodName() + "2");
      WAL wal2=wals2.getWAL(UNSPECIFIED_REGION,null);
      ;
      HRegion region=HRegion.openHRegion(newConf,FileSystem.get(newConf),hbaseRootDir,hri,htd,wal2,TEST_UTIL.getHBaseCluster().getRegionServer(0),null);
      long seqid2=region.getOpenSeqNum();
      SampleRegionWALObserver cp2=(SampleRegionWALObserver)region.getCoprocessorHost().findCoprocessor(SampleRegionWALObserver.class.getName());
      assertNotNull(cp2);
      assertTrue(cp2.isPreWALRestoreCalled());
      assertTrue(cp2.isPostWALRestoreCalled());
      assertFalse(cp2.isPreWALRestoreDeprecatedCalled());
      assertFalse(cp2.isPostWALRestoreDeprecatedCalled());
      region.close();
      wals2.close();
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.errorhandling.TestForeignExceptionSerialization </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verify that we get back similar stack trace information before an after serialization.
 * @throws InvalidProtocolBufferException
 */
@Test public void testSimpleException() throws InvalidProtocolBufferException {
  String data="some bytes";
  ForeignException in=new ForeignException("SRC",new IllegalArgumentException(data));
  ForeignException e=ForeignException.deserialize(ForeignException.serialize(srcName,in));
  assertNotNull(e);
  StackTraceElement elem=new StackTraceElement(this.getClass().toString(),"method","file",1);
  in.setStackTrace(new StackTraceElement[]{elem});
  e=ForeignException.deserialize(ForeignException.serialize(srcName,in));
  assertNotNull(e);
  assertEquals("Stack trace got corrupted",elem,e.getCause().getStackTrace()[0]);
  assertEquals("Got an unexpectedly long stack trace",1,e.getCause().getStackTrace().length);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.filter.TestComparatorSerialization </h4><pre class="type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegexStringComparator() throws Exception {
  RegexStringComparator regexStringComparator=new RegexStringComparator(".+-2");
  assertTrue(regexStringComparator.areSerializedFieldsEqual(ProtobufUtil.toComparator(ProtobufUtil.toComparator(regexStringComparator))));
  try {
    new RegexStringComparator("regex",Pattern.CASE_INSENSITIVE | Pattern.DOTALL);
  }
 catch (  Throwable t) {
    assertNull("Exception occured while created the RegexStringComparator object",t);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.filter.TestDependentColumnFilter </h4><pre class="type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test for HBASE-8794. Avoid NullPointerException in DependentColumnFilter.toString().
 */
@Test public void testToStringWithNullComparator(){
  Filter filter=new DependentColumnFilter(FAMILIES[0],QUALIFIER);
  assertNotNull(filter.toString());
  assertTrue("check string contains 'null' as compatator is null",filter.toString().contains("null"));
  filter=new DependentColumnFilter(FAMILIES[0],QUALIFIER,true,CompareOp.EQUAL,null);
  assertNotNull(filter.toString());
  assertTrue("check string contains 'null' as compatator is null",filter.toString().contains("null"));
}

</code></pre>

<br>
<pre class="type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testToStringWithNonNullComparator(){
  Filter filter=new DependentColumnFilter(FAMILIES[0],QUALIFIER,true,CompareOp.EQUAL,new BinaryComparator(MATCH_VAL));
  assertNotNull(filter.toString());
  assertTrue("check string contains comparator value",filter.toString().contains("match"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.filter.TestFilterList </h4><pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test pass-thru of hints.
 */
@Test public void testHintPassThru() throws Exception {
  final KeyValue minKeyValue=new KeyValue(Bytes.toBytes(0L),null,null);
  final KeyValue maxKeyValue=new KeyValue(Bytes.toBytes(Long.MAX_VALUE),null,null);
  Filter filterNoHint=new FilterBase(){
    @Override public byte[] toByteArray(){
      return null;
    }
    @Override public ReturnCode filterKeyValue(    Cell ignored) throws IOException {
      return ReturnCode.INCLUDE;
    }
  }
;
  Filter filterMinHint=new FilterBase(){
    @Override public ReturnCode filterKeyValue(    Cell ignored){
      return ReturnCode.SEEK_NEXT_USING_HINT;
    }
    @Override public Cell getNextCellHint(    Cell currentKV){
      return minKeyValue;
    }
    @Override public byte[] toByteArray(){
      return null;
    }
  }
;
  Filter filterMaxHint=new FilterBase(){
    @Override public ReturnCode filterKeyValue(    Cell ignored){
      return ReturnCode.SEEK_NEXT_USING_HINT;
    }
    @Override public Cell getNextCellHint(    Cell cell){
      return new KeyValue(Bytes.toBytes(Long.MAX_VALUE),null,null);
    }
    @Override public byte[] toByteArray(){
      return null;
    }
  }
;
  FilterList filterList=new FilterList(Operator.MUST_PASS_ONE,Arrays.asList(new Filter[]{filterMinHint,filterMaxHint}));
  assertEquals(0,CellComparator.COMPARATOR.compare(filterList.getNextCellHint(null),minKeyValue));
  filterList=new FilterList(Operator.MUST_PASS_ONE,Arrays.asList(new Filter[]{filterMinHint,filterMaxHint,filterNoHint}));
  assertNull(filterList.getNextCellHint(null));
  filterList=new FilterList(Operator.MUST_PASS_ONE,Arrays.asList(new Filter[]{filterNoHint,filterMaxHint}));
  assertNull(filterList.getNextCellHint(null));
  filterList=new FilterList(Operator.MUST_PASS_ONE,Arrays.asList(new Filter[]{filterMaxHint,filterMaxHint}));
  assertEquals(0,CellComparator.COMPARATOR.compare(filterList.getNextCellHint(null),maxKeyValue));
  filterList=new FilterList(Operator.MUST_PASS_ALL,Arrays.asList(new Filter[]{filterMinHint,filterMaxHint}));
  filterList.filterKeyValue(null);
  assertEquals(0,CellComparator.COMPARATOR.compare(filterList.getNextCellHint(null),minKeyValue));
  filterList=new FilterList(Operator.MUST_PASS_ALL,Arrays.asList(new Filter[]{filterMaxHint,filterMinHint}));
  filterList.filterKeyValue(null);
  assertEquals(0,CellComparator.COMPARATOR.compare(filterList.getNextCellHint(null),maxKeyValue));
  filterList=new FilterList(Operator.MUST_PASS_ALL,Arrays.asList(new Filter[]{filterNoHint,filterMinHint,filterMaxHint}));
  filterList.filterKeyValue(null);
  assertEquals(0,CellComparator.COMPARATOR.compare(filterList.getNextCellHint(null),minKeyValue));
  filterList=new FilterList(Operator.MUST_PASS_ALL,Arrays.asList(new Filter[]{filterNoHint,filterMaxHint}));
  filterList.filterKeyValue(null);
  assertEquals(0,CellComparator.COMPARATOR.compare(filterList.getNextCellHint(null),maxKeyValue));
  filterList=new FilterList(Operator.MUST_PASS_ALL,Arrays.asList(new Filter[]{filterNoHint,filterMinHint}));
  filterList.filterKeyValue(null);
  assertEquals(0,CellComparator.COMPARATOR.compare(filterList.getNextCellHint(null),minKeyValue));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.filter.TestFilterWithScanLimits </h4><pre class="type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScanWithLimit(){
  int kv_number=0;
  try {
    Scan scan=new Scan();
    scan.setBatch(2);
    SingleColumnValueFilter filter=new SingleColumnValueFilter(Bytes.toBytes(columnFamily),Bytes.toBytes("c5"),CompareFilter.CompareOp.EQUAL,new SubstringComparator("2_c5"));
    scan.setFilter(filter);
    Table table=openTable(tableName);
    ResultScanner scanner=table.getScanner(scan);
    for (    Result result : scanner) {
      for (      Cell kv : result.listCells()) {
        kv_number++;
        LOG.debug(kv_number + ". kv: " + kv);
      }
    }
    scanner.close();
    table.close();
  }
 catch (  Exception e) {
    assertNotNull("No IncompatibleFilterException catched",e);
  }
  LOG.debug("check the fetched kv number");
  assertEquals("We should not get result(s) returned.",0,kv_number);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.filter.TestFilterWrapper </h4><pre class="type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFilterWrapper(){
  int kv_number=0;
  int row_number=0;
  try {
    Scan scan=new Scan();
    List<Filter> fs=new ArrayList<Filter>();
    DependentColumnFilter f1=new DependentColumnFilter(Bytes.toBytes("f1"),Bytes.toBytes("c5"),true,CompareFilter.CompareOp.EQUAL,new SubstringComparator("c5"));
    PageFilter f2=new PageFilter(2);
    fs.add(f1);
    fs.add(f2);
    FilterList filter=new FilterList(fs);
    scan.setFilter(filter);
    Table table=connection.getTable(name);
    ResultScanner scanner=table.getScanner(scan);
    for (    Result result : scanner) {
      row_number++;
      for (      Cell kv : result.listCells()) {
        LOG.debug(kv_number + ". kv: " + kv);
        kv_number++;
        assertEquals("Returned row is not correct",new String(CellUtil.cloneRow(kv)),"row" + (row_number + 1));
      }
    }
    scanner.close();
    table.close();
  }
 catch (  Exception e) {
    assertNull("Exception happens in scan",e);
  }
  LOG.debug("check the fetched kv number");
  assertEquals("We should get 8 results returned.",8,kv_number);
  assertEquals("We should get 2 rows returned",2,row_number);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.filter.TestFuzzyRowFilter </h4><pre class="type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testGetNextForFuzzyRuleForward(){
  assertNext(false,new byte[]{0,1,2},new byte[]{0,-1,-1},new byte[]{1,2,1,0,1},new byte[]{2,1,2});
  assertNext(false,new byte[]{0,1,2},new byte[]{0,-1,-1},new byte[]{1,1,2,0,1},new byte[]{1,1,2,0,2});
  assertNext(false,new byte[]{0,1,0,2,0},new byte[]{0,-1,0,-1,0},new byte[]{1,0,2,0,1},new byte[]{1,1,0,2});
  assertNext(false,new byte[]{1,0,1},new byte[]{-1,0,-1},new byte[]{1,(byte)128,2,0,1},new byte[]{1,(byte)129,1});
  assertNext(false,new byte[]{0,1,0,1},new byte[]{0,-1,0,-1},new byte[]{5,1,0,1},new byte[]{5,1,1,1});
  assertNext(false,new byte[]{0,1,0,1},new byte[]{0,-1,0,-1},new byte[]{5,1,0,1,1},new byte[]{5,1,0,1,2});
  assertNext(false,new byte[]{0,1,0,0},new byte[]{0,-1,0,0},new byte[]{5,1,(byte)255,1},new byte[]{5,1,(byte)255,2});
  assertNext(false,new byte[]{0,1,0,1},new byte[]{0,-1,0,-1},new byte[]{5,1,(byte)255,1},new byte[]{6,1,0,1});
  assertNext(false,new byte[]{0,1,0,1},new byte[]{0,-1,0,-1},new byte[]{5,1,(byte)255,0},new byte[]{5,1,(byte)255,1});
  assertNext(false,new byte[]{5,1,1,0},new byte[]{-1,-1,0,0},new byte[]{5,1,(byte)255,1},new byte[]{5,1,(byte)255,2});
  assertNext(false,new byte[]{1,1,1,1},new byte[]{-1,-1,0,0},new byte[]{1,1,2,2},new byte[]{1,1,2,3});
  assertNext(false,new byte[]{1,1,1,1},new byte[]{-1,-1,0,0},new byte[]{1,1,3,2},new byte[]{1,1,3,3});
  assertNext(false,new byte[]{1,1,1,1},new byte[]{0,0,0,0},new byte[]{1,1,2,3},new byte[]{1,1,2,4});
  assertNext(false,new byte[]{1,1,1,1},new byte[]{0,0,0,0},new byte[]{1,1,3,2},new byte[]{1,1,3,3});
  assertNext(false,new byte[]{1,1,0,0},new byte[]{-1,-1,0,0},new byte[]{0,1,3,2},new byte[]{1,1});
  Assert.assertNull(FuzzyRowFilter.getNextForFuzzyRule(new byte[]{2,3,1,1,1},new byte[]{1,0,1},new byte[]{-1,0,-1}));
  Assert.assertNull(FuzzyRowFilter.getNextForFuzzyRule(new byte[]{1,(byte)245,1,3,0},new byte[]{1,1,0,3},new byte[]{-1,-1,0,-1}));
  Assert.assertNull(FuzzyRowFilter.getNextForFuzzyRule(new byte[]{1,3,1,3,0},new byte[]{1,2,0,3},new byte[]{-1,-1,0,-1}));
  Assert.assertNull(FuzzyRowFilter.getNextForFuzzyRule(new byte[]{2,1,1,1,0},new byte[]{1,2,0,3},new byte[]{-1,-1,0,-1}));
}

</code></pre>

<br>
<pre class="type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testGetNextForFuzzyRuleReverse(){
  assertNext(true,new byte[]{0,1,2},new byte[]{0,-1,-1},new byte[]{1,2,1,0,1},new byte[]{1,1,2,(byte)0xFF,(byte)0xFF});
  assertNext(true,new byte[]{0,1,0,2,0},new byte[]{0,-1,0,-1,0},new byte[]{1,2,1,3,1},new byte[]{1,1,0,2,0});
  assertNext(true,new byte[]{1,0,1},new byte[]{-1,0,-1},new byte[]{1,(byte)128,2,0,1},new byte[]{1,(byte)128,1,(byte)0xFF,(byte)0xFF});
  assertNext(true,new byte[]{0,1,0,1},new byte[]{0,-1,0,-1},new byte[]{5,1,0,2,1},new byte[]{5,1,0,1,(byte)0xFF});
  assertNext(true,new byte[]{0,1,0,0},new byte[]{0,-1,0,0},new byte[]{5,1,(byte)255,1},new byte[]{5,1,(byte)255,0});
  assertNext(true,new byte[]{0,1,0,1},new byte[]{0,-1,0,-1},new byte[]{5,1,0,1},new byte[]{4,1,(byte)255,1});
  assertNext(true,new byte[]{0,1,0,1},new byte[]{0,-1,0,-1},new byte[]{5,1,(byte)255,0},new byte[]{5,1,(byte)254,1});
  assertNext(true,new byte[]{1,1,0,0},new byte[]{-1,-1,0,0},new byte[]{2,1,3,2},new byte[]{1,1,0,0});
  assertNext(true,new byte[]{1,0,1},new byte[]{-1,0,-1},new byte[]{2,3,1,1,1},new byte[]{1,0,1,(byte)0xFF,(byte)0xFF});
  assertNext(true,new byte[]{1,1,0,3},new byte[]{-1,-1,0,-1},new byte[]{1,(byte)245,1,3,0},new byte[]{1,1,0,3,(byte)0xFF});
  assertNext(true,new byte[]{1,2,0,3},new byte[]{-1,-1,0,-1},new byte[]{1,3,1,3,0},new byte[]{1,2,0,3,(byte)0xFF});
  assertNext(true,new byte[]{1,2,0,3},new byte[]{-1,-1,0,-1},new byte[]{2,1,1,1,0},new byte[]{1,2,0,3,(byte)0xFF});
  assertNext(true,new byte[]{1,0,1},new byte[]{-1,0,-1},new byte[]{1,(byte)128,2},new byte[]{1,(byte)128,1});
  assertNext(true,new byte[]{0,1,0,1},new byte[]{0,-1,0,-1},new byte[]{5,1,0,2},new byte[]{5,1,0,1});
  assertNext(true,new byte[]{5,1,1,0},new byte[]{-1,-1,0,0},new byte[]{5,1,(byte)0xFF,1},new byte[]{5,1,(byte)0xFF,0});
  assertNext(true,new byte[]{1,1,1,1},new byte[]{-1,-1,0,0},new byte[]{1,1,2,2},new byte[]{1,1,2,1});
  assertNext(true,new byte[]{1,1,1,1},new byte[]{0,0,0,0},new byte[]{1,1,2,3},new byte[]{1,1,2,2});
  Assert.assertNull(FuzzyRowFilter.getNextForFuzzyRule(true,new byte[]{1,1,1,3,0},new byte[]{1,2,0,3},new byte[]{-1,-1,0,-1}));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.fs.TestBlockReorder </h4><pre class="type-4 type-9 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that the reorder algo works as we expect.
 */
@Test public void testBlockLocation() throws Exception {
  htu.startMiniZKCluster();
  MiniHBaseCluster hbm=htu.startMiniHBaseCluster(1,1);
  conf=hbm.getConfiguration();
  final String fileName="/helloWorld";
  Path p=new Path(fileName);
  final int repCount=3;
  Assert.assertTrue((short)cluster.getDataNodes().size() >= repCount);
  FSDataOutputStream fop=dfs.create(p,(short)repCount);
  final double toWrite=875.5613;
  fop.writeDouble(toWrite);
  fop.close();
  for (int i=0; i < 10; i++) {
    LocatedBlocks l;
    final long max=System.currentTimeMillis() + 10000;
    do {
      l=getNamenode(dfs.getClient()).getBlockLocations(fileName,0,1);
      Assert.assertNotNull(l.getLocatedBlocks());
      Assert.assertEquals(l.getLocatedBlocks().size(),1);
      Assert.assertTrue("Expecting " + repCount + " , got "+ l.get(0).getLocations().length,System.currentTimeMillis() < max);
    }
 while (l.get(0).getLocations().length != repCount);
    Object originalList[]=l.getLocatedBlocks().toArray();
    HFileSystem.ReorderWALBlocks lrb=new HFileSystem.ReorderWALBlocks();
    lrb.reorderBlocks(conf,l,fileName);
    Assert.assertArrayEquals(originalList,l.getLocatedBlocks().toArray());
    Assert.assertNotNull(conf.get(HConstants.HBASE_DIR));
    Assert.assertFalse(conf.get(HConstants.HBASE_DIR).isEmpty());
    String pseudoLogFile=conf.get(HConstants.HBASE_DIR) + "/" + HConstants.HREGION_LOGDIR_NAME+ "/"+ host1+ ",6977,6576"+ "/mylogfile";
    Assert.assertNotNull("log= " + pseudoLogFile,DefaultWALProvider.getServerNameFromWALDirectoryName(dfs.getConf(),pseudoLogFile));
    lrb.reorderBlocks(conf,l,pseudoLogFile);
    Assert.assertEquals(host1,l.get(0).getLocations()[2].getHostName());
    lrb.reorderBlocks(conf,l,pseudoLogFile);
    Assert.assertEquals(host1,l.get(0).getLocations()[2].getHostName());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.http.TestHttpRequestLog </h4><pre class="type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAppenderDefined(){
  HttpRequestLogAppender requestLogAppender=new HttpRequestLogAppender();
  requestLogAppender.setName("testrequestlog");
  Logger.getLogger("http.requests.test").addAppender(requestLogAppender);
  RequestLog requestLog=HttpRequestLog.getRequestLog("test");
  Logger.getLogger("http.requests.test").removeAppender(requestLogAppender);
  assertNotNull("RequestLog should not be null",requestLog);
  assertEquals("Class mismatch",NCSARequestLog.class,requestLog.getClass());
}

</code></pre>

<br>
<pre class="type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testAppenderUndefined(){
  RequestLog requestLog=HttpRequestLog.getRequestLog("test");
  assertNull("RequestLog should be null",requestLog);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.http.TestHttpServer </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBindAddress() throws Exception {
  checkBindAddress("localhost",0,false).stop();
  HttpServer myServer=checkBindAddress("localhost",0,false);
  HttpServer myServer2=null;
  try {
    int port=myServer.getConnectorAddress(0).getPort();
    myServer2=checkBindAddress("localhost",port,true);
    port=myServer2.getConnectorAddress(0).getPort();
    myServer2.stop();
    assertNull(myServer2.getConnectorAddress(0));
    myServer2.openListeners();
    assertEquals(port,myServer2.getConnectorAddress(0).getPort());
  }
  finally {
    myServer.stop();
    if (myServer2 != null) {
      myServer2.stop();
    }
  }
}

</code></pre>

<br>
<pre class="type-4 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoCacheHeader() throws Exception {
  URL url=new URL(baseUrl,"/echo?a=b&c=d");
  HttpURLConnection conn=(HttpURLConnection)url.openConnection();
  assertEquals(HttpURLConnection.HTTP_OK,conn.getResponseCode());
  assertEquals("no-cache",conn.getHeaderField("Cache-Control"));
  assertEquals("no-cache",conn.getHeaderField("Pragma"));
  assertNotNull(conn.getHeaderField("Expires"));
  assertNotNull(conn.getHeaderField("Date"));
  assertEquals(conn.getHeaderField("Expires"),conn.getHeaderField("Date"));
  assertEquals("DENY",conn.getHeaderField("X-Frame-Options"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.http.TestHttpServerLifecycle </h4><pre class="type-7 type-13 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Test that the server is alive once started
 * @throws Throwableon failure
 */
@Ignore("Hangs on occasion; see HBASE-14430") @Test(timeout=60000) public void testWepAppContextAfterServerStop() throws Throwable {
  HttpServer server=null;
  String key="test.attribute.key";
  String value="test.attribute.value";
  server=createTestServer();
  assertNotLive(server);
  server.start();
  server.setAttribute(key,value);
  assertAlive(server);
  assertEquals(value,server.getAttribute(key));
  stop(server);
  assertNull("Server context should have cleared",server.getAttribute(key));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.io.TestHalfStoreFileReader </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHalfScanner() throws IOException {
  String root_dir=TEST_UTIL.getDataTestDir().toString();
  Path p=new Path(root_dir,"test");
  Configuration conf=TEST_UTIL.getConfiguration();
  FileSystem fs=FileSystem.get(conf);
  CacheConfig cacheConf=new CacheConfig(conf);
  HFileContext meta=new HFileContextBuilder().withBlockSize(1024).build();
  HFile.Writer w=HFile.getWriterFactory(conf,cacheConf).withPath(fs,p).withFileContext(meta).create();
  List<KeyValue> items=genSomeKeys();
  for (  KeyValue kv : items) {
    w.append(kv);
  }
  w.close();
  HFile.Reader r=HFile.createReader(fs,p,cacheConf,conf);
  r.loadFileInfo();
  Cell midKV=r.midkey();
  byte[] midkey=CellUtil.cloneRow(midKV);
  Reference bottom=new Reference(midkey,Reference.Range.bottom);
  Reference top=new Reference(midkey,Reference.Range.top);
  KeyValue beforeMidKey=null;
  for (  KeyValue item : items) {
    if (CellComparator.COMPARATOR.compare(item,midKV) >= 0) {
      break;
    }
    beforeMidKey=item;
  }
  System.out.println("midkey: " + midKV + " or: "+ Bytes.toStringBinary(midkey));
  System.out.println("beforeMidKey: " + beforeMidKey);
  Cell foundKeyValue=doTestOfSeekBefore(p,fs,bottom,midKV,cacheConf);
  assertEquals(beforeMidKey,foundKeyValue);
  foundKeyValue=doTestOfSeekBefore(p,fs,top,items.get(items.size() - 1),cacheConf);
  assertEquals(items.get(items.size() - 2),foundKeyValue);
  foundKeyValue=doTestOfSeekBefore(p,fs,bottom,items.get(items.size() - 1),cacheConf);
  assertEquals(beforeMidKey,foundKeyValue);
  foundKeyValue=doTestOfSeekBefore(p,fs,top,items.get(0),cacheConf);
  assertNull(foundKeyValue);
  foundKeyValue=doTestOfSeekBefore(p,fs,bottom,items.get(0),cacheConf);
  assertNull(foundKeyValue);
  foundKeyValue=doTestOfSeekBefore(p,fs,top,items.get(1),cacheConf);
  assertNull(foundKeyValue);
  foundKeyValue=doTestOfSeekBefore(p,fs,bottom,items.get(1),cacheConf);
  assertEquals(items.get(0),foundKeyValue);
  foundKeyValue=doTestOfSeekBefore(p,fs,top,midKV,cacheConf);
  assertNull(foundKeyValue);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.io.crypto.TestCipherProvider </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCustomProvider(){
  Configuration conf=HBaseConfiguration.create();
  conf.set(HConstants.CRYPTO_CIPHERPROVIDER_CONF_KEY,MyCipherProvider.class.getName());
  CipherProvider provider=Encryption.getCipherProvider(conf);
  assertTrue(provider instanceof MyCipherProvider);
  assertTrue(Arrays.asList(provider.getSupportedCiphers()).contains("TEST"));
  Cipher a=Encryption.getCipher(conf,"TEST");
  assertNotNull(a);
  assertTrue(a.getProvider() instanceof MyCipherProvider);
  assertEquals(a.getName(),"TEST");
  assertEquals(a.getKeyLength(),0);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultProvider(){
  Configuration conf=HBaseConfiguration.create();
  CipherProvider provider=Encryption.getCipherProvider(conf);
  assertTrue(provider instanceof DefaultCipherProvider);
  String algorithm=conf.get(HConstants.CRYPTO_KEY_ALGORITHM_CONF_KEY,HConstants.CIPHER_AES);
  assertTrue(Arrays.asList(provider.getSupportedCiphers()).contains(algorithm));
  Cipher a=Encryption.getCipher(conf,algorithm);
  assertNotNull(a);
  assertTrue(a.getProvider() instanceof DefaultCipherProvider);
  assertEquals(a.getName(),algorithm);
  assertEquals(a.getKeyLength(),AES.KEY_LENGTH);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.io.crypto.TestKeyProvider </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTestProvider(){
  Configuration conf=HBaseConfiguration.create();
  conf.set(HConstants.CRYPTO_KEYPROVIDER_CONF_KEY,KeyProviderForTesting.class.getName());
  KeyProvider provider=Encryption.getKeyProvider(conf);
  assertNotNull("Null returned for provider",provider);
  assertTrue("Provider is not the expected type",provider instanceof KeyProviderForTesting);
  Key key=provider.getKey("foo");
  assertNotNull("Test provider did not return a key as expected",key);
  assertEquals("Test provider did not create a key for AES",key.getAlgorithm(),"AES");
  assertEquals("Test provider did not create a key of adequate length",key.getEncoded().length,AES.KEY_LENGTH);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.io.crypto.TestKeyStoreKeyProvider </h4><pre class="type-4 type-9 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000) public void testKeyStoreKeyProviderWithPassword() throws Exception {
  KeyProvider provider=new KeyStoreKeyProvider();
  provider.init("jceks://" + storeFile.toURI().getPath() + "?password="+ PASSWORD);
  Key key=provider.getKey(ALIAS);
  assertNotNull(key);
  byte[] keyBytes=key.getEncoded();
  assertEquals(keyBytes.length,KEY.length);
  for (int i=0; i < KEY.length; i++) {
    assertEquals(keyBytes[i],KEY[i]);
  }
}

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000) public void testKeyStoreKeyProviderWithPasswordFile() throws Exception {
  KeyProvider provider=new KeyStoreKeyProvider();
  provider.init("jceks://" + storeFile.toURI().getPath() + "?passwordFile="+ URLEncoder.encode(passwordFile.getAbsolutePath(),"UTF-8"));
  Key key=provider.getKey(ALIAS);
  assertNotNull(key);
  byte[] keyBytes=key.getEncoded();
  assertEquals(keyBytes.length,KEY.length);
  for (int i=0; i < KEY.length; i++) {
    assertEquals(keyBytes[i],KEY[i]);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.io.encoding.TestPrefixTreeEncoding </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSeekBeforeWithFixedData() throws Exception {
  formatRowNum=true;
  PrefixTreeCodec encoder=new PrefixTreeCodec();
  int batchId=numBatchesWritten++;
  HFileContext meta=new HFileContextBuilder().withHBaseCheckSum(false).withIncludesMvcc(false).withIncludesTags(includesTag).withCompression(Algorithm.NONE).build();
  HFileBlockEncodingContext blkEncodingCtx=new HFileBlockDefaultEncodingContext(DataBlockEncoding.PREFIX_TREE,new byte[0],meta);
  ByteArrayOutputStream baosInMemory=new ByteArrayOutputStream();
  DataOutputStream userDataStream=new DataOutputStream(baosInMemory);
  generateFixedTestData(kvset,batchId,false,includesTag,encoder,blkEncodingCtx,userDataStream);
  EncodedSeeker seeker=encoder.createSeeker(CellComparator.COMPARATOR,encoder.newDataBlockDecodingContext(meta));
  byte[] onDiskBytes=baosInMemory.toByteArray();
  ByteBuffer readBuffer=ByteBuffer.wrap(onDiskBytes,DataBlockEncoding.ID_SIZE,onDiskBytes.length - DataBlockEncoding.ID_SIZE);
  seeker.setCurrentBuffer(new SingleByteBuff(readBuffer));
  Cell seekKey=CellUtil.createFirstDeleteFamilyCellOnRow(getRowKey(batchId,0),CF_BYTES);
  seeker.seekToKeyInBlock(seekKey,true);
  assertEquals(null,seeker.getCell());
  seekKey=CellUtil.createFirstDeleteFamilyCellOnRow(getRowKey(batchId,NUM_ROWS_PER_BATCH / 3),CF_BYTES);
  seeker.seekToKeyInBlock(seekKey,true);
  assertNotNull(seeker.getCell());
  assertArrayEquals(getRowKey(batchId,NUM_ROWS_PER_BATCH / 3 - 1),CellUtil.cloneRow(seeker.getCell()));
  seekKey=CellUtil.createFirstDeleteFamilyCellOnRow(Bytes.toBytes("zzzz"),CF_BYTES);
  seeker.seekToKeyInBlock(seekKey,true);
  assertNotNull(seeker.getCell());
  assertArrayEquals(getRowKey(batchId,NUM_ROWS_PER_BATCH - 1),CellUtil.cloneRow(seeker.getCell()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.io.hfile.TestHFile </h4><pre class="type-4 type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * Test empty HFile.
 * Test all features work reasonably when hfile is empty of entries.
 * @throws IOException
 */
@Test public void testEmptyHFile() throws IOException {
  if (cacheConf == null)   cacheConf=new CacheConfig(conf);
  Path f=new Path(ROOT_DIR,testName.getMethodName());
  HFileContext context=new HFileContextBuilder().withIncludesTags(false).build();
  Writer w=HFile.getWriterFactory(conf,cacheConf).withPath(fs,f).withFileContext(context).create();
  w.close();
  Reader r=HFile.createReader(fs,f,cacheConf,conf);
  r.loadFileInfo();
  assertNull(r.getFirstKey());
  assertNull(r.getLastKey());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testNullMetaBlocks() throws Exception {
  if (cacheConf == null)   cacheConf=new CacheConfig(conf);
  for (  Compression.Algorithm compressAlgo : HBaseTestingUtility.COMPRESSION_ALGORITHMS) {
    Path mFile=new Path(ROOT_DIR,"nometa_" + compressAlgo + ".hfile");
    FSDataOutputStream fout=createFSOutput(mFile);
    HFileContext meta=new HFileContextBuilder().withCompression(compressAlgo).withBlockSize(minBlockSize).build();
    Writer writer=HFile.getWriterFactory(conf,cacheConf).withOutputStream(fout).withFileContext(meta).create();
    KeyValue kv=new KeyValue("foo".getBytes(),"f1".getBytes(),null,"value".getBytes());
    writer.append(kv);
    writer.close();
    fout.close();
    Reader reader=HFile.createReader(fs,mFile,cacheConf,conf);
    reader.loadFileInfo();
    assertNull(reader.getMetaBlock("non-existant",false));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.io.hfile.TestHFileEncryption </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=20000) public void testHFileEncryptionMetadata() throws Exception {
  Configuration conf=TEST_UTIL.getConfiguration();
  CacheConfig cacheConf=new CacheConfig(conf);
  HFileContext fileContext=new HFileContextBuilder().withEncryptionContext(cryptoContext).build();
  Path path=new Path(TEST_UTIL.getDataTestDir(),"cryptometa.hfile");
  FSDataOutputStream out=fs.create(path);
  HFile.Writer writer=HFile.getWriterFactory(conf,cacheConf).withOutputStream(out).withFileContext(fileContext).create();
  try {
    KeyValue kv=new KeyValue("foo".getBytes(),"f1".getBytes(),null,"value".getBytes());
    writer.append(kv);
  }
  finally {
    writer.close();
    out.close();
  }
  HFile.Reader reader=HFile.createReader(fs,path,cacheConf,conf);
  try {
    reader.loadFileInfo();
    FixedFileTrailer trailer=reader.getTrailer();
    assertNotNull(trailer.getEncryptionKey());
    Encryption.Context readerContext=reader.getFileContext().getEncryptionContext();
    assertEquals(readerContext.getCipher().getName(),cryptoContext.getCipher().getName());
    assertTrue(Bytes.equals(readerContext.getKeyBytes(),cryptoContext.getKeyBytes()));
  }
  finally {
    reader.close();
  }
}

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=6000000) public void testHFileEncryption() throws Exception {
  RedundantKVGenerator generator=new RedundantKVGenerator();
  List<KeyValue> testKvs=generator.generateTestKeyValues(1000);
  Configuration conf=TEST_UTIL.getConfiguration();
  CacheConfig cacheConf=new CacheConfig(conf);
  for (  DataBlockEncoding encoding : DataBlockEncoding.values()) {
    for (    Compression.Algorithm compression : TestHFileBlock.COMPRESSION_ALGORITHMS) {
      HFileContext fileContext=new HFileContextBuilder().withBlockSize(4096).withEncryptionContext(cryptoContext).withCompression(compression).withDataBlockEncoding(encoding).build();
      LOG.info("Writing with " + fileContext);
      Path path=new Path(TEST_UTIL.getDataTestDir(),UUID.randomUUID().toString() + ".hfile");
      FSDataOutputStream out=fs.create(path);
      HFile.Writer writer=HFile.getWriterFactory(conf,cacheConf).withOutputStream(out).withFileContext(fileContext).create();
      try {
        for (        KeyValue kv : testKvs) {
          writer.append(kv);
        }
      }
  finally {
        writer.close();
        out.close();
      }
      LOG.info("Reading with " + fileContext);
      int i=0;
      HFileScanner scanner=null;
      HFile.Reader reader=HFile.createReader(fs,path,cacheConf,conf);
      try {
        reader.loadFileInfo();
        FixedFileTrailer trailer=reader.getTrailer();
        assertNotNull(trailer.getEncryptionKey());
        scanner=reader.getScanner(false,false);
        assertTrue("Initial seekTo failed",scanner.seekTo());
        do {
          Cell kv=scanner.getCell();
          assertTrue("Read back an unexpected or invalid KV",testKvs.contains(KeyValueUtil.ensureKeyValue(kv)));
          i++;
        }
 while (scanner.next());
      }
  finally {
        reader.close();
        scanner.close();
      }
      assertEquals("Did not read back as many KVs as written",i,testKvs.size());
      LOG.info("Random seeking with " + fileContext);
      reader=HFile.createReader(fs,path,cacheConf,conf);
      try {
        scanner=reader.getScanner(false,true);
        assertTrue("Initial seekTo failed",scanner.seekTo());
        for (i=0; i < 100; i++) {
          KeyValue kv=testKvs.get(RNG.nextInt(testKvs.size()));
          assertEquals("Unable to find KV as expected: " + kv,scanner.seekTo(kv),0);
        }
      }
  finally {
        scanner.close();
        reader.close();
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.io.hfile.TestLruBlockCache </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMaxBlockSize() throws Exception {
  long maxSize=100000;
  long blockSize=calculateBlockSize(maxSize,10);
  LruBlockCache cache=new LruBlockCache(maxSize,blockSize,false,(int)Math.ceil(1.2 * maxSize / blockSize),LruBlockCache.DEFAULT_LOAD_FACTOR,LruBlockCache.DEFAULT_CONCURRENCY_LEVEL,0.66f,0.99f,0.33f,0.33f,0.34f,false,1024);
  CachedItem[] tooLong=generateFixedBlocks(10,1024 + 5,"long");
  CachedItem[] small=generateFixedBlocks(15,600,"small");
  for (  CachedItem i : tooLong) {
    cache.cacheBlock(i.cacheKey,i);
  }
  for (  CachedItem i : small) {
    cache.cacheBlock(i.cacheKey,i);
  }
  assertEquals(15,cache.getBlockCount());
  for (  CachedItem i : small) {
    assertNotNull(cache.getBlock(i.cacheKey,true,false,false));
  }
  for (  CachedItem i : tooLong) {
    assertNull(cache.getBlock(i.cacheKey,true,false,false));
  }
  assertEquals(10,cache.getStats().getFailedInserts());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.ipc.TestGlobalEventLoopGroup </h4><pre class="type-7 type-8 type-16 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test(){
  Configuration conf=HBaseConfiguration.create();
  conf.setBoolean(AsyncRpcClient.USE_GLOBAL_EVENT_LOOP_GROUP,true);
  AsyncRpcClient client=new AsyncRpcClient(conf);
  assertNotNull(AsyncRpcClient.GLOBAL_EVENT_LOOP_GROUP);
  AsyncRpcClient client1=new AsyncRpcClient(conf);
  assertSame(client.bootstrap.group(),client1.bootstrap.group());
  client1.close();
  assertFalse(client.bootstrap.group().isShuttingDown());
  conf.setBoolean(AsyncRpcClient.USE_GLOBAL_EVENT_LOOP_GROUP,false);
  AsyncRpcClient client2=new AsyncRpcClient(conf);
  assertNotSame(client.bootstrap.group(),client2.bootstrap.group());
  client2.close();
  client.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.mapred.TestGroupingTableMap </h4><pre class="type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test @SuppressWarnings({"deprecation"}) public void shouldReturnNullFromCreateGroupKey() throws Exception {
  GroupingTableMap gTableMap=null;
  try {
    gTableMap=new GroupingTableMap();
    assertNull(gTableMap.createGroupKey(null));
  }
  finally {
    if (gTableMap != null)     gTableMap.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.mapred.TestRowCounter </h4><pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings({"deprecation"}) public void shouldCreateAndRunSubmittableJob() throws Exception {
  RowCounter rCounter=new RowCounter();
  rCounter.setConf(HBaseConfiguration.create());
  String[] args=new String[]{"\temp","tableA","column1","column2","column3"};
  JobConf jobConfig=rCounter.createSubmittableJob(args);
  assertNotNull(jobConfig);
  assertEquals(0,jobConfig.getNumReduceTasks());
  assertEquals("rowcounter",jobConfig.getJobName());
  assertEquals(jobConfig.getMapOutputValueClass(),Result.class);
  assertEquals(jobConfig.getMapperClass(),RowCounterMapper.class);
  assertEquals(jobConfig.get(TableInputFormat.COLUMN_LIST),Joiner.on(' ').join("column1","column2","column3"));
  assertEquals(jobConfig.getMapOutputKeyClass(),ImmutableBytesWritable.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.mapred.TestTableMapReduceUtil </h4><pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check what the given number of reduce tasks for the given job configuration
 * does not exceed the number of regions for the given table.
 */
@Test public void shouldNumberOfReduceTaskNotExceedNumberOfRegionsForGivenTable() throws IOException {
  Assert.assertNotNull(presidentsTable);
  Configuration cfg=UTIL.getConfiguration();
  JobConf jobConf=new JobConf(cfg);
  TableMapReduceUtil.setNumReduceTasks(TABLE_NAME,jobConf);
  TableMapReduceUtil.limitNumReduceTasks(TABLE_NAME,jobConf);
  TableMapReduceUtil.setScannerCaching(jobConf,100);
  assertEquals(1,jobConf.getNumReduceTasks());
  assertEquals(100,jobConf.getInt("hbase.client.scanner.caching",0));
  jobConf.setNumReduceTasks(10);
  TableMapReduceUtil.setNumMapTasks(TABLE_NAME,jobConf);
  TableMapReduceUtil.limitNumReduceTasks(TABLE_NAME,jobConf);
  assertEquals(1,jobConf.getNumReduceTasks());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.mapreduce.TestCopyTable </h4><pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test copy of table from sourceTable to targetTable all rows from family a
 */
@Test public void testRenameFamily() throws Exception {
  TableName sourceTable=TableName.valueOf("sourceTable");
  TableName targetTable=TableName.valueOf("targetTable");
  byte[][] families={FAMILY_A,FAMILY_B};
  Table t=TEST_UTIL.createTable(sourceTable,families);
  Table t2=TEST_UTIL.createTable(targetTable,families);
  Put p=new Put(ROW1);
  p.addColumn(FAMILY_A,QUALIFIER,Bytes.toBytes("Data11"));
  p.addColumn(FAMILY_B,QUALIFIER,Bytes.toBytes("Data12"));
  p.addColumn(FAMILY_A,QUALIFIER,Bytes.toBytes("Data13"));
  t.put(p);
  p=new Put(ROW2);
  p.addColumn(FAMILY_B,QUALIFIER,Bytes.toBytes("Dat21"));
  p.addColumn(FAMILY_A,QUALIFIER,Bytes.toBytes("Data22"));
  p.addColumn(FAMILY_B,QUALIFIER,Bytes.toBytes("Data23"));
  t.put(p);
  long currentTime=System.currentTimeMillis();
  String[] args=new String[]{"--new.name=" + targetTable,"--families=a:b","--all.cells","--starttime=" + (currentTime - 100000),"--endtime=" + (currentTime + 100000),"--versions=1",sourceTable.getNameAsString()};
  assertNull(t2.get(new Get(ROW1)).getRow());
  assertTrue(runCopy(args));
  assertNotNull(t2.get(new Get(ROW1)).getRow());
  Result res=t2.get(new Get(ROW1));
  byte[] b1=res.getValue(FAMILY_B,QUALIFIER);
  assertEquals("Data13",new String(b1));
  assertNotNull(t2.get(new Get(ROW2)).getRow());
  res=t2.get(new Get(ROW2));
  b1=res.getValue(FAMILY_A,QUALIFIER);
  assertNull(b1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat2 </h4><pre class="type-4 type-7 type-13 type-5 type-6 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("Goes zombie too frequently; needs work. See HBASE-14563") @Test public void test_TIMERANGE() throws Exception {
  Configuration conf=new Configuration(this.util.getConfiguration());
  RecordWriter<ImmutableBytesWritable,Cell> writer=null;
  TaskAttemptContext context=null;
  Path dir=util.getDataTestDir("test_TIMERANGE_present");
  LOG.info("Timerange dir writing to dir: " + dir);
  try {
    Job job=new Job(conf);
    FileOutputFormat.setOutputPath(job,dir);
    context=createTestTaskAttemptContext(job);
    HFileOutputFormat2 hof=new HFileOutputFormat2();
    writer=hof.getRecordWriter(context);
    final byte[] b=Bytes.toBytes("b");
    KeyValue kv=new KeyValue(b,b,b,2000,b);
    KeyValue original=kv.clone();
    writer.write(new ImmutableBytesWritable(),kv);
    assertEquals(original,kv);
    kv=new KeyValue(b,b,b,1000,b);
    original=kv.clone();
    writer.write(new ImmutableBytesWritable(),kv);
    assertEquals(original,kv);
    writer.close(context);
    FileSystem fs=FileSystem.get(conf);
    Path attemptDirectory=hof.getDefaultWorkFile(context,"").getParent();
    FileStatus[] sub1=fs.listStatus(attemptDirectory);
    FileStatus[] file=fs.listStatus(sub1[0].getPath());
    HFile.Reader rd=HFile.createReader(fs,file[0].getPath(),new CacheConfig(conf),conf);
    Map<byte[],byte[]> finfo=rd.loadFileInfo();
    byte[] range=finfo.get("TIMERANGE".getBytes());
    assertNotNull(range);
    TimeRangeTracker timeRangeTracker=new TimeRangeTracker();
    Writables.copyWritable(range,timeRangeTracker);
    LOG.info(timeRangeTracker.getMinimumTimestamp() + "...." + timeRangeTracker.getMaximumTimestamp());
    assertEquals(1000,timeRangeTracker.getMinimumTimestamp());
    assertEquals(2000,timeRangeTracker.getMaximumTimestamp());
    rd.close();
  }
  finally {
    if (writer != null && context != null)     writer.close(context);
    dir.getFileSystem(conf).delete(dir,true);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.mapreduce.TestImportTsvParser </h4><pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTsvParser() throws BadTsvLineException {
  TsvParser parser=new TsvParser("col_a,col_b:qual,HBASE_ROW_KEY,col_d","\t");
  assertBytesEquals(Bytes.toBytes("col_a"),parser.getFamily(0));
  assertBytesEquals(HConstants.EMPTY_BYTE_ARRAY,parser.getQualifier(0));
  assertBytesEquals(Bytes.toBytes("col_b"),parser.getFamily(1));
  assertBytesEquals(Bytes.toBytes("qual"),parser.getQualifier(1));
  assertNull(parser.getFamily(2));
  assertNull(parser.getQualifier(2));
  assertEquals(2,parser.getRowKeyColumnIndex());
  assertEquals(TsvParser.DEFAULT_TIMESTAMP_COLUMN_INDEX,parser.getTimestampKeyColumnIndex());
  byte[] line=Bytes.toBytes("val_a\tval_b\tval_c\tval_d");
  ParsedLine parsed=parser.parse(line,line.length);
  checkParsing(parsed,Splitter.on("\t").split(Bytes.toString(line)));
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTsvParserWithTimestamp() throws BadTsvLineException {
  TsvParser parser=new TsvParser("HBASE_ROW_KEY,HBASE_TS_KEY,col_a,","\t");
  assertNull(parser.getFamily(0));
  assertNull(parser.getQualifier(0));
  assertNull(parser.getFamily(1));
  assertNull(parser.getQualifier(1));
  assertBytesEquals(Bytes.toBytes("col_a"),parser.getFamily(2));
  assertBytesEquals(HConstants.EMPTY_BYTE_ARRAY,parser.getQualifier(2));
  assertEquals(0,parser.getRowKeyColumnIndex());
  assertEquals(1,parser.getTimestampKeyColumnIndex());
  byte[] line=Bytes.toBytes("rowkey\t1234\tval_a");
  ParsedLine parsed=parser.parse(line,line.length);
  assertEquals(1234l,parsed.getTimestamp(-1));
  checkParsing(parsed,Splitter.on("\t").split(Bytes.toString(line)));
}

</code></pre>

<br>
<pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTsvParserSpecParsing(){
  TsvParser parser;
  parser=new TsvParser("HBASE_ROW_KEY","\t");
  assertNull(parser.getFamily(0));
  assertNull(parser.getQualifier(0));
  assertEquals(0,parser.getRowKeyColumnIndex());
  assertFalse(parser.hasTimestamp());
  parser=new TsvParser("HBASE_ROW_KEY,col1:scol1","\t");
  assertNull(parser.getFamily(0));
  assertNull(parser.getQualifier(0));
  assertBytesEquals(Bytes.toBytes("col1"),parser.getFamily(1));
  assertBytesEquals(Bytes.toBytes("scol1"),parser.getQualifier(1));
  assertEquals(0,parser.getRowKeyColumnIndex());
  assertFalse(parser.hasTimestamp());
  parser=new TsvParser("HBASE_ROW_KEY,col1:scol1,col1:scol2","\t");
  assertNull(parser.getFamily(0));
  assertNull(parser.getQualifier(0));
  assertBytesEquals(Bytes.toBytes("col1"),parser.getFamily(1));
  assertBytesEquals(Bytes.toBytes("scol1"),parser.getQualifier(1));
  assertBytesEquals(Bytes.toBytes("col1"),parser.getFamily(2));
  assertBytesEquals(Bytes.toBytes("scol2"),parser.getQualifier(2));
  assertEquals(0,parser.getRowKeyColumnIndex());
  assertFalse(parser.hasTimestamp());
  parser=new TsvParser("HBASE_ROW_KEY,col1:scol1,HBASE_TS_KEY,col1:scol2","\t");
  assertNull(parser.getFamily(0));
  assertNull(parser.getQualifier(0));
  assertBytesEquals(Bytes.toBytes("col1"),parser.getFamily(1));
  assertBytesEquals(Bytes.toBytes("scol1"),parser.getQualifier(1));
  assertBytesEquals(Bytes.toBytes("col1"),parser.getFamily(3));
  assertBytesEquals(Bytes.toBytes("scol2"),parser.getQualifier(3));
  assertEquals(0,parser.getRowKeyColumnIndex());
  assertTrue(parser.hasTimestamp());
  assertEquals(2,parser.getTimestampKeyColumnIndex());
  parser=new TsvParser("HBASE_ROW_KEY,col1:scol1,HBASE_TS_KEY,col1:scol2,HBASE_ATTRIBUTES_KEY","\t");
  assertNull(parser.getFamily(0));
  assertNull(parser.getQualifier(0));
  assertBytesEquals(Bytes.toBytes("col1"),parser.getFamily(1));
  assertBytesEquals(Bytes.toBytes("scol1"),parser.getQualifier(1));
  assertBytesEquals(Bytes.toBytes("col1"),parser.getFamily(3));
  assertBytesEquals(Bytes.toBytes("scol2"),parser.getQualifier(3));
  assertEquals(0,parser.getRowKeyColumnIndex());
  assertTrue(parser.hasTimestamp());
  assertEquals(2,parser.getTimestampKeyColumnIndex());
  assertEquals(4,parser.getAttributesKeyColumnIndex());
  parser=new TsvParser("HBASE_ATTRIBUTES_KEY,col1:scol1,HBASE_TS_KEY,col1:scol2,HBASE_ROW_KEY","\t");
  assertNull(parser.getFamily(0));
  assertNull(parser.getQualifier(0));
  assertBytesEquals(Bytes.toBytes("col1"),parser.getFamily(1));
  assertBytesEquals(Bytes.toBytes("scol1"),parser.getQualifier(1));
  assertBytesEquals(Bytes.toBytes("col1"),parser.getFamily(3));
  assertBytesEquals(Bytes.toBytes("scol2"),parser.getQualifier(3));
  assertEquals(4,parser.getRowKeyColumnIndex());
  assertTrue(parser.hasTimestamp());
  assertEquals(2,parser.getTimestampKeyColumnIndex());
  assertEquals(0,parser.getAttributesKeyColumnIndex());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.mapreduce.TestJarFinder </h4><pre class="type-4 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testExistingManifest() throws Exception {
  File dir=new File(System.getProperty("test.build.dir","target/test-dir"),TestJarFinder.class.getName() + "-testExistingManifest");
  delete(dir);
  dir.mkdirs();
  File metaInfDir=new File(dir,"META-INF");
  metaInfDir.mkdirs();
  File manifestFile=new File(metaInfDir,"MANIFEST.MF");
  Manifest manifest=new Manifest();
  OutputStream os=new FileOutputStream(manifestFile);
  manifest.write(os);
  os.close();
  File propsFile=new File(dir,"props.properties");
  Writer writer=new FileWriter(propsFile);
  new Properties().store(writer,"");
  writer.close();
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  JarOutputStream zos=new JarOutputStream(baos);
  JarFinder.jarDir(dir,"",zos);
  JarInputStream jis=new JarInputStream(new ByteArrayInputStream(baos.toByteArray()));
  Assert.assertNotNull(jis.getManifest());
  jis.close();
}

</code></pre>

<br>
<pre class="type-4 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testNoManifest() throws Exception {
  File dir=new File(System.getProperty("test.build.dir","target/test-dir"),TestJarFinder.class.getName() + "-testNoManifest");
  delete(dir);
  dir.mkdirs();
  File propsFile=new File(dir,"props.properties");
  Writer writer=new FileWriter(propsFile);
  new Properties().store(writer,"");
  writer.close();
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  JarOutputStream zos=new JarOutputStream(baos);
  JarFinder.jarDir(dir,"",zos);
  JarInputStream jis=new JarInputStream(new ByteArrayInputStream(baos.toByteArray()));
  Assert.assertNotNull(jis.getManifest());
  jis.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.mapreduce.TestTableMapReduceUtil </h4><pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInitTableMapperJob2() throws Exception {
  Configuration configuration=new Configuration();
  Job job=new Job(configuration,"tableName");
  TableMapReduceUtil.initTableMapperJob(Bytes.toBytes("Table"),new Scan(),Import.Importer.class,Text.class,Text.class,job,false,WALInputFormat.class);
  assertEquals(WALInputFormat.class,job.getInputFormatClass());
  assertEquals(Import.Importer.class,job.getMapperClass());
  assertEquals(LongWritable.class,job.getOutputKeyClass());
  assertEquals(Text.class,job.getOutputValueClass());
  assertNull(job.getCombinerClass());
  assertEquals("Table",job.getConfiguration().get(TableInputFormat.INPUT_TABLE));
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInitTableMapperJob4() throws Exception {
  Configuration configuration=new Configuration();
  Job job=new Job(configuration,"tableName");
  TableMapReduceUtil.initTableMapperJob(Bytes.toBytes("Table"),new Scan(),Import.Importer.class,Text.class,Text.class,job,false);
  assertEquals(TableInputFormat.class,job.getInputFormatClass());
  assertEquals(Import.Importer.class,job.getMapperClass());
  assertEquals(LongWritable.class,job.getOutputKeyClass());
  assertEquals(Text.class,job.getOutputValueClass());
  assertNull(job.getCombinerClass());
  assertEquals("Table",job.getConfiguration().get(TableInputFormat.INPUT_TABLE));
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInitTableMapperJob3() throws Exception {
  Configuration configuration=new Configuration();
  Job job=new Job(configuration,"tableName");
  TableMapReduceUtil.initTableMapperJob(Bytes.toBytes("Table"),new Scan(),Import.Importer.class,Text.class,Text.class,job);
  assertEquals(TableInputFormat.class,job.getInputFormatClass());
  assertEquals(Import.Importer.class,job.getMapperClass());
  assertEquals(LongWritable.class,job.getOutputKeyClass());
  assertEquals(Text.class,job.getOutputValueClass());
  assertNull(job.getCombinerClass());
  assertEquals("Table",job.getConfiguration().get(TableInputFormat.INPUT_TABLE));
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInitTableMapperJob1() throws Exception {
  Configuration configuration=new Configuration();
  Job job=new Job(configuration,"tableName");
  TableMapReduceUtil.initTableMapperJob("Table",new Scan(),Import.Importer.class,Text.class,Text.class,job,false,WALInputFormat.class);
  assertEquals(WALInputFormat.class,job.getInputFormatClass());
  assertEquals(Import.Importer.class,job.getMapperClass());
  assertEquals(LongWritable.class,job.getOutputKeyClass());
  assertEquals(Text.class,job.getOutputValueClass());
  assertNull(job.getCombinerClass());
  assertEquals("Table",job.getConfiguration().get(TableInputFormat.INPUT_TABLE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.master.TestAssignmentManagerOnCluster </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This tests region open failed
 */
@Test(timeout=60000) public void testOpenFailed() throws Exception {
  TableName table=TableName.valueOf("testOpenFailed");
  try {
    HTableDescriptor desc=new HTableDescriptor(table);
    desc.addFamily(new HColumnDescriptor(FAMILY));
    admin.createTable(desc);
    Table meta=TEST_UTIL.getConnection().getTable(TableName.META_TABLE_NAME);
    HRegionInfo hri=new HRegionInfo(desc.getTableName(),Bytes.toBytes("A"),Bytes.toBytes("Z"));
    MetaTableAccessor.addRegionToMeta(meta,hri);
    MyLoadBalancer.controledRegion=hri.getEncodedName();
    HMaster master=TEST_UTIL.getHBaseCluster().getMaster();
    master.assignRegion(hri);
    AssignmentManager am=master.getAssignmentManager();
    assertFalse(am.waitForAssignment(hri));
    RegionState state=am.getRegionStates().getRegionState(hri);
    assertEquals(RegionState.State.FAILED_OPEN,state.getState());
    assertNull(state.getServerName());
    MyLoadBalancer.controledRegion=null;
    master.assignRegion(hri);
    assertTrue(am.waitForAssignment(hri));
    ServerName serverName=master.getAssignmentManager().getRegionStates().getRegionServerOfRegion(hri);
    TEST_UTIL.assertRegionOnServer(hri,serverName,200);
  }
  finally {
    MyLoadBalancer.controledRegion=null;
    TEST_UTIL.deleteTable(table);
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This tests region open failure which is not recoverable
 */
@Test(timeout=60000) public void testOpenFailedUnrecoverable() throws Exception {
  TableName table=TableName.valueOf("testOpenFailedUnrecoverable");
  try {
    HTableDescriptor desc=new HTableDescriptor(table);
    desc.addFamily(new HColumnDescriptor(FAMILY));
    admin.createTable(desc);
    Table meta=TEST_UTIL.getConnection().getTable(TableName.META_TABLE_NAME);
    HRegionInfo hri=new HRegionInfo(desc.getTableName(),Bytes.toBytes("A"),Bytes.toBytes("Z"));
    MetaTableAccessor.addRegionToMeta(meta,hri);
    FileSystem fs=FileSystem.get(conf);
    Path tableDir=FSUtils.getTableDir(FSUtils.getRootDir(conf),table);
    Path regionDir=new Path(tableDir,hri.getEncodedName());
    fs.create(regionDir,true);
    HMaster master=TEST_UTIL.getHBaseCluster().getMaster();
    master.assignRegion(hri);
    AssignmentManager am=master.getAssignmentManager();
    assertFalse(am.waitForAssignment(hri));
    RegionState state=am.getRegionStates().getRegionState(hri);
    assertEquals(RegionState.State.FAILED_OPEN,state.getState());
    assertNotNull(state.getServerName());
    fs.delete(regionDir,true);
    master.assignRegion(hri);
    assertTrue(am.waitForAssignment(hri));
    ServerName serverName=master.getAssignmentManager().getRegionStates().getRegionServerOfRegion(hri);
    TEST_UTIL.assertRegionOnServer(hri,serverName,200);
  }
  finally {
    TEST_UTIL.deleteTable(table);
  }
}

</code></pre>

<br>
<pre class="type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test SSH waiting for extra region server for assignment
 */
@Test(timeout=300000) public void testSSHWaitForServerToAssignRegion() throws Exception {
  TableName table=TableName.valueOf("testSSHWaitForServerToAssignRegion");
  MiniHBaseCluster cluster=TEST_UTIL.getHBaseCluster();
  boolean startAServer=false;
  try {
    HTableDescriptor desc=new HTableDescriptor(table);
    desc.addFamily(new HColumnDescriptor(FAMILY));
    admin.createTable(desc);
    HMaster master=cluster.getMaster();
    final ServerManager serverManager=master.getServerManager();
    MyLoadBalancer.countRegionServers=Integer.valueOf(serverManager.countOfRegionServers());
    HRegionServer rs=TEST_UTIL.getRSForFirstRegionInTable(table);
    assertNotNull("First region should be assigned",rs);
    final ServerName serverName=rs.getServerName();
    int counter=MyLoadBalancer.counter.get() + 5;
    cluster.killRegionServer(serverName);
    startAServer=true;
    cluster.waitForRegionServerToStop(serverName,-1);
    while (counter > MyLoadBalancer.counter.get()) {
      Thread.sleep(1000);
    }
    cluster.startRegionServer();
    startAServer=false;
    TEST_UTIL.waitFor(120000,1000,new Waiter.Predicate<Exception>(){
      @Override public boolean evaluate() throws Exception {
        return serverManager.isServerDead(serverName) && !serverManager.areDeadServersInProgress();
      }
    }
);
    TEST_UTIL.waitUntilNoRegionsInTransition(300000);
    rs=TEST_UTIL.getRSForFirstRegionInTable(table);
    assertTrue("First region should be re-assigned to a different server",rs != null && !serverName.equals(rs.getServerName()));
  }
  finally {
    MyLoadBalancer.countRegionServers=null;
    TEST_UTIL.deleteTable(table);
    if (startAServer) {
      cluster.startRegionServer();
    }
  }
}

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This tests region close racing with open
 */
@Test(timeout=60000) public void testOpenCloseRacing() throws Exception {
  TableName table=TableName.valueOf("testOpenCloseRacing");
  try {
    HTableDescriptor desc=new HTableDescriptor(table);
    desc.addFamily(new HColumnDescriptor(FAMILY));
    admin.createTable(desc);
    Table meta=TEST_UTIL.getConnection().getTable(TableName.META_TABLE_NAME);
    HRegionInfo hri=new HRegionInfo(desc.getTableName(),Bytes.toBytes("A"),Bytes.toBytes("Z"));
    MetaTableAccessor.addRegionToMeta(meta,hri);
    meta.close();
    MyRegionObserver.postOpenEnabled.set(true);
    MyRegionObserver.postOpenCalled=false;
    HMaster master=TEST_UTIL.getHBaseCluster().getMaster();
    master.assignRegion(hri);
    long end=EnvironmentEdgeManager.currentTime() + 20000;
    while (!MyRegionObserver.postOpenCalled) {
      assertFalse("Timed out waiting for postOpen to be called",EnvironmentEdgeManager.currentTime() > end);
      Thread.sleep(300);
    }
    AssignmentManager am=master.getAssignmentManager();
    am.unassign(hri);
    RegionState state=am.getRegionStates().getRegionState(hri);
    ServerName oldServerName=state.getServerName();
    assertTrue(state.isOpening() && oldServerName != null);
    MyRegionObserver.postOpenEnabled.set(false);
    ServerName destServerName=null;
    int numRS=TEST_UTIL.getHBaseCluster().getLiveRegionServerThreads().size();
    for (int i=0; i < numRS; i++) {
      HRegionServer destServer=TEST_UTIL.getHBaseCluster().getRegionServer(i);
      if (!destServer.getServerName().equals(oldServerName)) {
        destServerName=destServer.getServerName();
        break;
      }
    }
    assertNotNull(destServerName);
    assertFalse("Region should be assigned on a new region server",oldServerName.equals(destServerName));
    List<HRegionInfo> regions=new ArrayList<HRegionInfo>();
    regions.add(hri);
    am.assign(destServerName,regions);
    am.waitOnRegionToClearRegionsInTransition(hri);
    assertTrue(am.waitForAssignment(hri));
    ServerName serverName=master.getAssignmentManager().getRegionStates().getRegionServerOfRegion(hri);
    TEST_UTIL.assertRegionOnlyOnServer(hri,serverName,6000);
  }
  finally {
    MyRegionObserver.postOpenEnabled.set(false);
    TEST_UTIL.deleteTable(table);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.master.TestDeadServer </h4><pre class="type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsDead(){
  DeadServer ds=new DeadServer();
  ds.add(hostname123);
  ds.notifyServer(hostname123);
  assertTrue(ds.areDeadServersInProgress());
  ds.finish(hostname123);
  assertFalse(ds.areDeadServersInProgress());
  ds.add(hostname1234);
  ds.notifyServer(hostname1234);
  assertTrue(ds.areDeadServersInProgress());
  ds.finish(hostname1234);
  assertFalse(ds.areDeadServersInProgress());
  ds.add(hostname12345);
  ds.notifyServer(hostname12345);
  assertTrue(ds.areDeadServersInProgress());
  ds.finish(hostname12345);
  assertFalse(ds.areDeadServersInProgress());
  final ServerName deadServer=ServerName.valueOf("127.0.0.1",9090,112321L);
  assertFalse(ds.cleanPreviousInstance(deadServer));
  ds.add(deadServer);
  assertTrue(ds.isDeadServer(deadServer));
  Set<ServerName> deadServerNames=ds.copyServerNames();
  for (  ServerName eachDeadServer : deadServerNames) {
    Assert.assertNotNull(ds.getTimeOfDeath(eachDeadServer));
  }
  final ServerName deadServerHostComingAlive=ServerName.valueOf("127.0.0.1",9090,223341L);
  assertTrue(ds.cleanPreviousInstance(deadServerHostComingAlive));
  assertFalse(ds.isDeadServer(deadServer));
  assertFalse(ds.cleanPreviousInstance(deadServerHostComingAlive));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.master.TestGetLastFlushedSequenceId </h4><pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws IOException, InterruptedException {
  testUtil.getHBaseAdmin().createNamespace(NamespaceDescriptor.create(tableName.getNamespaceAsString()).build());
  Table table=testUtil.createTable(tableName,families);
  table.put(new Put(Bytes.toBytes("k")).addColumn(family,Bytes.toBytes("q"),Bytes.toBytes("v")));
  MiniHBaseCluster cluster=testUtil.getMiniHBaseCluster();
  List<JVMClusterUtil.RegionServerThread> rsts=cluster.getRegionServerThreads();
  Region region=null;
  for (int i=0; i < cluster.getRegionServerThreads().size(); i++) {
    HRegionServer hrs=rsts.get(i).getRegionServer();
    for (    Region r : hrs.getOnlineRegions(tableName)) {
      region=r;
      break;
    }
  }
  assertNotNull(region);
  Thread.sleep(2000);
  RegionStoreSequenceIds ids=testUtil.getHBaseCluster().getMaster().getLastSequenceId(region.getRegionInfo().getEncodedNameAsBytes());
  assertEquals(HConstants.NO_SEQNUM,ids.getLastFlushedSequenceId());
  long storeSequenceId=ids.getStoreSequenceId(0).getSequenceId();
  assertTrue(storeSequenceId > 0);
  testUtil.getHBaseAdmin().flush(tableName);
  Thread.sleep(2000);
  ids=testUtil.getHBaseCluster().getMaster().getLastSequenceId(region.getRegionInfo().getEncodedNameAsBytes());
  assertTrue(ids.getLastFlushedSequenceId() + " > " + storeSequenceId,ids.getLastFlushedSequenceId() > storeSequenceId);
  assertEquals(ids.getLastFlushedSequenceId(),ids.getStoreSequenceId(0).getSequenceId());
  table.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.master.TestMasterFailover </h4><pre class="type-4 type-9 type-10 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Simple test of master failover.
 * <p>
 * Starts with three masters.  Kills a backup master.  Then kills the active
 * master.  Ensures the final master becomes active and we can still contact
 * the cluster.
 * @throws Exception
 */
@Test(timeout=240000) public void testSimpleMasterFailover() throws Exception {
  final int NUM_MASTERS=3;
  final int NUM_RS=3;
  HBaseTestingUtility TEST_UTIL=new HBaseTestingUtility();
  TEST_UTIL.startMiniCluster(NUM_MASTERS,NUM_RS);
  MiniHBaseCluster cluster=TEST_UTIL.getHBaseCluster();
  List<MasterThread> masterThreads=cluster.getMasterThreads();
  for (  MasterThread mt : masterThreads) {
    assertTrue(mt.isAlive());
  }
  int numActive=0;
  int activeIndex=-1;
  ServerName activeName=null;
  HMaster active=null;
  for (int i=0; i < masterThreads.size(); i++) {
    if (masterThreads.get(i).getMaster().isActiveMaster()) {
      numActive++;
      activeIndex=i;
      active=masterThreads.get(activeIndex).getMaster();
      activeName=active.getServerName();
    }
  }
  assertEquals(1,numActive);
  assertEquals(NUM_MASTERS,masterThreads.size());
  LOG.info("Active master " + activeName);
  assertNotNull(active);
  ClusterStatus status=active.getClusterStatus();
  assertTrue(status.getMaster().equals(activeName));
  assertEquals(2,status.getBackupMastersSize());
  assertEquals(2,status.getBackupMasters().size());
  int backupIndex=(activeIndex == 0 ? 1 : activeIndex - 1);
  HMaster master=cluster.getMaster(backupIndex);
  LOG.debug("\n\nStopping a backup master: " + master.getServerName() + "\n");
  cluster.stopMaster(backupIndex,false);
  cluster.waitOnMaster(backupIndex);
  for (int i=0; i < masterThreads.size(); i++) {
    if (masterThreads.get(i).getMaster().isActiveMaster()) {
      assertTrue(activeName.equals(masterThreads.get(i).getMaster().getServerName()));
      activeIndex=i;
      active=masterThreads.get(activeIndex).getMaster();
    }
  }
  assertEquals(1,numActive);
  assertEquals(2,masterThreads.size());
  int rsCount=masterThreads.get(activeIndex).getMaster().getClusterStatus().getServersSize();
  LOG.info("Active master " + active.getServerName() + " managing "+ rsCount+ " regions servers");
  assertEquals(4,rsCount);
  assertNotNull(active);
  status=active.getClusterStatus();
  assertTrue(status.getMaster().equals(activeName));
  assertEquals(1,status.getBackupMastersSize());
  assertEquals(1,status.getBackupMasters().size());
  LOG.debug("\n\nStopping the active master " + active.getServerName() + "\n");
  cluster.stopMaster(activeIndex,false);
  cluster.waitOnMaster(activeIndex);
  assertTrue(cluster.waitForActiveAndReadyMaster());
  LOG.debug("\n\nVerifying backup master is now active\n");
  assertEquals(1,masterThreads.size());
  active=masterThreads.get(0).getMaster();
  assertNotNull(active);
  status=active.getClusterStatus();
  ServerName mastername=status.getMaster();
  assertTrue(mastername.equals(active.getServerName()));
  assertTrue(active.isActiveMaster());
  assertEquals(0,status.getBackupMastersSize());
  assertEquals(0,status.getBackupMasters().size());
  int rss=status.getServersSize();
  LOG.info("Active master " + mastername.getServerName() + " managing "+ rss+ " region servers");
  assertEquals(4,rss);
  TEST_UTIL.shutdownMiniCluster();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.master.TestMasterShutdown </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Simple test of shutdown.
 * <p>
 * Starts with three masters.  Tells the active master to shutdown the cluster.
 * Verifies that all masters are properly shutdown.
 * @throws Exception
 */
@Test(timeout=120000) public void testMasterShutdown() throws Exception {
  final int NUM_MASTERS=3;
  final int NUM_RS=3;
  Configuration conf=HBaseConfiguration.create();
  HBaseTestingUtility htu=new HBaseTestingUtility(conf);
  htu.startMiniCluster(NUM_MASTERS,NUM_RS);
  MiniHBaseCluster cluster=htu.getHBaseCluster();
  List<MasterThread> masterThreads=cluster.getMasterThreads();
  for (  MasterThread mt : masterThreads) {
    assertTrue(mt.isAlive());
  }
  HMaster active=null;
  for (int i=0; i < masterThreads.size(); i++) {
    if (masterThreads.get(i).getMaster().isActiveMaster()) {
      active=masterThreads.get(i).getMaster();
      break;
    }
  }
  assertNotNull(active);
  ClusterStatus status=active.getClusterStatus();
  assertEquals(2,status.getBackupMastersSize());
  assertEquals(2,status.getBackupMasters().size());
  active.shutdown();
  for (int i=NUM_MASTERS - 1; i >= 0; --i) {
    cluster.waitOnMaster(i);
  }
  assertEquals(0,masterThreads.size());
  htu.shutdownMiniCluster();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.master.balancer.TestBaseLoadBalancer </h4><pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests immediate assignment.
 * Invariant is that all regions have an assignment.
 * @throws Exception
 */
@Test(timeout=30000) public void testImmediateAssignment() throws Exception {
  List<ServerName> tmp=getListOfServerNames(randomServers(1,0));
  tmp.add(master);
  ServerName sn=loadBalancer.randomAssignment(HRegionInfo.FIRST_META_REGIONINFO,tmp);
  assertEquals(master,sn);
  HRegionInfo hri=randomRegions(1,-1).get(0);
  sn=loadBalancer.randomAssignment(hri,tmp);
  assertNotEquals(master,sn);
  tmp=new ArrayList<ServerName>();
  tmp.add(master);
  sn=loadBalancer.randomAssignment(hri,tmp);
  assertNull("Should not assign user regions on master",sn);
  for (  int[] mock : regionsAndServersMocks) {
    LOG.debug("testImmediateAssignment with " + mock[0] + " regions and "+ mock[1]+ " servers");
    List<HRegionInfo> regions=randomRegions(mock[0]);
    List<ServerAndLoad> servers=randomServers(mock[1],0);
    List<ServerName> list=getListOfServerNames(servers);
    Map<HRegionInfo,ServerName> assignments=loadBalancer.immediateAssignment(regions,list);
    assertImmediateAssignment(regions,list,assignments);
    returnRegions(regions);
    returnServers(list);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.master.balancer.TestStochasticLoadBalancer </h4><pre class="type-4 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test(timeout=60000) public void testLosingRs() throws Exception {
  int numNodes=3;
  int numRegions=20;
  int numRegionsPerServer=3;
  int replication=1;
  int numTables=2;
  Map<ServerName,List<HRegionInfo>> serverMap=createServerMap(numNodes,numRegions,numRegionsPerServer,replication,numTables);
  List<ServerAndLoad> list=convertToList(serverMap);
  List<RegionPlan> plans=loadBalancer.balanceCluster(serverMap);
  assertNotNull(plans);
  List<ServerAndLoad> balancedCluster=reconcile(list,plans,serverMap);
  assertClusterAsBalanced(balancedCluster);
  ServerName sn=serverMap.keySet().toArray(new ServerName[serverMap.size()])[0];
  ServerName deadSn=ServerName.valueOf(sn.getHostname(),sn.getPort(),sn.getStartcode() - 100);
  serverMap.put(deadSn,new ArrayList<HRegionInfo>(0));
  plans=loadBalancer.balanceCluster(serverMap);
  assertNull(plans);
}

</code></pre>

<br>
<pre class="type-4 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
/** 
 * Test the load balancing algorithm.
 * Invariant is that all servers should be hosting either floor(average) or
 * ceiling(average)
 * @throws Exception
 */
@Test public void testBalanceCluster() throws Exception {
  for (  int[] mockCluster : clusterStateMocks) {
    Map<ServerName,List<HRegionInfo>> servers=mockClusterServers(mockCluster);
    List<ServerAndLoad> list=convertToList(servers);
    LOG.info("Mock Cluster : " + printMock(list) + " "+ printStats(list));
    List<RegionPlan> plans=loadBalancer.balanceCluster(servers);
    List<ServerAndLoad> balancedCluster=reconcile(list,plans,servers);
    LOG.info("Mock Balance : " + printMock(balancedCluster));
    assertClusterAsBalanced(balancedCluster);
    List<RegionPlan> secondPlans=loadBalancer.balanceCluster(servers);
    assertNull(secondPlans);
    for (    Map.Entry<ServerName,List<HRegionInfo>> entry : servers.entrySet()) {
      returnRegions(entry.getValue());
      returnServer(entry.getKey());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.master.procedure.TestCreateNamespaceProcedure </h4><pre class="type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test(timeout=60000) public void testRollbackAndDoubleExecution() throws Exception {
  final NamespaceDescriptor nsd=NamespaceDescriptor.create("testRollbackAndDoubleExecution").build();
  final ProcedureExecutor<MasterProcedureEnv> procExec=getMasterProcedureExecutor();
  ProcedureTestingUtility.waitNoProcedureRunning(procExec);
  ProcedureTestingUtility.setKillAndToggleBeforeStoreUpdate(procExec,true);
  long procId=procExec.submitProcedure(new CreateNamespaceProcedure(procExec.getEnvironment(),nsd),nonceGroup,nonce);
  int numberOfSteps=CreateNamespaceState.values().length - 2;
  MasterProcedureTestingUtility.testRollbackAndDoubleExecution(procExec,procId,numberOfSteps,CreateNamespaceState.values());
  try {
    NamespaceDescriptor nsDescriptor=UTIL.getHBaseAdmin().getNamespaceDescriptor(nsd.getName());
    assertNull(nsDescriptor);
  }
 catch (  NamespaceNotFoundException nsnfe) {
    LOG.info("The namespace " + nsd.getName() + " is not created.");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.master.procedure.TestDeleteNamespaceProcedure </h4><pre class="type-4 type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test(timeout=60000) public void testRollbackAndDoubleExecution() throws Exception {
  final String namespaceName="testRollbackAndDoubleExecution";
  final ProcedureExecutor<MasterProcedureEnv> procExec=getMasterProcedureExecutor();
  createNamespaceForTesting(namespaceName);
  ProcedureTestingUtility.waitNoProcedureRunning(procExec);
  ProcedureTestingUtility.setKillAndToggleBeforeStoreUpdate(procExec,true);
  long procId=procExec.submitProcedure(new DeleteNamespaceProcedure(procExec.getEnvironment(),namespaceName),nonceGroup,nonce);
  int numberOfSteps=DeleteNamespaceState.values().length - 2;
  MasterProcedureTestingUtility.testRollbackAndDoubleExecution(procExec,procId,numberOfSteps,DeleteNamespaceState.values());
  NamespaceDescriptor createdNsDescriptor=UTIL.getHBaseAdmin().getNamespaceDescriptor(namespaceName);
  assertNotNull(createdNsDescriptor);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.master.procedure.TestModifyNamespaceProcedure </h4><pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testModifyNamespace() throws Exception {
  final NamespaceDescriptor nsd=NamespaceDescriptor.create("testModifyNamespace").build();
  final String nsKey1="hbase.namespace.quota.maxregions";
  final String nsValue1before="1111";
  final String nsValue1after="9999";
  final String nsKey2="hbase.namespace.quota.maxtables";
  final String nsValue2="10";
  final ProcedureExecutor<MasterProcedureEnv> procExec=getMasterProcedureExecutor();
  nsd.setConfiguration(nsKey1,nsValue1before);
  createNamespaceForTesting(nsd);
  NamespaceDescriptor currentNsDescriptor=UTIL.getHBaseAdmin().getNamespaceDescriptor(nsd.getName());
  assertEquals(currentNsDescriptor.getConfigurationValue(nsKey1),nsValue1before);
  assertNull(currentNsDescriptor.getConfigurationValue(nsKey2));
  nsd.setConfiguration(nsKey1,nsValue1after);
  nsd.setConfiguration(nsKey2,nsValue2);
  long procId1=procExec.submitProcedure(new ModifyNamespaceProcedure(procExec.getEnvironment(),nsd),nonceGroup,nonce);
  ProcedureTestingUtility.waitProcedure(procExec,procId1);
  ProcedureTestingUtility.assertProcNotFailed(procExec,procId1);
  currentNsDescriptor=UTIL.getHBaseAdmin().getNamespaceDescriptor(nsd.getName());
  assertEquals(nsd.getConfigurationValue(nsKey1),nsValue1after);
  assertEquals(currentNsDescriptor.getConfigurationValue(nsKey2),nsValue2);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testModifyNonExistNamespace() throws Exception {
  final String namespaceName="testModifyNonExistNamespace";
  final ProcedureExecutor<MasterProcedureEnv> procExec=getMasterProcedureExecutor();
  try {
    NamespaceDescriptor nsDescriptor=UTIL.getHBaseAdmin().getNamespaceDescriptor(namespaceName);
    assertNull(nsDescriptor);
  }
 catch (  NamespaceNotFoundException nsnfe) {
    LOG.debug("The namespace " + namespaceName + " does not exist.  This is expected.");
  }
  final NamespaceDescriptor nsd=NamespaceDescriptor.create(namespaceName).build();
  long procId=procExec.submitProcedure(new ModifyNamespaceProcedure(procExec.getEnvironment(),nsd),nonceGroup,nonce);
  ProcedureTestingUtility.waitProcedure(procExec,procId);
  ProcedureInfo result=procExec.getResult(procId);
  assertTrue(result.isFailed());
  LOG.debug("modify namespace failed with exception: " + result.getExceptionFullMessage());
  assertTrue(ProcedureTestingUtility.getExceptionCause(result) instanceof NamespaceNotFoundException);
}

</code></pre>

<br>
<pre class="type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test(timeout=60000) public void testRollbackAndDoubleExecution() throws Exception {
  final NamespaceDescriptor nsd=NamespaceDescriptor.create("testRollbackAndDoubleExecution").build();
  final String nsKey="foo";
  final String nsValue="bar";
  final ProcedureExecutor<MasterProcedureEnv> procExec=getMasterProcedureExecutor();
  createNamespaceForTesting(nsd);
  ProcedureTestingUtility.waitNoProcedureRunning(procExec);
  ProcedureTestingUtility.setKillAndToggleBeforeStoreUpdate(procExec,true);
  nsd.setConfiguration(nsKey,nsValue);
  long procId=procExec.submitProcedure(new ModifyNamespaceProcedure(procExec.getEnvironment(),nsd),nonceGroup,nonce);
  int numberOfSteps=ModifyNamespaceState.values().length - 2;
  MasterProcedureTestingUtility.testRollbackAndDoubleExecution(procExec,procId,numberOfSteps,ModifyNamespaceState.values());
  NamespaceDescriptor currentNsDescriptor=UTIL.getHBaseAdmin().getNamespaceDescriptor(nsd.getName());
  assertNull(currentNsDescriptor.getConfigurationValue(nsKey));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.metrics.TestBaseSourceImpl </h4><pre class="type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testRemoveMetric() throws Exception {
  bmsi.setGauge("testrmgauge",100);
  bmsi.removeMetric("testrmgauge");
  assertNull(bmsi.metricsRegistry.get("testrmgauge"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.mob.TestCachedMobFile </h4><pre class="type-4 type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testReadKeyValue() throws Exception {
  Path testDir=TEST_UTIL.getDataTestDir();
  FileSystem fs=testDir.getFileSystem(conf);
  HFileContext meta=new HFileContextBuilder().withBlockSize(8 * 1024).build();
  StoreFile.Writer writer=new StoreFile.WriterBuilder(conf,cacheConf,fs).withOutputDir(testDir).withFileContext(meta).build();
  String caseName=getName();
  MobTestUtil.writeStoreFile(writer,caseName);
  CachedMobFile cachedMobFile=CachedMobFile.create(fs,writer.getPath(),conf,cacheConf);
  byte[] family=Bytes.toBytes(caseName);
  byte[] qualify=Bytes.toBytes(caseName);
  byte[] startKey=Bytes.toBytes("aa");
  KeyValue expectedKey=new KeyValue(startKey,family,qualify,Long.MAX_VALUE,Type.Put,startKey);
  KeyValue seekKey=expectedKey.createKeyOnly(false);
  Cell cell=cachedMobFile.readCell(seekKey,false);
  MobTestUtil.assertCellEquals(expectedKey,cell);
  byte[] endKey=Bytes.toBytes("zz");
  expectedKey=new KeyValue(endKey,family,qualify,Long.MAX_VALUE,Type.Put,endKey);
  seekKey=expectedKey.createKeyOnly(false);
  cell=cachedMobFile.readCell(seekKey,false);
  MobTestUtil.assertCellEquals(expectedKey,cell);
  byte[] randomKey=Bytes.toBytes(MobTestUtil.generateRandomString(2));
  expectedKey=new KeyValue(randomKey,family,qualify,Long.MAX_VALUE,Type.Put,randomKey);
  seekKey=expectedKey.createKeyOnly(false);
  cell=cachedMobFile.readCell(seekKey,false);
  MobTestUtil.assertCellEquals(expectedKey,cell);
  byte[] lowerKey=Bytes.toBytes("a1");
  expectedKey=new KeyValue(startKey,family,qualify,Long.MAX_VALUE,Type.Put,startKey);
  seekKey=new KeyValue(lowerKey,family,qualify,Long.MAX_VALUE,Type.Put,lowerKey);
  cell=cachedMobFile.readCell(seekKey,false);
  MobTestUtil.assertCellEquals(expectedKey,cell);
  byte[] upperKey=Bytes.toBytes("z{");
  seekKey=new KeyValue(upperKey,family,qualify,Long.MAX_VALUE,Type.Put,upperKey);
  cell=cachedMobFile.readCell(seekKey,false);
  Assert.assertNull(cell);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.mob.TestMobFile </h4><pre class="type-4 type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetScanner() throws Exception {
  Path testDir=TEST_UTIL.getDataTestDir();
  FileSystem fs=testDir.getFileSystem(conf);
  HFileContext meta=new HFileContextBuilder().withBlockSize(8 * 1024).build();
  StoreFile.Writer writer=new StoreFile.WriterBuilder(conf,cacheConf,fs).withOutputDir(testDir).withFileContext(meta).build();
  MobTestUtil.writeStoreFile(writer,getName());
  MobFile mobFile=new MobFile(new StoreFile(fs,writer.getPath(),conf,cacheConf,BloomType.NONE));
  assertNotNull(mobFile.getScanner());
  assertTrue(mobFile.getScanner() instanceof StoreFileScanner);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testReadKeyValue() throws Exception {
  Path testDir=TEST_UTIL.getDataTestDir();
  FileSystem fs=testDir.getFileSystem(conf);
  HFileContext meta=new HFileContextBuilder().withBlockSize(8 * 1024).build();
  StoreFile.Writer writer=new StoreFile.WriterBuilder(conf,cacheConf,fs).withOutputDir(testDir).withFileContext(meta).build();
  String caseName=getName();
  MobTestUtil.writeStoreFile(writer,caseName);
  MobFile mobFile=new MobFile(new StoreFile(fs,writer.getPath(),conf,cacheConf,BloomType.NONE));
  byte[] family=Bytes.toBytes(caseName);
  byte[] qualify=Bytes.toBytes(caseName);
  byte[] startKey=Bytes.toBytes("aa");
  KeyValue expectedKey=new KeyValue(startKey,family,qualify,Long.MAX_VALUE,Type.Put,startKey);
  KeyValue seekKey=expectedKey.createKeyOnly(false);
  Cell cell=mobFile.readCell(seekKey,false);
  MobTestUtil.assertCellEquals(expectedKey,cell);
  byte[] endKey=Bytes.toBytes("zz");
  expectedKey=new KeyValue(endKey,family,qualify,Long.MAX_VALUE,Type.Put,endKey);
  seekKey=expectedKey.createKeyOnly(false);
  cell=mobFile.readCell(seekKey,false);
  MobTestUtil.assertCellEquals(expectedKey,cell);
  byte[] randomKey=Bytes.toBytes(MobTestUtil.generateRandomString(2));
  expectedKey=new KeyValue(randomKey,family,qualify,Long.MAX_VALUE,Type.Put,randomKey);
  seekKey=expectedKey.createKeyOnly(false);
  cell=mobFile.readCell(seekKey,false);
  MobTestUtil.assertCellEquals(expectedKey,cell);
  byte[] lowerKey=Bytes.toBytes("a1");
  expectedKey=new KeyValue(startKey,family,qualify,Long.MAX_VALUE,Type.Put,startKey);
  seekKey=new KeyValue(lowerKey,family,qualify,Long.MAX_VALUE,Type.Put,lowerKey);
  cell=mobFile.readCell(seekKey,false);
  MobTestUtil.assertCellEquals(expectedKey,cell);
  byte[] upperKey=Bytes.toBytes("z{");
  seekKey=new KeyValue(upperKey,family,qualify,Long.MAX_VALUE,Type.Put,upperKey);
  cell=mobFile.readCell(seekKey,false);
  assertNull(cell);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.mob.TestMobFileCache </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMobFileCache() throws Exception {
  FileSystem fs=FileSystem.get(conf);
  conf.set(MobConstants.MOB_FILE_CACHE_SIZE_KEY,TEST_CACHE_SIZE);
  mobFileCache=new MobFileCache(conf);
  Path file1Path=createMobStoreFile(FAMILY1);
  Path file2Path=createMobStoreFile(FAMILY2);
  Path file3Path=createMobStoreFile(FAMILY3);
  assertEquals(EXPECTED_CACHE_SIZE_ZERO,mobFileCache.getCacheSize());
  CachedMobFile cachedMobFile1=(CachedMobFile)mobFileCache.openFile(fs,file1Path,mobCacheConf);
  assertEquals(EXPECTED_CACHE_SIZE_ONE,mobFileCache.getCacheSize());
  assertNotNull(cachedMobFile1);
  assertEquals(EXPECTED_REFERENCE_TWO,cachedMobFile1.getReferenceCount());
  mobFileCache.evict();
  assertEquals(EXPECTED_CACHE_SIZE_ONE,mobFileCache.getCacheSize());
  assertEquals(EXPECTED_REFERENCE_TWO,cachedMobFile1.getReferenceCount());
  mobFileCache.evictFile(file1Path.getName());
  assertEquals(EXPECTED_CACHE_SIZE_ZERO,mobFileCache.getCacheSize());
  assertEquals(EXPECTED_REFERENCE_ONE,cachedMobFile1.getReferenceCount());
  cachedMobFile1.close();
  cachedMobFile1=(CachedMobFile)mobFileCache.openFile(fs,file1Path,mobCacheConf);
  assertEquals(EXPECTED_CACHE_SIZE_ONE,mobFileCache.getCacheSize());
  CachedMobFile cachedMobFile2=(CachedMobFile)mobFileCache.openFile(fs,file2Path,mobCacheConf);
  assertEquals(EXPECTED_CACHE_SIZE_TWO,mobFileCache.getCacheSize());
  CachedMobFile cachedMobFile3=(CachedMobFile)mobFileCache.openFile(fs,file3Path,mobCacheConf);
  assertEquals(EXPECTED_CACHE_SIZE_THREE,mobFileCache.getCacheSize());
  assertEquals(EXPECTED_REFERENCE_TWO,cachedMobFile1.getReferenceCount());
  assertEquals(EXPECTED_REFERENCE_TWO,cachedMobFile2.getReferenceCount());
  assertEquals(EXPECTED_REFERENCE_TWO,cachedMobFile3.getReferenceCount());
  mobFileCache.evict();
  assertEquals(EXPECTED_CACHE_SIZE_ONE,mobFileCache.getCacheSize());
  assertEquals(EXPECTED_REFERENCE_ONE,cachedMobFile1.getReferenceCount());
  assertEquals(EXPECTED_REFERENCE_ONE,cachedMobFile2.getReferenceCount());
  assertEquals(EXPECTED_REFERENCE_TWO,cachedMobFile3.getReferenceCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.namespace.TestNamespaceAuditor </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRestoreSnapshot() throws Exception {
  String nsp=prefix + "_testRestoreSnapshot";
  NamespaceDescriptor nspDesc=NamespaceDescriptor.create(nsp).addConfiguration(TableNamespaceManager.KEY_MAX_REGIONS,"10").build();
  ADMIN.createNamespace(nspDesc);
  assertNotNull("Namespace descriptor found null.",ADMIN.getNamespaceDescriptor(nsp));
  TableName tableName1=TableName.valueOf(nsp + TableName.NAMESPACE_DELIM + "table1");
  HTableDescriptor tableDescOne=new HTableDescriptor(tableName1);
  ADMIN.createTable(tableDescOne,Bytes.toBytes("AAA"),Bytes.toBytes("ZZZ"),4);
  NamespaceTableAndRegionInfo nstate=getNamespaceState(nsp);
  assertEquals("Intial region count should be 4.",4,nstate.getRegionCount());
  String snapshot="snapshot_testRestoreSnapshot";
  ADMIN.snapshot(snapshot,tableName1);
  List<HRegionInfo> regions=ADMIN.getTableRegions(tableName1);
  Collections.sort(regions);
  ADMIN.split(tableName1,Bytes.toBytes("JJJ"));
  Thread.sleep(2000);
  assertEquals("Total regions count should be 5.",5,nstate.getRegionCount());
  ADMIN.disableTable(tableName1);
  ADMIN.restoreSnapshot(snapshot);
  assertEquals("Total regions count should be 4 after restore.",4,nstate.getRegionCount());
  ADMIN.enableTable(tableName1);
  ADMIN.deleteSnapshot(snapshot);
}

</code></pre>

<br>
<pre class="type-7 type-13 type-17 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=QuotaExceededException.class) public void testCloneSnapshotQuotaExceed() throws Exception {
  String nsp=prefix + "_testTableQuotaExceedWithCloneSnapshot";
  NamespaceDescriptor nspDesc=NamespaceDescriptor.create(nsp).addConfiguration(TableNamespaceManager.KEY_MAX_TABLES,"1").build();
  ADMIN.createNamespace(nspDesc);
  assertNotNull("Namespace descriptor found null.",ADMIN.getNamespaceDescriptor(nsp));
  TableName tableName=TableName.valueOf(nsp + TableName.NAMESPACE_DELIM + "table1");
  TableName cloneTableName=TableName.valueOf(nsp + TableName.NAMESPACE_DELIM + "table2");
  HTableDescriptor tableDescOne=new HTableDescriptor(tableName);
  ADMIN.createTable(tableDescOne);
  String snapshot="snapshot_testTableQuotaExceedWithCloneSnapshot";
  ADMIN.snapshot(snapshot,tableName);
  ADMIN.cloneSnapshot(snapshot,cloneTableName);
  ADMIN.deleteSnapshot(snapshot);
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-17 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=QuotaExceededException.class) public void testExceedTableQuotaInNamespace() throws Exception {
  String nsp=prefix + "_testExceedTableQuotaInNamespace";
  NamespaceDescriptor nspDesc=NamespaceDescriptor.create(nsp).addConfiguration(TableNamespaceManager.KEY_MAX_TABLES,"1").build();
  ADMIN.createNamespace(nspDesc);
  assertNotNull("Namespace descriptor found null.",ADMIN.getNamespaceDescriptor(nsp));
  assertEquals(ADMIN.listNamespaceDescriptors().length,3);
  HTableDescriptor tableDescOne=new HTableDescriptor(TableName.valueOf(nsp + TableName.NAMESPACE_DELIM + "table1"));
  HTableDescriptor tableDescTwo=new HTableDescriptor(TableName.valueOf(nsp + TableName.NAMESPACE_DELIM + "table2"));
  ADMIN.createTable(tableDescOne);
  ADMIN.createTable(tableDescTwo,Bytes.toBytes("AAA"),Bytes.toBytes("ZZZ"),4);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCloneSnapshot() throws Exception {
  String nsp=prefix + "_testCloneSnapshot";
  NamespaceDescriptor nspDesc=NamespaceDescriptor.create(nsp).addConfiguration(TableNamespaceManager.KEY_MAX_TABLES,"2").addConfiguration(TableNamespaceManager.KEY_MAX_REGIONS,"20").build();
  ADMIN.createNamespace(nspDesc);
  assertNotNull("Namespace descriptor found null.",ADMIN.getNamespaceDescriptor(nsp));
  TableName tableName=TableName.valueOf(nsp + TableName.NAMESPACE_DELIM + "table1");
  TableName cloneTableName=TableName.valueOf(nsp + TableName.NAMESPACE_DELIM + "table2");
  HTableDescriptor tableDescOne=new HTableDescriptor(tableName);
  ADMIN.createTable(tableDescOne,Bytes.toBytes("AAA"),Bytes.toBytes("ZZZ"),4);
  String snapshot="snapshot_testCloneSnapshot";
  ADMIN.snapshot(snapshot,tableName);
  ADMIN.cloneSnapshot(snapshot,cloneTableName);
  int tableLength;
  try (RegionLocator locator=ADMIN.getConnection().getRegionLocator(tableName)){
    tableLength=locator.getStartKeys().length;
  }
   assertEquals(tableName.getNameAsString() + " should have four regions.",4,tableLength);
  try (RegionLocator locator=ADMIN.getConnection().getRegionLocator(cloneTableName)){
    tableLength=locator.getStartKeys().length;
  }
   assertEquals(cloneTableName.getNameAsString() + " should have four regions.",4,tableLength);
  NamespaceTableAndRegionInfo nstate=getNamespaceState(nsp);
  assertEquals("Total tables count should be 2.",2,nstate.getTables().size());
  assertEquals("Total regions count should be.",8,nstate.getRegionCount());
  ADMIN.deleteSnapshot(snapshot);
}

</code></pre>

<br>
<pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTableOperations() throws Exception {
  String nsp=prefix + "_np2";
  NamespaceDescriptor nspDesc=NamespaceDescriptor.create(nsp).addConfiguration(TableNamespaceManager.KEY_MAX_REGIONS,"5").addConfiguration(TableNamespaceManager.KEY_MAX_TABLES,"2").build();
  ADMIN.createNamespace(nspDesc);
  assertNotNull("Namespace descriptor found null.",ADMIN.getNamespaceDescriptor(nsp));
  assertEquals(ADMIN.listNamespaceDescriptors().length,3);
  HTableDescriptor tableDescOne=new HTableDescriptor(TableName.valueOf(nsp + TableName.NAMESPACE_DELIM + "table1"));
  HTableDescriptor tableDescTwo=new HTableDescriptor(TableName.valueOf(nsp + TableName.NAMESPACE_DELIM + "table2"));
  HTableDescriptor tableDescThree=new HTableDescriptor(TableName.valueOf(nsp + TableName.NAMESPACE_DELIM + "table3"));
  ADMIN.createTable(tableDescOne);
  boolean constraintViolated=false;
  try {
    ADMIN.createTable(tableDescTwo,Bytes.toBytes("AAA"),Bytes.toBytes("ZZZ"),5);
  }
 catch (  Exception exp) {
    assertTrue(exp instanceof IOException);
    constraintViolated=true;
  }
 finally {
    assertTrue("Constraint not violated for table " + tableDescTwo.getTableName(),constraintViolated);
  }
  ADMIN.createTable(tableDescTwo,Bytes.toBytes("AAA"),Bytes.toBytes("ZZZ"),4);
  NamespaceTableAndRegionInfo nspState=getQuotaManager().getState(nsp);
  assertNotNull(nspState);
  assertTrue(nspState.getTables().size() == 2);
  assertTrue(nspState.getRegionCount() == 5);
  constraintViolated=false;
  try {
    ADMIN.createTable(tableDescThree);
  }
 catch (  Exception exp) {
    assertTrue(exp instanceof IOException);
    constraintViolated=true;
  }
 finally {
    assertTrue("Constraint not violated for table " + tableDescThree.getTableName(),constraintViolated);
  }
}

</code></pre>

<br>
<pre class="type-4 type-11 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRestoreSnapshotQuotaExceed() throws Exception {
  String nsp=prefix + "_testRestoreSnapshotQuotaExceed";
  NamespaceDescriptor nspDesc=NamespaceDescriptor.create(nsp).addConfiguration(TableNamespaceManager.KEY_MAX_REGIONS,"10").build();
  ADMIN.createNamespace(nspDesc);
  NamespaceDescriptor ndesc=ADMIN.getNamespaceDescriptor(nsp);
  assertNotNull("Namespace descriptor found null.",ndesc);
  TableName tableName1=TableName.valueOf(nsp + TableName.NAMESPACE_DELIM + "table1");
  HTableDescriptor tableDescOne=new HTableDescriptor(tableName1);
  ADMIN.createTable(tableDescOne,Bytes.toBytes("AAA"),Bytes.toBytes("ZZZ"),4);
  NamespaceTableAndRegionInfo nstate=getNamespaceState(nsp);
  assertEquals("Intial region count should be 4.",4,nstate.getRegionCount());
  String snapshot="snapshot_testRestoreSnapshotQuotaExceed";
  ADMIN.snapshot(snapshot,tableName1);
  List<HRegionInfo> regions=ADMIN.getTableRegions(tableName1);
  Collections.sort(regions);
  ADMIN.split(tableName1,Bytes.toBytes("JJJ"));
  Thread.sleep(2000);
  assertEquals("Total regions count should be 5.",5,nstate.getRegionCount());
  ndesc.setConfiguration(TableNamespaceManager.KEY_MAX_REGIONS,"2");
  ADMIN.modifyNamespace(ndesc);
  ADMIN.disableTable(tableName1);
  try {
    ADMIN.restoreSnapshot(snapshot);
    fail("Region quota is exceeded so QuotaExceededException should be thrown but HBaseAdmin" + " wraps IOException into RestoreSnapshotException");
  }
 catch (  RestoreSnapshotException ignore) {
  }
  ADMIN.enableTable(tableName1);
  ADMIN.deleteSnapshot(snapshot);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteTable() throws Exception {
  String namespace=prefix + "_dummy";
  NamespaceDescriptor nspDesc=NamespaceDescriptor.create(namespace).addConfiguration(TableNamespaceManager.KEY_MAX_REGIONS,"100").addConfiguration(TableNamespaceManager.KEY_MAX_TABLES,"3").build();
  ADMIN.createNamespace(nspDesc);
  assertNotNull("Namespace descriptor found null.",ADMIN.getNamespaceDescriptor(namespace));
  NamespaceTableAndRegionInfo stateInfo=getNamespaceState(nspDesc.getName());
  assertNotNull("Namespace state found null for " + namespace,stateInfo);
  HTableDescriptor tableDescOne=new HTableDescriptor(TableName.valueOf(namespace + TableName.NAMESPACE_DELIM + "table1"));
  HTableDescriptor tableDescTwo=new HTableDescriptor(TableName.valueOf(namespace + TableName.NAMESPACE_DELIM + "table2"));
  ADMIN.createTable(tableDescOne);
  ADMIN.createTable(tableDescTwo,Bytes.toBytes("AAA"),Bytes.toBytes("ZZZ"),5);
  stateInfo=getNamespaceState(nspDesc.getName());
  assertNotNull("Namespace state found to be null.",stateInfo);
  assertEquals(2,stateInfo.getTables().size());
  assertEquals(5,stateInfo.getRegionCountOfTable(tableDescTwo.getTableName()));
  assertEquals(6,stateInfo.getRegionCount());
  ADMIN.disableTable(tableDescOne.getTableName());
  deleteTable(tableDescOne.getTableName());
  stateInfo=getNamespaceState(nspDesc.getName());
  assertNotNull("Namespace state found to be null.",stateInfo);
  assertEquals(5,stateInfo.getRegionCount());
  assertEquals(1,stateInfo.getTables().size());
  ADMIN.disableTable(tableDescTwo.getTableName());
  deleteTable(tableDescTwo.getTableName());
  ADMIN.deleteNamespace(namespace);
  stateInfo=getNamespaceState(namespace);
  assertNull("Namespace state not found to be null.",stateInfo);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegionOperations() throws Exception {
  String nsp1=prefix + "_regiontest";
  NamespaceDescriptor nspDesc=NamespaceDescriptor.create(nsp1).addConfiguration(TableNamespaceManager.KEY_MAX_REGIONS,"2").addConfiguration(TableNamespaceManager.KEY_MAX_TABLES,"2").build();
  ADMIN.createNamespace(nspDesc);
  boolean constraintViolated=false;
  final TableName tableOne=TableName.valueOf(nsp1 + TableName.NAMESPACE_DELIM + "table1");
  byte[] columnFamily=Bytes.toBytes("info");
  HTableDescriptor tableDescOne=new HTableDescriptor(tableOne);
  tableDescOne.addFamily(new HColumnDescriptor(columnFamily));
  NamespaceTableAndRegionInfo stateInfo;
  try {
    ADMIN.createTable(tableDescOne,Bytes.toBytes("1"),Bytes.toBytes("1000"),7);
  }
 catch (  Exception exp) {
    assertTrue(exp instanceof DoNotRetryIOException);
    LOG.info(exp);
    constraintViolated=true;
  }
 finally {
    assertTrue(constraintViolated);
  }
  assertFalse(ADMIN.tableExists(tableOne));
  ADMIN.createTable(tableDescOne);
  Connection connection=ConnectionFactory.createConnection(UTIL.getConfiguration());
  Table htable=connection.getTable(tableOne);
  UTIL.loadNumericRows(htable,Bytes.toBytes("info"),1,1000);
  ADMIN.flush(tableOne);
  stateInfo=getNamespaceState(nsp1);
  assertEquals(1,stateInfo.getTables().size());
  assertEquals(1,stateInfo.getRegionCount());
  restartMaster();
  HRegion actualRegion=UTIL.getHBaseCluster().getRegions(tableOne).get(0);
  CustomObserver observer=(CustomObserver)actualRegion.getCoprocessorHost().findCoprocessor(CustomObserver.class.getName());
  assertNotNull(observer);
  ADMIN.split(tableOne,Bytes.toBytes("500"));
  observer.postSplit.await();
  assertEquals(2,ADMIN.getTableRegions(tableOne).size());
  actualRegion=UTIL.getHBaseCluster().getRegions(tableOne).get(0);
  observer=(CustomObserver)actualRegion.getCoprocessorHost().findCoprocessor(CustomObserver.class.getName());
  assertNotNull(observer);
  ADMIN.compact(tableOne);
  observer.postCompact.await();
  ADMIN.split(tableOne,getSplitKey(actualRegion.getRegionInfo().getStartKey(),actualRegion.getRegionInfo().getEndKey()));
  observer.postSplit.await();
  List<HRegionInfo> hris=ADMIN.getTableRegions(tableOne);
  assertEquals(2,hris.size());
  assertTrue("split completed",observer.preSplitBeforePONR.getCount() == 1);
  htable.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.procedure.TestProcedureCoordinator </h4><pre class="type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * Currently we can only handle one procedure at a time.  This makes sure we handle that and
 * reject submitting more.
 */
@Test public void testThreadPoolSize() throws Exception {
  ProcedureCoordinator coordinator=buildNewCoordinator();
  Procedure proc=new Procedure(coordinator,monitor,WAKE_FREQUENCY,TIMEOUT,procName,procData,expected);
  Procedure procSpy=spy(proc);
  Procedure proc2=new Procedure(coordinator,monitor,WAKE_FREQUENCY,TIMEOUT,procName + "2",procData,expected);
  Procedure procSpy2=spy(proc2);
  when(coordinator.createProcedure(any(ForeignExceptionDispatcher.class),eq(procName),eq(procData),anyListOf(String.class))).thenReturn(procSpy,procSpy2);
  coordinator.startProcedure(procSpy.getErrorMonitor(),procName,procData,expected);
  assertNull("Coordinator successfully ran two tasks at once with a single thread pool.",coordinator.startProcedure(proc2.getErrorMonitor(),"another op",procData,expected));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestAtomicOperation </h4><pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test basic append operation.
 * More tests in
 * @see org.apache.hadoop.hbase.client.TestFromClientSide#testAppend()
 */
@Test public void testAppend() throws IOException {
  initHRegion(tableName,name.getMethodName(),fam1);
  String v1="Ultimate Answer to the Ultimate Question of Life," + " The Universe, and Everything";
  String v2=" is... 42.";
  Append a=new Append(row);
  a.setReturnResults(false);
  a.add(fam1,qual1,Bytes.toBytes(v1));
  a.add(fam1,qual2,Bytes.toBytes(v2));
  assertNull(region.append(a,HConstants.NO_NONCE,HConstants.NO_NONCE));
  a=new Append(row);
  a.add(fam1,qual1,Bytes.toBytes(v2));
  a.add(fam1,qual2,Bytes.toBytes(v1));
  Result result=region.append(a,HConstants.NO_NONCE,HConstants.NO_NONCE);
  assertEquals(0,Bytes.compareTo(Bytes.toBytes(v1 + v2),result.getValue(fam1,qual1)));
  assertEquals(0,Bytes.compareTo(Bytes.toBytes(v2 + v1),result.getValue(fam1,qual2)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestClusterId </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClusterId() throws Exception {
  TEST_UTIL.startMiniZKCluster();
  TEST_UTIL.startMiniDFSCluster(1);
  Configuration conf=new Configuration(TEST_UTIL.getConfiguration());
  CoordinatedStateManager cp=CoordinatedStateManagerFactory.getCoordinatedStateManager(conf);
  rst=JVMClusterUtil.createRegionServerThread(conf,cp,HRegionServer.class,0);
  rst.start();
  Thread.sleep(10000);
  TEST_UTIL.startMiniHBaseCluster(1,0);
  rst.waitForServerOnline();
  String clusterId=ZKClusterId.readClusterIdZNode(TEST_UTIL.getZooKeeperWatcher());
  assertNotNull(clusterId);
  assertEquals(clusterId,rst.getRegionServer().getClusterId());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestCompoundBloomFilter </h4><pre class="type-2 type-7 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setUp() throws IOException {
  conf=TEST_UTIL.getConfiguration();
  conf.setInt(HFile.FORMAT_VERSION_KEY,HFile.MAX_FORMAT_VERSION);
  fs=FileSystem.get(conf);
  cacheConf=new CacheConfig(conf);
  blockCache=cacheConf.getBlockCache();
  assertNotNull(blockCache);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestEncryptionRandomKeying </h4><pre class="type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRandomKeying() throws Exception {
  final List<Path> initialPaths=findStorefilePaths(htd.getTableName());
  assertTrue(initialPaths.size() > 0);
  for (  Path path : initialPaths) {
    assertNotNull("Store file " + path + " is not encrypted",extractHFileKey(path));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestFSErrorsExposed </h4><pre class="type-4 type-11 type-7 type-8 type-13 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Injects errors into the pread calls of an on-disk file, and makes
 * sure those bubble up to the HFile scanner
 */
@Test public void testHFileScannerThrowsErrors() throws IOException {
  Path hfilePath=new Path(new Path(util.getDataTestDir("internalScannerExposesErrors"),"regionname"),"familyname");
  HFileSystem hfs=(HFileSystem)util.getTestFileSystem();
  FaultyFileSystem faultyfs=new FaultyFileSystem(hfs.getBackingFs());
  FileSystem fs=new HFileSystem(faultyfs);
  CacheConfig cacheConf=new CacheConfig(util.getConfiguration());
  HFileContext meta=new HFileContextBuilder().withBlockSize(2 * 1024).build();
  StoreFile.Writer writer=new StoreFile.WriterBuilder(util.getConfiguration(),cacheConf,hfs).withOutputDir(hfilePath).withFileContext(meta).build();
  TestStoreFile.writeStoreFile(writer,Bytes.toBytes("cf"),Bytes.toBytes("qual"));
  StoreFile sf=new StoreFile(fs,writer.getPath(),util.getConfiguration(),cacheConf,BloomType.NONE);
  StoreFile.Reader reader=sf.createReader();
  HFileScanner scanner=reader.getScanner(false,true);
  FaultyInputStream inStream=faultyfs.inStreams.get(0).get();
  assertNotNull(inStream);
  scanner.seekTo();
  assertTrue(scanner.next());
  faultyfs.startFaults();
  try {
    int scanned=0;
    while (scanner.next()) {
      scanned++;
    }
    fail("Scanner didn't throw after faults injected");
  }
 catch (  IOException ioe) {
    LOG.info("Got expected exception",ioe);
    assertTrue(ioe.getMessage().contains("Fault"));
  }
  reader.close(true);
}

</code></pre>

<br>
<pre class="type-4 type-11 type-7 type-8 type-13 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Injects errors into the pread calls of an on-disk file, and makes
 * sure those bubble up to the StoreFileScanner
 */
@Test public void testStoreFileScannerThrowsErrors() throws IOException {
  Path hfilePath=new Path(new Path(util.getDataTestDir("internalScannerExposesErrors"),"regionname"),"familyname");
  HFileSystem hfs=(HFileSystem)util.getTestFileSystem();
  FaultyFileSystem faultyfs=new FaultyFileSystem(hfs.getBackingFs());
  HFileSystem fs=new HFileSystem(faultyfs);
  CacheConfig cacheConf=new CacheConfig(util.getConfiguration());
  HFileContext meta=new HFileContextBuilder().withBlockSize(2 * 1024).build();
  StoreFile.Writer writer=new StoreFile.WriterBuilder(util.getConfiguration(),cacheConf,hfs).withOutputDir(hfilePath).withFileContext(meta).build();
  TestStoreFile.writeStoreFile(writer,Bytes.toBytes("cf"),Bytes.toBytes("qual"));
  StoreFile sf=new StoreFile(fs,writer.getPath(),util.getConfiguration(),cacheConf,BloomType.NONE);
  List<StoreFileScanner> scanners=StoreFileScanner.getScannersForStoreFiles(Collections.singletonList(sf),false,true,false,false,0);
  KeyValueScanner scanner=scanners.get(0);
  FaultyInputStream inStream=faultyfs.inStreams.get(0).get();
  assertNotNull(inStream);
  scanner.seek(KeyValue.LOWESTKEY);
  assertNotNull(scanner.next());
  faultyfs.startFaults();
  try {
    int scanned=0;
    while (scanner.next() != null) {
      scanned++;
    }
    fail("Scanner didn't throw after faults injected");
  }
 catch (  IOException ioe) {
    LOG.info("Got expected exception",ioe);
    assertTrue(ioe.getMessage().contains("Could not iterate"));
  }
  scanner.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestHRegion </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOpenRegionWrittenToWAL() throws Exception {
  final ServerName serverName=ServerName.valueOf("testOpenRegionWrittenToWAL",100,42);
  final RegionServerServices rss=spy(TEST_UTIL.createMockRegionServerService(serverName));
  HTableDescriptor htd=new HTableDescriptor(TableName.valueOf("testOpenRegionWrittenToWAL"));
  htd.addFamily(new HColumnDescriptor(fam1));
  htd.addFamily(new HColumnDescriptor(fam2));
  HRegionInfo hri=new HRegionInfo(htd.getTableName(),HConstants.EMPTY_BYTE_ARRAY,HConstants.EMPTY_BYTE_ARRAY);
  HRegion region=HBaseTestingUtility.createRegionAndWAL(hri,TEST_UTIL.getDataTestDir(),TEST_UTIL.getConfiguration(),htd);
  assertNotNull(region);
  region.put(new Put(Bytes.toBytes("a")).addColumn(fam1,fam1,fam1));
  region.flush(true);
  HBaseTestingUtility.closeRegionAndWAL(region);
  ArgumentCaptor<WALEdit> editCaptor=ArgumentCaptor.forClass(WALEdit.class);
  WAL wal=mockWAL();
  when(rss.getWAL((HRegionInfo)any())).thenReturn(wal);
  try {
    region=HRegion.openHRegion(hri,htd,rss.getWAL(hri),TEST_UTIL.getConfiguration(),rss,null);
    verify(wal,times(1)).append((HTableDescriptor)any(),(HRegionInfo)any(),(WALKey)any(),editCaptor.capture(),anyBoolean());
    WALEdit edit=editCaptor.getValue();
    assertNotNull(edit);
    assertNotNull(edit.getCells());
    assertEquals(1,edit.getCells().size());
    RegionEventDescriptor desc=WALEdit.getRegionEventDescriptor(edit.getCells().get(0));
    assertNotNull(desc);
    LOG.info("RegionEventDescriptor from WAL: " + desc);
    assertEquals(RegionEventDescriptor.EventType.REGION_OPEN,desc.getEventType());
    assertTrue(Bytes.equals(desc.getTableName().toByteArray(),htd.getName()));
    assertTrue(Bytes.equals(desc.getEncodedRegionName().toByteArray(),hri.getEncodedNameAsBytes()));
    assertTrue(desc.getLogSequenceNumber() > 0);
    assertEquals(serverName,ProtobufUtil.toServerName(desc.getServer()));
    assertEquals(2,desc.getStoresCount());
    StoreDescriptor store=desc.getStores(0);
    assertTrue(Bytes.equals(store.getFamilyName().toByteArray(),fam1));
    assertEquals(store.getStoreHomeDir(),Bytes.toString(fam1));
    assertEquals(1,store.getStoreFileCount());
    assertFalse(store.getStoreFile(0).contains("/"));
    store=desc.getStores(1);
    assertTrue(Bytes.equals(store.getFamilyName().toByteArray(),fam2));
    assertEquals(store.getStoreHomeDir(),Bytes.toString(fam2));
    assertEquals(0,store.getStoreFileCount());
  }
  finally {
    HBaseTestingUtility.closeRegionAndWAL(region);
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCheckAndRowMutateTimestampsAreMonotonic() throws IOException {
  HRegion region=initHRegion(tableName,name.getMethodName(),CONF,fam1);
  ManualEnvironmentEdge edge=new ManualEnvironmentEdge();
  EnvironmentEdgeManager.injectEdge(edge);
  edge.setValue(10);
  Put p=new Put(row);
  p.setDurability(Durability.SKIP_WAL);
  p.addColumn(fam1,qual1,qual1);
  region.put(p);
  Result result=region.get(new Get(row));
  Cell c=result.getColumnLatestCell(fam1,qual1);
  assertNotNull(c);
  assertEquals(c.getTimestamp(),10L);
  edge.setValue(1);
  p=new Put(row);
  p.setDurability(Durability.SKIP_WAL);
  p.addColumn(fam1,qual1,qual2);
  RowMutations rm=new RowMutations(row);
  rm.add(p);
  assertTrue(region.checkAndRowMutate(row,fam1,qual1,CompareOp.EQUAL,new BinaryComparator(qual1),rm,false));
  result=region.get(new Get(row));
  c=result.getColumnLatestCell(fam1,qual1);
  assertEquals(c.getTimestamp(),10L);
  LOG.info("c value " + Bytes.toStringBinary(c.getValueArray(),c.getValueOffset(),c.getValueLength()));
  assertTrue(Bytes.equals(c.getValueArray(),c.getValueOffset(),c.getValueLength(),qual2,0,qual2.length));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAppendTimestampsAreMonotonic() throws IOException {
  HRegion region=initHRegion(tableName,name.getMethodName(),CONF,fam1);
  ManualEnvironmentEdge edge=new ManualEnvironmentEdge();
  EnvironmentEdgeManager.injectEdge(edge);
  edge.setValue(10);
  Append a=new Append(row);
  a.setDurability(Durability.SKIP_WAL);
  a.add(fam1,qual1,qual1);
  region.append(a);
  Result result=region.get(new Get(row));
  Cell c=result.getColumnLatestCell(fam1,qual1);
  assertNotNull(c);
  assertEquals(c.getTimestamp(),10L);
  edge.setValue(1);
  region.append(a);
  result=region.get(new Get(row));
  c=result.getColumnLatestCell(fam1,qual1);
  assertEquals(c.getTimestamp(),10L);
  byte[] expected=new byte[qual1.length * 2];
  System.arraycopy(qual1,0,expected,0,qual1.length);
  System.arraycopy(qual1,0,expected,qual1.length,qual1.length);
  assertTrue(Bytes.equals(c.getValueArray(),c.getValueOffset(),c.getValueLength(),expected,0,expected.length));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * Splits twice and verifies getting from each of the split regions.
 * @throws Exception
 */
@Test public void testBasicSplit() throws Exception {
  byte[][] families={fam1,fam2,fam3};
  Configuration hc=initSplit();
  String method=this.getName();
  this.region=initHRegion(tableName,method,hc,families);
  try {
    LOG.info("" + HBaseTestCase.addContent(region,fam3));
    region.flush(true);
    region.compactStores();
    byte[] splitRow=region.checkSplit();
    assertNotNull(splitRow);
    LOG.info("SplitRow: " + Bytes.toString(splitRow));
    HRegion[] regions=splitRegion(region,splitRow);
    try {
      for (int i=0; i < regions.length; i++) {
        regions[i]=HRegion.openHRegion(regions[i],null);
      }
      assertGet(regions[0],fam3,Bytes.toBytes(START_KEY));
      assertGet(regions[1],fam3,splitRow);
      assertScan(regions[0],fam3,Bytes.toBytes(START_KEY));
      assertScan(regions[1],fam3,splitRow);
      for (int i=0; i < regions.length; i++) {
        for (int j=0; j < 2; j++) {
          HBaseTestCase.addContent(regions[i],fam3);
        }
        HBaseTestCase.addContent(regions[i],fam2);
        HBaseTestCase.addContent(regions[i],fam1);
        regions[i].flush(true);
      }
      byte[][] midkeys=new byte[regions.length][];
      for (int i=0; i < regions.length; i++) {
        regions[i].compactStores();
        midkeys[i]=regions[i].checkSplit();
      }
      TreeMap<String,HRegion> sortedMap=new TreeMap<String,HRegion>();
      for (int i=0; i < regions.length; i++) {
        HRegion[] rs=null;
        if (midkeys[i] != null) {
          rs=splitRegion(regions[i],midkeys[i]);
          for (int j=0; j < rs.length; j++) {
            sortedMap.put(Bytes.toString(rs[j].getRegionInfo().getRegionName()),HRegion.openHRegion(rs[j],null));
          }
        }
      }
      LOG.info("Made 4 regions");
      int interval=(LAST_CHAR - FIRST_CHAR) / 3;
      byte[] b=Bytes.toBytes(START_KEY);
      for (      HRegion r : sortedMap.values()) {
        assertGet(r,fam3,b);
        b[0]+=interval;
      }
    }
  finally {
      for (int i=0; i < regions.length; i++) {
        try {
          regions[i].close();
        }
 catch (        IOException e) {
        }
      }
    }
  }
  finally {
    HBaseTestingUtility.closeRegionAndWAL(this.region);
    this.region=null;
  }
}

</code></pre>

<br>
<pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCloseRegionWrittenToWAL() throws Exception {
  final ServerName serverName=ServerName.valueOf("testCloseRegionWrittenToWAL",100,42);
  final RegionServerServices rss=spy(TEST_UTIL.createMockRegionServerService(serverName));
  HTableDescriptor htd=new HTableDescriptor(TableName.valueOf("testOpenRegionWrittenToWAL"));
  htd.addFamily(new HColumnDescriptor(fam1));
  htd.addFamily(new HColumnDescriptor(fam2));
  final HRegionInfo hri=new HRegionInfo(htd.getTableName(),HConstants.EMPTY_BYTE_ARRAY,HConstants.EMPTY_BYTE_ARRAY);
  ArgumentCaptor<WALEdit> editCaptor=ArgumentCaptor.forClass(WALEdit.class);
  WAL wal=mockWAL();
  when(rss.getWAL((HRegionInfo)any())).thenReturn(wal);
  region=HRegion.openHRegion(hri,htd,rss.getWAL(hri),TEST_UTIL.getConfiguration(),rss,null);
  region.close(false);
  verify(wal,times(2)).append((HTableDescriptor)any(),(HRegionInfo)any(),(WALKey)any(),editCaptor.capture(),anyBoolean());
  WALEdit edit=editCaptor.getAllValues().get(1);
  assertNotNull(edit);
  assertNotNull(edit.getCells());
  assertEquals(1,edit.getCells().size());
  RegionEventDescriptor desc=WALEdit.getRegionEventDescriptor(edit.getCells().get(0));
  assertNotNull(desc);
  LOG.info("RegionEventDescriptor from WAL: " + desc);
  assertEquals(RegionEventDescriptor.EventType.REGION_CLOSE,desc.getEventType());
  assertTrue(Bytes.equals(desc.getTableName().toByteArray(),htd.getName()));
  assertTrue(Bytes.equals(desc.getEncodedRegionName().toByteArray(),hri.getEncodedNameAsBytes()));
  assertTrue(desc.getLogSequenceNumber() > 0);
  assertEquals(serverName,ProtobufUtil.toServerName(desc.getServer()));
  assertEquals(2,desc.getStoresCount());
  StoreDescriptor store=desc.getStores(0);
  assertTrue(Bytes.equals(store.getFamilyName().toByteArray(),fam1));
  assertEquals(store.getStoreHomeDir(),Bytes.toString(fam1));
  assertEquals(0,store.getStoreFileCount());
  store=desc.getStores(1);
  assertTrue(Bytes.equals(store.getFamilyName().toByteArray(),fam2));
  assertEquals(store.getStoreHomeDir(),Bytes.toString(fam2));
  assertEquals(0,store.getStoreFileCount());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCheckAndMutateTimestampsAreMonotonic() throws IOException {
  HRegion region=initHRegion(tableName,name.getMethodName(),CONF,fam1);
  ManualEnvironmentEdge edge=new ManualEnvironmentEdge();
  EnvironmentEdgeManager.injectEdge(edge);
  edge.setValue(10);
  Put p=new Put(row);
  p.setDurability(Durability.SKIP_WAL);
  p.addColumn(fam1,qual1,qual1);
  region.put(p);
  Result result=region.get(new Get(row));
  Cell c=result.getColumnLatestCell(fam1,qual1);
  assertNotNull(c);
  assertEquals(c.getTimestamp(),10L);
  edge.setValue(1);
  p=new Put(row);
  p.setDurability(Durability.SKIP_WAL);
  p.addColumn(fam1,qual1,qual2);
  region.checkAndMutate(row,fam1,qual1,CompareOp.EQUAL,new BinaryComparator(qual1),p,false);
  result=region.get(new Get(row));
  c=result.getColumnLatestCell(fam1,qual1);
  assertEquals(c.getTimestamp(),10L);
  assertTrue(Bytes.equals(c.getValueArray(),c.getValueOffset(),c.getValueLength(),qual2,0,qual2.length));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCellTTLs() throws IOException {
  IncrementingEnvironmentEdge edge=new IncrementingEnvironmentEdge();
  EnvironmentEdgeManager.injectEdge(edge);
  final byte[] row=Bytes.toBytes("testRow");
  final byte[] q1=Bytes.toBytes("q1");
  final byte[] q2=Bytes.toBytes("q2");
  final byte[] q3=Bytes.toBytes("q3");
  final byte[] q4=Bytes.toBytes("q4");
  HTableDescriptor htd=new HTableDescriptor(TableName.valueOf("testCellTTLs"));
  HColumnDescriptor hcd=new HColumnDescriptor(fam1);
  hcd.setTimeToLive(10);
  htd.addFamily(hcd);
  Configuration conf=new Configuration(TEST_UTIL.getConfiguration());
  conf.setInt(HFile.FORMAT_VERSION_KEY,HFile.MIN_FORMAT_VERSION_WITH_TAGS);
  HRegion region=HBaseTestingUtility.createRegionAndWAL(new HRegionInfo(htd.getTableName(),HConstants.EMPTY_BYTE_ARRAY,HConstants.EMPTY_BYTE_ARRAY),TEST_UTIL.getDataTestDir(),conf,htd);
  assertNotNull(region);
  try {
    long now=EnvironmentEdgeManager.currentTime();
    region.put(new Put(row).add(new KeyValue(row,fam1,q1,now,HConstants.EMPTY_BYTE_ARRAY,new ArrayBackedTag[]{new ArrayBackedTag(TagType.TTL_TAG_TYPE,Bytes.toBytes(5000L))})));
    region.put(new Put(row).addColumn(fam1,q2,now,HConstants.EMPTY_BYTE_ARRAY));
    region.put(new Put(row).add(new KeyValue(row,fam1,q3,now + 10000 - 1,HConstants.EMPTY_BYTE_ARRAY,new ArrayBackedTag[]{new ArrayBackedTag(TagType.TTL_TAG_TYPE,Bytes.toBytes(5000L))})));
    region.put(new Put(row).addColumn(fam1,q4,now + 10000 - 1,HConstants.EMPTY_BYTE_ARRAY));
    region.flush(true);
    Result r=region.get(new Get(row));
    assertNotNull(r.getValue(fam1,q1));
    assertNotNull(r.getValue(fam1,q2));
    assertNotNull(r.getValue(fam1,q3));
    assertNotNull(r.getValue(fam1,q4));
    edge.incrementTime(5000);
    r=region.get(new Get(row));
    assertNull(r.getValue(fam1,q1));
    assertNotNull(r.getValue(fam1,q2));
    assertNotNull(r.getValue(fam1,q3));
    assertNotNull(r.getValue(fam1,q4));
    edge.incrementTime(5000);
    r=region.get(new Get(row));
    assertNull(r.getValue(fam1,q1));
    assertNull(r.getValue(fam1,q2));
    assertNotNull(r.getValue(fam1,q3));
    assertNotNull(r.getValue(fam1,q4));
    edge.incrementTime(5000);
    r=region.get(new Get(row));
    assertNull(r.getValue(fam1,q1));
    assertNull(r.getValue(fam1,q2));
    assertNull(r.getValue(fam1,q3));
    assertNotNull(r.getValue(fam1,q4));
    edge.incrementTime(10000);
    r=region.get(new Get(row));
    assertNull(r.getValue(fam1,q1));
    assertNull(r.getValue(fam1,q2));
    assertNull(r.getValue(fam1,q3));
    assertNull(r.getValue(fam1,q4));
    region.put(new Put(row).addColumn(fam1,q1,Bytes.toBytes(1L)));
    r=region.get(new Get(row));
    byte[] val=r.getValue(fam1,q1);
    assertNotNull(val);
    assertEquals(Bytes.toLong(val),1L);
    Increment incr=new Increment(row).addColumn(fam1,q1,1L);
    incr.setTTL(5000);
    region.increment(incr);
    r=region.get(new Get(row));
    val=r.getValue(fam1,q1);
    assertNotNull(val);
    assertEquals(Bytes.toLong(val),2L);
    edge.incrementTime(5000);
    r=region.get(new Get(row));
    val=r.getValue(fam1,q1);
    assertNotNull(val);
    assertEquals(Bytes.toLong(val),1L);
    edge.incrementTime(5000);
    r=region.get(new Get(row));
    assertNull(r.getValue(fam1,q1));
  }
  finally {
    HBaseTestingUtility.closeRegionAndWAL(region);
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClearForceSplit() throws IOException {
  byte[] qualifier=Bytes.toBytes("qualifier");
  Configuration hc=initSplit();
  int numRows=10;
  byte[][] families={fam1,fam3};
  String method=this.getName();
  this.region=initHRegion(tableName,method,hc,families);
  int startRow=100;
  putData(startRow,numRows,qualifier,families);
  int splitRow=startRow + numRows;
  byte[] splitRowBytes=Bytes.toBytes("" + splitRow);
  putData(splitRow,numRows,qualifier,families);
  region.flush(true);
  HRegion[] regions=null;
  try {
    region.forceSplit(splitRowBytes);
    assertTrue(region.shouldForceSplit());
    assertTrue(Bytes.equals(splitRowBytes,region.checkSplit()));
    HStore storeMock=Mockito.mock(HStore.class);
    when(storeMock.hasReferences()).thenReturn(true);
    when(storeMock.getFamily()).thenReturn(new HColumnDescriptor("cf"));
    when(storeMock.close()).thenReturn(ImmutableList.<StoreFile>of());
    when(storeMock.getColumnFamilyName()).thenReturn("cf");
    region.stores.put(Bytes.toBytes(storeMock.getColumnFamilyName()),storeMock);
    assertTrue(region.hasReferences());
    regions=splitRegion(region,splitRowBytes);
    assertNull(regions);
    assertFalse(region.shouldForceSplit());
    region.stores.remove(Bytes.toBytes(storeMock.getColumnFamilyName()));
    assertFalse(region.hasReferences());
    regions=splitRegion(region,splitRowBytes);
    for (int i=0; i < regions.length; i++) {
      regions[i]=HRegion.openHRegion(regions[i],null);
    }
    assertEquals(2,regions.length);
    verifyData(regions[0],startRow,numRows,qualifier,families);
    verifyData(regions[1],splitRow,numRows,qualifier,families);
  }
  finally {
    HBaseTestingUtility.closeRegionAndWAL(this.region);
    this.region=null;
  }
}

</code></pre>

<br>
<pre class="type-4 type-9 type-10 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFlushMarkers() throws Exception {
  String method=name.getMethodName();
  TableName tableName=TableName.valueOf(method);
  byte[] family=Bytes.toBytes("family");
  Path logDir=TEST_UTIL.getDataTestDirOnTestFS(method + ".log");
  final Configuration walConf=new Configuration(TEST_UTIL.getConfiguration());
  FSUtils.setRootDir(walConf,logDir);
  final WALFactory wals=new WALFactory(walConf,null,method);
  final WAL wal=wals.getWAL(tableName.getName(),tableName.getNamespace());
  this.region=initHRegion(tableName,HConstants.EMPTY_START_ROW,HConstants.EMPTY_END_ROW,method,CONF,false,Durability.USE_DEFAULT,wal,family);
  try {
    Path regiondir=region.getRegionFileSystem().getRegionDir();
    FileSystem fs=region.getRegionFileSystem().getFileSystem();
    byte[] regionName=region.getRegionInfo().getEncodedNameAsBytes();
    long maxSeqId=3;
    long minSeqId=0;
    for (long i=minSeqId; i < maxSeqId; i++) {
      Put put=new Put(Bytes.toBytes(i));
      put.addColumn(family,Bytes.toBytes(i),Bytes.toBytes(i));
      region.put(put);
      region.flush(true);
    }
    assertEquals(3,region.getStore(family).getStorefilesCount());
    List<String> storeFiles=new ArrayList<String>(3);
    for (    StoreFile sf : region.getStore(family).getStorefiles()) {
      storeFiles.add(sf.getPath().getName());
    }
    wal.shutdown();
    WAL.Reader reader=WALFactory.createReader(fs,DefaultWALProvider.getCurrentFileName(wal),TEST_UTIL.getConfiguration());
    try {
      List<WAL.Entry> flushDescriptors=new ArrayList<WAL.Entry>();
      long lastFlushSeqId=-1;
      while (true) {
        WAL.Entry entry=reader.next();
        if (entry == null) {
          break;
        }
        Cell cell=entry.getEdit().getCells().get(0);
        if (WALEdit.isMetaEditFamily(cell)) {
          FlushDescriptor flushDesc=WALEdit.getFlushDescriptor(cell);
          assertNotNull(flushDesc);
          assertArrayEquals(tableName.getName(),flushDesc.getTableName().toByteArray());
          if (flushDesc.getAction() == FlushAction.START_FLUSH) {
            assertTrue(flushDesc.getFlushSequenceNumber() > lastFlushSeqId);
          }
 else           if (flushDesc.getAction() == FlushAction.COMMIT_FLUSH) {
            assertTrue(flushDesc.getFlushSequenceNumber() == lastFlushSeqId);
          }
          lastFlushSeqId=flushDesc.getFlushSequenceNumber();
          assertArrayEquals(regionName,flushDesc.getEncodedRegionName().toByteArray());
          assertEquals(1,flushDesc.getStoreFlushesCount());
          StoreFlushDescriptor storeFlushDesc=flushDesc.getStoreFlushes(0);
          assertArrayEquals(family,storeFlushDesc.getFamilyName().toByteArray());
          assertEquals("family",storeFlushDesc.getStoreHomeDir());
          if (flushDesc.getAction() == FlushAction.START_FLUSH) {
            assertEquals(0,storeFlushDesc.getFlushOutputCount());
          }
 else {
            assertEquals(1,storeFlushDesc.getFlushOutputCount());
            assertTrue(storeFiles.contains(storeFlushDesc.getFlushOutput(0)));
          }
          flushDescriptors.add(entry);
        }
      }
      assertEquals(3 * 2,flushDescriptors.size());
      Path recoveredEditsDir=WALSplitter.getRegionDirRecoveredEditsDir(regiondir);
      Path recoveredEdits=new Path(recoveredEditsDir,String.format("%019d",1000));
      fs.create(recoveredEdits);
      WALProvider.Writer writer=wals.createRecoveredEditsWriter(fs,recoveredEdits);
      for (      WAL.Entry entry : flushDescriptors) {
        writer.append(entry);
      }
      writer.close();
    }
  finally {
      if (null != reader) {
        try {
          reader.close();
        }
 catch (        IOException exception) {
          LOG.warn("Problem closing wal: " + exception.getMessage());
          LOG.debug("exception details",exception);
        }
      }
    }
    region.close();
    region=HRegion.openHRegion(region,null);
    for (long i=minSeqId; i < maxSeqId; i++) {
      Get get=new Get(Bytes.toBytes(i));
      Result result=region.get(get);
      byte[] value=result.getValue(family,Bytes.toBytes(i));
      assertArrayEquals(Bytes.toBytes(i),value);
    }
  }
  finally {
    HBaseTestingUtility.closeRegionAndWAL(this.region);
    this.region=null;
    wals.close();
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testMerge() throws IOException {
  byte[][] families={fam1,fam2,fam3};
  Configuration hc=initSplit();
  String method=this.getName();
  this.region=initHRegion(tableName,method,hc,families);
  try {
    LOG.info("" + HBaseTestCase.addContent(region,fam3));
    region.flush(true);
    region.compactStores();
    byte[] splitRow=region.checkSplit();
    assertNotNull(splitRow);
    LOG.info("SplitRow: " + Bytes.toString(splitRow));
    HRegion[] subregions=splitRegion(region,splitRow);
    try {
      for (int i=0; i < subregions.length; i++) {
        HRegion.openHRegion(subregions[i],null);
        subregions[i].compactStores();
      }
      Path oldRegionPath=region.getRegionFileSystem().getRegionDir();
      Path oldRegion1=subregions[0].getRegionFileSystem().getRegionDir();
      Path oldRegion2=subregions[1].getRegionFileSystem().getRegionDir();
      long startTime=System.currentTimeMillis();
      region=HRegion.mergeAdjacent(subregions[0],subregions[1]);
      LOG.info("Merge regions elapsed time: " + ((System.currentTimeMillis() - startTime) / 1000.0));
      FILESYSTEM.delete(oldRegion1,true);
      FILESYSTEM.delete(oldRegion2,true);
      FILESYSTEM.delete(oldRegionPath,true);
      LOG.info("splitAndMerge completed.");
    }
  finally {
      for (int i=0; i < subregions.length; i++) {
        try {
          HBaseTestingUtility.closeRegionAndWAL(subregions[i]);
        }
 catch (        IOException e) {
        }
      }
    }
  }
  finally {
    HBaseTestingUtility.closeRegionAndWAL(this.region);
    this.region=null;
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOpenRegionWrittenToWALForLogReplay() throws Exception {
  final ServerName serverName=ServerName.valueOf("testOpenRegionWrittenToWALForLogReplay",100,42);
  final RegionServerServices rss=spy(TEST_UTIL.createMockRegionServerService(serverName));
  HTableDescriptor htd=new HTableDescriptor(TableName.valueOf("testOpenRegionWrittenToWALForLogReplay"));
  htd.addFamily(new HColumnDescriptor(fam1));
  htd.addFamily(new HColumnDescriptor(fam2));
  HRegionInfo hri=new HRegionInfo(htd.getTableName(),HConstants.EMPTY_BYTE_ARRAY,HConstants.EMPTY_BYTE_ARRAY);
  HRegion region=HBaseTestingUtility.createRegionAndWAL(hri,TEST_UTIL.getDataTestDir(),TEST_UTIL.getConfiguration(),htd);
  assertNotNull(region);
  region.put(new Put(Bytes.toBytes("a")).addColumn(fam1,fam1,fam1));
  region.flush(true);
  HBaseTestingUtility.closeRegionAndWAL(region);
  ArgumentCaptor<WALEdit> editCaptor=ArgumentCaptor.forClass(WALEdit.class);
  WAL wal=mockWAL();
  when(rss.getWAL((HRegionInfo)any())).thenReturn(wal);
  HashMap<String,Region> recoveringRegions=Maps.newHashMap();
  recoveringRegions.put(region.getRegionInfo().getEncodedName(),null);
  when(rss.getRecoveringRegions()).thenReturn(recoveringRegions);
  try {
    Configuration conf=new Configuration(TEST_UTIL.getConfiguration());
    conf.set(HConstants.REGION_IMPL,HRegionWithSeqId.class.getName());
    region=HRegion.openHRegion(hri,htd,rss.getWAL(hri),conf,rss,null);
    verify(wal,times(0)).append((HTableDescriptor)any(),(HRegionInfo)any(),(WALKey)any(),editCaptor.capture(),anyBoolean());
    new FinishRegionRecoveringHandler(rss,region.getRegionInfo().getEncodedName(),"/foo").prepare().process();
    verify(wal,times(1)).append((HTableDescriptor)any(),(HRegionInfo)any(),(WALKey)any(),editCaptor.capture(),anyBoolean());
    WALEdit edit=editCaptor.getValue();
    assertNotNull(edit);
    assertNotNull(edit.getCells());
    assertEquals(1,edit.getCells().size());
    RegionEventDescriptor desc=WALEdit.getRegionEventDescriptor(edit.getCells().get(0));
    assertNotNull(desc);
    LOG.info("RegionEventDescriptor from WAL: " + desc);
    assertEquals(RegionEventDescriptor.EventType.REGION_OPEN,desc.getEventType());
    assertTrue(Bytes.equals(desc.getTableName().toByteArray(),htd.getName()));
    assertTrue(Bytes.equals(desc.getEncodedRegionName().toByteArray(),hri.getEncodedNameAsBytes()));
    assertTrue(desc.getLogSequenceNumber() > 0);
    assertEquals(serverName,ProtobufUtil.toServerName(desc.getServer()));
    assertEquals(2,desc.getStoresCount());
    StoreDescriptor store=desc.getStores(0);
    assertTrue(Bytes.equals(store.getFamilyName().toByteArray(),fam1));
    assertEquals(store.getStoreHomeDir(),Bytes.toString(fam1));
    assertEquals(1,store.getStoreFileCount());
    assertFalse(store.getStoreFile(0).contains("/"));
    store=desc.getStores(1);
    assertTrue(Bytes.equals(store.getFamilyName().toByteArray(),fam2));
    assertEquals(store.getStoreHomeDir(),Bytes.toString(fam2));
    assertEquals(0,store.getStoreFileCount());
  }
  finally {
    HBaseTestingUtility.closeRegionAndWAL(region);
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIncrementTimestampsAreMonotonic() throws IOException {
  HRegion region=initHRegion(tableName,name.getMethodName(),CONF,fam1);
  ManualEnvironmentEdge edge=new ManualEnvironmentEdge();
  EnvironmentEdgeManager.injectEdge(edge);
  edge.setValue(10);
  Increment inc=new Increment(row);
  inc.setDurability(Durability.SKIP_WAL);
  inc.addColumn(fam1,qual1,1L);
  region.increment(inc);
  Result result=region.get(new Get(row));
  Cell c=result.getColumnLatestCell(fam1,qual1);
  assertNotNull(c);
  assertEquals(c.getTimestamp(),10L);
  edge.setValue(1);
  region.increment(inc);
  result=region.get(new Get(row));
  c=result.getColumnLatestCell(fam1,qual1);
  assertEquals(c.getTimestamp(),10L);
  assertEquals(Bytes.toLong(c.getValueArray(),c.getValueOffset(),c.getValueLength()),2L);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestHRegionReplayEvents </h4><pre class="type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests the case where a request for flush cache is sent to the region, but region cannot flush.
 * It should write the flush request marker instead.
 */
@Test public void testWriteFlushRequestMarker() throws IOException {
  FlushResultImpl result=(FlushResultImpl)((HRegion)primaryRegion).flushcache(true,false);
  assertNotNull(result);
  assertEquals(result.result,FlushResultImpl.Result.CANNOT_FLUSH_MEMSTORE_EMPTY);
  assertFalse(result.wroteFlushWalMarker);
  result=(FlushResultImpl)((HRegion)primaryRegion).flushcache(true,true);
  assertNotNull(result);
  assertEquals(result.result,FlushResultImpl.Result.CANNOT_FLUSH_MEMSTORE_EMPTY);
  assertTrue(result.wroteFlushWalMarker);
  List<FlushDescriptor> flushes=Lists.newArrayList();
  reader=createWALReaderForPrimary();
  while (true) {
    WAL.Entry entry=reader.next();
    if (entry == null) {
      break;
    }
    FlushDescriptor flush=WALEdit.getFlushDescriptor(entry.getEdit().getCells().get(0));
    if (flush != null) {
      flushes.add(flush);
    }
  }
  assertEquals(1,flushes.size());
  assertNotNull(flushes.get(0));
  assertEquals(FlushDescriptor.FlushAction.CANNOT_FLUSH,flushes.get(0).getAction());
}

</code></pre>

<br>
<pre class="type-4 type-9 type-10 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests the case where we prepare a flush with some seqId and we receive a flush commit marker
 * larger than the previous flush start marker.
 */
@Test public void testReplayFlushCommitMarkerLargerThanFlushStartMarker() throws IOException {
  putDataWithFlushes(primaryRegion,100,100,100);
  int numRows=200;
  reader=createWALReaderForPrimary();
  LOG.info("-- Replaying edits and flush events in secondary");
  FlushDescriptor startFlushDesc=null;
  FlushDescriptor commitFlushDesc=null;
  int lastReplayed=0;
  while (true) {
    WAL.Entry entry=reader.next();
    if (entry == null) {
      break;
    }
    FlushDescriptor flushDesc=WALEdit.getFlushDescriptor(entry.getEdit().getCells().get(0));
    if (flushDesc != null) {
      if (flushDesc.getAction() == FlushAction.START_FLUSH) {
        if (startFlushDesc == null) {
          LOG.info("-- Replaying flush start in secondary");
          startFlushDesc=flushDesc;
          PrepareFlushResult result=secondaryRegion.replayWALFlushStartMarker(startFlushDesc);
          assertNull(result.result);
        }
      }
 else       if (flushDesc.getAction() == FlushAction.COMMIT_FLUSH) {
        commitFlushDesc=FlushDescriptor.newBuilder(flushDesc).setFlushSequenceNumber(flushDesc.getFlushSequenceNumber() + 50).build();
      }
      verifyData(secondaryRegion,0,lastReplayed + 1,cq,families);
    }
 else {
      lastReplayed=replayEdit(secondaryRegion,entry);
    }
  }
  verifyData(secondaryRegion,0,numRows,cq,families);
  int expectedStoreFileCount=0;
  for (  Store s : secondaryRegion.getStores()) {
    assertEquals(expectedStoreFileCount,s.getStorefilesCount());
  }
  long regionMemstoreSize=secondaryRegion.getMemstoreSize();
  LOG.info("Testing replaying flush COMMIT " + commitFlushDesc + " on top of flush START"+ startFlushDesc);
  assertTrue(commitFlushDesc.getFlushSequenceNumber() > startFlushDesc.getFlushSequenceNumber());
  LOG.info("-- Replaying flush commit in secondary" + commitFlushDesc);
  secondaryRegion.replayWALFlushCommitMarker(commitFlushDesc);
  expectedStoreFileCount++;
  for (  Store s : secondaryRegion.getStores()) {
    assertEquals(expectedStoreFileCount,s.getStorefilesCount());
  }
  Store store=secondaryRegion.getStore(Bytes.toBytes("cf1"));
  long newFlushableSize=store.getFlushableSize();
  assertTrue(newFlushableSize > 0);
  long newRegionMemstoreSize=secondaryRegion.getMemstoreSize();
  assertTrue(newRegionMemstoreSize > 0);
  assertTrue(regionMemstoreSize > newRegionMemstoreSize);
  assertNull(secondaryRegion.getPrepareFlushResult());
  LOG.info("-- Verifying edits from secondary");
  verifyData(secondaryRegion,0,numRows,cq,families);
  LOG.info("-- Verifying edits from primary.");
  verifyData(primaryRegion,0,numRows,cq,families);
}

</code></pre>

<br>
<pre class="type-4 type-9 type-10 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests cases where we prepare a flush with some seqId and we receive other flush start markers
 * equal to, greater or less than the previous flush start marker.
 */
@Test public void testReplayFlushStartMarkers() throws IOException {
  putDataWithFlushes(primaryRegion,100,100,100);
  int numRows=200;
  reader=createWALReaderForPrimary();
  LOG.info("-- Replaying edits and flush events in secondary");
  FlushDescriptor startFlushDesc=null;
  int lastReplayed=0;
  while (true) {
    WAL.Entry entry=reader.next();
    if (entry == null) {
      break;
    }
    FlushDescriptor flushDesc=WALEdit.getFlushDescriptor(entry.getEdit().getCells().get(0));
    if (flushDesc != null) {
      Store store=secondaryRegion.getStore(Bytes.toBytes("cf1"));
      long storeMemstoreSize=store.getMemStoreSize();
      long regionMemstoreSize=secondaryRegion.getMemstoreSize();
      long storeFlushableSize=store.getFlushableSize();
      if (flushDesc.getAction() == FlushAction.START_FLUSH) {
        startFlushDesc=flushDesc;
        LOG.info("-- Replaying flush start in secondary");
        PrepareFlushResult result=secondaryRegion.replayWALFlushStartMarker(startFlushDesc);
        assertNull(result.result);
        assertEquals(result.flushOpSeqId,startFlushDesc.getFlushSequenceNumber());
        assertTrue(regionMemstoreSize > 0);
        assertTrue(storeFlushableSize > 0);
        long newStoreMemstoreSize=store.getMemStoreSize();
        LOG.info("Memstore size reduced by:" + StringUtils.humanReadableInt(newStoreMemstoreSize - storeMemstoreSize));
        assertTrue(storeMemstoreSize > newStoreMemstoreSize);
        verifyData(secondaryRegion,0,lastReplayed + 1,cq,families);
      }
      verifyData(secondaryRegion,0,lastReplayed + 1,cq,families);
    }
 else {
      lastReplayed=replayEdit(secondaryRegion,entry);
    }
  }
  verifyData(secondaryRegion,0,numRows,cq,families);
  LOG.info("-- Replaying same flush start in secondary again");
  PrepareFlushResult result=secondaryRegion.replayWALFlushStartMarker(startFlushDesc);
  assertNull(result);
  assertNotNull(secondaryRegion.getPrepareFlushResult());
  assertEquals(secondaryRegion.getPrepareFlushResult().flushOpSeqId,startFlushDesc.getFlushSequenceNumber());
  assertTrue(secondaryRegion.getMemstoreSize() > 0);
  verifyData(secondaryRegion,0,numRows,cq,families);
  FlushDescriptor startFlushDescSmallerSeqId=clone(startFlushDesc,startFlushDesc.getFlushSequenceNumber() - 50);
  LOG.info("-- Replaying same flush start in secondary again " + startFlushDescSmallerSeqId);
  result=secondaryRegion.replayWALFlushStartMarker(startFlushDescSmallerSeqId);
  assertNull(result);
  assertNotNull(secondaryRegion.getPrepareFlushResult());
  assertEquals(secondaryRegion.getPrepareFlushResult().flushOpSeqId,startFlushDesc.getFlushSequenceNumber());
  assertTrue(secondaryRegion.getMemstoreSize() > 0);
  verifyData(secondaryRegion,0,numRows,cq,families);
  FlushDescriptor startFlushDescLargerSeqId=clone(startFlushDesc,startFlushDesc.getFlushSequenceNumber() + 50);
  LOG.info("-- Replaying same flush start in secondary again " + startFlushDescLargerSeqId);
  result=secondaryRegion.replayWALFlushStartMarker(startFlushDescLargerSeqId);
  assertNull(result);
  assertNotNull(secondaryRegion.getPrepareFlushResult());
  assertEquals(secondaryRegion.getPrepareFlushResult().flushOpSeqId,startFlushDesc.getFlushSequenceNumber());
  assertTrue(secondaryRegion.getMemstoreSize() > 0);
  verifyData(secondaryRegion,0,numRows,cq,families);
  LOG.info("-- Verifying edits from secondary");
  verifyData(secondaryRegion,0,numRows,cq,families);
  LOG.info("-- Verifying edits from primary.");
  verifyData(primaryRegion,0,numRows,cq,families);
}

</code></pre>

<br>
<pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests the case where we replay a region open event after a flush start but before receiving
 * flush commit
 */
@Test public void testReplayRegionOpenEventAfterFlushStart() throws IOException {
  putDataWithFlushes(primaryRegion,100,100,100);
  int numRows=200;
  primaryRegion.close();
  primaryRegion=HRegion.openHRegion(rootDir,primaryHri,htd,walPrimary,CONF,rss,null);
  reader=createWALReaderForPrimary();
  List<RegionEventDescriptor> regionEvents=Lists.newArrayList();
  LOG.info("-- Replaying edits and region events in secondary");
  while (true) {
    WAL.Entry entry=reader.next();
    if (entry == null) {
      break;
    }
    FlushDescriptor flushDesc=WALEdit.getFlushDescriptor(entry.getEdit().getCells().get(0));
    RegionEventDescriptor regionEventDesc=WALEdit.getRegionEventDescriptor(entry.getEdit().getCells().get(0));
    if (flushDesc != null) {
      if (flushDesc.getAction() == FlushAction.START_FLUSH) {
        secondaryRegion.replayWALFlushStartMarker(flushDesc);
      }
    }
 else     if (regionEventDesc != null) {
      regionEvents.add(regionEventDesc);
    }
 else {
      replayEdit(secondaryRegion,entry);
    }
  }
  verifyData(secondaryRegion,0,numRows,cq,families);
  assertEquals(3,regionEvents.size());
  int expectedStoreFileCount=0;
  for (  Store s : secondaryRegion.getStores()) {
    assertEquals(expectedStoreFileCount,s.getStorefilesCount());
  }
  LOG.info("Testing replaying region open event " + regionEvents.get(2));
  secondaryRegion.replayWALRegionEventMarker(regionEvents.get(2));
  expectedStoreFileCount=2;
  for (  Store s : secondaryRegion.getStores()) {
    assertEquals(expectedStoreFileCount,s.getStorefilesCount());
  }
  Store store=secondaryRegion.getStore(Bytes.toBytes("cf1"));
  long newSnapshotSize=store.getSnapshotSize();
  assertTrue(newSnapshotSize == 0);
  long newRegionMemstoreSize=secondaryRegion.getMemstoreSize();
  assertTrue(newRegionMemstoreSize == 0);
  assertNull(secondaryRegion.getPrepareFlushResult());
  LOG.info("-- Verifying edits from secondary");
  verifyData(secondaryRegion,0,numRows,cq,families);
  LOG.info("-- Verifying edits from primary.");
  verifyData(primaryRegion,0,numRows,cq,families);
}

</code></pre>

<br>
<pre class="type-4 type-9 type-10 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReplayFlushesAndCompactions() throws IOException {
  putDataWithFlushes(primaryRegion,100,300,100);
  LOG.info("-- Compacting primary, only 1 store");
  primaryRegion.compactStore(Bytes.toBytes("cf1"),NoLimitThroughputController.INSTANCE);
  reader=createWALReaderForPrimary();
  LOG.info("-- Replaying edits and flush events in secondary");
  int lastReplayed=0;
  int expectedStoreFileCount=0;
  while (true) {
    WAL.Entry entry=reader.next();
    if (entry == null) {
      break;
    }
    FlushDescriptor flushDesc=WALEdit.getFlushDescriptor(entry.getEdit().getCells().get(0));
    CompactionDescriptor compactionDesc=WALEdit.getCompaction(entry.getEdit().getCells().get(0));
    if (flushDesc != null) {
      verifyData(secondaryRegion,0,lastReplayed,cq,families);
      Store store=secondaryRegion.getStore(Bytes.toBytes("cf1"));
      long storeMemstoreSize=store.getMemStoreSize();
      long regionMemstoreSize=secondaryRegion.getMemstoreSize();
      long storeFlushableSize=store.getFlushableSize();
      long storeSize=store.getSize();
      long storeSizeUncompressed=store.getStoreSizeUncompressed();
      if (flushDesc.getAction() == FlushAction.START_FLUSH) {
        LOG.info("-- Replaying flush start in secondary");
        PrepareFlushResult result=secondaryRegion.replayWALFlushStartMarker(flushDesc);
        assertNull(result.result);
        assertEquals(result.flushOpSeqId,flushDesc.getFlushSequenceNumber());
        long newStoreMemstoreSize=store.getMemStoreSize();
        LOG.info("Memstore size reduced by:" + StringUtils.humanReadableInt(newStoreMemstoreSize - storeMemstoreSize));
        assertTrue(storeMemstoreSize > newStoreMemstoreSize);
      }
 else       if (flushDesc.getAction() == FlushAction.COMMIT_FLUSH) {
        LOG.info("-- Replaying flush commit in secondary");
        secondaryRegion.replayWALFlushCommitMarker(flushDesc);
        expectedStoreFileCount++;
        for (        Store s : secondaryRegion.getStores()) {
          assertEquals(expectedStoreFileCount,s.getStorefilesCount());
        }
        long newFlushableSize=store.getFlushableSize();
        assertTrue(storeFlushableSize > newFlushableSize);
        long newRegionMemstoreSize=secondaryRegion.getMemstoreSize();
        assertTrue(regionMemstoreSize > newRegionMemstoreSize);
        assertTrue(store.getSize() > storeSize);
        assertTrue(store.getStoreSizeUncompressed() > storeSizeUncompressed);
        assertEquals(store.getSize(),store.getStorefilesSize());
      }
      verifyData(secondaryRegion,0,lastReplayed + 1,cq,families);
    }
 else     if (compactionDesc != null) {
      secondaryRegion.replayWALCompactionMarker(compactionDesc,true,false,Long.MAX_VALUE);
      for (      Store store : secondaryRegion.getStores()) {
        if (store.getColumnFamilyName().equals("cf1")) {
          assertEquals(1,store.getStorefilesCount());
        }
 else {
          assertEquals(expectedStoreFileCount,store.getStorefilesCount());
        }
      }
    }
 else {
      lastReplayed=replayEdit(secondaryRegion,entry);
      ;
    }
  }
  assertEquals(400 - 1,lastReplayed);
  LOG.info("-- Verifying edits from secondary");
  verifyData(secondaryRegion,0,400,cq,families);
  LOG.info("-- Verifying edits from primary. Ensuring that files are not deleted");
  verifyData(primaryRegion,0,lastReplayed,cq,families);
  for (  Store store : primaryRegion.getStores()) {
    if (store.getColumnFamilyName().equals("cf1")) {
      assertEquals(1,store.getStorefilesCount());
    }
 else {
      assertEquals(expectedStoreFileCount,store.getStorefilesCount());
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests replaying region open markers from primary region. Checks whether the files are picked up
 */
@Test public void testReplayRegionOpenEvent() throws IOException {
  putDataWithFlushes(primaryRegion,100,0,100);
  int numRows=100;
  primaryRegion.close();
  primaryRegion=HRegion.openHRegion(rootDir,primaryHri,htd,walPrimary,CONF,rss,null);
  reader=createWALReaderForPrimary();
  List<RegionEventDescriptor> regionEvents=Lists.newArrayList();
  LOG.info("-- Replaying edits and region events in secondary");
  while (true) {
    WAL.Entry entry=reader.next();
    if (entry == null) {
      break;
    }
    FlushDescriptor flushDesc=WALEdit.getFlushDescriptor(entry.getEdit().getCells().get(0));
    RegionEventDescriptor regionEventDesc=WALEdit.getRegionEventDescriptor(entry.getEdit().getCells().get(0));
    if (flushDesc != null) {
    }
 else     if (regionEventDesc != null) {
      regionEvents.add(regionEventDesc);
    }
 else {
    }
  }
  assertEquals(3,regionEvents.size());
  secondaryRegion.replayWALRegionEventMarker(regionEvents.get(0));
  secondaryRegion.replayWALRegionEventMarker(regionEvents.get(1));
  int expectedStoreFileCount=0;
  for (  Store s : secondaryRegion.getStores()) {
    assertEquals(expectedStoreFileCount,s.getStorefilesCount());
  }
  long regionMemstoreSize=secondaryRegion.getMemstoreSize();
  assertTrue(regionMemstoreSize == 0);
  LOG.info("Testing replaying region open event " + regionEvents.get(2));
  secondaryRegion.replayWALRegionEventMarker(regionEvents.get(2));
  expectedStoreFileCount++;
  for (  Store s : secondaryRegion.getStores()) {
    assertEquals(expectedStoreFileCount,s.getStorefilesCount());
  }
  Store store=secondaryRegion.getStore(Bytes.toBytes("cf1"));
  long newFlushableSize=store.getFlushableSize();
  assertTrue(newFlushableSize == 0);
  long newRegionMemstoreSize=secondaryRegion.getMemstoreSize();
  assertTrue(newRegionMemstoreSize == 0);
  assertNull(secondaryRegion.getPrepareFlushResult());
  LOG.info("-- Verifying edits from secondary");
  verifyData(secondaryRegion,0,numRows,cq,families);
  LOG.info("-- Verifying edits from primary.");
  verifyData(primaryRegion,0,numRows,cq,families);
}

</code></pre>

<br>
<pre class="type-9 type-10 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests the case where we prepare a flush with some seqId and we receive a flush commit marker
 * less than the previous flush start marker.
 */
@Test public void testReplayFlushCommitMarkerSmallerThanFlushStartMarker() throws IOException {
  putDataWithFlushes(primaryRegion,100,200,100);
  int numRows=300;
  reader=createWALReaderForPrimary();
  LOG.info("-- Replaying edits and flush events in secondary");
  FlushDescriptor startFlushDesc=null;
  FlushDescriptor commitFlushDesc=null;
  int lastReplayed=0;
  while (true) {
    System.out.println(lastReplayed);
    WAL.Entry entry=reader.next();
    if (entry == null) {
      break;
    }
    FlushDescriptor flushDesc=WALEdit.getFlushDescriptor(entry.getEdit().getCells().get(0));
    if (flushDesc != null) {
      if (flushDesc.getAction() == FlushAction.START_FLUSH) {
        if (startFlushDesc == null) {
          startFlushDesc=flushDesc;
        }
 else {
          LOG.info("-- Replaying flush start in secondary");
          startFlushDesc=flushDesc;
          PrepareFlushResult result=secondaryRegion.replayWALFlushStartMarker(startFlushDesc);
          assertNull(result.result);
        }
      }
 else       if (flushDesc.getAction() == FlushAction.COMMIT_FLUSH) {
        if (commitFlushDesc == null) {
          commitFlushDesc=flushDesc;
        }
      }
      verifyData(secondaryRegion,0,lastReplayed + 1,cq,families);
    }
 else {
      lastReplayed=replayEdit(secondaryRegion,entry);
    }
  }
  verifyData(secondaryRegion,0,numRows,cq,families);
  int expectedStoreFileCount=0;
  for (  Store s : secondaryRegion.getStores()) {
    assertEquals(expectedStoreFileCount,s.getStorefilesCount());
  }
  long regionMemstoreSize=secondaryRegion.getMemstoreSize();
  LOG.info("Testing replaying flush COMMIT " + commitFlushDesc + " on top of flush START"+ startFlushDesc);
  assertTrue(commitFlushDesc.getFlushSequenceNumber() < startFlushDesc.getFlushSequenceNumber());
  LOG.info("-- Replaying flush commit in secondary" + commitFlushDesc);
  secondaryRegion.replayWALFlushCommitMarker(commitFlushDesc);
  expectedStoreFileCount++;
  for (  Store s : secondaryRegion.getStores()) {
    assertEquals(expectedStoreFileCount,s.getStorefilesCount());
  }
  Store store=secondaryRegion.getStore(Bytes.toBytes("cf1"));
  long newFlushableSize=store.getFlushableSize();
  assertTrue(newFlushableSize > 0);
  long newRegionMemstoreSize=secondaryRegion.getMemstoreSize();
  assertEquals(regionMemstoreSize,newRegionMemstoreSize);
  assertNotNull(secondaryRegion.getPrepareFlushResult());
  LOG.info("-- Verifying edits from secondary");
  verifyData(secondaryRegion,0,numRows,cq,families);
  LOG.info("-- Verifying edits from primary.");
  verifyData(primaryRegion,0,numRows,cq,families);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestMajorCompaction </h4><pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test for HBASE-5920
 */
@Test public void testUserMajorCompactionRequest() throws IOException {
  Store store=r.getStore(COLUMN_FAMILY);
  createStoreFile(r);
  for (int i=0; i < MAX_FILES_TO_COMPACT + 1; i++) {
    createStoreFile(r);
  }
  store.triggerMajorCompaction();
  CompactionRequest request=store.requestCompaction(Store.PRIORITY_USER,null).getRequest();
  assertNotNull("Expected to receive a compaction request",request);
  assertEquals("User-requested major compaction should always occur, even if there are too many store files",true,request.isMajor());
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test for HBASE-5920 - Test user requested major compactions always occurring
 */
@Test public void testNonUserMajorCompactionRequest() throws Exception {
  Store store=r.getStore(COLUMN_FAMILY);
  createStoreFile(r);
  for (int i=0; i < MAX_FILES_TO_COMPACT + 1; i++) {
    createStoreFile(r);
  }
  store.triggerMajorCompaction();
  CompactionRequest request=store.requestCompaction(Store.NO_PRIORITY,null).getRequest();
  assertNotNull("Expected to receive a compaction request",request);
  assertEquals("System-requested major compaction should not occur if there are too many store files",false,request.isMajor());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestMasterAddressTracker </h4><pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoMaster() throws Exception {
  final MasterAddressTracker addressTracker=setupMasterTracker(null,1772);
  assertFalse(addressTracker.hasMaster());
  assertNull("should get null master when none active.",addressTracker.getMasterAddress());
  assertEquals("Should receive 0 for backup not found.",0,addressTracker.getMasterInfoPort());
}

</code></pre>

<br>
<pre class="type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testParsingNull() throws Exception {
  assertNull("parse on null data should return null.",MasterAddressTracker.parse(null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestMemStoreLAB </h4><pre class="type-4 type-8 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test allocation from lots of threads, making sure the results don't
 * overlap in any way
 */
@Test public void testLABThreading() throws Exception {
  Configuration conf=new Configuration();
  MultithreadedTestUtil.TestContext ctx=new MultithreadedTestUtil.TestContext(conf);
  final AtomicInteger totalAllocated=new AtomicInteger();
  final MemStoreLAB mslab=new HeapMemStoreLAB();
  List<List<AllocRecord>> allocations=Lists.newArrayList();
  for (int i=0; i < 10; i++) {
    final List<AllocRecord> allocsByThisThread=Lists.newLinkedList();
    allocations.add(allocsByThisThread);
    TestThread t=new MultithreadedTestUtil.RepeatingTestThread(ctx){
      private Random r=new Random();
      @Override public void doAnAction() throws Exception {
        int size=r.nextInt(1000);
        ByteRange alloc=mslab.allocateBytes(size);
        totalAllocated.addAndGet(size);
        allocsByThisThread.add(new AllocRecord(alloc,size));
      }
    }
;
    ctx.addThread(t);
  }
  ctx.startThreads();
  while (totalAllocated.get() < 50 * 1024 * 1024 && ctx.shouldRun()) {
    Thread.sleep(10);
  }
  ctx.stop();
  Map<byte[],Map<Integer,AllocRecord>> mapsByChunk=Maps.newHashMap();
  int sizeCounted=0;
  for (  AllocRecord rec : Iterables.concat(allocations)) {
    sizeCounted+=rec.size;
    if (rec.size == 0)     continue;
    Map<Integer,AllocRecord> mapForThisByteArray=mapsByChunk.get(rec.alloc.getBytes());
    if (mapForThisByteArray == null) {
      mapForThisByteArray=Maps.newTreeMap();
      mapsByChunk.put(rec.alloc.getBytes(),mapForThisByteArray);
    }
    AllocRecord oldVal=mapForThisByteArray.put(rec.alloc.getOffset(),rec);
    assertNull("Already had an entry " + oldVal + " for allocation "+ rec,oldVal);
  }
  assertEquals("Sanity check test",sizeCounted,totalAllocated.get());
  for (  Map<Integer,AllocRecord> allocsInChunk : mapsByChunk.values()) {
    int expectedOff=0;
    for (    AllocRecord alloc : allocsInChunk.values()) {
      assertEquals(expectedOff,alloc.alloc.getOffset());
      assertTrue("Allocation overruns buffer",alloc.alloc.getOffset() + alloc.size <= alloc.alloc.getBytes().length);
      expectedOff+=alloc.size;
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testLABLargeAllocation(){
  MemStoreLAB mslab=new HeapMemStoreLAB();
  ByteRange alloc=mslab.allocateBytes(2 * 1024 * 1024);
  assertNull("2MB allocation shouldn't be satisfied by LAB.",alloc);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestMetricsRegionServer </h4><pre class="type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testConstuctor(){
  assertNotNull("There should be a hadoop1/hadoop2 metrics source",rsm.getMetricsSource());
  assertNotNull("The RegionServerMetricsWrapper should be accessable",rsm.getRegionServerWrapper());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestMobStoreScanner </h4><pre class="type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadFromCorruptMobFiles() throws Exception {
  TableName tn=TableName.valueOf("testReadFromCorruptMobFiles");
  setUp(0,tn);
  createRecordAndCorruptMobFile(tn,row1,family,qf1,Bytes.toBytes("value1"));
  Get get=new Get(row1);
  IOException ioe=null;
  try {
    table.get(get);
  }
 catch (  IOException e) {
    ioe=e;
  }
  Assert.assertNotNull(ioe);
  Assert.assertEquals(CorruptHFileException.class.getName(),ioe.getClass().getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestPerColumnFamilyFlush </h4><pre class="type-4 type-9 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * When a log roll is about to happen, we do a flush of the regions who will be affected by the
 * log roll. These flushes cannot be a selective flushes, otherwise we cannot roll the logs. This
 * test ensures that we do a full-flush in that scenario.
 * @throws IOException
 */
@Test(timeout=180000) public void testFlushingWhenLogRolling() throws Exception {
  TableName tableName=TableName.valueOf("testFlushingWhenLogRolling");
  Configuration conf=TEST_UTIL.getConfiguration();
  conf.setLong(HConstants.HREGION_MEMSTORE_FLUSH_SIZE,128 * 1024 * 1024);
  conf.set(FlushPolicyFactory.HBASE_FLUSH_POLICY_KEY,FlushLargeStoresPolicy.class.getName());
  long cfFlushSizeLowerBound=2048;
  conf.setLong(FlushLargeStoresPolicy.HREGION_COLUMNFAMILY_FLUSH_SIZE_LOWER_BOUND_MIN,cfFlushSizeLowerBound);
  conf.setLong("hbase.regionserver.logroll.period",60L * 60 * 1000);
  conf.setLong("hbase.regionserver.hlog.blocksize",128L * 1024 * 1024);
  final int maxLogs=10;
  conf.setInt("hbase.regionserver.maxlogs",maxLogs);
  final int numRegionServers=1;
  TEST_UTIL.startMiniCluster(numRegionServers);
  try {
    Table table=TEST_UTIL.createTable(tableName,FAMILIES);
    try (Admin admin=TEST_UTIL.getConnection().getAdmin()){
      admin.flush(TableName.NAMESPACE_TABLE_NAME);
    }
     Pair<Region,HRegionServer> desiredRegionAndServer=getRegionWithName(tableName);
    final Region desiredRegion=desiredRegionAndServer.getFirst();
    assertTrue("Could not find a region which hosts the new region.",desiredRegion != null);
    LOG.info("Writing to region=" + desiredRegion);
    for (int i=1; i <= 3; i++) {
      table.put(createPut(i,0));
    }
    for (int i=0; i < maxLogs; i++) {
      for (int j=0; j < 100; j++) {
        table.put(createPut(1,i * 100 + j));
      }
      int currentNumRolledLogFiles=getNumRolledLogFiles(desiredRegion);
      assertNull(getWAL(desiredRegion).rollWriter());
      while (getNumRolledLogFiles(desiredRegion) <= currentNumRolledLogFiles) {
        Thread.sleep(100);
      }
    }
    table.close();
    assertEquals(maxLogs,getNumRolledLogFiles(desiredRegion));
    assertTrue(desiredRegion.getStore(FAMILY1).getMemStoreSize() > cfFlushSizeLowerBound);
    assertTrue(desiredRegion.getStore(FAMILY2).getMemStoreSize() < cfFlushSizeLowerBound);
    assertTrue(desiredRegion.getStore(FAMILY3).getMemStoreSize() < cfFlushSizeLowerBound);
    table.put(createPut(1,12345678));
    desiredRegionAndServer.getSecond().walRoller.requestRollAll();
    TEST_UTIL.waitFor(30000,new Waiter.ExplainingPredicate<Exception>(){
      @Override public boolean evaluate() throws Exception {
        return desiredRegion.getMemstoreSize() == 0;
      }
      @Override public String explainFailure() throws Exception {
        long memstoreSize=desiredRegion.getMemstoreSize();
        if (memstoreSize > 0) {
          return "Still have unflushed entries in memstore, memstore size is " + memstoreSize;
        }
        return "Unknown";
      }
    }
);
    LOG.info("Finished waiting on flush after too many WALs...");
    assertEquals(DefaultMemStore.DEEP_OVERHEAD,desiredRegion.getStore(FAMILY1).getMemStoreSize());
    assertEquals(DefaultMemStore.DEEP_OVERHEAD,desiredRegion.getStore(FAMILY2).getMemStoreSize());
    assertEquals(DefaultMemStore.DEEP_OVERHEAD,desiredRegion.getStore(FAMILY3).getMemStoreSize());
    assertNull(getWAL(desiredRegion).rollWriter(true));
    assertTrue(getNumRolledLogFiles(desiredRegion) < maxLogs);
  }
  finally {
    TEST_UTIL.shutdownMiniCluster();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestRegionReplicaFailover </h4><pre class="type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests the case where there are 3 region replicas and the primary is continuously accepting
 * new writes while one of the secondaries is killed. Verification is done for both of the
 * secondary replicas.
 */
@Test(timeout=120000) public void testSecondaryRegionKillWhilePrimaryIsAcceptingWrites() throws Exception {
  try (Connection connection=ConnectionFactory.createConnection(HTU.getConfiguration());Table table=connection.getTable(htd.getTableName());Admin admin=connection.getAdmin()){
    HTU.loadNumericRows(table,fam,0,1000);
    admin.flush(table.getName());
    HTU.loadNumericRows(table,fam,1000,2000);
    final AtomicReference<Throwable> ex=new AtomicReference<Throwable>(null);
    final AtomicBoolean done=new AtomicBoolean(false);
    final AtomicInteger key=new AtomicInteger(2000);
    Thread loader=new Thread(){
      @Override public void run(){
        while (!done.get()) {
          try {
            HTU.loadNumericRows(table,fam,key.get(),key.get() + 1000);
            key.addAndGet(1000);
          }
 catch (          Throwable e) {
            ex.compareAndSet(null,e);
          }
        }
      }
    }
;
    loader.start();
    Thread aborter=new Thread(){
      @Override public void run(){
        try {
          boolean aborted=false;
          for (          RegionServerThread rs : HTU.getMiniHBaseCluster().getRegionServerThreads()) {
            for (            Region r : rs.getRegionServer().getOnlineRegions(htd.getTableName())) {
              if (r.getRegionInfo().getReplicaId() == 1) {
                LOG.info("Aborting region server hosting secondary region replica");
                rs.getRegionServer().abort("for test");
                aborted=true;
              }
            }
          }
          assertTrue(aborted);
        }
 catch (        Throwable e) {
          ex.compareAndSet(null,e);
        }
      }
    }
;
    aborter.start();
    aborter.join();
    done.set(true);
    loader.join();
    assertNull(ex.get());
    assertTrue(key.get() > 1000);
    LOG.info("Loaded up to key :" + key.get());
    verifyNumericRowsWithTimeout(table,fam,0,key.get(),0,30000);
    verifyNumericRowsWithTimeout(table,fam,0,key.get(),1,30000);
    verifyNumericRowsWithTimeout(table,fam,0,key.get(),2,30000);
  }
   HTU.getMiniHBaseCluster().startRegionServer();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestRegionReplicas </h4><pre class="type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test(timeout=300000) public void testFlushAndCompactionsInPrimary() throws Exception {
  long runtime=30 * 1000;
  final int refreshPeriod=100;
  HTU.getConfiguration().setInt("hbase.hstore.compactionThreshold",3);
  HTU.getConfiguration().setInt(StorefileRefresherChore.REGIONSERVER_STOREFILE_REFRESH_PERIOD,refreshPeriod);
  restartRegionServer();
  final int startKey=0, endKey=1000;
  try {
    openRegion(HTU,getRS(),hriSecondary);
    HTU.loadNumericRows(table,f,startKey,endKey);
    TestRegionServerNoMaster.flushRegion(HTU,hriPrimary);
    Threads.sleep(2 * refreshPeriod);
    final AtomicBoolean running=new AtomicBoolean(true);
    @SuppressWarnings("unchecked") final AtomicReference<Exception>[] exceptions=new AtomicReference[3];
    for (int i=0; i < exceptions.length; i++) {
      exceptions[i]=new AtomicReference<Exception>();
    }
    Runnable writer=new Runnable(){
      int key=startKey;
      @Override public void run(){
        try {
          while (running.get()) {
            byte[] data=Bytes.toBytes(String.valueOf(key));
            Put put=new Put(data);
            put.addColumn(f,null,data);
            table.put(put);
            key++;
            if (key == endKey)             key=startKey;
          }
        }
 catch (        Exception ex) {
          LOG.warn(ex);
          exceptions[0].compareAndSet(null,ex);
        }
      }
    }
;
    Runnable flusherCompactor=new Runnable(){
      Random random=new Random();
      @Override public void run(){
        try {
          while (running.get()) {
            if (random.nextBoolean()) {
              TestRegionServerNoMaster.flushRegion(HTU,hriPrimary);
            }
 else {
              HTU.compact(table.getName(),random.nextBoolean());
            }
          }
        }
 catch (        Exception ex) {
          LOG.warn(ex);
          exceptions[1].compareAndSet(null,ex);
        }
      }
    }
;
    Runnable reader=new Runnable(){
      Random random=new Random();
      @Override public void run(){
        try {
          while (running.get()) {
            if (random.nextInt(10) == 0) {
              try {
                closeRegion(HTU,getRS(),hriSecondary);
              }
 catch (              Exception ex) {
                LOG.warn("Failed closing the region " + hriSecondary + " "+ StringUtils.stringifyException(ex));
                exceptions[2].compareAndSet(null,ex);
              }
              try {
                openRegion(HTU,getRS(),hriSecondary);
              }
 catch (              Exception ex) {
                LOG.warn("Failed opening the region " + hriSecondary + " "+ StringUtils.stringifyException(ex));
                exceptions[2].compareAndSet(null,ex);
              }
            }
            int key=random.nextInt(endKey - startKey) + startKey;
            assertGetRpc(hriSecondary,key,true);
          }
        }
 catch (        Exception ex) {
          LOG.warn("Failed getting the value in the region " + hriSecondary + " "+ StringUtils.stringifyException(ex));
          exceptions[2].compareAndSet(null,ex);
        }
      }
    }
;
    LOG.info("Starting writer and reader");
    ExecutorService executor=Executors.newFixedThreadPool(3);
    executor.submit(writer);
    executor.submit(flusherCompactor);
    executor.submit(reader);
    Threads.sleep(runtime);
    running.set(false);
    executor.shutdown();
    executor.awaitTermination(30,TimeUnit.SECONDS);
    for (    AtomicReference<Exception> exRef : exceptions) {
      Assert.assertNull(exRef.get());
    }
  }
  finally {
    HTU.deleteNumericRows(table,HConstants.CATALOG_FAMILY,startKey,endKey);
    closeRegion(HTU,getRS(),hriSecondary);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestRegionServerMetrics </h4><pre class="type-4 type-9 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScanNextForSmallScan() throws IOException {
  String tableNameString="testScanNextSmall";
  TableName tableName=TableName.valueOf(tableNameString);
  byte[] cf=Bytes.toBytes("d");
  byte[] qualifier=Bytes.toBytes("qual");
  byte[] val=Bytes.toBytes("One");
  List<Put> puts=new ArrayList<>();
  for (int insertCount=0; insertCount < 100; insertCount++) {
    Put p=new Put(Bytes.toBytes("" + insertCount + "row"));
    p.addColumn(cf,qualifier,val);
    puts.add(p);
  }
  try (Table t=TEST_UTIL.createTable(tableName,cf)){
    t.put(puts);
    Scan s=new Scan();
    s.setSmall(true);
    s.setCaching(1);
    ResultScanner resultScanners=t.getScanner(s);
    for (int nextCount=0; nextCount < NUM_SCAN_NEXT; nextCount++) {
      Result result=resultScanners.next();
      assertNotNull(result);
      assertEquals(1,result.size());
    }
  }
   numScanNext+=NUM_SCAN_NEXT;
  try (RegionLocator locator=TEST_UTIL.getConnection().getRegionLocator(tableName)){
    for (    HRegionLocation location : locator.getAllRegionLocations()) {
      HRegionInfo i=location.getRegionInfo();
      MetricsRegionAggregateSource agg=rs.getRegion(i.getRegionName()).getMetrics().getSource().getAggregateSource();
      String prefix="namespace_" + NamespaceDescriptor.DEFAULT_NAMESPACE_NAME_STR + "_table_"+ tableNameString+ "_region_"+ i.getEncodedName()+ "_metric";
      metricsHelper.assertCounter(prefix + "_scanNextNumOps",NUM_SCAN_NEXT,agg);
    }
    metricsHelper.assertCounter("ScanNext_num_ops",numScanNext,serverSource);
  }
   try (Admin admin=TEST_UTIL.getHBaseAdmin()){
    admin.disableTable(tableName);
    admin.deleteTable(tableName);
  }
 }

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScanNext() throws IOException {
  String tableNameString="testScanNext";
  TableName tableName=TableName.valueOf(tableNameString);
  byte[] cf=Bytes.toBytes("d");
  byte[] qualifier=Bytes.toBytes("qual");
  byte[] val=Bytes.toBytes("One");
  List<Put> puts=new ArrayList<>();
  for (int insertCount=0; insertCount < 100; insertCount++) {
    Put p=new Put(Bytes.toBytes("" + insertCount + "row"));
    p.addColumn(cf,qualifier,val);
    puts.add(p);
  }
  try (Table t=TEST_UTIL.createTable(tableName,cf)){
    t.put(puts);
    Scan s=new Scan();
    s.setBatch(1);
    s.setCaching(1);
    ResultScanner resultScanners=t.getScanner(s);
    for (int nextCount=0; nextCount < NUM_SCAN_NEXT; nextCount++) {
      Result result=resultScanners.next();
      assertNotNull(result);
      assertEquals(1,result.size());
    }
  }
   numScanNext+=NUM_SCAN_NEXT;
  try (RegionLocator locator=TEST_UTIL.getConnection().getRegionLocator(tableName)){
    for (    HRegionLocation location : locator.getAllRegionLocations()) {
      HRegionInfo i=location.getRegionInfo();
      MetricsRegionAggregateSource agg=rs.getRegion(i.getRegionName()).getMetrics().getSource().getAggregateSource();
      String prefix="namespace_" + NamespaceDescriptor.DEFAULT_NAMESPACE_NAME_STR + "_table_"+ tableNameString+ "_region_"+ i.getEncodedName()+ "_metric";
      metricsHelper.assertCounter(prefix + "_scanNextNumOps",NUM_SCAN_NEXT,agg);
    }
    metricsHelper.assertCounter("ScanNext_num_ops",numScanNext,serverSource);
  }
   try (Admin admin=TEST_UTIL.getHBaseAdmin()){
    admin.disableTable(tableName);
    admin.deleteTable(tableName);
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestRegionSplitPolicy </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSplitPoint() throws IOException {
  ConstantSizeRegionSplitPolicy policy=(ConstantSizeRegionSplitPolicy)RegionSplitPolicy.create(mockRegion,conf);
  assertFalse(policy.shouldSplit());
  assertNull(policy.getSplitPoint());
  HStore mockStore=Mockito.mock(HStore.class);
  Mockito.doReturn(2000L).when(mockStore).getSize();
  Mockito.doReturn(true).when(mockStore).canSplit();
  Mockito.doReturn(Bytes.toBytes("store 1 split")).when(mockStore).getSplitPoint();
  stores.add(mockStore);
  assertEquals("store 1 split",Bytes.toString(policy.getSplitPoint()));
  HStore mockStore2=Mockito.mock(HStore.class);
  Mockito.doReturn(4000L).when(mockStore2).getSize();
  Mockito.doReturn(true).when(mockStore2).canSplit();
  Mockito.doReturn(Bytes.toBytes("store 2 split")).when(mockStore2).getSplitPoint();
  stores.add(mockStore2);
  assertEquals("store 2 split",Bytes.toString(policy.getSplitPoint()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestServerCustomProtocol </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRowRange() throws Throwable {
  try (Table table=util.getConnection().getTable(TEST_TABLE);RegionLocator locator=util.getConnection().getRegionLocator(TEST_TABLE)){
    for (    HRegionLocation e : locator.getAllRegionLocations()) {
      LOG.info("Region " + e.getRegionInfo().getRegionNameAsString() + ", servername="+ e.getServerName());
    }
    Map<byte[],String> results=ping(table,null,ROW_A);
    assertEquals(1,results.size());
    verifyRegionResults(locator,results,ROW_A);
    results=ping(table,ROW_BC,null);
    assertEquals(2,results.size());
    HRegionLocation loc=locator.getRegionLocation(ROW_A,true);
    assertNull("Should be missing region for row aaa (prior to start row)",results.get(loc.getRegionInfo().getRegionName()));
    verifyRegionResults(locator,results,ROW_B);
    verifyRegionResults(locator,results,ROW_C);
    results=ping(table,null,ROW_BC);
    assertEquals(2,results.size());
    verifyRegionResults(locator,results,ROW_A);
    verifyRegionResults(locator,results,ROW_B);
    loc=locator.getRegionLocation(ROW_C,true);
    assertNull("Should be missing region for row ccc (past stop row)",results.get(loc.getRegionInfo().getRegionName()));
    results=ping(table,ROW_AB,ROW_BC);
    assertEquals(2,results.size());
    verifyRegionResults(locator,results,ROW_A);
    verifyRegionResults(locator,results,ROW_B);
    loc=locator.getRegionLocation(ROW_C,true);
    assertNull("Should be missing region for row ccc (past stop row)",results.get(loc.getRegionInfo().getRegionName()));
    results=ping(table,ROW_B,ROW_BC);
    assertEquals(1,results.size());
    verifyRegionResults(locator,results,ROW_B);
    loc=locator.getRegionLocation(ROW_A,true);
    assertNull("Should be missing region for row aaa (prior to start)",results.get(loc.getRegionInfo().getRegionName()));
    loc=locator.getRegionLocation(ROW_C,true);
    assertNull("Should be missing region for row ccc (past stop row)",results.get(loc.getRegionInfo().getRegionName()));
  }
 }

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmptyReturnType() throws Throwable {
  try (Table table=util.getConnection().getTable(TEST_TABLE)){
    Map<byte[],String> results=noop(table,ROW_A,ROW_C);
    assertEquals("Should have results from three regions",3,results.size());
    for (    Object v : results.values()) {
      assertNull(v);
    }
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestSplitTransactionOnCluster </h4><pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testSplitFailedCompactionAndSplit() throws Exception {
  final TableName tableName=TableName.valueOf("testSplitFailedCompactionAndSplit");
  HTableDescriptor htd=new HTableDescriptor(tableName);
  byte[] cf=Bytes.toBytes("cf");
  htd.addFamily(new HColumnDescriptor(cf));
  admin.createTable(htd);
  for (int i=0; cluster.getRegions(tableName).size() == 0 && i < 100; i++) {
    Thread.sleep(100);
  }
  assertEquals(1,cluster.getRegions(tableName).size());
  HRegion region=cluster.getRegions(tableName).get(0);
  Store store=region.getStore(cf);
  int regionServerIndex=cluster.getServerWith(region.getRegionInfo().getRegionName());
  HRegionServer regionServer=cluster.getRegionServer(regionServerIndex);
  Table t=TESTING_UTIL.getConnection().getTable(tableName);
  insertData(tableName,admin,t);
  insertData(tableName,admin,t);
  int fileNum=store.getStorefiles().size();
  store.triggerMajorCompaction();
  CompactionContext cc=store.requestCompaction();
  assertNotNull(cc);
  assertEquals(2,region.close(false).get(cf).size());
  region.initialize();
  assertFalse(region.compact(cc,store,NoLimitThroughputController.INSTANCE));
  assertTrue(fileNum > store.getStorefiles().size());
  SplitTransactionImpl st=new SplitTransactionImpl(region,Bytes.toBytes("row3"));
  assertTrue(st.prepare());
  st.execute(regionServer,regionServer);
  assertEquals(2,cluster.getRegions(tableName).size());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testRITStateForRollback() throws Exception {
  final TableName tableName=TableName.valueOf("testRITStateForRollback");
  try {
    Table t=createTableAndWait(tableName,Bytes.toBytes("cf"));
    final List<HRegion> regions=cluster.getRegions(tableName);
    final HRegionInfo hri=getAndCheckSingleTableRegion(regions);
    insertData(tableName,admin,t);
    t.close();
    this.admin.setBalancerRunning(false,true);
    cluster.getMaster().setCatalogJanitorEnabled(false);
    final HRegion region=findSplittableRegion(regions);
    assertTrue("not able to find a splittable region",region != null);
    region.getCoprocessorHost().load(FailingSplitRegionObserver.class,Coprocessor.PRIORITY_USER,region.getBaseConf());
    this.admin.splitRegion(region.getRegionInfo().getRegionName(),new byte[]{42});
    FailingSplitRegionObserver observer=(FailingSplitRegionObserver)region.getCoprocessorHost().findCoprocessor(FailingSplitRegionObserver.class.getName());
    assertNotNull(observer);
    observer.latch.await();
    LOG.info("Waiting for region to come out of RIT");
    TESTING_UTIL.waitFor(60000,1000,new Waiter.Predicate<Exception>(){
      @Override public boolean evaluate() throws Exception {
        RegionStates regionStates=cluster.getMaster().getAssignmentManager().getRegionStates();
        Map<String,RegionState> rit=regionStates.getRegionsInTransition();
        return !rit.containsKey(hri.getEncodedName());
      }
    }
);
  }
  finally {
    admin.setBalancerRunning(true,false);
    cluster.getMaster().setCatalogJanitorEnabled(true);
    TESTING_UTIL.deleteTable(tableName);
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStoreFileReferenceCreationWhenSplitPolicySaysToSkipRangeCheck() throws Exception {
  final TableName tableName=TableName.valueOf("testStoreFileReferenceCreationWhenSplitPolicySaysToSkipRangeCheck");
  try {
    HTableDescriptor htd=new HTableDescriptor(tableName);
    htd.addFamily(new HColumnDescriptor("f"));
    htd.addFamily(new HColumnDescriptor("i_f"));
    htd.setRegionSplitPolicyClassName(CustomSplitPolicy.class.getName());
    admin.createTable(htd);
    List<HRegion> regions=awaitTableRegions(tableName);
    HRegion region=regions.get(0);
    for (int i=3; i < 9; i++) {
      Put p=new Put(Bytes.toBytes("row" + i));
      p.addColumn(Bytes.toBytes("f"),Bytes.toBytes("q"),Bytes.toBytes("value" + i));
      p.addColumn(Bytes.toBytes("i_f"),Bytes.toBytes("q"),Bytes.toBytes("value" + i));
      region.put(p);
    }
    region.flush(true);
    Store store=region.getStore(Bytes.toBytes("f"));
    Collection<StoreFile> storefiles=store.getStorefiles();
    assertEquals(storefiles.size(),1);
    assertFalse(region.hasReferences());
    Path referencePath=region.getRegionFileSystem().splitStoreFile(region.getRegionInfo(),"f",storefiles.iterator().next(),Bytes.toBytes("row1"),false,region.getSplitPolicy());
    assertNull(referencePath);
    referencePath=region.getRegionFileSystem().splitStoreFile(region.getRegionInfo(),"i_f",storefiles.iterator().next(),Bytes.toBytes("row1"),false,region.getSplitPolicy());
    assertNotNull(referencePath);
  }
  finally {
    TESTING_UTIL.deleteTable(tableName);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestStore </h4><pre class="type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * Test for HBASE-3492 - Test split on empty colfam (no store files).
 * @throws IOException When the IO operations fail.
 */
@Test public void testSplitWithEmptyColFam() throws IOException {
  init(this.name.getMethodName());
  Assert.assertNull(store.getSplitPoint());
  store.getHRegion().forceSplit(null);
  Assert.assertNull(store.getSplitPoint());
  store.getHRegion().clearSplit();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestStoreFile </h4><pre class="type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * Test for HBASE-8012
 */
@Test public void testReseek() throws Exception {
  Path f=new Path(ROOT_DIR,getName());
  HFileContext meta=new HFileContextBuilder().withBlockSize(8 * 1024).build();
  StoreFile.Writer writer=new StoreFile.WriterBuilder(conf,cacheConf,this.fs).withFilePath(f).withFileContext(meta).build();
  writeStoreFile(writer);
  writer.close();
  StoreFile.Reader reader=new StoreFile.Reader(fs,f,cacheConf,conf);
  KeyValue k=KeyValueUtil.createFirstOnRow(HConstants.EMPTY_BYTE_ARRAY);
  StoreFileScanner s=reader.getStoreFileScanner(false,false);
  s.reseek(k);
  assertNotNull("Intial reseek should position at the beginning of the file",s.peek());
}

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCacheOnWriteEvictOnClose() throws Exception {
  Configuration conf=this.conf;
  Path baseDir=new Path(new Path(testDir,"7e0102"),"twoCOWEOC");
  BlockCache bc=new CacheConfig(conf).getBlockCache();
  assertNotNull(bc);
  CacheStats cs=bc.getStats();
  long startHit=cs.getHitCount();
  long startMiss=cs.getMissCount();
  long startEvicted=cs.getEvictedCount();
  conf.setBoolean(CacheConfig.CACHE_BLOCKS_ON_WRITE_KEY,false);
  CacheConfig cacheConf=new CacheConfig(conf);
  Path pathCowOff=new Path(baseDir,"123456789");
  StoreFile.Writer writer=writeStoreFile(conf,cacheConf,pathCowOff,3);
  StoreFile hsf=new StoreFile(this.fs,writer.getPath(),conf,cacheConf,BloomType.NONE);
  LOG.debug(hsf.getPath().toString());
  StoreFile.Reader reader=hsf.createReader();
  reader.loadFileInfo();
  StoreFileScanner scanner=reader.getStoreFileScanner(true,true);
  scanner.seek(KeyValue.LOWESTKEY);
  while (scanner.next() != null)   ;
  assertEquals(startHit,cs.getHitCount());
  assertEquals(startMiss + 3,cs.getMissCount());
  assertEquals(startEvicted,cs.getEvictedCount());
  startMiss+=3;
  scanner.close();
  reader.close(cacheConf.shouldEvictOnClose());
  conf.setBoolean(CacheConfig.CACHE_BLOCKS_ON_WRITE_KEY,true);
  cacheConf=new CacheConfig(conf);
  Path pathCowOn=new Path(baseDir,"123456788");
  writer=writeStoreFile(conf,cacheConf,pathCowOn,3);
  hsf=new StoreFile(this.fs,writer.getPath(),conf,cacheConf,BloomType.NONE);
  reader=hsf.createReader();
  scanner=reader.getStoreFileScanner(true,true);
  scanner.seek(KeyValue.LOWESTKEY);
  while (scanner.next() != null)   ;
  assertEquals(startHit + 3,cs.getHitCount());
  assertEquals(startMiss,cs.getMissCount());
  assertEquals(startEvicted,cs.getEvictedCount());
  startHit+=3;
  scanner.close();
  reader.close(cacheConf.shouldEvictOnClose());
  hsf=new StoreFile(this.fs,pathCowOff,conf,cacheConf,BloomType.NONE);
  StoreFile.Reader readerOne=hsf.createReader();
  readerOne.loadFileInfo();
  StoreFileScanner scannerOne=readerOne.getStoreFileScanner(true,true);
  scannerOne.seek(KeyValue.LOWESTKEY);
  hsf=new StoreFile(this.fs,pathCowOn,conf,cacheConf,BloomType.NONE);
  StoreFile.Reader readerTwo=hsf.createReader();
  readerTwo.loadFileInfo();
  StoreFileScanner scannerTwo=readerTwo.getStoreFileScanner(true,true);
  scannerTwo.seek(KeyValue.LOWESTKEY);
  Cell kv1=null;
  Cell kv2=null;
  while ((kv1=scannerOne.next()) != null) {
    kv2=scannerTwo.next();
    assertTrue(kv1.equals(kv2));
    KeyValue keyv1=KeyValueUtil.ensureKeyValue(kv1);
    KeyValue keyv2=KeyValueUtil.ensureKeyValue(kv2);
    assertTrue(Bytes.compareTo(keyv1.getBuffer(),keyv1.getKeyOffset(),keyv1.getKeyLength(),keyv2.getBuffer(),keyv2.getKeyOffset(),keyv2.getKeyLength()) == 0);
    assertTrue(Bytes.compareTo(kv1.getValueArray(),kv1.getValueOffset(),kv1.getValueLength(),kv2.getValueArray(),kv2.getValueOffset(),kv2.getValueLength()) == 0);
  }
  assertNull(scannerTwo.next());
  assertEquals(startHit + 6,cs.getHitCount());
  assertEquals(startMiss,cs.getMissCount());
  assertEquals(startEvicted,cs.getEvictedCount());
  startHit+=6;
  scannerOne.close();
  readerOne.close(cacheConf.shouldEvictOnClose());
  scannerTwo.close();
  readerTwo.close(cacheConf.shouldEvictOnClose());
  conf.setBoolean("hbase.rs.evictblocksonclose",true);
  cacheConf=new CacheConfig(conf);
  hsf=new StoreFile(this.fs,pathCowOff,conf,cacheConf,BloomType.NONE);
  reader=hsf.createReader();
  reader.close(cacheConf.shouldEvictOnClose());
  assertEquals(startHit,cs.getHitCount());
  assertEquals(startMiss,cs.getMissCount());
  assertEquals(startEvicted + 3,cs.getEvictedCount());
  startEvicted+=3;
  conf.setBoolean("hbase.rs.evictblocksonclose",false);
  cacheConf=new CacheConfig(conf);
  hsf=new StoreFile(this.fs,pathCowOn,conf,cacheConf,BloomType.NONE);
  reader=hsf.createReader();
  reader.close(cacheConf.shouldEvictOnClose());
  assertEquals(startHit,cs.getHitCount());
  assertEquals(startMiss,cs.getMissCount());
  assertEquals(startEvicted,cs.getEvictedCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestStripeStoreFileManager </h4><pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSplitPointEdgeCases() throws Exception {
  StripeStoreFileManager manager=createManager();
  assertNull(manager.getSplitPoint());
  MockStoreFile sf5=createFile(5,0);
  sf5.splitPoint=new byte[1];
  manager.insertNewFiles(al(sf5));
  manager.insertNewFiles(al(createFile(1,0)));
  assertEquals(sf5.splitPoint,manager.getSplitPoint());
  manager.addCompactionResults(al(),al(createFile(2,0,OPEN_KEY,OPEN_KEY)));
  assertEquals(sf5.splitPoint,manager.getSplitPoint());
  MockStoreFile sf6=createFile(6,0,OPEN_KEY,OPEN_KEY);
  sf6.splitPoint=new byte[1];
  manager.addCompactionResults(al(),al(sf6));
  assertEquals(sf6.splitPoint,manager.getSplitPoint());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.compactions.TestStripeCompactionPolicy </h4><pre class="type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testSplitOffStripe() throws Exception {
  Configuration conf=HBaseConfiguration.create();
  conf.unset("hbase.hstore.compaction.min.size");
  conf.setInt(StripeStoreConfig.MIN_FILES_KEY,2);
  Long[] toSplit=new Long[]{defaultSplitSize - 2,1L,1L};
  Long[] noSplit=new Long[]{defaultSplitSize - 2,1L};
  long splitTargetSize=(long)(defaultSplitSize / defaultSplitCount);
  StripeCompactionPolicy.StripeInformationProvider si=createStripesWithSizes(0,0,new Long[]{defaultSplitSize - 2,2L});
  assertNull(createPolicy(conf).selectCompaction(si,al(),false));
  conf.setFloat(CompactionConfiguration.HBASE_HSTORE_COMPACTION_RATIO_KEY,500f);
  StripeCompactionPolicy policy=createPolicy(conf);
  verifyWholeStripesCompaction(policy,si,0,0,null,2,splitTargetSize);
  si=createStripesWithSizes(0,0,noSplit,noSplit,toSplit);
  verifyWholeStripesCompaction(policy,si,2,2,null,2,splitTargetSize);
  si=createStripesWithSizes(0,0,noSplit,toSplit,noSplit);
  verifyWholeStripesCompaction(policy,si,1,1,null,2,splitTargetSize);
  StripeCompactionPolicy specPolicy=createPolicy(conf,defaultSplitSize + 1,defaultSplitCount,defaultInitialCount,false);
  verifySingleStripeCompaction(specPolicy,si,1,null);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleStripeCompaction() throws Exception {
  Configuration conf=HBaseConfiguration.create();
  conf.unset("hbase.hstore.compaction.min.size");
  conf.setFloat(CompactionConfiguration.HBASE_HSTORE_COMPACTION_RATIO_KEY,1.0F);
  conf.setInt(StripeStoreConfig.MIN_FILES_KEY,3);
  conf.setInt(StripeStoreConfig.MAX_FILES_KEY,4);
  conf.setLong(StripeStoreConfig.SIZE_TO_SPLIT_KEY,1000);
  StoreConfigInformation sci=mock(StoreConfigInformation.class);
  StripeStoreConfig ssc=new StripeStoreConfig(conf,sci);
  StripeCompactionPolicy policy=new StripeCompactionPolicy(conf,sci,ssc){
    @Override public StripeCompactionRequest selectCompaction(    StripeInformationProvider si,    List<StoreFile> filesCompacting,    boolean isOffpeak) throws IOException {
      if (!filesCompacting.isEmpty())       return null;
      return selectSingleStripeCompaction(si,false,false,isOffpeak);
    }
    @Override public boolean needsCompactions(    StripeInformationProvider si,    List<StoreFile> filesCompacting){
      if (!filesCompacting.isEmpty())       return false;
      return needsSingleStripeCompaction(si);
    }
  }
;
  StripeInformationProvider si=createStripesWithSizes(0,0,new Long[]{2L},new Long[]{3L,3L},new Long[]{5L,1L});
  verifyNoCompaction(policy,si);
  si=createStripesWithSizes(0,0,new Long[]{2L},new Long[]{3L,3L},new Long[]{5L,1L,1L});
  assertNull(policy.selectCompaction(si,al(),false));
  assertTrue(policy.needsCompactions(si,al()));
  si=createStripesWithSizes(0,0,new Long[]{2L},new Long[]{3L,3L},new Long[]{5L,4L,3L});
  verifySingleStripeCompaction(policy,si,2,null);
  si=createStripesWithSizes(0,0,new Long[]{3L,2L,2L},new Long[]{2L,2L,1L},new Long[]{3L,2L,2L,1L});
  verifySingleStripeCompaction(policy,si,2,null);
  si=createStripesWithSizes(0,0,new Long[]{5L},new Long[]{3L,2L,2L,1L},new Long[]{3L,2L,2L});
  verifySingleStripeCompaction(policy,si,1,null);
  si=createStripesWithSizes(0,0,new Long[]{3L,3L,3L},new Long[]{3L,1L,2L},new Long[]{3L,2L,2L});
  verifySingleStripeCompaction(policy,si,1,null);
  si=createStripesWithSizes(0,0,new Long[]{5L},new Long[]{5L,4L,4L,4L,4L});
  List<StoreFile> sfs=si.getStripes().get(1).subList(1,5);
  verifyCompaction(policy,si,sfs,null,1,null,si.getStartRow(1),si.getEndRow(1),true);
  si=createStripesWithSizes(0,0,new Long[]{5L},new Long[]{50L,4L,4L,4L,4L});
  sfs=si.getStripes().get(1).subList(1,5);
  verifyCompaction(policy,si,sfs,null,1,null,si.getStartRow(1),si.getEndRow(1),true);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@SuppressWarnings("unchecked") @Test public void testMergeExpiredFiles() throws Exception {
  ManualEnvironmentEdge edge=new ManualEnvironmentEdge();
  long now=defaultTtl + 2;
  edge.setValue(now);
  EnvironmentEdgeManager.injectEdge(edge);
  try {
    StoreFile expiredFile=createFile(), notExpiredFile=createFile();
    when(expiredFile.getReader().getMaxTimestamp()).thenReturn(now - defaultTtl - 1);
    when(notExpiredFile.getReader().getMaxTimestamp()).thenReturn(now - defaultTtl + 1);
    List<StoreFile> expired=Lists.newArrayList(expiredFile,expiredFile);
    List<StoreFile> notExpired=Lists.newArrayList(notExpiredFile,notExpiredFile);
    List<StoreFile> mixed=Lists.newArrayList(expiredFile,notExpiredFile);
    StripeCompactionPolicy policy=createPolicy(HBaseConfiguration.create(),defaultSplitSize,defaultSplitCount,defaultInitialCount,true);
    StripeCompactionPolicy.StripeInformationProvider si=createStripesWithFiles(expired,expired,expired);
    verifyWholeStripesCompaction(policy,si,0,2,null,1,Long.MAX_VALUE,false);
    si=createStripesWithFiles(notExpired,notExpired,notExpired);
    assertNull(policy.selectCompaction(si,al(),false));
    si=createStripesWithFiles(notExpired,expired,notExpired);
    verifyWholeStripesCompaction(policy,si,1,2,null,1,Long.MAX_VALUE,false);
    si=createStripesWithFiles(notExpired,expired,notExpired,expired,expired,notExpired);
    verifyWholeStripesCompaction(policy,si,3,4,null,1,Long.MAX_VALUE,false);
    si=createStripesWithFiles(expired,expired,notExpired,expired,mixed);
    verifyWholeStripesCompaction(policy,si,0,1,null,1,Long.MAX_VALUE,false);
  }
  finally {
    EnvironmentEdgeManager.reset();
  }
}

</code></pre>

<br>
<pre class="type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testWithParallelCompaction() throws Exception {
  assertNull(createPolicy(HBaseConfiguration.create()).selectCompaction(mock(StripeInformationProvider.class),al(createFile()),false));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.wal.TestDurability </h4><pre class="type-4 type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testIncrementWithReturnResultsSetToFalse() throws Exception {
  byte[] row1=Bytes.toBytes("row1");
  byte[] col1=Bytes.toBytes("col1");
  final WALFactory wals=new WALFactory(CONF,null,"testIncrementWithReturnResultsSetToFalse");
  byte[] tableName=Bytes.toBytes("testIncrementWithReturnResultsSetToFalse");
  final WAL wal=wals.getWAL(tableName,null);
  HRegion region=createHRegion(tableName,"increment",wal,Durability.USE_DEFAULT);
  Increment inc1=new Increment(row1);
  inc1.setReturnResults(false);
  inc1.addColumn(FAMILY,col1,1);
  Result res=region.increment(inc1);
  assertNull(res);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.wal.TestFSHLog </h4><pre class="type-4 type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * A loaded WAL coprocessor won't break existing WAL test cases.
 */
@Test public void testWALCoprocessorLoaded() throws Exception {
  FSHLog log=null;
  try {
    log=new FSHLog(fs,FSUtils.getRootDir(conf),dir.toString(),HConstants.HREGION_OLDLOGDIR_NAME,conf,null,true,null,null);
    WALCoprocessorHost host=log.getCoprocessorHost();
    Coprocessor c=host.findCoprocessor(SampleRegionWALObserver.class.getName());
    assertNotNull(c);
  }
  finally {
    if (log != null) {
      log.close();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.wal.TestLogRolling </h4><pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests that logs are deleted when some region has a compaction
 * record in WAL and no other records. See HBASE-8597.
 */
@Test public void testCompactionRecordDoesntBlockRolling() throws Exception {
  Table table=null;
  Table t=TEST_UTIL.getConnection().getTable(TableName.META_TABLE_NAME);
  try {
    table=createTestTable(getName());
    server=TEST_UTIL.getRSForFirstRegionInTable(table.getName());
    Region region=server.getOnlineRegions(table.getName()).get(0);
    final WAL log=server.getWAL(region.getRegionInfo());
    Store s=region.getStore(HConstants.CATALOG_FAMILY);
    admin.flush(TableName.NAMESPACE_TABLE_NAME);
    for (int i=1; i <= 2; ++i) {
      doPut(table,i);
      admin.flush(table.getName());
    }
    doPut(table,3);
    assertEquals("Should have no WAL after initial writes",0,DefaultWALProvider.getNumRolledLogFiles(log));
    assertEquals(2,s.getStorefilesCount());
    log.rollWriter();
    assertEquals("Should have WAL; one table is not flushed",1,DefaultWALProvider.getNumRolledLogFiles(log));
    admin.flush(table.getName());
    region.compact(false);
    Assert.assertNotNull(s);
    for (int waitTime=3000; s.getStorefilesCount() > 1 && waitTime > 0; waitTime-=200) {
      Threads.sleepWithoutInterrupt(200);
    }
    assertEquals("Compaction didn't happen",1,s.getStorefilesCount());
    doPut(table,0);
    log.rollWriter();
    assertEquals("Should have WAL; one table is not flushed",1,DefaultWALProvider.getNumRolledLogFiles(log));
    admin.flush(table.getName());
    doPut(table,1);
    log.rollWriter();
    assertEquals("Should have 1 WALs at the end",1,DefaultWALProvider.getNumRolledLogFiles(log));
  }
  finally {
    if (t != null)     t.close();
    if (table != null)     table.close();
  }
}

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that WAL is rolled when all data nodes in the pipeline have been
 * restarted.
 * @throws Exception
 */
@Test public void testLogRollOnPipelineRestart() throws Exception {
  LOG.info("Starting testLogRollOnPipelineRestart");
  assertTrue("This test requires WAL file replication.",fs.getDefaultReplication(TEST_UTIL.getDataTestDirOnTestFS()) > 1);
  LOG.info("Replication=" + fs.getDefaultReplication(TEST_UTIL.getDataTestDirOnTestFS()));
  Table t=TEST_UTIL.getConnection().getTable(TableName.META_TABLE_NAME);
  try {
    this.server=cluster.getRegionServer(0);
    HTableDescriptor desc=new HTableDescriptor(TableName.valueOf(getName()));
    desc.addFamily(new HColumnDescriptor(HConstants.CATALOG_FAMILY));
    admin.createTable(desc);
    Table table=TEST_UTIL.getConnection().getTable(desc.getTableName());
    server=TEST_UTIL.getRSForFirstRegionInTable(desc.getTableName());
    HRegionInfo region=server.getOnlineRegions(desc.getTableName()).get(0).getRegionInfo();
    final WAL log=server.getWAL(region);
    final List<Path> paths=new ArrayList<Path>();
    final List<Integer> preLogRolledCalled=new ArrayList<Integer>();
    paths.add(DefaultWALProvider.getCurrentFileName(log));
    log.registerWALActionsListener(new WALActionsListener.Base(){
      @Override public void preLogRoll(      Path oldFile,      Path newFile){
        LOG.debug("preLogRoll: oldFile=" + oldFile + " newFile="+ newFile);
        preLogRolledCalled.add(new Integer(1));
      }
      @Override public void postLogRoll(      Path oldFile,      Path newFile){
        paths.add(newFile);
      }
    }
);
    assertTrue("Need append support for this test",FSUtils.isAppendSupported(TEST_UTIL.getConfiguration()));
    writeData(table,1002);
    long curTime=System.currentTimeMillis();
    LOG.info("log.getCurrentFileName()): " + DefaultWALProvider.getCurrentFileName(log));
    long oldFilenum=DefaultWALProvider.extractFileNumFromWAL(log);
    assertTrue("Log should have a timestamp older than now",curTime > oldFilenum && oldFilenum != -1);
    assertTrue("The log shouldn't have rolled yet",oldFilenum == DefaultWALProvider.extractFileNumFromWAL(log));
    dfsCluster.restartDataNodes();
    Thread.sleep(1000);
    dfsCluster.waitActive();
    LOG.info("Data Nodes restarted");
    validateData(table,1002);
    writeData(table,1003);
    long newFilenum=DefaultWALProvider.extractFileNumFromWAL(log);
    assertTrue("Missing datanode should've triggered a log roll",newFilenum > oldFilenum && newFilenum > curTime);
    validateData(table,1003);
    writeData(table,1004);
    dfsCluster.restartDataNodes();
    Thread.sleep(1000);
    dfsCluster.waitActive();
    LOG.info("Data Nodes restarted");
    validateData(table,1004);
    writeData(table,1005);
    log.rollWriter(true);
    assertTrue("preLogRolledCalled has size of " + preLogRolledCalled.size(),preLogRolledCalled.size() >= 1);
    Set<String> loggedRows=new HashSet<String>();
    FSUtils fsUtils=FSUtils.getInstance(fs,TEST_UTIL.getConfiguration());
    for (    Path p : paths) {
      LOG.debug("recovering lease for " + p);
      fsUtils.recoverFileLease(((HFileSystem)fs).getBackingFs(),p,TEST_UTIL.getConfiguration(),null);
      LOG.debug("Reading WAL " + FSUtils.getPath(p));
      WAL.Reader reader=null;
      try {
        reader=WALFactory.createReader(fs,p,TEST_UTIL.getConfiguration());
        WAL.Entry entry;
        while ((entry=reader.next()) != null) {
          LOG.debug("#" + entry.getKey().getLogSeqNum() + ": "+ entry.getEdit().getCells());
          for (          Cell cell : entry.getEdit().getCells()) {
            loggedRows.add(Bytes.toStringBinary(cell.getRowArray(),cell.getRowOffset(),cell.getRowLength()));
          }
        }
      }
 catch (      EOFException e) {
        LOG.debug("EOF reading file " + FSUtils.getPath(p));
      }
 finally {
        if (reader != null)         reader.close();
      }
    }
    assertTrue(loggedRows.contains("row1002"));
    assertTrue(loggedRows.contains("row1003"));
    assertTrue(loggedRows.contains("row1004"));
    assertTrue(loggedRows.contains("row1005"));
    for (    Region r : server.getOnlineRegionsLocalContext()) {
      try {
        r.flush(true);
      }
 catch (      Exception e) {
        LOG.info(e);
      }
    }
    ResultScanner scanner=table.getScanner(new Scan());
    try {
      for (int i=2; i <= 5; i++) {
        Result r=scanner.next();
        assertNotNull(r);
        assertFalse(r.isEmpty());
        assertEquals("row100" + i,Bytes.toString(r.getRow()));
      }
    }
  finally {
      scanner.close();
    }
    for (    JVMClusterUtil.RegionServerThread rsThread : TEST_UTIL.getHBaseCluster().getRegionServerThreads()) {
      assertFalse(rsThread.getRegionServer().isAborted());
    }
  }
  finally {
    if (t != null)     t.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.wal.TestReadOldRootAndMetaEdits </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Inserts three waledits in the wal file, and reads them back. The first edit is of a regular
 * table, second waledit is for the ROOT table (it will be ignored while reading),
 * and last waledit is for the hbase:meta table, which will be linked to the new system:meta table.
 * @throws IOException
 */
@Test public void testReadOldRootAndMetaEdits() throws IOException {
  LOG.debug("testReadOldRootAndMetaEdits");
  byte[] row=Bytes.toBytes("row");
  KeyValue kv=new KeyValue(row,row,row,row);
  List<KeyValue> kvs=new ArrayList<KeyValue>();
  kvs.add(kv);
  WALProvider.Writer writer=null;
  WAL.Reader reader=null;
  TableName t=TableName.valueOf("t");
  HRegionInfo tRegionInfo=null;
  int logCount=0;
  long timestamp=System.currentTimeMillis();
  Path path=new Path(dir,"t");
  try {
    tRegionInfo=new HRegionInfo(t,HConstants.EMPTY_START_ROW,HConstants.EMPTY_END_ROW);
    WAL.Entry tEntry=createAEntry(new HLogKey(tRegionInfo.getEncodedNameAsBytes(),t,++logCount,timestamp,HConstants.DEFAULT_CLUSTER_ID),kvs);
    WAL.Entry rootEntry=createAEntry(new HLogKey(Bytes.toBytes(TableName.OLD_ROOT_STR),TableName.OLD_ROOT_TABLE_NAME,++logCount,timestamp,HConstants.DEFAULT_CLUSTER_ID),kvs);
    WAL.Entry oldMetaEntry=createAEntry(new HLogKey(Bytes.toBytes(TableName.OLD_META_STR),TableName.OLD_META_TABLE_NAME,++logCount,timestamp,HConstants.DEFAULT_CLUSTER_ID),kvs);
    writer=WALFactory.createWALWriter(fs,path,conf);
    writer.append(tEntry);
    writer.append(rootEntry);
    writer.append(oldMetaEntry);
    writer.sync();
    writer.close();
    reader=WALFactory.createReader(fs,path,conf);
    WAL.Entry entry=reader.next();
    assertNotNull(entry);
    assertTrue(entry.getKey().getTablename().equals(t));
    assertEquals(Bytes.toString(entry.getKey().getEncodedRegionName()),Bytes.toString(tRegionInfo.getEncodedNameAsBytes()));
    entry=reader.next();
    assertEquals(entry.getKey().getTablename(),TableName.META_TABLE_NAME);
    assertNull(reader.next());
  }
  finally {
    if (writer != null) {
      writer.close();
    }
    if (reader != null) {
      reader.close();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.wal.TestWALReplay </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSequentialEditLogSeqNum() throws IOException {
  final TableName tableName=TableName.valueOf(currentTest.getMethodName());
  final HRegionInfo hri=createBasic3FamilyHRegionInfo(tableName);
  final Path basedir=FSUtils.getTableDir(this.hbaseRootDir,tableName);
  deleteDir(basedir);
  final byte[] rowName=tableName.getName();
  final int countPerFamily=10;
  final HTableDescriptor htd=createBasic1FamilyHTD(tableName);
  MockWAL wal=createMockWAL();
  HRegion region=HRegion.openHRegion(this.conf,this.fs,hbaseRootDir,hri,htd,wal);
  for (  HColumnDescriptor hcd : htd.getFamilies()) {
    addRegionEdits(rowName,hcd.getName(),countPerFamily,this.ee,region,"x");
  }
  region.flush(true);
  for (  HColumnDescriptor hcd : htd.getFamilies()) {
    addRegionEdits(rowName,hcd.getName(),5,this.ee,region,"x");
  }
  long lastestSeqNumber=region.getReadPoint(null);
  wal.doCompleteCacheFlush=true;
  wal.completeCacheFlush(hri.getEncodedNameAsBytes());
  wal.shutdown();
  FileStatus[] listStatus=wal.getFiles();
  assertNotNull(listStatus);
  assertTrue(listStatus.length > 0);
  WALSplitter.splitLogFile(hbaseRootDir,listStatus[0],this.fs,this.conf,null,null,null,mode,wals);
  FileStatus[] listStatus1=this.fs.listStatus(new Path(FSUtils.getTableDir(hbaseRootDir,tableName),new Path(hri.getEncodedName(),"recovered.edits")),new PathFilter(){
    @Override public boolean accept(    Path p){
      if (WALSplitter.isSequenceIdFile(p)) {
        return false;
      }
      return true;
    }
  }
);
  int editCount=0;
  for (  FileStatus fileStatus : listStatus1) {
    editCount=Integer.parseInt(fileStatus.getPath().getName());
  }
  assertEquals("The sequence number of the recoverd.edits and the current edit seq should be same",lastestSeqNumber,editCount);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.replication.TestReplicationEndpoint </h4><pre class="type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test(timeout=120000) public void testWALEntryFilterFromReplicationEndpoint() throws Exception {
  admin.addPeer("testWALEntryFilterFromReplicationEndpoint",new ReplicationPeerConfig().setClusterKey(ZKConfig.getZooKeeperClusterKey(conf1)).setReplicationEndpointImpl(ReplicationEndpointWithWALEntryFilter.class.getName()),null);
  try (Connection connection=ConnectionFactory.createConnection(conf1)){
    doPut(connection,Bytes.toBytes("row1"));
    doPut(connection,row);
    doPut(connection,Bytes.toBytes("row2"));
  }
   Waiter.waitFor(conf1,60000,new Waiter.Predicate<Exception>(){
    @Override public boolean evaluate() throws Exception {
      return ReplicationEndpointForTest.replicateCount.get() >= 1;
    }
  }
);
  Assert.assertNull(ReplicationEndpointWithWALEntryFilter.ex.get());
  admin.removePeer("testWALEntryFilterFromReplicationEndpoint");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.replication.TestReplicationSource </h4><pre class="type-4 type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * Sanity check that we can move logs around while we are reading
 * from them. Should this test fail, ReplicationSource would have a hard
 * time reading logs that are being archived.
 * @throws Exception
 */
@Test public void testLogMoving() throws Exception {
  Path logPath=new Path(logDir,"log");
  if (!FS.exists(logDir))   FS.mkdirs(logDir);
  if (!FS.exists(oldLogDir))   FS.mkdirs(oldLogDir);
  WALProvider.Writer writer=WALFactory.createWALWriter(FS,logPath,TEST_UTIL.getConfiguration());
  for (int i=0; i < 3; i++) {
    byte[] b=Bytes.toBytes(Integer.toString(i));
    KeyValue kv=new KeyValue(b,b,b);
    WALEdit edit=new WALEdit();
    edit.add(kv);
    WALKey key=new WALKey(b,TableName.valueOf(b),0,0,HConstants.DEFAULT_CLUSTER_ID);
    writer.append(new WAL.Entry(key,edit));
    writer.sync();
  }
  writer.close();
  WAL.Reader reader=WALFactory.createReader(FS,logPath,TEST_UTIL.getConfiguration());
  WAL.Entry entry=reader.next();
  assertNotNull(entry);
  Path oldLogPath=new Path(oldLogDir,"log");
  FS.rename(logPath,oldLogPath);
  entry=reader.next();
  assertNotNull(entry);
  entry=reader.next();
  entry=reader.next();
  assertNull(entry);
  reader.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.replication.TestReplicationStateBasic </h4><pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemovePeerForHFileRefs() throws ReplicationException, KeeperException {
  rq1.init(server1);
  rqc.init();
  rp.init();
  rp.addPeer(ID_ONE,new ReplicationPeerConfig().setClusterKey(KEY_ONE),null);
  rp.addPeer(ID_TWO,new ReplicationPeerConfig().setClusterKey(KEY_TWO),null);
  List<String> files1=new ArrayList<String>(3);
  files1.add("file_1");
  files1.add("file_2");
  files1.add("file_3");
  rq1.addHFileRefs(ID_ONE,files1);
  rq1.addHFileRefs(ID_TWO,files1);
  assertEquals(2,rqc.getAllPeersFromHFileRefsQueue().size());
  assertEquals(3,rqc.getReplicableHFiles(ID_ONE).size());
  assertEquals(3,rqc.getReplicableHFiles(ID_TWO).size());
  rp.removePeer(ID_ONE);
  assertEquals(1,rqc.getAllPeersFromHFileRefsQueue().size());
  assertNull(rqc.getReplicableHFiles(ID_ONE));
  assertEquals(3,rqc.getReplicableHFiles(ID_TWO).size());
  rp.removePeer(ID_TWO);
  assertEquals(0,rqc.getAllPeersFromHFileRefsQueue().size());
  assertNull(rqc.getReplicableHFiles(ID_TWO));
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReplicationQueues() throws ReplicationException {
  rq1.init(server1);
  rq2.init(server2);
  rq3.init(server3);
  rp.init();
  assertEquals(3,rq1.getListOfReplicators().size());
  rq1.removeQueue("bogus");
  rq1.removeLog("bogus","bogus");
  rq1.removeAllQueues();
  assertNull(rq1.getAllQueues());
  assertEquals(0,rq1.getLogPosition("bogus","bogus"));
  assertNull(rq1.getLogsInQueue("bogus"));
  assertEquals(0,rq1.claimQueues(ServerName.valueOf("bogus",1234,-1L).toString()).size());
  rq1.setLogPosition("bogus","bogus",5L);
  populateQueues();
  assertEquals(3,rq1.getListOfReplicators().size());
  assertEquals(0,rq2.getLogsInQueue("qId1").size());
  assertEquals(5,rq3.getLogsInQueue("qId5").size());
  assertEquals(0,rq3.getLogPosition("qId1","filename0"));
  rq3.setLogPosition("qId5","filename4",354L);
  assertEquals(354L,rq3.getLogPosition("qId5","filename4"));
  assertEquals(5,rq3.getLogsInQueue("qId5").size());
  assertEquals(0,rq2.getLogsInQueue("qId1").size());
  assertEquals(0,rq1.getAllQueues().size());
  assertEquals(1,rq2.getAllQueues().size());
  assertEquals(5,rq3.getAllQueues().size());
  assertEquals(0,rq3.claimQueues(server1).size());
  assertEquals(2,rq3.getListOfReplicators().size());
  SortedMap<String,SortedSet<String>> queues=rq2.claimQueues(server3);
  assertEquals(5,queues.size());
  assertEquals(1,rq2.getListOfReplicators().size());
  assertEquals(0,rq2.claimQueues(server2).size());
  assertEquals(6,rq2.getAllQueues().size());
  rq2.removeAllQueues();
  assertEquals(0,rq2.getListOfReplicators().size());
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHfileRefsReplicationQueues() throws ReplicationException, KeeperException {
  rp.init();
  rq1.init(server1);
  rqc.init();
  List<String> files1=new ArrayList<String>(3);
  files1.add("file_1");
  files1.add("file_2");
  files1.add("file_3");
  assertNull(rqc.getReplicableHFiles(ID_ONE));
  assertEquals(0,rqc.getAllPeersFromHFileRefsQueue().size());
  rp.addPeer(ID_ONE,new ReplicationPeerConfig().setClusterKey(KEY_ONE),null);
  rq1.addHFileRefs(ID_ONE,files1);
  assertEquals(1,rqc.getAllPeersFromHFileRefsQueue().size());
  assertEquals(3,rqc.getReplicableHFiles(ID_ONE).size());
  List<String> files2=new ArrayList<>(files1);
  String removedString=files2.remove(0);
  rq1.removeHFileRefs(ID_ONE,files2);
  assertEquals(1,rqc.getReplicableHFiles(ID_ONE).size());
  files2=new ArrayList<>(1);
  files2.add(removedString);
  rq1.removeHFileRefs(ID_ONE,files2);
  assertEquals(0,rqc.getReplicableHFiles(ID_ONE).size());
  rp.removePeer(ID_ONE);
}

</code></pre>

<br>
<pre class="type-11 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReplicationPeers() throws Exception {
  rp.init();
  try {
    rp.removePeer("bogus");
    fail("Should have thrown an IllegalArgumentException when passed a bogus peerId");
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    rp.enablePeer("bogus");
    fail("Should have thrown an IllegalArgumentException when passed a bogus peerId");
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    rp.disablePeer("bogus");
    fail("Should have thrown an IllegalArgumentException when passed a bogus peerId");
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    rp.getStatusOfPeer("bogus");
    fail("Should have thrown an IllegalArgumentException when passed a bogus peerId");
  }
 catch (  IllegalArgumentException e) {
  }
  assertFalse(rp.peerAdded("bogus"));
  rp.peerRemoved("bogus");
  assertNull(rp.getPeerConf("bogus"));
  assertNumberOfPeers(0);
  rp.addPeer(ID_ONE,new ReplicationPeerConfig().setClusterKey(KEY_ONE),null);
  assertNumberOfPeers(1);
  rp.addPeer(ID_TWO,new ReplicationPeerConfig().setClusterKey(KEY_TWO),null);
  assertNumberOfPeers(2);
  try {
    rp.getStatusOfPeer(ID_ONE);
    fail("There are no connected peers, should have thrown an IllegalArgumentException");
  }
 catch (  IllegalArgumentException e) {
  }
  assertEquals(KEY_ONE,ZKConfig.getZooKeeperClusterKey(rp.getPeerConf(ID_ONE).getSecond()));
  rp.removePeer(ID_ONE);
  rp.peerRemoved(ID_ONE);
  assertNumberOfPeers(1);
  rp.addPeer(ID_ONE,new ReplicationPeerConfig().setClusterKey(KEY_ONE),null);
  rp.peerAdded(ID_ONE);
  assertNumberOfPeers(2);
  assertTrue(rp.getStatusOfPeer(ID_ONE));
  rp.disablePeer(ID_ONE);
  assertConnectedPeerStatus(false,ID_ONE);
  rp.enablePeer(ID_ONE);
  assertConnectedPeerStatus(true,ID_ONE);
  rp.peerRemoved(ID_ONE);
  assertNumberOfPeers(2);
  try {
    rp.getStatusOfPeer(ID_ONE);
    fail("There are no connected peers, should have thrown an IllegalArgumentException");
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReplicationQueuesClient() throws ReplicationException, KeeperException {
  rqc.init();
  assertEquals(0,rqc.getListOfReplicators().size());
  assertNull(rqc.getLogsInQueue(server1,"qId1"));
  assertNull(rqc.getAllQueues(server1));
  rq1.init(server1);
  rq2.init(server2);
  rq1.addLog("qId1","trash");
  rq1.removeLog("qId1","trash");
  rq1.addLog("qId2","filename1");
  rq1.addLog("qId3","filename2");
  rq1.addLog("qId3","filename3");
  rq2.addLog("trash","trash");
  rq2.removeQueue("trash");
  List<String> reps=rqc.getListOfReplicators();
  assertEquals(2,reps.size());
  assertTrue(server1,reps.contains(server1));
  assertTrue(server2,reps.contains(server2));
  assertNull(rqc.getLogsInQueue("bogus","bogus"));
  assertNull(rqc.getLogsInQueue(server1,"bogus"));
  assertEquals(0,rqc.getLogsInQueue(server1,"qId1").size());
  assertEquals(1,rqc.getLogsInQueue(server1,"qId2").size());
  assertEquals("filename1",rqc.getLogsInQueue(server1,"qId2").get(0));
  assertNull(rqc.getAllQueues("bogus"));
  assertEquals(0,rqc.getAllQueues(server2).size());
  List<String> list=rqc.getAllQueues(server1);
  assertEquals(3,list.size());
  assertTrue(list.contains("qId2"));
  assertTrue(list.contains("qId3"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.replication.TestReplicationWALEntryFilters </h4><pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSystemTableWALEntryFilter(){
  SystemTableWALEntryFilter filter=new SystemTableWALEntryFilter();
  WALKey key1=new WALKey(HRegionInfo.FIRST_META_REGIONINFO.getEncodedNameAsBytes(),TableName.META_TABLE_NAME);
  Entry metaEntry=new Entry(key1,null);
  assertNull(filter.filter(metaEntry));
  WALKey key2=new WALKey(new byte[]{},TableName.NAMESPACE_TABLE_NAME);
  Entry nsEntry=new Entry(key2,null);
  assertNull(filter.filter(nsEntry));
  WALKey key3=new WALKey(new byte[]{},TableName.valueOf("foo"));
  Entry userEntry=new Entry(key3,null);
  assertEquals(userEntry,filter.filter(userEntry));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.replication.regionserver.TestRegionReplicaReplicationEndpoint </h4><pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=240000) public void testRegionReplicaReplicationPeerIsCreatedForModifyTable() throws Exception {
  ReplicationAdmin admin=new ReplicationAdmin(HTU.getConfiguration());
  String peerId="region_replica_replication";
  if (admin.getPeerConfig(peerId) != null) {
    admin.removePeer(peerId);
  }
  HTableDescriptor htd=HTU.createTableDescriptor("testRegionReplicaReplicationPeerIsCreatedForModifyTable");
  HTU.getHBaseAdmin().createTable(htd);
  ReplicationPeerConfig peerConfig=admin.getPeerConfig(peerId);
  assertNull(peerConfig);
  HTU.getHBaseAdmin().disableTable(htd.getTableName());
  htd.setRegionReplication(2);
  HTU.getHBaseAdmin().modifyTable(htd.getTableName(),htd);
  HTU.getHBaseAdmin().enableTable(htd.getTableName());
  peerConfig=admin.getPeerConfig(peerId);
  assertNotNull(peerConfig);
  assertEquals(peerConfig.getClusterKey(),ZKConfig.getZooKeeperClusterKey(HTU.getConfiguration()));
  assertEquals(peerConfig.getReplicationEndpointImpl(),RegionReplicaReplicationEndpoint.class.getName());
  admin.close();
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegionReplicaReplicationPeerIsCreated() throws IOException, ReplicationException {
  ReplicationAdmin admin=new ReplicationAdmin(HTU.getConfiguration());
  String peerId="region_replica_replication";
  if (admin.getPeerConfig(peerId) != null) {
    admin.removePeer(peerId);
  }
  HTableDescriptor htd=HTU.createTableDescriptor("testReplicationPeerIsCreated_no_region_replicas");
  HTU.getHBaseAdmin().createTable(htd);
  ReplicationPeerConfig peerConfig=admin.getPeerConfig(peerId);
  assertNull(peerConfig);
  htd=HTU.createTableDescriptor("testReplicationPeerIsCreated");
  htd.setRegionReplication(2);
  HTU.getHBaseAdmin().createTable(htd);
  peerConfig=admin.getPeerConfig(peerId);
  assertNotNull(peerConfig);
  assertEquals(peerConfig.getClusterKey(),ZKConfig.getZooKeeperClusterKey(HTU.getConfiguration()));
  assertEquals(peerConfig.getReplicationEndpointImpl(),RegionReplicaReplicationEndpoint.class.getName());
  admin.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.replication.regionserver.TestReplicationSourceManager </h4><pre class="type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testBulkLoadWALEditsWithoutBulkLoadReplicationEnabled() throws Exception {
  WALKey logKey=new WALKey();
  WALEdit logEdit=getBulkLoadWALEdit();
  Replication.scopeWALEdits(htd,logKey,logEdit,conf,manager);
  assertNull("No bulk load entries scope should be added if bulk load replication is diabled.",logKey.getScopes());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.replication.regionserver.TestReplicationWALReaderManager </h4><pre class="type-9 type-10 type-11 type-7 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Path path=pathWatcher.currentPath;
  assertEquals(0,logManager.getPosition());
  appendToLog();
  assertNotNull(logManager.openReader(path));
  logManager.seek();
  WAL.Entry entry=logManager.readNextAndSetPosition();
  assertNotNull(entry);
  entry=logManager.readNextAndSetPosition();
  assertNull(entry);
  logManager.closeReader();
  long oldPos=logManager.getPosition();
  appendToLog();
  assertNotNull(logManager.openReader(path));
  logManager.seek();
  entry=logManager.readNextAndSetPosition();
  assertNotEquals(oldPos,logManager.getPosition());
  assertNotNull(entry);
  logManager.closeReader();
  oldPos=logManager.getPosition();
  log.rollWriter();
  assertNotNull(logManager.openReader(path));
  logManager.seek();
  entry=logManager.readNextAndSetPosition();
  assertEquals(oldPos,logManager.getPosition());
  assertNull(entry);
  logManager.finishCurrentFile();
  path=pathWatcher.currentPath;
  for (int i=0; i < nbRows; i++) {
    appendToLogPlus(walEditKVs);
  }
  log.rollWriter();
  logManager.openReader(path);
  logManager.seek();
  for (int i=0; i < nbRows; i++) {
    WAL.Entry e=logManager.readNextAndSetPosition();
    if (e == null) {
      fail("Should have enough entries");
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.rest.TestGZIPResponseWrapper </h4><pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResetBuffer() throws IOException {
  when(response.isCommitted()).thenReturn(false);
  ServletOutputStream out=mock(ServletOutputStream.class);
  when(response.getOutputStream()).thenReturn(out);
  ServletOutputStream servletOutput=wrapper.getOutputStream();
  assertEquals(GZIPResponseStream.class,servletOutput.getClass());
  wrapper.resetBuffer();
  verify(response).setHeader("Content-Encoding",null);
  when(response.isCommitted()).thenReturn(true);
  servletOutput=wrapper.getOutputStream();
  assertEquals(out.getClass(),servletOutput.getClass());
  assertNotNull(wrapper.getWriter());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.rest.TestGzipFilter </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGzipFilter() throws Exception {
  String path="/" + TABLE + "/"+ ROW_1+ "/"+ COLUMN_1;
  ByteArrayOutputStream bos=new ByteArrayOutputStream();
  GZIPOutputStream os=new GZIPOutputStream(bos);
  os.write(VALUE_1);
  os.close();
  byte[] value_1_gzip=bos.toByteArray();
  Header[] headers=new Header[2];
  headers[0]=new Header("Content-Type",Constants.MIMETYPE_BINARY);
  headers[1]=new Header("Content-Encoding","gzip");
  Response response=client.put(path,headers,value_1_gzip);
  assertEquals(response.getCode(),200);
  Table table=TEST_UTIL.getConnection().getTable(TABLE);
  Get get=new Get(Bytes.toBytes(ROW_1));
  get.addColumn(Bytes.toBytes(CFA),Bytes.toBytes("1"));
  Result result=table.get(get);
  byte[] value=result.getValue(Bytes.toBytes(CFA),Bytes.toBytes("1"));
  assertNotNull(value);
  assertTrue(Bytes.equals(value,VALUE_1));
  headers[0]=new Header("Accept",Constants.MIMETYPE_BINARY);
  headers[1]=new Header("Accept-Encoding","gzip");
  response=client.get(path,headers);
  assertEquals(response.getCode(),200);
  ByteArrayInputStream bis=new ByteArrayInputStream(response.getBody());
  GZIPInputStream is=new GZIPInputStream(bis);
  value=new byte[VALUE_1.length];
  is.read(value,0,VALUE_1.length);
  assertTrue(Bytes.equals(value,VALUE_1));
  is.close();
  table.close();
  testScannerResultCodes();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.rest.TestMetricsRESTSourceImpl </h4><pre class="type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void ensureCompatRegistered() throws Exception {
  assertNotNull(CompatibilitySingletonFactory.getInstance(MetricsRESTSource.class));
  assertTrue(CompatibilitySingletonFactory.getInstance(MetricsRESTSource.class) instanceof MetricsRESTSourceImpl);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.rest.TestNamespacesInstanceResource </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNamespaceCreateAndDeletePBAndNoBody() throws IOException, JAXBException {
  String namespacePath3="/namespaces/" + NAMESPACE3;
  String namespacePath4="/namespaces/" + NAMESPACE4;
  NamespacesInstanceModel model3;
  NamespacesInstanceModel model4;
  Response response;
  Admin admin=TEST_UTIL.getHBaseAdmin();
  assertNull(findNamespace(admin,NAMESPACE3));
  assertNull(findNamespace(admin,NAMESPACE4));
  model3=testNamespacesInstanceModel.buildTestModel(NAMESPACE3,NAMESPACE3_PROPS);
  testNamespacesInstanceModel.checkModel(model3,NAMESPACE3,NAMESPACE3_PROPS);
  model4=testNamespacesInstanceModel.buildTestModel(NAMESPACE4,NAMESPACE4_PROPS);
  testNamespacesInstanceModel.checkModel(model4,NAMESPACE4,NAMESPACE4_PROPS);
  response=client.put(namespacePath3,Constants.MIMETYPE_BINARY,new byte[]{});
  assertEquals(403,response.getCode());
  response=client.put(namespacePath4,Constants.MIMETYPE_PROTOBUF,model4.createProtobufOutput());
  assertEquals(403,response.getCode());
  conf.set("hbase.rest.readonly","true");
  response=client.post(namespacePath3,Constants.MIMETYPE_BINARY,new byte[]{});
  assertEquals(403,response.getCode());
  response=client.put(namespacePath4,Constants.MIMETYPE_PROTOBUF,model4.createProtobufOutput());
  assertEquals(403,response.getCode());
  NamespaceDescriptor nd3=findNamespace(admin,NAMESPACE3);
  NamespaceDescriptor nd4=findNamespace(admin,NAMESPACE4);
  assertNull(nd3);
  assertNull(nd4);
  conf.set("hbase.rest.readonly","false");
  response=client.post(namespacePath3,Constants.MIMETYPE_BINARY,new byte[]{});
  assertEquals(201,response.getCode());
  response=client.post(namespacePath4,Constants.MIMETYPE_PROTOBUF,model4.createProtobufOutput());
  assertEquals(201,response.getCode());
  nd3=findNamespace(admin,NAMESPACE3);
  nd4=findNamespace(admin,NAMESPACE4);
  assertNotNull(nd3);
  assertNotNull(nd4);
  checkNamespaceProperties(nd3,new HashMap<String,String>());
  checkNamespaceProperties(nd4,NAMESPACE4_PROPS);
  response=client.post(namespacePath3,Constants.MIMETYPE_BINARY,new byte[]{});
  assertEquals(403,response.getCode());
  response=client.post(namespacePath4,Constants.MIMETYPE_PROTOBUF,model4.createProtobufOutput());
  assertEquals(403,response.getCode());
  conf.set("hbase.rest.readonly","true");
  response=client.delete(namespacePath3);
  assertEquals(403,response.getCode());
  response=client.delete(namespacePath4);
  assertEquals(403,response.getCode());
  nd3=findNamespace(admin,NAMESPACE3);
  nd4=findNamespace(admin,NAMESPACE4);
  assertNotNull(nd3);
  assertNotNull(nd4);
  conf.set("hbase.rest.readonly","false");
  response=client.delete(namespacePath3);
  assertEquals(200,response.getCode());
  response=client.delete(namespacePath4);
  assertEquals(200,response.getCode());
  nd3=findNamespace(admin,NAMESPACE3);
  nd4=findNamespace(admin,NAMESPACE4);
  assertNull(nd3);
  assertNull(nd4);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidNamespacePostsAndPuts() throws IOException, JAXBException {
  String namespacePath1="/namespaces/" + NAMESPACE1;
  String namespacePath2="/namespaces/" + NAMESPACE2;
  String namespacePath3="/namespaces/" + NAMESPACE3;
  NamespacesInstanceModel model1;
  NamespacesInstanceModel model2;
  NamespacesInstanceModel model3;
  Response response;
  Admin admin=TEST_UTIL.getHBaseAdmin();
  assertNull(findNamespace(admin,NAMESPACE1));
  assertNull(findNamespace(admin,NAMESPACE2));
  assertNull(findNamespace(admin,NAMESPACE3));
  model1=testNamespacesInstanceModel.buildTestModel(NAMESPACE1,NAMESPACE1_PROPS);
  testNamespacesInstanceModel.checkModel(model1,NAMESPACE1,NAMESPACE1_PROPS);
  model2=testNamespacesInstanceModel.buildTestModel(NAMESPACE2,NAMESPACE2_PROPS);
  testNamespacesInstanceModel.checkModel(model2,NAMESPACE2,NAMESPACE2_PROPS);
  model3=testNamespacesInstanceModel.buildTestModel(NAMESPACE3,NAMESPACE3_PROPS);
  testNamespacesInstanceModel.checkModel(model3,NAMESPACE3,NAMESPACE3_PROPS);
  response=client.post(namespacePath1,Constants.MIMETYPE_JSON,toXML(model1));
  assertEquals(500,response.getCode());
  String jsonString=jsonMapper.writeValueAsString(model2);
  response=client.put(namespacePath2,Constants.MIMETYPE_XML,Bytes.toBytes(jsonString));
  assertEquals(400,response.getCode());
  response=client.post(namespacePath3,Constants.MIMETYPE_PROTOBUF,toXML(model1));
  assertEquals(500,response.getCode());
  NamespaceDescriptor nd1=findNamespace(admin,NAMESPACE1);
  NamespaceDescriptor nd2=findNamespace(admin,NAMESPACE2);
  NamespaceDescriptor nd3=findNamespace(admin,NAMESPACE3);
  assertNull(nd1);
  assertNull(nd2);
  assertNull(nd3);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNamespaceCreateAndDeleteXMLAndJSON() throws IOException, JAXBException {
  String namespacePath1="/namespaces/" + NAMESPACE1;
  String namespacePath2="/namespaces/" + NAMESPACE2;
  NamespacesInstanceModel model1;
  NamespacesInstanceModel model2;
  Response response;
  Admin admin=TEST_UTIL.getHBaseAdmin();
  assertNull(findNamespace(admin,NAMESPACE1));
  assertNull(findNamespace(admin,NAMESPACE2));
  model1=testNamespacesInstanceModel.buildTestModel(NAMESPACE1,NAMESPACE1_PROPS);
  testNamespacesInstanceModel.checkModel(model1,NAMESPACE1,NAMESPACE1_PROPS);
  model2=testNamespacesInstanceModel.buildTestModel(NAMESPACE2,NAMESPACE2_PROPS);
  testNamespacesInstanceModel.checkModel(model2,NAMESPACE2,NAMESPACE2_PROPS);
  response=client.put(namespacePath1,Constants.MIMETYPE_XML,toXML(model1));
  assertEquals(403,response.getCode());
  String jsonString=jsonMapper.writeValueAsString(model2);
  response=client.put(namespacePath2,Constants.MIMETYPE_JSON,Bytes.toBytes(jsonString));
  assertEquals(403,response.getCode());
  conf.set("hbase.rest.readonly","true");
  response=client.post(namespacePath1,Constants.MIMETYPE_XML,toXML(model1));
  assertEquals(403,response.getCode());
  jsonString=jsonMapper.writeValueAsString(model2);
  response=client.post(namespacePath2,Constants.MIMETYPE_JSON,Bytes.toBytes(jsonString));
  assertEquals(403,response.getCode());
  NamespaceDescriptor nd1=findNamespace(admin,NAMESPACE1);
  NamespaceDescriptor nd2=findNamespace(admin,NAMESPACE2);
  assertNull(nd1);
  assertNull(nd2);
  conf.set("hbase.rest.readonly","false");
  response=client.post(namespacePath1,Constants.MIMETYPE_XML,toXML(model1));
  assertEquals(201,response.getCode());
  jsonString=jsonMapper.writeValueAsString(model2);
  response=client.post(namespacePath2,Constants.MIMETYPE_JSON,Bytes.toBytes(jsonString));
  assertEquals(201,response.getCode());
  nd1=findNamespace(admin,NAMESPACE1);
  nd2=findNamespace(admin,NAMESPACE2);
  assertNotNull(nd1);
  assertNotNull(nd2);
  checkNamespaceProperties(nd1,NAMESPACE1_PROPS);
  checkNamespaceProperties(nd1,NAMESPACE1_PROPS);
  conf.set("hbase.rest.readonly","true");
  response=client.delete(namespacePath1);
  assertEquals(403,response.getCode());
  response=client.delete(namespacePath2);
  assertEquals(403,response.getCode());
  nd1=findNamespace(admin,NAMESPACE1);
  nd2=findNamespace(admin,NAMESPACE2);
  assertNotNull(nd1);
  assertNotNull(nd2);
  conf.set("hbase.rest.readonly","false");
  response=client.delete(namespacePath1);
  assertEquals(200,response.getCode());
  response=client.delete(namespacePath2);
  assertEquals(200,response.getCode());
  nd1=findNamespace(admin,NAMESPACE1);
  nd2=findNamespace(admin,NAMESPACE2);
  assertNull(nd1);
  assertNull(nd2);
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCannotDeleteDefaultAndHbaseNamespaces() throws IOException {
  String defaultPath="/namespaces/default";
  String hbasePath="/namespaces/hbase";
  Response response;
  Admin admin=TEST_UTIL.getHBaseAdmin();
  assertNotNull(findNamespace(admin,"default"));
  assertNotNull(findNamespace(admin,"hbase"));
  response=client.delete(defaultPath);
  assertEquals(503,response.getCode());
  response=client.delete(hbasePath);
  assertEquals(503,response.getCode());
  assertNotNull(findNamespace(admin,"default"));
  assertNotNull(findNamespace(admin,"hbase"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.rest.TestScannerResource </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleScannerXML() throws IOException, JAXBException {
  final int BATCH_SIZE=5;
  ScannerModel model=new ScannerModel();
  model.setBatch(BATCH_SIZE);
  model.addColumn(Bytes.toBytes(COLUMN_1));
  StringWriter writer=new StringWriter();
  marshaller.marshal(model,writer);
  byte[] body=Bytes.toBytes(writer.toString());
  conf.set("hbase.rest.readonly","true");
  Response response=client.put("/" + TABLE + "/scanner",Constants.MIMETYPE_XML,body);
  assertEquals(response.getCode(),403);
  String scannerURI=response.getLocation();
  assertNull(scannerURI);
  conf.set("hbase.rest.readonly","false");
  response=client.put("/" + TABLE + "/scanner",Constants.MIMETYPE_XML,body);
  assertEquals(response.getCode(),201);
  scannerURI=response.getLocation();
  assertNotNull(scannerURI);
  response=client.get(scannerURI,Constants.MIMETYPE_XML);
  assertEquals(response.getCode(),200);
  assertEquals(Constants.MIMETYPE_XML,response.getHeader("content-type"));
  CellSetModel cellSet=(CellSetModel)unmarshaller.unmarshal(new ByteArrayInputStream(response.getBody()));
  assertEquals(countCellSet(cellSet),BATCH_SIZE);
  conf.set("hbase.rest.readonly","true");
  response=client.delete(scannerURI);
  assertEquals(response.getCode(),403);
  conf.set("hbase.rest.readonly","false");
  response=client.delete(scannerURI);
  assertEquals(response.getCode(),200);
}

</code></pre>

<br>
<pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleScannerBinary() throws IOException {
  ScannerModel model=new ScannerModel();
  model.setBatch(1);
  model.addColumn(Bytes.toBytes(COLUMN_1));
  conf.set("hbase.rest.readonly","true");
  Response response=client.put("/" + TABLE + "/scanner",Constants.MIMETYPE_PROTOBUF,model.createProtobufOutput());
  assertEquals(response.getCode(),403);
  String scannerURI=response.getLocation();
  assertNull(scannerURI);
  conf.set("hbase.rest.readonly","false");
  response=client.put("/" + TABLE + "/scanner",Constants.MIMETYPE_PROTOBUF,model.createProtobufOutput());
  assertEquals(response.getCode(),201);
  scannerURI=response.getLocation();
  assertNotNull(scannerURI);
  response=client.get(scannerURI,Constants.MIMETYPE_BINARY);
  assertEquals(response.getCode(),200);
  assertEquals(Constants.MIMETYPE_BINARY,response.getHeader("content-type"));
  assertTrue(response.getBody().length > 0);
  boolean foundRowHeader=false, foundColumnHeader=false, foundTimestampHeader=false;
  for (  Header header : response.getHeaders()) {
    if (header.getName().equals("X-Row")) {
      foundRowHeader=true;
    }
 else     if (header.getName().equals("X-Column")) {
      foundColumnHeader=true;
    }
 else     if (header.getName().equals("X-Timestamp")) {
      foundTimestampHeader=true;
    }
  }
  assertTrue(foundRowHeader);
  assertTrue(foundColumnHeader);
  assertTrue(foundTimestampHeader);
  conf.set("hbase.rest.readonly","true");
  response=client.delete(scannerURI);
  assertEquals(response.getCode(),403);
  conf.set("hbase.rest.readonly","false");
  response=client.delete(scannerURI);
  assertEquals(response.getCode(),200);
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleScannerPB() throws IOException {
  final int BATCH_SIZE=10;
  ScannerModel model=new ScannerModel();
  model.setBatch(BATCH_SIZE);
  model.addColumn(Bytes.toBytes(COLUMN_1));
  conf.set("hbase.rest.readonly","true");
  Response response=client.put("/" + TABLE + "/scanner",Constants.MIMETYPE_PROTOBUF,model.createProtobufOutput());
  assertEquals(response.getCode(),403);
  String scannerURI=response.getLocation();
  assertNull(scannerURI);
  conf.set("hbase.rest.readonly","false");
  response=client.put("/" + TABLE + "/scanner",Constants.MIMETYPE_PROTOBUF,model.createProtobufOutput());
  assertEquals(response.getCode(),201);
  scannerURI=response.getLocation();
  assertNotNull(scannerURI);
  response=client.get(scannerURI,Constants.MIMETYPE_PROTOBUF);
  assertEquals(response.getCode(),200);
  assertEquals(Constants.MIMETYPE_PROTOBUF,response.getHeader("content-type"));
  CellSetModel cellSet=new CellSetModel();
  cellSet.getObjectFromMessage(response.getBody());
  assertEquals(countCellSet(cellSet),BATCH_SIZE);
  conf.set("hbase.rest.readonly","true");
  response=client.delete(scannerURI);
  assertEquals(response.getCode(),403);
  conf.set("hbase.rest.readonly","false");
  response=client.delete(scannerURI);
  assertEquals(response.getCode(),200);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.rest.TestScannersWithLabels </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleScannerXMLWithLabelsThatReceivesData() throws IOException, JAXBException {
  ScannerModel model=new ScannerModel();
  model.setBatch(5);
  model.addColumn(Bytes.toBytes(COLUMN_1));
  model.addLabel(SECRET);
  StringWriter writer=new StringWriter();
  marshaller.marshal(model,writer);
  byte[] body=Bytes.toBytes(writer.toString());
  conf.set("hbase.rest.readonly","false");
  Response response=client.put("/" + TABLE + "/scanner",Constants.MIMETYPE_XML,body);
  assertEquals(response.getCode(),201);
  String scannerURI=response.getLocation();
  assertNotNull(scannerURI);
  response=client.get(scannerURI,Constants.MIMETYPE_XML);
  assertEquals(response.getCode(),200);
  assertEquals(Constants.MIMETYPE_XML,response.getHeader("content-type"));
  CellSetModel cellSet=(CellSetModel)unmarshaller.unmarshal(new ByteArrayInputStream(response.getBody()));
  assertEquals(countCellSet(cellSet),5);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleScannerXMLWithLabelsThatReceivesNoData() throws IOException, JAXBException {
  final int BATCH_SIZE=5;
  ScannerModel model=new ScannerModel();
  model.setBatch(BATCH_SIZE);
  model.addColumn(Bytes.toBytes(COLUMN_1));
  model.addLabel(PUBLIC);
  StringWriter writer=new StringWriter();
  marshaller.marshal(model,writer);
  byte[] body=Bytes.toBytes(writer.toString());
  conf.set("hbase.rest.readonly","false");
  Response response=client.put("/" + TABLE + "/scanner",Constants.MIMETYPE_XML,body);
  assertEquals(response.getCode(),201);
  String scannerURI=response.getLocation();
  assertNotNull(scannerURI);
  response=client.get(scannerURI,Constants.MIMETYPE_XML);
  assertEquals(response.getCode(),204);
  assertEquals(Constants.MIMETYPE_XML,response.getHeader("content-type"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.rest.TestTableScan </h4><pre class="type-4 type-9 type-10 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStreamingJSON() throws Exception {
  StringBuilder builder=new StringBuilder();
  builder.append("/*");
  builder.append("?");
  builder.append(Constants.SCAN_COLUMN + "=" + COLUMN_1);
  builder.append("&");
  builder.append(Constants.SCAN_LIMIT + "=20");
  Response response=client.get("/" + TABLE + builder.toString(),Constants.MIMETYPE_JSON);
  assertEquals(200,response.getCode());
  assertEquals(Constants.MIMETYPE_JSON,response.getHeader("content-type"));
  ObjectMapper mapper=new JacksonProvider().locateMapper(CellSetModel.class,MediaType.APPLICATION_JSON_TYPE);
  CellSetModel model=mapper.readValue(response.getStream(),CellSetModel.class);
  int count=TestScannerResource.countCellSet(model);
  assertEquals(20,count);
  checkRowsNotNull(model);
  builder=new StringBuilder();
  builder.append("/*");
  builder.append("?");
  builder.append(Constants.SCAN_COLUMN + "=" + COLUMN_2);
  response=client.get("/" + TABLE + builder.toString(),Constants.MIMETYPE_JSON);
  assertEquals(200,response.getCode());
  assertEquals(Constants.MIMETYPE_JSON,response.getHeader("content-type"));
  model=mapper.readValue(response.getStream(),CellSetModel.class);
  count=TestScannerResource.countCellSet(model);
  assertEquals(expectedRows2,count);
  checkRowsNotNull(model);
  builder=new StringBuilder();
  builder.append("/*");
  builder.append("?");
  builder.append(Constants.SCAN_COLUMN + "=" + COLUMN_1);
  builder.append("&");
  builder.append(Constants.SCAN_START_ROW + "=aaa");
  builder.append("&");
  builder.append(Constants.SCAN_END_ROW + "=aay");
  response=client.get("/" + TABLE + builder.toString(),Constants.MIMETYPE_JSON);
  assertEquals(200,response.getCode());
  count=0;
  JsonFactory jfactory=new JsonFactory(mapper);
  JsonParser jParser=jfactory.createJsonParser(response.getStream());
  boolean found=false;
  while (jParser.nextToken() != JsonToken.END_OBJECT) {
    if (jParser.getCurrentToken() == JsonToken.START_OBJECT && found) {
      RowModel row=jParser.readValueAs(RowModel.class);
      assertNotNull(row.getKey());
      for (int i=0; i < row.getCells().size(); i++) {
        if (count == 0) {
          assertEquals("aaa",Bytes.toString(row.getKey()));
        }
        if (count == 23) {
          assertEquals("aax",Bytes.toString(row.getKey()));
        }
        count++;
      }
      jParser.skipChildren();
    }
 else {
      found=jParser.getCurrentToken() == JsonToken.START_ARRAY;
    }
  }
  assertEquals(24,count);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.rest.TestVersionResource </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetStorageClusterVersionXML() throws IOException, JAXBException {
  Response response=client.get("/version/cluster",Constants.MIMETYPE_XML);
  assertTrue(response.getCode() == 200);
  assertEquals(Constants.MIMETYPE_XML,response.getHeader("content-type"));
  StorageClusterVersionModel clusterVersionModel=(StorageClusterVersionModel)context.createUnmarshaller().unmarshal(new ByteArrayInputStream(response.getBody()));
  assertNotNull(clusterVersionModel);
  assertNotNull(clusterVersionModel.getVersion());
  LOG.info("success retrieving storage cluster version as XML");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.rest.client.TestRemoteTable </h4><pre class="type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPut() throws IOException {
  Put put=new Put(ROW_3);
  put.addColumn(COLUMN_1,QUALIFIER_1,VALUE_1);
  remoteTable.put(put);
  Get get=new Get(ROW_3);
  get.addFamily(COLUMN_1);
  Result result=remoteTable.get(get);
  byte[] value=result.getValue(COLUMN_1,QUALIFIER_1);
  assertNotNull(value);
  assertTrue(Bytes.equals(VALUE_1,value));
  List<Put> puts=new ArrayList<Put>();
  put=new Put(ROW_3);
  put.addColumn(COLUMN_2,QUALIFIER_2,VALUE_2);
  puts.add(put);
  put=new Put(ROW_4);
  put.addColumn(COLUMN_1,QUALIFIER_1,VALUE_1);
  puts.add(put);
  put=new Put(ROW_4);
  put.addColumn(COLUMN_2,QUALIFIER_2,VALUE_2);
  puts.add(put);
  remoteTable.put(puts);
  get=new Get(ROW_3);
  get.addFamily(COLUMN_2);
  result=remoteTable.get(get);
  value=result.getValue(COLUMN_2,QUALIFIER_2);
  assertNotNull(value);
  assertTrue(Bytes.equals(VALUE_2,value));
  get=new Get(ROW_4);
  result=remoteTable.get(get);
  value=result.getValue(COLUMN_1,QUALIFIER_1);
  assertNotNull(value);
  assertTrue(Bytes.equals(VALUE_1,value));
  value=result.getValue(COLUMN_2,QUALIFIER_2);
  assertNotNull(value);
  assertTrue(Bytes.equals(VALUE_2,value));
  assertTrue(Bytes.equals(Bytes.toBytes("TestRemoteTable"),remoteTable.getTableName()));
}

</code></pre>

<br>
<pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test RemoteHTable.Scanner 
 */
@Test public void testScanner() throws IOException {
  List<Put> puts=new ArrayList<Put>();
  Put put=new Put(ROW_1);
  put.addColumn(COLUMN_1,QUALIFIER_1,VALUE_1);
  puts.add(put);
  put=new Put(ROW_2);
  put.addColumn(COLUMN_1,QUALIFIER_1,VALUE_1);
  puts.add(put);
  put=new Put(ROW_3);
  put.addColumn(COLUMN_1,QUALIFIER_1,VALUE_1);
  puts.add(put);
  put=new Put(ROW_4);
  put.addColumn(COLUMN_1,QUALIFIER_1,VALUE_1);
  puts.add(put);
  remoteTable.put(puts);
  ResultScanner scanner=remoteTable.getScanner(new Scan());
  Result[] results=scanner.next(1);
  assertNotNull(results);
  assertEquals(1,results.length);
  assertTrue(Bytes.equals(ROW_1,results[0].getRow()));
  Result result=scanner.next();
  assertNotNull(result);
  assertTrue(Bytes.equals(ROW_2,result.getRow()));
  results=scanner.next(2);
  assertNotNull(results);
  assertEquals(2,results.length);
  assertTrue(Bytes.equals(ROW_3,results[0].getRow()));
  assertTrue(Bytes.equals(ROW_4,results[1].getRow()));
  results=scanner.next(1);
  assertNull(results);
  scanner.close();
  scanner=remoteTable.getScanner(COLUMN_1);
  results=scanner.next(4);
  assertNotNull(results);
  assertEquals(4,results.length);
  assertTrue(Bytes.equals(ROW_1,results[0].getRow()));
  assertTrue(Bytes.equals(ROW_2,results[1].getRow()));
  assertTrue(Bytes.equals(ROW_3,results[2].getRow()));
  assertTrue(Bytes.equals(ROW_4,results[3].getRow()));
  scanner.close();
  scanner=remoteTable.getScanner(COLUMN_1,QUALIFIER_1);
  results=scanner.next(4);
  assertNotNull(results);
  assertEquals(4,results.length);
  assertTrue(Bytes.equals(ROW_1,results[0].getRow()));
  assertTrue(Bytes.equals(ROW_2,results[1].getRow()));
  assertTrue(Bytes.equals(ROW_3,results[2].getRow()));
  assertTrue(Bytes.equals(ROW_4,results[3].getRow()));
  scanner.close();
  assertTrue(remoteTable.isAutoFlush());
}

</code></pre>

<br>
<pre class="type-10 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGet() throws IOException {
  Get get=new Get(ROW_1);
  Result result=remoteTable.get(get);
  byte[] value1=result.getValue(COLUMN_1,QUALIFIER_1);
  byte[] value2=result.getValue(COLUMN_2,QUALIFIER_2);
  assertNotNull(value1);
  assertTrue(Bytes.equals(VALUE_1,value1));
  assertNull(value2);
  get=new Get(ROW_1);
  get.addFamily(COLUMN_3);
  result=remoteTable.get(get);
  value1=result.getValue(COLUMN_1,QUALIFIER_1);
  value2=result.getValue(COLUMN_2,QUALIFIER_2);
  assertNull(value1);
  assertNull(value2);
  get=new Get(ROW_1);
  get.addColumn(COLUMN_1,QUALIFIER_1);
  get.addColumn(COLUMN_2,QUALIFIER_2);
  result=remoteTable.get(get);
  value1=result.getValue(COLUMN_1,QUALIFIER_1);
  value2=result.getValue(COLUMN_2,QUALIFIER_2);
  assertNotNull(value1);
  assertTrue(Bytes.equals(VALUE_1,value1));
  assertNull(value2);
  get=new Get(ROW_2);
  result=remoteTable.get(get);
  value1=result.getValue(COLUMN_1,QUALIFIER_1);
  value2=result.getValue(COLUMN_2,QUALIFIER_2);
  assertNotNull(value1);
  assertTrue(Bytes.equals(VALUE_2,value1));
  assertNotNull(value2);
  assertTrue(Bytes.equals(VALUE_2,value2));
  get=new Get(ROW_2);
  get.addFamily(COLUMN_1);
  result=remoteTable.get(get);
  value1=result.getValue(COLUMN_1,QUALIFIER_1);
  value2=result.getValue(COLUMN_2,QUALIFIER_2);
  assertNotNull(value1);
  assertTrue(Bytes.equals(VALUE_2,value1));
  assertNull(value2);
  get=new Get(ROW_2);
  get.addColumn(COLUMN_1,QUALIFIER_1);
  get.addColumn(COLUMN_2,QUALIFIER_2);
  result=remoteTable.get(get);
  value1=result.getValue(COLUMN_1,QUALIFIER_1);
  value2=result.getValue(COLUMN_2,QUALIFIER_2);
  assertNotNull(value1);
  assertTrue(Bytes.equals(VALUE_2,value1));
  assertNotNull(value2);
  assertTrue(Bytes.equals(VALUE_2,value2));
  get=new Get(ROW_2);
  get.addFamily(COLUMN_1);
  get.addFamily(COLUMN_2);
  get.setTimeStamp(TS_1);
  result=remoteTable.get(get);
  value1=result.getValue(COLUMN_1,QUALIFIER_1);
  value2=result.getValue(COLUMN_2,QUALIFIER_2);
  assertNotNull(value1);
  assertTrue(Bytes.equals(VALUE_1,value1));
  assertNull(value2);
  get=new Get(ROW_2);
  get.addFamily(COLUMN_1);
  get.addFamily(COLUMN_2);
  get.setTimeRange(0,TS_1 + 1);
  result=remoteTable.get(get);
  value1=result.getValue(COLUMN_1,QUALIFIER_1);
  value2=result.getValue(COLUMN_2,QUALIFIER_2);
  assertNotNull(value1);
  assertTrue(Bytes.equals(VALUE_1,value1));
  assertNull(value2);
  get=new Get(ROW_2);
  get.addFamily(COLUMN_1);
  get.setMaxVersions(2);
  result=remoteTable.get(get);
  int count=0;
  for (  Cell kv : result.listCells()) {
    if (CellUtil.matchingFamily(kv,COLUMN_1) && TS_1 == kv.getTimestamp()) {
      assertTrue(CellUtil.matchingValue(kv,VALUE_1));
      count++;
    }
    if (CellUtil.matchingFamily(kv,COLUMN_1) && TS_2 == kv.getTimestamp()) {
      assertTrue(CellUtil.matchingValue(kv,VALUE_2));
      count++;
    }
  }
  assertEquals(2,count);
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiGet() throws Exception {
  ArrayList<Get> gets=new ArrayList<Get>();
  gets.add(new Get(ROW_1));
  gets.add(new Get(ROW_2));
  Result[] results=remoteTable.get(gets);
  assertNotNull(results);
  assertEquals(2,results.length);
  assertEquals(1,results[0].size());
  assertEquals(2,results[1].size());
  gets=new ArrayList<Get>();
  Get g=new Get(ROW_1);
  g.setMaxVersions(3);
  gets.add(g);
  gets.add(new Get(ROW_2));
  results=remoteTable.get(gets);
  assertNotNull(results);
  assertEquals(2,results.length);
  assertEquals(1,results[0].size());
  assertEquals(3,results[1].size());
  gets=new ArrayList<Get>();
  gets.add(new Get(Bytes.toBytes("RESALLYREALLYNOTTHERE")));
  results=remoteTable.get(gets);
  assertNotNull(results);
  assertEquals(0,results.length);
  gets=new ArrayList<Get>();
  gets.add(new Get(Bytes.toBytes("RESALLYREALLYNOTTHERE")));
  gets.add(new Get(ROW_1));
  gets.add(new Get(ROW_2));
  results=remoteTable.get(gets);
  assertNotNull(results);
  assertEquals(2,results.length);
}

</code></pre>

<br>
<pre class="type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDelete() throws IOException {
  Put put=new Put(ROW_3);
  put.addColumn(COLUMN_1,QUALIFIER_1,VALUE_1);
  put.addColumn(COLUMN_2,QUALIFIER_2,VALUE_2);
  remoteTable.put(put);
  Get get=new Get(ROW_3);
  get.addFamily(COLUMN_1);
  get.addFamily(COLUMN_2);
  Result result=remoteTable.get(get);
  byte[] value1=result.getValue(COLUMN_1,QUALIFIER_1);
  byte[] value2=result.getValue(COLUMN_2,QUALIFIER_2);
  assertNotNull(value1);
  assertTrue(Bytes.equals(VALUE_1,value1));
  assertNotNull(value2);
  assertTrue(Bytes.equals(VALUE_2,value2));
  Delete delete=new Delete(ROW_3);
  delete.addColumn(COLUMN_2,QUALIFIER_2);
  remoteTable.delete(delete);
  get=new Get(ROW_3);
  get.addFamily(COLUMN_1);
  get.addFamily(COLUMN_2);
  result=remoteTable.get(get);
  value1=result.getValue(COLUMN_1,QUALIFIER_1);
  value2=result.getValue(COLUMN_2,QUALIFIER_2);
  assertNotNull(value1);
  assertTrue(Bytes.equals(VALUE_1,value1));
  assertNull(value2);
  delete=new Delete(ROW_3);
  delete.setTimestamp(1L);
  remoteTable.delete(delete);
  get=new Get(ROW_3);
  get.addFamily(COLUMN_1);
  get.addFamily(COLUMN_2);
  result=remoteTable.get(get);
  value1=result.getValue(COLUMN_1,QUALIFIER_1);
  value2=result.getValue(COLUMN_2,QUALIFIER_2);
  assertNotNull(value1);
  assertTrue(Bytes.equals(VALUE_1,value1));
  assertNull(value2);
  delete=new Delete(ROW_3);
  remoteTable.delete(delete);
  get=new Get(ROW_3);
  get.addFamily(COLUMN_1);
  get.addFamily(COLUMN_2);
  result=remoteTable.get(get);
  value1=result.getValue(COLUMN_1,QUALIFIER_1);
  value2=result.getValue(COLUMN_2,QUALIFIER_2);
  assertNull(value1);
  assertNull(value2);
}

</code></pre>

<br>
<pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCheckAndDelete() throws IOException {
  Get get=new Get(ROW_1);
  Result result=remoteTable.get(get);
  byte[] value1=result.getValue(COLUMN_1,QUALIFIER_1);
  byte[] value2=result.getValue(COLUMN_2,QUALIFIER_2);
  assertNotNull(value1);
  assertTrue(Bytes.equals(VALUE_1,value1));
  assertNull(value2);
  assertTrue(remoteTable.exists(get));
  assertEquals(1,remoteTable.existsAll(Collections.singletonList(get)).length);
  Delete delete=new Delete(ROW_1);
  remoteTable.checkAndDelete(ROW_1,COLUMN_1,QUALIFIER_1,VALUE_1,delete);
  assertFalse(remoteTable.exists(get));
  Put put=new Put(ROW_1);
  put.addColumn(COLUMN_1,QUALIFIER_1,VALUE_1);
  remoteTable.put(put);
  assertTrue(remoteTable.checkAndPut(ROW_1,COLUMN_1,QUALIFIER_1,VALUE_1,put));
  assertFalse(remoteTable.checkAndPut(ROW_1,COLUMN_1,QUALIFIER_1,VALUE_2,put));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.security.TestEncryptionUtil </h4><pre class="type-4 type-11 type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testKeyWrapping() throws Exception {
  Configuration conf=new Configuration();
  conf.set(HConstants.CRYPTO_KEYPROVIDER_CONF_KEY,KeyProviderForTesting.class.getName());
  byte[] keyBytes=new byte[AES.KEY_LENGTH];
  new SecureRandom().nextBytes(keyBytes);
  String algorithm=conf.get(HConstants.CRYPTO_KEY_ALGORITHM_CONF_KEY,HConstants.CIPHER_AES);
  Key key=new SecretKeySpec(keyBytes,algorithm);
  byte[] wrappedKeyBytes=EncryptionUtil.wrapKey(conf,"hbase",key);
  assertNotNull(wrappedKeyBytes);
  Key unwrappedKey=EncryptionUtil.unwrapKey(conf,"hbase",wrappedKeyBytes);
  assertNotNull(unwrappedKey);
  assertTrue(unwrappedKey instanceof SecretKeySpec);
  assertTrue("Unwrapped key bytes do not match original",Bytes.equals(keyBytes,unwrappedKey.getEncoded()));
  try {
    EncryptionUtil.unwrapKey(conf,"other",wrappedKeyBytes);
    fail("Unwrap with incorrect key did not throw KeyException");
  }
 catch (  KeyException e) {
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-17 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=KeyException.class) public void testWALKeyWrappingWithIncorrectKey() throws Exception {
  Configuration conf=new Configuration();
  conf.set(HConstants.CRYPTO_KEYPROVIDER_CONF_KEY,KeyProviderForTesting.class.getName());
  byte[] keyBytes=new byte[AES.KEY_LENGTH];
  new SecureRandom().nextBytes(keyBytes);
  String algorithm=conf.get(HConstants.CRYPTO_WAL_ALGORITHM_CONF_KEY,HConstants.CIPHER_AES);
  Key key=new SecretKeySpec(keyBytes,algorithm);
  byte[] wrappedKeyBytes=EncryptionUtil.wrapKey(conf,"hbase",key);
  assertNotNull(wrappedKeyBytes);
  EncryptionUtil.unwrapWALKey(conf,"other",wrappedKeyBytes);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWALKeyWrapping() throws Exception {
  Configuration conf=new Configuration();
  conf.set(HConstants.CRYPTO_KEYPROVIDER_CONF_KEY,KeyProviderForTesting.class.getName());
  byte[] keyBytes=new byte[AES.KEY_LENGTH];
  new SecureRandom().nextBytes(keyBytes);
  String algorithm=conf.get(HConstants.CRYPTO_WAL_ALGORITHM_CONF_KEY,HConstants.CIPHER_AES);
  Key key=new SecretKeySpec(keyBytes,algorithm);
  byte[] wrappedKeyBytes=EncryptionUtil.wrapKey(conf,"hbase",key);
  assertNotNull(wrappedKeyBytes);
  Key unwrappedKey=EncryptionUtil.unwrapWALKey(conf,"hbase",wrappedKeyBytes);
  assertNotNull(unwrappedKey);
  assertTrue(unwrappedKey instanceof SecretKeySpec);
  assertTrue("Unwrapped key bytes do not match original",Bytes.equals(keyBytes,unwrappedKey.getEncoded()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.security.TestUser </h4><pre class="type-9 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Make sure that we're returning a result for the current user.
 * Previously getCurrent() was returning null if not initialized on
 * non-secure Hadoop variants.
 */
@Test public void testGetCurrent() throws Exception {
  User user1=User.getCurrent();
  assertNotNull(user1.ugi);
  LOG.debug("User1 is " + user1.getName());
  for (int i=0; i < 100; i++) {
    User u=User.getCurrent();
    assertNotNull(u);
    assertEquals(user1.getName(),u.getName());
    assertEquals(user1,u);
    assertEquals(user1.hashCode(),u.hashCode());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.security.TestUsersOperationsWithSecureHadoop </h4><pre class="type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * test login with security enabled configuration To run this test, we must specify the following
 * system properties:
 * <p>
 * <b> hbase.regionserver.kerberos.principal </b>
 * <p>
 * <b> hbase.regionserver.keytab.file </b>
 * @throws IOException
 */
@Test public void testUserLoginInSecureHadoop() throws Exception {
  UserGroupInformation defaultLogin=UserGroupInformation.getLoginUser();
  Configuration conf=getConfigurationWoPrincipal();
  User.login(conf,HBaseKerberosUtils.KRB_KEYTAB_FILE,HBaseKerberosUtils.KRB_PRINCIPAL,"localhost");
  UserGroupInformation failLogin=UserGroupInformation.getLoginUser();
  assertTrue("ugi should be the same in case fail login",defaultLogin.equals(failLogin));
  String nnKeyTab=getKeytabFileForTesting();
  String dnPrincipal=getPrincipalForTesting();
  assertNotNull("KerberosKeytab was not specified",nnKeyTab);
  assertNotNull("KerberosPrincipal was not specified",dnPrincipal);
  conf=getSecuredConfiguration();
  UserGroupInformation.setConfiguration(conf);
  User.login(conf,HBaseKerberosUtils.KRB_KEYTAB_FILE,HBaseKerberosUtils.KRB_PRINCIPAL,"localhost");
  UserGroupInformation successLogin=UserGroupInformation.getLoginUser();
  assertFalse("ugi should be different in in case success login",defaultLogin.equals(successLogin));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.security.access.TestAccessController </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=180000) public void testAccessControlClientUserPerms() throws Exception {
  TableName tname=TableName.valueOf("testAccessControlClientUserPerms");
  createTestTable(tname);
  try {
    final String regex=tname.getNameWithNamespaceInclAsString();
    User testUserPerms=User.createUserForTesting(conf,"testUserPerms",new String[0]);
    assertEquals(0,testUserPerms.runAs(getPrivilegedAction(regex)).size());
    grantOnTable(TEST_UTIL,testUserPerms.getShortName(),tname,null,null,Action.ADMIN);
    List<UserPermission> perms=testUserPerms.runAs(getPrivilegedAction(regex));
    assertNotNull(perms);
    assertEquals(2,perms.size());
  }
  finally {
    deleteTable(TEST_UTIL,tname);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.security.access.TestAccessController2 </h4><pre class="type-4 type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=180000) public void testCreateWithCorrectOwner() throws Exception {
  final User testUser=User.createUserForTesting(TEST_UTIL.getConfiguration(),"TestUser",new String[0]);
  SecureTestUtil.grantGlobal(TEST_UTIL,testUser.getShortName(),Action.CREATE);
  verifyAllowed(new AccessTestAction(){
    @Override public Object run() throws Exception {
      HTableDescriptor desc=new HTableDescriptor(TEST_TABLE.getTableName());
      desc.addFamily(new HColumnDescriptor(TEST_FAMILY));
      try (Connection connection=ConnectionFactory.createConnection(TEST_UTIL.getConfiguration(),testUser)){
        try (Admin admin=connection.getAdmin()){
          createTable(TEST_UTIL,admin,desc);
        }
       }
       return null;
    }
  }
,testUser);
  TEST_UTIL.waitTableAvailable(TEST_TABLE.getTableName());
  List<TablePermission> perms=AccessControlLists.getTablePermissions(conf,TEST_TABLE.getTableName()).get(testUser.getShortName());
  assertNotNull(perms);
  assertFalse(perms.isEmpty());
  assertTrue(perms.get(0).implies(Permission.Action.READ));
  assertTrue(perms.get(0).implies(Permission.Action.WRITE));
  assertTrue(perms.get(0).implies(Permission.Action.EXEC));
  assertTrue(perms.get(0).implies(Permission.Action.CREATE));
  assertTrue(perms.get(0).implies(Permission.Action.ADMIN));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.security.access.TestTablePermissions </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasicWrite() throws Exception {
  Configuration conf=UTIL.getConfiguration();
  AccessControlLists.addUserPermission(conf,new UserPermission(Bytes.toBytes("george"),TEST_TABLE,null,(byte[])null,UserPermission.Action.READ,UserPermission.Action.WRITE));
  AccessControlLists.addUserPermission(conf,new UserPermission(Bytes.toBytes("hubert"),TEST_TABLE,null,(byte[])null,UserPermission.Action.READ));
  AccessControlLists.addUserPermission(conf,new UserPermission(Bytes.toBytes("humphrey"),TEST_TABLE,TEST_FAMILY,TEST_QUALIFIER,UserPermission.Action.READ));
  ListMultimap<String,TablePermission> perms=AccessControlLists.getTablePermissions(conf,TEST_TABLE);
  List<TablePermission> userPerms=perms.get("george");
  assertNotNull("Should have permissions for george",userPerms);
  assertEquals("Should have 1 permission for george",1,userPerms.size());
  TablePermission permission=userPerms.get(0);
  assertEquals("Permission should be for " + TEST_TABLE,TEST_TABLE,permission.getTableName());
  assertNull("Column family should be empty",permission.getFamily());
  assertNotNull(permission.getActions());
  assertEquals(2,permission.getActions().length);
  List<TablePermission.Action> actions=Arrays.asList(permission.getActions());
  assertTrue(actions.contains(TablePermission.Action.READ));
  assertTrue(actions.contains(TablePermission.Action.WRITE));
  userPerms=perms.get("hubert");
  assertNotNull("Should have permissions for hubert",userPerms);
  assertEquals("Should have 1 permission for hubert",1,userPerms.size());
  permission=userPerms.get(0);
  assertEquals("Permission should be for " + TEST_TABLE,TEST_TABLE,permission.getTableName());
  assertNull("Column family should be empty",permission.getFamily());
  assertNotNull(permission.getActions());
  assertEquals(1,permission.getActions().length);
  actions=Arrays.asList(permission.getActions());
  assertTrue(actions.contains(TablePermission.Action.READ));
  assertFalse(actions.contains(TablePermission.Action.WRITE));
  userPerms=perms.get("humphrey");
  assertNotNull("Should have permissions for humphrey",userPerms);
  assertEquals("Should have 1 permission for humphrey",1,userPerms.size());
  permission=userPerms.get(0);
  assertEquals("Permission should be for " + TEST_TABLE,TEST_TABLE,permission.getTableName());
  assertTrue("Permission should be for family " + TEST_FAMILY,Bytes.equals(TEST_FAMILY,permission.getFamily()));
  assertTrue("Permission should be for qualifier " + TEST_QUALIFIER,Bytes.equals(TEST_QUALIFIER,permission.getQualifier()));
  assertNotNull(permission.getActions());
  assertEquals(1,permission.getActions().length);
  actions=Arrays.asList(permission.getActions());
  assertTrue(actions.contains(TablePermission.Action.READ));
  assertFalse(actions.contains(TablePermission.Action.WRITE));
  AccessControlLists.addUserPermission(conf,new UserPermission(Bytes.toBytes("hubert"),TEST_TABLE2,null,(byte[])null,TablePermission.Action.READ,TablePermission.Action.WRITE));
  Map<byte[],ListMultimap<String,TablePermission>> allPerms=AccessControlLists.loadAll(conf);
  assertEquals("Full permission map should have entries for both test tables",2,allPerms.size());
  userPerms=allPerms.get(TEST_TABLE.getName()).get("hubert");
  assertNotNull(userPerms);
  assertEquals(1,userPerms.size());
  permission=userPerms.get(0);
  assertEquals(TEST_TABLE,permission.getTableName());
  assertEquals(1,permission.getActions().length);
  assertEquals(TablePermission.Action.READ,permission.getActions()[0]);
  userPerms=allPerms.get(TEST_TABLE2.getName()).get("hubert");
  assertNotNull(userPerms);
  assertEquals(1,userPerms.size());
  permission=userPerms.get(0);
  assertEquals(TEST_TABLE2,permission.getTableName());
  assertEquals(2,permission.getActions().length);
  actions=Arrays.asList(permission.getActions());
  assertTrue(actions.contains(TablePermission.Action.READ));
  assertTrue(actions.contains(TablePermission.Action.WRITE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.security.token.TestTokenAuthentication </h4><pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUseExistingToken() throws Exception {
  User user=User.createUserForTesting(TEST_UTIL.getConfiguration(),"testuser2",new String[]{"testgroup"});
  Token<AuthenticationTokenIdentifier> token=secretManager.generateToken(user.getName());
  assertNotNull(token);
  user.addToken(token);
  Token<AuthenticationTokenIdentifier> firstToken=new AuthenticationTokenSelector().selectToken(token.getService(),user.getTokens());
  assertNotNull(firstToken);
  assertEquals(token,firstToken);
  Connection conn=ConnectionFactory.createConnection(TEST_UTIL.getConfiguration());
  try {
    assertFalse(TokenUtil.addTokenIfMissing(conn,user));
    Token<AuthenticationTokenIdentifier> secondToken=new AuthenticationTokenSelector().selectToken(token.getService(),user.getTokens());
    assertEquals(firstToken,secondToken);
  }
  finally {
    conn.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.security.token.TestZKSecretWatcher </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testKeyUpdate() throws Exception {
  assertTrue(KEY_MASTER.isMaster());
  assertFalse(KEY_SLAVE.isMaster());
  int maxKeyId=0;
  KEY_MASTER.rollCurrentKey();
  AuthenticationKey key1=KEY_MASTER.getCurrentKey();
  assertNotNull(key1);
  LOG.debug("Master current key: " + key1.getKeyId());
  Thread.sleep(1000);
  AuthenticationKey slaveCurrent=KEY_SLAVE.getCurrentKey();
  assertNotNull(slaveCurrent);
  assertEquals(key1,slaveCurrent);
  LOG.debug("Slave current key: " + slaveCurrent.getKeyId());
  KEY_MASTER.rollCurrentKey();
  AuthenticationKey key2=KEY_MASTER.getCurrentKey();
  LOG.debug("Master new current key: " + key2.getKeyId());
  KEY_MASTER.rollCurrentKey();
  AuthenticationKey key3=KEY_MASTER.getCurrentKey();
  LOG.debug("Master new current key: " + key3.getKeyId());
  key1.setExpiration(EnvironmentEdgeManager.currentTime() - 1000);
  KEY_MASTER.removeExpiredKeys();
  assertNull(KEY_MASTER.getKey(key1.getKeyId()));
  KEY_SLAVE.getLatch().await();
  AuthenticationKey slave2=KEY_SLAVE.getKey(key2.getKeyId());
  assertNotNull(slave2);
  assertEquals(key2,slave2);
  AuthenticationKey slave3=KEY_SLAVE.getKey(key3.getKeyId());
  assertNotNull(slave3);
  assertEquals(key3,slave3);
  slaveCurrent=KEY_SLAVE.getCurrentKey();
  assertEquals(key3,slaveCurrent);
  LOG.debug("Slave current key: " + slaveCurrent.getKeyId());
  assertNull(KEY_SLAVE.getKey(key1.getKeyId()));
  Configuration conf=TEST_UTIL.getConfiguration();
  ZooKeeperWatcher zk=newZK(conf,"server3",new MockAbortable());
  KEY_SLAVE2=new AuthenticationTokenSecretManager(conf,zk,"server3",60 * 60 * 1000,60 * 1000);
  KEY_SLAVE2.start();
  Thread.sleep(1000);
  slave2=KEY_SLAVE2.getKey(key2.getKeyId());
  assertNotNull(slave2);
  assertEquals(key2,slave2);
  slave3=KEY_SLAVE2.getKey(key3.getKeyId());
  assertNotNull(slave3);
  assertEquals(key3,slave3);
  slaveCurrent=KEY_SLAVE2.getCurrentKey();
  assertEquals(key3,slaveCurrent);
  assertNull(KEY_SLAVE2.getKey(key1.getKeyId()));
  KEY_MASTER.stop();
  Thread.sleep(1000);
  assertFalse(KEY_MASTER.isMaster());
  AuthenticationTokenSecretManager[] mgrs=new AuthenticationTokenSecretManager[]{KEY_SLAVE,KEY_SLAVE2};
  AuthenticationTokenSecretManager newMaster=null;
  int tries=0;
  while (newMaster == null && tries++ < 5) {
    for (    AuthenticationTokenSecretManager mgr : mgrs) {
      if (mgr.isMaster()) {
        newMaster=mgr;
        break;
      }
    }
    if (newMaster == null) {
      Thread.sleep(500);
    }
  }
  assertNotNull(newMaster);
  AuthenticationKey current=newMaster.getCurrentKey();
  assertTrue(current.getKeyId() >= slaveCurrent.getKeyId());
  LOG.debug("New master, current key: " + current.getKeyId());
  newMaster.rollCurrentKey();
  AuthenticationKey newCurrent=newMaster.getCurrentKey();
  LOG.debug("New master, rolled new current key: " + newCurrent.getKeyId());
  assertTrue(newCurrent.getKeyId() > current.getKeyId());
  ZooKeeperWatcher zk3=newZK(conf,"server4",new MockAbortable());
  KEY_SLAVE3=new AuthenticationTokenSecretManager(conf,zk3,"server4",60 * 60 * 1000,60 * 1000);
  KEY_SLAVE3.start();
  Thread.sleep(5000);
  newMaster.stop();
  Thread.sleep(5000);
  assertFalse(newMaster.isMaster());
  mgrs=new AuthenticationTokenSecretManager[]{KEY_SLAVE,KEY_SLAVE2,KEY_SLAVE3};
  newMaster=null;
  tries=0;
  while (newMaster == null && tries++ < 5) {
    for (    AuthenticationTokenSecretManager mgr : mgrs) {
      if (mgr.isMaster()) {
        newMaster=mgr;
        break;
      }
    }
    if (newMaster == null) {
      Thread.sleep(500);
    }
  }
  assertNotNull(newMaster);
  AuthenticationKey current2=newMaster.getCurrentKey();
  assertTrue(current2.getKeyId() >= newCurrent.getKeyId());
  LOG.debug("New master 2, current key: " + current2.getKeyId());
  newMaster.rollCurrentKey();
  AuthenticationKey newCurrent2=newMaster.getCurrentKey();
  LOG.debug("New master 2, rolled new current key: " + newCurrent2.getKeyId());
  assertTrue(newCurrent2.getKeyId() > current2.getKeyId());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.security.token.TestZKSecretWatcherRefreshKeys </h4><pre class="type-4 type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testRefreshKeys() throws Exception {
  Configuration conf=TEST_UTIL.getConfiguration();
  ZooKeeperWatcher zk=newZK(conf,"127.0.0.1",new MockAbortable());
  AuthenticationTokenSecretManager keyManager=new AuthenticationTokenSecretManager(conf,zk,"127.0.0.1",60 * 60 * 1000,60 * 1000);
  ZKSecretWatcher watcher=new ZKSecretWatcher(conf,zk,keyManager);
  ZKUtil.deleteChildrenRecursively(zk,watcher.getKeysParentZNode());
  Integer[] keys={1,2,3,4,5,6};
  for (  Integer key : keys) {
    AuthenticationKey ak=new AuthenticationKey(key,System.currentTimeMillis() + 600 * 1000,null);
    ZKUtil.createWithParents(zk,ZKUtil.joinZNode(watcher.getKeysParentZNode(),key.toString()),Writables.getBytes(ak));
  }
  Assert.assertNull(keyManager.getCurrentKey());
  watcher.refreshKeys();
  for (  Integer key : keys) {
    Assert.assertNotNull(keyManager.getKey(key.intValue()));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.security.visibility.TestVisibilityLabels </h4><pre class="type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLabelsWithCheckAndPut() throws Throwable {
  TableName tableName=TableName.valueOf(TEST_NAME.getMethodName());
  try (Table table=TEST_UTIL.createTable(tableName,fam)){
    byte[] row1=Bytes.toBytes("row1");
    Put put=new Put(row1);
    put.addColumn(fam,qual,HConstants.LATEST_TIMESTAMP,value);
    put.setCellVisibility(new CellVisibility(SECRET + " & " + CONFIDENTIAL));
    table.checkAndPut(row1,fam,qual,null,put);
    byte[] row2=Bytes.toBytes("row2");
    put=new Put(row2);
    put.addColumn(fam,qual,HConstants.LATEST_TIMESTAMP,value);
    put.setCellVisibility(new CellVisibility(SECRET));
    table.checkAndPut(row2,fam,qual,null,put);
    Scan scan=new Scan();
    scan.setAuthorizations(new Authorizations(SECRET));
    ResultScanner scanner=table.getScanner(scan);
    Result result=scanner.next();
    assertTrue(!result.isEmpty());
    assertTrue(Bytes.equals(row2,result.getRow()));
    result=scanner.next();
    assertNull(result);
  }
 }

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleVersions() throws Exception {
  final byte[] r1=Bytes.toBytes("row1");
  final byte[] r2=Bytes.toBytes("row2");
  final byte[] v1=Bytes.toBytes("100");
  final byte[] v2=Bytes.toBytes("101");
  final byte[] fam2=Bytes.toBytes("info2");
  final byte[] qual2=Bytes.toBytes("qual2");
  TableName tableName=TableName.valueOf(TEST_NAME.getMethodName());
  HTableDescriptor desc=new HTableDescriptor(tableName);
  HColumnDescriptor col=new HColumnDescriptor(fam);
  desc.addFamily(col);
  col=new HColumnDescriptor(fam2);
  col.setMaxVersions(5);
  desc.addFamily(col);
  TEST_UTIL.getHBaseAdmin().createTable(desc);
  try (Table table=TEST_UTIL.getConnection().getTable(tableName)){
    Put put=new Put(r1);
    put.addColumn(fam,qual,3l,v1);
    put.addColumn(fam,qual2,3l,v1);
    put.addColumn(fam2,qual,3l,v1);
    put.addColumn(fam2,qual2,3l,v1);
    put.setCellVisibility(new CellVisibility(SECRET));
    table.put(put);
    put=new Put(r1);
    put.addColumn(fam,qual,4l,v2);
    put.addColumn(fam,qual2,4l,v2);
    put.addColumn(fam2,qual,4l,v2);
    put.addColumn(fam2,qual2,4l,v2);
    put.setCellVisibility(new CellVisibility(PRIVATE));
    table.put(put);
    put=new Put(r2);
    put.addColumn(fam,qual,3l,v1);
    put.addColumn(fam,qual2,3l,v1);
    put.addColumn(fam2,qual,3l,v1);
    put.addColumn(fam2,qual2,3l,v1);
    put.setCellVisibility(new CellVisibility(SECRET));
    table.put(put);
    put=new Put(r2);
    put.addColumn(fam,qual,4l,v2);
    put.addColumn(fam,qual2,4l,v2);
    put.addColumn(fam2,qual,4l,v2);
    put.addColumn(fam2,qual2,4l,v2);
    put.setCellVisibility(new CellVisibility(SECRET));
    table.put(put);
    Scan s=new Scan();
    s.setMaxVersions(1);
    s.setAuthorizations(new Authorizations(SECRET));
    ResultScanner scanner=table.getScanner(s);
    Result result=scanner.next();
    assertTrue(Bytes.equals(r1,result.getRow()));
    assertNull(result.getColumnLatestCell(fam,qual));
    assertNull(result.getColumnLatestCell(fam,qual2));
    Cell cell=result.getColumnLatestCell(fam2,qual);
    assertNotNull(cell);
    assertTrue(Bytes.equals(v1,0,v1.length,cell.getValueArray(),cell.getValueOffset(),cell.getValueLength()));
    cell=result.getColumnLatestCell(fam2,qual2);
    assertNotNull(cell);
    assertTrue(Bytes.equals(v1,0,v1.length,cell.getValueArray(),cell.getValueOffset(),cell.getValueLength()));
    result=scanner.next();
    assertTrue(Bytes.equals(r2,result.getRow()));
    cell=result.getColumnLatestCell(fam,qual);
    assertNotNull(cell);
    assertTrue(Bytes.equals(v2,0,v2.length,cell.getValueArray(),cell.getValueOffset(),cell.getValueLength()));
    cell=result.getColumnLatestCell(fam,qual2);
    assertNotNull(cell);
    assertTrue(Bytes.equals(v2,0,v2.length,cell.getValueArray(),cell.getValueOffset(),cell.getValueLength()));
    cell=result.getColumnLatestCell(fam2,qual);
    assertNotNull(cell);
    assertTrue(Bytes.equals(v2,0,v2.length,cell.getValueArray(),cell.getValueOffset(),cell.getValueLength()));
    cell=result.getColumnLatestCell(fam2,qual2);
    assertNotNull(cell);
    assertTrue(Bytes.equals(v2,0,v2.length,cell.getValueArray(),cell.getValueOffset(),cell.getValueLength()));
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsWithACL </h4><pre class="type-4 type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScanForUserWithFewerLabelAuthsThanLabelsInScanAuthorizations() throws Throwable {
  String[] auths={SECRET};
  String user="user2";
  VisibilityClient.setAuths(TEST_UTIL.getConnection(),auths,user);
  TableName tableName=TableName.valueOf(TEST_NAME.getMethodName());
  final Table table=createTableAndWriteDataWithLabels(tableName,SECRET + "&" + CONFIDENTIAL+ "&!"+ PRIVATE,SECRET + "&!" + PRIVATE);
  SecureTestUtil.grantOnTable(TEST_UTIL,NORMAL_USER2.getShortName(),tableName,null,null,Permission.Action.READ);
  PrivilegedExceptionAction<Void> scanAction=new PrivilegedExceptionAction<Void>(){
    public Void run() throws Exception {
      Scan s=new Scan();
      s.setAuthorizations(new Authorizations(SECRET,CONFIDENTIAL));
      try (Connection connection=ConnectionFactory.createConnection(conf);Table t=connection.getTable(table.getName())){
        ResultScanner scanner=t.getScanner(s);
        Result result=scanner.next();
        assertTrue(!result.isEmpty());
        assertTrue(Bytes.equals(Bytes.toBytes("row2"),result.getRow()));
        result=scanner.next();
        assertNull(result);
      }
       return null;
    }
  }
;
  NORMAL_USER2.runAs(scanAction);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLabelsTableOpsWithDifferentUsers() throws Throwable {
  PrivilegedExceptionAction<VisibilityLabelsResponse> action=new PrivilegedExceptionAction<VisibilityLabelsResponse>(){
    public VisibilityLabelsResponse run() throws Exception {
      try (Connection conn=ConnectionFactory.createConnection(conf)){
        return VisibilityClient.addLabels(conn,new String[]{"l1","l2"});
      }
 catch (      Throwable e) {
      }
      return null;
    }
  }
;
  VisibilityLabelsResponse response=NORMAL_USER1.runAs(action);
  assertEquals("org.apache.hadoop.hbase.security.AccessDeniedException",response.getResult(0).getException().getName());
  assertEquals("org.apache.hadoop.hbase.security.AccessDeniedException",response.getResult(1).getException().getName());
  action=new PrivilegedExceptionAction<VisibilityLabelsResponse>(){
    public VisibilityLabelsResponse run() throws Exception {
      try (Connection conn=ConnectionFactory.createConnection(conf)){
        return VisibilityClient.setAuths(conn,new String[]{CONFIDENTIAL,PRIVATE},"user1");
      }
 catch (      Throwable e) {
      }
      return null;
    }
  }
;
  response=NORMAL_USER1.runAs(action);
  assertEquals("org.apache.hadoop.hbase.security.AccessDeniedException",response.getResult(0).getException().getName());
  assertEquals("org.apache.hadoop.hbase.security.AccessDeniedException",response.getResult(1).getException().getName());
  action=new PrivilegedExceptionAction<VisibilityLabelsResponse>(){
    public VisibilityLabelsResponse run() throws Exception {
      try (Connection conn=ConnectionFactory.createConnection(conf)){
        return VisibilityClient.setAuths(conn,new String[]{CONFIDENTIAL,PRIVATE},"user1");
      }
 catch (      Throwable e) {
      }
      return null;
    }
  }
;
  response=SUPERUSER.runAs(action);
  assertTrue(response.getResult(0).getException().getValue().isEmpty());
  assertTrue(response.getResult(1).getException().getValue().isEmpty());
  action=new PrivilegedExceptionAction<VisibilityLabelsResponse>(){
    public VisibilityLabelsResponse run() throws Exception {
      try (Connection conn=ConnectionFactory.createConnection(conf)){
        return VisibilityClient.clearAuths(conn,new String[]{CONFIDENTIAL,PRIVATE},"user1");
      }
 catch (      Throwable e) {
      }
      return null;
    }
  }
;
  response=NORMAL_USER1.runAs(action);
  assertEquals("org.apache.hadoop.hbase.security.AccessDeniedException",response.getResult(0).getException().getName());
  assertEquals("org.apache.hadoop.hbase.security.AccessDeniedException",response.getResult(1).getException().getName());
  response=VisibilityClient.clearAuths(TEST_UTIL.getConnection(),new String[]{CONFIDENTIAL,PRIVATE},"user1");
  assertTrue(response.getResult(0).getException().getValue().isEmpty());
  assertTrue(response.getResult(1).getException().getValue().isEmpty());
  VisibilityClient.setAuths(TEST_UTIL.getConnection(),new String[]{CONFIDENTIAL,PRIVATE},"user3");
  PrivilegedExceptionAction<GetAuthsResponse> action1=new PrivilegedExceptionAction<GetAuthsResponse>(){
    public GetAuthsResponse run() throws Exception {
      try (Connection conn=ConnectionFactory.createConnection(conf)){
        return VisibilityClient.getAuths(conn,"user3");
      }
 catch (      Throwable e) {
      }
      return null;
    }
  }
;
  GetAuthsResponse authsResponse=NORMAL_USER1.runAs(action1);
  assertNull(authsResponse);
  authsResponse=SUPERUSER.runAs(action1);
  List<String> authsList=new ArrayList<String>();
  for (  ByteString authBS : authsResponse.getAuthList()) {
    authsList.add(Bytes.toString(authBS.toByteArray()));
  }
  assertEquals(2,authsList.size());
  assertTrue(authsList.contains(CONFIDENTIAL));
  assertTrue(authsList.contains(PRIVATE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.security.visibility.TestVisibilityLabelsWithSLGStack </h4><pre class="type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testWithSAGStack() throws Exception {
  TableName tableName=TableName.valueOf(TEST_NAME.getMethodName());
  try (Table table=TEST_UTIL.createTable(tableName,CF)){
    Put put=new Put(ROW_1);
    put.addColumn(CF,Q1,HConstants.LATEST_TIMESTAMP,value);
    put.setCellVisibility(new CellVisibility(SECRET));
    table.put(put);
    put=new Put(ROW_1);
    put.addColumn(CF,Q2,HConstants.LATEST_TIMESTAMP,value);
    put.setCellVisibility(new CellVisibility(CONFIDENTIAL));
    table.put(put);
    LabelFilteringScanLabelGenerator.labelToFilter=CONFIDENTIAL;
    Scan s=new Scan();
    s.setAuthorizations(new Authorizations(SECRET,CONFIDENTIAL));
    ResultScanner scanner=table.getScanner(s);
    Result next=scanner.next();
    assertNotNull(next.getColumnLatestCell(CF,Q1));
    assertNull(next.getColumnLatestCell(CF,Q2));
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.spark.TestJavaHBaseContext </h4><pre class="type-4 type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testBulkDelete() throws IOException {
  List<byte[]> list=new ArrayList<>();
  list.add(Bytes.toBytes("1"));
  list.add(Bytes.toBytes("2"));
  list.add(Bytes.toBytes("3"));
  JavaRDD<byte[]> rdd=jsc.parallelize(list);
  Configuration conf=htu.getConfiguration();
  populateTableWithMockData(conf,TableName.valueOf(tableName));
  JavaHBaseContext hbaseContext=new JavaHBaseContext(jsc,conf);
  hbaseContext.bulkDelete(rdd,TableName.valueOf(tableName),new JavaHBaseBulkDeleteExample.DeleteFunction(),2);
  try (Connection conn=ConnectionFactory.createConnection(conf);Table table=conn.getTable(TableName.valueOf(tableName))){
    Result result1=table.get(new Get(Bytes.toBytes("1")));
    Assert.assertNull("Row 1 should had been deleted",result1.getRow());
    Result result2=table.get(new Get(Bytes.toBytes("2")));
    Assert.assertNull("Row 2 should had been deleted",result2.getRow());
    Result result3=table.get(new Get(Bytes.toBytes("3")));
    Assert.assertNull("Row 3 should had been deleted",result3.getRow());
    Result result4=table.get(new Get(Bytes.toBytes("4")));
    Assert.assertNotNull("Row 4 should had been deleted",result4.getRow());
    Result result5=table.get(new Get(Bytes.toBytes("5")));
    Assert.assertNotNull("Row 5 should had been deleted",result5.getRow());
  }
 }

</code></pre>

<br>
<pre class="type-4 type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testBulkPut() throws IOException {
  List<String> list=new ArrayList<>();
  list.add("1," + columnFamilyStr + ",a,1");
  list.add("2," + columnFamilyStr + ",a,2");
  list.add("3," + columnFamilyStr + ",a,3");
  list.add("4," + columnFamilyStr + ",a,4");
  list.add("5," + columnFamilyStr + ",a,5");
  JavaRDD<String> rdd=jsc.parallelize(list);
  Configuration conf=htu.getConfiguration();
  JavaHBaseContext hbaseContext=new JavaHBaseContext(jsc,conf);
  Connection conn=ConnectionFactory.createConnection(conf);
  Table table=conn.getTable(TableName.valueOf(tableName));
  try {
    List<Delete> deletes=new ArrayList<>();
    for (int i=1; i < 6; i++) {
      deletes.add(new Delete(Bytes.toBytes(Integer.toString(i))));
    }
    table.delete(deletes);
  }
  finally {
    table.close();
  }
  hbaseContext.bulkPut(rdd,TableName.valueOf(tableName),new PutFunction());
  table=conn.getTable(TableName.valueOf(tableName));
  try {
    Result result1=table.get(new Get(Bytes.toBytes("1")));
    Assert.assertNotNull("Row 1 should had been deleted",result1.getRow());
    Result result2=table.get(new Get(Bytes.toBytes("2")));
    Assert.assertNotNull("Row 2 should had been deleted",result2.getRow());
    Result result3=table.get(new Get(Bytes.toBytes("3")));
    Assert.assertNotNull("Row 3 should had been deleted",result3.getRow());
    Result result4=table.get(new Get(Bytes.toBytes("4")));
    Assert.assertNotNull("Row 4 should had been deleted",result4.getRow());
    Result result5=table.get(new Get(Bytes.toBytes("5")));
    Assert.assertNotNull("Row 5 should had been deleted",result5.getRow());
  }
  finally {
    table.close();
    conn.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.thrift.TestMetricsThriftServerSourceFactoryImpl </h4><pre class="type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompatabilityRegistered() throws Exception {
  assertNotNull(CompatibilitySingletonFactory.getInstance(MetricsThriftServerSourceFactory.class));
  assertTrue(CompatibilitySingletonFactory.getInstance(MetricsThriftServerSourceFactory.class) instanceof MetricsThriftServerSourceFactoryImpl);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.thrift2.TestThriftHBaseServiceHandler </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteAllTimestamps() throws Exception {
  ThriftHBaseServiceHandler handler=createHandler();
  byte[] rowName="testDeleteAllTimestamps".getBytes();
  ByteBuffer table=wrap(tableAname);
  List<TColumnValue> columnValues=new ArrayList<TColumnValue>();
  TColumnValue columnValueA=new TColumnValue(wrap(familyAname),wrap(qualifierAname),wrap(valueAname));
  columnValueA.setTimestamp(System.currentTimeMillis() - 10);
  columnValues.add(columnValueA);
  TPut put=new TPut(wrap(rowName),columnValues);
  put.setColumnValues(columnValues);
  handler.put(table,put);
  columnValueA.setTimestamp(System.currentTimeMillis());
  handler.put(table,put);
  TGet get=new TGet(wrap(rowName));
  get.setMaxVersions(2);
  TResult result=handler.get(table,get);
  assertEquals(2,result.getColumnValuesSize());
  TDelete delete=new TDelete(wrap(rowName));
  List<TColumn> deleteColumns=new ArrayList<TColumn>();
  TColumn deleteColumn=new TColumn(wrap(familyAname));
  deleteColumn.setQualifier(qualifierAname);
  deleteColumns.add(deleteColumn);
  delete.setColumns(deleteColumns);
  delete.setDeleteType(TDeleteType.DELETE_COLUMNS);
  handler.deleteSingle(table,delete);
  get=new TGet(wrap(rowName));
  result=handler.get(table,get);
  assertNull(result.getRow());
  assertEquals(0,result.getColumnValuesSize());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutTTL() throws Exception {
  ThriftHBaseServiceHandler handler=createHandler();
  byte[] rowName="testPutTTL".getBytes();
  ByteBuffer table=wrap(tableAname);
  List<TColumnValue> columnValues=new ArrayList<TColumnValue>();
  columnValues.add(new TColumnValue(wrap(familyAname),wrap(qualifierAname),wrap(Bytes.toBytes(1L))));
  TPut put=new TPut(wrap(rowName),columnValues);
  put.setColumnValues(columnValues);
  Map<ByteBuffer,ByteBuffer> attributes=new HashMap<>();
  long ttlTimeMs=2000L;
  attributes.put(wrap(Bytes.toBytes("_ttl")),wrap(Bytes.toBytes(ttlTimeMs)));
  put.setAttributes(attributes);
  handler.put(table,put);
  TGet getOne=new TGet(wrap(rowName));
  TResult resultOne=handler.get(table,getOne);
  assertArrayEquals(rowName,resultOne.getRow());
  assertEquals(1,resultOne.getColumnValuesSize());
  Thread.sleep(ttlTimeMs * 15);
  TGet getTwo=new TGet(wrap(rowName));
  TResult resultTwo=handler.get(table,getTwo);
  assertNull(resultTwo.getRow());
  assertEquals(0,resultTwo.getColumnValuesSize());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.thrift2.TestThriftHBaseServiceHandlerWithLabels </h4><pre class="type-4 type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testIncrementWithTagsWithNotMatchLabels() throws Exception {
  ThriftHBaseServiceHandler handler=createHandler();
  byte[] rowName="testIncrementWithTagsWithNotMatchLabels".getBytes();
  ByteBuffer table=wrap(tableAname);
  List<TColumnValue> columnValues=new ArrayList<TColumnValue>();
  columnValues.add(new TColumnValue(wrap(familyAname),wrap(qualifierAname),wrap(Bytes.toBytes(1L))));
  TPut put=new TPut(wrap(rowName),columnValues);
  put.setColumnValues(columnValues);
  put.setCellVisibility(new TCellVisibility().setExpression(PRIVATE));
  handler.put(table,put);
  List<TColumnIncrement> incrementColumns=new ArrayList<TColumnIncrement>();
  incrementColumns.add(new TColumnIncrement(wrap(familyAname),wrap(qualifierAname)));
  TIncrement increment=new TIncrement(wrap(rowName),incrementColumns);
  increment.setCellVisibility(new TCellVisibility().setExpression(SECRET));
  handler.increment(table,increment);
  TGet get=new TGet(wrap(rowName));
  TAuthorization tauth=new TAuthorization();
  List<String> labels=new ArrayList<String>();
  labels.add(PUBLIC);
  tauth.setLabels(labels);
  get.setAuthorizations(tauth);
  TResult result=handler.get(table,get);
  assertNull(result.getRow());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.trace.TestHTraceHooks </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTraceCreateTable() throws Exception {
  TraceScope tableCreationSpan=Trace.startSpan("creating table",Sampler.ALWAYS);
  Table table;
  try {
    table=TEST_UTIL.createTable(TableName.valueOf("table"),FAMILY_BYTES);
  }
  finally {
    tableCreationSpan.close();
  }
  TEST_UTIL.waitFor(1000,new Waiter.Predicate<Exception>(){
    @Override public boolean evaluate() throws Exception {
      return rcvr.getSpans().size() >= 5;
    }
  }
);
  Collection<Span> spans=rcvr.getSpans();
  TraceTree traceTree=new TraceTree(spans);
  Collection<Span> roots=traceTree.getSpansByParent().find(ROOT_SPAN_ID);
  assertEquals(1,roots.size());
  Span createTableRoot=roots.iterator().next();
  assertEquals("creating table",createTableRoot.getDescription());
  int createTableCount=0;
  for (  Span s : traceTree.getSpansByParent().find(createTableRoot.getSpanId())) {
    if (s.getDescription().startsWith("MasterService.CreateTable")) {
      createTableCount++;
    }
  }
  assertTrue(createTableCount >= 1);
  assertTrue(traceTree.getSpansByParent().find(createTableRoot.getSpanId()).size() > 3);
  assertTrue(spans.size() > 5);
  Put put=new Put("row".getBytes());
  put.addColumn(FAMILY_BYTES,"col".getBytes(),"value".getBytes());
  TraceScope putSpan=Trace.startSpan("doing put",Sampler.ALWAYS);
  try {
    table.put(put);
  }
  finally {
    putSpan.close();
  }
  spans=rcvr.getSpans();
  traceTree=new TraceTree(spans);
  roots=traceTree.getSpansByParent().find(ROOT_SPAN_ID);
  assertEquals(2,roots.size());
  Span putRoot=null;
  for (  Span root : roots) {
    if (root.getDescription().equals("doing put")) {
      putRoot=root;
    }
  }
  assertNotNull(putRoot);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.types.TestCopyOnWriteMaps </h4><pre class="type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testKeys() throws Exception {
  for (  Long key : csm.keySet()) {
    assertNotNull(m.get(key));
    assertNotNull(m.remove(key));
    assertNull(m.get(key));
  }
}

</code></pre>

<br>
<pre class="type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindOnEmpty() throws Exception {
  m.clear();
  assertTrue(m.isEmpty());
  assertNull(m.get(100L));
  assertFalse(m.containsKey(100L));
  assertEquals(0,m.tailMap(100L).entrySet().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.types.TestStructNullExtension </h4><pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Positive cases for null extension.
 */
@Test public void testNullableNullExtension(){
  StructBuilder builder=new StructBuilder().add(OrderedNumeric.ASCENDING).add(OrderedString.ASCENDING);
  Struct shorter=builder.toStruct();
  Struct longer=builder.add(new TerminatedWrapper<String>(OrderedString.ASCENDING,"/")).add(OrderedNumeric.ASCENDING).toStruct();
  PositionedByteRange buf1=new SimplePositionedMutableByteRange(7);
  Object[] val1=new Object[]{BigDecimal.ONE,"foo"};
  assertEquals("Encoding shorter value wrote a surprising number of bytes.",buf1.getLength(),shorter.encode(buf1,val1));
  int shortLen=buf1.getLength();
  buf1.setPosition(0);
  StructIterator it=longer.iterator(buf1);
  it.skip();
  it.skip();
  assertEquals("Position should be at end. Broken test.",buf1.getLength(),buf1.getPosition());
  assertEquals("Failed to skip null element with extended struct.",0,it.skip());
  assertEquals("Failed to skip null element with extended struct.",0,it.skip());
  buf1.setPosition(0);
  it=longer.iterator(buf1);
  assertEquals(BigDecimal.ONE,it.next());
  assertEquals("foo",it.next());
  assertEquals("Position should be at end. Broken test.",buf1.getLength(),buf1.getPosition());
  assertNull("Failed to skip null element with extended struct.",it.next());
  assertNull("Failed to skip null element with extended struct.",it.next());
  buf1.setPosition(0);
  assertArrayEquals("Simple struct decoding is broken.",val1,shorter.decode(buf1));
  buf1.setPosition(0);
  assertArrayEquals("Decoding short value with extended struct should append null elements.",Arrays.copyOf(val1,4),longer.decode(buf1));
  PositionedByteRange buf2=new SimplePositionedMutableByteRange(7);
  buf1.setPosition(0);
  assertEquals("Encoding a short value with extended struct should have same result as using short struct.",shortLen,longer.encode(buf2,val1));
  assertArrayEquals("Encoding a short value with extended struct should have same result as using short struct",buf1.getBytes(),buf2.getBytes());
  val1=new Object[]{null,null,null,null};
  buf1.set(0);
  buf2.set(0);
  assertEquals("Encoding null-truncated value wrote a surprising number of bytes.",buf1.getLength(),longer.encode(buf1,new Object[0]));
  assertEquals("Encoding null-extended value wrote a surprising number of bytes.",buf1.getLength(),longer.encode(buf1,val1));
  assertArrayEquals("Encoded unexpected result.",buf1.getBytes(),buf2.getBytes());
  assertArrayEquals("Decoded unexpected result.",val1,longer.decode(buf2));
  Object[] val2=new Object[]{BigDecimal.ONE,null,null,null};
  buf1.set(2);
  buf2.set(2);
  assertEquals("Encoding null-truncated value wrote a surprising number of bytes.",buf1.getLength(),longer.encode(buf1,Arrays.copyOf(val2,1)));
  assertEquals("Encoding null-extended value wrote a surprising number of bytes.",buf2.getLength(),longer.encode(buf2,val2));
  assertArrayEquals("Encoded unexpected result.",buf1.getBytes(),buf2.getBytes());
  buf2.setPosition(0);
  assertArrayEquals("Decoded unexpected result.",val2,longer.decode(buf2));
  Object[] val3=new Object[]{BigDecimal.ONE,null,"foo",null};
  buf1.set(9);
  buf2.set(9);
  assertEquals("Encoding null-truncated value wrote a surprising number of bytes.",buf1.getLength(),longer.encode(buf1,Arrays.copyOf(val3,3)));
  assertEquals("Encoding null-extended value wrote a surprising number of bytes.",buf2.getLength(),longer.encode(buf2,val3));
  assertArrayEquals("Encoded unexpected result.",buf1.getBytes(),buf2.getBytes());
  buf2.setPosition(0);
  assertArrayEquals("Decoded unexpected result.",val3,longer.decode(buf2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.TestBoundedArrayQueue </h4><pre class="type-9 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBoundedArrayQueueOperations() throws Exception {
  assertEquals(0,queue.size());
  assertNull(queue.poll());
  assertNull(queue.peek());
  for (int i=0; i < qMaxElements; i++) {
    assertTrue(queue.offer(i));
  }
  assertEquals(qMaxElements,queue.size());
  assertFalse(queue.offer(0));
  assertEquals(0,queue.peek().intValue());
  assertEquals(0,queue.peek().intValue());
  for (int i=0; i < qMaxElements; i++) {
    assertEquals(i,queue.poll().intValue());
  }
  assertEquals(0,queue.size());
  assertNull(queue.poll());
  assertTrue(queue.offer(100));
  assertTrue(queue.offer(1000));
  assertEquals(100,queue.peek().intValue());
  assertEquals(100,queue.poll().intValue());
  assertEquals(1000,queue.poll().intValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.TestBoundedPriorityBlockingQueue </h4><pre class="type-7 type-8 type-16 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testPollInExecutor() throws InterruptedException {
  final TestObject testObj=new TestObject(0,0);
  final CyclicBarrier threadsStarted=new CyclicBarrier(2);
  ExecutorService executor=Executors.newFixedThreadPool(2);
  executor.execute(new Runnable(){
    public void run(){
      try {
        assertNull(queue.poll(1000,TimeUnit.MILLISECONDS));
        threadsStarted.await();
        assertSame(testObj,queue.poll(1000,TimeUnit.MILLISECONDS));
        assertTrue(queue.isEmpty());
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
    }
  }
);
  executor.execute(new Runnable(){
    public void run(){
      try {
        threadsStarted.await();
        queue.offer(testObj);
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
    }
  }
);
  executor.shutdown();
  assertTrue(executor.awaitTermination(8000,TimeUnit.MILLISECONDS));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPoll(){
  assertNull(queue.poll());
  PriorityQueue<TestObject> testList=new PriorityQueue<TestObject>(CAPACITY,new TestObjectComparator());
  for (int i=0; i < CAPACITY; ++i) {
    TestObject obj=new TestObject(i,i);
    testList.add(obj);
    queue.offer(obj);
  }
  for (int i=0; i < CAPACITY; ++i) {
    assertEquals(testList.poll(),queue.poll());
  }
  assertNull(null,queue.poll());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.TestCompressionTest </h4><pre class="type-11 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExceptionCaching(){
  try {
    CompressionTest.testCompression(Compression.Algorithm.LZO);
    fail();
  }
 catch (  IOException e) {
    assertNotNull(e.getCause());
  }
  try {
    CompressionTest.testCompression(Compression.Algorithm.LZO);
    fail();
  }
 catch (  IOException e) {
    assertNull(e.getCause());
  }
  assertFalse(CompressionTest.testCompression("LZO"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.TestConfigurationUtil </h4><pre class="type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testGetKeyValuesWithUnsetKey() throws Exception {
  assertNull(callGetKeyValues());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.TestCoprocessorClassLoader </h4><pre class="type-4 type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCleanupOldJars() throws Exception {
  String className="TestCleanupOldJars";
  String folder=TEST_UTIL.getDataTestDir().toString();
  File jarFile=ClassLoaderTestHelper.buildJar(folder,className,null,ClassLoaderTestHelper.localDirPath(conf));
  File tmpJarFile=new File(jarFile.getParent(),"/tmp/" + className + ".test.jar");
  if (tmpJarFile.exists())   tmpJarFile.delete();
  assertFalse("tmp jar file should not exist",tmpJarFile.exists());
  IOUtils.copyBytes(new FileInputStream(jarFile),new FileOutputStream(tmpJarFile),conf,true);
  assertTrue("tmp jar file should be created",tmpJarFile.exists());
  Path path=new Path(jarFile.getAbsolutePath());
  ClassLoader parent=TestCoprocessorClassLoader.class.getClassLoader();
  CoprocessorClassLoader.parentDirLockSet.clear();
  ClassLoader classLoader=CoprocessorClassLoader.getClassLoader(path,parent,"111",conf);
  assertNotNull("Classloader should be created",classLoader);
  assertFalse("tmp jar file should be removed",tmpJarFile.exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.TestEnvironmentEdgeManager </h4><pre class="type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testManageSingleton(){
  EnvironmentEdgeManager.reset();
  EnvironmentEdge edge=EnvironmentEdgeManager.getDelegate();
  assertNotNull(edge);
  assertTrue(edge instanceof DefaultEnvironmentEdge);
  EnvironmentEdgeManager.reset();
  EnvironmentEdge edge2=EnvironmentEdgeManager.getDelegate();
  assertFalse(edge == edge2);
  IncrementingEnvironmentEdge newEdge=new IncrementingEnvironmentEdge();
  EnvironmentEdgeManager.injectEdge(newEdge);
  assertEquals(newEdge,EnvironmentEdgeManager.getDelegate());
  EnvironmentEdgeManager.injectEdge(null);
  EnvironmentEdge nullResult=EnvironmentEdgeManager.getDelegate();
  assertTrue(nullResult instanceof DefaultEnvironmentEdge);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.TestFSTableDescriptors </h4><pre class="type-4 type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testRemoves() throws IOException {
  final String name="testRemoves";
  FileSystem fs=FileSystem.get(UTIL.getConfiguration());
  Path rootdir=new Path(UTIL.getDataTestDir(),name);
  TableDescriptors htds=new FSTableDescriptors(UTIL.getConfiguration(),fs,rootdir);
  HTableDescriptor htd=new HTableDescriptor(TableName.valueOf(name));
  htds.add(htd);
  assertNotNull(htds.remove(htd.getTableName()));
  assertNull(htds.remove(htd.getTableName()));
}

</code></pre>

<br>
<pre class="type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testNoSuchTable() throws IOException {
  final String name="testNoSuchTable";
  FileSystem fs=FileSystem.get(UTIL.getConfiguration());
  Path rootdir=new Path(UTIL.getDataTestDir(),name);
  TableDescriptors htds=new FSTableDescriptors(UTIL.getConfiguration(),fs,rootdir);
  assertNull("There shouldn't be any HTD for this table",htds.get(TableName.valueOf("NoSuchTable")));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHTableDescriptorsNoCache() throws IOException, InterruptedException {
  final String name="testHTableDescriptorsNoCache";
  FileSystem fs=FileSystem.get(UTIL.getConfiguration());
  Path rootdir=new Path(UTIL.getDataTestDir(),name);
  FSTableDescriptors htds=new FSTableDescriptorsTest(UTIL.getConfiguration(),fs,rootdir,false,false);
  final int count=10;
  for (int i=0; i < count; i++) {
    HTableDescriptor htd=new HTableDescriptor(name + i);
    htds.createTableDescriptor(htd);
  }
  for (int i=0; i < 2 * count; i++) {
    assertNotNull("Expected HTD, got null instead",htds.get(TableName.valueOf(name + i % 2)));
  }
  for (int i=0; i < count; i++) {
    HTableDescriptor htd=new HTableDescriptor(TableName.valueOf(name + i));
    htd.addFamily(new HColumnDescriptor("" + i));
    htds.updateTableDescriptor(new TableDescriptor(htd));
  }
  for (int i=0; i < count; i++) {
    assertNotNull("Expected HTD, got null instead",htds.get(TableName.valueOf(name + i)));
    assertTrue("Column Family " + i + " missing",htds.get(TableName.valueOf(name + i)).hasFamily(Bytes.toBytes("" + i)));
  }
  assertEquals(count * 4,htds.invocations);
  assertEquals("expected=0, actual=" + htds.cachehits,0,htds.cachehits);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.TestFSUtils </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testVersion() throws DeserializationException, IOException {
  HBaseTestingUtility htu=new HBaseTestingUtility();
  final FileSystem fs=htu.getTestFileSystem();
  final Path rootdir=htu.getDataTestDir();
  assertNull(FSUtils.getVersion(fs,rootdir));
  Path versionFile=new Path(rootdir,HConstants.VERSION_FILE_NAME);
  FSDataOutputStream s=fs.create(versionFile);
  final String version=HConstants.FILE_SYSTEM_VERSION;
  s.writeUTF(version);
  s.close();
  assertTrue(fs.exists(versionFile));
  FileStatus[] status=fs.listStatus(versionFile);
  assertNotNull(status);
  assertTrue(status.length > 0);
  String newVersion=FSUtils.getVersion(fs,rootdir);
  assertEquals(version.length(),newVersion.length());
  assertEquals(version,newVersion);
  assertEquals(version,FSUtils.getVersion(fs,rootdir));
  FSUtils.checkVersion(fs,rootdir,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.TestHBaseFsckOneRS </h4><pre class="type-4 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
/** 
 * This test makes sure that with enough retries both parallel instances
 * of hbck will be completed successfully.
 * @throws Exception
 */
@Test(timeout=180000) public void testParallelWithRetriesHbck() throws Exception {
  final ExecutorService service;
  final Future<HBaseFsck> hbck1, hbck2;
  final int timeoutInSeconds=80;
  final int sleepIntervalInMilliseconds=200;
  final int maxSleepTimeInMilliseconds=6000;
  final int maxRetryAttempts=15;
class RunHbck implements Callable<HBaseFsck> {
    @Override public HBaseFsck call() throws Exception {
      Configuration c=new Configuration(conf);
      c.setInt("hbase.hbck.lockfile.maxwaittime",timeoutInSeconds);
      c.setInt("hbase.hbck.lockfile.attempt.sleep.interval",sleepIntervalInMilliseconds);
      c.setInt("hbase.hbck.lockfile.attempt.maxsleeptime",maxSleepTimeInMilliseconds);
      c.setInt("hbase.hbck.lockfile.attempts",maxRetryAttempts);
      return doFsck(c,false);
    }
  }
  service=Executors.newFixedThreadPool(2);
  hbck1=service.submit(new RunHbck());
  hbck2=service.submit(new RunHbck());
  service.shutdown();
  service.awaitTermination(timeoutInSeconds * 2,TimeUnit.SECONDS);
  HBaseFsck h1=hbck1.get();
  HBaseFsck h2=hbck2.get();
  assertNotNull(h1);
  assertNotNull(h2);
  assert (h1.getRetCode() >= 0);
  assert (h2.getRetCode() >= 0);
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Split crashed after write to hbase:meta finished for the parent region, but
 * failed to write daughters (pre HBASE-7721 codebase)
 */
@Test(timeout=75000) public void testSplitDaughtersNotInMeta() throws Exception {
  TableName table=TableName.valueOf("testSplitdaughtersNotInMeta");
  Table meta=connection.getTable(TableName.META_TABLE_NAME,tableExecutorService);
  try {
    setupTable(table);
    assertEquals(ROWKEYS.length,countRows());
    admin.flush(table);
    try (RegionLocator rl=connection.getRegionLocator(tbl.getName())){
      HRegionLocation location=rl.getRegionLocation(Bytes.toBytes("B"));
      HRegionInfo hri=location.getRegionInfo();
      admin.enableCatalogJanitor(false);
      byte[] regionName=location.getRegionInfo().getRegionName();
      admin.splitRegion(location.getRegionInfo().getRegionName(),Bytes.toBytes("BM"));
      TestEndToEndSplitTransaction.blockUntilRegionSplit(conf,60000,regionName,true);
      PairOfSameType<HRegionInfo> daughters=MetaTableAccessor.getDaughterRegions(meta.get(new Get(regionName)));
      ServerName firstSN=rl.getRegionLocation(daughters.getFirst().getStartKey()).getServerName();
      ServerName secondSN=rl.getRegionLocation(daughters.getSecond().getStartKey()).getServerName();
      undeployRegion(connection,firstSN,daughters.getFirst());
      undeployRegion(connection,secondSN,daughters.getSecond());
      List<Delete> deletes=new ArrayList<>();
      deletes.add(new Delete(daughters.getFirst().getRegionName()));
      deletes.add(new Delete(daughters.getSecond().getRegionName()));
      meta.delete(deletes);
      RegionStates regionStates=TEST_UTIL.getMiniHBaseCluster().getMaster().getAssignmentManager().getRegionStates();
      regionStates.deleteRegion(daughters.getFirst());
      regionStates.deleteRegion(daughters.getSecond());
      HBaseFsck hbck=doFsck(conf,false);
      assertErrors(hbck,new HBaseFsck.ErrorReporter.ERROR_CODE[]{HBaseFsck.ErrorReporter.ERROR_CODE.NOT_IN_META_OR_DEPLOYED,HBaseFsck.ErrorReporter.ERROR_CODE.NOT_IN_META_OR_DEPLOYED,HBaseFsck.ErrorReporter.ERROR_CODE.HOLE_IN_REGION_CHAIN});
      hbck=doFsck(conf,true,true,false,false,false,false,false,false,false,false,false,null);
      assertErrors(hbck,new HBaseFsck.ErrorReporter.ERROR_CODE[]{HBaseFsck.ErrorReporter.ERROR_CODE.NOT_IN_META_OR_DEPLOYED,HBaseFsck.ErrorReporter.ERROR_CODE.NOT_IN_META_OR_DEPLOYED,HBaseFsck.ErrorReporter.ERROR_CODE.HOLE_IN_REGION_CHAIN});
      Get get=new Get(hri.getRegionName());
      Result result=meta.get(get);
      assertNotNull(result);
      assertNotNull(MetaTableAccessor.getHRegionInfo(result));
      assertEquals(ROWKEYS.length,countRows());
      assertEquals(rl.getStartKeys().length,SPLITS.length + 1 + 1);
      assertNoErrors(doFsck(conf,false));
    }
   }
  finally {
    admin.enableCatalogJanitor(true);
    meta.close();
    cleanupTable(table);
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=180000) public void testCheckReplication() throws Exception {
  HBaseFsck hbck=doFsck(conf,false);
  assertNoErrors(hbck);
  ReplicationAdmin replicationAdmin=new ReplicationAdmin(conf);
  Assert.assertEquals(0,replicationAdmin.getPeersCount());
  int zkPort=conf.getInt(HConstants.ZOOKEEPER_CLIENT_PORT,HConstants.DEFAULT_ZOOKEPER_CLIENT_PORT);
  replicationAdmin.addPeer("1","127.0.0.1:" + zkPort + ":/hbase");
  replicationAdmin.getPeersCount();
  Assert.assertEquals(1,replicationAdmin.getPeersCount());
  ZooKeeperWatcher zkw=new ZooKeeperWatcher(conf,"Test Hbase Fsck",connection);
  ReplicationQueues repQueues=ReplicationFactory.getReplicationQueues(zkw,conf,connection);
  repQueues.init("server1");
  repQueues.addLog("1","file1");
  repQueues.addLog("1-server2","file1");
  Assert.assertEquals(2,repQueues.getAllQueues().size());
  hbck=doFsck(conf,false);
  assertNoErrors(hbck);
  repQueues.addLog("2","file1");
  repQueues.addLog("2-server2","file1");
  Assert.assertEquals(4,repQueues.getAllQueues().size());
  hbck=doFsck(conf,false);
  assertErrors(hbck,new HBaseFsck.ErrorReporter.ERROR_CODE[]{HBaseFsck.ErrorReporter.ERROR_CODE.UNDELETED_REPLICATION_QUEUE,HBaseFsck.ErrorReporter.ERROR_CODE.UNDELETED_REPLICATION_QUEUE});
  hbck=doFsck(conf,true);
  hbck=doFsck(conf,false);
  assertNoErrors(hbck);
  Assert.assertEquals(2,repQueues.getAllQueues().size());
  Assert.assertNull(repQueues.getLogsInQueue("2"));
  Assert.assertNull(repQueues.getLogsInQueue("2-sever2"));
  replicationAdmin.removePeer("1");
  repQueues.removeAllQueues();
  zkw.close();
  replicationAdmin.close();
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=180000) public void testHbckFixOrphanTable() throws Exception {
  TableName table=TableName.valueOf("tableInfo");
  FileSystem fs=null;
  Path tableinfo=null;
  try {
    setupTable(table);
    Path hbaseTableDir=FSUtils.getTableDir(FSUtils.getRootDir(conf),table);
    fs=hbaseTableDir.getFileSystem(conf);
    FileStatus status=FSTableDescriptors.getTableInfoPath(fs,hbaseTableDir);
    tableinfo=status.getPath();
    fs.rename(tableinfo,new Path("/.tableinfo"));
    HBaseFsck hbck=doFsck(conf,false);
    assertErrors(hbck,new HBaseFsck.ErrorReporter.ERROR_CODE[]{HBaseFsck.ErrorReporter.ERROR_CODE.NO_TABLEINFO_FILE});
    hbck=doFsck(conf,true);
    assertNoErrors(hbck);
    status=null;
    status=FSTableDescriptors.getTableInfoPath(fs,hbaseTableDir);
    assertNotNull(status);
    HTableDescriptor htd=admin.getTableDescriptor(table);
    htd.setValue("NOT_DEFAULT","true");
    admin.disableTable(table);
    admin.modifyTable(table,htd);
    admin.enableTable(table);
    fs.delete(status.getPath(),true);
    htd=admin.getTableDescriptor(table);
    hbck=doFsck(conf,true);
    assertNoErrors(hbck);
    status=FSTableDescriptors.getTableInfoPath(fs,hbaseTableDir);
    assertNotNull(status);
    htd=admin.getTableDescriptor(table);
    assertEquals(htd.getValue("NOT_DEFAULT"),"true");
  }
  finally {
    if (fs != null) {
      fs.rename(new Path("/.tableinfo"),tableinfo);
    }
    cleanupTable(table);
  }
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests that LINGERING_SPLIT_PARENT is not erroneously reported for
 * valid cases where the daughters are there.
 */
@Test(timeout=180000) public void testValidLingeringSplitParent() throws Exception {
  TableName table=TableName.valueOf("testLingeringSplitParent");
  Table meta=null;
  try {
    setupTable(table);
    assertEquals(ROWKEYS.length,countRows());
    admin.flush(table);
    try (RegionLocator rl=connection.getRegionLocator(tbl.getName())){
      HRegionLocation location=rl.getRegionLocation(Bytes.toBytes("B"));
      meta=connection.getTable(TableName.META_TABLE_NAME,tableExecutorService);
      HRegionInfo hri=location.getRegionInfo();
      byte[] regionName=location.getRegionInfo().getRegionName();
      admin.splitRegion(location.getRegionInfo().getRegionName(),Bytes.toBytes("BM"));
      TestEndToEndSplitTransaction.blockUntilRegionSplit(conf,60000,regionName,true);
      HBaseFsck hbck=doFsck(conf,true,true,false,false,false,true,true,true,false,false,false,null);
      assertErrors(hbck,new HBaseFsck.ErrorReporter.ERROR_CODE[]{});
      Get get=new Get(hri.getRegionName());
      Result result=meta.get(get);
      assertNotNull(result);
      assertNotNull(MetaTableAccessor.getHRegionInfo(result));
      assertEquals(ROWKEYS.length,countRows());
      assertEquals(rl.getStartKeys().length,SPLITS.length + 1 + 1);
      assertNoErrors(doFsck(conf,false));
    }
   }
  finally {
    cleanupTable(table);
    IOUtils.closeQuietly(meta);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.TestHBaseFsckTwoRS </h4><pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This creates and fixes a bad table where an overlap group of
 * 3 regions. Set HBaseFsck.maxMerge to 2 to trigger sideline overlapped
 * region. Mess around the meta data so that closeRegion/offlineRegion
 * throws exceptions.
 */
@Test(timeout=180000) public void testSidelineOverlapRegion() throws Exception {
  TableName table=TableName.valueOf("testSidelineOverlapRegion");
  try {
    setupTable(table);
    assertEquals(ROWKEYS.length,countRows());
    MiniHBaseCluster cluster=TEST_UTIL.getHBaseCluster();
    HMaster master=cluster.getMaster();
    HRegionInfo hriOverlap1=createRegion(tbl.getTableDescriptor(),Bytes.toBytes("A"),Bytes.toBytes("AB"));
    master.assignRegion(hriOverlap1);
    master.getAssignmentManager().waitForAssignment(hriOverlap1);
    HRegionInfo hriOverlap2=createRegion(tbl.getTableDescriptor(),Bytes.toBytes("AB"),Bytes.toBytes("B"));
    master.assignRegion(hriOverlap2);
    master.getAssignmentManager().waitForAssignment(hriOverlap2);
    HBaseFsck hbck=doFsck(conf,false);
    assertErrors(hbck,new HBaseFsck.ErrorReporter.ERROR_CODE[]{HBaseFsck.ErrorReporter.ERROR_CODE.DUPE_STARTKEYS,HBaseFsck.ErrorReporter.ERROR_CODE.DUPE_STARTKEYS,HBaseFsck.ErrorReporter.ERROR_CODE.OVERLAP_IN_REGION_CHAIN});
    assertEquals(3,hbck.getOverlapGroups(table).size());
    assertEquals(ROWKEYS.length,countRows());
    Multimap<byte[],HBaseFsck.HbckInfo> overlapGroups=hbck.getOverlapGroups(table);
    ServerName serverName=null;
    byte[] regionName=null;
    for (    HBaseFsck.HbckInfo hbi : overlapGroups.values()) {
      if ("A".equals(Bytes.toString(hbi.getStartKey())) && "B".equals(Bytes.toString(hbi.getEndKey()))) {
        regionName=hbi.getRegionName();
        int k=cluster.getServerWith(regionName);
        for (int i=0; i < 3; i++) {
          if (i != k) {
            HRegionServer rs=cluster.getRegionServer(i);
            serverName=rs.getServerName();
            break;
          }
        }
        HBaseFsckRepair.closeRegionSilentlyAndWait((HConnection)connection,cluster.getRegionServer(k).getServerName(),hbi.getHdfsHRI());
        admin.offline(regionName);
        break;
      }
    }
    assertNotNull(regionName);
    assertNotNull(serverName);
    try (Table meta=connection.getTable(TableName.META_TABLE_NAME,tableExecutorService)){
      Put put=new Put(regionName);
      put.addColumn(HConstants.CATALOG_FAMILY,HConstants.SERVER_QUALIFIER,Bytes.toBytes(serverName.getHostAndPort()));
      meta.put(put);
    }
     HBaseFsck fsck=new HBaseFsck(conf,hbfsckExecutorService);
    fsck.connect();
    HBaseFsck.setDisplayFullReport();
    fsck.setTimeLag(0);
    fsck.setFixAssignments(true);
    fsck.setFixMeta(true);
    fsck.setFixHdfsHoles(true);
    fsck.setFixHdfsOverlaps(true);
    fsck.setFixHdfsOrphans(true);
    fsck.setFixVersionFile(true);
    fsck.setSidelineBigOverlaps(true);
    fsck.setMaxMerge(2);
    fsck.onlineHbck();
    fsck.close();
    HBaseFsck hbck2=doFsck(conf,false);
    assertNoErrors(hbck2);
    assertEquals(0,hbck2.getOverlapGroups(table).size());
    assertTrue(ROWKEYS.length > countRows());
  }
  finally {
    cleanupTable(table);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.TestHFileArchiveUtil </h4><pre class="type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testGetArchivePath() throws Exception {
  Configuration conf=new Configuration();
  FSUtils.setRootDir(conf,new Path("root"));
  assertNotNull(HFileArchiveUtil.getArchivePath(conf));
}

</code></pre>

<br>
<pre class="type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testGetTableArchivePath(){
  assertNotNull(HFileArchiveUtil.getTableArchivePath(rootDir,TableName.valueOf("table")));
}

</code></pre>

<br>
<pre class="type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testRegionArchiveDir(){
  Path regionDir=new Path("region");
  assertNotNull(HFileArchiveUtil.getRegionArchiveDir(rootDir,TableName.valueOf("table"),regionDir));
}

</code></pre>

<br>
<pre class="type-4 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testGetStoreArchivePath() throws IOException {
  byte[] family=Bytes.toBytes("Family");
  Path tabledir=FSUtils.getTableDir(rootDir,TableName.valueOf("table"));
  HRegionInfo region=new HRegionInfo(TableName.valueOf("table"));
  Configuration conf=new Configuration();
  FSUtils.setRootDir(conf,new Path("root"));
  assertNotNull(HFileArchiveUtil.getStoreArchivePath(conf,region,tabledir,family));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.TestMergeTool </h4><pre class="type-4 type-9 type-7 type-8 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test merge tool.
 * @throws Exception
 */
@Test public void testMergeTool() throws Exception {
  for (int i=0; i < regions.length; i++) {
    for (int j=0; j < rows[i].length; j++) {
      Get get=new Get(rows[i][j]);
      get.addFamily(FAMILY);
      Result result=regions[i].get(get);
      byte[] bytes=CellUtil.cloneValue(result.rawCells()[0]);
      assertNotNull(bytes);
      assertTrue(Bytes.equals(bytes,rows[i][j]));
    }
    HBaseTestingUtility.closeRegionAndWAL(regions[i]);
  }
  WAL log=wals.getWAL(new byte[]{},null);
  HRegion merged=mergeAndVerify("merging regions 0 and 1 ",this.sourceRegions[0].getRegionNameAsString(),this.sourceRegions[1].getRegionNameAsString(),log,2);
  merged=mergeAndVerify("merging regions 0+1 and 2",merged.getRegionInfo().getRegionNameAsString(),this.sourceRegions[2].getRegionNameAsString(),log,3);
  merged=mergeAndVerify("merging regions 0+1+2 and 3",merged.getRegionInfo().getRegionNameAsString(),this.sourceRegions[3].getRegionNameAsString(),log,4);
  merged=mergeAndVerify("merging regions 0+1+2+3 and 4",merged.getRegionInfo().getRegionNameAsString(),this.sourceRegions[4].getRegionNameAsString(),log,rows.length);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.TestSimpleMutableByteRange </h4><pre class="type-7 type-8 type-16 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasics(){
  ByteRange r=new SimpleMutableByteRange(new byte[]{1,3,2});
  Assert.assertFalse(SimpleMutableByteRange.isEmpty(r));
  Assert.assertNotNull(r.getBytes());
  Assert.assertEquals(3,r.getBytes().length);
  Assert.assertEquals(0,r.getOffset());
  Assert.assertEquals(3,r.getLength());
  Assert.assertTrue(Bytes.equals(new byte[]{1,3,2},r.deepCopyToNewArray()));
  Assert.assertNotSame(r.getBytes(),r.deepCopyToNewArray());
  Assert.assertTrue(r.hashCode() > 0);
  Assert.assertEquals(r.hashCode(),r.deepCopy().hashCode());
  byte[] destination=new byte[]{-59};
  r.deepCopySubRangeTo(2,1,destination,0);
  Assert.assertTrue(Bytes.equals(new byte[]{2},destination));
  r.setLength(1);
  Assert.assertTrue(Bytes.equals(new byte[]{1},r.deepCopyToNewArray()));
  r.setLength(2);
  Assert.assertTrue(Bytes.equals(new byte[]{1,3},r.deepCopyToNewArray()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.TestStealJobQueue </h4><pre class="type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPoll() throws InterruptedException {
  stealJobQueue.offer(3);
  stealFromQueue.offer(10);
  stealJobQueue.offer(15);
  stealJobQueue.offer(4);
  assertEquals(3,stealJobQueue.poll(1,TimeUnit.SECONDS).intValue());
  assertEquals(4,stealJobQueue.poll(1,TimeUnit.SECONDS).intValue());
  assertEquals("always take from the main queue before trying to steal",15,stealJobQueue.poll(1,TimeUnit.SECONDS).intValue());
  assertEquals(10,stealJobQueue.poll(1,TimeUnit.SECONDS).intValue());
  assertTrue(stealFromQueue.isEmpty());
  assertTrue(stealJobQueue.isEmpty());
  assertNull(stealJobQueue.poll(10,TimeUnit.MILLISECONDS));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.hbck.TestOfflineMetaRebuildBase </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test(timeout=120000) public void testMetaRebuild() throws Exception {
  wipeOutMeta();
  assertEquals(1,scanMeta());
  assertErrors(doFsck(conf,false),new ERROR_CODE[]{ERROR_CODE.NOT_IN_META_OR_DEPLOYED,ERROR_CODE.NOT_IN_META_OR_DEPLOYED,ERROR_CODE.NOT_IN_META_OR_DEPLOYED,ERROR_CODE.NOT_IN_META_OR_DEPLOYED});
  TEST_UTIL.shutdownMiniHBaseCluster();
  TEST_UTIL.shutdownMiniZKCluster();
  HBaseFsck fsck=new HBaseFsck(conf);
  assertTrue(fsck.rebuildMeta(false));
  TEST_UTIL.startMiniZKCluster();
  TEST_UTIL.restartHBaseCluster(3);
  try (Connection connection=ConnectionFactory.createConnection(TEST_UTIL.getConfiguration())){
    Admin admin=connection.getAdmin();
    if (admin.isTableDisabled(table))     admin.enableTable(table);
    LOG.info("Waiting for no more RIT");
    TEST_UTIL.waitUntilNoRegionsInTransition(60000);
    LOG.info("No more RIT in ZK, now doing final test verification");
    assertEquals(5,scanMeta());
    TableName[] tableNames=TEST_UTIL.getHBaseAdmin().listTableNames();
    for (    TableName tableName : tableNames) {
      HTableDescriptor tableDescriptor=TEST_UTIL.getHBaseAdmin().getTableDescriptor(tableName);
      assertNotNull(tableDescriptor);
      assertTrue(TEST_UTIL.getHBaseAdmin().isTableEnabled(tableName));
    }
    HTableDescriptor[] htbls=admin.listTables();
    LOG.info("Tables present after restart: " + Arrays.toString(htbls));
    assertEquals(1,htbls.length);
  }
   assertErrors(doFsck(conf,false),new ERROR_CODE[]{});
  LOG.info("Table " + table + " has "+ tableRowCount(conf,table)+ " entries.");
  assertEquals(16,tableRowCount(conf,table));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.wal.TestDefaultWALProvider </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetServerNameFromWALDirectoryName() throws IOException {
  ServerName sn=ServerName.valueOf("hn",450,1398);
  String hl=FSUtils.getRootDir(conf) + "/" + DefaultWALProvider.getWALDirectoryName(sn.toString());
  assertNull(DefaultWALProvider.getServerNameFromWALDirectoryName(conf,null));
  assertNull(DefaultWALProvider.getServerNameFromWALDirectoryName(conf,FSUtils.getRootDir(conf).toUri().toString()));
  assertNull(DefaultWALProvider.getServerNameFromWALDirectoryName(conf,""));
  assertNull(DefaultWALProvider.getServerNameFromWALDirectoryName(conf,"                  "));
  assertNull(DefaultWALProvider.getServerNameFromWALDirectoryName(conf,hl));
  assertNull(DefaultWALProvider.getServerNameFromWALDirectoryName(conf,hl + "qdf"));
  assertNull(DefaultWALProvider.getServerNameFromWALDirectoryName(conf,"sfqf" + hl + "qdf"));
  final String wals="/WALs/";
  ServerName parsed=DefaultWALProvider.getServerNameFromWALDirectoryName(conf,FSUtils.getRootDir(conf).toUri().toString() + wals + sn+ "/localhost%2C32984%2C1343316388997.1343316390417");
  assertEquals("standard",sn,parsed);
  parsed=DefaultWALProvider.getServerNameFromWALDirectoryName(conf,hl + "/qdf");
  assertEquals("subdir",sn,parsed);
  parsed=DefaultWALProvider.getServerNameFromWALDirectoryName(conf,FSUtils.getRootDir(conf).toUri().toString() + wals + sn+ "-splitting/localhost%3A57020.1340474893931");
  assertEquals("split",sn,parsed);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.wal.TestWALFactory </h4><pre class="type-7 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * A loaded WAL coprocessor won't break existing WAL test cases.
 */
@Test public void testWALCoprocessorLoaded() throws Exception {
  WALCoprocessorHost host=wals.getWAL(UNSPECIFIED_REGION,null).getCoprocessorHost();
  Coprocessor c=host.findCoprocessor(SampleRegionWALObserver.class.getName());
  assertNotNull(c);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @throws IOException
 */
@Test public void testReadLegacyLog() throws IOException {
  final int columnCount=5;
  final int recordCount=5;
  final TableName tableName=TableName.valueOf("tablename");
  final byte[] row=Bytes.toBytes("row");
  long timestamp=System.currentTimeMillis();
  Path path=new Path(dir,"tempwal");
  SequenceFileLogWriter sflw=null;
  WAL.Reader reader=null;
  try {
    HRegionInfo hri=new HRegionInfo(tableName,HConstants.EMPTY_START_ROW,HConstants.EMPTY_END_ROW);
    HTableDescriptor htd=new HTableDescriptor(tableName);
    fs.mkdirs(dir);
    sflw=new SequenceFileLogWriter();
    sflw.init(fs,path,conf,false);
    for (int i=0; i < recordCount; ++i) {
      WALKey key=new HLogKey(hri.getEncodedNameAsBytes(),tableName,i,timestamp,HConstants.DEFAULT_CLUSTER_ID);
      WALEdit edit=new WALEdit();
      for (int j=0; j < columnCount; ++j) {
        if (i == 0) {
          htd.addFamily(new HColumnDescriptor("column" + j));
        }
        String value=i + "" + j;
        edit.add(new KeyValue(row,row,row,timestamp,Bytes.toBytes(value)));
      }
      sflw.append(new WAL.Entry(key,edit));
    }
    sflw.sync();
    sflw.close();
    reader=wals.createReader(fs,path);
    assertTrue(reader instanceof SequenceFileLogReader);
    for (int i=0; i < recordCount; ++i) {
      WAL.Entry entry=reader.next();
      assertNotNull(entry);
      assertEquals(columnCount,entry.getEdit().size());
      assertArrayEquals(hri.getEncodedNameAsBytes(),entry.getKey().getEncodedRegionName());
      assertEquals(tableName,entry.getKey().getTablename());
      int idx=0;
      for (      Cell val : entry.getEdit().getCells()) {
        assertTrue(Bytes.equals(row,0,row.length,val.getRowArray(),val.getRowOffset(),val.getRowLength()));
        String value=i + "" + idx;
        assertArrayEquals(Bytes.toBytes(value),CellUtil.cloneValue(val));
        idx++;
      }
    }
    WAL.Entry entry=reader.next();
    assertNull(entry);
  }
  finally {
    if (sflw != null) {
      sflw.close();
    }
    if (reader != null) {
      reader.close();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.wal.TestWALMethods </h4><pre class="type-7 type-8 type-16 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEntrySink() throws Exception {
  Configuration conf=new Configuration();
  RecoveryMode mode=(conf.getBoolean(HConstants.DISTRIBUTED_LOG_REPLAY_KEY,false) ? RecoveryMode.LOG_REPLAY : RecoveryMode.LOG_SPLITTING);
  EntryBuffers sink=new EntryBuffers(new PipelineController(),1 * 1024 * 1024);
  for (int i=0; i < 1000; i++) {
    WAL.Entry entry=createTestLogEntry(i);
    sink.appendEntry(entry);
  }
  assertTrue(sink.totalBuffered > 0);
  long amountInChunk=sink.totalBuffered;
  RegionEntryBuffer chunk=sink.getChunkToWrite();
  assertEquals(chunk.heapSize(),amountInChunk);
  assertTrue(sink.isRegionCurrentlyWriting(TEST_REGION));
  for (int i=0; i < 500; i++) {
    WAL.Entry entry=createTestLogEntry(i);
    sink.appendEntry(entry);
  }
  assertNull(sink.getChunkToWrite());
  sink.doneWriting(chunk);
  RegionEntryBuffer chunk2=sink.getChunkToWrite();
  assertNotNull(chunk2);
  assertNotSame(chunk,chunk2);
  long amountInChunk2=sink.totalBuffered;
  assertTrue(amountInChunk2 < amountInChunk);
  sink.doneWriting(chunk2);
  assertEquals(0,sink.totalBuffered);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.zookeeper.TestHQuorumPeer </h4><pre class="type-4 type-7 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testShouldAssignDefaultZookeeperClientPort(){
  Configuration config=HBaseConfiguration.create();
  config.clear();
  Properties p=ZKConfig.makeZKProps(config);
  assertNotNull(p);
  assertEquals(2181,p.get("clientPort"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.zookeeper.TestZKLeaderManager </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLeaderSelection() throws Exception {
  MockLeader currentLeader=getCurrentLeader();
  assertNotNull("Leader should exist",currentLeader);
  LOG.debug("Current leader index is " + currentLeader.getIndex());
  byte[] znodeData=ZKUtil.getData(currentLeader.getWatcher(),LEADER_ZNODE);
  assertNotNull("Leader znode should contain leader index",znodeData);
  assertTrue("Leader znode should not be empty",znodeData.length > 0);
  int storedIndex=Bytes.toInt(znodeData);
  LOG.debug("Stored leader index in ZK is " + storedIndex);
  assertEquals("Leader znode should match leader index",currentLeader.getIndex(),storedIndex);
  currentLeader.abdicate();
  assertFalse(currentLeader.isMaster());
  currentLeader=getCurrentLeader();
  assertNotNull("New leader should exist after abdication",currentLeader);
  LOG.debug("New leader index is " + currentLeader.getIndex());
  znodeData=ZKUtil.getData(currentLeader.getWatcher(),LEADER_ZNODE);
  assertNotNull("Leader znode should contain leader index",znodeData);
  assertTrue("Leader znode should not be empty",znodeData.length > 0);
  storedIndex=Bytes.toInt(znodeData);
  LOG.debug("Stored leader index in ZK is " + storedIndex);
  assertEquals("Leader znode should match leader index",currentLeader.getIndex(),storedIndex);
  currentLeader.stop("Stopping for test");
  assertFalse(currentLeader.isMaster());
  currentLeader=getCurrentLeader();
  assertNotNull("New leader should exist after stop",currentLeader);
  LOG.debug("New leader index is " + currentLeader.getIndex());
  znodeData=ZKUtil.getData(currentLeader.getWatcher(),LEADER_ZNODE);
  assertNotNull("Leader znode should contain leader index",znodeData);
  assertTrue("Leader znode should not be empty",znodeData.length > 0);
  storedIndex=Bytes.toInt(znodeData);
  LOG.debug("Stored leader index in ZK is " + storedIndex);
  assertEquals("Leader znode should match leader index",currentLeader.getIndex(),storedIndex);
  currentLeader.stop("Stopping for test");
  assertFalse(currentLeader.isMaster());
  currentLeader=getCurrentLeader();
  assertNotNull("New leader should exist",currentLeader);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.zookeeper.TestZooKeeperNodeTracker </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNodeTracker() throws Exception {
  Abortable abortable=new StubAbortable();
  ZooKeeperWatcher zk=new ZooKeeperWatcher(TEST_UTIL.getConfiguration(),"testNodeTracker",abortable);
  ZKUtil.createAndFailSilent(zk,zk.baseZNode);
  final String node=ZKUtil.joinZNode(zk.baseZNode,new Long(rand.nextLong()).toString());
  final byte[] dataOne=Bytes.toBytes("dataOne");
  final byte[] dataTwo=Bytes.toBytes("dataTwo");
  TestTracker localTracker=new TestTracker(zk,node,abortable);
  localTracker.start();
  zk.registerListener(localTracker);
  assertNull(localTracker.getData(false));
  WaitToGetDataThread thread=new WaitToGetDataThread(zk,node);
  thread.start();
  assertFalse(thread.hasData);
  TestTracker secondTracker=new TestTracker(zk,node,null);
  secondTracker.start();
  zk.registerListener(secondTracker);
  TestingZKListener zkListener=new TestingZKListener(zk,node);
  zk.registerListener(zkListener);
  assertEquals(0,zkListener.createdLock.availablePermits());
  final ZooKeeper zkconn=new ZooKeeper(ZKConfig.getZKQuorumServersString(TEST_UTIL.getConfiguration()),60000,new StubWatcher());
  zkconn.create(node,dataOne,Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  zkListener.waitForCreation();
  thread.join();
  assertNotNull(localTracker.getData(false));
  assertNotNull(localTracker.blockUntilAvailable());
  assertTrue(Bytes.equals(localTracker.getData(false),dataOne));
  assertTrue(thread.hasData);
  assertTrue(Bytes.equals(thread.tracker.getData(false),dataOne));
  LOG.info("Successfully got data one");
  assertNotNull(secondTracker.getData(false));
  assertNotNull(secondTracker.blockUntilAvailable());
  assertTrue(Bytes.equals(secondTracker.getData(false),dataOne));
  LOG.info("Successfully got data one with the second tracker");
  zkconn.delete(node,-1);
  zkListener.waitForDeletion();
  TestTracker threadTracker=thread.tracker;
  thread=new WaitToGetDataThread(zk,node,threadTracker);
  thread.start();
  assertFalse(thread.hasData);
  assertNull(secondTracker.getData(false));
  assertNull(localTracker.getData(false));
  LOG.info("Successfully made unavailable");
  zkconn.create(node,dataTwo,Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  zkListener.waitForCreation();
  thread.join();
  assertNotNull(localTracker.getData(false));
  assertNotNull(localTracker.blockUntilAvailable());
  assertTrue(Bytes.equals(localTracker.getData(false),dataTwo));
  assertNotNull(secondTracker.getData(false));
  assertNotNull(secondTracker.blockUntilAvailable());
  assertTrue(Bytes.equals(secondTracker.getData(false),dataTwo));
  assertTrue(thread.hasData);
  assertTrue(Bytes.equals(thread.tracker.getData(false),dataTwo));
  LOG.info("Successfully got data two on all trackers and threads");
  zkconn.setData(node,dataOne,-1);
  zkListener.waitForDataChange();
  assertNotNull(localTracker.getData(false));
  assertNotNull(localTracker.blockUntilAvailable());
  assertTrue(Bytes.equals(localTracker.getData(false),dataOne));
  assertNotNull(secondTracker.getData(false));
  assertNotNull(secondTracker.blockUntilAvailable());
  assertTrue(Bytes.equals(secondTracker.getData(false),dataOne));
  assertTrue(thread.hasData);
  assertTrue(Bytes.equals(thread.tracker.getData(false),dataOne));
  LOG.info("Successfully got data one following a data change on all trackers and threads");
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
