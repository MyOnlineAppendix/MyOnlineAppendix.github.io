<h3><span class=" glyphicon glyphicon-tag"/>&nbspPublicFieldVerifier</h3><kbd>Verifies values related to public fields.</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.hadoop.hbase.TestCellUtil </h4><pre class="type-4 type-7 type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void testCloneCellFieldsFromByteBufferedCell(){
  byte[] r=Bytes.toBytes("row1");
  byte[] f=Bytes.toBytes("cf1");
  byte[] q=Bytes.toBytes("qual1");
  byte[] v=Bytes.toBytes("val1");
  byte[] tags=Bytes.toBytes("tag1");
  KeyValue kv=new KeyValue(r,f,q,0,q.length,1234L,Type.Put,v,0,v.length,tags);
  ByteBuffer buffer=ByteBuffer.wrap(kv.getBuffer());
  Cell bbCell=new ByteBufferedCellImpl(buffer,0,buffer.remaining());
  byte[] rDest=CellUtil.cloneRow(bbCell);
  assertTrue(Bytes.equals(r,rDest));
  byte[] fDest=CellUtil.cloneFamily(bbCell);
  assertTrue(Bytes.equals(f,fDest));
  byte[] qDest=CellUtil.cloneQualifier(bbCell);
  assertTrue(Bytes.equals(q,qDest));
  byte[] vDest=CellUtil.cloneValue(bbCell);
  assertTrue(Bytes.equals(v,vDest));
  byte[] tDest=new byte[tags.length];
  CellUtil.copyTagTo(bbCell,tDest,0);
  assertTrue(Bytes.equals(tags,tDest));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void testMatchingCellFieldsFromByteBufferedCell(){
  byte[] r=Bytes.toBytes("row1");
  byte[] f=Bytes.toBytes("cf1");
  byte[] q1=Bytes.toBytes("qual1");
  byte[] q2=Bytes.toBytes("qual2");
  byte[] v=Bytes.toBytes("val1");
  byte[] tags=Bytes.toBytes("tag1");
  KeyValue kv=new KeyValue(r,f,q1,0,q1.length,1234L,Type.Put,v,0,v.length,tags);
  ByteBuffer buffer=ByteBuffer.wrap(kv.getBuffer());
  Cell bbCell1=new ByteBufferedCellImpl(buffer,0,buffer.remaining());
  kv=new KeyValue(r,f,q2,0,q2.length,1234L,Type.Put,v,0,v.length,tags);
  buffer=ByteBuffer.wrap(kv.getBuffer());
  Cell bbCell2=new ByteBufferedCellImpl(buffer,0,buffer.remaining());
  assertTrue(CellUtil.matchingRows(bbCell1,bbCell2));
  assertTrue(CellUtil.matchingRows(kv,bbCell2));
  assertTrue(CellUtil.matchingRow(bbCell1,r));
  assertTrue(CellUtil.matchingFamily(bbCell1,bbCell2));
  assertTrue(CellUtil.matchingFamily(kv,bbCell2));
  assertTrue(CellUtil.matchingFamily(bbCell1,f));
  assertFalse(CellUtil.matchingQualifier(bbCell1,bbCell2));
  assertTrue(CellUtil.matchingQualifier(kv,bbCell2));
  assertTrue(CellUtil.matchingQualifier(bbCell1,q1));
  assertTrue(CellUtil.matchingQualifier(bbCell2,q2));
  assertTrue(CellUtil.matchingValue(bbCell1,bbCell2));
  assertTrue(CellUtil.matchingValue(kv,bbCell2));
  assertTrue(CellUtil.matchingValue(bbCell1,v));
  assertFalse(CellUtil.matchingColumn(bbCell1,bbCell2));
  assertTrue(CellUtil.matchingColumn(kv,bbCell2));
  assertTrue(CellUtil.matchingColumn(bbCell1,f,q1));
  assertTrue(CellUtil.matchingColumn(bbCell2,f,q2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.TestHBaseTestingUtility </h4><pre class="type-9 type-10 type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMiniZooKeeperWithMultipleClientPorts() throws Exception {
  int defaultClientPort=8888;
  int i, j;
  HBaseTestingUtility hbt=new HBaseTestingUtility();
  int[] clientPortList1={1111,1112,1113};
  MiniZooKeeperCluster cluster1=hbt.startMiniZKCluster(clientPortList1.length,clientPortList1);
  try {
    List<Integer> clientPortListInCluster=cluster1.getClientPortList();
    for (i=0; i < clientPortListInCluster.size(); i++) {
      assertEquals(clientPortListInCluster.get(i).intValue(),clientPortList1[i]);
    }
  }
  finally {
    hbt.shutdownMiniZKCluster();
  }
  hbt.getConfiguration().setInt("test.hbase.zookeeper.property.clientPort",defaultClientPort);
  int[] clientPortList2={2222,2223};
  MiniZooKeeperCluster cluster2=hbt.startMiniZKCluster(clientPortList2.length + 2,clientPortList2);
  try {
    List<Integer> clientPortListInCluster=cluster2.getClientPortList();
    for (i=0, j=0; i < clientPortListInCluster.size(); i++) {
      if (i < clientPortList2.length) {
        assertEquals(clientPortListInCluster.get(i).intValue(),clientPortList2[i]);
      }
 else {
        assertEquals(clientPortListInCluster.get(i).intValue(),defaultClientPort + j);
        j++;
      }
    }
  }
  finally {
    hbt.shutdownMiniZKCluster();
  }
  hbt.getConfiguration().setInt("test.hbase.zookeeper.property.clientPort",defaultClientPort);
  int[] clientPortList3={3333,-3334,3335,0};
  MiniZooKeeperCluster cluster3=hbt.startMiniZKCluster(clientPortList3.length + 1,clientPortList3);
  try {
    List<Integer> clientPortListInCluster=cluster3.getClientPortList();
    for (i=0, j=0; i < clientPortListInCluster.size(); i++) {
      if (i < clientPortList3.length && clientPortList3[i] > 0) {
        assertEquals(clientPortListInCluster.get(i).intValue(),clientPortList3[i]);
      }
 else {
        assertEquals(clientPortListInCluster.get(i).intValue(),defaultClientPort + j);
        j++;
      }
    }
  }
  finally {
    hbt.shutdownMiniZKCluster();
  }
  hbt.getConfiguration().setInt("test.hbase.zookeeper.property.clientPort",defaultClientPort);
  int[] clientPortList4={-4444,defaultClientPort + 2,4446,defaultClientPort};
  MiniZooKeeperCluster cluster4=hbt.startMiniZKCluster(clientPortList4.length + 1,clientPortList4);
  try {
    List<Integer> clientPortListInCluster=cluster4.getClientPortList();
    for (i=0, j=1; i < clientPortListInCluster.size(); i++) {
      if (i < clientPortList4.length && clientPortList4[i] > 0) {
        assertEquals(clientPortListInCluster.get(i).intValue(),clientPortList4[i]);
      }
 else {
        assertEquals(clientPortListInCluster.get(i).intValue(),defaultClientPort + j);
        j+=2;
      }
    }
  }
  finally {
    hbt.shutdownMiniZKCluster();
  }
  int[] clientPortList5={5555,5556,5556};
  try {
    MiniZooKeeperCluster cluster5=hbt.startMiniZKCluster(clientPortList5.length,clientPortList5);
    assertTrue(cluster5.getClientPort() == -1);
  }
 catch (  Exception e) {
  }
 finally {
    hbt.shutdownMiniZKCluster();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.TestSerialization </h4><pre class="type-4 type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void testRegionInfos() throws Exception {
  HRegionInfo hri=createRandomRegion("testRegionInfos");
  byte[] triple=HRegionInfo.toDelimitedByteArray(hri,hri,hri);
  List<HRegionInfo> regions=HRegionInfo.parseDelimitedFrom(triple,0,triple.length);
  assertTrue(regions.size() == 3);
  assertTrue(regions.get(0).equals(regions.get(1)));
  assertTrue(regions.get(0).equals(regions.get(2)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestAdmin1 </h4><pre class="type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verify schema modification takes.
 * @throws IOException
 * @throws InterruptedException
 */
@Test(timeout=300000) public void testOnlineChangeTableSchema() throws IOException, InterruptedException {
  final TableName tableName=TableName.valueOf("changeTableSchemaOnline");
  TEST_UTIL.getMiniHBaseCluster().getMaster().getConfiguration().setBoolean("hbase.online.schema.update.enable",true);
  HTableDescriptor[] tables=admin.listTables();
  int numTables=tables.length;
  TEST_UTIL.createTable(tableName,HConstants.CATALOG_FAMILY).close();
  tables=this.admin.listTables();
  assertEquals(numTables + 1,tables.length);
  HTableDescriptor htd=this.admin.getTableDescriptor(tableName);
  HTableDescriptor copy=new HTableDescriptor(htd);
  assertTrue(htd.equals(copy));
  long newFlushSize=htd.getMemStoreFlushSize() / 2;
  if (newFlushSize <= 0) {
    newFlushSize=HTableDescriptor.DEFAULT_MEMSTORE_FLUSH_SIZE / 2;
  }
  copy.setMemStoreFlushSize(newFlushSize);
  final String key="anyoldkey";
  assertTrue(htd.getValue(key) == null);
  copy.setValue(key,key);
  boolean expectedException=false;
  try {
    admin.modifyTable(tableName,copy);
  }
 catch (  TableNotDisabledException re) {
    expectedException=true;
  }
  assertFalse(expectedException);
  HTableDescriptor modifiedHtd=this.admin.getTableDescriptor(tableName);
  assertFalse(htd.equals(modifiedHtd));
  assertTrue(copy.equals(modifiedHtd));
  assertEquals(newFlushSize,modifiedHtd.getMemStoreFlushSize());
  assertEquals(key,modifiedHtd.getValue(key));
  int countOfFamilies=modifiedHtd.getFamilies().size();
  assertTrue(countOfFamilies > 0);
  HColumnDescriptor hcd=modifiedHtd.getFamilies().iterator().next();
  int maxversions=hcd.getMaxVersions();
  final int newMaxVersions=maxversions + 1;
  hcd.setMaxVersions(newMaxVersions);
  final byte[] hcdName=hcd.getName();
  expectedException=false;
  try {
    this.admin.modifyColumnFamily(tableName,hcd);
  }
 catch (  TableNotDisabledException re) {
    expectedException=true;
  }
  assertFalse(expectedException);
  modifiedHtd=this.admin.getTableDescriptor(tableName);
  HColumnDescriptor modifiedHcd=modifiedHtd.getFamily(hcdName);
  assertEquals(newMaxVersions,modifiedHcd.getMaxVersions());
  assertFalse(this.admin.isTableDisabled(tableName));
  final String xtracolName="xtracol";
  HColumnDescriptor xtracol=new HColumnDescriptor(xtracolName);
  xtracol.setValue(xtracolName,xtracolName);
  expectedException=false;
  try {
    this.admin.addColumnFamily(tableName,xtracol);
  }
 catch (  TableNotDisabledException re) {
    expectedException=true;
  }
  assertFalse(expectedException);
  modifiedHtd=this.admin.getTableDescriptor(tableName);
  hcd=modifiedHtd.getFamily(xtracol.getName());
  assertTrue(hcd != null);
  assertTrue(hcd.getValue(xtracolName).equals(xtracolName));
  this.admin.deleteColumnFamily(tableName,xtracol.getName());
  modifiedHtd=this.admin.getTableDescriptor(tableName);
  hcd=modifiedHtd.getFamily(xtracol.getName());
  assertTrue(hcd == null);
  this.admin.disableTable(tableName);
  this.admin.deleteTable(tableName);
  this.admin.listTables();
  assertFalse(this.admin.tableExists(tableName));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test retain assignment on enableTable.
 * @throws IOException
 */
@Test(timeout=300000) public void testEnableTableRetainAssignment() throws IOException {
  final TableName tableName=TableName.valueOf("testEnableTableAssignment");
  byte[][] splitKeys={new byte[]{1,1,1},new byte[]{2,2,2},new byte[]{3,3,3},new byte[]{4,4,4},new byte[]{5,5,5},new byte[]{6,6,6},new byte[]{7,7,7},new byte[]{8,8,8},new byte[]{9,9,9}};
  int expectedRegions=splitKeys.length + 1;
  HTableDescriptor desc=new HTableDescriptor(tableName);
  desc.addFamily(new HColumnDescriptor(HConstants.CATALOG_FAMILY));
  admin.createTable(desc,splitKeys);
  try (RegionLocator l=TEST_UTIL.getConnection().getRegionLocator(tableName)){
    List<HRegionLocation> regions=l.getAllRegionLocations();
    assertEquals("Tried to create " + expectedRegions + " regions "+ "but only found "+ regions.size(),expectedRegions,regions.size());
    admin.disableTable(tableName);
    admin.enableTable(tableName);
    List<HRegionLocation> regions2=l.getAllRegionLocations();
    assertEquals(regions.size(),regions2.size());
    assertTrue(regions2.containsAll(regions));
  }
 }

</code></pre>

<br>
<pre class="type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=300000) public void testCreateTable() throws IOException {
  HTableDescriptor[] tables=admin.listTables();
  int numTables=tables.length;
  TableName tableName=TableName.valueOf("testCreateTable");
  TEST_UTIL.createTable(tableName,HConstants.CATALOG_FAMILY).close();
  tables=this.admin.listTables();
  assertEquals(numTables + 1,tables.length);
  assertTrue("Table must be enabled.",TEST_UTIL.getHBaseCluster().getMaster().getAssignmentManager().getTableStateManager().isTableState(tableName,TableState.State.ENABLED));
  assertEquals(TableState.State.ENABLED,getStateFromMeta(tableName));
}

</code></pre>

<br>
<pre class="type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=300000) public void testShouldFailOnlineSchemaUpdateIfOnlineSchemaIsNotEnabled() throws Exception {
  final TableName tableName=TableName.valueOf("changeTableSchemaOnlineFailure");
  TEST_UTIL.getMiniHBaseCluster().getMaster().getConfiguration().setBoolean("hbase.online.schema.update.enable",false);
  HTableDescriptor[] tables=admin.listTables();
  int numTables=tables.length;
  TEST_UTIL.createTable(tableName,HConstants.CATALOG_FAMILY).close();
  tables=this.admin.listTables();
  assertEquals(numTables + 1,tables.length);
  HTableDescriptor htd=this.admin.getTableDescriptor(tableName);
  HTableDescriptor copy=new HTableDescriptor(htd);
  assertTrue(htd.equals(copy));
  long newFlushSize=htd.getMemStoreFlushSize() / 2;
  if (newFlushSize <= 0) {
    newFlushSize=HTableDescriptor.DEFAULT_MEMSTORE_FLUSH_SIZE / 2;
  }
  copy.setMemStoreFlushSize(newFlushSize);
  final String key="anyoldkey";
  assertTrue(htd.getValue(key) == null);
  copy.setValue(key,key);
  boolean expectedException=false;
  try {
    admin.modifyTable(tableName,copy);
  }
 catch (  TableNotDisabledException re) {
    expectedException=true;
  }
  assertTrue("Online schema update should not happen.",expectedException);
  TEST_UTIL.getMiniHBaseCluster().getMaster().getConfiguration().setBoolean("hbase.online.schema.update.enable",true);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=300000) public void testCreateTableWithRegions() throws IOException, InterruptedException {
  TableName tableName=TableName.valueOf("testCreateTableWithRegions");
  byte[][] splitKeys={new byte[]{1,1,1},new byte[]{2,2,2},new byte[]{3,3,3},new byte[]{4,4,4},new byte[]{5,5,5},new byte[]{6,6,6},new byte[]{7,7,7},new byte[]{8,8,8},new byte[]{9,9,9}};
  int expectedRegions=splitKeys.length + 1;
  HTableDescriptor desc=new HTableDescriptor(tableName);
  desc.addFamily(new HColumnDescriptor(HConstants.CATALOG_FAMILY));
  admin.createTable(desc,splitKeys);
  boolean tableAvailable=admin.isTableAvailable(tableName,splitKeys);
  assertTrue("Table should be created with splitKyes + 1 rows in META",tableAvailable);
  List<HRegionLocation> regions;
  Iterator<HRegionLocation> hris;
  HRegionInfo hri;
  ClusterConnection conn=(ClusterConnection)TEST_UTIL.getConnection();
  try (RegionLocator l=TEST_UTIL.getConnection().getRegionLocator(tableName)){
    regions=l.getAllRegionLocations();
    assertEquals("Tried to create " + expectedRegions + " regions "+ "but only found "+ regions.size(),expectedRegions,regions.size());
    System.err.println("Found " + regions.size() + " regions");
    hris=regions.iterator();
    hri=hris.next().getRegionInfo();
    assertTrue(hri.getStartKey() == null || hri.getStartKey().length == 0);
    assertTrue(Bytes.equals(hri.getEndKey(),splitKeys[0]));
    hri=hris.next().getRegionInfo();
    assertTrue(Bytes.equals(hri.getStartKey(),splitKeys[0]));
    assertTrue(Bytes.equals(hri.getEndKey(),splitKeys[1]));
    hri=hris.next().getRegionInfo();
    assertTrue(Bytes.equals(hri.getStartKey(),splitKeys[1]));
    assertTrue(Bytes.equals(hri.getEndKey(),splitKeys[2]));
    hri=hris.next().getRegionInfo();
    assertTrue(Bytes.equals(hri.getStartKey(),splitKeys[2]));
    assertTrue(Bytes.equals(hri.getEndKey(),splitKeys[3]));
    hri=hris.next().getRegionInfo();
    assertTrue(Bytes.equals(hri.getStartKey(),splitKeys[3]));
    assertTrue(Bytes.equals(hri.getEndKey(),splitKeys[4]));
    hri=hris.next().getRegionInfo();
    assertTrue(Bytes.equals(hri.getStartKey(),splitKeys[4]));
    assertTrue(Bytes.equals(hri.getEndKey(),splitKeys[5]));
    hri=hris.next().getRegionInfo();
    assertTrue(Bytes.equals(hri.getStartKey(),splitKeys[5]));
    assertTrue(Bytes.equals(hri.getEndKey(),splitKeys[6]));
    hri=hris.next().getRegionInfo();
    assertTrue(Bytes.equals(hri.getStartKey(),splitKeys[6]));
    assertTrue(Bytes.equals(hri.getEndKey(),splitKeys[7]));
    hri=hris.next().getRegionInfo();
    assertTrue(Bytes.equals(hri.getStartKey(),splitKeys[7]));
    assertTrue(Bytes.equals(hri.getEndKey(),splitKeys[8]));
    hri=hris.next().getRegionInfo();
    assertTrue(Bytes.equals(hri.getStartKey(),splitKeys[8]));
    assertTrue(hri.getEndKey() == null || hri.getEndKey().length == 0);
    verifyRoundRobinDistribution(conn,l,expectedRegions);
  }
   byte[] startKey={1,1,1,1,1,1,1,1,1,1};
  byte[] endKey={9,9,9,9,9,9,9,9,9,9};
  expectedRegions=10;
  TableName TABLE_2=TableName.valueOf(tableName.getNameAsString() + "_2");
  desc=new HTableDescriptor(TABLE_2);
  desc.addFamily(new HColumnDescriptor(HConstants.CATALOG_FAMILY));
  admin=TEST_UTIL.getHBaseAdmin();
  admin.createTable(desc,startKey,endKey,expectedRegions);
  try (RegionLocator l=TEST_UTIL.getConnection().getRegionLocator(TABLE_2)){
    regions=l.getAllRegionLocations();
    assertEquals("Tried to create " + expectedRegions + " regions "+ "but only found "+ regions.size(),expectedRegions,regions.size());
    System.err.println("Found " + regions.size() + " regions");
    hris=regions.iterator();
    hri=hris.next().getRegionInfo();
    assertTrue(hri.getStartKey() == null || hri.getStartKey().length == 0);
    assertTrue(Bytes.equals(hri.getEndKey(),new byte[]{1,1,1,1,1,1,1,1,1,1}));
    hri=hris.next().getRegionInfo();
    assertTrue(Bytes.equals(hri.getStartKey(),new byte[]{1,1,1,1,1,1,1,1,1,1}));
    assertTrue(Bytes.equals(hri.getEndKey(),new byte[]{2,2,2,2,2,2,2,2,2,2}));
    hri=hris.next().getRegionInfo();
    assertTrue(Bytes.equals(hri.getStartKey(),new byte[]{2,2,2,2,2,2,2,2,2,2}));
    assertTrue(Bytes.equals(hri.getEndKey(),new byte[]{3,3,3,3,3,3,3,3,3,3}));
    hri=hris.next().getRegionInfo();
    assertTrue(Bytes.equals(hri.getStartKey(),new byte[]{3,3,3,3,3,3,3,3,3,3}));
    assertTrue(Bytes.equals(hri.getEndKey(),new byte[]{4,4,4,4,4,4,4,4,4,4}));
    hri=hris.next().getRegionInfo();
    assertTrue(Bytes.equals(hri.getStartKey(),new byte[]{4,4,4,4,4,4,4,4,4,4}));
    assertTrue(Bytes.equals(hri.getEndKey(),new byte[]{5,5,5,5,5,5,5,5,5,5}));
    hri=hris.next().getRegionInfo();
    assertTrue(Bytes.equals(hri.getStartKey(),new byte[]{5,5,5,5,5,5,5,5,5,5}));
    assertTrue(Bytes.equals(hri.getEndKey(),new byte[]{6,6,6,6,6,6,6,6,6,6}));
    hri=hris.next().getRegionInfo();
    assertTrue(Bytes.equals(hri.getStartKey(),new byte[]{6,6,6,6,6,6,6,6,6,6}));
    assertTrue(Bytes.equals(hri.getEndKey(),new byte[]{7,7,7,7,7,7,7,7,7,7}));
    hri=hris.next().getRegionInfo();
    assertTrue(Bytes.equals(hri.getStartKey(),new byte[]{7,7,7,7,7,7,7,7,7,7}));
    assertTrue(Bytes.equals(hri.getEndKey(),new byte[]{8,8,8,8,8,8,8,8,8,8}));
    hri=hris.next().getRegionInfo();
    assertTrue(Bytes.equals(hri.getStartKey(),new byte[]{8,8,8,8,8,8,8,8,8,8}));
    assertTrue(Bytes.equals(hri.getEndKey(),new byte[]{9,9,9,9,9,9,9,9,9,9}));
    hri=hris.next().getRegionInfo();
    assertTrue(Bytes.equals(hri.getStartKey(),new byte[]{9,9,9,9,9,9,9,9,9,9}));
    assertTrue(hri.getEndKey() == null || hri.getEndKey().length == 0);
    verifyRoundRobinDistribution(conn,l,expectedRegions);
  }
   startKey=new byte[]{0,0,0,0,0,0};
  endKey=new byte[]{1,0,0,0,0,0};
  expectedRegions=5;
  TableName TABLE_3=TableName.valueOf(tableName.getNameAsString() + "_3");
  desc=new HTableDescriptor(TABLE_3);
  desc.addFamily(new HColumnDescriptor(HConstants.CATALOG_FAMILY));
  admin=TEST_UTIL.getHBaseAdmin();
  admin.createTable(desc,startKey,endKey,expectedRegions);
  try (RegionLocator l=TEST_UTIL.getConnection().getRegionLocator(TABLE_3)){
    regions=l.getAllRegionLocations();
    assertEquals("Tried to create " + expectedRegions + " regions "+ "but only found "+ regions.size(),expectedRegions,regions.size());
    System.err.println("Found " + regions.size() + " regions");
    verifyRoundRobinDistribution(conn,l,expectedRegions);
  }
   splitKeys=new byte[][]{new byte[]{1,1,1},new byte[]{2,2,2},new byte[]{3,3,3},new byte[]{2,2,2}};
  TableName TABLE_4=TableName.valueOf(tableName.getNameAsString() + "_4");
  desc=new HTableDescriptor(TABLE_4);
  desc.addFamily(new HColumnDescriptor(HConstants.CATALOG_FAMILY));
  try {
    admin.createTable(desc,splitKeys);
    assertTrue("Should not be able to create this table because of " + "duplicate split keys",false);
  }
 catch (  IllegalArgumentException iae) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestAsyncProcess </h4><pre class="type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * This test simulates multiple regions on 2 servers. We should have 2 multi requests and
 * 2 threads: 1 per server, this whatever the number of regions.
 */
@Test public void testThreadCreation() throws Exception {
  final int NB_REGS=100;
  List<HRegionLocation> hrls=new ArrayList<HRegionLocation>(NB_REGS);
  List<Get> gets=new ArrayList<Get>(NB_REGS);
  for (int i=0; i < NB_REGS; i++) {
    HRegionInfo hri=new HRegionInfo(DUMMY_TABLE,Bytes.toBytes(i * 10L),Bytes.toBytes(i * 10L + 9L),false,i);
    HRegionLocation hrl=new HRegionLocation(hri,i % 2 == 0 ? sn : sn2);
    hrls.add(hrl);
    Get get=new Get(Bytes.toBytes(i * 10L));
    gets.add(get);
  }
  MyConnectionImpl2 con=new MyConnectionImpl2(hrls);
  HTable ht=new HTable(con,new BufferedMutatorParams(DUMMY_TABLE));
  MyAsyncProcess ap=new MyAsyncProcess(con,conf,con.nbThreads);
  ht.multiAp=ap;
  ht.batch(gets,null);
  Assert.assertEquals(ap.nbActions.get(),NB_REGS);
  Assert.assertEquals("1 multi response per server",2,ap.nbMultiResponse.get());
  Assert.assertEquals("1 thread per server",2,con.nbThreads.get());
  int nbReg=0;
  for (int i=0; i < NB_REGS; i++) {
    if (con.usedRegions[i])     nbReg++;
  }
  Assert.assertEquals("nbReg=" + nbReg,nbReg,NB_REGS);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestClientScanner </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void testSizeLimit() throws IOException {
  final Result[] results=new Result[1];
  KeyValue kv1=new KeyValue("row".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum);
  results[0]=Result.create(new Cell[]{kv1});
  RpcRetryingCaller<Result[]> caller=Mockito.mock(RpcRetryingCaller.class);
  Mockito.when(rpcFactory.<Result[]>newCaller()).thenReturn(caller);
  Mockito.when(caller.callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt())).thenAnswer(new Answer<Result[]>(){
    private int count=0;
    @Override public Result[] answer(    InvocationOnMock invocation) throws Throwable {
      ScannerCallableWithReplicas callable=invocation.getArgumentAt(0,ScannerCallableWithReplicas.class);
switch (count) {
case 0:
case 2:
        count++;
      return null;
case 1:
    count++;
  callable.setHasMoreResultsContext(true);
callable.setServerHasMoreResults(false);
return results;
default :
throw new RuntimeException("Expected only 2 invocations");
}
}
}
);
Mockito.when(rpcFactory.<Result[]>newCaller()).thenReturn(caller);
scan.setCaching(100);
scan.setMaxResultSize(1);
try (MockClientScanner scanner=new MockClientScanner(conf,scan,TableName.valueOf("table"),clusterConn,rpcFactory,controllerFactory,pool,Integer.MAX_VALUE)){
Mockito.verify(caller).callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt());
InOrder inOrder=Mockito.inOrder(caller);
scanner.loadCache();
inOrder.verify(caller,Mockito.times(2)).callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt());
assertEquals(1,scanner.cache.size());
Result r=scanner.cache.poll();
assertNotNull(r);
CellScanner cs=r.cellScanner();
assertTrue(cs.advance());
assertEquals(kv1,cs.current());
assertFalse(cs.advance());
}
 }

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void testCacheLimit() throws IOException {
  KeyValue kv1=new KeyValue("row1".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum), kv2=new KeyValue("row2".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum), kv3=new KeyValue("row3".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum);
  final Result[] results=new Result[]{Result.create(new Cell[]{kv1}),Result.create(new Cell[]{kv2}),Result.create(new Cell[]{kv3})};
  RpcRetryingCaller<Result[]> caller=Mockito.mock(RpcRetryingCaller.class);
  Mockito.when(rpcFactory.<Result[]>newCaller()).thenReturn(caller);
  Mockito.when(caller.callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt())).thenAnswer(new Answer<Result[]>(){
    private int count=0;
    @Override public Result[] answer(    InvocationOnMock invocation) throws Throwable {
      ScannerCallableWithReplicas callable=invocation.getArgumentAt(0,ScannerCallableWithReplicas.class);
switch (count) {
case 0:
case 2:
        count++;
      return null;
case 1:
    count++;
  callable.setHasMoreResultsContext(true);
callable.setServerHasMoreResults(false);
return results;
default :
throw new RuntimeException("Expected only 2 invocations");
}
}
}
);
Mockito.when(rpcFactory.<Result[]>newCaller()).thenReturn(caller);
scan.setCaching(1);
scan.setMaxResultSize(1000 * 1000);
try (MockClientScanner scanner=new MockClientScanner(conf,scan,TableName.valueOf("table"),clusterConn,rpcFactory,controllerFactory,pool,Integer.MAX_VALUE)){
Mockito.verify(caller).callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt());
InOrder inOrder=Mockito.inOrder(caller);
scanner.loadCache();
inOrder.verify(caller,Mockito.times(2)).callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt());
assertEquals(3,scanner.cache.size());
Result r=scanner.cache.poll();
assertNotNull(r);
CellScanner cs=r.cellScanner();
assertTrue(cs.advance());
assertEquals(kv1,cs.current());
assertFalse(cs.advance());
r=scanner.cache.poll();
assertNotNull(r);
cs=r.cellScanner();
assertTrue(cs.advance());
assertEquals(kv2,cs.current());
assertFalse(cs.advance());
r=scanner.cache.poll();
assertNotNull(r);
cs=r.cellScanner();
assertTrue(cs.advance());
assertEquals(kv3,cs.current());
assertFalse(cs.advance());
}
 }

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void testNoMoreResults() throws IOException {
  final Result[] results=new Result[1];
  KeyValue kv1=new KeyValue("row".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum);
  results[0]=Result.create(new Cell[]{kv1});
  RpcRetryingCaller<Result[]> caller=Mockito.mock(RpcRetryingCaller.class);
  Mockito.when(rpcFactory.<Result[]>newCaller()).thenReturn(caller);
  Mockito.when(caller.callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt())).thenAnswer(new Answer<Result[]>(){
    private int count=0;
    @Override public Result[] answer(    InvocationOnMock invocation) throws Throwable {
      ScannerCallableWithReplicas callable=invocation.getArgumentAt(0,ScannerCallableWithReplicas.class);
switch (count) {
case 0:
case 2:
        count++;
      return null;
case 1:
    count++;
  callable.setHasMoreResultsContext(true);
callable.setServerHasMoreResults(false);
return results;
default :
throw new RuntimeException("Expected only 2 invocations");
}
}
}
);
Mockito.when(rpcFactory.<Result[]>newCaller()).thenReturn(caller);
scan.setCaching(100);
scan.setMaxResultSize(1000 * 1000);
try (MockClientScanner scanner=new MockClientScanner(conf,scan,TableName.valueOf("table"),clusterConn,rpcFactory,controllerFactory,pool,Integer.MAX_VALUE)){
Mockito.verify(caller).callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt());
scanner.setRpcFinished(true);
InOrder inOrder=Mockito.inOrder(caller);
scanner.loadCache();
inOrder.verify(caller,Mockito.times(2)).callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt());
assertEquals(1,scanner.cache.size());
Result r=scanner.cache.poll();
assertNotNull(r);
CellScanner cs=r.cellScanner();
assertTrue(cs.advance());
assertEquals(kv1,cs.current());
assertFalse(cs.advance());
}
 }

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void testMoreResults() throws IOException {
  final Result[] results1=new Result[1];
  KeyValue kv1=new KeyValue("row".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum);
  results1[0]=Result.create(new Cell[]{kv1});
  final Result[] results2=new Result[1];
  KeyValue kv2=new KeyValue("row2".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum);
  results2[0]=Result.create(new Cell[]{kv2});
  RpcRetryingCaller<Result[]> caller=Mockito.mock(RpcRetryingCaller.class);
  Mockito.when(rpcFactory.<Result[]>newCaller()).thenReturn(caller);
  Mockito.when(caller.callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt())).thenAnswer(new Answer<Result[]>(){
    private int count=0;
    @Override public Result[] answer(    InvocationOnMock invocation) throws Throwable {
      ScannerCallableWithReplicas callable=invocation.getArgumentAt(0,ScannerCallableWithReplicas.class);
switch (count) {
case 0:
case 3:
        count++;
      return null;
case 1:
    count++;
  callable.setHasMoreResultsContext(true);
callable.setServerHasMoreResults(true);
return results1;
case 2:
count++;
callable.setHasMoreResultsContext(true);
callable.setServerHasMoreResults(false);
return results2;
default :
throw new RuntimeException("Expected only 2 invocations");
}
}
}
);
scan.setCaching(100);
scan.setMaxResultSize(1000 * 1000);
try (MockClientScanner scanner=new MockClientScanner(conf,scan,TableName.valueOf("table"),clusterConn,rpcFactory,controllerFactory,pool,Integer.MAX_VALUE)){
Mockito.verify(caller).callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt());
InOrder inOrder=Mockito.inOrder(caller);
scanner.loadCache();
inOrder.verify(caller,Mockito.times(2)).callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt());
assertEquals(1,scanner.cache.size());
Result r=scanner.cache.poll();
assertNotNull(r);
CellScanner cs=r.cellScanner();
assertTrue(cs.advance());
assertEquals(kv1,cs.current());
assertFalse(cs.advance());
scanner.setRpcFinished(true);
inOrder=Mockito.inOrder(caller);
scanner.loadCache();
inOrder.verify(caller,Mockito.times(3)).callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt());
r=scanner.cache.poll();
assertNotNull(r);
cs=r.cellScanner();
assertTrue(cs.advance());
assertEquals(kv2,cs.current());
assertFalse(cs.advance());
}
 }

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void testNoResultsHint() throws IOException {
  final Result[] results=new Result[1];
  KeyValue kv1=new KeyValue("row".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum);
  results[0]=Result.create(new Cell[]{kv1});
  RpcRetryingCaller<Result[]> caller=Mockito.mock(RpcRetryingCaller.class);
  Mockito.when(rpcFactory.<Result[]>newCaller()).thenReturn(caller);
  Mockito.when(caller.callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt())).thenAnswer(new Answer<Result[]>(){
    private int count=0;
    @Override public Result[] answer(    InvocationOnMock invocation) throws Throwable {
      ScannerCallableWithReplicas callable=invocation.getArgumentAt(0,ScannerCallableWithReplicas.class);
switch (count) {
case 0:
case 2:
        count++;
      return null;
case 1:
    count++;
  callable.setHasMoreResultsContext(false);
return results;
default :
throw new RuntimeException("Expected only 2 invocations");
}
}
}
);
scan.setCaching(100);
scan.setMaxResultSize(1000 * 1000);
try (MockClientScanner scanner=new MockClientScanner(conf,scan,TableName.valueOf("table"),clusterConn,rpcFactory,controllerFactory,pool,Integer.MAX_VALUE)){
scanner.setRpcFinished(true);
InOrder inOrder=Mockito.inOrder(caller);
scanner.loadCache();
inOrder.verify(caller,Mockito.times(2)).callWithoutRetries(Mockito.any(RetryingCallable.class),Mockito.anyInt());
assertEquals(1,scanner.cache.size());
Result r=scanner.cache.poll();
assertNotNull(r);
CellScanner cs=r.cellScanner();
assertTrue(cs.advance());
assertEquals(kv1,cs.current());
assertFalse(cs.advance());
}
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestClientSmallReversedScanner </h4><pre class="type-4 type-9 type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testContextPresent() throws Exception {
  final KeyValue kv1=new KeyValue("row1".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum), kv2=new KeyValue("row2".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum), kv3=new KeyValue("row3".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum);
  ScannerCallableWithReplicas callableWithReplicas=Mockito.mock(ScannerCallableWithReplicas.class);
  @SuppressWarnings("unchecked") RpcRetryingCaller<Result[]> caller=Mockito.mock(RpcRetryingCaller.class);
  Mockito.when(rpcFactory.<Result[]>newCaller()).thenReturn(caller);
  SmallScannerCallableFactory factory=getFactory(callableWithReplicas);
  try (ClientSmallReversedScanner csrs=new ClientSmallReversedScanner(conf,scan,TableName.valueOf("table"),clusterConn,rpcFactory,controllerFactory,pool,Integer.MAX_VALUE)){
    csrs.setScannerCallableFactory(factory);
    Mockito.when(caller.callWithoutRetries(callableWithReplicas,csrs.getScannerTimeout())).thenAnswer(new Answer<Result[]>(){
      int count=0;
      @Override public Result[] answer(      InvocationOnMock invocation){
        Result[] results;
        if (0 == count) {
          results=new Result[]{Result.create(new Cell[]{kv3}),Result.create(new Cell[]{kv2})};
        }
 else         if (1 == count) {
          results=new Result[]{Result.create(new Cell[]{kv1})};
        }
 else {
          results=new Result[0];
        }
        count++;
        return results;
      }
    }
);
    Mockito.when(callableWithReplicas.hasMoreResultsContext()).thenReturn(true);
    Mockito.when(callableWithReplicas.getServerHasMoreResults()).thenAnswer(createTrueThenFalseAnswer());
    HRegionInfo regionInfo=Mockito.mock(HRegionInfo.class);
    Mockito.when(callableWithReplicas.getHRegionInfo()).thenReturn(regionInfo);
    Mockito.when(regionInfo.getEndKey()).thenReturn(HConstants.EMPTY_BYTE_ARRAY);
    csrs.loadCache();
    Queue<Result> results=csrs.cache;
    Iterator<Result> iter=results.iterator();
    assertEquals(3,results.size());
    for (int i=3; i >= 1 && iter.hasNext(); i--) {
      Result result=iter.next();
      byte[] row=result.getRow();
      assertEquals("row" + i,new String(row,StandardCharsets.UTF_8));
      assertEquals(1,result.getMap().size());
    }
    assertTrue(csrs.closed);
  }
 }

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoContextFewerRecords() throws Exception {
  final KeyValue kv1=new KeyValue("row1".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum), kv2=new KeyValue("row2".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum), kv3=new KeyValue("row3".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum);
  ScannerCallableWithReplicas callableWithReplicas=Mockito.mock(ScannerCallableWithReplicas.class);
  scan.setCaching(2);
  SmallScannerCallableFactory factory=getFactory(callableWithReplicas);
  try (ClientSmallReversedScanner csrs=new ClientSmallReversedScanner(conf,scan,TableName.valueOf("table"),clusterConn,rpcFactory,controllerFactory,pool,Integer.MAX_VALUE)){
    csrs.setScannerCallableFactory(factory);
    Mockito.when(caller.callWithoutRetries(callableWithReplicas,csrs.getScannerTimeout())).thenAnswer(new Answer<Result[]>(){
      int count=0;
      @Override public Result[] answer(      InvocationOnMock invocation){
        Result[] results;
        if (0 == count) {
          results=new Result[]{Result.create(new Cell[]{kv3}),Result.create(new Cell[]{kv2})};
        }
 else         if (1 == count) {
          results=new Result[]{Result.create(new Cell[]{kv1})};
        }
 else {
          throw new RuntimeException("Should not fetch a third batch from the server");
        }
        count++;
        return results;
      }
    }
);
    Mockito.when(callableWithReplicas.hasMoreResultsContext()).thenReturn(false);
    Mockito.when(callableWithReplicas.getServerHasMoreResults()).thenThrow(new RuntimeException("Should not be called"));
    HRegionInfo regionInfo=Mockito.mock(HRegionInfo.class);
    Mockito.when(callableWithReplicas.getHRegionInfo()).thenReturn(regionInfo);
    Mockito.when(regionInfo.getEndKey()).thenReturn(HConstants.EMPTY_BYTE_ARRAY);
    csrs.loadCache();
    Queue<Result> results=csrs.cache;
    Iterator<Result> iter=results.iterator();
    assertEquals(2,results.size());
    for (int i=3; i >= 2 && iter.hasNext(); i--) {
      Result result=iter.next();
      byte[] row=result.getRow();
      assertEquals("row" + i,new String(row,StandardCharsets.UTF_8));
      assertEquals(1,result.getMap().size());
    }
    results.clear();
    csrs.loadCache();
    assertEquals(1,results.size());
    Result result=results.peek();
    assertEquals("row1",new String(result.getRow(),StandardCharsets.UTF_8));
    assertEquals(1,result.getMap().size());
    assertTrue(csrs.closed);
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestClientSmallScanner </h4><pre class="type-4 type-9 type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoContextFewerRecords() throws Exception {
  final KeyValue kv1=new KeyValue("row1".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum), kv2=new KeyValue("row2".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum), kv3=new KeyValue("row3".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum);
  ScannerCallableWithReplicas callableWithReplicas=Mockito.mock(ScannerCallableWithReplicas.class);
  scan.setCaching(2);
  SmallScannerCallableFactory factory=getFactory(callableWithReplicas);
  try (ClientSmallScanner css=new ClientSmallScanner(conf,scan,TableName.valueOf("table"),clusterConn,rpcFactory,controllerFactory,pool,Integer.MAX_VALUE)){
    css.setScannerCallableFactory(factory);
    Mockito.when(caller.callWithoutRetries(callableWithReplicas,css.getScannerTimeout())).thenAnswer(new Answer<Result[]>(){
      int count=0;
      @Override public Result[] answer(      InvocationOnMock invocation){
        Result[] results;
        if (0 == count) {
          results=new Result[]{Result.create(new Cell[]{kv1}),Result.create(new Cell[]{kv2})};
        }
 else         if (1 == count) {
          results=new Result[]{Result.create(new Cell[]{kv3})};
        }
 else {
          throw new RuntimeException("Should not fetch a third batch from the server");
        }
        count++;
        return results;
      }
    }
);
    Mockito.when(callableWithReplicas.hasMoreResultsContext()).thenReturn(false);
    Mockito.when(callableWithReplicas.getServerHasMoreResults()).thenThrow(new RuntimeException("Should not be called"));
    HRegionInfo regionInfo=Mockito.mock(HRegionInfo.class);
    Mockito.when(callableWithReplicas.getHRegionInfo()).thenReturn(regionInfo);
    Mockito.when(regionInfo.getEndKey()).thenReturn(HConstants.EMPTY_BYTE_ARRAY);
    css.loadCache();
    Queue<Result> results=css.cache;
    assertEquals(2,results.size());
    for (int i=1; i <= 2; i++) {
      Result result=results.poll();
      byte[] row=result.getRow();
      assertEquals("row" + i,new String(row,StandardCharsets.UTF_8));
      assertEquals(1,result.getMap().size());
    }
    results.clear();
    css.loadCache();
    assertEquals(1,results.size());
    Result result=results.peek();
    assertEquals("row3",new String(result.getRow(),StandardCharsets.UTF_8));
    assertEquals(1,result.getMap().size());
    assertTrue(css.closed);
  }
 }

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testContextPresent() throws Exception {
  final KeyValue kv1=new KeyValue("row1".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum), kv2=new KeyValue("row2".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum), kv3=new KeyValue("row3".getBytes(),"cf".getBytes(),"cq".getBytes(),1,Type.Maximum);
  ScannerCallableWithReplicas callableWithReplicas=Mockito.mock(ScannerCallableWithReplicas.class);
  @SuppressWarnings("unchecked") RpcRetryingCaller<Result[]> caller=Mockito.mock(RpcRetryingCaller.class);
  Mockito.when(rpcFactory.<Result[]>newCaller()).thenReturn(caller);
  SmallScannerCallableFactory factory=getFactory(callableWithReplicas);
  try (ClientSmallScanner css=new ClientSmallScanner(conf,scan,TableName.valueOf("table"),clusterConn,rpcFactory,controllerFactory,pool,Integer.MAX_VALUE)){
    css.setScannerCallableFactory(factory);
    Mockito.when(caller.callWithoutRetries(callableWithReplicas,css.getScannerTimeout())).thenAnswer(new Answer<Result[]>(){
      int count=0;
      @Override public Result[] answer(      InvocationOnMock invocation){
        Result[] results;
        if (0 == count) {
          results=new Result[]{Result.create(new Cell[]{kv1}),Result.create(new Cell[]{kv2})};
        }
 else         if (1 == count) {
          results=new Result[]{Result.create(new Cell[]{kv3})};
        }
 else {
          results=new Result[0];
        }
        count++;
        return results;
      }
    }
);
    Mockito.when(callableWithReplicas.hasMoreResultsContext()).thenReturn(true);
    Mockito.when(callableWithReplicas.getServerHasMoreResults()).thenAnswer(createTrueThenFalseAnswer());
    HRegionInfo regionInfo=Mockito.mock(HRegionInfo.class);
    Mockito.when(callableWithReplicas.getHRegionInfo()).thenReturn(regionInfo);
    Mockito.when(regionInfo.getEndKey()).thenReturn(HConstants.EMPTY_BYTE_ARRAY);
    css.loadCache();
    Queue<Result> results=css.cache;
    assertEquals(3,results.size());
    for (int i=1; i <= 3; i++) {
      Result result=results.poll();
      byte[] row=result.getRow();
      assertEquals("row" + i,new String(row,StandardCharsets.UTF_8));
      assertEquals(1,result.getMap().size());
    }
    assertTrue(css.closed);
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestFromClientSide </h4><pre class="type-9 type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testGetStartEndKeysWithRegionReplicas() throws IOException {
  HTableDescriptor htd=new HTableDescriptor(TableName.valueOf("testGetStartEndKeys"));
  HColumnDescriptor fam=new HColumnDescriptor(FAMILY);
  htd.addFamily(fam);
  byte[][] KEYS=HBaseTestingUtility.KEYS_FOR_HBA_CREATE_TABLE;
  Admin admin=TEST_UTIL.getHBaseAdmin();
  admin.createTable(htd,KEYS);
  List<HRegionInfo> regions=admin.getTableRegions(htd.getTableName());
  HRegionLocator locator=(HRegionLocator)admin.getConnection().getRegionLocator(htd.getTableName());
  for (int regionReplication=1; regionReplication < 4; regionReplication++) {
    List<RegionLocations> regionLocations=new ArrayList<RegionLocations>();
    for (    HRegionInfo region : regions) {
      HRegionLocation[] arr=new HRegionLocation[regionReplication];
      for (int i=0; i < arr.length; i++) {
        arr[i]=new HRegionLocation(RegionReplicaUtil.getRegionInfoForReplica(region,i),null);
      }
      regionLocations.add(new RegionLocations(arr));
    }
    Pair<byte[][],byte[][]> startEndKeys=locator.getStartEndKeys(regionLocations);
    assertEquals(KEYS.length + 1,startEndKeys.getFirst().length);
    for (int i=0; i < KEYS.length + 1; i++) {
      byte[] startKey=i == 0 ? HConstants.EMPTY_START_ROW : KEYS[i - 1];
      byte[] endKey=i == KEYS.length ? HConstants.EMPTY_END_ROW : KEYS[i];
      assertArrayEquals(startKey,startEndKeys.getFirst()[i]);
      assertArrayEquals(endKey,startEndKeys.getSecond()[i]);
    }
  }
}

</code></pre>

<br>
<pre class="type-4 type-10 type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests reversed scan under multi regions
 */
@Test public void testReversedScanUnderMultiRegions() throws Exception {
  TableName TABLE=TableName.valueOf("testReversedScanUnderMultiRegions");
  byte[] maxByteArray=ReversedClientScanner.MAX_BYTE_ARRAY;
  byte[][] splitRows=new byte[][]{Bytes.toBytes("005"),Bytes.add(Bytes.toBytes("005"),Bytes.multiple(maxByteArray,16)),Bytes.toBytes("006"),Bytes.add(Bytes.toBytes("006"),Bytes.multiple(maxByteArray,8)),Bytes.toBytes("007"),Bytes.add(Bytes.toBytes("007"),Bytes.multiple(maxByteArray,4)),Bytes.toBytes("008"),Bytes.multiple(maxByteArray,2)};
  Table table=TEST_UTIL.createTable(TABLE,FAMILY,splitRows);
  TEST_UTIL.waitUntilAllRegionsAssigned(table.getName());
  try (RegionLocator l=TEST_UTIL.getConnection().getRegionLocator(TABLE)){
    assertEquals(splitRows.length + 1,l.getAllRegionLocations().size());
  }
   int insertNum=splitRows.length;
  for (int i=0; i < insertNum; i++) {
    Put put=new Put(splitRows[i]);
    put.addColumn(FAMILY,QUALIFIER,VALUE);
    table.put(put);
  }
  ResultScanner scanner=table.getScanner(new Scan());
  int count=0;
  for (  Result r : scanner) {
    assertTrue(!r.isEmpty());
    count++;
  }
  assertEquals(insertNum,count);
  Scan scan=new Scan();
  scan.setReversed(true);
  scanner=table.getScanner(scan);
  count=0;
  byte[] lastRow=null;
  for (  Result r : scanner) {
    assertTrue(!r.isEmpty());
    count++;
    byte[] thisRow=r.getRow();
    if (lastRow != null) {
      assertTrue("Error scan order, last row= " + Bytes.toString(lastRow) + ",this row="+ Bytes.toString(thisRow),Bytes.compareTo(thisRow,lastRow) < 0);
    }
    lastRow=thisRow;
  }
  assertEquals(insertNum,count);
  table.close();
}

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void testListTables() throws IOException, InterruptedException {
  TableName t1=TableName.valueOf("testListTables1");
  TableName t2=TableName.valueOf("testListTables2");
  TableName t3=TableName.valueOf("testListTables3");
  TableName[] tables=new TableName[]{t1,t2,t3};
  for (int i=0; i < tables.length; i++) {
    TEST_UTIL.createTable(tables[i],FAMILY);
  }
  Admin admin=TEST_UTIL.getHBaseAdmin();
  HTableDescriptor[] ts=admin.listTables();
  HashSet<HTableDescriptor> result=new HashSet<HTableDescriptor>(ts.length);
  Collections.addAll(result,ts);
  int size=result.size();
  assertTrue(size >= tables.length);
  for (int i=0; i < tables.length && i < size; i++) {
    boolean found=false;
    for (int j=0; j < ts.length; j++) {
      if (ts[j].getTableName().equals(tables[i])) {
        found=true;
        break;
      }
    }
    assertTrue("Not found: " + tables[i],found);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.coprocessor.TestRegionObserverInterface </h4><pre class="type-4 type-9 type-7 type-8 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests overriding compaction handling via coprocessor hooks
 * @throws Exception
 */
@Test(timeout=300000) public void testCompactionOverride() throws Exception {
  TableName compactTable=TableName.valueOf("TestCompactionOverride");
  Admin admin=util.getHBaseAdmin();
  if (admin.tableExists(compactTable)) {
    admin.disableTable(compactTable);
    admin.deleteTable(compactTable);
  }
  HTableDescriptor htd=new HTableDescriptor(compactTable);
  htd.addFamily(new HColumnDescriptor(A));
  htd.addCoprocessor(EvenOnlyCompactor.class.getName());
  admin.createTable(htd);
  Table table=util.getConnection().getTable(compactTable);
  for (long i=1; i <= 10; i++) {
    byte[] iBytes=Bytes.toBytes(i);
    Put put=new Put(iBytes);
    put.setDurability(Durability.SKIP_WAL);
    put.addColumn(A,A,iBytes);
    table.put(put);
  }
  HRegion firstRegion=cluster.getRegions(compactTable).get(0);
  Coprocessor cp=firstRegion.getCoprocessorHost().findCoprocessor(EvenOnlyCompactor.class.getName());
  assertNotNull("EvenOnlyCompactor coprocessor should be loaded",cp);
  EvenOnlyCompactor compactor=(EvenOnlyCompactor)cp;
  long ts=System.currentTimeMillis();
  admin.flush(compactTable);
  for (int i=0; i < 10; i++) {
    if (compactor.lastFlush >= ts) {
      break;
    }
    Thread.sleep(1000);
  }
  assertTrue("Flush didn't complete",compactor.lastFlush >= ts);
  LOG.debug("Flush complete");
  ts=compactor.lastFlush;
  admin.majorCompact(compactTable);
  for (int i=0; i < 30; i++) {
    if (compactor.lastCompaction >= ts) {
      break;
    }
    Thread.sleep(1000);
  }
  LOG.debug("Last compaction was at " + compactor.lastCompaction);
  assertTrue("Compaction didn't complete",compactor.lastCompaction >= ts);
  ResultScanner scanner=table.getScanner(new Scan());
  try {
    for (long i=2; i <= 10; i+=2) {
      Result r=scanner.next();
      assertNotNull(r);
      assertFalse(r.isEmpty());
      byte[] iBytes=Bytes.toBytes(i);
      assertArrayEquals("Row should be " + i,r.getRow(),iBytes);
      assertArrayEquals("Value should be " + i,r.getValue(A,A),iBytes);
    }
  }
  finally {
    scanner.close();
  }
  table.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.executor.TestExecutorService </h4><pre class="type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExecutorService() throws Exception {
  int maxThreads=5;
  int maxTries=10;
  int sleepInterval=10;
  Server mockedServer=mock(Server.class);
  when(mockedServer.getConfiguration()).thenReturn(HBaseConfiguration.create());
  ExecutorService executorService=new ExecutorService("unit_test");
  executorService.startExecutorService(ExecutorType.MASTER_SERVER_OPERATIONS,maxThreads);
  Executor executor=executorService.getExecutor(ExecutorType.MASTER_SERVER_OPERATIONS);
  ThreadPoolExecutor pool=executor.threadPoolExecutor;
  assertEquals(0,pool.getPoolSize());
  AtomicBoolean lock=new AtomicBoolean(true);
  AtomicInteger counter=new AtomicInteger(0);
  for (int i=0; i < maxThreads; i++) {
    executorService.submit(new TestEventHandler(mockedServer,EventType.M_SERVER_SHUTDOWN,lock,counter));
  }
  int tries=0;
  while (counter.get() < maxThreads && tries < maxTries) {
    LOG.info("Waiting for all event handlers to start...");
    Thread.sleep(sleepInterval);
    tries++;
  }
  assertEquals(maxThreads,counter.get());
  assertEquals(maxThreads,pool.getPoolSize());
  ExecutorStatus status=executor.getStatus();
  assertTrue(status.queuedEvents.isEmpty());
  assertEquals(5,status.running.size());
  checkStatusDump(status);
synchronized (lock) {
    lock.set(false);
    lock.notifyAll();
  }
  while (counter.get() < (maxThreads * 2) && tries < maxTries) {
    System.out.println("Waiting for all event handlers to finish...");
    Thread.sleep(sleepInterval);
    tries++;
  }
  assertEquals(maxThreads * 2,counter.get());
  assertEquals(maxThreads,pool.getPoolSize());
  for (int i=0; i < (2 * maxThreads); i++) {
    executorService.submit(new TestEventHandler(mockedServer,EventType.M_SERVER_SHUTDOWN,lock,counter));
  }
synchronized (lock) {
    lock.set(false);
    lock.notifyAll();
  }
  Thread.sleep(ExecutorService.Executor.keepAliveTimeInMillis * 2);
  assertEquals(maxThreads,pool.getPoolSize());
  executorService.shutdown();
  assertEquals(0,executorService.getAllExecutorStatuses().size());
  executorService.submit(new TestEventHandler(mockedServer,EventType.M_SERVER_SHUTDOWN,lock,counter));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.filter.TestRegexComparator </h4><pre class="type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testJavaEngine() throws Exception {
  for (  TestCase t : TEST_CASES) {
    boolean result=new RegexStringComparator(t.regex,t.flags,EngineType.JAVA).compareTo(Bytes.toBytes(t.haystack)) == 0;
    assertEquals("Regex '" + t.regex + "' failed test '"+ t.haystack+ "'",result,t.expected);
  }
}

</code></pre>

<br>
<pre class="type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testJoniEngine() throws Exception {
  for (  TestCase t : TEST_CASES) {
    boolean result=new RegexStringComparator(t.regex,t.flags,EngineType.JONI).compareTo(Bytes.toBytes(t.haystack)) == 0;
    assertEquals("Regex '" + t.regex + "' failed test '"+ t.haystack+ "'",result,t.expected);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.filter.TestSingleColumnValueFilter </h4><pre class="type-4 type-7 type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void testLongComparator() throws IOException {
  Filter filter=new SingleColumnValueFilter(COLUMN_FAMILY,COLUMN_QUALIFIER,CompareOp.GREATER,new LongComparator(100L));
  KeyValue kv=new KeyValue(ROW,COLUMN_FAMILY,COLUMN_QUALIFIER,Bytes.toBytes(1L));
  assertTrue("less than",filter.filterKeyValue(kv) == Filter.ReturnCode.NEXT_ROW);
  filter.reset();
  byte[] buffer=kv.getBuffer();
  Cell c=new ByteBufferedCellImpl(ByteBuffer.wrap(buffer),0,buffer.length);
  assertTrue("less than",filter.filterKeyValue(c) == Filter.ReturnCode.NEXT_ROW);
  filter.reset();
  kv=new KeyValue(ROW,COLUMN_FAMILY,COLUMN_QUALIFIER,Bytes.toBytes(100L));
  assertTrue("Equals 100",filter.filterKeyValue(kv) == Filter.ReturnCode.NEXT_ROW);
  filter.reset();
  buffer=kv.getBuffer();
  c=new ByteBufferedCellImpl(ByteBuffer.wrap(buffer),0,buffer.length);
  assertTrue("Equals 100",filter.filterKeyValue(c) == Filter.ReturnCode.NEXT_ROW);
  filter.reset();
  kv=new KeyValue(ROW,COLUMN_FAMILY,COLUMN_QUALIFIER,Bytes.toBytes(120L));
  assertTrue("include 120",filter.filterKeyValue(kv) == Filter.ReturnCode.INCLUDE);
  filter.reset();
  buffer=kv.getBuffer();
  c=new ByteBufferedCellImpl(ByteBuffer.wrap(buffer),0,buffer.length);
  assertTrue("include 120",filter.filterKeyValue(c) == Filter.ReturnCode.INCLUDE);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.http.TestHttpServer </h4><pre class="type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test the maximum number of threads cannot be exceeded. 
 */
@Test public void testMaxThreads() throws Exception {
  int clientThreads=MAX_THREADS * 10;
  Executor executor=Executors.newFixedThreadPool(clientThreads);
  final CountDownLatch ready=new CountDownLatch(clientThreads);
  final CountDownLatch start=new CountDownLatch(1);
  for (int i=0; i < clientThreads; i++) {
    executor.execute(new Runnable(){
      @Override public void run(){
        ready.countDown();
        try {
          start.await();
          assertEquals("a:b\nc:d\n",readOutput(new URL(baseUrl,"/echo?a=b&c=d")));
          int serverThreads=server.webServer.getThreadPool().getThreads();
          assertTrue("More threads are started than expected, Server Threads count: " + serverThreads,serverThreads <= MAX_THREADS);
          System.out.println("Number of threads = " + serverThreads + " which is less or equal than the max = "+ MAX_THREADS);
        }
 catch (        Exception e) {
        }
      }
    }
);
  }
  ready.await();
  start.countDown();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.io.TestByteBufferOutputStream </h4><pre class="type-4 type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void testByteBufferReuse() throws IOException {
  byte[] someBytes=Bytes.toBytes("some bytes");
  ByteBuffer bb=ByteBuffer.allocate(someBytes.length);
  ByteBuffer bbToReuse=write(bb,someBytes);
  bbToReuse=write(bbToReuse,Bytes.toBytes("less"));
  assertTrue(bb == bbToReuse);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.io.TestMultiByteBuffInputStream </h4><pre class="type-4 type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testReads() throws Exception {
  ByteArrayOutputStream bos=new ByteArrayOutputStream(100);
  DataOutputStream dos=new DataOutputStream(bos);
  String s="test";
  int i=128;
  dos.write(1);
  dos.writeInt(i);
  dos.writeBytes(s);
  dos.writeLong(12345L);
  dos.writeShort(2);
  dos.flush();
  ByteBuffer bb=ByteBuffer.wrap(bos.toByteArray());
  ByteBuffInputStream bbis=new ByteBuffInputStream(new MultiByteBuff(bb));
  assertEquals(15 + s.length(),bbis.available());
  assertEquals(1,bbis.read());
  byte[] ib=new byte[4];
  bbis.read(ib);
  assertEquals(i,Bytes.toInt(ib));
  byte[] sb=new byte[s.length()];
  bbis.read(sb);
  assertEquals(s,Bytes.toString(sb));
  byte[] lb=new byte[8];
  bbis.read(lb);
  assertEquals(12345,Bytes.toLong(lb));
  assertEquals(2,bbis.available());
  ib=new byte[4];
  int read=bbis.read(ib,0,ib.length);
  assertEquals(2,read);
  assertEquals(2,Bytes.toShort(ib));
  assertEquals(0,bbis.available());
  assertEquals(-1,bbis.read());
  bbis.close();
  bb=ByteBuffer.wrap(bos.toByteArray());
  bbis=new ByteBuffInputStream(new MultiByteBuff(bb));
  DataInputStream dis=new DataInputStream(bbis);
  dis.read();
  assertEquals(i,dis.readInt());
  dis.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.io.hfile.TestHFileBlockIndex </h4><pre class="type-4 type-9 type-10 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSecondaryIndexBinarySearch() throws IOException {
  int numTotalKeys=99;
  assertTrue(numTotalKeys % 2 == 1);
  int numSearchedKeys=(numTotalKeys - 1) / 2;
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(baos);
  dos.writeInt(numSearchedKeys);
  int curAllEntriesSize=0;
  int numEntriesAdded=0;
  int secondaryIndexEntries[]=new int[numTotalKeys];
  for (int i=0; i < numTotalKeys; ++i) {
    byte[] k=RandomKeyValueUtil.randomOrderedKey(rand,i * 2);
    KeyValue cell=new KeyValue(k,Bytes.toBytes("f"),Bytes.toBytes("q"),Bytes.toBytes("val"));
    keys.add(cell.getKey());
    String msgPrefix="Key #" + i + " ("+ Bytes.toStringBinary(k)+ "): ";
    StringBuilder padding=new StringBuilder();
    while (msgPrefix.length() + padding.length() < 70)     padding.append(' ');
    msgPrefix+=padding;
    if (i % 2 == 1) {
      dos.writeInt(curAllEntriesSize);
      secondaryIndexEntries[i]=curAllEntriesSize;
      LOG.info(msgPrefix + "secondary index entry #" + ((i - 1) / 2)+ ", offset "+ curAllEntriesSize);
      curAllEntriesSize+=cell.getKey().length + HFileBlockIndex.SECONDARY_INDEX_ENTRY_OVERHEAD;
      ++numEntriesAdded;
    }
 else {
      secondaryIndexEntries[i]=-1;
      LOG.info(msgPrefix + "not in the searched array");
    }
  }
  for (int i=0; i < keys.size() - 1; ++i)   assertTrue(CellComparator.COMPARATOR.compare(new KeyValue.KeyOnlyKeyValue(keys.get(i),0,keys.get(i).length),new KeyValue.KeyOnlyKeyValue(keys.get(i + 1),0,keys.get(i + 1).length)) < 0);
  dos.writeInt(curAllEntriesSize);
  assertEquals(numSearchedKeys,numEntriesAdded);
  int secondaryIndexOffset=dos.size();
  assertEquals(Bytes.SIZEOF_INT * (numSearchedKeys + 2),secondaryIndexOffset);
  for (int i=1; i <= numTotalKeys - 1; i+=2) {
    assertEquals(dos.size(),secondaryIndexOffset + secondaryIndexEntries[i]);
    long dummyFileOffset=getDummyFileOffset(i);
    int dummyOnDiskSize=getDummyOnDiskSize(i);
    LOG.debug("Storing file offset=" + dummyFileOffset + " and onDiskSize="+ dummyOnDiskSize+ " at offset "+ dos.size());
    dos.writeLong(dummyFileOffset);
    dos.writeInt(dummyOnDiskSize);
    LOG.debug("Stored key " + ((i - 1) / 2) + " at offset "+ dos.size());
    dos.write(keys.get(i));
  }
  dos.writeInt(curAllEntriesSize);
  ByteBuffer nonRootIndex=ByteBuffer.wrap(baos.toByteArray());
  for (int i=0; i < numTotalKeys; ++i) {
    byte[] searchKey=keys.get(i);
    byte[] arrayHoldingKey=new byte[searchKey.length + searchKey.length / 2];
    System.arraycopy(searchKey,0,arrayHoldingKey,searchKey.length / 2,searchKey.length);
    KeyValue.KeyOnlyKeyValue cell=new KeyValue.KeyOnlyKeyValue(arrayHoldingKey,searchKey.length / 2,searchKey.length);
    int searchResult=BlockIndexReader.binarySearchNonRootIndex(cell,new MultiByteBuff(nonRootIndex),CellComparator.COMPARATOR);
    String lookupFailureMsg="Failed to look up key #" + i + " ("+ Bytes.toStringBinary(searchKey)+ ")";
    int expectedResult;
    int referenceItem;
    if (i % 2 == 1) {
      expectedResult=(i - 1) / 2;
      referenceItem=i;
    }
 else {
      expectedResult=i / 2 - 1;
      referenceItem=i - 1;
    }
    assertEquals(lookupFailureMsg,expectedResult,searchResult);
    boolean locateBlockResult=(BlockIndexReader.locateNonRootIndexEntry(new MultiByteBuff(nonRootIndex),cell,CellComparator.COMPARATOR) != -1);
    if (i == 0) {
      assertFalse(locateBlockResult);
    }
 else {
      assertTrue(locateBlockResult);
      String errorMsg="i=" + i + ", position="+ nonRootIndex.position();
      assertEquals(errorMsg,getDummyFileOffset(referenceItem),nonRootIndex.getLong());
      assertEquals(errorMsg,getDummyOnDiskSize(referenceItem),nonRootIndex.getInt());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.io.hfile.TestLruBlockCache </h4><pre class="type-4 type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCacheSimple() throws Exception {
  long maxSize=1000000;
  long blockSize=calculateBlockSizeDefault(maxSize,101);
  LruBlockCache cache=new LruBlockCache(maxSize,blockSize);
  CachedItem[] blocks=generateRandomBlocks(100,blockSize);
  long expectedCacheSize=cache.heapSize();
  for (  CachedItem block : blocks) {
    assertTrue(cache.getBlock(block.cacheKey,true,false,true) == null);
  }
  for (  CachedItem block : blocks) {
    cache.cacheBlock(block.cacheKey,block);
    expectedCacheSize+=block.cacheBlockHeapSize();
  }
  assertEquals(expectedCacheSize,cache.heapSize());
  for (  CachedItem block : blocks) {
    HeapSize buf=cache.getBlock(block.cacheKey,true,false,true);
    assertTrue(buf != null);
    assertEquals(buf.heapSize(),block.heapSize());
  }
  long expectedBlockCount=cache.getBlockCount();
  for (  CachedItem block : blocks) {
    cache.cacheBlock(block.cacheKey,block);
  }
  assertEquals("Cache should ignore cache requests for blocks already in cache",expectedBlockCount,cache.getBlockCount());
  assertEquals(expectedCacheSize,cache.heapSize());
  for (  CachedItem block : blocks) {
    HeapSize buf=cache.getBlock(block.cacheKey,true,false,true);
    assertTrue(buf != null);
    assertEquals(buf.heapSize(),block.heapSize());
  }
  assertEquals(0,cache.getStats().getEvictionCount());
  Thread t=new LruBlockCache.StatisticsThread(cache);
  t.start();
  t.join();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.io.hfile.bucket.TestBucketWriterThread </h4><pre class="type-2 type-8 type-5 type-20 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Set up variables and get BucketCache and WriterThread into state where tests can  manually
 * control the running of WriterThread and BucketCache is empty.
 * @throws Exception
 */
@Before public void setUp() throws Exception {
  final int capacity=16;
  final int writerThreadsCount=1;
  this.bc=new MockBucketCache("heap",capacity,1,new int[]{1},writerThreadsCount,capacity,null,100);
  assertEquals(writerThreadsCount,bc.writerThreads.length);
  assertEquals(writerThreadsCount,bc.writerQueues.size());
  this.wt=bc.writerThreads[0];
  this.q=bc.writerQueues.get(0);
  wt.disableWriter();
  this.plainKey=new BlockCacheKey("f",0);
  this.plainCacheable=Mockito.mock(Cacheable.class);
  assertThat(bc.ramCache.isEmpty(),is(true));
  assertTrue(q.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.io.hfile.bucket.TestByteBufferIOEngine </h4><pre class="type-9 type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void testByteBufferIOEngine() throws Exception {
  int capacity=32 * 1024 * 1024;
  int testNum=100;
  int maxBlockSize=64 * 1024;
  ByteBufferIOEngine ioEngine=new ByteBufferIOEngine(capacity,false);
  int testOffsetAtStartNum=testNum / 10;
  int testOffsetAtEndNum=testNum / 10;
  for (int i=0; i < testNum; i++) {
    byte val=(byte)(Math.random() * 255);
    int blockSize=(int)(Math.random() * maxBlockSize);
    if (blockSize == 0) {
      blockSize=1;
    }
    byte[] byteArray=new byte[blockSize];
    for (int j=0; j < byteArray.length; ++j) {
      byteArray[j]=val;
    }
    ByteBuffer srcBuffer=ByteBuffer.wrap(byteArray);
    int offset=0;
    if (testOffsetAtStartNum > 0) {
      testOffsetAtStartNum--;
      offset=0;
    }
 else     if (testOffsetAtEndNum > 0) {
      testOffsetAtEndNum--;
      offset=capacity - blockSize;
    }
 else {
      offset=(int)(Math.random() * (capacity - maxBlockSize));
    }
    ioEngine.write(srcBuffer,offset);
    BufferGrabbingDeserializer deserializer=new BufferGrabbingDeserializer();
    ioEngine.read(offset,blockSize,deserializer);
    ByteBuff dstBuffer=deserializer.buf;
    for (int j=0; j < byteArray.length; ++j) {
      assertTrue(byteArray[j] == dstBuffer.get(j));
    }
  }
  assert testOffsetAtStartNum == 0;
  assert testOffsetAtEndNum == 0;
}

</code></pre>

<br>
<pre class="type-4 type-9 type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void testByteBufferIOEngineWithMBB() throws Exception {
  int capacity=32 * 1024 * 1024;
  int testNum=100;
  int maxBlockSize=64 * 1024;
  ByteBufferIOEngine ioEngine=new ByteBufferIOEngine(capacity,false);
  int testOffsetAtStartNum=testNum / 10;
  int testOffsetAtEndNum=testNum / 10;
  for (int i=0; i < testNum; i++) {
    byte val=(byte)(Math.random() * 255);
    int blockSize=(int)(Math.random() * maxBlockSize);
    if (blockSize == 0) {
      blockSize=1;
    }
    byte[] byteArray=new byte[blockSize];
    for (int j=0; j < byteArray.length; ++j) {
      byteArray[j]=val;
    }
    ByteBuffer srcBuffer=ByteBuffer.wrap(byteArray);
    int offset=0;
    if (testOffsetAtStartNum > 0) {
      testOffsetAtStartNum--;
      offset=0;
    }
 else     if (testOffsetAtEndNum > 0) {
      testOffsetAtEndNum--;
      offset=capacity - blockSize;
    }
 else {
      offset=(int)(Math.random() * (capacity - maxBlockSize));
    }
    ioEngine.write(srcBuffer,offset);
    BufferGrabbingDeserializer deserializer=new BufferGrabbingDeserializer();
    ioEngine.read(offset,blockSize,deserializer);
    ByteBuff dstBuffer=deserializer.buf;
    for (int j=0; j < byteArray.length; ++j) {
      assertTrue(srcBuffer.get(j) == dstBuffer.get(j));
    }
  }
  assert testOffsetAtStartNum == 0;
  assert testOffsetAtEndNum == 0;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.io.util.TestLRUDictionary </h4><pre class="type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasic(){
  Random rand=new Random();
  byte[] testBytes=new byte[10];
  rand.nextBytes(testBytes);
  assertEquals(testee.findEntry(testBytes,0,testBytes.length),-1);
  assertFalse(isDictionaryEmpty(testee));
  short t=testee.findEntry(testBytes,0,testBytes.length);
  assertTrue(t != -1);
  byte[] testBytesCopy=new byte[20];
  Bytes.putBytes(testBytesCopy,10,testBytes,0,testBytes.length);
  assertEquals(testee.findEntry(testBytesCopy,10,testBytes.length),t);
  assertTrue(Arrays.equals(testBytes,testee.getEntry(t)));
  testee.clear();
  assertTrue(isDictionaryEmpty(testee));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.mapred.TestRowCounter </h4><pre class="type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("deprecation") public void shouldExitAndPrintUsageSinceParameterNumberLessThanThree() throws Exception {
  final String[] args=new String[]{"one","two"};
  String line="ERROR: Wrong number of parameters: " + args.length;
  String result=new OutputReader(System.err){
    @Override void doRead() throws Exception {
      assertEquals(-1,new RowCounter().run(args));
    }
  }
.read();
  assertTrue(result.startsWith(line));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.mapreduce.TestImportTsvParser </h4><pre class="type-7 type-5 type-17 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=BadTsvLineException.class) public void testTsvParserInvalidTimestamp() throws BadTsvLineException {
  TsvParser parser=new TsvParser("HBASE_ROW_KEY,HBASE_TS_KEY,col_a,","\t");
  assertEquals(1,parser.getTimestampKeyColumnIndex());
  byte[] line=Bytes.toBytes("rowkey\ttimestamp\tval_a");
  ParsedLine parsed=parser.parse(line,line.length);
  assertEquals(-1,parsed.getTimestamp(-1));
  checkParsing(parsed,Splitter.on("\t").split(Bytes.toString(line)));
}

</code></pre>

<br>
<pre class="type-11 type-7 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTsvParseAttributesKey() throws BadTsvLineException {
  TsvParser parser=new TsvParser("HBASE_ROW_KEY,col_a,HBASE_TS_KEY,HBASE_ATTRIBUTES_KEY","\t");
  assertEquals(0,parser.getRowKeyColumnIndex());
  byte[] line=Bytes.toBytes("rowkey\tval_a\t1234\tkey=>value");
  ParsedLine parse=parser.parse(line,line.length);
  assertEquals(18,parse.getAttributeKeyOffset());
  assertEquals(3,parser.getAttributesKeyColumnIndex());
  String attributes[]=parse.getIndividualAttributes();
  assertEquals(attributes[0],"key=>value");
  try {
    line=Bytes.toBytes("rowkey\tval_a\t1234");
    parser.parse(line,line.length);
    fail("Should get BadTsvLineException on empty rowkey.");
  }
 catch (  BadTsvLineException b) {
  }
  parser=new TsvParser("HBASE_ATTRIBUTES_KEY,col_a,HBASE_ROW_KEY,HBASE_TS_KEY","\t");
  assertEquals(2,parser.getRowKeyColumnIndex());
  line=Bytes.toBytes("key=>value\tval_a\trowkey\t1234");
  parse=parser.parse(line,line.length);
  assertEquals(0,parse.getAttributeKeyOffset());
  assertEquals(0,parser.getAttributesKeyColumnIndex());
  attributes=parse.getIndividualAttributes();
  assertEquals(attributes[0],"key=>value");
  try {
    line=Bytes.toBytes("val_a");
    ParsedLine parse2=parser.parse(line,line.length);
    fail("Should get BadTsvLineException when number of columns less than rowkey position.");
  }
 catch (  BadTsvLineException b) {
  }
  parser=new TsvParser("col_a,HBASE_ATTRIBUTES_KEY,HBASE_TS_KEY,HBASE_ROW_KEY","\t");
  assertEquals(3,parser.getRowKeyColumnIndex());
  line=Bytes.toBytes("val_a\tkey0=>value0,key1=>value1,key2=>value2\t1234\trowkey");
  parse=parser.parse(line,line.length);
  assertEquals(1,parser.getAttributesKeyColumnIndex());
  assertEquals(6,parse.getAttributeKeyOffset());
  String[] attr=parse.getIndividualAttributes();
  int i=0;
  for (  String str : attr) {
    assertEquals(("key" + i + "=>"+ "value"+ i),str);
    i++;
  }
}

</code></pre>

<br>
<pre class="type-7 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTsvParserWithTimestamp() throws BadTsvLineException {
  TsvParser parser=new TsvParser("HBASE_ROW_KEY,HBASE_TS_KEY,col_a,","\t");
  assertNull(parser.getFamily(0));
  assertNull(parser.getQualifier(0));
  assertNull(parser.getFamily(1));
  assertNull(parser.getQualifier(1));
  assertBytesEquals(Bytes.toBytes("col_a"),parser.getFamily(2));
  assertBytesEquals(HConstants.EMPTY_BYTE_ARRAY,parser.getQualifier(2));
  assertEquals(0,parser.getRowKeyColumnIndex());
  assertEquals(1,parser.getTimestampKeyColumnIndex());
  byte[] line=Bytes.toBytes("rowkey\t1234\tval_a");
  ParsedLine parsed=parser.parse(line,line.length);
  assertEquals(1234l,parsed.getTimestamp(-1));
  checkParsing(parsed,Splitter.on("\t").split(Bytes.toString(line)));
}

</code></pre>

<br>
<pre class="type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testTsvParserWithCellVisibilityCol() throws BadTsvLineException {
  TsvParser parser=new TsvParser("HBASE_ROW_KEY,col_a,HBASE_TS_KEY,HBASE_ATTRIBUTES_KEY,HBASE_CELL_VISIBILITY","\t");
  assertEquals(0,parser.getRowKeyColumnIndex());
  assertEquals(4,parser.getCellVisibilityColumnIndex());
  byte[] line=Bytes.toBytes("rowkey\tval_a\t1234\tkey=>value\tPRIVATE&SECRET");
  ParsedLine parse=parser.parse(line,line.length);
  assertEquals(18,parse.getAttributeKeyOffset());
  assertEquals(3,parser.getAttributesKeyColumnIndex());
  String attributes[]=parse.getIndividualAttributes();
  assertEquals(attributes[0],"key=>value");
  assertEquals(29,parse.getCellVisibilityColumnOffset());
}

</code></pre>

<br>
<pre class="type-11 type-7 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTsvParserParseRowKey() throws BadTsvLineException {
  TsvParser parser=new TsvParser("HBASE_ROW_KEY,col_a,HBASE_TS_KEY","\t");
  assertEquals(0,parser.getRowKeyColumnIndex());
  byte[] line=Bytes.toBytes("rowkey\tval_a\t1234");
  Pair<Integer,Integer> rowKeyOffsets=parser.parseRowKey(line,line.length);
  assertEquals(0,rowKeyOffsets.getFirst().intValue());
  assertEquals(6,rowKeyOffsets.getSecond().intValue());
  try {
    line=Bytes.toBytes("\t\tval_a\t1234");
    parser.parseRowKey(line,line.length);
    fail("Should get BadTsvLineException on empty rowkey.");
  }
 catch (  BadTsvLineException b) {
  }
  parser=new TsvParser("col_a,HBASE_ROW_KEY,HBASE_TS_KEY","\t");
  assertEquals(1,parser.getRowKeyColumnIndex());
  line=Bytes.toBytes("val_a\trowkey\t1234");
  rowKeyOffsets=parser.parseRowKey(line,line.length);
  assertEquals(6,rowKeyOffsets.getFirst().intValue());
  assertEquals(6,rowKeyOffsets.getSecond().intValue());
  try {
    line=Bytes.toBytes("val_a");
    rowKeyOffsets=parser.parseRowKey(line,line.length);
    fail("Should get BadTsvLineException when number of columns less than rowkey position.");
  }
 catch (  BadTsvLineException b) {
  }
  parser=new TsvParser("col_a,HBASE_TS_KEY,HBASE_ROW_KEY","\t");
  assertEquals(2,parser.getRowKeyColumnIndex());
  line=Bytes.toBytes("val_a\t1234\trowkey");
  rowKeyOffsets=parser.parseRowKey(line,line.length);
  assertEquals(11,rowKeyOffsets.getFirst().intValue());
  assertEquals(6,rowKeyOffsets.getSecond().intValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.master.TestAssignmentManagerOnCluster </h4><pre class="type-7 type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
/** 
 * This tests region assignment on a simulated restarted server
 */
@Test(timeout=120000) public void testAssignRegionOnRestartedServer() throws Exception {
  TableName table=TableName.valueOf("testAssignRegionOnRestartedServer");
  TEST_UTIL.getMiniHBaseCluster().getConf().setInt("hbase.assignment.maximum.attempts",20);
  TEST_UTIL.getMiniHBaseCluster().stopMaster(0);
  TEST_UTIL.getMiniHBaseCluster().startMaster();
  ServerName deadServer=null;
  HMaster master=null;
  try {
    HTableDescriptor desc=new HTableDescriptor(table);
    desc.addFamily(new HColumnDescriptor(FAMILY));
    admin.createTable(desc);
    Table meta=TEST_UTIL.getConnection().getTable(TableName.META_TABLE_NAME);
    final HRegionInfo hri=new HRegionInfo(desc.getTableName(),Bytes.toBytes("A"),Bytes.toBytes("Z"));
    MetaTableAccessor.addRegionToMeta(meta,hri);
    master=TEST_UTIL.getHBaseCluster().getMaster();
    Set<ServerName> onlineServers=master.serverManager.getOnlineServers().keySet();
    assertFalse("There should be some servers online",onlineServers.isEmpty());
    ServerName destServer=onlineServers.iterator().next();
    deadServer=ServerName.valueOf(destServer.getHostname(),destServer.getPort(),destServer.getStartcode() - 100L);
    master.serverManager.recordNewServerWithLock(deadServer,ServerLoad.EMPTY_SERVERLOAD);
    final AssignmentManager am=master.getAssignmentManager();
    RegionPlan plan=new RegionPlan(hri,null,deadServer);
    am.addPlan(hri.getEncodedName(),plan);
    master.assignRegion(hri);
    TEST_UTIL.waitFor(60000,new Waiter.Predicate<Exception>(){
      @Override public boolean evaluate() throws Exception {
        return !am.getRegionStates().isRegionInTransition(hri);
      }
    }
);
    assertFalse("Region should be assigned",am.getRegionStates().isRegionInTransition(hri));
  }
  finally {
    if (deadServer != null) {
      master.serverManager.expireServer(deadServer);
    }
    TEST_UTIL.deleteTable(table);
    TEST_UTIL.getMiniHBaseCluster().getConf().setInt("hbase.assignment.maximum.attempts",3);
    ServerName masterServerName=TEST_UTIL.getMiniHBaseCluster().getMaster().getServerName();
    TEST_UTIL.getMiniHBaseCluster().stopMaster(masterServerName);
    TEST_UTIL.getMiniHBaseCluster().startMaster();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.master.TestMasterFileSystem </h4><pre class="type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testFsUriSetProperly() throws Exception {
  HMaster master=UTIL.getMiniHBaseCluster().getMaster();
  MasterFileSystem fs=master.getMasterFileSystem();
  Path masterRoot=FSUtils.getRootDir(fs.conf);
  Path rootDir=FSUtils.getRootDir(fs.getFileSystem().getConf());
  LOG.debug("from fs uri:" + FileSystem.getDefaultUri(fs.getFileSystem().getConf()));
  LOG.debug("from configuration uri:" + FileSystem.getDefaultUri(fs.conf));
  assertEquals(masterRoot,rootDir);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void testRemoveStaleRecoveringRegionsDuringMasterInitialization() throws Exception {
  if (!UTIL.getConfiguration().getBoolean(HConstants.DISTRIBUTED_LOG_REPLAY_KEY,false))   return;
  LOG.info("Starting testRemoveStaleRecoveringRegionsDuringMasterInitialization");
  HMaster master=UTIL.getMiniHBaseCluster().getMaster();
  MasterFileSystem fs=master.getMasterFileSystem();
  String failedRegion="failedRegoin1";
  String staleRegion="staleRegion";
  ServerName inRecoveryServerName=ServerName.valueOf("mgr,1,1");
  ServerName previouselyFaildServerName=ServerName.valueOf("previous,1,1");
  String walPath="/hbase/data/.logs/" + inRecoveryServerName.getServerName() + "-splitting/test";
  ZooKeeperWatcher zkw=HBaseTestingUtility.getZooKeeperWatcher(UTIL);
  zkw.getRecoverableZooKeeper().create(ZKSplitLog.getEncodedNodeName(zkw,walPath),new SplitLogTask.Owned(inRecoveryServerName,fs.getLogRecoveryMode()).toByteArray(),Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  String staleRegionPath=ZKUtil.joinZNode(zkw.recoveringRegionsZNode,staleRegion);
  ZKUtil.createWithParents(zkw,staleRegionPath);
  String inRecoveringRegionPath=ZKUtil.joinZNode(zkw.recoveringRegionsZNode,failedRegion);
  inRecoveringRegionPath=ZKUtil.joinZNode(inRecoveringRegionPath,inRecoveryServerName.getServerName());
  ZKUtil.createWithParents(zkw,inRecoveringRegionPath);
  Set<ServerName> servers=new HashSet<ServerName>();
  servers.add(previouselyFaildServerName);
  fs.removeStaleRecoveringRegionsFromZK(servers);
  assertFalse(ZKUtil.checkExists(zkw,staleRegionPath) != -1);
  assertTrue(ZKUtil.checkExists(zkw,inRecoveringRegionPath) != -1);
  ZKUtil.deleteChildrenRecursively(zkw,zkw.recoveringRegionsZNode);
  ZKUtil.deleteChildrenRecursively(zkw,zkw.splitLogZNode);
  zkw.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.master.TestSplitLogManager </h4><pre class="type-7 type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
/** 
 * The following test case is aiming to test the situation when distributedLogReplay is turned off
 * and restart a cluster there should no recovery regions in ZK left.
 * @throws Exception
 */
@Test(timeout=300000) public void testRecoveryRegionRemovedFromZK() throws Exception {
  LOG.info("testRecoveryRegionRemovedFromZK");
  conf.setBoolean(HConstants.DISTRIBUTED_LOG_REPLAY_KEY,false);
  String nodePath=ZKUtil.joinZNode(zkw.recoveringRegionsZNode,HRegionInfo.FIRST_META_REGIONINFO.getEncodedName());
  ZKUtil.createSetData(zkw,nodePath,ZKUtil.positionToByteArray(0L));
  slm=new SplitLogManager(ds,conf,stopper,master,DUMMY_MASTER);
  slm.removeStaleRecoveringRegions(null);
  List<String> recoveringRegions=zkw.getRecoverableZooKeeper().getChildren(zkw.recoveringRegionsZNode,false);
  assertTrue("Recovery regions isn't cleaned",recoveringRegions.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.master.TestTableLockManager </h4><pre class="type-4 type-7 type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test(timeout=600000) public void testDelete() throws Exception {
  prepareMiniCluster();
  Admin admin=TEST_UTIL.getHBaseAdmin();
  admin.disableTable(TABLE_NAME);
  admin.deleteTable(TABLE_NAME);
  final ZooKeeperWatcher zkWatcher=TEST_UTIL.getZooKeeperWatcher();
  final String znode=ZKUtil.joinZNode(zkWatcher.tableLockZNode,TABLE_NAME.getNameAsString());
  TEST_UTIL.waitFor(5000,new Waiter.Predicate<Exception>(){
    @Override public boolean evaluate() throws Exception {
      int ver=ZKUtil.checkExists(zkWatcher,znode);
      return ver < 0;
    }
  }
);
  int ver=ZKUtil.checkExists(zkWatcher,ZKUtil.joinZNode(zkWatcher.tableLockZNode,TABLE_NAME.getNameAsString()));
  assertTrue("Unexpected znode version " + ver,ver < 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.master.balancer.TestBaseLoadBalancer </h4><pre class="type-4 type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test(timeout=180000) public void testClusterRegionLocations(){
  List<ServerName> servers=getListOfServerNames(randomServers(10,10));
  List<HRegionInfo> regions=randomRegions(101);
  Map<ServerName,List<HRegionInfo>> clusterState=new HashMap<ServerName,List<HRegionInfo>>();
  assignRegions(regions,servers,clusterState);
  RegionLocationFinder locationFinder=mock(RegionLocationFinder.class);
  when(locationFinder.getTopBlockLocations(regions.get(0))).thenReturn(Lists.newArrayList(servers.get(0)));
  when(locationFinder.getTopBlockLocations(regions.get(1))).thenReturn(Lists.newArrayList(servers.get(0),servers.get(1)));
  when(locationFinder.getTopBlockLocations(regions.get(42))).thenReturn(Lists.newArrayList(servers.get(4),servers.get(9),servers.get(5)));
  when(locationFinder.getTopBlockLocations(regions.get(43))).thenReturn(Lists.newArrayList(ServerName.valueOf("foo",0,0)));
  BaseLoadBalancer.Cluster cluster=new Cluster(clusterState,null,locationFinder,null);
  int r0=ArrayUtils.indexOf(cluster.regions,regions.get(0));
  int r1=ArrayUtils.indexOf(cluster.regions,regions.get(1));
  int r10=ArrayUtils.indexOf(cluster.regions,regions.get(10));
  int r42=ArrayUtils.indexOf(cluster.regions,regions.get(42));
  int r43=ArrayUtils.indexOf(cluster.regions,regions.get(43));
  int s0=cluster.serversToIndex.get(servers.get(0).getHostAndPort());
  int s1=cluster.serversToIndex.get(servers.get(1).getHostAndPort());
  int s4=cluster.serversToIndex.get(servers.get(4).getHostAndPort());
  int s5=cluster.serversToIndex.get(servers.get(5).getHostAndPort());
  int s9=cluster.serversToIndex.get(servers.get(9).getHostAndPort());
  assertEquals(1,cluster.regionLocations[r0].length);
  assertEquals(s0,cluster.regionLocations[r0][0]);
  assertEquals(2,cluster.regionLocations[r1].length);
  assertEquals(s0,cluster.regionLocations[r1][0]);
  assertEquals(s1,cluster.regionLocations[r1][1]);
  assertEquals(0,cluster.regionLocations[r10].length);
  assertEquals(3,cluster.regionLocations[r42].length);
  assertEquals(s4,cluster.regionLocations[r42][0]);
  assertEquals(s9,cluster.regionLocations[r42][1]);
  assertEquals(s5,cluster.regionLocations[r42][2]);
  assertEquals(1,cluster.regionLocations[r43].length);
  assertEquals(-1,cluster.regionLocations[r43][0]);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestCompaction </h4><pre class="type-4 type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verify that you can stop a long-running compaction
 * (used during RS shutdown)
 * @throws Exception
 */
@Test public void testInterruptCompaction() throws Exception {
  assertEquals(0,count());
  int origWI=HStore.closeCheckInterval;
  HStore.closeCheckInterval=10 * 1000;
  try {
    int jmax=(int)Math.ceil(15.0 / compactionThreshold);
    byte[] pad=new byte[1000];
    for (int i=0; i < compactionThreshold; i++) {
      Table loader=new RegionAsTable(r);
      Put p=new Put(Bytes.add(STARTROW,Bytes.toBytes(i)));
      p.setDurability(Durability.SKIP_WAL);
      for (int j=0; j < jmax; j++) {
        p.addColumn(COLUMN_FAMILY,Bytes.toBytes(j),pad);
      }
      HBaseTestCase.addContent(loader,Bytes.toString(COLUMN_FAMILY));
      loader.put(p);
      r.flush(true);
    }
    HRegion spyR=spy(r);
    doAnswer(new Answer(){
      public Object answer(      InvocationOnMock invocation) throws Throwable {
        r.writestate.writesEnabled=false;
        return invocation.callRealMethod();
      }
    }
).when(spyR).doRegionCompactionPrep();
    spyR.compactStores();
    Store s=r.stores.get(COLUMN_FAMILY);
    assertEquals(compactionThreshold,s.getStorefilesCount());
    assertTrue(s.getStorefilesSize() > 15 * 1000);
    FileStatus[] ls=r.getFilesystem().listStatus(r.getRegionFileSystem().getTempDir());
    assertEquals(0,ls.length);
  }
  finally {
    r.writestate.writesEnabled=true;
    HStore.closeCheckInterval=origWI;
    for (int i=0; i < compactionThreshold; i++) {
      Delete delete=new Delete(Bytes.add(STARTROW,Bytes.toBytes(i)));
      byte[][] famAndQf={COLUMN_FAMILY,null};
      delete.addFamily(famAndQf[0]);
      r.delete(delete);
    }
    r.flush(true);
    final int ttl=1000;
    for (    Store hstore : this.r.stores.values()) {
      HStore store=(HStore)hstore;
      ScanInfo old=store.getScanInfo();
      ScanInfo si=new ScanInfo(old.getConfiguration(),old.getFamily(),old.getMinVersions(),old.getMaxVersions(),ttl,old.getKeepDeletedCells(),0,old.getComparator());
      store.setScanInfo(si);
    }
    Thread.sleep(ttl);
    r.compact(true);
    assertEquals(0,count());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestCompoundBloomFilter </h4><pre class="type-4 type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testCreateKey(){
  byte[] row="myRow".getBytes();
  byte[] qualifier="myQualifier".getBytes();
  byte[] rowKey=KeyValueUtil.createFirstOnRow(row,0,row.length,new byte[0],0,0,row,0,0).getKey();
  byte[] rowColKey=KeyValueUtil.createFirstOnRow(row,0,row.length,new byte[0],0,0,qualifier,0,qualifier.length).getKey();
  KeyValue rowKV=KeyValueUtil.createKeyValueFromKey(rowKey);
  KeyValue rowColKV=KeyValueUtil.createKeyValueFromKey(rowColKey);
  assertEquals(rowKV.getTimestamp(),rowColKV.getTimestamp());
  assertEquals(Bytes.toStringBinary(rowKV.getRowArray(),rowKV.getRowOffset(),rowKV.getRowLength()),Bytes.toStringBinary(rowColKV.getRowArray(),rowColKV.getRowOffset(),rowColKV.getRowLength()));
  assertEquals(0,rowKV.getQualifierLength());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestFSErrorsExposed </h4><pre class="type-4 type-11 type-7 type-8 type-13 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Injects errors into the pread calls of an on-disk file, and makes
 * sure those bubble up to the HFile scanner
 */
@Test public void testHFileScannerThrowsErrors() throws IOException {
  Path hfilePath=new Path(new Path(util.getDataTestDir("internalScannerExposesErrors"),"regionname"),"familyname");
  HFileSystem hfs=(HFileSystem)util.getTestFileSystem();
  FaultyFileSystem faultyfs=new FaultyFileSystem(hfs.getBackingFs());
  FileSystem fs=new HFileSystem(faultyfs);
  CacheConfig cacheConf=new CacheConfig(util.getConfiguration());
  HFileContext meta=new HFileContextBuilder().withBlockSize(2 * 1024).build();
  StoreFile.Writer writer=new StoreFile.WriterBuilder(util.getConfiguration(),cacheConf,hfs).withOutputDir(hfilePath).withFileContext(meta).build();
  TestStoreFile.writeStoreFile(writer,Bytes.toBytes("cf"),Bytes.toBytes("qual"));
  StoreFile sf=new StoreFile(fs,writer.getPath(),util.getConfiguration(),cacheConf,BloomType.NONE);
  StoreFile.Reader reader=sf.createReader();
  HFileScanner scanner=reader.getScanner(false,true);
  FaultyInputStream inStream=faultyfs.inStreams.get(0).get();
  assertNotNull(inStream);
  scanner.seekTo();
  assertTrue(scanner.next());
  faultyfs.startFaults();
  try {
    int scanned=0;
    while (scanner.next()) {
      scanned++;
    }
    fail("Scanner didn't throw after faults injected");
  }
 catch (  IOException ioe) {
    LOG.info("Got expected exception",ioe);
    assertTrue(ioe.getMessage().contains("Fault"));
  }
  reader.close(true);
}

</code></pre>

<br>
<pre class="type-4 type-11 type-7 type-8 type-13 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Injects errors into the pread calls of an on-disk file, and makes
 * sure those bubble up to the StoreFileScanner
 */
@Test public void testStoreFileScannerThrowsErrors() throws IOException {
  Path hfilePath=new Path(new Path(util.getDataTestDir("internalScannerExposesErrors"),"regionname"),"familyname");
  HFileSystem hfs=(HFileSystem)util.getTestFileSystem();
  FaultyFileSystem faultyfs=new FaultyFileSystem(hfs.getBackingFs());
  HFileSystem fs=new HFileSystem(faultyfs);
  CacheConfig cacheConf=new CacheConfig(util.getConfiguration());
  HFileContext meta=new HFileContextBuilder().withBlockSize(2 * 1024).build();
  StoreFile.Writer writer=new StoreFile.WriterBuilder(util.getConfiguration(),cacheConf,hfs).withOutputDir(hfilePath).withFileContext(meta).build();
  TestStoreFile.writeStoreFile(writer,Bytes.toBytes("cf"),Bytes.toBytes("qual"));
  StoreFile sf=new StoreFile(fs,writer.getPath(),util.getConfiguration(),cacheConf,BloomType.NONE);
  List<StoreFileScanner> scanners=StoreFileScanner.getScannersForStoreFiles(Collections.singletonList(sf),false,true,false,false,0);
  KeyValueScanner scanner=scanners.get(0);
  FaultyInputStream inStream=faultyfs.inStreams.get(0).get();
  assertNotNull(inStream);
  scanner.seek(KeyValue.LOWESTKEY);
  assertNotNull(scanner.next());
  faultyfs.startFaults();
  try {
    int scanned=0;
    while (scanner.next() != null) {
      scanned++;
    }
    fail("Scanner didn't throw after faults injected");
  }
 catch (  IOException ioe) {
    LOG.info("Got expected exception",ioe);
    assertTrue(ioe.getMessage().contains("Could not iterate"));
  }
  scanner.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestGetClosestAtOrBefore </h4><pre class="type-7 type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
/** 
 * Test file of multiple deletes and with deletes as final key.
 * @see <a href="https://issues.apache.org/jira/browse/HBASE-751">HBASE-751</a>
 */
@Test public void testGetClosestRowBefore3() throws IOException {
  Region region=null;
  byte[] c0=UTIL.COLUMNS[0];
  byte[] c1=UTIL.COLUMNS[1];
  try {
    TableName tn=TableName.valueOf(testName.getMethodName());
    HTableDescriptor htd=UTIL.createTableDescriptor(tn);
    region=UTIL.createLocalHRegion(htd,null,null);
    Put p=new Put(T00);
    p.addColumn(c0,c0,T00);
    region.put(p);
    p=new Put(T10);
    p.addColumn(c0,c0,T10);
    region.put(p);
    p=new Put(T20);
    p.addColumn(c0,c0,T20);
    region.put(p);
    Result r=UTIL.getClosestRowBefore(region,T20,c0);
    assertTrue(Bytes.equals(T20,r.getRow()));
    Delete d=new Delete(T20);
    d.addColumn(c0,c0);
    region.delete(d);
    r=UTIL.getClosestRowBefore(region,T20,c0);
    assertTrue(Bytes.equals(T10,r.getRow()));
    p=new Put(T30);
    p.addColumn(c0,c0,T30);
    region.put(p);
    r=UTIL.getClosestRowBefore(region,T30,c0);
    assertTrue(Bytes.equals(T30,r.getRow()));
    d=new Delete(T30);
    d.addColumn(c0,c0);
    region.delete(d);
    r=UTIL.getClosestRowBefore(region,T30,c0);
    assertTrue(Bytes.equals(T10,r.getRow()));
    r=UTIL.getClosestRowBefore(region,T31,c0);
    assertTrue(Bytes.equals(T10,r.getRow()));
    region.flush(true);
    r=UTIL.getClosestRowBefore(region,T30,c0);
    assertTrue(Bytes.equals(T10,r.getRow()));
    r=UTIL.getClosestRowBefore(region,T31,c0);
    assertTrue(Bytes.equals(T10,r.getRow()));
    p=new Put(T20);
    p.addColumn(c1,c1,T20);
    region.put(p);
    r=UTIL.getClosestRowBefore(region,T30,c0);
    assertTrue(Bytes.equals(T10,r.getRow()));
    r=UTIL.getClosestRowBefore(region,T31,c0);
    assertTrue(Bytes.equals(T10,r.getRow()));
    region.flush(true);
    r=UTIL.getClosestRowBefore(region,T30,c0);
    assertTrue(Bytes.equals(T10,r.getRow()));
    r=UTIL.getClosestRowBefore(region,T31,c0);
    assertTrue(Bytes.equals(T10,r.getRow()));
    d=new Delete(T20);
    d.addColumn(c1,c1);
    region.delete(d);
    r=UTIL.getClosestRowBefore(region,T30,c0);
    assertTrue(Bytes.equals(T10,r.getRow()));
    r=UTIL.getClosestRowBefore(region,T31,c0);
    assertTrue(Bytes.equals(T10,r.getRow()));
    region.flush(true);
    r=UTIL.getClosestRowBefore(region,T31,c0);
    assertTrue(Bytes.equals(T10,r.getRow()));
    p=new Put(T11);
    p.addColumn(c0,c0,T11);
    region.put(p);
    d=new Delete(T10);
    d.addColumn(c1,c1);
    r=UTIL.getClosestRowBefore(region,T12,c0);
    assertTrue(Bytes.equals(T11,r.getRow()));
  }
  finally {
    if (region != null) {
      try {
        WAL wal=((HRegion)region).getWAL();
        ((HRegion)region).close();
        wal.close();
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
/** 
 * For HBASE-694 
 */
@Test public void testGetClosestRowBefore2() throws IOException {
  Region region=null;
  byte[] c0=UTIL.COLUMNS[0];
  try {
    TableName tn=TableName.valueOf(testName.getMethodName());
    HTableDescriptor htd=UTIL.createTableDescriptor(tn);
    region=UTIL.createLocalHRegion(htd,null,null);
    Put p=new Put(T10);
    p.addColumn(c0,c0,T10);
    region.put(p);
    p=new Put(T30);
    p.addColumn(c0,c0,T30);
    region.put(p);
    p=new Put(T40);
    p.addColumn(c0,c0,T40);
    region.put(p);
    Result r=UTIL.getClosestRowBefore(region,T35,c0);
    assertTrue(Bytes.equals(T30,r.getRow()));
    region.flush(true);
    r=UTIL.getClosestRowBefore(region,T35,c0);
    assertTrue(Bytes.equals(T30,r.getRow()));
    p=new Put(T20);
    p.addColumn(c0,c0,T20);
    region.put(p);
    r=UTIL.getClosestRowBefore(region,T35,c0);
    assertTrue(Bytes.equals(T30,r.getRow()));
    region.flush(true);
    r=UTIL.getClosestRowBefore(region,T35,c0);
    assertTrue(Bytes.equals(T30,r.getRow()));
  }
  finally {
    if (region != null) {
      try {
        WAL wal=((HRegion)region).getWAL();
        ((HRegion)region).close();
        wal.close();
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestHRegion </h4><pre class="type-4 type-7 type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void testDelete_CheckTimestampUpdated() throws IOException {
  TableName tableName=TableName.valueOf(name.getMethodName());
  byte[] row1=Bytes.toBytes("row1");
  byte[] col1=Bytes.toBytes("col1");
  byte[] col2=Bytes.toBytes("col2");
  byte[] col3=Bytes.toBytes("col3");
  String method=this.getName();
  this.region=initHRegion(tableName,method,CONF,fam1);
  try {
    List<Cell> kvs=new ArrayList<Cell>();
    kvs.add(new KeyValue(row1,fam1,col1,null));
    kvs.add(new KeyValue(row1,fam1,col2,null));
    kvs.add(new KeyValue(row1,fam1,col3,null));
    NavigableMap<byte[],List<Cell>> deleteMap=new TreeMap<byte[],List<Cell>>(Bytes.BYTES_COMPARATOR);
    deleteMap.put(fam1,kvs);
    region.delete(deleteMap,Durability.SYNC_WAL);
    long now=System.currentTimeMillis();
    DefaultMemStore memstore=(DefaultMemStore)((HStore)region.getStore(fam1)).memstore;
    Cell firstCell=memstore.cellSet.first();
    assertTrue(firstCell.getTimestamp() <= now);
    now=firstCell.getTimestamp();
    for (    Cell cell : memstore.cellSet) {
      assertTrue(cell.getTimestamp() <= now);
      now=cell.getTimestamp();
    }
  }
  finally {
    HBaseTestingUtility.closeRegionAndWAL(this.region);
    this.region=null;
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-8 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAppendTimestampsAreMonotonic() throws IOException {
  HRegion region=initHRegion(tableName,name.getMethodName(),CONF,fam1);
  ManualEnvironmentEdge edge=new ManualEnvironmentEdge();
  EnvironmentEdgeManager.injectEdge(edge);
  edge.setValue(10);
  Append a=new Append(row);
  a.setDurability(Durability.SKIP_WAL);
  a.add(fam1,qual1,qual1);
  region.append(a);
  Result result=region.get(new Get(row));
  Cell c=result.getColumnLatestCell(fam1,qual1);
  assertNotNull(c);
  assertEquals(c.getTimestamp(),10L);
  edge.setValue(1);
  region.append(a);
  result=region.get(new Get(row));
  c=result.getColumnLatestCell(fam1,qual1);
  assertEquals(c.getTimestamp(),10L);
  byte[] expected=new byte[qual1.length * 2];
  System.arraycopy(qual1,0,expected,0,qual1.length);
  System.arraycopy(qual1,0,expected,qual1.length,qual1.length);
  assertTrue(Bytes.equals(c.getValueArray(),c.getValueOffset(),c.getValueLength(),expected,0,expected.length));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestHeapMemoryManager </h4><pre class="type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testBlockedFlushesIncreaseMemstoreInSteadyState() throws Exception {
  BlockCacheStub blockCache=new BlockCacheStub((long)(maxHeapSize * 0.4));
  MemstoreFlusherStub memStoreFlusher=new MemstoreFlusherStub((long)(maxHeapSize * 0.4));
  RegionServerAccountingStub regionServerAccounting=new RegionServerAccountingStub();
  blockCache.setTestBlockSize(0);
  regionServerAccounting.setTestMemstoreSize((long)(maxHeapSize * 0.4 * 0.8));
  blockCache.setTestBlockSize((long)(maxHeapSize * 0.4 * 0.8));
  Configuration conf=HBaseConfiguration.create();
  conf.setFloat(HeapMemoryManager.MEMSTORE_SIZE_MAX_RANGE_KEY,0.75f);
  conf.setFloat(HeapMemoryManager.MEMSTORE_SIZE_MIN_RANGE_KEY,0.10f);
  conf.setFloat(HeapMemoryManager.BLOCK_CACHE_SIZE_MAX_RANGE_KEY,0.7f);
  conf.setFloat(HeapMemoryManager.BLOCK_CACHE_SIZE_MIN_RANGE_KEY,0.05f);
  conf.setLong(HeapMemoryManager.HBASE_RS_HEAP_MEMORY_TUNER_PERIOD,1000);
  conf.setInt(DefaultHeapMemoryTuner.NUM_PERIODS_TO_IGNORE,0);
  HeapMemoryManager heapMemoryManager=new HeapMemoryManager(blockCache,memStoreFlusher,new RegionServerStub(conf),regionServerAccounting);
  long oldMemstoreHeapSize=memStoreFlusher.memstoreSize;
  long oldBlockCacheSize=blockCache.maxSize;
  final ChoreService choreService=new ChoreService("TEST_SERVER_NAME");
  heapMemoryManager.start(choreService);
  memStoreFlusher.flushType=FlushType.ABOVE_LOWER_MARK;
  memStoreFlusher.requestFlush(null,false);
  memStoreFlusher.requestFlush(null,false);
  memStoreFlusher.requestFlush(null,false);
  blockCache.evictBlock(null);
  blockCache.evictBlock(null);
  Thread.sleep(1500);
  assertEquals(oldMemstoreHeapSize,memStoreFlusher.memstoreSize);
  assertEquals(oldBlockCacheSize,blockCache.maxSize);
  memStoreFlusher.flushType=FlushType.ABOVE_HIGHER_MARK;
  memStoreFlusher.requestFlush(null,false);
  blockCache.evictBlock(null);
  blockCache.evictBlock(null);
  blockCache.evictBlock(null);
  blockCache.evictBlock(null);
  Thread.sleep(1500);
  assertHeapSpaceDelta(DefaultHeapMemoryTuner.DEFAULT_MAX_STEP_VALUE,oldMemstoreHeapSize,memStoreFlusher.memstoreSize);
  assertHeapSpaceDelta(-(DefaultHeapMemoryTuner.DEFAULT_MAX_STEP_VALUE),oldBlockCacheSize,blockCache.maxSize);
}

</code></pre>

<br>
<pre class="type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testWhenClusterIsHavingMoreWritesThanReads() throws Exception {
  BlockCacheStub blockCache=new BlockCacheStub((long)(maxHeapSize * 0.4));
  MemstoreFlusherStub memStoreFlusher=new MemstoreFlusherStub((long)(maxHeapSize * 0.4));
  RegionServerAccountingStub regionServerAccounting=new RegionServerAccountingStub();
  blockCache.setTestBlockSize(0);
  regionServerAccounting.setTestMemstoreSize((long)(maxHeapSize * 0.4 * 0.8));
  blockCache.setTestBlockSize((long)(maxHeapSize * 0.4 * 0.8));
  Configuration conf=HBaseConfiguration.create();
  conf.setFloat(HeapMemoryManager.MEMSTORE_SIZE_MAX_RANGE_KEY,0.75f);
  conf.setFloat(HeapMemoryManager.MEMSTORE_SIZE_MIN_RANGE_KEY,0.10f);
  conf.setFloat(HeapMemoryManager.BLOCK_CACHE_SIZE_MAX_RANGE_KEY,0.7f);
  conf.setFloat(HeapMemoryManager.BLOCK_CACHE_SIZE_MIN_RANGE_KEY,0.05f);
  conf.setLong(HeapMemoryManager.HBASE_RS_HEAP_MEMORY_TUNER_PERIOD,1000);
  conf.setInt(DefaultHeapMemoryTuner.NUM_PERIODS_TO_IGNORE,0);
  HeapMemoryManager heapMemoryManager=new HeapMemoryManager(blockCache,memStoreFlusher,new RegionServerStub(conf),regionServerAccounting);
  long oldMemstoreHeapSize=memStoreFlusher.memstoreSize;
  long oldBlockCacheSize=blockCache.maxSize;
  final ChoreService choreService=new ChoreService("TEST_SERVER_NAME");
  heapMemoryManager.start(choreService);
  memStoreFlusher.flushType=FlushType.ABOVE_LOWER_MARK;
  memStoreFlusher.requestFlush(null,false);
  memStoreFlusher.requestFlush(null,false);
  memStoreFlusher.requestFlush(null,false);
  blockCache.evictBlock(null);
  Thread.sleep(1500);
  assertEquals(oldMemstoreHeapSize,memStoreFlusher.memstoreSize);
  assertEquals(oldBlockCacheSize,blockCache.maxSize);
  memStoreFlusher.flushType=FlushType.ABOVE_LOWER_MARK;
  memStoreFlusher.requestFlush(null,false);
  memStoreFlusher.requestFlush(null,false);
  memStoreFlusher.requestFlush(null,false);
  waitForTune(memStoreFlusher,memStoreFlusher.memstoreSize);
  assertHeapSpaceDelta(DefaultHeapMemoryTuner.DEFAULT_MAX_STEP_VALUE,oldMemstoreHeapSize,memStoreFlusher.memstoreSize);
  assertHeapSpaceDelta(-(DefaultHeapMemoryTuner.DEFAULT_MAX_STEP_VALUE),oldBlockCacheSize,blockCache.maxSize);
}

</code></pre>

<br>
<pre class="type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testWhenCombinedHeapSizesFromTunerGoesOutSideMaxLimit() throws Exception {
  BlockCacheStub blockCache=new BlockCacheStub((long)(maxHeapSize * 0.4));
  MemstoreFlusherStub memStoreFlusher=new MemstoreFlusherStub((long)(maxHeapSize * 0.4));
  Configuration conf=HBaseConfiguration.create();
  conf.setFloat(HeapMemoryManager.MEMSTORE_SIZE_MAX_RANGE_KEY,0.7f);
  conf.setFloat(HeapMemoryManager.MEMSTORE_SIZE_MIN_RANGE_KEY,0.1f);
  conf.setFloat(HeapMemoryManager.BLOCK_CACHE_SIZE_MAX_RANGE_KEY,0.7f);
  conf.setFloat(HeapMemoryManager.BLOCK_CACHE_SIZE_MIN_RANGE_KEY,0.1f);
  conf.setLong(HeapMemoryManager.HBASE_RS_HEAP_MEMORY_TUNER_PERIOD,1000);
  conf.setInt(DefaultHeapMemoryTuner.NUM_PERIODS_TO_IGNORE,0);
  conf.setClass(HeapMemoryManager.HBASE_RS_HEAP_MEMORY_TUNER_CLASS,CustomHeapMemoryTuner.class,HeapMemoryTuner.class);
  HeapMemoryManager heapMemoryManager=new HeapMemoryManager(blockCache,memStoreFlusher,new RegionServerStub(conf),new RegionServerAccountingStub());
  long oldMemstoreSize=memStoreFlusher.memstoreSize;
  long oldBlockCacheSize=blockCache.maxSize;
  final ChoreService choreService=new ChoreService("TEST_SERVER_NAME");
  heapMemoryManager.start(choreService);
  CustomHeapMemoryTuner.memstoreSize=0.7f;
  CustomHeapMemoryTuner.blockCacheSize=0.3f;
  Thread.sleep(1500);
  assertEquals(oldMemstoreSize,memStoreFlusher.memstoreSize);
  assertEquals(oldBlockCacheSize,blockCache.maxSize);
}

</code></pre>

<br>
<pre class="type-11 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWhenL2BlockCacheIsOnHeap() throws Exception {
  HeapMemoryManager heapMemoryManager=null;
  BlockCacheStub blockCache=new BlockCacheStub((long)(maxHeapSize * 0.4));
  MemstoreFlusherStub memStoreFlusher=new MemstoreFlusherStub((long)(maxHeapSize * 0.3));
  Configuration conf=HBaseConfiguration.create();
  conf.setFloat(HeapMemoryManager.MEMSTORE_SIZE_MAX_RANGE_KEY,0.7f);
  conf.setFloat(HeapMemoryManager.MEMSTORE_SIZE_MIN_RANGE_KEY,0.1f);
  conf.setFloat(HeapMemoryManager.BLOCK_CACHE_SIZE_MAX_RANGE_KEY,0.7f);
  conf.setFloat(HeapMemoryManager.BLOCK_CACHE_SIZE_MIN_RANGE_KEY,0.1f);
  conf.setInt(DefaultHeapMemoryTuner.NUM_PERIODS_TO_IGNORE,0);
  conf.setFloat(HeapMemorySizeUtil.MEMSTORE_SIZE_KEY,0.4F);
  conf.setFloat(HConstants.HFILE_BLOCK_CACHE_SIZE_KEY,0.3F);
  conf.setFloat(HConstants.BUCKET_CACHE_SIZE_KEY,0.1F);
  conf.set(HConstants.BUCKET_CACHE_IOENGINE_KEY,"heap");
  conf.setLong(HeapMemoryManager.HBASE_RS_HEAP_MEMORY_TUNER_PERIOD,1000);
  conf.setClass(HeapMemoryManager.HBASE_RS_HEAP_MEMORY_TUNER_CLASS,CustomHeapMemoryTuner.class,HeapMemoryTuner.class);
  try {
    heapMemoryManager=new HeapMemoryManager(blockCache,memStoreFlusher,new RegionServerStub(conf),new RegionServerAccountingStub());
    fail("Should have failed as the collective heap memory need is above 80%");
  }
 catch (  Exception e) {
  }
  conf.setFloat(HeapMemoryManager.MEMSTORE_SIZE_MAX_RANGE_KEY,0.6f);
  conf.setFloat(HeapMemoryManager.BLOCK_CACHE_SIZE_MAX_RANGE_KEY,0.6f);
  heapMemoryManager=new HeapMemoryManager(blockCache,memStoreFlusher,new RegionServerStub(conf),new RegionServerAccountingStub());
  long oldMemstoreSize=memStoreFlusher.memstoreSize;
  long oldBlockCacheSize=blockCache.maxSize;
  final ChoreService choreService=new ChoreService("TEST_SERVER_NAME");
  heapMemoryManager.start(choreService);
  CustomHeapMemoryTuner.memstoreSize=0.4f;
  CustomHeapMemoryTuner.blockCacheSize=0.4f;
  Thread.sleep(1500);
  assertEquals(oldMemstoreSize,memStoreFlusher.memstoreSize);
  assertEquals(oldBlockCacheSize,blockCache.maxSize);
  CustomHeapMemoryTuner.memstoreSize=0.1f;
  CustomHeapMemoryTuner.blockCacheSize=0.5f;
  waitForTune(memStoreFlusher,memStoreFlusher.memstoreSize);
  assertHeapSpace(0.1f,memStoreFlusher.memstoreSize);
  assertHeapSpace(0.5f,blockCache.maxSize);
}

</code></pre>

<br>
<pre class="type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testWhenClusterIsWriteHeavyWithEmptyMemstore() throws Exception {
  BlockCacheStub blockCache=new BlockCacheStub((long)(maxHeapSize * 0.4));
  MemstoreFlusherStub memStoreFlusher=new MemstoreFlusherStub((long)(maxHeapSize * 0.4));
  RegionServerAccountingStub regionServerAccounting=new RegionServerAccountingStub();
  blockCache.setTestBlockSize(0);
  regionServerAccounting.setTestMemstoreSize(0);
  Configuration conf=HBaseConfiguration.create();
  conf.setFloat(HeapMemoryManager.MEMSTORE_SIZE_MAX_RANGE_KEY,0.75f);
  conf.setFloat(HeapMemoryManager.MEMSTORE_SIZE_MIN_RANGE_KEY,0.10f);
  conf.setFloat(HeapMemoryManager.BLOCK_CACHE_SIZE_MAX_RANGE_KEY,0.7f);
  conf.setFloat(HeapMemoryManager.BLOCK_CACHE_SIZE_MIN_RANGE_KEY,0.05f);
  conf.setLong(HeapMemoryManager.HBASE_RS_HEAP_MEMORY_TUNER_PERIOD,1000);
  conf.setInt(DefaultHeapMemoryTuner.NUM_PERIODS_TO_IGNORE,0);
  HeapMemoryManager heapMemoryManager=new HeapMemoryManager(blockCache,memStoreFlusher,new RegionServerStub(conf),regionServerAccounting);
  long oldMemstoreHeapSize=memStoreFlusher.memstoreSize;
  long oldBlockCacheSize=blockCache.maxSize;
  final ChoreService choreService=new ChoreService("TEST_SERVER_NAME");
  heapMemoryManager.start(choreService);
  memStoreFlusher.flushType=FlushType.ABOVE_HIGHER_MARK;
  memStoreFlusher.requestFlush(null,false);
  memStoreFlusher.requestFlush(null,false);
  memStoreFlusher.requestFlush(null,false);
  memStoreFlusher.flushType=FlushType.ABOVE_LOWER_MARK;
  memStoreFlusher.requestFlush(null,false);
  Thread.sleep(1500);
  assertEquals(oldMemstoreHeapSize,memStoreFlusher.memstoreSize);
  assertEquals(oldBlockCacheSize,blockCache.maxSize);
}

</code></pre>

<br>
<pre class="type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testWhenClusterIsReadHeavyWithEmptyBlockCache() throws Exception {
  BlockCacheStub blockCache=new BlockCacheStub((long)(maxHeapSize * 0.4));
  MemstoreFlusherStub memStoreFlusher=new MemstoreFlusherStub((long)(maxHeapSize * 0.4));
  RegionServerAccountingStub regionServerAccounting=new RegionServerAccountingStub();
  blockCache.setTestBlockSize(0);
  regionServerAccounting.setTestMemstoreSize(0);
  Configuration conf=HBaseConfiguration.create();
  conf.setFloat(HeapMemoryManager.MEMSTORE_SIZE_MAX_RANGE_KEY,0.75f);
  conf.setFloat(HeapMemoryManager.MEMSTORE_SIZE_MIN_RANGE_KEY,0.10f);
  conf.setFloat(HeapMemoryManager.BLOCK_CACHE_SIZE_MAX_RANGE_KEY,0.7f);
  conf.setFloat(HeapMemoryManager.BLOCK_CACHE_SIZE_MIN_RANGE_KEY,0.05f);
  conf.setLong(HeapMemoryManager.HBASE_RS_HEAP_MEMORY_TUNER_PERIOD,1000);
  conf.setInt(DefaultHeapMemoryTuner.NUM_PERIODS_TO_IGNORE,0);
  HeapMemoryManager heapMemoryManager=new HeapMemoryManager(blockCache,memStoreFlusher,new RegionServerStub(conf),regionServerAccounting);
  long oldMemstoreHeapSize=memStoreFlusher.memstoreSize;
  long oldBlockCacheSize=blockCache.maxSize;
  final ChoreService choreService=new ChoreService("TEST_SERVER_NAME");
  heapMemoryManager.start(choreService);
  blockCache.evictBlock(null);
  blockCache.evictBlock(null);
  blockCache.evictBlock(null);
  Thread.sleep(1500);
  assertEquals(oldMemstoreHeapSize,memStoreFlusher.memstoreSize);
  assertEquals(oldBlockCacheSize,blockCache.maxSize);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestMajorCompaction </h4><pre class="type-9 type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTimeBasedMajorCompaction() throws Exception {
  int delay=10 * 1000;
  float jitterPct=0.20f;
  conf.setLong(HConstants.MAJOR_COMPACTION_PERIOD,delay);
  conf.setFloat("hbase.hregion.majorcompaction.jitter",jitterPct);
  HStore s=((HStore)r.getStore(COLUMN_FAMILY));
  s.storeEngine.getCompactionPolicy().setConf(conf);
  try {
    createStoreFile(r);
    createStoreFile(r);
    r.compact(true);
    createStoreFile(r);
    r.compact(false);
    assertEquals(2,s.getStorefilesCount());
    RatioBasedCompactionPolicy c=(RatioBasedCompactionPolicy)s.storeEngine.getCompactionPolicy();
    Collection<StoreFile> storeFiles=s.getStorefiles();
    long mcTime=c.getNextMajorCompactTime(storeFiles);
    for (int i=0; i < 10; ++i) {
      assertEquals(mcTime,c.getNextMajorCompactTime(storeFiles));
    }
    long jitter=Math.round(delay * jitterPct);
    assertTrue(delay - jitter <= mcTime && mcTime <= delay + jitter);
    Thread.sleep(mcTime);
    r.compact(false);
    assertEquals(1,s.getStorefilesCount());
  }
  finally {
    conf.setLong(HConstants.MAJOR_COMPACTION_PERIOD,1000 * 60 * 60* 24);
    conf.setFloat("hbase.hregion.majorcompaction.jitter",0.20F);
    createStoreFile(r);
    r.compact(true);
    assertEquals(1,s.getStorefilesCount());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestMemStoreLAB </h4><pre class="type-4 type-8 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test allocation from lots of threads, making sure the results don't
 * overlap in any way
 */
@Test public void testLABThreading() throws Exception {
  Configuration conf=new Configuration();
  MultithreadedTestUtil.TestContext ctx=new MultithreadedTestUtil.TestContext(conf);
  final AtomicInteger totalAllocated=new AtomicInteger();
  final MemStoreLAB mslab=new HeapMemStoreLAB();
  List<List<AllocRecord>> allocations=Lists.newArrayList();
  for (int i=0; i < 10; i++) {
    final List<AllocRecord> allocsByThisThread=Lists.newLinkedList();
    allocations.add(allocsByThisThread);
    TestThread t=new MultithreadedTestUtil.RepeatingTestThread(ctx){
      private Random r=new Random();
      @Override public void doAnAction() throws Exception {
        int size=r.nextInt(1000);
        ByteRange alloc=mslab.allocateBytes(size);
        totalAllocated.addAndGet(size);
        allocsByThisThread.add(new AllocRecord(alloc,size));
      }
    }
;
    ctx.addThread(t);
  }
  ctx.startThreads();
  while (totalAllocated.get() < 50 * 1024 * 1024 && ctx.shouldRun()) {
    Thread.sleep(10);
  }
  ctx.stop();
  Map<byte[],Map<Integer,AllocRecord>> mapsByChunk=Maps.newHashMap();
  int sizeCounted=0;
  for (  AllocRecord rec : Iterables.concat(allocations)) {
    sizeCounted+=rec.size;
    if (rec.size == 0)     continue;
    Map<Integer,AllocRecord> mapForThisByteArray=mapsByChunk.get(rec.alloc.getBytes());
    if (mapForThisByteArray == null) {
      mapForThisByteArray=Maps.newTreeMap();
      mapsByChunk.put(rec.alloc.getBytes(),mapForThisByteArray);
    }
    AllocRecord oldVal=mapForThisByteArray.put(rec.alloc.getOffset(),rec);
    assertNull("Already had an entry " + oldVal + " for allocation "+ rec,oldVal);
  }
  assertEquals("Sanity check test",sizeCounted,totalAllocated.get());
  for (  Map<Integer,AllocRecord> allocsInChunk : mapsByChunk.values()) {
    int expectedOff=0;
    for (    AllocRecord alloc : allocsInChunk.values()) {
      assertEquals(expectedOff,alloc.alloc.getOffset());
      assertTrue("Allocation overruns buffer",alloc.alloc.getOffset() + alloc.size <= alloc.alloc.getBytes().length);
      expectedOff+=alloc.size;
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestPriorityRpc </h4><pre class="type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testQosFunctionWithoutKnownArgument() throws IOException {
  RequestHeader.Builder headerBuilder=RequestHeader.newBuilder();
  headerBuilder.setMethodName("foo");
  RequestHeader header=headerBuilder.build();
  PriorityFunction qosFunc=regionServer.rpcServices.getPriority();
  assertEquals(HConstants.NORMAL_QOS,qosFunc.getPriority(header,null,User.createUserForTesting(regionServer.conf,"someuser",new String[]{"somegroup"})));
}

</code></pre>

<br>
<pre class="type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testQosFunctionForRequestCalledBySuperUser() throws Exception {
  RequestHeader.Builder headerBuilder=RequestHeader.newBuilder();
  headerBuilder.setMethodName("foo");
  RequestHeader header=headerBuilder.build();
  PriorityFunction qosFunc=regionServer.rpcServices.getPriority();
  regionServer.conf.set(Superusers.SUPERUSER_CONF_KEY,"samplesuperuser");
  Superusers.initialize(regionServer.conf);
  assertEquals(HConstants.ADMIN_QOS,qosFunc.getPriority(header,null,User.createUserForTesting(regionServer.conf,"samplesuperuser",new String[]{"somegroup"})));
  regionServer.conf.set(Superusers.SUPERUSER_CONF_KEY,"@samplesupergroup");
  Superusers.initialize(regionServer.conf);
  assertEquals(HConstants.ADMIN_QOS,qosFunc.getPriority(header,null,User.createUserForTesting(regionServer.conf,"regularuser",new String[]{"samplesupergroup"})));
}

</code></pre>

<br>
<pre class="type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testQosFunctionForMeta() throws IOException {
  priority=regionServer.rpcServices.getPriority();
  RequestHeader.Builder headerBuilder=RequestHeader.newBuilder();
  headerBuilder.setMethodName("foo");
  GetRequest.Builder getRequestBuilder=GetRequest.newBuilder();
  RegionSpecifier.Builder regionSpecifierBuilder=RegionSpecifier.newBuilder();
  regionSpecifierBuilder.setType(RegionSpecifierType.REGION_NAME);
  ByteString name=ByteStringer.wrap(HRegionInfo.FIRST_META_REGIONINFO.getRegionName());
  regionSpecifierBuilder.setValue(name);
  RegionSpecifier regionSpecifier=regionSpecifierBuilder.build();
  getRequestBuilder.setRegion(regionSpecifier);
  Get.Builder getBuilder=Get.newBuilder();
  getBuilder.setRow(ByteStringer.wrap("somerow".getBytes()));
  getRequestBuilder.setGet(getBuilder.build());
  GetRequest getRequest=getRequestBuilder.build();
  RequestHeader header=headerBuilder.build();
  HRegion mockRegion=Mockito.mock(HRegion.class);
  HRegionServer mockRS=Mockito.mock(HRegionServer.class);
  RSRpcServices mockRpc=Mockito.mock(RSRpcServices.class);
  Mockito.when(mockRS.getRSRpcServices()).thenReturn(mockRpc);
  HRegionInfo mockRegionInfo=Mockito.mock(HRegionInfo.class);
  Mockito.when(mockRpc.getRegion((RegionSpecifier)Mockito.any())).thenReturn(mockRegion);
  Mockito.when(mockRegion.getRegionInfo()).thenReturn(mockRegionInfo);
  Mockito.when(mockRegionInfo.isSystemTable()).thenReturn(true);
  ((AnnotationReadingPriorityFunction)priority).setRegionServer(mockRS);
  assertEquals(HConstants.SYSTEMTABLE_QOS,priority.getPriority(header,getRequest,User.createUserForTesting(regionServer.conf,"someuser",new String[]{"somegroup"})));
}

</code></pre>

<br>
<pre class="type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQosFunctionForScanMethod() throws IOException {
  RequestHeader.Builder headerBuilder=RequestHeader.newBuilder();
  headerBuilder.setMethodName("Scan");
  RequestHeader header=headerBuilder.build();
  ScanRequest.Builder scanBuilder=ScanRequest.newBuilder();
  ScanRequest scanRequest=scanBuilder.build();
  HRegion mockRegion=Mockito.mock(HRegion.class);
  HRegionServer mockRS=Mockito.mock(HRegionServer.class);
  RSRpcServices mockRpc=Mockito.mock(RSRpcServices.class);
  Mockito.when(mockRS.getRSRpcServices()).thenReturn(mockRpc);
  HRegionInfo mockRegionInfo=Mockito.mock(HRegionInfo.class);
  Mockito.when(mockRpc.getRegion((RegionSpecifier)Mockito.any())).thenReturn(mockRegion);
  Mockito.when(mockRegion.getRegionInfo()).thenReturn(mockRegionInfo);
  Mockito.when(mockRegionInfo.isSystemTable()).thenReturn(false);
  ((AnnotationReadingPriorityFunction)priority).setRegionServer(mockRS);
  int qos=priority.getPriority(header,scanRequest,User.createUserForTesting(regionServer.conf,"someuser",new String[]{"somegroup"}));
  assertTrue("" + qos,qos == HConstants.NORMAL_QOS);
  scanBuilder=ScanRequest.newBuilder();
  scanBuilder.setScannerId(12345);
  scanRequest=scanBuilder.build();
  RegionScanner mockRegionScanner=Mockito.mock(RegionScanner.class);
  Mockito.when(mockRpc.getScanner(12345)).thenReturn(mockRegionScanner);
  Mockito.when(mockRegionScanner.getRegionInfo()).thenReturn(mockRegionInfo);
  Mockito.when(mockRpc.getRegion((RegionSpecifier)Mockito.any())).thenReturn(mockRegion);
  Mockito.when(mockRegion.getRegionInfo()).thenReturn(mockRegionInfo);
  Mockito.when(mockRegionInfo.isSystemTable()).thenReturn(true);
  ((AnnotationReadingPriorityFunction)priority).setRegionServer(mockRS);
  assertEquals(HConstants.SYSTEMTABLE_QOS,priority.getPriority(header,scanRequest,User.createUserForTesting(regionServer.conf,"someuser",new String[]{"somegroup"})));
  Mockito.when(mockRegionInfo.isSystemTable()).thenReturn(false);
  assertEquals(HConstants.NORMAL_QOS,priority.getPriority(header,scanRequest,User.createUserForTesting(regionServer.conf,"someuser",new String[]{"somegroup"})));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestQueryMatcher </h4><pre class="type-9 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Verify that {@link ScanQueryMatcher} only skips expired KeyValue
 * instances and does not exit early from the row (skipping
 * later non-expired KeyValues).  This version mimics a Get with
 * explicitly specified column qualifiers.
 * @throws IOException
 */
@Test public void testMatch_ExpiredExplicit() throws IOException {
  long testTTL=1000;
  MatchCode[] expected=new MatchCode[]{ScanQueryMatcher.MatchCode.SEEK_NEXT_COL,ScanQueryMatcher.MatchCode.INCLUDE_AND_SEEK_NEXT_COL,ScanQueryMatcher.MatchCode.SEEK_NEXT_COL,ScanQueryMatcher.MatchCode.INCLUDE_AND_SEEK_NEXT_COL,ScanQueryMatcher.MatchCode.SEEK_NEXT_ROW,ScanQueryMatcher.MatchCode.DONE};
  long now=EnvironmentEdgeManager.currentTime();
  ScanQueryMatcher qm=new ScanQueryMatcher(scan,new ScanInfo(this.conf,fam2,0,1,testTTL,KeepDeletedCells.FALSE,0,rowComparator),get.getFamilyMap().get(fam2),now - testTTL,now);
  KeyValue[] kvs=new KeyValue[]{new KeyValue(row1,fam2,col1,now - 100,data),new KeyValue(row1,fam2,col2,now - 50,data),new KeyValue(row1,fam2,col3,now - 5000,data),new KeyValue(row1,fam2,col4,now - 500,data),new KeyValue(row1,fam2,col5,now - 10000,data),new KeyValue(row2,fam1,col1,now - 10,data)};
  KeyValue k=kvs[0];
  qm.setToNewRow(k);
  List<MatchCode> actual=new ArrayList<MatchCode>(kvs.length);
  for (  KeyValue kv : kvs) {
    actual.add(qm.match(kv));
  }
  assertEquals(expected.length,actual.size());
  for (int i=0; i < expected.length; i++) {
    if (PRINT) {
      System.out.println("expected " + expected[i] + ", actual "+ actual.get(i));
    }
    assertEquals(expected[i],actual.get(i));
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Verify that {@link ScanQueryMatcher} only skips expired KeyValue
 * instances and does not exit early from the row (skipping
 * later non-expired KeyValues).  This version mimics a Get with
 * wildcard-inferred column qualifiers.
 * @throws IOException
 */
@Test public void testMatch_ExpiredWildcard() throws IOException {
  long testTTL=1000;
  MatchCode[] expected=new MatchCode[]{ScanQueryMatcher.MatchCode.INCLUDE,ScanQueryMatcher.MatchCode.INCLUDE,ScanQueryMatcher.MatchCode.SEEK_NEXT_COL,ScanQueryMatcher.MatchCode.INCLUDE,ScanQueryMatcher.MatchCode.SEEK_NEXT_COL,ScanQueryMatcher.MatchCode.DONE};
  long now=EnvironmentEdgeManager.currentTime();
  ScanQueryMatcher qm=new ScanQueryMatcher(scan,new ScanInfo(this.conf,fam2,0,1,testTTL,KeepDeletedCells.FALSE,0,rowComparator),null,now - testTTL,now);
  KeyValue[] kvs=new KeyValue[]{new KeyValue(row1,fam2,col1,now - 100,data),new KeyValue(row1,fam2,col2,now - 50,data),new KeyValue(row1,fam2,col3,now - 5000,data),new KeyValue(row1,fam2,col4,now - 500,data),new KeyValue(row1,fam2,col5,now - 10000,data),new KeyValue(row2,fam1,col1,now - 10,data)};
  KeyValue k=kvs[0];
  qm.setToNewRow(k);
  List<ScanQueryMatcher.MatchCode> actual=new ArrayList<ScanQueryMatcher.MatchCode>(kvs.length);
  for (  KeyValue kv : kvs) {
    actual.add(qm.match(kv));
  }
  assertEquals(expected.length,actual.size());
  for (int i=0; i < expected.length; i++) {
    if (PRINT) {
      System.out.println("expected " + expected[i] + ", actual "+ actual.get(i));
    }
    assertEquals(expected[i],actual.get(i));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestRegionServerHostname </h4><pre class="type-4 type-9 type-7 type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test(timeout=120000) public void testRegionServerHostname() throws Exception {
  final int NUM_MASTERS=1;
  final int NUM_RS=1;
  Enumeration<NetworkInterface> netInterfaceList=NetworkInterface.getNetworkInterfaces();
  while (netInterfaceList.hasMoreElements()) {
    NetworkInterface ni=netInterfaceList.nextElement();
    Enumeration<InetAddress> addrList=ni.getInetAddresses();
    while (addrList.hasMoreElements()) {
      InetAddress addr=addrList.nextElement();
      if (addr.isLoopbackAddress() || addr.isLinkLocalAddress() || addr.isMulticastAddress()) {
        continue;
      }
      String hostName=addr.getHostName();
      LOG.info("Found " + hostName + " on "+ ni);
      TEST_UTIL.getConfiguration().set(HRegionServer.MASTER_HOSTNAME_KEY,hostName);
      TEST_UTIL.getConfiguration().set(HRegionServer.RS_HOSTNAME_KEY,hostName);
      TEST_UTIL.startMiniCluster(NUM_MASTERS,NUM_RS);
      try {
        ZooKeeperWatcher zkw=TEST_UTIL.getZooKeeperWatcher();
        List<String> servers=ZKUtil.listChildrenNoWatch(zkw,zkw.rsZNode);
        assertTrue(servers.size() == NUM_RS + 1);
        for (        String server : servers) {
          assertTrue("From zookeeper: " + server + " hostname: "+ hostName,server.startsWith(hostName.toLowerCase() + ","));
        }
        zkw.close();
      }
  finally {
        TEST_UTIL.shutdownMiniCluster();
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestRegionServerOnlineConfigChange </h4><pre class="type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check if the number of compaction threads changes online
 * @throws IOException
 */
@Test public void testNumCompactionThreadsOnlineChange() throws IOException {
  assertTrue(rs1.compactSplitThread != null);
  int newNumSmallThreads=rs1.compactSplitThread.getSmallCompactionThreadNum() + 1;
  int newNumLargeThreads=rs1.compactSplitThread.getLargeCompactionThreadNum() + 1;
  conf.setInt("hbase.regionserver.thread.compaction.small",newNumSmallThreads);
  conf.setInt("hbase.regionserver.thread.compaction.large",newNumLargeThreads);
  rs1.getConfigurationManager().notifyAllObservers(conf);
  assertEquals(newNumSmallThreads,rs1.compactSplitThread.getSmallCompactionThreadNum());
  assertEquals(newNumLargeThreads,rs1.compactSplitThread.getLargeCompactionThreadNum());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestSplitLogWorker </h4><pre class="type-4 type-10 type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testRescan() throws Exception {
  LOG.info("testRescan");
  SplitLogCounters.resetCounters();
  final ServerName SRV=ServerName.valueOf("svr,1,1");
  RegionServerServices mockedRS=getRegionServer(SRV);
  slw=new SplitLogWorker(ds,TEST_UTIL.getConfiguration(),mockedRS,neverEndingTask);
  slw.start();
  Thread.yield();
  Thread.sleep(100);
  String task=ZKSplitLog.getEncodedNodeName(zkw,"task");
  SplitLogTask slt=new SplitLogTask.Unassigned(MANAGER,this.mode);
  zkw.getRecoverableZooKeeper().create(task,slt.toByteArray(),Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  waitForCounter(SplitLogCounters.tot_wkr_task_acquired,0,1,WAIT_TIME);
  ZKUtil.setData(zkw,task,slt.toByteArray());
  waitForCounter(SplitLogCounters.tot_wkr_preempt_task,0,1,WAIT_TIME);
  String rescan=ZKSplitLog.getEncodedNodeName(zkw,"RESCAN");
  rescan=zkw.getRecoverableZooKeeper().create(rescan,slt.toByteArray(),Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT_SEQUENTIAL);
  waitForCounter(SplitLogCounters.tot_wkr_task_acquired,1,2,WAIT_TIME);
  ZKUtil.setData(zkw,task,slt.toByteArray());
  waitForCounter(SplitLogCounters.tot_wkr_preempt_task,1,2,WAIT_TIME);
  waitForCounter(SplitLogCounters.tot_wkr_task_acquired_rescan,0,1,WAIT_TIME);
  List<String> nodes=ZKUtil.listChildrenNoWatch(zkw,zkw.splitLogZNode);
  LOG.debug(nodes);
  int num=0;
  for (  String node : nodes) {
    num++;
    if (node.startsWith("RESCAN")) {
      String name=ZKSplitLog.getEncodedNodeName(zkw,node);
      String fn=ZKSplitLog.getFileName(name);
      byte[] data=ZKUtil.getData(zkw,ZKUtil.joinZNode(zkw.splitLogZNode,fn));
      slt=SplitLogTask.parseFrom(data);
      assertTrue(slt.toString(),slt.isDone(SRV));
    }
  }
  assertEquals(2,num);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.TestStore </h4><pre class="type-4 type-11 type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test we do not lose data if we fail a flush and then close.
 * Part of HBase-10466
 * @throws Exception
 */
@Test public void testFlushSizeAccounting() throws Exception {
  LOG.info("Setting up a faulty file system that cannot write in " + this.name.getMethodName());
  final Configuration conf=HBaseConfiguration.create();
  conf.setInt("hbase.hstore.flush.retries.number",1);
  User user=User.createUserForTesting(conf,this.name.getMethodName(),new String[]{"foo"});
  conf.setClass("fs.file.impl",FaultyFileSystem.class,FileSystem.class);
  user.runAs(new PrivilegedExceptionAction(){
    @Override public Object run() throws Exception {
      FileSystem fs=FileSystem.get(conf);
      Assert.assertEquals(FaultyFileSystem.class,fs.getClass());
      FaultyFileSystem ffs=(FaultyFileSystem)fs;
      init(name.getMethodName(),conf);
      long size=store.memstore.getFlushableSize();
      Assert.assertEquals(0,size);
      LOG.info("Adding some data");
      long kvSize=store.add(new KeyValue(row,family,qf1,1,(byte[])null));
      size=store.memstore.getFlushableSize();
      Assert.assertEquals(kvSize,size);
      try {
        LOG.info("Flushing");
        flushStore(store,id++);
        Assert.fail("Didn't bubble up IOE!");
      }
 catch (      IOException ioe) {
        Assert.assertTrue(ioe.getMessage().contains("Fault injected"));
      }
      size=store.memstore.getFlushableSize();
      Assert.assertEquals(kvSize,size);
      store.add(new KeyValue(row,family,qf2,2,(byte[])null));
      Assert.assertEquals(kvSize,size);
      ffs.fault.set(false);
      flushStore(store,id++);
      size=store.memstore.getFlushableSize();
      Assert.assertEquals(kvSize,size);
      flushStore(store,id++);
      size=store.memstore.getFlushableSize();
      Assert.assertEquals(0,size);
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.throttle.TestCompactionWithThroughputController </h4><pre class="type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test the tuning task of {@link PressureAwareCompactionThroughputController}
 */
@Test public void testThroughputTuning() throws Exception {
  Configuration conf=TEST_UTIL.getConfiguration();
  conf.set(StoreEngine.STORE_ENGINE_CLASS_KEY,DefaultStoreEngine.class.getName());
  conf.setLong(PressureAwareCompactionThroughputController.HBASE_HSTORE_COMPACTION_MAX_THROUGHPUT_HIGHER_BOUND,20L * 1024 * 1024);
  conf.setLong(PressureAwareCompactionThroughputController.HBASE_HSTORE_COMPACTION_MAX_THROUGHPUT_LOWER_BOUND,10L * 1024 * 1024);
  conf.setInt(CompactionConfiguration.HBASE_HSTORE_COMPACTION_MIN_KEY,4);
  conf.setInt(HStore.BLOCKING_STOREFILES_KEY,6);
  conf.set(CompactionThroughputControllerFactory.HBASE_THROUGHPUT_CONTROLLER_KEY,PressureAwareCompactionThroughputController.class.getName());
  conf.setInt(PressureAwareCompactionThroughputController.HBASE_HSTORE_COMPACTION_THROUGHPUT_TUNE_PERIOD,1000);
  TEST_UTIL.startMiniCluster(1);
  Connection conn=ConnectionFactory.createConnection(conf);
  try {
    HTableDescriptor htd=new HTableDescriptor(tableName);
    htd.addFamily(new HColumnDescriptor(family));
    htd.setCompactionEnabled(false);
    TEST_UTIL.getHBaseAdmin().createTable(htd);
    TEST_UTIL.waitTableAvailable(tableName);
    HRegionServer regionServer=TEST_UTIL.getRSForFirstRegionInTable(tableName);
    PressureAwareCompactionThroughputController throughputController=(PressureAwareCompactionThroughputController)regionServer.compactSplitThread.getCompactionThroughputController();
    assertEquals(10L * 1024 * 1024,throughputController.getMaxThroughput(),EPSILON);
    Table table=conn.getTable(tableName);
    for (int i=0; i < 5; i++) {
      byte[] value=new byte[0];
      table.put(new Put(Bytes.toBytes(i)).addColumn(family,qualifier,value));
      TEST_UTIL.flush(tableName);
    }
    Thread.sleep(2000);
    assertEquals(15L * 1024 * 1024,throughputController.getMaxThroughput(),EPSILON);
    byte[] value1=new byte[0];
    table.put(new Put(Bytes.toBytes(5)).addColumn(family,qualifier,value1));
    TEST_UTIL.flush(tableName);
    Thread.sleep(2000);
    assertEquals(20L * 1024 * 1024,throughputController.getMaxThroughput(),EPSILON);
    byte[] value=new byte[0];
    table.put(new Put(Bytes.toBytes(6)).addColumn(family,qualifier,value));
    TEST_UTIL.flush(tableName);
    Thread.sleep(2000);
    assertEquals(Double.MAX_VALUE,throughputController.getMaxThroughput(),EPSILON);
    conf.set(CompactionThroughputControllerFactory.HBASE_THROUGHPUT_CONTROLLER_KEY,NoLimitThroughputController.class.getName());
    regionServer.compactSplitThread.onConfigurationChange(conf);
    assertTrue(throughputController.isStopped());
    assertTrue(regionServer.compactSplitThread.getCompactionThroughputController() instanceof NoLimitThroughputController);
  }
  finally {
    conn.close();
    TEST_UTIL.shutdownMiniCluster();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.regionserver.wal.TestFSHLog </h4><pre class="type-4 type-7 type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
/** 
 * tests the log comparator. Ensure that we are not mixing meta logs with non-meta logs (throws
 * exception if we do). Comparison is based on the timestamp present in the wal name.
 * @throws Exception
 */
@Test public void testWALComparator() throws Exception {
  FSHLog wal1=null;
  FSHLog walMeta=null;
  try {
    wal1=new FSHLog(fs,FSUtils.getRootDir(conf),dir.toString(),HConstants.HREGION_OLDLOGDIR_NAME,conf,null,true,null,null);
    LOG.debug("Log obtained is: " + wal1);
    Comparator<Path> comp=wal1.LOG_NAME_COMPARATOR;
    Path p1=wal1.computeFilename(11);
    Path p2=wal1.computeFilename(12);
    assertTrue(comp.compare(p1,p1) == 0);
    assertTrue(comp.compare(p1,p2) < 0);
    walMeta=new FSHLog(fs,FSUtils.getRootDir(conf),dir.toString(),HConstants.HREGION_OLDLOGDIR_NAME,conf,null,true,null,DefaultWALProvider.META_WAL_PROVIDER_ID);
    Comparator<Path> compMeta=walMeta.LOG_NAME_COMPARATOR;
    Path p1WithMeta=walMeta.computeFilename(11);
    Path p2WithMeta=walMeta.computeFilename(12);
    assertTrue(compMeta.compare(p1WithMeta,p1WithMeta) == 0);
    assertTrue(compMeta.compare(p1WithMeta,p2WithMeta) < 0);
    boolean ex=false;
    try {
      comp.compare(p1WithMeta,p2);
    }
 catch (    IllegalArgumentException e) {
      ex=true;
    }
    assertTrue("Comparator doesn't complain while checking meta log files",ex);
    boolean exMeta=false;
    try {
      compMeta.compare(p1WithMeta,p2);
    }
 catch (    IllegalArgumentException e) {
      exMeta=true;
    }
    assertTrue("Meta comparator doesn't complain while checking log files",exMeta);
  }
  finally {
    if (wal1 != null) {
      wal1.close();
    }
    if (walMeta != null) {
      walMeta.close();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.replication.TestReplicationStateZKImpl </h4><pre class="type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void testIsPeerPath_PathToChildOfPeerNode(){
  String peerChild=ZKUtil.joinZNode(ZKUtil.joinZNode(rqZK.peersZNode,"1"),"child");
  assertFalse(rqZK.isPeerPath(peerChild));
}

</code></pre>

<br>
<pre class="type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void testIsPeerPath_ActualPeerPath(){
  String peerPath=ZKUtil.joinZNode(rqZK.peersZNode,"1");
  assertTrue(rqZK.isPeerPath(peerPath));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.replication.regionserver.TestReplicationWALReaderManager </h4><pre class="type-9 type-10 type-11 type-7 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Path path=pathWatcher.currentPath;
  assertEquals(0,logManager.getPosition());
  appendToLog();
  assertNotNull(logManager.openReader(path));
  logManager.seek();
  WAL.Entry entry=logManager.readNextAndSetPosition();
  assertNotNull(entry);
  entry=logManager.readNextAndSetPosition();
  assertNull(entry);
  logManager.closeReader();
  long oldPos=logManager.getPosition();
  appendToLog();
  assertNotNull(logManager.openReader(path));
  logManager.seek();
  entry=logManager.readNextAndSetPosition();
  assertNotEquals(oldPos,logManager.getPosition());
  assertNotNull(entry);
  logManager.closeReader();
  oldPos=logManager.getPosition();
  log.rollWriter();
  assertNotNull(logManager.openReader(path));
  logManager.seek();
  entry=logManager.readNextAndSetPosition();
  assertEquals(oldPos,logManager.getPosition());
  assertNull(entry);
  logManager.finishCurrentFile();
  path=pathWatcher.currentPath;
  for (int i=0; i < nbRows; i++) {
    appendToLogPlus(walEditKVs);
  }
  log.rollWriter();
  logManager.openReader(path);
  logManager.seek();
  for (int i=0; i < nbRows; i++) {
    WAL.Entry e=logManager.readNextAndSetPosition();
    if (e == null) {
      fail("Should have enough entries");
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.rest.TestGzipFilter </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGzipFilter() throws Exception {
  String path="/" + TABLE + "/"+ ROW_1+ "/"+ COLUMN_1;
  ByteArrayOutputStream bos=new ByteArrayOutputStream();
  GZIPOutputStream os=new GZIPOutputStream(bos);
  os.write(VALUE_1);
  os.close();
  byte[] value_1_gzip=bos.toByteArray();
  Header[] headers=new Header[2];
  headers[0]=new Header("Content-Type",Constants.MIMETYPE_BINARY);
  headers[1]=new Header("Content-Encoding","gzip");
  Response response=client.put(path,headers,value_1_gzip);
  assertEquals(response.getCode(),200);
  Table table=TEST_UTIL.getConnection().getTable(TABLE);
  Get get=new Get(Bytes.toBytes(ROW_1));
  get.addColumn(Bytes.toBytes(CFA),Bytes.toBytes("1"));
  Result result=table.get(get);
  byte[] value=result.getValue(Bytes.toBytes(CFA),Bytes.toBytes("1"));
  assertNotNull(value);
  assertTrue(Bytes.equals(value,VALUE_1));
  headers[0]=new Header("Accept",Constants.MIMETYPE_BINARY);
  headers[1]=new Header("Accept-Encoding","gzip");
  response=client.get(path,headers);
  assertEquals(response.getCode(),200);
  ByteArrayInputStream bis=new ByteArrayInputStream(response.getBody());
  GZIPInputStream is=new GZIPInputStream(bis);
  value=new byte[VALUE_1.length];
  is.read(value,0,VALUE_1.length);
  assertTrue(Bytes.equals(value,VALUE_1));
  is.close();
  table.close();
  testScannerResultCodes();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.thrift.TestThriftServerCmdLine </h4><pre class="type-10 type-7 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=600000) public void testRunThriftServer() throws Exception {
  List<String> args=new ArrayList<String>();
  if (implType != null) {
    String serverTypeOption=implType.toString();
    assertTrue(serverTypeOption.startsWith("-"));
    args.add(serverTypeOption);
  }
  port=HBaseTestingUtility.randomFreePort();
  args.add("-" + ThriftServer.PORT_OPTION);
  args.add(String.valueOf(port));
  if (specifyFramed) {
    args.add("-" + ThriftServer.FRAMED_OPTION);
  }
  if (specifyBindIP) {
    args.add("-" + ThriftServer.BIND_OPTION);
    args.add(InetAddress.getLocalHost().getHostName());
  }
  if (specifyCompact) {
    args.add("-" + ThriftServer.COMPACT_OPTION);
  }
  args.add("start");
  thriftServer=new ThriftServer(TEST_UTIL.getConfiguration());
  startCmdLineThread(args.toArray(new String[args.size()]));
  for (int i=0; i < 100 && (thriftServer.serverRunner == null || thriftServer.serverRunner.tserver == null); i++) {
    Thread.sleep(100);
  }
  Class<? extends TServer> expectedClass=implType != null ? implType.serverClass : TBoundedThreadPoolServer.class;
  assertEquals(expectedClass,thriftServer.serverRunner.tserver.getClass());
  try {
    talkToThriftServer();
  }
 catch (  Exception ex) {
    clientSideException=ex;
  }
 finally {
    stopCmdLineThread();
  }
  if (clientSideException != null) {
    LOG.error("Thrift client threw an exception. Parameters:" + getParametersString(),clientSideException);
    throw new Exception(clientSideException);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.types.TestStruct </h4><pre class="type-9 type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test @SuppressWarnings("unchecked") public void testOrderPreservation() throws Exception {
  Object[] vals=new Object[constructorArgs.length];
  PositionedByteRange[] encodedGeneric=new PositionedByteRange[constructorArgs.length];
  PositionedByteRange[] encodedSpecialized=new PositionedByteRange[constructorArgs.length];
  Constructor<?> ctor=specialized.encodedClass().getConstructor(Object[].class);
  for (int i=0; i < vals.length; i++) {
    vals[i]=ctor.newInstance(new Object[]{constructorArgs[i]});
    encodedGeneric[i]=new SimplePositionedMutableByteRange(generic.encodedLength(constructorArgs[i]));
    encodedSpecialized[i]=new SimplePositionedMutableByteRange(specialized.encodedLength(vals[i]));
  }
  for (int i=0; i < vals.length; i++) {
    generic.encode(encodedGeneric[i],constructorArgs[i]);
    encodedGeneric[i].setPosition(0);
    specialized.encode(encodedSpecialized[i],vals[i]);
    encodedSpecialized[i].setPosition(0);
    assertArrayEquals(encodedGeneric[i].getBytes(),encodedSpecialized[i].getBytes());
  }
  Arrays.sort(vals);
  Arrays.sort(encodedGeneric);
  Arrays.sort(encodedSpecialized);
  for (int i=0; i < vals.length; i++) {
    assertEquals("Struct encoder does not preserve sort order at position " + i,vals[i],ctor.newInstance(new Object[]{generic.decode(encodedGeneric[i])}));
    assertEquals("Specialized encoder does not preserve sort order at position " + i,vals[i],specialized.decode(encodedSpecialized[i]));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.types.TestTerminatedWrapper </h4><pre class="type-4 type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testSkipSkippable(){
  PositionedByteRange buff=new SimplePositionedMutableByteRange(14);
  for (  OrderedString t : new OrderedString[]{OrderedString.ASCENDING,OrderedString.DESCENDING}) {
    for (    byte[] term : TERMINATORS) {
      for (      String val : VALUES_STRINGS) {
        buff.setPosition(0);
        DataType<String> type=new TerminatedWrapper<String>(t,term);
        int expected=val.length() + 2 + term.length;
        assertEquals(expected,type.encode(buff,val));
        buff.setPosition(0);
        assertEquals(expected,type.skip(buff));
        assertEquals(expected,buff.getPosition());
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.TestByteBufferUtils </h4><pre class="type-9 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test copying data from stream.
 * @throws IOException On test failure.
 */
@Test public void testCopyFromStream() throws IOException {
  ByteBuffer buffer=ByteBuffer.allocate(array.length);
  ByteArrayInputStream bis=new ByteArrayInputStream(array);
  DataInputStream dis=new DataInputStream(bis);
  ByteBufferUtils.copyFromStreamToBuffer(buffer,dis,array.length / 2);
  ByteBufferUtils.copyFromStreamToBuffer(buffer,dis,array.length - array.length / 2);
  for (int i=0; i < array.length; ++i) {
    assertEquals(array[i],buffer.get(i));
  }
}

</code></pre>

<br>
<pre class="type-4 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompareTo(){
  ByteBuffer bb1=ByteBuffer.allocate(135);
  ByteBuffer bb2=ByteBuffer.allocate(135);
  byte[] b=new byte[71];
  fillBB(bb1,(byte)5);
  fillBB(bb2,(byte)5);
  fillArray(b,(byte)5);
  assertEquals(0,ByteBufferUtils.compareTo(bb1,0,bb1.remaining(),bb2,0,bb2.remaining()));
  assertTrue(ByteBufferUtils.compareTo(bb1,0,bb1.remaining(),b,0,b.length) > 0);
  bb2.put(134,(byte)6);
  assertTrue(ByteBufferUtils.compareTo(bb1,0,bb1.remaining(),bb2,0,bb2.remaining()) < 0);
  bb2.put(6,(byte)4);
  assertTrue(ByteBufferUtils.compareTo(bb1,0,bb1.remaining(),bb2,0,bb2.remaining()) > 0);
  ByteBuffer bb3=ByteBuffer.allocate(135);
  fillBB(bb3,(byte)0);
  byte[] b3=new byte[135];
  fillArray(b3,(byte)1);
  int result=ByteBufferUtils.compareTo(b3,0,b3.length,bb3,0,bb3.remaining());
  assertTrue(result > 0);
  result=ByteBufferUtils.compareTo(bb3,0,bb3.remaining(),b3,0,b3.length);
  assertTrue(result < 0);
}

</code></pre>

<br>
<pre class="type-4 type-9 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test copying to stream from buffer with offset.
 * @throws IOException On test failure.
 */
@Test public void testCopyToStreamWithOffset() throws IOException {
  ByteBuffer buffer=ByteBuffer.wrap(array);
  ByteArrayOutputStream bos=new ByteArrayOutputStream();
  ByteBufferUtils.copyBufferToStream(bos,buffer,array.length / 2,array.length / 2);
  byte[] returnedArray=bos.toByteArray();
  for (int i=0; i < array.length / 2; ++i) {
    int pos=array.length / 2 + i;
    assertEquals(returnedArray[i],array[pos]);
  }
}

</code></pre>

<br>
<pre class="type-4 type-11 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test copying to stream from buffer.
 */
@Test public void testMoveBufferToStream(){
  final int arrayOffset=7;
  final int initialPosition=10;
  final int endPadding=5;
  byte[] arrayWrapper=new byte[arrayOffset + initialPosition + array.length+ endPadding];
  System.arraycopy(array,0,arrayWrapper,arrayOffset + initialPosition,array.length);
  ByteBuffer buffer=ByteBuffer.wrap(arrayWrapper,arrayOffset,initialPosition + array.length).slice();
  assertEquals(initialPosition + array.length,buffer.limit());
  assertEquals(0,buffer.position());
  buffer.position(initialPosition);
  ByteArrayOutputStream bos=new ByteArrayOutputStream();
  try {
    ByteBufferUtils.moveBufferToStream(bos,buffer,array.length);
  }
 catch (  IOException e) {
    fail("IOException in testCopyToStream()");
  }
  assertArrayEquals(array,bos.toByteArray());
  assertEquals(initialPosition + array.length,buffer.position());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test copying from buffer.
 */
@Test public void testCopyFromBuffer(){
  ByteBuffer srcBuffer=ByteBuffer.allocate(array.length);
  ByteBuffer dstBuffer=ByteBuffer.allocate(array.length);
  srcBuffer.put(array);
  ByteBufferUtils.copyFromBufferToBuffer(srcBuffer,dstBuffer,array.length / 2,array.length / 4);
  for (int i=0; i < array.length / 4; ++i) {
    assertEquals(srcBuffer.get(i + array.length / 2),dstBuffer.get(i));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.TestOrder </h4><pre class="type-9 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testApplyDescending(){
  byte[][] vals=new byte[VALS.length][];
  byte[][] ordered=new byte[VALS.length][];
  for (int i=0; i < VALS.length; i++) {
    vals[i]=Arrays.copyOf(VALS[i],VALS[i].length);
    ordered[i]=Arrays.copyOf(VALS[i],VALS[i].length);
    DESCENDING.apply(ordered[i]);
  }
  Arrays.sort(vals,Collections.reverseOrder(Bytes.BYTES_COMPARATOR));
  Arrays.sort(ordered,Bytes.BYTES_COMPARATOR);
  for (int i=0; i < vals.length; i++) {
    DESCENDING.apply(ordered[i]);
    assertArrayEquals(vals[i],ordered[i]);
  }
  byte[] expected=new byte[]{VALS[0][0],DESCENDING.apply(VALS[0][1]),VALS[0][2]};
  byte[] rangeApply=Arrays.copyOf(VALS[0],VALS[0].length);
  DESCENDING.apply(rangeApply,1,1);
  assertArrayEquals(expected,rangeApply);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testApplyAscending(){
  byte[][] vals=new byte[VALS.length][];
  byte[][] ordered=new byte[VALS.length][];
  for (int i=0; i < VALS.length; i++) {
    vals[i]=Arrays.copyOf(VALS[i],VALS[i].length);
    ordered[i]=Arrays.copyOf(VALS[i],VALS[i].length);
    ASCENDING.apply(ordered[i]);
  }
  Arrays.sort(vals,Bytes.BYTES_COMPARATOR);
  Arrays.sort(ordered,Bytes.BYTES_COMPARATOR);
  for (int i=0; i < vals.length; i++) {
    assertArrayEquals(vals[i],ordered[i]);
  }
  byte[] rangeApply=Arrays.copyOf(VALS[0],VALS[0].length);
  ASCENDING.apply(rangeApply,1,1);
  assertArrayEquals(VALS[0],rangeApply);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.TestOrderedBytes </h4><pre class="type-4 type-9 type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test int8 encoding.
 */
@Test public void testInt8(){
  Byte[] vals={Byte.MIN_VALUE,Byte.MIN_VALUE / 2,0,Byte.MAX_VALUE / 2,Byte.MAX_VALUE};
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    for (int i=0; i < vals.length; i++) {
      byte[] a=new byte[2 + 3];
      PositionedByteRange buf1=new SimplePositionedMutableByteRange(a,1,2 + 1);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",2,OrderedBytes.encodeInt8(buf1,vals[i],ord));
      assertEquals("Broken test: serialization did not consume entire buffer.",buf1.getLength(),buf1.getPosition());
      assertEquals("Surprising serialized length.",2,buf1.getPosition() - 1);
      assertEquals("Buffer underflow.",0,a[0]);
      assertEquals("Buffer underflow.",0,a[1]);
      assertEquals("Buffer overflow.",0,a[a.length - 1]);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",2,OrderedBytes.skip(buf1));
      assertEquals("Did not skip enough bytes.",2,buf1.getPosition() - 1);
      buf1.setPosition(1);
      assertEquals("Deserialization failed.",vals[i].byteValue(),OrderedBytes.decodeInt8(buf1));
      assertEquals("Did not consume enough bytes.",2,buf1.getPosition() - 1);
    }
  }
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    byte[][] encoded=new byte[vals.length][2];
    PositionedByteRange pbr=new SimplePositionedMutableByteRange();
    for (int i=0; i < vals.length; i++) {
      OrderedBytes.encodeInt8(pbr.set(encoded[i]),vals[i],ord);
    }
    Arrays.sort(encoded,Bytes.BYTES_COMPARATOR);
    Byte[] sortedVals=Arrays.copyOf(vals,vals.length);
    if (ord == Order.ASCENDING)     Arrays.sort(sortedVals);
 else     Arrays.sort(sortedVals,Collections.reverseOrder());
    for (int i=0; i < sortedVals.length; i++) {
      int decoded=OrderedBytes.decodeInt8(pbr.set(encoded[i]));
      assertEquals(String.format("Encoded representations do not preserve natural order: <%s>, <%s>, %s",sortedVals[i],decoded,ord),sortedVals[i].byteValue(),decoded);
    }
  }
}

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test int32 encoding.
 */
@Test public void testInt32(){
  Integer[] vals={Integer.MIN_VALUE,Integer.MIN_VALUE / 2,0,Integer.MAX_VALUE / 2,Integer.MAX_VALUE};
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    for (int i=0; i < vals.length; i++) {
      byte[] a=new byte[5 + 3];
      PositionedByteRange buf1=new SimplePositionedMutableByteRange(a,1,5 + 1);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",5,OrderedBytes.encodeInt32(buf1,vals[i],ord));
      assertEquals("Broken test: serialization did not consume entire buffer.",buf1.getLength(),buf1.getPosition());
      assertEquals("Surprising serialized length.",5,buf1.getPosition() - 1);
      assertEquals("Buffer underflow.",0,a[0]);
      assertEquals("Buffer underflow.",0,a[1]);
      assertEquals("Buffer overflow.",0,a[a.length - 1]);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",5,OrderedBytes.skip(buf1));
      assertEquals("Did not skip enough bytes.",5,buf1.getPosition() - 1);
      buf1.setPosition(1);
      assertEquals("Deserialization failed.",vals[i].intValue(),OrderedBytes.decodeInt32(buf1));
      assertEquals("Did not consume enough bytes.",5,buf1.getPosition() - 1);
    }
  }
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    byte[][] encoded=new byte[vals.length][5];
    PositionedByteRange pbr=new SimplePositionedMutableByteRange();
    for (int i=0; i < vals.length; i++) {
      OrderedBytes.encodeInt32(pbr.set(encoded[i]),vals[i],ord);
    }
    Arrays.sort(encoded,Bytes.BYTES_COMPARATOR);
    Integer[] sortedVals=Arrays.copyOf(vals,vals.length);
    if (ord == Order.ASCENDING)     Arrays.sort(sortedVals);
 else     Arrays.sort(sortedVals,Collections.reverseOrder());
    for (int i=0; i < sortedVals.length; i++) {
      int decoded=OrderedBytes.decodeInt32(pbr.set(encoded[i]));
      assertEquals(String.format("Encoded representations do not preserve natural order: <%s>, <%s>, %s",sortedVals[i],decoded,ord),sortedVals[i].intValue(),decoded);
    }
  }
}

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test BlobCopy encoding.
 */
@Test public void testBlobCopy(){
  byte[][] vals={"".getBytes(),"foo".getBytes(),"foobarbazbub".getBytes(),{(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa},{(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55}};
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    for (    byte[] val : vals) {
      int expectedLen=val.length + (Order.ASCENDING == ord ? 1 : 2);
      byte[] a=new byte[expectedLen + 3];
      PositionedByteRange buf1=new SimplePositionedMutableByteRange(a,1,expectedLen + 1);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",expectedLen,OrderedBytes.encodeBlobCopy(buf1,val,ord));
      assertEquals("Broken test: serialization did not consume entire buffer.",buf1.getLength(),buf1.getPosition());
      assertEquals("Surprising serialized length.",expectedLen,buf1.getPosition() - 1);
      assertEquals("Buffer underflow.",0,a[0]);
      assertEquals("Buffer underflow.",0,a[1]);
      assertEquals("Buffer overflow.",0,a[a.length - 1]);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",expectedLen,OrderedBytes.skip(buf1));
      assertEquals("Did not skip enough bytes.",expectedLen,buf1.getPosition() - 1);
      buf1.setPosition(1);
      assertArrayEquals("Deserialization failed.",val,OrderedBytes.decodeBlobCopy(buf1));
      assertEquals("Did not consume enough bytes.",expectedLen,buf1.getPosition() - 1);
    }
  }
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    byte[][] encoded=new byte[vals.length][];
    PositionedByteRange pbr=new SimplePositionedMutableByteRange();
    for (int i=0; i < vals.length; i++) {
      encoded[i]=new byte[vals[i].length + (Order.ASCENDING == ord ? 1 : 2)];
      OrderedBytes.encodeBlobCopy(pbr.set(encoded[i]),vals[i],ord);
    }
    Arrays.sort(encoded,Bytes.BYTES_COMPARATOR);
    byte[][] sortedVals=Arrays.copyOf(vals,vals.length);
    if (ord == Order.ASCENDING)     Arrays.sort(sortedVals,Bytes.BYTES_COMPARATOR);
 else     Arrays.sort(sortedVals,Collections.reverseOrder(Bytes.BYTES_COMPARATOR));
    for (int i=0; i < sortedVals.length; i++) {
      pbr.set(encoded[i]);
      byte[] decoded=OrderedBytes.decodeBlobCopy(pbr);
      assertArrayEquals(String.format("Encoded representations do not preserve natural order: <%s>, <%s>, %s",Arrays.toString(sortedVals[i]),Arrays.toString(decoded),ord),sortedVals[i],decoded);
    }
  }
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    byte[] a=new byte[3 + (Order.ASCENDING == ord ? 1 : 2) + 2];
    PositionedByteRange buf=new SimplePositionedMutableByteRange(a,1,3 + (Order.ASCENDING == ord ? 1 : 2));
    OrderedBytes.encodeBlobCopy(buf,"foobarbaz".getBytes(),3,3,ord);
    buf.setPosition(0);
    assertArrayEquals("bar".getBytes(),OrderedBytes.decodeBlobCopy(buf));
  }
}

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test string encoding.
 */
@Test public void testString(){
  String[] vals={"foo","baaaar","bazz"};
  int expectedLengths[]={5,8,6};
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    for (int i=0; i < vals.length; i++) {
      byte[] a=new byte[expectedLengths[i] + 3];
      PositionedByteRange buf1=new SimplePositionedMutableByteRange(a,1,expectedLengths[i] + 1);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",expectedLengths[i],OrderedBytes.encodeString(buf1,vals[i],ord));
      assertEquals("Broken test: serialization did not consume entire buffer.",buf1.getLength(),buf1.getPosition());
      assertEquals("Surprising serialized length.",expectedLengths[i],buf1.getPosition() - 1);
      assertEquals("Buffer underflow.",0,a[0]);
      assertEquals("Buffer underflow.",0,a[1]);
      assertEquals("Buffer overflow.",0,a[a.length - 1]);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",expectedLengths[i],OrderedBytes.skip(buf1));
      assertEquals("Did not skip enough bytes.",expectedLengths[i],buf1.getPosition() - 1);
      buf1.setPosition(1);
      assertEquals("Deserialization failed.",vals[i],OrderedBytes.decodeString(buf1));
      assertEquals("Did not consume enough bytes.",expectedLengths[i],buf1.getPosition() - 1);
    }
  }
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    byte[][] encoded=new byte[vals.length][];
    PositionedByteRange pbr=new SimplePositionedMutableByteRange();
    for (int i=0; i < vals.length; i++) {
      encoded[i]=new byte[expectedLengths[i]];
      OrderedBytes.encodeString(pbr.set(encoded[i]),vals[i],ord);
    }
    Arrays.sort(encoded,Bytes.BYTES_COMPARATOR);
    String[] sortedVals=Arrays.copyOf(vals,vals.length);
    if (ord == Order.ASCENDING)     Arrays.sort(sortedVals);
 else     Arrays.sort(sortedVals,Collections.reverseOrder());
    for (int i=0; i < sortedVals.length; i++) {
      pbr.set(encoded[i]);
      String decoded=OrderedBytes.decodeString(pbr);
      assertEquals(String.format("Encoded representations do not preserve natural order: <%s>, <%s>, %s",sortedVals[i],decoded,ord),sortedVals[i],decoded);
    }
  }
}

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test int16 encoding.
 */
@Test public void testInt16(){
  Short[] vals={Short.MIN_VALUE,Short.MIN_VALUE / 2,0,Short.MAX_VALUE / 2,Short.MAX_VALUE};
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    for (int i=0; i < vals.length; i++) {
      byte[] a=new byte[3 + 3];
      PositionedByteRange buf1=new SimplePositionedMutableByteRange(a,1,3 + 1);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",3,OrderedBytes.encodeInt16(buf1,vals[i],ord));
      assertEquals("Broken test: serialization did not consume entire buffer.",buf1.getLength(),buf1.getPosition());
      assertEquals("Surprising serialized length.",3,buf1.getPosition() - 1);
      assertEquals("Buffer underflow.",0,a[0]);
      assertEquals("Buffer underflow.",0,a[1]);
      assertEquals("Buffer overflow.",0,a[a.length - 1]);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",3,OrderedBytes.skip(buf1));
      assertEquals("Did not skip enough bytes.",3,buf1.getPosition() - 1);
      buf1.setPosition(1);
      assertEquals("Deserialization failed.",vals[i].shortValue(),OrderedBytes.decodeInt16(buf1));
      assertEquals("Did not consume enough bytes.",3,buf1.getPosition() - 1);
    }
  }
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    byte[][] encoded=new byte[vals.length][3];
    PositionedByteRange pbr=new SimplePositionedMutableByteRange();
    for (int i=0; i < vals.length; i++) {
      OrderedBytes.encodeInt16(pbr.set(encoded[i]),vals[i],ord);
    }
    Arrays.sort(encoded,Bytes.BYTES_COMPARATOR);
    Short[] sortedVals=Arrays.copyOf(vals,vals.length);
    if (ord == Order.ASCENDING)     Arrays.sort(sortedVals);
 else     Arrays.sort(sortedVals,Collections.reverseOrder());
    for (int i=0; i < sortedVals.length; i++) {
      int decoded=OrderedBytes.decodeInt16(pbr.set(encoded[i]));
      assertEquals(String.format("Encoded representations do not preserve natural order: <%s>, <%s>, %s",sortedVals[i],decoded,ord),sortedVals[i].shortValue(),decoded);
    }
  }
}

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test int64 encoding.
 */
@Test public void testInt64(){
  Long[] vals={Long.MIN_VALUE,Long.MIN_VALUE / 2,0L,Long.MAX_VALUE / 2,Long.MAX_VALUE};
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    for (int i=0; i < vals.length; i++) {
      byte[] a=new byte[9 + 3];
      PositionedByteRange buf1=new SimplePositionedMutableByteRange(a,1,9 + 1);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",9,OrderedBytes.encodeInt64(buf1,vals[i],ord));
      assertEquals("Broken test: serialization did not consume entire buffer.",buf1.getLength(),buf1.getPosition());
      assertEquals("Surprising serialized length.",9,buf1.getPosition() - 1);
      assertEquals("Buffer underflow.",0,a[0]);
      assertEquals("Buffer underflow.",0,a[1]);
      assertEquals("Buffer overflow.",0,a[a.length - 1]);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",9,OrderedBytes.skip(buf1));
      assertEquals("Did not skip enough bytes.",9,buf1.getPosition() - 1);
      buf1.setPosition(1);
      assertEquals("Deserialization failed.",vals[i].longValue(),OrderedBytes.decodeInt64(buf1));
      assertEquals("Did not consume enough bytes.",9,buf1.getPosition() - 1);
    }
  }
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    byte[][] encoded=new byte[vals.length][9];
    PositionedByteRange pbr=new SimplePositionedMutableByteRange();
    for (int i=0; i < vals.length; i++) {
      OrderedBytes.encodeInt64(pbr.set(encoded[i]),vals[i],ord);
    }
    Arrays.sort(encoded,Bytes.BYTES_COMPARATOR);
    Long[] sortedVals=Arrays.copyOf(vals,vals.length);
    if (ord == Order.ASCENDING)     Arrays.sort(sortedVals);
 else     Arrays.sort(sortedVals,Collections.reverseOrder());
    for (int i=0; i < sortedVals.length; i++) {
      long decoded=OrderedBytes.decodeInt64(pbr.set(encoded[i]));
      assertEquals(String.format("Encoded representations do not preserve natural order: <%s>, <%s>, %s",sortedVals[i],decoded,ord),sortedVals[i].longValue(),decoded);
    }
  }
}

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test integer encoding. Example input values come from reference wiki
 * page.
 */
@Test public void testNumericInt(){
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    for (int i=0; i < I_VALS.length; i++) {
      byte[] a=new byte[I_LENGTHS[i] + 3];
      PositionedByteRange buf1=new SimplePositionedMutableByteRange(a,1,I_LENGTHS[i] + 1);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",I_LENGTHS[i],OrderedBytes.encodeNumeric(buf1,I_VALS[i],ord));
      assertEquals("Broken test: serialization did not consume entire buffer.",buf1.getLength(),buf1.getPosition());
      assertEquals("Surprising serialized length.",I_LENGTHS[i],buf1.getPosition() - 1);
      assertEquals("Buffer underflow.",0,a[0]);
      assertEquals("Buffer underflow.",0,a[1]);
      assertEquals("Buffer overflow.",0,a[a.length - 1]);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",I_LENGTHS[i],OrderedBytes.skip(buf1));
      assertEquals("Did not skip enough bytes.",I_LENGTHS[i],buf1.getPosition() - 1);
      buf1.setPosition(1);
      assertEquals("Deserialization failed.",I_VALS[i].longValue(),OrderedBytes.decodeNumericAsLong(buf1));
      assertEquals("Did not consume enough bytes.",I_LENGTHS[i],buf1.getPosition() - 1);
    }
  }
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    byte[][] encoded=new byte[I_VALS.length][];
    PositionedByteRange pbr=new SimplePositionedMutableByteRange();
    for (int i=0; i < I_VALS.length; i++) {
      encoded[i]=new byte[I_LENGTHS[i]];
      OrderedBytes.encodeNumeric(pbr.set(encoded[i]),I_VALS[i],ord);
    }
    Arrays.sort(encoded,Bytes.BYTES_COMPARATOR);
    Long[] sortedVals=Arrays.copyOf(I_VALS,I_VALS.length);
    if (ord == Order.ASCENDING)     Arrays.sort(sortedVals);
 else     Arrays.sort(sortedVals,Collections.reverseOrder());
    for (int i=0; i < sortedVals.length; i++) {
      pbr.set(encoded[i]);
      long decoded=OrderedBytes.decodeNumericAsLong(pbr);
      assertEquals(String.format("Encoded representations do not preserve natural order: <%s>, <%s>, %s",sortedVals[i],decoded,ord),sortedVals[i].longValue(),decoded);
    }
  }
}

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test BlobVar encoding.
 */
@Test public void testBlobVar(){
  byte[][] vals={"".getBytes(),"foo".getBytes(),"foobarbazbub".getBytes(),{(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa},{(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa},{(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa,(byte)0xaa},{(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55},{(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55},{(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55,(byte)0x55},"1".getBytes(),"22".getBytes(),"333".getBytes(),"4444".getBytes(),"55555".getBytes(),"666666".getBytes(),"7777777".getBytes(),"88888888".getBytes()};
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    for (    byte[] val : vals) {
      int expectedLen=OrderedBytes.blobVarEncodedLength(val.length);
      byte[] a=new byte[expectedLen + 3];
      PositionedByteRange buf1=new SimplePositionedMutableByteRange(a,1,expectedLen + 1);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",expectedLen,OrderedBytes.encodeBlobVar(buf1,val,ord));
      assertEquals("Broken test: serialization did not consume entire buffer.",buf1.getLength(),buf1.getPosition());
      assertEquals("Surprising serialized length.",expectedLen,buf1.getPosition() - 1);
      assertEquals("Buffer underflow.",0,a[0]);
      assertEquals("Buffer underflow.",0,a[1]);
      assertEquals("Buffer overflow.",0,a[a.length - 1]);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",expectedLen,OrderedBytes.skip(buf1));
      assertEquals("Did not skip enough bytes.",expectedLen,buf1.getPosition() - 1);
      buf1.setPosition(1);
      assertArrayEquals("Deserialization failed.",val,OrderedBytes.decodeBlobVar(buf1));
      assertEquals("Did not consume enough bytes.",expectedLen,buf1.getPosition() - 1);
    }
  }
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    byte[][] encoded=new byte[vals.length][];
    PositionedByteRange pbr=new SimplePositionedMutableByteRange();
    for (int i=0; i < vals.length; i++) {
      encoded[i]=new byte[OrderedBytes.blobVarEncodedLength(vals[i].length)];
      OrderedBytes.encodeBlobVar(pbr.set(encoded[i]),vals[i],ord);
    }
    Arrays.sort(encoded,Bytes.BYTES_COMPARATOR);
    byte[][] sortedVals=Arrays.copyOf(vals,vals.length);
    if (ord == Order.ASCENDING)     Arrays.sort(sortedVals,Bytes.BYTES_COMPARATOR);
 else     Arrays.sort(sortedVals,Collections.reverseOrder(Bytes.BYTES_COMPARATOR));
    for (int i=0; i < sortedVals.length; i++) {
      pbr.set(encoded[i]);
      byte[] decoded=OrderedBytes.decodeBlobVar(pbr);
      assertArrayEquals(String.format("Encoded representations do not preserve natural order: <%s>, <%s>, %s",Arrays.toString(sortedVals[i]),Arrays.toString(decoded),ord),sortedVals[i],decoded);
    }
  }
}

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test float64 encoding.
 */
@Test public void testFloat64(){
  Double[] vals={Double.MIN_VALUE,Double.MIN_VALUE + 1.0,0.0,Double.MAX_VALUE / 2.0,Double.MAX_VALUE};
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    for (int i=0; i < vals.length; i++) {
      byte[] a=new byte[9 + 3];
      PositionedByteRange buf1=new SimplePositionedMutableByteRange(a,1,9 + 1);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",9,OrderedBytes.encodeFloat64(buf1,vals[i],ord));
      assertEquals("Broken test: serialization did not consume entire buffer.",buf1.getLength(),buf1.getPosition());
      assertEquals("Surprising serialized length.",9,buf1.getPosition() - 1);
      assertEquals("Buffer underflow.",0,a[0]);
      assertEquals("Buffer underflow.",0,a[1]);
      assertEquals("Buffer overflow.",0,a[a.length - 1]);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",9,OrderedBytes.skip(buf1));
      assertEquals("Did not skip enough bytes.",9,buf1.getPosition() - 1);
      buf1.setPosition(1);
      assertEquals("Deserialization failed.",Double.doubleToLongBits(vals[i].doubleValue()),Double.doubleToLongBits(OrderedBytes.decodeFloat64(buf1)));
      assertEquals("Did not consume enough bytes.",9,buf1.getPosition() - 1);
    }
  }
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    byte[][] encoded=new byte[vals.length][9];
    PositionedByteRange pbr=new SimplePositionedMutableByteRange();
    for (int i=0; i < vals.length; i++) {
      OrderedBytes.encodeFloat64(pbr.set(encoded[i]),vals[i],ord);
    }
    Arrays.sort(encoded,Bytes.BYTES_COMPARATOR);
    Double[] sortedVals=Arrays.copyOf(vals,vals.length);
    if (ord == Order.ASCENDING)     Arrays.sort(sortedVals);
 else     Arrays.sort(sortedVals,Collections.reverseOrder());
    for (int i=0; i < sortedVals.length; i++) {
      double decoded=OrderedBytes.decodeFloat64(pbr.set(encoded[i]));
      assertEquals(String.format("Encoded representations do not preserve natural order: <%s>, <%s>, %s",sortedVals[i],decoded,ord),Double.doubleToLongBits(sortedVals[i].doubleValue()),Double.doubleToLongBits(decoded));
    }
  }
}

</code></pre>

<br>
<pre class="type-11 type-5 type-17 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Assert invalid input byte[] are rejected by BlobCopy
 */
@Test(expected=IllegalArgumentException.class) public void testBlobCopyNoZeroBytes(){
  byte[] val={0x01,0x02,0x00,0x03};
  byte[] ascExpected={0x38,0x01,0x02,0x00,0x03};
  PositionedByteRange buf=new SimplePositionedMutableByteRange(val.length + 1);
  OrderedBytes.encodeBlobCopy(buf,val,Order.ASCENDING);
  assertArrayEquals(ascExpected,buf.getBytes());
  buf.set(val.length + 2);
  OrderedBytes.encodeBlobCopy(buf,val,Order.DESCENDING);
  fail("test should never get here.");
}

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test real encoding. Example input values come from reference wiki page.
 */
@Test public void testNumericReal(){
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    for (int i=0; i < D_VALS.length; i++) {
      byte[] a=new byte[D_LENGTHS[i] + 3];
      PositionedByteRange buf1=new SimplePositionedMutableByteRange(a,1,D_LENGTHS[i] + 1);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",D_LENGTHS[i],OrderedBytes.encodeNumeric(buf1,D_VALS[i],ord));
      assertEquals("Broken test: serialization did not consume entire buffer.",buf1.getLength(),buf1.getPosition());
      assertEquals("Surprising serialized length.",D_LENGTHS[i],buf1.getPosition() - 1);
      assertEquals("Buffer underflow.",0,a[0]);
      assertEquals("Buffer underflow.",0,a[1]);
      assertEquals("Buffer overflow.",0,a[a.length - 1]);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",D_LENGTHS[i],OrderedBytes.skip(buf1));
      assertEquals("Did not skip enough bytes.",D_LENGTHS[i],buf1.getPosition() - 1);
      buf1.setPosition(1);
      assertEquals("Deserialization failed.",D_VALS[i].doubleValue(),OrderedBytes.decodeNumericAsDouble(buf1),MIN_EPSILON);
      assertEquals("Did not consume enough bytes.",D_LENGTHS[i],buf1.getPosition() - 1);
    }
  }
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    byte[][] encoded=new byte[D_VALS.length][];
    PositionedByteRange pbr=new SimplePositionedMutableByteRange();
    for (int i=0; i < D_VALS.length; i++) {
      encoded[i]=new byte[D_LENGTHS[i]];
      OrderedBytes.encodeNumeric(pbr.set(encoded[i]),D_VALS[i],ord);
    }
    Arrays.sort(encoded,Bytes.BYTES_COMPARATOR);
    Double[] sortedVals=Arrays.copyOf(D_VALS,D_VALS.length);
    if (ord == Order.ASCENDING)     Arrays.sort(sortedVals);
 else     Arrays.sort(sortedVals,Collections.reverseOrder());
    for (int i=0; i < sortedVals.length; i++) {
      pbr.set(encoded[i]);
      double decoded=OrderedBytes.decodeNumericAsDouble(pbr);
      assertEquals(String.format("Encoded representations do not preserve natural order: <%s>, <%s>, %s",sortedVals[i],decoded,ord),sortedVals[i].doubleValue(),decoded,MIN_EPSILON);
    }
  }
}

</code></pre>

<br>
<pre class="type-4 type-9 type-7 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * Test float32 encoding.
 */
@Test public void testFloat32(){
  Float[] vals={Float.MIN_VALUE,Float.MIN_VALUE + 1.0f,0.0f,Float.MAX_VALUE / 2.0f,Float.MAX_VALUE};
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    for (int i=0; i < vals.length; i++) {
      byte[] a=new byte[5 + 3];
      PositionedByteRange buf1=new SimplePositionedMutableByteRange(a,1,5 + 1);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",5,OrderedBytes.encodeFloat32(buf1,vals[i],ord));
      assertEquals("Broken test: serialization did not consume entire buffer.",buf1.getLength(),buf1.getPosition());
      assertEquals("Surprising serialized length.",5,buf1.getPosition() - 1);
      assertEquals("Buffer underflow.",0,a[0]);
      assertEquals("Buffer underflow.",0,a[1]);
      assertEquals("Buffer overflow.",0,a[a.length - 1]);
      buf1.setPosition(1);
      assertEquals("Surprising return value.",5,OrderedBytes.skip(buf1));
      assertEquals("Did not skip enough bytes.",5,buf1.getPosition() - 1);
      buf1.setPosition(1);
      assertEquals("Deserialization failed.",Float.floatToIntBits(vals[i].floatValue()),Float.floatToIntBits(OrderedBytes.decodeFloat32(buf1)));
      assertEquals("Did not consume enough bytes.",5,buf1.getPosition() - 1);
    }
  }
  for (  Order ord : new Order[]{Order.ASCENDING,Order.DESCENDING}) {
    byte[][] encoded=new byte[vals.length][5];
    PositionedByteRange pbr=new SimplePositionedMutableByteRange();
    for (int i=0; i < vals.length; i++) {
      OrderedBytes.encodeFloat32(pbr.set(encoded[i]),vals[i],ord);
    }
    Arrays.sort(encoded,Bytes.BYTES_COMPARATOR);
    Float[] sortedVals=Arrays.copyOf(vals,vals.length);
    if (ord == Order.ASCENDING)     Arrays.sort(sortedVals);
 else     Arrays.sort(sortedVals,Collections.reverseOrder());
    for (int i=0; i < sortedVals.length; i++) {
      float decoded=OrderedBytes.decodeFloat32(pbr.set(encoded[i]));
      assertEquals(String.format("Encoded representations do not preserve natural order: <%s>, <%s>, %s",sortedVals[i],decoded,ord),Float.floatToIntBits(sortedVals[i].floatValue()),Float.floatToIntBits(decoded));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.TestRegionSplitCalculator </h4><pre class="type-4 type-8 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBigRanges(){
  SimpleRange ai=new SimpleRange(Bytes.toBytes("A"),Bytes.toBytes("I"));
  SimpleRange ae=new SimpleRange(Bytes.toBytes("A"),Bytes.toBytes("E"));
  SimpleRange ac=new SimpleRange(Bytes.toBytes("A"),Bytes.toBytes("C"));
  Collection<SimpleRange> bigOverlap=new ArrayList<SimpleRange>();
  bigOverlap.add(new SimpleRange(Bytes.toBytes("A"),Bytes.toBytes("E")));
  bigOverlap.add(new SimpleRange(Bytes.toBytes("A"),Bytes.toBytes("C")));
  bigOverlap.add(new SimpleRange(Bytes.toBytes("A"),Bytes.toBytes("B")));
  bigOverlap.add(new SimpleRange(Bytes.toBytes("B"),Bytes.toBytes("C")));
  bigOverlap.add(new SimpleRange(Bytes.toBytes("E"),Bytes.toBytes("H")));
  bigOverlap.add(ai);
  bigOverlap.add(ae);
  bigOverlap.add(ac);
  List<SimpleRange> bigRanges=RegionSplitCalculator.findBigRanges(bigOverlap,1);
  assertEquals(1,bigRanges.size());
  assertEquals(ai,bigRanges.get(0));
  bigRanges=RegionSplitCalculator.findBigRanges(bigOverlap,3);
  assertEquals(3,bigRanges.size());
  assertEquals(ai,bigRanges.get(0));
  SimpleRange r1=bigRanges.get(1);
  SimpleRange r2=bigRanges.get(2);
  assertEquals("A",Bytes.toString(r1.start));
  assertEquals("A",Bytes.toString(r2.start));
  String r1e=Bytes.toString(r1.end);
  String r2e=Bytes.toString(r2.end);
  assertTrue((r1e.equals("C") && r2e.equals("E")) || (r1e.equals("E") && r2e.equals("C")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.util.vint.TestVLongTool </h4><pre class="type-4 type-9 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testRoundTrips(){
  Random random=new Random();
  for (int i=0; i < 10000; ++i) {
    long value=RandomNumberUtils.nextPositiveLong(random);
    byte[] bytes=UVLongTool.getBytes(value);
    long roundTripped=UVLongTool.getLong(bytes);
    Assert.assertEquals(value,roundTripped);
    int calculatedNumBytes=UVLongTool.numBytes(value);
    int actualNumBytes=bytes.length;
    Assert.assertEquals(actualNumBytes,calculatedNumBytes);
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testFromBytesOffset(){
  Assert.assertEquals(Long.MAX_VALUE,UVLongTool.getLong(new SingleByteBuff(ByteBuffer.wrap(UVLongTool.MAX_VALUE_BYTES)),0));
  long ms=1318966363481L;
  byte[] bytes=UVLongTool.getBytes(ms);
  long roundTripped=UVLongTool.getLong(new SingleByteBuff(ByteBuffer.wrap(bytes)),0);
  Assert.assertEquals(ms,roundTripped);
  int calculatedNumBytes=UVLongTool.numBytes(ms);
  int actualNumBytes=bytes.length;
  Assert.assertEquals(actualNumBytes,calculatedNumBytes);
  byte[] shiftedBytes=new byte[1000];
  int shift=33;
  System.arraycopy(bytes,0,shiftedBytes,shift,bytes.length);
  long shiftedRoundTrip=UVLongTool.getLong(new SingleByteBuff(ByteBuffer.wrap(shiftedBytes)),shift);
  Assert.assertEquals(ms,shiftedRoundTrip);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.wal.TestWALMethods </h4><pre class="type-7 type-8 type-16 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEntrySink() throws Exception {
  Configuration conf=new Configuration();
  RecoveryMode mode=(conf.getBoolean(HConstants.DISTRIBUTED_LOG_REPLAY_KEY,false) ? RecoveryMode.LOG_REPLAY : RecoveryMode.LOG_SPLITTING);
  EntryBuffers sink=new EntryBuffers(new PipelineController(),1 * 1024 * 1024);
  for (int i=0; i < 1000; i++) {
    WAL.Entry entry=createTestLogEntry(i);
    sink.appendEntry(entry);
  }
  assertTrue(sink.totalBuffered > 0);
  long amountInChunk=sink.totalBuffered;
  RegionEntryBuffer chunk=sink.getChunkToWrite();
  assertEquals(chunk.heapSize(),amountInChunk);
  assertTrue(sink.isRegionCurrentlyWriting(TEST_REGION));
  for (int i=0; i < 500; i++) {
    WAL.Entry entry=createTestLogEntry(i);
    sink.appendEntry(entry);
  }
  assertNull(sink.getChunkToWrite());
  sink.doneWriting(chunk);
  RegionEntryBuffer chunk2=sink.getChunkToWrite();
  assertNotNull(chunk2);
  assertNotSame(chunk,chunk2);
  long amountInChunk2=sink.totalBuffered;
  assertTrue(amountInChunk2 < amountInChunk);
  sink.doneWriting(chunk2);
  assertEquals(0,sink.totalBuffered);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.zookeeper.TestZKMulti </h4><pre class="type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test(timeout=60000) public void testRunSequentialOnMultiFailure() throws Exception {
  String path1=ZKUtil.joinZNode(zkw.baseZNode,"runSequential1");
  String path2=ZKUtil.joinZNode(zkw.baseZNode,"runSequential2");
  String path3=ZKUtil.joinZNode(zkw.baseZNode,"runSequential3");
  String path4=ZKUtil.joinZNode(zkw.baseZNode,"runSequential4");
  LinkedList<ZKUtilOp> ops=new LinkedList<ZKUtilOp>();
  ops.add(ZKUtilOp.createAndFailSilent(path1,Bytes.toBytes(path1)));
  ops.add(ZKUtilOp.createAndFailSilent(path2,Bytes.toBytes(path2)));
  ZKUtil.multiOrSequential(zkw,ops,false);
  ops=new LinkedList<ZKUtilOp>();
  ops.add(ZKUtilOp.setData(path1,Bytes.add(Bytes.toBytes(path1),Bytes.toBytes(path1))));
  ops.add(ZKUtilOp.deleteNodeFailSilent(path2));
  ops.add(ZKUtilOp.deleteNodeFailSilent(path3));
  ops.add(ZKUtilOp.createAndFailSilent(path4,Bytes.add(Bytes.toBytes(path4),Bytes.toBytes(path4))));
  ZKUtil.multiOrSequential(zkw,ops,true);
  assertTrue(Bytes.equals(ZKUtil.getData(zkw,path1),Bytes.add(Bytes.toBytes(path1),Bytes.toBytes(path1))));
  assertTrue(ZKUtil.checkExists(zkw,path2) == -1);
  assertTrue(ZKUtil.checkExists(zkw,path3) == -1);
  assertFalse(ZKUtil.checkExists(zkw,path4) == -1);
}

</code></pre>

<br>
<pre class="type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test(timeout=60000) public void testSingleFailureInMulti() throws Exception {
  String pathA=ZKUtil.joinZNode(zkw.baseZNode,"testSingleFailureInMultiA");
  String pathB=ZKUtil.joinZNode(zkw.baseZNode,"testSingleFailureInMultiB");
  String pathC=ZKUtil.joinZNode(zkw.baseZNode,"testSingleFailureInMultiC");
  LinkedList<ZKUtilOp> ops=new LinkedList<ZKUtilOp>();
  ops.add(ZKUtilOp.createAndFailSilent(pathA,Bytes.toBytes(pathA)));
  ops.add(ZKUtilOp.createAndFailSilent(pathB,Bytes.toBytes(pathB)));
  ops.add(ZKUtilOp.deleteNodeFailSilent(pathC));
  boolean caughtNoNode=false;
  try {
    ZKUtil.multiOrSequential(zkw,ops,false);
  }
 catch (  KeeperException.NoNodeException nne) {
    caughtNoNode=true;
  }
  assertTrue(caughtNoNode);
  assertTrue(ZKUtil.checkExists(zkw,pathA) == -1);
  assertTrue(ZKUtil.checkExists(zkw,pathB) == -1);
  assertTrue(ZKUtil.checkExists(zkw,pathC) == -1);
}

</code></pre>

<br>
<pre class="type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test(timeout=60000) public void testComplexMulti() throws Exception {
  String path1=ZKUtil.joinZNode(zkw.baseZNode,"testComplexMulti1");
  String path2=ZKUtil.joinZNode(zkw.baseZNode,"testComplexMulti2");
  String path3=ZKUtil.joinZNode(zkw.baseZNode,"testComplexMulti3");
  String path4=ZKUtil.joinZNode(zkw.baseZNode,"testComplexMulti4");
  String path5=ZKUtil.joinZNode(zkw.baseZNode,"testComplexMulti5");
  String path6=ZKUtil.joinZNode(zkw.baseZNode,"testComplexMulti6");
  LinkedList<ZKUtilOp> create4Nodes=new LinkedList<ZKUtilOp>();
  create4Nodes.add(ZKUtilOp.createAndFailSilent(path1,Bytes.toBytes(path1)));
  create4Nodes.add(ZKUtilOp.createAndFailSilent(path2,Bytes.toBytes(path2)));
  create4Nodes.add(ZKUtilOp.createAndFailSilent(path3,Bytes.toBytes(path3)));
  create4Nodes.add(ZKUtilOp.createAndFailSilent(path4,Bytes.toBytes(path4)));
  ZKUtil.multiOrSequential(zkw,create4Nodes,false);
  assertTrue(Bytes.equals(ZKUtil.getData(zkw,path1),Bytes.toBytes(path1)));
  assertTrue(Bytes.equals(ZKUtil.getData(zkw,path2),Bytes.toBytes(path2)));
  assertTrue(Bytes.equals(ZKUtil.getData(zkw,path3),Bytes.toBytes(path3)));
  assertTrue(Bytes.equals(ZKUtil.getData(zkw,path4),Bytes.toBytes(path4)));
  LinkedList<ZKUtilOp> ops=new LinkedList<ZKUtilOp>();
  ops.add(ZKUtilOp.setData(path1,Bytes.add(Bytes.toBytes(path1),Bytes.toBytes(path1))));
  ops.add(ZKUtilOp.setData(path2,Bytes.add(Bytes.toBytes(path2),Bytes.toBytes(path2))));
  ops.add(ZKUtilOp.deleteNodeFailSilent(path3));
  ops.add(ZKUtilOp.deleteNodeFailSilent(path4));
  ops.add(ZKUtilOp.createAndFailSilent(path5,Bytes.toBytes(path5)));
  ops.add(ZKUtilOp.createAndFailSilent(path6,Bytes.toBytes(path6)));
  ZKUtil.multiOrSequential(zkw,ops,false);
  assertTrue(Bytes.equals(ZKUtil.getData(zkw,path1),Bytes.add(Bytes.toBytes(path1),Bytes.toBytes(path1))));
  assertTrue(Bytes.equals(ZKUtil.getData(zkw,path2),Bytes.add(Bytes.toBytes(path2),Bytes.toBytes(path2))));
  assertTrue(ZKUtil.checkExists(zkw,path3) == -1);
  assertTrue(ZKUtil.checkExists(zkw,path4) == -1);
  assertTrue(Bytes.equals(ZKUtil.getData(zkw,path5),Bytes.toBytes(path5)));
  assertTrue(Bytes.equals(ZKUtil.getData(zkw,path6),Bytes.toBytes(path6)));
}

</code></pre>

<br>
<pre class="type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test(timeout=60000) public void testMultiFailure() throws Exception {
  String pathX=ZKUtil.joinZNode(zkw.baseZNode,"testMultiFailureX");
  String pathY=ZKUtil.joinZNode(zkw.baseZNode,"testMultiFailureY");
  String pathZ=ZKUtil.joinZNode(zkw.baseZNode,"testMultiFailureZ");
  LinkedList<ZKUtilOp> ops=new LinkedList<ZKUtilOp>();
  ops.add(ZKUtilOp.createAndFailSilent(pathX,Bytes.toBytes(pathX)));
  ZKUtil.multiOrSequential(zkw,ops,false);
  String pathV=ZKUtil.joinZNode(zkw.baseZNode,"testMultiFailureV");
  String pathW=ZKUtil.joinZNode(zkw.baseZNode,"testMultiFailureW");
  ops=new LinkedList<ZKUtilOp>();
  ops.add(ZKUtilOp.createAndFailSilent(pathX,Bytes.toBytes(pathX)));
  ops.add(ZKUtilOp.setData(pathY,Bytes.toBytes(pathY)));
  ops.add(ZKUtilOp.deleteNodeFailSilent(pathZ));
  ops.add(ZKUtilOp.createAndFailSilent(pathX,Bytes.toBytes(pathV)));
  ops.add(ZKUtilOp.createAndFailSilent(pathX,Bytes.toBytes(pathW)));
  boolean caughtNodeExists=false;
  try {
    ZKUtil.multiOrSequential(zkw,ops,false);
  }
 catch (  KeeperException.NodeExistsException nee) {
    caughtNodeExists=true;
  }
  assertTrue(caughtNodeExists);
  assertFalse(ZKUtil.checkExists(zkw,pathX) == -1);
  assertTrue(ZKUtil.checkExists(zkw,pathY) == -1);
  assertTrue(ZKUtil.checkExists(zkw,pathZ) == -1);
  assertTrue(ZKUtil.checkExists(zkw,pathW) == -1);
  assertTrue(ZKUtil.checkExists(zkw,pathV) == -1);
  ops=new LinkedList<ZKUtilOp>();
  ops.add(ZKUtilOp.setData(pathY,Bytes.toBytes(pathY)));
  ops.add(ZKUtilOp.createAndFailSilent(pathX,Bytes.toBytes(pathX)));
  boolean caughtNoNode=false;
  try {
    ZKUtil.multiOrSequential(zkw,ops,false);
  }
 catch (  KeeperException.NoNodeException nne) {
    caughtNoNode=true;
  }
  assertTrue(caughtNoNode);
  assertFalse(ZKUtil.checkExists(zkw,pathX) == -1);
  assertTrue(ZKUtil.checkExists(zkw,pathY) == -1);
  assertTrue(ZKUtil.checkExists(zkw,pathZ) == -1);
  assertTrue(ZKUtil.checkExists(zkw,pathW) == -1);
  assertTrue(ZKUtil.checkExists(zkw,pathV) == -1);
}

</code></pre>

<br>
<pre class="type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test(timeout=60000) public void testSimpleMulti() throws Exception {
  ZKUtil.multiOrSequential(zkw,null,false);
  ZKUtil.multiOrSequential(zkw,new LinkedList<ZKUtilOp>(),false);
  String path=ZKUtil.joinZNode(zkw.baseZNode,"testSimpleMulti");
  LinkedList<ZKUtilOp> singleCreate=new LinkedList<ZKUtilOp>();
  singleCreate.add(ZKUtilOp.createAndFailSilent(path,new byte[0]));
  ZKUtil.multiOrSequential(zkw,singleCreate,false);
  assertTrue(ZKUtil.checkExists(zkw,path) != -1);
  LinkedList<ZKUtilOp> singleSetData=new LinkedList<ZKUtilOp>();
  byte[] data=Bytes.toBytes("foobar");
  singleSetData.add(ZKUtilOp.setData(path,data));
  ZKUtil.multiOrSequential(zkw,singleSetData,false);
  assertTrue(Bytes.equals(ZKUtil.getData(zkw,path),data));
  LinkedList<ZKUtilOp> singleDelete=new LinkedList<ZKUtilOp>();
  singleDelete.add(ZKUtilOp.deleteNodeFailSilent(path));
  ZKUtil.multiOrSequential(zkw,singleDelete,false);
  assertTrue(ZKUtil.checkExists(zkw,path) == -1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.zookeeper.TestZooKeeperNodeTracker </h4><pre class="type-4 type-7 type-8 type-13 type-5 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNodeTracker() throws Exception {
  Abortable abortable=new StubAbortable();
  ZooKeeperWatcher zk=new ZooKeeperWatcher(TEST_UTIL.getConfiguration(),"testNodeTracker",abortable);
  ZKUtil.createAndFailSilent(zk,zk.baseZNode);
  final String node=ZKUtil.joinZNode(zk.baseZNode,new Long(rand.nextLong()).toString());
  final byte[] dataOne=Bytes.toBytes("dataOne");
  final byte[] dataTwo=Bytes.toBytes("dataTwo");
  TestTracker localTracker=new TestTracker(zk,node,abortable);
  localTracker.start();
  zk.registerListener(localTracker);
  assertNull(localTracker.getData(false));
  WaitToGetDataThread thread=new WaitToGetDataThread(zk,node);
  thread.start();
  assertFalse(thread.hasData);
  TestTracker secondTracker=new TestTracker(zk,node,null);
  secondTracker.start();
  zk.registerListener(secondTracker);
  TestingZKListener zkListener=new TestingZKListener(zk,node);
  zk.registerListener(zkListener);
  assertEquals(0,zkListener.createdLock.availablePermits());
  final ZooKeeper zkconn=new ZooKeeper(ZKConfig.getZKQuorumServersString(TEST_UTIL.getConfiguration()),60000,new StubWatcher());
  zkconn.create(node,dataOne,Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  zkListener.waitForCreation();
  thread.join();
  assertNotNull(localTracker.getData(false));
  assertNotNull(localTracker.blockUntilAvailable());
  assertTrue(Bytes.equals(localTracker.getData(false),dataOne));
  assertTrue(thread.hasData);
  assertTrue(Bytes.equals(thread.tracker.getData(false),dataOne));
  LOG.info("Successfully got data one");
  assertNotNull(secondTracker.getData(false));
  assertNotNull(secondTracker.blockUntilAvailable());
  assertTrue(Bytes.equals(secondTracker.getData(false),dataOne));
  LOG.info("Successfully got data one with the second tracker");
  zkconn.delete(node,-1);
  zkListener.waitForDeletion();
  TestTracker threadTracker=thread.tracker;
  thread=new WaitToGetDataThread(zk,node,threadTracker);
  thread.start();
  assertFalse(thread.hasData);
  assertNull(secondTracker.getData(false));
  assertNull(localTracker.getData(false));
  LOG.info("Successfully made unavailable");
  zkconn.create(node,dataTwo,Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  zkListener.waitForCreation();
  thread.join();
  assertNotNull(localTracker.getData(false));
  assertNotNull(localTracker.blockUntilAvailable());
  assertTrue(Bytes.equals(localTracker.getData(false),dataTwo));
  assertNotNull(secondTracker.getData(false));
  assertNotNull(secondTracker.blockUntilAvailable());
  assertTrue(Bytes.equals(secondTracker.getData(false),dataTwo));
  assertTrue(thread.hasData);
  assertTrue(Bytes.equals(thread.tracker.getData(false),dataTwo));
  LOG.info("Successfully got data two on all trackers and threads");
  zkconn.setData(node,dataOne,-1);
  zkListener.waitForDataChange();
  assertNotNull(localTracker.getData(false));
  assertNotNull(localTracker.blockUntilAvailable());
  assertTrue(Bytes.equals(localTracker.getData(false),dataOne));
  assertNotNull(secondTracker.getData(false));
  assertNotNull(secondTracker.blockUntilAvailable());
  assertTrue(Bytes.equals(secondTracker.getData(false),dataOne));
  assertTrue(thread.hasData);
  assertTrue(Bytes.equals(thread.tracker.getData(false),dataOne));
  LOG.info("Successfully got data one following a data change on all trackers and threads");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hbase.zookeeper.lock.TestZKInterProcessReadWriteLock </h4><pre class="type-4 type-7 type-8 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test(timeout=60000) public void testMultipleClients() throws Exception {
  final String testName="testMultipleClients";
  ZooKeeperWatcher zkWatcher1=new ZooKeeperWatcher(conf,"testMultipleClients-1",null);
  ZooKeeperWatcher zkWatcher2=new ZooKeeperWatcher(conf,"testMultipleClients-2",null);
  String znode=ZKUtil.joinZNode(zkWatcher1.tableLockZNode,testName);
  ZKInterProcessReadWriteLock clientLock1=new ZKInterProcessReadWriteLock(zkWatcher1,znode,null);
  ZKInterProcessReadWriteLock clientLock2=new ZKInterProcessReadWriteLock(zkWatcher2,znode,null);
  InterProcessLock lock1=clientLock1.readLock(Bytes.toBytes("client1"));
  lock1.acquire();
  InterProcessLock lock2=clientLock2.writeLock(Bytes.toBytes("client2"));
  assertFalse(lock2.tryAcquire(1000));
  lock1.release();
  assertTrue(lock2.tryAcquire(5000));
  lock2.release();
  zkWatcher1.close();
  zkWatcher2.close();
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
