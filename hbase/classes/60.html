<h3 style="margin:0px">Class: org.apache.hadoop.hbase.client.TestAdmin2 (29 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(13)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(11)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(8)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(8)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(5)</kbd></button>&nbsp;<button id="17"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('17')" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution"><kbd id="tag-17"class="label-info"style="display: inline-block;font-size:7pt" >ExceptionVerifier&nbsp;(4)</kbd></button>&nbsp;<button id="11"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('11')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-11"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(4)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Releases resources used by the test cases"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >TestCleaner&nbsp;(2)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Allocates resources before the execution of the test cases"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >TestInitializer&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-17 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Can't disable a table if the table isn't in enabled state
 * @throws IOException
 */
@Test(expected=TableNotEnabledException.class,timeout=300000) public void testTableNotEnabledExceptionWithATable() throws IOException {
  final TableName name=TableName.valueOf("testTableNotEnabledExceptionWithATable");
  TEST_UTIL.createTable(name,HConstants.CATALOG_FAMILY).close();
  this.admin.disableTable(name);
  this.admin.disableTable(name);
}

</code></pre>

<pre class="type-4 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test(timeout=300000) public void testGetRegion() throws Exception {
  HBaseAdmin rawAdmin=TEST_UTIL.getHBaseAdmin();
  final TableName tableName=TableName.valueOf("testGetRegion");
  LOG.info("Started " + tableName);
  Table t=TEST_UTIL.createMultiRegionTable(tableName,HConstants.CATALOG_FAMILY);
  try (RegionLocator locator=TEST_UTIL.getConnection().getRegionLocator(tableName)){
    HRegionLocation regionLocation=locator.getRegionLocation(Bytes.toBytes("mmm"));
    HRegionInfo region=regionLocation.getRegionInfo();
    byte[] regionName=region.getRegionName();
    Pair<HRegionInfo,ServerName> pair=rawAdmin.getRegion(regionName);
    assertTrue(Bytes.equals(regionName,pair.getFirst().getRegionName()));
    pair=rawAdmin.getRegion(region.getEncodedNameAsBytes());
    assertTrue(Bytes.equals(regionName,pair.getFirst().getRegionName()));
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test for hadoop-1581 'HBASE: Unopenable tablename bug'.
 * @throws Exception
 */
@Test(timeout=300000) public void testTableNameClash() throws Exception {
  String name="testTableNameClash";
  HTableDescriptor htd1=new HTableDescriptor(TableName.valueOf(name + "SOMEUPPERCASE"));
  HTableDescriptor htd2=new HTableDescriptor(TableName.valueOf(name));
  htd1.addFamily(new HColumnDescriptor(HConstants.CATALOG_FAMILY));
  htd2.addFamily(new HColumnDescriptor(HConstants.CATALOG_FAMILY));
  admin.createTable(htd1);
  admin.createTable(htd2);
  TEST_UTIL.getConnection().getTable(htd2.getTableName()).close();
}

</code></pre>

<pre class="type-17 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * For HADOOP-2579
 * @throws IOException
 */
@Test(expected=TableExistsException.class,timeout=300000) public void testTableExistsExceptionWithATable() throws IOException {
  final TableName name=TableName.valueOf("testTableExistsExceptionWithATable");
  TEST_UTIL.createTable(name,HConstants.CATALOG_FAMILY).close();
  TEST_UTIL.createTable(name,HConstants.CATALOG_FAMILY);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test read only tables
 * @throws Exception
 */
@Test(timeout=300000) public void testReadOnlyTable() throws Exception {
  TableName name=TableName.valueOf("testReadOnlyTable");
  Table table=TEST_UTIL.createTable(name,HConstants.CATALOG_FAMILY);
  byte[] value=Bytes.toBytes("somedata");
  Put put=new Put(value);
  put.addColumn(HConstants.CATALOG_FAMILY,HConstants.CATALOG_FAMILY,value);
  table.put(put);
  table.close();
}

</code></pre>

<pre class="type-7 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * For HBASE-2556
 * @throws IOException
 */
@Test(timeout=300000) public void testGetTableRegions() throws IOException {
  final TableName tableName=TableName.valueOf("testGetTableRegions");
  int expectedRegions=10;
  byte[] startKey={1,1,1,1,1,1,1,1,1,1};
  byte[] endKey={9,9,9,9,9,9,9,9,9,9};
  HTableDescriptor desc=new HTableDescriptor(tableName);
  desc.addFamily(new HColumnDescriptor(HConstants.CATALOG_FAMILY));
  admin.createTable(desc,startKey,endKey,expectedRegions);
  List<HRegionInfo> RegionInfos=admin.getTableRegions(tableName);
  assertEquals("Tried to create " + expectedRegions + " regions "+ "but only found "+ RegionInfos.size(),expectedRegions,RegionInfos.size());
}

</code></pre>

<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
"></span><br>
@After public void tearDown() throws Exception {
  for (  HTableDescriptor htd : this.admin.listTables()) {
    TEST_UTIL.deleteTable(htd.getTableName());
  }
}

</code></pre>

<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
"></span><br>
@AfterClass public static void tearDownAfterClass() throws Exception {
  TEST_UTIL.shutdownMiniCluster();
}

</code></pre>

<pre class="type-4 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test(timeout=300000) public void testCloseRegionWhenEncodedRegionNameIsNotGiven() throws Exception {
  byte[] TABLENAME=Bytes.toBytes("TestHBACloseRegion4");
  createTableWithDefaultConf(TABLENAME);
  HRegionInfo info=null;
  HRegionServer rs=TEST_UTIL.getRSForFirstRegionInTable(TableName.valueOf(TABLENAME));
  List<HRegionInfo> onlineRegions=ProtobufUtil.getOnlineRegions(rs.getRSRpcServices());
  for (  HRegionInfo regionInfo : onlineRegions) {
    if (!regionInfo.isMetaTable()) {
      if (regionInfo.getRegionNameAsString().contains("TestHBACloseRegion4")) {
        info=regionInfo;
        try {
          admin.closeRegionWithEncodedRegionName(regionInfo.getRegionNameAsString(),rs.getServerName().getServerName());
        }
 catch (        NotServingRegionException nsre) {
        }
      }
    }
  }
  onlineRegions=ProtobufUtil.getOnlineRegions(rs.getRSRpcServices());
  assertTrue("The region should be present in online regions list.",onlineRegions.contains(info));
}

</code></pre>

<pre class="type-4 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test(timeout=30000) public void testAbortProcedureFail() throws Exception {
  Random randomGenerator=new Random();
  long procId=randomGenerator.nextLong();
  boolean abortResult=admin.abortProcedure(procId,true);
  assertFalse(abortResult);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * HMaster.createTable used to be kind of synchronous call
 * Thus creating of table with lots of regions can cause RPC timeout
 * After the fix to make createTable truly async, RPC timeout shouldn't be an
 * issue anymore
 * @throws Exception
 */
@Test(timeout=300000) public void testCreateTableRPCTimeOut() throws Exception {
  String name="testCreateTableRPCTimeOut";
  int oldTimeout=TEST_UTIL.getConfiguration().getInt(HConstants.HBASE_RPC_TIMEOUT_KEY,HConstants.DEFAULT_HBASE_RPC_TIMEOUT);
  TEST_UTIL.getConfiguration().setInt(HConstants.HBASE_RPC_TIMEOUT_KEY,1500);
  try {
    int expectedRegions=100;
    byte[] startKey={1,1,1,1,1,1,1,1,1,1};
    byte[] endKey={9,9,9,9,9,9,9,9,9,9};
    Admin hbaseadmin=TEST_UTIL.getHBaseAdmin();
    HTableDescriptor htd=new HTableDescriptor(TableName.valueOf(name));
    htd.addFamily(new HColumnDescriptor(HConstants.CATALOG_FAMILY));
    hbaseadmin.createTable(htd,startKey,endKey,expectedRegions);
  }
  finally {
    TEST_UTIL.getConfiguration().setInt(HConstants.HBASE_RPC_TIMEOUT_KEY,oldTimeout);
  }
}

</code></pre>

<pre class="type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test(timeout=300000) public void testDisableCatalogTable() throws Exception {
  try {
    this.admin.disableTable(TableName.META_TABLE_NAME);
    fail("Expected to throw ConstraintException");
  }
 catch (  ConstraintException e) {
  }
  HTableDescriptor htd=new HTableDescriptor(TableName.valueOf("testDisableCatalogTable".getBytes()));
  HColumnDescriptor hcd=new HColumnDescriptor("cf1".getBytes());
  htd.addFamily(hcd);
  TEST_UTIL.getHBaseAdmin().createTable(htd);
}

</code></pre>

<pre class="type-7 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=30000) public void testBalancer() throws Exception {
  boolean initialState=admin.isBalancerEnabled();
  boolean prevState=admin.setBalancerRunning(!initialState,true);
  assertEquals(initialState,prevState);
  assertEquals(!initialState,admin.isBalancerEnabled());
  prevState=admin.setBalancerRunning(initialState,true);
  assertEquals(!initialState,prevState);
  assertEquals(initialState,admin.isBalancerEnabled());
}

</code></pre>

<pre class="type-17 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * For HADOOP-2579
 * @throws IOException
 */
@Test(expected=TableNotFoundException.class,timeout=300000) public void testTableNotFoundExceptionWithoutAnyTables() throws IOException {
  TableName tableName=TableName.valueOf("testTableNotFoundExceptionWithoutAnyTables");
  Table ht=TEST_UTIL.getConnection().getTable(tableName);
  ht.get(new Get("e".getBytes()));
}

</code></pre>

<pre class="type-7 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=30000) public void testRegionNormalizer() throws Exception {
  boolean initialState=admin.isNormalizerEnabled();
  boolean prevState=admin.setNormalizerRunning(!initialState);
  assertEquals(initialState,prevState);
  assertEquals(!initialState,admin.isNormalizerEnabled());
  prevState=admin.setNormalizerRunning(initialState);
  assertEquals(!initialState,prevState);
  assertEquals(initialState,admin.isNormalizerEnabled());
}

</code></pre>

<pre class="type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test(timeout=300000) public void testIsEnabledOrDisabledOnUnknownTable() throws Exception {
  try {
    admin.isTableEnabled(TableName.valueOf("unkownTable"));
    fail("Test should fail if isTableEnabled called on unknown table.");
  }
 catch (  IOException e) {
  }
  try {
    admin.isTableDisabled(TableName.valueOf("unkownTable"));
    fail("Test should fail if isTableDisabled called on unknown table.");
  }
 catch (  IOException e) {
  }
}

</code></pre>

<pre class="type-4 type-7 type-8 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=300000) public void testMoveToPreviouslyAssignedRS() throws IOException, InterruptedException {
  MiniHBaseCluster cluster=TEST_UTIL.getHBaseCluster();
  HMaster master=cluster.getMaster();
  TableName tableName=TableName.valueOf("testMoveToPreviouslyAssignedRS");
  Admin localAdmin=createTable(tableName);
  List<HRegionInfo> tableRegions=localAdmin.getTableRegions(tableName);
  HRegionInfo hri=tableRegions.get(0);
  AssignmentManager am=master.getAssignmentManager();
  assertTrue("Region " + hri.getRegionNameAsString() + " should be assigned properly",am.waitForAssignment(hri));
  ServerName server=am.getRegionStates().getRegionServerOfRegion(hri);
  localAdmin.move(hri.getEncodedNameAsBytes(),Bytes.toBytes(server.getServerName()));
  assertEquals("Current region server and region server before move should be same.",server,am.getRegionStates().getRegionServerOfRegion(hri));
}

</code></pre>

<pre class="type-7 type-8 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=300000) public void testCreateBadTables() throws IOException {
  String msg=null;
  try {
    this.admin.createTable(new HTableDescriptor(TableName.META_TABLE_NAME));
  }
 catch (  TableExistsException e) {
    msg=e.toString();
  }
  assertTrue("Unexcepted exception message " + msg,msg != null && msg.startsWith(TableExistsException.class.getName()) && msg.contains(TableName.META_TABLE_NAME.getNameAsString()));
  final HTableDescriptor threadDesc=new HTableDescriptor(TableName.valueOf("threaded_testCreateBadTables"));
  threadDesc.addFamily(new HColumnDescriptor(HConstants.CATALOG_FAMILY));
  int count=10;
  Thread[] threads=new Thread[count];
  final AtomicInteger successes=new AtomicInteger(0);
  final AtomicInteger failures=new AtomicInteger(0);
  final Admin localAdmin=this.admin;
  for (int i=0; i < count; i++) {
    threads[i]=new Thread(Integer.toString(i)){
      @Override public void run(){
        try {
          localAdmin.createTable(threadDesc);
          successes.incrementAndGet();
        }
 catch (        TableExistsException e) {
          failures.incrementAndGet();
        }
catch (        IOException e) {
          throw new RuntimeException("Failed threaded create" + getName(),e);
        }
      }
    }
;
  }
  for (int i=0; i < count; i++) {
    threads[i].start();
  }
  for (int i=0; i < count; i++) {
    while (threads[i].isAlive()) {
      try {
        Thread.sleep(100);
      }
 catch (      InterruptedException e) {
      }
    }
  }
  assertEquals(1,successes.get());
  assertEquals(count - 1,failures.get());
}

</code></pre>

<pre class="type-4 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test(timeout=300000) public void testShouldCloseTheRegionBasedOnTheEncodedRegionName() throws Exception {
  TableName TABLENAME=TableName.valueOf("TestHBACloseRegion");
  createTableWithDefaultConf(TABLENAME);
  HRegionInfo info=null;
  HRegionServer rs=TEST_UTIL.getRSForFirstRegionInTable(TABLENAME);
  List<HRegionInfo> onlineRegions=ProtobufUtil.getOnlineRegions(rs.getRSRpcServices());
  for (  HRegionInfo regionInfo : onlineRegions) {
    if (!regionInfo.getTable().isSystemTable()) {
      info=regionInfo;
      admin.closeRegionWithEncodedRegionName(regionInfo.getEncodedName(),rs.getServerName().getServerName());
    }
  }
  boolean isInList=ProtobufUtil.getOnlineRegions(rs.getRSRpcServices()).contains(info);
  long timeout=System.currentTimeMillis() + 10000;
  while ((System.currentTimeMillis() < timeout) && (isInList)) {
    Thread.sleep(100);
    isInList=ProtobufUtil.getOnlineRegions(rs.getRSRpcServices()).contains(info);
  }
  assertFalse("The region should not be present in online regions list.",isInList);
}

</code></pre>

<pre class="type-4 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test(timeout=300000) public void testCloseRegionIfInvalidRegionNameIsPassed() throws Exception {
  byte[] TABLENAME=Bytes.toBytes("TestHBACloseRegion1");
  createTableWithDefaultConf(TABLENAME);
  HRegionInfo info=null;
  HRegionServer rs=TEST_UTIL.getRSForFirstRegionInTable(TableName.valueOf(TABLENAME));
  List<HRegionInfo> onlineRegions=ProtobufUtil.getOnlineRegions(rs.getRSRpcServices());
  for (  HRegionInfo regionInfo : onlineRegions) {
    if (!regionInfo.isMetaTable()) {
      if (regionInfo.getRegionNameAsString().contains("TestHBACloseRegion1")) {
        info=regionInfo;
        try {
          admin.closeRegionWithEncodedRegionName("sample",rs.getServerName().getServerName());
        }
 catch (        NotServingRegionException nsre) {
        }
      }
    }
  }
  onlineRegions=ProtobufUtil.getOnlineRegions(rs.getRSRpcServices());
  assertTrue("The region should be present in online regions list.",onlineRegions.contains(info));
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that user table names can contain '-' and '.' so long as they do not
 * start with same. HBASE-771
 * @throws IOException
 */
@Test(timeout=300000) public void testTableNames() throws IOException {
  byte[][] illegalNames=new byte[][]{Bytes.toBytes("-bad"),Bytes.toBytes(".bad")};
  for (  byte[] illegalName : illegalNames) {
    try {
      new HTableDescriptor(TableName.valueOf(illegalName));
      throw new IOException("Did not detect '" + Bytes.toString(illegalName) + "' as an illegal user table name");
    }
 catch (    IllegalArgumentException e) {
    }
  }
  byte[] legalName=Bytes.toBytes("g-oo.d");
  try {
    new HTableDescriptor(TableName.valueOf(legalName));
  }
 catch (  IllegalArgumentException e) {
    throw new IOException("Legal user table name: '" + Bytes.toString(legalName) + "' caused IllegalArgumentException: "+ e.getMessage());
  }
}

</code></pre>

<pre class="type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test(timeout=300000) public void testCloseRegionWhenServerNameIsNull() throws Exception {
  byte[] TABLENAME=Bytes.toBytes("TestHBACloseRegion3");
  createTableWithDefaultConf(TABLENAME);
  HRegionServer rs=TEST_UTIL.getRSForFirstRegionInTable(TableName.valueOf(TABLENAME));
  try {
    List<HRegionInfo> onlineRegions=ProtobufUtil.getOnlineRegions(rs.getRSRpcServices());
    for (    HRegionInfo regionInfo : onlineRegions) {
      if (!regionInfo.isMetaTable()) {
        if (regionInfo.getRegionNameAsString().contains("TestHBACloseRegion3")) {
          admin.closeRegionWithEncodedRegionName(regionInfo.getEncodedName(),null);
        }
      }
    }
    fail("The test should throw exception if the servername passed is null.");
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<pre class="type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test(timeout=300000) public void testListProcedures() throws Exception {
  ProcedureInfo[] procList=admin.listProcedures();
  assertTrue(procList.length >= 0);
}

</code></pre>

<pre class="type-17 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Can't enable a table if the table isn't in disabled state
 * @throws IOException
 */
@Test(expected=TableNotDisabledException.class,timeout=300000) public void testTableNotDisabledExceptionWithATable() throws IOException {
  final TableName name=TableName.valueOf("testTableNotDisabledExceptionWithATable");
  Table t=TEST_UTIL.createTable(name,HConstants.CATALOG_FAMILY);
  try {
    this.admin.enableTable(name);
  }
  finally {
    t.close();
  }
}

</code></pre>

<pre class="type-4 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test(timeout=300000) public void testCloseRegionThatFetchesTheHRIFromMeta() throws Exception {
  TableName TABLENAME=TableName.valueOf("TestHBACloseRegion2");
  createTableWithDefaultConf(TABLENAME);
  HRegionInfo info=null;
  HRegionServer rs=TEST_UTIL.getRSForFirstRegionInTable(TABLENAME);
  List<HRegionInfo> onlineRegions=ProtobufUtil.getOnlineRegions(rs.getRSRpcServices());
  for (  HRegionInfo regionInfo : onlineRegions) {
    if (!regionInfo.isMetaTable()) {
      if (regionInfo.getRegionNameAsString().contains("TestHBACloseRegion2")) {
        info=regionInfo;
        admin.closeRegion(regionInfo.getRegionNameAsString(),rs.getServerName().getServerName());
      }
    }
  }
  boolean isInList=ProtobufUtil.getOnlineRegions(rs.getRSRpcServices()).contains(info);
  long timeout=System.currentTimeMillis() + 10000;
  while ((System.currentTimeMillis() < timeout) && (isInList)) {
    Thread.sleep(100);
    isInList=ProtobufUtil.getOnlineRegions(rs.getRSRpcServices()).contains(info);
  }
  assertFalse("The region should not be present in online regions list.",isInList);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * Check that we have an exception if the cluster is not there.
 */
@Test(timeout=300000) public void testCheckHBaseAvailableWithoutCluster(){
  Configuration conf=new Configuration(TEST_UTIL.getConfiguration());
  conf.setInt(HConstants.ZOOKEEPER_CLIENT_PORT,conf.getInt(HConstants.ZOOKEEPER_CLIENT_PORT,9999) + 10);
  long start=System.currentTimeMillis();
  try {
    HBaseAdmin.checkHBaseAvailable(conf);
    assertTrue(false);
  }
 catch (  MasterNotRunningException ignored) {
  }
catch (  ZooKeeperConnectionException ignored) {
  }
catch (  ServiceException ignored) {
  }
catch (  IOException ignored) {
  }
  long end=System.currentTimeMillis();
  LOG.info("It took " + (end - start) + " ms to find out that"+ " HBase was not available");
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  this.admin=TEST_UTIL.getHBaseAdmin();
}

</code></pre>

<pre class="type-4 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test(timeout=300000) public void testWALRollWriting() throws Exception {
  setUpforLogRolling();
  String className=this.getClass().getName();
  StringBuilder v=new StringBuilder(className);
  while (v.length() < 1000) {
    v.append(className);
  }
  byte[] value=Bytes.toBytes(v.toString());
  HRegionServer regionServer=startAndWriteData(TableName.valueOf("TestLogRolling"),value);
  LOG.info("after writing there are " + DefaultWALProvider.getNumRolledLogFiles(regionServer.getWAL(null)) + " log files");
  for (  Region r : regionServer.getOnlineRegionsLocalContext()) {
    r.flush(true);
  }
  admin.rollWALWriter(regionServer.getServerName());
  int count=DefaultWALProvider.getNumRolledLogFiles(regionServer.getWAL(null));
  LOG.info("after flushing all regions and rolling logs there are " + count + " log files");
  assertTrue(("actual count: " + count),count <= 2);
}

</code></pre>

<pre class="type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test(timeout=300000) public void testCloseRegionWhenServerNameIsEmpty() throws Exception {
  byte[] TABLENAME=Bytes.toBytes("TestHBACloseRegionWhenServerNameIsEmpty");
  createTableWithDefaultConf(TABLENAME);
  HRegionServer rs=TEST_UTIL.getRSForFirstRegionInTable(TableName.valueOf(TABLENAME));
  try {
    List<HRegionInfo> onlineRegions=ProtobufUtil.getOnlineRegions(rs.getRSRpcServices());
    for (    HRegionInfo regionInfo : onlineRegions) {
      if (!regionInfo.isMetaTable()) {
        if (regionInfo.getRegionNameAsString().contains("TestHBACloseRegionWhenServerNameIsEmpty")) {
          admin.closeRegionWithEncodedRegionName(regionInfo.getEncodedName()," ");
        }
      }
    }
    fail("The test should throw exception if the servername passed is empty.");
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
