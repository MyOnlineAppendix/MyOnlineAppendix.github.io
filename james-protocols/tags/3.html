<h3><span class=" glyphicon glyphicon-tag"/>&nbspAPIUtilityVerifier</h3><kbd>Verifies values of objects/variables related to API calls (Java or TPL) </kbd><br><br><br><h4 style="margin:0px">Class: org.apache.james.imap.api.IdRangeTest </h4><pre class="type-3 type-2 type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNotMerge(){
  IdRange r=new IdRange(0,2);
  IdRange r2=new IdRange(4,5);
  IdRange r3=new IdRange(7,10);
  List<IdRange> ranges=new ArrayList<IdRange>();
  ranges.add(r);
  ranges.add(r2);
  ranges.add(r3);
  List<IdRange> merged=IdRange.mergeRanges(ranges);
  assertEquals(3,merged.size());
  Iterator<IdRange> rIt=merged.iterator();
  checkIdRange(r,rIt.next());
  checkIdRange(r2,rIt.next());
  checkIdRange(r3,rIt.next());
  assertFalse(rIt.hasNext());
}

</code></pre>

<br>
<pre class="type-3 type-2 type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMerge(){
  IdRange r=new IdRange(0,2);
  IdRange r2=new IdRange(1,4);
  IdRange r3=new IdRange(6,7);
  List<IdRange> ranges=new ArrayList<IdRange>();
  ranges.add(r);
  ranges.add(r2);
  ranges.add(r3);
  List<IdRange> merged=IdRange.mergeRanges(ranges);
  assertEquals(2,merged.size());
  Iterator<IdRange> rIt=merged.iterator();
  checkIdRange(new IdRange(0,4),rIt.next());
  checkIdRange(r3,rIt.next());
  assertFalse(rIt.hasNext());
}

</code></pre>

<br>
<pre class="type-3 type-2 type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMerge4(){
  IdRange r=new IdRange(0,1);
  IdRange r2=new IdRange(1,1);
  IdRange r3=new IdRange(2,2);
  List<IdRange> ranges=new ArrayList<IdRange>();
  ranges.add(r);
  ranges.add(r2);
  ranges.add(r3);
  List<IdRange> merged=IdRange.mergeRanges(ranges);
  assertEquals(1,merged.size());
  Iterator<IdRange> rIt=merged.iterator();
  checkIdRange(new IdRange(0,2),rIt.next());
  assertFalse(rIt.hasNext());
}

</code></pre>

<br>
<pre class="type-3 type-2 type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMerge3(){
  IdRange r=new IdRange(0,10);
  IdRange r2=new IdRange(1,4);
  IdRange r3=new IdRange(10,15);
  List<IdRange> ranges=new ArrayList<IdRange>();
  ranges.add(r);
  ranges.add(r2);
  ranges.add(r3);
  List<IdRange> merged=IdRange.mergeRanges(ranges);
  assertEquals(1,merged.size());
  Iterator<IdRange> rIt=merged.iterator();
  checkIdRange(new IdRange(0,15),rIt.next());
  assertFalse(rIt.hasNext());
}

</code></pre>

<br>
<pre class="type-3 type-2 type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMerge2(){
  IdRange r=new IdRange(0,10);
  IdRange r2=new IdRange(1,4);
  IdRange r3=new IdRange(5,7);
  List<IdRange> ranges=new ArrayList<IdRange>();
  ranges.add(r);
  ranges.add(r2);
  ranges.add(r3);
  List<IdRange> merged=IdRange.mergeRanges(ranges);
  assertEquals(1,merged.size());
  Iterator<IdRange> rIt=merged.iterator();
  checkIdRange(new IdRange(0,10),rIt.next());
  assertFalse(rIt.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.imap.decode.main.IdRangeParseTest </h4><pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test for https://issues.apache.org/jira/browse/IMAP-212
 * @throws DecodingException
 */
@Test public void testRangeInRandomOrder() throws DecodingException {
  int val1=1;
  int val2=3;
  IdRange[] ranges1=ranges(rangeAsString(val1,val2));
  assertEquals(1,ranges1.length);
  assertEquals(val1,ranges1[0].getLowVal());
  assertEquals(val2,ranges1[0].getHighVal());
  IdRange[] ranges2=ranges(rangeAsString(val2,val1));
  assertEquals(1,ranges2.length);
  assertEquals(val1,ranges2[0].getLowVal());
  assertEquals(val2,ranges2[0].getHighVal());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.imap.decode.parser.GetQuotaParserTest </h4><pre class="type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testQuotaParsing() throws DecodingException {
  GetQuotaCommandParser parser=new GetQuotaCommandParser();
  ImapCommand command=ImapCommand.anyStateCommand("Command");
  String commandString="quotaRoot \n";
  InputStream inputStream=new ByteArrayInputStream(commandString.getBytes());
  ImapRequestStreamLineReader lineReader=new ImapRequestStreamLineReader(inputStream,null);
  GetQuotaRequest request=(GetQuotaRequest)parser.decode(command,lineReader,"A003",null);
  GetQuotaRequest expected=new GetQuotaRequest("A003",command,"quotaRoot");
  assertEquals(expected.getQuotaRoot(),request.getQuotaRoot());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.imap.decode.parser.GetQuotaRootParserTest </h4><pre class="type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testQuotedMailbox() throws DecodingException {
  GetQuotaRootCommandParser parser=new GetQuotaRootCommandParser();
  ImapCommand command=ImapCommand.anyStateCommand("Command");
  String commandString="\"INBOX\" \n";
  InputStream inputStream=new ByteArrayInputStream(commandString.getBytes());
  ImapRequestStreamLineReader lineReader=new ImapRequestStreamLineReader(inputStream,null);
  GetQuotaRootRequest request=(GetQuotaRootRequest)parser.decode(command,lineReader,"A003",null);
  GetQuotaRootRequest expected=new GetQuotaRootRequest("A003",command,"INBOX");
  assertEquals(expected.getMailboxName(),request.getMailboxName());
}

</code></pre>

<br>
<pre class="type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNonQuotedMailbox() throws DecodingException {
  GetQuotaRootCommandParser parser=new GetQuotaRootCommandParser();
  ImapCommand command=ImapCommand.anyStateCommand("Command");
  String commandString="INBOX\n";
  InputStream inputStream=new ByteArrayInputStream(commandString.getBytes());
  ImapRequestStreamLineReader lineReader=new ImapRequestStreamLineReader(inputStream,null);
  GetQuotaRootRequest request=(GetQuotaRootRequest)parser.decode(command,lineReader,"A003",null);
  GetQuotaRootRequest expected=new GetQuotaRootRequest("A003",command,"INBOX");
  assertEquals(expected.getMailboxName(),request.getMailboxName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.imap.decode.parser.SearchCommandParserQuotedCharsetTest </h4><pre class="type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testShouldDecoderLengthyQuotedCharset() throws Exception {
  SearchKey key=SearchKey.buildBcc(LENGTHY_NON_ASCII_SEARCH_TERM);
  ImapRequestLineReader reader=new ImapRequestStreamLineReader(new ByteArrayInputStream(add(add(CHARSET,"BCC".getBytes("US-ASCII")),BYTES_QUOTED_UTF8_LENGTHY_NON_ASCII_SEARCH_TERM)),new ByteArrayOutputStream());
  final SearchKey searchKey=parser.searchKey(null,reader,null,true);
  assertEquals(key,searchKey);
}

</code></pre>

<br>
<pre class="type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testShouldDecoderQuotedCharset() throws Exception {
  SearchKey key=SearchKey.buildBcc(NON_ASCII_SEARCH_TERM);
  ImapRequestLineReader reader=new ImapRequestStreamLineReader(new ByteArrayInputStream(add(add(CHARSET,"BCC".getBytes("US-ASCII")),BYTES_QUOTED_UTF8_NON_ASCII_SEARCH_TERM)),new ByteArrayOutputStream());
  final SearchKey searchKey=parser.searchKey(null,reader,null,true);
  assertEquals(key,searchKey);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.imap.decode.parser.SetQuotaCommandParserTest </h4><pre class="type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testQuotaParsing() throws DecodingException {
  SetQuotaCommandParser parser=new SetQuotaCommandParser();
  ImapCommand command=ImapCommand.anyStateCommand("Command");
  String commandString="quotaRoot (STORAGE 512) ( MESSAGE  1024  ) \n";
  InputStream inputStream=new ByteArrayInputStream(commandString.getBytes());
  ImapRequestStreamLineReader lineReader=new ImapRequestStreamLineReader(inputStream,null);
  SetQuotaRequest request=(SetQuotaRequest)parser.decode(command,lineReader,"A003",null);
  assertEquals("quotaRoot",request.getQuotaRoot());
  List<SetQuotaRequest.ResourceLimit> list=request.getResourceLimits();
  assertEquals("STORAGE",list.get(0).getResource());
  assertEquals(512,list.get(0).getLimit());
  assertEquals("MESSAGE",list.get(1).getResource());
  assertEquals(1024,list.get(1).getLimit());
  assertEquals(2,list.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.protocols.lmtp.AbstractLMTPServerTest </h4><pre class="type-3 type-2 type-6 type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeliveryHook() throws Exception {
  TestDeliverHook deliverHook=new TestDeliverHook();
  InetSocketAddress address=new InetSocketAddress("127.0.0.1",TestUtils.getFreePort());
  ProtocolServer server=null;
  try {
    server=createServer(createProtocol(deliverHook),address);
    server.bind();
    SMTPClient client=createClient();
    client.connect(address.getAddress().getHostAddress(),address.getPort());
    assertTrue(SMTPReply.isPositiveCompletion(client.getReplyCode()));
    client.helo("localhost");
    assertTrue(SMTPReply.isPositiveCompletion(client.getReplyCode()));
    client.setSender(SENDER);
    assertTrue("Reply=" + client.getReplyString(),SMTPReply.isPositiveCompletion(client.getReplyCode()));
    client.addRecipient(RCPT1);
    assertTrue("Reply=" + client.getReplyString(),SMTPReply.isPositiveCompletion(client.getReplyCode()));
    client.addRecipient(RCPT2);
    assertTrue("Reply=" + client.getReplyString(),SMTPReply.isPositiveCompletion(client.getReplyCode()));
    assertTrue(client.sendShortMessageData(MSG1));
    int[] replies=((LMTPClient)client).getReplies();
    assertEquals("Expected two replies",2,replies.length);
    assertTrue(SMTPReply.isNegativePermanent(replies[0]));
    assertTrue(SMTPReply.isPositiveCompletion(replies[1]));
    client.quit();
    assertTrue("Reply=" + client.getReplyString(),SMTPReply.isPositiveCompletion(client.getReplyCode()));
    client.disconnect();
    Iterator<MailEnvelope> queued=deliverHook.getDelivered().iterator();
    assertTrue(queued.hasNext());
    MailEnvelope env=queued.next();
    checkEnvelope(env,SENDER,Arrays.asList(RCPT1,RCPT2),MSG1);
    assertFalse(queued.hasNext());
  }
  finally {
    if (server != null) {
      server.unbind();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.protocols.smtp.core.fastfail.MaxUnknownCmdHandlerTest </h4><pre class="type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRejectAndClose() throws MailAddressException {
  SMTPSession session=new BaseFakeSMTPSession(){
    private final HashMap<String,Object> map=new HashMap<String,Object>();
    public Map<String,Object> getState(){
      return map;
    }
    public Object setAttachment(    String key,    Object value,    State state){
      if (state == State.Connection) {
        throw new UnsupportedOperationException();
      }
 else {
        if (value == null) {
          return map.remove(key);
        }
 else {
          return map.put(key,value);
        }
      }
    }
    public Object getAttachment(    String key,    State state){
      if (state == State.Connection) {
        throw new UnsupportedOperationException();
      }
 else {
        return map.get(key);
      }
    }
  }
;
  MaxUnknownCmdHandler handler=new MaxUnknownCmdHandler();
  handler.setMaxUnknownCmdCount(2);
  int resp=handler.doUnknown(session,"what").getResult();
  assertEquals(HookReturnCode.DECLINED,resp);
  resp=handler.doUnknown(session,"what").getResult();
  assertEquals(HookReturnCode.DECLINED,resp);
  resp=handler.doUnknown(session,"what").getResult();
  assertEquals(HookReturnCode.DENY | HookReturnCode.DISCONNECT,resp);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.protocols.smtp.core.fastfail.ResolvableEhloHeloHandlerTest </h4><pre class="type-3 type-6 type-5 type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRejectInvalidHelo() throws MailAddressException {
  MailAddress mailAddress=new MailAddress("test@localhost");
  SMTPSession session=setupMockSession(INVALID_HOST,false,false,null,mailAddress);
  ResolvableEhloHeloHandler handler=createHandler();
  handler.doHelo(session,INVALID_HOST);
  assertNotNull("Invalid HELO",session.getAttachment(ResolvableEhloHeloHandler.BAD_EHLO_HELO,State.Transaction));
  int result=handler.doRcpt(session,null,mailAddress).getResult();
  assertEquals("Reject",result,HookReturnCode.DENY);
}

</code></pre>

<br>
<pre class="type-3 type-6 type-5 type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRejectInvalidHeloAuthUser() throws MailAddressException {
  MailAddress mailAddress=new MailAddress("test@localhost");
  SMTPSession session=setupMockSession(INVALID_HOST,false,true,"valid@user",mailAddress);
  ResolvableEhloHeloHandler handler=createHandler();
  handler.doHelo(session,INVALID_HOST);
  assertNotNull("Value stored",session.getAttachment(ResolvableEhloHeloHandler.BAD_EHLO_HELO,State.Transaction));
  int result=handler.doRcpt(session,null,mailAddress).getResult();
  assertEquals("Reject",result,HookReturnCode.DENY);
}

</code></pre>

<br>
<pre class="type-3 type-6 type-5 type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNotRejectValidHelo() throws MailAddressException {
  MailAddress mailAddress=new MailAddress("test@localhost");
  SMTPSession session=setupMockSession(VALID_HOST,false,false,null,mailAddress);
  ResolvableEhloHeloHandler handler=createHandler();
  handler.doHelo(session,VALID_HOST);
  assertNull("Valid HELO",session.getAttachment(ResolvableEhloHeloHandler.BAD_EHLO_HELO,State.Transaction));
  int result=handler.doRcpt(session,null,mailAddress).getResult();
  assertEquals("Not reject",result,HookReturnCode.DECLINED);
}

</code></pre>

<br>
<pre class="type-3 type-6 type-5 type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRejectRelay() throws MailAddressException {
  MailAddress mailAddress=new MailAddress("test@localhost");
  SMTPSession session=setupMockSession(INVALID_HOST,true,false,null,mailAddress);
  ResolvableEhloHeloHandler handler=createHandler();
  handler.doHelo(session,INVALID_HOST);
  assertNotNull("Value stored",session.getAttachment(ResolvableEhloHeloHandler.BAD_EHLO_HELO,State.Transaction));
  int result=handler.doRcpt(session,null,mailAddress).getResult();
  assertEquals("Reject",result,HookReturnCode.DENY);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.james.protocols.smtp.core.fastfail.SpamTrapHandlerTest </h4><pre class="type-3 type-9 type-6 type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSpamTrap() throws MailAddressException {
  String ip="192.168.100.1";
  String ip2="192.168.100.2";
  long blockTime=2000;
  ArrayList<String> rcpts=new ArrayList<String>();
  rcpts.add(SPAM_TRAP_RECIP1);
  SpamTrapHandler handler=new SpamTrapHandler();
  handler.setBlockTime(blockTime);
  handler.setSpamTrapRecipients(rcpts);
  int result=handler.doRcpt(setUpSMTPSession(ip),null,new MailAddress(SPAM_TRAP_RECIP1)).getResult();
  assertEquals("Blocked on first connect",HookReturnCode.DENY,result);
  result=handler.doRcpt(setUpSMTPSession(ip),null,new MailAddress(RECIP1)).getResult();
  assertEquals("Blocked on second connect",HookReturnCode.DENY,result);
  result=handler.doRcpt(setUpSMTPSession(ip2),null,new MailAddress(RECIP1)).getResult();
  assertEquals("Not Blocked",HookReturnCode.DECLINED,result);
  try {
    Thread.sleep(blockTime);
  }
 catch (  InterruptedException e) {
    fail("Failed to sleep for " + blockTime + " ms");
  }
  result=handler.doRcpt(setUpSMTPSession(ip),null,new MailAddress(RECIP1)).getResult();
  assertEquals("Not blocked. BlockTime exceeded",HookReturnCode.DECLINED,result);
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
