<h3 style="margin:0px">Class: org.apache.catalina.core.TestAsyncContextImpl (56 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(39)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(17)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(8)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="13"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('13')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-13"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-4 type-1 type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBug50753() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  Context ctx=tomcat.addContext("",null);
  Bug50753Servlet servlet=new Bug50753Servlet();
  Wrapper wrapper=Tomcat.addServlet(ctx,"servlet",servlet);
  wrapper.setAsyncSupported(true);
  ctx.addServletMapping("/","servlet");
  TesterAccessLogValve alv=new TesterAccessLogValve();
  ctx.getPipeline().addValve(alv);
  tomcat.start();
  Map<String,List<String>> headers=new LinkedHashMap<>();
  ByteChunk bc=new ByteChunk();
  int rc=getUrl("http://localhost:" + getPort() + "/",bc,headers);
  assertEquals(200,rc);
  assertEquals("OK",bc.toString());
  List<String> testHeader=headers.get("A");
  assertNotNull(testHeader);
  assertEquals(1,testHeader.size());
  assertEquals("xyz",testHeader.get(0));
  alv.validateAccessLog(1,200,Bug50753Servlet.THREAD_SLEEP_TIME,Bug50753Servlet.THREAD_SLEEP_TIME + REQUEST_TIME);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTimeoutListenerNoCompleteNonAsyncDispatch() throws Exception {
  doTestTimeout(Boolean.FALSE,Boolean.FALSE);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testForbiddenDispatching() throws Exception {
  resetTracker();
  Tomcat tomcat=getTomcatInstance();
  Context ctx=tomcat.addContext("",null);
  NonAsyncServlet nonAsyncServlet=new NonAsyncServlet();
  Wrapper wrapper=Tomcat.addServlet(ctx,"nonAsyncServlet",nonAsyncServlet);
  wrapper.setAsyncSupported(true);
  ctx.addServletMapping("/target","nonAsyncServlet");
  DispatchingGenericServlet forbiddenDispatchingServlet=new DispatchingGenericServlet();
  Wrapper wrapper1=Tomcat.addServlet(ctx,"forbiddenDispatchingServlet",forbiddenDispatchingServlet);
  wrapper1.setAsyncSupported(true);
  ctx.addServletMapping("/forbiddenDispatchingServlet","forbiddenDispatchingServlet");
  tomcat.start();
  try {
    getUrl("http://localhost:" + getPort() + "/forbiddenDispatchingServlet");
  }
 catch (  IOException ioe) {
    ioe.printStackTrace();
  }
  String expectedTrack="OKNonAsyncServletGet-";
  int count=0;
  while (!expectedTrack.equals(getTrack()) && count < 100) {
    Thread.sleep(50);
    count++;
  }
  Assert.assertEquals(expectedTrack,getTrack());
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetRequestISE() throws Exception {
  doTestAsyncISE(true);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDispatchErrorDouble() throws Exception {
  doTestDispatchError(2,false,false);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDispatchErrorDoubleThenComplete() throws Exception {
  doTestDispatchError(2,false,true);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBug51197a() throws Exception {
  doTestBug51197(false,false);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDispatchWithCustomRequestResponse() throws Exception {
  prepareApplicationWithGenericServlet("");
  StringBuilder expected=new StringBuilder();
  expected.append("OK");
  expected.append("CustomGenericServletGet-");
  requestApplicationWithGenericServlet("/dispatch?crr=y",expected);
  expected=new StringBuilder();
  expected.append("OK");
  expected.append("DispatchingGenericServletGet-");
  requestApplicationWithGenericServlet("/dispatch?crr=y&empty=y",expected);
}

</code></pre>

<pre class="type-13 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBug49528() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  Context ctx=tomcat.addContext("",null);
  Bug49528Servlet servlet=new Bug49528Servlet();
  Wrapper wrapper=Tomcat.addServlet(ctx,"servlet",servlet);
  wrapper.setAsyncSupported(true);
  ctx.addServletMapping("/","servlet");
  TesterAccessLogValve alv=new TesterAccessLogValve();
  ctx.getPipeline().addValve(alv);
  tomcat.start();
  ByteChunk bc=getUrl("http://localhost:" + getPort() + "/");
  assertEquals("OK",bc.toString());
  int counter=0;
  while (!servlet.isDone() && counter < 10) {
    Thread.sleep(1000);
    counter++;
  }
  assertEquals("1false2true3true4true5false",servlet.getResult());
  alv.validateAccessLog(1,200,Bug49528Servlet.THREAD_SLEEP_TIME,Bug49528Servlet.THREAD_SLEEP_TIME + REQUEST_TIME);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTimeoutListenerNoCompleteAsyncDispatch() throws Exception {
  doTestTimeout(Boolean.FALSE,Boolean.TRUE);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBug50352() throws Exception {
  resetTracker();
  Tomcat tomcat=getTomcatInstance();
  Context ctx=tomcat.addContext("",null);
  AsyncStartRunnable servlet=new AsyncStartRunnable();
  Wrapper wrapper=Tomcat.addServlet(ctx,"servlet",servlet);
  wrapper.setAsyncSupported(true);
  ctx.addServletMapping("/","servlet");
  TesterAccessLogValve alv=new TesterAccessLogValve();
  ctx.getPipeline().addValve(alv);
  tomcat.start();
  getUrl("http://localhost:" + getPort() + "/");
  String expectedTrack="Runnable-onComplete-";
  int count=0;
  while (!expectedTrack.equals(getTrack()) && count < 100) {
    Thread.sleep(50);
    count++;
  }
  assertEquals(expectedTrack,getTrack());
  alv.validateAccessLog(1,200,AsyncStartRunnable.THREAD_SLEEP_TIME,AsyncStartRunnable.THREAD_SLEEP_TIME + REQUEST_TIME);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAsyncRequestURI() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  Context ctx=tomcat.addContext("",null);
  Servlet servlet=new AsyncRequestUriServlet();
  Wrapper wrapper1=Tomcat.addServlet(ctx,"bug57559",servlet);
  wrapper1.setAsyncSupported(true);
  ctx.addServletMapping("/","bug57559");
  tomcat.start();
  String uri="/foo/%24/bar";
  String uriDecoded="/foo/$/bar";
  ByteChunk body=getUrl("http://localhost:" + getPort() + uri);
  Assert.assertEquals(uriDecoded,body.toString());
}

</code></pre>

<pre class="type-4 type-1 type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAsyncStartWithComplete() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  Context ctx=tomcat.addContext("",null);
  AsyncStartWithCompleteServlet servlet=new AsyncStartWithCompleteServlet();
  Wrapper wrapper=Tomcat.addServlet(ctx,"servlet",servlet);
  wrapper.setAsyncSupported(true);
  ctx.addServletMapping("/","servlet");
  TesterAccessLogValve alv=new TesterAccessLogValve();
  ctx.getPipeline().addValve(alv);
  tomcat.start();
  ByteChunk bc=new ByteChunk();
  Map<String,List<String>> headers=new HashMap<>();
  getUrl("http://localhost:" + getPort() + "/",bc,headers);
  assertEquals("OK",bc.toString());
  List<String> contentLength=headers.get("Content-Length");
  Assert.assertNotNull(contentLength);
  Assert.assertEquals(1,contentLength.size());
  Assert.assertEquals("2",contentLength.get(0));
  alv.validateAccessLog(1,200,0,REQUEST_TIME);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAsyncStartNoComplete() throws Exception {
  resetTracker();
  Tomcat tomcat=getTomcatInstance();
  tomcat.getConnector().setAttribute("connectionTimeout",Integer.valueOf(3000));
  Context ctx=tomcat.addContext("",null);
  AsyncStartNoCompleteServlet servlet=new AsyncStartNoCompleteServlet();
  Wrapper wrapper=Tomcat.addServlet(ctx,"servlet",servlet);
  wrapper.setAsyncSupported(true);
  ctx.addServletMapping("/","servlet");
  TesterAccessLogValve alv=new TesterAccessLogValve();
  ctx.getPipeline().addValve(alv);
  tomcat.start();
  getUrl("http://localhost:" + getPort() + "/?echo=run1");
  Assert.assertEquals("OK-run1",getTrack());
  resetTracker();
  getUrl("http://localhost:" + getPort() + "/?echo=run2");
  Assert.assertEquals("OK-run2",getTrack());
  alv.validateAccessLog(2,500,AsyncStartNoCompleteServlet.ASYNC_TIMEOUT,AsyncStartNoCompleteServlet.ASYNC_TIMEOUT + TIMEOUT_MARGIN + REQUEST_TIME);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDispatchSingle() throws Exception {
  doTestDispatch(1,false);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTimeoutErrorDispatchNone() throws Exception {
  doTestTimeoutErrorDispatch(null,null);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDispatchErrorWithThreadMultiple() throws Exception {
  doTestDispatchError(5,true,false);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDispatchFromOtherContainerThread() throws Exception {
  resetTracker();
  Tomcat tomcat=getTomcatInstance();
  Context ctx=tomcat.addContext("",null);
  NonAsyncServlet nonAsyncServlet=new NonAsyncServlet();
  Tomcat.addServlet(ctx,"nonAsyncServlet",nonAsyncServlet);
  ctx.addServletMapping("/target","nonAsyncServlet");
  AsyncStashServlet asyncStashServlet=new AsyncStashServlet();
  Wrapper w1=Tomcat.addServlet(ctx,"asyncStashServlet",asyncStashServlet);
  w1.setAsyncSupported(true);
  ctx.addServletMapping("/asyncStashServlet","asyncStashServlet");
  AsyncRetrieveServlet asyncRetrieveServlet=new AsyncRetrieveServlet();
  Wrapper w2=Tomcat.addServlet(ctx,"asyncRetrieveServlet",asyncRetrieveServlet);
  w2.setAsyncSupported(true);
  ctx.addServletMapping("/asyncRetrieveServlet","asyncRetrieveServlet");
  tomcat.start();
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      try {
        getUrl("http://localhost:" + getPort() + "/asyncStashServlet");
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
  }
);
  t.start();
  int count=0;
  while (count < 100 && getTrack() != null && !getTrack().startsWith("AsyncStashServletGet-")) {
    count++;
    Thread.sleep(100);
  }
  getUrl("http://localhost:" + getPort() + "/asyncRetrieveServlet");
  String expectedTrack="AsyncStashServletGet-AsyncRetrieveServletGet-NonAsyncServletGet-";
  count=0;
  while (count < 100 && !getTrack().equals(expectedTrack)) {
    count++;
    Thread.sleep(100);
  }
  Assert.assertEquals(expectedTrack,getTrack());
}

</code></pre>

<pre class="type-4 type-13 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBug54178() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  Context ctx=tomcat.addContext("",null);
  Bug54178ServletA bug54178ServletA=new Bug54178ServletA();
  Wrapper wrapper=Tomcat.addServlet(ctx,"bug54178ServletA",bug54178ServletA);
  wrapper.setAsyncSupported(true);
  ctx.addServletMapping("/bug54178ServletA","bug54178ServletA");
  Bug54178ServletB bug54178ServletB=new Bug54178ServletB();
  Tomcat.addServlet(ctx,"bug54178ServletB",bug54178ServletB);
  ctx.addServletMapping("/bug54178ServletB","bug54178ServletB");
  tomcat.start();
  ByteChunk body=new ByteChunk();
  int rc=-1;
  try {
    rc=getUrl("http://localhost:" + getPort() + "/bug54178ServletA?"+ Bug54178ServletA.PARAM_NAME+ "=bar",body,null);
  }
 catch (  IOException ioe) {
    ioe.printStackTrace();
  }
  assertEquals(HttpServletResponse.SC_OK,rc);
  body.recycle();
  rc=getUrl("http://localhost:" + getPort() + "/bug54178ServletB",body,null);
  assertEquals(HttpServletResponse.SC_OK,rc);
  assertEquals("OK",body.toString());
}

</code></pre>

<pre class="type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBug53337() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  Context ctx=tomcat.addContext("",null);
  Wrapper a=Tomcat.addServlet(ctx,"ServletA",new Bug53337ServletA());
  a.setAsyncSupported(true);
  Wrapper b=Tomcat.addServlet(ctx,"ServletB",new Bug53337ServletB());
  b.setAsyncSupported(true);
  Tomcat.addServlet(ctx,"ServletC",new Bug53337ServletC());
  ctx.addServletMapping("/ServletA","ServletA");
  ctx.addServletMapping("/ServletB","ServletB");
  ctx.addServletMapping("/ServletC","ServletC");
  tomcat.start();
  StringBuilder url=new StringBuilder(48);
  url.append("http://localhost:");
  url.append(getPort());
  url.append("/ServletA");
  ByteChunk body=new ByteChunk();
  int rc=getUrl(url.toString(),body,null);
  assertEquals(HttpServletResponse.SC_OK,rc);
  assertEquals("OK",body.toString());
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDispatchMultiple() throws Exception {
  doTestDispatch(5,false);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBug51197b() throws Exception {
  doTestBug51197(true,false);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEmptyDispatch() throws Exception {
  prepareApplicationWithGenericServlet("/fo o");
  StringBuilder expected=new StringBuilder();
  expected.append("OK");
  expected.append("DispatchingGenericServletGet-");
  requestApplicationWithGenericServlet("/fo%20o/dispatch?empty=y",expected);
  requestApplicationWithGenericServlet("//fo%20o/dispatch?empty=y",expected);
  requestApplicationWithGenericServlet("/./fo%20o/dispatch?empty=y",expected);
  requestApplicationWithGenericServlet("/fo%20o//dispatch?empty=y",expected);
  requestApplicationWithGenericServlet("/fo%20o/./dispatch?empty=y",expected);
  requestApplicationWithGenericServlet("/fo%20o/c/../dispatch?empty=y",expected);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTimeoutListenerNoCompleteNoDispatch() throws Exception {
  doTestTimeout(Boolean.FALSE,null);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDispatchErrorWithThreadSingleThenComplete() throws Exception {
  doTestDispatchError(1,true,true);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTimeoutListenerCompleteNonAsyncDispatch() throws Exception {
  doTestTimeout(Boolean.TRUE,Boolean.FALSE);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDispatchWithThreadMultiple() throws Exception {
  doTestDispatch(5,true);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTimeoutListenerCompleteNoDispatch() throws Exception {
  doTestTimeout(Boolean.TRUE,null);
}

</code></pre>

<pre class="type-4 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBug53843() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  Context ctx=tomcat.addContext("",null);
  Bug53843ServletA servletA=new Bug53843ServletA();
  Wrapper a=Tomcat.addServlet(ctx,"ServletA",servletA);
  a.setAsyncSupported(true);
  Tomcat.addServlet(ctx,"ServletB",new Bug53843ServletB());
  ctx.addServletMapping("/ServletA","ServletA");
  ctx.addServletMapping("/ServletB","ServletB");
  tomcat.start();
  StringBuilder url=new StringBuilder(48);
  url.append("http://localhost:");
  url.append(getPort());
  url.append("/ServletA");
  ByteChunk body=new ByteChunk();
  int rc=getUrl(url.toString(),body,null);
  assertEquals(HttpServletResponse.SC_OK,rc);
  assertEquals("OK",body.toString());
  assertTrue(servletA.isAsyncWhenExpected());
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDispatchErrorSingleThenComplete() throws Exception {
  doTestDispatchError(1,false,true);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDispatchErrorWithThreadDoubleThenComplete() throws Exception {
  doTestDispatchError(2,true,true);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBug51197c() throws Exception {
  doTestBug51197(false,true);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDispatchErrorWithThreadDouble() throws Exception {
  doTestDispatchError(2,true,false);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testListeners() throws Exception {
  resetTracker();
  Tomcat tomcat=getTomcatInstance();
  Context ctx=tomcat.addContext("",null);
  TrackingServlet tracking=new TrackingServlet();
  Wrapper wrapper=Tomcat.addServlet(ctx,"tracking",tracking);
  wrapper.setAsyncSupported(true);
  ctx.addServletMapping("/stage1","tracking");
  TimeoutServlet timeout=new TimeoutServlet(Boolean.TRUE,null);
  Wrapper wrapper2=Tomcat.addServlet(ctx,"timeout",timeout);
  wrapper2.setAsyncSupported(true);
  ctx.addServletMapping("/stage2","timeout");
  TesterAccessLogValve alv=new TesterAccessLogValve();
  ctx.getPipeline().addValve(alv);
  tomcat.start();
  StringBuilder url=new StringBuilder(48);
  url.append("http://localhost:");
  url.append(getPort());
  url.append("/stage1");
  getUrl(url.toString());
  String expectedTrack="DispatchingServletGet-DispatchingServletGet-" + "onStartAsync-TimeoutServletGet-onStartAsync-onTimeout-" + "onComplete-";
  int count=0;
  while (!expectedTrack.equals(getTrack()) && count < 100) {
    Thread.sleep(50);
    count++;
  }
  Assert.assertEquals(expectedTrack,getTrack());
  alv.validateAccessLog(1,200,TimeoutServlet.ASYNC_TIMEOUT,TimeoutServlet.ASYNC_TIMEOUT + TIMEOUT_MARGIN + REQUEST_TIME);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetResponseISE() throws Exception {
  doTestAsyncISE(false);
}

</code></pre>

<pre class="type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTimeoutDispatchCustomErrorPage() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  Context context=tomcat.addContext("",null);
  tomcat.addServlet("","timeout",Bug58751AsyncServlet.class.getName()).setAsyncSupported(true);
  CustomErrorServlet customErrorServlet=new CustomErrorServlet();
  Tomcat.addServlet(context,"customErrorServlet",customErrorServlet);
  context.addServletMapping("/timeout","timeout");
  context.addServletMapping("/error","customErrorServlet");
  ErrorPage errorPage=new ErrorPage();
  errorPage.setLocation("/error");
  context.addErrorPage(errorPage);
  tomcat.start();
  ByteChunk responseBody=new ByteChunk();
  int rc=getUrl("http://localhost:" + getPort() + "/timeout",responseBody,null);
  Assert.assertEquals(503,rc);
  Assert.assertEquals(CustomErrorServlet.ERROR_MESSAGE,responseBody.toString());
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDispatchErrorMultiple() throws Exception {
  doTestDispatchError(5,false,false);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTimeoutErrorDispatchNonAsync() throws Exception {
  doTestTimeoutErrorDispatch(Boolean.FALSE,null);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDispatchErrorSingle() throws Exception {
  doTestDispatchError(1,false,false);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTimeoutListenerCompleteAsyncDispatch() throws Exception {
  doTestTimeout(Boolean.TRUE,Boolean.TRUE);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBug51197d() throws Exception {
  doTestBug51197(true,true);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDispatchWithThreadDouble() throws Exception {
  doTestDispatch(2,true);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTimeoutErrorDispatchAsyncDispatch() throws Exception {
  doTestTimeoutErrorDispatch(Boolean.TRUE,ErrorPageAsyncMode.DISPATCH);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDispatchErrorMultipleThenComplete() throws Exception {
  doTestDispatchError(5,false,true);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDispatchErrorWithThreadMultipleThenComplete() throws Exception {
  doTestDispatchError(5,true,true);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTimeoutErrorDispatchAsyncComplete() throws Exception {
  doTestTimeoutErrorDispatch(Boolean.TRUE,ErrorPageAsyncMode.COMPLETE);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDispatchErrorWithThreadSingle() throws Exception {
  doTestDispatchError(1,true,false);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEmptyDispatchWithCustomRequestResponse() throws Exception {
  prepareApplicationWithGenericServlet("/fo o");
  StringBuilder expected=new StringBuilder();
  expected.append("OK");
  expected.append("DispatchingGenericServletGet-");
  requestApplicationWithGenericServlet("/fo%20o/dispatch?crr=y&empty=y",expected);
  requestApplicationWithGenericServlet("//fo%20o/dispatch?crr=y&empty=y",expected);
  requestApplicationWithGenericServlet("/./fo%20o/dispatch?crr=y&empty=y",expected);
  requestApplicationWithGenericServlet("/fo%20o//dispatch?crr=y&empty=y",expected);
  requestApplicationWithGenericServlet("/fo%20o/./dispatch?crr=y&empty=y",expected);
  requestApplicationWithGenericServlet("/fo%20o/c/../dispatch?crr=y&empty=y",expected);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDispatchWithThreadSingle() throws Exception {
  doTestDispatch(1,true);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAsyncContextListenerClearing() throws Exception {
  resetTracker();
  Tomcat tomcat=getTomcatInstance();
  Context ctx=tomcat.addContext("",null);
  Servlet stage1=new DispatchingServletTracking("/stage2",true);
  Wrapper wrapper1=Tomcat.addServlet(ctx,"stage1",stage1);
  wrapper1.setAsyncSupported(true);
  ctx.addServletMapping("/stage1","stage1");
  Servlet stage2=new DispatchingServletTracking("/stage3",false);
  Wrapper wrapper2=Tomcat.addServlet(ctx,"stage2",stage2);
  wrapper2.setAsyncSupported(true);
  ctx.addServletMapping("/stage2","stage2");
  Servlet stage3=new NonAsyncServlet();
  Tomcat.addServlet(ctx,"stage3",stage3);
  ctx.addServletMapping("/stage3","stage3");
  TesterAccessLogValve alv=new TesterAccessLogValve();
  ctx.getPipeline().addValve(alv);
  tomcat.start();
  getUrl("http://localhost:" + getPort() + "/stage1");
  assertEquals("doGet-startAsync-doGet-startAsync-onStartAsync-NonAsyncServletGet-onComplete-",getTrack());
  alv.validateAccessLog(1,200,0,REQUEST_TIME);
}

</code></pre>

<pre class="type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testErrorHandling() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  Context ctx=tomcat.addContext("",null);
  ErrorServlet error=new ErrorServlet();
  Tomcat.addServlet(ctx,"error",error);
  ctx.addServletMapping("/error","error");
  TesterAccessLogValve alv=new TesterAccessLogValve();
  ctx.getPipeline().addValve(alv);
  tomcat.start();
  StringBuilder url=new StringBuilder(48);
  url.append("http://localhost:");
  url.append(getPort());
  url.append("/error");
  int rc=getUrl(url.toString(),new ByteChunk(),null);
  assertEquals(500,rc);
  Thread.sleep(REQUEST_TIME);
  alv.validateAccessLog(1,500,0,REQUEST_TIME);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTimeoutNoListener() throws Exception {
  doTestTimeout(null,null);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDispatchDouble() throws Exception {
  doTestDispatch(2,false);
}

</code></pre>

<pre class="type-4 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCommitOnComplete() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  Context ctx=tomcat.addContext("",null);
  AsyncStatusServlet asyncStatusServlet=new AsyncStatusServlet(HttpServletResponse.SC_BAD_REQUEST);
  Wrapper wrapper=Tomcat.addServlet(ctx,"asyncStatusServlet",asyncStatusServlet);
  wrapper.setAsyncSupported(true);
  ctx.addServletMapping("/asyncStatusServlet","asyncStatusServlet");
  TesterAccessLogValve alv=new TesterAccessLogValve();
  ctx.getPipeline().addValve(alv);
  tomcat.start();
  StringBuilder url=new StringBuilder(48);
  url.append("http://localhost:");
  url.append(getPort());
  url.append("/asyncStatusServlet");
  int rc=getUrl(url.toString(),new ByteChunk(),null);
  assertEquals(HttpServletResponse.SC_BAD_REQUEST,rc);
  Thread.sleep(REQUEST_TIME);
  alv.validateAccessLog(1,HttpServletResponse.SC_BAD_REQUEST,0,REQUEST_TIME);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTimeoutErrorDispatchAsyncStart() throws Exception {
  doTestTimeoutErrorDispatch(Boolean.TRUE,ErrorPageAsyncMode.NO_COMPLETE);
}

</code></pre>

<pre class="type-13 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBug49567() throws Exception {
  Tomcat tomcat=getTomcatInstance();
  Context ctx=tomcat.addContext("",null);
  Bug49567Servlet servlet=new Bug49567Servlet();
  Wrapper wrapper=Tomcat.addServlet(ctx,"servlet",servlet);
  wrapper.setAsyncSupported(true);
  ctx.addServletMapping("/","servlet");
  TesterAccessLogValve alv=new TesterAccessLogValve();
  ctx.getPipeline().addValve(alv);
  tomcat.start();
  ByteChunk bc=getUrl("http://localhost:" + getPort() + "/");
  assertEquals("OK",bc.toString());
  int counter=0;
  while (!servlet.isDone() && counter < 10) {
    Thread.sleep(1000);
    counter++;
  }
  assertEquals("1false2true3true4true5false",servlet.getResult());
  alv.validateAccessLog(1,200,Bug49567Servlet.THREAD_SLEEP_TIME,Bug49567Servlet.THREAD_SLEEP_TIME + REQUEST_TIME);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
