<h3 style="margin:0px">Class: org.apache.directory.server.operations.ldapsdk.AddIT (30 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(17)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(15)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(12)</kbd></button>&nbsp;<button id="11"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('11')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-11"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(11)</kbd></button>&nbsp;<button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(10)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(9)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(8)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(6)</kbd></button>&nbsp;<button id="16"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('16')" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution"><kbd id="tag-16"class="label-info"style="display: inline-block;font-size:7pt" >ExceptionVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="13"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('13')" data-toggle="tooltip" title="Verifies assertions in iterations"><kbd id="tag-13"class="label-info"style="display: inline-block;font-size:7pt" >IterativeVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-9 type-6 type-11 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that if we inject a PDU above the max allowed size,
 * the connection is closed.
 * @throws NamingException
 */
@Test public void testAddPDUExceedingMaxSizeLdapApi() throws Exception {
  getLdapServer().getDirectoryService().setMaxPDUSize(1024);
  LdapConnection connection=new LdapNetworkConnection(InetAddress.getLocalHost().getHostName(),getLdapServer().getPort());
  connection.bind("uid=admin,ou=system","secret");
  StringBuilder sb=new StringBuilder();
  for (int i=0; i < 128; i++) {
    sb.append("0123456789ABCDEF");
  }
  Attribute description=new DefaultAttribute("description",sb.toString());
  try {
    Modification modification=new DefaultModification(ModificationOperation.ADD_ATTRIBUTE,description);
    connection.modify("cn=the person, ou=system",modification);
    fail();
  }
 catch (  Exception e) {
    if (connection.isConnected()) {
      Thread.sleep(1000);
    }
    assertFalse(connection.isConnected());
  }
}

</code></pre>

<pre class="type-9 type-6 type-5 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Adding an entry with a non existing attribute type.
 * @throws Exception
 */
@Test public void testAddEntryNonExistingAT() throws Exception {
  LdapConnection connection=getAdminConnection(getLdapServer());
  Dn dn=new Dn("cn=Kate Bush," + BASE);
  Entry personEntry=new DefaultEntry();
  personEntry.add(SchemaConstants.OBJECT_CLASS_AT,"person");
  personEntry.add(SchemaConstants.CN_AT,"Kate Bush");
  personEntry.add(SchemaConstants.SN_AT,"Bush");
  personEntry.add("nonExistingAttribute","value");
  personEntry.setDn(dn);
  try {
    connection.add(personEntry);
    fail("should throw LdapNoSuchAttributeException");
  }
 catch (  LdapNoSuchAttributeException e) {
  }
  Entry entry=connection.lookup(dn);
  assertNull(entry);
  connection.close();
}

</code></pre>

<pre class="type-10 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
/** 
 * Test for DIRSERVER-1183.
 * @see https://issues.apache.org/jira/browse/DIRSERVER-1183
 * @throws Exception
 */
@Test public void testDIRSERVER_1183() throws Exception {
  LdapContext ctx=(LdapContext)getWiredContext(getLdapServer()).lookup(BASE);
  Attributes attrs=new BasicAttributes("objectClass","inetOrgPerson",true);
  attrs.get("objectClass").add("organizationalPerson");
  attrs.get("objectClass").add("person");
  attrs.put("givenName","Jim");
  attrs.put("sn","Bean");
  attrs.put("cn","Jim, Bean");
  DirContext jimBeanCtx=ctx.createSubcontext("cn=\"Jim, Bean\"",attrs);
  assertNotNull(jimBeanCtx);
}

</code></pre>

<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
/** 
 * Try to add entry with required attribute missing.
 * @throws NamingException if we fail to connect
 */
@Test public void testAddWithMissingRequiredAttributes() throws Exception {
  DirContext ctx=(DirContext)getWiredContext(getLdapServer()).lookup(BASE);
  Attributes attrs=new BasicAttributes(true);
  javax.naming.directory.Attribute ocls=new BasicAttribute("objectClass");
  ocls.add("top");
  ocls.add("person");
  attrs.put(ocls);
  attrs.put("cn","Fiona Apple");
  try {
    ctx.createSubcontext("cn=Fiona Apple",attrs);
    fail("creation of entry should fail");
  }
 catch (  SchemaViolationException e) {
  }
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Try to add entry and an alias to it. Afterwards, remove it.
 * @throws NamingException if we fail to connect and add entries
 */
@Test public void testAddAlias() throws Exception {
  DirContext ctx=(DirContext)getWiredContext(getLdapServer()).lookup(BASE);
  Attributes entry=new BasicAttributes(true);
  javax.naming.directory.Attribute entryOcls=new BasicAttribute(SchemaConstants.OBJECT_CLASS_AT);
  entryOcls.add(SchemaConstants.TOP_OC);
  entryOcls.add(SchemaConstants.ORGANIZATIONAL_UNIT_OC);
  entry.put(entryOcls);
  entry.put(SchemaConstants.OU_AT,"favorite");
  String entryRdn="ou=favorite";
  ctx.createSubcontext(entryRdn,entry);
  String aliasedObjectName=entryRdn + "," + ctx.getNameInNamespace();
  Attributes alias=new BasicAttributes(true);
  javax.naming.directory.Attribute aliasOcls=new BasicAttribute(SchemaConstants.OBJECT_CLASS_AT);
  aliasOcls.add(SchemaConstants.TOP_OC);
  aliasOcls.add(SchemaConstants.EXTENSIBLE_OBJECT_OC);
  aliasOcls.add(SchemaConstants.ALIAS_OC);
  alias.put(aliasOcls);
  alias.put(SchemaConstants.OU_AT,"bestFruit");
  alias.put(SchemaConstants.ALIASED_OBJECT_NAME_AT,aliasedObjectName);
  String rdnAlias="ou=bestFruit";
  ctx.createSubcontext(rdnAlias,alias);
  ctx.destroySubcontext(rdnAlias);
  ctx.destroySubcontext(entryRdn);
}

</code></pre>

<pre class="type-9 type-4 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests add operation on normal and referral entries without the
 * ManageDsaIT control using JNDI instead of the Netscape API. Referrals
 * are sent back to the client with a non-success result code.
 */
@Test public void testThrowOnReferralWithJndi() throws Exception {
  LdapContext ctx=getWiredContextThrowOnRefferal(getLdapServer());
  SearchControls controls=new SearchControls();
  controls.setReturningAttributes(new String[0]);
  controls.setSearchScope(SearchControls.OBJECT_SCOPE);
  Attributes attrs=new BasicAttributes("objectClass","organizationalUnit",true);
  attrs.put("ou","UnderReferral");
  try {
    ctx.createSubcontext("ou=UnderReferral,uid=akarasuluref,ou=users,ou=system",attrs);
    fail("Should never get here: add should fail with ReferralExcpetion");
  }
 catch (  ReferralException e) {
    assertEquals("ldap://localhost:10389/ou=UnderReferral,uid=akarasulu,ou=users,ou=system",e.getReferralInfo());
  }
  ctx.close();
}

</code></pre>

<pre class="type-10 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
/** 
 * This is the original defect as in JIRA DIREVE-216.
 * @throws NamingException if we cannot connect and perform add operations
 */
@Test public void testAddObjectClasses() throws Exception {
  DirContext ctx=(DirContext)getWiredContext(getLdapServer()).lookup(BASE);
  Attributes attributes=LdifUtils.createJndiAttributes("objectClass: organizationalPerson","objectClass: inetOrgPerson");
  DirContext person=(DirContext)ctx.lookup(RDN);
  person.modifyAttributes("",DirContext.ADD_ATTRIBUTE,attributes);
  person=(DirContext)ctx.lookup(RDN);
  attributes=person.getAttributes("");
  javax.naming.directory.Attribute newOcls=attributes.get("objectClass");
  String[] expectedOcls={"top","person","organizationalPerson","inetOrgPerson"};
  for (  String name : expectedOcls) {
    assertTrue("object class " + name + " is present",newOcls.contains(name));
  }
}

</code></pre>

<pre class="type-10 type-11 type-4 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Try to add entry and an alias to it. Afterwards, remove it. This version
 * cretes a container entry before the operations.
 * @throws NamingException if we fail to connect and add entries
 */
@Test public void testAddAliasInContainer() throws Exception {
  DirContext ctx=(DirContext)getWiredContext(getLdapServer()).lookup(BASE);
  Attributes container=new BasicAttributes(true);
  javax.naming.directory.Attribute containerOcls=new BasicAttribute(SchemaConstants.OBJECT_CLASS_AT);
  containerOcls.add(SchemaConstants.TOP_OC);
  containerOcls.add(SchemaConstants.ORGANIZATIONAL_UNIT_OC);
  container.put(containerOcls);
  container.put(SchemaConstants.OU_AT,"Fruits");
  String containerRdn="ou=Fruits";
  DirContext containerCtx=ctx.createSubcontext(containerRdn,container);
  Attributes entry=new BasicAttributes(true);
  javax.naming.directory.Attribute entryOcls=new BasicAttribute(SchemaConstants.OBJECT_CLASS_AT);
  entryOcls.add(SchemaConstants.TOP_OC);
  entryOcls.add(SchemaConstants.ORGANIZATIONAL_UNIT_OC);
  entry.put(entryOcls);
  entry.put(SchemaConstants.OU_AT,"favorite");
  String entryRdn="ou=favorite";
  containerCtx.createSubcontext(entryRdn,entry);
  String aliasedObjectName=entryRdn + "," + containerCtx.getNameInNamespace();
  Attributes alias=new BasicAttributes(true);
  javax.naming.directory.Attribute aliasOcls=new BasicAttribute(SchemaConstants.OBJECT_CLASS_AT);
  aliasOcls.add(SchemaConstants.TOP_OC);
  aliasOcls.add(SchemaConstants.EXTENSIBLE_OBJECT_OC);
  aliasOcls.add(SchemaConstants.ALIAS_OC);
  alias.put(aliasOcls);
  alias.put(SchemaConstants.OU_AT,"bestFruit");
  alias.put(SchemaConstants.ALIASED_OBJECT_NAME_AT,aliasedObjectName);
  String rdnAlias="ou=bestFruit";
  containerCtx.createSubcontext(rdnAlias,alias);
  SearchControls controls=new SearchControls();
  controls.setDerefLinkFlag(true);
  controls.setSearchScope(SearchControls.ONELEVEL_SCOPE);
  containerCtx.addToEnvironment("java.naming.ldap.derefAliases","never");
  Set<String> names=new HashSet<String>();
  NamingEnumeration<SearchResult> ne=containerCtx.search("","(objectClass=*)",controls);
  assertTrue(ne.hasMore());
  SearchResult sr=ne.next();
  names.add(sr.getName());
  assertTrue(ne.hasMore());
  sr=ne.next();
  names.add(sr.getName());
  assertFalse(ne.hasMore());
  assertEquals(2,names.size());
  assertTrue(names.contains("ou=favorite"));
  assertTrue(names.contains("ou=bestFruit"));
  controls=new SearchControls();
  controls.setDerefLinkFlag(true);
  controls.setSearchScope(SearchControls.ONELEVEL_SCOPE);
  containerCtx.addToEnvironment("java.naming.ldap.derefAliases","always");
  ne=containerCtx.search("","(objectClass=*)",controls);
  assertTrue(ne.hasMore());
  sr=ne.next();
  assertEquals("ou=favorite",sr.getName());
  assertFalse(ne.hasMore());
  controls=new SearchControls();
  controls.setDerefLinkFlag(false);
  controls.setSearchScope(SearchControls.OBJECT_SCOPE);
  containerCtx.addToEnvironment("java.naming.ldap.derefAliases","always");
  ne=containerCtx.search("ou=bestFruit","(objectClass=*)",controls);
  assertTrue(ne.hasMore());
  sr=ne.next();
  assertEquals("ldap://" + InetAddress.getLocalHost().getHostName() + ":"+ getLdapServer().getPort()+ "/ou=favorite,ou=Fruits,ou=system",sr.getName());
  assertFalse(ne.hasMore());
  containerCtx.destroySubcontext(rdnAlias);
  containerCtx.destroySubcontext(entryRdn);
  ctx.destroySubcontext(containerRdn);
}

</code></pre>

<pre class="type-6 type-4 type-5 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test case to demonstrate DIRSERVER-643 ("Netscape SDK: Adding an entry with
 * two description attributes does not combine values."). Uses Sun ONE Directory
 * SDK for Java 4.1 , or comparable (Netscape, Mozilla).
 * @throws LDAPException if we fail to connect and add entries
 */
@Test public void testAddEntryWithTwoDescriptions() throws Exception {
  LdapConnection con=getAdminConnection(getLdapServer());
  String dn="cn=Kate Bush," + BASE;
  Entry kate=new DefaultEntry(dn);
  kate.add("objectclass","top","person");
  kate.add("sn","Bush");
  kate.add("cn","Kate Bush");
  String descr[]={"a British singer-songwriter with an expressive four-octave voice","one of the most influential female artists of the twentieth century"};
  kate.add("description",descr);
  con.add(kate);
  Entry kateReloaded=con.lookup(dn);
  assertNotNull(kateReloaded);
  Attribute attr=kateReloaded.get("description");
  assertNotNull(attr);
  assertEquals(2,attr.size());
  con.delete(dn);
  con.unBind();
}

</code></pre>

<pre class="type-10 type-11 type-4 type-5 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Create an entry a Rdn which is not present in the entry
 */
@Test public void testAddEntryNoRDNInEntry() throws Exception {
  DirContext ctx=(DirContext)getWiredContext(getLdapServer()).lookup(BASE);
  Attributes person=new BasicAttributes("objectClass","inetOrgPerson",true);
  person.get("objectClass").add("top");
  person.get("objectClass").add("person");
  person.get("objectClass").add("organizationalPerson");
  person.put("sn","Michael Jackson");
  person.put("cn","Jackson");
  DirContext michaelCtx=ctx.createSubcontext("givenname=Michael",person);
  assertNotNull(michaelCtx);
  DirContext jackson=(DirContext)ctx.lookup("givenname=Michael");
  person=jackson.getAttributes("");
  javax.naming.directory.Attribute newOcls=person.get("objectClass");
  String[] expectedOcls={"top","person","organizationalPerson","inetOrgPerson"};
  for (  String name : expectedOcls) {
    assertTrue("object class " + name + " is present",newOcls.contains(name));
  }
  javax.naming.directory.Attribute givenName=person.get("givenname");
  assertEquals("Michael",givenName.get());
}

</code></pre>

<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Tests add operation on normal and referral entries without the
 * ManageDsaIT control. Referrals are sent back to the client with a
 * non-success result code.
 */
@Test public void testOnReferral() throws Exception {
  LDAPConnection conn=getNsdkWiredConnection(getLdapServer());
  LDAPConstraints constraints=new LDAPConstraints();
  constraints.setReferrals(false);
  conn.setConstraints(constraints);
  LDAPAttributeSet attrSet=new LDAPAttributeSet();
  attrSet.add(new LDAPAttribute("objectClass","organizationalUnit"));
  attrSet.add(new LDAPAttribute("ou","UnderReferral"));
  LDAPEntry entry=new LDAPEntry("ou=UnderReferral,uid=akarasuluref,ou=users,ou=system",attrSet);
  LDAPResponseListener listener=null;
  LDAPResponse response=null;
  listener=conn.add(entry,null,constraints);
  response=listener.getResponse();
  assertEquals(ResultCodeEnum.REFERRAL.getValue(),response.getResultCode());
  assertEquals("ldap://localhost:10389/ou=UnderReferral,uid=akarasulu,ou=users,ou=system",response.getReferrals()[0]);
  assertEquals("ldap://foo:10389/ou=UnderReferral,uid=akarasulu,ou=users,ou=system",response.getReferrals()[1]);
  assertEquals("ldap://bar:10389/ou=UnderReferral,uid=akarasulu,ou=users,ou=system",response.getReferrals()[2]);
  conn.disconnect();
}

</code></pre>

<pre class="type-9 type-4 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests add operation on referral entry with the ManageDsaIT control.
 */
@Test public void testOnReferralWithManageDsaITControl() throws Exception {
  LDAPConnection conn=getNsdkWiredConnection(getLdapServer());
  LDAPConstraints constraints=new LDAPSearchConstraints();
  constraints.setClientControls(new LDAPControl(LDAPControl.MANAGEDSAIT,true,Strings.EMPTY_BYTES));
  constraints.setServerControls(new LDAPControl(LDAPControl.MANAGEDSAIT,true,Strings.EMPTY_BYTES));
  conn.setConstraints(constraints);
  LDAPAttributeSet attrSet=new LDAPAttributeSet();
  attrSet.add(new LDAPAttribute("objectClass","organizationalUnit"));
  attrSet.add(new LDAPAttribute("ou","UnderReferral"));
  LDAPEntry entry=new LDAPEntry("ou=UnderReferral,uid=akarasuluref,ou=users,ou=system",attrSet);
  try {
    conn.add(entry,constraints);
    fail();
  }
 catch (  LDAPException le) {
    assertEquals(ResultCodeEnum.REFERRAL.getValue(),le.getLDAPResultCode());
  }
  try {
    conn.read("ou=UnderReferral,uid=akarasuluref,ou=users,ou=system",(LDAPSearchConstraints)constraints);
    fail();
  }
 catch (  LDAPException le) {
  }
  conn.disconnect();
}

</code></pre>

<pre class="type-10 type-9 type-5 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that if we inject a PDU above the max allowed size,
 * the connection is closed.
 * @throws NamingException
 */
@Test public void testAddPDUExceedingMaxSizeJNDI() throws Exception {
  getLdapServer().getDirectoryService().setMaxPDUSize(1024);
  DirContext ctx=(DirContext)getWiredContext(getLdapServer()).lookup(BASE);
  Attributes attributes=new BasicAttributes(true);
  javax.naming.directory.Attribute ocls=new BasicAttribute("description");
  StringBuilder sb=new StringBuilder();
  for (int i=0; i < 128; i++) {
    sb.append("0123456789ABCDEF");
  }
  ocls.add(sb.toString());
  attributes.put(ocls);
  DirContext person=(DirContext)ctx.lookup(RDN);
  try {
    person.modifyAttributes("",DirContext.ADD_ATTRIBUTE,attributes);
    fail();
  }
 catch (  Exception e) {
  }
  getLdapServer().getDirectoryService().setMaxPDUSize(4096);
  ctx=(DirContext)getWiredContext(getLdapServer()).lookup(BASE);
  person=(DirContext)ctx.lookup(RDN);
  try {
    person.modifyAttributes("",DirContext.ADD_ATTRIBUTE,attributes);
  }
 catch (  Exception e) {
    fail();
  }
  ctx=(DirContext)getWiredContext(getLdapServer()).lookup(BASE);
  person=(DirContext)ctx.lookup(RDN);
  assertNotNull(person);
  attributes=person.getAttributes("");
  javax.naming.directory.Attribute newOcls=attributes.get("objectClass");
  assertNotNull(newOcls);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * <pre>
 * ou=system
 * |--ou=sales
 * |    |--cn=real  <--real entry
 * |--ou=engineering
 * |--cn=alias  <--alias, pointing to the real entry
 * </pre>
 * @throws NamingException
 */
@Test @CreateDS(enableChangeLog=false,name="DSAlias") @CreateLdapServer(name="DSAlias",transports={@CreateTransport(protocol="LDAP",port=-1)}) public void test_DIRSERVER_1357() throws Exception {
  DirContext ctx=(DirContext)ServerIntegrationUtils.getWiredContext(getLdapServer()).lookup("ou=system");
  Attributes salesAttrs=getOrgUnitAttributes("sales");
  ctx.createSubcontext("ou=sales",salesAttrs);
  Attributes engAttrs=getOrgUnitAttributes("engineering");
  ctx.createSubcontext("ou=engineering",engAttrs);
  Attributes fooAttrs=getPersonAttributes("real","real");
  ctx.createSubcontext("cn=real,ou=sales",fooAttrs);
  Attributes aliasAttrs=new BasicAttributes(true);
  javax.naming.directory.Attribute aliasOC=new BasicAttribute("objectClass");
  aliasOC.add("top");
  aliasOC.add("alias");
  aliasOC.add("extensibleObject");
  aliasAttrs.put(aliasOC);
  aliasAttrs.put("cn","alias");
  aliasAttrs.put("aliasedObjectName","cn=real,ou=sales,ou=system");
  ctx.createSubcontext("cn=alias,ou=engineering",aliasAttrs);
  ctx.destroySubcontext("cn=real,ou=sales");
  ctx.destroySubcontext("cn=alias,ou=engineering");
}

</code></pre>

<pre class="type-10 type-11 type-4 type-5 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Create an entry a composed Rdn which is not present in the entry,
 * with another attribute's value, and on a SingleValued attribute
 */
@Test public void testAddEntryComposedRDN() throws Exception {
  DirContext ctx=(DirContext)getWiredContext(getLdapServer()).lookup(BASE);
  Attributes person=new BasicAttributes("objectClass","inetOrgPerson",true);
  person.get("objectClass").add("top");
  person.get("objectClass").add("person");
  person.get("objectClass").add("organizationalPerson");
  person.put("sn","Michael Jackson");
  person.put("cn","Jackson");
  DirContext michaelCtx=ctx.createSubcontext("displayName=test+cn=Michael",person);
  assertNotNull(michaelCtx);
  DirContext jackson=(DirContext)ctx.lookup("displayName=test+cn=Michael");
  person=jackson.getAttributes("");
  javax.naming.directory.Attribute newOcls=person.get("objectClass");
  String[] expectedOcls={"top","person","organizationalPerson","inetOrgPerson"};
  for (  String name : expectedOcls) {
    assertTrue("object class " + name + " is present",newOcls.contains(name));
  }
  javax.naming.directory.Attribute displayName=person.get("displayName");
  assertEquals(1,displayName.size());
  assertTrue(displayName.contains("test"));
  javax.naming.directory.Attribute cn=person.get("cn");
  assertEquals(2,cn.size());
  assertTrue(cn.contains("Jackson"));
  assertTrue(cn.contains("Michael"));
}

</code></pre>

<pre class="type-6 type-4 type-5 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Testcase to demonstrate DIRSERVER-643 ("Netscape SDK: Adding an entry with
 * two description attributes does not combine values."). Uses Sun ONE Directory
 * SDK for Java 4.1 , or comparable (Netscape, Mozilla).
 * @throws LDAPException if we fail to connect and add entries
 */
@Test public void testAddEntryWithTwoDescriptionsSecondVariant() throws Exception {
  LdapConnection con=getAdminConnection(getLdapServer());
  String dn="cn=Kate Bush," + BASE;
  Entry kate=new DefaultEntry(dn);
  kate.add("objectclass","top","person");
  kate.add("sn","Bush");
  String descr[]={"a British singer-songwriter with an expressive four-octave voice","one of the most influential female artists of the twentieth century"};
  kate.add("description",descr[0]);
  kate.add("cn","Kate Bush");
  kate.add("description",descr[1]);
  con.add(kate);
  Entry kateReloaded=con.lookup(dn);
  assertNotNull(kateReloaded);
  Attribute attr=kateReloaded.get("description");
  assertNotNull(attr);
  assertEquals(2,attr.size());
  con.delete(dn);
  con.unBind();
}

</code></pre>

<pre class="type-13 type-6 type-11 type-4 type-5 type-16 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Adding an entry with a 100K attribute's value.
 * @throws Exception
 */
@Test(expected=LdapException.class) public void testAddEntry100KData() throws Exception {
  LdapConnection connection=getAdminConnection(getLdapServer());
  int size=100 * 1024;
  byte[] dataBytes=new byte[size];
  for (int i=0; i < size; i++) {
    dataBytes[i]='A';
  }
  String data=Strings.utf8ToString(dataBytes);
  Dn dn=new Dn("cn=Kate Bush," + BASE);
  Entry personEntry=new DefaultEntry("cn=Kate Bush," + BASE,"objectClass: top","objectClass: person","cn: Kate Bush","sn: Bush","description",data);
  connection.add(personEntry);
  Entry entry=connection.lookup(dn,"description","cn","sn");
  String description=entry.get("description").getString();
  assertNotNull(description);
  assertTrue(description.startsWith("AAA"));
  assertEquals(size,description.length());
  for (int i=0; i < size; i++) {
    assertEquals('A',description.charAt(i));
  }
}

</code></pre>

<pre class="type-16 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Adding an entry with a non existing attribute type.
 * @throws Exception
 */
@Test(expected=LdapOperationException.class) public void testAddEntryNonExistingOC() throws Exception {
  LdapConnection connection=getAdminConnection(getLdapServer());
  Dn dn=new Dn("cn=Kate Bush," + BASE);
  Entry personEntry=new DefaultEntry();
  personEntry.add(SchemaConstants.OBJECT_CLASS_AT,"nonexistingOC");
  personEntry.add(SchemaConstants.CN_AT,"Kate Bush");
  personEntry.add(SchemaConstants.SN_AT,"Bush");
  personEntry.setDn(dn);
  connection.add(personEntry);
}

</code></pre>

<pre class="type-9 type-11 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests add operation on referral entry with the ManageDsaIT control.
 */
@Test public void testOnReferralWitJNDIIgnore() throws Exception {
  LdapContext MNNCtx=getContext(ServerDNConstants.ADMIN_SYSTEM_DN,getLdapServer().getDirectoryService(),"uid=akarasuluref,ou=users,ou=system");
  MNNCtx.addToEnvironment(Context.REFERRAL,"ignore");
  try {
    Attributes userEntry=new BasicAttributes("objectClass","top",true);
    userEntry.get("objectClass").add("person");
    userEntry.put("sn","elecharny");
    userEntry.put("cn","Emmanuel Lecharny");
    MNNCtx.createSubcontext("cn=Emmanuel Lecharny, ou=apache, ou=people",userEntry);
    fail();
  }
 catch (  PartialResultException pre) {
    assertTrue(true);
  }
}

</code></pre>

<pre class="type-6 type-4 type-5 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddEntryUUIDAndCSNAttributes() throws Exception {
  LdapConnection con=getAdminConnection(getLdapServer());
  String dn="cn=Kate Bush," + BASE;
  Entry entry=new DefaultEntry(dn);
  entry.add("objectclass","top","person");
  entry.add("sn","Bush");
  entry.add("cn","Kate Bush");
  String descr="a British singer-songwriter with an expressive four-octave voice";
  entry.add("description",descr);
  UUID uuid=UUID.randomUUID();
  entry.add(SchemaConstants.ENTRY_UUID_AT,uuid.toString());
  CsnFactory csnFac=new CsnFactory(0);
  Csn csn=csnFac.newInstance();
  entry.add(SchemaConstants.ENTRY_CSN_AT,csn.toString());
  con.add(entry);
  Entry addedEntry=con.lookup(dn,"*","+");
  assertNotNull(addedEntry);
  Attribute attr=addedEntry.get(SchemaConstants.ENTRY_UUID_AT);
  assertNotNull(attr);
  assertEquals(uuid.toString(),attr.getString());
  attr=addedEntry.get(SchemaConstants.ENTRY_CSN_AT);
  assertNotNull(attr);
  assertEquals(csn.toString(),attr.getString());
  con.delete(dn);
  con.unBind();
}

</code></pre>

<pre class="type-10 type-11 type-4 type-5 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Create an entry a Rdn which is not present in the entry,
 * with another attribute's value, and on a SingleValued attribute
 */
@Test public void testAddEntryDifferentRDNSingleValuedInEntry() throws Exception {
  DirContext ctx=(DirContext)getWiredContext(getLdapServer()).lookup(BASE);
  Attributes person=new BasicAttributes("objectClass","inetOrgPerson",true);
  person.get("objectClass").add("top");
  person.get("objectClass").add("person");
  person.get("objectClass").add("organizationalPerson");
  person.put("displayName","Michael");
  person.put("sn","Michael Jackson");
  person.put("cn","Jackson");
  DirContext michaelCtx=ctx.createSubcontext("displayName=test",person);
  assertNotNull(michaelCtx);
  DirContext jackson=(DirContext)ctx.lookup("displayName=test");
  person=jackson.getAttributes("");
  javax.naming.directory.Attribute newOcls=person.get("objectClass");
  String[] expectedOcls={"top","person","organizationalPerson","inetOrgPerson"};
  for (  String name : expectedOcls) {
    assertTrue("object class " + name + " is present",newOcls.contains(name));
  }
  javax.naming.directory.Attribute displayName=person.get("displayName");
  assertEquals(1,displayName.size());
  assertTrue(displayName.contains("test"));
}

</code></pre>

<pre class="type-10 type-11 type-4 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test for DIRSERVER-1311: If the Rdn attribute+value is not present
 * in the entry the server should implicit add this attribute+value to
 * the entry. Additionally, if the Rdn value is escaped or a hexstring
 * the server must add the unescaped string or binary value to the entry.
 */
@Test public void testAddUnescapedRdnValue_DIRSERVER_1311() throws Exception {
  LdapContext ctx=(LdapContext)getWiredContext(getLdapServer()).lookup(BASE);
  Attributes tori=new BasicAttributes(true);
  javax.naming.directory.Attribute toriOC=new BasicAttribute("objectClass");
  toriOC.add("top");
  toriOC.add("person");
  tori.put(toriOC);
  tori.put("cn","Tori,Amos");
  tori.put("sn","Amos");
  ctx.createSubcontext(" cn = Amos\\,Tori ",tori);
  Attributes binary=new BasicAttributes(true);
  javax.naming.directory.Attribute binaryOC=new BasicAttribute("objectClass");
  binaryOC.add("top");
  binaryOC.add("person");
  binary.put(binaryOC);
  binary.put("cn","Binary");
  binary.put("sn","Binary");
  binary.put("userPassword","test");
  ctx.createSubcontext(" userPassword = #414243 ",binary);
  SearchControls controls=new SearchControls();
  NamingEnumeration<SearchResult> res;
  res=ctx.search("","(cn=Amos,Tori)",controls);
  assertTrue(res.hasMore());
  javax.naming.directory.Attribute cnAttribute=res.next().getAttributes().get("cn");
  assertEquals(2,cnAttribute.size());
  assertTrue(cnAttribute.contains("Tori,Amos"));
  assertTrue(cnAttribute.contains("Amos\\,Tori"));
  assertFalse(res.hasMore());
  res=ctx.search("","(userPassword=\\41\\42\\43)",controls);
  assertTrue(res.hasMore());
  javax.naming.directory.Attribute userPasswordAttribute=res.next().getAttributes().get("userPassword");
  assertEquals(2,userPasswordAttribute.size());
  assertTrue(userPasswordAttribute.contains(Strings.getBytesUtf8("test")));
  assertTrue(userPasswordAttribute.contains(Strings.getBytesUtf8("ABC")));
  assertFalse(res.hasMore());
}

</code></pre>

<pre class="type-10 type-11 type-4 type-5 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Create an entry a Rdn which is not present in the entry, but
 * with another attribute's value
 */
@Test public void testAddEntryDifferentRDNInEntry() throws Exception {
  DirContext ctx=(DirContext)getWiredContext(getLdapServer()).lookup(BASE);
  Attributes person=new BasicAttributes("objectClass","inetOrgPerson",true);
  person.get("objectClass").add("top");
  person.get("objectClass").add("person");
  person.get("objectClass").add("organizationalPerson");
  person.put("givenName","Michael");
  person.put("sn","Michael Jackson");
  person.put("cn","Jackson");
  DirContext michaelCtx=ctx.createSubcontext("cn=Michael",person);
  assertNotNull(michaelCtx);
  DirContext jackson=(DirContext)ctx.lookup("cn=Michael");
  person=jackson.getAttributes("");
  javax.naming.directory.Attribute newOcls=person.get("objectClass");
  String[] expectedOcls={"top","person","organizationalPerson","inetOrgPerson"};
  for (  String name : expectedOcls) {
    assertTrue("object class " + name + " is present",newOcls.contains(name));
  }
  javax.naming.directory.Attribute cn=person.get("cn");
  assertEquals(2,cn.size());
  String[] expectedCns={"Jackson","Michael"};
  for (  String name : expectedCns) {
    assertTrue("CN " + name + " is present",cn.contains(name));
  }
}

</code></pre>

<pre class="type-6 type-4 type-5 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Testcase to demonstrate DIRSERVER-643 ("Netscape SDK: Adding an entry with
 * two description attributes does not combine values."). Uses Sun ONE Directory
 * SDK for Java 4.1 , or comparable (Netscape, Mozilla).
 * @throws LDAPException if we fail to connect and add entries
 */
@Test public void testAddEntryWithTwoDescriptionsVariant() throws Exception {
  LdapConnection con=getAdminConnection(getLdapServer());
  String dn="cn=Kate Bush," + BASE;
  Entry kate=new DefaultEntry(dn);
  kate.add("objectclass","top","person");
  kate.add("sn","Bush");
  kate.add("cn","Kate Bush");
  String descr[]={"a British singer-songwriter with an expressive four-octave voice","one of the most influential female artists of the twentieth century"};
  kate.add("description",descr[0]);
  kate.add("description",descr[1]);
  con.add(kate);
  Entry kateReloaded=con.lookup(dn);
  assertNotNull(kateReloaded);
  Attribute attr=kateReloaded.get("description");
  assertNotNull(attr);
  assertEquals(2,attr.size());
  con.delete(dn);
  con.unBind();
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test for DIRSERVER-1352:  Infinite Loop when deleting an alias with suffix size > 1
 * Test for DIRSERVER-1157:  Deleting Alias entry failure
 * @see https://issues.apache.org/jira/browse/DIRSERVER-1352
 * @see https://issues.apache.org/jira/browse/DIRSERVER-1157
 * @throws Exception
 */
@Test public void testAddDeleteAlias2() throws Exception {
  DirContext ctx=(DirContext)getWiredContext(getLdapServer()).lookup(BASE_EXAMPLE_COM);
  Attributes entry=new BasicAttributes(true);
  javax.naming.directory.Attribute entryOcls=new BasicAttribute(SchemaConstants.OBJECT_CLASS_AT);
  entryOcls.add(SchemaConstants.TOP_OC);
  entryOcls.add(SchemaConstants.ORGANIZATIONAL_UNIT_OC);
  entry.put(entryOcls);
  entry.put(SchemaConstants.OU_AT,"favorite");
  String entryRdn="ou=favorite";
  ctx.createSubcontext(entryRdn,entry);
  String aliasedObjectName=entryRdn + "," + ctx.getNameInNamespace();
  Attributes alias=new BasicAttributes(true);
  javax.naming.directory.Attribute aliasOcls=new BasicAttribute(SchemaConstants.OBJECT_CLASS_AT);
  aliasOcls.add(SchemaConstants.TOP_OC);
  aliasOcls.add(SchemaConstants.EXTENSIBLE_OBJECT_OC);
  aliasOcls.add(SchemaConstants.ALIAS_OC);
  alias.put(aliasOcls);
  alias.put(SchemaConstants.OU_AT,"bestFruit");
  alias.put(SchemaConstants.ALIASED_OBJECT_NAME_AT,aliasedObjectName);
  String rdnAlias="ou=bestFruit";
  ctx.createSubcontext(rdnAlias,alias);
  ctx.destroySubcontext(rdnAlias);
  ctx.destroySubcontext(entryRdn);
}

</code></pre>

<pre class="type-10 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
/** 
 * This changes a single attribute value. Just as a reference.
 * @throws NamingException if we cannot connect and modify the description
 */
@Test public void testModifyDescription() throws Exception {
  DirContext ctx=(DirContext)getWiredContext(getLdapServer()).lookup(BASE);
  String newDescription="More info on the user ...";
  Attributes attributes=new BasicAttributes(true);
  javax.naming.directory.Attribute desc=new BasicAttribute("description",newDescription);
  attributes.put(desc);
  DirContext person=(DirContext)ctx.lookup(RDN);
  person.modifyAttributes("",DirContext.REPLACE_ATTRIBUTE,attributes);
  person=(DirContext)ctx.lookup(RDN);
  attributes=person.getAttributes("");
  javax.naming.directory.Attribute newDesc=attributes.get("description");
  assertTrue("new Description",newDesc.contains(newDescription));
}

</code></pre>

<pre class="type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Tests referral handling when an ancestor is a referral.
 */
@Test public void testAncestorReferral() throws Exception {
  LOG.debug("");
  LDAPConnection conn=getNsdkWiredConnection(getLdapServer());
  LDAPConstraints constraints=new LDAPConstraints();
  conn.setConstraints(constraints);
  LDAPAttributeSet attrSet=new LDAPAttributeSet();
  attrSet.add(new LDAPAttribute("objectClass","organizationalUnit"));
  attrSet.add(new LDAPAttribute("ou","UnderReferral"));
  LDAPEntry entry=new LDAPEntry("ou=UnderReferral,ou=Computers,uid=akarasuluref,ou=users,ou=system",attrSet);
  LDAPResponseListener listener=conn.add(entry,null,constraints);
  LDAPResponse response=listener.getResponse();
  assertEquals(ResultCodeEnum.REFERRAL.getValue(),response.getResultCode());
  assertEquals("ldap://localhost:10389/ou=UnderReferral,ou=Computers,uid=akarasulu,ou=users,ou=system",response.getReferrals()[0]);
  assertEquals("ldap://foo:10389/ou=UnderReferral,ou=Computers,uid=akarasulu,ou=users,ou=system",response.getReferrals()[1]);
  assertEquals("ldap://bar:10389/ou=UnderReferral,ou=Computers,uid=akarasulu,ou=users,ou=system",response.getReferrals()[2]);
  conn.disconnect();
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Try to add entry and an alias to it. Afterwards, remove it.  Taken from
 * DIRSERVER-1157 test contribution.
 * @see https://issues.apache.org/jira/browse/DIRSERVER-1157
 * @throws Exception
 */
@Test public void testAddDeleteAlias() throws Exception {
  DirContext ctx=(DirContext)getWiredContext(getLdapServer()).lookup(BASE);
  Attributes entry=new BasicAttributes(true);
  javax.naming.directory.Attribute entryOcls=new BasicAttribute(SchemaConstants.OBJECT_CLASS_AT);
  entryOcls.add(SchemaConstants.TOP_OC);
  entryOcls.add(SchemaConstants.ORGANIZATIONAL_UNIT_OC);
  entry.put(entryOcls);
  entry.put(SchemaConstants.OU_AT,"favorite");
  String entryRdn="ou=favorite";
  ctx.createSubcontext(entryRdn,entry);
  String aliasedObjectName=entryRdn + "," + ctx.getNameInNamespace();
  Attributes alias=new BasicAttributes(true);
  javax.naming.directory.Attribute aliasOcls=new BasicAttribute(SchemaConstants.OBJECT_CLASS_AT);
  aliasOcls.add(SchemaConstants.TOP_OC);
  aliasOcls.add(SchemaConstants.EXTENSIBLE_OBJECT_OC);
  aliasOcls.add(SchemaConstants.ALIAS_OC);
  alias.put(aliasOcls);
  alias.put(SchemaConstants.OU_AT,"bestFruit");
  alias.put(SchemaConstants.ALIASED_OBJECT_NAME_AT,aliasedObjectName);
  String rdnAlias="ou=bestFruit";
  ctx.createSubcontext(rdnAlias,alias);
  ctx.destroySubcontext(rdnAlias);
  ctx.destroySubcontext(entryRdn);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test for DIRSERVER-1352:  Infinite Loop when deleting an alias with suffix size > 1
 * Test for DIRSERVER-1157:  Deleting Alias entry failure
 * @see https://issues.apache.org/jira/browse/DIRSERVER-1352
 * @see https://issues.apache.org/jira/browse/DIRSERVER-1157
 * @throws Exception
 */
@Test public void testAddDeleteAlias3() throws Exception {
  DirContext ctx=(DirContext)getWiredContext(getLdapServer()).lookup(BASE_DIRECTORY_APACHE_ORG);
  Attributes entry=new BasicAttributes(true);
  javax.naming.directory.Attribute entryOcls=new BasicAttribute(SchemaConstants.OBJECT_CLASS_AT);
  entryOcls.add(SchemaConstants.TOP_OC);
  entryOcls.add(SchemaConstants.ORGANIZATIONAL_UNIT_OC);
  entry.put(entryOcls);
  entry.put(SchemaConstants.OU_AT,"favorite");
  String entryRdn="ou=favorite";
  ctx.createSubcontext(entryRdn,entry);
  String aliasedObjectName=entryRdn + "," + ctx.getNameInNamespace();
  Attributes alias=new BasicAttributes(true);
  javax.naming.directory.Attribute aliasOcls=new BasicAttribute(SchemaConstants.OBJECT_CLASS_AT);
  aliasOcls.add(SchemaConstants.TOP_OC);
  aliasOcls.add(SchemaConstants.EXTENSIBLE_OBJECT_OC);
  aliasOcls.add(SchemaConstants.ALIAS_OC);
  alias.put(aliasOcls);
  alias.put(SchemaConstants.OU_AT,"bestFruit");
  alias.put(SchemaConstants.ALIASED_OBJECT_NAME_AT,aliasedObjectName);
  String rdnAlias="ou=bestFruit";
  ctx.createSubcontext(rdnAlias,alias);
  ctx.destroySubcontext(rdnAlias);
  ctx.destroySubcontext(entryRdn);
}

</code></pre>

<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
/** 
 * Try to add entry with invalid number of values for a single-valued attribute
 * @throws NamingException if we fail to connect and add entries
 * @see <a href="http://issues.apache.org/jira/browse/DIRSERVER-614">DIRSERVER-614</a>
 */
@Test public void testAddWithInvalidNumberOfAttributeValues() throws Exception {
  DirContext ctx=(DirContext)getWiredContext(getLdapServer()).lookup(BASE);
  Attributes attrs=new BasicAttributes(true);
  javax.naming.directory.Attribute ocls=new BasicAttribute("objectClass");
  ocls.add("top");
  ocls.add("inetOrgPerson");
  attrs.put(ocls);
  attrs.put("cn","Fiona Apple");
  attrs.put("sn","Apple");
  javax.naming.directory.Attribute displayName=new BasicAttribute("displayName");
  displayName.add("Fiona");
  displayName.add("Fiona A.");
  attrs.put(displayName);
  try {
    ctx.createSubcontext("cn=Fiona Apple",attrs);
    fail("creation of entry should fail");
  }
 catch (  InvalidAttributeValueException e) {
  }
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
