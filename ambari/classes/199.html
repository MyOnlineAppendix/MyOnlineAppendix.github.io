<h3 style="margin:0px">Class: org.apache.ambari.server.controller.internal.BlueprintResourceProviderTest (27 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(19)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(19)</kbd></button>&nbsp;<button id="11"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('11')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-11"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(17)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(16)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(8)</kbd></button>&nbsp;<button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(6)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Allocates resources before the execution of the test cases"><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >TestInitializer&nbsp;(1)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testPopulateConfigurationEntity_configIsNull() throws Exception {
  Map<String,String> configuration=null;
  BlueprintConfiguration config=new BlueprintConfigEntity();
  provider.populateConfigurationEntity(configuration,config);
  assertNotNull(config.getConfigAttributes());
  assertNotNull(config.getConfigData());
}

</code></pre>

<pre class="type-2 type-5 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDecidePopulationStrategy_withOldSchema() throws Exception {
  Map<String,String> configMap=new HashMap<String,String>();
  configMap.put("global/hive_database","db");
  BlueprintConfigPopulationStrategy provisioner=provider.decidePopulationStrategy(configMap);
  assertNotNull(provisioner);
  assertTrue(provisioner instanceof BlueprintConfigPopulationStrategyV1);
}

</code></pre>

<pre class="type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateResources_withEmptyConfiguration() throws Exception {
  Set<Map<String,Object>> setProperties=getBlueprintTestProperties();
  setConfigurationProperties(setProperties);
  AmbariManagementController managementController=createMock(AmbariManagementController.class);
  Map<String,String> requestInfoProperties=new HashMap<String,String>();
  requestInfoProperties.put(Request.REQUEST_INFO_BODY_PROPERTY,"{\"configurations\":[]}");
  Request request=createMock(Request.class);
  expect(blueprintFactory.createBlueprint(setProperties.iterator().next(),null)).andReturn(blueprint).once();
  blueprint.validateRequiredProperties();
  blueprint.validateTopology();
  expect(blueprint.toEntity()).andReturn(entity);
  expect(blueprint.getName()).andReturn(BLUEPRINT_NAME).atLeastOnce();
  expect(request.getProperties()).andReturn(setProperties);
  expect(request.getRequestInfoProperties()).andReturn(requestInfoProperties);
  expect(dao.findByName(BLUEPRINT_NAME)).andReturn(null);
  dao.create(entity);
  replay(dao,entity,metaInfo,blueprintFactory,blueprint,request,managementController);
  ResourceProvider provider=AbstractControllerResourceProvider.getResourceProvider(Resource.Type.Blueprint,PropertyHelper.getPropertyIds(Resource.Type.Blueprint),PropertyHelper.getKeyPropertyIds(Resource.Type.Blueprint),managementController);
  AbstractResourceProviderTest.TestObserver observer=new AbstractResourceProviderTest.TestObserver();
  ((ObservableResourceProvider)provider).addObserver(observer);
  provider.createResources(request);
  ResourceProviderEvent lastEvent=observer.getLastEvent();
  assertNotNull(lastEvent);
  assertEquals(Resource.Type.Blueprint,lastEvent.getResourceType());
  assertEquals(ResourceProviderEvent.Type.Create,lastEvent.getType());
  assertEquals(request,lastEvent.getRequest());
  assertNull(lastEvent.getPredicate());
  verify(dao,entity,blueprintFactory,metaInfo,request,managementController);
}

</code></pre>

<pre class="type-10 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateResources_wrongConfigurationStructure_withoutConfigsList() throws ResourceAlreadyExistsException, SystemException, UnsupportedPropertyException, NoSuchParentResourceException {
  Request request=createMock(Request.class);
  Set<Map<String,Object>> setProperties=getBlueprintTestProperties();
  Map<String,String> requestInfoProperties=new HashMap<String,String>();
  String configurationData="{\"configurations\":{\"config-type1\": \"properties\", \"config-type2\": \"properties\"}}";
  requestInfoProperties.put(Request.REQUEST_INFO_BODY_PROPERTY,configurationData);
  expect(request.getProperties()).andReturn(setProperties);
  expect(request.getRequestInfoProperties()).andReturn(requestInfoProperties);
  replay(dao,metaInfo,request);
  try {
    provider.createResources(request);
    fail("Exception expected");
  }
 catch (  IllegalArgumentException e) {
    assertEquals(BlueprintResourceProvider.CONFIGURATION_LIST_CHECK_ERROR_MESSAGE,e.getMessage());
  }
  verify(dao,metaInfo,request);
}

</code></pre>

<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDecidePopulationStrategy_unsupportedSchema() throws Exception {
  Map<String,String> configMap=new HashMap<String,String>();
  configMap.put("global/properties/lot/foo_contact","foo@ffl.dsfds");
  expectedException.expect(IllegalArgumentException.class);
  expectedException.expectMessage(BlueprintResourceProvider.SCHEMA_IS_NOT_SUPPORTED_MESSAGE);
  provider.decidePopulationStrategy(configMap);
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetResourcesNoPredicate_withConfiguration() throws SystemException, UnsupportedPropertyException, NoSuchParentResourceException, NoSuchResourceException, AmbariException {
  StackInfo info=createMock(StackInfo.class);
  expect(info.getConfigPropertiesTypes("core-site")).andReturn(new HashMap<PropertyInfo.PropertyType,Set<String>>()).anyTimes();
  expect(metaInfo.getStack("test-stack-name","test-stack-version")).andReturn(info).anyTimes();
  replay(info,metaInfo);
  Request request=createNiceMock(Request.class);
  Set<Map<String,Object>> testProperties=getBlueprintTestProperties();
  setConfigurationProperties(testProperties);
  BlueprintEntity entity=createEntity(testProperties.iterator().next());
  List<BlueprintEntity> results=new ArrayList<BlueprintEntity>();
  results.add(entity);
  expect(dao.findAll()).andReturn(results);
  replay(dao,request);
  Set<Resource> setResults=provider.getResources(request,null);
  assertEquals(1,setResults.size());
  verify(dao);
  validateResource(setResults.iterator().next(),true);
}

</code></pre>

<pre class="type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateResources_withConfiguration() throws Exception {
  Set<Map<String,Object>> setProperties=getBlueprintTestProperties();
  setConfigurationProperties(setProperties);
  AmbariManagementController managementController=createMock(AmbariManagementController.class);
  Map<String,String> requestInfoProperties=getTestRequestInfoProperties();
  Request request=createMock(Request.class);
  expect(blueprintFactory.createBlueprint(setProperties.iterator().next(),null)).andReturn(blueprint).once();
  blueprint.validateRequiredProperties();
  blueprint.validateTopology();
  expect(blueprint.toEntity()).andReturn(entity);
  expect(blueprint.getName()).andReturn(BLUEPRINT_NAME).atLeastOnce();
  expect(request.getProperties()).andReturn(setProperties);
  expect(request.getRequestInfoProperties()).andReturn(requestInfoProperties);
  expect(dao.findByName(BLUEPRINT_NAME)).andReturn(null);
  dao.create(entity);
  replay(dao,entity,metaInfo,blueprintFactory,blueprint,request,managementController);
  ResourceProvider provider=AbstractControllerResourceProvider.getResourceProvider(Resource.Type.Blueprint,PropertyHelper.getPropertyIds(Resource.Type.Blueprint),PropertyHelper.getKeyPropertyIds(Resource.Type.Blueprint),managementController);
  AbstractResourceProviderTest.TestObserver observer=new AbstractResourceProviderTest.TestObserver();
  ((ObservableResourceProvider)provider).addObserver(observer);
  provider.createResources(request);
  ResourceProviderEvent lastEvent=observer.getLastEvent();
  assertNotNull(lastEvent);
  assertEquals(Resource.Type.Blueprint,lastEvent.getResourceType());
  assertEquals(ResourceProviderEvent.Type.Create,lastEvent.getType());
  assertEquals(request,lastEvent.getRequest());
  assertNull(lastEvent.getPredicate());
  verify(dao,entity,blueprintFactory,metaInfo,request,managementController);
}

</code></pre>

<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testCreateResources_TopologyValidationFails() throws Exception {
  Request request=createMock(Request.class);
  Set<Map<String,Object>> setProperties=getBlueprintTestProperties();
  Map<String,String> requestInfoProperties=getTestRequestInfoProperties();
  expect(blueprintFactory.createBlueprint(setProperties.iterator().next(),null)).andReturn(blueprint).once();
  blueprint.validateRequiredProperties();
  expect(blueprint.getName()).andReturn(BLUEPRINT_NAME).atLeastOnce();
  blueprint.validateTopology();
  expectLastCall().andThrow(new InvalidTopologyException("test"));
  expect(request.getProperties()).andReturn(setProperties);
  expect(request.getRequestInfoProperties()).andReturn(requestInfoProperties);
  expect(dao.findByName(BLUEPRINT_NAME)).andReturn(null);
  replay(dao,entity,metaInfo,blueprintFactory,blueprint,request);
  ResourceProvider provider=AbstractControllerResourceProvider.getResourceProvider(Resource.Type.Blueprint,PropertyHelper.getPropertyIds(Resource.Type.Blueprint),PropertyHelper.getKeyPropertyIds(Resource.Type.Blueprint),createMock(AmbariManagementController.class));
  AbstractResourceProviderTest.TestObserver observer=new AbstractResourceProviderTest.TestObserver();
  ((ObservableResourceProvider)provider).addObserver(observer);
  try {
    provider.createResources(request);
    fail("Expected exception due to topology validation error");
  }
 catch (  IllegalArgumentException e) {
  }
  verify(dao,entity,blueprintFactory,metaInfo,request);
}

</code></pre>

<pre class="type-2 type-5 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPopulateConfigurationEntity_oldSchema() throws Exception {
  Map<String,String> configuration=new HashMap<String,String>();
  configuration.put("global/property1","val1");
  configuration.put("global/property2","val2");
  BlueprintConfiguration config=new BlueprintConfigEntity();
  provider.populateConfigurationEntity(configuration,config);
  assertNotNull(config.getConfigData());
  assertNotNull(config.getConfigAttributes());
  Map<?,?> configData=StageUtils.getGson().fromJson(config.getConfigData(),Map.class);
  Map<?,Map<?,?>> configAttrs=StageUtils.getGson().fromJson(config.getConfigAttributes(),Map.class);
  assertNotNull(configData);
  assertNotNull(configAttrs);
  assertEquals(2,configData.size());
  assertTrue(configData.containsKey("property1"));
  assertTrue(configData.containsKey("property2"));
  assertEquals("val1",configData.get("property1"));
  assertEquals("val2",configData.get("property2"));
  assertEquals(0,configAttrs.size());
}

</code></pre>

<pre class="type-2 type-5 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDecidePopulationStrategy_configIsEmpty() throws Exception {
  Map<String,String> configMap=new HashMap<String,String>();
  BlueprintConfigPopulationStrategy provisioner=provider.decidePopulationStrategy(configMap);
  assertNotNull(provisioner);
  assertTrue(provisioner instanceof BlueprintConfigPopulationStrategyV2);
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetResourcesNoPredicate() throws SystemException, UnsupportedPropertyException, NoSuchParentResourceException, NoSuchResourceException {
  Request request=createNiceMock(Request.class);
  BlueprintEntity entity=createEntity(getBlueprintTestProperties().iterator().next());
  List<BlueprintEntity> results=new ArrayList<BlueprintEntity>();
  results.add(entity);
  expect(dao.findAll()).andReturn(results);
  replay(dao,request);
  Set<Resource> setResults=provider.getResources(request,null);
  assertEquals(1,setResults.size());
  verify(dao);
  validateResource(setResults.iterator().next(),false);
}

</code></pre>

<pre class="type-2 type-5 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDecidePopulationStrategy_configIsNull() throws Exception {
  Map<String,String> configMap=null;
  BlueprintConfigPopulationStrategy provisioner=provider.decidePopulationStrategy(configMap);
  assertNotNull(provisioner);
  assertTrue(provisioner instanceof BlueprintConfigPopulationStrategyV2);
}

</code></pre>

<pre class="type-10 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test() public void testCreateResources_ReqestBodyIsEmpty() throws Exception {
  AmbariManagementController managementController=createMock(AmbariManagementController.class);
  Request request=createMock(Request.class);
  Set<Map<String,Object>> setProperties=getBlueprintTestProperties();
  Map<String,String> requestInfoProperties=new HashMap<String,String>();
  requestInfoProperties.put(Request.REQUEST_INFO_BODY_PROPERTY,null);
  expect(request.getProperties()).andReturn(setProperties);
  expect(request.getRequestInfoProperties()).andReturn(requestInfoProperties);
  replay(request,managementController);
  ResourceProvider provider=AbstractControllerResourceProvider.getResourceProvider(Resource.Type.Blueprint,PropertyHelper.getPropertyIds(Resource.Type.Blueprint),PropertyHelper.getKeyPropertyIds(Resource.Type.Blueprint),managementController);
  try {
    provider.createResources(request);
    fail("Exception expected");
  }
 catch (  IllegalArgumentException e) {
    assertEquals(BlueprintResourceProvider.REQUEST_BODY_EMPTY_ERROR_MESSAGE,e.getMessage());
  }
  verify(request,managementController);
}

</code></pre>

<pre class="type-10 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateResources_wrongConfigurationsStructure_withWrongConfigMapSize() throws ResourceAlreadyExistsException, SystemException, UnsupportedPropertyException, NoSuchParentResourceException {
  Request request=createMock(Request.class);
  Set<Map<String,Object>> setProperties=getBlueprintTestProperties();
  Map<String,String> requestInfoProperties=new HashMap<String,String>();
  String configurationData="{\"configurations\":[{\"config-type1\":{\"properties\" :{\"property\":\"property-value\"}}," + "\"config-type2\" : {\"properties_attributes\" : {\"property\" : \"property-value\"}, \"properties\" : {\"property\" : \"property-value\"}}}" + "]}";
  requestInfoProperties.put(Request.REQUEST_INFO_BODY_PROPERTY,configurationData);
  expect(request.getProperties()).andReturn(setProperties);
  expect(request.getRequestInfoProperties()).andReturn(requestInfoProperties);
  replay(dao,metaInfo,request);
  try {
    provider.createResources(request);
    fail("Exception expected");
  }
 catch (  IllegalArgumentException e) {
    assertEquals(BlueprintResourceProvider.CONFIGURATION_MAP_SIZE_CHECK_ERROR_MESSAGE,e.getMessage());
  }
  verify(dao,metaInfo,request);
}

</code></pre>

<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testCreateResource_BlueprintFactoryThrowsException() throws Exception {
  Request request=createMock(Request.class);
  Set<Map<String,Object>> setProperties=getBlueprintTestProperties();
  setProperties.iterator().next().remove(BlueprintResourceProvider.HOST_GROUP_PROPERTY_ID);
  Map<String,String> requestInfoProperties=getTestRequestInfoProperties();
  expect(blueprintFactory.createBlueprint(setProperties.iterator().next(),null)).andThrow(new IllegalArgumentException("Blueprint name must be provided"));
  expect(securityFactory.createSecurityConfigurationFromRequest(null,true)).andReturn(null).anyTimes();
  expect(request.getProperties()).andReturn(setProperties);
  expect(request.getRequestInfoProperties()).andReturn(requestInfoProperties);
  replay(dao,entity,metaInfo,blueprintFactory,securityFactory,blueprint,request);
  try {
    provider.createResources(request);
    fail("Exception expected");
  }
 catch (  IllegalArgumentException e) {
  }
  verify(dao,entity,blueprintFactory,metaInfo,request);
}

</code></pre>

<pre class="type-2 type-5 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDecidePopulationStrategy_withNewSchema_attributes() throws Exception {
  Map<String,String> configMap=new HashMap<String,String>();
  configMap.put("global/properties_attributes/final/foo_contact","true");
  BlueprintConfigPopulationStrategy provisioner=provider.decidePopulationStrategy(configMap);
  assertNotNull(provisioner);
  assertTrue(provisioner instanceof BlueprintConfigPopulationStrategyV2);
}

</code></pre>

<pre class="type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateResources_withSingleConfigurationType() throws Exception {
  Set<Map<String,Object>> setProperties=getBlueprintTestProperties();
  setConfigurationProperties(setProperties);
  AmbariManagementController managementController=createMock(AmbariManagementController.class);
  Map<String,String> requestInfoProperties=new HashMap<String,String>();
  requestInfoProperties.put(Request.REQUEST_INFO_BODY_PROPERTY,"{\"configurations\":[{\"configuration-type\":{\"properties\":{\"property\":\"value\"}}}]}");
  Request request=createMock(Request.class);
  expect(blueprintFactory.createBlueprint(setProperties.iterator().next(),null)).andReturn(blueprint).once();
  blueprint.validateRequiredProperties();
  blueprint.validateTopology();
  expect(blueprint.toEntity()).andReturn(entity);
  expect(blueprint.getName()).andReturn(BLUEPRINT_NAME).atLeastOnce();
  expect(request.getProperties()).andReturn(setProperties);
  expect(request.getRequestInfoProperties()).andReturn(requestInfoProperties);
  expect(dao.findByName(BLUEPRINT_NAME)).andReturn(null);
  dao.create(entity);
  replay(dao,entity,metaInfo,blueprintFactory,blueprint,request,managementController);
  ResourceProvider provider=AbstractControllerResourceProvider.getResourceProvider(Resource.Type.Blueprint,PropertyHelper.getPropertyIds(Resource.Type.Blueprint),PropertyHelper.getKeyPropertyIds(Resource.Type.Blueprint),managementController);
  AbstractResourceProviderTest.TestObserver observer=new AbstractResourceProviderTest.TestObserver();
  ((ObservableResourceProvider)provider).addObserver(observer);
  provider.createResources(request);
  ResourceProviderEvent lastEvent=observer.getLastEvent();
  assertNotNull(lastEvent);
  assertEquals(Resource.Type.Blueprint,lastEvent.getResourceType());
  assertEquals(ResourceProviderEvent.Type.Create,lastEvent.getType());
  assertEquals(request,lastEvent.getRequest());
  assertNull(lastEvent.getPredicate());
  verify(dao,entity,blueprintFactory,metaInfo,request,managementController);
}

</code></pre>

<pre class="type-4 type-2 type-5 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPopulateConfigurationList() throws Exception {
  StackEntity stackEntity=new StackEntity();
  stackEntity.setStackName("test-stack-name");
  stackEntity.setStackVersion("test-stack-version");
  BlueprintEntity entity=createMock(BlueprintEntity.class);
  expect(entity.getStack()).andReturn(stackEntity).anyTimes();
  HashMap<PropertyInfo.PropertyType,Set<String>> pwdProperties=new HashMap<PropertyInfo.PropertyType,Set<String>>(){
{
      put(PropertyInfo.PropertyType.PASSWORD,new HashSet<String>(){
{
          add("test.password");
        }
      }
);
    }
  }
;
  StackInfo info=createMock(StackInfo.class);
  expect(info.getConfigPropertiesTypes("type1")).andReturn(new HashMap<PropertyInfo.PropertyType,Set<String>>()).anyTimes();
  expect(info.getConfigPropertiesTypes("type2")).andReturn(new HashMap<PropertyInfo.PropertyType,Set<String>>()).anyTimes();
  expect(info.getConfigPropertiesTypes("type3")).andReturn(pwdProperties).anyTimes();
  expect(metaInfo.getStack("test-stack-name","test-stack-version")).andReturn(info).anyTimes();
  replay(info,metaInfo,entity);
  BlueprintConfigEntity config1=new BlueprintConfigEntity();
  config1.setType("type1");
  config1.setConfigData("{\"key1\":\"value1\"}");
  config1.setBlueprintEntity(entity);
  BlueprintConfigEntity config2=new BlueprintConfigEntity();
  config2.setType("type2");
  config2.setConfigData("{\"key2\":\"value2\"}");
  config2.setConfigAttributes("{}");
  config2.setBlueprintEntity(entity);
  BlueprintConfigEntity config3=new BlueprintConfigEntity();
  config3.setType("type3");
  config3.setConfigData("{\"key3\":\"value3\",\"key4\":\"value4\",\"test.password\":\"pwdValue\"}");
  config3.setConfigAttributes("{\"final\":{\"key3\":\"attrValue1\",\"key4\":\"attrValue2\"}}");
  config3.setBlueprintEntity(entity);
  List<Map<String,Map<String,Object>>> configs=provider.populateConfigurationList(Arrays.asList(config1,config2,config3));
  assertNotNull(configs);
  assertEquals(3,configs.size());
  Map<String,Map<String,Object>> configuration1=configs.get(0);
  assertNotNull(configuration1);
  assertEquals(1,configuration1.size());
  assertTrue(configuration1.containsKey("type1"));
  Map<String,Object> typeConfig1=configuration1.get("type1");
  assertNotNull(typeConfig1);
  assertEquals(1,typeConfig1.size());
  assertTrue(typeConfig1.containsKey(BlueprintResourceProvider.PROPERTIES_PROPERTY_ID));
  Map<String,String> confProperties1=(Map<String,String>)typeConfig1.get(BlueprintResourceProvider.PROPERTIES_PROPERTY_ID);
  assertNotNull(confProperties1);
  assertEquals(1,confProperties1.size());
  assertEquals("value1",confProperties1.get("key1"));
  Map<String,Map<String,Object>> configuration2=configs.get(1);
  assertNotNull(configuration2);
  assertEquals(1,configuration2.size());
  assertTrue(configuration2.containsKey("type2"));
  Map<String,Object> typeConfig2=configuration2.get("type2");
  assertNotNull(typeConfig2);
  assertEquals(1,typeConfig2.size());
  assertTrue(typeConfig2.containsKey(BlueprintResourceProvider.PROPERTIES_PROPERTY_ID));
  Map<String,String> confProperties2=(Map<String,String>)typeConfig2.get(BlueprintResourceProvider.PROPERTIES_PROPERTY_ID);
  assertNotNull(confProperties2);
  assertEquals(1,confProperties2.size());
  assertEquals("value2",confProperties2.get("key2"));
  Map<String,Map<String,Object>> configuration3=configs.get(2);
  assertNotNull(configuration3);
  assertEquals(1,configuration3.size());
  assertTrue(configuration3.containsKey("type3"));
  Map<String,Object> typeConfig3=configuration3.get("type3");
  assertNotNull(typeConfig3);
  assertEquals(2,typeConfig3.size());
  assertTrue(typeConfig3.containsKey(BlueprintResourceProvider.PROPERTIES_PROPERTY_ID));
  Map<String,String> confProperties3=(Map<String,String>)typeConfig3.get(BlueprintResourceProvider.PROPERTIES_PROPERTY_ID);
  assertNotNull(confProperties3);
  assertEquals(3,confProperties3.size());
  assertEquals("value3",confProperties3.get("key3"));
  assertEquals("value4",confProperties3.get("key4"));
  assertEquals("SECRET:type3:-1:test.password",confProperties3.get("test.password"));
  assertTrue(typeConfig3.containsKey(BlueprintResourceProvider.PROPERTIES_ATTRIBUTES_PROPERTY_ID));
  Map<String,Map<String,String>> confAttributes3=(Map<String,Map<String,String>>)typeConfig3.get(BlueprintResourceProvider.PROPERTIES_ATTRIBUTES_PROPERTY_ID);
  assertNotNull(confAttributes3);
  assertEquals(1,confAttributes3.size());
  assertTrue(confAttributes3.containsKey("final"));
  Map<String,String> finalAttrs=confAttributes3.get("final");
  assertEquals(2,finalAttrs.size());
  assertEquals("attrValue1",finalAttrs.get("key3"));
  assertEquals("attrValue2",finalAttrs.get("key4"));
}

</code></pre>

<pre class="type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateResources_withSecurityConfiguration() throws Exception {
  AmbariManagementController managementController=createMock(AmbariManagementController.class);
  Request request=createMock(Request.class);
  Set<Map<String,Object>> setProperties=getBlueprintTestProperties();
  Map<String,String> requestInfoProperties=getTestRequestInfoProperties();
  SecurityConfiguration securityConfiguration=new SecurityConfiguration(SecurityType.KERBEROS,"testRef",null);
  expect(securityFactory.createSecurityConfigurationFromRequest(anyObject(HashMap.class),anyBoolean())).andReturn(securityConfiguration).once();
  expect(blueprintFactory.createBlueprint(setProperties.iterator().next(),securityConfiguration)).andReturn(blueprint).once();
  blueprint.validateRequiredProperties();
  blueprint.validateTopology();
  expect(blueprint.toEntity()).andReturn(entity);
  expect(blueprint.getName()).andReturn(BLUEPRINT_NAME).atLeastOnce();
  expect(request.getProperties()).andReturn(setProperties);
  expect(request.getRequestInfoProperties()).andReturn(requestInfoProperties);
  expect(dao.findByName(BLUEPRINT_NAME)).andReturn(null);
  dao.create(entity);
  replay(dao,entity,metaInfo,blueprintFactory,securityFactory,blueprint,request,managementController);
  ResourceProvider provider=AbstractControllerResourceProvider.getResourceProvider(Resource.Type.Blueprint,PropertyHelper.getPropertyIds(Resource.Type.Blueprint),PropertyHelper.getKeyPropertyIds(Resource.Type.Blueprint),managementController);
  AbstractResourceProviderTest.TestObserver observer=new AbstractResourceProviderTest.TestObserver();
  ((ObservableResourceProvider)provider).addObserver(observer);
  provider.createResources(request);
  ResourceProviderEvent lastEvent=observer.getLastEvent();
  assertNotNull(lastEvent);
  assertEquals(Resource.Type.Blueprint,lastEvent.getResourceType());
  assertEquals(ResourceProviderEvent.Type.Create,lastEvent.getType());
  assertEquals(request,lastEvent.getRequest());
  assertNull(lastEvent.getPredicate());
  verify(dao,entity,blueprintFactory,metaInfo,request,managementController);
}

</code></pre>

<pre class="type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateResources_NoValidation() throws Exception {
  AmbariManagementController managementController=createMock(AmbariManagementController.class);
  Request request=createMock(Request.class);
  Set<Map<String,Object>> setProperties=getBlueprintTestProperties();
  Map<String,String> requestInfoProperties=getTestRequestInfoProperties();
  requestInfoProperties.put("validate_topology","false");
  expect(blueprintFactory.createBlueprint(setProperties.iterator().next(),null)).andReturn(blueprint).once();
  blueprint.validateRequiredProperties();
  expect(blueprint.toEntity()).andReturn(entity);
  expect(blueprint.getName()).andReturn(BLUEPRINT_NAME).atLeastOnce();
  expect(request.getProperties()).andReturn(setProperties);
  expect(request.getRequestInfoProperties()).andReturn(requestInfoProperties);
  expect(dao.findByName(BLUEPRINT_NAME)).andReturn(null);
  dao.create(entity);
  replay(dao,entity,metaInfo,blueprintFactory,blueprint,request,managementController);
  ResourceProvider provider=AbstractControllerResourceProvider.getResourceProvider(Resource.Type.Blueprint,PropertyHelper.getPropertyIds(Resource.Type.Blueprint),PropertyHelper.getKeyPropertyIds(Resource.Type.Blueprint),managementController);
  AbstractResourceProviderTest.TestObserver observer=new AbstractResourceProviderTest.TestObserver();
  ((ObservableResourceProvider)provider).addObserver(observer);
  provider.createResources(request);
  ResourceProviderEvent lastEvent=observer.getLastEvent();
  assertNotNull(lastEvent);
  assertEquals(Resource.Type.Blueprint,lastEvent.getResourceType());
  assertEquals(ResourceProviderEvent.Type.Create,lastEvent.getType());
  assertEquals(request,lastEvent.getRequest());
  assertNull(lastEvent.getPredicate());
  verify(dao,entity,blueprintFactory,metaInfo,request,managementController);
}

</code></pre>

<pre class="type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testPopulateConfigurationEntity_configIsEmpty() throws Exception {
  Map<String,String> configuration=new HashMap<String,String>();
  BlueprintConfiguration config=new BlueprintConfigEntity();
  provider.populateConfigurationEntity(configuration,config);
  assertNotNull(config.getConfigAttributes());
  assertNotNull(config.getConfigData());
}

</code></pre>

<pre class="type-10 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateResources_wrongConfigurationStructure_withoutConfigMaps() throws ResourceAlreadyExistsException, SystemException, UnsupportedPropertyException, NoSuchParentResourceException {
  Request request=createMock(Request.class);
  Set<Map<String,Object>> setProperties=getBlueprintTestProperties();
  Map<String,String> requestInfoProperties=new HashMap<String,String>();
  String configurationData="{\"configurations\":[\"config-type1\", \"config-type2\"]}";
  requestInfoProperties.put(Request.REQUEST_INFO_BODY_PROPERTY,configurationData);
  expect(request.getProperties()).andReturn(setProperties);
  expect(request.getRequestInfoProperties()).andReturn(requestInfoProperties);
  replay(dao,metaInfo,request);
  try {
    provider.createResources(request);
    fail("Exception expected");
  }
 catch (  IllegalArgumentException e) {
    assertEquals(BlueprintResourceProvider.CONFIGURATION_MAP_CHECK_ERROR_MESSAGE,e.getMessage());
  }
  verify(dao,metaInfo,request);
}

</code></pre>

<pre class="type-4 type-2 type-5 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPopulateConfigurationEntity_newSchema() throws Exception {
  Map<String,String> configuration=new HashMap<String,String>();
  configuration.put("global/properties/property1","val1");
  configuration.put("global/properties/property2","val2");
  configuration.put("global/properties_attributes/final/property1","true");
  configuration.put("global/properties_attributes/final/property2","false");
  configuration.put("global/properties_attributes/deletable/property1","true");
  BlueprintConfiguration config=new BlueprintConfigEntity();
  provider.populateConfigurationEntity(configuration,config);
  assertNotNull(config.getConfigData());
  assertNotNull(config.getConfigAttributes());
  Map<?,?> configData=StageUtils.getGson().fromJson(config.getConfigData(),Map.class);
  Map<?,Map<?,?>> configAttrs=StageUtils.getGson().fromJson(config.getConfigAttributes(),Map.class);
  assertNotNull(configData);
  assertNotNull(configAttrs);
  assertEquals(2,configData.size());
  assertTrue(configData.containsKey("property1"));
  assertTrue(configData.containsKey("property2"));
  assertEquals("val1",configData.get("property1"));
  assertEquals("val2",configData.get("property2"));
  assertEquals(2,configAttrs.size());
  assertTrue(configAttrs.containsKey("final"));
  assertTrue(configAttrs.containsKey("deletable"));
  Map<?,?> finalAttrs=configAttrs.get("final");
  assertNotNull(finalAttrs);
  assertEquals(2,finalAttrs.size());
  assertTrue(finalAttrs.containsKey("property1"));
  assertTrue(finalAttrs.containsKey("property2"));
  assertEquals("true",finalAttrs.get("property1"));
  assertEquals("false",finalAttrs.get("property2"));
  Map<?,?> deletableAttrs=configAttrs.get("deletable");
  assertNotNull(deletableAttrs);
  assertEquals(1,deletableAttrs.size());
  assertTrue(deletableAttrs.containsKey("property1"));
  assertEquals("true",deletableAttrs.get("property1"));
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void resetGlobalMocks(){
  reset(dao,metaInfo,blueprintFactory,securityFactory,blueprint,entity);
}

</code></pre>

<pre class="type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateResources() throws Exception {
  AmbariManagementController managementController=createMock(AmbariManagementController.class);
  Request request=createMock(Request.class);
  Set<Map<String,Object>> setProperties=getBlueprintTestProperties();
  Map<String,String> requestInfoProperties=getTestRequestInfoProperties();
  expect(blueprintFactory.createBlueprint(setProperties.iterator().next(),null)).andReturn(blueprint).once();
  expect(securityFactory.createSecurityConfigurationFromRequest(null,true)).andReturn(null).anyTimes();
  blueprint.validateRequiredProperties();
  blueprint.validateTopology();
  expect(blueprint.toEntity()).andReturn(entity);
  expect(blueprint.getName()).andReturn(BLUEPRINT_NAME).atLeastOnce();
  expect(request.getProperties()).andReturn(setProperties);
  expect(request.getRequestInfoProperties()).andReturn(requestInfoProperties);
  expect(dao.findByName(BLUEPRINT_NAME)).andReturn(null);
  dao.create(entity);
  replay(dao,entity,metaInfo,blueprintFactory,securityFactory,blueprint,request,managementController);
  ResourceProvider provider=AbstractControllerResourceProvider.getResourceProvider(Resource.Type.Blueprint,PropertyHelper.getPropertyIds(Resource.Type.Blueprint),PropertyHelper.getKeyPropertyIds(Resource.Type.Blueprint),managementController);
  AbstractResourceProviderTest.TestObserver observer=new AbstractResourceProviderTest.TestObserver();
  ((ObservableResourceProvider)provider).addObserver(observer);
  provider.createResources(request);
  ResourceProviderEvent lastEvent=observer.getLastEvent();
  assertNotNull(lastEvent);
  assertEquals(Resource.Type.Blueprint,lastEvent.getResourceType());
  assertEquals(ResourceProviderEvent.Type.Create,lastEvent.getType());
  assertEquals(request,lastEvent.getRequest());
  assertNull(lastEvent.getPredicate());
  verify(dao,entity,blueprintFactory,securityFactory,metaInfo,request,managementController);
}

</code></pre>

<pre class="type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteResources() throws SystemException, UnsupportedPropertyException, NoSuchParentResourceException, NoSuchResourceException {
  BlueprintEntity blueprintEntity=createEntity(getBlueprintTestProperties().iterator().next());
  expect(dao.findByName(BLUEPRINT_NAME)).andReturn(blueprintEntity);
  dao.removeByName(blueprintEntity.getBlueprintName());
  expectLastCall();
  replay(dao);
  Predicate predicate=new EqualsPredicate<String>(BlueprintResourceProvider.BLUEPRINT_NAME_PROPERTY_ID,BLUEPRINT_NAME);
  AbstractResourceProviderTest.TestObserver observer=new AbstractResourceProviderTest.TestObserver();
  provider.addObserver(observer);
  provider.deleteResources(predicate);
  ResourceProviderEvent lastEvent=observer.getLastEvent();
  assertNotNull(lastEvent);
  assertEquals(Resource.Type.Blueprint,lastEvent.getResourceType());
  assertEquals(ResourceProviderEvent.Type.Delete,lastEvent.getType());
  assertNotNull(lastEvent.getPredicate());
  verify(dao);
}

</code></pre>

<pre class="type-2 type-5 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDecidePopulationStrategy_withNewSchema_properties() throws Exception {
  Map<String,String> configMap=new HashMap<String,String>();
  configMap.put("global/properties/foo_contact","foo@ffl.dsfds");
  BlueprintConfigPopulationStrategy provisioner=provider.decidePopulationStrategy(configMap);
  assertNotNull(provisioner);
  assertTrue(provisioner instanceof BlueprintConfigPopulationStrategyV2);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
