<h3 style="margin:0px">Class: org.apache.ambari.server.view.ViewURLStreamProviderTest (12 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(12)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(12)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadFromNullBody() throws Exception {
  URLStreamProvider streamProvider=createNiceMock(URLStreamProvider.class);
  HttpURLConnection urlConnection=createNiceMock(HttpURLConnection.class);
  InputStream inputStream=createNiceMock(InputStream.class);
  ViewContext viewContext=createNiceMock(ViewContext.class);
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("header","headerValue");
  Map<String,List<String>> headerMap=new HashMap<String,List<String>>();
  headerMap.put("header",Collections.singletonList("headerValue"));
  expect(streamProvider.processURL(eq("spec"),eq("requestMethod"),aryEq((byte[])null),eq(headerMap))).andReturn(urlConnection);
  expect(urlConnection.getInputStream()).andReturn(inputStream);
  replay(streamProvider,urlConnection,inputStream);
  ViewURLStreamProvider viewURLStreamProvider=new ViewURLStreamProvider(viewContext,streamProvider);
  Assert.assertEquals(inputStream,viewURLStreamProvider.readFrom("spec","requestMethod",(String)null,headers));
  verify(streamProvider,urlConnection,inputStream);
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetConnection() throws Exception {
  URLStreamProvider streamProvider=createNiceMock(URLStreamProvider.class);
  HttpURLConnection urlConnection=createNiceMock(HttpURLConnection.class);
  ViewContext viewContext=createNiceMock(ViewContext.class);
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("header","headerValue");
  Map<String,List<String>> headerMap=new HashMap<String,List<String>>();
  headerMap.put("header",Collections.singletonList("headerValue"));
  expect(streamProvider.processURL(eq("spec"),eq("requestMethod"),aryEq("params".getBytes()),eq(headerMap))).andReturn(urlConnection);
  replay(streamProvider,urlConnection);
  ViewURLStreamProvider viewURLStreamProvider=new ViewURLStreamProvider(viewContext,streamProvider);
  Assert.assertEquals(urlConnection,viewURLStreamProvider.getConnection("spec","requestMethod","params",headers));
  verify(streamProvider,urlConnection);
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetConnectionAs() throws Exception {
  URLStreamProvider streamProvider=createNiceMock(URLStreamProvider.class);
  HttpURLConnection urlConnection=createNiceMock(HttpURLConnection.class);
  ViewContext viewContext=createNiceMock(ViewContext.class);
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("header","headerValue");
  Map<String,List<String>> headerMap=new HashMap<String,List<String>>();
  headerMap.put("header",Collections.singletonList("headerValue"));
  expect(streamProvider.processURL(eq("spec?doAs=joe"),eq("requestMethod"),aryEq("params".getBytes()),eq(headerMap))).andReturn(urlConnection);
  replay(streamProvider,urlConnection);
  ViewURLStreamProvider viewURLStreamProvider=new ViewURLStreamProvider(viewContext,streamProvider);
  Assert.assertEquals(urlConnection,viewURLStreamProvider.getConnectionAs("spec","requestMethod","params",headers,"joe"));
  verify(streamProvider,urlConnection);
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadFromNullInputStreamBody() throws Exception {
  URLStreamProvider streamProvider=createNiceMock(URLStreamProvider.class);
  HttpURLConnection urlConnection=createNiceMock(HttpURLConnection.class);
  InputStream inputStream=createNiceMock(InputStream.class);
  ViewContext viewContext=createNiceMock(ViewContext.class);
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("header","headerValue");
  Map<String,List<String>> headerMap=new HashMap<String,List<String>>();
  headerMap.put("header",Collections.singletonList("headerValue"));
  expect(streamProvider.processURL(eq("spec"),eq("requestMethod"),aryEq((byte[])null),eq(headerMap))).andReturn(urlConnection);
  expect(urlConnection.getInputStream()).andReturn(inputStream);
  replay(streamProvider,urlConnection,inputStream);
  ViewURLStreamProvider viewURLStreamProvider=new ViewURLStreamProvider(viewContext,streamProvider);
  Assert.assertEquals(inputStream,viewURLStreamProvider.readFrom("spec","requestMethod",(InputStream)null,headers));
  verify(streamProvider,urlConnection,inputStream);
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetConnectionCurrent() throws Exception {
  URLStreamProvider streamProvider=createNiceMock(URLStreamProvider.class);
  HttpURLConnection urlConnection=createNiceMock(HttpURLConnection.class);
  ViewContext viewContext=createNiceMock(ViewContext.class);
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("header","headerValue");
  Map<String,List<String>> headerMap=new HashMap<String,List<String>>();
  headerMap.put("header",Collections.singletonList("headerValue"));
  expect(streamProvider.processURL(eq("spec?doAs=joe"),eq("requestMethod"),aryEq("params".getBytes()),eq(headerMap))).andReturn(urlConnection);
  expect(viewContext.getUsername()).andReturn("joe").anyTimes();
  replay(streamProvider,urlConnection,viewContext);
  ViewURLStreamProvider viewURLStreamProvider=new ViewURLStreamProvider(viewContext,streamProvider);
  Assert.assertEquals(urlConnection,viewURLStreamProvider.getConnectionAsCurrent("spec","requestMethod","params",headers));
  verify(streamProvider,urlConnection,viewContext);
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadAs() throws Exception {
  URLStreamProvider streamProvider=createNiceMock(URLStreamProvider.class);
  HttpURLConnection urlConnection=createNiceMock(HttpURLConnection.class);
  InputStream inputStream=createNiceMock(InputStream.class);
  ViewContext viewContext=createNiceMock(ViewContext.class);
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("header","headerValue");
  Map<String,List<String>> headerMap=new HashMap<String,List<String>>();
  headerMap.put("header",Collections.singletonList("headerValue"));
  expect(streamProvider.processURL(eq("spec?doAs=joe"),eq("requestMethod"),aryEq("params".getBytes()),eq(headerMap))).andReturn(urlConnection);
  expect(urlConnection.getInputStream()).andReturn(inputStream);
  replay(streamProvider,urlConnection,inputStream);
  ViewURLStreamProvider viewURLStreamProvider=new ViewURLStreamProvider(viewContext,streamProvider);
  Assert.assertEquals(inputStream,viewURLStreamProvider.readAs("spec","requestMethod","params",headers,"joe"));
  verify(streamProvider,urlConnection,inputStream);
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadAsCurrentInputStream() throws Exception {
  URLStreamProvider streamProvider=createNiceMock(URLStreamProvider.class);
  HttpURLConnection urlConnection=createNiceMock(HttpURLConnection.class);
  InputStream inputStream=createNiceMock(InputStream.class);
  ViewContext viewContext=createNiceMock(ViewContext.class);
  InputStream body=new ByteArrayInputStream("params".getBytes());
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("header","headerValue");
  Map<String,List<String>> headerMap=new HashMap<String,List<String>>();
  headerMap.put("header",Collections.singletonList("headerValue"));
  expect(streamProvider.processURL(eq("spec?doAs=joe"),eq("requestMethod"),aryEq("params".getBytes()),eq(headerMap))).andReturn(urlConnection);
  expect(urlConnection.getInputStream()).andReturn(inputStream);
  expect(viewContext.getUsername()).andReturn("joe").anyTimes();
  replay(streamProvider,urlConnection,inputStream,viewContext);
  ViewURLStreamProvider viewURLStreamProvider=new ViewURLStreamProvider(viewContext,streamProvider);
  Assert.assertEquals(inputStream,viewURLStreamProvider.readAsCurrent("spec","requestMethod",body,headers));
  verify(streamProvider,urlConnection,inputStream,viewContext);
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadAsInputStream() throws Exception {
  URLStreamProvider streamProvider=createNiceMock(URLStreamProvider.class);
  HttpURLConnection urlConnection=createNiceMock(HttpURLConnection.class);
  InputStream inputStream=createNiceMock(InputStream.class);
  ViewContext viewContext=createNiceMock(ViewContext.class);
  InputStream body=new ByteArrayInputStream("params".getBytes());
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("header","headerValue");
  Map<String,List<String>> headerMap=new HashMap<String,List<String>>();
  headerMap.put("header",Collections.singletonList("headerValue"));
  expect(streamProvider.processURL(eq("spec?doAs=joe"),eq("requestMethod"),aryEq("params".getBytes()),eq(headerMap))).andReturn(urlConnection);
  expect(urlConnection.getInputStream()).andReturn(inputStream);
  replay(streamProvider,urlConnection,inputStream);
  ViewURLStreamProvider viewURLStreamProvider=new ViewURLStreamProvider(viewContext,streamProvider);
  Assert.assertEquals(inputStream,viewURLStreamProvider.readAs("spec","requestMethod",body,headers,"joe"));
  verify(streamProvider,urlConnection,inputStream);
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadFromInputStream() throws Exception {
  URLStreamProvider streamProvider=createNiceMock(URLStreamProvider.class);
  HttpURLConnection urlConnection=createNiceMock(HttpURLConnection.class);
  InputStream inputStream=createNiceMock(InputStream.class);
  ViewContext viewContext=createNiceMock(ViewContext.class);
  InputStream body=new ByteArrayInputStream("params".getBytes());
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("header","headerValue");
  Map<String,List<String>> headerMap=new HashMap<String,List<String>>();
  headerMap.put("header",Collections.singletonList("headerValue"));
  expect(streamProvider.processURL(eq("spec"),eq("requestMethod"),aryEq("params".getBytes()),eq(headerMap))).andReturn(urlConnection);
  expect(urlConnection.getInputStream()).andReturn(inputStream);
  replay(streamProvider,urlConnection,inputStream);
  ViewURLStreamProvider viewURLStreamProvider=new ViewURLStreamProvider(viewContext,streamProvider);
  Assert.assertEquals(inputStream,viewURLStreamProvider.readFrom("spec","requestMethod",body,headers));
  verify(streamProvider,urlConnection,inputStream);
}

</code></pre>

<pre class="type-2 type-5 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testProxyRestriction() throws Exception {
  ViewURLStreamProvider viewURLStreamProvider=new ViewURLStreamProvider(null,null);
  Properties ambariProperties=new Properties();
  Configuration configuration=new Configuration(ambariProperties);
  Assert.assertEquals(Configuration.PROXY_ALLOWED_HOST_PORTS_DEFAULT,configuration.getConfigsMap().get(Configuration.PROXY_ALLOWED_HOST_PORTS));
  ViewURLStreamProvider.HostPortRestrictionHandler hprh=viewURLStreamProvider.new HostPortRestrictionHandler(configuration.getProperty(Configuration.PROXY_ALLOWED_HOST_PORTS));
  Assert.assertFalse(hprh.proxyCallRestricted());
  Assert.assertTrue(hprh.allowProxy("host1.com",null));
  Assert.assertTrue(hprh.allowProxy(null,null));
  Assert.assertTrue(hprh.allowProxy("host1.com"," "));
  Assert.assertTrue(hprh.allowProxy("host1.com "," "));
  Assert.assertTrue(hprh.allowProxy(" host1.com ","8080"));
  ambariProperties=new Properties();
  ambariProperties.setProperty(Configuration.PROXY_ALLOWED_HOST_PORTS,"");
  configuration=new Configuration(ambariProperties);
  hprh=viewURLStreamProvider.new HostPortRestrictionHandler(configuration.getProperty(Configuration.PROXY_ALLOWED_HOST_PORTS));
  Assert.assertFalse(hprh.proxyCallRestricted());
  Assert.assertTrue(hprh.allowProxy("host1.com",null));
  Assert.assertTrue(hprh.allowProxy(null,null));
  Assert.assertTrue(hprh.allowProxy("host1.com"," "));
  Assert.assertTrue(hprh.allowProxy("host1.com "," "));
  Assert.assertTrue(hprh.allowProxy(" host1.com ","8080"));
  ambariProperties=new Properties();
  ambariProperties.setProperty(Configuration.PROXY_ALLOWED_HOST_PORTS,"host1.com:*");
  configuration=new Configuration(ambariProperties);
  hprh=viewURLStreamProvider.new HostPortRestrictionHandler(configuration.getProperty(Configuration.PROXY_ALLOWED_HOST_PORTS));
  Assert.assertTrue(hprh.proxyCallRestricted());
  Assert.assertTrue(hprh.allowProxy("host1.com",null));
  Assert.assertTrue(hprh.allowProxy(null,null));
  Assert.assertTrue(hprh.allowProxy("host1.com","20"));
  Assert.assertFalse(hprh.allowProxy("host2.com "," "));
  Assert.assertFalse(hprh.allowProxy(" host2.com ","8080"));
  ambariProperties=new Properties();
  ambariProperties.setProperty(Configuration.PROXY_ALLOWED_HOST_PORTS," host1.com:80 ,host2.org:443, host2.org:22");
  configuration=new Configuration(ambariProperties);
  hprh=viewURLStreamProvider.new HostPortRestrictionHandler(configuration.getProperty(Configuration.PROXY_ALLOWED_HOST_PORTS));
  Assert.assertTrue(hprh.proxyCallRestricted());
  Assert.assertTrue(hprh.allowProxy("host1.com","80"));
  Assert.assertFalse(hprh.allowProxy("host1.com","20"));
  Assert.assertFalse(hprh.allowProxy("host2.org","404"));
  Assert.assertFalse(hprh.allowProxy("host2.com","22"));
  ViewContext viewContext=createNiceMock(ViewContext.class);
  expect(viewContext.getAmbariProperty(anyObject(String.class))).andReturn(" host1.com:80 ,host2.org:443, host2.org:22");
  replay(viewContext);
  viewURLStreamProvider=new ViewURLStreamProvider(viewContext,null);
  Assert.assertTrue(viewURLStreamProvider.isProxyCallAllowed("http://host1.com/tt"));
  Assert.assertTrue(viewURLStreamProvider.isProxyCallAllowed("https://host2.org/tt"));
  Assert.assertFalse(viewURLStreamProvider.isProxyCallAllowed("https://host2.org:444/tt"));
  viewContext=createNiceMock(ViewContext.class);
  expect(viewContext.getAmbariProperty(anyObject(String.class))).andReturn("c6401.ambari.apache.org:8088");
  replay(viewContext);
  viewURLStreamProvider=new ViewURLStreamProvider(viewContext,null);
  Assert.assertTrue(viewURLStreamProvider.isProxyCallAllowed("http://c6401.ambari.apache.org:8088/ws/v1/cluster/get-node-labels"));
  viewContext=createNiceMock(ViewContext.class);
  expect(viewContext.getAmbariProperty(anyObject(String.class))).andReturn("*:8088");
  replay(viewContext);
  viewURLStreamProvider=new ViewURLStreamProvider(viewContext,null);
  Assert.assertFalse(viewURLStreamProvider.isProxyCallAllowed("http://c6401.ambari.apache.org:8088/ws/v1/cluster/get-node-labels"));
  viewContext=createNiceMock(ViewContext.class);
  expect(viewContext.getAmbariProperty(anyObject(String.class))).andReturn("c6401.ambari.apache.org:*");
  replay(viewContext);
  viewURLStreamProvider=new ViewURLStreamProvider(viewContext,null);
  Assert.assertTrue(viewURLStreamProvider.isProxyCallAllowed("http://c6401.ambari.apache.org:8088/ws/v1/cluster/get-node-labels"));
  viewContext=createNiceMock(ViewContext.class);
  expect(viewContext.getAmbariProperty(anyObject(String.class))).andReturn("c6401.ambari.apache.org:80,c6401.ambari.apache.org:443");
  replay(viewContext);
  viewURLStreamProvider=new ViewURLStreamProvider(viewContext,null);
  Assert.assertTrue(viewURLStreamProvider.isProxyCallAllowed("http://c6401.ambari.apache.org/ws/v1/cluster/get-node-labels"));
  Assert.assertTrue(viewURLStreamProvider.isProxyCallAllowed("https://c6401.ambari.apache.org/ws/v1/cluster/get-node-labels"));
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadAsCurrent() throws Exception {
  URLStreamProvider streamProvider=createNiceMock(URLStreamProvider.class);
  HttpURLConnection urlConnection=createNiceMock(HttpURLConnection.class);
  InputStream inputStream=createNiceMock(InputStream.class);
  ViewContext viewContext=createNiceMock(ViewContext.class);
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("header","headerValue");
  Map<String,List<String>> headerMap=new HashMap<String,List<String>>();
  headerMap.put("header",Collections.singletonList("headerValue"));
  expect(streamProvider.processURL(eq("spec?doAs=joe"),eq("requestMethod"),aryEq("params".getBytes()),eq(headerMap))).andReturn(urlConnection);
  expect(urlConnection.getInputStream()).andReturn(inputStream);
  expect(viewContext.getUsername()).andReturn("joe").anyTimes();
  replay(streamProvider,urlConnection,inputStream,viewContext);
  ViewURLStreamProvider viewURLStreamProvider=new ViewURLStreamProvider(viewContext,streamProvider);
  Assert.assertEquals(inputStream,viewURLStreamProvider.readAsCurrent("spec","requestMethod","params",headers));
  verify(streamProvider,urlConnection,inputStream,viewContext);
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadFrom() throws Exception {
  URLStreamProvider streamProvider=createNiceMock(URLStreamProvider.class);
  HttpURLConnection urlConnection=createNiceMock(HttpURLConnection.class);
  InputStream inputStream=createNiceMock(InputStream.class);
  ViewContext viewContext=createNiceMock(ViewContext.class);
  Map<String,String> headers=new HashMap<String,String>();
  headers.put("header","headerValue");
  Map<String,List<String>> headerMap=new HashMap<String,List<String>>();
  headerMap.put("header",Collections.singletonList("headerValue"));
  expect(streamProvider.processURL(eq("spec"),eq("requestMethod"),aryEq("params".getBytes()),eq(headerMap))).andReturn(urlConnection);
  expect(urlConnection.getInputStream()).andReturn(inputStream);
  replay(streamProvider,urlConnection,inputStream);
  ViewURLStreamProvider viewURLStreamProvider=new ViewURLStreamProvider(viewContext,streamProvider);
  Assert.assertEquals(inputStream,viewURLStreamProvider.readFrom("spec","requestMethod","params",headers));
  verify(streamProvider,urlConnection,inputStream);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
