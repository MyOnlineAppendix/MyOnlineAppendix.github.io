<h3 style="margin:0px">Class: org.apache.ambari.server.orm.dao.AlertDispatchDAOTest (28 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(26)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(24)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(22)</kbd></button>&nbsp;<button id="11"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('11')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-11"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(21)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(9)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(5)</kbd></button>&nbsp;<button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Allocates resources before the execution of the test cases"><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >TestInitializer&nbsp;(1)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Releases resources used by the test cases"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >TestCleaner&nbsp;(1)</kbd></button>&nbsp;<button id="16"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('16')" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution"><kbd id="tag-16"class="label-info"style="display: inline-block;font-size:7pt" >ExceptionVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 */
@Test public void testFindAllTargets() throws Exception {
  List<AlertTargetEntity> targets=m_dao.findAllTargets();
  assertNotNull(targets);
  assertEquals(5,targets.size());
}

</code></pre>

<pre class="type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests finding groups by a definition ID that they are associatd with.
 * @throws Exception
 */
@Test public void testFindGroupsByDefinition() throws Exception {
  List<AlertDefinitionEntity> definitions=createDefinitions();
  AlertGroupEntity group=m_helper.createAlertGroup(m_cluster.getClusterId(),null);
  group=m_dao.findGroupById(group.getGroupId());
  assertNotNull(group);
  for (  AlertDefinitionEntity definition : definitions) {
    group.addAlertDefinition(definition);
  }
  m_dao.merge(group);
  group=m_dao.findGroupByName(group.getGroupName());
  assertEquals(definitions.size(),group.getAlertDefinitions().size());
  for (  AlertDefinitionEntity definition : definitions) {
    List<AlertGroupEntity> groups=m_dao.findGroupsByDefinition(definition);
    assertEquals(2,groups.size());
  }
}

</code></pre>

<pre class="type-2 type-5 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests that when creating a new {@link AlertDefinitionEntity}, if the group
 * for its service does not exist, then it will be created.
 */
@Test public void testDefaultGroupAutomaticCreation() throws Exception {
  List<AlertGroupEntity> groups=m_dao.findAllGroups();
  assertNotNull(groups);
  assertEquals(10,groups.size());
  for (  AlertGroupEntity group : groups) {
    assertFalse(group.isDefault());
  }
  Cluster cluster=m_helper.buildNewCluster(m_clusters,m_serviceFactory,m_componentFactory,m_schFactory,HOSTNAME);
  AlertGroupEntity hdfsGroup=m_dao.findDefaultServiceGroup(cluster.getClusterId(),"HDFS");
  m_dao.remove(hdfsGroup);
  hdfsGroup=m_dao.findDefaultServiceGroup(cluster.getClusterId(),"HDFS");
  assertNull(hdfsGroup);
  AlertDefinitionEntity datanodeProcess=new AlertDefinitionEntity();
  datanodeProcess.setClusterId(cluster.getClusterId());
  datanodeProcess.setDefinitionName("datanode_process");
  datanodeProcess.setServiceName("HDFS");
  datanodeProcess.setComponentName("DATANODE");
  datanodeProcess.setHash(UUID.randomUUID().toString());
  datanodeProcess.setScheduleInterval(60);
  datanodeProcess.setScope(Scope.SERVICE);
  datanodeProcess.setSource("{\"type\" : \"SCRIPT\"}");
  datanodeProcess.setSourceType(SourceType.SCRIPT);
  m_definitionDao.create(datanodeProcess);
  hdfsGroup=m_dao.findDefaultServiceGroup(cluster.getClusterId(),"HDFS");
  assertNotNull(hdfsGroup);
  assertTrue(hdfsGroup.isDefault());
}

</code></pre>

<pre class="type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 */
@Test public void testFindAllGlobalTargets() throws Exception {
  List<AlertTargetEntity> targets=m_dao.findAllGlobalTargets();
  assertNotNull(targets);
  assertEquals(0,targets.size());
  m_helper.createGlobalAlertTarget();
  m_helper.createGlobalAlertTarget();
  m_helper.createGlobalAlertTarget();
  targets=m_dao.findAllGlobalTargets();
  assertEquals(3,targets.size());
}

</code></pre>

<pre class="type-2 type-5 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 */
@Test public void testGlobalTargetAssociations() throws Exception {
  AlertGroupEntity group=m_helper.createAlertGroup(m_cluster.getClusterId(),null);
  group=m_dao.findGroupById(group.getGroupId());
  assertNotNull(group);
  assertEquals(0,group.getAlertTargets().size());
  AlertTargetEntity target=m_helper.createGlobalAlertTarget();
  assertTrue(target.isGlobal());
  group=m_dao.findGroupById(group.getGroupId());
  assertNotNull(group);
  assertEquals(1,group.getAlertTargets().size());
  List<AlertGroupEntity> groups=m_dao.findAllGroups();
  target=m_dao.findTargetById(target.getTargetId());
  assertEquals(groups.size(),target.getAlertGroups().size());
  m_dao.remove(target);
  group=m_dao.findGroupById(group.getGroupId());
  assertNotNull(group);
  assertEquals(0,group.getAlertTargets().size());
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Tests that JPA does the pagination work for us.
 * @throws Exception
 */
@Test public void testAlertNoticePagination() throws Exception {
  Cluster cluster=m_helper.buildNewCluster(m_clusters,m_serviceFactory,m_componentFactory,m_schFactory,HOSTNAME);
  m_alertHelper.populateData(cluster);
  AlertNoticeRequest request=new AlertNoticeRequest();
  request.Pagination=null;
  List<AlertNoticeEntity> notices=m_dao.findAllNotices(request);
  assertEquals(3,notices.size());
  request.Pagination=new PageRequestImpl(StartingPoint.Beginning,2,0,null,null);
  notices=m_dao.findAllNotices(request);
  assertEquals(2,notices.size());
  request.Pagination=new PageRequestImpl(StartingPoint.Beginning,1,2,null,null);
  notices=m_dao.findAllNotices(request);
  assertEquals(1,notices.size());
  request.Pagination=new PageRequestImpl(StartingPoint.Beginning,1,3,null,null);
  notices=m_dao.findAllNotices(request);
  assertEquals(0,notices.size());
}

</code></pre>

<pre class="type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @throws Exception
 */
@Test public void testFindNoticeByUuid() throws Exception {
  List<AlertDefinitionEntity> definitions=createDefinitions();
  AlertDefinitionEntity definition=definitions.get(0);
  AlertHistoryEntity history=new AlertHistoryEntity();
  history.setServiceName(definition.getServiceName());
  history.setClusterId(m_cluster.getClusterId());
  history.setAlertDefinition(definition);
  history.setAlertLabel("Label");
  history.setAlertState(AlertState.OK);
  history.setAlertText("Alert Text");
  history.setAlertTimestamp(System.currentTimeMillis());
  m_alertsDao.create(history);
  AlertTargetEntity target=m_helper.createAlertTarget();
  AlertNoticeEntity notice=new AlertNoticeEntity();
  notice.setUuid(UUID.randomUUID().toString());
  notice.setAlertTarget(target);
  notice.setAlertHistory(history);
  notice.setNotifyState(NotificationState.PENDING);
  m_dao.create(notice);
  AlertNoticeEntity actual=m_dao.findNoticeByUuid(notice.getUuid());
  assertEquals(notice.getNotificationId(),actual.getNotificationId());
  assertNull(m_dao.findNoticeByUuid("DEADBEEF"));
}

</code></pre>

<pre class="type-2 type-5 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 */
@Test public void testFindDefaultGroup() throws Exception {
  List<AlertGroupEntity> groups=m_dao.findAllGroups();
  assertNotNull(groups);
  assertEquals(10,groups.size());
  for (  AlertGroupEntity group : groups) {
    assertFalse(group.isDefault());
  }
  Cluster cluster=m_helper.buildNewCluster(m_clusters,m_serviceFactory,m_componentFactory,m_schFactory,HOSTNAME);
  AlertGroupEntity hdfsGroup=m_dao.findDefaultServiceGroup(cluster.getClusterId(),"HDFS");
  assertNotNull(hdfsGroup);
  assertTrue(hdfsGroup.isDefault());
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
"></span><br>
/** 
 * @throws Exception
 */
@After public void teardown() throws Exception {
  m_injector.getInstance(UnitOfWork.class).end();
  m_injector.getInstance(PersistService.class).stop();
  m_injector=null;
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Tests that the Ambari {@link Predicate} can be converted and submitted to
 * JPA correctly to return a restricted result set.
 * @throws Exception
 */
@Test public void testAlertNoticePredicate() throws Exception {
  Cluster cluster=m_helper.buildNewCluster(m_clusters,m_serviceFactory,m_componentFactory,m_schFactory,HOSTNAME);
  m_alertHelper.populateData(cluster);
  Predicate clusterPredicate=null;
  Predicate hdfsPredicate=null;
  Predicate yarnPredicate=null;
  Predicate adminPredicate=null;
  Predicate adminOrOperatorPredicate=null;
  Predicate pendingPredicate=null;
  Predicate noticeIdPredicate=null;
  clusterPredicate=new PredicateBuilder().property(AlertNoticeResourceProvider.ALERT_NOTICE_CLUSTER_NAME).equals("c1").toPredicate();
  hdfsPredicate=new PredicateBuilder().property(AlertNoticeResourceProvider.ALERT_NOTICE_SERVICE_NAME).equals("HDFS").toPredicate();
  yarnPredicate=new PredicateBuilder().property(AlertNoticeResourceProvider.ALERT_NOTICE_SERVICE_NAME).equals("YARN").toPredicate();
  adminPredicate=new PredicateBuilder().property(AlertNoticeResourceProvider.ALERT_NOTICE_TARGET_NAME).equals("Administrators").toPredicate();
  adminOrOperatorPredicate=new PredicateBuilder().property(AlertNoticeResourceProvider.ALERT_NOTICE_TARGET_NAME).equals("Administrators").or().property(AlertNoticeResourceProvider.ALERT_NOTICE_TARGET_NAME).equals("Operators").toPredicate();
  pendingPredicate=new PredicateBuilder().property(AlertNoticeResourceProvider.ALERT_NOTICE_STATE).equals(NotificationState.PENDING.name()).toPredicate();
  AlertNoticeRequest request=new AlertNoticeRequest();
  request.Predicate=clusterPredicate;
  List<AlertNoticeEntity> notices=m_dao.findAllNotices(request);
  assertEquals(3,notices.size());
  request.Predicate=hdfsPredicate;
  notices=m_dao.findAllNotices(request);
  assertEquals(2,notices.size());
  request.Predicate=yarnPredicate;
  notices=m_dao.findAllNotices(request);
  assertEquals(1,notices.size());
  request.Predicate=adminPredicate;
  notices=m_dao.findAllNotices(request);
  assertEquals(2,notices.size());
  request.Predicate=adminOrOperatorPredicate;
  notices=m_dao.findAllNotices(request);
  assertEquals(3,notices.size());
  request.Predicate=pendingPredicate;
  notices=m_dao.findAllNotices(request);
  assertEquals(1,notices.size());
  noticeIdPredicate=new PredicateBuilder().property(AlertNoticeResourceProvider.ALERT_NOTICE_ID).equals(notices.get(0).getNotificationId()).toPredicate();
  request.Predicate=noticeIdPredicate;
  notices=m_dao.findAllNotices(request);
  assertEquals(1,notices.size());
}

</code></pre>

<pre class="type-4 type-2 type-5 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests that a newly created group is correctly associated with all global
 * targets.
 */
@Test public void testGlobalTargetAssociatedWithNewGroup() throws Exception {
  AlertTargetEntity target1=m_helper.createGlobalAlertTarget();
  AlertTargetEntity target2=m_helper.createGlobalAlertTarget();
  assertTrue(target1.isGlobal());
  assertTrue(target2.isGlobal());
  AlertGroupEntity group=m_helper.createAlertGroup(m_cluster.getClusterId(),null);
  group=m_dao.findGroupById(group.getGroupId());
  assertNotNull(group);
  assertEquals(2,group.getAlertTargets().size());
  Iterator<AlertTargetEntity> iterator=group.getAlertTargets().iterator();
  AlertTargetEntity groupTarget1=iterator.next();
  AlertTargetEntity groupTarget2=iterator.next();
  assertTrue(groupTarget1.isGlobal());
  assertTrue(groupTarget2.isGlobal());
}

</code></pre>

<pre class="type-2 type-5 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests that JPA does the sorting work for us.
 * @throws Exception
 */
@Test public void testAlertNoticeSorting() throws Exception {
  Cluster cluster=m_helper.buildNewCluster(m_clusters,m_serviceFactory,m_componentFactory,m_schFactory,HOSTNAME);
  m_alertHelper.populateData(cluster);
  List<SortRequestProperty> sortProperties=new ArrayList<SortRequestProperty>();
  SortRequest sortRequest=new SortRequestImpl(sortProperties);
  AlertNoticeRequest request=new AlertNoticeRequest();
  request.Sort=sortRequest;
  Predicate clusterPredicate=new PredicateBuilder().property(AlertNoticeResourceProvider.ALERT_NOTICE_CLUSTER_NAME).equals("c1").toPredicate();
  request.Predicate=clusterPredicate;
  sortProperties.add(new SortRequestProperty(AlertNoticeResourceProvider.ALERT_NOTICE_ID,Order.ASC));
  List<AlertNoticeEntity> notices=m_dao.findAllNotices(request);
  assertEquals(3,notices.size());
  long lastId=0L;
  for (  AlertNoticeEntity notice : notices) {
    if (lastId == 0L) {
      lastId=notice.getNotificationId();
      continue;
    }
    long currentId=notice.getNotificationId();
    assertTrue(lastId < currentId);
    lastId=currentId;
  }
  sortProperties.clear();
  sortProperties.add(new SortRequestProperty(AlertNoticeResourceProvider.ALERT_NOTICE_ID,Order.DESC));
  notices=m_dao.findAllNotices(request);
  assertEquals(3,notices.size());
  lastId=0L;
  for (  AlertNoticeEntity notice : notices) {
    if (lastId == 0L) {
      lastId=notice.getNotificationId();
      continue;
    }
    long currentId=notice.getNotificationId();
    assertTrue(lastId > currentId);
    lastId=currentId;
  }
}

</code></pre>

<pre class="type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 */
@Test public void testDeleteAssociatedTarget() throws Exception {
  AlertTargetEntity target=m_helper.createAlertTarget();
  Set<AlertTargetEntity> targets=new HashSet<AlertTargetEntity>();
  targets.add(target);
  AlertGroupEntity group=m_helper.createAlertGroup(m_cluster.getClusterId(),targets);
  assertEquals(1,group.getAlertTargets().size());
  target=m_dao.findTargetById(target.getTargetId());
  m_dao.refresh(target);
  assertNotNull(target);
  assertEquals(1,target.getAlertGroups().size());
  m_dao.remove(target);
  target=m_dao.findTargetById(target.getTargetId());
  assertNull(target);
  group=m_dao.findGroupById(group.getGroupId());
  assertNotNull(group);
  assertEquals(0,group.getAlertTargets().size());
}

</code></pre>

<pre class="type-2 type-5 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 */
@Test public void testDeleteTarget() throws Exception {
  AlertTargetEntity target=m_helper.createAlertTarget();
  target=m_dao.findTargetById(target.getTargetId());
  assertTrue(target.getAlertStates().size() > 0);
  assertNotNull(target);
  m_dao.remove(target);
  target=m_dao.findTargetById(target.getTargetId());
  assertNull(target);
}

</code></pre>

<pre class="type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @throws Exception
 */
@Test public void testFindGroupsByIds() throws Exception {
  List<AlertGroupEntity> groups=m_dao.findAllGroups();
  assertNotNull(groups);
  assertEquals(10,groups.size());
  List<Long> ids=new ArrayList<Long>();
  ids.add(groups.get(0).getGroupId());
  ids.add(groups.get(1).getGroupId());
  ids.add(99999L);
  groups=m_dao.findGroupsById(ids);
  assertEquals(2,groups.size());
}

</code></pre>

<pre class="type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 */
@Test public void testDeleteTargetWithNotices() throws Exception {
  AlertTargetEntity target=m_helper.createAlertTarget();
  List<AlertDefinitionEntity> definitions=createDefinitions();
  AlertDefinitionEntity definition=definitions.get(0);
  AlertHistoryEntity history=new AlertHistoryEntity();
  history.setServiceName(definition.getServiceName());
  history.setClusterId(m_cluster.getClusterId());
  history.setAlertDefinition(definition);
  history.setAlertLabel("Label");
  history.setAlertState(AlertState.OK);
  history.setAlertText("Alert Text");
  history.setAlertTimestamp(System.currentTimeMillis());
  m_alertsDao.create(history);
  AlertNoticeEntity notice=new AlertNoticeEntity();
  notice.setUuid(UUID.randomUUID().toString());
  notice.setAlertTarget(target);
  notice.setAlertHistory(history);
  notice.setNotifyState(NotificationState.PENDING);
  m_dao.create(notice);
  notice=m_dao.findNoticeById(notice.getNotificationId());
  assertEquals(target.getTargetId(),notice.getAlertTarget().getTargetId());
  target=m_dao.findTargetById(target.getTargetId());
  m_dao.remove(target);
  notice=m_dao.findNoticeById(notice.getNotificationId());
  assertNull(notice);
}

</code></pre>

<pre class="type-4 type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 */
@Test public void testFindTargetByName() throws Exception {
  List<AlertTargetEntity> targets=m_dao.findAllTargets();
  assertNotNull(targets);
  AlertTargetEntity target=targets.get(3);
  AlertTargetEntity actual=m_dao.findTargetByName(target.getTargetName());
  assertEquals(target,actual);
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 */
@Test public void testUpdateGroup() throws Exception {
  AlertTargetEntity target=m_helper.createAlertTarget();
  Set<AlertTargetEntity> targets=new HashSet<AlertTargetEntity>();
  targets.add(target);
  String groupName="Group Name " + System.currentTimeMillis();
  AlertGroupEntity group=m_helper.createAlertGroup(m_cluster.getClusterId(),null);
  group=m_dao.findGroupById(group.getGroupId());
  group.setGroupName(groupName + "FOO");
  group.setDefault(true);
  m_dao.merge(group);
  group=m_dao.findGroupById(group.getGroupId());
  assertEquals(groupName + "FOO",group.getGroupName());
  assertEquals(true,group.isDefault());
  assertEquals(0,group.getAlertDefinitions().size());
  assertEquals(0,group.getAlertTargets().size());
  group.addAlertTarget(target);
  m_dao.merge(group);
  group=m_dao.findGroupById(group.getGroupId());
  assertEquals(targets,group.getAlertTargets());
}

</code></pre>

<pre class="type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
/** 
 */
@Test public void testCreateGlobalTarget() throws Exception {
  AlertTargetEntity target=m_helper.createGlobalAlertTarget();
  assertTrue(target.isGlobal());
  target=m_dao.findTargetByName(target.getTargetName());
  assertTrue(target.isGlobal());
}

</code></pre>

<pre class="type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 */
@Test public void testDeleteGroup() throws Exception {
  int targetCount=m_dao.findAllTargets().size();
  AlertGroupEntity group=m_helper.createAlertGroup(m_cluster.getClusterId(),null);
  AlertTargetEntity target=m_helper.createAlertTarget();
  assertEquals(targetCount + 1,m_dao.findAllTargets().size());
  group=m_dao.findGroupById(group.getGroupId());
  assertNotNull(group);
  assertNotNull(group.getAlertTargets());
  assertEquals(0,group.getAlertTargets().size());
  group.addAlertTarget(target);
  m_dao.merge(group);
  group=m_dao.findGroupById(group.getGroupId());
  assertNotNull(group);
  assertNotNull(group.getAlertTargets());
  assertEquals(1,group.getAlertTargets().size());
  m_dao.remove(group);
  group=m_dao.findGroupById(group.getGroupId());
  assertNull(group);
  target=m_dao.findTargetById(target.getTargetId());
  assertNotNull(target);
  assertEquals(targetCount + 1,m_dao.findAllTargets().size());
}

</code></pre>

<pre class="type-2 type-5 type-1 type-11 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests that when creating a new {@link AlertDefinitionEntity}, if the group
 * for its service does not exist, then it will not be created if the service
 * is invalid.
 */
@Test(expected=AmbariException.class) public void testDefaultGroupInvalidServiceNoCreation() throws Exception {
  List<AlertGroupEntity> groups=m_dao.findAllGroups();
  assertNotNull(groups);
  assertEquals(10,groups.size());
  for (  AlertGroupEntity group : groups) {
    assertFalse(group.isDefault());
  }
  Cluster cluster=m_helper.buildNewCluster(m_clusters,m_serviceFactory,m_componentFactory,m_schFactory,HOSTNAME);
  assertEquals(12,m_dao.findAllGroups().size());
  AlertDefinitionEntity datanodeProcess=new AlertDefinitionEntity();
  datanodeProcess.setClusterId(cluster.getClusterId());
  datanodeProcess.setDefinitionName("datanode_process");
  datanodeProcess.setServiceName("INVALID");
  datanodeProcess.setComponentName("DATANODE");
  datanodeProcess.setHash(UUID.randomUUID().toString());
  datanodeProcess.setScheduleInterval(60);
  datanodeProcess.setScope(Scope.SERVICE);
  datanodeProcess.setSource("{\"type\" : \"SCRIPT\"}");
  datanodeProcess.setSourceType(SourceType.SCRIPT);
  try {
    m_definitionDao.create(datanodeProcess);
  }
  finally {
    assertEquals(12,m_dao.findAllGroups().size());
  }
}

</code></pre>

<pre class="type-4 type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 */
@Test public void testCreateTarget() throws Exception {
  int targetCount=m_dao.findAllTargets().size();
  AlertTargetEntity target=m_helper.createAlertTarget();
  Set<AlertTargetEntity> targets=new HashSet<AlertTargetEntity>();
  targets.add(target);
  AlertGroupEntity group=m_helper.createAlertGroup(m_cluster.getClusterId(),targets);
  AlertTargetEntity actual=m_dao.findTargetById(target.getTargetId());
  assertNotNull(actual);
  assertEquals(target.getTargetName(),actual.getTargetName());
  assertEquals(target.getDescription(),actual.getDescription());
  assertEquals(target.getNotificationType(),actual.getNotificationType());
  assertEquals(target.getProperties(),actual.getProperties());
  assertEquals(false,actual.isGlobal());
  assertNotNull(actual.getAlertGroups());
  Iterator<AlertGroupEntity> iterator=actual.getAlertGroups().iterator();
  AlertGroupEntity actualGroup=iterator.next();
  assertEquals(group,actualGroup);
  assertEquals(targetCount + 1,m_dao.findAllTargets().size());
}

</code></pre>

<pre class="type-2 type-5 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 */
@Test public void testGroupDefinitions() throws Exception {
  List<AlertDefinitionEntity> definitions=createDefinitions();
  AlertGroupEntity group=m_helper.createAlertGroup(m_cluster.getClusterId(),null);
  group=m_dao.findGroupById(group.getGroupId());
  assertNotNull(group);
  for (  AlertDefinitionEntity definition : definitions) {
    group.addAlertDefinition(definition);
  }
  m_dao.merge(group);
  group=m_dao.findGroupByName(group.getGroupName());
  assertEquals(definitions.size(),group.getAlertDefinitions().size());
  for (  AlertDefinitionEntity definition : definitions) {
    assertTrue(group.getAlertDefinitions().contains(definition));
  }
  m_definitionDao.refresh(definitions.get(0));
  m_definitionDao.remove(definitions.get(0));
  definitions.remove(0);
  group=m_dao.findGroupByName(group.getGroupName());
  assertEquals(definitions.size(),group.getAlertDefinitions().size());
  for (  AlertDefinitionEntity definition : definitions) {
    assertTrue(group.getAlertDefinitions().contains(definition));
  }
}

</code></pre>

<pre class="type-4 type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests finding groups by a definition ID that they are associatd with in
 * order to get any targets associated with that group. This exercises the
 * bi-directional
 * @throws Exception
 */
@Test public void testFindTargetsViaGroupsByDefinition() throws Exception {
  List<AlertDefinitionEntity> definitions=createDefinitions();
  AlertGroupEntity group=m_helper.createAlertGroup(m_cluster.getClusterId(),null);
  group=m_dao.findGroupById(group.getGroupId());
  assertNotNull(group);
  AlertDefinitionEntity definition=definitions.get(0);
  group.addAlertDefinition(definition);
  m_dao.merge(group);
  List<AlertTargetEntity> targets=m_dao.findAllTargets();
  AlertTargetEntity target=targets.get(0);
  Set<AlertTargetEntity> setTargets=Collections.singleton(target);
  group.setAlertTargets(setTargets);
  m_dao.merge(group);
  List<AlertGroupEntity> groups=m_dao.findGroupsByDefinition(definition);
  assertEquals(2,groups.size());
  group=groups.get(groups.indexOf(group));
  assertEquals(1,group.getAlertTargets().size());
  assertEquals(target.getTargetId(),group.getAlertTargets().iterator().next().getTargetId());
}

</code></pre>

<pre class="type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 */
@Test public void testCreateGroup() throws Exception {
  AlertTargetEntity target=m_helper.createAlertTarget();
  Set<AlertTargetEntity> targets=new HashSet<AlertTargetEntity>();
  targets.add(target);
  AlertGroupEntity group=m_helper.createAlertGroup(m_cluster.getClusterId(),targets);
  AlertGroupEntity actual=m_dao.findGroupById(group.getGroupId());
  assertNotNull(group);
  assertEquals(group.getGroupName(),actual.getGroupName());
  assertEquals(group.isDefault(),actual.isDefault());
  assertEquals(group.getAlertTargets(),actual.getAlertTargets());
  assertEquals(group.getAlertDefinitions(),actual.getAlertDefinitions());
}

</code></pre>

<pre class="type-4 type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 */
@Test public void testFindGroupByName() throws Exception {
  List<AlertGroupEntity> groups=m_dao.findAllGroups();
  assertNotNull(groups);
  AlertGroupEntity group=groups.get(3);
  AlertGroupEntity actual=m_dao.findGroupByName(group.getClusterId(),group.getGroupName());
  assertEquals(group,actual);
}

</code></pre>

<pre class="type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 */
@Test public void testFindAllGroups() throws Exception {
  List<AlertGroupEntity> groups=m_dao.findAllGroups();
  assertNotNull(groups);
  assertEquals(10,groups.size());
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 */
@Before public void setup() throws Exception {
  m_injector=Guice.createInjector(new InMemoryDefaultTestModule());
  m_injector.getInstance(GuiceJpaInitializer.class);
  m_injector.getInstance(UnitOfWork.class).begin();
  m_dao=m_injector.getInstance(AlertDispatchDAO.class);
  m_alertsDao=m_injector.getInstance(AlertsDAO.class);
  m_definitionDao=m_injector.getInstance(AlertDefinitionDAO.class);
  m_helper=m_injector.getInstance(OrmTestHelper.class);
  m_serviceFactory=m_injector.getInstance(ServiceFactory.class);
  m_componentFactory=m_injector.getInstance(ServiceComponentFactory.class);
  m_schFactory=m_injector.getInstance(ServiceComponentHostFactory.class);
  m_clusters=m_injector.getInstance(Clusters.class);
  m_alertHelper=m_injector.getInstance(AlertDaoHelper.class);
  EventBusSynchronizer.synchronizeAmbariEventPublisher(m_injector);
  m_cluster=m_clusters.getClusterById(m_helper.createCluster());
  m_helper.initializeClusterWithStack(m_cluster);
  Set<AlertTargetEntity> targets=createTargets();
  for (int i=0; i < 10; i++) {
    AlertGroupEntity group=new AlertGroupEntity();
    group.setDefault(false);
    group.setGroupName("Group Name " + i);
    group.setClusterId(m_cluster.getClusterId());
    for (    AlertTargetEntity alertTarget : targets) {
      group.addAlertTarget(alertTarget);
    }
    m_dao.create(group);
  }
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
