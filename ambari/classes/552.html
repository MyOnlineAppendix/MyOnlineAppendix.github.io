<h3 style="margin:0px">Class: org.apache.ambari.shell.commands.ClusterCommandsTest (17 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(17)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(9)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(8)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(2)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignForInvalidHostGroup(){
  Map<String,List<String>> map=singletonMap("group1",asList("host","host2"));
  ReflectionTestUtils.setField(clusterCommands,"hostGroups",map);
  when(client.getHostNames()).thenReturn(singletonMap("host3","HEALTHY"));
  String result=clusterCommands.assign(new Host("host3"),"group0");
  assertEquals("group0 is not a valid host group",result);
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDeleteCluster() throws HttpResponseException {
  when(context.getCluster()).thenReturn("cluster");
  when(responseException.getMessage()).thenReturn("msg");
  String result=clusterCommands.deleteCluster();
  verify(client).deleteCluster("cluster");
  verify(context).getCluster();
  assertEquals("Successfully deleted the cluster",result);
}

</code></pre>

<pre class="type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testIsClusterPreviewCommandAvailable(){
  when(context.isFocusOnClusterBuild()).thenReturn(true);
  ReflectionTestUtils.setField(clusterCommands,"hostGroups",singletonMap("group1",asList("host1")));
  boolean result=clusterCommands.isClusterPreviewCommandAvailable();
  assertTrue(result);
}

</code></pre>

<pre class="type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testCreateCluster() throws HttpResponseException {
  String blueprint="blueprint";
  Map<String,List<String>> map=singletonMap("group1",asList("host","host2"));
  ReflectionTestUtils.setField(clusterCommands,"hostGroups",map);
  when(context.getFocusValue()).thenReturn(blueprint);
  when(client.getClusterName()).thenReturn("cluster");
  String result=clusterCommands.createCluster(false);
  verify(client).createCluster(blueprint,blueprint,map);
  verify(context).resetFocus();
  assertFalse(result.contains("Failed"));
  assertTrue(result.contains("Successfully"));
}

</code></pre>

<pre class="type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testIsClusterBuildCommandAvailableAndFocusOnBuild(){
  when(context.isConnectedToCluster()).thenReturn(false);
  when(context.isFocusOnClusterBuild()).thenReturn(true);
  when(context.areBlueprintsAvailable()).thenReturn(true);
  boolean result=clusterCommands.isClusterBuildCommandAvailable();
  assertFalse(result);
}

</code></pre>

<pre class="type-4 type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAutoAssignForEmptyResult() throws InvalidHostGroupHostAssociation {
  Map<String,List<String>> hostGroups=singletonMap("group1",asList("host1"));
  ReflectionTestUtils.setField(clusterCommands,"hostGroups",hostGroups);
  when(context.getFocusValue()).thenReturn("blueprint");
  when(client.recommendAssignments("blueprint")).thenReturn(new HashMap<String,List<String>>());
  clusterCommands.autoAssign();
  Map<String,List<String>> result=(Map<String,List<String>>)ReflectionTestUtils.getField(clusterCommands,"hostGroups");
  assertEquals(hostGroups,result);
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignForValidHostGroup(){
  Map<String,List<String>> map=new HashMap<String,List<String>>();
  map.put("group1",new ArrayList<String>());
  ReflectionTestUtils.setField(clusterCommands,"hostGroups",map);
  when(client.getHostNames()).thenReturn(singletonMap("host3","HEALTHY"));
  String result=clusterCommands.assign(new Host("host3"),"group1");
  assertEquals("host3 has been added to group1",result);
}

</code></pre>

<pre class="type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testCreateClusterForException() throws HttpResponseException {
  String blueprint="blueprint";
  Map<String,List<String>> map=singletonMap("group1",asList("host","host2"));
  ReflectionTestUtils.setField(clusterCommands,"hostGroups",map);
  when(context.getFocusValue()).thenReturn(blueprint);
  doThrow(responseException).when(client).createCluster(blueprint,blueprint,map);
  doThrow(responseException).when(client).deleteCluster(blueprint);
  String result=clusterCommands.createCluster(false);
  verify(client).createCluster(blueprint,blueprint,map);
  verify(client).getHostGroups(blueprint);
  verify(client).deleteCluster(blueprint);
  assertTrue(result.contains("Failed"));
}

</code></pre>

<pre class="type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testIsClusterBuildCommandAvailableAndNoBlueprints(){
  when(context.isConnectedToCluster()).thenReturn(false);
  when(context.isFocusOnClusterBuild()).thenReturn(false);
  when(context.areBlueprintsAvailable()).thenReturn(false);
  boolean result=clusterCommands.isClusterBuildCommandAvailable();
  assertFalse(result);
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDeleteClusterForException() throws HttpResponseException {
  when(context.getCluster()).thenReturn("cluster");
  when(responseException.getMessage()).thenReturn("msg");
  doThrow(responseException).when(client).deleteCluster("cluster");
  String result=clusterCommands.deleteCluster();
  verify(client).deleteCluster("cluster");
  verify(context).getCluster();
  verify(responseException).getMessage();
  assertEquals("Could not delete the cluster: msg",result);
}

</code></pre>

<pre class="type-4 type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAutoAssign() throws InvalidHostGroupHostAssociation {
  Map<String,List<String>> hostGroups=singletonMap("group1",asList("host1"));
  Map<String,List<String>> newAssignments=singletonMap("group1",asList("host1"));
  ReflectionTestUtils.setField(clusterCommands,"hostGroups",hostGroups);
  when(context.getFocusValue()).thenReturn("blueprint");
  when(client.recommendAssignments("blueprint")).thenReturn(newAssignments);
  clusterCommands.autoAssign();
  Map<String,List<String>> result=(Map<String,List<String>>)ReflectionTestUtils.getField(clusterCommands,"hostGroups");
  assertEquals(newAssignments,result);
  verify(context).setHint(Hints.CREATE_CLUSTER);
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBuildCluster(){
  Map<String,String> hostNames=singletonMap("host1","HEALTHY");
  Map<String,List<String>> map=singletonMap("group1",asList("comp1","comp2"));
  when(client.doesBlueprintExist("id")).thenReturn(true);
  when(client.getBlueprintMap("id")).thenReturn(map);
  when(context.getFocusValue()).thenReturn("id");
  when(client.getHostNames()).thenReturn(hostNames);
  String result=clusterCommands.buildCluster(new Blueprint("id"));
  verify(client).doesBlueprintExist("id");
  verify(client).getBlueprintMap("id");
  verify(client).getHostGroups("id");
  assertEquals(String.format("%s\n%s",renderSingleMap(hostNames,"HOSTNAME","STATE"),renderMultiValueMap(map,"HOSTGROUP","COMPONENT")),result);
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBuildClusterForNonExistingBlueprint(){
  when(client.doesBlueprintExist("id")).thenReturn(false);
  String result=clusterCommands.buildCluster(new Blueprint("id"));
  verify(client).doesBlueprintExist("id");
  assertEquals("Not a valid blueprint id",result);
}

</code></pre>

<pre class="type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testIsClusterBuildCommandAvailable(){
  when(context.isConnectedToCluster()).thenReturn(false);
  when(context.isFocusOnClusterBuild()).thenReturn(false);
  when(context.areBlueprintsAvailable()).thenReturn(true);
  boolean result=clusterCommands.isClusterBuildCommandAvailable();
  assertTrue(result);
}

</code></pre>

<pre class="type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testIsClusterResetCommandAvailable(){
  when(context.isFocusOnClusterBuild()).thenReturn(true);
  ReflectionTestUtils.setField(clusterCommands,"hostGroups",singletonMap("group1",asList("host1")));
  boolean result=clusterCommands.isClusterResetCommandAvailable();
  assertTrue(result);
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignForInvalidHost(){
  Map<String,List<String>> map=new HashMap<String,List<String>>();
  map.put("group1",new ArrayList<String>());
  ReflectionTestUtils.setField(clusterCommands,"hostGroups",map);
  when(client.getHostNames()).thenReturn(singletonMap("host2","HEALTHY"));
  String result=clusterCommands.assign(new Host("host3"),"group1");
  assertEquals("host3 is not a valid hostname",result);
}

</code></pre>

<pre class="type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testIsClusterPreviewCommandAvailableForNoAssignments(){
  when(context.isFocusOnClusterBuild()).thenReturn(true);
  ReflectionTestUtils.setField(clusterCommands,"hostGroups",singletonMap("group1",emptyList()));
  boolean result=clusterCommands.isClusterPreviewCommandAvailable();
  assertFalse(result);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
