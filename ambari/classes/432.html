<h3 style="margin:0px">Class: org.apache.ambari.server.stack.StackManagerTest (20 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(19)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(15)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(12)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(11)</kbd></button>&nbsp;<button id="11"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('11')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-11"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(9)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(6)</kbd></button>&nbsp;<button id="13"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('13')" data-toggle="tooltip" title="Verifies assertions inside branch conditions"><kbd id="tag-13"class="label-info"style="display: inline-block;font-size:7pt" >BranchVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetsStacks() throws Exception {
  Collection<StackInfo> stacks=stackManager.getStacks();
  assertEquals(19,stacks.size());
}

</code></pre>

<pre class="type-4 type-2 type-5 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClientConfigFilesInheritance() throws Exception {
  StackInfo stack=stackManager.getStack("HDP","2.0.6");
  ServiceInfo zkService=stack.getService("ZOOKEEPER");
  List<ComponentInfo> components=zkService.getComponents();
  assertTrue(components.size() == 2);
  ComponentInfo componentInfo=components.get(1);
  List<ClientConfigFileDefinition> clientConfigs=componentInfo.getClientConfigFiles();
  assertEquals(2,clientConfigs.size());
  assertEquals("zookeeper-env",clientConfigs.get(0).getDictionaryName());
  assertEquals("zookeeper-env.sh",clientConfigs.get(0).getFileName());
  assertEquals("env",clientConfigs.get(0).getType());
  assertEquals("zookeeper-log4j",clientConfigs.get(1).getDictionaryName());
  assertEquals("log4j.properties",clientConfigs.get(1).getFileName());
  assertEquals("env",clientConfigs.get(1).getType());
}

</code></pre>

<pre class="type-4 type-2 type-5 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStackServiceExtension(){
  StackInfo stack=stackManager.getStack("OTHER","1.0");
  assertNotNull(stack);
  assertEquals("OTHER",stack.getName());
  assertEquals("1.0",stack.getVersion());
  Collection<ServiceInfo> services=stack.getServices();
  assertEquals(3,services.size());
  assertEquals(6,stack.getService("HDFS").getComponents().size());
  ServiceInfo sqoopService=stack.getService("SQOOP2");
  assertNotNull(sqoopService);
  assertEquals("Extended SQOOP",sqoopService.getComment());
  assertEquals("Extended Version",sqoopService.getVersion());
  assertNull(sqoopService.getServicePackageFolder());
  Collection<ComponentInfo> components=sqoopService.getComponents();
  assertEquals(1,components.size());
  ComponentInfo component=components.iterator().next();
  assertEquals("SQOOP",component.getName());
  StackInfo baseStack=stackManager.getStack("HDP","2.1.1");
  ServiceInfo baseSqoopService=baseStack.getService("SQOOP");
  assertEquals(baseSqoopService.isDeleted(),sqoopService.isDeleted());
  assertEquals(baseSqoopService.getAlertsFile(),sqoopService.getAlertsFile());
  assertEquals(baseSqoopService.getClientComponent(),sqoopService.getClientComponent());
  assertEquals(baseSqoopService.getCommandScript(),sqoopService.getCommandScript());
  assertEquals(baseSqoopService.getConfigDependencies(),sqoopService.getConfigDependencies());
  assertEquals(baseSqoopService.getConfigDir(),sqoopService.getConfigDir());
  assertEquals(baseSqoopService.getConfigDependenciesWithComponents(),sqoopService.getConfigDependenciesWithComponents());
  assertEquals(baseSqoopService.getConfigTypeAttributes(),sqoopService.getConfigTypeAttributes());
  assertEquals(baseSqoopService.getCustomCommands(),sqoopService.getCustomCommands());
  assertEquals(baseSqoopService.getExcludedConfigTypes(),sqoopService.getExcludedConfigTypes());
  assertEquals(baseSqoopService.getProperties(),sqoopService.getProperties());
  assertEquals(baseSqoopService.getMetrics(),sqoopService.getMetrics());
  assertNull(baseSqoopService.getMetricsFile());
  assertNull(sqoopService.getMetricsFile());
  assertEquals(baseSqoopService.getOsSpecifics(),sqoopService.getOsSpecifics());
  assertEquals(baseSqoopService.getRequiredServices(),sqoopService.getRequiredServices());
  assertEquals(baseSqoopService.getSchemaVersion(),sqoopService.getSchemaVersion());
  ServiceInfo stormService=stack.getService("STORM");
  assertNotNull(stormService);
  assertEquals("STORM",stormService.getName());
  ServiceInfo baseStormService=baseStack.getService("STORM");
  assertEquals("Apache Hadoop Stream processing framework (Extended)",stormService.getComment());
  assertEquals("New version",stormService.getVersion());
  String packageDir=StringUtils.join(new String[]{"stacks","OTHER","1.0","services","STORM","package"},File.separator);
  assertEquals(packageDir,stormService.getServicePackageFolder());
  List<ComponentInfo> stormServiceComponents=stormService.getComponents();
  List<ComponentInfo> baseStormServiceComponents=baseStormService.getComponents();
  assertEquals(new HashSet<ComponentInfo>(stormServiceComponents),new HashSet<ComponentInfo>(baseStormServiceComponents));
  assertEquals(baseStormService.isDeleted(),stormService.isDeleted());
  assertEquals(baseStormService.getAlertsFile(),stormService.getAlertsFile());
  assertEquals(baseStormService.getClientComponent(),stormService.getClientComponent());
  assertEquals(baseStormService.getCommandScript(),stormService.getCommandScript());
  assertEquals(baseStormService.getConfigDependencies(),stormService.getConfigDependencies());
  assertEquals(baseStormService.getConfigDir(),stormService.getConfigDir());
  assertEquals(baseStormService.getConfigDependenciesWithComponents(),stormService.getConfigDependenciesWithComponents());
  assertEquals(baseStormService.getConfigTypeAttributes(),stormService.getConfigTypeAttributes());
  assertEquals(baseStormService.getCustomCommands(),stormService.getCustomCommands());
  assertEquals(baseStormService.getExcludedConfigTypes(),stormService.getExcludedConfigTypes());
  assertEquals(baseStormService.getProperties(),stormService.getProperties());
  assertEquals(baseStormService.getMetrics(),stormService.getMetrics());
  assertNotNull(baseStormService.getMetricsFile());
  assertNotNull(stormService.getMetricsFile());
  assertFalse(baseStormService.getMetricsFile().equals(stormService.getMetricsFile()));
  assertEquals(baseStormService.getOsSpecifics(),stormService.getOsSpecifics());
  assertEquals(baseStormService.getRequiredServices(),stormService.getRequiredServices());
  assertEquals(baseStormService.getSchemaVersion(),stormService.getSchemaVersion());
}

</code></pre>

<pre class="type-4 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testMergeRoleCommandOrder() throws Exception {
  StackInfo stack=stackManager.getStack("HDP","2.1.1");
  Map<String,Object> roleCommandOrder=stack.getRoleCommandOrder().getContent();
  assertTrue(roleCommandOrder.containsKey("optional_glusterfs"));
  assertTrue(roleCommandOrder.containsKey("general_deps"));
  assertTrue(roleCommandOrder.containsKey("optional_no_glusterfs"));
  assertTrue(roleCommandOrder.containsKey("namenode_optional_ha"));
  assertTrue(roleCommandOrder.containsKey("resourcemanager_optional_ha"));
  Map<String,Object> generalDeps=(Map<String,Object>)roleCommandOrder.get("general_deps");
  assertTrue(generalDeps.containsKey("HBASE_MASTER-START"));
  assertTrue(generalDeps.containsKey("HBASE_REGIONSERVER-START"));
  Map<String,Object> optionalNoGlusterfs=(Map<String,Object>)roleCommandOrder.get("optional_no_glusterfs");
  assertTrue(optionalNoGlusterfs.containsKey("SECONDARY_NAMENODE-START"));
  ArrayList<String> hbaseMasterStartValues=(ArrayList<String>)generalDeps.get("HBASE_MASTER-START");
  assertTrue(hbaseMasterStartValues.get(0).equals("ZOOKEEPER_SERVER-START"));
  assertTrue(optionalNoGlusterfs.containsKey("NAMENODE-STOP"));
  ArrayList<String> nameNodeStopValues=(ArrayList<String>)optionalNoGlusterfs.get("NAMENODE-STOP");
  assertTrue(nameNodeStopValues.contains("JOBTRACKER-STOP"));
  assertTrue(nameNodeStopValues.contains("CUSTOM_MASTER-STOP"));
  assertTrue(generalDeps.containsKey("CUSTOM_MASTER-START"));
  ArrayList<String> customMasterStartValues=(ArrayList<String>)generalDeps.get("CUSTOM_MASTER-START");
  assertTrue(customMasterStartValues.contains("ZOOKEEPER_SERVER-START"));
  assertTrue(customMasterStartValues.contains("NAMENODE-START"));
}

</code></pre>

<pre class="type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testInheritanceAfterComponentDeletion(){
  StackInfo stack=stackManager.getStack("HDP","2.0.6");
  ServiceInfo yarnService=stack.getService("HBASE");
  assertNull(yarnService.getComponentByName("HBASE_CLIENT"));
  stack=stackManager.getStack("HDP","2.0.6.1");
  yarnService=stack.getService("HBASE");
  assertNull(yarnService.getComponentByName("HBASE_CLIENT"));
  stack=stackManager.getStack("HDP","2.0.8");
  yarnService=stack.getService("HBASE");
  assertNotNull(yarnService.getComponentByName("HBASE_CLIENT"));
}

</code></pre>

<pre class="type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHDFSServiceContainsMetricsFile() throws Exception {
  StackInfo stack=stackManager.getStack("HDP","2.0.6");
  ServiceInfo hdfsService=stack.getService("HDFS");
  assertEquals("HDFS",hdfsService.getName());
  assertNotNull(hdfsService.getMetricsFile());
}

</code></pre>

<pre class="type-4 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testServicesWithRangerPluginRoleCommandOrder() throws AmbariException {
  String stackRoot=ClassLoader.getSystemClassLoader().getResource("stacks").getPath().replace("test-classes","classes");
  String commonServices=ClassLoader.getSystemClassLoader().getResource("common-services").getPath().replace("test-classes","classes");
  MetainfoDAO metaInfoDao=createNiceMock(MetainfoDAO.class);
  StackDAO stackDao=createNiceMock(StackDAO.class);
  ActionMetadata actionMetadata=createNiceMock(ActionMetadata.class);
  Configuration config=createNiceMock(Configuration.class);
  expect(config.getSharedResourcesDirPath()).andReturn(ClassLoader.getSystemClassLoader().getResource("").getPath()).anyTimes();
  replay(config,metaInfoDao,stackDao,actionMetadata);
  OsFamily osFamily=new OsFamily(config);
  StackManager stackManager=new StackManager(new File(stackRoot),new File(commonServices),osFamily,metaInfoDao,actionMetadata,stackDao);
  String rangerUserSyncRoleCommand=Role.RANGER_USERSYNC + "-" + RoleCommand.START;
  String rangerAdminRoleCommand=Role.RANGER_ADMIN + "-" + RoleCommand.START;
  String zookeeperServerRoleCommand=Role.ZOOKEEPER_SERVER + "-" + RoleCommand.START;
  String nodeManagerRoleCommand=Role.NODEMANAGER + "-" + RoleCommand.START;
  String mySqlServerRoleCommand=Role.MYSQL_SERVER + "-" + RoleCommand.START;
  StackInfo hdp=stackManager.getStack("HDP","2.3");
  Map<String,Object> rco=hdp.getRoleCommandOrder().getContent();
  Map<String,Object> generalDeps=(Map<String,Object>)rco.get("general_deps");
  Map<String,Object> optionalNoGlusterfs=(Map<String,Object>)rco.get("optional_no_glusterfs");
  String nameNodeRoleCommand=Role.NAMENODE + "-" + RoleCommand.START;
  ArrayList<String> nameNodeBlockers=(ArrayList<String>)optionalNoGlusterfs.get(nameNodeRoleCommand);
  assertTrue(nameNodeRoleCommand + " should be dependent of " + rangerUserSyncRoleCommand,nameNodeBlockers.contains(rangerUserSyncRoleCommand));
  String dataNodeRoleCommand=Role.DATANODE + "-" + RoleCommand.START;
  ArrayList<String> dataNodeBlockers=(ArrayList<String>)optionalNoGlusterfs.get(dataNodeRoleCommand);
  assertTrue(dataNodeRoleCommand + " should be dependent of " + rangerUserSyncRoleCommand,dataNodeBlockers.contains(rangerUserSyncRoleCommand));
  String resourceManagerCommandRoleCommand=Role.RESOURCEMANAGER + "-" + RoleCommand.START;
  ArrayList<String> resourceManagerBlockers=(ArrayList<String>)generalDeps.get(resourceManagerCommandRoleCommand);
  assertTrue(resourceManagerCommandRoleCommand + " should be dependent of " + rangerUserSyncRoleCommand,resourceManagerBlockers.contains(rangerUserSyncRoleCommand));
  String hbaseRoleCommand=Role.HBASE_MASTER + "-" + RoleCommand.START;
  ArrayList<String> hbaseBlockers=(ArrayList<String>)generalDeps.get(hbaseRoleCommand);
  assertTrue(hbaseRoleCommand + " should be dependent of " + rangerUserSyncRoleCommand,hbaseBlockers.contains(rangerUserSyncRoleCommand));
  assertTrue(hbaseRoleCommand + " should be dependent of " + zookeeperServerRoleCommand,hbaseBlockers.contains(zookeeperServerRoleCommand));
  String knoxRoleCommand=Role.KNOX_GATEWAY + "-" + RoleCommand.START;
  ArrayList<String> knoxBlockers=(ArrayList<String>)generalDeps.get(knoxRoleCommand);
  assertTrue(knoxRoleCommand + " should be dependent of " + rangerUserSyncRoleCommand,knoxBlockers.contains(rangerUserSyncRoleCommand));
  String kafkaRoleCommand=Role.KAFKA_BROKER + "-" + RoleCommand.START;
  ArrayList<String> kafkaBlockers=(ArrayList<String>)generalDeps.get(kafkaRoleCommand);
  assertTrue(Role.KAFKA_BROKER + "-" + RoleCommand.START+ " should be dependent of "+ rangerUserSyncRoleCommand,kafkaBlockers.contains(rangerUserSyncRoleCommand));
  String hiveRoleCommand=Role.HIVE_SERVER + "-" + RoleCommand.START;
  ArrayList<String> hiveBlockers=(ArrayList<String>)generalDeps.get(hiveRoleCommand);
  assertTrue(hiveRoleCommand + " should be dependent of " + rangerUserSyncRoleCommand,hiveBlockers.contains(rangerUserSyncRoleCommand));
  assertTrue(hiveRoleCommand + " should be dependent of " + nodeManagerRoleCommand,hiveBlockers.contains(nodeManagerRoleCommand));
  assertTrue(hiveRoleCommand + " should be dependent of " + mySqlServerRoleCommand,hiveBlockers.contains(mySqlServerRoleCommand));
  String stormRoleCommand=Role.NIMBUS + "-" + RoleCommand.START;
  ArrayList<String> stormBlockers=(ArrayList<String>)generalDeps.get(stormRoleCommand);
  assertTrue(stormRoleCommand + " should be dependent of " + rangerUserSyncRoleCommand,stormBlockers.contains(rangerUserSyncRoleCommand));
  assertTrue(stormRoleCommand + " should be dependent of " + zookeeperServerRoleCommand,stormBlockers.contains(zookeeperServerRoleCommand));
  String kmsRoleCommand=Role.RANGER_KMS_SERVER + "-" + RoleCommand.START;
  ArrayList<String> rangerKmsBlockers=(ArrayList<String>)generalDeps.get(kmsRoleCommand);
  assertTrue(kmsRoleCommand + " should be dependent of " + rangerAdminRoleCommand,rangerKmsBlockers.contains(rangerAdminRoleCommand));
  ArrayList<String> rangerUserSyncBlockers=(ArrayList<String>)generalDeps.get(rangerUserSyncRoleCommand);
  assertTrue(rangerUserSyncRoleCommand + " should be dependent of " + rangerAdminRoleCommand,rangerUserSyncBlockers.contains(rangerAdminRoleCommand));
  assertTrue(rangerUserSyncRoleCommand + " should be dependent of " + kmsRoleCommand,rangerUserSyncBlockers.contains(kmsRoleCommand));
  ArrayList<String> zookeeperBlockers=(ArrayList<String>)generalDeps.get(zookeeperServerRoleCommand);
  assertTrue(zookeeperServerRoleCommand + " should be dependent of " + rangerUserSyncRoleCommand,zookeeperBlockers.contains(rangerUserSyncRoleCommand));
}

</code></pre>

<pre class="type-4 type-2 type-5 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPopulateConfigTypes() throws Exception {
  StackInfo stack=stackManager.getStack("HDP","2.0.7");
  ServiceInfo hdfsService=stack.getService("HDFS");
  Map<String,Map<String,Map<String,String>>> configTypes=hdfsService.getConfigTypeAttributes();
  assertEquals(4,configTypes.size());
  Map<String,Map<String,String>> configType=configTypes.get("global");
  assertEquals(1,configType.size());
  Map<String,String> supportsMap=configType.get("supports");
  assertEquals(3,supportsMap.size());
  assertEquals("true",supportsMap.get("final"));
  assertEquals("false",supportsMap.get("adding_forbidden"));
  assertEquals("false",supportsMap.get("do_not_extend"));
  configType=configTypes.get("hdfs-site");
  assertEquals(1,configType.size());
  supportsMap=configType.get("supports");
  assertEquals(3,supportsMap.size());
  assertEquals("false",supportsMap.get("final"));
  assertEquals("false",supportsMap.get("adding_forbidden"));
  assertEquals("false",supportsMap.get("do_not_extend"));
  configType=configTypes.get("core-site");
  assertEquals(1,configType.size());
  supportsMap=configType.get("supports");
  assertEquals(3,supportsMap.size());
  assertEquals("false",supportsMap.get("final"));
  assertEquals("false",supportsMap.get("adding_forbidden"));
  assertEquals("false",supportsMap.get("do_not_extend"));
  configType=configTypes.get("hadoop-policy");
  assertEquals(1,configType.size());
  supportsMap=configType.get("supports");
  assertEquals(3,supportsMap.size());
  assertEquals("false",supportsMap.get("final"));
  assertEquals("false",supportsMap.get("adding_forbidden"));
  assertEquals("false",supportsMap.get("do_not_extend"));
  ServiceInfo yarnService=stack.getService("YARN");
  configTypes=yarnService.getConfigTypeAttributes();
  assertEquals(4,configTypes.size());
  assertTrue(configTypes.containsKey("yarn-site"));
  assertTrue(configTypes.containsKey("core-site"));
  assertTrue(configTypes.containsKey("global"));
  assertTrue(configTypes.containsKey("capacity-scheduler"));
  configType=configTypes.get("yarn-site");
  supportsMap=configType.get("supports");
  assertEquals(3,supportsMap.size());
  assertEquals("false",supportsMap.get("final"));
  assertEquals("true",supportsMap.get("adding_forbidden"));
  assertEquals("true",supportsMap.get("do_not_extend"));
  ServiceInfo mrService=stack.getService("MAPREDUCE2");
  configTypes=mrService.getConfigTypeAttributes();
  assertEquals(3,configTypes.size());
  assertTrue(configTypes.containsKey("mapred-site"));
  assertTrue(configTypes.containsKey("core-site"));
  assertTrue(configTypes.containsKey("mapred-queue-acls"));
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testInheritKerberosDescriptor() throws Exception {
  StackInfo stack=stackManager.getStack("HDP","2.1.1");
  String stacksFolder=ClassLoader.getSystemClassLoader().getResource("stacks").getPath();
  assertEquals(new File(stacksFolder,"HDP/2.0.8/kerberos.json").getAbsolutePath(),stack.getKerberosDescriptorFileLocation());
}

</code></pre>

<pre class="type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testComponentDeletion(){
  StackInfo stack=stackManager.getStack("HDP","2.0.6");
  ServiceInfo yarnService=stack.getService("YARN");
  assertNull(yarnService.getComponentByName("YARN_CLIENT"));
  stack=stackManager.getStack("HDP","2.0.6.1");
  yarnService=stack.getService("YARN");
  assertNull(yarnService.getComponentByName("YARN_CLIENT"));
  stack=stackManager.getStack("HDP","2.0.7");
  yarnService=stack.getService("YARN");
  assertNotNull(yarnService.getComponentByName("YARN_CLIENT"));
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetStacksByName(){
  Collection<StackInfo> stacks=stackManager.getStacks("HDP");
  assertEquals(15,stacks.size());
  stacks=stackManager.getStacks("OTHER");
  assertEquals(2,stacks.size());
}

</code></pre>

<pre class="type-13 type-2 type-5 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMonitoringServicePropertyInheritance() throws Exception {
  StackInfo stack=stackManager.getStack("HDP","2.0.8");
  Collection<ServiceInfo> allServices=stack.getServices();
  assertEquals(13,allServices.size());
  boolean monitoringServiceFound=false;
  for (  ServiceInfo serviceInfo : allServices) {
    if (serviceInfo.getName().equals("FAKENAGIOS")) {
      monitoringServiceFound=true;
      assertTrue(serviceInfo.isMonitoringService());
    }
 else {
      assertNull(serviceInfo.isMonitoringService());
    }
  }
  assertTrue(monitoringServiceFound);
}

</code></pre>

<pre class="type-4 type-13 type-2 type-5 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetStack(){
  StackInfo stack=stackManager.getStack("HDP","0.1");
  assertNotNull(stack);
  assertEquals("HDP",stack.getName());
  assertEquals("0.1",stack.getVersion());
  Collection<ServiceInfo> services=stack.getServices();
  assertEquals(3,services.size());
  Map<String,ServiceInfo> serviceMap=new HashMap<String,ServiceInfo>();
  for (  ServiceInfo service : services) {
    serviceMap.put(service.getName(),service);
  }
  ServiceInfo hdfsService=serviceMap.get("HDFS");
  assertNotNull(hdfsService);
  List<ComponentInfo> components=hdfsService.getComponents();
  assertEquals(6,components.size());
  List<PropertyInfo> properties=hdfsService.getProperties();
  assertEquals(62,properties.size());
  boolean hdfsPropFound=false;
  boolean hbasePropFound=false;
  for (  PropertyInfo p : properties) {
    if (p.getName().equals("hbase.regionserver.msginterval")) {
      assertEquals("hbase-site.xml",p.getFilename());
      hbasePropFound=true;
    }
 else     if (p.getName().equals("dfs.name.dir")) {
      assertEquals("hdfs-site.xml",p.getFilename());
      hdfsPropFound=true;
    }
  }
  assertTrue(hbasePropFound);
  assertTrue(hdfsPropFound);
  ServiceInfo mrService=serviceMap.get("MAPREDUCE");
  assertNotNull(mrService);
  components=mrService.getComponents();
  assertEquals(3,components.size());
  ServiceInfo pigService=serviceMap.get("PIG");
  assertNotNull(pigService);
  assertEquals("PIG",pigService.getName());
  assertEquals("1.0",pigService.getVersion());
  assertEquals("This is comment for PIG service",pigService.getComment());
  components=pigService.getComponents();
  assertEquals(1,components.size());
  CommandScriptDefinition commandScript=pigService.getCommandScript();
  assertEquals("scripts/service_check.py",commandScript.getScript());
  assertEquals(CommandScriptDefinition.Type.PYTHON,commandScript.getScriptType());
  assertEquals(300,commandScript.getTimeout());
  List<String> configDependencies=pigService.getConfigDependencies();
  assertEquals(1,configDependencies.size());
  assertEquals("global",configDependencies.get(0));
  assertEquals("global",pigService.getConfigDependenciesWithComponents().get(0));
  ComponentInfo client=pigService.getClientComponent();
  assertNotNull(client);
  assertEquals("PIG",client.getName());
  assertEquals("0+",client.getCardinality());
  assertEquals("CLIENT",client.getCategory());
  assertEquals("configuration",pigService.getConfigDir());
  assertEquals("2.0",pigService.getSchemaVersion());
  Map<String,ServiceOsSpecific> osInfoMap=pigService.getOsSpecifics();
  assertEquals(1,osInfoMap.size());
  ServiceOsSpecific osSpecific=osInfoMap.get("centos6");
  assertNotNull(osSpecific);
  assertEquals("centos6",osSpecific.getOsFamily());
  assertNull(osSpecific.getRepo());
  List<ServiceOsSpecific.Package> packages=osSpecific.getPackages();
  assertEquals(1,packages.size());
  ServiceOsSpecific.Package pkg=packages.get(0);
  assertEquals("pig",pkg.getName());
  assertNull(pigService.getParent());
}

</code></pre>

<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMetricsLoaded() throws Exception {
  String stackRoot=ClassLoader.getSystemClassLoader().getResource("stacks").getPath().replace("test-classes","classes");
  String commonServices=ClassLoader.getSystemClassLoader().getResource("common-services").getPath().replace("test-classes","classes");
  MetainfoDAO metaInfoDao=createNiceMock(MetainfoDAO.class);
  StackDAO stackDao=createNiceMock(StackDAO.class);
  ActionMetadata actionMetadata=createNiceMock(ActionMetadata.class);
  Configuration config=createNiceMock(Configuration.class);
  expect(config.getSharedResourcesDirPath()).andReturn(ClassLoader.getSystemClassLoader().getResource("").getPath()).anyTimes();
  replay(config,metaInfoDao,stackDao,actionMetadata);
  OsFamily osFamily=new OsFamily(config);
  StackManager stackManager=new StackManager(new File(stackRoot),new File(commonServices),osFamily,metaInfoDao,actionMetadata,stackDao);
  for (  StackInfo stackInfo : stackManager.getStacks()) {
    for (    ServiceInfo serviceInfo : stackInfo.getServices()) {
      Type type=new TypeToken<Map<String,Map<String,List<MetricDefinition>>>>(){
      }
.getType();
      Gson gson=new Gson();
      Map<String,Map<String,List<MetricDefinition>>> map=null;
      if (serviceInfo.getMetricsFile() != null) {
        try {
          map=gson.fromJson(new FileReader(serviceInfo.getMetricsFile()),type);
        }
 catch (        Exception e) {
          e.printStackTrace();
          throw new AmbariException("Failed to load metrics from file " + serviceInfo.getMetricsFile().getAbsolutePath());
        }
      }
    }
  }
}

</code></pre>

<pre class="type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetStackServiceInheritance(){
  StackInfo baseStack=stackManager.getStack("OTHER","1.0");
  StackInfo stack=stackManager.getStack("OTHER","2.0");
  assertEquals(4,stack.getServices().size());
  ServiceInfo service=stack.getService("SQOOP2");
  ServiceInfo baseSqoopService=baseStack.getService("SQOOP2");
  assertEquals("SQOOP2",service.getName());
  assertEquals("Inherited from parent",service.getComment());
  assertEquals("Extended from parent version",service.getVersion());
  assertNull(service.getServicePackageFolder());
  List<ComponentInfo> serviceComponents=service.getComponents();
  List<ComponentInfo> baseStormServiceCompoents=baseSqoopService.getComponents();
  assertEquals(serviceComponents,baseStormServiceCompoents);
  assertEquals(baseSqoopService.isDeleted(),service.isDeleted());
  assertEquals(baseSqoopService.getAlertsFile(),service.getAlertsFile());
  assertEquals(baseSqoopService.getClientComponent(),service.getClientComponent());
  assertEquals(baseSqoopService.getCommandScript(),service.getCommandScript());
  assertEquals(baseSqoopService.getConfigDependencies(),service.getConfigDependencies());
  assertEquals(baseSqoopService.getConfigDir(),service.getConfigDir());
  assertEquals(baseSqoopService.getConfigDependenciesWithComponents(),service.getConfigDependenciesWithComponents());
  assertEquals(baseSqoopService.getConfigTypeAttributes(),service.getConfigTypeAttributes());
  assertEquals(baseSqoopService.getCustomCommands(),service.getCustomCommands());
  assertEquals(baseSqoopService.getExcludedConfigTypes(),service.getExcludedConfigTypes());
  assertEquals(baseSqoopService.getProperties(),service.getProperties());
  assertEquals(baseSqoopService.getMetrics(),service.getMetrics());
  assertNull(baseSqoopService.getMetricsFile());
  assertNull(service.getMetricsFile());
  assertEquals(baseSqoopService.getOsSpecifics(),service.getOsSpecifics());
  assertEquals(baseSqoopService.getRequiredServices(),service.getRequiredServices());
  assertEquals(baseSqoopService.getSchemaVersion(),service.getSchemaVersion());
}

</code></pre>

<pre class="type-2 type-5 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStackVersionInheritance(){
  StackInfo stack=stackManager.getStack("HDP","2.1.1");
  assertNotNull(stack);
  assertEquals("HDP",stack.getName());
  assertEquals("2.1.1",stack.getVersion());
  Collection<ServiceInfo> services=stack.getServices();
  assertEquals(16,services.size());
  HashSet<String> expectedServices=new HashSet<String>();
  expectedServices.add("GANGLIA");
  expectedServices.add("HBASE");
  expectedServices.add("HCATALOG");
  expectedServices.add("HDFS");
  expectedServices.add("HIVE");
  expectedServices.add("MAPREDUCE2");
  expectedServices.add("OOZIE");
  expectedServices.add("PIG");
  expectedServices.add("SQOOP");
  expectedServices.add("YARN");
  expectedServices.add("ZOOKEEPER");
  expectedServices.add("STORM");
  expectedServices.add("FLUME");
  expectedServices.add("FAKENAGIOS");
  expectedServices.add("TEZ");
  expectedServices.add("AMBARI_METRICS");
  ServiceInfo pigService=null;
  for (  ServiceInfo service : services) {
    if (service.getName().equals("PIG")) {
      pigService=service;
    }
    assertTrue(expectedServices.remove(service.getName()));
  }
  assertTrue(expectedServices.isEmpty());
  assertNotNull(pigService);
  assertEquals("0.12.1.2.1.1",pigService.getVersion());
  assertEquals("Scripting platform for analyzing large datasets (Extended)",pigService.getComment());
  ServiceInfo basePigService=stackManager.getStack("HDP","2.0.5").getService("PIG");
  assertEquals("0.11.1.2.0.5.0",basePigService.getVersion());
  assertEquals(1,basePigService.getComponents().size());
  assertEquals(2,pigService.getComponents().size());
  assertEquals(0,basePigService.getProperties().size());
  assertEquals(1,pigService.getProperties().size());
  assertEquals("content",pigService.getProperties().get(0).getName());
}

</code></pre>

<pre class="type-2 type-5 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConfigDependenciesInheritance() throws Exception {
  StackInfo stack=stackManager.getStack("HDP","2.0.6");
  ServiceInfo hdfsService=stack.getService("HDFS");
  assertEquals(5,hdfsService.getConfigDependencies().size());
  assertEquals(4,hdfsService.getConfigTypeAttributes().size());
  assertTrue(hdfsService.getConfigDependencies().contains("core-site"));
  assertTrue(hdfsService.getConfigDependencies().contains("global"));
  assertTrue(hdfsService.getConfigDependencies().contains("hdfs-site"));
  assertTrue(hdfsService.getConfigDependencies().contains("hdfs-log4j"));
  assertTrue(hdfsService.getConfigDependencies().contains("hadoop-policy"));
  assertTrue(Boolean.valueOf(hdfsService.getConfigTypeAttributes().get("core-site").get("supports").get("final")));
  assertFalse(Boolean.valueOf(hdfsService.getConfigTypeAttributes().get("global").get("supports").get("final")));
}

</code></pre>

<pre class="type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHCFSServiceType(){
  StackInfo stack=stackManager.getStack("HDP","2.2.0.ECS");
  ServiceInfo service=stack.getService("ECS");
  assertEquals(service.getServiceType(),"HCFS");
  service=stack.getService("HDFS");
  assertNull(service);
}

</code></pre>

<pre class="type-2 type-5 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testServiceDeletion(){
  StackInfo stack=stackManager.getStack("HDP","2.0.6");
  Collection<ServiceInfo> allServices=stack.getServices();
  assertEquals(11,allServices.size());
  HashSet<String> expectedServices=new HashSet<String>();
  expectedServices.add("GANGLIA");
  expectedServices.add("HBASE");
  expectedServices.add("HCATALOG");
  expectedServices.add("HDFS");
  expectedServices.add("HIVE");
  expectedServices.add("MAPREDUCE2");
  expectedServices.add("OOZIE");
  expectedServices.add("PIG");
  expectedServices.add("ZOOKEEPER");
  expectedServices.add("FLUME");
  expectedServices.add("YARN");
  for (  ServiceInfo service : allServices) {
    assertTrue(expectedServices.remove(service.getName()));
  }
  assertTrue(expectedServices.isEmpty());
}

</code></pre>

<pre class="type-2 type-5 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExcludedConfigTypes(){
  StackInfo stack=stackManager.getStack("HDP","2.0.8");
  ServiceInfo service=stack.getService("HBASE");
  assertFalse(service.hasConfigType("global"));
  Map<String,Map<String,Map<String,String>>> configTypes=service.getConfigTypeAttributes();
  assertEquals(2,configTypes.size());
  assertTrue(configTypes.containsKey("hbase-site"));
  assertTrue(configTypes.containsKey("hbase-policy"));
  stack=stackManager.getStack("HDP","2.1.1");
  service=stack.getService("HBASE");
  assertFalse(service.hasConfigType("global"));
  configTypes=service.getConfigTypeAttributes();
  assertEquals(2,configTypes.size());
  assertTrue(configTypes.containsKey("hbase-site"));
  assertTrue(configTypes.containsKey("hbase-policy"));
  assertFalse(configTypes.containsKey("global"));
  stack=stackManager.getStack("OTHER","2.0");
  service=stack.getService("HBASE");
  assertFalse(service.hasConfigType("hbase-policy"));
  assertFalse(service.hasConfigType("global"));
  configTypes=service.getConfigTypeAttributes();
  assertEquals(1,configTypes.size());
  assertTrue(configTypes.containsKey("hbase-site"));
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
