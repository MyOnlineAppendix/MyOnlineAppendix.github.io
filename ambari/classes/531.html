<h3 style="margin:0px">Class: org.apache.ambari.server.view.ViewClassLoaderTest (2 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="11"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('11')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-11"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="15"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('15')" data-toggle="tooltip" title="Verifies whether two objects/variables are the same"><kbd id="tag-15"class="label-info"style="display: inline-block;font-size:7pt" >IdentityVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(2)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-4 type-2 type-15 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetResource() throws Exception {
  ClassLoader parentClassLoader=createMock(ClassLoader.class);
  URL parentResource=new File("parent-resource").toURI().toURL();
  ViewConfig viewConfig=createNiceMock(ViewConfig.class);
  expect(parentClassLoader.getResource("parent-resource")).andReturn(parentResource).once();
  replay(parentClassLoader,viewConfig);
  File file=new File("./src/test/resources");
  URL testURL=file.toURI().toURL();
  URL[] urls=new URL[]{testURL};
  ViewClassLoader classLoader=new ViewClassLoader(viewConfig,parentClassLoader,urls);
  URL url=classLoader.getResource("ambari.properties");
  Assert.assertNotNull(url);
  url=classLoader.getResource("parent-resource");
  Assert.assertNotNull(url);
  Assert.assertSame(parentResource,url);
  verify(parentClassLoader,viewConfig);
}

</code></pre>

<pre class="type-4 type-2 type-15 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLoadClass() throws Exception {
  TestClassLoader parentClassLoader=createMock(TestClassLoader.class);
  Class parentClass=Object.class;
  ViewConfig viewConfig=createNiceMock(ViewConfig.class);
  expect(parentClassLoader.getPackage("org.apache.ambari.server.view")).andReturn(null).anyTimes();
  expect(parentClassLoader.loadClass("java.lang.Object")).andReturn(parentClass).anyTimes();
  expect(parentClassLoader.loadClass("ParentClass")).andReturn(parentClass).once();
  expect(parentClassLoader.loadClass("org.apache.ambari.server.controller.spi.ResourceProvider")).andReturn(parentClass).once();
  expect(parentClassLoader.loadClass("org.apache.ambari.view.ViewContext")).andReturn(parentClass).once();
  expect(parentClassLoader.loadClass("javax.xml.parsers.SAXParserFactory")).andReturn(parentClass).once();
  expect(parentClassLoader.loadClass("com.google.inject.AbstractModule")).andReturn(parentClass).once();
  expect(parentClassLoader.loadClass("org.slf4j.LoggerFactory")).andReturn(parentClass).once();
  expect(parentClassLoader.loadClass("com.sun.jersey.api.ConflictException")).andReturn(parentClass).once();
  expect(parentClassLoader.loadClass("org.apache.velocity.VelocityContext")).andReturn(parentClass).once();
  replay(parentClassLoader,viewConfig);
  File file=new File("./target/test-classes");
  URL testURL=file.toURI().toURL();
  URL[] urls=new URL[]{testURL};
  ViewClassLoader classLoader=new ViewClassLoader(viewConfig,parentClassLoader,urls);
  Class clazz=classLoader.loadClass("ParentClass");
  Assert.assertNotNull(clazz);
  Assert.assertSame(parentClass,clazz);
  clazz=classLoader.loadClass("org.apache.ambari.server.controller.spi.ResourceProvider");
  Assert.assertNotNull(clazz);
  Assert.assertSame(parentClass,clazz);
  clazz=classLoader.loadClass("org.apache.ambari.view.ViewContext");
  Assert.assertNotNull(clazz);
  Assert.assertSame(parentClass,clazz);
  clazz=classLoader.loadClass("javax.xml.parsers.SAXParserFactory");
  Assert.assertNotNull(clazz);
  Assert.assertSame(parentClass,clazz);
  clazz=classLoader.loadClass("com.google.inject.AbstractModule");
  Assert.assertNotNull(clazz);
  Assert.assertSame(parentClass,clazz);
  clazz=classLoader.loadClass("org.slf4j.LoggerFactory");
  Assert.assertNotNull(clazz);
  Assert.assertSame(parentClass,clazz);
  clazz=classLoader.loadClass("com.sun.jersey.api.ConflictException");
  Assert.assertNotNull(clazz);
  Assert.assertSame(parentClass,clazz);
  clazz=classLoader.loadClass("org.apache.velocity.VelocityContext");
  Assert.assertNotNull(clazz);
  Assert.assertSame(parentClass,clazz);
  verify(parentClassLoader,viewConfig);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
