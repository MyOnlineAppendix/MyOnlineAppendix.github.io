<h3><span class=" glyphicon glyphicon-tag"/>&nbspTestInitializer</h3><kbd>Allocates resources before the execution of the test cases</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.ambari.funtest.server.tests.ServerTestBase </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is an empty test case">EmptyTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Is an empty test case
"></span><br>
/** 
 * Perform common initialization for each test case.
 * @throws Exception
 */
@Before public void setup() throws Exception {
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.StateRecoveryManagerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  clusterVersionDAOMock=createNiceMock(ClusterVersionDAO.class);
  hostVersionDAOMock=createNiceMock(HostVersionDAO.class);
  InMemoryDefaultTestModule module=new InMemoryDefaultTestModule();
  injector=Guice.createInjector(Modules.override(module).with(new MockModule()));
  injector.getInstance(GuiceJpaInitializer.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.actionmanager.StageTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  injector.injectMembers(this);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.actionmanager.TestActionDBAccessorImpl </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws AmbariException {
  InMemoryDefaultTestModule defaultTestModule=new InMemoryDefaultTestModule();
  injector=Guice.createInjector(Modules.override(defaultTestModule).with(new TestActionDBAccessorModule()));
  injector.getInstance(GuiceJpaInitializer.class);
  injector.getInstance(AmbariMetaInfo.class);
  injector.injectMembers(this);
  clusters.addHost(serverHostName);
  clusters.getHost(serverHostName).persist();
  clusters.addHost(hostName);
  clusters.getHost(hostName).persist();
  StackId stackId=new StackId("HDP-0.1");
  clusters.addCluster(clusterName,stackId);
  db=injector.getInstance(ActionDBAccessorImpl.class);
  am=new ActionManager(5000,1200000,new ActionQueue(),clusters,db,new HostsMap((String)null),injector.getInstance(UnitOfWork.class),injector.getInstance(RequestFactory.class),null,null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.actionmanager.TestActionManager </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws AmbariException {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  clusters=injector.getInstance(Clusters.class);
  stageFactory=injector.getInstance(StageFactory.class);
  clusters.addHost(hostname);
  clusters.getHost(hostname).persist();
  StackId stackId=new StackId("HDP-0.1");
  clusters.addCluster(clusterName,stackId);
  unitOfWork=injector.getInstance(UnitOfWork.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.actionmanager.TestActionScheduler </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  injector.injectMembers(this);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.actionmanager.TestStage </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  injector.injectMembers(this);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.agent.TestHeartbeatHandler </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  InMemoryDefaultTestModule module=new InMemoryDefaultTestModule(){
    @Override protected void configure(){
      getProperties().put("recovery.type","FULL");
      getProperties().put("recovery.lifetime_max_count","10");
      getProperties().put("recovery.max_count","4");
      getProperties().put("recovery.window_in_minutes","23");
      getProperties().put("recovery.retry_interval","2");
      super.configure();
    }
  }
;
  injector=Guice.createInjector(module);
  injector.getInstance(GuiceJpaInitializer.class);
  clusters=injector.getInstance(Clusters.class);
  injector.injectMembers(this);
  log.debug("Using server os type=" + config.getServerOsType());
  unitOfWork=injector.getInstance(UnitOfWork.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.agent.TestHeartbeatMonitor </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  helper=injector.getInstance(OrmTestHelper.class);
  ambariMetaInfo=injector.getInstance(AmbariMetaInfo.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.alerts.AgentHeartbeatAlertRunnableTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 */
@Before public void setup() throws Exception {
  m_injector=Guice.createInjector(new MockModule());
  m_definitionDao=m_injector.getInstance(AlertDefinitionDAO.class);
  m_clusters=m_injector.getInstance(Clusters.class);
  m_cluster=m_injector.getInstance(Cluster.class);
  m_eventPublisher=m_injector.getInstance(AlertEventPublisher.class);
  m_listener=m_injector.getInstance(MockEventListener.class);
  m_definition=EasyMock.createNiceMock(AlertDefinitionEntity.class);
  m_host=EasyMock.createNiceMock(Host.class);
  m_synchronizedBus=new EventBus();
  Field field=AlertEventPublisher.class.getDeclaredField("m_eventBus");
  field.setAccessible(true);
  field.set(m_eventPublisher,m_synchronizedBus);
  m_synchronizedBus.register(m_listener);
  Map<String,Cluster> clusterMap=new HashMap<String,Cluster>();
  clusterMap.put(CLUSTER_NAME,m_cluster);
  Map<String,Host> hostMap=new HashMap<String,Host>();
  hostMap.put(HOSTNAME,m_host);
  expect(m_definition.getDefinitionName()).andReturn(DEFINITION_NAME).atLeastOnce();
  expect(m_definition.getServiceName()).andReturn(DEFINITION_SERVICE).atLeastOnce();
  expect(m_definition.getComponentName()).andReturn(DEFINITION_COMPONENT).atLeastOnce();
  expect(m_definition.getLabel()).andReturn(DEFINITION_LABEL).atLeastOnce();
  expect(m_definition.getEnabled()).andReturn(true).atLeastOnce();
  expect(m_host.getState()).andReturn(HostState.HEALTHY);
  expect(m_cluster.getClusterId()).andReturn(CLUSTER_ID).atLeastOnce();
  expect(m_cluster.getClusterName()).andReturn(CLUSTER_NAME).atLeastOnce();
  expect(m_clusters.getClusters()).andReturn(clusterMap).atLeastOnce();
  expect(m_clusters.getHostsForCluster(CLUSTER_NAME)).andReturn(hostMap).atLeastOnce();
  expect(m_definitionDao.findByName(CLUSTER_ID,DEFINITION_NAME)).andReturn(m_definition).atLeastOnce();
  EasyMock.replay(m_definition,m_host,m_cluster,m_clusters,m_definitionDao);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.alerts.StaleAlertRunnableTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 */
@Before public void setup() throws Exception {
  m_injector=Guice.createInjector(new MockModule());
  m_alertsDao=m_injector.getInstance(AlertsDAO.class);
  m_definitionDao=m_injector.getInstance(AlertDefinitionDAO.class);
  m_clusters=m_injector.getInstance(Clusters.class);
  m_cluster=m_injector.getInstance(Cluster.class);
  m_eventPublisher=m_injector.getInstance(AlertEventPublisher.class);
  m_listener=m_injector.getInstance(MockEventListener.class);
  m_definition=EasyMock.createNiceMock(AlertDefinitionEntity.class);
  m_synchronizedBus=new EventBus();
  Field field=AlertEventPublisher.class.getDeclaredField("m_eventBus");
  field.setAccessible(true);
  field.set(m_eventPublisher,m_synchronizedBus);
  m_synchronizedBus.register(m_listener);
  Map<String,Cluster> clusterMap=new HashMap<String,Cluster>();
  clusterMap.put(CLUSTER_NAME,m_cluster);
  expect(m_definition.getDefinitionName()).andReturn(DEFINITION_NAME).atLeastOnce();
  expect(m_definition.getServiceName()).andReturn(DEFINITION_SERVICE).atLeastOnce();
  expect(m_definition.getComponentName()).andReturn(DEFINITION_COMPONENT).atLeastOnce();
  expect(m_definition.getLabel()).andReturn(DEFINITION_LABEL).atLeastOnce();
  expect(m_definition.getEnabled()).andReturn(true).atLeastOnce();
  expect(m_definition.getScheduleInterval()).andReturn(DEFINITION_INTERVAL).atLeastOnce();
  expect(m_cluster.getClusterId()).andReturn(CLUSTER_ID).atLeastOnce();
  expect(m_clusters.getClusters()).andReturn(clusterMap).atLeastOnce();
  expect(m_definitionDao.findByName(CLUSTER_ID,DEFINITION_NAME)).andReturn(m_definition).atLeastOnce();
  expect(m_alertsDao.findCurrentByCluster(CLUSTER_ID)).andReturn(m_currentAlerts).atLeastOnce();
  replay(m_definition,m_cluster,m_clusters,m_definitionDao,m_alertsDao);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.api.handlers.CreateHandlerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  AmbariEventPublisher publisher=createNiceMock(AmbariEventPublisher.class);
  replay(publisher);
  ViewRegistry.initInstance(new ViewRegistry(publisher));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.api.handlers.DeleteHandlerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  AmbariEventPublisher publisher=createNiceMock(AmbariEventPublisher.class);
  replay(publisher);
  ViewRegistry.initInstance(new ViewRegistry(publisher));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.api.handlers.UpdateHandlerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  AmbariEventPublisher publisher=createNiceMock(AmbariEventPublisher.class);
  replay(publisher);
  ViewRegistry.initInstance(new ViewRegistry(publisher));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.api.query.render.ClusterBlueprintRendererTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  Map<String,String> clusterTypeProps=new HashMap<String,String>();
  clusterProps.put("test-type-one",clusterTypeProps);
  clusterTypeProps.put("propertyOne","valueOne");
  Map<String,Map<String,String>> clusterTypeAttributes=new HashMap<String,Map<String,String>>();
  clusterAttributes.put("test-type-one",clusterTypeAttributes);
  Map<String,String> clusterAttributeProps=new HashMap<String,String>();
  clusterAttributeProps.put("propertyOne","true");
  clusterTypeAttributes.put("final",clusterAttributeProps);
  Collection<Component> group1Components=Arrays.asList(new Component("JOBTRACKER"),new Component("TASKTRACKER"),new Component("NAMENODE"),new Component("DATANODE"),new Component("AMBARI_SERVER"));
  Collection<Component> group2Components=Arrays.asList(new Component("TASKTRACKER"),new Component("DATANODE"));
  Map<String,Configuration> hostGroupConfigs=new HashMap<String,Configuration>();
  hostGroupConfigs.put("host_group_1",emptyConfiguration);
  hostGroupConfigs.put("host_group_2",emptyConfiguration);
  Map<String,HostGroup> hostGroups=new HashMap<String,HostGroup>();
  hostGroups.put("host_group_1",group1);
  hostGroups.put("host_group_2",group2);
  HostGroupInfo group1Info=new HostGroupInfo("host_group_1");
  group1Info.addHost("host1");
  group1Info.setConfiguration(emptyConfiguration);
  HostGroupInfo group2Info=new HostGroupInfo("host_group_2");
  Map<String,HostGroupInfo> groupInfoMap=new HashMap<String,HostGroupInfo>();
  group2Info.addHosts(Arrays.asList("host2","host3"));
  group2Info.setConfiguration(emptyConfiguration);
  groupInfoMap.put("host_group_1",group1Info);
  groupInfoMap.put("host_group_2",group2Info);
  expect(topology.isNameNodeHAEnabled()).andReturn(false).anyTimes();
  expect(topology.getConfiguration()).andReturn(clusterConfig).anyTimes();
  expect(topology.getBlueprint()).andReturn(blueprint).anyTimes();
  expect(topology.getHostGroupInfo()).andReturn(groupInfoMap).anyTimes();
  expect(blueprint.getStack()).andReturn(stack).anyTimes();
  expect(blueprint.getHostGroups()).andReturn(hostGroups).anyTimes();
  expect(blueprint.getHostGroup("host_group_1")).andReturn(group1).anyTimes();
  expect(blueprint.getHostGroup("host_group_2")).andReturn(group2).anyTimes();
  expect(stack.getName()).andReturn("HDP").anyTimes();
  expect(stack.getVersion()).andReturn("1.3.3").anyTimes();
  expect(group1.getName()).andReturn("host_group_1").anyTimes();
  expect(group2.getName()).andReturn("host_group_2").anyTimes();
  expect(group1.getComponents()).andReturn(group1Components).anyTimes();
  expect(group2.getComponents()).andReturn(group2Components).anyTimes();
  replay(topology,blueprint,stack,group1,group2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.api.resources.BaseResourceDefinitionTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  AmbariEventPublisher publisher=createNiceMock(AmbariEventPublisher.class);
  replay(publisher);
  ViewRegistry.initInstance(new ViewRegistry(publisher));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.api.rest.KdcServerConnectionVerificationTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before() throws Exception {
  Properties configProps=new Properties();
  configProps.setProperty(Configuration.KDC_PORT_KEY,Integer.toString(KDC_TEST_PORT));
  configuration=new Configuration(configProps);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.api.services.KerberosServiceMetaInfoTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before() throws Exception {
  File stackRoot=new File("src/main/resources/stacks");
  File commonServicesRoot=new File("src/main/resources/common-services");
  LOG.info("Stacks file " + stackRoot.getAbsolutePath());
  LOG.info("Common Services file " + commonServicesRoot.getAbsolutePath());
  AmbariMetaInfo metaInfo=createAmbariMetaInfo(stackRoot,commonServicesRoot,new File("src/test/resources/version"),true);
  metaInfo.init();
  serviceInfo=metaInfo.getService("HDP","2.2","KERBEROS");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.api.services.PersistKeyValueImplTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.api.services.PersistServiceTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Override @Before public void setUp() throws Exception {
  super.setUp();
  injector=Guice.createInjector(new InMemoryDefaultTestModule(),new MockModule());
  injector.getInstance(GuiceJpaInitializer.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.api.services.stackadvisor.StackAdvisorBlueprintProcessorTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp(){
  reset(clusterTopology,blueprint,stack,stackAdvisorHelper);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.api.services.stackadvisor.StackAdvisorRunnerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws IOException {
  temp.create();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.api.services.stackadvisor.commands.StackAdvisorCommandTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws IOException {
  temp.create();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.bootstrap.BootStrapTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws IOException {
  temp.create();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.checks.ClientRetryPropertyCheckTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 */
@Before public void setup(){
  m_check.clustersProvider=new Provider<Clusters>(){
    @Override public Clusters get(){
      return m_clusters;
    }
  }
;
  Configuration config=Mockito.mock(Configuration.class);
  m_check.config=config;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.checks.ConfigurationMergeCheckTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before() throws Exception {
  Cluster cluster=EasyMock.createMock(Cluster.class);
  expect(cluster.getCurrentStackVersion()).andReturn(stackId_1_0).anyTimes();
  expect(clusters.getCluster((String)anyObject())).andReturn(cluster).anyTimes();
  expect(cluster.getServices()).andReturn(new HashMap<String,Service>(){
{
      put("HDFS",EasyMock.createMock(Service.class));
    }
  }
).anyTimes();
  m_configMap.put(CONFIG_PROPERTY,"1024m");
  Config config=EasyMock.createMock(Config.class);
  expect(config.getProperties()).andReturn(m_configMap).anyTimes();
  expect(cluster.getDesiredConfigByType(CONFIG_TYPE)).andReturn(config).anyTimes();
  replay(clusters,cluster,config);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.checks.HiveDynamicServiceDiscoveryCheckTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 */
@Before public void setup(){
  m_check.clustersProvider=new Provider<Clusters>(){
    @Override public Clusters get(){
      return m_clusters;
    }
  }
;
  Configuration config=Mockito.mock(Configuration.class);
  m_check.config=config;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.checks.HiveMultipleMetastoreCheckTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 */
@Before public void setup(){
  m_check.clustersProvider=new Provider<Clusters>(){
    @Override public Clusters get(){
      return m_clusters;
    }
  }
;
  Configuration config=Mockito.mock(Configuration.class);
  m_check.config=config;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.checks.MapReduce2JobHistoryStatePreservingCheckTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 */
@Before public void setup(){
  m_check.clustersProvider=new Provider<Clusters>(){
    @Override public Clusters get(){
      return m_clusters;
    }
  }
;
  Configuration config=Mockito.mock(Configuration.class);
  m_check.config=config;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.checks.PreviousUpgradeCompletedTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 */
@Before public void setup(){
  puc=new PreviousUpgradeCompleted();
  puc.clustersProvider=new Provider<Clusters>(){
    @Override public Clusters get(){
      return clusters;
    }
  }
;
  puc.ambariMetaInfo=new Provider<AmbariMetaInfo>(){
    @Override public AmbariMetaInfo get(){
      return ambariMetaInfo;
    }
  }
;
  puc.clusterVersionDAOProvider=new Provider<ClusterVersionDAO>(){
    @Override public ClusterVersionDAO get(){
      return clusterVersionDAO;
    }
  }
;
  puc.requestDaoProvider=new Provider<RequestDAO>(){
    @Override public RequestDAO get(){
      return requestDAO;
    }
  }
;
  puc.hostRoleCommandDaoProvider=new Provider<HostRoleCommandDAO>(){
    @Override public HostRoleCommandDAO get(){
      return hrcDAO;
    }
  }
;
  puc.upgradeDaoProvider=new Provider<UpgradeDAO>(){
    @Override public UpgradeDAO get(){
      return upgradeDAO;
    }
  }
;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.checks.RangerPasswordCheckTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  m_configMap.put("policymgr_external_url",RANGER_URL);
  m_configMap.put("admin_username","admin");
  m_configMap.put("admin_password","pass");
  m_configMap.put("ranger_admin_username","r_admin");
  m_configMap.put("ranger_admin_password","r_pass");
  Cluster cluster=EasyMock.createMock(Cluster.class);
  Config config=EasyMock.createMock(Config.class);
  final Map<String,Service> services=new HashMap<>();
  final Service service=EasyMock.createMock(Service.class);
  services.put("RANGER",service);
  Map<String,DesiredConfig> desiredMap=new HashMap<>();
  DesiredConfig dc=EasyMock.createMock(DesiredConfig.class);
  desiredMap.put("admin-properties",dc);
  desiredMap.put("ranger-env",dc);
  expect(dc.getTag()).andReturn("").anyTimes();
  expect(config.getProperties()).andReturn(m_configMap).anyTimes();
  expect(cluster.getServices()).andReturn(services).anyTimes();
  expect(cluster.getService("RANGER")).andReturn(service).anyTimes();
  expect(cluster.getDesiredConfigs()).andReturn(desiredMap).anyTimes();
  expect(cluster.getDesiredConfigByType((String)anyObject())).andReturn(config).anyTimes();
  expect(cluster.getConfig((String)anyObject(),(String)anyObject())).andReturn(config).anyTimes();
  expect(m_clusters.getCluster((String)anyObject())).andReturn(cluster).anyTimes();
  replay(m_clusters,cluster,dc,config);
  m_rpc=new RangerPasswordCheck();
  m_rpc.clustersProvider=new Provider<Clusters>(){
    @Override public Clusters get(){
      return m_clusters;
    }
  }
;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.checks.SecondaryNamenodeDeletedCheckTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup(){
  secondaryNamenodeDeletedCheck.clustersProvider=new Provider<Clusters>(){
    @Override public Clusters get(){
      return clusters;
    }
  }
;
  secondaryNamenodeDeletedCheck.ambariMetaInfo=new Provider<AmbariMetaInfo>(){
    @Override public AmbariMetaInfo get(){
      return Mockito.mock(AmbariMetaInfo.class);
    }
  }
;
  secondaryNamenodeDeletedCheck.hostComponentStateDao=hostComponentStateDAO;
  Configuration config=Mockito.mock(Configuration.class);
  secondaryNamenodeDeletedCheck.config=config;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.checks.ServicesMapReduceDistributedCacheCheckTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup(){
  servicesMapReduceDistributedCacheCheck.clustersProvider=new Provider<Clusters>(){
    @Override public Clusters get(){
      return clusters;
    }
  }
;
  Configuration config=Mockito.mock(Configuration.class);
  servicesMapReduceDistributedCacheCheck.config=config;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.checks.ServicesNamenodeHighAvailabilityCheckTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup(){
  servicesNamenodeHighAvailabilityCheck.clustersProvider=new Provider<Clusters>(){
    @Override public Clusters get(){
      return clusters;
    }
  }
;
  Configuration config=Mockito.mock(Configuration.class);
  servicesNamenodeHighAvailabilityCheck.config=config;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.checks.ServicesNamenodeTruncateCheckTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  Cluster cluster=EasyMock.createMock(Cluster.class);
  Config config=EasyMock.createMock(Config.class);
  final Map<String,Service> services=new HashMap<>();
  final Service service=Mockito.mock(Service.class);
  services.put("HDFS",service);
  expect(cluster.getServices()).andReturn(services).anyTimes();
  expect(config.getProperties()).andReturn(m_configMap).anyTimes();
  expect(cluster.getService("HDFS")).andReturn(service);
  expect(cluster.getDesiredConfigByType("hdfs-site")).andReturn(config).anyTimes();
  expect(m_clusters.getCluster((String)anyObject())).andReturn(cluster).anyTimes();
  replay(m_clusters,cluster,config);
  Configuration configuration=EasyMock.createMock(Configuration.class);
  replay(configuration);
  m_check.config=configuration;
  m_check.clustersProvider=new Provider<Clusters>(){
    @Override public Clusters get(){
      return m_clusters;
    }
  }
;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.checks.ServicesTezDistributedCacheCheckTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup(){
  servicesTezDistributedCacheCheck.clustersProvider=new Provider<Clusters>(){
    @Override public Clusters get(){
      return clusters;
    }
  }
;
  Configuration config=Mockito.mock(Configuration.class);
  servicesTezDistributedCacheCheck.config=config;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.checks.ServicesYarnWorkPreservingCheckTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup(){
  servicesYarnWorkPreservingCheck.clustersProvider=new Provider<Clusters>(){
    @Override public Clusters get(){
      return clusters;
    }
  }
;
  Configuration config=Mockito.mock(Configuration.class);
  servicesYarnWorkPreservingCheck.config=config;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.checks.YarnTimelineServerStatePreservingCheckTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 */
@Before public void setup(){
  m_check.clustersProvider=new Provider<Clusters>(){
    @Override public Clusters get(){
      return m_clusters;
    }
  }
;
  Configuration config=Mockito.mock(Configuration.class);
  m_check.config=config;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.configuration.ConfigurationTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  temp.create();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.AmbariCustomCommandExecutionHelperTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  TopologyManager topologyManager;
  InMemoryDefaultTestModule module=new InMemoryDefaultTestModule(){
    @Override protected void configure(){
      super.configure();
      bind(ActionManager.class).toInstance(am);
    }
  }
;
  injector=Guice.createInjector(module);
  injector.getInstance(GuiceJpaInitializer.class);
  controller=injector.getInstance(AmbariManagementController.class);
  clusters=injector.getInstance(Clusters.class);
  topologyManager=injector.getInstance(TopologyManager.class);
  StageUtils.setTopologyManager(topologyManager);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.AmbariManagementControllerImplTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before() throws Exception {
  reset(ldapDataPopulator,clusters,actionDBAccessor,ambariMetaInfo,users,sessionManager);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.AmbariManagementControllerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  InMemoryDefaultTestModule module=new InMemoryDefaultTestModule();
  backingProperties=module.getProperties();
  injector=Guice.createInjector(module);
  injector.getInstance(GuiceJpaInitializer.class);
  entityManager=injector.getInstance(EntityManager.class);
  clusters=injector.getInstance(Clusters.class);
  actionDB=injector.getInstance(ActionDBAccessor.class);
  controller=injector.getInstance(AmbariManagementController.class);
  serviceFactory=injector.getInstance(ServiceFactory.class);
  serviceComponentFactory=injector.getInstance(ServiceComponentFactory.class);
  serviceComponentHostFactory=injector.getInstance(ServiceComponentHostFactory.class);
  ambariMetaInfo=injector.getInstance(AmbariMetaInfo.class);
  ambariMetaInfo.init();
  users=injector.getInstance(Users.class);
  configuration=injector.getInstance(Configuration.class);
  configHelper=injector.getInstance(ConfigHelper.class);
  configGroupFactory=injector.getInstance(ConfigGroupFactory.class);
  helper=injector.getInstance(OrmTestHelper.class);
  stageFactory=injector.getInstance(StageFactory.class);
  hostDAO=injector.getInstance(HostDAO.class);
  hostRoleCommandDAO=injector.getInstance(HostRoleCommandDAO.class);
  topologyManager=injector.getInstance(TopologyManager.class);
  StageUtils.setTopologyManager(topologyManager);
  ActionManager.setTopologyManager(topologyManager);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.AmbariServerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  injector.injectMembers(this);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.BackgroundCustomCommandExecutionTest </h4><pre class="type-4 type-7 type-2 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws Exception {
  Configuration configuration;
  TopologyManager topologyManager;
  InMemoryDefaultTestModule module=new InMemoryDefaultTestModule(){
    @Override protected void configure(){
      getProperties().put(Configuration.CUSTOM_ACTION_DEFINITION_KEY,"src/main/resources/custom_action_definitions");
      super.configure();
      bind(ActionManager.class).toInstance(am);
    }
  }
;
  injector=Guice.createInjector(module);
  injector.getInstance(GuiceJpaInitializer.class);
  controller=injector.getInstance(AmbariManagementController.class);
  clusters=injector.getInstance(Clusters.class);
  configuration=injector.getInstance(Configuration.class);
  topologyManager=injector.getInstance(TopologyManager.class);
  Assert.assertEquals("src/main/resources/custom_action_definitions",configuration.getCustomActionDefinitionPath());
  StageUtils.setTopologyManager(topologyManager);
  SecurityContextHolder.getContext().setAuthentication(TestAuthenticationFactory.createAdministrator());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.KerberosHelperTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  reset(clusterController);
  reset(metaInfo);
  final KerberosOperationHandlerFactory kerberosOperationHandlerFactory=createMock(KerberosOperationHandlerFactory.class);
  expect(kerberosOperationHandlerFactory.getKerberosOperationHandler(KDCType.NONE)).andReturn(null).anyTimes();
  expect(kerberosOperationHandlerFactory.getKerberosOperationHandler(KDCType.MIT_KDC)).andReturn(new KerberosOperationHandler(){
    @Override public void open(    PrincipalKeyCredential administratorCredentials,    String defaultRealm,    Map<String,String> kerberosConfiguration) throws KerberosOperationException {
      setAdministratorCredential(administratorCredentials);
      setDefaultRealm(defaultRealm);
      setOpen(true);
    }
    @Override public void close() throws KerberosOperationException {
    }
    @Override public boolean principalExists(    String principal) throws KerberosOperationException {
      return "principal".equals(principal);
    }
    @Override public Integer createPrincipal(    String principal,    String password,    boolean service) throws KerberosOperationException {
      return null;
    }
    @Override public Integer setPrincipalPassword(    String principal,    String password) throws KerberosOperationException {
      return null;
    }
    @Override public boolean removePrincipal(    String principal) throws KerberosOperationException {
      return false;
    }
  }
).anyTimes();
  injector=Guice.createInjector(new AbstractModule(){
    @Override protected void configure(){
      bind(EntityManager.class).toInstance(createNiceMock(EntityManager.class));
      bind(DBAccessor.class).toInstance(createNiceMock(DBAccessor.class));
      bind(ClusterFactory.class).toInstance(createNiceMock(ClusterFactory.class));
      bind(HostFactory.class).toInstance(createNiceMock(HostFactory.class));
      bind(SecurityHelper.class).toInstance(createNiceMock(SecurityHelper.class));
      bind(OsFamily.class).toInstance(createNiceMock(OsFamily.class));
      bind(AmbariCustomCommandExecutionHelper.class).toInstance(createNiceMock(AmbariCustomCommandExecutionHelper.class));
      bind(AmbariManagementController.class).toInstance(createNiceMock(AmbariManagementController.class));
      bind(AmbariMetaInfo.class).toInstance(metaInfo);
      bind(ActionManager.class).toInstance(createNiceMock(ActionManager.class));
      bind(RequestFactory.class).toInstance(createNiceMock(RequestFactory.class));
      bind(StageFactory.class).toInstance(createNiceMock(StageFactory.class));
      bind(RoleGraphFactory.class).to(RoleGraphFactoryImpl.class);
      bind(Clusters.class).toInstance(createNiceMock(ClustersImpl.class));
      bind(ConfigHelper.class).toInstance(createNiceMock(ConfigHelper.class));
      bind(KerberosOperationHandlerFactory.class).toInstance(kerberosOperationHandlerFactory);
      bind(ClusterController.class).toInstance(clusterController);
      bind(KerberosDescriptorFactory.class).toInstance(kerberosDescriptorFactory);
      bind(KerberosConfigDataFileWriterFactory.class).toInstance(kerberosConfigDataFileWriterFactory);
      bind(StackManagerFactory.class).toInstance(createNiceMock(StackManagerFactory.class));
      bind(KerberosHelper.class).to(KerberosHelperImpl.class);
      bind(CredentialStoreService.class).to(CredentialStoreServiceImpl.class);
      bind(CreatePrincipalsServerAction.class).toInstance(createMock(CreatePrincipalsServerAction.class));
      bind(CreateKeytabFilesServerAction.class).toInstance(createMock(CreateKeytabFilesServerAction.class));
      bind(StackAdvisorHelper.class).toInstance(createMock(StackAdvisorHelper.class));
    }
  }
);
  setClusterController();
  StageUtils.setTopologyManager(topologyManager);
  expect(topologyManager.getPendingHostComponents()).andReturn(Collections.<String,Collection<String>>emptyMap()).anyTimes();
  CredentialStoreService credentialStoreService=injector.getInstance(CredentialStoreService.class);
  if (!credentialStoreService.isInitialized(CredentialStoreType.TEMPORARY)) {
    ((CredentialStoreServiceImpl)credentialStoreService).initializeTemporaryCredentialStore(10,TimeUnit.MINUTES,false);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.RefreshYarnCapacitySchedulerReleaseConfigTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  controller=injector.getInstance(AmbariManagementController.class);
  clusters=injector.getInstance(Clusters.class);
  configHelper=injector.getInstance(ConfigHelper.class);
  SecurityContextHolder.getContext().setAuthentication(TestAuthenticationFactory.createAdministrator());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.RootServiceResponseFactoryTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  injector.injectMembers(this);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.StackServiceResponseTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp(){
  serviceInfo=new ServiceInfo();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.ActionResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  InMemoryDefaultTestModule module=new InMemoryDefaultTestModule();
  injector=Guice.createInjector(module);
  injector.getInstance(GuiceJpaInitializer.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.ActiveWidgetLayoutResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  resetAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.AlertDefinitionResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  dao=createStrictMock(AlertDefinitionDAO.class);
  definitionHash=createNiceMock(AlertDefinitionHash.class);
  m_injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  m_injector.injectMembers(m_factory);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.AlertGroupResourceProviderTest </h4><pre class="type-7 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void before() throws Exception {
  m_dao=createMock(AlertDispatchDAO.class);
  m_definitionDao=createMock(AlertDefinitionDAO.class);
  m_amc=createMock(AmbariManagementController.class);
  m_clusters=createMock(Clusters.class);
  m_cluster=createMock(Cluster.class);
  m_injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  assertNotNull(m_injector);
  expect(m_amc.getClusters()).andReturn(m_clusters).anyTimes();
  expect(m_clusters.getCluster((String)anyObject())).andReturn(m_cluster).anyTimes();
  expect(m_clusters.getClusterById(1L)).andReturn(m_cluster).anyTimes();
  expect(m_cluster.getClusterId()).andReturn(1L).anyTimes();
  expect(m_cluster.getResourceId()).andReturn(4L).anyTimes();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.AlertHistoryResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  m_dao=createStrictMock(AlertsDAO.class);
  m_injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  m_injector.injectMembers(this);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.AlertNoticeResourceProviderTest </h4><pre class="type-7 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void before(){
  m_dao=createStrictMock(AlertDispatchDAO.class);
  m_injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  Assert.assertNotNull(m_injector);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.AlertResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before() throws Exception {
  m_dao=EasyMock.createNiceMock(AlertsDAO.class);
  m_injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  m_amc=m_injector.getInstance(AmbariManagementController.class);
  Cluster cluster=EasyMock.createMock(Cluster.class);
  Clusters clusters=m_injector.getInstance(Clusters.class);
  expect(m_amc.getClusters()).andReturn(clusters).atLeastOnce();
  expect(clusters.getCluster(capture(EasyMock.<String>newCapture()))).andReturn(cluster).atLeastOnce();
  expect(cluster.getClusterId()).andReturn(1L).anyTimes();
  expect(cluster.getResourceId()).andReturn(4L).anyTimes();
  replay(m_amc,clusters,cluster);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.AlertTargetResourceProviderTest </h4><pre class="type-7 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void before(){
  m_dao=createStrictMock(AlertDispatchDAO.class);
  m_amc=createMock(AmbariManagementController.class);
  m_injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  Assert.assertNotNull(m_injector);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.AmbariPrivilegeResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void resetGlobalMocks(){
  resetAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.ArtifactResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  reset(dao,em,controller,request,clusters,cluster,entity,entity2);
  resourceProvider=new ArtifactResourceProvider(controller);
  setPrivateField(resourceProvider,"artifactDAO",dao);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.BlueprintConfigurationProcessorTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void init() throws Exception {
  expect(bp.getStack()).andReturn(stack).anyTimes();
  expect(bp.getName()).andReturn("test-bp").anyTimes();
  expect(stack.getName()).andReturn("testStack").anyTimes();
  expect(stack.getVersion()).andReturn("1").anyTimes();
  expect(stack.isMasterComponent((String)anyObject())).andReturn(false).anyTimes();
  expect(stack.getConfigurationPropertiesWithMetadata(anyObject(String.class),anyObject(String.class))).andReturn(Collections.<String,Stack.ConfigProperty>emptyMap()).anyTimes();
  expect(serviceInfo.getRequiredProperties()).andReturn(Collections.<String,org.apache.ambari.server.state.PropertyInfo>emptyMap()).anyTimes();
  expect(serviceInfo.getRequiredServices()).andReturn(Collections.<String>emptyList()).anyTimes();
  Collection<String> hdfsComponents=new HashSet<String>();
  hdfsComponents.add("NAMENODE");
  hdfsComponents.add("SECONDARY_NAMENODE");
  hdfsComponents.add("DATANODE");
  hdfsComponents.add("HDFS_CLIENT");
  serviceComponents.put("HDFS",hdfsComponents);
  Collection<String> yarnComponents=new HashSet<String>();
  yarnComponents.add("RESOURCEMANAGER");
  yarnComponents.add("NODEMANAGER");
  yarnComponents.add("YARN_CLIENT");
  yarnComponents.add("APP_TIMELINE_SERVER");
  serviceComponents.put("YARN",yarnComponents);
  Collection<String> mrComponents=new HashSet<String>();
  mrComponents.add("MAPREDUCE2_CLIENT");
  mrComponents.add("HISTORY_SERVER");
  serviceComponents.put("MAPREDUCE2",mrComponents);
  Collection<String> zkComponents=new HashSet<String>();
  zkComponents.add("ZOOKEEPER_SERVER");
  zkComponents.add("ZOOKEEPER_CLIENT");
  serviceComponents.put("ZOOKEEPER",zkComponents);
  Collection<String> hiveComponents=new HashSet<String>();
  hiveComponents.add("MYSQL_SERVER");
  hiveComponents.add("HIVE_METASTORE");
  hiveComponents.add("HIVE_SERVER");
  serviceComponents.put("HIVE",hiveComponents);
  Collection<String> falconComponents=new HashSet<String>();
  falconComponents.add("FALCON_SERVER");
  falconComponents.add("FALCON_CLIENT");
  serviceComponents.put("FALCON",falconComponents);
  Collection<String> gangliaComponents=new HashSet<String>();
  gangliaComponents.add("GANGLIA_SERVER");
  gangliaComponents.add("GANGLIA_CLIENT");
  serviceComponents.put("GANGLIA",gangliaComponents);
  Collection<String> kafkaComponents=new HashSet<String>();
  kafkaComponents.add("KAFKA_BROKER");
  serviceComponents.put("KAFKA",kafkaComponents);
  Collection<String> knoxComponents=new HashSet<String>();
  knoxComponents.add("KNOX_GATEWAY");
  serviceComponents.put("KNOX",knoxComponents);
  Collection<String> oozieComponents=new HashSet<String>();
  oozieComponents.add("OOZIE_SERVER");
  oozieComponents.add("OOZIE_CLIENT");
  serviceComponents.put("OOZIE",oozieComponents);
  Collection<String> hbaseComponents=new HashSet<String>();
  hbaseComponents.add("HBASE_MASTER");
  serviceComponents.put("HBASE",hbaseComponents);
  Collection<String> atlasComponents=new HashSet<String>();
  atlasComponents.add("ATLAS_SERVER");
  atlasComponents.add("ATLAS_CLIENT");
  serviceComponents.put("ATLAS",atlasComponents);
  Collection<String> amsComponents=new HashSet<String>();
  amsComponents.add("METRICS_COLLECTOR");
  serviceComponents.put("AMBARI_METRICS",amsComponents);
  Collection<String> stormComponents=new HashSet<String>();
  stormComponents.add("NIMBUS");
  serviceComponents.put("STORM",stormComponents);
  for (  Map.Entry<String,Collection<String>> entry : serviceComponents.entrySet()) {
    String service=entry.getKey();
    for (    String component : entry.getValue()) {
      expect(stack.getServiceForComponent(component)).andReturn(service).anyTimes();
    }
  }
  expect(stack.getCardinality("MYSQL_SERVER")).andReturn(new Cardinality("0-1")).anyTimes();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.BlueprintResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void resetGlobalMocks(){
  reset(dao,metaInfo,blueprintFactory,securityFactory,blueprint,entity);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.CalculatedStatusTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before() public void setup() throws Exception {
  m_injector=Guice.createInjector(new InMemoryDefaultTestModule());
  m_injector.getInstance(GuiceJpaInitializer.class);
  m_injector.injectMembers(this);
  s_field=HostRoleCommand.class.getDeclaredField("taskId");
  s_field.setAccessible(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.ClusterPrivilegeResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void resetGlobalMocks(){
  resetAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.ClusterResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  ClusterResourceProvider.init(topologyManager,topologyFactory,securityFactory,gson);
  ProvisionClusterRequest.init(blueprintFactory);
  provider=new ClusterResourceProvider(controller);
  expect(blueprintFactory.getBlueprint(BLUEPRINT_NAME)).andReturn(blueprint).anyTimes();
  expect(securityFactory.createSecurityConfigurationFromRequest(null,false)).andReturn(null).anyTimes();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.ClusterStackVersionResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  repositoryVersionDAOMock=createNiceMock(RepositoryVersionDAO.class);
  hostVersionDAO=createNiceMock(HostVersionDAO.class);
  hostComponentStateDAO=createNiceMock(HostComponentStateDAO.class);
  configHelper=createNiceMock(ConfigHelper.class);
  InMemoryDefaultTestModule inMemoryModule=new InMemoryDefaultTestModule();
  Properties properties=inMemoryModule.getProperties();
  properties.setProperty(Configuration.AGENT_PACKAGE_PARALLEL_COMMANDS_LIMIT_KEY,String.valueOf(MAX_TASKS_PER_STAGE));
  configuration=new Configuration(properties);
  stageFactory=createNiceMock(StageFactory.class);
  clusterVersionDAO=createNiceMock(ClusterVersionDAO.class);
  injector=Guice.createInjector(Modules.override(inMemoryModule).with(new MockModule()));
  injector.getInstance(GuiceJpaInitializer.class);
  ambariMetaInfo=injector.getInstance(AmbariMetaInfo.class);
  resourceTypeDAO=injector.getInstance(ResourceTypeDAO.class);
  stackDAO=injector.getInstance(StackDAO.class);
  clusterDAO=injector.getInstance(ClusterDAO.class);
  hostDAO=injector.getInstance(HostDAO.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.CompatibleRepositoryVersionResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before() throws Exception {
  final AmbariMetaInfo ambariMetaInfo=EasyMock.createMock(AmbariMetaInfo.class);
  final ClusterVersionDAO clusterVersionDAO=EasyMock.createMock(ClusterVersionDAO.class);
  StackEntity hdp11Stack=new StackEntity();
  hdp11Stack.setStackName("HDP");
  hdp11Stack.setStackVersion("1.1");
  RepositoryVersionEntity entity1=new RepositoryVersionEntity();
  entity1.setDisplayName("name1");
  entity1.setOperatingSystems(jsonStringRedhat6);
  entity1.setStack(hdp11Stack);
  entity1.setVersion("1.1.1.1");
  entity1.setId(1L);
  StackEntity hdp22Stack=new StackEntity();
  hdp22Stack.setStackName("HDP");
  hdp22Stack.setStackVersion("2.2");
  RepositoryVersionEntity entity2=new RepositoryVersionEntity();
  entity2.setDisplayName("name2");
  entity2.setOperatingSystems(jsonStringRedhat6);
  entity2.setStack(hdp22Stack);
  entity2.setVersion("2.2.2.2");
  entity2.setId(2L);
  final RepositoryVersionDAO repoVersionDAO=EasyMock.createMock(RepositoryVersionDAO.class);
  StackId stackId11=new StackId("HDP","1.1");
  StackId stackId22=new StackId("HDP","2.2");
  expect(repoVersionDAO.findByStack(stackId11)).andReturn(Collections.singletonList(entity1)).atLeastOnce();
  expect(repoVersionDAO.findByStack(stackId22)).andReturn(Collections.singletonList(entity2)).atLeastOnce();
  replay(repoVersionDAO);
  final StackInfo stack1=new StackInfo(){
    @Override public Map<String,UpgradePack> getUpgradePacks(){
      Map<String,UpgradePack> map=new HashMap<String,UpgradePack>();
      UpgradePack pack1=new UpgradePack(){
        @Override public String getName(){
          return "pack1";
        }
        @Override public String getTarget(){
          return "1.1.*.*";
        }
        @Override public UpgradeType getType(){
          return UpgradeType.ROLLING;
        }
      }
;
      UpgradePack pack2=new UpgradePack(){
        @Override public String getName(){
          return "pack2";
        }
        @Override public String getTarget(){
          return "2.2.*.*";
        }
        @Override public String getTargetStack(){
          return "HDP-2.2";
        }
        @Override public UpgradeType getType(){
          return UpgradeType.NON_ROLLING;
        }
      }
;
      UpgradePack pack3=new UpgradePack(){
        @Override public String getName(){
          return "pack2";
        }
        @Override public String getTarget(){
          return "2.2.*.*";
        }
        @Override public String getTargetStack(){
          return "HDP-2.2";
        }
        @Override public UpgradeType getType(){
          return UpgradeType.ROLLING;
        }
      }
;
      map.put("pack1",pack1);
      map.put("pack2",pack2);
      map.put("pack3",pack3);
      return map;
    }
  }
;
  final StackInfo stack2=new StackInfo(){
    @Override public Map<String,UpgradePack> getUpgradePacks(){
      Map<String,UpgradePack> map=new HashMap<String,UpgradePack>();
      UpgradePack pack=new UpgradePack(){
        @Override public String getName(){
          return "pack2";
        }
        @Override public String getTarget(){
          return "2.2.*.*";
        }
        @Override public UpgradeType getType(){
          return UpgradeType.NON_ROLLING;
        }
      }
;
      map.put("pack2",pack);
      return map;
    }
  }
;
  InMemoryDefaultTestModule injectorModule=new InMemoryDefaultTestModule(){
    @Override protected void configure(){
      super.configure();
      bind(AmbariMetaInfo.class).toInstance(ambariMetaInfo);
      bind(ClusterVersionDAO.class).toInstance(clusterVersionDAO);
      bind(RepositoryVersionDAO.class).toInstance(repoVersionDAO);
      requestStaticInjection(CompatibleRepositoryVersionResourceProvider.class);
    }
  }
;
  injector=Guice.createInjector(injectorModule);
  expect(ambariMetaInfo.getUpgradePacks("HDP","1.1")).andReturn(stack1.getUpgradePacks());
  expect(ambariMetaInfo.getUpgradePacks("HDP","2.2")).andReturn(stack2.getUpgradePacks());
  replay(ambariMetaInfo);
  injector.getInstance(GuiceJpaInitializer.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.ComponentResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void clearAuthentication(){
  SecurityContextHolder.getContext().setAuthentication(null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.ConfigGroupResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  hostDAO=createStrictMock(HostDAO.class);
  injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.CredentialResourceProviderTest </h4><pre class="type-7 type-2 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setUp() throws Exception {
  tmpFolder.create();
  final File masterKeyFile=tmpFolder.newFile(Configuration.MASTER_KEY_FILENAME_DEFAULT);
  Assert.assertTrue(MasterKeyServiceImpl.initializeMasterKeyFile(masterKeyFile,"secret"));
  injector=Guice.createInjector(new AbstractModule(){
    @Override protected void configure(){
      Properties properties=new Properties();
      properties.setProperty(Configuration.MASTER_KEY_LOCATION,tmpFolder.getRoot().getAbsolutePath());
      properties.setProperty(Configuration.MASTER_KEYSTORE_LOCATION,tmpFolder.getRoot().getAbsolutePath());
      bind(CredentialStoreService.class).to(CredentialStoreServiceImpl.class);
      bind(OsFamily.class).toInstance(createNiceMock(OsFamily.class));
      bind(SecurePasswordHelper.class).toInstance(new SecurePasswordHelper());
      bind(Configuration.class).toInstance(new Configuration(properties));
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.ExportBlueprintRequestTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setupTest() throws Exception {
  Field f=ExportBlueprintRequest.class.getDeclaredField("controller");
  f.setAccessible(true);
  f.set(null,controller);
  expect(controller.getStackServices((Set<StackServiceRequest>)anyObject())).andReturn(Collections.<StackServiceResponse>emptySet()).anyTimes();
  expect(controller.getStackLevelConfigurations((Set<StackLevelConfigurationRequest>)anyObject())).andReturn(Collections.<StackConfigurationResponse>emptySet()).anyTimes();
  replay(controller);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.GroupResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void clearAuthentication(){
  SecurityContextHolder.getContext().setAuthentication(null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.HostComponentResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void clearAuthentication(){
  SecurityContextHolder.getContext().setAuthentication(null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.HostStackVersionResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  repositoryVersionDAOMock=createNiceMock(RepositoryVersionDAO.class);
  hostVersionDAOMock=createNiceMock(HostVersionDAO.class);
  configHelper=createNiceMock(ConfigHelper.class);
  InMemoryDefaultTestModule module=new InMemoryDefaultTestModule();
  injector=Guice.createInjector(Modules.override(module).with(new MockModule()));
  injector.getInstance(GuiceJpaInitializer.class);
  ambariMetaInfo=injector.getInstance(AmbariMetaInfo.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.JMXHostProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  clusters=injector.getInstance(Clusters.class);
  controller=injector.getInstance(AmbariManagementController.class);
  SecurityContextHolder.getContext().setAuthentication(TestAuthenticationFactory.createAdministrator());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.KerberosDescriptorResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  reset(request);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.MemberResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void clearAuthentication(){
  SecurityContextHolder.getContext().setAuthentication(null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.PermissionResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void resetGlobalMocks(){
  reset(dao);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.ProvisionClusterRequestTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  reset(blueprintFactory,blueprint,hostResourceProvider);
  ProvisionClusterRequest.init(blueprintFactory);
  Class clazz=BaseClusterRequest.class;
  Field f=clazz.getDeclaredField("hostResourceProvider");
  f.setAccessible(true);
  f.set(null,hostResourceProvider);
  expect(blueprintFactory.getBlueprint(BLUEPRINT_NAME)).andReturn(blueprint).once();
  expect(blueprint.getConfiguration()).andReturn(blueprintConfig).anyTimes();
  expect(hostResourceProvider.checkPropertyIds(Collections.singleton("Hosts/host_name"))).andReturn(Collections.<String>emptySet()).once();
  replay(blueprintFactory,blueprint,hostResourceProvider);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.RepositoryVersionResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before() throws Exception {
  final Set<String> validVersions=Sets.newHashSet("1.1","1.1-17","1.1.1.1","1.1.343432.2","1.1.343432.2-234234324");
  final Set<StackInfo> stacks=new HashSet<StackInfo>();
  final AmbariMetaInfo ambariMetaInfo=Mockito.mock(AmbariMetaInfo.class);
  clusterVersionDAO=Mockito.mock(ClusterVersionDAO.class);
  final InMemoryDefaultTestModule injectorModule=new InMemoryDefaultTestModule(){
    @Override protected void configure(){
      super.configure();
      bind(AmbariMetaInfo.class).toInstance(ambariMetaInfo);
      bind(ClusterVersionDAO.class).toInstance(clusterVersionDAO);
    }
  }
;
  injector=Guice.createInjector(injectorModule);
  final StackInfo stackInfo=new StackInfo(){
    @Override public Map<String,UpgradePack> getUpgradePacks(){
      final Map<String,UpgradePack> map=new HashMap<String,UpgradePack>();
      final UpgradePack pack1=new UpgradePack(){
        @Override public String getName(){
          return "pack1";
        }
        @Override public String getTarget(){
          return "1.1.*.*";
        }
      }
;
      final UpgradePack pack2=new UpgradePack(){
        @Override public String getName(){
          return "pack2";
        }
        @Override public String getTarget(){
          return "1.1.*.*";
        }
      }
;
      map.put("pack1",pack1);
      map.put("pack2",pack2);
      return map;
    }
  }
;
  stackInfo.setName("HDP");
  stackInfo.setVersion("1.1");
  stacks.add(stackInfo);
  Mockito.when(ambariMetaInfo.getStack(Mockito.anyString(),Mockito.anyString())).thenAnswer(new Answer<StackInfo>(){
    @Override public StackInfo answer(    InvocationOnMock invocation) throws Throwable {
      final String stack=invocation.getArguments()[0].toString();
      final String version=invocation.getArguments()[1].toString();
      if (stack.equals("HDP") && validVersions.contains(version)) {
        return stackInfo;
      }
 else {
        throw new Exception("error");
      }
    }
  }
);
  Mockito.when(ambariMetaInfo.getStacks()).thenReturn(stacks);
  Mockito.when(ambariMetaInfo.getUpgradePacks(Mockito.anyString(),Mockito.anyString())).thenAnswer(new Answer<Map<String,UpgradePack>>(){
    @Override public Map<String,UpgradePack> answer(    InvocationOnMock invocation) throws Throwable {
      return stackInfo.getUpgradePacks();
    }
  }
);
  final HashSet<OperatingSystemInfo> osInfos=new HashSet<OperatingSystemInfo>();
  osInfos.add(new OperatingSystemInfo("redhat6"));
  osInfos.add(new OperatingSystemInfo("redhat7"));
  Mockito.when(ambariMetaInfo.getOperatingSystems(Mockito.anyString(),Mockito.anyString())).thenAnswer(new Answer<Set<OperatingSystemInfo>>(){
    @Override public Set<OperatingSystemInfo> answer(    InvocationOnMock invocation) throws Throwable {
      final String stack=invocation.getArguments()[0].toString();
      final String version=invocation.getArguments()[1].toString();
      if (stack.equals("HDP") && validVersions.contains(version)) {
        return osInfos;
      }
 else {
        return new HashSet<OperatingSystemInfo>();
      }
    }
  }
);
  Mockito.when(clusterVersionDAO.findByStackAndVersion(Mockito.anyString(),Mockito.anyString(),Mockito.anyString())).thenAnswer(new Answer<List<ClusterVersionEntity>>(){
    @Override public List<ClusterVersionEntity> answer(    InvocationOnMock invocation) throws Throwable {
      final String stack=invocation.getArguments()[0].toString();
      final String version=invocation.getArguments()[1].toString();
      if (stack.equals("HDP-1.1") && version.equals("1.1.1.1")) {
        return getNoClusterVersions();
      }
 else {
        return getInstallFailedClusterVersions();
      }
    }
  }
);
  injector.getInstance(GuiceJpaInitializer.class);
  StackDAO stackDAO=injector.getInstance(StackDAO.class);
  StackEntity stackEntity=new StackEntity();
  stackEntity.setStackName("HDP");
  stackEntity.setStackVersion("1.1");
  stackDAO.create(stackEntity);
  Clusters clusters=injector.getInstance(Clusters.class);
  clusters.addCluster("c1",new StackId("HDP","1.1"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.RequestResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before() throws Exception {
  requestDAO=createNiceMock(RequestDAO.class);
  hrcDAO=createNiceMock(HostRoleCommandDAO.class);
  topologyManager=createNiceMock(TopologyManager.class);
  expect(topologyManager.getStageSummaries(EasyMock.<Long>anyObject())).andReturn(Collections.<Long,HostRoleCommandStatusSummaryDTO>emptyMap()).anyTimes();
  expect(topologyManager.getRequests(EasyMock.<Collection<Long>>anyObject())).andReturn(Collections.<LogicalRequest>emptyList()).anyTimes();
  replay(topologyManager);
  Field field=RequestResourceProvider.class.getDeclaredField("s_requestDAO");
  field.setAccessible(true);
  field.set(null,requestDAO);
  field=RequestResourceProvider.class.getDeclaredField("s_hostRoleCommandDAO");
  field.setAccessible(true);
  field.set(null,hrcDAO);
  field=RequestResourceProvider.class.getDeclaredField("topologyManager");
  field.setAccessible(true);
  field.set(null,topologyManager);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.RoleAuthorizationResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup(){
  reset();
  injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new AbstractModule(){
    @Override protected void configure(){
      AmbariManagementController managementController=createNiceMock(AmbariManagementController.class);
      bind(AmbariManagementController.class).toInstance(managementController);
      bind(DBAccessor.class).toInstance(createNiceMock(DBAccessor.class));
      bind(EntityManager.class).toInstance(createNiceMock(EntityManager.class));
      bind(PermissionDAO.class).toInstance(createStrictMock(PermissionDAO.class));
      bind(RoleAuthorizationDAO.class).toInstance(createStrictMock(RoleAuthorizationDAO.class));
    }
  }
));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.ScaleClusterRequestTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  ScaleClusterRequest.init(blueprintFactory);
  Class clazz=BaseClusterRequest.class;
  Field f=clazz.getDeclaredField("hostResourceProvider");
  f.setAccessible(true);
  f.set(null,hostResourceProvider);
  expect(blueprintFactory.getBlueprint(BLUEPRINT_NAME)).andReturn(blueprint).anyTimes();
  expect(blueprint.getConfiguration()).andReturn(blueprintConfig).anyTimes();
  expect(blueprint.getHostGroup(GROUP1_NAME)).andReturn(hostGroup1).anyTimes();
  expect(blueprint.getHostGroup(GROUP2_NAME)).andReturn(hostGroup1).anyTimes();
  expect(blueprint.getHostGroup(GROUP3_NAME)).andReturn(hostGroup1).anyTimes();
  expect(blueprint.getName()).andReturn(BLUEPRINT_NAME).anyTimes();
  expect(hostResourceProvider.checkPropertyIds(Collections.singleton("test/prop"))).andReturn(Collections.<String>emptySet()).once();
  replay(blueprintFactory,blueprint,hostResourceProvider,hostGroup1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.ServiceResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void clearAuthentication(){
  SecurityContextHolder.getContext().setAuthentication(null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.SettingResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  mockControl=createControl();
  dao=mockControl.createMock(SettingDAO.class);
  resourceProvider=new SettingResourceProvider();
  setPrivateField(resourceProvider,"dao",dao);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.StackArtifactResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  InMemoryDefaultTestModule module=new InMemoryDefaultTestModule();
  injector=Guice.createInjector(module);
  injector.getInstance(GuiceJpaInitializer.class);
  metaInfo=injector.getInstance(AmbariMetaInfo.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.StackDefinedPropertyProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  InMemoryDefaultTestModule module=new InMemoryDefaultTestModule();
  injector=Guice.createInjector(Modules.override(module).with(new TestModuleWithCacheProvider()));
  injector.getInstance(GuiceJpaInitializer.class);
  StackDefinedPropertyProvider.init(injector);
  helper=injector.getInstance(OrmTestHelper.class);
  clusters=injector.getInstance(Clusters.class);
  StackId stackId=new StackId("HDP-2.0.5");
  clusters.addCluster("c2",stackId);
  Cluster cluster=clusters.getCluster("c2");
  cluster.setDesiredStackVersion(stackId);
  helper.getOrCreateRepositoryVersion(stackId,stackId.getStackVersion());
  cluster.createClusterVersion(stackId,stackId.getStackVersion(),"admin",RepositoryVersionState.UPGRADING);
  clusters.addHost("h1");
  Host host=clusters.getHost("h1");
  Map<String,String> hostAttributes=new HashMap<String,String>();
  hostAttributes.put("os_family","redhat");
  hostAttributes.put("os_release_version","6.3");
  host.setHostAttributes(hostAttributes);
  host.persist();
  clusters.mapHostToCluster("h1","c2");
  AmbariManagementController amc=createNiceMock(AmbariManagementController.class);
  Field field=AmbariServer.class.getDeclaredField("clusterController");
  field.setAccessible(true);
  field.set(null,amc);
  Clusters clustersMock=createNiceMock(Clusters.class);
  Cluster clusterMock=createNiceMock(Cluster.class);
  expect(amc.getClusters()).andReturn(clustersMock).anyTimes();
  expect(clustersMock.getCluster(CLUSTER_NAME_PROPERTY_ID)).andReturn(clusterMock).anyTimes();
  expect(clusterMock.getResourceId()).andReturn(2L).anyTimes();
  try {
    expect(clustersMock.getCluster(anyObject(String.class))).andReturn(clusterMock).anyTimes();
  }
 catch (  AmbariException e) {
    e.printStackTrace();
  }
  replay(amc,clustersMock,clusterMock);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.StackDependencyResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void resetGlobalMocks(){
  reset(metaInfo);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.StackServiceResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  P1.setName("P1");
  P1.setValue("V1");
  P2.setName("P2");
  P2.setValue("V2");
  TEST_SERVICE_PROPERTY_LIST=ImmutableList.of(P1,P2);
  TEST_SERVICE_PROPERTIES=ImmutableMap.of(P1.getName(),P1.getValue(),P2.getName(),P2.getValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.StageResourceProviderTest </h4><pre class="type-7 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void before(){
  dao=createStrictMock(StageDAO.class);
  clusters=createStrictMock(Clusters.class);
  cluster=createStrictMock(Cluster.class);
  hrcDao=createStrictMock(HostRoleCommandDAO.class);
  topologyManager=EasyMock.createNiceMock(TopologyManager.class);
  expect(topologyManager.getStages()).andReturn(new ArrayList<StageEntity>()).anyTimes();
  expect(hrcDao.findAggregateCounts(EasyMock.anyObject(Long.class))).andReturn(new HashMap<Long,HostRoleCommandStatusSummaryDTO>(){
{
      put(0L,new HostRoleCommandStatusSummaryDTO(0,1000L,2500L,0,0,1,0,0,0,0,0,0,0,0,0));
    }
  }
).anyTimes();
  replay(hrcDao,topologyManager);
  managementController=createNiceMock(AmbariManagementController.class);
  injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  Assert.assertNotNull(injector);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.UpgradeResourceProviderHDP22Test </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@SuppressWarnings({"serial","unchecked"}) @Before public void before() throws Exception {
  configHelper=EasyMock.createNiceMock(ConfigHelper.class);
  expect(configHelper.getPlaceholderValueFromDesiredConfigurations(EasyMock.anyObject(Cluster.class),EasyMock.eq("{{foo/bar}}"))).andReturn("placeholder-rendered-properly").anyTimes();
  expect(configHelper.getDefaultProperties(EasyMock.anyObject(StackId.class),EasyMock.anyObject(Cluster.class))).andReturn(new HashMap<String,Map<String,String>>()).anyTimes();
  expect(configHelper.getEffectiveConfigAttributes(EasyMock.anyObject(Cluster.class),EasyMock.anyObject(Map.class))).andReturn(new HashMap<String,Map<String,Map<String,String>>>()).anyTimes();
  expect(configHelper.getEffectiveDesiredTags(EasyMock.anyObject(Cluster.class),EasyMock.eq("h1"))).andReturn(new HashMap<String,Map<String,String>>(){
{
      put("hive-site",new HashMap<String,String>(){
{
          put("tag",configTagVersion1);
        }
      }
);
    }
  }
).times(3);
  expect(configHelper.getEffectiveDesiredTags(EasyMock.anyObject(Cluster.class),EasyMock.eq("h1"))).andReturn(new HashMap<String,Map<String,String>>(){
{
      put("hive-site",new HashMap<String,String>(){
{
          put("tag",configTagVersion2);
        }
      }
);
    }
  }
).times(2);
  expect(configHelper.getEffectiveConfigProperties(EasyMock.anyObject(Cluster.class),EasyMock.anyObject(Map.class))).andReturn(new HashMap<String,Map<String,String>>(){
{
      put("hive-site",configTagVersion1Properties);
    }
  }
).times(1);
  expect(configHelper.getEffectiveConfigProperties(EasyMock.anyObject(Cluster.class),EasyMock.anyObject(Map.class))).andReturn(new HashMap<String,Map<String,String>>(){
{
      put("hive-site",configTagVersion2Properties);
    }
  }
).times(2);
  expect(configHelper.getMergedConfig(EasyMock.anyObject(Map.class),EasyMock.anyObject(Map.class))).andReturn(new HashMap<String,String>()).anyTimes();
  EasyMock.replay(configHelper);
  injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  injector.getInstance(GuiceJpaInitializer.class);
  helper=injector.getInstance(OrmTestHelper.class);
  amc=injector.getInstance(AmbariManagementController.class);
  Field field=AmbariServer.class.getDeclaredField("clusterController");
  field.setAccessible(true);
  field.set(null,amc);
  stackDAO=injector.getInstance(StackDAO.class);
  upgradeDao=injector.getInstance(UpgradeDAO.class);
  repoVersionDao=injector.getInstance(RepositoryVersionDAO.class);
  AmbariEventPublisher publisher=createNiceMock(AmbariEventPublisher.class);
  replay(publisher);
  ViewRegistry.initInstance(new ViewRegistry(publisher));
  StackEntity stackEntity=stackDAO.find("HDP","2.2.0");
  RepositoryVersionEntity repoVersionEntity=new RepositoryVersionEntity();
  repoVersionEntity.setDisplayName("For Stack Version 2.2.0");
  repoVersionEntity.setOperatingSystems("");
  repoVersionEntity.setStack(stackEntity);
  repoVersionEntity.setVersion("2.2.0.0");
  repoVersionDao.create(repoVersionEntity);
  repoVersionEntity=new RepositoryVersionEntity();
  repoVersionEntity.setDisplayName("For Stack Version 2.2.4.2");
  repoVersionEntity.setOperatingSystems("");
  repoVersionEntity.setStack(stackEntity);
  repoVersionEntity.setVersion("2.2.4.2");
  repoVersionDao.create(repoVersionEntity);
  clusters=injector.getInstance(Clusters.class);
  StackId stackId=new StackId("HDP-2.2.0");
  clusters.addCluster("c1",stackId);
  Cluster cluster=clusters.getCluster("c1");
  helper.getOrCreateRepositoryVersion(stackId,stackId.getStackVersion());
  cluster.createClusterVersion(stackId,stackId.getStackVersion(),"admin",RepositoryVersionState.UPGRADING);
  cluster.transitionClusterVersion(stackId,stackId.getStackVersion(),RepositoryVersionState.CURRENT);
  clusters.addHost("h1");
  Host host=clusters.getHost("h1");
  Map<String,String> hostAttributes=new HashMap<String,String>();
  hostAttributes.put("os_family","redhat");
  hostAttributes.put("os_release_version","6.3");
  host.setHostAttributes(hostAttributes);
  host.setState(HostState.HEALTHY);
  host.persist();
  clusters.mapHostToCluster("h1","c1");
  Service service=cluster.addService("HIVE");
  service.setDesiredStackVersion(cluster.getDesiredStackVersion());
  service.persist();
  ServiceComponent component=service.addServiceComponent("HIVE_SERVER");
  ServiceComponentHost sch=component.addServiceComponentHost("h1");
  sch.setVersion("2.2.0.0");
  component=service.addServiceComponent("HIVE_CLIENT");
  sch=component.addServiceComponentHost("h1");
  sch.setVersion("2.2.0.0");
  topologyManager=injector.getInstance(TopologyManager.class);
  StageUtils.setTopologyManager(topologyManager);
  ActionManager.setTopologyManager(topologyManager);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.UpgradeResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before() throws Exception {
  configHelper=EasyMock.createNiceMock(ConfigHelper.class);
  expect(configHelper.getPlaceholderValueFromDesiredConfigurations(EasyMock.anyObject(Cluster.class),EasyMock.eq("{{foo/bar}}"))).andReturn("placeholder-rendered-properly").anyTimes();
  expect(configHelper.getDefaultProperties(EasyMock.anyObject(StackId.class),EasyMock.anyObject(Cluster.class))).andReturn(new HashMap<String,Map<String,String>>()).anyTimes();
  EasyMock.replay(configHelper);
  injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  injector.getInstance(GuiceJpaInitializer.class);
  helper=injector.getInstance(OrmTestHelper.class);
  amc=injector.getInstance(AmbariManagementController.class);
  ambariMetaInfo=injector.getInstance(AmbariMetaInfo.class);
  Field field=AmbariServer.class.getDeclaredField("clusterController");
  field.setAccessible(true);
  field.set(null,amc);
  stackDAO=injector.getInstance(StackDAO.class);
  upgradeDao=injector.getInstance(UpgradeDAO.class);
  repoVersionDao=injector.getInstance(RepositoryVersionDAO.class);
  AmbariEventPublisher publisher=createNiceMock(AmbariEventPublisher.class);
  replay(publisher);
  ViewRegistry.initInstance(new ViewRegistry(publisher));
  StackEntity stackEntity211=stackDAO.find("HDP","2.1.1");
  StackEntity stackEntity220=stackDAO.find("HDP","2.2.0");
  StackId stack211=new StackId("HDP-2.1.1");
  StackId stack220=new StackId("HDP-2.2.0");
  RepositoryVersionEntity repoVersionEntity=new RepositoryVersionEntity();
  repoVersionEntity.setDisplayName("My New Version 1");
  repoVersionEntity.setOperatingSystems("");
  repoVersionEntity.setStack(stackEntity211);
  repoVersionEntity.setVersion("2.1.1.0");
  repoVersionDao.create(repoVersionEntity);
  repoVersionEntity=new RepositoryVersionEntity();
  repoVersionEntity.setDisplayName("My New Version 2 for patch upgrade");
  repoVersionEntity.setOperatingSystems("");
  repoVersionEntity.setStack(stackEntity211);
  repoVersionEntity.setVersion("2.1.1.1");
  repoVersionDao.create(repoVersionEntity);
  repoVersionEntity=new RepositoryVersionEntity();
  repoVersionEntity.setDisplayName("My New Version 3 for major upgrade");
  repoVersionEntity.setOperatingSystems("");
  repoVersionEntity.setStack(stackEntity220);
  repoVersionEntity.setVersion("2.2.0.0");
  repoVersionDao.create(repoVersionEntity);
  clusters=injector.getInstance(Clusters.class);
  clusters.addCluster("c1",stack211);
  Cluster cluster=clusters.getCluster("c1");
  helper.getOrCreateRepositoryVersion(stack211,stack211.getStackVersion());
  helper.getOrCreateRepositoryVersion(stack220,stack220.getStackVersion());
  cluster.createClusterVersion(stack211,stack211.getStackVersion(),"admin",RepositoryVersionState.UPGRADING);
  cluster.transitionClusterVersion(stack211,stack211.getStackVersion(),RepositoryVersionState.CURRENT);
  clusters.addHost("h1");
  Host host=clusters.getHost("h1");
  Map<String,String> hostAttributes=new HashMap<String,String>();
  hostAttributes.put("os_family","redhat");
  hostAttributes.put("os_release_version","6.3");
  host.setHostAttributes(hostAttributes);
  host.setState(HostState.HEALTHY);
  host.persist();
  clusters.mapHostToCluster("h1","c1");
  Service service=cluster.addService("ZOOKEEPER");
  service.setDesiredStackVersion(cluster.getDesiredStackVersion());
  service.persist();
  ServiceComponent component=service.addServiceComponent("ZOOKEEPER_SERVER");
  ServiceComponentHost sch=component.addServiceComponentHost("h1");
  sch.setVersion("2.1.1.0");
  component=service.addServiceComponent("ZOOKEEPER_CLIENT");
  sch=component.addServiceComponentHost("h1");
  sch.setVersion("2.1.1.0");
  topologyManager=injector.getInstance(TopologyManager.class);
  StageUtils.setTopologyManager(topologyManager);
  ActionManager.setTopologyManager(topologyManager);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.UserAuthorizationResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  resetAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.UserResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void resetMocks(){
  resetAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.ViewInstanceResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  reset(singleton);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.ViewPermissionResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void resetGlobalMocks(){
  reset(dao,viewRegistry);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.ViewPrivilegeResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void resetGlobalMocks(){
  ViewRegistry.initInstance(ViewRegistryTest.getRegistry(viewDAO,viewInstanceDAO,userDAO,memberDAO,privilegeDAO,resourceDAO,resourceTypeDAO,securityHelper,handlerList,null,null,null));
  reset(privilegeDAO,userDAO,groupDAO,principalDAO,permissionDAO,resourceDAO,handlerList);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.WidgetLayoutResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  dao=createStrictMock(WidgetLayoutDAO.class);
  widgetDAO=createStrictMock(WidgetDAO.class);
  m_injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.internal.WidgetResourceProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  dao=createStrictMock(WidgetDAO.class);
  m_injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.metrics.JMXPropertyProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUpCommonMocks() throws AmbariException, NoSuchFieldException, IllegalAccessException {
  AmbariManagementController amc=createNiceMock(AmbariManagementController.class);
  Field field=AmbariServer.class.getDeclaredField("clusterController");
  field.setAccessible(true);
  field.set(null,amc);
  Clusters clusters=createNiceMock(Clusters.class);
  Cluster cluster=createNiceMock(Cluster.class);
  expect(amc.getClusters()).andReturn(clusters).anyTimes();
  expect(clusters.getCluster(CLUSTER_NAME_PROPERTY_ID)).andReturn(cluster).anyTimes();
  expect(cluster.getResourceId()).andReturn(2L).anyTimes();
  try {
    expect(clusters.getCluster(anyObject(String.class))).andReturn(cluster).anyTimes();
  }
 catch (  AmbariException e) {
    e.printStackTrace();
  }
  replay(amc,clusters,cluster);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.metrics.timeline.AMSPropertyProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setupCache(){
  cacheEntryFactory=new TimelineMetricCacheEntryFactory(new Configuration());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.utilities.DatabaseCheckerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector.injectMembers(this);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.controller.utilities.state.GeneralServiceCalculatedStateTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  final StackId stack211=new StackId("HDP-2.1.1");
  injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new Module(){
    @Override public void configure(    Binder binder){
    }
  }
));
  injector.getInstance(GuiceJpaInitializer.class);
  injector.injectMembers(this);
  clusters.addCluster(clusterName,stack211);
  cluster=clusters.getCluster(clusterName);
  service=cluster.addService(getServiceName());
  service.setDesiredStackVersion(cluster.getDesiredStackVersion());
  service.persist();
  createComponentsAndHosts();
  TopologyManager topologyManager=injector.getInstance(TopologyManager.class);
  StageUtils.setTopologyManager(topologyManager);
  ActionManager.setTopologyManager(topologyManager);
  serviceCalculatedState=getServiceCalculatedStateObject();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.events.EventsTest </h4><pre class="type-7 type-2 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 */
@Before public void setup() throws Exception {
  m_injector=Guice.createInjector(new InMemoryDefaultTestModule());
  m_injector.getInstance(GuiceJpaInitializer.class);
  m_helper=m_injector.getInstance(OrmTestHelper.class);
  EventBus synchronizedBus=EventBusSynchronizer.synchronizeAmbariEventPublisher(m_injector);
  m_listener=m_injector.getInstance(MockEventListener.class);
  synchronizedBus.register(m_listener);
  m_clusters=m_injector.getInstance(Clusters.class);
  m_serviceFactory=m_injector.getInstance(ServiceFactory.class);
  m_componentFactory=m_injector.getInstance(ServiceComponentFactory.class);
  m_schFactory=m_injector.getInstance(ServiceComponentHostFactory.class);
  m_definitionDao=m_injector.getInstance(AlertDefinitionDAO.class);
  m_clusterName="foo";
  StackId stackId=new StackId("HDP","2.0.6");
  m_clusters.addCluster(m_clusterName,stackId);
  m_clusters.addHost(HOSTNAME);
  Host host=m_clusters.getHost(HOSTNAME);
  Map<String,String> hostAttributes=new HashMap<String,String>();
  hostAttributes.put("os_family","redhat");
  hostAttributes.put("os_release_version","6.4");
  host.setHostAttributes(hostAttributes);
  host.setState(HostState.HEALTHY);
  host.persist();
  m_cluster=m_clusters.getCluster(m_clusterName);
  Assert.assertNotNull(m_cluster);
  m_cluster.setDesiredStackVersion(stackId);
  m_helper.getOrCreateRepositoryVersion(stackId,stackId.getStackVersion());
  m_cluster.createClusterVersion(stackId,stackId.getStackVersion(),"admin",RepositoryVersionState.UPGRADING);
  m_clusters.mapHostToCluster(HOSTNAME,m_clusterName);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.events.listeners.upgrade.AlertMaintenanceModeListenerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 */
@Before public void setup() throws Exception {
  injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  EventBusSynchronizer.synchronizeAmbariEventPublisher(injector);
  injector.injectMembers(this);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.events.listeners.upgrade.HostVersionOutOfSyncListenerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  EventBusSynchronizer.synchronizeAmbariEventPublisher(injector);
  injector.injectMembers(this);
  StackId stackId=new StackId(this.stackId);
  clusters.addCluster("c1",stackId);
  c1=clusters.getCluster("c1");
  addHost("h1");
  helper.getOrCreateRepositoryVersion(stackId,stackId.getStackVersion());
  c1.createClusterVersion(stackId,stackId.getStackVersion(),"admin",RepositoryVersionState.UPGRADING);
  c1.transitionClusterVersion(stackId,stackId.getStackVersion(),RepositoryVersionState.CURRENT);
  clusters.mapHostToCluster("h1","c1");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.events.publishers.VersionEventPublisherTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.metadata.AgentAlertDefinitionsTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  m_injector=Guice.createInjector(new InMemoryDefaultTestModule());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.metadata.RoleCommandOrderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.metadata.RoleGraphTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.notifications.dispatchers.AlertScriptDispatcherTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before() throws Exception {
  m_injector=Guice.createInjector(new MockModule());
  m_injector.injectMembers(this);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.notifications.dispatchers.EmailDispatcherTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before() throws Exception {
  m_injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  m_dispatchFactory=m_injector.getInstance(DispatchFactory.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.DBAccessorImplTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.JdbcPropertyTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void configure(){
  properties=new Properties();
  properties.setProperty(Configuration.SERVER_PERSISTENCE_TYPE_KEY,"in-memory");
  properties.setProperty(Configuration.METADATA_DIR_PATH,"src/test/resources/stacks");
  properties.setProperty(Configuration.SERVER_VERSION_FILE,"src/test/resources/version");
  properties.setProperty(Configuration.OS_VERSION_KEY,"centos5");
  properties.setProperty(Configuration.SHARED_RESOURCES_DIR_KEY,"src/test/resources/");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.TestOrmImpl </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup(){
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  injector.getInstance(AmbariMetaInfo.class);
  injector.getInstance(OrmTestHelper.class).createDefaultData();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.AlertDefinitionDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 */
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  injector.getInstance(UnitOfWork.class).begin();
  dispatchDao=injector.getInstance(AlertDispatchDAO.class);
  dao=injector.getInstance(AlertDefinitionDAO.class);
  alertsDao=injector.getInstance(AlertsDAO.class);
  helper=injector.getInstance(OrmTestHelper.class);
  clusterId=helper.createCluster();
  helper.createDefaultAlertGroups(clusterId);
  int i=0;
  for (; i < 8; i++) {
    AlertDefinitionEntity definition=new AlertDefinitionEntity();
    definition.setDefinitionName("Alert Definition " + i);
    definition.setServiceName("HDFS");
    definition.setComponentName(null);
    definition.setClusterId(clusterId);
    definition.setHash(UUID.randomUUID().toString());
    definition.setScheduleInterval(60);
    definition.setScope(Scope.SERVICE);
    definition.setSource("{\"type\" : \"SCRIPT\"}");
    definition.setSourceType(SourceType.SCRIPT);
    dao.create(definition);
  }
  for (; i < 10; i++) {
    AlertDefinitionEntity definition=new AlertDefinitionEntity();
    definition.setDefinitionName("Alert Definition " + i);
    definition.setServiceName("HDFS");
    if (i == 9) {
      definition.setComponentName("NAMENODE");
    }
 else {
      definition.setComponentName("DATANODE");
    }
    definition.setClusterId(clusterId);
    definition.setHash(UUID.randomUUID().toString());
    definition.setScheduleInterval(60);
    definition.setScope(Scope.SERVICE);
    definition.setSource("{\"type\" : \"SCRIPT\"}");
    definition.setSourceType(SourceType.SCRIPT);
    dao.create(definition);
  }
  for (; i < 12; i++) {
    AlertDefinitionEntity definition=new AlertDefinitionEntity();
    definition.setDefinitionName("Alert Definition " + i);
    definition.setServiceName("OOZIE");
    definition.setComponentName("OOZIE_SERVER");
    definition.setClusterId(clusterId);
    definition.setHash(UUID.randomUUID().toString());
    definition.setScheduleInterval(60);
    definition.setScope(Scope.HOST);
    definition.setSource("{\"type\" : \"SCRIPT\"}");
    definition.setSourceType(SourceType.SCRIPT);
    dao.create(definition);
  }
  for (; i < 15; i++) {
    AlertDefinitionEntity definition=new AlertDefinitionEntity();
    definition.setDefinitionName("Alert Definition " + i);
    definition.setServiceName(RootServiceResponseFactory.Services.AMBARI.name());
    definition.setComponentName(RootServiceResponseFactory.Components.AMBARI_AGENT.name());
    definition.setClusterId(clusterId);
    definition.setHash(UUID.randomUUID().toString());
    definition.setScheduleInterval(60);
    definition.setScope(Scope.HOST);
    definition.setSource("{\"type\" : \"SCRIPT\"}");
    definition.setSourceType(SourceType.SCRIPT);
    dao.create(definition);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.AlertDispatchDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 */
@Before public void setup() throws Exception {
  m_injector=Guice.createInjector(new InMemoryDefaultTestModule());
  m_injector.getInstance(GuiceJpaInitializer.class);
  m_injector.getInstance(UnitOfWork.class).begin();
  m_dao=m_injector.getInstance(AlertDispatchDAO.class);
  m_alertsDao=m_injector.getInstance(AlertsDAO.class);
  m_definitionDao=m_injector.getInstance(AlertDefinitionDAO.class);
  m_helper=m_injector.getInstance(OrmTestHelper.class);
  m_serviceFactory=m_injector.getInstance(ServiceFactory.class);
  m_componentFactory=m_injector.getInstance(ServiceComponentFactory.class);
  m_schFactory=m_injector.getInstance(ServiceComponentHostFactory.class);
  m_clusters=m_injector.getInstance(Clusters.class);
  m_alertHelper=m_injector.getInstance(AlertDaoHelper.class);
  EventBusSynchronizer.synchronizeAmbariEventPublisher(m_injector);
  m_cluster=m_clusters.getClusterById(m_helper.createCluster());
  m_helper.initializeClusterWithStack(m_cluster);
  Set<AlertTargetEntity> targets=createTargets();
  for (int i=0; i < 10; i++) {
    AlertGroupEntity group=new AlertGroupEntity();
    group.setDefault(false);
    group.setGroupName("Group Name " + i);
    group.setClusterId(m_cluster.getClusterId());
    for (    AlertTargetEntity alertTarget : targets) {
      group.addAlertTarget(alertTarget);
    }
    m_dao.create(group);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.AlertsDAOTest </h4><pre class="type-7 type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 */
@Before public void setup() throws Exception {
  m_injector=Guice.createInjector(new InMemoryDefaultTestModule());
  m_injector.getInstance(GuiceJpaInitializer.class);
  m_injector.getInstance(UnitOfWork.class).begin();
  m_helper=m_injector.getInstance(OrmTestHelper.class);
  m_dao=m_injector.getInstance(AlertsDAO.class);
  m_definitionDao=m_injector.getInstance(AlertDefinitionDAO.class);
  m_serviceFactory=m_injector.getInstance(ServiceFactory.class);
  m_componentFactory=m_injector.getInstance(ServiceComponentFactory.class);
  m_schFactory=m_injector.getInstance(ServiceComponentHostFactory.class);
  m_clusters=m_injector.getInstance(Clusters.class);
  m_alertHelper=m_injector.getInstance(AlertDaoHelper.class);
  EventBusSynchronizer.synchronizeAmbariEventPublisher(m_injector);
  m_cluster=m_clusters.getClusterById(m_helper.createCluster());
  m_helper.initializeClusterWithStack(m_cluster);
  m_helper.addHost(m_clusters,m_cluster,HOSTNAME);
  m_helper.installYarnService(m_cluster,m_serviceFactory,m_componentFactory,m_schFactory,HOSTNAME);
  for (int i=0; i < 5; i++) {
    AlertDefinitionEntity definition=new AlertDefinitionEntity();
    definition.setDefinitionName("Alert Definition " + i);
    definition.setServiceName("YARN");
    definition.setComponentName("Component " + i);
    definition.setClusterId(m_cluster.getClusterId());
    definition.setHash(UUID.randomUUID().toString());
    definition.setScheduleInterval(Integer.valueOf(60));
    definition.setScope(Scope.SERVICE);
    definition.setSource("{\"type\" : \"SCRIPT\"}");
    definition.setSourceType(SourceType.SCRIPT);
    m_definitionDao.create(definition);
  }
  List<AlertDefinitionEntity> definitions=m_definitionDao.findAll();
  assertNotNull(definitions);
  assertEquals(5,definitions.size());
  calendar.clear();
  calendar.set(2014,Calendar.JANUARY,1);
  for (  AlertDefinitionEntity definition : definitions) {
    for (int i=0; i < 10; i++) {
      AlertHistoryEntity history=new AlertHistoryEntity();
      history.setServiceName(definition.getServiceName());
      history.setClusterId(m_cluster.getClusterId());
      history.setAlertDefinition(definition);
      history.setAlertLabel(definition.getDefinitionName() + " " + i);
      history.setAlertText(definition.getDefinitionName() + " " + i);
      history.setAlertTimestamp(calendar.getTimeInMillis());
      history.setComponentName(definition.getComponentName());
      history.setHostName("h1");
      history.setAlertState(AlertState.OK);
      if (i == 0 || i == 5) {
        history.setAlertState(AlertState.CRITICAL);
      }
      calendar.add(Calendar.DATE,1);
      m_dao.create(history);
    }
  }
  for (  AlertDefinitionEntity definition : definitions) {
    List<AlertHistoryEntity> alerts=m_dao.findAll();
    AlertHistoryEntity history=null;
    for (    AlertHistoryEntity alert : alerts) {
      if (definition.equals(alert.getAlertDefinition())) {
        history=alert;
      }
    }
    assertNotNull(history);
    AlertCurrentEntity current=new AlertCurrentEntity();
    current.setAlertHistory(history);
    current.setLatestTimestamp(new Date().getTime());
    current.setOriginalTimestamp(new Date().getTime() - 10800000);
    current.setMaintenanceState(MaintenanceState.OFF);
    m_dao.create(current);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.BlueprintDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void init(){
  reset(entityManagerProvider);
  expect(entityManagerProvider.get()).andReturn(entityManager).atLeastOnce();
  replay(entityManagerProvider);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.ClusterVersionDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  clusterVersionDAO=injector.getInstance(ClusterVersionDAO.class);
  clusterDAO=injector.getInstance(ClusterDAO.class);
  helper=injector.getInstance(OrmTestHelper.class);
  injector.getInstance(GuiceJpaInitializer.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.ConfigGroupDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  injector.getInstance(AmbariMetaInfo.class);
  stackDAO=injector.getInstance(StackDAO.class);
  clusterDAO=injector.getInstance(ClusterDAO.class);
  configGroupDAO=injector.getInstance(ConfigGroupDAO.class);
  configGroupConfigMappingDAO=injector.getInstance(ConfigGroupConfigMappingDAO.class);
  configGroupHostMappingDAO=injector.getInstance(ConfigGroupHostMappingDAO.class);
  hostDAO=injector.getInstance(HostDAO.class);
  resourceTypeDAO=injector.getInstance(ResourceTypeDAO.class);
  hostFactory=injector.getInstance(HostFactory.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.CrudDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  stackDAO=injector.getInstance(StackDAO.class);
  repositoryVersionDAO=injector.getInstance(RepositoryVersionDAO.class);
  injector.getInstance(GuiceJpaInitializer.class);
  injector.getInstance(AmbariMetaInfo.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.GroupDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void init(){
  reset(entityManagerProvider);
  expect(entityManagerProvider.get()).andReturn(entityManager).atLeastOnce();
  replay(entityManagerProvider);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.HostConfigMappingDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws AmbariException {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  hostConfigMappingDAO=injector.getInstance(HostConfigMappingDAO.class);
  hostDAO=injector.getInstance(HostDAO.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.HostRoleCommandDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  m_injector=Guice.createInjector(new InMemoryDefaultTestModule());
  m_injector.getInstance(GuiceJpaInitializer.class);
  m_injector.getInstance(AmbariMetaInfo.class);
  m_clusterDAO=m_injector.getInstance(ClusterDAO.class);
  m_stageDAO=m_injector.getInstance(StageDAO.class);
  m_hostRoleCommandDAO=m_injector.getInstance(HostRoleCommandDAO.class);
  m_hostDAO=m_injector.getInstance(HostDAO.class);
  m_requestDAO=m_injector.getInstance(RequestDAO.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.HostVersionDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  resourceTypeDAO=injector.getInstance(ResourceTypeDAO.class);
  clusterDAO=injector.getInstance(ClusterDAO.class);
  stackDAO=injector.getInstance(StackDAO.class);
  clusterVersionDAO=injector.getInstance(ClusterVersionDAO.class);
  hostDAO=injector.getInstance(HostDAO.class);
  hostVersionDAO=injector.getInstance(HostVersionDAO.class);
  helper=injector.getInstance(OrmTestHelper.class);
  injector.getInstance(AmbariMetaInfo.class);
  createDefaultData();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.KerberosDescriptorDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  reset(entityManagerProvider);
  expect(entityManagerProvider.get()).andReturn(entityManager).atLeastOnce();
  replay(entityManagerProvider);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.PrincipalDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void init(){
  reset(entityManagerProvider);
  expect(entityManagerProvider.get()).andReturn(entityManager).atLeastOnce();
  replay(entityManagerProvider);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.PrincipalTypeDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void init(){
  reset(entityManagerProvider);
  expect(entityManagerProvider.get()).andReturn(entityManager).atLeastOnce();
  replay(entityManagerProvider);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.RepositoryVersionDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  repositoryVersionDAO=injector.getInstance(RepositoryVersionDAO.class);
  clusterVersionDAO=injector.getInstance(ClusterVersionDAO.class);
  clusterDAO=injector.getInstance(ClusterDAO.class);
  stackDAO=injector.getInstance(StackDAO.class);
  helper=injector.getInstance(OrmTestHelper.class);
  injector.getInstance(GuiceJpaInitializer.class);
  injector.getInstance(AmbariMetaInfo.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.RequestDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  injector.getInstance(AmbariMetaInfo.class);
  clusterDAO=injector.getInstance(ClusterDAO.class);
  stageDAO=injector.getInstance(StageDAO.class);
  hostRoleCommandDAO=injector.getInstance(HostRoleCommandDAO.class);
  hostDAO=injector.getInstance(HostDAO.class);
  requestDAO=injector.getInstance(RequestDAO.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.RequestScheduleDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  injector.getInstance(AmbariMetaInfo.class);
  clusterDAO=injector.getInstance(ClusterDAO.class);
  hostDAO=injector.getInstance(HostDAO.class);
  clusterDAO=injector.getInstance(ClusterDAO.class);
  requestScheduleDAO=injector.getInstance(RequestScheduleDAO.class);
  batchRequestDAO=injector.getInstance(RequestScheduleBatchRequestDAO.class);
  resourceTypeDAO=injector.getInstance(ResourceTypeDAO.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.ResourceDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void init(){
  reset(entityManagerProvider);
  expect(entityManagerProvider.get()).andReturn(entityManager).atLeastOnce();
  replay(entityManagerProvider);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.ResourceTypeDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void init(){
  reset(entityManagerProvider);
  expect(entityManagerProvider.get()).andReturn(entityManager).atLeastOnce();
  replay(entityManagerProvider);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.ServiceConfigDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  injector.getInstance(AmbariMetaInfo.class);
  clusterDAO=injector.getInstance(ClusterDAO.class);
  stackDAO=injector.getInstance(StackDAO.class);
  serviceConfigDAO=injector.getInstance(ServiceConfigDAO.class);
  resourceTypeDAO=injector.getInstance(ResourceTypeDAO.class);
  configGroupDAO=injector.getInstance(ConfigGroupDAO.class);
  configGroupConfigMappingDAO=injector.getInstance(ConfigGroupConfigMappingDAO.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.SettingDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp(){
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  dao=injector.getInstance(SettingDAO.class);
  injector.getInstance(GuiceJpaInitializer.class);
  injector.getInstance(OrmTestHelper.class).createCluster();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.StageDAOTest </h4><pre class="type-7 type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  stageDao=injector.getInstance(StageDAO.class);
  OrmTestHelper helper=injector.getInstance(OrmTestHelper.class);
  Long clusterId=helper.createCluster();
  RequestDAO requestDao=injector.getInstance(RequestDAO.class);
  RequestEntity requestEntity=new RequestEntity();
  requestEntity.setClusterId(clusterId);
  requestEntity.setStartTime(1000L);
  requestEntity.setEndTime(1200L);
  requestEntity.setRequestId(99L);
  requestDao.create(requestEntity);
  for (int i=0; i < 5; i++) {
    StageEntity definition=new StageEntity();
    definition.setClusterId(clusterId);
    definition.setRequestId(99L);
    definition.setStageId((long)(100 + i));
    definition.setLogInfo("log info for " + i);
    definition.setRequestContext("request context for " + i);
    definition.setRequest(requestEntity);
    stageDao.create(definition);
  }
  List<StageEntity> definitions=stageDao.findAll();
  assertNotNull(definitions);
  assertEquals(5,definitions.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.TopologyLogicalRequestDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  requestDAO=injector.getInstance(TopologyRequestDAO.class);
  logicalRequestDAO=injector.getInstance(TopologyLogicalRequestDAO.class);
  hostGroupDAO=injector.getInstance(TopologyHostGroupDAO.class);
  helper=injector.getInstance(OrmTestHelper.class);
  clusterId=helper.createCluster();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.TopologyRequestDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  requestDAO=injector.getInstance(TopologyRequestDAO.class);
  helper=injector.getInstance(OrmTestHelper.class);
  clusterId=helper.createCluster();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.UpgradeDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 */
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  dao=injector.getInstance(UpgradeDAO.class);
  helper=injector.getInstance(OrmTestHelper.class);
  clusterId=helper.createCluster();
  UpgradeEntity entity=new UpgradeEntity();
  entity.setClusterId(Long.valueOf(1));
  entity.setRequestId(Long.valueOf(1));
  entity.setFromVersion("");
  entity.setToVersion("");
  entity.setUpgradeType(UpgradeType.ROLLING);
  entity.setUpgradePackage("test-upgrade");
  entity.setDowngradeAllowed(true);
  UpgradeGroupEntity group=new UpgradeGroupEntity();
  group.setName("group_name");
  group.setTitle("group title");
  List<UpgradeItemEntity> items=new ArrayList<UpgradeItemEntity>();
  UpgradeItemEntity item=new UpgradeItemEntity();
  item.setState(UpgradeState.IN_PROGRESS);
  item.setStageId(Long.valueOf(1L));
  items.add(item);
  item=new UpgradeItemEntity();
  item.setState(UpgradeState.PENDING);
  item.setStageId(Long.valueOf(1L));
  items.add(item);
  group.setItems(items);
  entity.setUpgradeGroups(Collections.singletonList(group));
  dao.create(entity);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.UserDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void init(){
  reset(entityManagerProvider);
  expect(entityManagerProvider.get()).andReturn(entityManager).atLeastOnce();
  replay(entityManagerProvider);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.ViewInstanceDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void init(){
  reset(entityManagerProvider);
  expect(entityManagerProvider.get()).andReturn(entityManager).atLeastOnce();
  replay(entityManagerProvider);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.WidgetDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  widgetDAO=injector.getInstance(WidgetDAO.class);
  widgetLayoutDAO=injector.getInstance(WidgetLayoutDAO.class);
  injector.getInstance(GuiceJpaInitializer.class);
  helper=injector.getInstance(OrmTestHelper.class);
  clusterId=helper.createCluster();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.dao.WidgetLayoutDAOTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  widgetLayoutDAO=injector.getInstance(WidgetLayoutDAO.class);
  widgetDAO=injector.getInstance(WidgetDAO.class);
  injector.getInstance(GuiceJpaInitializer.class);
  helper=injector.getInstance(OrmTestHelper.class);
  clusterId=helper.createCluster();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.orm.entities.BlueprintEntityTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup(){
  stackEntity=new StackEntity();
  stackEntity.setStackName("HDP");
  stackEntity.setStackVersion("2.0.6");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.resources.TestResources </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws IOException {
  injector=Guice.createInjector(new ResourceModule());
  resMan=injector.getInstance(ResourceManager.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.scheduler.ExecutionScheduleManagerTest </h4><pre class="type-4 type-7 type-2 type-11 type-18 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws Exception {
  InMemoryDefaultTestModule defaultTestModule=new InMemoryDefaultTestModule();
  properties=defaultTestModule.getProperties();
  injector=Guice.createInjector(Modules.override(defaultTestModule).with(new ExecutionSchedulerTestModule()));
  injector.getInstance(GuiceJpaInitializer.class);
  clusters=injector.getInstance(Clusters.class);
  metaInfo=injector.getInstance(AmbariMetaInfo.class);
  executionScheduleManager=injector.getInstance(ExecutionScheduleManager.class);
  executionScheduler=injector.getInstance(ExecutionScheduler.class);
  requestExecutionFactory=injector.getInstance(RequestExecutionFactory.class);
  clusterName="c1";
  clusters.addCluster(clusterName,new StackId("HDP-0.1"));
  cluster=clusters.getCluster(clusterName);
  Assert.assertNotNull(cluster);
  assertThat(executionScheduler,instanceOf(TestExecutionScheduler.class));
  TestExecutionScheduler testExecutionScheduler=(TestExecutionScheduler)executionScheduler;
  scheduler=testExecutionScheduler.getScheduler();
  Assert.assertNotNull(scheduler);
  executionScheduleManager.start();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.scheduler.ExecutionSchedulerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  Properties properties=new Properties();
  properties.setProperty(Configuration.EXECUTION_SCHEDULER_THREADS_KEY,"2");
  properties.setProperty(Configuration.EXECUTION_SCHEDULER_CLUSTERED_KEY,"false");
  properties.setProperty(Configuration.EXECUTION_SCHEDULER_CONNECTIONS_KEY,"2");
  properties.setProperty(Configuration.SERVER_JDBC_DRIVER_KEY,"db.driver");
  properties.setProperty(Configuration.SERVER_JDBC_URL_KEY,"jdbc:postgresql://localhost/");
  properties.setProperty(Configuration.SERVER_JDBC_USER_NAME_KEY,"user");
  properties.setProperty(Configuration.SERVER_DB_NAME_KEY,"derby");
  configuration=new Configuration(properties);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.security.AbstractSecurityHeaderFilterTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  temporaryFolder.create();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.security.SecurePasswordHelperTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  securePasswordHelper=new SecurePasswordHelper();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.security.SecurityFilterTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws IOException {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  SecurityFilter.init(injector.getInstance(Configuration.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.security.SslExecutionTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws IOException {
  injector=Guice.createInjector(new SecurityModule());
  certMan=injector.getInstance(CertificateManager.class);
  certMan.initRootCert();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.security.authorization.AmbariAuthorizationProviderDisableUserTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp(){
  userDAO=Mockito.mock(UserDAO.class);
  createUser("activeUser",true);
  createUser("disabledUser",false);
  MemberDAO memberDao=Mockito.mock(MemberDAO.class);
  PrivilegeDAO privilegeDao=Mockito.mock(PrivilegeDAO.class);
  AuthorizationHelper authorizationHelper=new AuthorizationHelper();
  AmbariLocalUserDetailsService uds=new AmbariLocalUserDetailsService(null,null,authorizationHelper,userDAO,memberDao,privilegeDao);
  daoProvider=new DaoAuthenticationProvider();
  daoProvider.setUserDetailsService(uds);
  daoProvider.setPasswordEncoder(encoder);
  ldapPopulator=new AmbariLdapAuthoritiesPopulator(authorizationHelper,userDAO,memberDao,privilegeDao);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.security.authorization.AmbariLdapAuthenticationProviderForDNWithSpaceTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp(){
  injector=Guice.createInjector(new AuthorizationTestModuleForLdapDNWithSpace());
  injector.injectMembers(this);
  injector.getInstance(GuiceJpaInitializer.class);
  configuration.setClientSecurityType(ClientSecurityType.LDAP);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.security.authorization.AmbariLdapAuthenticationProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp(){
  injector=Guice.createInjector(new AuthorizationTestModule());
  injector.injectMembers(this);
  injector.getInstance(GuiceJpaInitializer.class);
  configuration.setClientSecurityType(ClientSecurityType.LDAP);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.security.authorization.AmbariLocalUserDetailsServiceTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  injector.injectMembers(this);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.security.authorization.LdapServerPropertiesTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  ldapServerProperties=new LdapServerProperties();
  ldapServerProperties.setAnonymousBind(true);
  ldapServerProperties.setBaseDN("dc=ambari,dc=apache,dc=org");
  ldapServerProperties.setManagerDn("uid=manager," + ldapServerProperties.getBaseDN());
  ldapServerProperties.setManagerPassword("password");
  ldapServerProperties.setUseSsl(false);
  ldapServerProperties.setPrimaryUrl("1.2.3.4:389");
  ldapServerProperties.setUsernameAttribute("uid");
  ldapServerProperties.setUserObjectClass("dummyObjectClass");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.security.authorization.TestAmbariLdapAuthoritiesPopulator </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  resetAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.security.authorization.TestUsers </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws AmbariException {
  InMemoryDefaultTestModule module=new InMemoryDefaultTestModule();
  properties=module.getProperties();
  injector=Guice.createInjector(module);
  injector.getInstance(GuiceJpaInitializer.class);
  injector.injectMembers(this);
  Authentication auth=new UsernamePasswordAuthenticationToken("admin",null);
  SecurityContextHolder.getContext().setAuthentication(auth);
  ResourceTypeEntity resourceTypeEntity=new ResourceTypeEntity();
  resourceTypeEntity.setId(ResourceType.AMBARI.getId());
  resourceTypeEntity.setName(ResourceType.AMBARI.name());
  resourceTypeDAO.create(resourceTypeEntity);
  ResourceEntity resourceEntity=new ResourceEntity();
  resourceEntity.setId(ResourceEntity.AMBARI_RESOURCE_ID);
  resourceEntity.setResourceType(resourceTypeEntity);
  resourceDAO.create(resourceEntity);
  PermissionEntity adminPermissionEntity=new PermissionEntity();
  adminPermissionEntity.setId(PermissionEntity.AMBARI_ADMINISTRATOR_PERMISSION);
  adminPermissionEntity.setPermissionName(PermissionEntity.AMBARI_ADMINISTRATOR_PERMISSION_NAME);
  adminPermissionEntity.setResourceType(resourceTypeEntity);
  permissionDAO.create(adminPermissionEntity);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.security.encryption.CredentialProviderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  tmpFolder.create();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.security.encryption.CredentialStoreServiceImplTest </h4><pre class="type-7 type-2 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setUp() throws Exception {
  tmpFolder.create();
  final File masterKeyFile=tmpFolder.newFile(Configuration.MASTER_KEY_FILENAME_DEFAULT);
  Assert.assertTrue(MasterKeyServiceImpl.initializeMasterKeyFile(masterKeyFile,"secret"));
  Injector injector=Guice.createInjector(new AbstractModule(){
    @Override protected void configure(){
      Properties properties=new Properties();
      properties.setProperty(Configuration.MASTER_KEY_LOCATION,tmpFolder.getRoot().getAbsolutePath());
      properties.setProperty(Configuration.MASTER_KEYSTORE_LOCATION,tmpFolder.getRoot().getAbsolutePath());
      bind(OsFamily.class).toInstance(createNiceMock(OsFamily.class));
      bind(SecurePasswordHelper.class).toInstance(new SecurePasswordHelper());
      bind(Configuration.class).toInstance(new Configuration(properties));
    }
  }
);
  MasterKeyService masterKeyService=new MasterKeyServiceImpl(masterKeyFile);
  Assert.assertTrue(masterKeyService.isMasterKeyInitialized());
  credentialStoreService=injector.getInstance(CredentialStoreServiceImpl.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.security.encryption.CredentialStoreTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  tmpFolder.create();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.security.ldap.LdapPerformanceTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp(){
  injector=Guice.createInjector(new AuthorizationTestModule());
  injector.injectMembers(this);
  injector.getInstance(GuiceJpaInitializer.class);
  configuration.setClientSecurityType(ClientSecurityType.LDAP);
  configuration.setLdap("c6402.ambari.apache.org:389","posixAccount","uid","posixGroup","cn","memberUid","dc=apache,dc=org",false,"uid=hdfs,ou=people,ou=dev,dc=apache,dc=org","hdfs");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.serveraction.kerberos.KerberosServerActionTest </h4><pre class="type-7 type-5 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setUp() throws Exception {
  final Cluster cluster=mock(Cluster.class);
  final Clusters clusters=mock(Clusters.class);
  when(clusters.getCluster(anyString())).thenReturn(cluster);
  final ExecutionCommand mockExecutionCommand=mock(ExecutionCommand.class);
  final HostRoleCommand mockHostRoleCommand=mock(HostRoleCommand.class);
  injector=Guice.createInjector(new AbstractModule(){
    @Override protected void configure(){
      bind(KerberosHelper.class).toInstance(createNiceMock(KerberosHelper.class));
      bind(KerberosServerAction.class).toInstance(new KerberosServerAction(){
        @Override protected CommandReport processIdentity(        Map<String,String> identityRecord,        String evaluatedPrincipal,        KerberosOperationHandler operationHandler,        Map<String,String> kerberosConfiguration,        Map<String,Object> requestSharedDataContext) throws AmbariException {
          Assert.assertNotNull(requestSharedDataContext);
          if (requestSharedDataContext.get("FAIL") != null) {
            return createCommandReport(1,HostRoleStatus.FAILED,"{}","ERROR","ERROR");
          }
 else {
            requestSharedDataContext.put(identityRecord.get(KerberosIdentityDataFileReader.PRINCIPAL),evaluatedPrincipal);
            return null;
          }
        }
        @Override public CommandReport execute(        ConcurrentMap<String,Object> requestSharedDataContext) throws AmbariException, InterruptedException {
          return processIdentities(requestSharedDataContext);
        }
      }
);
      bind(Clusters.class).toInstance(clusters);
      bind(OsFamily.class).toInstance(createNiceMock(OsFamily.class));
    }
  }
);
  temporaryDirectory=File.createTempFile("ambari_ut_",".d");
  Assert.assertTrue(temporaryDirectory.delete());
  Assert.assertTrue(temporaryDirectory.mkdirs());
  KerberosIdentityDataFileWriter writer=new KerberosIdentityDataFileWriter(new File(temporaryDirectory,KerberosIdentityDataFileWriter.DATA_FILE_NAME));
  for (int i=0; i < 10; i++) {
    writer.writeRecord("hostName","serviceName" + i,"serviceComponentName" + i,"principal|_HOST|_REALM" + i,"principal_type","keytabFilePath" + i,"keytabFileOwnerName" + i,"keytabFileOwnerAccess" + i,"keytabFileGroupName" + i,"keytabFileGroupAccess" + i,"false");
  }
  writer.close();
  commandParams.put(KerberosServerAction.DATA_DIRECTORY,temporaryDirectory.getAbsolutePath());
  commandParams.put(KerberosServerAction.DEFAULT_REALM,"REALM.COM");
  commandParams.put(KerberosServerAction.KDC_TYPE,KDCType.MIT_KDC.toString());
  when(mockExecutionCommand.getCommandParams()).thenReturn(commandParams);
  when(mockExecutionCommand.getClusterName()).thenReturn("c1");
  action=injector.getInstance(KerberosServerAction.class);
  action.setExecutionCommand(mockExecutionCommand);
  action.setHostRoleCommand(mockHostRoleCommand);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.serveraction.kerberos.UpdateKerberosConfigsServerActionTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  final AmbariManagementController controller=createNiceMock(AmbariManagementController.class);
  final Clusters clusters=createNiceMock(Clusters.class);
  final Cluster cluster=createNiceMock(Cluster.class);
  expect(controller.getClusters()).andReturn(clusters).once();
  expect(clusters.getCluster(anyObject(String.class))).andReturn(cluster).once();
  injector=Guice.createInjector(new AbstractModule(){
    @Override protected void configure(){
      bind(AmbariManagementController.class).toInstance(controller);
      bind(ConfigHelper.class).toInstance(createNiceMock(ConfigHelper.class));
    }
  }
);
  dataDir=testFolder.getRoot().getAbsolutePath();
  setupConfigDat();
  action=injector.getInstance(UpdateKerberosConfigsServerAction.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.serveraction.upgrades.AutoSkipFailedSummaryActionTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  upgradeDAOMock=createNiceMock(UpgradeDAO.class);
  hostRoleCommandDAOMock=createNiceMock(HostRoleCommandDAO.class);
  clustersMock=createNiceMock(Clusters.class);
  clusterMock=createNiceMock(Cluster.class);
  expect(clustersMock.getCluster(anyString())).andReturn(clusterMock).anyTimes();
  replay(clustersMock);
  expect(clusterMock.getDesiredStackVersion()).andReturn(HDP_STACK).anyTimes();
  replay(clusterMock);
  InMemoryDefaultTestModule module=new InMemoryDefaultTestModule();
  m_injector=Guice.createInjector(Modules.override(module).with(new MockModule()));
  m_injector.getInstance(GuiceJpaInitializer.class);
  m_injector.injectMembers(this);
  m_injector.getInstance(UnitOfWork.class).begin();
  m_injector.getInstance(ActionMetadata.class).addServiceCheckAction("ZOOKEEPER");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.serveraction.upgrades.ComponentVersionCheckActionTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  m_injector=Guice.createInjector(new InMemoryDefaultTestModule());
  m_injector.getInstance(GuiceJpaInitializer.class);
  m_injector.injectMembers(this);
  m_injector.getInstance(UnitOfWork.class).begin();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.serveraction.upgrades.ConfigureActionTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  m_injector=Guice.createInjector(new InMemoryDefaultTestModule());
  m_injector.getInstance(GuiceJpaInitializer.class);
  m_injector.injectMembers(this);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.serveraction.upgrades.HiveZKQuorumConfigActionTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 * Sets up some generic mocks before the test.
 * @throws Exception
 */
@Before public void before() throws Exception {
  m_action=new HiveZKQuorumConfigAction();
  EasyMock.expect(m_executionCommand.getClusterName()).andReturn(CLUSTER_NAME).atLeastOnce();
  EasyMock.expect(m_clusters.getCluster(CLUSTER_NAME)).andReturn(m_cluster).atLeastOnce();
  Field m_clusterField=HiveZKQuorumConfigAction.class.getDeclaredField("m_clusters");
  m_clusterField.setAccessible(true);
  m_clusterField.set(m_action,m_clusters);
  m_action.setExecutionCommand(m_executionCommand);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.serveraction.upgrades.RangerConfigCalculationTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  m_injector=EasyMock.createMock(Injector.class);
  m_clusters=EasyMock.createMock(Clusters.class);
  Cluster cluster=EasyMock.createMock(Cluster.class);
  Config adminConfig=new ConfigImpl("admin-properties"){
    Map<String,String> mockProperties=new HashMap<String,String>(){
{
        put("DB_FLAVOR","MYSQL");
        put("db_host","host1");
        put("db_name","ranger");
        put("audit_db_name","ranger_audit");
      }
    }
;
    @Override public Map<String,String> getProperties(){
      return mockProperties;
    }
  }
;
  Config adminSiteConfig=new ConfigImpl("admin-properties"){
    Map<String,String> mockProperties=new HashMap<String,String>();
    @Override public Map<String,String> getProperties(){
      return mockProperties;
    }
    @Override public void setProperties(    Map<String,String> properties){
      mockProperties.putAll(properties);
    }
    @Override public void persist(    boolean newConfig){
    }
  }
;
  expect(cluster.getDesiredConfigByType("admin-properties")).andReturn(adminConfig).atLeastOnce();
  expect(cluster.getDesiredConfigByType("ranger-admin-site")).andReturn(adminSiteConfig).atLeastOnce();
  expect(m_clusters.getCluster((String)anyObject())).andReturn(cluster).anyTimes();
  expect(m_injector.getInstance(Clusters.class)).andReturn(m_clusters).atLeastOnce();
  replay(m_injector,m_clusters,cluster);
  m_clusterField=RangerConfigCalculation.class.getDeclaredField("m_clusters");
  m_clusterField.setAccessible(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.serveraction.upgrades.SparkShufflePropertyConfigTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  m_injector=EasyMock.createMock(Injector.class);
  m_clusters=EasyMock.createMock(Clusters.class);
  cluster=EasyMock.createMock(Cluster.class);
  Config adminConfig=new ConfigImpl("yarn-site"){
    Map<String,String> mockProperties=new HashMap<String,String>(){
{
        put("yarn.nodemanager.aux-services","some_service");
      }
    }
;
    @Override public Map<String,String> getProperties(){
      return mockProperties;
    }
    @Override public void setProperties(    Map<String,String> properties){
      mockProperties.putAll(properties);
    }
    @Override public void persist(    boolean newConfig){
    }
  }
;
  expect(cluster.getDesiredConfigByType("yarn-site")).andReturn(adminConfig).atLeastOnce();
  expect(m_clusters.getCluster((String)anyObject())).andReturn(cluster).anyTimes();
  expect(m_injector.getInstance(Clusters.class)).andReturn(m_clusters).atLeastOnce();
  replay(m_injector,m_clusters);
  clusterField=SparkShufflePropertyConfig.class.getDeclaredField("clusters");
  clusterField.setAccessible(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.serveraction.upgrades.UpgradeActionTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  m_injector=Guice.createInjector(new InMemoryDefaultTestModule());
  m_injector.getInstance(GuiceJpaInitializer.class);
  m_injector.injectMembers(this);
  m_injector.getInstance(UnitOfWork.class).begin();
  amc=m_injector.getInstance(AmbariManagementController.class);
  ambariMetaInfo=m_injector.getInstance(AmbariMetaInfo.class);
  Field field=AmbariServer.class.getDeclaredField("clusterController");
  field.setAccessible(true);
  field.set(null,amc);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.stageplanner.TestStagePlanner </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  injector.injectMembers(this);
  stageFactory=injector.getInstance(StageFactory.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.ConfigGroupTest </h4><pre class="type-7 type-2 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  clusters=injector.getInstance(Clusters.class);
  configFactory=injector.getInstance(ConfigFactory.class);
  configGroupFactory=injector.getInstance(ConfigGroupFactory.class);
  configGroupDAO=injector.getInstance(ConfigGroupDAO.class);
  configGroupHostMappingDAO=injector.getInstance(ConfigGroupHostMappingDAO.class);
  clusterName="foo";
  clusters.addCluster(clusterName,new StackId("HDP-0.1"));
  cluster=clusters.getCluster(clusterName);
  Assert.assertNotNull(cluster);
  clusters.addHost("h1");
  clusters.addHost("h2");
  Assert.assertNotNull(clusters.getHost("h1"));
  Assert.assertNotNull(clusters.getHost("h2"));
  clusters.getHost("h1").persist();
  clusters.getHost("h2").persist();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.ConfigHelperTest.RunWithCustomModule </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new AbstractModule(){
    @Override protected void configure(){
      final AmbariMetaInfo mockMetaInfo=createNiceMock(AmbariMetaInfo.class);
      final ClusterController clusterController=createStrictMock(ClusterController.class);
      bind(EntityManager.class).toInstance(createNiceMock(EntityManager.class));
      bind(DBAccessor.class).toInstance(createNiceMock(DBAccessor.class));
      bind(ClusterFactory.class).toInstance(createNiceMock(ClusterFactory.class));
      bind(HostFactory.class).toInstance(createNiceMock(HostFactory.class));
      bind(SecurityHelper.class).toInstance(createNiceMock(SecurityHelper.class));
      bind(OsFamily.class).toInstance(createNiceMock(OsFamily.class));
      bind(AmbariCustomCommandExecutionHelper.class).toInstance(createNiceMock(AmbariCustomCommandExecutionHelper.class));
      bind(AmbariManagementController.class).toInstance(createNiceMock(AmbariManagementController.class));
      bind(AmbariMetaInfo.class).toInstance(mockMetaInfo);
      bind(RequestFactory.class).toInstance(createNiceMock(RequestFactory.class));
      bind(Clusters.class).toInstance(createNiceMock(ClustersImpl.class));
      bind(ClusterController.class).toInstance(clusterController);
      bind(StackManagerFactory.class).toInstance(createNiceMock(StackManagerFactory.class));
    }
  }
);
  SecurityContextHolder.getContext().setAuthentication(TestAuthenticationFactory.createAdministrator("admin"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.ConfigHelperTest.RunWithInMemoryDefaultTestModule </h4><pre class="type-7 type-2 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws Exception {
  SecurityContextHolder.getContext().setAuthentication(TestAuthenticationFactory.createAdministrator("admin"));
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  clusters=injector.getInstance(Clusters.class);
  configGroupFactory=injector.getInstance(ConfigGroupFactory.class);
  configHelper=injector.getInstance(ConfigHelper.class);
  managementController=injector.getInstance(AmbariManagementController.class);
  clusterName="c1";
  clusters.addCluster(clusterName,new StackId("HDP-2.0.6"));
  cluster=clusters.getCluster(clusterName);
  Assert.assertNotNull(cluster);
  clusters.addHost("h1");
  clusters.addHost("h2");
  Assert.assertNotNull(clusters.getHost("h1"));
  Assert.assertNotNull(clusters.getHost("h2"));
  clusters.getHost("h1").persist();
  clusters.getHost("h2").persist();
  ConfigurationRequest cr=new ConfigurationRequest();
  cr.setClusterName(clusterName);
  cr.setType("core-site");
  cr.setVersionTag("version1");
  cr.setProperties(new HashMap<String,String>(){
{
      put("ipc.client.connect.max.retries","30");
      put("fs.trash.interval","30");
    }
  }
);
  cr.setPropertiesAttributes(new HashMap<String,Map<String,String>>(){
{
      Map<String,String> attrs=new HashMap<String,String>();
      attrs.put("ipc.client.connect.max.retries","1");
      attrs.put("fs.trash.interval","2");
      put("attribute1",attrs);
    }
  }
);
  final ClusterRequest clusterRequest1=new ClusterRequest(cluster.getClusterId(),clusterName,cluster.getDesiredStackVersion().getStackVersion(),null);
  clusterRequest1.setDesiredConfig(Collections.singletonList(cr));
  managementController.updateClusters(new HashSet<ClusterRequest>(){
{
      add(clusterRequest1);
    }
  }
,null);
  ConfigurationRequest cr2=new ConfigurationRequest();
  cr2.setClusterName(clusterName);
  cr2.setType("flume-conf");
  cr2.setVersionTag("version1");
  final ClusterRequest clusterRequest2=new ClusterRequest(cluster.getClusterId(),clusterName,cluster.getDesiredStackVersion().getStackVersion(),null);
  clusterRequest2.setDesiredConfig(Collections.singletonList(cr2));
  managementController.updateClusters(new HashSet<ClusterRequest>(){
{
      add(clusterRequest2);
    }
  }
,null);
  cr.setType("global");
  cr.setVersionTag("version1");
  cr.setProperties(new HashMap<String,String>(){
{
      put("dfs_namenode_name_dir","/hadoop/hdfs/namenode");
      put("namenode_heapsize","1024");
    }
  }
);
  cr.setPropertiesAttributes(new HashMap<String,Map<String,String>>(){
{
      Map<String,String> attrs=new HashMap<String,String>();
      attrs.put("dfs_namenode_name_dir","3");
      attrs.put("namenode_heapsize","4");
      put("attribute2",attrs);
    }
  }
);
  final ClusterRequest clusterRequest3=new ClusterRequest(cluster.getClusterId(),clusterName,cluster.getDesiredStackVersion().getStackVersion(),null);
  clusterRequest3.setDesiredConfig(Collections.singletonList(cr));
  managementController.updateClusters(new HashSet<ClusterRequest>(){
{
      add(clusterRequest3);
    }
  }
,null);
  ConfigurationRequest cr4=new ConfigurationRequest();
  cr4.setClusterName(clusterName);
  cr4.setType("oozie-site");
  cr4.setVersionTag("version1");
  cr4.setProperties(new HashMap<String,String>(){
{
      put("oozie.authentication.type","simple");
      put("oozie.service.HadoopAccessorService.kerberos.enabled","false");
    }
  }
);
  cr4.setPropertiesAttributes(null);
  final ClusterRequest clusterRequest4=new ClusterRequest(cluster.getClusterId(),clusterName,cluster.getDesiredStackVersion().getStackVersion(),null);
  clusterRequest4.setDesiredConfig(Collections.singletonList(cr4));
  managementController.updateClusters(new HashSet<ClusterRequest>(){
{
      add(clusterRequest4);
    }
  }
,null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.ConfigMergeHelperTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before() throws Exception {
  clustersMock=createNiceMock(Clusters.class);
  ambariMetaInfoMock=createNiceMock(AmbariMetaInfo.class);
  final InMemoryDefaultTestModule injectorModule=new InMemoryDefaultTestModule(){
    @Override protected void configure(){
      super.configure();
    }
  }
;
  MockModule mockModule=new MockModule();
  injector=Guice.createInjector(Modules.override(injectorModule).with(mockModule));
  injector.getInstance(GuiceJpaInitializer.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.RequestExecutionTest </h4><pre class="type-7 type-2 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  clusters=injector.getInstance(Clusters.class);
  metaInfo=injector.getInstance(AmbariMetaInfo.class);
  requestExecutionFactory=injector.getInstance(RequestExecutionFactory.class);
  requestScheduleDAO=injector.getInstance(RequestScheduleDAO.class);
  clusterName="foo";
  clusters.addCluster(clusterName,new StackId("HDP-0.1"));
  cluster=clusters.getCluster(clusterName);
  Assert.assertNotNull(cluster);
  clusters.addHost("h1");
  clusters.addHost("h2");
  clusters.addHost("h3");
  Assert.assertNotNull(clusters.getHost("h1"));
  Assert.assertNotNull(clusters.getHost("h2"));
  Assert.assertNotNull(clusters.getHost("h3"));
  clusters.getHost("h1").persist();
  clusters.getHost("h2").persist();
  clusters.getHost("h3").persist();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.ServiceComponentTest </h4><pre class="type-7 type-2 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  clusters=injector.getInstance(Clusters.class);
  serviceFactory=injector.getInstance(ServiceFactory.class);
  serviceComponentFactory=injector.getInstance(ServiceComponentFactory.class);
  serviceComponentHostFactory=injector.getInstance(ServiceComponentHostFactory.class);
  helper=injector.getInstance(OrmTestHelper.class);
  hostDAO=injector.getInstance(HostDAO.class);
  metaInfo=injector.getInstance(AmbariMetaInfo.class);
  clusterName="foo";
  serviceName="HDFS";
  StackId stackId=new StackId("HDP-0.1");
  clusters.addCluster(clusterName,stackId);
  cluster=clusters.getCluster(clusterName);
  cluster.setDesiredStackVersion(stackId);
  Assert.assertNotNull(cluster);
  helper.getOrCreateRepositoryVersion(stackId,stackId.getStackVersion());
  cluster.createClusterVersion(stackId,stackId.getStackVersion(),"admin",RepositoryVersionState.UPGRADING);
  Service s=serviceFactory.createNew(cluster,serviceName);
  cluster.addService(s);
  s.persist();
  service=cluster.getService(serviceName);
  Assert.assertNotNull(service);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.ServiceTest </h4><pre class="type-7 type-2 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  clusters=injector.getInstance(Clusters.class);
  serviceFactory=injector.getInstance(ServiceFactory.class);
  serviceComponentFactory=injector.getInstance(ServiceComponentFactory.class);
  metaInfo=injector.getInstance(AmbariMetaInfo.class);
  clusterName="foo";
  clusters.addCluster(clusterName,new StackId("HDP-0.1"));
  cluster=clusters.getCluster(clusterName);
  Assert.assertNotNull(cluster);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.UpgradeHelperTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before() throws Exception {
  m_configHelper=EasyMock.createNiceMock(ConfigHelper.class);
  expect(m_configHelper.getPlaceholderValueFromDesiredConfigurations(EasyMock.anyObject(Cluster.class),EasyMock.eq("{{foo/bar}}"))).andReturn("placeholder-rendered-properly").anyTimes();
  expect(m_configHelper.getEffectiveDesiredTags(EasyMock.anyObject(Cluster.class),EasyMock.anyObject(String.class))).andReturn(new HashMap<String,Map<String,String>>()).anyTimes();
  replay(m_configHelper);
  final InMemoryDefaultTestModule injectorModule=new InMemoryDefaultTestModule(){
    @Override protected void configure(){
      super.configure();
    }
  }
;
  MockModule mockModule=new MockModule();
  injector=Guice.createInjector(Modules.override(injectorModule).with(mockModule));
  injector.getInstance(GuiceJpaInitializer.class);
  helper=injector.getInstance(OrmTestHelper.class);
  ambariMetaInfo=injector.getInstance(AmbariMetaInfo.class);
  m_upgradeHelper=injector.getInstance(UpgradeHelper.class);
  m_masterHostResolver=EasyMock.createMock(MasterHostResolver.class);
  m_managementController=injector.getInstance(AmbariManagementController.class);
  SecurityContextHolder.getContext().setAuthentication(TestAuthenticationFactory.createAdministrator("admin"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.alerts.AggregateAlertListenerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 */
@Before public void setup() throws Exception {
  m_injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  m_injector.getInstance(GuiceJpaInitializer.class);
  m_listener=m_injector.getInstance(MockEventListener.class);
  m_alertsDao=m_injector.getInstance(AlertsDAO.class);
  EventBusSynchronizer.synchronizeAlertEventPublisher(m_injector).register(m_listener);
  EventBusSynchronizer.synchronizeAmbariEventPublisher(m_injector).register(m_listener);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.alerts.AlertDefinitionHashTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 */
@Override @Before @SuppressWarnings("unchecked") protected void setUp() throws Exception {
  super.setUp();
  m_injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  m_mockClusters=m_injector.getInstance(Clusters.class);
  m_mockCluster=m_injector.getInstance(Cluster.class);
  m_mockDao=m_injector.getInstance(AlertDefinitionDAO.class);
  List<ServiceComponentHost> serviceComponentHosts=new ArrayList<ServiceComponentHost>();
  ServiceComponentHost sch=EasyMock.createNiceMock(ServiceComponentHost.class);
  expect(sch.getServiceName()).andReturn("HDFS").anyTimes();
  expect(sch.getServiceComponentName()).andReturn("NAMENODE").anyTimes();
  expect(sch.getHostName()).andReturn(HOSTNAME).anyTimes();
  EasyMock.replay(sch);
  serviceComponentHosts.add(sch);
  sch=EasyMock.createNiceMock(ServiceComponentHost.class);
  expect(sch.getServiceName()).andReturn("HDFS").anyTimes();
  expect(sch.getServiceComponentName()).andReturn("DATANODE").anyTimes();
  expect(sch.getHostName()).andReturn(HOSTNAME).anyTimes();
  EasyMock.replay(sch);
  serviceComponentHosts.add(sch);
  Map<String,ServiceComponentHost> mapComponentHosts=new HashMap<String,ServiceComponentHost>();
  ServiceComponentHost host=EasyMock.createNiceMock(ServiceComponentHost.class);
  expect(host.getHostName()).andReturn(HOSTNAME).anyTimes();
  mapComponentHosts.put(HOSTNAME,host);
  Map<String,ServiceComponent> serviceComponents=new HashMap<String,ServiceComponent>();
  ServiceComponent namenode=EasyMock.createNiceMock(ServiceComponent.class);
  expect(namenode.getServiceComponentHosts()).andReturn(mapComponentHosts).anyTimes();
  expect(namenode.isMasterComponent()).andReturn(true).anyTimes();
  serviceComponents.put("NAMENODE",namenode);
  Map<String,Service> services=new HashMap<String,Service>();
  String hdfsName="HDFS";
  Service hdfs=EasyMock.createNiceMock(Service.class);
  expect(hdfs.getName()).andReturn("HDFS").anyTimes();
  expect(hdfs.getServiceComponents()).andReturn(serviceComponents).anyTimes();
  services.put(hdfsName,hdfs);
  EasyMock.replay(hdfs,host,namenode);
  expect(m_mockClusters.getCluster((String)anyObject())).andReturn(m_mockCluster).atLeastOnce();
  expect(m_mockClusters.getClusterById(EasyMock.anyInt())).andReturn(m_mockCluster).atLeastOnce();
  Map<String,Host> clusterHosts=new HashMap<String,Host>();
  clusterHosts.put(HOSTNAME,null);
  expect(m_mockClusters.getHostsForCluster(EasyMock.eq(CLUSTERNAME))).andReturn(clusterHosts).anyTimes();
  expect(m_mockCluster.getClusterId()).andReturn(Long.valueOf(1)).anyTimes();
  expect(m_mockCluster.getClusterName()).andReturn(CLUSTERNAME).anyTimes();
  expect(m_mockCluster.getServices()).andReturn(services).anyTimes();
  expect(m_mockCluster.getServiceComponentHosts(EasyMock.anyObject(String.class))).andReturn(serviceComponentHosts).anyTimes();
  m_hdfsService=new AlertDefinitionEntity();
  m_hdfsService.setDefinitionId(1L);
  m_hdfsService.setClusterId(1L);
  m_hdfsService.setHash(UUID.randomUUID().toString());
  m_hdfsService.setServiceName("HDFS");
  m_hdfsService.setComponentName("NAMENODE");
  m_hdfsService.setScope(Scope.SERVICE);
  m_hdfsService.setScheduleInterval(1);
  m_hdfsHost=new AlertDefinitionEntity();
  m_hdfsHost.setDefinitionId(2L);
  m_hdfsHost.setClusterId(1L);
  m_hdfsHost.setHash(UUID.randomUUID().toString());
  m_hdfsHost.setServiceName("HDFS");
  m_hdfsHost.setComponentName("DATANODE");
  m_hdfsHost.setScope(Scope.HOST);
  m_hdfsHost.setScheduleInterval(1);
  AlertDefinitionEntity agentScoped=new AlertDefinitionEntity();
  agentScoped.setDefinitionId(3L);
  agentScoped.setClusterId(1L);
  agentScoped.setHash(UUID.randomUUID().toString());
  agentScoped.setServiceName("AMBARI");
  agentScoped.setComponentName("AMBARI_AGENT");
  agentScoped.setScope(Scope.HOST);
  agentScoped.setScheduleInterval(1);
  EasyMock.expect(m_mockDao.findByServiceMaster(EasyMock.anyInt(),(Set<String>)EasyMock.anyObject())).andReturn(Collections.singletonList(m_hdfsService)).anyTimes();
  EasyMock.expect(m_mockDao.findByServiceComponent(EasyMock.anyInt(),EasyMock.anyObject(String.class),EasyMock.anyObject(String.class))).andReturn(Collections.singletonList(m_hdfsHost)).anyTimes();
  m_agentDefinitions=new ArrayList<AlertDefinitionEntity>();
  m_agentDefinitions.add(agentScoped);
  EasyMock.expect(m_mockDao.findAgentScoped(EasyMock.anyInt())).andReturn(m_agentDefinitions).anyTimes();
  EasyMock.replay(m_mockClusters,m_mockCluster,m_mockDao);
  m_hash=m_injector.getInstance(AlertDefinitionHash.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.alerts.AlertEventPublisherTest </h4><pre class="type-7 type-2 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 */
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  EventBusSynchronizer.synchronizeAmbariEventPublisher(injector);
  dispatchDao=injector.getInstance(AlertDispatchDAO.class);
  definitionDao=injector.getInstance(AlertDefinitionDAO.class);
  alertsDao=injector.getInstance(AlertsDAO.class);
  clusters=injector.getInstance(Clusters.class);
  serviceFactory=injector.getInstance(ServiceFactory.class);
  ormHelper=injector.getInstance(OrmTestHelper.class);
  aggregateMapping=injector.getInstance(AggregateDefinitionMapping.class);
  clusterName="foo";
  clusters.addCluster(clusterName,new StackId("HDP","2.0.6"));
  cluster=clusters.getCluster(clusterName);
  Assert.assertNotNull(cluster);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.alerts.AlertReceivedListenerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  m_injector=Guice.createInjector(new InMemoryDefaultTestModule());
  m_injector.getInstance(GuiceJpaInitializer.class);
  m_helper=m_injector.getInstance(OrmTestHelper.class);
  m_clusters=m_injector.getInstance(Clusters.class);
  m_serviceFactory=m_injector.getInstance(ServiceFactory.class);
  m_componentFactory=m_injector.getInstance(ServiceComponentFactory.class);
  m_schFactory=m_injector.getInstance(ServiceComponentHostFactory.class);
  m_cluster=m_helper.buildNewCluster(m_clusters,m_serviceFactory,m_componentFactory,m_schFactory,HOST1);
  m_dao=m_injector.getInstance(AlertsDAO.class);
  m_definitionDao=m_injector.getInstance(AlertDefinitionDAO.class);
  for (int i=0; i < 5; i++) {
    String serviceName="HDFS";
    String componentName="DATANODE";
    if (i >= 3) {
      serviceName="YARN";
      componentName="RESOURCEMANAGER";
    }
    AlertDefinitionEntity definition=new AlertDefinitionEntity();
    definition.setDefinitionName(ALERT_DEFINITION + i);
    definition.setServiceName(serviceName);
    definition.setComponentName(componentName);
    definition.setClusterId(m_cluster.getClusterId());
    definition.setHash(UUID.randomUUID().toString());
    definition.setScheduleInterval(Integer.valueOf(60));
    definition.setScope(Scope.SERVICE);
    definition.setSource("{\"type\" : \"SCRIPT\"}");
    definition.setSourceType(SourceType.SCRIPT);
    m_definitionDao.create(definition);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.alerts.AlertStateChangedEventTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 */
@Before public void setup() throws Exception {
  injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  injector.getInstance(GuiceJpaInitializer.class);
  m_listener=injector.getInstance(MockEventListener.class);
  dispatchDao=injector.getInstance(AlertDispatchDAO.class);
  EventBusSynchronizer.synchronizeAlertEventPublisher(injector).register(m_listener);
  EventBusSynchronizer.synchronizeAmbariEventPublisher(injector).register(m_listener);
  eventPublisher=injector.getInstance(AlertEventPublisher.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.alerts.InitialAlertEventTest </h4><pre class="type-7 type-2 type-1 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 */
@Before public void setup() throws Exception {
  m_injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  m_injector.getInstance(GuiceJpaInitializer.class);
  m_listener=m_injector.getInstance(MockEventListener.class);
  m_eventPublisher=m_injector.getInstance(AlertEventPublisher.class);
  EventBus synchronizedBus=EventBusSynchronizer.synchronizeAlertEventPublisher(m_injector);
  synchronizedBus.register(m_listener);
  m_definitionDao=m_injector.getInstance(AlertDefinitionDAO.class);
  m_clusters=m_injector.getInstance(Clusters.class);
  m_serviceFactory=m_injector.getInstance(ServiceFactory.class);
  m_alertsDao=m_injector.getInstance(AlertsDAO.class);
  m_clusterName="c1";
  m_clusters.addCluster(m_clusterName,new StackId("HDP","2.0.6"));
  m_cluster=m_clusters.getCluster(m_clusterName);
  Assert.assertNotNull(m_cluster);
  installHdfsService();
  Assert.assertEquals(1,m_cluster.getServices().size());
  Assert.assertEquals(6,m_definitionDao.findAll().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.cluster.AlertDataManagerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  m_injector=Guice.createInjector(new InMemoryDefaultTestModule());
  m_injector.getInstance(GuiceJpaInitializer.class);
  m_injector.getInstance(UnitOfWork.class).begin();
  m_helper=m_injector.getInstance(OrmTestHelper.class);
  m_dao=m_injector.getInstance(AlertsDAO.class);
  m_dispatchDao=m_injector.getInstance(AlertDispatchDAO.class);
  m_definitionDao=m_injector.getInstance(AlertDefinitionDAO.class);
  m_clusters=m_injector.getInstance(Clusters.class);
  m_serviceFactory=m_injector.getInstance(ServiceFactory.class);
  m_componentFactory=m_injector.getInstance(ServiceComponentFactory.class);
  m_schFactory=m_injector.getInstance(ServiceComponentHostFactory.class);
  m_cluster=m_helper.buildNewCluster(m_clusters,m_serviceFactory,m_componentFactory,m_schFactory,HOST1);
  m_helper.addHost(m_clusters,m_cluster,HOST2);
  m_helper.addHostComponent(m_cluster,HOST2,SERVICE,COMPONENT);
  for (int i=0; i < 5; i++) {
    AlertDefinitionEntity definition=new AlertDefinitionEntity();
    definition.setDefinitionName("Alert Definition " + i);
    definition.setServiceName(SERVICE);
    definition.setComponentName(COMPONENT);
    definition.setClusterId(m_cluster.getClusterId());
    definition.setHash(UUID.randomUUID().toString());
    definition.setScheduleInterval(Integer.valueOf(60));
    definition.setScope(Scope.SERVICE);
    definition.setSource("{\"type\" : \"SCRIPT\"}");
    definition.setSourceType(SourceType.SCRIPT);
    definition.setLabel(ALERT_LABEL);
    m_definitionDao.create(definition);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.cluster.ClusterDeadlockTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 * Creates 100 hosts and adds them to the cluster.
 * @throws Exception
 */
@Before public void setup() throws Exception {
  injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  injector.getInstance(GuiceJpaInitializer.class);
  injector.injectMembers(this);
  clusters.addCluster("c1",stackId);
  cluster=clusters.getCluster("c1");
  helper.getOrCreateRepositoryVersion(stackId,stackId.getStackVersion());
  cluster.createClusterVersion(stackId,stackId.getStackVersion(),"admin",RepositoryVersionState.UPGRADING);
  Config config1=configFactory.createNew(cluster,"test-type1",new HashMap<String,String>(),new HashMap<String,Map<String,String>>());
  Config config2=configFactory.createNew(cluster,"test-type2",new HashMap<String,String>(),new HashMap<String,Map<String,String>>());
  config1.persist();
  config2.persist();
  cluster.addConfig(config1);
  cluster.addConfig(config2);
  cluster.addDesiredConfig("test user",new HashSet<Config>(Arrays.asList(config1,config2)));
  for (int i=0; i < NUMBER_OF_HOSTS; i++) {
    String hostName="c64-" + i;
    hostNames.add(hostName);
    clusters.addHost(hostName);
    setOsFamily(clusters.getHost(hostName),"redhat","6.4");
    clusters.getHost(hostName).persist();
    clusters.mapHostToCluster(hostName,"c1");
  }
  Service service=installService("HDFS");
  addServiceComponent(service,"NAMENODE");
  addServiceComponent(service,"DATANODE");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.cluster.ClusterTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  injector.getInstance(GuiceJpaInitializer.class);
  clusters=injector.getInstance(Clusters.class);
  serviceFactory=injector.getInstance(ServiceFactory.class);
  configGroupFactory=injector.getInstance(ConfigGroupFactory.class);
  serviceComponentFactory=injector.getInstance(ServiceComponentFactory.class);
  serviceComponentHostFactory=injector.getInstance(ServiceComponentHostFactory.class);
  configFactory=injector.getInstance(ConfigFactory.class);
  metaInfo=injector.getInstance(AmbariMetaInfo.class);
  helper=injector.getInstance(OrmTestHelper.class);
  stackDAO=injector.getInstance(StackDAO.class);
  resourceTypeDAO=injector.getInstance(ResourceTypeDAO.class);
  clusterDAO=injector.getInstance(ClusterDAO.class);
  hostDAO=injector.getInstance(HostDAO.class);
  clusterVersionDAO=injector.getInstance(ClusterVersionDAO.class);
  hostVersionDAO=injector.getInstance(HostVersionDAO.class);
  hostComponentStateDAO=injector.getInstance(HostComponentStateDAO.class);
  repositoryVersionDAO=injector.getInstance(RepositoryVersionDAO.class);
  gson=injector.getInstance(Gson.class);
  injector.getInstance(UnitOfWork.class).begin();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.cluster.ClustersDeadlockTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  injector.getInstance(GuiceJpaInitializer.class);
  injector.injectMembers(this);
  StackId stackId=new StackId("HDP-0.1");
  clusters.addCluster(CLUSTER_NAME,stackId);
  cluster=clusters.getCluster(CLUSTER_NAME);
  helper.getOrCreateRepositoryVersion(stackId,stackId.getStackVersion());
  cluster.createClusterVersion(stackId,stackId.getStackVersion(),"admin",RepositoryVersionState.UPGRADING);
  installService("HDFS");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.cluster.ClustersTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  clusters=injector.getInstance(Clusters.class);
  injector.injectMembers(this);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.cluster.ConcurrentServiceConfigVersionTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 * Creates a cluster and installs HDFS with NN and DN.
 * @throws Exception
 */
@Before public void setup() throws Exception {
  injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  injector.getInstance(GuiceJpaInitializer.class);
  injector.injectMembers(this);
  clusters.addCluster("c1",stackId);
  cluster=clusters.getCluster("c1");
  helper.getOrCreateRepositoryVersion(stackId,stackId.getStackVersion());
  cluster.createClusterVersion(stackId,stackId.getStackVersion(),"admin",RepositoryVersionState.UPGRADING);
  String hostName="c6401.ambari.apache.org";
  clusters.addHost(hostName);
  setOsFamily(clusters.getHost(hostName),"redhat","6.4");
  clusters.getHost(hostName).persist();
  clusters.mapHostToCluster(hostName,"c1");
  Service service=installService("HDFS");
  addServiceComponent(service,"NAMENODE");
  addServiceComponent(service,"DATANODE");
  createNewServiceComponentHost("HDFS","NAMENODE",hostName);
  createNewServiceComponentHost("HDFS","DATANODE",hostName);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.cluster.ServiceComponentHostConcurrentWriteDeadlockTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 * Creates 1 host and add it to the cluster.
 * @throws Exception
 */
@Before public void setup() throws Exception {
  injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  injector.getInstance(GuiceJpaInitializer.class);
  injector.injectMembers(this);
  clusters.addCluster("c1",stackId);
  cluster=clusters.getCluster("c1");
  helper.getOrCreateRepositoryVersion(stackId,stackId.getStackVersion());
  cluster.createClusterVersion(stackId,stackId.getStackVersion(),"admin",RepositoryVersionState.UPGRADING);
  Config config1=configFactory.createNew(cluster,"test-type1",new HashMap<String,String>(),new HashMap<String,Map<String,String>>());
  Config config2=configFactory.createNew(cluster,"test-type2",new HashMap<String,String>(),new HashMap<String,Map<String,String>>());
  config1.persist();
  config2.persist();
  cluster.addConfig(config1);
  cluster.addConfig(config2);
  cluster.addDesiredConfig("test user",new HashSet<Config>(Arrays.asList(config1,config2)));
  String hostName="c6401";
  clusters.addHost(hostName);
  setOsFamily(clusters.getHost(hostName),"redhat","6.4");
  clusters.getHost(hostName).persist();
  clusters.mapHostToCluster(hostName,"c1");
  Service service=installService("HDFS");
  addServiceComponent(service,"NAMENODE");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.host.HostTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws AmbariException {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  clusters=injector.getInstance(Clusters.class);
  hostDAO=injector.getInstance(HostDAO.class);
  helper=injector.getInstance(OrmTestHelper.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.services.AlertNoticeDispatchServiceTest </h4><pre class="type-7 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void before(){
  m_dao=createStrictMock(AlertDispatchDAO.class);
  m_dispatchFactory=createStrictMock(DispatchFactory.class);
  m_metaInfo=createNiceMock(AmbariMetaInfo.class);
  m_injector=Guice.createInjector(Modules.override(new InMemoryDefaultTestModule()).with(new MockModule()));
  Assert.assertNotNull(m_injector);
  for (int i=0; i < 5; i++) {
    AlertDefinitionEntity definition=new AlertDefinitionEntity();
    definition.setDefinitionName("Alert Definition " + i);
    definition.setServiceName("Service " + i);
    definition.setComponentName(null);
    definition.setClusterId(1L);
    definition.setHash(UUID.randomUUID().toString());
    definition.setScheduleInterval(Integer.valueOf(60));
    definition.setScope(Scope.SERVICE);
    definition.setSource("{\"type\" : \"SCRIPT\"}");
    definition.setSourceType(SourceType.SCRIPT);
    m_definitions.add(definition);
  }
  calendar.clear();
  calendar.set(2014,Calendar.JANUARY,1);
  for (  AlertDefinitionEntity definition : m_definitions) {
    for (int i=0; i < 10; i++) {
      AlertHistoryEntity history=new AlertHistoryEntity();
      history.setServiceName(definition.getServiceName());
      history.setClusterId(1L);
      history.setAlertDefinition(definition);
      history.setAlertLabel(definition.getDefinitionName() + " " + i);
      history.setAlertText(definition.getDefinitionName() + " " + i);
      history.setAlertTimestamp(calendar.getTimeInMillis());
      history.setHostName(HOSTNAME);
      history.setAlertState(AlertState.OK);
      if (i == 0 || i == 5) {
        history.setAlertState(AlertState.CRITICAL);
      }
      calendar.add(Calendar.DATE,1);
      m_histories.add(history);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.stack.ConfigUpgradePackTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  ambariMetaInfo=injector.getInstance(AmbariMetaInfo.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.stack.OSFamilyTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  os_family=injector.getInstance(OsFamily.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.stack.UpgradePackTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  ambariMetaInfo=injector.getInstance(AmbariMetaInfo.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.stack.upgrade.RepositoryVersionHelperTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before() throws Exception {
  final Injector injector=Guice.createInjector(new AbstractModule(){
    @Override protected void configure(){
      bind(Gson.class).toInstance(new Gson());
    }
  }
);
  helper=injector.getInstance(RepositoryVersionHelper.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.state.svccomphost.ServiceComponentHostTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  injector.injectMembers(this);
  StackId stackId=new StackId("HDP-0.1");
  createCluster(stackId,clusterName);
  hostAttributes.put("os_family","redhat");
  hostAttributes.put("os_release_version","5.9");
  Set<String> hostNames=new HashSet<String>();
  hostNames.add(hostName1);
  addHostsToCluster(clusterName,hostAttributes,hostNames);
  Cluster c1=clusters.getCluster(clusterName);
  helper.getOrCreateRepositoryVersion(stackId,stackId.getStackVersion());
  c1.createClusterVersion(stackId,stackId.getStackVersion(),"admin",RepositoryVersionState.UPGRADING);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.testing.DBInconsistencyTests </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  injector.injectMembers(this);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.topology.AmbariContextTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  Class clazz=AmbariContext.class;
  Field f=clazz.getDeclaredField("controller");
  f.setAccessible(true);
  f.set(null,controller);
  f=clazz.getDeclaredField("clusterController");
  f.setAccessible(true);
  f.set(null,clusterController);
  f=clazz.getDeclaredField("hostResourceProvider");
  f.setAccessible(true);
  f.set(null,hostResourceProvider);
  f=clazz.getDeclaredField("serviceResourceProvider");
  f.setAccessible(true);
  f.set(null,serviceResourceProvider);
  f=clazz.getDeclaredField("componentResourceProvider");
  f.setAccessible(true);
  f.set(null,componentResourceProvider);
  f=clazz.getDeclaredField("hostComponentResourceProvider");
  f.setAccessible(true);
  f.set(null,hostComponentResourceProvider);
  Map<String,Map<String,String>> bpProperties=new HashMap<String,Map<String,String>>();
  Map<String,String> bpType1Props=new HashMap<String,String>();
  bpProperties.put("type1",bpType1Props);
  bpType1Props.put("prop1","val1");
  bpType1Props.put("prop2","val2");
  bpConfiguration=new Configuration(bpProperties,null);
  Map<String,Map<String,String>> group1Properties=new HashMap<String,Map<String,String>>();
  Map<String,String> type1Props=new HashMap<String,String>();
  group1Properties.put("type1",type1Props);
  type1Props.put("prop1","val1.2");
  type1Props.put("prop3","val3");
  group1Configuration=new Configuration(group1Properties,null,bpConfiguration);
  Map<String,String> configTypeServiceMapping=new HashMap<String,String>();
  configTypeServiceMapping.put("type1","service1");
  configGroups.put(1L,configGroup1);
  configGroups.put(2L,configGroup2);
  blueprintServices.add("service1");
  blueprintServices.add("service2");
  expect(topology.getClusterId()).andReturn(CLUSTER_ID).anyTimes();
  expect(topology.getBlueprint()).andReturn(blueprint).anyTimes();
  expect(topology.getHostGroupInfo()).andReturn(Collections.singletonMap(HOST_GROUP_1,group1Info)).anyTimes();
  expect(blueprint.getName()).andReturn(BP_NAME).anyTimes();
  expect(blueprint.getStack()).andReturn(stack).anyTimes();
  expect(blueprint.getServices()).andReturn(blueprintServices).anyTimes();
  expect(blueprint.getComponents("service1")).andReturn(Arrays.asList("s1Component1","s1Component2")).anyTimes();
  expect(blueprint.getComponents("service2")).andReturn(Collections.singleton("s2Component1")).anyTimes();
  expect(blueprint.getConfiguration()).andReturn(bpConfiguration).anyTimes();
  expect(stack.getName()).andReturn(STACK_NAME).anyTimes();
  expect(stack.getVersion()).andReturn(STACK_VERSION).anyTimes();
  for (  Map.Entry<String,String> entry : configTypeServiceMapping.entrySet()) {
    expect(stack.getServiceForConfigType(entry.getKey())).andReturn(entry.getValue()).anyTimes();
  }
  expect(controller.getClusters()).andReturn(clusters).anyTimes();
  expect(controller.getConfigHelper()).andReturn(configHelper).anyTimes();
  expect(clusters.getCluster(CLUSTER_NAME)).andReturn(cluster).anyTimes();
  expect(clusters.getClusterById(CLUSTER_ID)).andReturn(cluster).anyTimes();
  expect(clusters.getHost(HOST1)).andReturn(host1).anyTimes();
  expect(clusters.getHost(HOST2)).andReturn(host2).anyTimes();
  expect(cluster.getClusterId()).andReturn(CLUSTER_ID).anyTimes();
  expect(cluster.getClusterName()).andReturn(CLUSTER_NAME).anyTimes();
  expect(host1.getHostId()).andReturn(1L).anyTimes();
  expect(host2.getHostId()).andReturn(2L).anyTimes();
  expect(group1Info.getConfiguration()).andReturn(group1Configuration).anyTimes();
  expect(group1Info.getHostNames()).andReturn(group1Hosts).anyTimes();
  expect(configGroup1.getName()).andReturn(String.format("%s:%s",BP_NAME,HOST_GROUP_1)).anyTimes();
  expect(configGroup2.getName()).andReturn(String.format("%s:%s",BP_NAME,HOST_GROUP_2)).anyTimes();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.topology.AsyncCallableServiceTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup(){
  timeout=1000;
  delay=500;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.topology.BlueprintFactoryTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void init() throws Exception {
  setPrivateField(factory,"blueprintDAO",dao);
  Map<String,Collection<String>> componentMap=new HashMap<String,Collection<String>>();
  Collection<String> components1=new HashSet<String>();
  componentMap.put("test-service1",components1);
  components1.add("component1");
  Collection<String> components2=new HashSet<String>();
  componentMap.put("test-service2",components2);
  components2.add("component2");
  expect(stack.getComponents()).andReturn(componentMap).anyTimes();
  expect(stack.isMasterComponent("component1")).andReturn(true).anyTimes();
  expect(stack.isMasterComponent("component2")).andReturn(false).anyTimes();
  expect(stack.getServiceForComponent("component1")).andReturn("test-service1").anyTimes();
  expect(stack.getServiceForComponent("component2")).andReturn("test-service2").anyTimes();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.topology.BlueprintValidatorImplTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup(){
  hostGroups.put("group1",group1);
  hostGroups.put("group2",group2);
  autoDeploy.setEnabled(true);
  autoDeploy.setCoLocate("service1/component2");
  expect(blueprint.getStack()).andReturn(stack).anyTimes();
  expect(blueprint.getHostGroups()).andReturn(hostGroups).anyTimes();
  expect(blueprint.getServices()).andReturn(services).anyTimes();
  expect(group1.getComponentNames()).andReturn(group1Components).anyTimes();
  expect(group2.getComponentNames()).andReturn(group2Components).anyTimes();
  expect(stack.getDependenciesForComponent("component1")).andReturn(dependencies1).anyTimes();
  expect(stack.getDependenciesForComponent("component2")).andReturn(dependencies1).anyTimes();
  expect(stack.getDependenciesForComponent("component3")).andReturn(dependencies1).anyTimes();
  expect(stack.getDependenciesForComponent("component4")).andReturn(dependencies1).anyTimes();
  expect(stack.getCardinality("component1")).andReturn(new Cardinality("1"));
  expect(stack.getCardinality("component2")).andReturn(new Cardinality("1+"));
  expect(stack.getCardinality("component3")).andReturn(new Cardinality("1+"));
  expect(blueprint.getConfiguration()).andReturn(configuration).anyTimes();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.topology.ClusterInstallWithoutStartTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  clusterTopologyCapture=newCapture();
  configRequestPropertiesCapture=newCapture();
  configRequestPropertiesCapture2=newCapture();
  configRequestPropertiesCapture3=newCapture();
  updateClusterConfigRequestCapture=newCapture();
  updateConfigTaskCapture=newCapture();
  topoConfiguration.setProperty("service1-site","s1-prop","s1-prop-value");
  topoConfiguration.setProperty("service2-site","s2-prop","s2-prop-value");
  topoConfiguration.setProperty("cluster-env","g-prop","g-prop-value");
  group1Info.addHost("host1");
  group1Info.setConfiguration(topoGroup1Config);
  group2Info.setRequestedCount(2);
  group2Info.setPredicate(predicate);
  group2Info.setConfiguration(topoGroup2Config);
  groupInfoMap.put("group1",group1Info);
  groupInfoMap.put("group2",group2Info);
  Map<String,HostGroup> groupMap=new HashMap<String,HostGroup>();
  groupMap.put("group1",group1);
  groupMap.put("group2",group2);
  serviceComponents.put("service1",Arrays.asList("component1","component3"));
  serviceComponents.put("service2",Arrays.asList("component2","component4"));
  group1ServiceComponents.put("service1",Arrays.asList("component1","component3"));
  group1ServiceComponents.put("service2",Collections.singleton("component2"));
  group2ServiceComponents.put("service2",Collections.singleton("component3"));
  group2ServiceComponents.put("service2",Collections.singleton("component4"));
  expect(blueprint.getHostGroup("group1")).andReturn(group1).anyTimes();
  expect(blueprint.getHostGroup("group2")).andReturn(group2).anyTimes();
  expect(blueprint.getComponents("service1")).andReturn(Arrays.asList("component1","component3")).anyTimes();
  expect(blueprint.getComponents("service2")).andReturn(Arrays.asList("component2","component4")).anyTimes();
  expect(blueprint.getConfiguration()).andReturn(bpConfiguration).anyTimes();
  expect(blueprint.getHostGroups()).andReturn(groupMap).anyTimes();
  expect(blueprint.getHostGroupsForComponent("component1")).andReturn(Collections.singleton(group1)).anyTimes();
  expect(blueprint.getHostGroupsForComponent("component2")).andReturn(Collections.singleton(group1)).anyTimes();
  expect(blueprint.getHostGroupsForComponent("component3")).andReturn(Arrays.asList(group1,group2)).anyTimes();
  expect(blueprint.getHostGroupsForComponent("component4")).andReturn(Collections.singleton(group2)).anyTimes();
  expect(blueprint.getHostGroupsForService("service1")).andReturn(Arrays.asList(group1,group2)).anyTimes();
  expect(blueprint.getHostGroupsForService("service2")).andReturn(Arrays.asList(group1,group2)).anyTimes();
  expect(blueprint.getName()).andReturn(BLUEPRINT_NAME).anyTimes();
  expect(blueprint.getServices()).andReturn(Arrays.asList("service1","service2")).anyTimes();
  expect(blueprint.getStack()).andReturn(stack).anyTimes();
  expect(stack.getAllConfigurationTypes("service1")).andReturn(Arrays.asList("service1-site","service1-env")).anyTimes();
  expect(stack.getAllConfigurationTypes("service2")).andReturn(Arrays.asList("service2-site","service2-env")).anyTimes();
  expect(stack.getAutoDeployInfo("component1")).andReturn(null).anyTimes();
  expect(stack.getAutoDeployInfo("component2")).andReturn(null).anyTimes();
  expect(stack.getAutoDeployInfo("component3")).andReturn(null).anyTimes();
  expect(stack.getAutoDeployInfo("component4")).andReturn(null).anyTimes();
  expect(stack.getCardinality("component1")).andReturn(new Cardinality("1")).anyTimes();
  expect(stack.getCardinality("component2")).andReturn(new Cardinality("1")).anyTimes();
  expect(stack.getCardinality("component3")).andReturn(new Cardinality("1+")).anyTimes();
  expect(stack.getCardinality("component4")).andReturn(new Cardinality("1+")).anyTimes();
  expect(stack.getComponents()).andReturn(serviceComponents).anyTimes();
  expect(stack.getComponents("service1")).andReturn(serviceComponents.get("service1")).anyTimes();
  expect(stack.getComponents("service2")).andReturn(serviceComponents.get("service2")).anyTimes();
  expect(stack.getConfiguration()).andReturn(stackConfig).anyTimes();
  expect(stack.getName()).andReturn(STACK_NAME).anyTimes();
  expect(stack.getVersion()).andReturn(STACK_VERSION).anyTimes();
  expect(stack.getExcludedConfigurationTypes("service1")).andReturn(Collections.<String>emptySet()).anyTimes();
  expect(stack.getExcludedConfigurationTypes("service2")).andReturn(Collections.<String>emptySet()).anyTimes();
  expect(request.getBlueprint()).andReturn(blueprint).anyTimes();
  expect(request.getClusterId()).andReturn(CLUSTER_ID).anyTimes();
  expect(request.getClusterName()).andReturn(CLUSTER_NAME).anyTimes();
  expect(request.getDescription()).andReturn("Provision Cluster Test").anyTimes();
  expect(request.getConfiguration()).andReturn(topoConfiguration).anyTimes();
  expect(request.getHostGroupInfo()).andReturn(groupInfoMap).anyTimes();
  expect(request.getTopologyValidators()).andReturn(topologyValidators).anyTimes();
  expect(request.getConfigRecommendationStrategy()).andReturn(ConfigRecommendationStrategy.NEVER_APPLY);
  expect(request.getProvisionAction()).andReturn(INSTALL_ONLY).anyTimes();
  expect(request.getSecurityConfiguration()).andReturn(null).anyTimes();
  expect(group1.getBlueprintName()).andReturn(BLUEPRINT_NAME).anyTimes();
  expect(group1.getCardinality()).andReturn("test cardinality").anyTimes();
  expect(group1.containsMasterComponent()).andReturn(true).anyTimes();
  expect(group1.getComponentNames()).andReturn(group1Components).anyTimes();
  expect(group1.getComponents("service1")).andReturn(group1ServiceComponents.get("service1")).anyTimes();
  expect(group1.getComponents("service2")).andReturn(group1ServiceComponents.get("service1")).anyTimes();
  expect(group1.getConfiguration()).andReturn(topoGroup1Config).anyTimes();
  expect(group1.getName()).andReturn("group1").anyTimes();
  expect(group1.getServices()).andReturn(Arrays.asList("service1","service2")).anyTimes();
  expect(group1.getStack()).andReturn(stack).anyTimes();
  expect(group2.getBlueprintName()).andReturn(BLUEPRINT_NAME).anyTimes();
  expect(group2.getCardinality()).andReturn("test cardinality").anyTimes();
  expect(group2.containsMasterComponent()).andReturn(false).anyTimes();
  expect(group2.getComponentNames()).andReturn(group2Components).anyTimes();
  expect(group2.getComponents("service1")).andReturn(group2ServiceComponents.get("service1")).anyTimes();
  expect(group2.getComponents("service2")).andReturn(group2ServiceComponents.get("service2")).anyTimes();
  expect(group2.getConfiguration()).andReturn(topoGroup2Config).anyTimes();
  expect(group2.getName()).andReturn("group2").anyTimes();
  expect(group2.getServices()).andReturn(Arrays.asList("service1","service2")).anyTimes();
  expect(group2.getStack()).andReturn(stack).anyTimes();
  logicalRequestFactory=createMockBuilder(LogicalRequestFactory.class).addMockedMethod(LogicalRequestFactory.class.getMethod("createRequest",Long.class,TopologyRequest.class,ClusterTopology.class,TopologyLogicalRequestEntity.class)).createMock();
  Field f=TopologyManager.class.getDeclaredField("logicalRequestFactory");
  f.setAccessible(true);
  f.set(topologyManager,logicalRequestFactory);
  PowerMock.mockStatic(AmbariServer.class);
  expect(AmbariServer.getController()).andReturn(managementController).anyTimes();
  PowerMock.replay(AmbariServer.class);
  expect(managementController.getClusters()).andReturn(clusters).anyTimes();
  expect(clusters.getClusterById(anyLong())).andReturn(cluster).anyTimes();
  expect(cluster.getClusterName()).andReturn(CLUSTER_NAME).anyTimes();
  expect(ambariContext.getPersistedTopologyState()).andReturn(persistedState).anyTimes();
  ambariContext.createAmbariResources(isA(ClusterTopology.class),eq(CLUSTER_NAME),(SecurityType)isNull());
  expectLastCall().once();
  expect(ambariContext.getNextRequestId()).andReturn(1L).once();
  expect(ambariContext.isClusterKerberosEnabled(CLUSTER_ID)).andReturn(false).anyTimes();
  expect(ambariContext.getClusterId(CLUSTER_NAME)).andReturn(CLUSTER_ID).anyTimes();
  expect(ambariContext.getClusterName(CLUSTER_ID)).andReturn(CLUSTER_NAME).anyTimes();
  expect(ambariContext.createConfigurationRequests(capture(configRequestPropertiesCapture))).andReturn(Collections.singletonList(configurationRequest));
  expect(ambariContext.createConfigurationRequests(capture(configRequestPropertiesCapture2))).andReturn(Collections.singletonList(configurationRequest2)).once();
  expect(ambariContext.createConfigurationRequests(capture(configRequestPropertiesCapture3))).andReturn(Collections.singletonList(configurationRequest3)).once();
  expect(ambariContext.createAmbariTask(anyLong(),anyLong(),anyString(),anyString(),eq(AmbariContext.TaskType.INSTALL))).andReturn(hostRoleCommand).atLeastOnce();
  expect(hostRoleCommand.getTaskId()).andReturn(1L).atLeastOnce();
  expect(hostRoleCommand.getRoleCommand()).andReturn(RoleCommand.INSTALL).atLeastOnce();
  expect(hostRoleCommand.getRole()).andReturn(Role.INSTALL_PACKAGES).atLeastOnce();
  expect(hostRoleCommand.getStatus()).andReturn(HostRoleStatus.COMPLETED).atLeastOnce();
  ambariContext.setConfigurationOnCluster(capture(updateClusterConfigRequestCapture));
  expectLastCall().times(3);
  ambariContext.persistInstallStateForUI(CLUSTER_NAME,STACK_NAME,STACK_VERSION);
  expectLastCall().once();
  expect(clusterController.ensureResourceProvider(anyObject(Resource.Type.class))).andReturn(resourceProvider);
  expect(executor.submit(anyObject(AsyncCallableService.class))).andReturn(mockFuture);
  persistedTopologyRequest=new PersistedTopologyRequest(1,request);
  expect(persistedState.getAllRequests()).andReturn(Collections.<ClusterTopology,List<LogicalRequest>>emptyMap()).once();
  expect(persistedState.persistTopologyRequest(request)).andReturn(persistedTopologyRequest).once();
  persistedState.persistLogicalRequest((LogicalRequest)anyObject(),anyLong());
  expectLastCall().once();
  replay(blueprint,stack,request,group1,group2,ambariContext,logicalRequestFactory,logicalRequest,configurationRequest,configurationRequest2,configurationRequest3,requestStatusResponse,executor,persistedState,securityConfigurationFactory,credentialStoreService,clusterController,resourceProvider,mockFuture,managementController,clusters,cluster,hostRoleCommand);
  Class clazz=TopologyManager.class;
  f=clazz.getDeclaredField("executor");
  f.setAccessible(true);
  f.set(topologyManager,executor);
  EasyMockSupport.injectMocks(topologyManager);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.topology.ClusterTopologyImplTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  configuration=new Configuration(new HashMap<String,Map<String,String>>(),new HashMap<String,Map<String,Map<String,String>>>());
  HostGroupInfo group1Info=new HostGroupInfo("group1");
  HostGroupInfo group2Info=new HostGroupInfo("group2");
  HostGroupInfo group3Info=new HostGroupInfo("group3");
  HostGroupInfo group4Info=new HostGroupInfo("group4");
  hostGroupInfoMap.put("group1",group1Info);
  hostGroupInfoMap.put("group2",group2Info);
  hostGroupInfoMap.put("group3",group3Info);
  hostGroupInfoMap.put("group4",group4Info);
  group1Info.setConfiguration(configuration);
  Collection<String> group1Hosts=new HashSet<String>();
  group1Hosts.add("host1");
  group1Hosts.add("host2");
  group1Info.addHosts(group1Hosts);
  group2Info.setConfiguration(configuration);
  Collection<String> group2Hosts=new HashSet<String>();
  group2Hosts.add("host3");
  group2Info.addHosts(group2Hosts);
  group3Info.setConfiguration(configuration);
  group3Info.setRequestedCount(5);
  group4Info.setConfiguration(configuration);
  group4Info.setRequestedCount(5);
  group4Info.setPredicate(predicate);
  expect(blueprint.getConfiguration()).andReturn(configuration).anyTimes();
  hostGroupMap.put("group1",group1);
  hostGroupMap.put("group2",group2);
  hostGroupMap.put("group3",group3);
  hostGroupMap.put("group4",group4);
  Set<Component> group1Components=new HashSet<Component>();
  group1Components.add(new Component("component1"));
  group1Components.add(new Component("component2"));
  Set<String> group1ComponentNames=new HashSet<String>();
  group1ComponentNames.add("component1");
  group1ComponentNames.add("component2");
  Set<Component> group2Components=new HashSet<Component>();
  group2Components.add(new Component("component3"));
  Set<Component> group3Components=new HashSet<Component>();
  group3Components.add(new Component("component4"));
  Set<Component> group4Components=new HashSet<Component>();
  group4Components.add(new Component("component5"));
  expect(blueprint.getHostGroups()).andReturn(hostGroupMap).anyTimes();
  expect(blueprint.getHostGroup("group1")).andReturn(group1).anyTimes();
  expect(blueprint.getHostGroup("group2")).andReturn(group2).anyTimes();
  expect(blueprint.getHostGroup("group3")).andReturn(group3).anyTimes();
  expect(blueprint.getHostGroup("group4")).andReturn(group4).anyTimes();
  expect(group1.getConfiguration()).andReturn(configuration).anyTimes();
  expect(group2.getConfiguration()).andReturn(configuration).anyTimes();
  expect(group3.getConfiguration()).andReturn(configuration).anyTimes();
  expect(group4.getConfiguration()).andReturn(configuration).anyTimes();
  expect(group1.getComponents()).andReturn(group1Components).anyTimes();
  expect(group2.getComponents()).andReturn(group2Components).anyTimes();
  expect(group3.getComponents()).andReturn(group3Components).anyTimes();
  expect(group4.getComponents()).andReturn(group4Components).anyTimes();
  expect(group1.getComponentNames()).andReturn(group1ComponentNames).anyTimes();
  expect(group2.getComponentNames()).andReturn(Collections.singletonList("component3")).anyTimes();
  expect(group3.getComponentNames()).andReturn(Collections.singletonList("component4")).anyTimes();
  expect(group4.getComponentNames()).andReturn(Collections.singletonList("component5")).anyTimes();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.topology.ConfigureClusterTaskTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  reset(clusterConfigurationRequest,clusterTopology);
  testSubject=new TopologyManager.ConfigureClusterTask(clusterTopology,clusterConfigurationRequest);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.topology.RequiredPasswordValidatorTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup(){
  stackDefaults=new Configuration(new HashMap<String,Map<String,String>>(),new HashMap<String,Map<String,Map<String,String>>>());
  bpClusterConfig=new Configuration(new HashMap<String,Map<String,String>>(),new HashMap<String,Map<String,Map<String,String>>>(),stackDefaults);
  topoClusterConfig=new Configuration(new HashMap<String,Map<String,String>>(),new HashMap<String,Map<String,Map<String,String>>>(),bpClusterConfig);
  bpGroup1Config=new Configuration(new HashMap<String,Map<String,String>>(),new HashMap<String,Map<String,Map<String,String>>>(),topoClusterConfig);
  bpGroup2Config=new Configuration(new HashMap<String,Map<String,String>>(),new HashMap<String,Map<String,Map<String,String>>>(),topoClusterConfig);
  topoGroup1Config=new Configuration(new HashMap<String,Map<String,String>>(),new HashMap<String,Map<String,Map<String,String>>>(),bpGroup1Config);
  topoGroup2Config=new Configuration(new HashMap<String,Map<String,String>>(),new HashMap<String,Map<String,Map<String,String>>>(),bpGroup2Config);
  service1RequiredPwdConfigs.clear();
  service2RequiredPwdConfigs.clear();
  service3RequiredPwdConfigs.clear();
  hostGroups.put("group1",group1);
  hostGroups.put("group2",group2);
  group1Components.add("component1");
  group1Components.add("component2");
  group1Components.add("component3");
  group2Components.add("component1");
  group2Components.add("component4");
  service1Components.add("component1");
  service1Components.add("component2");
  service2Components.add("component3");
  service3Components.add("component4");
  HostGroupInfo hostGroup1Info=new HostGroupInfo("group1");
  hostGroup1Info.setConfiguration(topoGroup1Config);
  HostGroupInfo hostGroup2Info=new HostGroupInfo("group2");
  hostGroup2Info.setConfiguration(topoGroup2Config);
  hostGroupInfo.put("group1",hostGroup1Info);
  hostGroupInfo.put("group2",hostGroup2Info);
  expect(topology.getConfiguration()).andReturn(topoClusterConfig).anyTimes();
  expect(topology.getBlueprint()).andReturn(blueprint).anyTimes();
  expect(topology.getHostGroupInfo()).andReturn(hostGroupInfo).anyTimes();
  expect(blueprint.getHostGroups()).andReturn(hostGroups).anyTimes();
  expect(blueprint.getHostGroup("group1")).andReturn(group1).anyTimes();
  expect(blueprint.getHostGroup("group2")).andReturn(group2).anyTimes();
  expect(blueprint.getStack()).andReturn(stack).anyTimes();
  expect(group1.getComponentNames()).andReturn(group1Components).anyTimes();
  expect(group2.getComponentNames()).andReturn(group2Components).anyTimes();
  expect(group1.getComponents("service1")).andReturn(Arrays.asList("component1","component2")).anyTimes();
  expect(group1.getComponents("service2")).andReturn(Arrays.asList("component3")).anyTimes();
  expect(group1.getComponents("service3")).andReturn(Collections.<String>emptySet()).anyTimes();
  expect(group2.getComponents("service1")).andReturn(Arrays.asList("component1")).anyTimes();
  expect(group2.getComponents("service2")).andReturn(Collections.<String>emptySet()).anyTimes();
  expect(group2.getComponents("service3")).andReturn(Arrays.asList("component4")).anyTimes();
  expect(stack.getServiceForComponent("component1")).andReturn("service1").anyTimes();
  expect(stack.getServiceForComponent("component2")).andReturn("service1").anyTimes();
  expect(stack.getServiceForComponent("component3")).andReturn("service2").anyTimes();
  expect(stack.getServiceForComponent("component4")).andReturn("service3").anyTimes();
  expect(stack.getRequiredConfigurationProperties("service1",PropertyInfo.PropertyType.PASSWORD)).andReturn(service1RequiredPwdConfigs).anyTimes();
  expect(stack.getRequiredConfigurationProperties("service2",PropertyInfo.PropertyType.PASSWORD)).andReturn(service2RequiredPwdConfigs).anyTimes();
  expect(stack.getRequiredConfigurationProperties("service3",PropertyInfo.PropertyType.PASSWORD)).andReturn(service3RequiredPwdConfigs).anyTimes();
  replay(topology,blueprint,stack,group1,group2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.topology.SecurityConfigurationFactoryTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void before(){
  testSubject=new SecurityConfigurationFactory(new Gson(),kerberosDescriptorDAO,new KerberosDescriptorFactory());
  EasyMockSupport.injectMocks(testSubject);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.topology.TopologyManagerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  clusterTopologyCapture=newCapture();
  configRequestPropertiesCapture=newCapture();
  configRequestPropertiesCapture2=newCapture();
  configRequestPropertiesCapture3=newCapture();
  updateClusterConfigRequestCapture=newCapture();
  updateConfigTaskCapture=newCapture();
  topoConfiguration.setProperty("service1-site","s1-prop","s1-prop-value");
  topoConfiguration.setProperty("service2-site","s2-prop","s2-prop-value");
  topoConfiguration.setProperty("cluster-env","g-prop","g-prop-value");
  group1Info.addHost("host1");
  group1Info.setConfiguration(topoGroup1Config);
  group2Info.setRequestedCount(2);
  group2Info.setPredicate(predicate);
  group2Info.setConfiguration(topoGroup2Config);
  groupInfoMap.put("group1",group1Info);
  groupInfoMap.put("group2",group2Info);
  Map<String,HostGroup> groupMap=new HashMap<String,HostGroup>();
  groupMap.put("group1",group1);
  groupMap.put("group2",group2);
  serviceComponents.put("service1",Arrays.asList("component1","component3"));
  serviceComponents.put("service2",Arrays.asList("component2","component4"));
  group1ServiceComponents.put("service1",Arrays.asList("component1","component3"));
  group1ServiceComponents.put("service2",Collections.singleton("component2"));
  group2ServiceComponents.put("service2",Collections.singleton("component3"));
  group2ServiceComponents.put("service2",Collections.singleton("component4"));
  expect(blueprint.getHostGroup("group1")).andReturn(group1).anyTimes();
  expect(blueprint.getHostGroup("group2")).andReturn(group2).anyTimes();
  expect(blueprint.getComponents("service1")).andReturn(Arrays.asList("component1","component3")).anyTimes();
  expect(blueprint.getComponents("service2")).andReturn(Arrays.asList("component2","component4")).anyTimes();
  expect(blueprint.getConfiguration()).andReturn(bpConfiguration).anyTimes();
  expect(blueprint.getHostGroups()).andReturn(groupMap).anyTimes();
  expect(blueprint.getHostGroupsForComponent("component1")).andReturn(Collections.singleton(group1)).anyTimes();
  expect(blueprint.getHostGroupsForComponent("component2")).andReturn(Collections.singleton(group1)).anyTimes();
  expect(blueprint.getHostGroupsForComponent("component3")).andReturn(Arrays.asList(group1,group2)).anyTimes();
  expect(blueprint.getHostGroupsForComponent("component4")).andReturn(Collections.singleton(group2)).anyTimes();
  expect(blueprint.getHostGroupsForService("service1")).andReturn(Arrays.asList(group1,group2)).anyTimes();
  expect(blueprint.getHostGroupsForService("service2")).andReturn(Arrays.asList(group1,group2)).anyTimes();
  expect(blueprint.getName()).andReturn(BLUEPRINT_NAME).anyTimes();
  expect(blueprint.getServices()).andReturn(Arrays.asList("service1","service2")).anyTimes();
  expect(blueprint.getStack()).andReturn(stack).anyTimes();
  expect(stack.getAllConfigurationTypes("service1")).andReturn(Arrays.asList("service1-site","service1-env")).anyTimes();
  expect(stack.getAllConfigurationTypes("service2")).andReturn(Arrays.asList("service2-site","service2-env")).anyTimes();
  expect(stack.getAutoDeployInfo("component1")).andReturn(null).anyTimes();
  expect(stack.getAutoDeployInfo("component2")).andReturn(null).anyTimes();
  expect(stack.getAutoDeployInfo("component3")).andReturn(null).anyTimes();
  expect(stack.getAutoDeployInfo("component4")).andReturn(null).anyTimes();
  expect(stack.getCardinality("component1")).andReturn(new Cardinality("1")).anyTimes();
  expect(stack.getCardinality("component2")).andReturn(new Cardinality("1")).anyTimes();
  expect(stack.getCardinality("component3")).andReturn(new Cardinality("1+")).anyTimes();
  expect(stack.getCardinality("component4")).andReturn(new Cardinality("1+")).anyTimes();
  expect(stack.getComponents()).andReturn(serviceComponents).anyTimes();
  expect(stack.getComponents("service1")).andReturn(serviceComponents.get("service1")).anyTimes();
  expect(stack.getComponents("service2")).andReturn(serviceComponents.get("service2")).anyTimes();
  expect(stack.getConfiguration()).andReturn(stackConfig).anyTimes();
  expect(stack.getName()).andReturn(STACK_NAME).anyTimes();
  expect(stack.getVersion()).andReturn(STACK_VERSION).anyTimes();
  expect(stack.getExcludedConfigurationTypes("service1")).andReturn(Collections.<String>emptySet()).anyTimes();
  expect(stack.getExcludedConfigurationTypes("service2")).andReturn(Collections.<String>emptySet()).anyTimes();
  expect(request.getBlueprint()).andReturn(blueprint).anyTimes();
  expect(request.getClusterId()).andReturn(CLUSTER_ID).anyTimes();
  expect(request.getClusterName()).andReturn(CLUSTER_NAME).anyTimes();
  expect(request.getDescription()).andReturn("Provision Cluster Test").anyTimes();
  expect(request.getConfiguration()).andReturn(topoConfiguration).anyTimes();
  expect(request.getHostGroupInfo()).andReturn(groupInfoMap).anyTimes();
  expect(request.getTopologyValidators()).andReturn(topologyValidators).anyTimes();
  expect(request.getConfigRecommendationStrategy()).andReturn(ConfigRecommendationStrategy.NEVER_APPLY);
  expect(request.getSecurityConfiguration()).andReturn(null).anyTimes();
  expect(group1.getBlueprintName()).andReturn(BLUEPRINT_NAME).anyTimes();
  expect(group1.getCardinality()).andReturn("test cardinality").anyTimes();
  expect(group1.containsMasterComponent()).andReturn(true).anyTimes();
  expect(group1.getComponents()).andReturn(group1Components).anyTimes();
  expect(group1.getComponents("service1")).andReturn(group1ServiceComponents.get("service1")).anyTimes();
  expect(group1.getComponents("service2")).andReturn(group1ServiceComponents.get("service1")).anyTimes();
  expect(group1.getConfiguration()).andReturn(topoGroup1Config).anyTimes();
  expect(group1.getName()).andReturn("group1").anyTimes();
  expect(group1.getServices()).andReturn(Arrays.asList("service1","service2")).anyTimes();
  expect(group1.getStack()).andReturn(stack).anyTimes();
  expect(group2.getBlueprintName()).andReturn(BLUEPRINT_NAME).anyTimes();
  expect(group2.getCardinality()).andReturn("test cardinality").anyTimes();
  expect(group2.containsMasterComponent()).andReturn(false).anyTimes();
  expect(group2.getComponents()).andReturn(group2Components).anyTimes();
  expect(group2.getComponents("service1")).andReturn(group2ServiceComponents.get("service1")).anyTimes();
  expect(group2.getComponents("service2")).andReturn(group2ServiceComponents.get("service2")).anyTimes();
  expect(group2.getConfiguration()).andReturn(topoGroup2Config).anyTimes();
  expect(group2.getName()).andReturn("group2").anyTimes();
  expect(group2.getServices()).andReturn(Arrays.asList("service1","service2")).anyTimes();
  expect(group2.getStack()).andReturn(stack).anyTimes();
  expect(logicalRequestFactory.createRequest(eq(1L),(TopologyRequest)anyObject(),capture(clusterTopologyCapture))).andReturn(logicalRequest).anyTimes();
  expect(logicalRequest.getRequestId()).andReturn(1L).anyTimes();
  expect(logicalRequest.getReservedHosts()).andReturn(Collections.singleton("host1")).anyTimes();
  expect(logicalRequest.getRequestStatus()).andReturn(requestStatusResponse).once();
  expect(ambariContext.getPersistedTopologyState()).andReturn(persistedState).anyTimes();
  ambariContext.createAmbariResources(isA(ClusterTopology.class),eq(CLUSTER_NAME),(SecurityType)isNull());
  expectLastCall().once();
  expect(ambariContext.getNextRequestId()).andReturn(1L).once();
  expect(ambariContext.isClusterKerberosEnabled(CLUSTER_ID)).andReturn(false).anyTimes();
  expect(ambariContext.getClusterId(CLUSTER_NAME)).andReturn(CLUSTER_ID).anyTimes();
  expect(ambariContext.getClusterName(CLUSTER_ID)).andReturn(CLUSTER_NAME).anyTimes();
  expect(ambariContext.createConfigurationRequests(capture(configRequestPropertiesCapture))).andReturn(Collections.singletonList(configurationRequest));
  expect(ambariContext.createConfigurationRequests(capture(configRequestPropertiesCapture2))).andReturn(Collections.singletonList(configurationRequest2)).once();
  expect(ambariContext.createConfigurationRequests(capture(configRequestPropertiesCapture3))).andReturn(Collections.singletonList(configurationRequest3)).once();
  ambariContext.setConfigurationOnCluster(capture(updateClusterConfigRequestCapture));
  expectLastCall().times(3);
  ambariContext.persistInstallStateForUI(CLUSTER_NAME,STACK_NAME,STACK_VERSION);
  expectLastCall().once();
  expect(clusterController.ensureResourceProvider(anyObject(Resource.Type.class))).andReturn(resourceProvider);
  expect(executor.submit(anyObject(AsyncCallableService.class))).andReturn(mockFuture);
  expectLastCall().times(1);
  expect(persistedState.getAllRequests()).andReturn(Collections.<ClusterTopology,List<LogicalRequest>>emptyMap()).once();
  expect(persistedState.persistTopologyRequest(request)).andReturn(persistedTopologyRequest).once();
  persistedState.persistLogicalRequest(logicalRequest,1);
  replay(blueprint,stack,request,group1,group2,ambariContext,logicalRequestFactory,logicalRequest,configurationRequest,configurationRequest2,configurationRequest3,requestStatusResponse,executor,persistedState,securityConfigurationFactory,credentialStoreService,clusterController,resourceProvider,mockFuture);
  Class clazz=TopologyManager.class;
  Field f=clazz.getDeclaredField("executor");
  f.setAccessible(true);
  f.set(topologyManager,executor);
  EasyMockSupport.injectMocks(topologyManager);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.upgrade.StackUpgradeUtilTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.upgrade.UpgradeCatalog150Test </h4><pre class="type-7 type-2 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  upgradeCatalogHelper=injector.getInstance(UpgradeCatalogHelper.class);
  injector.getInstance(AmbariMetaInfo.class);
  StackDAO stackDAO=injector.getInstance(StackDAO.class);
  desiredStackEntity=stackDAO.find(DESIRED_STACK.getStackName(),DESIRED_STACK.getStackVersion());
  Assert.assertNotNull(desiredStackEntity);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.upgrade.UpgradeCatalog170Test </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void init(){
  reset(entityManagerProvider);
  expect(entityManagerProvider.get()).andReturn(entityManager).anyTimes();
  replay(entityManagerProvider);
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  upgradeCatalogHelper=injector.getInstance(UpgradeCatalogHelper.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.upgrade.UpgradeCatalog200Test </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void init(){
  reset(entityManagerProvider);
  expect(entityManagerProvider.get()).andReturn(entityManager).anyTimes();
  replay(entityManagerProvider);
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  upgradeCatalogHelper=injector.getInstance(UpgradeCatalogHelper.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.upgrade.UpgradeCatalog210Test </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void init(){
  reset(entityManagerProvider);
  expect(entityManagerProvider.get()).andReturn(entityManager).anyTimes();
  replay(entityManagerProvider);
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  upgradeCatalogHelper=injector.getInstance(UpgradeCatalogHelper.class);
  injector.getInstance(AmbariMetaInfo.class);
  StackDAO stackDAO=injector.getInstance(StackDAO.class);
  desiredStackEntity=stackDAO.find("HDP","2.2.0");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.upgrade.UpgradeCatalog2121Test </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void init(){
  reset(entityManagerProvider);
  expect(entityManagerProvider.get()).andReturn(entityManager).anyTimes();
  replay(entityManagerProvider);
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  upgradeCatalogHelper=injector.getInstance(UpgradeCatalogHelper.class);
  injector.getInstance(AmbariMetaInfo.class);
  StackDAO stackDAO=injector.getInstance(StackDAO.class);
  desiredStackEntity=stackDAO.find("PHD","3.0.0");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.upgrade.UpgradeCatalog220Test </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void init(){
  reset(entityManagerProvider);
  expect(entityManagerProvider.get()).andReturn(entityManager).anyTimes();
  replay(entityManagerProvider);
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  upgradeCatalogHelper=injector.getInstance(UpgradeCatalogHelper.class);
  injector.getInstance(AmbariMetaInfo.class);
  StackDAO stackDAO=injector.getInstance(StackDAO.class);
  desiredStackEntity=stackDAO.find("HDP","2.2.0");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.upgrade.UpgradeCatalog221Test </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void init(){
  reset(entityManagerProvider);
  expect(entityManagerProvider.get()).andReturn(entityManager).anyTimes();
  replay(entityManagerProvider);
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  upgradeCatalogHelper=injector.getInstance(UpgradeCatalogHelper.class);
  injector.getInstance(AmbariMetaInfo.class);
  StackDAO stackDAO=injector.getInstance(StackDAO.class);
  desiredStackEntity=stackDAO.find("HDP","2.2.0");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.upgrade.UpgradeCatalog222Test </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void init(){
  reset(entityManagerProvider);
  expect(entityManagerProvider.get()).andReturn(entityManager).anyTimes();
  replay(entityManagerProvider);
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  upgradeCatalogHelper=injector.getInstance(UpgradeCatalogHelper.class);
  injector.getInstance(AmbariMetaInfo.class);
  StackDAO stackDAO=injector.getInstance(StackDAO.class);
  desiredStackEntity=stackDAO.find("HDP","2.2.0");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.upgrade.UpgradeCatalog230Test </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup(){
  resetAll();
  Module module=new Module(){
    @Override public void configure(    Binder binder){
      binder.bind(DBAccessor.class).toInstance(createNiceMock(DBAccessor.class));
      binder.bind(OsFamily.class).toInstance(createNiceMock(OsFamily.class));
      binder.bind(EntityManager.class).toInstance(createNiceMock(EntityManager.class));
      binder.bind(DaoUtils.class).toInstance(createNiceMock(DaoUtils.class));
      binder.bind(PermissionDAO.class).toInstance(createNiceMock(PermissionDAO.class));
      binder.bind(ResourceTypeDAO.class).toInstance(createMock(ResourceTypeDAO.class));
    }
  }
;
  injector=Guice.createInjector(module);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.upgrade.UpgradeCatalog240Test </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void init(){
  reset(entityManagerProvider);
  expect(entityManagerProvider.get()).andReturn(entityManager).anyTimes();
  replay(entityManagerProvider);
  injector=Guice.createInjector(new InMemoryDefaultTestModule());
  injector.getInstance(GuiceJpaInitializer.class);
  upgradeCatalogHelper=injector.getInstance(UpgradeCatalogHelper.class);
  injector.getInstance(AmbariMetaInfo.class);
  StackDAO stackDAO=injector.getInstance(StackDAO.class);
  desiredStackEntity=stackDAO.find("HDP","2.2.0");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.upgrade.UpgradeCatalogTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new UpgradeHelperModuleTest());
  injector.getInstance(GuiceJpaInitializer.class);
  metaInfo=injector.getInstance(AmbariMetaInfo.class);
  SecurityContextHolder.getContext().setAuthentication(TestAuthenticationFactory.createAdministrator("admin"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.utils.StageUtilsTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  injector=Guice.createInjector(new AbstractModule(){
    @Override protected void configure(){
      bind(EntityManager.class).toInstance(createNiceMock(EntityManager.class));
      bind(DBAccessor.class).toInstance(createNiceMock(DBAccessor.class));
      bind(ClusterFactory.class).toInstance(createNiceMock(ClusterFactory.class));
      bind(HostFactory.class).toInstance(createNiceMock(HostFactory.class));
      bind(SecurityHelper.class).toInstance(createNiceMock(SecurityHelper.class));
      bind(OsFamily.class).toInstance(createNiceMock(OsFamily.class));
      bind(CredentialStoreService.class).toInstance(createNiceMock(CredentialStoreService.class));
      bind(TopologyManager.class).toInstance(createNiceMock(TopologyManager.class));
      bind(AmbariMetaInfo.class).toInstance(createMock(AmbariMetaInfo.class));
      bind(Clusters.class).toInstance(createNiceMock(ClustersImpl.class));
      bind(StackManagerFactory.class).toInstance(createNiceMock(StackManagerFactory.class));
      bind(ServiceComponentHostFactory.class).toInstance(createNiceMock(ServiceComponentHostFactory.class));
      bind(StageFactory.class).to(StageFactoryImpl.class);
      bind(HostRoleCommandFactory.class).to(HostRoleCommandFactoryImpl.class);
      bind(HostDAO.class).toInstance(createNiceMock(HostDAO.class));
      bind(PersistedState.class).toInstance(createNiceMock(PersistedState.class));
    }
  }
);
  StageUtils.setTopologyManager(injector.getInstance(TopologyManager.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.utils.TestShellCommandUtil </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws IOException {
  try {
    temp.create();
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.view.ViewExtractorTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void resetGlobalMocks(){
  reset(extractedArchiveDir,viewArchive,archiveDir,entryFile,classesDir,libDir,metaInfDir,viewJarFile,jarEntry,fos,configuration,viewDir,fileEntry,viewDAO);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.server.view.ViewRegistryTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void resetGlobalMocks(){
  ViewRegistry.initInstance(getRegistry(viewDAO,viewInstanceDAO,userDAO,memberDAO,privilegeDAO,resourceDAO,resourceTypeDAO,securityHelper,handlerList,null,null,ambariMetaInfo,clusters));
  reset(viewDAO,resourceDAO,viewInstanceDAO,userDAO,memberDAO,privilegeDAO,resourceTypeDAO,securityHelper,configuration,handlerList,ambariMetaInfo,clusters);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.view.capacityscheduler.ConfigurationServiceTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  context=createNiceMock(ViewContext.class);
  httpHeaders=createNiceMock(HttpHeaders.class);
  ambariCluster=createNiceMock(Cluster.class);
  properties=new HashMap<String,String>();
  properties.put(AmbariApi.AMBARI_SERVER_URL_INSTANCE_PROPERTY,BASE_URI);
  properties.put(AmbariApi.AMBARI_SERVER_USERNAME_INSTANCE_PROPERTY,"admin");
  properties.put(AmbariApi.AMBARI_SERVER_PASSWORD_INSTANCE_PROPERTY,"admin");
  EasyMock.expect(ambariCluster.getConfigurationValue("ranger-yarn-plugin-properties","ranger-yarn-plugin-enabled")).andReturn("Yes").anyTimes();
  EasyMock.expect(context.getCluster()).andReturn(ambariCluster).anyTimes();
  EasyMock.expect(context.getProperties()).andReturn(properties).anyTimes();
  EasyMock.replay(context);
  EasyMock.replay(ambariCluster);
  System.out.println("context.getProperties() : " + context.getProperties());
  configurationService=new ConfigurationService(context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.view.filebrowser.FilebrowserTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  handler=createNiceMock(ViewResourceHandler.class);
  context=createNiceMock(ViewContext.class);
  httpHeaders=createNiceMock(HttpHeaders.class);
  uriInfo=createNiceMock(UriInfo.class);
  properties=new HashMap<String,String>();
  File baseDir=new File("./target/hdfs/" + "FilebrowserTest").getAbsoluteFile();
  FileUtil.fullyDelete(baseDir);
  Configuration conf=new Configuration();
  conf.set(MiniDFSCluster.HDFS_MINIDFS_BASEDIR,baseDir.getAbsolutePath());
  conf.set("hadoop.proxyuser." + System.getProperty("user.name") + ".groups","*");
  conf.set("hadoop.proxyuser." + System.getProperty("user.name") + ".hosts","*");
  MiniDFSCluster.Builder builder=new MiniDFSCluster.Builder(conf);
  hdfsCluster=builder.build();
  String hdfsURI=hdfsCluster.getURI() + "/";
  properties.put("webhdfs.url",hdfsURI);
  expect(context.getProperties()).andReturn(properties).anyTimes();
  expect(context.getUsername()).andReturn(System.getProperty("user.name")).anyTimes();
  replay(handler,context,httpHeaders,uriInfo);
  fileBrowserService=getService(FileBrowserService.class,handler,context);
  FileOperationService.MkdirRequest request=new FileOperationService.MkdirRequest();
  request.path="/tmp";
  fileBrowserService.fileOps().mkdir(request);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.view.hive.BaseHiveTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  handler=createNiceMock(ViewResourceHandler.class);
  properties=new HashMap<String,String>();
  baseDir=new File(DATA_DIRECTORY).getAbsoluteFile();
  hiveStorageFile=new File("./target/HiveTest/storage.dat").getAbsoluteFile();
  setupDefaultContextProperties(properties);
  setupProperties(properties,baseDir);
  context=makeContext(properties,"ambari-qa","MyHive");
  replay(handler,context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.view.hive.resources.files.FileServiceTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Override @Before public void setUp() throws Exception {
  super.setUp();
  fileService=getService(FileService.class,handler,context);
  FilePaginator.setPageSize(PAGINATOR_PAGE_SIZE);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.view.hive.resources.jobs.JobServiceTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Override @Before public void setUp() throws Exception {
  super.setUp();
  savedQueryService=getService(SavedQueryService.class,handler,context);
  jobService=getService(JobService.class,handler,context);
  Connection hiveConnection=configureHiveConnectionMock();
  new UserLocalConnection().set(hiveConnection,context);
  jobService.setAggregator(new Aggregator(jobService.getResourceManager(),jobService.getOperationHandleResourceManager(),new AggregatorTest.MockATSParser()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.view.hive.resources.resources.FileResourceServiceTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Override @Before public void setUp() throws Exception {
  super.setUp();
  resourceService=getService(FileResourceService.class,handler,context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.view.hive.resources.savedQueries.SavedQueryServiceTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Override @Before public void setUp() throws Exception {
  super.setUp();
  savedQueryService=getService(SavedQueryService.class,handler,context);
  savedQueryService.getSharedObjectsFactory().clear();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.view.hive.resources.udfs.UDFServiceTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Override @Before public void setUp() throws Exception {
  super.setUp();
  udfService=getService(UDFService.class,handler,context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.view.pig.BasePigTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  handler=createNiceMock(ViewResourceHandler.class);
  context=createNiceMock(ViewContext.class);
  properties=new HashMap<String,String>();
  baseDir=new File(DATA_DIRECTORY).getAbsoluteFile();
  pigStorageFile=new File("./target/PigTest/storage.dat").getAbsoluteFile();
  properties.put("dataworker.storagePath",pigStorageFile.toString());
  properties.put("webhdfs.url","webhdfs://host:1234");
  properties.put("webhcat.hostname","localhost/templeton/v1");
  properties.put("webhcat.port","50111");
  properties.put("webhcat.username","admin");
  properties.put("scripts.dir","/tmp/.pigscripts");
  properties.put("jobs.dir","/tmp/.pigjobs");
  setupProperties(properties,baseDir);
  expect(context.getProperties()).andReturn(properties).anyTimes();
  expect(context.getUsername()).andReturn("ambari-qa").anyTimes();
  expect(context.getInstanceName()).andReturn("MyPig").anyTimes();
  replay(handler,context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.view.pig.test.FileTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Override @Before public void setUp() throws Exception {
  super.setUp();
  fileService=getService(FileService.class,handler,context);
  FilePaginator.setPageSize(PAGINATOR_PAGE_SIZE);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.view.pig.test.HelpTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Override @Before public void setUp() throws Exception {
  super.setUp();
  helpService=new HelpService(context,handler);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.view.pig.test.IntegrationalTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Override @Before public void setUp() throws Exception {
  super.setUp();
  jobService=getService(JobService.class,handler,context);
  scriptService=getService(ScriptService.class,handler,context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.view.pig.test.JobTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Override @Before public void setUp() throws Exception {
  super.setUp();
  jobService=getService(JobService.class,handler,context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.view.pig.test.ScriptTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Override @Before public void setUp() throws Exception {
  super.setUp();
  scriptService=getService(ScriptService.class,handler,context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.view.pig.test.ScriptTestHDFSUnmanaged </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Override @Before public void setUp() throws Exception {
  super.setUp();
  handler=createNiceMock(ViewResourceHandler.class);
  context=createNiceMock(ViewContext.class);
  UserLocal.dropAllConnections(HdfsApi.class);
  StorageUtil.dropAllConnections();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.view.pig.test.ScriptTestUnmanaged </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  handler=createNiceMock(ViewResourceHandler.class);
  context=createNiceMock(ViewContext.class);
  baseDir=new File(DATA_DIRECTORY).getAbsoluteFile();
  pigStorageFile=new File("./target/BasePigTest/storage.dat").getAbsoluteFile();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ambari.view.pig.test.UDFTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Override @Before public void setUp() throws Exception {
  super.setUp();
  udfService=getService(UDFService.class,handler,context);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.metrics2.sink.kafka.KafkaTimelineMetricsReporterTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  @SuppressWarnings({"rawtypes","unchecked"}) Gauge g=registry.newGauge(System.class,"gauge",gauge);
  Counter counter=registry.newCounter(System.class,"counter");
  Histogram histogram=registry.newHistogram(System.class,"histogram");
  Meter meter=registry.newMeter(System.class,"meter","empty",TimeUnit.MILLISECONDS);
  Timer timer=registry.newTimer(System.class,"timer");
  list.add(g);
  list.add(counter);
  list.add(histogram);
  list.add(meter);
  list.add(timer);
  Properties properties=new Properties();
  properties.setProperty("kafka.timeline.metrics.sendInterval","5900");
  properties.setProperty("kafka.timeline.metrics.maxRowCacheSize","10000");
  properties.setProperty("kafka.timeline.metrics.host","localhost");
  properties.setProperty("kafka.timeline.metrics.port","8188");
  properties.setProperty("kafka.timeline.metrics.reporter.enabled","true");
  properties.setProperty("external.kafka.metrics.exclude.prefix","a.b.c");
  properties.setProperty("external.kafka.metrics.include.prefix","a.b.c.d");
  props=new VerifiableProperties(properties);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.metrics2.sink.kafka.ScheduledReporterTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@SuppressWarnings("unchecked") @Before public void setUp() throws Exception {
  Gauge g=registry.newGauge(System.class,"gauge",gauge);
  Counter counter=registry.newCounter(System.class,"counter");
  Histogram histogram=registry.newHistogram(System.class,"histogram");
  Meter meter=registry.newMeter(System.class,"meter","empty",TimeUnit.MILLISECONDS);
  Timer timer=registry.newTimer(System.class,"timer");
  list.add(g);
  list.add(counter);
  list.add(histogram);
  list.add(meter);
  list.add(timer);
  reporter.start(200,TimeUnit.MILLISECONDS);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.metrics2.sink.timeline.cache.HandleConnectExceptionTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void init(){
  sink=new TestTimelineMetricsSink();
  OutputStream os=createNiceMock(OutputStream.class);
  HttpURLConnection connection=createNiceMock(HttpURLConnection.class);
  URL url=createNiceMock(URL.class);
  try {
    expectNew(URL.class,"collector").andReturn(url);
    expect(url.openConnection()).andReturn(connection).once();
    expect(connection.getOutputStream()).andReturn(os).once();
    expect(connection.getResponseCode()).andThrow(new IOException());
    replayAll();
  }
 catch (  Exception e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.applicationhistoryservice.TestApplicationHistoryClientService </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup(){
  historyServer=new ApplicationHistoryServer();
  Configuration config=new YarnConfiguration();
  expectedLogUrl=WebAppUtils.getHttpSchemePrefix(config) + WebAppUtils.getAHSWebAppURLWithoutScheme(config) + "/applicationhistory/logs/localhost:0/container_0_0001_01_000001/"+ "container_0_0001_01_000001/test user";
  config.setClass(YarnConfiguration.APPLICATION_HISTORY_STORE,MemoryApplicationHistoryStore.class,ApplicationHistoryStore.class);
  historyServer.init(config);
  historyServer.start();
  store=((ApplicationHistoryManagerImpl)historyServer.getApplicationHistory()).getHistoryStore();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.applicationhistoryservice.TestApplicationHistoryManagerImpl </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  Configuration config=new Configuration();
  config.setClass(YarnConfiguration.APPLICATION_HISTORY_STORE,MemoryApplicationHistoryStore.class,ApplicationHistoryStore.class);
  applicationHistoryManagerImpl=new ApplicationHistoryManagerImpl();
  applicationHistoryManagerImpl.init(config);
  applicationHistoryManagerImpl.start();
  store=applicationHistoryManagerImpl.getHistoryStore();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.applicationhistoryservice.TestApplicationHistoryServer </h4><pre class="type-7 type-2 type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before @SuppressWarnings("all") public void setup() throws URISyntaxException, IOException {
  folder.create();
  File hbaseSite=folder.newFile("hbase-site.xml");
  File amsSite=folder.newFile("ams-site.xml");
  FileUtils.writeStringToFile(hbaseSite,"<configuration>\n" + "  <property>\n" + "    <name>hbase.defaults.for.version.skip</name>\n"+ "    <value>true</value>\n"+ "  </property>"+ "  <property> "+ "    <name>hbase.zookeeper.quorum</name>\n"+ "    <value>localhost</value>\n"+ "  </property>"+ "</configuration>");
  FileUtils.writeStringToFile(amsSite,"<configuration>\n" + "  <property>\n" + "    <name>test</name>\n"+ "    <value>testReady</value>\n"+ "  </property>\n"+ "  <property>\n"+ "    <name>timeline.metrics.host.aggregator.hourly.disabled</name>\n"+ "    <value>true</value>\n"+ "    <description>\n"+ "      Disable host based hourly aggregations.\n"+ "    </description>\n"+ "  </property>\n"+ "  <property>\n"+ "    <name>timeline.metrics.host.aggregator.minute.disabled</name>\n"+ "    <value>true</value>\n"+ "    <description>\n"+ "      Disable host based minute aggregations.\n"+ "    </description>\n"+ "  </property>\n"+ "  <property>\n"+ "    <name>timeline.metrics.cluster.aggregator.hourly.disabled</name>\n"+ "    <value>true</value>\n"+ "    <description>\n"+ "      Disable cluster based hourly aggregations.\n"+ "    </description>\n"+ "  </property>\n"+ "  <property>\n"+ "    <name>timeline.metrics.cluster.aggregator.minute.disabled</name>\n"+ "    <value>true</value>\n"+ "    <description>\n"+ "      Disable cluster based minute aggregations.\n"+ "    </description>\n"+ "  </property>"+ "</configuration>");
  ClassLoader currentClassLoader=Thread.currentThread().getContextClassLoader();
  URLClassLoader urlClassLoader=null;
  try {
    urlClassLoader=new URLClassLoader(new URL[]{folder.getRoot().toURI().toURL()},currentClassLoader);
  }
 catch (  MalformedURLException e) {
    e.printStackTrace();
  }
  Thread.currentThread().setContextClassLoader(urlClassLoader);
  metricsConf=new Configuration(false);
  metricsConf.addResource(Thread.currentThread().getContextClassLoader().getResource(METRICS_SITE_CONFIGURATION_FILE).toURI().toURL());
  assertNotNull(metricsConf.get("test"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.applicationhistoryservice.TestFileSystemApplicationHistoryStore </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  fs=new RawLocalFileSystem();
  Configuration conf=new Configuration();
  fs.initialize(new URI("/"),conf);
  fsWorkingPath=new Path("Test");
  fs.delete(fsWorkingPath,true);
  conf.set(YarnConfiguration.FS_APPLICATION_HISTORY_STORE_URI,fsWorkingPath.toString());
  store=new FileSystemApplicationHistoryStore();
  store.init(conf);
  store.start();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.applicationhistoryservice.TestMemoryApplicationHistoryStore </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup(){
  store=new MemoryApplicationHistoryStore();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.applicationhistoryservice.metrics.loadsimulator.data.TestAppMetrics </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  timestamps=new long[4];
  timestamps[0]=0;
  timestamps[1]=timestamps[0] + 5000;
  timestamps[2]=timestamps[1] + 5000;
  timestamps[3]=timestamps[2] + 5000;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.applicationhistoryservice.metrics.timeline.AbstractMiniHBaseClusterTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  Logger.getLogger("org.apache.hadoop.yarn.server.applicationhistoryservice.metrics.timeline").setLevel(Level.DEBUG);
  hdb=createTestableHBaseAccessor();
  conn=getConnection(getUrl());
  hdb.initMetricSchema();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.applicationhistoryservice.metrics.timeline.AbstractPhoenixConnectionlessTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  connUrl=getUrl();
  startServer(connUrl);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.applicationhistoryservice.metrics.timeline.ITPhoenixHBaseAccessor </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  hdb=createTestableHBaseAccessor();
  conn=getConnection(getUrl());
  hdb.initMetricSchema();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.applicationhistoryservice.metrics.timeline.aggregators.AbstractTimelineAggregatorTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  sleepIntervalMillis=30000l;
  checkpointCutOffMultiplier=2;
  Configuration metricsConf=new Configuration();
  metricsConf.setInt(AGGREGATOR_CHECKPOINT_DELAY,0);
  metricsConf.setInt(RESULTSET_FETCH_SIZE,2000);
  startTimeInDoWork=new AtomicLong(0);
  endTimeInDoWork=new AtomicLong(0);
  checkPoint=new AtomicLong(-1);
  actualRuns=0;
  agg=new AbstractTimelineAggregator("TimelineAggregatorTest",null,metricsConf,clock){
    @Override public boolean doWork(    long startTime,    long endTime){
      startTimeInDoWork.set(startTime);
      endTimeInDoWork.set(endTime);
      actualRuns++;
      return true;
    }
    @Override protected Condition prepareMetricQueryCondition(    long startTime,    long endTime){
      return null;
    }
    @Override protected void aggregate(    ResultSet rs,    long startTime,    long endTime) throws IOException, SQLException {
    }
    @Override protected Long getSleepIntervalMillis(){
      return sleepIntervalMillis;
    }
    @Override protected Integer getCheckpointCutOffMultiplier(){
      return checkpointCutOffMultiplier;
    }
    @Override public boolean isDisabled(){
      return false;
    }
    @Override protected String getCheckpointLocation(){
      return "dummy_ckptFile";
    }
    protected long readCheckPoint(){
      return checkPoint.get();
    }
    @Override protected void saveCheckPoint(    long checkpointTime) throws IOException {
      checkPoint.set(checkpointTime);
    }
  }
;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.applicationhistoryservice.metrics.timeline.discovery.TestMetadataManager </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void insertDummyRecords() throws IOException, SQLException {
  metadataManager=new TimelineMetricMetadataManager(hdb,new Configuration());
  final long now=System.currentTimeMillis();
  TimelineMetrics timelineMetrics=new TimelineMetrics();
  TimelineMetric metric1=new TimelineMetric();
  metric1.setMetricName("dummy_metric1");
  metric1.setHostName("dummy_host1");
  metric1.setTimestamp(now);
  metric1.setStartTime(now - 1000);
  metric1.setAppId("dummy_app1");
  metric1.setType("Integer");
  metric1.setMetricValues(new TreeMap<Long,Double>(){
{
      put(now - 100,1.0);
      put(now - 200,2.0);
      put(now - 300,3.0);
    }
  }
);
  timelineMetrics.getMetrics().add(metric1);
  TimelineMetric metric2=new TimelineMetric();
  metric2.setMetricName("dummy_metric2");
  metric2.setHostName("dummy_host2");
  metric2.setTimestamp(now);
  metric2.setStartTime(now - 1000);
  metric2.setAppId("dummy_app2");
  metric2.setType("Integer");
  metric2.setMetricValues(new TreeMap<Long,Double>(){
{
      put(now - 100,1.0);
      put(now - 200,2.0);
      put(now - 300,3.0);
    }
  }
);
  timelineMetrics.getMetrics().add(metric2);
  hdb.insertMetricRecordsWithMetadata(metadataManager,timelineMetrics);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.applicationhistoryservice.timeline.TestLeveldbTimelineStore </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  fsContext=FileContext.getLocalFSFileContext();
  Configuration conf=new Configuration();
  fsPath=new File("target",this.getClass().getSimpleName() + "-tmpDir").getAbsoluteFile();
  fsContext.delete(new Path(fsPath.getAbsolutePath()),true);
  conf.set(YarnConfiguration.TIMELINE_SERVICE_LEVELDB_PATH,fsPath.getAbsolutePath());
  conf.setBoolean(YarnConfiguration.TIMELINE_SERVICE_TTL_ENABLE,false);
  store=new LeveldbTimelineStore();
  store.init(conf);
  store.start();
  loadTestData();
  loadVerificationData();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.applicationhistoryservice.timeline.TestMemoryTimelineStore </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  store=new MemoryTimelineStore();
  store.init(new YarnConfiguration());
  store.start();
  loadTestData();
  loadVerificationData();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.applicationhistoryservice.webapp.TestAHSWebApp </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup(){
  store=new MemoryApplicationHistoryStore();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.applicationhistoryservice.webapp.TestAHSWebServices </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before @Override public void setUp() throws Exception {
  super.setUp();
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
