<h3 style="margin:0px">Class: org.apache.batchee.cli.MainTest (14 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >ConditionMatcher&nbsp;(11)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(8)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies assertions in iterations"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >IterativeVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void instances(){
  final JobOperator jobOperator=BatchRuntime.getJobOperator();
  final long id=jobOperator.start("sample",null);
  main(new String[]{"instances","-name","sample"});
  assertThat(stdout.getLog(),containsString("sample has"));
  assertThat(stdout.getLog(),containsString("instance id"));
  Batches.waitForEnd(jobOperator,id);
}

</code></pre>

<pre class="type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void startAndFail(){
  main(new String[]{"start","-name","sample","status=fail"});
  assertThat(stdout.getLog(),containsString("Batch 'sample' started with id #"));
  assertThat(stdout.getLog(),containsString("Batch status: FAILED"));
}

</code></pre>

<pre class="type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void status(){
  final JobOperator jobOperator=BatchRuntime.getJobOperator();
  final long id=jobOperator.start("sample",null);
  main(new String[]{"status"});
  assertThat(stdout.getLog(),containsString("sample\t|"));
  assertThat(stdout.getLog(),containsString("COMPLETED"));
  Batches.waitForEnd(jobOperator,id);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void argHelp(){
  main(null);
  assertEquals("Available commands:\n\n" + "abandon: abandon a batch from its id\n" + "evict: remove old data, uses embedded configuration (no JAXRS support yet)\n"+ "executions: list executions\n"+ "instances: list instances\n"+ "names: list known batches\n"+ "restart: restart a batch\n"+ "running: list running batches\n"+ "start: start a batch\n"+ "status: list last batches statuses\n"+ "stepExecutions: list step executions for a particular execution\n"+ "stop: stop a batch from its id\n"+ "user1\n"+ "user2\n",stderr.getLog().replace(System.getProperty("line.separator"),"\n"));
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void lifecycle(){
  main(new String[]{"running","-lifecycle",MyLifecycle.class.getName()});
  assertEquals("start stop",MyLifecycle.result);
}

</code></pre>

<pre class="type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void user(){
  for (int i=1; i < 3; i++) {
    main(new String[]{"user" + i});
    assertThat(stdout.getLog(),containsString("User " + i + " called"));
  }
}

</code></pre>

<pre class="type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void start(){
  main(new String[]{"start","-name","sample"});
  assertThat(stdout.getLog(),containsString("Batch 'sample' started with id #"));
  assertThat(stdout.getLog(),containsString("Batch status: COMPLETED"));
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void emptyRunning(){
  main(new String[]{"running"});
  assertThat(stdout.getLog(),containsString("No job started"));
}

</code></pre>

<pre class="type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void restart(){
  main(new String[]{"start","-name","sample","status=fail"});
  final String str="Batch 'sample' started with id #";
  assertThat(stdout.getLog(),containsString(str));
  final int idx=stdout.getLog().indexOf(str);
  final int end=stdout.getLog().indexOf(System.getProperty("line.separator"),idx);
  final String id=stdout.getLog().substring(idx + str.length(),end);
  main(new String[]{"restart","-id",id,"status=ok"});
  assertThat(stdout.getLog(),containsString(str));
  assertThat(stdout.getLog(),containsString("Batch status: COMPLETED"));
}

</code></pre>

<pre class="type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void stop(){
  final Thread start=new Thread(){
    @Override public void run(){
      main(new String[]{"start","-name","long-sample","-socket","1236","-wait","false"});
    }
  }
;
  start.run();
  final String str="Batch 'long-sample' started with id #";
  final String out=stdout.getLog();
  int idx;
  do {
    idx=out.indexOf(str);
  }
 while (idx < 0);
  final int end=out.lastIndexOf(System.getProperty("line.separator"));
  final long id=Long.parseLong(out.substring(idx + str.length(),end));
  main(new String[]{"stop","-id",Long.toString(id),"-socket","1236"});
  assertThat(stdout.getLog(),containsString("Stopped"));
  Batches.waitForEnd(id);
}

</code></pre>

<pre class="type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void stepExecutions(){
  final JobOperator jobOperator=BatchRuntime.getJobOperator();
  final long id=jobOperator.start("sample",null);
  Batches.waitForEnd(jobOperator,id);
  main(new String[]{"stepExecutions","-id",Long.toString(id)});
  assertThat(stdout.getLog(),containsString("step id\t|\t step name\t|\t    start time   \t|\t     end time    \t|\t" + "exit status\t|\tbatch status\t|\t" + "READ_COUNT\t|\tWRITE_COUNT\t|\tCOMMIT_COUNT\t|\tROLLBACK_COUNT\t|\tREAD_SKIP_COUNT\t|\t"+ "PROCESS_SKIP_COUNT\t|\tFILTER_COUNT\t|\tWRITE_SKIP_COUNT"));
  assertThat(stdout.getLog(),containsString("OK"));
  assertThat(stdout.getLog(),containsString("sample-step"));
  assertThat(stdout.getLog(),containsString("COMPLETED"));
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void running(){
  final JobOperator jobOperator=BatchRuntime.getJobOperator();
  final long id=jobOperator.start("long-sample",null);
  try {
    sleep(100);
  }
 catch (  final InterruptedException e) {
    Thread.interrupted();
  }
  main(new String[]{"running"});
  assertThat(stdout.getLog(),containsString("long-sample -> ["));
  Batches.waitForEnd(jobOperator,id);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void helpCommand(){
  main(new String[]{"help","evict"});
  assertEquals("usage: evict -until <arg>\n" + "\n" + "remove old data, uses embedded configuration (no JAXRS support yet)\n"+ "\n"+ " -until <arg>   date until when the eviction will occur (excluded),\n"+ "                YYYYMMDD format\n",stdout.getLog().replace(System.getProperty("line.separator"),"\n"));
}

</code></pre>

<pre class="type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void executions(){
  final JobOperator jobOperator=BatchRuntime.getJobOperator();
  final long id=jobOperator.start("sample",null);
  Batches.waitForEnd(jobOperator,id);
  main(new String[]{"executions","-id",Long.toString(id)});
  assertThat(stdout.getLog(),containsString("Executions of sample for instance " + id));
  assertThat(stdout.getLog(),containsString("COMPLETED"));
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
