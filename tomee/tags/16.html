<h3><span class=" glyphicon glyphicon-tag"/>&nbspPublicFieldVerifier</h3><kbd>Verifies values related to public fields.</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.openejb.arquillian.tests.hibernate.HibernateTest </h4><pre class="type-7 type-2 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkEmIsHibernateOne() throws Exception {
  AppInfo info=null;
  for (  final AppInfo app : SystemInstance.get().getComponent(Assembler.class).getDeployedApplications()) {
    if (app.appId.endsWith("hibernate-app")) {
      info=app;
      break;
    }
  }
  assertNotNull(info);
  final EntityManagerFactory emf=(EntityManagerFactory)SystemInstance.get().getComponent(ContainerSystem.class).getJNDIContext().lookup(Assembler.PERSISTENCE_UNIT_NAMING_CONTEXT + info.persistenceUnits.iterator().next().id);
  assertTrue(((ReloadableEntityManagerFactory)emf).getDelegate().getClass().getName().startsWith("org.hibernate."));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.openejb.assembler.classic.util.ServiceInfosTest </h4><pre class="type-9 type-2 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies values related to public fields.
"></span><br>
@Test public void createServiceWithResourceAttribute(){
  final ServiceInfo serviceInfo=new ServiceInfo();
  serviceInfo.id="the-id";
  serviceInfo.className=TheService.class.getName();
  serviceInfo.properties=new Properties();
  serviceInfo.properties.setProperty("dataSource","@ds");
  final TheService instance=TheService.class.cast(ServiceInfos.resolve(asList(serviceInfo),serviceInfo.id));
  assertNotNull(instance.dataSource);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.openejb.cdi.transactional.TransactionScopeTest </h4><pre class="type-4 type-11 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Verifies values related to public fields.
"></span><br>
@Test public void scope(){
  bean.withTransaction();
  final String firstId1=bean.id;
  bean.withTransaction();
  final String secondId1=bean.id;
  assertThat("bean should change between scenarios",firstId1,is(not(secondId1)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.openejb.config.AnnotationDeployerTest </h4><pre class="type-4 type-2 type-1 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void badMainClassFormatTest() throws Exception {
  final ConfigurationFactory config=new ConfigurationFactory();
  final Assembler assembler=new Assembler();
  final AppModule app=new AppModule(this.getClass().getClassLoader(),"test-app");
  final ClientModule clientModule=new ClientModule(null,app.getClassLoader(),app.getJarLocation(),null,null);
  final String mainClass=MyMainClass.class.getName().replaceAll("\\.","/");
  clientModule.setMainClass(mainClass);
  app.getClientModules().add(clientModule);
  final AppInfo appInfo=config.configureApplication(app);
  assembler.createApplication(appInfo);
  final ClientInfo clientInfo=appInfo.clients.get(0);
  Assert.assertNotNull(clientInfo);
  Assert.assertEquals(MyMainClass.class.getName(),clientInfo.mainClass);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.openejb.config.AutoDeployerTest </h4><pre class="type-7 type-4 type-1 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  final File tmpdir=Files.tmpdir();
  final File apps=Files.mkdir(tmpdir,"myapps");
  final File conf=Files.mkdir(tmpdir,"conf");
  files.add(apps);
  final Properties properties=new Properties();
  properties.setProperty("openejb.deployments.classpath","false");
  properties.setProperty("openejb.deployment.unpack.location","false");
  properties.setProperty("openejb.home",tmpdir.getAbsolutePath());
  properties.setProperty("openejb.base",tmpdir.getAbsolutePath());
  properties.setProperty("openejb.autodeploy.interval","2 seconds");
  SystemInstance.init(properties);
{
    final File config=new File(conf,"openejb.xml");
    IO.writeString(config,"<openejb><Deployments autoDeploy=\"true\" dir=\"myapps\"/> </openejb>");
    SystemInstance.get().setProperty("openejb.configuration",config.getAbsolutePath());
  }
  final ConfigurationFactory configurationFactory=new ConfigurationFactory();
  configurationFactory.init(properties);
  final OpenEjbConfiguration configuration=configurationFactory.getOpenEjbConfiguration();
{
    final List<String> autoDeploy=configuration.containerSystem.autoDeploy;
    assertEquals(1,autoDeploy.size());
    assertEquals("myapps",autoDeploy.get(0));
  }
  final Assembler assembler=new Assembler();
  assembler.buildContainerSystem(configuration);
  assertFalse(Yellow.deployed);
  assertFalse(Orange.deployed);
  final File deployed=Files.path(apps,"colors.ear");
  final File ear=createEar(tmpdir,Orange.class,State.class);
  IO.copy(ear,deployed);
  Orange.state.waitForChange(1,TimeUnit.MINUTES);
  assertFalse(Yellow.deployed);
  assertTrue(Orange.deployed);
  Files.delete(deployed);
  Orange.state.waitForChange(1,TimeUnit.MINUTES);
  assertFalse(Yellow.deployed);
  assertFalse(Orange.deployed);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-4 type-1 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAltUnpackDir() throws Exception {
  final File tmpdir=Files.tmpdir();
  final File apps=Files.mkdir(tmpdir,"myapps");
  final File conf=Files.mkdir(tmpdir,"conf");
  files.add(apps);
  final Properties properties=new Properties();
  properties.setProperty("openejb.deployments.classpath","false");
  properties.setProperty("tomee.unpack.dir","work");
  properties.setProperty("openejb.home",tmpdir.getAbsolutePath());
  properties.setProperty("openejb.base",tmpdir.getAbsolutePath());
  SystemInstance.init(properties);
{
    final File config=new File(conf,"openejb.xml");
    IO.writeString(config,"<openejb><Deployments autoDeploy=\"true\" dir=\"myapps\"/> </openejb>");
    SystemInstance.get().setProperty("openejb.configuration",config.getAbsolutePath());
  }
  final ConfigurationFactory configurationFactory=new ConfigurationFactory();
  configurationFactory.init(properties);
  final OpenEjbConfiguration configuration=configurationFactory.getOpenEjbConfiguration();
{
    final List<String> autoDeploy=configuration.containerSystem.autoDeploy;
    assertEquals(1,autoDeploy.size());
    assertEquals("myapps",autoDeploy.get(0));
  }
  final Assembler assembler=new Assembler();
  assembler.buildContainerSystem(configuration);
  assertFalse(Yellow.deployed);
  assertFalse(Orange.deployed);
  final File deployed=Files.path(apps,"colors.ear");
  deployed.deleteOnExit();
  final File ear=createEar(tmpdir,Orange.class,State.class);
  ear.deleteOnExit();
  IO.copy(ear,deployed);
  assertTrue(deployed.exists());
  Orange.state.waitForChange(1,TimeUnit.MINUTES);
  assertFalse(Yellow.deployed);
  assertTrue(Orange.deployed);
  Files.delete(deployed);
  Orange.state.waitForChange(1,TimeUnit.MINUTES);
  assertFalse(Yellow.deployed);
  assertFalse(Orange.deployed);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-1 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOriginalAppScanning() throws Exception {
  final File tmpdir=Files.tmpdir();
  final File apps=Files.mkdir(tmpdir,"myapps");
  final File conf=Files.mkdir(tmpdir,"conf");
  files.add(apps);
  final Properties properties=new Properties();
  properties.setProperty("openejb.deployments.classpath","false");
  properties.setProperty("openejb.deployment.unpack.location","false");
  properties.setProperty("openejb.home",tmpdir.getAbsolutePath());
  properties.setProperty("openejb.base",tmpdir.getAbsolutePath());
  properties.setProperty("openejb.autodeploy.interval","2 seconds");
  SystemInstance.init(properties);
{
    final File config=new File(conf,"openejb.xml");
    IO.writeString(config,"<openejb><Deployments autoDeploy=\"true\" dir=\"myapps\"/> </openejb>");
    SystemInstance.get().setProperty("openejb.configuration",config.getAbsolutePath());
  }
  final File deployed=Files.path(apps,"colors.ear");
  final File ear=createEar(tmpdir,Orange.class,State.class);
  IO.copy(ear,deployed);
  final ConfigurationFactory configurationFactory=new ConfigurationFactory();
  configurationFactory.init(properties);
  final OpenEjbConfiguration configuration=configurationFactory.getOpenEjbConfiguration();
{
    final List<String> autoDeploy=configuration.containerSystem.autoDeploy;
    assertEquals(1,autoDeploy.size());
    assertEquals("myapps",autoDeploy.get(0));
  }
  final Assembler assembler=new Assembler();
  assembler.buildContainerSystem(configuration);
  assertTrue(Orange.deployed);
  final long start=Orange.start;
  assertFalse(Yellow.deployed);
  assertTrue(Orange.deployed);
  Thread.sleep(4000);
  assertEquals(start,Orange.start);
  Files.delete(deployed);
  Orange.state.waitForChange(1,TimeUnit.MINUTES);
  assertFalse(Yellow.deployed);
  assertFalse(Orange.deployed);
}

</code></pre>

<br>
<pre class="type-7 type-4 type-1 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSpaces() throws Exception {
  final File tmpdir=new File(Files.tmpdir(),"with spaces");
  final File apps=Files.mkdir(tmpdir,"my apps");
  final File conf=Files.mkdir(tmpdir,"conf");
  files.add(apps);
  final Properties properties=new Properties();
  properties.setProperty("openejb.deployments.classpath","false");
  properties.setProperty("openejb.deployment.unpack.location","false");
  properties.setProperty("openejb.home",tmpdir.getAbsolutePath());
  properties.setProperty("openejb.base",tmpdir.getAbsolutePath());
  SystemInstance.init(properties);
{
    final File config=new File(conf,"openejb.xml");
    IO.writeString(config,"<openejb><Deployments autoDeploy=\"true\" dir=\"my apps\"/> </openejb>");
    SystemInstance.get().setProperty("openejb.configuration",config.getAbsolutePath());
  }
  final ConfigurationFactory configurationFactory=new ConfigurationFactory();
  configurationFactory.init(properties);
  final OpenEjbConfiguration configuration=configurationFactory.getOpenEjbConfiguration();
{
    final List<String> autoDeploy=configuration.containerSystem.autoDeploy;
    assertEquals(1,autoDeploy.size());
    assertEquals("my apps",autoDeploy.get(0));
  }
  final Assembler assembler=new Assembler();
  assembler.buildContainerSystem(configuration);
  assertFalse(Yellow.deployed);
  assertFalse(Orange.deployed);
  final File deployed=Files.path(apps,"colors.ear");
  final File ear=createEar(tmpdir,Orange.class,State.class);
  IO.copy(ear,deployed);
  Orange.state.waitForChange(1,TimeUnit.MINUTES);
  assertFalse(Yellow.deployed);
  assertTrue(Orange.deployed);
  Files.delete(deployed);
  Orange.state.waitForChange(1,TimeUnit.MINUTES);
  assertFalse(Yellow.deployed);
  assertFalse(Orange.deployed);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.openejb.config.CleanEnvEntriesTest </h4><pre class="type-4 type-2 type-1 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  final Assembler assembler=new Assembler();
  final ConfigurationFactory factory=new ConfigurationFactory();
  final SingletonBean singletonBean=new SingletonBean(Blue.class);
  singletonBean.getEnvEntry().add(new EnvEntry().name("message").type(String.class).value("hello").injectionTarget(Blue.class,"message"));
  singletonBean.getEnvEntry().add(new EnvEntry().name("novalue1").type(String.class));
  singletonBean.getEnvEntry().add(new EnvEntry().name("novalue2"));
  singletonBean.getEnvEntry().add(new EnvEntry().name("value-but-no-type1").value("10").injectionTarget(Blue.class,"number").injectionTarget(Orange.class,"number"));
  singletonBean.getEnvEntry().add(new EnvEntry().name("value-but-no-type2").value("D").injectionTarget(Blue.class,"letter"));
  singletonBean.getEnvEntry().add(new EnvEntry().name("value-but-no-type3").value("2").injectionTarget(Blue.class,"vague").injectionTarget(Orange.class,"vague"));
  final EjbJar ejbJar=new EjbJar();
  ejbJar.addEnterpriseBean(singletonBean);
  final EjbJarInfo ejbJarInfo=factory.configureApplication(ejbJar);
  final Map<String,EnvEntryInfo> entries=map(ejbJarInfo.enterpriseBeans.get(0).jndiEnc.envEntries);
  assertNotNull(entries.get("comp/env/message"));
  assertNotNull(entries.get("comp/env/value-but-no-type1"));
  assertNotNull(entries.get("comp/env/value-but-no-type2"));
  assertNull(entries.get("comp/env/novalue1"));
  assertNull(entries.get("comp/env/novalue2"));
  assertEquals(Integer.class.getName(),entries.get("comp/env/value-but-no-type1").type);
  assertEquals(Character.class.getName(),entries.get("comp/env/value-but-no-type2").type);
  assertEquals(String.class.getName(),entries.get("comp/env/value-but-no-type3").type);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.openejb.config.DeploymentsElementTest </h4><pre class="type-9 type-4 type-1 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * <Deployments dir="myapps"/>
 * <p/>
 * Two ejb jars
 * <p/>
 * Order should be guaranteed to be the same as
 * they are declared in the openejb.xml
 * <p/>
 * To test, the jars are named intentionally in an order
 * that would naturally sort to be the reverse.
 * @throws Exception
 */
@Test public void deploymentsFile_Jars_Order() throws Exception {
  final Server server=new Server();
{
    final File jar=server.deploymentsFile("2000.jar");
    Archives.jarArchive(jar,null,Yellow.class);
  }
{
    final File jar=server.deploymentsFile("1000.jar");
    Archives.jarArchive(jar,null,Orange.class);
  }
  final OpenEjbConfiguration configuration=server.init();
  assertEquals(2,configuration.containerSystem.applications.size());
  assertEquals("2000",configuration.containerSystem.applications.get(0).appId);
  assertEquals("1000",configuration.containerSystem.applications.get(1).appId);
  final AppInfo yellow=configuration.containerSystem.applications.get(0);
  assertEquals(1,yellow.ejbJars.size());
  assertEquals(1,yellow.ejbJars.get(0).enterpriseBeans.size());
  assertEquals("Yellow",yellow.ejbJars.get(0).enterpriseBeans.get(0).ejbName);
  final AppInfo orange=configuration.containerSystem.applications.get(1);
  assertEquals(1,orange.ejbJars.size());
  assertEquals(1,orange.ejbJars.get(0).enterpriseBeans.size());
  assertEquals("Orange",orange.ejbJars.get(0).enterpriseBeans.get(0).ejbName);
}

</code></pre>

<br>
<pre class="type-9 type-4 type-1 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * <Deployments dir="myapps"/>
 * <p/>
 * Two ejb jars
 * @throws Exception
 */
@Test public void deploymentsDir_Jars_Packed() throws Exception {
  final Server server=new Server();
  final File apps=server.deploymentsDir("myapps");
{
    final File ear=new File(apps,"yellow.jar");
    Archives.jarArchive(ear,null,Yellow.class);
  }
{
    final File ear=new File(apps,"orange.jar");
    Archives.jarArchive(ear,null,Orange.class);
  }
  final OpenEjbConfiguration configuration=server.init();
  assertEquals(2,configuration.containerSystem.applications.size());
  final AppInfo yellow=select(configuration.containerSystem.applications,"yellow");
  assertEquals(1,yellow.ejbJars.size());
  assertEquals(1,yellow.ejbJars.get(0).enterpriseBeans.size());
  assertEquals("Yellow",yellow.ejbJars.get(0).enterpriseBeans.get(0).ejbName);
  final AppInfo orange=select(configuration.containerSystem.applications,"orange");
  assertEquals(1,orange.ejbJars.size());
  assertEquals(1,orange.ejbJars.get(0).enterpriseBeans.size());
  assertEquals("Orange",orange.ejbJars.get(0).enterpriseBeans.get(0).ejbName);
}

</code></pre>

<br>
<pre class="type-9 type-4 type-1 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * <Deployments dir="myapps/2000.jar"/>
 * <Deployments dir="myapps/2000.jar"/>
 * <Deployments dir="myapps"/>
 * <Deployments dir="myapps"/>
 * <p/>
 * Order should be guaranteed to be the same as
 * they are declared in the openejb.xml
 * <p/>
 * To test, the jars are named intentionally in an order
 * that would naturally sort to be the reverse.
 * @throws Exception
 */
@Test public void deployments_Duplicates() throws Exception {
  final Server server=new Server();
  final File apps=Files.mkdir(server.getBase(),"myapps");
{
    final File jar=server.deploymentsFile("myapps/2000.jar");
    server.deploymentsFile("myapps/2000.jar");
    Archives.jarArchive(jar,null,Yellow.class);
  }
{
    server.deploymentsDir("myapps");
    server.deploymentsDir("myapps");
    final File jar=Files.path(apps,"1000.jar");
    Archives.jarArchive(jar,null,Orange.class);
  }
  final OpenEjbConfiguration configuration=server.init();
  assertEquals(2,configuration.containerSystem.applications.size());
  assertEquals("2000",configuration.containerSystem.applications.get(0).appId);
  assertEquals("1000",configuration.containerSystem.applications.get(1).appId);
  final AppInfo yellow=configuration.containerSystem.applications.get(0);
  assertEquals(1,yellow.ejbJars.size());
  assertEquals(1,yellow.ejbJars.get(0).enterpriseBeans.size());
  assertEquals("Yellow",yellow.ejbJars.get(0).enterpriseBeans.get(0).ejbName);
  final AppInfo orange=configuration.containerSystem.applications.get(1);
  assertEquals(1,orange.ejbJars.size());
  assertEquals(1,orange.ejbJars.get(0).enterpriseBeans.size());
  assertEquals("Orange",orange.ejbJars.get(0).enterpriseBeans.get(0).ejbName);
}

</code></pre>

<br>
<pre class="type-9 type-4 type-1 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * <Deployments dir="myapps/2000.jar"/>
 * <Deployments dir="myapps"/>
 * <p/>
 * Order should be guaranteed to be the same as
 * they are declared in the openejb.xml
 * <p/>
 * To test, the jars are named intentionally in an order
 * that would naturally sort to be the reverse.
 * @throws Exception
 */
@Test public void deploymentsFile_and_Dir_Jars_Order() throws Exception {
  final Server server=new Server();
  final File apps=Files.mkdir(server.getBase(),"myapps");
{
    final File jar=server.deploymentsFile("myapps/2000.jar");
    Archives.jarArchive(jar,null,Yellow.class);
  }
{
    server.deploymentsDir("myapps");
    final File jar=Files.path(apps,"1000.jar");
    Archives.jarArchive(jar,null,Orange.class);
  }
  final OpenEjbConfiguration configuration=server.init();
  assertEquals(2,configuration.containerSystem.applications.size());
  assertEquals("2000",configuration.containerSystem.applications.get(0).appId);
  assertEquals("1000",configuration.containerSystem.applications.get(1).appId);
  final AppInfo yellow=configuration.containerSystem.applications.get(0);
  assertEquals(1,yellow.ejbJars.size());
  assertEquals(1,yellow.ejbJars.get(0).enterpriseBeans.size());
  assertEquals("Yellow",yellow.ejbJars.get(0).enterpriseBeans.get(0).ejbName);
  final AppInfo orange=configuration.containerSystem.applications.get(1);
  assertEquals(1,orange.ejbJars.size());
  assertEquals(1,orange.ejbJars.get(0).enterpriseBeans.size());
  assertEquals("Orange",orange.ejbJars.get(0).enterpriseBeans.get(0).ejbName);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.openejb.config.EjbModuleIdTest </h4><pre class="type-9 type-4 type-1 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * OPENEJB-1555
 * @throws Exception
 */
@Test public void testSystemProperty() throws Exception {
  final Map<String,String> map=new HashMap<String,String>();
  map.put("META-INF/ejb-jar.xml","<ejb-jar id=\"orangeId\"><module-name>orangeName</module-name></ejb-jar>");
  final File file=Archives.jarArchive(map,"test",OrangeBean.class);
  final Assembler assembler=new Assembler();
  final ConfigurationFactory factory=new ConfigurationFactory();
  SystemInstance.get().setProperty(file.getName() + ".moduleId","orangeSystem");
  final AppInfo appInfo=factory.configureApplication(file);
  final EjbJarInfo ejbJarInfo=appInfo.ejbJars.get(0);
  assertEquals("orangeSystem",ejbJarInfo.moduleName);
}

</code></pre>

<br>
<pre class="type-9 type-4 type-1 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testModuleNameAndId() throws Exception {
  final Map<String,String> map=new HashMap<String,String>();
  map.put("META-INF/ejb-jar.xml","<ejb-jar id=\"orangeId\"><module-name>orangeName</module-name></ejb-jar>");
  final File file=Archives.jarArchive(map,"test",OrangeBean.class);
  final Assembler assembler=new Assembler();
  final ConfigurationFactory factory=new ConfigurationFactory();
  final AppInfo appInfo=factory.configureApplication(file);
  final EjbJarInfo ejbJarInfo=appInfo.ejbJars.get(0);
  assertEquals("orangeName",ejbJarInfo.moduleName);
}

</code></pre>

<br>
<pre class="type-9 type-4 type-1 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testId() throws Exception {
  final Map<String,String> map=new HashMap<String,String>();
  map.put("META-INF/ejb-jar.xml","<ejb-jar id=\"orange\"/>");
  final File file=Archives.jarArchive(map,"test",OrangeBean.class);
  final Assembler assembler=new Assembler();
  final ConfigurationFactory factory=new ConfigurationFactory();
  final AppInfo appInfo=factory.configureApplication(file);
  final EjbJarInfo ejbJarInfo=appInfo.ejbJars.get(0);
  assertEquals("orange",ejbJarInfo.moduleName);
}

</code></pre>

<br>
<pre class="type-9 type-4 type-1 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
/** 
 * OPENEJB-1366
 * @throws Exception
 */
@Test public void testInvalidNames() throws Exception {
  final Map<String,String> map=new HashMap<String,String>();
  map.put("META-INF/ejb-jar.xml","<ejb-jar/>");
  final List<String> dirs=new ArrayList<String>();
  dirs.add("orangeDir");
  dirs.add("classes");
  dirs.add("test-classes");
  dirs.add("target");
  dirs.add("build");
  dirs.add("dist");
  dirs.add("bin");
  final File file=Archives.fileArchive(map,dirs,OrangeBean.class);
  final Assembler assembler=new Assembler();
  final ConfigurationFactory factory=new ConfigurationFactory();
  final AppInfo appInfo=factory.configureApplication(file);
  final EjbJarInfo ejbJarInfo=appInfo.ejbJars.get(0);
  assertEquals("orangeDir",ejbJarInfo.moduleName);
}

</code></pre>

<br>
<pre class="type-9 type-4 type-1 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testModuleName() throws Exception {
  final Map<String,String> map=new HashMap<String,String>();
  map.put("META-INF/ejb-jar.xml","<ejb-jar><module-name>orange</module-name></ejb-jar>");
  final File file=Archives.jarArchive(map,"test",OrangeBean.class);
  final Assembler assembler=new Assembler();
  final ConfigurationFactory factory=new ConfigurationFactory();
  final AppInfo appInfo=factory.configureApplication(file);
  final EjbJarInfo ejbJarInfo=appInfo.ejbJars.get(0);
  assertEquals("orange",ejbJarInfo.moduleName);
}

</code></pre>

<br>
<pre class="type-9 type-4 type-1 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testDefault() throws Exception {
  final Map<String,String> map=new HashMap<String,String>();
  map.put("META-INF/ejb-jar.xml","<ejb-jar/>");
  final File file=Archives.jarArchive(map,"test",OrangeBean.class);
  final Assembler assembler=new Assembler();
  final ConfigurationFactory factory=new ConfigurationFactory();
  final AppInfo appInfo=factory.configureApplication(file);
  final EjbJarInfo ejbJarInfo=appInfo.ejbJars.get(0);
  assertEquals(file.getName().substring(0,file.getName().length() - 4),ejbJarInfo.moduleName);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.openejb.resource.jdbc.ManagedConnectionBehaviorTest </h4><pre class="type-9 type-7 type-1 type-16 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void run() throws Exception {
  final GeronimoTransactionManager geronimoTransactionManager=new GeronimoTransactionManager((int)TimeUnit.MINUTES.toMillis(10));
  final TransactionManager mgr=new TransactionManagerWrapper(geronimoTransactionManager,"ManagedConnectionBehaviorTest",new GeronimoTransactionManagerFactory.GeronimoXAResourceWrapper());
  final MyDs myDs=new MyDs();
  final DataSource ds=new ManagedDataSource(myDs,geronimoTransactionManager,geronimoTransactionManager);
{
    final Connection connection=ds.getConnection();
    assertTrue(myDs.connections.isEmpty());
    connection.createBlob();
    assertFalse(myDs.connections.iterator().next().closed);
    connection.close();
    assertTrue(myDs.connections.iterator().next().closed);
    myDs.connections.clear();
  }
{
    mgr.begin();
    final Connection connection=ds.getConnection();
    assertTrue(myDs.connections.isEmpty());
    connection.createBlob();
    assertFalse(myDs.connections.iterator().next().closed);
    mgr.commit();
    assertTrue(myDs.connections.iterator().next().closed);
    assertTrue(myDs.connections.iterator().next().commit);
    assertFalse(myDs.connections.iterator().next().rollback);
    myDs.connections.clear();
  }
{
    mgr.begin();
    final Connection connection=ds.getConnection();
    assertTrue(myDs.connections.isEmpty());
    connection.createBlob();
    assertFalse(myDs.connections.iterator().next().closed);
    for (int i=0; i < 5; i++) {
      connection.createBlob();
    }
    assertEquals(1,myDs.connections.size());
    mgr.commit();
    assertTrue(myDs.connections.iterator().next().closed);
    assertTrue(myDs.connections.iterator().next().commit);
    assertFalse(myDs.connections.iterator().next().rollback);
    myDs.connections.clear();
  }
{
    mgr.begin();
    final Connection connection=ds.getConnection();
    assertTrue(myDs.connections.isEmpty());
    connection.createBlob();
    assertFalse(myDs.connections.iterator().next().closed);
    final Transaction previous=mgr.suspend();
    mgr.begin();
    final Connection connection2=ds.getConnection();
    connection2.createBlob();
    assertEquals(2,myDs.connections.size());
    mgr.commit();
    mgr.resume(previous);
    mgr.commit();
    final Iterator<MyConn> iterator=myDs.connections.iterator();
    final MyConn first=iterator.next();
    assertTrue(first.closed);
    assertTrue(first.commit);
    assertTrue(myDs.connections.iterator().next().commit);
    myDs.connections.clear();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.openejb.server.discovery.MulticastPulseAgentTest </h4><pre class="type-9 type-7 type-4 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies values related to public fields.
"></span><br>
@Test public void testBroadcastBadUri() throws Exception {
  if ("true".equals(System.getProperty("skipMulticastTests"))) {
    Logger.getLogger(this.getClass().getName()).warning("Skipping MulticastTest " + this.getClass().getName());
    return;
  }
  final DiscoveryListener original=agent.getDiscoveryListener();
  final CountDownLatch latch=new CountDownLatch(1);
  final DiscoveryListener listener=new DiscoveryListener(){
    @Override public void serviceAdded(    final URI service){
      latch.countDown();
      System.out.println("added = " + service);
    }
    @Override public void serviceRemoved(    final URI service){
      latch.countDown();
      System.out.println("removed = " + service);
    }
  }
;
  agent.setDiscoveryListener(listener);
  final String[] hosts=agent.getHosts().split(",");
  final String host=hosts[hosts.length - 1];
  boolean removed=agent.removeFromIgnore(host);
  org.junit.Assert.assertTrue("Host is already ignored",!removed);
  final Future<?> future=executor.submit(new Runnable(){
    @Override public void run(){
      try {
        final InetAddress ia=getAddress(MulticastPulseAgentTest.host);
        final byte[] bytes=(MulticastPulseAgent.CLIENT + forGroup + MulticastPulseAgent.BADURI+ host).getBytes(Charset.forName("UTF-8"));
        final DatagramPacket request=new DatagramPacket(bytes,bytes.length,new InetSocketAddress(ia,port));
        final MulticastSocket[] multicastSockets=MulticastPulseAgent.getSockets(MulticastPulseAgentTest.host,port);
        for (int i=0; i < 5; i++) {
          for (          final MulticastSocket socket : multicastSockets) {
            try {
              socket.send(request);
              Thread.sleep(100);
            }
 catch (            final Exception e) {
              System.out.println("Failed to broadcast bad URI on: " + socket.getInterface().getHostAddress());
              e.printStackTrace();
            }
          }
        }
      }
 catch (      final Exception e) {
        System.out.println("Failed to broadcast bad URI");
        e.printStackTrace();
      }
    }
  }
);
  final boolean await=latch.await(20,TimeUnit.SECONDS);
  removed=agent.removeFromIgnore(host);
  agent.setDiscoveryListener(original);
  org.junit.Assert.assertTrue("Failed to remove host",removed);
  org.junit.Assert.assertTrue("Failed to unlatch",await);
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
