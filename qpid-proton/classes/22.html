<h3 style="margin:0px">Class: org.apache.qpid.proton.engine.impl.TransportImplTest (32 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(18)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(15)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(15)</kbd></button>&nbsp;<button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(11)</kbd></button>&nbsp;<button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(11)</kbd></button>&nbsp;<button id="14"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('14')" data-toggle="tooltip" title="Verifies values related to public fields."><kbd id="tag-14"class="label-info"style="display: inline-block;font-size:7pt" >PublicFieldVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAttemptToInitiateSaslAfterProcessingBeginsCausesIllegalStateException(){
  _transport.process();
  try {
    _transport.sasl();
  }
 catch (  IllegalStateException ise) {
  }
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Verify that no Attach frame is emitted by the Transport should a Sender
 * be opened after the Close frame was sent.
 */
@Test public void testSenderAttachAfterCloseSent(){
  doLinkAttachAfterCloseSentTestImpl(false);
}

</code></pre>

<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testSetChannelMaxOutsideLegalUshortRangeThrowsIAE() throws Exception {
  Transport transport=Proton.transport();
  try {
    transport.setChannelMax(1 << 16);
    fail("Expected exception to be thrown");
  }
 catch (  IllegalArgumentException iae) {
  }
  try {
    transport.setChannelMax(-1);
    fail("Expected exception to be thrown");
  }
 catch (  IllegalArgumentException iae) {
  }
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOpenReceiverBeforeOpenConnection(){
  doOpenLinkBeforeOpenConnectionTestImpl(true);
}

</code></pre>

<pre class="type-1 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testTickLocalTimeout(){
  MockTransportImpl transport=new MockTransportImpl();
  transport.setIdleTimeout(4000);
  Connection connection=Proton.connection();
  transport.bind(connection);
  transport.handleFrame(TRANSPORT_FRAME_OPEN);
  connection.open();
  pumpMockTransport(transport);
  long deadline=transport.tick(0);
  assertEquals("Expected to be returned a deadline of 4000",4000,deadline);
  int framesWrittenBeforeTick=transport.writes.size();
  deadline=transport.tick(1000);
  assertEquals("When the deadline hasn't been reached tick() should return the previous deadline",4000,deadline);
  assertEquals("Reading data should never result in a frame being written",0,transport.writes.size() - framesWrittenBeforeTick);
  ByteBuffer data=ByteBuffer.wrap(new byte[]{'A','M','Q','P',0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x08,0x02,0x00,0x00,0x00});
  while (data.remaining() > 0) {
    int origLimit=data.limit();
    int amount=Math.min(transport.tail().remaining(),data.remaining());
    data.limit(data.position() + amount);
    transport.tail().put(data);
    data.limit(origLimit);
    transport.process();
  }
  framesWrittenBeforeTick=transport.writes.size();
  deadline=transport.tick(2000);
  assertEquals("Reading data data resets the deadline",6000,deadline);
  assertEquals("Reading data should never result in a frame being written",0,transport.writes.size() - framesWrittenBeforeTick);
  assertEquals("Reading data before the deadline should keep the connection open",EndpointState.ACTIVE,connection.getLocalState());
  framesWrittenBeforeTick=transport.writes.size();
  deadline=transport.tick(7000);
  assertEquals("Calling tick() after the deadline should result in the connection being closed",EndpointState.CLOSED,connection.getLocalState());
}

</code></pre>

<pre class="type-1 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testInput(){
  ByteBuffer buffer=_transport.getInputBuffer();
  buffer.put(HEADER);
  _transport.processInput().checkIsOk();
  assertNotNull(_transport.getInputBuffer());
}

</code></pre>

<pre class="type-1 type-4 type-2 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verify that no Transfer frame is emitted by the Transport should a Delivery
 * be sendable after the Close frame was sent.
 */
@Test public void testTransferAfterCloseSent(){
  MockTransportImpl transport=new MockTransportImpl();
  Connection connection=Proton.connection();
  transport.bind(connection);
  connection.open();
  Collector collector=Collector.Factory.create();
  connection.collect(collector);
  Session session=connection.session();
  session.open();
  String linkName="mySender";
  Sender sender=session.sender(linkName);
  sender.open();
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),3,transport.writes.size());
  assertTrue("Unexpected frame type",transport.writes.get(0) instanceof Open);
  assertTrue("Unexpected frame type",transport.writes.get(1) instanceof Begin);
  assertTrue("Unexpected frame type",transport.writes.get(2) instanceof Attach);
  transport.handleFrame(new TransportFrame(0,new Open(),null));
  Begin begin=new Begin();
  begin.setRemoteChannel(UnsignedShort.valueOf((short)0));
  transport.handleFrame(new TransportFrame(0,begin,null));
  Attach attach=new Attach();
  attach.setHandle(UnsignedInteger.ZERO);
  attach.setRole(Role.RECEIVER);
  attach.setName(linkName);
  attach.setInitialDeliveryCount(UnsignedInteger.ZERO);
  transport.handleFrame(new TransportFrame(0,attach,null));
  Flow flow=new Flow();
  flow.setHandle(UnsignedInteger.ZERO);
  flow.setDeliveryCount(UnsignedInteger.ZERO);
  flow.setNextIncomingId(UnsignedInteger.ONE);
  flow.setNextOutgoingId(UnsignedInteger.ZERO);
  flow.setIncomingWindow(UnsignedInteger.valueOf(1024));
  flow.setOutgoingWindow(UnsignedInteger.valueOf(1024));
  flow.setLinkCredit(UnsignedInteger.valueOf(10));
  transport.handleFrame(new TransportFrame(0,flow,null));
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),3,transport.writes.size());
  connection.close();
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),4,transport.writes.size());
  assertTrue("Unexpected frame type",transport.writes.get(3) instanceof Close);
  sendMessage(sender,"tag1","content1");
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),4,transport.writes.size());
}

</code></pre>

<pre class="type-1 type-4 type-2 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verify that no End frame is emitted by the Transport should a Session close
 * after the Close frame was sent.
 */
@Test public void testSessionEndAfterCloseSent(){
  MockTransportImpl transport=new MockTransportImpl();
  Connection connection=Proton.connection();
  transport.bind(connection);
  connection.open();
  Session session=connection.session();
  session.open();
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),2,transport.writes.size());
  assertTrue("Unexpected frame type",transport.writes.get(0) instanceof Open);
  assertTrue("Unexpected frame type",transport.writes.get(1) instanceof Begin);
  transport.handleFrame(new TransportFrame(0,new Open(),null));
  Begin begin=new Begin();
  begin.setRemoteChannel(UnsignedShort.valueOf((short)0));
  transport.handleFrame(new TransportFrame(0,begin,null));
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),2,transport.writes.size());
  connection.close();
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),3,transport.writes.size());
  assertTrue("Unexpected frame type",transport.writes.get(2) instanceof Close);
  session.close();
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),3,transport.writes.size());
}

</code></pre>

<pre class="type-5 type-1 type-4 type-9 type-2 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verify that no Disposition frame is emitted by the Transport should a Delivery
 * have disposition applied after the Close frame was sent.
 */
@Test public void testDispositionAfterCloseSent(){
  MockTransportImpl transport=new MockTransportImpl();
  Connection connection=Proton.connection();
  transport.bind(connection);
  connection.open();
  Session session=connection.session();
  session.open();
  String linkName="myReceiver";
  Receiver receiver=session.receiver(linkName);
  receiver.flow(5);
  receiver.open();
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),4,transport.writes.size());
  assertTrue("Unexpected frame type",transport.writes.get(0) instanceof Open);
  assertTrue("Unexpected frame type",transport.writes.get(1) instanceof Begin);
  assertTrue("Unexpected frame type",transport.writes.get(2) instanceof Attach);
  assertTrue("Unexpected frame type",transport.writes.get(3) instanceof Flow);
  Delivery delivery=receiver.current();
  assertNull("Should not yet have a delivery",delivery);
  transport.handleFrame(new TransportFrame(0,new Open(),null));
  Begin begin=new Begin();
  begin.setRemoteChannel(UnsignedShort.valueOf((short)0));
  begin.setNextOutgoingId(UnsignedInteger.ONE);
  begin.setIncomingWindow(UnsignedInteger.valueOf(1024));
  begin.setOutgoingWindow(UnsignedInteger.valueOf(1024));
  transport.handleFrame(new TransportFrame(0,begin,null));
  Attach attach=new Attach();
  attach.setHandle(UnsignedInteger.ZERO);
  attach.setRole(Role.SENDER);
  attach.setName(linkName);
  attach.setInitialDeliveryCount(UnsignedInteger.ZERO);
  transport.handleFrame(new TransportFrame(0,attach,null));
  String deliveryTag="tag1";
  String messageContent="content1";
  handleTransfer(transport,1,deliveryTag,messageContent);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),4,transport.writes.size());
  delivery=verifyDelivery(receiver,deliveryTag,messageContent);
  assertNotNull("Should now have a delivery",delivery);
  connection.close();
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),5,transport.writes.size());
  assertTrue("Unexpected frame type",transport.writes.get(4) instanceof Close);
  delivery.disposition(Released.getInstance());
  delivery.settle();
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),5,transport.writes.size());
}

</code></pre>

<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetGetChannelMax() throws Exception {
  Transport transport=Proton.transport();
  int channelMax=456;
  transport.setChannelMax(channelMax);
  assertEquals("Unesxpected value for channel-max",channelMax,transport.getChannelMax());
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * TODO it's not clear why empty input is specifically allowed in this case.
 */
@Test public void testEmptyInputWhenRemoteConnectionIsClosedUsingOldApi_isAllowed(){
  @SuppressWarnings("deprecation") ConnectionImpl connection=new ConnectionImpl();
  _transport.bind(connection);
  connection.setRemoteState(EndpointState.CLOSED);
  _transport.input(new byte[0],0,0);
}

</code></pre>

<pre class="type-1 type-4 type-2 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOpenSessionBeforeOpenConnection(){
  MockTransportImpl transport=new MockTransportImpl();
  Connection connection=Proton.connection();
  transport.bind(connection);
  Session session=connection.session();
  session.open();
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),0,transport.writes.size());
  connection.open();
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),2,transport.writes.size());
  assertTrue("Unexpected frame type",transport.writes.get(0) instanceof Open);
  assertTrue("Unexpected frame type",transport.writes.get(1) instanceof Begin);
}

</code></pre>

<pre class="type-1 type-4 type-2 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOutputTooBigToBeWrittenInOneGo(){
  int smallMaxFrameSize=512;
  _transport=new TransportImpl(smallMaxFrameSize);
  @SuppressWarnings("deprecation") Connection conn=new ConnectionImpl();
  _transport.bind(conn);
  conn.setHostname(stringOfLength("x",500));
  conn.open();
  conn.close();
  ByteBuffer buf=_transport.getOutputBuffer();
  assertEquals("Expecting buffer to be full",smallMaxFrameSize,buf.remaining());
  buf.position(buf.limit());
  _transport.outputConsumed();
  buf=_transport.getOutputBuffer();
  assertTrue("Expecting second buffer to have bytes",buf.remaining() > 0);
  assertTrue("Expecting second buffer to not be full",buf.remaining() < Transport.MIN_MAX_FRAME_SIZE);
}

</code></pre>

<pre class="type-1 type-4 type-2 type-14 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTickRemoteTimeout(){
  MockTransportImpl transport=new MockTransportImpl();
  Connection connection=Proton.connection();
  transport.bind(connection);
  int timeout=4000;
  Open open=new Open();
  open.setIdleTimeOut(new UnsignedInteger(4000));
  TransportFrame openFrame=new TransportFrame(CHANNEL_ID,open,null);
  transport.handleFrame(openFrame);
  pumpMockTransport(transport);
  long deadline=transport.tick(0);
  assertEquals("Expected to be returned a deadline of 2000",2000,deadline);
  deadline=transport.tick(1000);
  assertEquals("When the deadline hasn't been reached tick() should return the previous deadline",2000,deadline);
  assertEquals("When the deadline hasn't been reached tick() shouldn't write data",0,transport.writes.size());
  deadline=transport.tick(timeout / 2);
  assertEquals("When the deadline has been reached expected a new deadline to be returned 4000",4000,deadline);
  assertEquals("tick() should have written data",1,transport.writes.size());
  assertEquals("tick() should have written an empty frame",null,transport.writes.get(0));
  transport.writeFrame(CHANNEL_ID,new Begin(),null,null);
  while (transport.pending() > 0)   transport.pop(transport.head().remaining());
  int framesWrittenBeforeTick=transport.writes.size();
  deadline=transport.tick(3000);
  assertEquals("Writing data resets the deadline",5000,deadline);
  assertEquals("When the deadline is reset tick() shouldn't write an empty frame",0,transport.writes.size() - framesWrittenBeforeTick);
  transport.writeFrame(CHANNEL_ID,new Attach(),null,null);
  assertTrue(transport.pending() > 0);
  framesWrittenBeforeTick=transport.writes.size();
  deadline=transport.tick(4000);
  assertEquals("Having pending data does not reset the deadline",5000,deadline);
  assertEquals("Having pending data prevents tick() from sending an empty frame",0,transport.writes.size() - framesWrittenBeforeTick);
}

</code></pre>

<pre class="type-1 type-4 type-2 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verify that no Flow frame is emitted by the Transport should a Receiver
 * have credit added after the Close frame was sent.
 */
@Test public void testReceiverFlowAfterCloseSent(){
  MockTransportImpl transport=new MockTransportImpl();
  Connection connection=Proton.connection();
  transport.bind(connection);
  connection.open();
  Session session=connection.session();
  session.open();
  String linkName="myReceiver";
  Receiver receiver=session.receiver(linkName);
  receiver.open();
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),3,transport.writes.size());
  assertTrue("Unexpected frame type",transport.writes.get(0) instanceof Open);
  assertTrue("Unexpected frame type",transport.writes.get(1) instanceof Begin);
  assertTrue("Unexpected frame type",transport.writes.get(2) instanceof Attach);
  transport.handleFrame(new TransportFrame(0,new Open(),null));
  Begin begin=new Begin();
  begin.setRemoteChannel(UnsignedShort.valueOf((short)0));
  transport.handleFrame(new TransportFrame(0,begin,null));
  Attach attach=new Attach();
  attach.setHandle(UnsignedInteger.ZERO);
  attach.setRole(Role.RECEIVER);
  attach.setName(linkName);
  attach.setInitialDeliveryCount(UnsignedInteger.ZERO);
  transport.handleFrame(new TransportFrame(0,attach,null));
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),3,transport.writes.size());
  connection.close();
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),4,transport.writes.size());
  assertTrue("Unexpected frame type",transport.writes.get(3) instanceof Close);
  receiver.flow(1);
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),4,transport.writes.size());
}

</code></pre>

<pre class="type-1 type-4 type-2 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReceiverFlowBeforeOpenConnection(){
  MockTransportImpl transport=new MockTransportImpl();
  Connection connection=Proton.connection();
  transport.bind(connection);
  Session session=connection.session();
  session.open();
  Receiver reciever=session.receiver("myReceiver");
  reciever.flow(5);
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),0,transport.writes.size());
  connection.open();
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),2,transport.writes.size());
  assertTrue("Unexpected frame type",transport.writes.get(0) instanceof Open);
  assertTrue("Unexpected frame type",transport.writes.get(1) instanceof Begin);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProcessIsIdempotent(){
  _transport.process();
  _transport.process();
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests the end-of-stream behaviour specified by {@link Transport#input(byte[],int,int)}.
 */
@Test public void testEmptyInputBeforeBindUsingOldApi_causesTransportException(){
  _expectedException.expect(TransportException.class);
  _expectedException.expectMessage("Unexpected EOS when remote connection not closed: connection aborted");
  _transport.input(new byte[0],0,0);
}

</code></pre>

<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOutupt(){
{
    final ByteBuffer outputBuffer=_transport.getOutputBuffer();
    assertEquals(HEADER.length,outputBuffer.remaining());
    byte[] outputBytes=new byte[HEADER.length];
    outputBuffer.get(outputBytes);
    assertArrayEquals(HEADER,outputBytes);
    _transport.outputConsumed();
  }
{
    final ByteBuffer outputBuffer=_transport.getOutputBuffer();
    assertEquals(0,outputBuffer.remaining());
    _transport.outputConsumed();
  }
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testChannelMaxDefault() throws Exception {
  Transport transport=Proton.transport();
  assertEquals("Unesxpected value for channel-max",65535,transport.getChannelMax());
}

</code></pre>

<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testTransportInitiallyHandlesFrames(){
  assertTrue(_transport.isHandlingFrames());
}

</code></pre>

<pre class="type-1 type-4 type-2 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSenderSendBeforeOpenConnection(){
  MockTransportImpl transport=new MockTransportImpl();
  Connection connection=Proton.connection();
  transport.bind(connection);
  Collector collector=Collector.Factory.create();
  connection.collect(collector);
  Session session=connection.session();
  session.open();
  String linkName="mySender";
  Sender sender=session.sender(linkName);
  sender.open();
  sendMessage(sender,"tag1","content1");
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),0,transport.writes.size());
  connection.open();
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),3,transport.writes.size());
  assertTrue("Unexpected frame type",transport.writes.get(0) instanceof Open);
  assertTrue("Unexpected frame type",transport.writes.get(1) instanceof Begin);
  assertTrue("Unexpected frame type",transport.writes.get(2) instanceof Attach);
  transport.handleFrame(new TransportFrame(0,new Open(),null));
  Begin begin=new Begin();
  begin.setRemoteChannel(UnsignedShort.valueOf((short)0));
  transport.handleFrame(new TransportFrame(0,begin,null));
  Attach attach=new Attach();
  attach.setHandle(UnsignedInteger.ZERO);
  attach.setRole(Role.RECEIVER);
  attach.setName(linkName);
  attach.setInitialDeliveryCount(UnsignedInteger.ZERO);
  transport.handleFrame(new TransportFrame(0,attach,null));
  Flow flow=new Flow();
  flow.setHandle(UnsignedInteger.ZERO);
  flow.setDeliveryCount(UnsignedInteger.ZERO);
  flow.setNextIncomingId(UnsignedInteger.ONE);
  flow.setNextOutgoingId(UnsignedInteger.ZERO);
  flow.setIncomingWindow(UnsignedInteger.valueOf(1024));
  flow.setOutgoingWindow(UnsignedInteger.valueOf(1024));
  flow.setLinkCredit(UnsignedInteger.valueOf(10));
  transport.handleFrame(new TransportFrame(0,flow,null));
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),3,transport.writes.size());
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),4,transport.writes.size());
  assertTrue("Unexpected frame type",transport.writes.get(3) instanceof Transfer);
}

</code></pre>

<pre class="type-1 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testUnboundTransport_stopsHandlingFrames(){
  assertTrue(_transport.isHandlingFrames());
  _transport.handleFrame(TRANSPORT_FRAME_OPEN);
  assertFalse(_transport.isHandlingFrames());
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEmitFlowEventOnSend(){
  doEmitFlowOnSendTestImpl(true);
}

</code></pre>

<pre class="type-1 type-4 type-2 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verify that no Flow frame is emitted by the Transport should a Sender
 * have credit drained added after the Close frame was sent.
 */
@Test public void testSenderFlowAfterCloseSent(){
  MockTransportImpl transport=new MockTransportImpl();
  Connection connection=Proton.connection();
  transport.bind(connection);
  connection.open();
  Collector collector=Collector.Factory.create();
  connection.collect(collector);
  Session session=connection.session();
  session.open();
  String linkName="mySender";
  Sender sender=session.sender(linkName);
  sender.open();
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),3,transport.writes.size());
  assertTrue("Unexpected frame type",transport.writes.get(0) instanceof Open);
  assertTrue("Unexpected frame type",transport.writes.get(1) instanceof Begin);
  assertTrue("Unexpected frame type",transport.writes.get(2) instanceof Attach);
  assertFalse("Should not be in drain yet",sender.getDrain());
  transport.handleFrame(new TransportFrame(0,new Open(),null));
  Begin begin=new Begin();
  begin.setRemoteChannel(UnsignedShort.valueOf((short)0));
  transport.handleFrame(new TransportFrame(0,begin,null));
  Attach attach=new Attach();
  attach.setHandle(UnsignedInteger.ZERO);
  attach.setRole(Role.RECEIVER);
  attach.setName(linkName);
  attach.setInitialDeliveryCount(UnsignedInteger.ZERO);
  transport.handleFrame(new TransportFrame(0,attach,null));
  int credit=10;
  Flow flow=new Flow();
  flow.setHandle(UnsignedInteger.ZERO);
  flow.setDeliveryCount(UnsignedInteger.ZERO);
  flow.setNextIncomingId(UnsignedInteger.ONE);
  flow.setNextOutgoingId(UnsignedInteger.ZERO);
  flow.setIncomingWindow(UnsignedInteger.valueOf(1024));
  flow.setOutgoingWindow(UnsignedInteger.valueOf(1024));
  flow.setDrain(true);
  flow.setLinkCredit(UnsignedInteger.valueOf(credit));
  transport.handleFrame(new TransportFrame(0,flow,null));
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),3,transport.writes.size());
  assertTrue("Should not be in drain",sender.getDrain());
  assertEquals("Should have credit",credit,sender.getCredit());
  connection.close();
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),4,transport.writes.size());
  assertTrue("Unexpected frame type",transport.writes.get(3) instanceof Close);
  int drained=sender.drained();
  assertEquals("Should have drained all credit",credit,drained);
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),4,transport.writes.size());
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInitialProcessIsNoop(){
  _transport.process();
}

</code></pre>

<pre class="type-1 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testBoundTransport_continuesToHandleFrames(){
  @SuppressWarnings("deprecation") Connection connection=new ConnectionImpl();
  assertTrue(_transport.isHandlingFrames());
  _transport.bind(connection);
  assertTrue(_transport.isHandlingFrames());
  _transport.handleFrame(TRANSPORT_FRAME_OPEN);
  assertTrue(_transport.isHandlingFrames());
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Empty input is always allowed by {@link Transport#getInputBuffer()} and{@link Transport#processInput()}, in contrast to the old API.
 * @see TransportImplTest#testEmptyInputBeforeBindUsingOldApi_causesTransportException()
 */
@Test public void testEmptyInput_isAllowed(){
  _transport.getInputBuffer();
  _transport.processInput().checkIsOk();
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * No frames should be written until the Connection object is
 * opened, at which point the Open, Begin, and Attach frames
 * should be pipelined together.
 */
@Test public void testOpenSenderBeforeOpenConnection(){
  doOpenLinkBeforeOpenConnectionTestImpl(false);
}

</code></pre>

<pre class="type-1 type-4 type-2 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verify that no Begin frame is emitted by the Transport should a Session open
 * after the Close frame was sent.
 */
@Test public void testSessionBeginAfterCloseSent(){
  MockTransportImpl transport=new MockTransportImpl();
  Connection connection=Proton.connection();
  transport.bind(connection);
  connection.open();
  Session session=connection.session();
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),1,transport.writes.size());
  assertTrue("Unexpected frame type",transport.writes.get(0) instanceof Open);
  transport.handleFrame(new TransportFrame(0,new Open(),null));
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),1,transport.writes.size());
  connection.close();
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),2,transport.writes.size());
  assertTrue("Unexpected frame type",transport.writes.get(1) instanceof Close);
  session.open();
  pumpMockTransport(transport);
  assertEquals("Unexpected frames written: " + getFrameTypesWritten(transport),2,transport.writes.size());
}

</code></pre>

<pre class="type-1 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testHandleFrameWhenNotHandling_throwsIllegalStateException(){
  assertTrue(_transport.isHandlingFrames());
  _transport.handleFrame(TRANSPORT_FRAME_OPEN);
  assertFalse(_transport.isHandlingFrames());
  _expectedException.expect(IllegalStateException.class);
  _transport.handleFrame(TRANSPORT_FRAME_BEGIN);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Verify that no Attach frame is emitted by the Transport should a Receiver
 * be opened after the Close frame was sent.
 */
@Test public void testReceiverAttachAfterCloseSent(){
  doLinkAttachAfterCloseSentTestImpl(true);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
