<h3 style="margin:0px">Class: org.apache.sentry.provider.db.service.thrift.TestSentryServiceImportExport (10 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(8)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Allocates resources before the execution of the test cases"><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >TestInitializer&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testImportExportPolicy6() throws Exception {
  runTestAsSubject(new TestOperation(){
    @Override public void runTestAsSubject() throws Exception {
      Map<String,Map<String,Set<String>>> policyFileMappingData1=Maps.newHashMap();
      Map<String,Set<String>> groupRolesMap1=Maps.newHashMap();
      groupRolesMap1.put("group1",Sets.newHashSet("role1","role2"));
      groupRolesMap1.put("group2",Sets.newHashSet("role1","role2"));
      groupRolesMap1.put("group3",Sets.newHashSet("role1","role2"));
      Map<String,Set<String>> rolePrivilegesMap1=Maps.newHashMap();
      rolePrivilegesMap1.put("role1",Sets.newHashSet(PRIVILIEGE1,PRIVILIEGE2,PRIVILIEGE3,PRIVILIEGE4,PRIVILIEGE5));
      rolePrivilegesMap1.put("role2",Sets.newHashSet(PRIVILIEGE1,PRIVILIEGE2,PRIVILIEGE3,PRIVILIEGE4,PRIVILIEGE5));
      policyFileMappingData1.put(PolicyFileConstants.GROUPS,groupRolesMap1);
      policyFileMappingData1.put(PolicyFileConstants.ROLES,rolePrivilegesMap1);
      client.importPolicy(policyFileMappingData1,ADMIN_USER,true);
      Map<String,Map<String,Set<String>>> policyFileMappingData2=Maps.newHashMap();
      Map<String,Set<String>> groupRolesMap2=Maps.newHashMap();
      groupRolesMap2.put("group1",Sets.newHashSet("role2","role3"));
      groupRolesMap2.put("group2",Sets.newHashSet("role2","role3"));
      groupRolesMap2.put("group3",Sets.newHashSet("role2","role3"));
      Map<String,Set<String>> rolePrivilegesMap2=Maps.newHashMap();
      rolePrivilegesMap2.put("role2",Sets.newHashSet(PRIVILIEGE4,PRIVILIEGE5,PRIVILIEGE6,PRIVILIEGE7,PRIVILIEGE8));
      rolePrivilegesMap2.put("role3",Sets.newHashSet(PRIVILIEGE4,PRIVILIEGE5,PRIVILIEGE6,PRIVILIEGE7,PRIVILIEGE8));
      policyFileMappingData2.put(PolicyFileConstants.GROUPS,groupRolesMap2);
      policyFileMappingData2.put(PolicyFileConstants.ROLES,rolePrivilegesMap2);
      client.importPolicy(policyFileMappingData2,ADMIN_USER,true);
      Map<String,Map<String,Set<String>>> exceptedMappingData=Maps.newHashMap();
      Map<String,Set<String>> exceptedRolesMap=Maps.newHashMap();
      exceptedRolesMap.put("group1",Sets.newHashSet("role1","role2","role3"));
      exceptedRolesMap.put("group2",Sets.newHashSet("role1","role2","role3"));
      exceptedRolesMap.put("group3",Sets.newHashSet("role1","role2","role3"));
      Map<String,Set<String>> exceptedPrivilegesMap=Maps.newHashMap();
      exceptedPrivilegesMap.put("role1",Sets.newHashSet(PRIVILIEGE1,PRIVILIEGE2,PRIVILIEGE3,PRIVILIEGE4,PRIVILIEGE5));
      exceptedPrivilegesMap.put("role2",Sets.newHashSet(PRIVILIEGE4,PRIVILIEGE5,PRIVILIEGE6,PRIVILIEGE7,PRIVILIEGE8));
      exceptedPrivilegesMap.put("role3",Sets.newHashSet(PRIVILIEGE4,PRIVILIEGE5,PRIVILIEGE6,PRIVILIEGE7,PRIVILIEGE8));
      exceptedMappingData.put(PolicyFileConstants.GROUPS,exceptedRolesMap);
      exceptedMappingData.put(PolicyFileConstants.ROLES,exceptedPrivilegesMap);
      Map<String,Map<String,Set<String>>> sentryMappingData=client.exportPolicy(ADMIN_USER);
      validateSentryMappingData(sentryMappingData,exceptedMappingData);
    }
  }
);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testImportExportPolicy8() throws Exception {
  runTestAsSubject(new TestOperation(){
    @Override public void runTestAsSubject() throws Exception {
      String testPrivilege1="server=server1->db=db1->table=tbl1->action=select->grantoption=true";
      String testPrivilege2="server=server1->db=db1->table=tbl1->action=insert->grantoption=true";
      String testPrivilege3="server=server1->db=db1->table=tbl1->action=all->grantoption=true";
      String testPrivilege4="server=server1->db=db1->table=tbl2->action=select->grantoption=true";
      String testPrivilege5="server=server1->db=db1->table=tbl2->action=insert->grantoption=true";
      String testPrivilege6="server=server1->db=db1->table=tbl2->action=*->grantoption=true";
      Map<String,Map<String,Set<String>>> policyFileMappingData1=Maps.newHashMap();
      Map<String,Set<String>> groupRolesMap1=Maps.newHashMap();
      groupRolesMap1.put("group1",Sets.newHashSet("role1","role2"));
      Map<String,Set<String>> rolePrivilegesMap1=Maps.newHashMap();
      rolePrivilegesMap1.put("role1",Sets.newHashSet(testPrivilege1,testPrivilege2));
      rolePrivilegesMap1.put("role2",Sets.newHashSet(testPrivilege4,testPrivilege5));
      policyFileMappingData1.put(PolicyFileConstants.GROUPS,groupRolesMap1);
      policyFileMappingData1.put(PolicyFileConstants.ROLES,rolePrivilegesMap1);
      client.importPolicy(policyFileMappingData1,ADMIN_USER,false);
      Map<String,Map<String,Set<String>>> policyFileMappingData2=Maps.newHashMap();
      Map<String,Set<String>> groupRolesMap2=Maps.newHashMap();
      groupRolesMap2.put("group1",Sets.newHashSet("role1","role2"));
      Map<String,Set<String>> rolePrivilegesMap2=Maps.newHashMap();
      rolePrivilegesMap2.put("role1",Sets.newHashSet(testPrivilege3));
      rolePrivilegesMap2.put("role2",Sets.newHashSet(testPrivilege6));
      policyFileMappingData2.put(PolicyFileConstants.GROUPS,groupRolesMap2);
      policyFileMappingData2.put(PolicyFileConstants.ROLES,rolePrivilegesMap2);
      client.importPolicy(policyFileMappingData2,ADMIN_USER,false);
      Map<String,Map<String,Set<String>>> exceptedMappingData=policyFileMappingData2;
      Map<String,Map<String,Set<String>>> sentryMappingData=client.exportPolicy(ADMIN_USER);
      validateSentryMappingData(sentryMappingData,exceptedMappingData);
    }
  }
);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testImportExportPolicy2() throws Exception {
  runTestAsSubject(new TestOperation(){
    @Override public void runTestAsSubject() throws Exception {
      Map<String,Map<String,Set<String>>> policyFileMappingData1=Maps.newHashMap();
      Map<String,Set<String>> groupRolesMap1=Maps.newHashMap();
      groupRolesMap1.put("group1",Sets.newHashSet("role1"));
      Map<String,Set<String>> rolePrivilegesMap1=Maps.newHashMap();
      rolePrivilegesMap1.put("role1",Sets.newHashSet(PRIVILIEGE1,PRIVILIEGE2,PRIVILIEGE3,PRIVILIEGE4));
      policyFileMappingData1.put(PolicyFileConstants.GROUPS,groupRolesMap1);
      policyFileMappingData1.put(PolicyFileConstants.ROLES,rolePrivilegesMap1);
      client.importPolicy(policyFileMappingData1,ADMIN_USER,false);
      Map<String,Map<String,Set<String>>> policyFileMappingData2=Maps.newHashMap();
      Map<String,Set<String>> groupRolesMap2=Maps.newHashMap();
      groupRolesMap2.put("group2",Sets.newHashSet("role2","role3"));
      groupRolesMap2.put("group3",Sets.newHashSet("role2","role3"));
      Map<String,Set<String>> rolePrivilegesMap2=Maps.newHashMap();
      rolePrivilegesMap2.put("role2",Sets.newHashSet(PRIVILIEGE5,PRIVILIEGE6,PRIVILIEGE7,PRIVILIEGE8));
      rolePrivilegesMap2.put("role3",Sets.newHashSet(PRIVILIEGE5,PRIVILIEGE6,PRIVILIEGE7,PRIVILIEGE8));
      policyFileMappingData2.put(PolicyFileConstants.GROUPS,groupRolesMap2);
      policyFileMappingData2.put(PolicyFileConstants.ROLES,rolePrivilegesMap2);
      client.importPolicy(policyFileMappingData2,ADMIN_USER,false);
      Map<String,Map<String,Set<String>>> exceptedMappingData=Maps.newHashMap();
      exceptedMappingData.put(PolicyFileConstants.GROUPS,policyFileMappingData1.get(PolicyFileConstants.GROUPS));
      exceptedMappingData.get(PolicyFileConstants.GROUPS).putAll(policyFileMappingData2.get(PolicyFileConstants.GROUPS));
      exceptedMappingData.put(PolicyFileConstants.ROLES,policyFileMappingData1.get(PolicyFileConstants.ROLES));
      exceptedMappingData.get(PolicyFileConstants.ROLES).putAll(policyFileMappingData2.get(PolicyFileConstants.ROLES));
      Map<String,Map<String,Set<String>>> sentryMappingData=client.exportPolicy(ADMIN_USER);
      validateSentryMappingData(sentryMappingData,exceptedMappingData);
    }
  }
);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testImportExportPolicy4() throws Exception {
  runTestAsSubject(new TestOperation(){
    @Override public void runTestAsSubject() throws Exception {
      Map<String,Map<String,Set<String>>> policyFileMappingData=Maps.newHashMap();
      Map<String,Set<String>> groupRolesMap=Maps.newHashMap();
      Set<String> roles=Sets.newHashSet("role1","role2");
      groupRolesMap.put("group1",roles);
      Map<String,Set<String>> rolePrivilegesMap=Maps.newHashMap();
      policyFileMappingData.put(PolicyFileConstants.GROUPS,groupRolesMap);
      policyFileMappingData.put(PolicyFileConstants.ROLES,rolePrivilegesMap);
      client.importPolicy(policyFileMappingData,ADMIN_USER,false);
      Map<String,Map<String,Set<String>>> sentryMappingData=client.exportPolicy(ADMIN_USER);
      validateSentryMappingData(sentryMappingData,policyFileMappingData);
    }
  }
);
}

</code></pre>

<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void preparePolicyFile() throws Exception {
  super.before();
  String requestorUserName=ADMIN_USER;
  Set<String> requestorUserGroupNames=Sets.newHashSet(ADMIN_GROUP);
  setLocalGroupMapping(requestorUserName,requestorUserGroupNames);
  writePolicyFile();
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testImportExportPolicy7() throws Exception {
  runTestAsSubject(new TestOperation(){
    @Override public void runTestAsSubject() throws Exception {
      String testPrivilege1="server=server1->db=db1->table=tbl1->action=select->grantoption=true";
      String testPrivilege2="server=server1->db=db1->table=tbl1->action=insert->grantoption=false";
      String testPrivilege3="server=server1->db=db1->table=tbl1->action=all->grantoption=true";
      String testPrivilege4="server=server1->db=db1->table=tbl1->action=insert->grantoption=true";
      String testPrivilege5="server=server1->db=db1->table=tbl2->action=select->grantoption=true";
      String testPrivilege6="server=server1->db=db1->table=tbl2->action=insert->grantoption=false";
      String testPrivilege7="server=server1->db=db1->table=tbl2->action=*->grantoption=true";
      String testPrivilege8="server=server1->db=db1->table=tbl2->action=insert->grantoption=true";
      Map<String,Map<String,Set<String>>> policyFileMappingData1=Maps.newHashMap();
      Map<String,Set<String>> groupRolesMap1=Maps.newHashMap();
      groupRolesMap1.put("group1",Sets.newHashSet("role1","role2"));
      Map<String,Set<String>> rolePrivilegesMap1=Maps.newHashMap();
      rolePrivilegesMap1.put("role1",Sets.newHashSet(testPrivilege1,testPrivilege2,testPrivilege3,testPrivilege4));
      rolePrivilegesMap1.put("role2",Sets.newHashSet(testPrivilege5,testPrivilege6,testPrivilege7,testPrivilege8));
      policyFileMappingData1.put(PolicyFileConstants.GROUPS,groupRolesMap1);
      policyFileMappingData1.put(PolicyFileConstants.ROLES,rolePrivilegesMap1);
      client.importPolicy(policyFileMappingData1,ADMIN_USER,true);
      Map<String,Map<String,Set<String>>> exceptedMappingData=Maps.newHashMap();
      Map<String,Set<String>> exceptedRolesMap=Maps.newHashMap();
      exceptedRolesMap.put("group1",Sets.newHashSet("role1","role2"));
      Map<String,Set<String>> exceptedPrivilegesMap=Maps.newHashMap();
      exceptedPrivilegesMap.put("role1",Sets.newHashSet(testPrivilege2,testPrivilege3));
      exceptedPrivilegesMap.put("role2",Sets.newHashSet(testPrivilege6,testPrivilege7));
      exceptedMappingData.put(PolicyFileConstants.GROUPS,exceptedRolesMap);
      exceptedMappingData.put(PolicyFileConstants.ROLES,exceptedPrivilegesMap);
      Map<String,Map<String,Set<String>>> sentryMappingData=client.exportPolicy(ADMIN_USER);
      validateSentryMappingData(sentryMappingData,exceptedMappingData);
    }
  }
);
}

</code></pre>

<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testImportExportPolicy9() throws Exception {
  runTestAsSubject(new TestOperation(){
    @Override public void runTestAsSubject() throws Exception {
      Map<String,Map<String,Set<String>>> policyFileMappingData1=Maps.newHashMap();
      Map<String,Set<String>> groupRolesMap1=Maps.newHashMap();
      Map<String,Set<String>> rolePrivilegesMap1=Maps.newHashMap();
      policyFileMappingData1.put(PolicyFileConstants.GROUPS,groupRolesMap1);
      policyFileMappingData1.put(PolicyFileConstants.ROLES,rolePrivilegesMap1);
      try {
        client.importPolicy(policyFileMappingData1,"no-admin-user",false);
        fail("non-admin can't do the import.");
      }
 catch (      Exception e) {
      }
      try {
        client.exportPolicy("no-admin-user");
        fail("non-admin can't do the export.");
      }
 catch (      Exception e) {
      }
    }
  }
);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testImportExportPolicy1() throws Exception {
  runTestAsSubject(new TestOperation(){
    @Override public void runTestAsSubject() throws Exception {
      Map<String,Map<String,Set<String>>> policyFileMappingData=Maps.newHashMap();
      Map<String,Set<String>> groupRolesMap=Maps.newHashMap();
      Set<String> roles=Sets.newHashSet("role1","role2","role3");
      groupRolesMap.put("group1",roles);
      groupRolesMap.put("group2",roles);
      groupRolesMap.put("group3",roles);
      Map<String,Set<String>> rolePrivilegesMap=Maps.newHashMap();
      for (      String roleName : roles) {
        rolePrivilegesMap.put(roleName,Sets.newHashSet(PRIVILIEGE1,PRIVILIEGE2,PRIVILIEGE3,PRIVILIEGE4,PRIVILIEGE5,PRIVILIEGE6,PRIVILIEGE7,PRIVILIEGE8));
      }
      policyFileMappingData.put(PolicyFileConstants.GROUPS,groupRolesMap);
      policyFileMappingData.put(PolicyFileConstants.ROLES,rolePrivilegesMap);
      client.importPolicy(policyFileMappingData,ADMIN_USER,false);
      Map<String,Map<String,Set<String>>> sentryMappingData=client.exportPolicy(ADMIN_USER);
      validateSentryMappingData(sentryMappingData,policyFileMappingData);
    }
  }
);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testImportExportPolicy3() throws Exception {
  runTestAsSubject(new TestOperation(){
    @Override public void runTestAsSubject() throws Exception {
      Map<String,Map<String,Set<String>>> policyFileMappingData1=Maps.newHashMap();
      Map<String,Set<String>> groupRolesMap1=Maps.newHashMap();
      groupRolesMap1.put("group1",Sets.newHashSet("role1","role2"));
      groupRolesMap1.put("group2",Sets.newHashSet("role1","role2"));
      groupRolesMap1.put("group3",Sets.newHashSet("role1","role2"));
      Map<String,Set<String>> rolePrivilegesMap1=Maps.newHashMap();
      rolePrivilegesMap1.put("role1",Sets.newHashSet(PRIVILIEGE1,PRIVILIEGE2,PRIVILIEGE3,PRIVILIEGE4,PRIVILIEGE5));
      rolePrivilegesMap1.put("role2",Sets.newHashSet(PRIVILIEGE1,PRIVILIEGE2,PRIVILIEGE3,PRIVILIEGE4,PRIVILIEGE5));
      policyFileMappingData1.put(PolicyFileConstants.GROUPS,groupRolesMap1);
      policyFileMappingData1.put(PolicyFileConstants.ROLES,rolePrivilegesMap1);
      client.importPolicy(policyFileMappingData1,ADMIN_USER,false);
      Map<String,Map<String,Set<String>>> policyFileMappingData2=Maps.newHashMap();
      Map<String,Set<String>> groupRolesMap2=Maps.newHashMap();
      groupRolesMap2.put("group1",Sets.newHashSet("role2","role3"));
      groupRolesMap2.put("group2",Sets.newHashSet("role2","role3"));
      groupRolesMap2.put("group3",Sets.newHashSet("role2","role3"));
      Map<String,Set<String>> rolePrivilegesMap2=Maps.newHashMap();
      rolePrivilegesMap2.put("role2",Sets.newHashSet(PRIVILIEGE4,PRIVILIEGE5,PRIVILIEGE6,PRIVILIEGE7,PRIVILIEGE8));
      rolePrivilegesMap2.put("role3",Sets.newHashSet(PRIVILIEGE4,PRIVILIEGE5,PRIVILIEGE6,PRIVILIEGE7,PRIVILIEGE8));
      policyFileMappingData2.put(PolicyFileConstants.GROUPS,groupRolesMap2);
      policyFileMappingData2.put(PolicyFileConstants.ROLES,rolePrivilegesMap2);
      client.importPolicy(policyFileMappingData2,ADMIN_USER,false);
      Map<String,Map<String,Set<String>>> exceptedMappingData=Maps.newHashMap();
      Map<String,Set<String>> exceptedRolesMap=Maps.newHashMap();
      exceptedRolesMap.put("group1",Sets.newHashSet("role1","role2","role3"));
      exceptedRolesMap.put("group2",Sets.newHashSet("role1","role2","role3"));
      exceptedRolesMap.put("group3",Sets.newHashSet("role1","role2","role3"));
      Map<String,Set<String>> exceptedPrivilegesMap=Maps.newHashMap();
      exceptedPrivilegesMap.put("role1",Sets.newHashSet(PRIVILIEGE1,PRIVILIEGE2,PRIVILIEGE3,PRIVILIEGE4,PRIVILIEGE5));
      exceptedPrivilegesMap.put("role2",Sets.newHashSet(PRIVILIEGE1,PRIVILIEGE2,PRIVILIEGE3,PRIVILIEGE4,PRIVILIEGE5,PRIVILIEGE6,PRIVILIEGE7,PRIVILIEGE8));
      exceptedPrivilegesMap.put("role3",Sets.newHashSet(PRIVILIEGE4,PRIVILIEGE5,PRIVILIEGE6,PRIVILIEGE7,PRIVILIEGE8));
      exceptedMappingData.put(PolicyFileConstants.GROUPS,exceptedRolesMap);
      exceptedMappingData.put(PolicyFileConstants.ROLES,exceptedPrivilegesMap);
      Map<String,Map<String,Set<String>>> sentryMappingData=client.exportPolicy(ADMIN_USER);
      validateSentryMappingData(sentryMappingData,exceptedMappingData);
    }
  }
);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testImportExportPolicy5() throws Exception {
  runTestAsSubject(new TestOperation(){
    @Override public void runTestAsSubject() throws Exception {
      Map<String,Map<String,Set<String>>> policyFileMappingData1=Maps.newHashMap();
      Map<String,Set<String>> groupRolesMap1=Maps.newHashMap();
      groupRolesMap1.put("group1",Sets.newHashSet("role1"));
      Map<String,Set<String>> rolePrivilegesMap1=Maps.newHashMap();
      rolePrivilegesMap1.put("role1",Sets.newHashSet(PRIVILIEGE1));
      policyFileMappingData1.put(PolicyFileConstants.GROUPS,groupRolesMap1);
      policyFileMappingData1.put(PolicyFileConstants.ROLES,rolePrivilegesMap1);
      client.importPolicy(policyFileMappingData1,ADMIN_USER,true);
      Map<String,Map<String,Set<String>>> policyFileMappingData2=Maps.newHashMap();
      Map<String,Set<String>> groupRolesMap2=Maps.newHashMap();
      groupRolesMap2.put("group2",Sets.newHashSet("role2","role3"));
      groupRolesMap2.put("group3",Sets.newHashSet("role2","role3"));
      Map<String,Set<String>> rolePrivilegesMap2=Maps.newHashMap();
      rolePrivilegesMap2.put("role2",Sets.newHashSet(PRIVILIEGE2));
      rolePrivilegesMap2.put("role3",Sets.newHashSet(PRIVILIEGE2));
      policyFileMappingData2.put(PolicyFileConstants.GROUPS,groupRolesMap2);
      policyFileMappingData2.put(PolicyFileConstants.ROLES,rolePrivilegesMap2);
      client.importPolicy(policyFileMappingData2,ADMIN_USER,true);
      Map<String,Map<String,Set<String>>> exceptedMappingData=Maps.newHashMap();
      Map<String,Set<String>> exceptedRolesMap=Maps.newHashMap();
      exceptedRolesMap.put("group1",Sets.newHashSet("role1"));
      exceptedRolesMap.put("group2",Sets.newHashSet("role2","role3"));
      exceptedRolesMap.put("group3",Sets.newHashSet("role2","role3"));
      Map<String,Set<String>> exceptedPrivilegesMap=Maps.newHashMap();
      exceptedPrivilegesMap.put("role1",Sets.newHashSet(PRIVILIEGE1));
      exceptedPrivilegesMap.put("role2",Sets.newHashSet(PRIVILIEGE2));
      exceptedPrivilegesMap.put("role3",Sets.newHashSet(PRIVILIEGE2));
      exceptedMappingData.put(PolicyFileConstants.GROUPS,exceptedRolesMap);
      exceptedMappingData.put(PolicyFileConstants.ROLES,exceptedPrivilegesMap);
      Map<String,Map<String,Set<String>>> sentryMappingData=client.exportPolicy(ADMIN_USER);
      validateSentryMappingData(sentryMappingData,exceptedMappingData);
    }
  }
);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
