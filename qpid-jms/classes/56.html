<h3 style="margin:0px">Class: org.apache.qpid.jms.integration.ProducerIntegrationTest (33 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(17)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(13)</kbd></button>&nbsp;<button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(7)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(6)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(6)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(6)</kbd></button>&nbsp;<button id="18"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('18')" data-toggle="tooltip" title="Is an empty test case"><kbd id="tag-18"class="label-info"style="display: inline-block;font-size:7pt" >EmptyTester&nbsp;(3)</kbd></button>&nbsp;<button id="11"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('11')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-11"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(2)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is an empty test case">EmptyTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Is an empty test case
"></span><br>
@Test(timeout=20000) public void testSendingMessageSetsJMSExpirationRelatedAbsoluteExpiryAndTtlFields() throws Exception {
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testSendWorksAfterConnectionStopped() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    connection.start();
    testPeer.expectBegin();
    testPeer.expectSenderAttach();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    Queue destination=session.createQueue(getTestName());
    MessageProducer producer=session.createProducer(destination);
    MessageHeaderSectionMatcher headersMatcher=new MessageHeaderSectionMatcher(true);
    MessageAnnotationsSectionMatcher msgAnnotationsMatcher=new MessageAnnotationsSectionMatcher(true);
    TransferPayloadCompositeMatcher messageMatcher=new TransferPayloadCompositeMatcher();
    messageMatcher.setHeadersMatcher(headersMatcher);
    messageMatcher.setMessageAnnotationsMatcher(msgAnnotationsMatcher);
    testPeer.expectTransfer(messageMatcher);
    connection.stop();
    producer.send(session.createMessage());
    testPeer.expectDetach(true,true,true);
    producer.close();
    testPeer.waitForAllHandlersToComplete(1000);
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testSendWhenLinkCreditIsDelayed() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer,"?amqp.traceFrames=true&amqp.traceBytes=true");
    testPeer.expectBegin();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    String queueName="myQueue";
    Queue queue=session.createQueue(queueName);
    Message message=session.createTextMessage("text");
    TransferPayloadCompositeMatcher messageMatcher=new TransferPayloadCompositeMatcher();
    testPeer.expectSenderAttach(100);
    testPeer.expectTransfer(messageMatcher);
    MessageProducer producer=session.createProducer(queue);
    producer.send(message);
    testPeer.waitForAllHandlersToComplete(1000);
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testSendingMessageSetsJMSTimestamp() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    testPeer.expectBegin();
    testPeer.expectSenderAttach();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    String queueName="myQueue";
    Queue queue=session.createQueue(queueName);
    MessageProducer producer=session.createProducer(queue);
    long currentTime=System.currentTimeMillis();
    Date creationLower=new Date(currentTime);
    Date creationUpper=new Date(currentTime + 3000);
    Matcher<Date> inRange=both(greaterThanOrEqualTo(creationLower)).and(lessThanOrEqualTo(creationUpper));
    String text="myMessage";
    MessageHeaderSectionMatcher headersMatcher=new MessageHeaderSectionMatcher(true).withDurable(equalTo(true));
    MessageAnnotationsSectionMatcher msgAnnotationsMatcher=new MessageAnnotationsSectionMatcher(true);
    MessagePropertiesSectionMatcher propsMatcher=new MessagePropertiesSectionMatcher(true).withCreationTime(inRange);
    TransferPayloadCompositeMatcher messageMatcher=new TransferPayloadCompositeMatcher();
    messageMatcher.setHeadersMatcher(headersMatcher);
    messageMatcher.setMessageAnnotationsMatcher(msgAnnotationsMatcher);
    messageMatcher.setPropertiesMatcher(propsMatcher);
    messageMatcher.setMessageContentMatcher(new EncodedAmqpValueMatcher(text));
    testPeer.expectTransfer(messageMatcher);
    Message message=session.createTextMessage(text);
    producer.send(message);
    testPeer.waitForAllHandlersToComplete(1000);
  }
 }

</code></pre>

<pre class="type-11 type-4 type-5 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=20000) public void testRemotelyCloseConnectionDuringSyncSend() throws Exception {
  final String BREAD_CRUMB="ErrorMessageBreadCrumb";
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    testPeer.expectBegin();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    testPeer.expectSenderAttach();
    String text="myMessage";
    MessageHeaderSectionMatcher headersMatcher=new MessageHeaderSectionMatcher(true).withDurable(equalTo(true));
    MessageAnnotationsSectionMatcher msgAnnotationsMatcher=new MessageAnnotationsSectionMatcher(true);
    MessagePropertiesSectionMatcher propsMatcher=new MessagePropertiesSectionMatcher(true);
    TransferPayloadCompositeMatcher messageMatcher=new TransferPayloadCompositeMatcher();
    messageMatcher.setHeadersMatcher(headersMatcher);
    messageMatcher.setMessageAnnotationsMatcher(msgAnnotationsMatcher);
    messageMatcher.setPropertiesMatcher(propsMatcher);
    messageMatcher.setMessageContentMatcher(new EncodedAmqpValueMatcher(text));
    testPeer.expectTransfer(messageMatcher,nullValue(),false,false,null,false);
    testPeer.remotelyCloseConnection(true,AmqpError.RESOURCE_LIMIT_EXCEEDED,BREAD_CRUMB);
    Queue queue=session.createQueue("myQueue");
    final MessageProducer producer=session.createProducer(queue);
    Message message=session.createTextMessage(text);
    try {
      producer.send(message);
      fail("Expected exception to be thrown");
    }
 catch (    JMSException jmse) {
      assertNotNull("Expected exception to have a message",jmse.getMessage());
      assertTrue("Expected breadcrumb to be present in message",jmse.getMessage().contains(BREAD_CRUMB));
    }
    testPeer.waitForAllHandlersToComplete(3000);
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testSendWorksWhenConnectionNotStarted() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    testPeer.expectBegin();
    testPeer.expectSenderAttach();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    Queue destination=session.createQueue(getTestName());
    MessageProducer producer=session.createProducer(destination);
    MessageHeaderSectionMatcher headersMatcher=new MessageHeaderSectionMatcher(true);
    MessageAnnotationsSectionMatcher msgAnnotationsMatcher=new MessageAnnotationsSectionMatcher(true);
    TransferPayloadCompositeMatcher messageMatcher=new TransferPayloadCompositeMatcher();
    messageMatcher.setHeadersMatcher(headersMatcher);
    messageMatcher.setMessageAnnotationsMatcher(msgAnnotationsMatcher);
    testPeer.expectTransfer(messageMatcher);
    producer.send(session.createMessage());
    testPeer.expectDetach(true,true,true);
    producer.close();
    testPeer.waitForAllHandlersToComplete(1000);
  }
 }

</code></pre>

<pre class="type-4 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test that after sending a message with the disableMessageTimestamp hint set, the
 * message object has a 0 JMSTimestamp value, and no creation-time field value was set.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testSendingMessageWithDisableMessageTimestampHint() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    testPeer.expectBegin();
    testPeer.expectSenderAttach();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    String queueName="myQueue";
    Queue queue=session.createQueue(queueName);
    MessageProducer producer=session.createProducer(queue);
    String text="myMessage";
    MessageHeaderSectionMatcher headersMatcher=new MessageHeaderSectionMatcher(true).withDurable(equalTo(true));
    MessageAnnotationsSectionMatcher msgAnnotationsMatcher=new MessageAnnotationsSectionMatcher(true);
    MessagePropertiesSectionMatcher propsMatcher=new MessagePropertiesSectionMatcher(true);
    propsMatcher.withCreationTime(nullValue());
    TransferPayloadCompositeMatcher messageMatcher=new TransferPayloadCompositeMatcher();
    messageMatcher.setHeadersMatcher(headersMatcher);
    messageMatcher.setMessageAnnotationsMatcher(msgAnnotationsMatcher);
    messageMatcher.setPropertiesMatcher(propsMatcher);
    messageMatcher.setMessageContentMatcher(new EncodedAmqpValueMatcher(text));
    testPeer.expectTransfer(messageMatcher);
    Message message=session.createTextMessage(text);
    assertEquals("JMSTimestamp should not yet be set",0,message.getJMSTimestamp());
    producer.setDisableMessageTimestamp(true);
    producer.send(message);
    testPeer.waitForAllHandlersToComplete(1000);
    assertEquals("JMSTimestamp should still not be set",0,message.getJMSTimestamp());
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testSyncSendMessageModifiedUndeliverable() throws Exception {
  Modified modified=new Modified();
  modified.setUndeliverableHere(true);
  doSyncSendMessageNotAcceptedTestImpl(modified);
}

</code></pre>

<pre class="type-4 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test that when a message is sent with default priority of 4, the emitted AMQP message has no value in the header
 * priority field, since the default for that field is already 4.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testDefaultPriorityProducesMessagesWithoutPriorityField() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    testPeer.expectBegin();
    testPeer.expectSenderAttach();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    Queue queue=session.createQueue("myQueue");
    MessageProducer producer=session.createProducer(queue);
    MessageHeaderSectionMatcher headersMatcher=new MessageHeaderSectionMatcher(true).withPriority(equalTo(null));
    MessageAnnotationsSectionMatcher msgAnnotationsMatcher=new MessageAnnotationsSectionMatcher(true);
    TransferPayloadCompositeMatcher messageMatcher=new TransferPayloadCompositeMatcher();
    messageMatcher.setHeadersMatcher(headersMatcher);
    messageMatcher.setMessageAnnotationsMatcher(msgAnnotationsMatcher);
    testPeer.expectTransfer(messageMatcher);
    Message message=session.createTextMessage();
    assertEquals(Message.DEFAULT_PRIORITY,message.getJMSPriority());
    producer.send(message);
    assertEquals(Message.DEFAULT_PRIORITY,message.getJMSPriority());
    testPeer.waitForAllHandlersToComplete(1000);
  }
 }

</code></pre>

<pre class="type-4 type-5 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that upon sending a message, the sender sets the JMSMessageID on the Message object,
 * and that the value is included in the AMQP message sent by the client.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testSendingMessageSetsJMSMessageID() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    testPeer.expectBegin();
    testPeer.expectSenderAttach();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    String queueName="myQueue";
    Queue queue=session.createQueue(queueName);
    MessageProducer producer=session.createProducer(queue);
    String text="myMessage";
    MessageHeaderSectionMatcher headersMatcher=new MessageHeaderSectionMatcher(true).withDurable(equalTo(true));
    MessageAnnotationsSectionMatcher msgAnnotationsMatcher=new MessageAnnotationsSectionMatcher(true);
    MessagePropertiesSectionMatcher propsMatcher=new MessagePropertiesSectionMatcher(true).withMessageId(isA(String.class));
    TransferPayloadCompositeMatcher messageMatcher=new TransferPayloadCompositeMatcher();
    messageMatcher.setHeadersMatcher(headersMatcher);
    messageMatcher.setMessageAnnotationsMatcher(msgAnnotationsMatcher);
    messageMatcher.setPropertiesMatcher(propsMatcher);
    messageMatcher.setMessageContentMatcher(new EncodedAmqpValueMatcher(text));
    testPeer.expectTransfer(messageMatcher);
    Message message=session.createTextMessage(text);
    assertNull("JMSMessageID should not yet be set",message.getJMSMessageID());
    producer.send(message);
    String jmsMessageID=message.getJMSMessageID();
    assertNotNull("JMSMessageID should be set",jmsMessageID);
    assertTrue("JMS 'ID:' prefix not found",jmsMessageID.startsWith("ID:"));
    testPeer.waitForAllHandlersToComplete(1000);
    Object receivedMessageId=propsMatcher.getReceivedMessageId();
    assertTrue("Expected string message id to be sent",receivedMessageId instanceof String);
    assertTrue("Expected JMSMessageId value to be present in AMQP message",jmsMessageID.endsWith((String)receivedMessageId));
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testAsyncSendMessageModifiedDeliveryFailedUndeliverable() throws Exception {
  Modified modified=new Modified();
  modified.setDeliveryFailed(true);
  modified.setUndeliverableHere(true);
  doAsyncSendMessageNotAcceptedTestImpl(modified);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testAsyncSendMessageModifiedUndeliverable() throws Exception {
  Modified modified=new Modified();
  modified.setUndeliverableHere(true);
  doAsyncSendMessageNotAcceptedTestImpl(modified);
}

</code></pre>

<pre class="type-4 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test that when a message is sent with a non-default priority, the emitted AMQP message has that value in the
 * header priority field, and the JMS message has had JMSPriority set.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testNonDefaultPriorityProducesMessagesWithPriorityFieldAndSetsJMSPriority() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    testPeer.expectBegin();
    testPeer.expectSenderAttach();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    Queue queue=session.createQueue("myQueue");
    MessageProducer producer=session.createProducer(queue);
    byte priority=5;
    MessageHeaderSectionMatcher headersMatcher=new MessageHeaderSectionMatcher(true).withPriority(equalTo(UnsignedByte.valueOf(priority)));
    MessageAnnotationsSectionMatcher msgAnnotationsMatcher=new MessageAnnotationsSectionMatcher(true);
    TransferPayloadCompositeMatcher messageMatcher=new TransferPayloadCompositeMatcher();
    messageMatcher.setHeadersMatcher(headersMatcher);
    messageMatcher.setMessageAnnotationsMatcher(msgAnnotationsMatcher);
    testPeer.expectTransfer(messageMatcher);
    Message message=session.createTextMessage();
    assertEquals(Message.DEFAULT_PRIORITY,message.getJMSPriority());
    producer.send(message,DeliveryMode.PERSISTENT,priority,Message.DEFAULT_TIME_TO_LIVE);
    assertEquals(priority,message.getJMSPriority());
    testPeer.waitForAllHandlersToComplete(1000);
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testSyncSendMessageModifiedDeliveryFailedUndeliverable() throws Exception {
  Modified modified=new Modified();
  modified.setDeliveryFailed(true);
  modified.setUndeliverableHere(true);
  doSyncSendMessageNotAcceptedTestImpl(modified);
}

</code></pre>

<pre class="type-11 type-4 type-5 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=20000) public void testRemotelyCloseProducerDuringSyncSend() throws Exception {
  final String BREAD_CRUMB="ErrorMessageBreadCrumb";
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    testPeer.expectBegin();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    testPeer.expectSenderAttach();
    String text="myMessage";
    MessageHeaderSectionMatcher headersMatcher=new MessageHeaderSectionMatcher(true).withDurable(equalTo(true));
    MessageAnnotationsSectionMatcher msgAnnotationsMatcher=new MessageAnnotationsSectionMatcher(true);
    MessagePropertiesSectionMatcher propsMatcher=new MessagePropertiesSectionMatcher(true);
    TransferPayloadCompositeMatcher messageMatcher=new TransferPayloadCompositeMatcher();
    messageMatcher.setHeadersMatcher(headersMatcher);
    messageMatcher.setMessageAnnotationsMatcher(msgAnnotationsMatcher);
    messageMatcher.setPropertiesMatcher(propsMatcher);
    messageMatcher.setMessageContentMatcher(new EncodedAmqpValueMatcher(text));
    testPeer.expectTransfer(messageMatcher,nullValue(),false,false,null,false);
    testPeer.remotelyDetachLastOpenedLinkOnLastOpenedSession(true,true,AmqpError.RESOURCE_LIMIT_EXCEEDED,BREAD_CRUMB);
    Queue queue=session.createQueue("myQueue");
    final MessageProducer producer=session.createProducer(queue);
    Message message=session.createTextMessage(text);
    try {
      producer.send(message);
      fail("Expected exception to be thrown");
    }
 catch (    JMSException jmse) {
      assertNotNull("Expected exception to have a message",jmse.getMessage());
      assertTrue("Expected breadcrumb to be present in message",jmse.getMessage().contains(BREAD_CRUMB));
    }
    testPeer.waitForAllHandlersToComplete(3000);
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that after sending a message with the disableMessageID hint set, the message
 * object has a null JMSMessageID value, and no message-id field value was set.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testSendingMessageWithDisableMessageIDHint() throws Exception {
  doSendingMessageWithDisableMessageIDHintTestImpl(false);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testSyncSendMessageRejected() throws Exception {
  doSyncSendMessageNotAcceptedTestImpl(new Rejected());
}

</code></pre>

<pre class="type-4 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=20000) public void testDefaultDeliveryModeProducesDurableMessages() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    testPeer.expectBegin();
    testPeer.expectSenderAttach();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    Queue queue=session.createQueue("myQueue");
    MessageProducer producer=session.createProducer(queue);
    MessageHeaderSectionMatcher headersMatcher=new MessageHeaderSectionMatcher(true).withDurable(equalTo(true));
    MessageAnnotationsSectionMatcher msgAnnotationsMatcher=new MessageAnnotationsSectionMatcher(true);
    TransferPayloadCompositeMatcher messageMatcher=new TransferPayloadCompositeMatcher();
    messageMatcher.setHeadersMatcher(headersMatcher);
    messageMatcher.setMessageAnnotationsMatcher(msgAnnotationsMatcher);
    testPeer.expectTransfer(messageMatcher);
    Message message=session.createTextMessage();
    producer.send(message);
    assertEquals(DeliveryMode.PERSISTENT,message.getJMSDeliveryMode());
    testPeer.waitForAllHandlersToComplete(1000);
  }
 }

</code></pre>

<pre class="type-4 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=20000) public void testProducerOverridesMessageDeliveryMode() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    testPeer.expectBegin();
    testPeer.expectSenderAttach();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    Queue queue=session.createQueue("myQueue");
    MessageProducer producer=session.createProducer(queue);
    MessageHeaderSectionMatcher headersMatcher=new MessageHeaderSectionMatcher(true).withDurable(equalTo(true));
    MessageAnnotationsSectionMatcher msgAnnotationsMatcher=new MessageAnnotationsSectionMatcher(true);
    TransferPayloadCompositeMatcher messageMatcher=new TransferPayloadCompositeMatcher();
    messageMatcher.setHeadersMatcher(headersMatcher);
    messageMatcher.setMessageAnnotationsMatcher(msgAnnotationsMatcher);
    testPeer.expectTransfer(messageMatcher);
    Message message=session.createTextMessage();
    message.setJMSDeliveryMode(DeliveryMode.NON_PERSISTENT);
    assertEquals(DeliveryMode.NON_PERSISTENT,message.getJMSDeliveryMode());
    producer.send(message);
    assertEquals(DeliveryMode.PERSISTENT,message.getJMSDeliveryMode());
    testPeer.waitForAllHandlersToComplete(1000);
  }
 }

</code></pre>

<pre class="type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test(timeout=20000) public void testRemotelyCloseProducer() throws Exception {
  final String BREAD_CRUMB="ErrorMessageBreadCrumb";
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    testPeer.expectBegin();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    testPeer.expectSenderAttach();
    testPeer.remotelyDetachLastOpenedLinkOnLastOpenedSession(true,true,AmqpError.RESOURCE_DELETED,BREAD_CRUMB);
    Queue queue=session.createQueue("myQueue");
    final MessageProducer producer=session.createProducer(queue);
    testPeer.waitForAllHandlersToComplete(1000);
    assertTrue("producer never closed.",Wait.waitFor(new Wait.Condition(){
      @Override public boolean isSatisified() throws Exception {
        try {
          producer.getDestination();
        }
 catch (        IllegalStateException jmsise) {
          if (jmsise.getCause() != null) {
            String message=jmsise.getCause().getMessage();
            return message.contains(AmqpError.RESOURCE_DELETED.toString()) && message.contains(BREAD_CRUMB);
          }
 else {
            return false;
          }
        }
        return false;
      }
    }
,10000,10));
    producer.close();
  }
 }

</code></pre>

<pre class="type-4 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=20000) public void testSentTextMessageCanBeModified() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    testPeer.expectBegin();
    testPeer.expectSenderAttach();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    Queue queue=session.createQueue("myQueue");
    MessageProducer producer=session.createProducer(queue);
    String text="myMessage";
    MessageHeaderSectionMatcher headersMatcher=new MessageHeaderSectionMatcher(true);
    MessageAnnotationsSectionMatcher msgAnnotationsMatcher=new MessageAnnotationsSectionMatcher(true);
    MessagePropertiesSectionMatcher propsMatcher=new MessagePropertiesSectionMatcher(true);
    TransferPayloadCompositeMatcher messageMatcher=new TransferPayloadCompositeMatcher();
    messageMatcher.setHeadersMatcher(headersMatcher);
    messageMatcher.setMessageAnnotationsMatcher(msgAnnotationsMatcher);
    messageMatcher.setPropertiesMatcher(propsMatcher);
    messageMatcher.setMessageContentMatcher(new EncodedAmqpValueMatcher(text));
    testPeer.expectTransfer(messageMatcher);
    TextMessage message=session.createTextMessage(text);
    producer.send(message);
    assertEquals(text,message.getText());
    message.setText(text + text);
    assertEquals(text + text,message.getText());
    testPeer.waitForAllHandlersToComplete(1000);
  }
 }

</code></pre>

<pre class="type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is an empty test case">EmptyTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Is an empty test case
"></span><br>
@Test(timeout=20000) public void testSendingMessageWithJMS_AMQP_TTLSetZero() throws Exception {
}

</code></pre>

<pre class="type-4 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that when a message is sent the JMSDestination header is set to
 * the Destination used by the producer.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testSendingMessageSetsJMSDestination() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    testPeer.expectBegin();
    testPeer.expectSenderAttach();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    String queueName="myQueue";
    Queue queue=session.createQueue(queueName);
    MessageProducer producer=session.createProducer(queue);
    String text="myMessage";
    MessageHeaderSectionMatcher headersMatcher=new MessageHeaderSectionMatcher(true);
    MessageAnnotationsSectionMatcher msgAnnotationsMatcher=new MessageAnnotationsSectionMatcher(true);
    MessagePropertiesSectionMatcher propsMatcher=new MessagePropertiesSectionMatcher(true);
    TransferPayloadCompositeMatcher messageMatcher=new TransferPayloadCompositeMatcher();
    messageMatcher.setHeadersMatcher(headersMatcher);
    messageMatcher.setMessageAnnotationsMatcher(msgAnnotationsMatcher);
    messageMatcher.setPropertiesMatcher(propsMatcher);
    messageMatcher.setMessageContentMatcher(new EncodedAmqpValueMatcher(text));
    testPeer.expectTransfer(messageMatcher);
    Message message=session.createTextMessage(text);
    assertNull("Should not yet have a JMSDestination",message.getJMSDestination());
    producer.send(message);
    assertEquals("Should have had JMSDestination set",queue,message.getJMSDestination());
    testPeer.waitForAllHandlersToComplete(1000);
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testAsyncSendMessageRejected() throws Exception {
  doAsyncSendMessageNotAcceptedTestImpl(new Rejected());
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testCloseSender() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    testPeer.expectBegin();
    testPeer.expectSenderAttach();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    Queue queue=session.createQueue("myQueue");
    MessageProducer producer=session.createProducer(queue);
    testPeer.expectDetach(true,true,true);
    producer.close();
    testPeer.waitForAllHandlersToComplete(1000);
  }
 }

</code></pre>

<pre class="type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is an empty test case">EmptyTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Is an empty test case
"></span><br>
@Test(timeout=20000) public void testSendingMessageWithJMS_AMQP_TTLSetPositive() throws Exception {
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that after sending a message with the disableMessageID hint set, which already had
 * a JMSMessageID value, that the message object then has a null JMSMessageID value, and no
 * message-id field value was set.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testSendingMessageWithDisableMessageIDHintAndExistingMessageID() throws Exception {
  doSendingMessageWithDisableMessageIDHintTestImpl(true);
}

</code></pre>

<pre class="type-4 type-5 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=20000) public void testSendingMessageWithUUIDStringMessageFormat() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    String uri="amqp://127.0.0.1:" + testPeer.getServerPort() + "?jms.messageIDType=UUID_STRING";
    JmsConnectionFactory factory=new JmsConnectionFactory(uri);
    Connection connection=factory.createConnection();
    testPeer.expectSaslAnonymousConnect();
    testPeer.expectBegin();
    testPeer.expectBegin();
    testPeer.expectSenderAttach();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    String queueName="myQueue";
    Queue queue=session.createQueue(queueName);
    MessageProducer producer=session.createProducer(queue);
    String text="myMessage";
    MessageHeaderSectionMatcher headersMatcher=new MessageHeaderSectionMatcher(true).withDurable(equalTo(true));
    MessageAnnotationsSectionMatcher msgAnnotationsMatcher=new MessageAnnotationsSectionMatcher(true);
    MessagePropertiesSectionMatcher propsMatcher=new MessagePropertiesSectionMatcher(true).withMessageId(isA(String.class));
    TransferPayloadCompositeMatcher messageMatcher=new TransferPayloadCompositeMatcher();
    messageMatcher.setHeadersMatcher(headersMatcher);
    messageMatcher.setMessageAnnotationsMatcher(msgAnnotationsMatcher);
    messageMatcher.setPropertiesMatcher(propsMatcher);
    messageMatcher.setMessageContentMatcher(new EncodedAmqpValueMatcher(text));
    testPeer.expectTransfer(messageMatcher);
    Message message=session.createTextMessage(text);
    assertNull("JMSMessageID should not yet be set",message.getJMSMessageID());
    producer.send(message);
    String jmsMessageID=message.getJMSMessageID();
    assertNotNull("JMSMessageID should be set",jmsMessageID);
    assertTrue("JMS 'ID:' prefix not found",jmsMessageID.startsWith("ID:"));
    testPeer.waitForAllHandlersToComplete(1000);
    Object receivedMessageId=propsMatcher.getReceivedMessageId();
    assertTrue("Expected UUID message id to be sent",receivedMessageId instanceof String);
    assertTrue("Expected JMSMessageId value to be present in AMQP message",jmsMessageID.endsWith(receivedMessageId.toString()));
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testAsyncSendMessageReleased() throws Exception {
  doAsyncSendMessageNotAcceptedTestImpl(new Released());
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testSyncSendMessageModifiedDeliveryFailed() throws Exception {
  Modified modified=new Modified();
  modified.setDeliveryFailed(true);
  doSyncSendMessageNotAcceptedTestImpl(modified);
}

</code></pre>

<pre class="type-4 type-5 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=20000) public void testSendingMessageWithUUIDMessageFormat() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    String uri="amqp://127.0.0.1:" + testPeer.getServerPort() + "?jms.messageIDType=UUID";
    JmsConnectionFactory factory=new JmsConnectionFactory(uri);
    Connection connection=factory.createConnection();
    testPeer.expectSaslAnonymousConnect();
    testPeer.expectBegin();
    testPeer.expectBegin();
    testPeer.expectSenderAttach();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    String queueName="myQueue";
    Queue queue=session.createQueue(queueName);
    MessageProducer producer=session.createProducer(queue);
    String text="myMessage";
    MessageHeaderSectionMatcher headersMatcher=new MessageHeaderSectionMatcher(true).withDurable(equalTo(true));
    MessageAnnotationsSectionMatcher msgAnnotationsMatcher=new MessageAnnotationsSectionMatcher(true);
    MessagePropertiesSectionMatcher propsMatcher=new MessagePropertiesSectionMatcher(true).withMessageId(isA(UUID.class));
    TransferPayloadCompositeMatcher messageMatcher=new TransferPayloadCompositeMatcher();
    messageMatcher.setHeadersMatcher(headersMatcher);
    messageMatcher.setMessageAnnotationsMatcher(msgAnnotationsMatcher);
    messageMatcher.setPropertiesMatcher(propsMatcher);
    messageMatcher.setMessageContentMatcher(new EncodedAmqpValueMatcher(text));
    testPeer.expectTransfer(messageMatcher);
    Message message=session.createTextMessage(text);
    assertNull("JMSMessageID should not yet be set",message.getJMSMessageID());
    producer.send(message);
    String jmsMessageID=message.getJMSMessageID();
    assertNotNull("JMSMessageID should be set",jmsMessageID);
    assertTrue("JMS 'ID:' prefix not found",jmsMessageID.startsWith("ID:"));
    testPeer.waitForAllHandlersToComplete(1000);
    Object receivedMessageId=propsMatcher.getReceivedMessageId();
    assertTrue("Expected UUID message id to be sent",receivedMessageId instanceof UUID);
    assertTrue("Expected JMSMessageId value to be present in AMQP message",jmsMessageID.endsWith(receivedMessageId.toString()));
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testSyncSendMessageReleased() throws Exception {
  doSyncSendMessageNotAcceptedTestImpl(new Released());
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testAsyncSendMessageModifiedDeliveryFailed() throws Exception {
  Modified modified=new Modified();
  modified.setDeliveryFailed(true);
  doAsyncSendMessageNotAcceptedTestImpl(modified);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
