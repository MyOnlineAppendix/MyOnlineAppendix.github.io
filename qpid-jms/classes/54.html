<h3 style="margin:0px">Class: org.apache.qpid.jms.integration.MessageIntegrationTest (50 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(41)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(9)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(9)</kbd></button>&nbsp;<button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(7)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(7)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(5)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that the {@link AmqpDestinationHelper#JMS_DEST_TYPE_MSG_ANNOTATION_SYMBOL_NAME} is set as a byte on
 * a sent message to indicate its 'to' address represents a Topic JMSDestination.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testSentMessageContainsToTypeAnnotationByte() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    testPeer.expectBegin();
    testPeer.expectSenderAttach();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    String topicName="myTopic";
    MessageHeaderSectionMatcher headersMatcher=new MessageHeaderSectionMatcher(true).withDurable(equalTo(true));
    MessageAnnotationsSectionMatcher msgAnnotationsMatcher=new MessageAnnotationsSectionMatcher(true);
    Symbol annotationKey=AmqpMessageSupport.getSymbol(AmqpDestinationHelper.JMS_DEST_TYPE_MSG_ANNOTATION_SYMBOL_NAME);
    msgAnnotationsMatcher.withEntry(annotationKey,equalTo(AmqpDestinationHelper.TOPIC_TYPE));
    MessagePropertiesSectionMatcher propsMatcher=new MessagePropertiesSectionMatcher(true).withTo(equalTo(topicName));
    TransferPayloadCompositeMatcher messageMatcher=new TransferPayloadCompositeMatcher();
    messageMatcher.setHeadersMatcher(headersMatcher);
    messageMatcher.setMessageAnnotationsMatcher(msgAnnotationsMatcher);
    messageMatcher.setPropertiesMatcher(propsMatcher);
    testPeer.expectTransfer(messageMatcher);
    Message message=session.createMessage();
    Topic topic=session.createTopic(topicName);
    MessageProducer producer=session.createProducer(topic);
    producer.send(message);
    testPeer.waitForAllHandlersToComplete(2000);
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that the lack of a 'to' in the Properties section of the incoming message (e.g
 * one sent by a non-JMS client) is handled by making the JMSDestination method simply
 * return the Queue Destination used to create the consumer that received the message.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageFromQueueWithoutToResultsInUseOfConsumerDestinationQueue() throws Exception {
  receivedMessageFromQueueWithoutToResultsInUseOfConsumerDestinationImpl(true);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that the lack of a 'to' in the Properties section of the incoming message (e.g
 * one sent by a non-JMS client) is handled by making the JMSDestination method simply
 * return the Topic Destination used to create the consumer that received the message.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageFromQueueWithoutToResultsInUseOfConsumerDestinationTopic() throws Exception {
  receivedMessageFromQueueWithoutToResultsInUseOfConsumerDestinationImpl(false);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that the a connection with a 'queue prefix' set on it strips the
 * prefix from the content of the to/reply-to fields for incoming messages.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithQueueDestinationsOnConnectionWithQueuePrefix() throws Exception {
  Class<? extends Destination> destType=Queue.class;
  String destPrefix="q12321-";
  String destName="myQueue";
  String replyName="myReplyQueue";
  String destAddress=destPrefix + destName;
  String replyAddress=destPrefix + replyName;
  String annotationName=AmqpDestinationHelper.JMS_DEST_TYPE_MSG_ANNOTATION_SYMBOL_NAME;
  Byte annotationValue=AmqpDestinationHelper.QUEUE_TYPE;
  String replyAnnotationName=AmqpDestinationHelper.JMS_REPLY_TO_TYPE_MSG_ANNOTATION_SYMBOL_NAME;
  Byte replyAnnotationValue=AmqpDestinationHelper.QUEUE_TYPE;
  doReceivedMessageOnConnectionWithPrefixTestImpl(destType,destPrefix,destName,replyName,destAddress,replyAddress,annotationName,annotationValue,replyAnnotationName,replyAnnotationValue);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that the a connection with 'destination prefixes' set on it does not add
 * the prefix to the content of the to/reply-to fields for TemporaryTopics.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testSendMessageWithTemporaryTopicDestinationsOnConnectionWithDestinationPrefixes() throws Exception {
  Class<? extends Destination> destType=TemporaryTopic.class;
  String destPrefix="q12321-";
  String destName=null;
  String destAddress="temp-topic://myTempTopic";
  Byte annotationValue=AmqpDestinationHelper.TEMP_TOPIC_TYPE;
  doSendMessageOnConnectionWithPrefixTestImpl(destType,destPrefix,destName,destAddress,annotationValue);
}

</code></pre>

<pre class="type-4 type-5 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests that when receiving a message with the group-id, reply-to-group-id, and group-sequence
 * fields of the AMQP properties section set, that the expected JMSX or JMS_AMQP properties
 * are present, and the expected values are returned when retrieved from the JMS message.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithGroupRelatedPropertiesSet() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    connection.start();
    testPeer.expectBegin();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    Queue queue=session.createQueue("myQueue");
    PropertiesDescribedType props=new PropertiesDescribedType();
    DescribedType amqpValueNullContent=new AmqpValueDescribedType(null);
    MessageAnnotationsDescribedType ann=null;
    String expectedGroupId="myGroupId123";
    int expectedGroupSeq=1;
    String expectedReplyToGroupId="myReplyToGroupId456";
    props.setGroupId(expectedGroupId);
    props.setGroupSequence(UnsignedInteger.valueOf(expectedGroupSeq));
    props.setReplyToGroupId(expectedReplyToGroupId);
    props.setMessageId("myMessageIDString");
    testPeer.expectReceiverAttach();
    testPeer.expectLinkFlowRespondWithTransfer(null,ann,props,null,amqpValueNullContent);
    testPeer.expectDispositionThatIsAcceptedAndSettled();
    MessageConsumer messageConsumer=session.createConsumer(queue);
    Message receivedMessage=messageConsumer.receive(3000);
    testPeer.waitForAllHandlersToComplete(3000);
    assertNotNull("did not receive the message",receivedMessage);
    boolean foundGroupId=false;
    boolean foundGroupSeq=false;
    boolean foundReplyToGroupId=false;
    Enumeration<?> names=receivedMessage.getPropertyNames();
    assertTrue("Message had no property names",names.hasMoreElements());
    while (names.hasMoreElements()) {
      Object element=names.nextElement();
      if (JmsClientProperties.JMSXGROUPID.equals(element)) {
        foundGroupId=true;
      }
      if (JmsClientProperties.JMSXGROUPSEQ.equals(element)) {
        foundGroupSeq=true;
      }
      if (AmqpMessageSupport.JMS_AMQP_REPLY_TO_GROUP_ID.equals(element)) {
        foundReplyToGroupId=true;
      }
    }
    assertTrue("JMSXGroupID not in property names",foundGroupId);
    assertTrue("JMSXGroupSeq  not in property names",foundGroupSeq);
    assertTrue("JMS_AMQP_REPLY_TO_GROUP_ID not in property names",foundReplyToGroupId);
    assertTrue("JMSXGroupID does not exist",receivedMessage.propertyExists(JmsClientProperties.JMSXGROUPID));
    assertTrue("JMSXGroupSeq does not exist",receivedMessage.propertyExists(JmsClientProperties.JMSXGROUPSEQ));
    assertTrue("JMS_AMQP_REPLY_TO_GROUP_ID does not exist",receivedMessage.propertyExists(AmqpMessageSupport.JMS_AMQP_REPLY_TO_GROUP_ID));
    assertEquals("did not get the expected JMSXGroupID",expectedGroupId,receivedMessage.getStringProperty(JmsClientProperties.JMSXGROUPID));
    assertEquals("did not get the expected JMSXGroupSeq",expectedGroupSeq,receivedMessage.getIntProperty(JmsClientProperties.JMSXGROUPSEQ));
    assertEquals("did not get the expected JMS_AMQP_REPLY_TO_GROUP_ID",expectedReplyToGroupId,receivedMessage.getStringProperty(AmqpMessageSupport.JMS_AMQP_REPLY_TO_GROUP_ID));
  }
 }

</code></pre>

<pre class="type-4 type-5 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests that the {@link AmqpMessageSupport#LEGACY_TO_TYPE_MSG_ANNOTATION_SYMBOL_NAME} set on a message to
 * indicate its 'to' address represents a Topic results in the JMSDestination object being a
 * Topic. Ensure the consumers destination is not used by consuming from a Queue.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageFromQueueWithToLegacyTypeAnnotationForTopic() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    connection.start();
    testPeer.expectBegin();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    Queue queue=session.createQueue("myQueue");
    MessageAnnotationsDescribedType msgAnnotations=new MessageAnnotationsDescribedType();
    msgAnnotations.setSymbolKeyedAnnotation(AmqpMessageSupport.LEGACY_TO_TYPE_MSG_ANNOTATION_SYMBOL_NAME,AmqpMessageSupport.LEGACY_TOPIC_ATTRIBUTE);
    PropertiesDescribedType props=new PropertiesDescribedType();
    String myTopicAddress="myTopicAddress";
    props.setTo(myTopicAddress);
    props.setMessageId("myMessageIDString");
    DescribedType amqpValueNullContent=new AmqpValueDescribedType(null);
    testPeer.expectReceiverAttach();
    testPeer.expectLinkFlowRespondWithTransfer(null,msgAnnotations,props,null,amqpValueNullContent);
    testPeer.expectDispositionThatIsAcceptedAndSettled();
    MessageConsumer messageConsumer=session.createConsumer(queue);
    Message receivedMessage=messageConsumer.receive(3000);
    testPeer.waitForAllHandlersToComplete(3000);
    assertNotNull(receivedMessage);
    Destination dest=receivedMessage.getJMSDestination();
    assertNotNull("Expected Topic destination but got null",dest);
    assertTrue("Expected Topic instance but did not get one. Actual type was: " + dest.getClass().getName(),dest instanceof Topic);
    assertEquals(myTopicAddress,((Topic)dest).getTopicName());
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that receiving a message with a binary typed message-id results in returning the
 * expected value for JMSMessageId where the JMS "ID:" prefix has been added to the hex representation of the binary.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithBinaryMessageIdReturnsExpectedJMSMessageID() throws Exception {
  receivedMessageWithMessageIdTestImpl(new Binary(new byte[]{(byte)0x02,(byte)0x20,(byte)0xAE,(byte)0x00}));
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testReceiveMessageWithInvalidPropertyName() throws Exception {
  doReceiveMessageWithInvalidPropertyNameTestImpl(false);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that receiving a message with a string typed message-id, and then sending a message which
 * uses the result of calling getJMSMessageID as the value for setJMSCorrelationId results in
 * transmission of the expected AMQP message content.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithStringMessageIdAndSendValueAsCorrelationId() throws Exception {
  recieveMessageIdSendCorrelationIdTestImpl("myStringMessageId");
}

</code></pre>

<pre class="type-4 type-5 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=20000) public void testReceiveMessageWithApplicationProperties() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    connection.start();
    testPeer.expectBegin();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    Queue queue=session.createQueue("myQueue");
    PropertiesDescribedType props=new PropertiesDescribedType();
    props.setMessageId("myMessageIDString");
    ApplicationPropertiesDescribedType appProperties=new ApplicationPropertiesDescribedType();
    appProperties.setApplicationProperty(STRING_PROP,STRING_PROP_VALUE);
    appProperties.setApplicationProperty(NULL_STRING_PROP,NULL_STRING_PROP_VALUE);
    appProperties.setApplicationProperty(BOOLEAN_PROP,BOOLEAN_PROP_VALUE);
    appProperties.setApplicationProperty(BYTE_PROP,BYTE_PROP_VALUE);
    appProperties.setApplicationProperty(SHORT_PROP,SHORT_PROP_VALUE);
    appProperties.setApplicationProperty(INT_PROP,INT_PROP_VALUE);
    appProperties.setApplicationProperty(LONG_PROP,LONG_PROP_VALUE);
    appProperties.setApplicationProperty(FLOAT_PROP,FLOAT_PROP_VALUE);
    appProperties.setApplicationProperty(DOUBLE_PROP,DOUBLE_PROP_VALUE);
    DescribedType amqpValueNullContent=new AmqpValueDescribedType(null);
    testPeer.expectReceiverAttach();
    testPeer.expectLinkFlowRespondWithTransfer(null,null,props,appProperties,amqpValueNullContent);
    testPeer.expectDispositionThatIsAcceptedAndSettled();
    MessageConsumer messageConsumer=session.createConsumer(queue);
    Message receivedMessage=messageConsumer.receive(3000);
    testPeer.waitForAllHandlersToComplete(3000);
    assertTrue(receivedMessage.propertyExists(STRING_PROP));
    assertTrue(receivedMessage.propertyExists(NULL_STRING_PROP));
    assertTrue(receivedMessage.propertyExists(BYTE_PROP));
    assertTrue(receivedMessage.propertyExists(BOOLEAN_PROP));
    assertTrue(receivedMessage.propertyExists(SHORT_PROP));
    assertTrue(receivedMessage.propertyExists(INT_PROP));
    assertTrue(receivedMessage.propertyExists(LONG_PROP));
    assertTrue(receivedMessage.propertyExists(FLOAT_PROP));
    assertTrue(receivedMessage.propertyExists(DOUBLE_PROP));
    assertNull(receivedMessage.getStringProperty(NULL_STRING_PROP));
    assertEquals(STRING_PROP_VALUE,receivedMessage.getStringProperty(STRING_PROP));
    assertEquals(STRING_PROP_VALUE,receivedMessage.getStringProperty(STRING_PROP));
    assertEquals(BOOLEAN_PROP_VALUE,receivedMessage.getBooleanProperty(BOOLEAN_PROP));
    assertEquals(BYTE_PROP_VALUE,receivedMessage.getByteProperty(BYTE_PROP));
    assertEquals(SHORT_PROP_VALUE,receivedMessage.getShortProperty(SHORT_PROP));
    assertEquals(INT_PROP_VALUE,receivedMessage.getIntProperty(INT_PROP));
    assertEquals(LONG_PROP_VALUE,receivedMessage.getLongProperty(LONG_PROP));
    assertEquals(FLOAT_PROP_VALUE,receivedMessage.getFloatProperty(FLOAT_PROP),0.0);
    assertEquals(DOUBLE_PROP_VALUE,receivedMessage.getDoubleProperty(DOUBLE_PROP),0.0);
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that when sending a message with the JMSXGroupID, JMSXGroupSeq, and JMS_AMQP_REPLY_TO_GROUP_ID
 * properties of the JMS message set, that the expected values are included in the fields of
 * the AMQP message emitted.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testSendMessageWithGroupRelatedPropertiesSet() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    testPeer.expectBegin();
    testPeer.expectSenderAttach();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    String queueName="myQueue";
    Queue queue=session.createQueue(queueName);
    MessageProducer producer=session.createProducer(queue);
    MessageHeaderSectionMatcher headersMatcher=new MessageHeaderSectionMatcher(true).withDurable(equalTo(true));
    MessageAnnotationsSectionMatcher msgAnnotationsMatcher=new MessageAnnotationsSectionMatcher(true);
    String expectedGroupId="myGroupId123";
    int expectedGroupSeq=1;
    String expectedReplyToGroupId="myReplyToGroupId456";
    MessagePropertiesSectionMatcher propsMatcher=new MessagePropertiesSectionMatcher(true);
    propsMatcher.withGroupId(equalTo(expectedGroupId));
    propsMatcher.withReplyToGroupId(equalTo(expectedReplyToGroupId));
    propsMatcher.withGroupSequence(equalTo(UnsignedInteger.valueOf(expectedGroupSeq)));
    TransferPayloadCompositeMatcher messageMatcher=new TransferPayloadCompositeMatcher();
    messageMatcher.setHeadersMatcher(headersMatcher);
    messageMatcher.setMessageAnnotationsMatcher(msgAnnotationsMatcher);
    messageMatcher.setPropertiesMatcher(propsMatcher);
    messageMatcher.setMessageContentMatcher(new EncodedAmqpValueMatcher(null));
    testPeer.expectTransfer(messageMatcher);
    Message message=session.createTextMessage();
    message.setStringProperty(JmsClientProperties.JMSXGROUPID,expectedGroupId);
    message.setIntProperty(JmsClientProperties.JMSXGROUPSEQ,expectedGroupSeq);
    message.setStringProperty(AmqpMessageSupport.JMS_AMQP_REPLY_TO_GROUP_ID,expectedReplyToGroupId);
    producer.send(message);
    testPeer.waitForAllHandlersToComplete(1000);
  }
 }

</code></pre>

<pre class="type-4 type-5 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests that the {@link AmqpMessageSupport#LEGACY_REPLY_TO_TYPE_MSG_ANNOTATION_SYMBOL_NAME} set on a message to
 * indicate its 'reply-to' address represents a Topic results in the JMSReplyTo object being a
 * Topic. Ensure the consumers destination is not used by consuming from a Queue.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageFromQueueWithLegacyReplyToTypeAnnotationForTopic() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    connection.start();
    testPeer.expectBegin();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    Queue queue=session.createQueue("myQueue");
    MessageAnnotationsDescribedType msgAnnotations=new MessageAnnotationsDescribedType();
    msgAnnotations.setSymbolKeyedAnnotation(AmqpMessageSupport.LEGACY_REPLY_TO_TYPE_MSG_ANNOTATION_SYMBOL_NAME,AmqpMessageSupport.LEGACY_TOPIC_ATTRIBUTE);
    PropertiesDescribedType props=new PropertiesDescribedType();
    String myTopicAddress="myTopicAddress";
    props.setReplyTo(myTopicAddress);
    props.setMessageId("myMessageIDString");
    DescribedType amqpValueNullContent=new AmqpValueDescribedType(null);
    testPeer.expectReceiverAttach();
    testPeer.expectLinkFlowRespondWithTransfer(null,msgAnnotations,props,null,amqpValueNullContent);
    testPeer.expectDispositionThatIsAcceptedAndSettled();
    MessageConsumer messageConsumer=session.createConsumer(queue);
    Message receivedMessage=messageConsumer.receive(3000);
    testPeer.waitForAllHandlersToComplete(3000);
    assertNotNull(receivedMessage);
    Destination dest=receivedMessage.getJMSReplyTo();
    assertTrue(dest instanceof Topic);
    assertEquals(myTopicAddress,((Topic)dest).getTopicName());
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that receiving a message with a ulong typed message-id results in returning the
 * expected value for JMSMessageId where the JMS "ID:" prefix has been added to the UnsignedLong.tostring()
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithUnsignedLongMessageIdReturnsExpectedJMSMessageID() throws Exception {
  receivedMessageWithMessageIdTestImpl(UnsignedLong.valueOf(123456789L));
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that receiving a message with a string typed correlation-id, which is indicated to be an
 * application-specific value, results in returning the expected value for JMSCorrelationID
 * where the JMS "ID:" prefix has NOT been added.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithAppSpecificStringCorrelationIdReturnsExpectedJMSCorrelationID() throws Exception {
  receivedMessageWithCorrelationIdTestImpl("myTestCorrelationIdString",true);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that receiving a message with a UUID typed message-id results in returning the
 * expected value for JMSMessageId where the JMS "ID:" prefix has been added to the UUID.tostring()
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithUUIDMessageIdReturnsExpectedJMSMessageID() throws Exception {
  receivedMessageWithMessageIdTestImpl(UUID.randomUUID());
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that sending a message with a string typed correlation-id value which is a
 * message-id results in an AMQP message with the expected encoding of the correlation-id,
 * where the "ID:" prefix of the JMSCorrelationID value is not present, and there is
 * no presence of the message annotation to indicate an app-specific correlation-id.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testSentMessageWithStringCorrelationId() throws Exception {
  String stringCorrelationId="ID:myTestMessageIdString";
  String underlyingCorrelationId="myTestMessageIdString";
  sentMessageWithCorrelationIdTestImpl(stringCorrelationId,underlyingCorrelationId,false);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that sending a message with a binary typed correlation-id value which is a
 * message-id results in an AMQP message with the expected encoding of the correlation-id,
 * where the type is binary, the "ID:" prefix of the JMSCorrelationID value is (obviously) not present, and there is
 * no presence of the message annotation to indicate an app-specific correlation-id.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testSentMessageWithBinaryCorrelationId() throws Exception {
  Binary bin=new Binary(new byte[]{(byte)0x01,(byte)0x23,(byte)0xAF,(byte)0x00});
  String stringCorrelationId=AmqpMessageIdHelper.JMS_ID_PREFIX + AmqpMessageIdHelper.AMQP_BINARY_PREFIX + "0123af00";
  sentMessageWithCorrelationIdTestImpl(stringCorrelationId,bin,false);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that sending a message with a ulong typed correlation-id value which is a
 * message-id results in an AMQP message with the expected encoding of the correlation-id,
 * where the type is ulong, the "ID:" prefix of the JMSCorrelationID value is (obviously) not present, and there is
 * no presence of the message annotation to indicate an app-specific correlation-id.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testSentMessageWithUlongCorrelationId() throws Exception {
  UnsignedLong ulong=UnsignedLong.valueOf(Long.MAX_VALUE);
  String stringCorrelationId=AmqpMessageIdHelper.JMS_ID_PREFIX + AmqpMessageIdHelper.AMQP_ULONG_PREFIX + ulong.toString();
  sentMessageWithCorrelationIdTestImpl(stringCorrelationId,ulong,false);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that sending a message with a string typed correlation-id value which is a
 * app-specific results in an AMQP message with the expected encoding of the correlation-id,
 * and the presence of the message annotation to indicate an app-specific correlation-id.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testSentMessageWithAppSpecificStringCorrelationId() throws Exception {
  String stringCorrelationId="myTestAppSpecificString";
  sentMessageWithCorrelationIdTestImpl(stringCorrelationId,stringCorrelationId,true);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that the a connection with a 'topic prefix' set on it strips the
 * prefix from the content of the to/reply-to fields for incoming messages
 * if they don't have the 'destination type annotation' set.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithNoTypeAnnotationAndTopicDestinationsOnConnectionWithTopicPrefix() throws Exception {
  Class<? extends Destination> destType=Topic.class;
  String destPrefix="t12321-";
  String destName="myTopic";
  String replyName="myReplyTopic";
  String destAddress=destPrefix + destName;
  String replyAddress=destPrefix + replyName;
  String annotationName=null;
  Byte annotationValue=null;
  String replyAnnotationName=null;
  Byte replyAnnotationValue=null;
  doReceivedMessageOnConnectionWithPrefixTestImpl(destType,destPrefix,destName,replyName,destAddress,replyAddress,annotationName,annotationValue,replyAnnotationName,replyAnnotationValue);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that receiving a message with a UUID typed correlation-id results in returning the
 * expected value for JMSCorrelationID where the JMS "ID:" prefix has been added to the UUID.tostring()
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithLongCorrelationIdReturnsExpectedJMSCorrelationID() throws Exception {
  receivedMessageWithCorrelationIdTestImpl(UnsignedLong.valueOf(123456789L),false);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that the a connection with 'destination prefixes' set on it does not add
 * the prefix to the content of the to/reply-to fields for TemporaryQueues.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testSendMessageWithTemporaryQueueDestinationsOnConnectionWithDestinationPrefixes() throws Exception {
  Class<? extends Destination> destType=TemporaryQueue.class;
  String destPrefix="q12321-";
  String destName=null;
  String destAddress="temp-queue://myTempQueue";
  Byte annotationValue=AmqpDestinationHelper.TEMP_QUEUE_TYPE;
  doSendMessageOnConnectionWithPrefixTestImpl(destType,destPrefix,destName,destAddress,annotationValue);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that receiving a message with a UUID typed correlation-id results in returning the
 * expected value for JMSCorrelationID where the JMS "ID:" prefix has been added to the UUID.tostring()
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithUUIDCorrelationIdReturnsExpectedJMSCorrelationID() throws Exception {
  receivedMessageWithCorrelationIdTestImpl(UUID.randomUUID(),false);
}

</code></pre>

<pre class="type-4 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests that lack of the absolute-expiry-time and ttl fields on a message results
 * in it returning 0 for for JMSExpiration
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageFromQueueWithNoAbsoluteExpiryOrTtlReturnsJMSExpirationZero() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    connection.start();
    testPeer.expectBegin();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    Queue queue=session.createQueue("myQueue");
    PropertiesDescribedType props=new PropertiesDescribedType();
    props.setMessageId("myMessageIDString");
    DescribedType amqpValueNullContent=new AmqpValueDescribedType(null);
    testPeer.expectReceiverAttach();
    testPeer.expectLinkFlowRespondWithTransfer(null,null,props,null,amqpValueNullContent);
    testPeer.expectDispositionThatIsAcceptedAndSettled();
    MessageConsumer messageConsumer=session.createConsumer(queue);
    Message receivedMessage=messageConsumer.receive(3000);
    testPeer.waitForAllHandlersToComplete(3000);
    assertNotNull(receivedMessage);
    assertEquals(0L,receivedMessage.getJMSExpiration());
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that the a connection with a 'topic prefix' set on it adds the
 * prefix to the content of the to/reply-to fields for outgoing messages.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testSendMessageWithTopicDestinationsOnConnectionWithTopicPrefix() throws Exception {
  Class<? extends Destination> destType=Topic.class;
  String destPrefix="t12321-";
  String destName="myTopic";
  String destAddress=destPrefix + destName;
  Byte annotationValue=AmqpDestinationHelper.TOPIC_TYPE;
  doSendMessageOnConnectionWithPrefixTestImpl(destType,destPrefix,destName,destAddress,annotationValue);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that a connection with a 'prefixes' set on its does not alter the
 * address for a temporary queue in the to/reply-to fields for incoming messages.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithTemporaryQueueDestinationsOnConnectionWithPrefixes() throws Exception {
  Class<? extends Destination> destType=TemporaryQueue.class;
  String destPrefix="q12321-";
  String destName="temp-queue://myTempQueue";
  String replyName="temp-queue://myReplyTempQueue";
  String destAddress=destName;
  String replyAddress=replyName;
  String annotationName=AmqpDestinationHelper.JMS_DEST_TYPE_MSG_ANNOTATION_SYMBOL_NAME;
  Byte annotationValue=AmqpDestinationHelper.TEMP_QUEUE_TYPE;
  String replyAnnotationName=AmqpDestinationHelper.JMS_REPLY_TO_TYPE_MSG_ANNOTATION_SYMBOL_NAME;
  Byte replyAnnotationValue=AmqpDestinationHelper.TEMP_QUEUE_TYPE;
  doReceivedMessageOnConnectionWithPrefixTestImpl(destType,destPrefix,destName,replyName,destAddress,replyAddress,annotationName,annotationValue,replyAnnotationName,replyAnnotationValue);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that the a connection with a 'queue prefix' set on it adds the
 * prefix to the content of the to/reply-to fields for outgoing messages.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testSendMessageWithQueueDestinationsOnConnectionWithQueuePrefix() throws Exception {
  Class<? extends Destination> destType=Queue.class;
  String destPrefix="q12321-";
  String destName="myQueue";
  String destAddress=destPrefix + destName;
  Byte annotationValue=AmqpDestinationHelper.QUEUE_TYPE;
  doSendMessageOnConnectionWithPrefixTestImpl(destType,destPrefix,destName,destAddress,annotationValue);
}

</code></pre>

<pre class="type-4 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test(timeout=20000) public void testReceiveMessageWithoutMessageId() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    connection.start();
    testPeer.expectBegin();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    Queue queue=session.createQueue("myQueue");
    DescribedType amqpValueNullContent=new AmqpValueDescribedType(null);
    testPeer.expectReceiverAttach();
    testPeer.expectLinkFlowRespondWithTransfer(null,null,null,null,amqpValueNullContent);
    testPeer.expectDispositionThatIsAcceptedAndSettled();
    MessageConsumer messageConsumer=session.createConsumer(queue);
    Message receivedMessage=messageConsumer.receive(3000);
    testPeer.waitForAllHandlersToComplete(2000);
    assertNull(receivedMessage.getJMSMessageID());
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that receiving a message with a binary typed message-id, and then sending a message which
 * uses the result of calling getJMSMessageID as the value for setJMSCorrelationId results in
 * transmission of the expected AMQP message content.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithBinaryMessageIdAndSendValueAsCorrelationId() throws Exception {
  recieveMessageIdSendCorrelationIdTestImpl(new Binary(new byte[]{(byte)0x00,(byte)0xCD,(byte)0xEF,(byte)0x01}));
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that the a connection with a 'queue prefix' set on it strips the
 * prefix from the content of the to/reply-to fields for incoming messages
 * if they don't have the 'destination type annotation' set.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithNoTypeAnnotationAndQueueDestinationsOnConnectionWithQueuePrefix() throws Exception {
  Class<? extends Destination> destType=Queue.class;
  String destPrefix="q12321-";
  String destName="myQueue";
  String replyName="myReplyQueue";
  String destAddress=destPrefix + destName;
  String replyAddress=destPrefix + replyName;
  String annotationName=null;
  Byte annotationValue=null;
  String replyAnnotationName=null;
  Byte replyAnnotationValue=null;
  doReceivedMessageOnConnectionWithPrefixTestImpl(destType,destPrefix,destName,replyName,destAddress,replyAddress,annotationName,annotationValue,replyAnnotationName,replyAnnotationValue);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that sending a message with a uuid typed correlation-id value which is a
 * message-id results in an AMQP message with the expected encoding of the correlation-id,
 * where the type is uuid, the "ID:" prefix of the JMSCorrelationID value is (obviously) not present, and there is
 * no presence of the message annotation to indicate an app-specific correlation-id.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testSentMessageWithUUIDCorrelationId() throws Exception {
  UUID uuid=UUID.randomUUID();
  String stringCorrelationId=AmqpMessageIdHelper.JMS_ID_PREFIX + AmqpMessageIdHelper.AMQP_UUID_PREFIX + uuid.toString();
  sentMessageWithCorrelationIdTestImpl(stringCorrelationId,uuid,false);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that the a connection with a 'topic prefix' set on it strips the
 * prefix from the content of the to/reply-to fields for incoming messages.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithTopicDestinationsOnConnectionWithTopicPrefix() throws Exception {
  Class<? extends Destination> destType=Topic.class;
  String destPrefix="t12321-";
  String destName="myTopic";
  String replyName="myReplyTopic";
  String destAddress=destPrefix + destName;
  String replyAddress=destPrefix + replyName;
  String annotationName=AmqpDestinationHelper.JMS_DEST_TYPE_MSG_ANNOTATION_SYMBOL_NAME;
  Byte annotationValue=AmqpDestinationHelper.TOPIC_TYPE;
  String replyAnnotationName=AmqpDestinationHelper.JMS_REPLY_TO_TYPE_MSG_ANNOTATION_SYMBOL_NAME;
  Byte replyAnnotationValue=AmqpDestinationHelper.TOPIC_TYPE;
  doReceivedMessageOnConnectionWithPrefixTestImpl(destType,destPrefix,destName,replyName,destAddress,replyAddress,annotationName,annotationValue,replyAnnotationName,replyAnnotationValue);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that receiving a message with a string typed message-id results in returning the
 * expected value for JMSMessageId where the JMS "ID:" prefix has been added.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithStringMessageIdReturnsExpectedJMSMessageID() throws Exception {
  receivedMessageWithMessageIdTestImpl("myTestMessageIdString");
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testReceiveMessageWithInvalidPropertyNameAndWithValidationDisabled() throws Exception {
  doReceiveMessageWithInvalidPropertyNameTestImpl(true);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that a connection with 'prefixes' set on it via broker-provided connection properties
 * strips the prefix from the to/reply-to fields for incoming messages with Queue destinations.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithQueueDestinationsOnConnectionWithBrokerDefinedPrefixProperties() throws Exception {
  Class<? extends Destination> destType=Queue.class;
  String destPrefix="q-broker-provided-prefix-";
  String destName="myQueue";
  String replyName="myReplyQueue";
  String destAddress=destPrefix + destName;
  String replyAddress=destPrefix + replyName;
  String annotationName=AmqpDestinationHelper.JMS_DEST_TYPE_MSG_ANNOTATION_SYMBOL_NAME;
  Byte annotationValue=AmqpDestinationHelper.QUEUE_TYPE;
  String replyAnnotationName=AmqpDestinationHelper.JMS_REPLY_TO_TYPE_MSG_ANNOTATION_SYMBOL_NAME;
  Byte replyAnnotationValue=AmqpDestinationHelper.QUEUE_TYPE;
  doReceivedMessageOnConnectionWithBrokerDefinedPrefixPropertiesTestImpl(destType,destPrefix,destName,replyName,destAddress,replyAddress,annotationName,annotationValue,replyAnnotationName,replyAnnotationValue);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testSendMessageWithInvalidPropertyNameAndWithValidationDisabled() throws Exception {
  doSendMessageWithInvalidPropertyNameTestImpl(true);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that the {@link AmqpDestinationHelper#JMS_REPLY_TO_TYPE_MSG_ANNOTATION_SYMBOL_NAME} is set as a byte on
 * a sent message to indicate its 'reply-to' address represents a Topic JMSDestination.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testSentMessageContainsReplyToTypeAnnotationByte() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    testPeer.expectBegin();
    testPeer.expectSenderAttach();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    String queueName="myQueue";
    String replyTopicName="myReplyTopic";
    MessageHeaderSectionMatcher headersMatcher=new MessageHeaderSectionMatcher(true).withDurable(equalTo(true));
    MessageAnnotationsSectionMatcher msgAnnotationsMatcher=new MessageAnnotationsSectionMatcher(true);
    Symbol annotationKey=AmqpMessageSupport.getSymbol(AmqpDestinationHelper.JMS_REPLY_TO_TYPE_MSG_ANNOTATION_SYMBOL_NAME);
    msgAnnotationsMatcher.withEntry(annotationKey,equalTo(AmqpDestinationHelper.TOPIC_TYPE));
    MessagePropertiesSectionMatcher propsMatcher=new MessagePropertiesSectionMatcher(true).withReplyTo(equalTo(replyTopicName));
    TransferPayloadCompositeMatcher messageMatcher=new TransferPayloadCompositeMatcher();
    messageMatcher.setHeadersMatcher(headersMatcher);
    messageMatcher.setMessageAnnotationsMatcher(msgAnnotationsMatcher);
    messageMatcher.setPropertiesMatcher(propsMatcher);
    testPeer.expectTransfer(messageMatcher);
    Topic replyTopic=session.createTopic(replyTopicName);
    Message message=session.createMessage();
    message.setJMSReplyTo(replyTopic);
    Queue queue=session.createQueue(queueName);
    MessageProducer producer=session.createProducer(queue);
    producer.send(message);
    testPeer.waitForAllHandlersToComplete(2000);
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that a connection with a 'prefixes' set on its does not alter the
 * address for a temporary queue in the to/reply-to fields for incoming messages.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithTemporaryTopicDestinationsOnConnectionWithPrefixes() throws Exception {
  Class<? extends Destination> destType=TemporaryTopic.class;
  String destPrefix="q12321-";
  String destName="temp-topic://myTempTopic";
  String replyName="temp-topic://myReplyTempTopic";
  String destAddress=destName;
  String replyAddress=replyName;
  String annotationName=AmqpDestinationHelper.JMS_DEST_TYPE_MSG_ANNOTATION_SYMBOL_NAME;
  Byte annotationValue=AmqpDestinationHelper.TEMP_TOPIC_TYPE;
  String replyAnnotationName=AmqpDestinationHelper.JMS_REPLY_TO_TYPE_MSG_ANNOTATION_SYMBOL_NAME;
  Byte replyAnnotationValue=AmqpDestinationHelper.TEMP_TOPIC_TYPE;
  doReceivedMessageOnConnectionWithPrefixTestImpl(destType,destPrefix,destName,replyName,destAddress,replyAddress,annotationName,annotationValue,replyAnnotationName,replyAnnotationValue);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that the a connection with a 'queue prefix' set on it via broker-provided connection
 * properties adds the prefix to the content of the to/reply-to fields for outgoing messages.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testSendMessageWithQueueDestinationsOnConnectionWithBrokerDefinedPrefixProperties() throws Exception {
  Class<? extends Destination> destType=Queue.class;
  String destPrefix="q-broker-provided-prefix-";
  String destName="myQueue";
  String destAddress=destPrefix + destName;
  Byte annotationValue=AmqpDestinationHelper.QUEUE_TYPE;
  doSendMessageOnConnectionWithBrokerDefinedPrefixPropertiesTestImpl(destType,destPrefix,destName,destAddress,annotationValue);
}

</code></pre>

<pre class="type-4 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * Tests that lack of the reply-to set on a message results in it returning null for JMSReplyTo
 * and not the consumer destination as happens for JMSDestination.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageFromQueueWithNoReplyToReturnsNull() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    connection.start();
    testPeer.expectBegin();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    Queue queue=session.createQueue("myQueue");
    PropertiesDescribedType props=new PropertiesDescribedType();
    props.setMessageId("myMessageIDString");
    DescribedType amqpValueNullContent=new AmqpValueDescribedType(null);
    testPeer.expectReceiverAttach();
    testPeer.expectLinkFlowRespondWithTransfer(null,null,props,null,amqpValueNullContent);
    testPeer.expectDispositionThatIsAcceptedAndSettled();
    MessageConsumer messageConsumer=session.createConsumer(queue);
    Message receivedMessage=messageConsumer.receive(3000);
    testPeer.waitForAllHandlersToComplete(3000);
    assertNotNull(receivedMessage);
    assertNull(receivedMessage.getJMSReplyTo());
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that the a connection with a 'topic prefix' set on it via broker-provided connection
 * properties adds the prefix to the content of the to/reply-to fields for outgoing messages.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testSendMessageWithTopicDestinationsOnConnectionWithBrokerDefinedPrefixProperties() throws Exception {
  Class<? extends Destination> destType=Topic.class;
  String destPrefix="t-broker-provided-prefix-";
  String destName="myTopic";
  String destAddress=destPrefix + destName;
  Byte annotationValue=AmqpDestinationHelper.TOPIC_TYPE;
  doSendMessageOnConnectionWithBrokerDefinedPrefixPropertiesTestImpl(destType,destPrefix,destName,destAddress,annotationValue);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that receiving a message with a string typed correlation-id results in returning the
 * expected value for JMSCorrelationID where the JMS "ID:" prefix has been added.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithStringCorrelationIdReturnsExpectedJMSCorrelationID() throws Exception {
  receivedMessageWithCorrelationIdTestImpl("myTestCorrelationIdString",false);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testSendMessageWithInvalidPropertyName() throws Exception {
  doSendMessageWithInvalidPropertyNameTestImpl(false);
}

</code></pre>

<pre class="type-4 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests that setting a non-zero value in the absolute-expiry-time field on a
 * message results in it returning this value for JMSExpiration
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageFromQueueWithAbsoluteExpiryReturnsJMSExpirationNonZero() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer,"?jms.localMessageExpiry=false");
    connection.start();
    testPeer.expectBegin();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    Queue queue=session.createQueue("myQueue");
    long timestamp=System.currentTimeMillis();
    PropertiesDescribedType props=new PropertiesDescribedType();
    props.setAbsoluteExpiryTime(new Date(timestamp));
    props.setMessageId("myMessageIDString");
    DescribedType amqpValueNullContent=new AmqpValueDescribedType(null);
    testPeer.expectReceiverAttach();
    testPeer.expectLinkFlowRespondWithTransfer(null,null,props,null,amqpValueNullContent);
    testPeer.expectDispositionThatIsAcceptedAndSettled();
    MessageConsumer messageConsumer=session.createConsumer(queue);
    Message receivedMessage=messageConsumer.receive(3000);
    testPeer.waitForAllHandlersToComplete(3000);
    assertNotNull(receivedMessage);
    assertEquals(timestamp,receivedMessage.getJMSExpiration());
  }
 }

</code></pre>

<pre class="type-4 type-5 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests that lack of any destination type annotation value (via either{@link AmqpDestinationHelper#JMS_REPLY_TO_TYPE_MSG_ANNOTATION_SYMBOL_NAME}or {@link AmqpMessageSupport#LEGACY_REPLY_TO_TYPE_MSG_ANNOTATION_SYMBOL_NAME}) set
 * on a message to indicate type of its 'reply-to' address results in it
 * being classed as the same type as the consumer destination.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageFromTopicWithReplyToWithoutTypeAnnotationResultsInUseOfConsumerDestinationType() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    connection.start();
    testPeer.expectBegin();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    Topic topic=session.createTopic("myTopic");
    String myReplyTopicAddress="myReplyTopicAddress";
    PropertiesDescribedType props=new PropertiesDescribedType();
    props.setReplyTo(myReplyTopicAddress);
    props.setMessageId("myMessageIDString");
    DescribedType amqpValueNullContent=new AmqpValueDescribedType(null);
    testPeer.expectReceiverAttach();
    testPeer.expectLinkFlowRespondWithTransfer(null,null,props,null,amqpValueNullContent);
    testPeer.expectDispositionThatIsAcceptedAndSettled();
    MessageConsumer messageConsumer=session.createConsumer(topic);
    Message receivedMessage=messageConsumer.receive(3000);
    testPeer.waitForAllHandlersToComplete(3000);
    assertNotNull(receivedMessage);
    Destination dest=receivedMessage.getJMSReplyTo();
    assertNotNull("JMSReplyTo should not be null",dest);
    assertTrue("Destination not of expected type: " + dest.getClass(),dest instanceof Topic);
    assertEquals(myReplyTopicAddress,((Topic)dest).getTopicName());
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that receiving a message with a ulong typed message-id, and then sending a message which
 * uses the result of calling getJMSMessageID as the value for setJMSCorrelationId results in
 * transmission of the expected AMQP message content.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithUlongMessageIdAndSendValueAsCorrelationId() throws Exception {
  recieveMessageIdSendCorrelationIdTestImpl(UnsignedLong.valueOf(123456789L));
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testSendMessageWithApplicationProperties() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    testPeer.expectBegin();
    testPeer.expectSenderAttach();
    Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    String queueName="myQueue";
    Queue queue=session.createQueue(queueName);
    MessageProducer producer=session.createProducer(queue);
    ApplicationPropertiesSectionMatcher appPropsMatcher=new ApplicationPropertiesSectionMatcher(true);
    appPropsMatcher.withEntry(NULL_STRING_PROP,nullValue());
    appPropsMatcher.withEntry(STRING_PROP,equalTo(STRING_PROP_VALUE));
    appPropsMatcher.withEntry(BOOLEAN_PROP,equalTo(BOOLEAN_PROP_VALUE));
    appPropsMatcher.withEntry(BYTE_PROP,equalTo(BYTE_PROP_VALUE));
    appPropsMatcher.withEntry(SHORT_PROP,equalTo(SHORT_PROP_VALUE));
    appPropsMatcher.withEntry(INT_PROP,equalTo(INT_PROP_VALUE));
    appPropsMatcher.withEntry(LONG_PROP,equalTo(LONG_PROP_VALUE));
    appPropsMatcher.withEntry(FLOAT_PROP,equalTo(FLOAT_PROP_VALUE));
    appPropsMatcher.withEntry(DOUBLE_PROP,equalTo(DOUBLE_PROP_VALUE));
    MessageHeaderSectionMatcher headersMatcher=new MessageHeaderSectionMatcher(true).withDurable(equalTo(true));
    MessageAnnotationsSectionMatcher msgAnnotationsMatcher=new MessageAnnotationsSectionMatcher(true);
    MessagePropertiesSectionMatcher propsMatcher=new MessagePropertiesSectionMatcher(true).withTo(equalTo(queueName));
    TransferPayloadCompositeMatcher messageMatcher=new TransferPayloadCompositeMatcher();
    messageMatcher.setHeadersMatcher(headersMatcher);
    messageMatcher.setMessageAnnotationsMatcher(msgAnnotationsMatcher);
    messageMatcher.setPropertiesMatcher(propsMatcher);
    messageMatcher.setApplicationPropertiesMatcher(appPropsMatcher);
    testPeer.expectTransfer(messageMatcher);
    Message message=session.createMessage();
    message.setStringProperty(NULL_STRING_PROP,NULL_STRING_PROP_VALUE);
    message.setStringProperty(STRING_PROP,STRING_PROP_VALUE);
    message.setBooleanProperty(BOOLEAN_PROP,BOOLEAN_PROP_VALUE);
    message.setByteProperty(BYTE_PROP,BYTE_PROP_VALUE);
    message.setShortProperty(SHORT_PROP,SHORT_PROP_VALUE);
    message.setIntProperty(INT_PROP,INT_PROP_VALUE);
    message.setLongProperty(LONG_PROP,LONG_PROP_VALUE);
    message.setFloatProperty(FLOAT_PROP,FLOAT_PROP_VALUE);
    message.setDoubleProperty(DOUBLE_PROP,DOUBLE_PROP_VALUE);
    producer.send(message);
    testPeer.waitForAllHandlersToComplete(1000);
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that receiving a message with a UUID typed message-id, and then sending a message which
 * uses the result of calling getJMSMessageID as the value for setJMSCorrelationId results in
 * transmission of the expected AMQP message content.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithUUIDMessageIdAndSendValueAsCorrelationId() throws Exception {
  recieveMessageIdSendCorrelationIdTestImpl(UUID.randomUUID());
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that a connection with 'prefixes' set on it via broker-provided connection properties
 * strips the prefix from the to/reply-to fields for incoming messages with Topic destinations.
 * @throws Exception if an error occurs during the test.
 */
@Test(timeout=20000) public void testReceivedMessageWithTopicDestinationsOnConnectionWithBrokerDefinedPrefixProperties() throws Exception {
  Class<? extends Destination> destType=Topic.class;
  String destPrefix="t-broker-provided-prefix-";
  String destName="myTopic";
  String replyName="myReplyTopic";
  String destAddress=destPrefix + destName;
  String replyAddress=destPrefix + replyName;
  String annotationName=AmqpDestinationHelper.JMS_DEST_TYPE_MSG_ANNOTATION_SYMBOL_NAME;
  Byte annotationValue=AmqpDestinationHelper.TOPIC_TYPE;
  String replyAnnotationName=AmqpDestinationHelper.JMS_REPLY_TO_TYPE_MSG_ANNOTATION_SYMBOL_NAME;
  Byte replyAnnotationValue=AmqpDestinationHelper.TOPIC_TYPE;
  doReceivedMessageOnConnectionWithBrokerDefinedPrefixPropertiesTestImpl(destType,destPrefix,destName,replyName,destAddress,replyAddress,annotationName,annotationValue,replyAnnotationName,replyAnnotationValue);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
