<h3><span class=" glyphicon glyphicon-tag"/>&nbspIterativeVerifier</h3><kbd>Verifies assertions in iterations</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.qpid.jms.consumer.JmsClientAckTest </h4><pre class="type-13 type-4 type-5 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testUnAckedAsyncMessagesGetRedeliveredMultipleTimes() throws Exception {
  final int MESSAGE_COUNT=30;
  final int ITERATIONS=20;
  connection=createAmqpConnection();
  connection.start();
  Session session=connection.createSession(false,Session.CLIENT_ACKNOWLEDGE);
  Queue queue=session.createQueue(name.getMethodName());
  session.close();
  sendMessages(connection,queue,MESSAGE_COUNT);
  final QueueViewMBean proxy=getProxyToQueue(name.getMethodName());
  assertTrue("Queue didn't receive all messages",Wait.waitFor(new Wait.Condition(){
    @Override public boolean isSatisified() throws Exception {
      return proxy.getQueueSize() == MESSAGE_COUNT;
    }
  }
));
  for (int i=0; i < ITERATIONS; ++i) {
    session=connection.createSession(false,Session.CLIENT_ACKNOWLEDGE);
    MessageConsumer consumer=session.createConsumer(queue);
    consumer.setMessageListener(new MessageListener(){
      @Override public void onMessage(      Message message){
      }
    }
);
    session.close();
  }
  assertEquals(MESSAGE_COUNT,proxy.getQueueSize());
  session=connection.createSession(false,Session.CLIENT_ACKNOWLEDGE);
  MessageConsumer consumer=session.createConsumer(queue);
  for (int i=0; i < MESSAGE_COUNT; ++i) {
    Message msg=consumer.receive(3000);
    assertNotNull(msg);
    msg.acknowledge();
  }
  assertTrue("Queued message not consumed.",Wait.waitFor(new Wait.Condition(){
    @Override public boolean isSatisified() throws Exception {
      return proxy.getQueueSize() == 0;
    }
  }
));
}

</code></pre>

<br>
<pre class="type-13 type-4 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testReceiveSomeThenRecover() throws Exception {
  connection=createAmqpConnection();
  connection.start();
  int totalCount=5;
  int consumeBeforeRecover=2;
  Session session=connection.createSession(false,Session.CLIENT_ACKNOWLEDGE);
  Queue queue=session.createQueue(name.getMethodName());
  sendMessages(connection,queue,totalCount);
  QueueViewMBean proxy=getProxyToQueue(name.getMethodName());
  assertEquals(totalCount,proxy.getQueueSize());
  MessageConsumer consumer=session.createConsumer(queue);
  for (int i=1; i <= consumeBeforeRecover; i++) {
    Message message=consumer.receive(3000);
    assertNotNull(message);
    assertEquals("Unexpected message number",i,message.getIntProperty(QpidJmsTestSupport.MESSAGE_NUMBER));
  }
  session.recover();
  assertEquals(totalCount,proxy.getQueueSize());
  List<Integer> messageNumbers=new ArrayList<Integer>();
  for (int i=1; i <= totalCount; i++) {
    Message message=consumer.receive(3000);
    assertNotNull("Failed to receive message: " + i,message);
    int msgNum=message.getIntProperty(QpidJmsTestSupport.MESSAGE_NUMBER);
    messageNumbers.add(msgNum);
    if (i == totalCount) {
      message.acknowledge();
    }
  }
  assertEquals("Unexpected size of list",totalCount,messageNumbers.size());
  for (int i=0; i < messageNumbers.size(); i++) {
    assertEquals("Unexpected order of messages: " + messageNumbers,Integer.valueOf(i + 1),messageNumbers.get(i));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.qpid.jms.consumer.JmsConsumerPriorityDispatchTest </h4><pre class="type-13 type-4 type-5 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testPrefetchedMessageArePriorityOrdered() throws Exception {
  final CountDownLatch received=new CountDownLatch(MSG_COUNT);
  connection=createAmqpConnection();
  JmsConnection jmsConnection=(JmsConnection)connection;
  jmsConnection.setLocalMessagePriority(true);
  jmsConnection.addConnectionListener(new JmsConnectionListener(){
    @Override public void onInboundMessage(    JmsInboundMessageDispatch envelope){
      received.countDown();
    }
    @Override public void onConnectionRestored(    URI remoteURI){
    }
    @Override public void onConnectionInterrupted(    URI remoteURI){
    }
    @Override public void onConnectionFailure(    Throwable error){
    }
    @Override public void onConnectionEstablished(    URI remoteURI){
    }
  }
);
  connection.start();
  Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
  Queue queue=session.createQueue(name.getMethodName());
  MessageProducer producer=session.createProducer(queue);
  MessageConsumer consumer=session.createConsumer(queue);
  Message message=null;
  for (int i=0; i < MSG_COUNT; i++) {
    message=session.createTextMessage();
    producer.setPriority(i);
    producer.send(message);
  }
  assertTrue("Failed to receive all messages",received.await(10,TimeUnit.SECONDS));
  for (int i=MSG_COUNT - 1; i >= 0; i--) {
    message=consumer.receive(5000);
    assertNotNull(message);
    assertEquals(i,message.getJMSPriority());
  }
}

</code></pre>

<br>
<pre class="type-13 type-4 type-5 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testPrefetchedMessageAreNotPriorityOrdered() throws Exception {
  final CountDownLatch received=new CountDownLatch(MSG_COUNT);
  connection=createAmqpConnection();
  JmsConnection jmsConnection=(JmsConnection)connection;
  jmsConnection.addConnectionListener(new JmsConnectionListener(){
    @Override public void onInboundMessage(    JmsInboundMessageDispatch envelope){
      received.countDown();
    }
    @Override public void onConnectionRestored(    URI remoteURI){
    }
    @Override public void onConnectionInterrupted(    URI remoteURI){
    }
    @Override public void onConnectionFailure(    Throwable error){
    }
    @Override public void onConnectionEstablished(    URI remoteURI){
    }
  }
);
  assertFalse("Client side priority ordering expected to be disabled for this test",jmsConnection.isLocalMessagePriority());
  connection.start();
  Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
  Queue queue=session.createQueue(name.getMethodName());
  MessageProducer producer=session.createProducer(queue);
  MessageConsumer consumer=session.createConsumer(queue);
  Message message=null;
  for (int i=0; i < 10; i++) {
    message=session.createTextMessage();
    producer.setPriority(i);
    producer.send(message);
  }
  assertTrue("Failed to receive all messages",received.await(10,TimeUnit.SECONDS));
  for (int i=0; i < 10; i++) {
    message=consumer.receive(5000);
    assertNotNull(message);
    assertEquals(i,message.getJMSPriority());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.qpid.jms.consumer.JmsDurableSubscriberTest </h4><pre class="type-13 type-4 type-5 type-7 type-9 type-8 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("Fails currently as ActiveMQ doesn't update the recovered subscription") @Test public void testDurableResubscribeWithNewNoLocalValue() throws Exception {
  connection=createAmqpConnection();
  connection.setClientID("DURABLE-AMQP");
  connection.start();
  Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
  Topic topic=session.createTopic(getDestinationName());
  MessageConsumer durableSubscriber=session.createDurableSubscriber(topic,getSubscriptionName(),null,true);
  MessageConsumer nonDurableSubscriber=session.createConsumer(topic);
  publishToTopic(session,topic);
  LOG.debug("Testing that noLocal=true subscription doesn't get any messages.");
  for (int i=0; i < MSG_COUNT; ++i) {
    Message message=nonDurableSubscriber.receive(5000);
    assertNotNull(message);
  }
{
    Message message=durableSubscriber.receive(2000);
    assertNull(message);
  }
  publishToTopic(session,topic);
  assertEquals(1,brokerService.getAdminView().getDurableTopicSubscribers().length);
  assertEquals(0,brokerService.getAdminView().getInactiveDurableTopicSubscribers().length);
  durableSubscriber.close();
  assertTrue("Should have no durables.",Wait.waitFor(new Wait.Condition(){
    @Override public boolean isSatisified() throws Exception {
      return brokerService.getAdminView().getDurableTopicSubscribers().length == 0;
    }
  }
));
  assertTrue("Should have an inactive sub.",Wait.waitFor(new Wait.Condition(){
    @Override public boolean isSatisified() throws Exception {
      return brokerService.getAdminView().getInactiveDurableTopicSubscribers().length == 1;
    }
  }
));
  LOG.debug("Testing that updated noLocal=false subscription does get any messages.");
  durableSubscriber=session.createDurableSubscriber(topic,getSubscriptionName(),null,false);
  assertEquals(1,brokerService.getAdminView().getDurableTopicSubscribers().length);
  assertEquals(0,brokerService.getAdminView().getInactiveDurableTopicSubscribers().length);
{
    Message message=durableSubscriber.receive(2000);
    assertNull(message);
  }
  publishToTopic(session,topic);
  for (int i=0; i < MSG_COUNT; ++i) {
    Message message=durableSubscriber.receive(5000);
    assertNotNull("Should get local messages now",message);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.qpid.jms.consumer.JmsMessageConsumerTest </h4><pre class="type-13 type-4 type-5 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testMessageAvailableConsumer() throws Exception {
  connection=createAmqpConnection();
  connection.start();
  final int MSG_COUNT=10;
  final AtomicInteger available=new AtomicInteger();
  Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
  assertNotNull(session);
  Queue queue=session.createQueue(name.getMethodName());
  MessageConsumer consumer=session.createConsumer(queue);
  ((JmsMessageConsumer)consumer).setAvailableListener(new JmsMessageAvailableListener(){
    @Override public void onMessageAvailable(    MessageConsumer consumer){
      available.incrementAndGet();
    }
  }
);
  sendToAmqQueue(MSG_COUNT);
  final QueueViewMBean proxy=getProxyToQueue(name.getMethodName());
  assertEquals(MSG_COUNT,proxy.getQueueSize());
  assertTrue("Listener not notified of correct number of messages.",Wait.waitFor(new Wait.Condition(){
    @Override public boolean isSatisified() throws Exception {
      return available.get() == MSG_COUNT;
    }
  }
));
  for (int i=0; i < MSG_COUNT; ++i) {
    assertNotNull(consumer.receiveNoWait());
  }
  assertTrue("Queued message not consumed.",Wait.waitFor(new Wait.Condition(){
    @Override public boolean isSatisified() throws Exception {
      return proxy.getQueueSize() == 0;
    }
  }
));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.qpid.jms.consumer.JmsMessageGroupTest </h4><pre class="type-13 type-4 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testGroupedMessagesDeliveredToOnlyOneConsumer() throws Exception {
  connection=createAmqpConnection();
  connection.start();
  Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
  Queue queue=session.createQueue(name.getMethodName());
  MessageConsumer consumer1=session.createConsumer(queue);
  MessageProducer producer=session.createProducer(queue);
  for (int i=0; i < 4; i++) {
    TextMessage message=session.createTextMessage("message " + i);
    message.setStringProperty("JMSXGroupID","TEST-GROUP");
    message.setIntProperty("JMSXGroupSeq",i + 1);
    LOG.info("sending message: " + message);
    producer.send(message);
  }
  for (int i=0; i < 3; i++) {
    TextMessage m1=(TextMessage)consumer1.receive(3000);
    assertNotNull("m1 is null for index: " + i,m1);
    assertEquals(m1.getIntProperty("JMSXGroupSeq"),i + 1);
  }
  Connection connection1=createAmqpConnection();
  connection1.start();
  Session session2=connection1.createSession(false,Session.AUTO_ACKNOWLEDGE);
  MessageConsumer consumer2=session2.createConsumer(queue);
  consumer1.close();
  for (int i=0; i < 1; i++) {
    TextMessage m1=(TextMessage)consumer2.receive(3000);
    assertNotNull("m1 is null for index: " + i,m1);
    assertEquals(m1.getIntProperty("JMSXGroupSeq"),4 + i);
  }
  Message m=consumer2.receive(100);
  assertNull("consumer 2 has some messages left",m);
  connection1.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.qpid.jms.consumer.JmsQueueBrowserTest </h4><pre class="type-13 type-6 type-4 type-5 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=40000) public void testBrowseAllInQueue() throws Exception {
  connection=createAmqpConnection();
  connection.start();
  Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
  assertNotNull(session);
  Queue queue=session.createQueue(getDestinationName());
  sendToAmqQueue(5);
  QueueViewMBean proxy=getProxyToQueue(getDestinationName());
  assertEquals(5,proxy.getQueueSize());
  QueueBrowser browser=session.createBrowser(queue);
  assertNotNull(browser);
  Enumeration enumeration=browser.getEnumeration();
  int count=0;
  while (enumeration.hasMoreElements()) {
    Message msg=(Message)enumeration.nextElement();
    assertNotNull(msg);
    LOG.debug("Recv: {}",msg);
    count++;
    TimeUnit.MILLISECONDS.sleep(50);
  }
  assertFalse(enumeration.hasMoreElements());
  assertEquals(5,count);
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-5 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testBrowseAllInQueueSmallPrefetch() throws Exception {
  connection=createAmqpConnection();
  ((JmsConnection)connection).getPrefetchPolicy().setQueueBrowserPrefetch(10);
  connection.start();
  final int MSG_COUNT=30;
  Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
  assertNotNull(session);
  Queue queue=session.createQueue(getDestinationName());
  sendToAmqQueue(MSG_COUNT);
  QueueViewMBean proxy=getProxyToQueue(getDestinationName());
  assertEquals(MSG_COUNT,proxy.getQueueSize());
  QueueBrowser browser=session.createBrowser(queue);
  assertNotNull(browser);
  Enumeration enumeration=browser.getEnumeration();
  int count=0;
  while (enumeration.hasMoreElements()) {
    Message msg=(Message)enumeration.nextElement();
    assertNotNull(msg);
    LOG.debug("Recv: {}",msg);
    count++;
  }
  assertFalse(enumeration.hasMoreElements());
  assertEquals(MSG_COUNT,count);
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-5 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000) public void testBroseOneInQueue() throws Exception {
  connection=createAmqpConnection();
  connection.start();
  Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
  Queue queue=session.createQueue(getDestinationName());
  MessageProducer producer=session.createProducer(queue);
  producer.send(session.createTextMessage("hello"));
  producer.close();
  QueueBrowser browser=session.createBrowser(queue);
  Enumeration enumeration=browser.getEnumeration();
  while (enumeration.hasMoreElements()) {
    Message m=(Message)enumeration.nextElement();
    assertTrue(m instanceof TextMessage);
    LOG.debug("Browsed message {} from Queue {}",m,queue);
  }
  browser.close();
  MessageConsumer consumer=session.createConsumer(queue);
  Message msg=consumer.receive(5000);
  assertNotNull(msg);
  assertTrue(msg instanceof TextMessage);
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-5 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=40000) public void testBrowseAllInQueueZeroPrefetch() throws Exception {
  connection=createAmqpConnection();
  JmsConnection jmsConnection=(JmsConnection)connection;
  jmsConnection.getPrefetchPolicy().setQueueBrowserPrefetch(0);
  connection.start();
  Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
  assertNotNull(session);
  Queue queue=session.createQueue(getDestinationName());
  sendToAmqQueue(5);
  QueueViewMBean proxy=getProxyToQueue(getDestinationName());
  assertEquals(5,proxy.getQueueSize());
  QueueBrowser browser=session.createBrowser(queue);
  assertNotNull(browser);
  Enumeration enumeration=browser.getEnumeration();
  int count=0;
  while (enumeration.hasMoreElements()) {
    Message msg=(Message)enumeration.nextElement();
    assertNotNull(msg);
    LOG.debug("Recv: {}",msg);
    count++;
  }
  assertFalse(enumeration.hasMoreElements());
  assertEquals(5,count);
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-5 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=40000) public void testQueueBrowserInTxSessionLeavesOtherWorkUnaffected() throws Exception {
  connection=createAmqpConnection();
  connection.start();
  Session session=connection.createSession(true,Session.SESSION_TRANSACTED);
  assertNotNull(session);
  Queue queue=session.createQueue(getDestinationName());
  sendToAmqQueue(5);
  QueueViewMBean proxy=getProxyToQueue(getDestinationName());
  assertEquals(5,proxy.getQueueSize());
  MessageProducer txProducer=session.createProducer(queue);
  for (int i=0; i < 5; ++i) {
    txProducer.send(session.createMessage());
  }
  assertEquals(5,proxy.getQueueSize());
  QueueBrowser browser=session.createBrowser(queue);
  assertNotNull(browser);
  Enumeration enumeration=browser.getEnumeration();
  int count=0;
  while (enumeration.hasMoreElements()) {
    Message msg=(Message)enumeration.nextElement();
    assertNotNull(msg);
    LOG.debug("Recv: {}",msg);
    count++;
  }
  assertFalse(enumeration.hasMoreElements());
  assertEquals(5,count);
  browser.close();
  assertEquals(5,proxy.getQueueSize());
  session.commit();
  assertEquals(10,proxy.getQueueSize());
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-5 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=40000) public void testBrowseAllInQueueTxSession() throws Exception {
  connection=createAmqpConnection();
  connection.start();
  Session session=connection.createSession(true,Session.SESSION_TRANSACTED);
  assertNotNull(session);
  Queue queue=session.createQueue(getDestinationName());
  sendToAmqQueue(5);
  QueueViewMBean proxy=getProxyToQueue(getDestinationName());
  assertEquals(5,proxy.getQueueSize());
  QueueBrowser browser=session.createBrowser(queue);
  assertNotNull(browser);
  Enumeration enumeration=browser.getEnumeration();
  int count=0;
  while (enumeration.hasMoreElements()) {
    Message msg=(Message)enumeration.nextElement();
    assertNotNull(msg);
    LOG.debug("Recv: {}",msg);
    count++;
  }
  assertFalse(enumeration.hasMoreElements());
  assertEquals(5,count);
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-5 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=40000) public void testBrowseAllInQueuePrefetchOne() throws Exception {
  connection=createAmqpConnection();
  JmsConnection jmsConnection=(JmsConnection)connection;
  jmsConnection.getPrefetchPolicy().setQueueBrowserPrefetch(1);
  connection.start();
  Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
  assertNotNull(session);
  Queue queue=session.createQueue(getDestinationName());
  sendToAmqQueue(5);
  QueueViewMBean proxy=getProxyToQueue(getDestinationName());
  assertEquals(5,proxy.getQueueSize());
  QueueBrowser browser=session.createBrowser(queue);
  assertNotNull(browser);
  Enumeration enumeration=browser.getEnumeration();
  int count=0;
  while (enumeration.hasMoreElements()) {
    Message msg=(Message)enumeration.nextElement();
    assertNotNull(msg);
    LOG.debug("Recv: {}",msg);
    count++;
  }
  assertFalse(enumeration.hasMoreElements());
  assertEquals(5,count);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.qpid.jms.failover.JmsTxConsumerFailoverTest </h4><pre class="type-13 type-11 type-4 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testTxConsumerReceiveWorksAfterFailoverButCommitFails() throws Exception {
  URI brokerURI=new URI(getAmqpFailoverURI());
  connection=createAmqpConnection(brokerURI);
  connection.start();
  final int MSG_COUNT=10;
  final Session session=connection.createSession(true,Session.SESSION_TRANSACTED);
  Queue queue=session.createQueue(name.getMethodName());
  final MessageConsumer consumer=session.createConsumer(queue);
  sendMessages(connection,queue,MSG_COUNT);
  QueueViewMBean proxy=getProxyToQueue(name.getMethodName());
  assertEquals(MSG_COUNT,proxy.getQueueSize());
  for (int i=0; i < MSG_COUNT / 2; ++i) {
    Message received=consumer.receive(3000);
    assertNotNull("Mesage was not expected but not received",received);
    LOG.info("consumer received message #{} - {}",i + 1,received.getJMSMessageID());
  }
  assertEquals(MSG_COUNT,proxy.getQueueSize());
  stopPrimaryBroker();
  restartPrimaryBroker();
  proxy=getProxyToQueue(name.getMethodName());
  assertEquals(MSG_COUNT,proxy.getQueueSize());
  for (int i=0; i < MSG_COUNT / 2; ++i) {
    Message received=consumer.receive(3000);
    assertNotNull("Mesage was not expected but not received",received);
    LOG.info("consumer received message #{} - {}",i + 1,received.getJMSMessageID());
  }
  try {
    session.commit();
    fail("Session commit should have failed with TX rolled back.");
  }
 catch (  TransactionRolledBackException rb) {
    LOG.info("Transacted commit failed after failover: {}",rb.getMessage());
  }
  assertEquals(MSG_COUNT,proxy.getQueueSize());
}

</code></pre>

<br>
<pre class="type-13 type-11 type-4 type-5 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testTxConsumerReceiveAfterFailoverCommits() throws Exception {
  URI brokerURI=new URI(getAmqpFailoverURI());
  connection=createAmqpConnection(brokerURI);
  connection.start();
  final int MSG_COUNT=5;
  final Session session=connection.createSession(true,Session.SESSION_TRANSACTED);
  Queue queue=session.createQueue(name.getMethodName());
  final MessageConsumer consumer=session.createConsumer(queue);
  sendMessages(connection,queue,MSG_COUNT);
  QueueViewMBean proxy=getProxyToQueue(name.getMethodName());
  assertEquals(MSG_COUNT,proxy.getQueueSize());
  stopPrimaryBroker();
  restartPrimaryBroker();
  assertTrue("Should have a new connection.",Wait.waitFor(new Wait.Condition(){
    @Override public boolean isSatisified() throws Exception {
      return brokerService.getAdminView().getCurrentConnectionsCount() == 1;
    }
  }
,TimeUnit.SECONDS.toMillis(30),TimeUnit.MILLISECONDS.toMillis(100)));
  assertTrue("Should have a recovered consumer.",Wait.waitFor(new Wait.Condition(){
    @Override public boolean isSatisified() throws Exception {
      return brokerService.getAdminView().getQueueSubscribers().length == 1;
    }
  }
,TimeUnit.SECONDS.toMillis(30),TimeUnit.MILLISECONDS.toMillis(50)));
  for (int i=0; i < MSG_COUNT; ++i) {
    Message received=consumer.receive(3000);
    assertNotNull("Mesage was not expected but not received",received);
  }
  try {
    session.commit();
    LOG.info("Transacted commit ok after failover.");
  }
 catch (  TransactionRolledBackException rb) {
    fail("Session commit should not have failed with TX rolled back.");
  }
  assertEquals(0,proxy.getQueueSize());
}

</code></pre>

<br>
<pre class="type-13 type-11 type-4 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testTxConsumerReceiveThenFailoverCommitFails() throws Exception {
  URI brokerURI=new URI(getAmqpFailoverURI());
  connection=createAmqpConnection(brokerURI);
  connection.start();
  final int MSG_COUNT=5;
  final Session session=connection.createSession(true,Session.SESSION_TRANSACTED);
  Queue queue=session.createQueue(name.getMethodName());
  final MessageConsumer consumer=session.createConsumer(queue);
  sendMessages(connection,queue,MSG_COUNT);
  QueueViewMBean proxy=getProxyToQueue(name.getMethodName());
  assertEquals(MSG_COUNT,proxy.getQueueSize());
  for (int i=0; i < MSG_COUNT; ++i) {
    Message received=consumer.receive(3000);
    assertNotNull("Mesage was not expected but not received",received);
  }
  stopPrimaryBroker();
  restartPrimaryBroker();
  proxy=getProxyToQueue(name.getMethodName());
  assertEquals(MSG_COUNT,proxy.getQueueSize());
  try {
    LOG.info("Session commit firing after connection failed.");
    session.commit();
    fail("Session commit should have failed with TX rolled back.");
  }
 catch (  TransactionRolledBackException rb) {
    LOG.info("Transacted commit failed after failover: {}",rb.getMessage());
  }
  assertEquals(MSG_COUNT,proxy.getQueueSize());
}

</code></pre>

<br>
<pre class="type-13 type-11 type-4 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testTxConsumerRollbackAfterFailoverGetsNoErrors() throws Exception {
  URI brokerURI=new URI(getAmqpFailoverURI());
  connection=createAmqpConnection(brokerURI);
  connection.start();
  final int MSG_COUNT=5;
  final Session session=connection.createSession(true,Session.SESSION_TRANSACTED);
  Queue queue=session.createQueue(name.getMethodName());
  final MessageConsumer consumer=session.createConsumer(queue);
  sendMessages(connection,queue,MSG_COUNT);
  QueueViewMBean proxy=getProxyToQueue(name.getMethodName());
  assertEquals(MSG_COUNT,proxy.getQueueSize());
  for (int i=0; i < MSG_COUNT; ++i) {
    Message received=consumer.receive(3000);
    assertNotNull("Mesage was not expected but not received",received);
  }
  proxy=getProxyToQueue(name.getMethodName());
  assertEquals(MSG_COUNT,proxy.getQueueSize());
  stopPrimaryBroker();
  restartPrimaryBroker();
  proxy=getProxyToQueue(name.getMethodName());
  assertEquals(MSG_COUNT,proxy.getQueueSize());
  try {
    LOG.info("Transacted being rolled back after failover");
    session.rollback();
    LOG.info("Transacted rollback after failover");
  }
 catch (  JMSException ex) {
    LOG.info("Caught unexpected error: {}",ex.getMessage());
    fail("Session rollback should not have failed.");
  }
  assertEquals(MSG_COUNT,proxy.getQueueSize());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.qpid.jms.integration.ConsumerIntegrationTest </h4><pre class="type-13 type-4 type-5 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=20000) public void testCloseDurableSubscriberWithUnackedAnUnconsumedPrefetchedMessages() throws Exception {
  try (TestAmqpPeer testPeer=new TestAmqpPeer()){
    Connection connection=testFixture.establishConnecton(testPeer);
    connection.start();
    testPeer.expectBegin();
    Session session=connection.createSession(false,Session.CLIENT_ACKNOWLEDGE);
    String topicName="myTopic";
    String subscriptionName="mySubscription";
    Topic topic=session.createTopic(topicName);
    int messageCount=5;
    testPeer.expectDurableSubscriberAttach(topicName,subscriptionName);
    testPeer.expectLinkFlowRespondWithTransfer(null,null,null,null,new AmqpValueDescribedType("content"),messageCount);
    MessageConsumer consumer=session.createDurableSubscriber(topic,subscriptionName);
    int consumeCount=2;
    for (int i=1; i <= consumeCount; i++) {
      Message receivedMessage=consumer.receive(3000);
      assertNotNull(receivedMessage);
      assertTrue(receivedMessage instanceof TextMessage);
    }
    testPeer.expectDetach(false,true,false);
    for (int i=1; i <= consumeCount; i++) {
      testPeer.expectDisposition(true,new ModifiedMatcher().withDeliveryFailed(equalTo(true)));
    }
    for (int i=consumeCount + 1; i <= messageCount; i++) {
      testPeer.expectDisposition(true,new ReleasedMatcher());
    }
    testPeer.expectEnd();
    consumer.close();
    session.close();
    testPeer.waitForAllHandlersToComplete(3000);
    testPeer.expectClose();
    connection.close();
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.qpid.jms.message.JmsBytesMessageTest </h4><pre class="type-13 type-5 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values related to public fields.
"></span><br>
@Test public void testReadBytesbyteArray() throws JMSException {
  JmsBytesMessage msg=factory.createBytesMessage();
  byte[] data=new byte[50];
  for (int i=0; i < data.length; i++) {
    data[i]=(byte)i;
  }
  msg.writeBytes(data);
  msg.reset();
  byte[] test=new byte[data.length];
  msg.readBytes(test);
  for (int i=0; i < test.length; i++) {
    assertTrue(test[i] == i);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.qpid.jms.producer.JmsMessageProducerTest </h4><pre class="type-13 type-4 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=20000) public void testProducerWithNoMessageIdCanBeConsumed() throws Exception {
  connection=createAmqpConnection();
  assertNotNull(connection);
  connection.start();
  Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
  assertNotNull(session);
  Queue queue=session.createQueue(name.getMethodName());
  MessageProducer producer=session.createProducer(queue);
  producer.setDisableMessageID(true);
  QueueViewMBean proxy=getProxyToQueue(name.getMethodName());
  assertEquals(0,proxy.getQueueSize());
  for (int i=0; i < 10; ++i) {
    Message message=session.createMessage();
    producer.send(message);
  }
  assertEquals(10,proxy.getQueueSize());
  MessageConsumer consumer=session.createConsumer(queue);
  for (int i=0; i < 10; i++) {
    Message message=consumer.receive(5000);
    assertNotNull(message);
    assertEquals(0,message.getJMSExpiration());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.qpid.jms.provider.failover.FailoverUriPoolTest </h4><pre class="type-13 type-6 type-4 type-5 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNestedOptionsAreApplied() throws URISyntaxException {
  Map<String,String> nested=new HashMap<String,String>();
  nested.put("transport.tcpNoDelay","true");
  nested.put("transport.tcpKeepAlive","false");
  FailoverUriPool pool=new FailoverUriPool(uris,nested);
  assertNotNull(pool.getNestedOptions());
  assertFalse(pool.getNestedOptions().isEmpty());
  for (int i=0; i < uris.size(); ++i) {
    URI next=pool.getNext();
    assertNotNull(next);
    String query=next.getQuery();
    assertNotNull(query);
    assertFalse(query.isEmpty());
    Map<String,String> options=URISupport.parseParameters(next);
    assertFalse(options.isEmpty());
    assertTrue(options.containsKey("transport.tcpNoDelay"));
    assertTrue(options.containsKey("transport.tcpKeepAlive"));
    assertEquals("true",options.get("transport.tcpNoDelay"));
    assertEquals("false",options.get("transport.tcpKeepAlive"));
  }
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddFirst() throws URISyntaxException {
  URI newUri=new URI("tcp://192.168.2." + (uris.size() + 1) + ":5672");
  FailoverUriPool pool=new FailoverUriPool(uris,null);
  pool.setRandomize(false);
  pool.addFirst(newUri);
  assertEquals(newUri,pool.getNext());
  for (int i=0; i < uris.size(); ++i) {
    assertNotEquals(newUri,pool.getNext());
  }
  assertEquals(newUri,pool.getNext());
}

</code></pre>

<br>
<pre class="type-13 type-4 type-5 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveURIWhenNestedOptionsSet() throws URISyntaxException {
  Map<String,String> nested=new HashMap<String,String>();
  nested.put("transport.tcpNoDelay","true");
  nested.put("transport.tcpKeepAlive","false");
  FailoverUriPool pool=new FailoverUriPool(uris,nested);
  assertNotNull(pool.getNestedOptions());
  assertFalse(pool.getNestedOptions().isEmpty());
  for (int i=0; i < uris.size(); ++i) {
    assertTrue(pool.remove(uris.get(i)));
    assertEquals(uris.size() - (i + 1),pool.size());
  }
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddUriToPoolNotRandomized() throws URISyntaxException {
  URI newUri=new URI("tcp://192.168.2." + (uris.size() + 1) + ":5672");
  FailoverUriPool pool=new FailoverUriPool(uris,null);
  pool.setRandomize(false);
  pool.add(newUri);
  for (int i=0; i < uris.size(); ++i) {
    assertNotEquals(newUri,pool.getNext());
  }
  assertEquals(newUri,pool.getNext());
}

</code></pre>

<br>
<pre class="type-13 type-20 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testRemoveURIFromPool() throws URISyntaxException {
  FailoverUriPool pool=new FailoverUriPool(uris,null);
  pool.setRandomize(false);
  URI removed=uris.get(0);
  pool.remove(removed);
  for (int i=0; i < uris.size() + 1; ++i) {
    if (removed.equals(pool.getNext())) {
      fail("URI was not removed from the pool");
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.qpid.jms.transactions.JmsTransactedConsumerTest </h4><pre class="type-13 type-20 type-4 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=60000) public void testSingleConsumedMessagePerTxCase() throws Exception {
  connection=createAmqpConnection();
  connection.start();
  Session session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
  Destination queue=session.createQueue(getTestName());
  MessageProducer messageProducer=session.createProducer(queue);
  for (int i=0; i < MSG_COUNT; i++) {
    TextMessage message=session.createTextMessage();
    message.setText("test" + i);
    messageProducer.send(message,DeliveryMode.PERSISTENT,javax.jms.Message.DEFAULT_PRIORITY,javax.jms.Message.DEFAULT_TIME_TO_LIVE);
  }
  session.close();
  QueueViewMBean queueView=getProxyToQueue(getTestName());
  assertEquals(MSG_COUNT,queueView.getQueueSize());
  int counter=0;
  session=connection.createSession(true,Session.SESSION_TRANSACTED);
  MessageConsumer messageConsumer=session.createConsumer(queue);
  do {
    TextMessage message=(TextMessage)messageConsumer.receive(1000);
    if (message != null) {
      counter++;
      LOG.info("Message n. {} with content '{}' has been recieved.",counter,message.getText());
      session.commit();
      LOG.info("Transaction has been committed.");
      assertEquals(MSG_COUNT - counter,queueView.getQueueSize());
    }
  }
 while (counter < MSG_COUNT);
  assertEquals(0,queueView.getQueueSize());
  session.close();
}

</code></pre>

<br>
<pre class="type-13 type-4 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testReceiveSomeThenRollback() throws Exception {
  connection=createAmqpConnection();
  connection.start();
  int totalCount=5;
  int consumeBeforeRollback=2;
  sendToAmqQueue(totalCount);
  QueueViewMBean proxy=getProxyToQueue(name.getMethodName());
  assertEquals(totalCount,proxy.getQueueSize());
  Session session=connection.createSession(true,Session.SESSION_TRANSACTED);
  Queue queue=session.createQueue(name.getMethodName());
  MessageConsumer consumer=session.createConsumer(queue);
  for (int i=1; i <= consumeBeforeRollback; i++) {
    Message message=consumer.receive(3000);
    assertNotNull(message);
    assertEquals("Unexpected message number",i,message.getIntProperty(QpidJmsTestSupport.MESSAGE_NUMBER));
  }
  session.rollback();
  assertEquals(totalCount,proxy.getQueueSize());
  List<Integer> messageNumbers=new ArrayList<Integer>();
  for (int i=1; i <= totalCount; i++) {
    Message message=consumer.receive(3000);
    assertNotNull("Failed to receive message: " + i,message);
    int msgNum=message.getIntProperty(QpidJmsTestSupport.MESSAGE_NUMBER);
    messageNumbers.add(msgNum);
  }
  session.commit();
  assertEquals("Unexpected size of list",totalCount,messageNumbers.size());
  for (int i=0; i < messageNumbers.size(); i++) {
    assertEquals("Unexpected order of messages: " + messageNumbers,Integer.valueOf(i + 1),messageNumbers.get(i));
  }
  assertEquals(0,proxy.getQueueSize());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.qpid.jms.transactions.JmsTransactionRedeliveryPolicyTest </h4><pre class="type-13 type-4 type-5 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000) public void testAsyncConsumeAndRollbackWithMaxRedeliveries() throws Exception {
  final int MAX_REDELIVERIES=5;
  final int MSG_COUNT=5;
  connection=createAmqpConnection();
  connection.start();
  Session session=connection.createSession(true,Session.SESSION_TRANSACTED);
  Queue queue=session.createQueue(getDestinationName());
  MessageConsumer consumer=session.createConsumer(queue);
  sendMessages(connection,queue,MSG_COUNT);
  final QueueViewMBean queueView=getProxyToQueue(getDestinationName());
  Message incoming=null;
  for (int i=0; i < MSG_COUNT; ++i) {
    incoming=consumer.receive(3000);
    assertNotNull(incoming);
    assertFalse(incoming.getJMSRedelivered());
    assertTrue(incoming instanceof TextMessage);
  }
  session.rollback();
  for (int i=0; i < MAX_REDELIVERIES; ++i) {
    LOG.info("Queue size before consume is: {}",queueView.getQueueSize());
    assertEquals(MSG_COUNT,queueView.getQueueSize());
    final CountDownLatch done=new CountDownLatch(MSG_COUNT);
    consumer.setMessageListener(new MaxRedeliveryListener(done,i));
    assertTrue("Not All Messages Received",done.await(10,TimeUnit.SECONDS));
    assertEquals(MSG_COUNT,queueView.getQueueSize());
    consumer.setMessageListener(null);
    session.rollback();
    LOG.info("Queue size after session rollback is: {}",queueView.getQueueSize());
  }
  assertNull(consumer.receive(50));
  assertTrue("Message should get DLQ'd",Wait.waitFor(new Wait.Condition(){
    @Override public boolean isSatisified() throws Exception {
      return queueView.getQueueSize() == 0;
    }
  }
));
  QueueViewMBean dlq=getProxyToQueue("ActiveMQ.DLQ");
  assertEquals(MSG_COUNT,dlq.getQueueSize());
  session.commit();
}

</code></pre>

<br>
<pre class="type-13 type-4 type-5 type-7 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000) public void testSyncConsumeAndRollbackWithMaxRedeliveries() throws Exception {
  final int MAX_REDELIVERIES=5;
  final int MSG_COUNT=5;
  connection=createAmqpConnection();
  connection.start();
  Session session=connection.createSession(true,Session.SESSION_TRANSACTED);
  Queue queue=session.createQueue(getDestinationName());
  MessageConsumer consumer=session.createConsumer(queue);
  sendMessages(connection,queue,MSG_COUNT);
  final QueueViewMBean queueView=getProxyToQueue(getDestinationName());
  Message incoming=null;
  for (int i=0; i < MSG_COUNT; ++i) {
    incoming=consumer.receive(3000);
    assertNotNull(incoming);
    assertFalse(incoming.getJMSRedelivered());
    assertTrue(incoming instanceof TextMessage);
  }
  session.rollback();
  for (int i=0; i < MAX_REDELIVERIES; ++i) {
    LOG.info("Queue size before consume is: {}",queueView.getQueueSize());
    assertEquals(MSG_COUNT,queueView.getQueueSize());
    for (int j=0; j < MSG_COUNT; ++j) {
      incoming=consumer.receive(3000);
      assertNotNull(incoming);
      assertTrue(incoming.getJMSRedelivered());
      assertTrue(incoming instanceof TextMessage);
    }
    assertEquals(MSG_COUNT,queueView.getQueueSize());
    session.rollback();
    LOG.info("Queue size after session rollback is: {}",queueView.getQueueSize());
  }
  assertNull(consumer.receive(50));
  assertTrue("Message should get DLQ'd",Wait.waitFor(new Wait.Condition(){
    @Override public boolean isSatisified() throws Exception {
      return queueView.getQueueSize() == 0;
    }
  }
));
  QueueViewMBean dlq=getProxyToQueue("ActiveMQ.DLQ");
  assertEquals(MSG_COUNT,dlq.getQueueSize());
  session.commit();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.qpid.jms.transports.netty.NettyTcpTransportTest </h4><pre class="type-13 type-6 type-11 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60 * 1000) public void testMultipleConnectionsToServer() throws Exception {
  final int CONNECTION_COUNT=10;
  try (NettyEchoServer server=new NettyEchoServer(createServerOptions())){
    server.start();
    int port=server.getServerPort();
    URI serverLocation=new URI("tcp://localhost:" + port);
    List<Transport> transports=new ArrayList<Transport>();
    for (int i=0; i < CONNECTION_COUNT; ++i) {
      Transport transport=createTransport(serverLocation,testListener,createClientOptions());
      try {
        transport.connect();
        assertTrue(transport.isConnected());
        LOG.info("Connected to server:{} as expected.",serverLocation);
        transports.add(transport);
      }
 catch (      Exception e) {
        fail("Should have connected to the server: " + serverLocation);
      }
    }
    for (    Transport transport : transports) {
      transport.close();
    }
  }
   assertTrue(!transportClosed);
  assertTrue(exceptions.isEmpty());
  assertTrue(data.isEmpty());
}

</code></pre>

<br>
<pre class="type-13 type-11 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60 * 1000) public void testMultipleConnectionsSendReceive() throws Exception {
  final int CONNECTION_COUNT=10;
  final int FRAME_SIZE=8;
  ByteBuf sendBuffer=Unpooled.buffer(FRAME_SIZE);
  for (int i=0; i < 8; ++i) {
    sendBuffer.writeByte('A');
  }
  try (NettyEchoServer server=new NettyEchoServer(createServerOptions())){
    server.start();
    int port=server.getServerPort();
    URI serverLocation=new URI("tcp://localhost:" + port);
    List<Transport> transports=new ArrayList<Transport>();
    for (int i=0; i < CONNECTION_COUNT; ++i) {
      Transport transport=createTransport(serverLocation,testListener,createClientOptions());
      try {
        transport.connect();
        transport.send(sendBuffer.copy());
        transports.add(transport);
      }
 catch (      Exception e) {
        fail("Should have connected to the server: " + serverLocation);
      }
    }
    assertTrue(Wait.waitFor(new Wait.Condition(){
      @Override public boolean isSatisified() throws Exception {
        LOG.debug("Checking completion: read {} expecting {}",bytesRead.get(),(FRAME_SIZE * CONNECTION_COUNT));
        return bytesRead.get() == (FRAME_SIZE * CONNECTION_COUNT);
      }
    }
));
    for (    Transport transport : transports) {
      transport.close();
    }
  }
   assertTrue(exceptions.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.qpid.jms.util.FifoMessageQueueTest </h4><pre class="type-13 type-4 type-5 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveFirst() throws JMSException {
  List<JmsInboundMessageDispatch> messages=createFullRangePrioritySet();
  Collections.shuffle(messages);
  for (  JmsInboundMessageDispatch envelope : messages) {
    queue.enqueue(envelope);
  }
  for (byte i=0; i < 10; ++i) {
    JmsInboundMessageDispatch first=queue.dequeueNoWait();
    assertEquals(first,messages.get(i));
  }
  assertTrue(queue.isEmpty());
}

</code></pre>

<br>
<pre class="type-13 type-4 type-5 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveAll() throws JMSException {
  List<JmsInboundMessageDispatch> messages=createFullRangePrioritySet();
  Collections.shuffle(messages);
  for (  JmsInboundMessageDispatch envelope : messages) {
    queue.enqueue(envelope);
  }
  assertFalse(queue.isEmpty());
  List<JmsInboundMessageDispatch> result=queue.removeAll();
  assertTrue(queue.isEmpty());
  assertEquals(10,result.size());
  for (byte i=0; i < 10; ++i) {
    assertEquals(result.get(i),messages.get(i));
  }
}

</code></pre>

<br>
<pre class="type-13 type-4 type-5 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPeekFirst() throws JMSException {
  List<JmsInboundMessageDispatch> messages=createFullRangePrioritySet();
  Collections.shuffle(messages);
  for (  JmsInboundMessageDispatch envelope : messages) {
    queue.enqueue(envelope);
  }
  for (byte i=0; i < 10; ++i) {
    JmsInboundMessageDispatch first=queue.peek();
    assertEquals(first,messages.get(i));
    queue.dequeueNoWait();
  }
  assertTrue(queue.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.qpid.jms.util.LRUCacheTest </h4><pre class="type-13 type-20 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@SuppressWarnings("serial") @Test public void testOnCacheEviction(){
  final int ENTRY_COUNT=20;
  List<CacheEntry> entries=new ArrayList<CacheEntry>();
  LRUCache<String,CacheEntry> cache=new LRUCache<String,CacheEntry>(ENTRY_COUNT / 2){
    @Override protected void onCacheEviction(    java.util.Map.Entry<String,CacheEntry> eldest){
      eldest.getValue().close();
    }
  }
;
  for (int i=0; i < ENTRY_COUNT; ++i) {
    CacheEntry entry=new CacheEntry();
    entries.add(entry);
    cache.put("Entry:" + i,entry);
  }
  for (int i=0; i < ENTRY_COUNT; ++i) {
    if (i < ENTRY_COUNT / 2) {
      assertFalse(entries.get(i).isOpen());
    }
 else {
      assertTrue(entries.get(i).isOpen());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.qpid.jms.util.PriorityMessageQueueTest </h4><pre class="type-13 type-4 type-5 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveFirst() throws JMSException {
  List<JmsInboundMessageDispatch> messages=createFullRangePrioritySet();
  for (  JmsInboundMessageDispatch envelope : messages) {
    queue.enqueue(envelope);
  }
  for (byte i=9; i >= 0; --i) {
    JmsInboundMessageDispatch first=queue.dequeueNoWait();
    assertEquals(i,first.getMessage().getJMSPriority());
  }
  assertTrue(queue.isEmpty());
}

</code></pre>

<br>
<pre class="type-13 type-6 type-4 type-5 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveAll() throws JMSException {
  List<JmsInboundMessageDispatch> messages=createFullRangePrioritySet();
  Collections.shuffle(messages);
  for (  JmsInboundMessageDispatch envelope : messages) {
    queue.enqueue(envelope);
  }
  assertFalse(queue.isEmpty());
  List<JmsInboundMessageDispatch> result=queue.removeAll();
  assertTrue(queue.isEmpty());
  assertEquals(10,result.size());
  for (byte i=9; i >= 0; --i) {
    JmsInboundMessageDispatch envelope=result.remove(0);
    assertEquals(i,envelope.getMessage().getJMSPriority());
  }
}

</code></pre>

<br>
<pre class="type-13 type-4 type-5 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPeekFirst() throws JMSException {
  List<JmsInboundMessageDispatch> messages=createFullRangePrioritySet();
  for (  JmsInboundMessageDispatch envelope : messages) {
    queue.enqueue(envelope);
  }
  for (byte i=9; i >= 0; --i) {
    JmsInboundMessageDispatch first=queue.peek();
    assertEquals(i,first.getMessage().getJMSPriority());
    queue.dequeueNoWait();
  }
  assertTrue(queue.isEmpty());
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
