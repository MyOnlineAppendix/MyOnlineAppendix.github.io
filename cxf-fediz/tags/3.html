<h3><span class=" glyphicon glyphicon-tag"/>&nbspAPIUtilityVerifier</h3><kbd>Verifies values of objects/variables related to API calls (Java or TPL) </kbd><br><br><br><h4 style="margin:0px">Class: org.apache.cxf.fediz.integrationtests.AbstractTests </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testAliceUser() throws Exception {
  String url="https://localhost:" + getRpHttpsPort() + "/"+ getServletContextName()+ "/secure/user/fedservlet";
  String user="alice";
  String password="ecila";
  final String bodyTextContent=HTTPTestUtils.login(url,user,password,getIdpHttpsPort());
  Assert.assertTrue("Principal not " + user,bodyTextContent.contains("userPrincipal=" + user));
  Assert.assertTrue("User " + user + " does not have role Admin",bodyTextContent.contains("role:Admin=false"));
  Assert.assertTrue("User " + user + " does not have role Manager",bodyTextContent.contains("role:Manager=false"));
  Assert.assertTrue("User " + user + " must have role User",bodyTextContent.contains("role:User=true"));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testTed() throws Exception {
  String url="https://localhost:" + getRpHttpsPort() + "/"+ getServletContextName()+ "/secure/fedservlet";
  String user="ted";
  String password="det";
  final String bodyTextContent=HTTPTestUtils.login(url,user,password,getIdpHttpsPort());
  Assert.assertTrue("Principal not " + user,bodyTextContent.contains("userPrincipal=" + user));
  Assert.assertTrue("User " + user + " does not have role Admin",bodyTextContent.contains("role:Admin=false"));
  Assert.assertTrue("User " + user + " does not have role Manager",bodyTextContent.contains("role:Manager=false"));
  Assert.assertTrue("User " + user + " must have role User",bodyTextContent.contains("role:User=false"));
  String claim=ClaimTypes.FIRSTNAME.toString();
  Assert.assertTrue("User " + user + " claim "+ claim+ " is not 'Ted'",bodyTextContent.contains(claim + "=Ted"));
  claim=ClaimTypes.LASTNAME.toString();
  Assert.assertTrue("User " + user + " claim "+ claim+ " is not 'Cooper'",bodyTextContent.contains(claim + "=Cooper"));
  claim=ClaimTypes.EMAILADDRESS.toString();
  Assert.assertTrue("User " + user + " claim "+ claim+ " is not 'tcooper@realma.org'",bodyTextContent.contains(claim + "=tcooper@realma.org"));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testBob() throws Exception {
  String url="https://localhost:" + getRpHttpsPort() + "/"+ getServletContextName()+ "/secure/fedservlet";
  String user="bob";
  String password="bob";
  final String bodyTextContent=HTTPTestUtils.login(url,user,password,getIdpHttpsPort());
  Assert.assertTrue("Principal not " + user,bodyTextContent.contains("userPrincipal=" + user));
  Assert.assertTrue("User " + user + " does not have role Admin",bodyTextContent.contains("role:Admin=true"));
  Assert.assertTrue("User " + user + " does not have role Manager",bodyTextContent.contains("role:Manager=true"));
  Assert.assertTrue("User " + user + " must have role User",bodyTextContent.contains("role:User=true"));
  String claim=ClaimTypes.FIRSTNAME.toString();
  Assert.assertTrue("User " + user + " claim "+ claim+ " is not 'Bob'",bodyTextContent.contains(claim + "=Bob"));
  claim=ClaimTypes.LASTNAME.toString();
  Assert.assertTrue("User " + user + " claim "+ claim+ " is not 'Windsor'",bodyTextContent.contains(claim + "=Windsor"));
  claim=ClaimTypes.EMAILADDRESS.toString();
  Assert.assertTrue("User " + user + " claim "+ claim+ " is not 'bobwindsor@realma.org'",bodyTextContent.contains(claim + "=bobwindsor@realma.org"));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testAlice() throws Exception {
  String url="https://localhost:" + getRpHttpsPort() + "/"+ getServletContextName()+ "/secure/fedservlet";
  String user="alice";
  String password="ecila";
  final String bodyTextContent=HTTPTestUtils.login(url,user,password,getIdpHttpsPort());
  Assert.assertTrue("Principal not " + user,bodyTextContent.contains("userPrincipal=" + user));
  Assert.assertTrue("User " + user + " does not have role Admin",bodyTextContent.contains("role:Admin=false"));
  Assert.assertTrue("User " + user + " does not have role Manager",bodyTextContent.contains("role:Manager=false"));
  Assert.assertTrue("User " + user + " must have role User",bodyTextContent.contains("role:User=true"));
  String claim=ClaimTypes.FIRSTNAME.toString();
  Assert.assertTrue("User " + user + " claim "+ claim+ " is not 'Alice'",bodyTextContent.contains(claim + "=Alice"));
  claim=ClaimTypes.LASTNAME.toString();
  Assert.assertTrue("User " + user + " claim "+ claim+ " is not 'Smith'",bodyTextContent.contains(claim + "=Smith"));
  claim=ClaimTypes.EMAILADDRESS.toString();
  Assert.assertTrue("User " + user + " claim "+ claim+ " is not 'alice@realma.org'",bodyTextContent.contains(claim + "=alice@realma.org"));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testBobUser() throws Exception {
  String url="https://localhost:" + getRpHttpsPort() + "/"+ getServletContextName()+ "/secure/user/fedservlet";
  String user="bob";
  String password="bob";
  final String bodyTextContent=HTTPTestUtils.login(url,user,password,getIdpHttpsPort());
  Assert.assertTrue("Principal not " + user,bodyTextContent.contains("userPrincipal=" + user));
  Assert.assertTrue("User " + user + " does not have role Admin",bodyTextContent.contains("role:Admin=true"));
  Assert.assertTrue("User " + user + " does not have role Manager",bodyTextContent.contains("role:Manager=true"));
  Assert.assertTrue("User " + user + " must have role User",bodyTextContent.contains("role:User=true"));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testBobManager() throws Exception {
  String url="https://localhost:" + getRpHttpsPort() + "/"+ getServletContextName()+ "/secure/manager/fedservlet";
  String user="bob";
  String password="bob";
  final String bodyTextContent=HTTPTestUtils.login(url,user,password,getIdpHttpsPort());
  Assert.assertTrue("Principal not " + user,bodyTextContent.contains("userPrincipal=" + user));
  Assert.assertTrue("User " + user + " does not have role Admin",bodyTextContent.contains("role:Admin=true"));
  Assert.assertTrue("User " + user + " does not have role Manager",bodyTextContent.contains("role:Manager=true"));
  Assert.assertTrue("User " + user + " must have role User",bodyTextContent.contains("role:User=true"));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testBobAdmin() throws Exception {
  String url="https://localhost:" + getRpHttpsPort() + "/"+ getServletContextName()+ "/secure/admin/fedservlet";
  String user="bob";
  String password="bob";
  final String bodyTextContent=HTTPTestUtils.login(url,user,password,getIdpHttpsPort());
  Assert.assertTrue("Principal not " + user,bodyTextContent.contains("userPrincipal=" + user));
  Assert.assertTrue("User " + user + " does not have role Admin",bodyTextContent.contains("role:Admin=true"));
  Assert.assertTrue("User " + user + " does not have role Manager",bodyTextContent.contains("role:Manager=true"));
  Assert.assertTrue("User " + user + " must have role User",bodyTextContent.contains("role:User=true"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cxf.fediz.service.idp.integrationtests.RestITTest </h4><pre class="type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddClaimToApplication() throws UnsupportedEncodingException {
  String address="https://localhost:" + idpHttpsPort + "/"+ getContextName()+ "/services/rs";
  Client client=ClientBuilder.newClient();
  String realmToAdd="urn:org:apache:cxf:fediz:fedizhelloworld:testaddclaim";
  Application application=new Application();
  application.setRealm(realmToAdd);
  application.setEncryptionCertificate("");
  application.setLifeTime(3600);
  application.setProtocol("http://docs.oasis-open.org/wsfed/federation/200706");
  application.setRole("ApplicationServiceType");
  application.setServiceDescription("Fedizhelloworld description");
  application.setServiceDisplayName("Fedizhelloworld");
  application.setTokenType("http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0");
  Response response=client.target(address).path("applications/").request("application/xml").header("Authorization",getBasicAuthentication("admin","password")).post(Entity.entity(application,MediaType.APPLICATION_XML));
  Assert.assertEquals(Status.CREATED.getStatusCode(),response.getStatus());
  RequestClaim requestClaim=new RequestClaim();
  requestClaim.setOptional(false);
  requestClaim.setClaimType(URI.create("http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname"));
  response=client.target(address).path("applications").path(realmToAdd).path("claims").request("application/xml").header("Authorization",getBasicAuthentication("admin","password")).post(Entity.entity(requestClaim,MediaType.APPLICATION_XML));
  Assert.assertEquals(Status.NO_CONTENT.getStatusCode(),response.getStatus());
  application=client.target(address).path("applications").path(realmToAdd).queryParam("expand","claims").request("application/xml").header("Authorization",getBasicAuthentication("admin","password")).get(Application.class);
  Assert.assertEquals("Claims size should be 1 instead of " + application.getRequestedClaims().size(),1,application.getRequestedClaims().size());
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
