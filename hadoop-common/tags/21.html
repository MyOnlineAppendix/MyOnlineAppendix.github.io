<h3><span class=" glyphicon glyphicon-tag"/>&nbspConditionMatcher</h3><kbd>Verifies logic rules using matcher-style statements</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDFSShell </h4><pre class="type-9 type-7 type-10 type-21 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=300000) public void testAppendToFile() throws Exception {
  final int inputFileLength=1024 * 1024;
  File testRoot=new File(TEST_ROOT_DIR,"testAppendtoFileDir");
  testRoot.mkdirs();
  File file1=new File(testRoot,"file1");
  File file2=new File(testRoot,"file2");
  createLocalFileWithRandomData(inputFileLength,file1);
  createLocalFileWithRandomData(inputFileLength,file2);
  Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(1).build();
  cluster.waitActive();
  try {
    FileSystem dfs=cluster.getFileSystem();
    assertTrue("Not a HDFS: " + dfs.getUri(),dfs instanceof DistributedFileSystem);
    Path remoteFile=new Path("/remoteFile");
    FsShell shell=new FsShell();
    shell.setConf(conf);
    String[] argv=new String[]{"-appendToFile",file1.toString(),file2.toString(),remoteFile.toString()};
    int res=ToolRunner.run(shell,argv);
    assertThat(res,is(0));
    assertThat(dfs.getFileStatus(remoteFile).getLen(),is((long)inputFileLength * 2));
    res=ToolRunner.run(shell,argv);
    assertThat(res,is(0));
    assertThat(dfs.getFileStatus(remoteFile).getLen(),is((long)inputFileLength * 4));
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-10 type-21 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=300000) public void testAppendToFileBadArgs() throws Exception {
  final int inputFileLength=1024 * 1024;
  File testRoot=new File(TEST_ROOT_DIR,"testAppendToFileBadArgsDir");
  testRoot.mkdirs();
  File file1=new File(testRoot,"file1");
  createLocalFileWithRandomData(inputFileLength,file1);
  Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(1).build();
  cluster.waitActive();
  try {
    FileSystem dfs=cluster.getFileSystem();
    assertTrue("Not a HDFS: " + dfs.getUri(),dfs instanceof DistributedFileSystem);
    FsShell shell=new FsShell();
    shell.setConf(conf);
    String[] argv=new String[]{"-appendToFile",file1.toString()};
    int res=ToolRunner.run(shell,argv);
    assertThat(res,not(0));
    Path remoteFile=new Path("/remoteFile");
    argv=new String[]{"-appendToFile",file1.toString(),"-",remoteFile.toString()};
    res=ToolRunner.run(shell,argv);
    assertThat(res,not(0));
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-21 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test(timeout=30000) public void testSetrep() throws Exception {
  Configuration conf=new Configuration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(1).format(true).build();
  FsShell shell=null;
  FileSystem fs=null;
  final String testdir1="/tmp/TestDFSShell-testSetrep-" + counter.getAndIncrement();
  final String testdir2=testdir1 + "/nestedDir";
  final Path hdfsFile1=new Path(testdir1,"testFileForSetrep");
  final Path hdfsFile2=new Path(testdir2,"testFileForSetrep");
  final Short oldRepFactor=new Short((short)1);
  final Short newRepFactor=new Short((short)3);
  try {
    String[] argv;
    cluster.waitActive();
    fs=cluster.getFileSystem();
    assertThat(fs.mkdirs(new Path(testdir2)),is(true));
    shell=new FsShell(conf);
    fs.create(hdfsFile1,true).close();
    fs.create(hdfsFile2,true).close();
    argv=new String[]{"-setrep",newRepFactor.toString(),hdfsFile1.toString()};
    assertThat(shell.run(argv),is(SUCCESS));
    assertThat(fs.getFileStatus(hdfsFile1).getReplication(),is(newRepFactor));
    assertThat(fs.getFileStatus(hdfsFile2).getReplication(),is(oldRepFactor));
    argv=new String[]{"-setrep",newRepFactor.toString(),testdir1};
    assertThat(shell.run(argv),is(SUCCESS));
    assertThat(fs.getFileStatus(hdfsFile1).getReplication(),is(newRepFactor));
    assertThat(fs.getFileStatus(hdfsFile2).getReplication(),is(newRepFactor));
  }
  finally {
    if (shell != null) {
      shell.close();
    }
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDFSUtil </h4><pre class="type-9 type-7 type-15 type-6 type-21 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=15000) public void testLocalhostReverseLookup(){
  Assume.assumeTrue(!Shell.WINDOWS);
  HdfsConfiguration conf=new HdfsConfiguration();
  conf.set(CommonConfigurationKeys.FS_DEFAULT_NAME_KEY,"hdfs://127.0.0.1:8020");
  Collection<URI> uris=DFSUtil.getNameServiceUris(conf);
  assertEquals(1,uris.size());
  for (  URI uri : uris) {
    assertThat(uri.getHost(),not("127.0.0.1"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.nfs.nfs3.TestDFSClientCache </h4><pre class="type-9 type-7 type-21 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testGetUserGroupInformationSecure() throws IOException {
  String userName="user1";
  String currentUser="test-user";
  NfsConfiguration conf=new NfsConfiguration();
  UserGroupInformation currentUserUgi=UserGroupInformation.createRemoteUser(currentUser);
  currentUserUgi.setAuthenticationMethod(KERBEROS);
  UserGroupInformation.setLoginUser(currentUserUgi);
  DFSClientCache cache=new DFSClientCache(conf);
  UserGroupInformation ugiResult=cache.getUserGroupInformation(userName,currentUserUgi);
  assertThat(ugiResult.getUserName(),is(userName));
  assertThat(ugiResult.getRealUser(),is(currentUserUgi));
  assertThat(ugiResult.getAuthenticationMethod(),is(UserGroupInformation.AuthenticationMethod.PROXY));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-21 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testGetUserGroupInformation() throws IOException {
  String userName="user1";
  String currentUser="currentUser";
  UserGroupInformation currentUserUgi=UserGroupInformation.createUserForTesting(currentUser,new String[0]);
  NfsConfiguration conf=new NfsConfiguration();
  conf.set(FileSystem.FS_DEFAULT_NAME_KEY,"hdfs://localhost");
  DFSClientCache cache=new DFSClientCache(conf);
  UserGroupInformation ugiResult=cache.getUserGroupInformation(userName,currentUserUgi);
  assertThat(ugiResult.getUserName(),is(userName));
  assertThat(ugiResult.getRealUser(),is(currentUserUgi));
  assertThat(ugiResult.getAuthenticationMethod(),is(UserGroupInformation.AuthenticationMethod.PROXY));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.blockmanagement.TestBlockInfo </h4><pre class="type-7 type-21 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testReplaceStorage() throws Exception {
  final DatanodeStorageInfo storage1=DFSTestUtil.createDatanodeStorageInfo("storageID1","127.0.0.1");
  final DatanodeStorageInfo storage2=new DatanodeStorageInfo(storage1.getDatanodeDescriptor(),new DatanodeStorage("storageID2"));
  final int NUM_BLOCKS=10;
  BlockInfo[] blockInfos=new BlockInfo[NUM_BLOCKS];
  for (int i=0; i < NUM_BLOCKS; ++i) {
    blockInfos[i]=new BlockInfo(3);
    storage1.addBlock(blockInfos[i]);
  }
  boolean added=storage2.addBlock(blockInfos[NUM_BLOCKS / 2]);
  Assert.assertThat(added,is(false));
  Assert.assertThat(blockInfos[NUM_BLOCKS / 2].getStorageInfo(0),is(storage2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.BlockReportTestBase </h4><pre class="type-7 type-21 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Similar to BlockReport_03() but works with two DNs
 * Test writes a file and closes it.
 * The second datanode is started in the cluster.
 * As soon as the replication process is completed test finds a block from
 * the second DN and sets its GS to be < of original one.
 * this is the markBlockAsCorrupt case 3 so we expect one pending deletion
 * Block report is forced and the check for # of currupted blocks is performed.
 * Another block is chosen and its length is set to a lesser than original.
 * A check for another corrupted block is performed after yet another
 * BlockReport
 * @throws IOException in case of an error
 */
@Test(timeout=300000) public void blockReport_07() throws Exception {
  final String METHOD_NAME=GenericTestUtils.getMethodName();
  Path filePath=new Path("/" + METHOD_NAME + ".dat");
  final int DN_N1=DN_N0 + 1;
  writeFile(METHOD_NAME,FILE_SIZE,filePath);
  startDNandWait(filePath,true);
  DataNode dn=cluster.getDataNodes().get(DN_N1);
  String poolId=cluster.getNamesystem().getBlockPoolId();
  DatanodeRegistration dnR=dn.getDNRegistrationForBP(poolId);
  StorageBlockReport[] reports=getBlockReports(dn,poolId,true,false);
  sendBlockReports(dnR,poolId,reports);
  printStats();
  assertThat("Wrong number of corrupt blocks",cluster.getNamesystem().getCorruptReplicaBlocks(),is(0L));
  assertThat("Wrong number of PendingDeletion blocks",cluster.getNamesystem().getPendingDeletionBlocks(),is(1L));
  assertThat("Wrong number of PendingReplication blocks",cluster.getNamesystem().getPendingReplicationBlocks(),is(0L));
  reports=getBlockReports(dn,poolId,false,true);
  sendBlockReports(dnR,poolId,reports);
  printStats();
  assertThat("Wrong number of corrupt blocks",cluster.getNamesystem().getCorruptReplicaBlocks(),is(1L));
  assertThat("Wrong number of PendingDeletion blocks",cluster.getNamesystem().getPendingDeletionBlocks(),is(1L));
  assertThat("Wrong number of PendingReplication blocks",cluster.getNamesystem().getPendingReplicationBlocks(),is(0L));
  printStats();
}

</code></pre>

<br>
<pre class="type-7 type-21 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Test writes a file and closes it.
 * Block reported is generated with an extra block.
 * Block report is forced and the check for # of pendingdeletion
 * blocks is performed.
 * @throws IOException in case of an error
 */
@Test(timeout=300000) public void blockReport_04() throws IOException {
  final String METHOD_NAME=GenericTestUtils.getMethodName();
  Path filePath=new Path("/" + METHOD_NAME + ".dat");
  DFSTestUtil.createFile(fs,filePath,FILE_SIZE,REPL_FACTOR,rand.nextLong());
  DataNode dn=cluster.getDataNodes().get(DN_N0);
  String poolId=cluster.getNamesystem().getBlockPoolId();
  ExtendedBlock b=new ExtendedBlock(poolId,rand.nextLong(),1024L,rand.nextLong());
  dn.getFSDataset().createRbw(StorageType.DEFAULT,b);
  DatanodeRegistration dnR=dn.getDNRegistrationForBP(poolId);
  StorageBlockReport[] reports=getBlockReports(dn,poolId,false,false);
  sendBlockReports(dnR,poolId,reports);
  printStats();
  assertThat("Wrong number of corrupt blocks",cluster.getNamesystem().getCorruptReplicaBlocks(),is(0L));
  assertThat("Wrong number of PendingDeletion blocks",cluster.getNamesystem().getPendingDeletionBlocks(),is(1L));
}

</code></pre>

<br>
<pre class="type-7 type-21 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Test writes a file and closes it.
 * Block reported is generated with a bad GS for a single block.
 * Block report is forced and the check for # of corrupted blocks is performed.
 * @throws IOException in case of an error
 */
@Test(timeout=300000) public void blockReport_03() throws IOException {
  final String METHOD_NAME=GenericTestUtils.getMethodName();
  Path filePath=new Path("/" + METHOD_NAME + ".dat");
  writeFile(METHOD_NAME,FILE_SIZE,filePath);
  DataNode dn=cluster.getDataNodes().get(DN_N0);
  String poolId=cluster.getNamesystem().getBlockPoolId();
  DatanodeRegistration dnR=dn.getDNRegistrationForBP(poolId);
  StorageBlockReport[] reports=getBlockReports(dn,poolId,true,false);
  sendBlockReports(dnR,poolId,reports);
  printStats();
  assertThat("Wrong number of corrupt blocks",cluster.getNamesystem().getCorruptReplicaBlocks(),is(1L));
  assertThat("Wrong number of PendingDeletion blocks",cluster.getNamesystem().getPendingDeletionBlocks(),is(0L));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestBlockHasMultipleReplicasOnSameDN </h4><pre class="type-7 type-21 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Verify NameNode behavior when a given DN reports multiple replicas
 * of a given block.
 */
@Test public void testBlockHasMultipleReplicasOnSameDN() throws IOException {
  String filename=makeFileName(GenericTestUtils.getMethodName());
  Path filePath=new Path(filename);
  DFSTestUtil.createFile(fs,filePath,BLOCK_SIZE,BLOCK_SIZE * NUM_BLOCKS,BLOCK_SIZE,NUM_DATANODES,seed);
  LocatedBlocks locatedBlocks=client.getLocatedBlocks(filePath.toString(),0,BLOCK_SIZE * NUM_BLOCKS);
  DataNode dn=cluster.getDataNodes().get(0);
  DatanodeRegistration dnReg=dn.getDNRegistrationForBP(bpid);
  StorageBlockReport reports[]=new StorageBlockReport[cluster.getStoragesPerDatanode()];
  ArrayList<Block> blocks=new ArrayList<Block>();
  for (  LocatedBlock locatedBlock : locatedBlocks.getLocatedBlocks()) {
    blocks.add(locatedBlock.getBlock().getLocalBlock());
  }
  for (int i=0; i < cluster.getStoragesPerDatanode(); ++i) {
    BlockListAsLongs bll=new BlockListAsLongs(blocks,null);
    FsVolumeSpi v=dn.getFSDataset().getVolumes().get(i);
    DatanodeStorage dns=new DatanodeStorage(v.getStorageID());
    reports[i]=new StorageBlockReport(dns,bll.getBlockListAsLongs());
  }
  cluster.getNameNodeRpc().blockReport(dnReg,bpid,reports);
  locatedBlocks=client.getLocatedBlocks(filename,0,BLOCK_SIZE * NUM_BLOCKS);
  for (  LocatedBlock locatedBlock : locatedBlocks.getLocatedBlocks()) {
    DatanodeInfo[] locations=locatedBlock.getLocations();
    assertThat(locations.length,is((int)NUM_DATANODES));
    assertThat(locations[0].getDatanodeUuid(),not(locations[1].getDatanodeUuid()));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestDataDirs </h4><pre class="type-9 type-2 type-7 type-21 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000) public void testDataDirParsing() throws Throwable {
  Configuration conf=new Configuration();
  List<StorageLocation> locations;
  File dir0=new File("/dir0");
  File dir1=new File("/dir1");
  File dir2=new File("/dir2");
  File dir3=new File("/dir3");
  String locations1="[disk]/dir0,[DISK]/dir1,[sSd]/dir2,[disK]/dir3";
  conf.set(DFS_DATANODE_DATA_DIR_KEY,locations1);
  locations=DataNode.getStorageLocations(conf);
  assertThat(locations.size(),is(4));
  assertThat(locations.get(0).getStorageType(),is(StorageType.DISK));
  assertThat(locations.get(0).getUri(),is(dir0.toURI()));
  assertThat(locations.get(1).getStorageType(),is(StorageType.DISK));
  assertThat(locations.get(1).getUri(),is(dir1.toURI()));
  assertThat(locations.get(2).getStorageType(),is(StorageType.SSD));
  assertThat(locations.get(2).getUri(),is(dir2.toURI()));
  assertThat(locations.get(3).getStorageType(),is(StorageType.DISK));
  assertThat(locations.get(3).getUri(),is(dir3.toURI()));
  String locations2="[BadMediaType]/dir0,[ssd]/dir1,[disk]/dir2";
  conf.set(DFS_DATANODE_DATA_DIR_KEY,locations2);
  try {
    locations=DataNode.getStorageLocations(conf);
    fail();
  }
 catch (  IllegalArgumentException iae) {
    DataNode.LOG.info("The exception is expected.",iae);
  }
  String locations3="/dir0,/dir1";
  conf.set(DFS_DATANODE_DATA_DIR_KEY,locations3);
  locations=DataNode.getStorageLocations(conf);
  assertThat(locations.size(),is(2));
  assertThat(locations.get(0).getStorageType(),is(StorageType.DISK));
  assertThat(locations.get(0).getUri(),is(dir0.toURI()));
  assertThat(locations.get(1).getStorageType(),is(StorageType.DISK));
  assertThat(locations.get(1).getUri(),is(dir1.toURI()));
}

</code></pre>

<br>
<pre class="type-9 type-6 type-21 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000) public void testDataDirValidation() throws Throwable {
  DataNodeDiskChecker diskChecker=mock(DataNodeDiskChecker.class);
  doThrow(new IOException()).doThrow(new IOException()).doNothing().when(diskChecker).checkDir(any(LocalFileSystem.class),any(Path.class));
  LocalFileSystem fs=mock(LocalFileSystem.class);
  AbstractList<StorageLocation> locations=new ArrayList<StorageLocation>();
  locations.add(StorageLocation.parse("file:/p1/"));
  locations.add(StorageLocation.parse("file:/p2/"));
  locations.add(StorageLocation.parse("file:/p3/"));
  List<StorageLocation> checkedLocations=DataNode.checkStorageLocations(locations,fs,diskChecker);
  assertEquals("number of valid data dirs",1,checkedLocations.size());
  String validDir=checkedLocations.iterator().next().getFile().getPath();
  assertThat("p3 should be valid",new File("/p3/").getPath(),is(validDir));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestDataNodeRollingUpgrade </h4><pre class="type-9 type-7 type-21 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test(timeout=600000) public void testDatanodeRollingUpgradeWithRollback() throws Exception {
  try {
    startCluster();
    Path testFile1=new Path("/TestDataNodeRollingUpgrade1.dat");
    DFSTestUtil.createFile(fs,testFile1,FILE_SIZE,REPL_FACTOR,SEED);
    String fileContents1=DFSTestUtil.readFile(fs,testFile1);
    fs.setSafeMode(SafeModeAction.SAFEMODE_ENTER);
    startRollingUpgrade();
    File blockFile=getBlockForFile(testFile1,true);
    File trashFile=getTrashFileForBlock(blockFile,false);
    deleteAndEnsureInTrash(testFile1,blockFile,trashFile);
    rollbackRollingUpgrade();
    ensureTrashRestored(blockFile,trashFile);
    assert (fs.exists(testFile1));
    String fileContents2=DFSTestUtil.readFile(fs,testFile1);
    assertThat(fileContents1,is(fileContents2));
  }
  finally {
    shutdownCluster();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestIncrementalBrVariations </h4><pre class="type-21 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Verify that the DataNode sends a single incremental block report for all
 * storages.
 * @throws IOException
 * @throws InterruptedException
 */
@Test(timeout=60000) public void testDataNodeDoesNotSplitReports() throws IOException, InterruptedException {
  LocatedBlocks blocks=createFileGetBlocks(GenericTestUtils.getMethodName());
  assertThat(cluster.getDataNodes().size(),is(1));
  for (  LocatedBlock block : blocks.getLocatedBlocks()) {
    dn0.notifyNamenodeDeletedBlock(block.getBlock(),block.getStorageIDs()[0]);
  }
  LOG.info("Triggering report after deleting blocks");
  long ops=getLongCounter("BlockReceivedAndDeletedOps",getMetrics(NN_METRICS));
  DataNodeTestUtils.triggerBlockReport(dn0);
  Thread.sleep(5000);
  assertCounter("BlockReceivedAndDeletedOps",ops + 1,getMetrics(NN_METRICS));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestReadOnlySharedStorage </h4><pre class="type-9 type-8 type-7 type-21 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Setup a {@link MiniDFSCluster}.
 * Create a block with both {@link State#NORMAL} and {@link State#READ_ONLY_SHARED} replicas.
 */
@Before public void setup() throws IOException, InterruptedException {
  conf=new HdfsConfiguration();
  SimulatedFSDataset.setFactory(conf);
  Configuration[] overlays=new Configuration[NUM_DATANODES];
  for (int i=0; i < overlays.length; i++) {
    overlays[i]=new Configuration();
    if (i == RO_NODE_INDEX) {
      overlays[i].setEnum(SimulatedFSDataset.CONFIG_PROPERTY_STATE,i == RO_NODE_INDEX ? READ_ONLY_SHARED : NORMAL);
    }
  }
  cluster=new MiniDFSCluster.Builder(conf).numDataNodes(NUM_DATANODES).dataNodeConfOverlays(overlays).build();
  fs=cluster.getFileSystem();
  blockManager=cluster.getNameNode().getNamesystem().getBlockManager();
  datanodeManager=blockManager.getDatanodeManager();
  client=new DFSClient(new InetSocketAddress("localhost",cluster.getNameNodePort()),cluster.getConfiguration(0));
  for (int i=0; i < NUM_DATANODES; i++) {
    DataNode dataNode=cluster.getDataNodes().get(i);
    validateStorageState(BlockManagerTestUtil.getStorageReportsForDatanode(datanodeManager.getDatanode(dataNode.getDatanodeId())),i == RO_NODE_INDEX ? READ_ONLY_SHARED : NORMAL);
  }
  DFSTestUtil.createFile(fs,PATH,BLOCK_SIZE,BLOCK_SIZE,BLOCK_SIZE,(short)1,seed);
  LocatedBlock locatedBlock=getLocatedBlock();
  extendedBlock=locatedBlock.getBlock();
  block=extendedBlock.getLocalBlock();
  assertThat(locatedBlock.getLocations().length,is(1));
  normalDataNode=locatedBlock.getLocations()[0];
  readOnlyDataNode=datanodeManager.getDatanode(cluster.getDataNodes().get(RO_NODE_INDEX).getDatanodeId());
  assertThat(normalDataNode,is(not(readOnlyDataNode)));
  validateNumberReplicas(1);
  cluster.injectBlocks(0,RO_NODE_INDEX,Collections.singleton(block));
  waitForLocations(2);
}

</code></pre>

<br>
<pre class="type-7 type-21 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Verify that corrupt <tt>READ_ONLY_SHARED</tt> replicas aren't counted 
 * towards the corrupt replicas total.
 */
@Test public void testReadOnlyReplicaCorrupt() throws Exception {
  client.reportBadBlocks(new LocatedBlock[]{new LocatedBlock(extendedBlock,new DatanodeInfo[]{readOnlyDataNode})});
  waitForLocations(1);
  NumberReplicas numberReplicas=blockManager.countNodes(block);
  assertThat(numberReplicas.corruptReplicas(),is(0));
}

</code></pre>

<br>
<pre class="type-7 type-21 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Verify that the NameNode is able to still use <tt>READ_ONLY_SHARED</tt> replicas even 
 * when the single NORMAL replica is offline (and the effective replication count is 0).
 */
@Test public void testNormalReplicaOffline() throws Exception {
  cluster.stopDataNode(normalDataNode.getXferAddr());
  BlockManagerTestUtil.noticeDeadDatanode(cluster.getNameNode(),normalDataNode.getXferAddr());
  NumberReplicas numberReplicas=blockManager.countNodes(block);
  assertThat(numberReplicas.liveReplicas(),is(0));
  BlockManagerTestUtil.updateState(blockManager);
  assertThat(blockManager.getUnderReplicatedBlocksCount(),is(1L));
  BlockManagerTestUtil.computeAllPendingWork(blockManager);
  DFSTestUtil.waitForReplication(cluster,extendedBlock,1,1,0);
  assertThat(getLocatedBlock().getLocations().length,is(2));
  validateNumberReplicas(1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestStorageReport </h4><pre class="type-7 type-19 type-21 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Ensure that storage type and storage state are propagated
 * in Storage Reports.
 */
@Test public void testStorageReportHasStorageTypeAndState() throws IOException {
  assertNotSame(storageType,StorageType.DEFAULT);
  NameNode nn=cluster.getNameNode();
  DataNode dn=cluster.getDataNodes().get(0);
  DatanodeProtocolClientSideTranslatorPB nnSpy=DataNodeTestUtils.spyOnBposToNN(dn,nn);
  DataNodeTestUtils.triggerHeartbeat(dn);
  ArgumentCaptor<StorageReport[]> captor=ArgumentCaptor.forClass(StorageReport[].class);
  Mockito.verify(nnSpy).sendHeartbeat(any(DatanodeRegistration.class),captor.capture(),anyLong(),anyLong(),anyInt(),anyInt(),anyInt());
  StorageReport[] reports=captor.getValue();
  for (  StorageReport report : reports) {
    assertThat(report.getStorage().getStorageType(),is(storageType));
    assertThat(report.getStorage().getState(),is(DatanodeStorage.State.NORMAL));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestEditLogFileInputStream </h4><pre class="type-9 type-6 type-21 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadURL() throws Exception {
  HttpURLConnection conn=mock(HttpURLConnection.class);
  doReturn(new ByteArrayInputStream(FAKE_LOG_DATA)).when(conn).getInputStream();
  doReturn(HttpURLConnection.HTTP_OK).when(conn).getResponseCode();
  doReturn(Integer.toString(FAKE_LOG_DATA.length)).when(conn).getHeaderField("Content-Length");
  URLConnectionFactory factory=mock(URLConnectionFactory.class);
  doReturn(conn).when(factory).openConnection(Mockito.<URL>any(),anyBoolean());
  URL url=new URL("http://localhost/fakeLog");
  EditLogInputStream elis=EditLogFileInputStream.fromUrl(factory,url,HdfsConstants.INVALID_TXID,HdfsConstants.INVALID_TXID,false);
  EnumMap<FSEditLogOpCodes,Holder<Integer>> counts=FSImageTestUtil.countEditLogOpTypes(elis);
  assertThat(counts.get(FSEditLogOpCodes.OP_ADD).held,is(1));
  assertThat(counts.get(FSEditLogOpCodes.OP_SET_GENSTAMP_V1).held,is(1));
  assertThat(counts.get(FSEditLogOpCodes.OP_CLOSE).held,is(1));
  assertEquals(FAKE_LOG_DATA.length,elis.length());
  elis.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestNameNodeRespectsBindHostKeys </h4><pre class="type-9 type-7 type-21 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test(timeout=300000) public void testServiceRpcBindHostKey() throws IOException {
  Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=null;
  LOG.info("Testing without " + DFS_NAMENODE_SERVICE_RPC_BIND_HOST_KEY);
  conf.set(DFS_NAMENODE_SERVICE_RPC_ADDRESS_KEY,LOCALHOST_SERVER_ADDRESS);
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(0).build();
    cluster.waitActive();
    String address=getServiceRpcServerAddress(cluster);
    assertThat("Bind address not expected to be wildcard by default.",address,not("/" + WILDCARD_ADDRESS));
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
      cluster=null;
    }
  }
  LOG.info("Testing with " + DFS_NAMENODE_SERVICE_RPC_BIND_HOST_KEY);
  conf.set(DFS_NAMENODE_SERVICE_RPC_BIND_HOST_KEY,WILDCARD_ADDRESS);
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(0).build();
    cluster.waitActive();
    String address=getServiceRpcServerAddress(cluster);
    assertThat("Bind address " + address + " is not wildcard.",address,is("/" + WILDCARD_ADDRESS));
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-21 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test(timeout=300000) public void testRpcBindHostKey() throws IOException {
  Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=null;
  LOG.info("Testing without " + DFS_NAMENODE_RPC_BIND_HOST_KEY);
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(0).build();
    cluster.waitActive();
    String address=getRpcServerAddress(cluster);
    assertThat("Bind address not expected to be wildcard by default.",address,not("/" + WILDCARD_ADDRESS));
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
      cluster=null;
    }
  }
  LOG.info("Testing with " + DFS_NAMENODE_RPC_BIND_HOST_KEY);
  conf.set(DFS_NAMENODE_RPC_BIND_HOST_KEY,WILDCARD_ADDRESS);
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(0).build();
    cluster.waitActive();
    String address=getRpcServerAddress(cluster);
    assertThat("Bind address " + address + " is not wildcard.",address,is("/" + WILDCARD_ADDRESS));
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestSequentialBlockId </h4><pre class="type-9 type-7 type-21 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Test that collisions in the block ID space are handled gracefully.
 * @throws IOException
 */
@Test public void testTriggerBlockIdCollision() throws IOException {
  Configuration conf=new HdfsConfiguration();
  conf.setInt(DFSConfigKeys.DFS_REPLICATION_KEY,1);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(1).build();
  try {
    cluster.waitActive();
    FileSystem fs=cluster.getFileSystem();
    FSNamesystem fsn=cluster.getNamesystem();
    final int blockCount=10;
    Path path1=new Path("testBlockIdCollisionDetection_file1.dat");
    DFSTestUtil.createFile(fs,path1,IO_SIZE,BLOCK_SIZE * blockCount,BLOCK_SIZE,REPLICATION,SEED);
    List<LocatedBlock> blocks1=DFSTestUtil.getAllBlocks(fs,path1);
    SequentialBlockIdGenerator blockIdGenerator=fsn.getBlockIdGenerator();
    blockIdGenerator.setCurrentValue(blockIdGenerator.getCurrentValue() - 5);
    Path path2=new Path("testBlockIdCollisionDetection_file2.dat");
    DFSTestUtil.createFile(fs,path2,IO_SIZE,BLOCK_SIZE * blockCount,BLOCK_SIZE,REPLICATION,SEED);
    List<LocatedBlock> blocks2=DFSTestUtil.getAllBlocks(fs,path2);
    assertThat(blocks2.size(),is(blockCount));
    assertThat(blocks2.get(0).getBlock().getBlockId(),is(blocks1.get(9).getBlock().getBlockId() + 1));
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-7 type-21 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Test that the generation stamp for legacy and new blocks is updated
 * as expected.
 * @throws IOException
 */
@Test public void testGenerationStampUpdate() throws IOException {
  FSNamesystem fsn=mock(FSNamesystem.class);
  FSEditLog editLog=mock(FSEditLog.class);
  final long nextGenerationStampV1=5000;
  final long nextGenerationStampV2=20000;
  when(fsn.getNextGenerationStampV1()).thenReturn(nextGenerationStampV1);
  when(fsn.getNextGenerationStampV2()).thenReturn(nextGenerationStampV2);
  when(fsn.nextGenerationStamp(anyBoolean())).thenCallRealMethod();
  when(fsn.hasWriteLock()).thenReturn(true);
  when(fsn.getEditLog()).thenReturn(editLog);
  assertThat(fsn.nextGenerationStamp(true),is(nextGenerationStampV1));
  assertThat(fsn.nextGenerationStamp(false),is(nextGenerationStampV2));
}

</code></pre>

<br>
<pre class="type-7 type-21 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Test that the block type (legacy or not) can be correctly detected
 * based on its generation stamp.
 * @throws IOException
 */
@Test public void testBlockTypeDetection() throws IOException {
  FSNamesystem fsn=mock(FSNamesystem.class);
  final long maxGenStampForLegacyBlocks=10000;
  when(fsn.getGenerationStampV1Limit()).thenReturn(maxGenStampForLegacyBlocks);
  Block legacyBlock=spy(new Block());
  when(legacyBlock.getGenerationStamp()).thenReturn(maxGenStampForLegacyBlocks / 2);
  Block newBlock=spy(new Block());
  when(newBlock.getGenerationStamp()).thenReturn(maxGenStampForLegacyBlocks + 1);
  when(fsn.isLegacyBlock(any(Block.class))).thenCallRealMethod();
  assertThat(fsn.isLegacyBlock(legacyBlock),is(true));
  assertThat(fsn.isLegacyBlock(newBlock),is(false));
}

</code></pre>

<br>
<pre class="type-9 type-13 type-7 type-21 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Test that block IDs are generated sequentially.
 * @throws IOException
 */
@Test public void testBlockIdGeneration() throws IOException {
  Configuration conf=new HdfsConfiguration();
  conf.setInt(DFSConfigKeys.DFS_REPLICATION_KEY,1);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(1).build();
  try {
    cluster.waitActive();
    FileSystem fs=cluster.getFileSystem();
    Path path=new Path("testBlockIdGeneration.dat");
    DFSTestUtil.createFile(fs,path,IO_SIZE,BLOCK_SIZE * 10,BLOCK_SIZE,REPLICATION,SEED);
    List<LocatedBlock> blocks=DFSTestUtil.getAllBlocks(fs,path);
    LOG.info("Block0 id is " + blocks.get(0).getBlock().getBlockId());
    long nextBlockExpectedId=blocks.get(0).getBlock().getBlockId() + 1;
    for (int i=1; i < blocks.size(); ++i) {
      long nextBlockId=blocks.get(i).getBlock().getBlockId();
      LOG.info("Block" + i + " id is "+ nextBlockId);
      assertThat(nextBlockId,is(nextBlockExpectedId));
      ++nextBlockExpectedId;
    }
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.snapshot.TestSnapshotFileLength </h4><pre class="type-9 type-7 type-21 type-20 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Verifies values related to public fields.
"></span><br>
/** 
 * Test that we cannot read a file beyond its snapshot length
 * when accessing it via a snapshot path.
 */
@Test(timeout=300000) public void testSnapshotfileLength() throws Exception {
  hdfs.mkdirs(sub);
  int bytesRead;
  byte[] buffer=new byte[BLOCKSIZE * 8];
  FSDataInputStream fis=null;
  FileStatus fileStatus=null;
  Path file1=new Path(sub,file1Name);
  DFSTestUtil.createFile(hdfs,file1,0,REPLICATION,SEED);
  DFSTestUtil.appendFile(hdfs,file1,BLOCKSIZE);
  hdfs.allowSnapshot(sub);
  hdfs.createSnapshot(sub,snapshot1);
  DFSTestUtil.appendFile(hdfs,file1,BLOCKSIZE);
  fileStatus=hdfs.getFileStatus(file1);
  assertThat(fileStatus.getLen(),is((long)BLOCKSIZE * 2));
  fis=hdfs.open(file1);
  bytesRead=fis.read(0,buffer,0,buffer.length);
  assertThat(bytesRead,is(BLOCKSIZE * 2));
  fis.close();
  Path file1snap1=SnapshotTestHelper.getSnapshotPath(sub,snapshot1,file1Name);
  fis=hdfs.open(file1snap1);
  fileStatus=hdfs.getFileStatus(file1snap1);
  assertThat(fileStatus.getLen(),is((long)BLOCKSIZE));
  bytesRead=fis.read(0,buffer,0,buffer.length);
  assertThat(bytesRead,is(BLOCKSIZE));
  fis.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.util.TestWinUtils </h4><pre class="type-9 type-2 type-10 type-21 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000) public void testReadLink() throws IOException {
  File dir1=new File(TEST_DIR,"dir1");
  assertTrue(dir1.mkdirs());
  File file1=new File(dir1,"file1.txt");
  assertTrue(file1.createNewFile());
  File dirLink=new File(TEST_DIR,"dlink");
  File fileLink=new File(TEST_DIR,"flink");
  Shell.execCommand(Shell.WINUTILS,"symlink",dirLink.toString(),dir1.toString());
  Shell.execCommand(Shell.WINUTILS,"symlink",fileLink.toString(),file1.toString());
  String readLinkOutput=Shell.execCommand(Shell.WINUTILS,"readlink",dirLink.toString());
  assertThat(readLinkOutput,equalTo(dir1.toString()));
  readLinkOutput=Shell.execCommand(Shell.WINUTILS,"readlink",fileLink.toString());
  assertThat(readLinkOutput,equalTo(file1.toString()));
  try {
    Shell.execCommand(Shell.WINUTILS,"readlink","");
    fail("Failed to get Shell.ExitCodeException when reading bad symlink");
  }
 catch (  Shell.ExitCodeException ece) {
    assertThat(ece.getExitCode(),is(1));
  }
  try {
    Shell.execCommand(Shell.WINUTILS,"readlink","ThereIsNoSuchLink");
    fail("Failed to get Shell.ExitCodeException when reading bad symlink");
  }
 catch (  Shell.ExitCodeException ece) {
    assertThat(ece.getExitCode(),is(1));
  }
  try {
    Shell.execCommand(Shell.WINUTILS,"readlink",dir1.toString());
    fail("Failed to get Shell.ExitCodeException when reading bad symlink");
  }
 catch (  Shell.ExitCodeException ece) {
    assertThat(ece.getExitCode(),is(1));
  }
  try {
    Shell.execCommand(Shell.WINUTILS,"readlink",file1.toString());
    fail("Failed to get Shell.ExitCodeException when reading bad symlink");
  }
 catch (  Shell.ExitCodeException ece) {
    assertThat(ece.getExitCode(),is(1));
  }
  try {
    Shell.execCommand(Shell.WINUTILS,"readlink","a","b");
    fail("Failed to get Shell.ExitCodeException with bad parameters");
  }
 catch (  Shell.ExitCodeException ece) {
    assertThat(ece.getExitCode(),is(1));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.TestContainerLaunch </h4><pre class="type-2 type-15 type-6 type-21 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testWindowsShellScriptBuilderMkdir() throws IOException {
  String mkDirCmd="@if not exist \"\" mkdir \"\"";
  Assume.assumeTrue(Shell.WINDOWS);
  assertEquals(8191,Shell.WINDOWS_MAX_SHELL_LENGHT);
  ShellScriptBuilder builder=ShellScriptBuilder.create();
  builder.mkdir(new Path(org.apache.commons.lang.StringUtils.repeat("A",1024)));
  builder.mkdir(new Path(org.apache.commons.lang.StringUtils.repeat("E",(Shell.WINDOWS_MAX_SHELL_LENGHT - mkDirCmd.length()) / 2)));
  try {
    builder.mkdir(new Path(org.apache.commons.lang.StringUtils.repeat("X",(Shell.WINDOWS_MAX_SHELL_LENGHT - mkDirCmd.length()) / 2 + 1)));
    fail("long mkdir was expected to throw");
  }
 catch (  IOException e) {
    assertThat(e.getMessage(),containsString(expectedMessage));
  }
}

</code></pre>

<br>
<pre class="type-2 type-15 type-6 type-21 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testWindowsShellScriptBuilderLink() throws IOException {
  Assume.assumeTrue(Shell.WINDOWS);
  String linkCmd="@" + Shell.WINUTILS + " symlink \"\" \"\"";
  assertEquals(8191,Shell.WINDOWS_MAX_SHELL_LENGHT);
  ShellScriptBuilder builder=ShellScriptBuilder.create();
  builder.link(new Path(org.apache.commons.lang.StringUtils.repeat("A",1024)),new Path(org.apache.commons.lang.StringUtils.repeat("B",1024)));
  builder.link(new Path(org.apache.commons.lang.StringUtils.repeat("E",(Shell.WINDOWS_MAX_SHELL_LENGHT - linkCmd.length()) / 2)),new Path(org.apache.commons.lang.StringUtils.repeat("F",(Shell.WINDOWS_MAX_SHELL_LENGHT - linkCmd.length()) / 2)));
  try {
    builder.link(new Path(org.apache.commons.lang.StringUtils.repeat("X",(Shell.WINDOWS_MAX_SHELL_LENGHT - linkCmd.length()) / 2 + 1)),new Path(org.apache.commons.lang.StringUtils.repeat("Y",(Shell.WINDOWS_MAX_SHELL_LENGHT - linkCmd.length()) / 2) + 1));
    fail("long link was expected to throw");
  }
 catch (  IOException e) {
    assertThat(e.getMessage(),containsString(expectedMessage));
  }
}

</code></pre>

<br>
<pre class="type-2 type-15 type-6 type-21 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testWindowsShellScriptBuilderCommand() throws IOException {
  String callCmd="@call ";
  Assume.assumeTrue(Shell.WINDOWS);
  assertEquals(8191,Shell.WINDOWS_MAX_SHELL_LENGHT);
  ShellScriptBuilder builder=ShellScriptBuilder.create();
  builder.command(Arrays.asList(org.apache.commons.lang.StringUtils.repeat("A",1024)));
  builder.command(Arrays.asList(org.apache.commons.lang.StringUtils.repeat("E",Shell.WINDOWS_MAX_SHELL_LENGHT - callCmd.length())));
  try {
    builder.command(Arrays.asList(org.apache.commons.lang.StringUtils.repeat("X",Shell.WINDOWS_MAX_SHELL_LENGHT - callCmd.length() + 1)));
    fail("longCommand was expected to throw");
  }
 catch (  IOException e) {
    assertThat(e.getMessage(),containsString(expectedMessage));
  }
  builder.command(Arrays.asList(org.apache.commons.lang.StringUtils.repeat("A",1024),org.apache.commons.lang.StringUtils.repeat("A",1024),org.apache.commons.lang.StringUtils.repeat("A",1024)));
  builder.command(Arrays.asList(org.apache.commons.lang.StringUtils.repeat("E",4095),org.apache.commons.lang.StringUtils.repeat("E",2047),org.apache.commons.lang.StringUtils.repeat("E",2047 - callCmd.length())));
  try {
    builder.command(Arrays.asList(org.apache.commons.lang.StringUtils.repeat("X",4095),org.apache.commons.lang.StringUtils.repeat("X",2047),org.apache.commons.lang.StringUtils.repeat("X",2048 - callCmd.length())));
    fail("long commands was expected to throw");
  }
 catch (  IOException e) {
    assertThat(e.getMessage(),containsString(expectedMessage));
  }
}

</code></pre>

<br>
<pre class="type-2 type-15 type-6 type-21 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testWindowsShellScriptBuilderEnv() throws IOException {
  Assume.assumeTrue(Shell.WINDOWS);
  assertEquals(8191,Shell.WINDOWS_MAX_SHELL_LENGHT);
  ShellScriptBuilder builder=ShellScriptBuilder.create();
  builder.env("somekey",org.apache.commons.lang.StringUtils.repeat("A",1024));
  builder.env("somekey",org.apache.commons.lang.StringUtils.repeat("A",Shell.WINDOWS_MAX_SHELL_LENGHT - ("@set somekey=").length()));
  try {
    builder.env("somekey",org.apache.commons.lang.StringUtils.repeat("A",Shell.WINDOWS_MAX_SHELL_LENGHT - ("@set somekey=").length()) + 1);
    fail("long env was expected to throw");
  }
 catch (  IOException e) {
    assertThat(e.getMessage(),containsString(expectedMessage));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.util.TestResourceCalculatorProcessTree </h4><pre class="type-1 type-21 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateInstance(){
  ResourceCalculatorProcessTree tree;
  tree=ResourceCalculatorProcessTree.getResourceCalculatorProcessTree("1",EmptyProcessTree.class,new Configuration());
  assertNotNull(tree);
  assertThat(tree,instanceOf(EmptyProcessTree.class));
}

</code></pre>

<br>
<pre class="type-9 type-1 type-21 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreatedInstanceConfigured(){
  ResourceCalculatorProcessTree tree;
  Configuration conf=new Configuration();
  tree=ResourceCalculatorProcessTree.getResourceCalculatorProcessTree("1",EmptyProcessTree.class,conf);
  assertNotNull(tree);
  assertThat(tree.getConf(),sameInstance(conf));
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
