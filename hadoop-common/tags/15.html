<h3><span class=" glyphicon glyphicon-tag"/>&nbspAssumptionSetter</h3><kbd>Sets implicit assumptions </kbd><br><br><br><h4 style="margin:0px">Class: org.apache.hadoop.crypto.TestCryptoCodec </h4><pre class="type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=1200000) public void testOpensslAesCtrCryptoCodec() throws Exception {
  Assume.assumeTrue(NativeCodeLoader.buildSupportsOpenssl());
  Assert.assertEquals(null,OpensslCipher.getLoadingFailureReason());
  cryptoCodecTest(conf,seed,0,"org.apache.hadoop.crypto.OpensslAesCtrCryptoCodec");
  cryptoCodecTest(conf,seed,count,"org.apache.hadoop.crypto.OpensslAesCtrCryptoCodec");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.crypto.TestOpensslCipher </h4><pre class="type-2 type-10 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=120000) public void testGetInstance() throws Exception {
  Assume.assumeTrue(OpensslCipher.getLoadingFailureReason() == null);
  OpensslCipher cipher=OpensslCipher.getInstance("AES/CTR/NoPadding");
  Assert.assertTrue(cipher != null);
  try {
    cipher=OpensslCipher.getInstance("AES2/CTR/NoPadding");
    Assert.fail("Should specify correct algorithm.");
  }
 catch (  NoSuchAlgorithmException e) {
  }
  try {
    cipher=OpensslCipher.getInstance("AES/CTR/NoPadding2");
    Assert.fail("Should specify correct padding.");
  }
 catch (  NoSuchPaddingException e) {
  }
}

</code></pre>

<br>
<pre class="type-2 type-10 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=120000) public void testDoFinalArguments() throws Exception {
  Assume.assumeTrue(OpensslCipher.getLoadingFailureReason() == null);
  OpensslCipher cipher=OpensslCipher.getInstance("AES/CTR/NoPadding");
  Assert.assertTrue(cipher != null);
  cipher.init(OpensslCipher.ENCRYPT_MODE,key,iv);
  ByteBuffer output=ByteBuffer.allocate(1024);
  try {
    cipher.doFinal(output);
    Assert.fail("Output buffer should be direct buffer.");
  }
 catch (  IllegalArgumentException e) {
    GenericTestUtils.assertExceptionContains("Direct buffer is required",e);
  }
}

</code></pre>

<br>
<pre class="type-2 type-10 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=120000) public void testUpdateArguments() throws Exception {
  Assume.assumeTrue(OpensslCipher.getLoadingFailureReason() == null);
  OpensslCipher cipher=OpensslCipher.getInstance("AES/CTR/NoPadding");
  Assert.assertTrue(cipher != null);
  cipher.init(OpensslCipher.ENCRYPT_MODE,key,iv);
  ByteBuffer input=ByteBuffer.allocate(1024);
  ByteBuffer output=ByteBuffer.allocate(1024);
  try {
    cipher.update(input,output);
    Assert.fail("Input and output buffer should be direct buffer.");
  }
 catch (  IllegalArgumentException e) {
    GenericTestUtils.assertExceptionContains("Direct buffers are required",e);
  }
  input=ByteBuffer.allocateDirect(1024);
  output=ByteBuffer.allocateDirect(1000);
  try {
    cipher.update(input,output);
    Assert.fail("Output buffer length should be sufficient " + "to store output data");
  }
 catch (  ShortBufferException e) {
    GenericTestUtils.assertExceptionContains("Output buffer is not sufficient",e);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.SymlinkBaseTest </h4><pre class="type-2 type-7 type-10 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testRenameSymlink() throws IOException {
  assumeTrue(!emulatingSymlinksOnWindows());
  Path file=new Path(testBaseDir1(),"file");
  Path link1=new Path(testBaseDir1(),"linkToFile1");
  Path link2=new Path(testBaseDir1(),"linkToFile2");
  createAndWriteFile(file);
  wrapper.createSymlink(file,link1,false);
  wrapper.rename(link1,link2);
  assertTrue(wrapper.getFileLinkStatus(link2).isSymlink());
  assertFalse(wrapper.getFileStatus(link2).isDirectory());
  readFile(link2);
  readFile(file);
  try {
    createAndWriteFile(link2);
    fail("link was not renamed");
  }
 catch (  IOException x) {
  }
}

</code></pre>

<br>
<pre class="type-2 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testCreateLinkTwice() throws IOException {
  assumeTrue(!emulatingSymlinksOnWindows());
  Path file=new Path(testBaseDir1(),"file");
  Path link=new Path(testBaseDir1(),"linkToFile");
  createAndWriteFile(file);
  wrapper.createSymlink(file,link,false);
  try {
    wrapper.createSymlink(file,link,false);
    fail("link already exists");
  }
 catch (  IOException x) {
  }
}

</code></pre>

<br>
<pre class="type-11 type-7 type-10 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testStatLinkToFile() throws IOException {
  assumeTrue(!emulatingSymlinksOnWindows());
  Path file=new Path(testBaseDir1() + "/file");
  Path linkToFile=new Path(testBaseDir1() + "/linkToFile");
  createAndWriteFile(file);
  wrapper.createSymlink(file,linkToFile,false);
  assertFalse(wrapper.getFileLinkStatus(linkToFile).isDirectory());
  assertTrue(wrapper.isSymlink(linkToFile));
  assertTrue(wrapper.isFile(linkToFile));
  assertFalse(wrapper.isDir(linkToFile));
  assertEquals(file,wrapper.getLinkTarget(linkToFile));
  if (!"file".equals(getScheme())) {
    assertEquals(wrapper.getFileStatus(file),wrapper.getFileStatus(linkToFile));
    assertEquals(wrapper.makeQualified(file),wrapper.getFileStatus(linkToFile).getPath());
    assertEquals(wrapper.makeQualified(linkToFile),wrapper.getFileLinkStatus(linkToFile).getPath());
  }
}

</code></pre>

<br>
<pre class="type-7 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testAccessFileViaInterSymlinkRelTarget() throws IOException {
  assumeTrue(!"file".equals(getScheme()));
  Path dir=new Path(testBaseDir1(),"dir");
  Path file=new Path(dir,"file");
  Path linkToDir=new Path(testBaseDir1(),"linkToDir");
  Path fileViaLink=new Path(linkToDir,"file");
  wrapper.mkdir(dir,FileContext.DEFAULT_PERM,false);
  wrapper.createSymlink(new Path("dir"),linkToDir,false);
  createAndWriteFile(fileViaLink);
  assertEquals(wrapper.makeQualified(file),wrapper.getFileStatus(file).getPath());
  assertEquals(wrapper.getFileStatus(file),wrapper.getFileLinkStatus(file));
  assertEquals(wrapper.getFileStatus(fileViaLink),wrapper.getFileLinkStatus(fileViaLink));
  assertEquals(wrapper.getFileStatus(fileViaLink),wrapper.getFileLinkStatus(file));
}

</code></pre>

<br>
<pre class="type-7 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testStatRelLinkToFile() throws IOException {
  assumeTrue(!"file".equals(getScheme()));
  Path file=new Path(testBaseDir1(),"file");
  Path linkToFile=new Path(testBaseDir1(),"linkToFile");
  createAndWriteFile(file);
  wrapper.createSymlink(new Path("file"),linkToFile,false);
  assertEquals(wrapper.getFileStatus(file),wrapper.getFileStatus(linkToFile));
  assertEquals(wrapper.makeQualified(file),wrapper.getFileStatus(linkToFile).getPath());
  assertEquals(wrapper.makeQualified(linkToFile),wrapper.getFileLinkStatus(linkToFile).getPath());
}

</code></pre>

<br>
<pre class="type-2 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testRenameLinkTarget() throws IOException {
  assumeTrue(!emulatingSymlinksOnWindows());
  Path file=new Path(testBaseDir1(),"file");
  Path fileNew=new Path(testBaseDir1(),"fileNew");
  Path link=new Path(testBaseDir1(),"linkToFile");
  createAndWriteFile(file);
  wrapper.createSymlink(file,link,false);
  wrapper.rename(file,fileNew,Rename.OVERWRITE);
  try {
    readFile(link);
    fail("Link should be dangling");
  }
 catch (  IOException x) {
  }
  wrapper.rename(fileNew,file,Rename.OVERWRITE);
  readFile(link);
}

</code></pre>

<br>
<pre class="type-7 type-10 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testCreateLinkViaLink() throws IOException {
  assumeTrue(!emulatingSymlinksOnWindows());
  Path dir1=new Path(testBaseDir1());
  Path file=new Path(testBaseDir1(),"file");
  Path linkToDir=new Path(testBaseDir2(),"linkToDir");
  Path fileViaLink=new Path(linkToDir,"file");
  Path linkToFile=new Path(linkToDir,"linkToFile");
  createAndWriteFile(file);
  wrapper.createSymlink(dir1,linkToDir,false);
  wrapper.createSymlink(fileViaLink,linkToFile,false);
  assertTrue(wrapper.isFile(linkToFile));
  assertTrue(wrapper.getFileLinkStatus(linkToFile).isSymlink());
  readFile(linkToFile);
  assertEquals(fileSize,wrapper.getFileStatus(linkToFile).getLen());
  assertEquals(fileViaLink,wrapper.getLinkTarget(linkToFile));
}

</code></pre>

<br>
<pre class="type-11 type-2 type-7 type-10 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testCreateLinkUsingPartQualPath1() throws IOException {
  assumeTrue(!"file".equals(getScheme()));
  Path schemeAuth=new Path(testURI().toString());
  Path fileWoHost=new Path(getScheme() + "://" + testBaseDir1()+ "/file");
  Path link=new Path(testBaseDir1() + "/linkToFile");
  Path linkQual=new Path(schemeAuth,testBaseDir1() + "/linkToFile");
  FSTestWrapper localWrapper=wrapper.getLocalFSWrapper();
  wrapper.createSymlink(fileWoHost,link,false);
  assertEquals(fileWoHost,wrapper.getLinkTarget(linkQual));
  assertEquals(fileWoHost.toString(),wrapper.getFileLinkStatus(link).getSymlink().toString());
  assertEquals(fileWoHost.toString(),wrapper.getFileLinkStatus(linkQual).getSymlink().toString());
  if (wrapper instanceof FileContextTestWrapper) {
    assertEquals(fileWoHost.toString(),localWrapper.getFileLinkStatus(linkQual).getSymlink().toString());
  }
  try {
    readFile(link);
    fail("DFS requires URIs with schemes have an authority");
  }
 catch (  java.lang.RuntimeException e) {
    assertTrue(wrapper instanceof FileContextTestWrapper);
  }
catch (  FileNotFoundException e) {
    assertTrue(wrapper instanceof FileSystemTestWrapper);
    GenericTestUtils.assertExceptionContains("File does not exist: /test1/file",e);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestEnhancedByteBufferAccess </h4><pre class="type-2 type-7 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test2GBMmapLimit() throws Exception {
  Assume.assumeTrue(BlockReaderTestUtil.shouldTestLargeFiles());
  HdfsConfiguration conf=initZeroCopyTest();
  final long TEST_FILE_LENGTH=2469605888L;
  conf.set(DFSConfigKeys.DFS_CHECKSUM_TYPE_KEY,"NULL");
  conf.setLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,TEST_FILE_LENGTH);
  MiniDFSCluster cluster=null;
  final Path TEST_PATH=new Path("/a");
  final String CONTEXT="test2GBMmapLimit";
  conf.set(DFSConfigKeys.DFS_CLIENT_CONTEXT,CONTEXT);
  FSDataInputStream fsIn=null, fsIn2=null;
  ByteBuffer buf1=null, buf2=null;
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(1).build();
    cluster.waitActive();
    DistributedFileSystem fs=cluster.getFileSystem();
    DFSTestUtil.createFile(fs,TEST_PATH,TEST_FILE_LENGTH,(short)1,0xB);
    DFSTestUtil.waitReplication(fs,TEST_PATH,(short)1);
    fsIn=fs.open(TEST_PATH);
    buf1=fsIn.read(null,1,EnumSet.of(ReadOption.SKIP_CHECKSUMS));
    Assert.assertEquals(1,buf1.remaining());
    fsIn.releaseBuffer(buf1);
    buf1=null;
    fsIn.seek(2147483640L);
    buf1=fsIn.read(null,1024,EnumSet.of(ReadOption.SKIP_CHECKSUMS));
    Assert.assertEquals(7,buf1.remaining());
    Assert.assertEquals(Integer.MAX_VALUE,buf1.limit());
    fsIn.releaseBuffer(buf1);
    buf1=null;
    Assert.assertEquals(2147483647L,fsIn.getPos());
    try {
      buf1=fsIn.read(null,1024,EnumSet.of(ReadOption.SKIP_CHECKSUMS));
      Assert.fail("expected UnsupportedOperationException");
    }
 catch (    UnsupportedOperationException e) {
    }
    fsIn.close();
    fsIn=null;
    final Path TEST_PATH2=new Path("/b");
    conf.setLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,268435456L);
    DFSTestUtil.createFile(fs,TEST_PATH2,1024 * 1024,TEST_FILE_LENGTH,268435456L,(short)1,0xA);
    fsIn2=fs.open(TEST_PATH2);
    fsIn2.seek(2147483640L);
    buf2=fsIn2.read(null,1024,EnumSet.of(ReadOption.SKIP_CHECKSUMS));
    Assert.assertEquals(8,buf2.remaining());
    Assert.assertEquals(2147483648L,fsIn2.getPos());
    fsIn2.releaseBuffer(buf2);
    buf2=null;
    buf2=fsIn2.read(null,1024,EnumSet.of(ReadOption.SKIP_CHECKSUMS));
    Assert.assertEquals(1024,buf2.remaining());
    Assert.assertEquals(2147484672L,fsIn2.getPos());
    fsIn2.releaseBuffer(buf2);
    buf2=null;
  }
  finally {
    if (buf1 != null) {
      fsIn.releaseBuffer(buf1);
    }
    if (buf2 != null) {
      fsIn2.releaseBuffer(buf2);
    }
    IOUtils.cleanup(null,fsIn,fsIn2);
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestFsShellCopy </h4><pre class="type-7 type-10 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMoveFromWindowsLocalPath() throws Exception {
  assumeTrue(Path.WINDOWS);
  Path testRoot=new Path(testRootDir,"testPutFile");
  lfs.delete(testRoot,true);
  lfs.mkdirs(testRoot);
  Path target=new Path(testRoot,"target");
  Path srcFile=new Path(testRoot,new Path("srcFile"));
  lfs.createNewFile(srcFile);
  String winSrcFile=(new File(srcFile.toUri().getPath().toString())).getAbsolutePath();
  shellRun(0,"-moveFromLocal",winSrcFile,target.toString());
  assertFalse(lfs.exists(srcFile));
  assertTrue(lfs.exists(target));
  assertTrue(lfs.isFile(target));
}

</code></pre>

<br>
<pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopyFileFromWindowsLocalPath() throws Exception {
  assumeTrue(Path.WINDOWS);
  String windowsTestRootPath=(new File(testRootDir.toUri().getPath().toString())).getAbsolutePath();
  Path testRoot=new Path(windowsTestRootPath,"testPutFile");
  lfs.delete(testRoot,true);
  lfs.mkdirs(testRoot);
  Path targetDir=new Path(testRoot,"target");
  Path filePath=new Path(testRoot,new Path("srcFile"));
  lfs.create(filePath).close();
  checkPut(filePath,targetDir,true);
}

</code></pre>

<br>
<pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetWindowsLocalPath() throws Exception {
  assumeTrue(Path.WINDOWS);
  String winDstFile=(new File(dstPath.toUri().getPath().toString())).getAbsolutePath();
  shellRun(0,"-get",srcPath.toString(),winDstFile);
  checkPath(dstPath,false);
}

</code></pre>

<br>
<pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopyDirFromWindowsLocalPath() throws Exception {
  assumeTrue(Path.WINDOWS);
  String windowsTestRootPath=(new File(testRootDir.toUri().getPath().toString())).getAbsolutePath();
  Path testRoot=new Path(windowsTestRootPath,"testPutDir");
  lfs.delete(testRoot,true);
  lfs.mkdirs(testRoot);
  Path targetDir=new Path(testRoot,"target");
  Path dirPath=new Path(testRoot,new Path("srcDir"));
  lfs.mkdirs(dirPath);
  lfs.create(new Path(dirPath,"srcFile")).close();
  checkPut(dirPath,targetDir,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestGlobPaths </h4><pre class="type-9 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void pTestEscape() throws IOException {
  org.junit.Assume.assumeTrue(!Path.WINDOWS);
  try {
    String[] files=new String[]{USER_DIR + "/ab\\[c.d"};
    Path[] matchedPath=prepareTesting(USER_DIR + "/ab\\[c.d",files);
    assertEquals(matchedPath.length,1);
    assertEquals(matchedPath[0],path[0]);
  }
  finally {
    cleanupDFS();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestLocalDirAllocator </h4><pre class="type-9 type-7 type-10 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that {@link LocalDirAllocator#getAllLocalPathsToRead(String,Configuration)} 
 * returns correct filenames and "file" schema.
 * @throws IOException
 */
@Test(timeout=30000) public void testGetAllLocalPathsToRead() throws IOException {
  assumeTrue(!isWindows);
  String dir0=buildBufferDir(ROOT,0);
  String dir1=buildBufferDir(ROOT,1);
  try {
    conf.set(CONTEXT,dir0 + "," + dir1);
    assertTrue(localFs.mkdirs(new Path(dir0)));
    assertTrue(localFs.mkdirs(new Path(dir1)));
    localFs.create(new Path(dir0 + Path.SEPARATOR + FILENAME));
    localFs.create(new Path(dir1 + Path.SEPARATOR + FILENAME));
    final Iterable<Path> pathIterable=dirAllocator.getAllLocalPathsToRead(FILENAME,conf);
    int count=0;
    for (    final Path p : pathIterable) {
      count++;
      assertEquals(FILENAME,p.getName());
      assertEquals("file",p.getFileSystem(conf).getUri().getScheme());
    }
    assertEquals(2,count);
    try {
      Path p=pathIterable.iterator().next();
      assertFalse("NoSuchElementException must be thrown, but returned [" + p + "] instead.",true);
    }
 catch (    NoSuchElementException nsee) {
    }
    final Iterable<Path> pathIterable2=dirAllocator.getAllLocalPathsToRead(FILENAME,conf);
    final Iterator<Path> it=pathIterable2.iterator();
    try {
      it.remove();
      assertFalse(true);
    }
 catch (    UnsupportedOperationException uoe) {
    }
  }
  finally {
    Shell.execCommand(new String[]{"chmod","u+w",BUFFER_DIR_ROOT});
    rmBufferDirs();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-10 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test no side effect files are left over. After creating a temp
 * temp file, remove both the temp file and its parent. Verify that
 * no files or directories are left over as can happen when File objects
 * are mistakenly created from fully qualified path strings.
 * @throws IOException
 */
@Test(timeout=30000) public void testNoSideEffects() throws IOException {
  assumeTrue(!isWindows);
  String dir=buildBufferDir(ROOT,0);
  try {
    conf.set(CONTEXT,dir);
    File result=dirAllocator.createTmpFileForWrite(FILENAME,-1,conf);
    assertTrue(result.delete());
    assertTrue(result.getParentFile().delete());
    assertFalse(new File(dir).exists());
  }
  finally {
    Shell.execCommand(Shell.getSetPermissionCommand("u+w",false,BUFFER_DIR_ROOT));
    rmBufferDirs();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-10 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test getLocalPathToRead() returns correct filename and "file" schema.
 * @throws IOException
 */
@Test(timeout=30000) public void testGetLocalPathToRead() throws IOException {
  assumeTrue(!isWindows);
  String dir=buildBufferDir(ROOT,0);
  try {
    conf.set(CONTEXT,dir);
    assertTrue(localFs.mkdirs(new Path(dir)));
    File f1=dirAllocator.createTmpFileForWrite(FILENAME,SMALL_FILE_SIZE,conf);
    Path p1=dirAllocator.getLocalPathToRead(f1.getName(),conf);
    assertEquals(f1.getName(),p1.getName());
    assertEquals("file",p1.getFileSystem(conf).getUri().getScheme());
  }
  finally {
    Shell.execCommand(Shell.getSetPermissionCommand("u+w",false,BUFFER_DIR_ROOT));
    rmBufferDirs();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestLocalFileSystem </h4><pre class="type-7 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=1000) public void testListStatusWithColons() throws IOException {
  assumeTrue(!Shell.WINDOWS);
  File colonFile=new File(TEST_ROOT_DIR,"foo:bar");
  colonFile.mkdirs();
  FileStatus[] stats=fileSys.listStatus(new Path(TEST_ROOT_DIR));
  assertEquals("Unexpected number of stats",1,stats.length);
  assertEquals("Bad path from stat",colonFile.getAbsolutePath(),stats[0].getPath().toUri().getPath());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testListStatusReturnConsistentPathOnWindows() throws IOException {
  assumeTrue(Shell.WINDOWS);
  String dirNoDriveSpec=TEST_ROOT_DIR;
  if (dirNoDriveSpec.charAt(1) == ':')   dirNoDriveSpec=dirNoDriveSpec.substring(2);
  File file=new File(dirNoDriveSpec,"foo");
  file.mkdirs();
  FileStatus[] stats=fileSys.listStatus(new Path(dirNoDriveSpec));
  assertEquals("Unexpected number of stats",1,stats.length);
  assertEquals("Bad path from stat",new Path(file.getPath()).toUri().getPath(),stats[0].getPath().toUri().getPath());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestStat </h4><pre class="type-9 type-7 type-10 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testStat() throws Exception {
  Assume.assumeTrue(Stat.isAvailable());
  FileSystem fs=FileSystem.getLocal(new Configuration());
  Path testDir=new Path(getTestRootPath(fs),"teststat");
  fs.mkdirs(testDir);
  Path sub1=new Path(testDir,"sub1");
  Path sub2=new Path(testDir,"sub2");
  fs.mkdirs(sub1);
  fs.createSymlink(sub1,sub2,false);
  FileStatus stat1=new Stat(sub1,4096l,false,fs).getFileStatus();
  FileStatus stat2=new Stat(sub2,0,false,fs).getFileStatus();
  assertTrue(stat1.isDirectory());
  assertFalse(stat2.isDirectory());
  fs.delete(testDir,true);
}

</code></pre>

<br>
<pre class="type-2 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testStatFileNotFound() throws Exception {
  Assume.assumeTrue(Stat.isAvailable());
  try {
    stat.getFileStatus();
    fail("Expected FileNotFoundException");
  }
 catch (  FileNotFoundException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestSymlinkLocalFS </h4><pre class="type-2 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=1000) public void testGetLinkStatusPartQualTarget() throws IOException {
  assumeTrue(!emulatingSymlinksOnWindows());
  Path fileAbs=new Path(testBaseDir1() + "/file");
  Path fileQual=new Path(testURI().toString(),fileAbs);
  Path dir=new Path(testBaseDir1());
  Path link=new Path(testBaseDir1() + "/linkToFile");
  Path dirNew=new Path(testBaseDir2());
  Path linkNew=new Path(testBaseDir2() + "/linkToFile");
  wrapper.delete(dirNew,true);
  createAndWriteFile(fileQual);
  wrapper.setWorkingDirectory(dir);
  wrapper.createSymlink(fileQual,link,false);
  assertEquals(fileQual,wrapper.getFileLinkStatus(link).getSymlink());
  wrapper.rename(dir,dirNew);
  assertEquals(fileQual,wrapper.getFileLinkStatus(linkNew).getSymlink());
  try {
    readFile(linkNew);
    fail("The link should be dangling now.");
  }
 catch (  FileNotFoundException x) {
  }
  Path anotherFs=new Path("hdfs://host:1000/dir/file");
  FileUtil.fullyDelete(new File(linkNew.toString()));
  try {
    wrapper.createSymlink(anotherFs,linkNew,false);
    fail("Created a local fs link to a non-local fs");
  }
 catch (  IOException x) {
  }
}

</code></pre>

<br>
<pre class="type-9 type-2 type-7 type-10 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=1000) public void testDanglingLink() throws IOException {
  assumeTrue(!Path.WINDOWS);
  Path fileAbs=new Path(testBaseDir1() + "/file");
  Path fileQual=new Path(testURI().toString(),fileAbs);
  Path link=new Path(testBaseDir1() + "/linkToFile");
  Path linkQual=new Path(testURI().toString(),link.toString());
  wrapper.createSymlink(fileAbs,link,false);
  FileUtil.fullyDelete(new File(link.toUri().getPath()));
  wrapper.createSymlink(fileAbs,link,false);
  try {
    wrapper.getFileStatus(link);
    fail("Got FileStatus for dangling link");
  }
 catch (  FileNotFoundException f) {
  }
  UserGroupInformation user=UserGroupInformation.getCurrentUser();
  FileStatus fsd=wrapper.getFileLinkStatus(link);
  assertEquals(fileQual,fsd.getSymlink());
  assertTrue(fsd.isSymlink());
  assertFalse(fsd.isDirectory());
  assertEquals(user.getUserName(),fsd.getOwner());
  assertEquals(user.getGroupNames()[0],fsd.getGroup());
  assertEquals(linkQual,fsd.getPath());
  try {
    readFile(link);
    fail("Got FileStatus for dangling link");
  }
 catch (  FileNotFoundException f) {
  }
  createAndWriteFile(fileAbs);
  wrapper.getFileStatus(link);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.azure.metrics.TestBandwidthGaugeUpdater </h4><pre class="type-10 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFinalizerThreadShutdown() throws Exception {
  System.gc();
  System.runFinalization();
  int nUpdaterThreadsStart=getWasbThreadCount();
  assertTrue("Existing WASB threads have not been cleared",nUpdaterThreadsStart == 0);
  final int nFilesystemsToSpawn=10;
  AzureBlobStorageTestAccount testAccount=null;
  for (int i=0; i < nFilesystemsToSpawn; i++) {
    testAccount=AzureBlobStorageTestAccount.createMock();
    testAccount.getFileSystem();
  }
  int nUpdaterThreadsAfterSpawn=getWasbThreadCount();
  Assume.assumeTrue("Background threads should have spawned.",nUpdaterThreadsAfterSpawn == 10);
  testAccount=null;
  System.gc();
  System.runFinalization();
  int nUpdaterThreadsAfterCleanup=getWasbThreadCount();
  assertTrue("Finalizers should have reduced the thread count.  ",nUpdaterThreadsAfterCleanup == 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ha.TestSshFenceByTcpPort </h4><pre class="type-7 type-10 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=20000) public void testFence() throws BadFencingConfigurationException {
  Assume.assumeTrue(isConfigured());
  Configuration conf=new Configuration();
  conf.set(SshFenceByTcpPort.CONF_IDENTITIES_KEY,TEST_KEYFILE);
  SshFenceByTcpPort fence=new SshFenceByTcpPort();
  fence.setConf(conf);
  assertTrue(fence.tryFence(TEST_TARGET,null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestBlockReaderFactory </h4><pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void init(){
  DomainSocket.disableBindPathValidation();
  Assume.assumeThat(DomainSocket.getLoadingFailureReason(),equalTo(null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestBlockReaderLocalLegacy </h4><pre class="type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBothOldAndNewShortCircuitConfigured() throws Exception {
  final short REPL_FACTOR=1;
  final int FILE_LENGTH=512;
  Assume.assumeTrue(null == DomainSocket.getLoadingFailureReason());
  TemporarySocketDirectory socketDir=new TemporarySocketDirectory();
  HdfsConfiguration conf=getConfiguration(socketDir);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(1).build();
  cluster.waitActive();
  socketDir.close();
  FileSystem fs=cluster.getFileSystem();
  Path path=new Path("/foo");
  byte orig[]=new byte[FILE_LENGTH];
  for (int i=0; i < orig.length; i++) {
    orig[i]=(byte)(i % 10);
  }
  FSDataOutputStream fos=fs.create(path,(short)1);
  fos.write(orig);
  fos.close();
  DFSTestUtil.waitReplication(fs,path,REPL_FACTOR);
  FSDataInputStream fis=cluster.getFileSystem().open(path);
  byte buf[]=new byte[FILE_LENGTH];
  IOUtils.readFully(fis,buf,0,FILE_LENGTH);
  fis.close();
  Assert.assertArrayEquals(orig,buf);
  Arrays.equals(orig,buf);
  cluster.shutdown();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDFSUtil </h4><pre class="type-9 type-7 type-15 type-6 type-21 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=15000) public void testLocalhostReverseLookup(){
  Assume.assumeTrue(!Shell.WINDOWS);
  HdfsConfiguration conf=new HdfsConfiguration();
  conf.set(CommonConfigurationKeys.FS_DEFAULT_NAME_KEY,"hdfs://127.0.0.1:8020");
  Collection<URI> uris=DFSUtil.getNameServiceUris(conf);
  assertEquals(1,uris.size());
  for (  URI uri : uris) {
    assertThat(uri.getHost(),not("127.0.0.1"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDatanodeConfig </h4><pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testMemlockLimit() throws Exception {
  assumeTrue(NativeIO.isAvailable());
  final long memlockLimit=NativeIO.POSIX.getCacheManipulator().getMemlockLimit();
  assumeTrue(memlockLimit != Long.MAX_VALUE);
  File dataDir=new File(BASE_DIR,"data").getCanonicalFile();
  Configuration conf=cluster.getConfiguration(0);
  conf.set(DFSConfigKeys.DFS_DATANODE_DATA_DIR_KEY,makeURI("file",null,fileAsURI(dataDir).getPath()));
  long prevLimit=conf.getLong(DFSConfigKeys.DFS_DATANODE_MAX_LOCKED_MEMORY_KEY,DFSConfigKeys.DFS_DATANODE_MAX_LOCKED_MEMORY_DEFAULT);
  DataNode dn=null;
  try {
    conf.setLong(DFSConfigKeys.DFS_DATANODE_MAX_LOCKED_MEMORY_KEY,memlockLimit);
    dn=DataNode.createDataNode(new String[]{},conf);
    dn.shutdown();
    dn=null;
    conf.setLong(DFSConfigKeys.DFS_DATANODE_MAX_LOCKED_MEMORY_KEY,memlockLimit + 1);
    try {
      dn=DataNode.createDataNode(new String[]{},conf);
    }
 catch (    RuntimeException e) {
      GenericTestUtils.assertExceptionContains("more than the datanode's available RLIMIT_MEMLOCK",e);
    }
  }
  finally {
    if (dn != null) {
      dn.shutdown();
    }
    conf.setLong(DFSConfigKeys.DFS_DATANODE_MAX_LOCKED_MEMORY_KEY,prevLimit);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestFileCreation </h4><pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Same test but the client should use DN hostnames 
 */
@Test public void testFileCreationUsingHostname() throws IOException {
  assumeTrue(System.getProperty("os.name").startsWith("Linux"));
  checkFileCreation(null,true);
}

</code></pre>

<br>
<pre class="type-2 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Same test but the client should bind to a local interface 
 */
@Test public void testFileCreationSetLocalInterface() throws IOException {
  assumeTrue(System.getProperty("os.name").startsWith("Linux"));
  checkFileCreation("lo",false);
  try {
    checkFileCreation("bogus-interface",false);
    fail("Able to specify a bogus interface");
  }
 catch (  UnknownHostException e) {
    assertEquals("No such interface bogus-interface",e.getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestMiniDFSCluster </h4><pre class="type-7 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * MiniDFSCluster should not clobber dfs.datanode.hostname if requested 
 */
@Test(timeout=100000) public void testClusterSetDatanodeHostname() throws Throwable {
  assumeTrue(System.getProperty("os.name").startsWith("Linux"));
  Configuration conf=new HdfsConfiguration();
  conf.set(DFSConfigKeys.DFS_DATANODE_HOST_NAME_KEY,"MYHOST");
  File testDataCluster5=new File(testDataPath,CLUSTER_5);
  String c5Path=testDataCluster5.getAbsolutePath();
  conf.set(MiniDFSCluster.HDFS_MINIDFS_BASEDIR,c5Path);
  MiniDFSCluster cluster5=new MiniDFSCluster.Builder(conf).numDataNodes(1).checkDataNodeHostConfig(true).build();
  try {
    assertEquals("DataNode hostname config not respected","MYHOST",cluster5.getDataNodes().get(0).getDatanodeId().getHostName());
  }
  finally {
    MiniDFSCluster.shutdownCluster(cluster5);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestParallelShortCircuitRead </h4><pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void before(){
  Assume.assumeThat(DomainSocket.getLoadingFailureReason(),equalTo(null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestParallelShortCircuitReadNoChecksum </h4><pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void before(){
  Assume.assumeThat(DomainSocket.getLoadingFailureReason(),equalTo(null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestParallelShortCircuitReadUnCached </h4><pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void before(){
  Assume.assumeThat(DomainSocket.getLoadingFailureReason(),equalTo(null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestParallelUnixDomainRead </h4><pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void before(){
  Assume.assumeThat(DomainSocket.getLoadingFailureReason(),equalTo(null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.qjournal.server.TestJournal </h4><pre class="type-2 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testJournalLocking() throws Exception {
  Assume.assumeTrue(journal.getStorage().getStorageDir(0).isLockSupported());
  StorageDirectory sd=journal.getStorage().getStorageDir(0);
  File lockFile=new File(sd.getRoot(),Storage.STORAGE_FILE_LOCK);
  GenericTestUtils.assertExists(lockFile);
  journal.newEpoch(FAKE_NSINFO,1);
  try {
    new Journal(conf,TEST_LOG_DIR,JID,StartupOption.REGULAR,mockErrorReporter);
    fail("Did not fail to create another journal in same dir");
  }
 catch (  IOException ioe) {
    GenericTestUtils.assertExceptionContains("Cannot lock storage",ioe);
  }
  journal.close();
  Journal journal2=new Journal(conf,TEST_LOG_DIR,JID,StartupOption.REGULAR,mockErrorReporter);
  journal2.newEpoch(FAKE_NSINFO,2);
  journal2.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.security.token.block.TestBlockToken </h4><pre class="type-9 type-13 type-11 type-2 type-7 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that fast repeated invocations of createClientDatanodeProtocolProxy
 * will not end up using up thousands of sockets. This is a regression test
 * for HDFS-1965.
 */
@Test public void testBlockTokenRpcLeak() throws Exception {
  Configuration conf=new Configuration();
  conf.set(HADOOP_SECURITY_AUTHENTICATION,"kerberos");
  UserGroupInformation.setConfiguration(conf);
  Assume.assumeTrue(FD_DIR.exists());
  BlockTokenSecretManager sm=new BlockTokenSecretManager(blockKeyUpdateInterval,blockTokenLifetime,0,"fake-pool",null);
  Token<BlockTokenIdentifier> token=sm.generateToken(block3,EnumSet.allOf(BlockTokenSecretManager.AccessMode.class));
  final Server server=createMockDatanode(sm,token,conf);
  server.start();
  final InetSocketAddress addr=NetUtils.getConnectAddress(server);
  DatanodeID fakeDnId=DFSTestUtil.getLocalDatanodeID(addr.getPort());
  ExtendedBlock b=new ExtendedBlock("fake-pool",new Block(12345L));
  LocatedBlock fakeBlock=new LocatedBlock(b,new DatanodeInfo[0]);
  fakeBlock.setBlockToken(token);
  ClientDatanodeProtocol proxyToNoWhere=RPC.getProxy(ClientDatanodeProtocol.class,ClientDatanodeProtocol.versionID,new InetSocketAddress("1.1.1.1",1),UserGroupInformation.createRemoteUser("junk"),conf,NetUtils.getDefaultSocketFactory(conf));
  ClientDatanodeProtocol proxy=null;
  int fdsAtStart=countOpenFileDescriptors();
  try {
    long endTime=Time.now() + 3000;
    while (Time.now() < endTime) {
      proxy=DFSUtil.createClientDatanodeProtocolProxy(fakeDnId,conf,1000,false,fakeBlock);
      assertEquals(block3.getBlockId(),proxy.getReplicaVisibleLength(block3));
      if (proxy != null) {
        RPC.stopProxy(proxy);
      }
      LOG.info("Num open fds:" + countOpenFileDescriptors());
    }
    int fdsAtEnd=countOpenFileDescriptors();
    if (fdsAtEnd - fdsAtStart > 50) {
      fail("Leaked " + (fdsAtEnd - fdsAtStart) + " fds!");
    }
  }
  finally {
    server.stop();
  }
  RPC.stopProxy(proxyToNoWhere);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.blockmanagement.TestRBWBlockInvalidation </h4><pre class="type-9 type-7 type-10 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test when a block's replica is removed from RBW folder in one of the
 * datanode, namenode should ask to invalidate that corrupted block and
 * schedule replication for one more replica for that under replicated block.
 */
@Test(timeout=600000) public void testBlockInvalidationWhenRBWReplicaMissedInDN() throws IOException, InterruptedException {
  assumeTrue(!Path.WINDOWS);
  Configuration conf=new HdfsConfiguration();
  conf.setInt(DFSConfigKeys.DFS_REPLICATION_KEY,2);
  conf.setLong(DFSConfigKeys.DFS_BLOCKREPORT_INTERVAL_MSEC_KEY,300);
  conf.setLong(DFSConfigKeys.DFS_DATANODE_DIRECTORYSCAN_INTERVAL_KEY,1);
  conf.setLong(DFSConfigKeys.DFS_HEARTBEAT_INTERVAL_KEY,1);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(2).build();
  FSDataOutputStream out=null;
  try {
    final FSNamesystem namesystem=cluster.getNamesystem();
    FileSystem fs=cluster.getFileSystem();
    Path testPath=new Path("/tmp/TestRBWBlockInvalidation","foo1");
    out=fs.create(testPath,(short)2);
    out.writeBytes("HDFS-3157: " + testPath);
    out.hsync();
    cluster.startDataNodes(conf,1,true,null,null,null);
    String bpid=namesystem.getBlockPoolId();
    ExtendedBlock blk=DFSTestUtil.getFirstBlock(fs,testPath);
    Block block=blk.getLocalBlock();
    DataNode dn=cluster.getDataNodes().get(0);
    File blockFile=DataNodeTestUtils.getBlockFile(dn,bpid,block);
    File metaFile=DataNodeTestUtils.getMetaFile(dn,bpid,block);
    assertTrue("Could not delete the block file from the RBW folder",blockFile.delete());
    assertTrue("Could not delete the block meta file from the RBW folder",metaFile.delete());
    out.close();
    int liveReplicas=0;
    while (true) {
      if ((liveReplicas=countReplicas(namesystem,blk).liveReplicas()) < 2) {
        LOG.info("Live Replicas after corruption: " + liveReplicas);
        break;
      }
      Thread.sleep(100);
    }
    assertEquals("There should be less than 2 replicas in the " + "liveReplicasMap",1,liveReplicas);
    while (true) {
      if ((liveReplicas=countReplicas(namesystem,blk).liveReplicas()) > 1) {
        LOG.info("Live Replicas after Rereplication: " + liveReplicas);
        break;
      }
      Thread.sleep(100);
    }
    assertEquals("There should be two live replicas",2,liveReplicas);
    while (true) {
      Thread.sleep(100);
      if (countReplicas(namesystem,blk).corruptReplicas() == 0) {
        LOG.info("Corrupt Replicas becomes 0");
        break;
      }
    }
  }
  finally {
    if (out != null) {
      out.close();
    }
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestDataNodeVolumeFailureReporting </h4><pre class="type-7 type-10 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that individual volume failures do not cause DNs to fail, that
 * all volumes failed on a single datanode do cause it to fail, and
 * that the capacities and liveliness is adjusted correctly in the NN.
 */
@Test public void testSuccessiveVolumeFailures() throws Exception {
  assumeTrue(!System.getProperty("os.name").startsWith("Windows"));
  cluster.startDataNodes(conf,2,true,null,null);
  cluster.waitActive();
  Thread.sleep(WAIT_FOR_HEARTBEATS);
  final DatanodeManager dm=cluster.getNamesystem().getBlockManager().getDatanodeManager();
  final long origCapacity=DFSTestUtil.getLiveDatanodeCapacity(dm);
  long dnCapacity=DFSTestUtil.getDatanodeCapacity(dm,0);
  File dn1Vol1=new File(dataDir,"data" + (2 * 0 + 1));
  File dn2Vol1=new File(dataDir,"data" + (2 * 1 + 1));
  File dn3Vol1=new File(dataDir,"data" + (2 * 2 + 1));
  File dn3Vol2=new File(dataDir,"data" + (2 * 2 + 2));
  assertTrue("Couldn't chmod local vol",FileUtil.setExecutable(dn1Vol1,false));
  assertTrue("Couldn't chmod local vol",FileUtil.setExecutable(dn2Vol1,false));
  Path file1=new Path("/test1");
  DFSTestUtil.createFile(fs,file1,1024,(short)3,1L);
  DFSTestUtil.waitReplication(fs,file1,(short)3);
  ArrayList<DataNode> dns=cluster.getDataNodes();
  assertTrue("DN1 should be up",dns.get(0).isDatanodeUp());
  assertTrue("DN2 should be up",dns.get(1).isDatanodeUp());
  assertTrue("DN3 should be up",dns.get(2).isDatanodeUp());
  assertCounter("VolumeFailures",1L,getMetrics(dns.get(0).getMetrics().name()));
  assertCounter("VolumeFailures",1L,getMetrics(dns.get(1).getMetrics().name()));
  assertCounter("VolumeFailures",0L,getMetrics(dns.get(2).getMetrics().name()));
  assert (WAIT_FOR_HEARTBEATS * 10) > WAIT_FOR_DEATH;
  DFSTestUtil.waitForDatanodeStatus(dm,3,0,2,origCapacity - (1 * dnCapacity),WAIT_FOR_HEARTBEATS);
  assertTrue("Couldn't chmod local vol",FileUtil.setExecutable(dn3Vol1,false));
  Path file2=new Path("/test2");
  DFSTestUtil.createFile(fs,file2,1024,(short)3,1L);
  DFSTestUtil.waitReplication(fs,file2,(short)3);
  assertTrue("DN3 should still be up",dns.get(2).isDatanodeUp());
  assertCounter("VolumeFailures",1L,getMetrics(dns.get(2).getMetrics().name()));
  ArrayList<DatanodeDescriptor> live=new ArrayList<DatanodeDescriptor>();
  ArrayList<DatanodeDescriptor> dead=new ArrayList<DatanodeDescriptor>();
  dm.fetchDatanodes(live,dead,false);
  live.clear();
  dead.clear();
  dm.fetchDatanodes(live,dead,false);
  assertEquals("DN3 should have 1 failed volume",1,live.get(2).getVolumeFailures());
  dnCapacity=DFSTestUtil.getDatanodeCapacity(dm,0);
  DFSTestUtil.waitForDatanodeStatus(dm,3,0,3,origCapacity - (3 * dnCapacity),WAIT_FOR_HEARTBEATS);
  assertTrue("Couldn't chmod local vol",FileUtil.setExecutable(dn3Vol2,false));
  Path file3=new Path("/test3");
  DFSTestUtil.createFile(fs,file3,1024,(short)3,1L);
  DFSTestUtil.waitReplication(fs,file3,(short)2);
  DFSTestUtil.waitForDatanodeDeath(dns.get(2));
  assertCounter("VolumeFailures",2L,getMetrics(dns.get(2).getMetrics().name()));
  DFSTestUtil.waitForDatanodeStatus(dm,2,1,2,origCapacity - (4 * dnCapacity),WAIT_FOR_HEARTBEATS);
  assertTrue("Couldn't chmod local vol",FileUtil.setExecutable(dn1Vol1,true));
  assertTrue("Couldn't chmod local vol",FileUtil.setExecutable(dn2Vol1,true));
  assertTrue("Couldn't chmod local vol",FileUtil.setExecutable(dn3Vol1,true));
  assertTrue("Couldn't chmod local vol",FileUtil.setExecutable(dn3Vol2,true));
  cluster.restartDataNodes();
  cluster.waitActive();
  Path file4=new Path("/test4");
  DFSTestUtil.createFile(fs,file4,1024,(short)3,1L);
  DFSTestUtil.waitReplication(fs,file4,(short)3);
  DFSTestUtil.waitForDatanodeStatus(dm,3,0,0,origCapacity,WAIT_FOR_HEARTBEATS);
}

</code></pre>

<br>
<pre class="type-10 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that the NN re-learns of volume failures after restart.
 */
@Test public void testVolFailureStatsPreservedOnNNRestart() throws Exception {
  assumeTrue(!System.getProperty("os.name").startsWith("Windows"));
  cluster.startDataNodes(conf,2,true,null,null);
  cluster.waitActive();
  final DatanodeManager dm=cluster.getNamesystem().getBlockManager().getDatanodeManager();
  long origCapacity=DFSTestUtil.getLiveDatanodeCapacity(dm);
  long dnCapacity=DFSTestUtil.getDatanodeCapacity(dm,0);
  File dn1Vol1=new File(dataDir,"data" + (2 * 0 + 1));
  File dn2Vol1=new File(dataDir,"data" + (2 * 1 + 1));
  assertTrue("Couldn't chmod local vol",FileUtil.setExecutable(dn1Vol1,false));
  assertTrue("Couldn't chmod local vol",FileUtil.setExecutable(dn2Vol1,false));
  Path file1=new Path("/test1");
  DFSTestUtil.createFile(fs,file1,1024,(short)2,1L);
  DFSTestUtil.waitReplication(fs,file1,(short)2);
  DFSTestUtil.waitForDatanodeStatus(dm,3,0,2,origCapacity - (1 * dnCapacity),WAIT_FOR_HEARTBEATS);
  cluster.restartNameNode(0);
  cluster.waitActive();
  DFSTestUtil.waitForDatanodeStatus(dm,3,0,2,origCapacity - (1 * dnCapacity),WAIT_FOR_HEARTBEATS);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestDataNodeVolumeFailureToleration </h4><pre class="type-7 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that a volume that is considered failed on startup is seen as
 * a failed volume by the NN.
 */
@Test public void testFailedVolumeOnStartupIsCounted() throws Exception {
  assumeTrue(!System.getProperty("os.name").startsWith("Windows"));
  final DatanodeManager dm=cluster.getNamesystem().getBlockManager().getDatanodeManager();
  long origCapacity=DFSTestUtil.getLiveDatanodeCapacity(dm);
  File dir=new File(cluster.getInstanceStorageDir(0,0),"current");
  try {
    prepareDirToFail(dir);
    restartDatanodes(1,false);
    assertEquals(true,cluster.getDataNodes().get(0).isBPServiceAlive(cluster.getNamesystem().getBlockPoolId()));
    DFSTestUtil.waitForDatanodeStatus(dm,1,0,1,origCapacity / 2,WAIT_FOR_HEARTBEATS);
  }
  finally {
    FileUtil.chmod(dir.toString(),"755");
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-10 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test the DFS_DATANODE_FAILED_VOLUMES_TOLERATED_KEY configuration
 * option, ie the DN tolerates a failed-to-use scenario during
 * its start-up.
 */
@Test public void testValidVolumesAtStartup() throws Exception {
  assumeTrue(!System.getProperty("os.name").startsWith("Windows"));
  cluster.shutdownDataNodes();
  conf.setInt(DFSConfigKeys.DFS_DATANODE_FAILED_VOLUMES_TOLERATED_KEY,1);
  File tld=new File(MiniDFSCluster.getBaseDirectory(),"badData");
  File dataDir1=new File(tld,"data1");
  File dataDir1Actual=new File(dataDir1,"1");
  dataDir1Actual.mkdirs();
  File dataDir2=new File(tld,"data2");
  prepareDirToFail(dataDir2);
  File dataDir2Actual=new File(dataDir2,"2");
  conf.set(DFSConfigKeys.DFS_DATANODE_DATA_DIR_KEY,dataDir1Actual.getPath() + "," + dataDir2Actual.getPath());
  cluster.startDataNodes(conf,1,false,null,null);
  cluster.waitActive();
  try {
    assertTrue("The DN should have started up fine.",cluster.isDataNodeUp());
    DataNode dn=cluster.getDataNodes().get(0);
    String si=DataNodeTestUtils.getFSDataset(dn).getStorageInfo();
    assertTrue("The DN should have started with this directory",si.contains(dataDir1Actual.getPath()));
    assertFalse("The DN shouldn't have a bad directory.",si.contains(dataDir2Actual.getPath()));
  }
  finally {
    cluster.shutdownDataNodes();
    FileUtil.chmod(dataDir2.toString(),"755");
  }
}

</code></pre>

<br>
<pre class="type-10 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test the DFS_DATANODE_FAILED_VOLUMES_TOLERATED_KEY configuration
 * option, ie the DN shuts itself down when the number of failures
 * experienced drops below the tolerated amount.
 */
@Test public void testConfigureMinValidVolumes() throws Exception {
  assumeTrue(!System.getProperty("os.name").startsWith("Windows"));
  conf.setInt(DFSConfigKeys.DFS_DATANODE_FAILED_VOLUMES_TOLERATED_KEY,0);
  cluster.startDataNodes(conf,2,true,null,null);
  cluster.waitActive();
  final DatanodeManager dm=cluster.getNamesystem().getBlockManager().getDatanodeManager();
  long origCapacity=DFSTestUtil.getLiveDatanodeCapacity(dm);
  long dnCapacity=DFSTestUtil.getDatanodeCapacity(dm,0);
  File dn2Vol1=new File(dataDir,"data" + (2 * 1 + 1));
  assertTrue("Couldn't chmod local vol",FileUtil.setExecutable(dn2Vol1,false));
  Path file1=new Path("/test1");
  DFSTestUtil.createFile(fs,file1,1024,(short)3,1L);
  DFSTestUtil.waitReplication(fs,file1,(short)2);
  DFSTestUtil.waitForDatanodeStatus(dm,2,1,0,origCapacity - (1 * dnCapacity),WAIT_FOR_HEARTBEATS);
  assertTrue("Couldn't chmod local vol",FileUtil.setExecutable(dn2Vol1,true));
  Path file2=new Path("/test2");
  DFSTestUtil.createFile(fs,file2,1024,(short)3,1L);
  DFSTestUtil.waitReplication(fs,file2,(short)2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestStartSecureDataNode </h4><pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void testExternalKdcRunning(){
  Assume.assumeTrue(isExternalKdcRunning());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.TestInterDatanodeProtocol </h4><pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * The same as above, but use hostnames for DN<->DN communication 
 */
@Test public void testBlockMetaDataInfoWithHostname() throws Exception {
  assumeTrue(System.getProperty("os.name").startsWith("Linux"));
  checkBlockMetaDataInfo(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestSecureNameNode </h4><pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void testKdcRunning(){
  Assume.assumeTrue(TestUGIWithSecurityOn.isKdcRunning());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestSecureNameNodeWithExternalKdc </h4><pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void testExternalKdcRunning(){
  Assume.assumeTrue(isExternalKdcRunning());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.shortcircuit.TestShortCircuitLocalRead </h4><pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void before(){
  Assume.assumeThat(DomainSocket.getLoadingFailureReason(),equalTo(null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.shortcircuit.TestShortCircuitShm </h4><pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void before(){
  Assume.assumeTrue(null == SharedFileDescriptorFactory.getLoadingFailureReason());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.io.TestSecureIOUtils </h4><pre class="type-2 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testReadIncorrectlyRestrictedWithSecurity() throws IOException {
  assumeTrue(NativeIO.isAvailable());
  System.out.println("Running test with native libs...");
  String invalidUser="InvalidUser";
  try {
    SecureIOUtils.forceSecureOpenForRead(testFilePathIs,invalidUser,realGroup).close();
    fail("Didn't throw expection for wrong user ownership!");
  }
 catch (  IOException ioe) {
  }
  try {
    SecureIOUtils.forceSecureOpenFSDataInputStream(testFilePathFadis,invalidUser,realGroup).close();
    fail("Didn't throw expection for wrong user ownership!");
  }
 catch (  IOException ioe) {
  }
  try {
    SecureIOUtils.forceSecureOpenForRandomRead(testFilePathRaf,"r",invalidUser,realGroup).close();
    fail("Didn't throw expection for wrong user ownership!");
  }
 catch (  IOException ioe) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.io.compress.TestCodec </h4><pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Regression test for HADOOP-8423: seeking in a block-compressed
 * stream would not properly reset the block decompressor state.
 */
@Test public void testSnappyMapFile() throws Exception {
  Assume.assumeTrue(SnappyCodec.isNativeCodeLoaded());
  codecTestMapFile(SnappyCodec.class,CompressionType.BLOCK,100);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.io.compress.lz4.TestLz4CompressorDecompressor </h4><pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void before(){
  assumeTrue(Lz4Codec.isNativeCodeLoaded());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.io.compress.snappy.TestSnappyCompressorDecompressor </h4><pre class="type-2 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSnappyDirectBlockCompression(){
  int[] size={4 * 1024,64 * 1024,128 * 1024,1024 * 1024};
  assumeTrue(SnappyCodec.isNativeCodeLoaded());
  try {
    for (int i=0; i < size.length; i++) {
      compressDecompressLoop(size[i]);
    }
  }
 catch (  IOException ex) {
    fail("testSnappyDirectBlockCompression ex !!!" + ex);
  }
}

</code></pre>

<br>
<pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void before(){
  assumeTrue(SnappyCodec.isNativeCodeLoaded());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.io.compress.zlib.TestZlibCompressorDecompressor </h4><pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void before(){
  assumeTrue(ZlibFactory.isNativeZlibLoaded(new Configuration()));
}

</code></pre>

<br>
<pre class="type-2 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testZlibDirectCompressDecompress(){
  int[] size={1,4,16,4 * 1024,64 * 1024,128 * 1024,1024 * 1024};
  assumeTrue(NativeCodeLoader.isNativeCodeLoaded());
  try {
    for (int i=0; i < size.length; i++) {
      compressDecompressLoop(size[i]);
    }
  }
 catch (  IOException ex) {
    fail("testZlibDirectCompressDecompress ex !!!" + ex);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.io.nativeio.TestNativeIO </h4><pre class="type-9 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testMlock() throws Exception {
  assumeTrue(NativeIO.isAvailable());
  final File TEST_FILE=new File(new File(System.getProperty("test.build.data","build/test/data")),"testMlockFile");
  final int BUF_LEN=12289;
  byte buf[]=new byte[BUF_LEN];
  int bufSum=0;
  for (int i=0; i < buf.length; i++) {
    buf[i]=(byte)(i % 60);
    bufSum+=buf[i];
  }
  FileOutputStream fos=new FileOutputStream(TEST_FILE);
  try {
    fos.write(buf);
    fos.getChannel().force(true);
  }
  finally {
    fos.close();
  }
  FileInputStream fis=null;
  FileChannel channel=null;
  try {
    fis=new FileInputStream(TEST_FILE);
    channel=fis.getChannel();
    long fileSize=channel.size();
    MappedByteBuffer mapbuf=channel.map(MapMode.READ_ONLY,0,fileSize);
    NativeIO.POSIX.mlock(mapbuf,fileSize);
    int sum=0;
    for (int i=0; i < fileSize; i++) {
      sum+=mapbuf.get(i);
    }
    assertEquals("Expected sums to be equal",bufSum,sum);
    NativeIO.POSIX.munmap(mapbuf);
  }
  finally {
    if (channel != null) {
      channel.close();
    }
    if (fis != null) {
      fis.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-11 type-2 type-7 type-10 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000) public void testRenameTo() throws Exception {
  final File TEST_DIR=new File(new File(System.getProperty("test.build.data","build/test/data")),"renameTest");
  assumeTrue(TEST_DIR.mkdirs());
  File nonExistentFile=new File(TEST_DIR,"nonexistent");
  File targetFile=new File(TEST_DIR,"target");
  try {
    NativeIO.renameTo(nonExistentFile,targetFile);
    Assert.fail();
  }
 catch (  NativeIOException e) {
    if (Path.WINDOWS) {
      Assert.assertEquals(String.format("The system cannot find the file specified.%n"),e.getMessage());
    }
 else {
      Assert.assertEquals(Errno.ENOENT,e.getErrno());
    }
  }
  File sourceFile=new File(TEST_DIR,"source");
  Assert.assertTrue(sourceFile.createNewFile());
  NativeIO.renameTo(sourceFile,sourceFile);
  NativeIO.renameTo(sourceFile,targetFile);
  sourceFile=new File(TEST_DIR,"source");
  Assert.assertTrue(sourceFile.createNewFile());
  File badTarget=new File(targetFile,"subdir");
  try {
    NativeIO.renameTo(sourceFile,badTarget);
    Assert.fail();
  }
 catch (  NativeIOException e) {
    if (Path.WINDOWS) {
      Assert.assertEquals(String.format("The parameter is incorrect.%n"),e.getMessage());
    }
 else {
      Assert.assertEquals(Errno.ENOTDIR,e.getErrno());
    }
  }
  FileUtils.deleteQuietly(TEST_DIR);
}

</code></pre>

<br>
<pre class="type-2 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000) public void testSyncFileRange() throws Exception {
  FileOutputStream fos=new FileOutputStream(new File(TEST_DIR,"testSyncFileRange"));
  try {
    fos.write("foo".getBytes());
    NativeIO.POSIX.sync_file_range(fos.getFD(),0,1024,NativeIO.POSIX.SYNC_FILE_RANGE_WRITE);
  }
 catch (  UnsupportedOperationException uoe) {
    assumeTrue(false);
  }
 finally {
    fos.close();
  }
  try {
    NativeIO.POSIX.sync_file_range(fos.getFD(),0,1024,NativeIO.POSIX.SYNC_FILE_RANGE_WRITE);
    fail("Did not throw on bad file");
  }
 catch (  NativeIOException nioe) {
    assertEquals(Errno.EBADF,nioe.getErrno());
  }
}

</code></pre>

<br>
<pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void checkLoaded(){
  assumeTrue(NativeCodeLoader.isNativeCodeLoaded());
}

</code></pre>

<br>
<pre class="type-2 type-15 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000) public void testPosixFadvise() throws Exception {
  if (Path.WINDOWS) {
    return;
  }
  FileInputStream fis=new FileInputStream("/dev/zero");
  try {
    NativeIO.POSIX.posix_fadvise(fis.getFD(),0,0,NativeIO.POSIX.POSIX_FADV_SEQUENTIAL);
  }
 catch (  UnsupportedOperationException uoe) {
    assumeTrue(false);
  }
catch (  NativeIOException nioe) {
  }
 finally {
    fis.close();
  }
  try {
    NativeIO.POSIX.posix_fadvise(fis.getFD(),0,1024,NativeIO.POSIX.POSIX_FADV_SEQUENTIAL);
    fail("Did not throw on bad file");
  }
 catch (  NativeIOException nioe) {
    assertEquals(Errno.EBADF,nioe.getErrno());
  }
  try {
    NativeIO.POSIX.posix_fadvise(null,0,1024,NativeIO.POSIX.POSIX_FADV_SEQUENTIAL);
    fail("Did not throw on null file");
  }
 catch (  NullPointerException npe) {
  }
}

</code></pre>

<br>
<pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testGetMemlockLimit() throws Exception {
  assumeTrue(NativeIO.isAvailable());
  NativeIO.getMemlockLimit();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.io.nativeio.TestSharedFileDescriptorFactory </h4><pre class="type-9 type-10 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testCleanupRemainders() throws Exception {
  Assume.assumeTrue(NativeIO.isAvailable());
  Assume.assumeTrue(SystemUtils.IS_OS_UNIX);
  File path=new File(TEST_BASE,"testCleanupRemainders");
  path.mkdirs();
  String remainder1=path.getAbsolutePath() + Path.SEPARATOR + "woot2_remainder1";
  String remainder2=path.getAbsolutePath() + Path.SEPARATOR + "woot2_remainder2";
  createTempFile(remainder1);
  createTempFile(remainder2);
  SharedFileDescriptorFactory.create("woot2_",new String[]{path.getAbsolutePath()});
  Assert.assertFalse(new File(remainder1).exists());
  Assert.assertFalse(new File(remainder2).exists());
  FileUtil.fullyDelete(path);
}

</code></pre>

<br>
<pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws Exception {
  Assume.assumeTrue(null == SharedFileDescriptorFactory.getLoadingFailureReason());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ipc.TestIPC </h4><pre class="type-10 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check that file descriptors aren't leaked by starting
 * and stopping IPC servers.
 */
@Test(timeout=60000) public void testSocketLeak() throws IOException {
  Assume.assumeTrue(FD_DIR.exists());
  long startFds=countOpenFileDescriptors();
  for (int i=0; i < 50; i++) {
    Server server=new TestServer(1,true);
    server.start();
    server.stop();
  }
  long endFds=countOpenFileDescriptors();
  assertTrue("Leaked " + (endFds - startFds) + " file descriptors",endFds - startFds < 20);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.TestShuffleHandler </h4><pre class="type-9 type-10 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Validate the ownership of the map-output files being pulled in. The
 * local-file-system owner of the file should match the user component in the
 * @throws Exception exception
 */
@Test(timeout=100000) public void testMapFileAccess() throws IOException {
  assumeTrue(NativeIO.isAvailable());
  Configuration conf=new Configuration();
  conf.setInt(ShuffleHandler.SHUFFLE_PORT_CONFIG_KEY,0);
  conf.setInt(ShuffleHandler.MAX_SHUFFLE_CONNECTIONS,3);
  conf.set(CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHENTICATION,"kerberos");
  UserGroupInformation.setConfiguration(conf);
  File absLogDir=new File("target",TestShuffleHandler.class.getSimpleName() + "LocDir").getAbsoluteFile();
  conf.set(YarnConfiguration.NM_LOCAL_DIRS,absLogDir.getAbsolutePath());
  ApplicationId appId=ApplicationId.newInstance(12345,1);
  LOG.info(appId.toString());
  String appAttemptId="attempt_12345_1_m_1_0";
  String user="randomUser";
  String reducerId="0";
  List<File> fileMap=new ArrayList<File>();
  createShuffleHandlerFiles(absLogDir,user,appId.toString(),appAttemptId,conf,fileMap);
  ShuffleHandler shuffleHandler=new ShuffleHandler(){
    @Override protected Shuffle getShuffle(    Configuration conf){
      return new Shuffle(conf){
        @Override protected void verifyRequest(        String appid,        ChannelHandlerContext ctx,        HttpRequest request,        HttpResponse response,        URL requestUri) throws IOException {
        }
      }
;
    }
  }
;
  shuffleHandler.init(conf);
  try {
    shuffleHandler.start();
    DataOutputBuffer outputBuffer=new DataOutputBuffer();
    outputBuffer.reset();
    Token<JobTokenIdentifier> jt=new Token<JobTokenIdentifier>("identifier".getBytes(),"password".getBytes(),new Text(user),new Text("shuffleService"));
    jt.write(outputBuffer);
    shuffleHandler.initializeApplication(new ApplicationInitializationContext(user,appId,ByteBuffer.wrap(outputBuffer.getData(),0,outputBuffer.getLength())));
    URL url=new URL("http://127.0.0.1:" + shuffleHandler.getConfig().get(ShuffleHandler.SHUFFLE_PORT_CONFIG_KEY) + "/mapOutput?job=job_12345_0001&reduce="+ reducerId+ "&map=attempt_12345_1_m_1_0");
    HttpURLConnection conn=(HttpURLConnection)url.openConnection();
    conn.setRequestProperty(ShuffleHeader.HTTP_HEADER_NAME,ShuffleHeader.DEFAULT_HTTP_HEADER_NAME);
    conn.setRequestProperty(ShuffleHeader.HTTP_HEADER_VERSION,ShuffleHeader.DEFAULT_HTTP_HEADER_VERSION);
    conn.connect();
    byte[] byteArr=new byte[10000];
    try {
      DataInputStream is=new DataInputStream(conn.getInputStream());
      is.readFully(byteArr);
    }
 catch (    EOFException e) {
    }
    FileInputStream is=new FileInputStream(fileMap.get(0));
    String owner=NativeIO.POSIX.getFstat(is.getFD()).getOwner();
    is.close();
    String message="Owner '" + owner + "' for path "+ fileMap.get(0).getAbsolutePath()+ " did not match expected owner '"+ user+ "'";
    Assert.assertTrue((new String(byteArr)).contains(message));
  }
  finally {
    shuffleHandler.stop();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.net.unix.TestDomainSocket </h4><pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void before(){
  Assume.assumeTrue(DomainSocket.getLoadingFailureReason() == null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.net.unix.TestDomainSocketWatcher </h4><pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void before(){
  Assume.assumeTrue(DomainSocket.getLoadingFailureReason() == null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.TestJNIGroupsMapping </h4><pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void isNativeCodeLoaded(){
  assumeTrue(NativeCodeLoader.isNativeCodeLoaded());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.TestUGIWithExternalKdc </h4><pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void testExternalKdcRunning(){
  Assume.assumeTrue(isExternalKdcRunning());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.TestUGIWithSecurityOn </h4><pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void testKdcRunning(){
  Assume.assumeTrue(isKdcRunning());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.util.TestSignalLogger </h4><pre class="type-2 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testInstall() throws Exception {
  Assume.assumeTrue(SystemUtils.IS_OS_UNIX);
  SignalLogger.INSTANCE.register(LOG);
  try {
    SignalLogger.INSTANCE.register(LOG);
    Assert.fail("expected IllegalStateException from double registration");
  }
 catch (  IllegalStateException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.util.TestWinUtils </h4><pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setUp(){
  assumeTrue(Shell.WINDOWS);
  TEST_DIR.mkdirs();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.logaggregation.TestAggregatedLogFormat </h4><pre class="type-9 type-7 type-10 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testContainerLogsFileAccess() throws IOException {
  Assume.assumeTrue(NativeIO.isAvailable());
  Configuration conf=new Configuration();
  conf.set(CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHENTICATION,"kerberos");
  UserGroupInformation.setConfiguration(conf);
  File workDir=new File(testWorkDir,"testContainerLogsFileAccess1");
  Path remoteAppLogFile=new Path(workDir.getAbsolutePath(),"aggregatedLogFile");
  Path srcFileRoot=new Path(workDir.getAbsolutePath(),"srcFiles");
  String data="Log File content for container : ";
  ApplicationId applicationId=ApplicationId.newInstance(1,1);
  ApplicationAttemptId applicationAttemptId=ApplicationAttemptId.newInstance(applicationId,1);
  ContainerId testContainerId1=ContainerId.newInstance(applicationAttemptId,1);
  Path appDir=new Path(srcFileRoot,testContainerId1.getApplicationAttemptId().getApplicationId().toString());
  Path srcFilePath1=new Path(appDir,testContainerId1.toString());
  String stdout="stdout";
  String stderr="stderr";
  writeSrcFile(srcFilePath1,stdout,data + testContainerId1.toString() + stdout);
  writeSrcFile(srcFilePath1,stderr,data + testContainerId1.toString() + stderr);
  UserGroupInformation ugi=UserGroupInformation.getCurrentUser();
  LogWriter logWriter=new LogWriter(conf,remoteAppLogFile,ugi);
  LogKey logKey=new LogKey(testContainerId1);
  String randomUser="randomUser";
  LogValue logValue=spy(new LogValue(Collections.singletonList(srcFileRoot.toString()),testContainerId1,randomUser));
  when(logValue.getUser()).thenReturn(randomUser).thenReturn(ugi.getShortUserName());
  logWriter.append(logKey,logValue);
  logWriter.close();
  BufferedReader in=new BufferedReader(new FileReader(new File(remoteAppLogFile.toUri().getRawPath())));
  String line;
  StringBuffer sb=new StringBuffer("");
  while ((line=in.readLine()) != null) {
    LOG.info(line);
    sb.append(line);
  }
  line=sb.toString();
  String expectedOwner=ugi.getShortUserName();
  if (Path.WINDOWS) {
    final String adminsGroupString="Administrators";
    if (Arrays.asList(ugi.getGroupNames()).contains(adminsGroupString)) {
      expectedOwner=adminsGroupString;
    }
  }
  String stdoutFile1=StringUtils.join(File.separator,Arrays.asList(new String[]{workDir.getAbsolutePath(),"srcFiles",testContainerId1.getApplicationAttemptId().getApplicationId().toString(),testContainerId1.toString(),stderr}));
  String message1="Owner '" + expectedOwner + "' for path "+ stdoutFile1+ " did not match expected owner '"+ randomUser+ "'";
  String stdoutFile2=StringUtils.join(File.separator,Arrays.asList(new String[]{workDir.getAbsolutePath(),"srcFiles",testContainerId1.getApplicationAttemptId().getApplicationId().toString(),testContainerId1.toString(),stdout}));
  String message2="Owner '" + expectedOwner + "' for path "+ stdoutFile2+ " did not match expected owner '"+ ugi.getShortUserName()+ "'";
  Assert.assertTrue(line.contains(message1));
  Assert.assertFalse(line.contains(message2));
  Assert.assertFalse(line.contains(data + testContainerId1.toString() + stderr));
  Assert.assertTrue(line.contains(data + testContainerId1.toString() + stdout));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.TestLinuxContainerExecutorWithMocks </h4><pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup(){
  assumeTrue(!Path.WINDOWS);
  File f=new File("./src/test/resources/mock-container-executor");
  if (!FileUtil.canExecute(f)) {
    FileUtil.setExecutable(f,true);
  }
  String executorPath=f.getAbsolutePath();
  Configuration conf=new Configuration();
  conf.set(YarnConfiguration.NM_LINUX_CONTAINER_EXECUTOR_PATH,executorPath);
  mockExec=new LinuxContainerExecutor();
  dirsHandler=new LocalDirsHandlerService();
  dirsHandler.init(conf);
  mockExec.setConf(conf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.TestContainerLaunch </h4><pre class="type-2 type-15 type-6 type-21 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testWindowsShellScriptBuilderMkdir() throws IOException {
  String mkDirCmd="@if not exist \"\" mkdir \"\"";
  Assume.assumeTrue(Shell.WINDOWS);
  assertEquals(8191,Shell.WINDOWS_MAX_SHELL_LENGHT);
  ShellScriptBuilder builder=ShellScriptBuilder.create();
  builder.mkdir(new Path(org.apache.commons.lang.StringUtils.repeat("A",1024)));
  builder.mkdir(new Path(org.apache.commons.lang.StringUtils.repeat("E",(Shell.WINDOWS_MAX_SHELL_LENGHT - mkDirCmd.length()) / 2)));
  try {
    builder.mkdir(new Path(org.apache.commons.lang.StringUtils.repeat("X",(Shell.WINDOWS_MAX_SHELL_LENGHT - mkDirCmd.length()) / 2 + 1)));
    fail("long mkdir was expected to throw");
  }
 catch (  IOException e) {
    assertThat(e.getMessage(),containsString(expectedMessage));
  }
}

</code></pre>

<br>
<pre class="type-2 type-15 type-6 type-21 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testWindowsShellScriptBuilderLink() throws IOException {
  Assume.assumeTrue(Shell.WINDOWS);
  String linkCmd="@" + Shell.WINUTILS + " symlink \"\" \"\"";
  assertEquals(8191,Shell.WINDOWS_MAX_SHELL_LENGHT);
  ShellScriptBuilder builder=ShellScriptBuilder.create();
  builder.link(new Path(org.apache.commons.lang.StringUtils.repeat("A",1024)),new Path(org.apache.commons.lang.StringUtils.repeat("B",1024)));
  builder.link(new Path(org.apache.commons.lang.StringUtils.repeat("E",(Shell.WINDOWS_MAX_SHELL_LENGHT - linkCmd.length()) / 2)),new Path(org.apache.commons.lang.StringUtils.repeat("F",(Shell.WINDOWS_MAX_SHELL_LENGHT - linkCmd.length()) / 2)));
  try {
    builder.link(new Path(org.apache.commons.lang.StringUtils.repeat("X",(Shell.WINDOWS_MAX_SHELL_LENGHT - linkCmd.length()) / 2 + 1)),new Path(org.apache.commons.lang.StringUtils.repeat("Y",(Shell.WINDOWS_MAX_SHELL_LENGHT - linkCmd.length()) / 2) + 1));
    fail("long link was expected to throw");
  }
 catch (  IOException e) {
    assertThat(e.getMessage(),containsString(expectedMessage));
  }
}

</code></pre>

<br>
<pre class="type-2 type-15 type-6 type-21 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testWindowsShellScriptBuilderCommand() throws IOException {
  String callCmd="@call ";
  Assume.assumeTrue(Shell.WINDOWS);
  assertEquals(8191,Shell.WINDOWS_MAX_SHELL_LENGHT);
  ShellScriptBuilder builder=ShellScriptBuilder.create();
  builder.command(Arrays.asList(org.apache.commons.lang.StringUtils.repeat("A",1024)));
  builder.command(Arrays.asList(org.apache.commons.lang.StringUtils.repeat("E",Shell.WINDOWS_MAX_SHELL_LENGHT - callCmd.length())));
  try {
    builder.command(Arrays.asList(org.apache.commons.lang.StringUtils.repeat("X",Shell.WINDOWS_MAX_SHELL_LENGHT - callCmd.length() + 1)));
    fail("longCommand was expected to throw");
  }
 catch (  IOException e) {
    assertThat(e.getMessage(),containsString(expectedMessage));
  }
  builder.command(Arrays.asList(org.apache.commons.lang.StringUtils.repeat("A",1024),org.apache.commons.lang.StringUtils.repeat("A",1024),org.apache.commons.lang.StringUtils.repeat("A",1024)));
  builder.command(Arrays.asList(org.apache.commons.lang.StringUtils.repeat("E",4095),org.apache.commons.lang.StringUtils.repeat("E",2047),org.apache.commons.lang.StringUtils.repeat("E",2047 - callCmd.length())));
  try {
    builder.command(Arrays.asList(org.apache.commons.lang.StringUtils.repeat("X",4095),org.apache.commons.lang.StringUtils.repeat("X",2047),org.apache.commons.lang.StringUtils.repeat("X",2048 - callCmd.length())));
    fail("long commands was expected to throw");
  }
 catch (  IOException e) {
    assertThat(e.getMessage(),containsString(expectedMessage));
  }
}

</code></pre>

<br>
<pre class="type-2 type-15 type-6 type-21 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testWindowsShellScriptBuilderEnv() throws IOException {
  Assume.assumeTrue(Shell.WINDOWS);
  assertEquals(8191,Shell.WINDOWS_MAX_SHELL_LENGHT);
  ShellScriptBuilder builder=ShellScriptBuilder.create();
  builder.env("somekey",org.apache.commons.lang.StringUtils.repeat("A",1024));
  builder.env("somekey",org.apache.commons.lang.StringUtils.repeat("A",Shell.WINDOWS_MAX_SHELL_LENGHT - ("@set somekey=").length()));
  try {
    builder.env("somekey",org.apache.commons.lang.StringUtils.repeat("A",Shell.WINDOWS_MAX_SHELL_LENGHT - ("@set somekey=").length()) + 1);
    fail("long env was expected to throw");
  }
 catch (  IOException e) {
    assertThat(e.getMessage(),containsString(expectedMessage));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.webapp.TestContainerLogsPage </h4><pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testContainerLogPageAccess() throws IOException {
  assumeTrue(NativeIO.isAvailable());
  String user="randomUser" + System.currentTimeMillis();
  File absLogDir=null, appDir=null, containerDir=null, syslog=null;
  try {
    absLogDir=new File("target",TestContainerLogsPage.class.getSimpleName() + "LogDir").getAbsoluteFile();
    absLogDir.mkdir();
    Configuration conf=new Configuration();
    conf.set(YarnConfiguration.NM_LOG_DIRS,absLogDir.toURI().toString());
    conf.set(CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHENTICATION,"kerberos");
    UserGroupInformation.setConfiguration(conf);
    NodeHealthCheckerService healthChecker=new NodeHealthCheckerService();
    healthChecker.init(conf);
    LocalDirsHandlerService dirsHandler=healthChecker.getDiskHandler();
    RecordFactory recordFactory=RecordFactoryProvider.getRecordFactory(conf);
    long clusterTimeStamp=1234;
    ApplicationId appId=BuilderUtils.newApplicationId(recordFactory,clusterTimeStamp,1);
    Application app=mock(Application.class);
    when(app.getAppId()).thenReturn(appId);
    when(app.getUser()).thenReturn(user);
    ApplicationAttemptId appAttemptId=BuilderUtils.newApplicationAttemptId(appId,1);
    ContainerId container1=BuilderUtils.newContainerId(recordFactory,appId,appAttemptId,0);
    appDir=new File(absLogDir,appId.toString());
    appDir.mkdir();
    containerDir=new File(appDir,container1.toString());
    containerDir.mkdir();
    syslog=new File(containerDir,"syslog");
    syslog.createNewFile();
    BufferedOutputStream out=new BufferedOutputStream(new FileOutputStream(syslog));
    out.write("Log file Content".getBytes());
    out.close();
    Context context=mock(Context.class);
    ConcurrentMap<ApplicationId,Application> appMap=new ConcurrentHashMap<ApplicationId,Application>();
    appMap.put(appId,app);
    when(context.getApplications()).thenReturn(appMap);
    ConcurrentHashMap<ContainerId,Container> containers=new ConcurrentHashMap<ContainerId,Container>();
    when(context.getContainers()).thenReturn(containers);
    when(context.getLocalDirsHandler()).thenReturn(dirsHandler);
    MockContainer container=new MockContainer(appAttemptId,new AsyncDispatcher(),conf,user,appId,1);
    container.setState(ContainerState.RUNNING);
    context.getContainers().put(container1,container);
    ContainersLogsBlock cLogsBlock=new ContainersLogsBlock(context);
    Map<String,String> params=new HashMap<String,String>();
    params.put(YarnWebParams.CONTAINER_ID,container1.toString());
    params.put(YarnWebParams.CONTAINER_LOG_TYPE,"syslog");
    Injector injector=WebAppTests.testPage(ContainerLogsPage.class,ContainersLogsBlock.class,cLogsBlock,params,(Module[])null);
    PrintWriter spyPw=WebAppTests.getPrintWriter(injector);
    verify(spyPw).write("Exception reading log file. Application submitted by '" + user + "' doesn't own requested log file : syslog");
  }
  finally {
    if (syslog != null) {
      syslog.delete();
    }
    if (containerDir != null) {
      containerDir.delete();
    }
    if (appDir != null) {
      appDir.delete();
    }
    if (absLogDir != null) {
      absLogDir.delete();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.rmapp.attempt.TestRMAppAttemptTransitions </h4><pre class="type-7 type-15 type-1 type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetClientToken() throws Exception {
  assumeTrue(isSecurityEnabled);
  Container amContainer=allocateApplicationAttempt();
  Token<ClientToAMTokenIdentifier> token=applicationAttempt.createClientToken(null);
  Assert.assertNull(token);
  token=applicationAttempt.createClientToken("clientuser");
  Assert.assertNull(token);
  launchApplicationAttempt(amContainer);
  token=applicationAttempt.createClientToken(null);
  Assert.assertNull(token);
  token=applicationAttempt.createClientToken("clientuser");
  Assert.assertNotNull(token);
  applicationAttempt.handle(new RMAppAttemptEvent(applicationAttempt.getAppAttemptId(),RMAppAttemptEventType.KILL));
  assertEquals(YarnApplicationAttemptState.LAUNCHED,applicationAttempt.createApplicationAttemptState());
  sendAttemptUpdateSavedEvent(applicationAttempt);
  token=applicationAttempt.createClientToken(null);
  Assert.assertNull(token);
  token=applicationAttempt.createClientToken("clientuser");
  Assert.assertNull(token);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesAppsModification </h4><pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testSingleAppKillUnauthorized() throws Exception {
  boolean isCapacityScheduler=rm.getResourceScheduler() instanceof CapacityScheduler;
  assumeTrue("Currently this test is only supported on CapacityScheduler",isCapacityScheduler);
  CapacitySchedulerConfiguration csconf=new CapacitySchedulerConfiguration();
  csconf.setAcl("root",QueueACL.ADMINISTER_QUEUE,"someuser");
  csconf.setAcl("root.default",QueueACL.ADMINISTER_QUEUE,"someuser");
  rm.getResourceScheduler().reinitialize(csconf,rm.getRMContext());
  rm.start();
  MockNM amNodeManager=rm.registerNode("127.0.0.1:1234",2048);
  String[] mediaTypes={MediaType.APPLICATION_JSON,MediaType.APPLICATION_XML};
  for (  String mediaType : mediaTypes) {
    RMApp app=rm.submitApp(CONTAINER_MB,"test","someuser");
    amNodeManager.nodeHeartbeat(true);
    ClientResponse response=this.constructWebResource("apps",app.getApplicationId().toString(),"state").accept(mediaType).get(ClientResponse.class);
    AppState info=response.getEntity(AppState.class);
    info.setState(YarnApplicationState.KILLED.toString());
    response=this.constructWebResource("apps",app.getApplicationId().toString(),"state").accept(mediaType).entity(info,MediaType.APPLICATION_XML).put(ClientResponse.class);
    validateResponseStatus(response,Status.FORBIDDEN);
  }
  rm.stop();
  return;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.util.TestFSDownload </h4><pre class="type-10 type-15 type-19 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testDownloadPublicWithStatCache() throws IOException, URISyntaxException, InterruptedException, ExecutionException {
  final Configuration conf=new Configuration();
  FileContext files=FileContext.getLocalFSFileContext(conf);
  Path basedir=files.makeQualified(new Path("target",TestFSDownload.class.getSimpleName()));
  FileSystem f=basedir.getFileSystem(conf);
  assumeTrue(FSDownload.ancestorsHaveExecutePermissions(f,basedir,null));
  files.mkdir(basedir,null,true);
  conf.setStrings(TestFSDownload.class.getName(),basedir.toString());
  int size=512;
  final ConcurrentMap<Path,AtomicInteger> counts=new ConcurrentHashMap<Path,AtomicInteger>();
  final CacheLoader<Path,Future<FileStatus>> loader=FSDownload.createStatusCacheLoader(conf);
  final LoadingCache<Path,Future<FileStatus>> statCache=CacheBuilder.newBuilder().build(new CacheLoader<Path,Future<FileStatus>>(){
    public Future<FileStatus> load(    Path path) throws Exception {
      AtomicInteger count=counts.get(path);
      if (count == null) {
        count=new AtomicInteger(0);
        AtomicInteger existing=counts.putIfAbsent(path,count);
        if (existing != null) {
          count=existing;
        }
      }
      count.incrementAndGet();
      return loader.load(path);
    }
  }
);
  final int fileCount=3;
  List<Callable<Boolean>> tasks=new ArrayList<Callable<Boolean>>();
  for (int i=0; i < fileCount; i++) {
    Random rand=new Random();
    long sharedSeed=rand.nextLong();
    rand.setSeed(sharedSeed);
    System.out.println("SEED: " + sharedSeed);
    final Path path=new Path(basedir,"test-file-" + i);
    createFile(files,path,size,rand);
    final FileSystem fs=path.getFileSystem(conf);
    final FileStatus sStat=fs.getFileStatus(path);
    tasks.add(new Callable<Boolean>(){
      public Boolean call() throws IOException {
        return FSDownload.isPublic(fs,path,sStat,statCache);
      }
    }
);
  }
  ExecutorService exec=Executors.newFixedThreadPool(fileCount);
  try {
    List<Future<Boolean>> futures=exec.invokeAll(tasks);
    for (    Future<Boolean> future : futures) {
      assertTrue(future.get());
    }
    for (    AtomicInteger count : counts.values()) {
      assertSame(count.get(),1);
    }
  }
  finally {
    exec.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.util.TestProcfsBasedProcessTree </h4><pre class="type-8 type-15 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws IOException {
  assumeTrue(Shell.LINUX);
  FileContext.getLocalFSFileContext().delete(new Path(TEST_ROOT_DIR.getAbsolutePath()),true);
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
