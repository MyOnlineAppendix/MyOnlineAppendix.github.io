<h3><span class=" glyphicon glyphicon-tag"/>&nbspExecutionTester</h3><kbd>Executes methods or other tests from the same test unit</kbd><br><br><br><h4 style="margin:0px">Class: TestFuseDFS </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test creating a file via touch 
 */
@Test public void testTouch() throws IOException {
  File f=new File(mountPoint,"file1");
  execAssertSucceeds("touch " + f.getAbsolutePath());
  execAssertSucceeds("rm " + f.getAbsolutePath());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test basic file creation and writing 
 */
@Test public void testCreate() throws IOException {
  final String contents="hello world";
  File f=new File(mountPoint,"file1");
  createFile(f,contents);
  try {
    Thread.sleep(1000);
  }
 catch (  InterruptedException ie) {
  }
  checkFile(f,contents);
  execAssertSucceeds("cat " + f.getAbsolutePath());
  execAssertSucceeds("stat " + f.getAbsolutePath());
  execAssertSucceeds("rm " + f.getAbsolutePath());
  execAssertFails("ls " + f.getAbsolutePath());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test basic directory creation, access, removal 
 */
@Test public void testBasicDir() throws IOException {
  File d=new File(mountPoint,"dir1");
  execAssertSucceeds("mkdir " + d.getAbsolutePath());
  execAssertSucceeds("ls " + d.getAbsolutePath());
  execAssertSucceeds("rmdir " + d.getAbsolutePath());
  execAssertFails("ls " + d.getAbsolutePath());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.contrib.bkjournal.TestBookKeeperAsHASharedDir </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * NameNode should load the edits correctly if the applicable edits are
 * present in the BKJM.
 */
@Test public void testNameNodeMultipleSwitchesUsingBKJM() throws Exception {
  MiniDFSCluster cluster=null;
  try {
    Configuration conf=new Configuration();
    conf.setInt(DFSConfigKeys.DFS_HA_TAILEDITS_PERIOD_KEY,1);
    conf.set(DFSConfigKeys.DFS_NAMENODE_SHARED_EDITS_DIR_KEY,BKJMUtil.createJournalURI("/correctEditLogSelection").toString());
    BKJMUtil.addJournalManagerDefinition(conf);
    cluster=new MiniDFSCluster.Builder(conf).nnTopology(MiniDFSNNTopology.simpleHATopology()).numDataNodes(0).manageNameDfsSharedDirs(false).build();
    NameNode nn1=cluster.getNameNode(0);
    NameNode nn2=cluster.getNameNode(1);
    cluster.waitActive();
    cluster.transitionToActive(0);
    nn1.getRpcServer().rollEditLog();
    cluster.transitionToStandby(0);
    cluster.transitionToActive(1);
    nn2.getRpcServer().rollEditLog();
    nn2.getRpcServer().rollEditLog();
    cluster.transitionToStandby(1);
    cluster.transitionToActive(0);
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.contrib.bkjournal.TestBookKeeperJournalManager </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Cases can occur where we create a segment but crash before we even have the
 * chance to write the START_SEGMENT op. If this occurs we should warn, but
 * load as normal
 */
@Test public void testEmptyInprogressLedger() throws Exception {
  URI uri=BKJMUtil.createJournalURI("/hdfsjournal-emptyInprogressLedger");
  NamespaceInfo nsi=newNSInfo();
  BookKeeperJournalManager bkjm=new BookKeeperJournalManager(conf,uri,nsi);
  bkjm.format(nsi);
  EditLogOutputStream out=bkjm.startLogSegment(1,NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION);
  ;
  for (long i=1; i <= 100; i++) {
    FSEditLogOp op=FSEditLogTestUtil.getNoOpInstance();
    op.setTransactionId(i);
    out.write(op);
  }
  out.close();
  bkjm.finalizeLogSegment(1,100);
  out=bkjm.startLogSegment(101,NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION);
  out.close();
  bkjm.close();
  bkjm=new BookKeeperJournalManager(conf,uri,nsi);
  bkjm.recoverUnfinalizedSegments();
  out=bkjm.startLogSegment(101,NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION);
  for (long i=1; i <= 100; i++) {
    FSEditLogOp op=FSEditLogTestUtil.getNoOpInstance();
    op.setTransactionId(i);
    out.write(op);
  }
  out.close();
  bkjm.finalizeLogSegment(101,200);
  bkjm.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.crypto.CryptoStreamsTestBase </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test hflush/hsync of crypto output stream, and with different buffer size.
 */
@Test(timeout=120000) public void testSyncable() throws IOException {
  syncableCheck();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test crypto writing with different buffer size. 
 */
@Test(timeout=120000) public void testWrite() throws Exception {
  writeCheck(defaultBufferSize);
  writeCheck(smallBufferSize);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test positioned read. 
 */
@Test(timeout=120000) public void testPositionedRead() throws Exception {
  OutputStream out=getOutputStream(defaultBufferSize);
  writeData(out);
  InputStream in=getInputStream(defaultBufferSize);
  positionedReadCheck(in,dataLen / 3);
  positionedReadCheck(in,dataLen / 2);
  in.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test byte buffer read with different buffer size. 
 */
@Test(timeout=120000) public void testByteBufferRead() throws Exception {
  OutputStream out=getOutputStream(defaultBufferSize);
  writeData(out);
  InputStream in=getInputStream(defaultBufferSize);
  ByteBuffer buf=ByteBuffer.allocate(dataLen + 100);
  byteBufferReadCheck(in,buf,0);
  in.close();
  in=getInputStream(defaultBufferSize);
  buf.clear();
  byteBufferReadCheck(in,buf,11);
  in.close();
  in=getInputStream(smallBufferSize);
  buf.clear();
  byteBufferReadCheck(in,buf,0);
  in.close();
  in=getInputStream(smallBufferSize);
  buf.clear();
  byteBufferReadCheck(in,buf,11);
  in.close();
  in=getInputStream(defaultBufferSize);
  buf=ByteBuffer.allocateDirect(dataLen + 100);
  byteBufferReadCheck(in,buf,0);
  in.close();
  in=getInputStream(defaultBufferSize);
  buf.clear();
  byteBufferReadCheck(in,buf,11);
  in.close();
  in=getInputStream(smallBufferSize);
  buf.clear();
  byteBufferReadCheck(in,buf,0);
  in.close();
  in=getInputStream(smallBufferSize);
  buf.clear();
  byteBufferReadCheck(in,buf,11);
  in.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test crypto with different IV. 
 */
@Test(timeout=120000) public void testCryptoIV() throws Exception {
  byte[] iv1=iv.clone();
  setCounterBaseForIV(iv1,Long.MAX_VALUE);
  cryptoCheck(iv1);
  setCounterBaseForIV(iv1,Long.MAX_VALUE - 1);
  cryptoCheck(iv1);
  setCounterBaseForIV(iv1,Integer.MAX_VALUE);
  cryptoCheck(iv1);
  setCounterBaseForIV(iv1,0);
  cryptoCheck(iv1);
  setCounterBaseForIV(iv1,-1);
  cryptoCheck(iv1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test crypto reading with different buffer size. 
 */
@Test(timeout=120000) public void testRead() throws Exception {
  OutputStream out=getOutputStream(defaultBufferSize);
  writeData(out);
  InputStream in=getInputStream(defaultBufferSize);
  readCheck(in);
  in.close();
  in=getInputStream(smallBufferSize);
  readCheck(in);
  in.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.crypto.TestCryptoCodec </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000) public void testJceAesCtrCryptoCodec() throws Exception {
  cryptoCodecTest(conf,seed,0,"org.apache.hadoop.crypto.JceAesCtrCryptoCodec");
  cryptoCodecTest(conf,seed,count,"org.apache.hadoop.crypto.JceAesCtrCryptoCodec");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.crypto.key.kms.server.TestKMS </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStartStopHttpKerberos() throws Exception {
  testStartStop(false,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStartStopHttpPseudo() throws Exception {
  testStartStop(false,false);
}

</code></pre>

<br>
<pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDelegationTokenAccess() throws Exception {
  Configuration conf=new Configuration();
  conf.set("hadoop.security.authentication","kerberos");
  UserGroupInformation.setConfiguration(conf);
  final File testDir=getTestDir();
  conf=createBaseKMSConf(testDir);
  conf.set("hadoop.kms.authentication.type","kerberos");
  conf.set("hadoop.kms.authentication.kerberos.keytab",keytab.getAbsolutePath());
  conf.set("hadoop.kms.authentication.kerberos.principal","HTTP/localhost");
  conf.set("hadoop.kms.authentication.kerberos.name.rules","DEFAULT");
  writeConf(testDir,conf);
  runServer(null,null,testDir,new KMSCallable(){
    @Override public Void call() throws Exception {
      final Configuration conf=new Configuration();
      conf.setInt(KeyProvider.DEFAULT_BITLENGTH_NAME,64);
      final URI uri=createKMSUri(getKMSUrl());
      final Credentials credentials=new Credentials();
      final UserGroupInformation nonKerberosUgi=UserGroupInformation.getCurrentUser();
      try {
        KeyProvider kp=new KMSClientProvider(uri,conf);
        kp.createKey("kA",new KeyProvider.Options(conf));
      }
 catch (      IOException ex) {
        System.out.println(ex.getMessage());
      }
      doAs("client",new PrivilegedExceptionAction<Void>(){
        @Override public Void run() throws Exception {
          KeyProvider kp=new KMSClientProvider(uri,conf);
          KeyProviderDelegationTokenExtension kpdte=KeyProviderDelegationTokenExtension.createKeyProviderDelegationTokenExtension(kp);
          kpdte.addDelegationTokens("foo",credentials);
          return null;
        }
      }
);
      nonKerberosUgi.addCredentials(credentials);
      try {
        KeyProvider kp=new KMSClientProvider(uri,conf);
        kp.createKey("kA",new KeyProvider.Options(conf));
      }
 catch (      IOException ex) {
        System.out.println(ex.getMessage());
      }
      nonKerberosUgi.doAs(new PrivilegedExceptionAction<Void>(){
        @Override public Void run() throws Exception {
          KeyProvider kp=new KMSClientProvider(uri,conf);
          kp.createKey("kD",new KeyProvider.Options(conf));
          return null;
        }
      }
);
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStartStopHttpsKerberos() throws Exception {
  testStartStop(true,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStartStopHttpsPseudo() throws Exception {
  testStartStop(true,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.crypto.random.TestOpensslSecureRandom </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test will timeout if secure random implementation always returns a 
 * constant value.
 */
@Test(timeout=120000) public void testRandomLong() throws Exception {
  OpensslSecureRandom random=new OpensslSecureRandom();
  long rand1=random.nextLong();
  long rand2=random.nextLong();
  while (rand1 == rand2) {
    rand2=random.nextLong();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test will timeout if secure random implementation always returns a 
 * constant value.
 */
@Test(timeout=120000) public void testRandomDouble() throws Exception {
  OpensslSecureRandom random=new OpensslSecureRandom();
  double rand1=random.nextDouble();
  double rand2=random.nextDouble();
  while (rand1 == rand2) {
    rand2=random.nextDouble();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000) public void testRandomBytes() throws Exception {
  OpensslSecureRandom random=new OpensslSecureRandom();
  checkRandomBytes(random,16);
  checkRandomBytes(random,32);
  checkRandomBytes(random,128);
  checkRandomBytes(random,256);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test will timeout if secure random implementation always returns a 
 * constant value.
 */
@Test(timeout=120000) public void testRandomInt() throws Exception {
  OpensslSecureRandom random=new OpensslSecureRandom();
  int rand1=random.nextInt();
  int rand2=random.nextInt();
  while (rand1 == rand2) {
    rand2=random.nextInt();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test will timeout if secure random implementation always returns a 
 * constant value.
 */
@Test(timeout=120000) public void testRandomFloat() throws Exception {
  OpensslSecureRandom random=new OpensslSecureRandom();
  float rand1=random.nextFloat();
  float rand2=random.nextFloat();
  while (rand1 == rand2) {
    rand2=random.nextFloat();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.crypto.random.TestOsSecureRandom </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000) public void testRandomBytes() throws Exception {
  OsSecureRandom random=getOsSecureRandom();
  checkRandomBytes(random,16);
  checkRandomBytes(random,32);
  checkRandomBytes(random,128);
  checkRandomBytes(random,256);
  random.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000) public void testRefillReservoir() throws Exception {
  OsSecureRandom random=getOsSecureRandom();
  for (int i=0; i < 8196; i++) {
    random.nextLong();
  }
  random.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test will timeout if secure random implementation always returns a 
 * constant value.
 */
@Test(timeout=120000) public void testRandomLong() throws Exception {
  OsSecureRandom random=getOsSecureRandom();
  long rand1=random.nextLong();
  long rand2=random.nextLong();
  while (rand1 == rand2) {
    rand2=random.nextLong();
  }
  random.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test will timeout if secure random implementation always returns a 
 * constant value.
 */
@Test(timeout=120000) public void testRandomFloat() throws Exception {
  OsSecureRandom random=getOsSecureRandom();
  float rand1=random.nextFloat();
  float rand2=random.nextFloat();
  while (rand1 == rand2) {
    rand2=random.nextFloat();
  }
  random.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test will timeout if secure random implementation always returns a 
 * constant value.
 */
@Test(timeout=120000) public void testRandomInt() throws Exception {
  OsSecureRandom random=getOsSecureRandom();
  int rand1=random.nextInt();
  int rand2=random.nextInt();
  while (rand1 == rand2) {
    rand2=random.nextInt();
  }
  random.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test will timeout if secure random implementation always returns a 
 * constant value.
 */
@Test(timeout=120000) public void testRandomDouble() throws Exception {
  OsSecureRandom random=getOsSecureRandom();
  double rand1=random.nextDouble();
  double rand2=random.nextDouble();
  while (rand1 == rand2) {
    rand2=random.nextDouble();
  }
  random.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.FSMainOperationsBaseTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRenameFileToExistingParent() throws Exception {
  if (!renameSupported())   return;
  Path src=getTestRootPath(fSys,"test/hadoop/file");
  createFile(src);
  Path dst=getTestRootPath(fSys,"test/new/newfile");
  fSys.mkdirs(dst.getParent());
  rename(src,dst,true,false,true,Rename.OVERWRITE);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInputStreamClosedTwice() throws IOException {
  Path src=getTestRootPath(fSys,"test/hadoop/file");
  createFile(src);
  FSDataInputStream in=fSys.open(src);
  in.close();
  in.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOutputStreamClosedTwice() throws IOException {
  Path src=getTestRootPath(fSys,"test/hadoop/file");
  FSDataOutputStream out=fSys.create(src);
  out.writeChar('H');
  out.close();
  out.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWriteReadAndDeleteOneBlock() throws Exception {
  writeReadAndDelete(getDefaultBlockSize());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWriteReadAndDeleteHalfABlock() throws Exception {
  writeReadAndDelete(getDefaultBlockSize() / 2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWriteReadAndDeleteEmptyFile() throws Exception {
  writeReadAndDelete(0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRenameDirectoryAsNonExistentDirectory() throws Exception {
  doTestRenameDirectoryAsNonExistentDirectory(Rename.NONE);
  tearDown();
  doTestRenameDirectoryAsNonExistentDirectory(Rename.OVERWRITE);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWriteReadAndDeleteOneAndAHalfBlocks() throws Exception {
  int blockSize=getDefaultBlockSize();
  writeReadAndDelete(blockSize + (blockSize / 2));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWriteReadAndDeleteTwoBlocks() throws Exception {
  writeReadAndDelete(getDefaultBlockSize() * 2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.FileContextMainOperationsBaseTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWriteReadAndDeleteTwoBlocks() throws Exception {
  writeReadAndDelete(getDefaultBlockSize() * 2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWriteReadAndDeleteOneBlock() throws Exception {
  writeReadAndDelete(getDefaultBlockSize());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWriteReadAndDeleteHalfABlock() throws Exception {
  writeReadAndDelete(getDefaultBlockSize() / 2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOutputStreamClosedTwice() throws IOException {
  Path src=getTestRootPath(fc,"test/hadoop/file");
  FSDataOutputStream out=fc.create(src,EnumSet.of(CREATE),Options.CreateOpts.createParent());
  out.writeChar('H');
  out.close();
  out.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWriteReadAndDeleteOneAndAHalfBlocks() throws Exception {
  int blockSize=getDefaultBlockSize();
  writeReadAndDelete(blockSize + (blockSize / 2));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRenameDirectoryAsNonExistentDirectory() throws Exception {
  testRenameDirectoryAsNonExistentDirectory(Rename.NONE);
  tearDown();
  testRenameDirectoryAsNonExistentDirectory(Rename.OVERWRITE);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWriteReadAndDeleteEmptyFile() throws Exception {
  writeReadAndDelete(0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRenameFileToExistingParent() throws Exception {
  if (!renameSupported())   return;
  Path src=getTestRootPath(fc,"test/hadoop/file");
  createFile(src);
  Path dst=getTestRootPath(fc,"test/new/newfile");
  fc.mkdir(dst.getParent(),FileContext.DEFAULT_PERM,true);
  rename(src,dst,true,false,true,Rename.OVERWRITE);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateFlagOverwriteExistingFile() throws IOException {
  Path p=getTestRootPath(fc,"test/testCreateFlagOverwriteExistingFile");
  createFile(p);
  FSDataOutputStream out=fc.create(p,EnumSet.of(OVERWRITE));
  writeData(fc,p,out,data,data.length);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateFlagCreateAppendExistingFile() throws IOException {
  Path p=getTestRootPath(fc,"test/testCreateFlagCreateAppendExistingFile");
  createFile(p);
  FSDataOutputStream out=fc.create(p,EnumSet.of(CREATE,APPEND));
  writeData(fc,p,out,data,2 * data.length);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateFlagCreateAppendNonExistingFile() throws IOException {
  Path p=getTestRootPath(fc,"test/testCreateFlagCreateAppendNonExistingFile");
  FSDataOutputStream out=fc.create(p,EnumSet.of(CREATE,APPEND));
  writeData(fc,p,out,data,data.length);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInputStreamClosedTwice() throws IOException {
  Path src=getTestRootPath(fc,"test/hadoop/file");
  createFile(src);
  FSDataInputStream in=fc.open(src);
  in.close();
  in.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateFlagAppendExistingFile() throws IOException {
  Path p=getTestRootPath(fc,"test/testCreateFlagAppendExistingFile");
  createFile(p);
  FSDataOutputStream out=fc.create(p,EnumSet.of(APPEND));
  writeData(fc,p,out,data,2 * data.length);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.FileContextPermissionBase </h4><pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreatePermission() throws IOException {
  if (Path.WINDOWS) {
    System.out.println("Cannot run test for Windows");
    return;
  }
  String filename="foo";
  Path f=fileContextTestHelper.getTestRootPath(fc,filename);
  fileContextTestHelper.createFile(fc,filename);
  doFilePermissionCheck(FileContext.FILE_DEFAULT_PERM.applyUMask(fc.getUMask()),fc.getFileStatus(f).getPermission());
}

</code></pre>

<br>
<pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetPermission() throws IOException {
  if (Path.WINDOWS) {
    System.out.println("Cannot run test for Windows");
    return;
  }
  String filename="foo";
  Path f=fileContextTestHelper.getTestRootPath(fc,filename);
  createFile(fc,f);
  try {
    FsPermission all=new FsPermission((short)0777);
    FsPermission none=new FsPermission((short)0);
    fc.setPermission(f,none);
    doFilePermissionCheck(none,fc.getFileStatus(f).getPermission());
    fc.setPermission(f,all);
    doFilePermissionCheck(all,fc.getFileStatus(f).getPermission());
  }
  finally {
    cleanupFile(fc,f);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestAfsCheckPath </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCheckPathWithDefaultPort() throws URISyntaxException {
  URI uri=new URI("dummy://dummy-host:" + DEFAULT_PORT);
  AbstractFileSystem afs=new DummyFileSystem(uri);
  afs.checkPath(new Path("dummy://dummy-host:" + DEFAULT_PORT));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=InvalidPathException.class) public void testCheckPathWithDifferentPorts() throws URISyntaxException {
  URI uri=new URI("dummy://dummy-host:" + DEFAULT_PORT);
  AbstractFileSystem afs=new DummyFileSystem(uri);
  afs.checkPath(new Path("dummy://dummy-host:" + OTHER_PORT));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCheckPathWithTheSameNonDefaultPort() throws URISyntaxException {
  URI uri=new URI("dummy://dummy-host:" + OTHER_PORT);
  AbstractFileSystem afs=new DummyFileSystem(uri);
  afs.checkPath(new Path("dummy://dummy-host:" + OTHER_PORT));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCheckPathWithNoPorts() throws URISyntaxException {
  URI uri=new URI("dummy://dummy-host");
  AbstractFileSystem afs=new DummyFileSystem(uri);
  afs.checkPath(new Path("dummy://dummy-host"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestBlockLocation </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Call each of the setters and verify
 */
@Test(timeout=5000) public void testBlockLocationSetters() throws Exception {
  BlockLocation loc;
  loc=new BlockLocation();
  loc.setHosts(null);
  loc.setCachedHosts(null);
  loc.setNames(null);
  loc.setTopologyPaths(null);
  checkBlockLocation(loc);
  String[] names=new String[]{"name"};
  String[] hosts=new String[]{"host"};
  String[] cachedHosts=new String[]{"cachedHost"};
  String[] topologyPaths=new String[]{"path"};
  loc.setNames(names);
  loc.setHosts(hosts);
  loc.setCachedHosts(cachedHosts);
  loc.setTopologyPaths(topologyPaths);
  loc.setOffset(1);
  loc.setLength(2);
  loc.setCorrupt(true);
  checkBlockLocation(loc,names,hosts,cachedHosts,topologyPaths,1,2,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Call all the constructors and verify the delegation is working properly
 */
@Test(timeout=5000) public void testBlockLocationConstructors() throws Exception {
  BlockLocation loc;
  loc=new BlockLocation();
  checkBlockLocation(loc);
  loc=new BlockLocation(null,null,1,2);
  checkBlockLocation(loc,1,2,false);
  loc=new BlockLocation(null,null,null,1,2);
  checkBlockLocation(loc,1,2,false);
  loc=new BlockLocation(null,null,null,1,2,true);
  checkBlockLocation(loc,1,2,true);
  loc=new BlockLocation(null,null,null,null,1,2,true);
  checkBlockLocation(loc,1,2,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestChecksumFileSystem </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRenameFileIntoDir() throws Exception {
  Path srcPath=new Path(TEST_ROOT_DIR,"testRenameSrc");
  Path dstPath=new Path(TEST_ROOT_DIR,"testRenameDir");
  localFs.mkdirs(dstPath);
  verifyRename(srcPath,dstPath,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultiChunkFile() throws Exception {
  Path testPath=new Path(TEST_ROOT_DIR,"testMultiChunk");
  FSDataOutputStream fout=localFs.create(testPath);
  for (int i=0; i < 1000; i++) {
    fout.write(("testing" + i).getBytes());
  }
  fout.close();
  readFile(localFs,testPath,128);
  readFile(localFs,testPath,511);
  readFile(localFs,testPath,512);
  readFile(localFs,testPath,513);
  readFile(localFs,testPath,1023);
  readFile(localFs,testPath,1024);
  readFile(localFs,testPath,1025);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRenameFileToFile() throws Exception {
  Path srcPath=new Path(TEST_ROOT_DIR,"testRenameSrc");
  Path dstPath=new Path(TEST_ROOT_DIR,"testRenameDst");
  verifyRename(srcPath,dstPath,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestCommandFormat </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNoArgs(){
  checkArgLimits(null,0,0);
  checkArgLimits(null,0,1);
  checkArgLimits(NotEnoughArgumentsException.class,1,1);
  checkArgLimits(NotEnoughArgumentsException.class,1,2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOptStopOptArg(){
  args=listOf("-a","--","-b","c");
  expectedOpts=setOf("a");
  expectedArgs=listOf("-b","c");
  checkArgLimits(UnknownOptionException.class,0,0);
  checkArgLimits(TooManyArgumentsException.class,0,1,"a","b");
  checkArgLimits(null,2,2,"a","b");
  checkArgLimits(NotEnoughArgumentsException.class,3,4,"a","b");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOneArg(){
  args=listOf("a");
  expectedArgs=listOf("a");
  checkArgLimits(TooManyArgumentsException.class,0,0);
  checkArgLimits(null,0,1);
  checkArgLimits(null,1,1);
  checkArgLimits(null,1,2);
  checkArgLimits(NotEnoughArgumentsException.class,2,3);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOneOpt(){
  args=listOf("-a");
  expectedOpts=setOf("a");
  checkArgLimits(UnknownOptionException.class,0,0);
  checkArgLimits(null,0,0,"a","b");
  checkArgLimits(NotEnoughArgumentsException.class,1,1,"a","b");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testArgOpt(){
  args=listOf("b","-a");
  expectedArgs=listOf("b","-a");
  checkArgLimits(TooManyArgumentsException.class,0,0,"a","b");
  checkArgLimits(null,1,2,"a","b");
  checkArgLimits(null,2,2,"a","b");
  checkArgLimits(NotEnoughArgumentsException.class,3,4,"a","b");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwoArgs(){
  args=listOf("a","b");
  expectedArgs=listOf("a","b");
  checkArgLimits(TooManyArgumentsException.class,0,0);
  checkArgLimits(TooManyArgumentsException.class,1,1);
  checkArgLimits(null,1,2);
  checkArgLimits(null,2,2);
  checkArgLimits(null,2,3);
  checkArgLimits(NotEnoughArgumentsException.class,3,3);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOptDashArg(){
  args=listOf("-b","-","-c");
  expectedOpts=setOf("b");
  expectedArgs=listOf("-","-c");
  checkArgLimits(UnknownOptionException.class,0,0);
  checkArgLimits(TooManyArgumentsException.class,0,0,"b","c");
  checkArgLimits(TooManyArgumentsException.class,1,1,"b","c");
  checkArgLimits(null,2,2,"b","c");
  checkArgLimits(NotEnoughArgumentsException.class,3,4,"b","c");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwoOpts(){
  args=listOf("-a","-b");
  expectedOpts=setOf("a","b");
  checkArgLimits(UnknownOptionException.class,0,0);
  checkArgLimits(null,0,0,"a","b");
  checkArgLimits(null,0,1,"a","b");
  checkArgLimits(NotEnoughArgumentsException.class,1,1,"a","b");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOptArg(){
  args=listOf("-a","b");
  expectedOpts=setOf("a");
  expectedArgs=listOf("b");
  checkArgLimits(UnknownOptionException.class,0,0);
  checkArgLimits(TooManyArgumentsException.class,0,0,"a","b");
  checkArgLimits(null,0,1,"a","b");
  checkArgLimits(null,1,1,"a","b");
  checkArgLimits(null,1,2,"a","b");
  checkArgLimits(NotEnoughArgumentsException.class,2,2,"a","b");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestContentSummary </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWrite() throws IOException {
  long length=11111;
  long fileCount=22222;
  long directoryCount=33333;
  long quota=44444;
  long spaceConsumed=55555;
  long spaceQuota=66666;
  ContentSummary contentSummary=new ContentSummary(length,fileCount,directoryCount,quota,spaceConsumed,spaceQuota);
  DataOutput out=mock(DataOutput.class);
  InOrder inOrder=inOrder(out);
  contentSummary.write(out);
  inOrder.verify(out).writeLong(length);
  inOrder.verify(out).writeLong(fileCount);
  inOrder.verify(out).writeLong(directoryCount);
  inOrder.verify(out).writeLong(quota);
  inOrder.verify(out).writeLong(spaceConsumed);
  inOrder.verify(out).writeLong(spaceQuota);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestDFSIO </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=3000) public void testRead() throws Exception {
  FileSystem fs=cluster.getFileSystem();
  long tStart=System.currentTimeMillis();
  bench.readTest(fs);
  long execTime=System.currentTimeMillis() - tStart;
  bench.analyzeResult(fs,TestType.TEST_TYPE_READ,execTime);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=3000) public void testReadSkip() throws Exception {
  FileSystem fs=cluster.getFileSystem();
  long tStart=System.currentTimeMillis();
  bench.getConf().setLong("test.io.skip.size",1);
  bench.randomReadTest(fs);
  long execTime=System.currentTimeMillis() - tStart;
  bench.analyzeResult(fs,TestType.TEST_TYPE_READ_SKIP,execTime);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=3000) public void testReadRandom() throws Exception {
  FileSystem fs=cluster.getFileSystem();
  long tStart=System.currentTimeMillis();
  bench.getConf().setLong("test.io.skip.size",0);
  bench.randomReadTest(fs);
  long execTime=System.currentTimeMillis() - tStart;
  bench.analyzeResult(fs,TestType.TEST_TYPE_READ_RANDOM,execTime);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=6000) public void testAppend() throws Exception {
  FileSystem fs=cluster.getFileSystem();
  long tStart=System.currentTimeMillis();
  bench.appendTest(fs);
  long execTime=System.currentTimeMillis() - tStart;
  bench.analyzeResult(fs,TestType.TEST_TYPE_APPEND,execTime);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=3000) public void testReadBackward() throws Exception {
  FileSystem fs=cluster.getFileSystem();
  long tStart=System.currentTimeMillis();
  bench.getConf().setLong("test.io.skip.size",-DEFAULT_BUFFER_SIZE);
  bench.randomReadTest(fs);
  long execTime=System.currentTimeMillis() - tStart;
  bench.analyzeResult(fs,TestType.TEST_TYPE_READ_BACKWARD,execTime);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestDFVariations </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=5000) public void testDFInvalidPath() throws Exception {
  Random random=new Random(0xDEADBEEFl);
  File file=null;
  byte[] bytes=new byte[64];
  while (file == null) {
    random.nextBytes(bytes);
    final String invalid=new String("/" + bytes);
    final File invalidFile=new File(invalid);
    if (!invalidFile.exists()) {
      file=invalidFile;
    }
  }
  DF df=new DF(file,0l);
  try {
    df.getMount();
  }
 catch (  FileNotFoundException e) {
    GenericTestUtils.assertExceptionContains(file.getName(),e);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestEnhancedByteBufferAccess </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test fallback reads on a stream which does not support the
 * ByteBufferReadable * interface.
 */
@Test public void testIndirectFallbackReads() throws Exception {
  final File TEST_DIR=new File(System.getProperty("test.build.data","build/test/data"));
  final String TEST_PATH=TEST_DIR + File.separator + "indirectFallbackTestFile";
  final int TEST_FILE_LENGTH=16385;
  final int RANDOM_SEED=23453;
  FileOutputStream fos=null;
  FileInputStream fis=null;
  try {
    fos=new FileOutputStream(TEST_PATH);
    Random random=new Random(RANDOM_SEED);
    byte original[]=new byte[TEST_FILE_LENGTH];
    random.nextBytes(original);
    fos.write(original);
    fos.close();
    fos=null;
    fis=new FileInputStream(TEST_PATH);
    testFallbackImpl(fis,original);
  }
  finally {
    IOUtils.cleanup(LOG,fos,fis);
    new File(TEST_PATH).delete();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestFcHdfsSetUMask </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMkdirWithExistingDirOpen() throws IOException {
  testMkdirWithExistingDir(WIDE_OPEN_TEST_UMASK,WIDE_OPEN_PERMISSIONS);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMkdirWithExistingDirClear() throws IOException {
  testMkdirWithExistingDir(BLANK_TEST_UMASK,BLANK_PERMISSIONS);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMkdirRecursiveWithNonExistingDirMiddle() throws IOException {
  testMkdirRecursiveWithNonExistingDir(USER_GROUP_OPEN_TEST_UMASK,USER_GROUP_OPEN_PERMISSIONS,USER_GROUP_OPEN_PERMISSIONS);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMkdirRecursiveWithNonExistingDirClear() throws IOException {
  testMkdirRecursiveWithNonExistingDir(BLANK_TEST_UMASK,BLANK_PERMISSIONS,PARENT_PERMS_FOR_BLANK_PERMISSIONS);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateRecursiveWithNonExistingDirMiddle() throws IOException {
  testCreateRecursiveWithNonExistingDir(USER_GROUP_OPEN_TEST_UMASK,WIDE_OPEN_PERMISSIONS,USER_GROUP_OPEN_FILE_PERMISSIONS);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateRecursiveWithExistingDirOpen() throws IOException {
  testCreateRecursiveWithExistingDir(WIDE_OPEN_TEST_UMASK,WIDE_OPEN_FILE_PERMISSIONS);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateRecursiveWithExistingDirClear() throws IOException {
  testCreateRecursiveWithExistingDir(BLANK_TEST_UMASK,BLANK_PERMISSIONS);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMkdirRecursiveWithNonExistingDirOpen() throws IOException {
  testMkdirRecursiveWithNonExistingDir(WIDE_OPEN_TEST_UMASK,WIDE_OPEN_PERMISSIONS,WIDE_OPEN_PERMISSIONS);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMkdirWithExistingDirMiddle() throws IOException {
  testMkdirWithExistingDir(USER_GROUP_OPEN_TEST_UMASK,USER_GROUP_OPEN_PERMISSIONS);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateRecursiveWithExistingDirMiddle() throws IOException {
  testCreateRecursiveWithExistingDir(USER_GROUP_OPEN_TEST_UMASK,USER_GROUP_OPEN_FILE_PERMISSIONS);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateRecursiveWithNonExistingDirClear() throws IOException {
  testCreateRecursiveWithNonExistingDir(BLANK_TEST_UMASK,WIDE_OPEN_PERMISSIONS,BLANK_PERMISSIONS);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateRecursiveWithNonExistingDirOpen() throws IOException {
  testCreateRecursiveWithNonExistingDir(WIDE_OPEN_TEST_UMASK,WIDE_OPEN_PERMISSIONS,WIDE_OPEN_FILE_PERMISSIONS);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestFiRename </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Rename test when src and dst exist 
 */
@Test public void testFailuresExistingDst() throws Exception {
  final Path src=getTestPath("testFailuresExistingDst/dir/src");
  final Path dst=getTestPath("testFailuresExistingDst/newdir/dst");
  createFile(src);
  createFile(dst);
  TestFiRename.exceptionOnRemove(src.toString());
  rename(src,dst,true,true,true,Rename.OVERWRITE);
  TestFiRename.exceptionOnRemove(dst.toString());
  rename(src,dst,true,true,true,Rename.OVERWRITE);
  TestFiRename.exceptionOnAdd(dst.toString());
  rename(src,dst,true,true,true,Rename.OVERWRITE);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Rename test when src exists and dst does not 
 */
@Test public void testFailureNonExistentDst() throws Exception {
  final Path src=getTestPath("testFailureNonExistenSrc/dir/src");
  final Path dst=getTestPath("testFailureNonExistenSrc/newdir/dst");
  createFile(src);
  TestFiRename.exceptionOnRemove(src.toString());
  rename(src,dst,true,true,false,Rename.NONE);
  TestFiRename.exceptionOnAdd(dst.toString());
  rename(src,dst,true,true,false,Rename.NONE);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestFileStatus </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Check that toString produces the expected output for a file.
 */
@Test public void toStringFile() throws IOException {
  boolean isdir=false;
  FileStatus fileStatus=new FileStatus(LENGTH,isdir,REPLICATION,BLKSIZE,MTIME,ATIME,PERMISSION,OWNER,GROUP,null,PATH);
  validateToString(fileStatus);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Check that the no parameter constructor works correctly.
 */
@Test public void constructorBlank() throws IOException {
  FileStatus fileStatus=new FileStatus();
  validateAccessors(fileStatus,0,false,0,0,0,0,FsPermission.getFileDefault(),"","",null,null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Check that the non-symlink constructor works correctly.
 */
@Test public void constructorNoSymlink() throws IOException {
  boolean isdir=true;
  FileStatus fileStatus=new FileStatus(LENGTH,isdir,REPLICATION,BLKSIZE,MTIME,ATIME,PERMISSION,OWNER,GROUP,PATH);
  validateAccessors(fileStatus,LENGTH,isdir,REPLICATION,BLKSIZE,MTIME,ATIME,PERMISSION,OWNER,GROUP,null,PATH);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Check that the full parameter constructor works correctly.
 */
@Test public void constructorFull() throws IOException {
  boolean isdir=false;
  Path symlink=new Path("symlink");
  FileStatus fileStatus=new FileStatus(LENGTH,isdir,REPLICATION,BLKSIZE,MTIME,ATIME,PERMISSION,OWNER,GROUP,symlink,PATH);
  validateAccessors(fileStatus,LENGTH,isdir,REPLICATION,BLKSIZE,MTIME,ATIME,PERMISSION,OWNER,GROUP,symlink,PATH);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Check that toString produces the expected output for a directory.
 */
@Test public void toStringDir() throws IOException {
  FileStatus fileStatus=new FileStatus(LENGTH,true,REPLICATION,BLKSIZE,MTIME,ATIME,PERMISSION,OWNER,GROUP,null,PATH);
  validateToString(fileStatus);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Check that toString produces the expected output for a symlink.
 */
@Test public void toStringSymlink() throws IOException {
  boolean isdir=false;
  Path symlink=new Path("symlink");
  FileStatus fileStatus=new FileStatus(LENGTH,isdir,REPLICATION,BLKSIZE,MTIME,ATIME,PERMISSION,OWNER,GROUP,symlink,PATH);
  validateToString(fileStatus);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Check that the constructor without owner, group and permissions works
 * correctly.
 */
@Test public void constructorNoOwner() throws IOException {
  boolean isdir=true;
  FileStatus fileStatus=new FileStatus(LENGTH,isdir,REPLICATION,BLKSIZE,MTIME,PATH);
  validateAccessors(fileStatus,LENGTH,isdir,REPLICATION,BLKSIZE,MTIME,0,FsPermission.getDirDefault(),"","",null,PATH);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestFileSystemCaching </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCacheEnabledWithInitializeForeverFS() throws Exception {
  final Configuration conf=new Configuration();
  Thread t=new Thread(){
    @Override public void run(){
      conf.set("fs.localfs1.impl","org.apache.hadoop.fs." + "TestFileSystemCaching$InitializeForeverFileSystem");
      try {
        FileSystem.get(new URI("localfs1://a"),conf);
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
catch (      URISyntaxException e) {
        e.printStackTrace();
      }
    }
  }
;
  t.start();
  InitializeForeverFileSystem.sem.acquire();
  conf.set("fs.cachedfile.impl",FileSystem.getFileSystemClass("file",null).getName());
  FileSystem.get(new URI("cachedfile://a"),conf);
  t.interrupt();
  t.join();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDelete() throws IOException {
  FileSystem mockFs=mock(FileSystem.class);
  FileSystem fs=new FilterFileSystem(mockFs);
  Path path=new Path("/a");
  fs.delete(path,false);
  verify(mockFs).delete(eq(path),eq(false));
  reset(mockFs);
  fs.delete(path,true);
  verify(mockFs).delete(eq(path),eq(true));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestFileSystemCanonicalization </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testIpAuthorityWithDefaultPort() throws Exception {
  FileSystem fs=getVerifiedFS("myfs://127.0.0.1:123","myfs://127.0.0.1:123");
  verifyPaths(fs,authorities,-1,false);
  verifyPaths(fs,authorities,123,false);
  verifyPaths(fs,authorities,456,false);
  verifyPaths(fs,ips,-1,true);
  verifyPaths(fs,ips,123,true);
  verifyPaths(fs,ips,456,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPartialAuthorityWithOtherPort() throws Exception {
  FileSystem fs=getVerifiedFS("myfs://host.a:456","myfs://host.a.b:456");
  verifyPaths(fs,authorities,-1,false);
  verifyPaths(fs,authorities,123,false);
  verifyPaths(fs,authorities,456,true);
  verifyPaths(fs,ips,-1,false);
  verifyPaths(fs,ips,123,false);
  verifyPaths(fs,ips,456,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFullAuthorityWithOtherPort() throws Exception {
  FileSystem fs=getVerifiedFS("myfs://host.a.b:456","myfs://host.a.b:456");
  verifyPaths(fs,authorities,-1,false);
  verifyPaths(fs,authorities,123,false);
  verifyPaths(fs,authorities,456,true);
  verifyPaths(fs,ips,-1,false);
  verifyPaths(fs,ips,123,false);
  verifyPaths(fs,ips,456,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testIpAuthority() throws Exception {
  FileSystem fs=getVerifiedFS("myfs://127.0.0.1","myfs://127.0.0.1:123");
  verifyPaths(fs,authorities,-1,false);
  verifyPaths(fs,authorities,123,false);
  verifyPaths(fs,authorities,456,false);
  verifyPaths(fs,ips,-1,true);
  verifyPaths(fs,ips,123,true);
  verifyPaths(fs,ips,456,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFullAuthorityWithDefaultPort() throws Exception {
  FileSystem fs=getVerifiedFS("myfs://host.a.b:123","myfs://host.a.b:123");
  verifyPaths(fs,authorities,-1,true);
  verifyPaths(fs,authorities,123,true);
  verifyPaths(fs,authorities,456,false);
  verifyPaths(fs,ips,-1,false);
  verifyPaths(fs,ips,123,false);
  verifyPaths(fs,ips,456,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPartialAuthorityWithDefaultPort() throws Exception {
  FileSystem fs=getVerifiedFS("myfs://host.a:123","myfs://host.a.b:123");
  verifyPaths(fs,authorities,-1,true);
  verifyPaths(fs,authorities,123,true);
  verifyPaths(fs,authorities,456,false);
  verifyPaths(fs,ips,-1,false);
  verifyPaths(fs,ips,123,false);
  verifyPaths(fs,ips,456,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShortAuthority() throws Exception {
  FileSystem fs=getVerifiedFS("myfs://host","myfs://host.a.b:123");
  verifyPaths(fs,authorities,-1,true);
  verifyPaths(fs,authorities,123,true);
  verifyPaths(fs,authorities,456,false);
  verifyPaths(fs,ips,-1,false);
  verifyPaths(fs,ips,123,false);
  verifyPaths(fs,ips,456,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMismatchedSchemes() throws Exception {
  FileSystem fs=getVerifiedFS("myfs2://simple","myfs2://simple:123");
  verifyPaths(fs,authorities,-1,false);
  verifyPaths(fs,authorities,123,false);
  verifyPaths(fs,authorities,456,false);
  verifyPaths(fs,ips,-1,false);
  verifyPaths(fs,ips,123,false);
  verifyPaths(fs,ips,456,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShortAuthorityWithOtherPort() throws Exception {
  FileSystem fs=getVerifiedFS("myfs://host:456","myfs://host.a.b:456");
  verifyPaths(fs,authorities,-1,false);
  verifyPaths(fs,authorities,123,false);
  verifyPaths(fs,authorities,456,true);
  verifyPaths(fs,ips,-1,false);
  verifyPaths(fs,ips,123,false);
  verifyPaths(fs,ips,456,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNullAuthority() throws Exception {
  FileSystem fs=getVerifiedFS("myfs:///","myfs:///");
  verifyPaths(fs,new String[]{"myfs://"},-1,true);
  verifyPaths(fs,authorities,-1,false);
  verifyPaths(fs,authorities,123,false);
  verifyPaths(fs,authorities,456,false);
  verifyPaths(fs,ips,-1,false);
  verifyPaths(fs,ips,123,false);
  verifyPaths(fs,ips,456,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testIpAuthorityWithOtherPort() throws Exception {
  FileSystem fs=getVerifiedFS("myfs://127.0.0.1:456","myfs://127.0.0.1:456");
  verifyPaths(fs,authorities,-1,false);
  verifyPaths(fs,authorities,123,false);
  verifyPaths(fs,authorities,456,false);
  verifyPaths(fs,ips,-1,false);
  verifyPaths(fs,ips,123,false);
  verifyPaths(fs,ips,456,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMismatchedHosts() throws Exception {
  FileSystem fs=getVerifiedFS("myfs://simple","myfs://simple:123");
  verifyPaths(fs,authorities,-1,false);
  verifyPaths(fs,authorities,123,false);
  verifyPaths(fs,authorities,456,false);
  verifyPaths(fs,ips,-1,false);
  verifyPaths(fs,ips,123,false);
  verifyPaths(fs,ips,456,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShortAuthorityWithDefaultPort() throws Exception {
  FileSystem fs=getVerifiedFS("myfs://host:123","myfs://host.a.b:123");
  verifyPaths(fs,authorities,-1,true);
  verifyPaths(fs,authorities,123,true);
  verifyPaths(fs,authorities,456,false);
  verifyPaths(fs,ips,-1,false);
  verifyPaths(fs,ips,123,false);
  verifyPaths(fs,ips,456,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAuthorityFromDefaultFS() throws Exception {
  Configuration config=new Configuration();
  String defaultFsKey=CommonConfigurationKeys.FS_DEFAULT_NAME_KEY;
  FileSystem fs=getVerifiedFS("myfs://host","myfs://host.a.b:123",config);
  verifyPaths(fs,new String[]{"myfs://"},-1,false);
  config.set(defaultFsKey,"myfs://host");
  verifyPaths(fs,new String[]{"myfs://"},-1,true);
  config.set(defaultFsKey,"myfs2://host");
  verifyPaths(fs,new String[]{"myfs://"},-1,false);
  config.set(defaultFsKey,"myfs://host:123");
  verifyPaths(fs,new String[]{"myfs://"},-1,true);
  config.set(defaultFsKey,"myfs://host:456");
  verifyPaths(fs,new String[]{"myfs://"},-1,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFullAuthority() throws Exception {
  FileSystem fs=getVerifiedFS("myfs://host.a.b","myfs://host.a.b:123");
  verifyPaths(fs,authorities,-1,true);
  verifyPaths(fs,authorities,123,true);
  verifyPaths(fs,authorities,456,false);
  verifyPaths(fs,ips,-1,false);
  verifyPaths(fs,ips,123,false);
  verifyPaths(fs,ips,456,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPartialAuthority() throws Exception {
  FileSystem fs=getVerifiedFS("myfs://host.a","myfs://host.a.b:123");
  verifyPaths(fs,authorities,-1,true);
  verifyPaths(fs,authorities,123,true);
  verifyPaths(fs,authorities,456,false);
  verifyPaths(fs,ips,-1,false);
  verifyPaths(fs,ips,123,false);
  verifyPaths(fs,ips,456,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestFileUtil </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testFailFullyDeleteContentsGrantPermissions() throws IOException {
  setupDirsAndNonWritablePermissions();
  boolean ret=FileUtil.fullyDeleteContents(new MyFile(del),true);
  validateAndSetWritablePermissions(false,ret);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testFailFullyDelete() throws IOException {
  if (Shell.WINDOWS) {
    return;
  }
  LOG.info("Running test to verify failure of fullyDelete()");
  setupDirsAndNonWritablePermissions();
  boolean ret=FileUtil.fullyDelete(new MyFile(del));
  validateAndSetWritablePermissions(true,ret);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testFailFullyDeleteContents() throws IOException {
  if (Shell.WINDOWS) {
    return;
  }
  LOG.info("Running test to verify failure of fullyDeleteContents()");
  setupDirsAndNonWritablePermissions();
  boolean ret=FileUtil.fullyDeleteContents(new MyFile(del));
  validateAndSetWritablePermissions(true,ret);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testFailFullyDeleteGrantPermissions() throws IOException {
  setupDirsAndNonWritablePermissions();
  boolean ret=FileUtil.fullyDelete(new MyFile(del),true);
  validateAndSetWritablePermissions(false,ret);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testUntar() throws IOException {
  String tarGzFileName=System.getProperty("test.cache.data","build/test/cache") + "/test-untar.tgz";
  String tarFileName=System.getProperty("test.cache.data","build/test/cache") + "/test-untar.tar";
  String dataDir=System.getProperty("test.build.data","build/test/data");
  File untarDir=new File(dataDir,"untarDir");
  doUntarAndVerify(new File(tarGzFileName),untarDir);
  doUntarAndVerify(new File(tarFileName),untarDir);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestFilterFileSystem </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetFilterLocalFsSetsConfs() throws Exception {
  FilterFileSystem flfs=(FilterFileSystem)FileSystem.get(URI.create("flfs:/"),conf);
  checkFsConf(flfs,conf,3);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFilterEmbedNoInit() throws Exception {
  FileSystem mockFs=createMockFs(true);
  checkInit(new FilterFileSystem(mockFs),false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFilterEmbedInit() throws Exception {
  FileSystem mockFs=createMockFs(false);
  checkInit(new FilterFileSystem(mockFs),true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLocalEmbedInit() throws Exception {
  FileSystem mockFs=createMockFs(false);
  checkInit(new LocalFileSystem(mockFs),true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLocalEmbedNoInit() throws Exception {
  FileSystem mockFs=createMockFs(true);
  checkInit(new LocalFileSystem(mockFs),false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFilterFileSystem() throws Exception {
  for (  Method m : FileSystem.class.getDeclaredMethods()) {
    if (Modifier.isStatic(m.getModifiers()))     continue;
    if (Modifier.isPrivate(m.getModifiers()))     continue;
    if (Modifier.isFinal(m.getModifiers()))     continue;
    try {
      DontCheck.class.getMethod(m.getName(),m.getParameterTypes());
      LOG.info("Skipping " + m);
    }
 catch (    NoSuchMethodException exc) {
      LOG.info("Testing " + m);
      try {
        FilterFileSystem.class.getDeclaredMethod(m.getName(),m.getParameterTypes());
      }
 catch (      NoSuchMethodException exc2) {
        LOG.error("FilterFileSystem doesn't implement " + m);
        throw exc2;
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testVerifyChecksumPassthru(){
  FileSystem mockFs=mock(FileSystem.class);
  FileSystem fs=new FilterFileSystem(mockFs);
  fs.setVerifyChecksum(false);
  verify(mockFs).setVerifyChecksum(eq(false));
  reset(mockFs);
  fs.setVerifyChecksum(true);
  verify(mockFs).setVerifyChecksum(eq(true));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWriteChecksumPassthru(){
  FileSystem mockFs=mock(FileSystem.class);
  FileSystem fs=new FilterFileSystem(mockFs);
  fs.setWriteChecksum(false);
  verify(mockFs).setWriteChecksum(eq(false));
  reset(mockFs);
  fs.setWriteChecksum(true);
  verify(mockFs).setWriteChecksum(eq(true));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInitLocalFsSetsConfs() throws Exception {
  LocalFileSystem lfs=new LocalFileSystem();
  checkFsConf(lfs,null,2);
  lfs.initialize(lfs.getUri(),conf);
  checkFsConf(lfs,conf,2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetLocalFsSetsConfs() throws Exception {
  LocalFileSystem lfs=FileSystem.getLocal(conf);
  checkFsConf(lfs,conf,2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestFsOptions </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProcessChecksumOpt(){
  ChecksumOpt defaultOpt=new ChecksumOpt(DataChecksum.Type.CRC32,512);
  ChecksumOpt finalOpt;
  finalOpt=ChecksumOpt.processChecksumOpt(defaultOpt,null);
  checkParams(defaultOpt,finalOpt);
  finalOpt=ChecksumOpt.processChecksumOpt(defaultOpt,null,1024);
  checkParams(DataChecksum.Type.CRC32,1024,finalOpt);
  ChecksumOpt myOpt=new ChecksumOpt();
  finalOpt=ChecksumOpt.processChecksumOpt(defaultOpt,myOpt);
  checkParams(defaultOpt,finalOpt);
  myOpt=new ChecksumOpt(DataChecksum.Type.CRC32C,2048);
  finalOpt=ChecksumOpt.processChecksumOpt(defaultOpt,myOpt);
  checkParams(DataChecksum.Type.CRC32C,2048,finalOpt);
  finalOpt=ChecksumOpt.processChecksumOpt(defaultOpt,myOpt,4096);
  checkParams(DataChecksum.Type.CRC32C,4096,finalOpt);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestFsShell </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConfWithInvalidFile() throws Throwable {
  String[] args=new String[1];
  args[0]="--conf=invalidFile";
  Throwable th=null;
  try {
    FsShell.main(args);
  }
 catch (  Exception e) {
    th=e;
  }
  if (!(th instanceof RuntimeException)) {
    throw new AssertionFailedError("Expected Runtime exception, got: " + th).initCause(th);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestFsShellCopy </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopyFileFromLocal() throws Exception {
  Path testRoot=new Path(testRootDir,"testPutFile");
  lfs.delete(testRoot,true);
  lfs.mkdirs(testRoot);
  Path targetDir=new Path(testRoot,"target");
  Path filePath=new Path(testRoot,new Path("srcFile"));
  lfs.create(filePath).close();
  checkPut(filePath,targetDir,false);
}

</code></pre>

<br>
<pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopyFileFromWindowsLocalPath() throws Exception {
  assumeTrue(Path.WINDOWS);
  String windowsTestRootPath=(new File(testRootDir.toUri().getPath().toString())).getAbsolutePath();
  Path testRoot=new Path(windowsTestRootPath,"testPutFile");
  lfs.delete(testRoot,true);
  lfs.mkdirs(testRoot);
  Path targetDir=new Path(testRoot,"target");
  Path filePath=new Path(testRoot,new Path("srcFile"));
  lfs.create(filePath).close();
  checkPut(filePath,targetDir,true);
}

</code></pre>

<br>
<pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetWindowsLocalPath() throws Exception {
  assumeTrue(Path.WINDOWS);
  String winDstFile=(new File(dstPath.toUri().getPath().toString())).getAbsolutePath();
  shellRun(0,"-get",srcPath.toString(),winDstFile);
  checkPath(dstPath,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCorruptedCopyCrc() throws Exception {
  FSDataOutputStream out=lfs.getRawFileSystem().create(srcPath);
  out.writeChars("bang");
  out.close();
  shellRun(1,"-get",srcPath.toString(),dstPath.toString());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopyDirFromLocal() throws Exception {
  Path testRoot=new Path(testRootDir,"testPutDir");
  lfs.delete(testRoot,true);
  lfs.mkdirs(testRoot);
  Path targetDir=new Path(testRoot,"target");
  Path dirPath=new Path(testRoot,new Path("srcDir"));
  lfs.mkdirs(dirPath);
  lfs.create(new Path(dirPath,"srcFile")).close();
  checkPut(dirPath,targetDir,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCorruptedCopyIgnoreCrc() throws Exception {
  shellRun(0,"-get","-ignoreCrc",srcPath.toString(),dstPath.toString());
  checkPath(dstPath,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopyNoCrc() throws Exception {
  shellRun(0,"-get",srcPath.toString(),dstPath.toString());
  checkPath(dstPath,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopyCrc() throws Exception {
  shellRun(0,"-get","-crc",srcPath.toString(),dstPath.toString());
  checkPath(dstPath,true);
}

</code></pre>

<br>
<pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopyDirFromWindowsLocalPath() throws Exception {
  assumeTrue(Path.WINDOWS);
  String windowsTestRootPath=(new File(testRootDir.toUri().getPath().toString())).getAbsolutePath();
  Path testRoot=new Path(windowsTestRootPath,"testPutDir");
  lfs.delete(testRoot,true);
  lfs.mkdirs(testRoot);
  Path targetDir=new Path(testRoot,"target");
  Path dirPath=new Path(testRoot,new Path("srcDir"));
  lfs.mkdirs(dirPath);
  lfs.create(new Path(dirPath,"srcFile")).close();
  checkPut(dirPath,targetDir,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestFsShellReturnCode </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests combinations of valid and invalid user and group arguments to chown.
 */
@Test public void testChownUserAndGroupValidity(){
  FsCommand chown=new FsShellPermissions.Chown(){
    @Override protected void processArgument(    PathData item){
    }
  }
;
  chown.setConf(new Configuration());
  chown.run("user","/path");
  chown.run("user:group","/path");
  chown.run(":group","/path");
  assertValidArgumentsOnWindows(chown,"User With Spaces","/path");
  assertValidArgumentsOnWindows(chown,"User With Spaces:group","/path");
  assertValidArgumentsOnWindows(chown,"User With Spaces:Group With Spaces","/path");
  assertValidArgumentsOnWindows(chown,"user:Group With Spaces","/path");
  assertValidArgumentsOnWindows(chown,":Group With Spaces","/path");
  assertIllegalArguments(chown,"us!er","/path");
  assertIllegalArguments(chown,"us^er","/path");
  assertIllegalArguments(chown,"user:gr#oup","/path");
  assertIllegalArguments(chown,"user:gr%oup","/path");
  assertIllegalArguments(chown,":gr#oup","/path");
  assertIllegalArguments(chown,":gr%oup","/path");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests valid and invalid group arguments to chgrp.
 */
@Test public void testChgrpGroupValidity(){
  FsCommand chgrp=new FsShellPermissions.Chgrp(){
    @Override protected void processArgument(    PathData item){
    }
  }
;
  chgrp.setConf(new Configuration());
  chgrp.run("group","/path");
  assertValidArgumentsOnWindows(chgrp,"Group With Spaces","/path");
  assertIllegalArguments(chgrp,":gr#oup","/path");
  assertIllegalArguments(chgrp,":gr%oup","/path");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestGlobPaths </h4><pre class="type-5 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore @Test public void testGlobSymlinksWithCustomPathFilterOnFS() throws Exception {
  testOnFileSystem(new TestGlobSymlinksWithCustomPathFilter());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGlobRootOnFS() throws Exception {
  testOnFileSystem(new TestGlobRoot());
}

</code></pre>

<br>
<pre class="type-5 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore @Test public void testGlobSymlinksWithCustomPathFilterOnFC() throws Exception {
  testOnFileContext(new TestGlobSymlinksWithCustomPathFilter());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRelativePathOnFS() throws Exception {
  testOnFileSystem(new TestRelativePath());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGlobRootOnFC() throws Exception {
  testOnFileContext(new TestGlobRoot());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRelativePathOnFC() throws Exception {
  testOnFileContext(new TestRelativePath());
}

</code></pre>

<br>
<pre class="type-5 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore @Test public void testGlobWithSymlinksOnFS() throws Exception {
  testOnFileSystem(new TestGlobWithSymlinks());
}

</code></pre>

<br>
<pre class="type-5 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore @Test public void testGlobWithSymlinksOnFC() throws Exception {
  testOnFileContext(new TestGlobWithSymlinks());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReservedHdfsPathsOnFC() throws Exception {
  testOnFileContext(new TestReservedHdfsPaths());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReservedHdfsPathsOnFS() throws Exception {
  testOnFileSystem(new TestReservedHdfsPaths());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGlobFillsInSchemeOnFC() throws Exception {
  testOnFileContext(new TestGlobFillsInScheme());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGlobFillsInSchemeOnFS() throws Exception {
  testOnFileSystem(new TestGlobFillsInScheme());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGlobAccessDeniedOnFC() throws Exception {
  testOnFileContext(new TestGlobAccessDenied());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGlobAccessDeniedOnFS() throws Exception {
  testOnFileSystem(new TestGlobAccessDenied());
}

</code></pre>

<br>
<pre class="type-5 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore @Test public void testGlobWithSymlinksToSymlinksOnFC() throws Exception {
  testOnFileContext(new TestGlobWithSymlinksToSymlinks());
}

</code></pre>

<br>
<pre class="type-5 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore @Test public void testGlobWithSymlinksToSymlinksOnFS() throws Exception {
  testOnFileSystem(new TestGlobWithSymlinksToSymlinks());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestGlobPattern </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInvalidPatterns(){
  shouldThrow("[","[[]]","[][]","{","\\");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testValidPatterns(){
  assertMatch(true,"*","^$","foo","bar");
  assertMatch(true,"?","?","^","[","]","$");
  assertMatch(true,"foo*","foo","food","fool");
  assertMatch(true,"f*d","fud","food");
  assertMatch(true,"*d","good","bad");
  assertMatch(true,"\\*\\?\\[\\{\\\\","*?[{\\");
  assertMatch(true,"[]^-]","]","-","^");
  assertMatch(true,"]","]");
  assertMatch(true,"^.$()|+","^.$()|+");
  assertMatch(true,"[^^]",".","$","[","]");
  assertMatch(false,"[^^]","^");
  assertMatch(true,"[!!-]","^","?");
  assertMatch(false,"[!!-]","!","-");
  assertMatch(true,"{[12]*,[45]*,[78]*}","1","2!","4","42","7","7$");
  assertMatch(false,"{[12]*,[45]*,[78]*}","3","6","9");
  assertMatch(true,"}","}");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestHDFSFileContextMainOperations </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOldRenameWithQuota() throws Exception {
  DistributedFileSystem fs=cluster.getFileSystem();
  Path src1=getTestRootPath(fc,"test/testOldRenameWithQuota/srcdir/src1");
  Path src2=getTestRootPath(fc,"test/testOldRenameWithQuota/srcdir/src2");
  Path dst1=getTestRootPath(fc,"test/testOldRenameWithQuota/dstdir/dst1");
  Path dst2=getTestRootPath(fc,"test/testOldRenameWithQuota/dstdir/dst2");
  createFile(src1);
  createFile(src2);
  fs.setQuota(src1.getParent(),HdfsConstants.QUOTA_DONT_SET,HdfsConstants.QUOTA_DONT_SET);
  fc.mkdir(dst1.getParent(),FileContext.DEFAULT_PERM,true);
  fs.setQuota(dst1.getParent(),2,HdfsConstants.QUOTA_DONT_SET);
  oldRename(src1,dst1,true,false);
  oldRename(src2,dst2,false,true);
  fs.setQuota(src1.getParent(),1,HdfsConstants.QUOTA_DONT_SET);
  oldRename(dst1,src1,false,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRenameWithQuota() throws Exception {
  DistributedFileSystem fs=cluster.getFileSystem();
  Path src1=getTestRootPath(fc,"test/testRenameWithQuota/srcdir/src1");
  Path src2=getTestRootPath(fc,"test/testRenameWithQuota/srcdir/src2");
  Path dst1=getTestRootPath(fc,"test/testRenameWithQuota/dstdir/dst1");
  Path dst2=getTestRootPath(fc,"test/testRenameWithQuota/dstdir/dst2");
  createFile(src1);
  createFile(src2);
  fs.setQuota(src1.getParent(),HdfsConstants.QUOTA_DONT_SET,HdfsConstants.QUOTA_DONT_SET);
  fc.mkdir(dst1.getParent(),FileContext.DEFAULT_PERM,true);
  fs.setQuota(dst1.getParent(),2,HdfsConstants.QUOTA_DONT_SET);
  rename(src1,dst1,false,true,false,Rename.NONE);
  rename(src2,dst1,true,true,false,Rename.OVERWRITE);
  createFile(src2);
  rename(src2,dst2,false,false,true,Rename.NONE);
  fs.setQuota(src1.getParent(),1,HdfsConstants.QUOTA_DONT_SET);
  rename(dst1,src1,false,false,true,Rename.NONE);
  fs.setQuota(src1.getParent(),100,HdfsConstants.QUOTA_DONT_SET);
  createFile(src1);
  fs.setQuota(src1.getParent(),1,HdfsConstants.QUOTA_DONT_SET);
  rename(dst1,src1,true,true,false,Rename.OVERWRITE);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRenameRoot() throws Exception {
  Path src=getTestRootPath(fc,"test/testRenameRoot/srcdir/src1");
  Path dst=new Path("/");
  createFile(src);
  rename(src,dst,true,false,true,Rename.OVERWRITE);
  rename(dst,src,true,false,true,Rename.OVERWRITE);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestHarFileSystem </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testHarUri(){
  final Configuration conf=new Configuration();
  checkInvalidPath("har://hdfs-/foo.har",conf);
  checkInvalidPath("har://hdfs/foo.har",conf);
  checkInvalidPath("har://-hdfs/foo.har",conf);
  checkInvalidPath("har://-/foo.har",conf);
  checkInvalidPath("har://127.0.0.1-/foo.har",conf);
  checkInvalidPath("har://127.0.0.1/foo.har",conf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestHarFileSystemBasics </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPositiveInitWithoutUnderlyingFS() throws Exception {
  final HarFileSystem hfs=new HarFileSystem();
  final URI uri=new URI("har://" + harPath.toString());
  hfs.initialize(uri,new Configuration());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestLocalDirAllocator </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Two buffer dirs. Both do not exist but on a RW disk.
 * Check if tmp dirs are allocated in a round-robin
 */
@Test(timeout=30000) public void testDirsNotExist() throws Exception {
  if (isWindows)   return;
  String dir2=buildBufferDir(ROOT,2);
  String dir3=buildBufferDir(ROOT,3);
  try {
    conf.set(CONTEXT,dir2 + "," + dir3);
    createTempFile(SMALL_FILE_SIZE);
    int firstDirIdx=(dirAllocator.getCurrentDirectoryIndex() == 0) ? 2 : 3;
    int secondDirIdx=(firstDirIdx == 2) ? 3 : 2;
    validateTempDirCreation(buildBufferDir(ROOT,firstDirIdx));
    validateTempDirCreation(buildBufferDir(ROOT,secondDirIdx));
    validateTempDirCreation(buildBufferDir(ROOT,firstDirIdx));
  }
  finally {
    rmBufferDirs();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestLocalFileSystem </h4><pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Regression test for HADOOP-9307: BufferedFSInputStream returning
 * wrong results after certain sequences of seeks and reads.
 */
@Test public void testBufferedFSInputStream() throws IOException {
  Configuration conf=new Configuration();
  conf.setClass("fs.file.impl",RawLocalFileSystem.class,FileSystem.class);
  conf.setInt(CommonConfigurationKeysPublic.IO_FILE_BUFFER_SIZE_KEY,4096);
  FileSystem fs=FileSystem.newInstance(conf);
  byte[] buf=new byte[10 * 1024];
  new Random().nextBytes(buf);
  FSDataOutputStream stream=fs.create(TEST_PATH);
  try {
    stream.write(buf);
  }
  finally {
    stream.close();
  }
  Random r=new Random();
  FSDataInputStream stm=fs.open(TEST_PATH);
  int seeks[]=new int[10];
  int reads[]=new int[10];
  try {
    for (int i=0; i < 1000; i++) {
      int seekOff=r.nextInt(buf.length);
      int toRead=r.nextInt(Math.min(buf.length - seekOff,32000));
      seeks[i % seeks.length]=seekOff;
      reads[i % reads.length]=toRead;
      verifyRead(stm,buf,seekOff,toRead);
    }
  }
 catch (  AssertionError afe) {
    StringBuilder sb=new StringBuilder();
    sb.append("Sequence of actions:\n");
    for (int j=0; j < seeks.length; j++) {
      sb.append("seek @ ").append(seeks[j]).append("  ").append("read ").append(reads[j]).append("\n");
    }
    System.err.println(sb.toString());
    throw afe;
  }
 finally {
    stm.close();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * test Syncable interface on raw local file system
 * @throws IOException
 */
@Test(timeout=1000) public void testSyncable() throws IOException {
  FileSystem fs=fileSys.getRawFileSystem();
  Path file=new Path(TEST_ROOT_DIR,"syncable");
  FSDataOutputStream out=fs.create(file);
  ;
  final int bytesWritten=1;
  byte[] expectedBuf=new byte[]{'0','1','2','3'};
  try {
    out.write(expectedBuf,0,1);
    out.hflush();
    verifyFile(fs,file,bytesWritten,expectedBuf);
    out.write(expectedBuf,bytesWritten,expectedBuf.length - bytesWritten);
    out.hsync();
    verifyFile(fs,file,expectedBuf.length,expectedBuf);
  }
  finally {
    out.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestPath </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testAvroReflect() throws Exception {
  AvroTestUtil.testReflect(new Path("foo"),"{\"type\":\"string\",\"java-class\":\"org.apache.hadoop.fs.Path\"}");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestResolveHdfsSymlink </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests delegation token APIs in FileContext for Hdfs; and renew and cancel
 * APIs in Hdfs.
 * @throws UnsupportedFileSystemException
 * @throws IOException
 * @throws InterruptedException
 */
@SuppressWarnings({"unchecked","deprecation"}) @Test public void testFcDelegationToken() throws UnsupportedFileSystemException, IOException, InterruptedException {
  FileContext fcHdfs=FileContext.getFileContext(cluster.getFileSystem().getUri());
  final AbstractFileSystem afs=fcHdfs.getDefaultFileSystem();
  final List<Token<?>> tokenList=afs.getDelegationTokens(UserGroupInformation.getCurrentUser().getUserName());
  ((Hdfs)afs).renewDelegationToken((Token<DelegationTokenIdentifier>)tokenList.get(0));
  ((Hdfs)afs).cancelDelegationToken((Token<? extends AbstractDelegationTokenIdentifier>)tokenList.get(0));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestStat </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testStatFreeBSD() throws Exception {
  String[] symlinks=new String[]{"6,Symbolic Link,1373508941,1373508941,120755,awang,awang,`link' -> `target'"};
  StatOutput freebsd=new StatOutput("stat: symtest/link: stat: No such file or directory","512,Directory,1373583695,1373583669,40755,awang,awang,`link' -> `'","0,Regular File,1373508937,1373508937,100644,awang,awang,`link' -> `'",symlinks,"512,Directory,1375139537,1375139537,41755,awang,awang,`link' -> `'");
  freebsd.test();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testStatLinux() throws Exception {
  String[] symlinks=new String[]{"6,symbolic link,1373584236,1373584236,777,andrew,andrew,`link' -> `target'","6,symbolic link,1373584236,1373584236,777,andrew,andrew,'link' -> 'target'"};
  StatOutput linux=new StatOutput("stat: cannot stat `watermelon': No such file or directory","4096,directory,1373584236,1373586485,755,andrew,root,`.'","0,regular empty file,1373584228,1373584228,644,andrew,andrew,`target'",symlinks,"4096,directory,1374622334,1375124212,1755,andrew,andrew,`stickydir'");
  linux.test();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestSymlinkHdfsFileSystem </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testSnapshot() throws Exception {
  Path dir=new Path(testBaseDir1());
  Path link=new Path(testBaseDir1(),"link");
  Path dir2=new Path(testBaseDir2());
  wrapper.createSymlink(dir2,link,false);
  wrapper.setWorkingDirectory(dir);
  dfs.allowSnapshot(link);
  dfs.disallowSnapshot(link);
  dfs.allowSnapshot(link);
  dfs.createSnapshot(link,"mcmillan");
  dfs.renameSnapshot(link,"mcmillan","seaborg");
  dfs.deleteSnapshot(link,"seaborg");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testConcat() throws Exception {
  Path dir=new Path(testBaseDir1());
  Path link=new Path(testBaseDir1(),"link");
  Path dir2=new Path(testBaseDir2());
  wrapper.createSymlink(dir2,link,false);
  wrapper.setWorkingDirectory(dir);
  Path target=new Path(link,"target");
  createAndWriteFile(target);
  Path[] srcs=new Path[3];
  for (int i=0; i < srcs.length; i++) {
    srcs[i]=new Path(link,"src-" + i);
    createAndWriteFile(srcs[i]);
  }
  dfs.concat(target,srcs);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestUrlStreamHandlerFactory </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConcurrency() throws Exception {
  for (int i=0; i < RUNS; i++) {
    singleRun();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.TestVolumeId </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEquality(){
  final VolumeId id1=new HdfsVolumeId(new byte[]{(byte)0,(byte)0});
  testEq(true,id1,id1);
  final VolumeId id2=new HdfsVolumeId(new byte[]{(byte)0,(byte)1});
  testEq(true,id2,id2);
  testEq(false,id1,id2);
  final VolumeId id3=new HdfsVolumeId(new byte[]{(byte)1,(byte)0});
  testEq(true,id3,id3);
  testEq(false,id1,id3);
  final VolumeId id2copy1=new HdfsVolumeId(new byte[]{(byte)0,(byte)1});
  testEq(true,id2,id2copy1);
  final VolumeId id2copy2=new HdfsVolumeId(new byte[]{(byte)0,(byte)1});
  testEq(true,id2,id2copy2);
  testEqMany(true,new VolumeId[]{id2,id2copy1,id2copy2});
  testEqMany(false,new VolumeId[]{id1,id2,id3});
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testIdEmptyBytes(){
  final VolumeId idEmpty1=new HdfsVolumeId(new byte[0]);
  final VolumeId idEmpty2=new HdfsVolumeId(new byte[0]);
  final VolumeId idNotEmpty=new HdfsVolumeId(new byte[]{(byte)1});
  testEq(true,idEmpty1,idEmpty2);
  testEq(false,idEmpty1,idNotEmpty);
  testEq(false,idEmpty2,idNotEmpty);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.azure.NativeAzureFileSystemBaseTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFileOwnership() throws Exception {
  Path testFile=new Path("ownershipTestFile");
  writeString(testFile,"Testing");
  testOwnership(testFile);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFolderPermissions() throws Exception {
  Path testFolder=new Path("permissionTestFolder");
  FsPermission permission=FsPermission.createImmutable((short)644);
  fs.mkdirs(testFolder,permission);
  FileStatus ret=fs.getFileStatus(testFolder);
  assertEqualsIgnoreStickyBit(permission,ret.getPermission());
  fs.delete(testFolder,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFolderOwnership() throws Exception {
  Path testFolder=new Path("ownershipTestFolder");
  fs.mkdirs(testFolder);
  testOwnership(testFolder);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCloseFileSystemTwice() throws Exception {
  fs.close();
  fs.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testModifiedTimeForFile() throws Exception {
  Path testFile=new Path("testFile");
  fs.create(testFile).close();
  testModifiedTime(testFile);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFilePermissions() throws Exception {
  Path testFile=new Path("permissionTestFile");
  FsPermission permission=FsPermission.createImmutable((short)644);
  createEmptyFile(testFile,permission);
  FileStatus ret=fs.getFileStatus(testFile);
  assertEqualsIgnoreStickyBit(permission,ret.getPermission());
  fs.delete(testFile,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.azure.TestAzureFileSystemErrorConditions </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AzureException.class) public void testErrorDuringRetrieve() throws Exception {
  NativeAzureFileSystem fs=AzureBlobStorageTestAccount.createMock().getFileSystem();
  Path testFile=new Path("/testErrorDuringRetrieve");
  writeAllThreeFile(fs,testFile);
  FSDataInputStream stream=fs.open(testFile);
  stream.seek(Integer.MAX_VALUE);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTransientErrorOnCommitBlockList() throws Exception {
  AzureBlobStorageTestAccount testAccount=AzureBlobStorageTestAccount.create();
  assumeNotNull(testAccount);
  try {
    NativeAzureFileSystem fs=testAccount.getFileSystem();
    injectTransientError(fs,new ConnectionRecognizer(){
      @Override public boolean isTargetConnection(      HttpURLConnection connection){
        return connection.getRequestMethod().equals("PUT") && connection.getURL().getQuery().contains("blocklist");
      }
    }
);
    Path testFile=new Path("/a/b");
    writeAllThreeFile(fs,testFile);
    readAllThreeFile(fs,testFile);
  }
  finally {
    testAccount.cleanup();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTransientErrorOnRead() throws Exception {
  AzureBlobStorageTestAccount testAccount=AzureBlobStorageTestAccount.create();
  assumeNotNull(testAccount);
  try {
    NativeAzureFileSystem fs=testAccount.getFileSystem();
    Path testFile=new Path("/a/b");
    writeAllThreeFile(fs,testFile);
    injectTransientError(fs,new ConnectionRecognizer(){
      @Override public boolean isTargetConnection(      HttpURLConnection connection){
        return connection.getRequestMethod().equals("GET");
      }
    }
);
    readAllThreeFile(fs,testFile);
  }
  finally {
    testAccount.cleanup();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.azure.TestBlobDataValidation </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that we don't check block-level MD5 if we specify that in the
 * configuration.
 */
@Test public void testDontCheckBlockMd5() throws Exception {
  Configuration conf=new Configuration();
  conf.setBoolean(KEY_CHECK_BLOCK_MD5,false);
  testAccount=AzureBlobStorageTestAccount.create(conf);
  testCheckBlockMd5(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that we get blob-level MD5 storage and validation if we specify that
 * in the configuration.
 */
@Test public void testStoreBlobMd5() throws Exception {
  Configuration conf=new Configuration();
  conf.setBoolean(KEY_STORE_BLOB_MD5,true);
  testAccount=AzureBlobStorageTestAccount.create(conf);
  testStoreBlobMd5(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that by default we check block-level MD5.
 */
@Test public void testCheckBlockMd5() throws Exception {
  testAccount=AzureBlobStorageTestAccount.create();
  testCheckBlockMd5(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that by default we don't store the blob-level MD5.
 */
@Test public void testBlobMd5StoreOffByDefault() throws Exception {
  testAccount=AzureBlobStorageTestAccount.create();
  testStoreBlobMd5(false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.azure.TestOutOfBandAzureBlobOperationsLive </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void outOfBandFolder_create_rootDir() throws Exception {
  Path targetFile=new Path("/newInRoot");
  FSDataOutputStream s2=fs.create(targetFile);
  s2.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.azure.metrics.TestAzureFileSystemInstrumentation </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMetricTags() throws Exception {
  String accountName=testAccount.getRealAccount().getBlobEndpoint().getAuthority();
  String containerName=testAccount.getRealContainer().getName();
  MetricsRecordBuilder myMetrics=getMyMetrics();
  verify(myMetrics).add(argThat(new TagMatcher("accountName",accountName)));
  verify(myMetrics).add(argThat(new TagMatcher("containerName",containerName)));
  verify(myMetrics).add(argThat(new TagMatcher("Context","azureFileSystem")));
  verify(myMetrics).add(argThat(new TagExistsMatcher("wasbFileSystemId")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.contract.AbstractContractAppendTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppendToEmptyFile() throws Throwable {
  touch(getFileSystem(),target);
  byte[] dataset=dataset(256,'a','z');
  FSDataOutputStream outputStream=getFileSystem().append(target);
  try {
    outputStream.write(dataset);
  }
  finally {
    outputStream.close();
  }
  byte[] bytes=ContractTestUtils.readDataset(getFileSystem(),target,dataset.length);
  ContractTestUtils.compareByteArrays(dataset,bytes,dataset.length);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppendToExistingFile() throws Throwable {
  byte[] original=dataset(8192,'A','Z');
  byte[] appended=dataset(8192,'0','9');
  createFile(getFileSystem(),target,false,original);
  FSDataOutputStream outputStream=getFileSystem().append(target);
  outputStream.write(appended);
  outputStream.close();
  byte[] bytes=ContractTestUtils.readDataset(getFileSystem(),target,original.length + appended.length);
  ContractTestUtils.validateFileContent(bytes,new byte[][]{original,appended});
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRenameFileBeingAppended() throws Throwable {
  touch(getFileSystem(),target);
  assertPathExists("original file does not exist",target);
  byte[] dataset=dataset(256,'a','z');
  FSDataOutputStream outputStream=getFileSystem().append(target);
  outputStream.write(dataset);
  Path renamed=new Path(testPath,"renamed");
  outputStream.close();
  String listing=ls(testPath);
  assertPathExists("renamed destination file does not exist",renamed);
  assertPathDoesNotExist("Source file found after rename during append:\n" + listing,target);
  byte[] bytes=ContractTestUtils.readDataset(getFileSystem(),renamed,dataset.length);
  ContractTestUtils.compareByteArrays(dataset,bytes,dataset.length);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.contract.AbstractContractConcatTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConcatFileOnFile() throws Throwable {
  byte[] block=dataset(TEST_FILE_LEN,0,255);
  createFile(getFileSystem(),target,false,block);
  getFileSystem().concat(target,new Path[]{srcFile});
  assertFileHasLength(getFileSystem(),target,TEST_FILE_LEN * 2);
  ContractTestUtils.validateFileContent(ContractTestUtils.readDataset(getFileSystem(),target,TEST_FILE_LEN * 2),new byte[][]{block,block});
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConcatOnSelf() throws Throwable {
  byte[] block=dataset(TEST_FILE_LEN,0,255);
  createFile(getFileSystem(),target,false,block);
  try {
    getFileSystem().concat(target,new Path[]{target});
  }
 catch (  Exception e) {
    handleExpectedException(e);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.contract.AbstractContractCreateTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateNewFile() throws Throwable {
  describe("Foundational 'create a file' test");
  Path path=path("testCreateNewFile");
  byte[] data=dataset(256,'a','z');
  writeDataset(getFileSystem(),path,data,data.length,1024 * 1024,false);
  ContractTestUtils.verifyFileContents(getFileSystem(),path,data);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreatedFileIsImmediatelyVisible() throws Throwable {
  describe("verify that a newly created file exists as soon as open returns");
  Path path=path("testCreatedFileIsImmediatelyVisible");
  FSDataOutputStream out=null;
  try {
    out=getFileSystem().create(path,false,4096,(short)1,1024);
    if (!getFileSystem().exists(path)) {
      if (isSupported(IS_BLOBSTORE)) {
        skip("Filesystem is an object store and newly created files are not immediately visible");
      }
      assertPathExists("expected path to be visible before anything written",path);
    }
  }
  finally {
    IOUtils.closeStream(out);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This test catches some eventual consistency problems that blobstores exhibit,
 * as we are implicitly verifying that updates are consistent. This
 * is why different file lengths and datasets are used
 * @throws Throwable
 */
@Test public void testOverwriteExistingFile() throws Throwable {
  describe("Overwrite an existing file and verify the new data is there");
  Path path=path("testOverwriteExistingFile");
  byte[] data=dataset(256,'a','z');
  writeDataset(getFileSystem(),path,data,data.length,1024,false);
  ContractTestUtils.verifyFileContents(getFileSystem(),path,data);
  byte[] data2=dataset(10 * 1024,'A','Z');
  writeDataset(getFileSystem(),path,data2,data2.length,1024,true);
  ContractTestUtils.verifyFileContents(getFileSystem(),path,data2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.contract.AbstractContractDeleteTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeleteEmptyDirNonRecursive() throws Throwable {
  Path path=path("testDeleteEmptyDirNonRecursive");
  mkdirs(path);
  assertDeleted(path,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeleteEmptyDirRecursive() throws Throwable {
  Path path=path("testDeleteEmptyDirRecursive");
  mkdirs(path);
  assertDeleted(path,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeleteNonEmptyDirRecursive() throws Throwable {
  Path path=path("testDeleteNonEmptyDirNonRecursive");
  mkdirs(path);
  Path file=new Path(path,"childfile");
  ContractTestUtils.writeTextFile(getFileSystem(),file,"goodbye, world",true);
  assertDeleted(path,true);
  ContractTestUtils.assertPathDoesNotExist(getFileSystem(),"not deleted",file);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.contract.AbstractContractMkdirTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMkDirRmRfDir() throws Throwable {
  describe("create a directory then recursive delete it");
  FileSystem fs=getFileSystem();
  Path dir=path("testMkDirRmRfDir");
  assertPathDoesNotExist("directory already exists",dir);
  fs.mkdirs(dir);
  assertPathExists("mkdir failed",dir);
  assertDeleted(dir,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMkDirRmDir() throws Throwable {
  FileSystem fs=getFileSystem();
  Path dir=path("testMkDirRmDir");
  assertPathDoesNotExist("directory already exists",dir);
  fs.mkdirs(dir);
  assertPathExists("mkdir failed",dir);
  assertDeleted(dir,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.contract.AbstractContractRootDirectoryTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMkDirDepth1() throws Throwable {
  FileSystem fs=getFileSystem();
  Path dir=new Path("/testmkdirdepth1");
  assertPathDoesNotExist("directory already exists",dir);
  fs.mkdirs(dir);
  ContractTestUtils.assertIsDirectory(getFileSystem(),dir);
  assertPathExists("directory already exists",dir);
  assertDeleted(dir,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRmEmptyRootDirNonRecursive() throws Throwable {
  skipIfUnsupported(TEST_ROOT_TESTS_ENABLED);
  Path root=new Path("/");
  ContractTestUtils.assertIsDirectory(getFileSystem(),root);
  boolean deleted=getFileSystem().delete(root,true);
  LOG.info("rm / of empty dir result is {}",deleted);
  ContractTestUtils.assertIsDirectory(getFileSystem(),root);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRmRootRecursive() throws Throwable {
  skipIfUnsupported(TEST_ROOT_TESTS_ENABLED);
  Path root=new Path("/");
  ContractTestUtils.assertIsDirectory(getFileSystem(),root);
  Path file=new Path("/testRmRootRecursive");
  ContractTestUtils.touch(getFileSystem(),file);
  boolean deleted=getFileSystem().delete(root,true);
  ContractTestUtils.assertIsDirectory(getFileSystem(),root);
  LOG.info("rm -rf / result is {}",deleted);
  if (deleted) {
    assertPathDoesNotExist("expected file to be deleted",file);
  }
 else {
    assertPathExists("expected file to be preserved",file);
    ;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.contract.AbstractContractSeekTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Lifted from TestLocalFileSystem:
 * Regression test for HADOOP-9307: BufferedFSInputStream returning
 * wrong results after certain sequences of seeks and reads.
 */
@Test public void testRandomSeeks() throws Throwable {
  int limit=getContract().getLimit(TEST_RANDOM_SEEK_COUNT,DEFAULT_RANDOM_SEEK_COUNT);
  describe("Testing " + limit + " random seeks");
  int filesize=10 * 1024;
  byte[] buf=dataset(filesize,0,255);
  Path randomSeekFile=path("testrandomseeks.bin");
  createFile(getFileSystem(),randomSeekFile,false,buf);
  Random r=new Random();
  FSDataInputStream stm=getFileSystem().open(randomSeekFile);
  int[] seeks=new int[10];
  int[] reads=new int[10];
  try {
    for (int i=0; i < limit; i++) {
      int seekOff=r.nextInt(buf.length);
      int toRead=r.nextInt(Math.min(buf.length - seekOff,32000));
      seeks[i % seeks.length]=seekOff;
      reads[i % reads.length]=toRead;
      verifyRead(stm,buf,seekOff,toRead);
    }
  }
 catch (  AssertionError afe) {
    StringBuilder sb=new StringBuilder();
    sb.append("Sequence of actions:\n");
    for (int j=0; j < seeks.length; j++) {
      sb.append("seek @ ").append(seeks[j]).append("  ").append("read ").append(reads[j]).append("\n");
    }
    LOG.error(sb.toString());
    throw afe;
  }
 finally {
    stm.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.http.client.BaseTestHttpFSWith </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestDir @TestJetty @TestHdfs public void testOperationDoAs() throws Exception {
  createHttpFSServer();
  UserGroupInformation ugi=UserGroupInformation.createProxyUser(HadoopUsersConfTestHelper.getHadoopUsers()[0],UserGroupInformation.getCurrentUser());
  ugi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      operation(operation);
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestDir @TestJetty @TestHdfs public void testOperation() throws Exception {
  createHttpFSServer();
  operation(operation);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.http.server.TestCheckUploadContentTypeFilter </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void putUploadWrong() throws Exception {
  test("PUT",HttpFSFileSystem.Operation.CREATE.toString(),"plain/text",false,false);
  test("PUT",HttpFSFileSystem.Operation.CREATE.toString(),"plain/text",true,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void putUpload() throws Exception {
  test("PUT",HttpFSFileSystem.Operation.CREATE.toString(),"application/octet-stream",true,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void postUploadWrong() throws Exception {
  test("POST",HttpFSFileSystem.Operation.APPEND.toString(),"plain/text",false,false);
  test("POST",HttpFSFileSystem.Operation.APPEND.toString(),"plain/text",true,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void putOther() throws Exception {
  test("PUT",HttpFSFileSystem.Operation.MKDIRS.toString(),"plain/text",false,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void getOther() throws Exception {
  test("GET",HttpFSFileSystem.Operation.GETHOMEDIRECTORY.toString(),"plain/text",false,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void postUpload() throws Exception {
  test("POST",HttpFSFileSystem.Operation.APPEND.toString(),"APPLICATION/OCTET-STREAM",true,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.http.server.TestHttpFSServer </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestDir @TestJetty public void server() throws Exception {
  String dir=TestDirHelper.getTestDir().getAbsolutePath();
  Configuration httpfsConf=new Configuration(false);
  HttpFSServerWebApp server=new HttpFSServerWebApp(dir,dir,dir,dir,httpfsConf);
  server.init();
  server.destroy();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.http.server.TestHttpFSServerNoACLs </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Ensure that
 * <ol>
 * <li>GETFILESTATUS and LISTSTATUS work happily</li>
 * <li>ACLSTATUS throws an exception</li>
 * <li>The ACL SET, REMOVE, etc calls all fail</li>
 * </ol>
 * @throws Exception
 */
@Test @TestDir @TestJetty public void testWithNoAcls() throws Exception {
  final String aclUser1="user:foo:rw-";
  final String aclUser2="user:bar:r--";
  final String aclGroup1="group::r--";
  final String aclSpec="aclspec=user::rwx," + aclUser1 + ","+ aclGroup1+ ",other::---";
  final String modAclSpec="aclspec=" + aclUser2;
  final String remAclSpec="aclspec=" + aclUser1;
  final String defUser1="default:user:glarch:r-x";
  final String defSpec1="aclspec=" + defUser1;
  final String dir="/noACLs";
  final String path=dir + "/foo";
  startMiniDFS();
  createHttpFSServer();
  FileSystem fs=FileSystem.get(nnConf);
  fs.mkdirs(new Path(dir));
  OutputStream os=fs.create(new Path(path));
  os.write(1);
  os.close();
  getStatus(path,"GETFILESTATUS",true);
  getStatus(dir,"LISTSTATUS",true);
  getStatus(path,"GETACLSTATUS",false);
  putCmd(path,"SETACL",aclSpec,false);
  putCmd(path,"MODIFYACLENTRIES",modAclSpec,false);
  putCmd(path,"REMOVEACLENTRIES",remAclSpec,false);
  putCmd(path,"REMOVEACL",null,false);
  putCmd(dir,"SETACL",defSpec1,false);
  putCmd(dir,"REMOVEDEFAULTACL",null,false);
  miniDfs.shutdown();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.http.server.TestHttpFSServerNoXAttrs </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Ensure that GETXATTRS, SETXATTR, REMOVEXATTR fail.
 */
@Test @TestDir @TestJetty @TestHdfs public void testWithXAttrs() throws Exception {
  final String name1="user.a1";
  final byte[] value1=new byte[]{0x31,0x32,0x33};
  final String dir="/noXAttr";
  final String path=dir + "/file";
  startMiniDFS();
  createHttpFSServer();
  FileSystem fs=FileSystem.get(nnConf);
  fs.mkdirs(new Path(dir));
  OutputStream os=fs.create(new Path(path));
  os.write(1);
  os.close();
  getStatus(path,"GETXATTRS");
  putCmd(path,"SETXATTR",TestHttpFSServer.setXAttrParam(name1,value1));
  putCmd(path,"REMOVEXATTR","xattr.name=" + name1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.http.server.TestHttpFSWithKerberos </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestDir @TestJetty @TestHdfs public void testDelegationTokenWithHttpFSFileSystemProxyUser() throws Exception {
  testDelegationTokenWithinDoAs(HttpFSFileSystem.class,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestDir @TestJetty @TestHdfs public void testDelegationTokenWithWebhdfsFileSystem() throws Exception {
  testDelegationTokenWithinDoAs(WebHdfsFileSystem.class,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestDir @TestJetty @TestHdfs public void testDelegationTokenWithHttpFSFileSystem() throws Exception {
  testDelegationTokenWithinDoAs(HttpFSFileSystem.class,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.permission.TestStickyBit </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclMovingFiles() throws Exception {
  testMovingFiles(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that one user can't rename/move another user's file when the sticky
 * bit is set.
 */
@Test public void testMovingFiles() throws Exception {
  testMovingFiles(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclGeneralSBBehavior() throws Exception {
  Path baseDir=new Path("/mcgann");
  hdfs.mkdirs(baseDir);
  Path p=new Path(baseDir,"tmp");
  hdfs.mkdirs(p);
  hdfs.setPermission(p,new FsPermission((short)01777));
  applyAcl(p);
  confirmCanAppend(conf,p);
  baseDir=new Path("/eccleston");
  hdfs.mkdirs(baseDir);
  p=new Path(baseDir,"roguetraders");
  hdfs.mkdirs(p);
  applyAcl(p);
  confirmSettingAndGetting(hdfs,p,baseDir);
  baseDir=new Path("/tennant");
  hdfs.mkdirs(baseDir);
  p=new Path(baseDir,"contemporary");
  hdfs.mkdirs(p);
  hdfs.setPermission(p,new FsPermission((short)01777));
  applyAcl(p);
  confirmDeletingFiles(conf,p);
  baseDir=new Path("/smith");
  hdfs.mkdirs(baseDir);
  p=new Path(baseDir,"scissorsisters");
  hdfs.mkdirs(p,new FsPermission((short)01666));
  applyAcl(p);
  confirmStickyBitDoesntPropagate(hdfs,p);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGeneralSBBehavior() throws Exception {
  Path baseDir=new Path("/mcgann");
  hdfs.mkdirs(baseDir);
  Path p=new Path(baseDir,"tmp");
  hdfs.mkdirs(p);
  hdfs.setPermission(p,new FsPermission((short)01777));
  confirmCanAppend(conf,p);
  baseDir=new Path("/eccleston");
  hdfs.mkdirs(baseDir);
  p=new Path(baseDir,"roguetraders");
  hdfs.mkdirs(p);
  confirmSettingAndGetting(hdfs,p,baseDir);
  baseDir=new Path("/tennant");
  hdfs.mkdirs(baseDir);
  p=new Path(baseDir,"contemporary");
  hdfs.mkdirs(p);
  hdfs.setPermission(p,new FsPermission((short)01777));
  confirmDeletingFiles(conf,p);
  baseDir=new Path("/smith");
  hdfs.mkdirs(baseDir);
  p=new Path(baseDir,"scissorsisters");
  hdfs.mkdirs(p,new FsPermission((short)01666));
  confirmStickyBitDoesntPropagate(hdfs,baseDir);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.s3native.TestJets3tNativeFileSystemStore </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testExtraLargeUpload() throws IOException, NoSuchAlgorithmException {
  writeRenameReadCompare(new Path("/test/xlarge"),5368709121L);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSmallUpload() throws IOException, NoSuchAlgorithmException {
  writeRenameReadCompare(new Path("/test/small"),16384);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMediumUpload() throws IOException, NoSuchAlgorithmException {
  writeRenameReadCompare(new Path("/test/medium"),33554432);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.shell.TestCopy </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInterruptedRename() throws Exception {
  FSDataOutputStream out=mock(FSDataOutputStream.class);
  whenFsCreate().thenReturn(out);
  when(mockFs.getFileStatus(eq(tmpPath))).thenReturn(fileStat);
  when(mockFs.rename(eq(tmpPath),eq(path))).thenThrow(new InterruptedIOException());
  FSInputStream in=mock(FSInputStream.class);
  when(in.read(any(byte[].class),anyInt(),anyInt())).thenReturn(-1);
  tryCopyStream(in,false);
  verify(mockFs).delete(eq(tmpPath),anyBoolean());
  verify(mockFs).rename(eq(tmpPath),eq(path));
  verify(mockFs,never()).delete(eq(path),anyBoolean());
  verify(mockFs,never()).close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInterruptedCreate() throws Exception {
  whenFsCreate().thenThrow(new InterruptedIOException());
  when(mockFs.getFileStatus(eq(tmpPath))).thenReturn(fileStat);
  FSDataInputStream in=mock(FSDataInputStream.class);
  tryCopyStream(in,false);
  verify(mockFs).delete(eq(tmpPath),anyBoolean());
  verify(mockFs,never()).rename(any(Path.class),any(Path.class));
  verify(mockFs,never()).delete(eq(path),anyBoolean());
  verify(mockFs,never()).close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopyStreamTarget() throws Exception {
  FSDataOutputStream out=mock(FSDataOutputStream.class);
  whenFsCreate().thenReturn(out);
  when(mockFs.getFileStatus(eq(tmpPath))).thenReturn(fileStat);
  when(mockFs.rename(eq(tmpPath),eq(path))).thenReturn(true);
  FSInputStream in=mock(FSInputStream.class);
  when(in.read(any(byte[].class),anyInt(),anyInt())).thenReturn(-1);
  tryCopyStream(in,true);
  verify(mockFs,never()).delete(eq(path),anyBoolean());
  verify(mockFs).rename(eq(tmpPath),eq(path));
  verify(mockFs,never()).delete(eq(tmpPath),anyBoolean());
  verify(mockFs,never()).close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInterruptedCopyBytes() throws Exception {
  FSDataOutputStream out=mock(FSDataOutputStream.class);
  whenFsCreate().thenReturn(out);
  when(mockFs.getFileStatus(eq(tmpPath))).thenReturn(fileStat);
  FSInputStream in=mock(FSInputStream.class);
  when(in.read(any(byte[].class),anyInt(),anyInt())).thenThrow(new InterruptedIOException());
  tryCopyStream(in,false);
  verify(mockFs).delete(eq(tmpPath),anyBoolean());
  verify(mockFs,never()).rename(any(Path.class),any(Path.class));
  verify(mockFs,never()).delete(eq(path),anyBoolean());
  verify(mockFs,never()).close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopyStreamTargetExists() throws Exception {
  FSDataOutputStream out=mock(FSDataOutputStream.class);
  whenFsCreate().thenReturn(out);
  when(mockFs.getFileStatus(eq(path))).thenReturn(fileStat);
  target.refreshStatus();
  cmd.setOverwrite(true);
  when(mockFs.getFileStatus(eq(tmpPath))).thenReturn(fileStat);
  when(mockFs.delete(eq(path),eq(false))).thenReturn(true);
  when(mockFs.rename(eq(tmpPath),eq(path))).thenReturn(true);
  FSInputStream in=mock(FSInputStream.class);
  when(in.read(any(byte[].class),anyInt(),anyInt())).thenReturn(-1);
  tryCopyStream(in,true);
  verify(mockFs).delete(eq(path),anyBoolean());
  verify(mockFs).rename(eq(tmpPath),eq(path));
  verify(mockFs,never()).delete(eq(tmpPath),anyBoolean());
  verify(mockFs,never()).close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.shell.TestCopyPreserveFlag </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testPutWithoutP() throws Exception {
  run(new Put(),FROM.toString(),TO.toString());
  assertAttributesChanged();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testCpWithoutP() throws Exception {
  run(new Cp(),FROM.toString(),TO.toString());
  assertAttributesChanged();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testGetWithoutP() throws Exception {
  run(new Get(),FROM.toString(),TO.toString());
  assertAttributesChanged();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testPutWithP() throws Exception {
  run(new Put(),"-p",FROM.toString(),TO.toString());
  assertAttributesPreserved();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testGetWithP() throws Exception {
  run(new Get(),"-p",FROM.toString(),TO.toString());
  assertAttributesPreserved();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testCpWithP() throws Exception {
  run(new Cp(),"-p",FROM.toString(),TO.toString());
  assertAttributesPreserved();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.shell.TestCount </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void processPathShowQuotasHuman() throws Exception {
  Path path=new Path("mockfs:/test");
  when(mockFs.getFileStatus(eq(path))).thenReturn(fileStat);
  PathData pathData=new PathData(path.toString(),conf);
  PrintStream out=mock(PrintStream.class);
  Count count=new Count();
  count.out=out;
  LinkedList<String> options=new LinkedList<String>();
  options.add("-q");
  options.add("-h");
  options.add("dummy");
  count.processOptions(options);
  count.processPath(pathData);
  verify(out).println(HUMAN + WITH_QUOTAS + path.toString());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void processPathNoQuotasHuman() throws Exception {
  Path path=new Path("mockfs:/test");
  when(mockFs.getFileStatus(eq(path))).thenReturn(fileStat);
  PathData pathData=new PathData(path.toString(),conf);
  PrintStream out=mock(PrintStream.class);
  Count count=new Count();
  count.out=out;
  LinkedList<String> options=new LinkedList<String>();
  options.add("-h");
  options.add("dummy");
  count.processOptions(options);
  count.processPath(pathData);
  verify(out).println(HUMAN + NO_QUOTAS + path.toString());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void processPathNoQuotas() throws Exception {
  Path path=new Path("mockfs:/test");
  when(mockFs.getFileStatus(eq(path))).thenReturn(fileStat);
  PathData pathData=new PathData(path.toString(),conf);
  PrintStream out=mock(PrintStream.class);
  Count count=new Count();
  count.out=out;
  LinkedList<String> options=new LinkedList<String>();
  options.add("dummy");
  count.processOptions(options);
  count.processPath(pathData);
  verify(out).println(BYTES + NO_QUOTAS + path.toString());
  verifyNoMoreInteractions(out);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void processPathShowQuotas() throws Exception {
  Path path=new Path("mockfs:/test");
  when(mockFs.getFileStatus(eq(path))).thenReturn(fileStat);
  PathData pathData=new PathData(path.toString(),conf);
  PrintStream out=mock(PrintStream.class);
  Count count=new Count();
  count.out=out;
  LinkedList<String> options=new LinkedList<String>();
  options.add("-q");
  options.add("dummy");
  count.processOptions(options);
  count.processPath(pathData);
  verify(out).println(BYTES + WITH_QUOTAS + path.toString());
  verifyNoMoreInteractions(out);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.shell.TestPathData </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testWithDirStringAndConf() throws Exception {
  String dirString="d1";
  PathData item=new PathData(dirString,conf);
  checkPathData(dirString,item);
  dirString="d1/";
  item=new PathData(dirString,conf);
  checkPathData(dirString,item);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.slive.TestSlive </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMkdir() throws Exception {
  ConfigExtractor extractor=getTestConfig(false);
  final Path dir=new Path(getTestDir().getCanonicalPath());
  MkdirOp op=new MkdirOp(extractor,rnd){
    protected Path getDirectory(){
      return dir;
    }
  }
;
  runOperationOk(extractor,op,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOpFailures() throws Exception {
  ConfigExtractor extractor=getTestConfig(false);
  final Path fn=new Path(getImaginaryFile().getCanonicalPath());
  ReadOp rop=new ReadOp(extractor,rnd){
    protected Path getReadFile(){
      return fn;
    }
  }
;
  runOperationBad(extractor,rop);
  DeleteOp dop=new DeleteOp(extractor,rnd){
    protected Path getDeleteFile(){
      return fn;
    }
  }
;
  runOperationBad(extractor,dop);
  RenameOp reop=new RenameOp(extractor,rnd){
    protected SrcTarget getRenames(){
      return new SrcTarget(fn,fn);
    }
  }
;
  runOperationBad(extractor,reop);
  AppendOp aop=new AppendOp(extractor,rnd){
    protected Path getAppendFile(){
      return fn;
    }
  }
;
  runOperationBad(extractor,aop);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSleep() throws Exception {
  ConfigExtractor extractor=getTestConfig(true);
  SleepOp op=new SleepOp(extractor,rnd);
  runOperationOk(extractor,op,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppendOp() throws Exception {
  ConfigExtractor extractor=getTestConfig(false);
  final Path fn=new Path(getTestFile().getCanonicalPath());
  CreateOp op=new CreateOp(extractor,rnd){
    protected Path getCreateFile(){
      return fn;
    }
  }
;
  runOperationOk(extractor,op,true);
  AppendOp aop=new AppendOp(extractor,rnd){
    protected Path getAppendFile(){
      return fn;
    }
  }
;
  runOperationOk(extractor,aop,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDelete() throws Exception {
  ConfigExtractor extractor=getTestConfig(false);
  final Path fn=new Path(getTestFile().getCanonicalPath());
  CreateOp op=new CreateOp(extractor,rnd){
    protected Path getCreateFile(){
      return fn;
    }
  }
;
  runOperationOk(extractor,op,true);
  DeleteOp dop=new DeleteOp(extractor,rnd){
    protected Path getDeleteFile(){
      return fn;
    }
  }
;
  runOperationOk(extractor,dop,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRename() throws Exception {
  ConfigExtractor extractor=getTestConfig(false);
  final Path src=new Path(getTestFile().getCanonicalPath());
  final Path tgt=new Path(getTestRenameFile().getCanonicalPath());
  CreateOp op=new CreateOp(extractor,rnd){
    protected Path getCreateFile(){
      return src;
    }
  }
;
  runOperationOk(extractor,op,true);
  RenameOp rop=new RenameOp(extractor,rnd){
    protected SrcTarget getRenames(){
      return new SrcTarget(src,tgt);
    }
  }
;
  runOperationOk(extractor,rop,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateOp() throws Exception {
  ConfigExtractor extractor=getTestConfig(false);
  final Path fn=new Path(getTestFile().getCanonicalPath());
  CreateOp op=new CreateOp(extractor,rnd){
    protected Path getCreateFile(){
      return fn;
    }
  }
;
  runOperationOk(extractor,op,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRead() throws Exception {
  ConfigExtractor extractor=getTestConfig(false);
  final Path fn=new Path(getTestFile().getCanonicalPath());
  CreateOp op=new CreateOp(extractor,rnd){
    protected Path getCreateFile(){
      return fn;
    }
  }
;
  runOperationOk(extractor,op,true);
  ReadOp rop=new ReadOp(extractor,rnd){
    protected Path getReadFile(){
      return fn;
    }
  }
;
  runOperationOk(extractor,rop,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testList() throws Exception {
  ConfigExtractor extractor=getTestConfig(false);
  final Path dir=new Path(getTestDir().getCanonicalPath());
  MkdirOp op=new MkdirOp(extractor,rnd){
    protected Path getDirectory(){
      return dir;
    }
  }
;
  runOperationOk(extractor,op,true);
  ListOp lop=new ListOp(extractor,rnd){
    protected Path getDirectory(){
      return dir;
    }
  }
;
  runOperationOk(extractor,lop,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.swift.TestFSMainOperationsSwift </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) @Override public void testListStatusThrowsExceptionForUnreadableDir(){
  SwiftTestUtils.skip("unsupported");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.swift.TestLogResources </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testWhichLog4JPropsFile() throws Throwable {
  locateResource("log4j.properties");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testCommonsLoggingProps() throws Throwable {
  locateResource("commons-logging.properties");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testWhichLog4JXMLFile() throws Throwable {
  locateResource("log4j.XML");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.swift.TestReadPastBuffer </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Read past the buffer size byte by byte and verify that it refreshed
 * @throws Throwable
 */
@Test public void testReadPastBufferSize() throws Throwable {
  instream=fs.open(readFile);
  while (instream.read() != -1)   ;
  assertMinusOne("reading after the (large) file was read: " + instream,instream.read());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.swift.TestSeek </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testSeekReadClosedFile() throws Throwable {
  instream=fs.open(smallSeekFile);
  instream.close();
  try {
    instream.seek(0);
  }
 catch (  SwiftConnectionClosedException e) {
  }
  try {
    instream.read();
  }
 catch (  IOException e) {
  }
  try {
    byte[] buffer=new byte[1];
    int result=instream.read(buffer,0,1);
  }
 catch (  IOException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.swift.TestSwiftConfig </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=org.apache.hadoop.fs.swift.exceptions.SwiftConfigurationException.class) public void testZeroBlocksize() throws Exception {
  final Configuration configuration=createCoreConfig();
  configuration.set(SWIFT_BLOCKSIZE,"0");
  mkInstance(configuration);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=org.apache.hadoop.fs.swift.exceptions.SwiftConfigurationException.class) public void testEmptyUrl() throws Exception {
  final Configuration configuration=new Configuration();
  set(configuration,DOT_TENANT,"tenant");
  set(configuration,DOT_USERNAME,"username");
  set(configuration,DOT_PASSWORD,"password");
  mkInstance(configuration);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=org.apache.hadoop.fs.swift.exceptions.SwiftConfigurationException.class) public void testNegativePartsize() throws Exception {
  final Configuration configuration=createCoreConfig();
  configuration.set(SWIFT_PARTITION_SIZE,"-1");
  SwiftRestClient restClient=mkInstance(configuration);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=org.apache.hadoop.fs.swift.exceptions.SwiftConfigurationException.class) public void testNegativeBlocksize() throws Exception {
  final Configuration configuration=createCoreConfig();
  configuration.set(SWIFT_BLOCKSIZE,"-1");
  mkInstance(configuration);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGoodRetryCount() throws Exception {
  final Configuration configuration=createCoreConfig();
  configuration.set(SWIFT_RETRY_COUNT,"3");
  mkInstance(configuration);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=org.apache.hadoop.fs.swift.exceptions.SwiftConfigurationException.class) public void testEmptyPassword() throws Exception {
  final Configuration configuration=new Configuration();
  set(configuration,DOT_AUTH_URL,"http://localhost:8080");
  set(configuration,DOT_TENANT,"tenant");
  set(configuration,DOT_USERNAME,"username");
  mkInstance(configuration);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEmptyTenant() throws Exception {
  final Configuration configuration=new Configuration();
  set(configuration,DOT_AUTH_URL,"http://localhost:8080");
  set(configuration,DOT_USERNAME,"username");
  set(configuration,DOT_PASSWORD,"password");
  mkInstance(configuration);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=org.apache.hadoop.fs.swift.exceptions.SwiftConfigurationException.class) public void testBadConnectTimeout() throws Exception {
  final Configuration configuration=createCoreConfig();
  configuration.set(SWIFT_CONNECTION_TIMEOUT,"three");
  mkInstance(configuration);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=org.apache.hadoop.fs.swift.exceptions.SwiftConfigurationException.class) public void testEmptyUsername() throws Exception {
  final Configuration configuration=new Configuration();
  set(configuration,DOT_AUTH_URL,"http://localhost:8080");
  set(configuration,DOT_TENANT,"tenant");
  set(configuration,DOT_PASSWORD,"password");
  mkInstance(configuration);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=org.apache.hadoop.fs.swift.exceptions.SwiftConfigurationException.class) public void testBadRetryCount() throws Exception {
  final Configuration configuration=createCoreConfig();
  configuration.set(SWIFT_RETRY_COUNT,"three");
  mkInstance(configuration);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.swift.TestSwiftFileSystemBasicOps </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Assert that if a directory that has children is deleted, it is still
 * a directory
 * @throws Throwable if not, or if something else failed
 */
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testDirStaysADir() throws Throwable {
  Path path=new Path("/test/dirStaysADir");
  Path child=new Path(path,"child");
  try {
    fs.mkdirs(path);
    assertIsDirectory(fs,path);
    writeTextFile(fs,child,"child file",true);
    assertIsDirectory(fs,path);
    delete(fs,child);
  }
  finally {
    deleteR(fs,path);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testPutFile() throws Throwable {
  Path path=new Path("/test/PutFile");
  Exception caught=null;
  writeTextFile(fs,path,"Testing a put to a file",false);
  assertDeleted(path,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testMkDir() throws Throwable {
  Path path=new Path("/test/MkDir");
  fs.mkdirs(path);
  fs.delete(path,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testCreateMultilevelDir() throws Throwable {
  Path base=new Path("/test/CreateMultilevelDir");
  Path path=new Path(base,"1/2/3");
  fs.mkdirs(path);
  assertExists("deep multilevel dir not created",path);
  fs.delete(base,true);
  assertPathDoesNotExist("Multilevel delete failed",path);
  assertPathDoesNotExist("Multilevel delete failed",base);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Assert that a newly created directory is a directory
 * @throws Throwable if not, or if something else failed
 */
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testDirStatus() throws Throwable {
  Path path=new Path("/test/DirStatus");
  try {
    fs.mkdirs(path);
    assertIsDirectory(fs,path);
  }
  finally {
    delete(fs,path);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testCreateDirWithFileParent() throws Throwable {
  Path path=new Path("/test/CreateDirWithFileParent");
  Path child=new Path(path,"subdir/child");
  fs.mkdirs(path.getParent());
  try {
    writeTextFile(fs,path,"parent",true);
    try {
      fs.mkdirs(child);
    }
 catch (    ParentNotDirectoryException expected) {
      LOG.debug("Expected Exception",expected);
    }
  }
  finally {
    fs.delete(path,true);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testLsRoot() throws Throwable {
  Path path=new Path("/");
  FileStatus[] statuses=fs.listStatus(path);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testFileStatus() throws Throwable {
  Path path=new Path("/test/FileStatus");
  try {
    String text="Testing File Status " + System.currentTimeMillis();
    writeTextFile(fs,path,text,false);
    SwiftTestUtils.assertIsFile(fs,path);
  }
  finally {
    delete(fs,path);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testOverwriteDirectory() throws Throwable {
  Path path=new Path("/test/testOverwriteDirectory");
  try {
    fs.mkdirs(path.getParent());
    String text="Testing a put to a file " + System.currentTimeMillis();
    writeTextFile(fs,path,text,false);
    assertFileHasLength(fs,path,text.length());
  }
  finally {
    delete(fs,path);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testPutDeleteFileInSubdir() throws Throwable {
  Path path=new Path("/test/PutDeleteFileInSubdir/testPutDeleteFileInSubdir");
  String text="Testing a put and get to a file in a subdir " + System.currentTimeMillis();
  writeTextFile(fs,path,text,false);
  assertDeleted(path,false);
  assertDeleted(new Path("/test/PutDeleteFileInSubdir"),false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.swift.TestSwiftFileSystemBlockLocation </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testLocateOutOfRangeSrc() throws Throwable {
  describe("Seeking out of the file length returns an empty array");
  BlockLocation[] locations=getFs().getFileBlockLocations(createFileAndGetStatus(),data.length + 100,1);
  assertEmptyBlockLocations(locations);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testLocateRootDirectory() throws Throwable {
  describe("verify that locating the root directory is an error");
  FileStatus status=fs.getFileStatus(path("/"));
  SwiftTestUtils.assertIsDirectory(status);
  BlockLocation[] locations;
  locations=getFs().getFileBlockLocations(status,0,1);
  assertEmptyBlockLocations(locations);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testLocateSingleFileBlocks() throws Throwable {
  describe("verify that a file returns 1+ blocks");
  FileStatus fileStatus=createFileAndGetStatus();
  BlockLocation[] locations=getFs().getFileBlockLocations(fileStatus,0,1);
  assertNotEqual("No block locations supplied for " + fileStatus,0,locations.length);
  for (  BlockLocation location : locations) {
    assertLocationValid(location);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testLocateDirectory() throws Throwable {
  describe("verify that locating a directory is an error");
  createFile(path("/test/filename"));
  FileStatus status=fs.getFileStatus(path("/test"));
  LOG.info("Filesystem is " + fs + "; target is "+ status);
  SwiftTestUtils.assertIsDirectory(status);
  BlockLocation[] locations;
  locations=getFs().getFileBlockLocations(status,0,1);
  assertEmptyBlockLocations(locations);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.swift.TestSwiftFileSystemConcurrency </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * test on concurrent file system changes
 */
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testRaceConditionOnDirDeleteTest() throws Exception {
  SwiftTestUtils.skip("Skipping unreliable test");
  final String message="message";
  final Path fileToRead=new Path(TEST_RACE_CONDITION_ON_DELETE_DIR + "/files/many-files/file");
  final ExecutorService executorService=Executors.newFixedThreadPool(2);
  fs.create(new Path(TEST_RACE_CONDITION_ON_DELETE_DIR + "/file/test/file1"));
  fs.create(new Path(TEST_RACE_CONDITION_ON_DELETE_DIR + "/documents/doc1"));
  fs.create(new Path(TEST_RACE_CONDITION_ON_DELETE_DIR + "/pictures/picture"));
  executorService.execute(new Runnable(){
    @Override public void run(){
      try {
        assertDeleted(new Path(TEST_RACE_CONDITION_ON_DELETE_DIR),true);
      }
 catch (      IOException e) {
        LOG.warn("deletion thread:" + e,e);
        thread1Ex=e;
        throw new RuntimeException(e);
      }
    }
  }
);
  executorService.execute(new Runnable(){
    @Override public void run(){
      try {
        final FSDataOutputStream outputStream=fs.create(fileToRead);
        outputStream.write(message.getBytes());
        outputStream.close();
      }
 catch (      IOException e) {
        LOG.warn("writer thread:" + e,e);
        thread2Ex=e;
        throw new RuntimeException(e);
      }
    }
  }
);
  executorService.awaitTermination(1,TimeUnit.MINUTES);
  if (thread1Ex != null) {
    throw thread1Ex;
  }
  if (thread2Ex != null) {
    throw thread2Ex;
  }
  try {
    fs.open(fileToRead);
    LOG.info("concurrency test failed to trigger a failure");
  }
 catch (  FileNotFoundException expected) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.swift.TestSwiftFileSystemDelete </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testDeleteNonEmptyFile() throws IOException {
  final Path file=new Path("/test/testDeleteNonEmptyFile");
  createFile(file);
  assertDeleted(file,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testDeleteTestDir() throws IOException {
  final Path file=new Path("/test/");
  fs.delete(file,true);
  assertPathDoesNotExist("Test dir found",file);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testDeleteEmptyFile() throws IOException {
  final Path file=new Path("/test/testDeleteEmptyFile");
  createEmptyFile(file);
  SwiftTestUtils.noteAction("about to delete");
  assertDeleted(file,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.swift.TestSwiftFileSystemDirectories </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Asserts that a zero byte file has a status of file and not
 * directory or symlink
 * @throws Exception on failures
 */
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testZeroByteFilesAreDirectories() throws Exception {
  Path src=path("/test/testZeroByteFilesAreFiles");
  SwiftTestUtils.touch(fs,src);
  SwiftTestUtils.assertIsDirectory(fs,src);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.swift.TestSwiftFileSystemExtendedContract </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testConfIsValid() throws Throwable {
  Configuration conf=new Configuration();
  URI fsURI=SwiftTestUtils.getServiceURI(conf);
  RestClientBindings.bind(fsURI,conf);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testConfDefinesFilesystem() throws Throwable {
  Configuration conf=new Configuration();
  SwiftTestUtils.getServiceURI(conf);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testCreateFile() throws Exception {
  final Path f=new Path("/test/testCreateFile");
  final FSDataOutputStream fsDataOutputStream=fs.create(f);
  fsDataOutputStream.close();
  assertExists("created file",f);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.swift.TestSwiftFileSystemLsOperations </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testListStatusRootDir() throws Throwable {
  Path dir=path("/");
  Path child=path("/test");
  touch(fs,child);
  assertListStatusFinds(fs,dir,child);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.swift.TestSwiftFileSystemPartitionedUploads </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_BULK_IO_TEST_TIMEOUT) public void testDeleteSmallPartitionedFile() throws Throwable {
  final Path path=new Path("/test/testDeleteSmallPartitionedFile");
  final int len1=1024;
  final byte[] src1=SwiftTestUtils.dataset(len1,'A','Z');
  SwiftTestUtils.writeDataset(fs,path,src1,len1,1024,false);
  assertExists("Exists",path);
  Path part_0001=new Path(path,SwiftUtils.partitionFilenameFromNumber(1));
  Path part_0002=new Path(path,SwiftUtils.partitionFilenameFromNumber(2));
  String ls=SwiftTestUtils.ls(fs,path);
  assertExists("Partition 0001 Exists in " + ls,part_0001);
  assertPathDoesNotExist("partition 0002 found under " + ls,part_0002);
  assertExists("Partition 0002 Exists in " + ls,part_0001);
  fs.delete(path,false);
  assertPathDoesNotExist("deleted file still there",path);
  ls=SwiftTestUtils.ls(fs,path);
  assertPathDoesNotExist("partition 0001 file still under " + ls,part_0001);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_BULK_IO_TEST_TIMEOUT) public void testDeletePartitionedFile() throws Throwable {
  final Path path=new Path("/test/testDeletePartitionedFile");
  SwiftTestUtils.writeDataset(fs,path,data,data.length,1024,false);
  assertExists("Exists",path);
  Path part_0001=new Path(path,SwiftUtils.partitionFilenameFromNumber(1));
  Path part_0002=new Path(path,SwiftUtils.partitionFilenameFromNumber(2));
  String ls=SwiftTestUtils.ls(fs,path);
  assertExists("Partition 0001 Exists in " + ls,part_0001);
  assertExists("Partition 0002 Exists in " + ls,part_0001);
  fs.delete(path,false);
  assertPathDoesNotExist("deleted file still there",path);
  ls=SwiftTestUtils.ls(fs,path);
  assertPathDoesNotExist("partition 0001 file still under " + ls,part_0001);
  assertPathDoesNotExist("partition 0002 file still under " + ls,part_0002);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.swift.TestSwiftFileSystemRename </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testRenameFileAndVerifyContents() throws IOException {
  assumeRenameSupported();
  final Path filePath=new Path("/test/home/user/documents/file.txt");
  final Path newFilePath=new Path("/test/home/user/files/file.txt");
  mkdirs(newFilePath.getParent());
  int len=1024;
  byte[] dataset=dataset(len,'A',26);
  writeDataset(fs,filePath,dataset,len,len,false);
  rename(filePath,newFilePath,true,false,true);
  byte[] dest=readDataset(fs,newFilePath,len);
  compareByteArrays(dataset,dest,len);
  String reread=readBytesToString(fs,newFilePath,20);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Assert that renaming a parent directory to be a child
 * of itself is forbidden
 * @throws Exception on failures
 */
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testRenameChildDirForbidden() throws Exception {
  assumeRenameSupported();
  Path parentdir=path("/test/parentdir");
  fs.mkdirs(parentdir);
  Path childFile=new Path(parentdir,"childfile");
  createFile(childFile);
  Path childdir=new Path(parentdir,"childdir");
  rename(parentdir,childdir,false,true,false);
  fs.mkdirs(childdir);
  Path childchilddir=new Path(childdir,"childdir");
  rename(parentdir,childchilddir,false,true,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testRenameTheSameDirectory() throws Exception {
  assumeRenameSupported();
  final Path old=new Path("/test/usr/data");
  fs.mkdirs(old);
  rename(old,old,false,true,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Assert that root directory renames are not allowed
 * @throws Exception on failures
 */
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testRenameRootDirForbidden() throws Exception {
  assumeRenameSupported();
  rename(path("/"),path("/test/newRootDir"),false,true,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * trying to rename a directory onto itself should fail,
 * preserving everything underneath.
 */
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testRenameDirToSelf() throws Throwable {
  assumeRenameSupported();
  Path parentdir=path("/test/parentdir");
  fs.mkdirs(parentdir);
  Path child=new Path(parentdir,"child");
  createFile(child);
  rename(parentdir,parentdir,false,true,true);
  assertIsFile(child);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * trying to rename a file onto itself should succeed (it's a no-op)
 */
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testRenameFileToSelf() throws Throwable {
  if (!renameSupported())   return;
  Path filepath=path("test/file");
  createFile(filepath);
  rename(filepath,filepath,true,true,true);
  assertIsFile(filepath);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testRenamedConsistence() throws IOException {
  assumeRenameSupported();
  describe("verify that overwriting a file with new data doesn't impact" + " the existing content");
  final Path filePath=new Path("/test/home/user/documents/file.txt");
  final Path newFilePath=new Path("/test/home/user/files/file.txt");
  mkdirs(newFilePath.getParent());
  int len=1024;
  byte[] dataset=dataset(len,'A',26);
  byte[] dataset2=dataset(len,'a',26);
  writeDataset(fs,filePath,dataset,len,len,false);
  rename(filePath,newFilePath,true,false,true);
  SwiftTestUtils.writeAndRead(fs,filePath,dataset2,len,len,false,true);
  byte[] dest=readDataset(fs,newFilePath,len);
  compareByteArrays(dataset,dest,len);
  String reread=readBytesToString(fs,newFilePath,20);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testRenameMissingFile() throws Throwable {
  assumeRenameSupported();
  Path path=path("/test/RenameMissingFile");
  Path path2=path("/test/RenameMissingFileDest");
  mkdirs(path("test"));
  rename(path,path2,false,false,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testMoveDirUnderParent() throws Throwable {
  if (!renameSupported()) {
    return;
  }
  Path testdir=path("test/dir");
  fs.mkdirs(testdir);
  Path parent=testdir.getParent();
  try {
    fs.rename(testdir,parent);
  }
 catch (  SwiftOperationFailedException e) {
  }
  assertExists("Source directory has been deleted ",testdir);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testMoveFileUnderParent() throws Throwable {
  if (!renameSupported())   return;
  Path filepath=path("test/file");
  createFile(filepath);
  rename(filepath,filepath,true,true,true);
  assertIsFile(filepath);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testRenameDirectoryIntoExistingDirectory() throws Exception {
  assumeRenameSupported();
  Path src=path("/test/olddir/dir");
  fs.mkdirs(src);
  createFile(path("/test/olddir/dir/file1"));
  createFile(path("/test/olddir/dir/subdir/file2"));
  Path dst=path("/test/new/newdir");
  fs.mkdirs(dst);
  rename(src,dst,true,false,true);
  assertExists("new dir",path("/test/new/newdir/dir"));
  assertExists("Renamed nested file1",path("/test/new/newdir/dir/file1"));
  assertPathDoesNotExist("Nested file1 should have been deleted",path("/test/olddir/dir/file1"));
  assertExists("Renamed nested subdir",path("/test/new/newdir/dir/subdir/"));
  assertExists("file under subdir",path("/test/new/newdir/dir/subdir/file2"));
  assertPathDoesNotExist("Nested /test/hadoop/dir/subdir/file2 still exists",path("/test/olddir/dir/subdir/file2"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.swift.TestSwiftObjectPath </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testChildOfProbe() throws Throwable {
  SwiftObjectPath parent=new SwiftObjectPath("container","/parent");
  SwiftObjectPath parent2=new SwiftObjectPath("container","/parent2");
  SwiftObjectPath child=new SwiftObjectPath("container","/parent/child");
  SwiftObjectPath sibling=new SwiftObjectPath("container","/parent/sibling");
  SwiftObjectPath grandchild=new SwiftObjectPath("container","/parent/child/grandchild");
  assertParentOf(parent,child);
  assertParentOf(parent,grandchild);
  assertParentOf(child,grandchild);
  assertParentOf(parent,parent);
  assertNotParentOf(child,parent);
  assertParentOf(child,child);
  assertNotParentOf(parent,parent2);
  assertNotParentOf(grandchild,parent);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testConvertToPath() throws Throwable {
  String initialpath="/dir/file1";
  Path ipath=new Path(initialpath);
  SwiftObjectPath objectPath=SwiftObjectPath.fromPath(new URI(initialpath),ipath);
  URI endpoint=new URI(ENDPOINT);
  URI uri=SwiftRestClient.pathToURI(objectPath,endpoint);
  LOG.info("Inital Hadoop Path =" + initialpath);
  LOG.info("Merged URI=" + uri);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testChildOfRoot() throws Throwable {
  SwiftObjectPath root=new SwiftObjectPath("container","/");
  SwiftObjectPath child=new SwiftObjectPath("container","child");
  SwiftObjectPath grandchild=new SwiftObjectPath("container","/child/grandchild");
  assertParentOf(root,child);
  assertParentOf(root,grandchild);
  assertParentOf(child,grandchild);
  assertParentOf(root,root);
  assertNotParentOf(child,root);
  assertParentOf(child,child);
  assertNotParentOf(grandchild,root);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.swift.hdfs2.TestV2LsOperations </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testListFilesRecursive() throws Throwable {
  createTestSubdirs();
  Path dir=path("/test/recursive");
  Path child=new Path(dir,"hadoop/a/a.txt");
  SwiftTestUtils.writeTextFile(fs,child,"text",false);
  assertListFilesFinds(fs,dir,child,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testListFilesRootDir() throws Throwable {
  Path dir=path("/");
  Path child=new Path(dir,"test");
  fs.delete(child,true);
  SwiftTestUtils.writeTextFile(fs,child,"text",false);
  assertListFilesFinds(fs,dir,child,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testListFilesSubDir() throws Throwable {
  createTestSubdirs();
  Path dir=path("/test/subdir");
  Path child=new Path(dir,"text.txt");
  SwiftTestUtils.writeTextFile(fs,child,"text",false);
  assertListFilesFinds(fs,dir,child,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.swift.http.TestRestClientBindings </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=SwiftConfigurationException.class) public void testMissingServiceURL() throws Exception {
  RestClientBindings.bind(new URI("swift:///"),conf);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testDot() throws Throwable {
  expectExtractContainerFail(".");
  expectExtractServiceFail(".");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=SwiftConfigurationException.class) public void testDottedServiceURL() throws Exception {
  RestClientBindings.bind(new URI("swift://hadoop.apache.org/"),conf);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testTrailingDot() throws Throwable {
  expectExtractServiceFail("simple.");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testEmptyHostname() throws Throwable {
  expectExtractContainerFail("");
  expectExtractServiceFail("");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testLeadingDot() throws Throwable {
  expectExtractServiceFail(".leading");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testSimple() throws Throwable {
  expectExtractContainerFail("simple");
  expectExtractServiceFail("simple");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.swift.http.TestSwiftRestClient </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testCreate() throws Throwable {
  assumeEnabled();
  SwiftRestClient client=createClient();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=SWIFT_TEST_TIMEOUT) public void testAuthenticate() throws Throwable {
  assumeEnabled();
  SwiftRestClient client=createClient();
  client.authenticate();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.viewfs.TestChRootedFileSystem </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that ChRootedFileSystem delegates calls for every ACL method to the
 * underlying FileSystem with all Path arguments translated as required to
 * enforce chroot.
 */
@Test public void testAclMethodsPathTranslation() throws IOException {
  Configuration conf=new Configuration();
  conf.setClass("fs.mockfs.impl",MockFileSystem.class,FileSystem.class);
  URI chrootUri=URI.create("mockfs://foo/a/b");
  ChRootedFileSystem chrootFs=new ChRootedFileSystem(chrootUri,conf);
  FileSystem mockFs=((FilterFileSystem)chrootFs.getRawFileSystem()).getRawFileSystem();
  Path chrootPath=new Path("/c");
  Path rawPath=new Path("/a/b/c");
  List<AclEntry> entries=Collections.emptyList();
  chrootFs.modifyAclEntries(chrootPath,entries);
  verify(mockFs).modifyAclEntries(rawPath,entries);
  chrootFs.removeAclEntries(chrootPath,entries);
  verify(mockFs).removeAclEntries(rawPath,entries);
  chrootFs.removeDefaultAcl(chrootPath);
  verify(mockFs).removeDefaultAcl(rawPath);
  chrootFs.removeAcl(chrootPath);
  verify(mockFs).removeAcl(rawPath);
  chrootFs.setAcl(chrootPath,entries);
  verify(mockFs).setAcl(rawPath,entries);
  chrootFs.getAclStatus(chrootPath);
  verify(mockFs).getAclStatus(rawPath);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testResolvePathNonExisting() throws IOException {
  fSys.resolvePath(new Path("/nonExisting"));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeleteOnExitPathHandling() throws IOException {
  Configuration conf=new Configuration();
  conf.setClass("fs.mockfs.impl",MockFileSystem.class,FileSystem.class);
  URI chrootUri=URI.create("mockfs://foo/a/b");
  ChRootedFileSystem chrootFs=new ChRootedFileSystem(chrootUri,conf);
  FileSystem mockFs=((FilterFileSystem)chrootFs.getRawFileSystem()).getRawFileSystem();
  Path chrootPath=new Path("/c");
  Path rawPath=new Path("/a/b/c");
  chrootFs.delete(chrootPath,false);
  verify(mockFs).delete(eq(rawPath),eq(false));
  reset(mockFs);
  FileStatus stat=mock(FileStatus.class);
  when(mockFs.getFileStatus(eq(rawPath))).thenReturn(stat);
  chrootFs.deleteOnExit(chrootPath);
  chrootFs.close();
  verify(mockFs).delete(eq(rawPath),eq(true));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * We would have liked renames across file system to fail but 
 * Unfortunately there is not way to distinguish the two file systems 
 * @throws IOException
 */
@Test public void testRenameAcrossFs() throws IOException {
  fSys.mkdirs(new Path("/newDir/dirFoo"));
  fSys.rename(new Path("/newDir/dirFoo"),new Path("file:///tmp/dirFooBar"));
  FileSystemTestHelper.isDir(fSys,new Path("/tmp/dirFooBar"));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testURIEmptyPath() throws IOException {
  Configuration conf=new Configuration();
  conf.setClass("fs.mockfs.impl",MockFileSystem.class,FileSystem.class);
  URI chrootUri=URI.create("mockfs://foo");
  new ChRootedFileSystem(chrootUri,conf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.viewfs.TestChRootedFs </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * We would have liked renames across file system to fail but 
 * Unfortunately there is not way to distinguish the two file systems 
 * @throws IOException
 */
@Test public void testRenameAcrossFs() throws IOException {
  fc.mkdir(new Path("/newDir/dirFoo"),FileContext.DEFAULT_PERM,true);
  fc.rename(new Path("/newDir/dirFoo"),new Path("file:///dirFooBar"));
  FileContextTestHelper.isDir(fc,new Path("/dirFooBar"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testResolvePathNonExisting() throws IOException {
  fc.getDefaultFileSystem().resolvePath(new Path("/nonExisting"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.viewfs.TestViewFileSystemDelegation </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that ViewFileSystem dispatches calls for every ACL method through the
 * mount table to the correct underlying FileSystem with all Path arguments
 * translated as required.
 */
@Test public void testAclMethods() throws Exception {
  Configuration conf=ViewFileSystemTestSetup.createConfig();
  FileSystem mockFs1=setupMockFileSystem(conf,new URI("mockfs1:/"));
  FileSystem mockFs2=setupMockFileSystem(conf,new URI("mockfs2:/"));
  FileSystem viewFs=FileSystem.get(FsConstants.VIEWFS_URI,conf);
  Path viewFsPath1=new Path("/mounts/mockfs1/a/b/c");
  Path mockFsPath1=new Path("/a/b/c");
  Path viewFsPath2=new Path("/mounts/mockfs2/d/e/f");
  Path mockFsPath2=new Path("/d/e/f");
  List<AclEntry> entries=Collections.emptyList();
  viewFs.modifyAclEntries(viewFsPath1,entries);
  verify(mockFs1).modifyAclEntries(mockFsPath1,entries);
  viewFs.modifyAclEntries(viewFsPath2,entries);
  verify(mockFs2).modifyAclEntries(mockFsPath2,entries);
  viewFs.removeAclEntries(viewFsPath1,entries);
  verify(mockFs1).removeAclEntries(mockFsPath1,entries);
  viewFs.removeAclEntries(viewFsPath2,entries);
  verify(mockFs2).removeAclEntries(mockFsPath2,entries);
  viewFs.removeDefaultAcl(viewFsPath1);
  verify(mockFs1).removeDefaultAcl(mockFsPath1);
  viewFs.removeDefaultAcl(viewFsPath2);
  verify(mockFs2).removeDefaultAcl(mockFsPath2);
  viewFs.removeAcl(viewFsPath1);
  verify(mockFs1).removeAcl(mockFsPath1);
  viewFs.removeAcl(viewFsPath2);
  verify(mockFs2).removeAcl(mockFsPath2);
  viewFs.setAcl(viewFsPath1,entries);
  verify(mockFs1).setAcl(mockFsPath1,entries);
  viewFs.setAcl(viewFsPath2,entries);
  verify(mockFs2).setAcl(mockFsPath2,entries);
  viewFs.getAclStatus(viewFsPath1);
  verify(mockFs1).getAclStatus(mockFsPath1);
  viewFs.getAclStatus(viewFsPath2);
  verify(mockFs2).getAclStatus(mockFsPath2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testVerifyChecksum() throws Exception {
  checkVerifyChecksum(false);
  checkVerifyChecksum(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.viewfs.TestViewFsConfig </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileAlreadyExistsException.class) public void testInvalidConfig() throws IOException, URISyntaxException {
  Configuration conf=new Configuration();
  ConfigUtil.addLink(conf,"/internalDir/linkToDir2",new Path("file:///dir2").toUri());
  ConfigUtil.addLink(conf,"/internalDir/linkToDir2/linkToDir3",new Path("file:///dir3").toUri());
class Foo {
  }
  ;
  new InodeTree<Foo>(conf,null){
    @Override protected Foo getTargetFileSystem(    final URI uri) throws URISyntaxException, UnsupportedFileSystemException {
      return null;
    }
    @Override protected Foo getTargetFileSystem(    org.apache.hadoop.fs.viewfs.InodeTree.INodeDir<Foo> dir) throws URISyntaxException {
      return null;
    }
    @Override protected Foo getTargetFileSystem(    URI[] mergeFsURIList) throws URISyntaxException, UnsupportedFileSystemException {
      return null;
    }
  }
;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.viewfs.TestViewFsTrash </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTrash() throws IOException {
  TestTrash.trashShell(conf,fileSystemTestHelper.getTestRootPath(fsView),fsTarget,new Path(fsTarget.getHomeDirectory(),".Trash/Current"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.viewfs.TestViewFsURIs </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testURIEmptyPath() throws Exception {
  Configuration conf=new Configuration();
  ConfigUtil.addLink(conf,"/user",new URI("file://foo"));
  FileContext.getFileContext(FsConstants.VIEWFS_URI,conf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.viewfs.TestViewfsFileStatus </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetFileChecksum() throws IOException {
  FileSystem mockFS=Mockito.mock(FileSystem.class);
  InodeTree.ResolveResult<FileSystem> res=new InodeTree.ResolveResult<FileSystem>(null,mockFS,null,new Path("someFile"));
  @SuppressWarnings("unchecked") InodeTree<FileSystem> fsState=Mockito.mock(InodeTree.class);
  Mockito.when(fsState.resolve("/tmp/someFile",true)).thenReturn(res);
  ViewFileSystem vfs=Mockito.mock(ViewFileSystem.class);
  vfs.fsState=fsState;
  Mockito.when(vfs.getFileChecksum(new Path("/tmp/someFile"))).thenCallRealMethod();
  vfs.getFileChecksum(new Path("/tmp/someFile"));
  Mockito.verify(mockFS).getFileChecksum(new Path("someFile"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.viewfs.ViewFileSystemBaseTest </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test modify operations (create, mkdir, rename, etc) 
 * on internal dirs of mount table
 * These operations should fail since the mount table is read-only or
 * because the internal dir that it is trying to create already
 * exits.
 */
@Test(expected=AccessControlException.class) public void testInternalMkdirSlash() throws IOException {
  fsView.mkdirs(fileSystemTestHelper.getTestRootPath(fsView,"/"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalCreate2() throws IOException {
  fileSystemTestHelper.createFile(fsView,"/internalDir/foo");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalCreateMissingDir() throws IOException {
  fileSystemTestHelper.createFile(fsView,"/missingDir/foo");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalRemoveAcl() throws IOException {
  fsView.removeAcl(new Path("/internalDir"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalMkdirNew() throws IOException {
  fsView.mkdirs(fileSystemTestHelper.getTestRootPath(fsView,"/dirNew"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalCreateMissingDir2() throws IOException {
  fileSystemTestHelper.createFile(fsView,"/missingDir/miss2/foo");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalDeleteExisting2() throws IOException {
  fsView.getFileStatus(new Path("/internalDir/linkToDir2")).isDirectory();
  fsView.delete(new Path("/internalDir/linkToDir2"),false);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Verify the behavior of ACL operations on paths above the root of
 * any mount table entry.
 */
@Test(expected=AccessControlException.class) public void testInternalModifyAclEntries() throws IOException {
  fsView.modifyAclEntries(new Path("/internalDir"),new ArrayList<AclEntry>());
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalCreate1() throws IOException {
  fileSystemTestHelper.createFile(fsView,"/foo");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalCreateMissingDir3() throws IOException {
  fileSystemTestHelper.createFile(fsView,"/internalDir/miss2/foo");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalMkdirNew2() throws IOException {
  fsView.mkdirs(fileSystemTestHelper.getTestRootPath(fsView,"/internalDir/dirNew"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testResolvePathDanglingLink() throws IOException {
  fsView.resolvePath(new Path("/danglingLink"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testInternalDeleteNonExisting2() throws IOException {
  fsView.delete(new Path("/internalDir/NonExisting"),false);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalRemoveAclEntries() throws IOException {
  fsView.removeAclEntries(new Path("/internalDir"),new ArrayList<AclEntry>());
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalRename3() throws IOException {
  fsView.rename(new Path("/user"),new Path("/internalDir/linkToDir2"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalSetXAttr() throws IOException {
  fsView.setXAttr(new Path("/internalDir"),"xattrName",null);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testInternalDeleteNonExisting() throws IOException {
  fsView.delete(new Path("/NonExisting"),false);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalDeleteExisting() throws IOException {
  fsView.delete(new Path("/internalDir"),false);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalRemoveXAttr() throws IOException {
  fsView.removeXAttr(new Path("/internalDir"),"xattrName");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NotInMountpointException.class) public void testInternalListXAttr() throws IOException {
  fsView.listXAttrs(new Path("/internalDir"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalRename2() throws IOException {
  fsView.getFileStatus(new Path("/internalDir/linkToDir2")).isDirectory();
  fsView.rename(new Path("/internalDir/linkToDir2"),new Path("/internalDir/dir1"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NotInMountpointException.class) public void testInternalGetXAttr() throws IOException {
  fsView.getXAttr(new Path("/internalDir"),"xattrName");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalSetOwner() throws IOException {
  fsView.setOwner(new Path("/internalDir"),"foo","bar");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testgetFSonNonExistingInternalDir() throws IOException {
  fsView.getFileStatus(new Path("/internalDir/nonExisting"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalRename1() throws IOException {
  fsView.rename(new Path("/internalDir"),new Path("/newDir"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IOException.class) public void testRenameAcrossMounts2() throws IOException {
  fileSystemTestHelper.createFile(fsView,"/user/foo");
  fsView.rename(new Path("/user/foo"),new Path("/data/fooBar"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testResolvePathMissingThroughMountPoints() throws IOException {
  fsView.resolvePath(new Path("/user/nonExisting"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NotInMountpointException.class) public void testInternalGetXAttrs() throws IOException {
  fsView.getXAttrs(new Path("/internalDir"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalSetAcl() throws IOException {
  fsView.setAcl(new Path("/internalDir"),new ArrayList<AclEntry>());
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testResolvePathMissingThroughMountPoints2() throws IOException {
  fsView.mkdirs(fileSystemTestHelper.getTestRootPath(fsView,"/user/dirX"));
  fsView.resolvePath(new Path("/user/dirX/nonExisting"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NotInMountpointException.class) public void testInternalGetXAttrsWithNames() throws IOException {
  fsView.getXAttrs(new Path("/internalDir"),new ArrayList<String>());
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalRenameFromSlash() throws IOException {
  fsView.rename(new Path("/"),new Path("/bar"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testgetFSonDanglingLink() throws IOException {
  fsView.getFileStatus(new Path("/danglingLink"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalRemoveDefaultAcl() throws IOException {
  fsView.removeDefaultAcl(new Path("/internalDir"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalRenameToSlash() throws IOException {
  fsView.rename(new Path("/internalDir/linkToDir2/foo"),new Path("/"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IOException.class) public void testRenameAcrossMounts1() throws IOException {
  fileSystemTestHelper.createFile(fsView,"/user/foo");
  fsView.rename(new Path("/user/foo"),new Path("/user2/fooBarBar"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.fs.viewfs.ViewFsBaseTest </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalMkdirNew() throws IOException {
  fcView.mkdir(fileContextTestHelper.getTestRootPath(fcView,"/dirNew"),FileContext.DEFAULT_PERM,false);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalCreate2() throws IOException {
  fileContextTestHelper.createFileNonRecursive(fcView,"/internalDir/foo");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalCreateMissingDir() throws IOException {
  fileContextTestHelper.createFile(fcView,"/missingDir/foo");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalRenameFromSlash() throws IOException {
  fcView.rename(new Path("/"),new Path("/bar"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testInternalDeleteNonExisting() throws IOException {
  fcView.delete(new Path("/NonExisting"),false);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testResolvePathDanglingLink() throws IOException {
  fcView.resolvePath(new Path("/danglingLink"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IOException.class) public void testgetLinkTargetOnNonLink() throws IOException {
  fcView.getLinkTarget(new Path("/internalDir/internalDir2"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NotInMountpointException.class) public void testInternalGetXAttrs() throws IOException {
  fcView.getXAttrs(new Path("/internalDir"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalSetOwner() throws IOException {
  fcView.setOwner(new Path("/internalDir"),"foo","bar");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalSetXAttr() throws IOException {
  fcView.setXAttr(new Path("/internalDir"),"xattrName",null);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testResolvePathMissingThroughMountPoints() throws IOException {
  fcView.resolvePath(new Path("/user/nonExisting"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IOException.class) public void testRenameAcrossMounts2() throws IOException {
  fileContextTestHelper.createFile(fcView,"/user/foo");
  fcView.rename(new Path("/user/foo"),new Path("/data/fooBar"));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testgetFileLinkStatus() throws IOException {
  checkFileLinkStatus(fcView,"/user",fileType.isSymlink);
  checkFileLinkStatus(fcView,"/data",fileType.isSymlink);
  checkFileLinkStatus(fcView,"/internalDir/linkToDir2",fileType.isSymlink);
  checkFileLinkStatus(fcView,"/internalDir/internalDir2/linkToDir3",fileType.isSymlink);
  checkFileLinkStatus(fcView,"/linkToAFile",fileType.isSymlink);
  checkFileLinkStatus(fcView,"/internalDir",fileType.isDir);
  checkFileLinkStatus(fcView,"/internalDir/internalDir2",fileType.isDir);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalDeleteExisting() throws IOException {
  fcView.delete(new Path("/internalDir"),false);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testgetFSonNonExistingInternalDir() throws IOException {
  fcView.getFileStatus(new Path("/internalDir/nonExisting"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testResolvePathMissingThroughMountPoints2() throws IOException {
  fcView.mkdir(fileContextTestHelper.getTestRootPath(fcView,"/user/dirX"),FileContext.DEFAULT_PERM,false);
  fcView.resolvePath(new Path("/user/dirX/nonExisting"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IOException.class) public void testRenameAcrossMounts1() throws IOException {
  fileContextTestHelper.createFile(fcView,"/user/foo");
  fcView.rename(new Path("/user/foo"),new Path("/user2/fooBarBar"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalCreate1() throws IOException {
  fileContextTestHelper.createFileNonRecursive(fcView,"/foo");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalRenameToSlash() throws IOException {
  fcView.rename(new Path("/internalDir/linkToDir2/foo"),new Path("/"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalMkdirExisting2() throws IOException {
  fcView.mkdir(fileContextTestHelper.getTestRootPath(fcView,"/internalDir/linkToDir2"),FileContext.DEFAULT_PERM,false);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testgetFSonDanglingLink() throws IOException {
  fcView.getFileStatus(new Path("/danglingLink"));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetFileChecksum() throws AccessControlException, UnresolvedLinkException, IOException {
  AbstractFileSystem mockAFS=Mockito.mock(AbstractFileSystem.class);
  InodeTree.ResolveResult<AbstractFileSystem> res=new InodeTree.ResolveResult<AbstractFileSystem>(null,mockAFS,null,new Path("someFile"));
  @SuppressWarnings("unchecked") InodeTree<AbstractFileSystem> fsState=Mockito.mock(InodeTree.class);
  Mockito.when(fsState.resolve(Mockito.anyString(),Mockito.anyBoolean())).thenReturn(res);
  ViewFs vfs=Mockito.mock(ViewFs.class);
  vfs.fsState=fsState;
  Mockito.when(vfs.getFileChecksum(new Path("/tmp/someFile"))).thenCallRealMethod();
  vfs.getFileChecksum(new Path("/tmp/someFile"));
  Mockito.verify(mockAFS).getFileChecksum(new Path("someFile"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalRemoveAcl() throws IOException {
  fcView.removeAcl(new Path("/internalDir"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalRemoveAclEntries() throws IOException {
  fcView.removeAclEntries(new Path("/internalDir"),new ArrayList<AclEntry>());
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testInternalDeleteNonExisting2() throws IOException {
  fcView.delete(new Path("/internalDir/NonExisting"),false);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalCreateMissingDir3() throws IOException {
  fileContextTestHelper.createFile(fcView,"/internalDir/miss2/foo");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalRename3() throws IOException {
  fcView.rename(new Path("/user"),new Path("/internalDir/linkToDir2"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testgetFileLinkStatusonNonExistingInternalDir() throws IOException {
  fcView.getFileLinkStatus(new Path("/internalDir/nonExisting"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalSetAcl() throws IOException {
  fcView.setAcl(new Path("/internalDir"),new ArrayList<AclEntry>());
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalCreateMissingDir2() throws IOException {
  fileContextTestHelper.createFile(fcView,"/missingDir/miss2/foo");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalRename1() throws IOException {
  fcView.rename(new Path("/internalDir"),new Path("/newDir"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NotInMountpointException.class) public void testInternalGetXAttr() throws IOException {
  fcView.getXAttr(new Path("/internalDir"),"xattrName");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalRemoveDefaultAcl() throws IOException {
  fcView.removeDefaultAcl(new Path("/internalDir"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalMkdirNew2() throws IOException {
  fcView.mkdir(fileContextTestHelper.getTestRootPath(fcView,"/internalDir/dirNew"),FileContext.DEFAULT_PERM,false);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalRemoveXAttr() throws IOException {
  fcView.removeXAttr(new Path("/internalDir"),"xattrName");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test modify operations (create, mkdir, rename, etc) 
 * on internal dirs of mount table
 * These operations should fail since the mount table is read-only or
 * because the internal dir that it is trying to create already
 * exits.
 */
@Test(expected=AccessControlException.class) public void testInternalMkdirSlash() throws IOException {
  fcView.mkdir(fileContextTestHelper.getTestRootPath(fcView,"/"),FileContext.DEFAULT_PERM,false);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NotInMountpointException.class) public void testInternalListXAttr() throws IOException {
  fcView.listXAttrs(new Path("/internalDir"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccessControlException.class) public void testInternalMkdirExisting1() throws IOException {
  fcView.mkdir(fileContextTestHelper.getTestRootPath(fcView,"/internalDir"),FileContext.DEFAULT_PERM,false);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=NotInMountpointException.class) public void testInternalGetXAttrsWithNames() throws IOException {
  fcView.getXAttrs(new Path("/internalDir"),new ArrayList<String>());
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Verify the behavior of ACL operations on paths above the root of
 * any mount table entry.
 */
@Test(expected=AccessControlException.class) public void testInternalModifyAclEntries() throws IOException {
  fcView.modifyAclEntries(new Path("/internalDir"),new ArrayList<AclEntry>());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ha.TestActiveStandbyElector </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * joinElection(..) should happen only after SERVICE_HEALTHY.
 */
@Test public void testBecomeActiveBeforeServiceHealthy() throws Exception {
  mockNoPriorActive();
  WatchedEvent mockEvent=Mockito.mock(WatchedEvent.class);
  Mockito.when(mockEvent.getType()).thenReturn(Event.EventType.None);
  Mockito.when(mockEvent.getState()).thenReturn(Event.KeeperState.Expired);
  elector.processWatchEvent(mockZK,mockEvent);
  Mockito.verify(mockZK,Mockito.times(0)).create(ZK_LOCK_NAME,null,Ids.OPEN_ACL_UNSAFE,CreateMode.EPHEMERAL,elector,mockZK);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * verify that if create znode results in nodeexists and that znode is deleted
 * before exists() watch is set then the return of the exists() method results
 * in attempt to re-create the znode and become active
 */
@Test public void testCreateNodeResultRetryNoNode(){
  elector.joinElection(data);
  elector.processResult(Code.CONNECTIONLOSS.intValue(),ZK_LOCK_NAME,mockZK,ZK_LOCK_NAME);
  elector.processResult(Code.CONNECTIONLOSS.intValue(),ZK_LOCK_NAME,mockZK,ZK_LOCK_NAME);
  elector.processResult(Code.NODEEXISTS.intValue(),ZK_LOCK_NAME,mockZK,ZK_LOCK_NAME);
  verifyExistCall(1);
  elector.processResult(Code.NONODE.intValue(),ZK_LOCK_NAME,mockZK,(Stat)null);
  Mockito.verify(mockApp,Mockito.times(1)).enterNeutralMode();
  Mockito.verify(mockZK,Mockito.times(4)).create(ZK_LOCK_NAME,data,Ids.OPEN_ACL_UNSAFE,CreateMode.EPHEMERAL,elector,mockZK);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * verify that joinElection checks for null data
 */
@Test(expected=HadoopIllegalArgumentException.class) public void testJoinElectionException(){
  elector.joinElection(null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * verify that more than 3 network error retries result fatalError
 */
@Test public void testStatNodeRetry(){
  elector.joinElection(data);
  elector.processResult(Code.CONNECTIONLOSS.intValue(),ZK_LOCK_NAME,mockZK,(Stat)null);
  elector.processResult(Code.CONNECTIONLOSS.intValue(),ZK_LOCK_NAME,mockZK,(Stat)null);
  elector.processResult(Code.CONNECTIONLOSS.intValue(),ZK_LOCK_NAME,mockZK,(Stat)null);
  elector.processResult(Code.CONNECTIONLOSS.intValue(),ZK_LOCK_NAME,mockZK,(Stat)null);
  Mockito.verify(mockApp,Mockito.times(1)).notifyFatalError("Received stat error from Zookeeper. code:CONNECTIONLOSS. " + "Not retrying further znode monitoring connection errors.");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * verify becomeStandby is not called if already in standby
 */
@Test public void testSuccessiveStandbyCalls(){
  elector.joinElection(data);
  elector.processResult(Code.NODEEXISTS.intValue(),ZK_LOCK_NAME,mockZK,ZK_LOCK_NAME);
  Mockito.verify(mockApp,Mockito.times(1)).becomeStandby();
  verifyExistCall(1);
  WatchedEvent mockEvent=Mockito.mock(WatchedEvent.class);
  Mockito.when(mockEvent.getPath()).thenReturn(ZK_LOCK_NAME);
  Mockito.when(mockEvent.getType()).thenReturn(Event.EventType.NodeDeleted);
  elector.processWatchEvent(mockZK,mockEvent);
  Mockito.verify(mockApp,Mockito.times(0)).enterNeutralMode();
  Mockito.verify(mockZK,Mockito.times(2)).create(ZK_LOCK_NAME,data,Ids.OPEN_ACL_UNSAFE,CreateMode.EPHEMERAL,elector,mockZK);
  elector.processResult(Code.NODEEXISTS.intValue(),ZK_LOCK_NAME,mockZK,ZK_LOCK_NAME);
  Mockito.verify(mockApp,Mockito.times(1)).becomeStandby();
  verifyExistCall(2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * verify that successful znode create result becomes active and monitoring is
 * started
 */
@Test public void testCreateNodeResultBecomeActive() throws Exception {
  mockNoPriorActive();
  elector.joinElection(data);
  elector.processResult(Code.OK.intValue(),ZK_LOCK_NAME,mockZK,ZK_LOCK_NAME);
  Mockito.verify(mockApp,Mockito.times(1)).becomeActive();
  verifyExistCall(1);
  Stat stat=new Stat();
  stat.setEphemeralOwner(1L);
  Mockito.when(mockZK.getSessionId()).thenReturn(1L);
  elector.processResult(Code.OK.intValue(),ZK_LOCK_NAME,mockZK,stat);
  Mockito.verify(mockApp,Mockito.times(0)).enterNeutralMode();
  Mockito.verify(mockApp,Mockito.times(0)).becomeStandby();
  Mockito.verify(mockApp,Mockito.times(1)).becomeActive();
  Mockito.verify(mockZK,Mockito.times(1)).create(ZK_LOCK_NAME,data,Ids.OPEN_ACL_UNSAFE,CreateMode.EPHEMERAL,elector,mockZK);
  verifyExistCall(1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that ensureBaseNode() recursively creates the specified dir
 */
@Test public void testEnsureBaseNode() throws Exception {
  elector.ensureParentZNode();
  StringBuilder prefix=new StringBuilder();
  for (  String part : ZK_PARENT_NAME.split("/")) {
    if (part.isEmpty())     continue;
    prefix.append("/").append(part);
    if (!"/".equals(prefix.toString())) {
      Mockito.verify(mockZK).create(Mockito.eq(prefix.toString()),Mockito.<byte[]>any(),Mockito.eq(Ids.OPEN_ACL_UNSAFE),Mockito.eq(CreateMode.PERSISTENT));
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Verify that, if there is a record of a prior active node, the
 * elector asks the application to fence it before becoming active.
 */
@Test public void testFencesOldActive() throws Exception {
  byte[] fakeOldActiveData=new byte[0];
  mockPriorActive(fakeOldActiveData);
  elector.joinElection(data);
  elector.processResult(Code.OK.intValue(),ZK_LOCK_NAME,mockZK,ZK_LOCK_NAME);
  Mockito.verify(mockApp,Mockito.times(1)).fenceOldActive(fakeOldActiveData);
  Mockito.verify(mockZK,Mockito.times(1)).setData(Mockito.eq(ZK_BREADCRUMB_NAME),Mockito.eq(data),Mockito.eq(0));
  Mockito.verify(mockApp,Mockito.times(1)).becomeActive();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * verify that retry of network errors verifies active by session id and
 * becomes standby if they dont match. monitoring is started.
 */
@Test public void testCreateNodeResultRetryBecomeStandby(){
  elector.joinElection(data);
  elector.processResult(Code.CONNECTIONLOSS.intValue(),ZK_LOCK_NAME,mockZK,ZK_LOCK_NAME);
  elector.processResult(Code.NODEEXISTS.intValue(),ZK_LOCK_NAME,mockZK,ZK_LOCK_NAME);
  verifyExistCall(1);
  Stat stat=new Stat();
  stat.setEphemeralOwner(0);
  Mockito.when(mockZK.getSessionId()).thenReturn(1L);
  elector.processResult(Code.OK.intValue(),ZK_LOCK_NAME,mockZK,stat);
  Mockito.verify(mockApp,Mockito.times(1)).becomeStandby();
  verifyExistCall(1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * verify error in exists() callback results in fatal error
 */
@Test public void testStatNodeError(){
  elector.joinElection(data);
  elector.processResult(Code.RUNTIMEINCONSISTENCY.intValue(),ZK_LOCK_NAME,mockZK,(Stat)null);
  Mockito.verify(mockApp,Mockito.times(0)).enterNeutralMode();
  Mockito.verify(mockApp,Mockito.times(1)).notifyFatalError("Received stat error from Zookeeper. code:RUNTIMEINCONSISTENCY");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * verify that znode create error result in fatal error
 */
@Test public void testCreateNodeResultError(){
  elector.joinElection(data);
  elector.processResult(Code.APIERROR.intValue(),ZK_LOCK_NAME,mockZK,ZK_LOCK_NAME);
  Mockito.verify(mockApp,Mockito.times(1)).notifyFatalError("Received create error from Zookeeper. code:APIERROR " + "for path " + ZK_LOCK_NAME);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * verify that znode create for existing node and no retry becomes standby and
 * monitoring is started
 */
@Test public void testCreateNodeResultBecomeStandby(){
  elector.joinElection(data);
  elector.processResult(Code.NODEEXISTS.intValue(),ZK_LOCK_NAME,mockZK,ZK_LOCK_NAME);
  Mockito.verify(mockApp,Mockito.times(1)).becomeStandby();
  verifyExistCall(1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testQuitElectionRemovesBreadcrumbNode() throws Exception {
  mockNoPriorActive();
  elector.joinElection(data);
  elector.processResult(Code.OK.intValue(),ZK_LOCK_NAME,mockZK,ZK_LOCK_NAME);
  Mockito.verify(mockZK,Mockito.times(1)).create(Mockito.eq(ZK_BREADCRUMB_NAME),Mockito.eq(data),Mockito.eq(Ids.OPEN_ACL_UNSAFE),Mockito.eq(CreateMode.PERSISTENT));
  mockPriorActive(data);
  elector.quitElection(false);
  Mockito.verify(mockZK,Mockito.times(1)).delete(Mockito.eq(ZK_BREADCRUMB_NAME),Mockito.eq(0));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * verify that joinElection tries to create ephemeral lock znode
 */
@Test public void testJoinElection(){
  elector.joinElection(data);
  Mockito.verify(mockZK,Mockito.times(1)).create(ZK_LOCK_NAME,data,Ids.OPEN_ACL_UNSAFE,CreateMode.EPHEMERAL,elector,mockZK);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ha.TestActiveStandbyElectorRealZK </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=15000) public void testHandleSessionExpiration() throws Exception {
  ActiveStandbyElectorCallback cb=cbs[0];
  byte[] appData=appDatas[0];
  ActiveStandbyElector elector=electors[0];
  elector.ensureParentZNode();
  elector.joinElection(appData);
  ZooKeeperServer zks=getServer(serverFactory);
  ActiveStandbyElectorTestUtil.waitForActiveLockData(null,zks,PARENT_DIR,appData);
  Mockito.verify(cb,Mockito.timeout(1000)).becomeActive();
  checkFatalsAndReset();
  LOG.info("========================== Expiring session");
  zks.closeSession(elector.getZKSessionIdForTests());
  Mockito.verify(cb,Mockito.timeout(1000)).enterNeutralMode();
  ActiveStandbyElectorTestUtil.waitForActiveLockData(null,zks,PARENT_DIR,appData);
  Mockito.verify(cb,Mockito.timeout(1000)).becomeActive();
  checkFatalsAndReset();
  LOG.info("========================== Quitting election");
  elector.quitElection(false);
  ActiveStandbyElectorTestUtil.waitForActiveLockData(null,zks,PARENT_DIR,null);
  Thread.sleep(1000);
  Mockito.verify(cb,Mockito.never()).becomeActive();
  ActiveStandbyElectorTestUtil.waitForActiveLockData(null,zks,PARENT_DIR,null);
  checkFatalsAndReset();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=15000) public void testDontJoinElectionOnDisconnectAndReconnect() throws Exception {
  electors[0].ensureParentZNode();
  stopServer();
  ActiveStandbyElectorTestUtil.waitForElectorState(null,electors[0],State.NEUTRAL);
  startServer();
  waitForServerUp(hostPort,CONNECTION_TIMEOUT);
  Thread.sleep(2000);
  Mockito.verify(cbs[0],Mockito.never()).becomeActive();
  Mockito.verify(cbs[1],Mockito.never()).becomeActive();
  checkFatalsAndReset();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=15000) public void testHandleSessionExpirationOfStandby() throws Exception {
  electors[0].ensureParentZNode();
  electors[0].joinElection(appDatas[0]);
  ZooKeeperServer zks=getServer(serverFactory);
  ActiveStandbyElectorTestUtil.waitForActiveLockData(null,zks,PARENT_DIR,appDatas[0]);
  Mockito.verify(cbs[0],Mockito.timeout(1000)).becomeActive();
  checkFatalsAndReset();
  electors[1].joinElection(appDatas[1]);
  ActiveStandbyElectorTestUtil.waitForElectorState(null,electors[1],State.STANDBY);
  LOG.info("========================== Expiring standby's session");
  zks.closeSession(electors[1].getZKSessionIdForTests());
  Mockito.verify(cbs[1],Mockito.timeout(1000)).enterNeutralMode();
  ActiveStandbyElectorTestUtil.waitForElectorState(null,electors[1],State.STANDBY);
  checkFatalsAndReset();
  LOG.info("========================== Quitting election");
  electors[1].quitElection(false);
  electors[0].quitElection(false);
  Thread.sleep(1000);
  Mockito.verify(cbs[1],Mockito.never()).becomeActive();
  ActiveStandbyElectorTestUtil.waitForActiveLockData(null,zks,PARENT_DIR,null);
  checkFatalsAndReset();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ha.TestHealthMonitor </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that, if the callback throws an RTE, this will terminate the
 * health monitor and thus change its state to FAILED
 * @throws Exception
 */
@Test(timeout=15000) public void testCallbackThrowsRTE() throws Exception {
  hm.addCallback(new Callback(){
    @Override public void enteredState(    State newState){
      throw new RuntimeException("Injected RTE");
    }
  }
);
  LOG.info("Mocking bad health check, waiting for UNHEALTHY");
  svc.isHealthy=false;
  waitForState(hm,HealthMonitor.State.HEALTH_MONITOR_FAILED);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ha.TestShellCommandFencer </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Verify that information about the fencing target gets passed as
 * environment variables to the fencer.
 */
@Test public void testTargetAsEnvironment(){
  if (!Shell.WINDOWS) {
    fencer.tryFence(TEST_TARGET,"echo $target_host $target_port");
    Mockito.verify(ShellCommandFencer.LOG).info(Mockito.endsWith("echo $ta...rget_port: dummyhost 1234"));
  }
 else {
    fencer.tryFence(TEST_TARGET,"echo %target_host% %target_port%");
    Mockito.verify(ShellCommandFencer.LOG).info(Mockito.endsWith("echo %ta...get_port%: dummyhost 1234"));
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Verify that the Configuration gets passed as
 * environment variables to the fencer.
 */
@Test public void testConfAsEnvironment(){
  if (!Shell.WINDOWS) {
    fencer.tryFence(TEST_TARGET,"echo $in_fencing_tests");
    Mockito.verify(ShellCommandFencer.LOG).info(Mockito.endsWith("echo $in...ing_tests: yessir"));
  }
 else {
    fencer.tryFence(TEST_TARGET,"echo %in_fencing_tests%");
    Mockito.verify(ShellCommandFencer.LOG).info(Mockito.endsWith("echo %in...ng_tests%: yessir"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ha.TestSshFenceByTcpPort </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBadArgsParsing() throws BadFencingConfigurationException {
  assertBadArgs(":");
  assertBadArgs("bar.com:");
  assertBadArgs(":xx");
  assertBadArgs("bar.com:xx");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ha.TestZKFailoverController </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that the ZKFC successfully quits the election when it fails to
 * become active. This allows the old node to successfully fail back.
 */
@Test(timeout=15000) public void testBecomingActiveFails() throws Exception {
  try {
    cluster.start();
    DummyHAService svc1=cluster.getService(1);
    LOG.info("Making svc1 fail to become active");
    cluster.setFailToBecomeActive(1,true);
    LOG.info("Faking svc0 unhealthy, should NOT successfully " + "failover to svc1");
    cluster.setHealthy(0,false);
    cluster.waitForHealthState(0,State.SERVICE_UNHEALTHY);
    cluster.waitForActiveLockHolder(null);
    Mockito.verify(svc1.proxy,Mockito.timeout(2000).atLeastOnce()).transitionToActive(Mockito.<StateChangeRequestInfo>any());
    cluster.waitForHAState(0,HAServiceState.STANDBY);
    cluster.waitForHAState(1,HAServiceState.STANDBY);
    LOG.info("Faking svc0 healthy again, should go back to svc0");
    cluster.setHealthy(0,true);
    cluster.waitForHAState(0,HAServiceState.ACTIVE);
    cluster.waitForHAState(1,HAServiceState.STANDBY);
    cluster.waitForActiveLockHolder(0);
    LOG.info("Allowing svc1 to become active, expiring svc0");
    svc1.failToBecomeActive=false;
    cluster.expireAndVerifyFailover(0,1);
  }
  finally {
    cluster.stop();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test which exercises all of the inputs into ZKFC. This is particularly
 * useful for running under jcarder to check for lock order violations.
 */
@Test(timeout=30000) public void testOneOfEverything() throws Exception {
  try {
    cluster.start();
    LOG.info("====== Failing over by session expiration");
    cluster.expireAndVerifyFailover(0,1);
    cluster.expireAndVerifyFailover(1,0);
    LOG.info("====== Restarting server");
    stopServer();
    waitForServerDown(hostPort,CONNECTION_TIMEOUT);
    startServer();
    waitForServerUp(hostPort,CONNECTION_TIMEOUT);
    cluster.setHealthy(0,false);
    cluster.waitForHAState(0,HAServiceState.STANDBY);
    cluster.waitForHAState(1,HAServiceState.ACTIVE);
    cluster.setHealthy(1,true);
    cluster.setHealthy(0,false);
    cluster.waitForHAState(1,HAServiceState.ACTIVE);
    cluster.waitForHAState(0,HAServiceState.STANDBY);
    cluster.setHealthy(0,true);
    cluster.waitForHealthState(0,State.SERVICE_HEALTHY);
    cluster.getZkfc(1).gracefulFailoverToYou();
    cluster.getZkfc(0).gracefulFailoverToYou();
  }
  finally {
    cluster.stop();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that, when the health monitor indicates bad health status,
 * failover is triggered. Also ensures that graceful active->standby
 * transition is used when possible, falling back to fencing when
 * the graceful approach fails.
 */
@Test(timeout=15000) public void testAutoFailoverOnBadHealth() throws Exception {
  try {
    cluster.start();
    DummyHAService svc1=cluster.getService(1);
    LOG.info("Faking svc0 unhealthy, should failover to svc1");
    cluster.setHealthy(0,false);
    LOG.info("Waiting for svc0 to enter standby state");
    cluster.waitForHAState(0,HAServiceState.STANDBY);
    cluster.waitForHAState(1,HAServiceState.ACTIVE);
    LOG.info("Allowing svc0 to be healthy again, making svc1 unreachable " + "and fail to gracefully go to standby");
    cluster.setUnreachable(1,true);
    cluster.setHealthy(0,true);
    cluster.waitForHAState(0,HAServiceState.ACTIVE);
    Mockito.verify(svc1.fencer).fence(Mockito.same(svc1));
  }
  finally {
    cluster.stop();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=15000) public void testAutoFailoverOnLostZKSession() throws Exception {
  try {
    cluster.start();
    cluster.expireAndVerifyFailover(0,1);
    cluster.expireAndVerifyFailover(1,0);
    LOG.info("======= Running test cases second time to test " + "re-establishment =========");
    cluster.expireAndVerifyFailover(0,1);
    cluster.expireAndVerifyFailover(1,0);
  }
  finally {
    cluster.stop();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that, when the health monitor indicates bad health status,
 * failover is triggered. Also ensures that graceful active->standby
 * transition is used when possible, falling back to fencing when
 * the graceful approach fails.
 */
@Test(timeout=15000) public void testAutoFailoverOnBadState() throws Exception {
  try {
    cluster.start();
    DummyHAService svc0=cluster.getService(0);
    LOG.info("Faking svc0 to change the state, should failover to svc1");
    svc0.state=HAServiceState.STANDBY;
    cluster.waitForHAState(1,HAServiceState.ACTIVE);
  }
  finally {
    cluster.stop();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that, if the standby node is unhealthy, it doesn't try to become
 * active
 */
@Test(timeout=15000) public void testDontFailoverToUnhealthyNode() throws Exception {
  try {
    cluster.start();
    cluster.setHealthy(1,false);
    cluster.waitForHealthState(1,HealthMonitor.State.SERVICE_UNHEALTHY);
    cluster.getElector(0).preventSessionReestablishmentForTests();
    try {
      cluster.expireActiveLockHolder(0);
      LOG.info("Expired svc0's ZK session. Waiting a second to give svc1" + " a chance to take the lock, if it is ever going to.");
      Thread.sleep(1000);
      cluster.waitForActiveLockHolder(null);
    }
  finally {
      LOG.info("Allowing svc0's elector to re-establish its connection");
      cluster.getElector(0).allowSessionReestablishmentForTests();
    }
    cluster.waitForActiveLockHolder(0);
  }
  finally {
    cluster.stop();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ha.TestZKFailoverControllerStress </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Have the services fail their health checks half the time,
 * causing the master role to bounce back and forth in the
 * cluster. Meanwhile, causes ZK to disconnect clients every
 * 50ms, to trigger the retry code and failures to become active.
 */
@Test(timeout=(STRESS_RUNTIME_SECS + EXTRA_TIMEOUT_SECS) * 1000) public void testRandomHealthAndDisconnects() throws Exception {
  long runFor=STRESS_RUNTIME_SECS * 1000;
  Mockito.doAnswer(new RandomlyThrow(0)).when(cluster.getService(0).proxy).monitorHealth();
  Mockito.doAnswer(new RandomlyThrow(1)).when(cluster.getService(1).proxy).monitorHealth();
  conf.setInt(CommonConfigurationKeys.HA_FC_ELECTOR_ZK_OP_RETRIES_KEY,100);
  cluster.start();
  long st=Time.now();
  while (Time.now() - st < runFor) {
    cluster.getTestContext().checkException();
    serverFactory.closeAll();
    Thread.sleep(50);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Randomly expire the ZK sessions of the two ZKFCs. This differs
 * from the above test in that it is not a controlled failover -
 * we just do random expirations and expect neither one to ever
 * generate fatal exceptions.
 */
@Test(timeout=(STRESS_RUNTIME_SECS + EXTRA_TIMEOUT_SECS) * 1000) public void testRandomExpirations() throws Exception {
  cluster.start();
  long st=Time.now();
  long runFor=STRESS_RUNTIME_SECS * 1000;
  Random r=new Random();
  while (Time.now() - st < runFor) {
    cluster.getTestContext().checkException();
    int targetIdx=r.nextInt(2);
    ActiveStandbyElector target=cluster.getElector(targetIdx);
    long sessId=target.getZKSessionIdForTests();
    if (sessId != -1) {
      LOG.info(String.format("Expiring session %x for svc %d",sessId,targetIdx));
      getServer(serverFactory).closeSession(sessId);
    }
    Thread.sleep(r.nextInt(300));
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Simply fail back and forth between two services for the
 * configured amount of time, via expiring their ZK sessions.
 */
@Test(timeout=(STRESS_RUNTIME_SECS + EXTRA_TIMEOUT_SECS) * 1000) public void testExpireBackAndForth() throws Exception {
  cluster.start();
  long st=Time.now();
  long runFor=STRESS_RUNTIME_SECS * 1000;
  int i=0;
  while (Time.now() - st < runFor) {
    int from=i % 2;
    int to=(i + 1) % 2;
    LOG.info("Failing over via expiration from " + from + " to "+ to);
    cluster.expireAndVerifyFailover(from,to);
    i++;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.FileAppendTest4 </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Comprehensive test for append 
 * @throws IOException an exception might be thrown
 */
@Test public void testAppend() throws IOException {
  final int maxOldFileLen=2 * BLOCK_SIZE + 1;
  final int maxFlushedBytes=BLOCK_SIZE;
  byte[] contents=AppendTestUtil.initBuffer(maxOldFileLen + 2 * maxFlushedBytes);
  for (int oldFileLen=0; oldFileLen <= maxOldFileLen; oldFileLen++) {
    for (int flushedBytes1=0; flushedBytes1 <= maxFlushedBytes; flushedBytes1++) {
      for (int flushedBytes2=0; flushedBytes2 <= maxFlushedBytes; flushedBytes2++) {
        final int fileLen=oldFileLen + flushedBytes1 + flushedBytes2;
        final Path p=new Path("foo" + oldFileLen + "_"+ flushedBytes1+ "_"+ flushedBytes2);
        LOG.info("Creating file " + p);
        FSDataOutputStream out=fs.create(p,false,conf.getInt(CommonConfigurationKeys.IO_FILE_BUFFER_SIZE_KEY,4096),REPLICATION,BLOCK_SIZE);
        out.write(contents,0,oldFileLen);
        out.close();
        out=fs.append(p);
        out.write(contents,oldFileLen,flushedBytes1);
        out.hflush();
        out.write(contents,oldFileLen + flushedBytes1,flushedBytes2);
        out.close();
        AppendTestUtil.checkFullFile(fs,p,fileLen,contents,p.toString());
        fs.delete(p,false);
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestAppendDifferentChecksum </h4><pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test which randomly alternates between appending with
 * CRC32 and with CRC32C, crossing several block boundaries.
 * Then, checks that all of the data can be read back correct.
 */
@Test(timeout=RANDOM_TEST_RUNTIME * 2) public void testAlgoSwitchRandomized() throws IOException {
  FileSystem fsWithCrc32=createFsWithChecksum("CRC32",512);
  FileSystem fsWithCrc32C=createFsWithChecksum("CRC32C",512);
  Path p=new Path("/testAlgoSwitchRandomized");
  long seed=Time.now();
  System.out.println("seed: " + seed);
  Random r=new Random(seed);
  IOUtils.closeStream(fsWithCrc32.create(p));
  long st=Time.now();
  int len=0;
  while (Time.now() - st < RANDOM_TEST_RUNTIME) {
    int thisLen=r.nextInt(500);
    FileSystem fs=(r.nextBoolean() ? fsWithCrc32 : fsWithCrc32C);
    FSDataOutputStream stm=fs.append(p);
    try {
      AppendTestUtil.write(stm,len,thisLen);
    }
  finally {
      stm.close();
    }
    len+=thisLen;
  }
  AppendTestUtil.check(fsWithCrc32,p,len);
  AppendTestUtil.check(fsWithCrc32C,p,len);
}

</code></pre>

<br>
<pre class="type-5 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
/** 
 * This test does not run, since switching chunksize with append
 * is not implemented. Please see HDFS-2130 for a discussion of the
 * difficulties in doing so.
 */
@Test @Ignore("this is not implemented! See HDFS-2130") public void testSwitchChunkSize() throws IOException {
  FileSystem fsWithSmallChunk=createFsWithChecksum("CRC32",512);
  FileSystem fsWithBigChunk=createFsWithChecksum("CRC32",1024);
  Path p=new Path("/testSwitchChunkSize");
  appendWithTwoFs(p,fsWithSmallChunk,fsWithBigChunk);
  AppendTestUtil.check(fsWithSmallChunk,p,SEGMENT_LENGTH * 2);
  AppendTestUtil.check(fsWithBigChunk,p,SEGMENT_LENGTH * 2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Simple unit test which writes some data with one algorithm,
 * then appends with another.
 */
@Test public void testSwitchAlgorithms() throws IOException {
  FileSystem fsWithCrc32=createFsWithChecksum("CRC32",512);
  FileSystem fsWithCrc32C=createFsWithChecksum("CRC32C",512);
  Path p=new Path("/testSwitchAlgorithms");
  appendWithTwoFs(p,fsWithCrc32,fsWithCrc32C);
  AppendTestUtil.check(fsWithCrc32C,p,SEGMENT_LENGTH * 2);
  AppendTestUtil.check(fsWithCrc32,p,SEGMENT_LENGTH * 2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestBlockMissingException </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test DFS Raid
 */
@Test public void testBlockMissingException() throws Exception {
  LOG.info("Test testBlockMissingException started.");
  long blockSize=1024L;
  int numBlocks=4;
  conf=new HdfsConfiguration();
  conf.setInt(DFSConfigKeys.DFS_CLIENT_RETRY_WINDOW_BASE,10);
  try {
    dfs=new MiniDFSCluster.Builder(conf).numDataNodes(NUM_DATANODES).build();
    dfs.waitActive();
    fileSys=dfs.getFileSystem();
    Path file1=new Path("/user/dhruba/raidtest/file1");
    createOldFile(fileSys,file1,1,numBlocks,blockSize);
    LocatedBlocks locations=null;
    locations=fileSys.dfs.getNamenode().getBlockLocations(file1.toString(),0,numBlocks * blockSize);
    LOG.info("Remove first block of file");
    corruptBlock(file1,locations.get(0).getBlock());
    validateFile(fileSys,file1);
  }
  finally {
    if (fileSys != null)     fileSys.close();
    if (dfs != null)     dfs.shutdown();
  }
  LOG.info("Test testBlockMissingException completed.");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestBlockReaderLocal </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalOnFileWithoutChecksumNoChecksumNoReadahead() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalOnFileWithoutChecksum(),false,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderSimpleReadsNoReadahead() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderSimpleReads(),true,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalReadZeroBytesNoChecksumNoReadahead() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalReadZeroBytes(),false,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalByteBufferReadsNoChecksumNoReadahead() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalByteBufferReads(),false,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalReadZeroBytes() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalReadZeroBytes(),true,DFSConfigKeys.DFS_DATANODE_READAHEAD_BYTES_DEFAULT);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalOnFileWithoutChecksum() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalOnFileWithoutChecksum(),true,DFSConfigKeys.DFS_DATANODE_READAHEAD_BYTES_DEFAULT);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void TestStatisticsForShortCircuitLocalRead() throws Exception {
  testStatistics(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalReadCorruptNoChecksum() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalReadCorrupt(),false,DFSConfigKeys.DFS_DATANODE_READAHEAD_BYTES_DEFAULT);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalByteBufferFastLaneReadsNoChecksum() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalByteBufferFastLaneReads(),false,2 * BlockReaderLocalTest.BYTES_PER_CHECKSUM);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalWithMlockChangesNoChecksumNoReadahead() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalWithMlockChanges(),false,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalOnFileWithoutChecksumNoReadahead() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalOnFileWithoutChecksum(),true,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalWithMlockChanges() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalWithMlockChanges(),true,DFSConfigKeys.DFS_DATANODE_READAHEAD_BYTES_DEFAULT);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalReadCorruptNoReadahead() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalReadCorrupt(),true,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalByteBufferReadsNoReadahead() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalByteBufferReads(),true,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalArrayReads2NoChecksum() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalArrayReads2(),false,DFSConfigKeys.DFS_DATANODE_READAHEAD_BYTES_DEFAULT);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalByteBufferFastLaneReads() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalByteBufferFastLaneReads(),true,2 * BlockReaderLocalTest.BYTES_PER_CHECKSUM);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalWithMlockChangesNoChecksum() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalWithMlockChanges(),false,DFSConfigKeys.DFS_DATANODE_READAHEAD_BYTES_DEFAULT);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalWithMlockChangesNoReadahead() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalWithMlockChanges(),true,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalReadCorruptStart() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalReadCorruptStart(),true,DFSConfigKeys.DFS_DATANODE_READAHEAD_BYTES_DEFAULT);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalArrayReads2() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalArrayReads2(),true,DFSConfigKeys.DFS_DATANODE_READAHEAD_BYTES_DEFAULT);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalReadCorrupt() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalReadCorrupt(),true,DFSConfigKeys.DFS_DATANODE_READAHEAD_BYTES_DEFAULT);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalReadZeroBytesNoChecksum() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalReadZeroBytes(),false,DFSConfigKeys.DFS_DATANODE_READAHEAD_BYTES_DEFAULT);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalByteBufferReadsNoChecksum() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalByteBufferReads(),false,DFSConfigKeys.DFS_DATANODE_READAHEAD_BYTES_DEFAULT);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderSimpleReadsNoChecksumNoReadahead() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderSimpleReads(),false,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderSimpleReads() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderSimpleReads(),true,DFSConfigKeys.DFS_DATANODE_READAHEAD_BYTES_DEFAULT);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void TestStatisticsForLocalRead() throws Exception {
  testStatistics(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalArrayReads2NoChecksumNoReadahead() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalArrayReads2(),false,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderSimpleReadsShortReadahead() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderSimpleReads(),true,BlockReaderLocalTest.BYTES_PER_CHECKSUM - 1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalByteBufferFastLaneReadsNoReadahead() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalByteBufferFastLaneReads(),true,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalByteBufferReads() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalByteBufferReads(),true,DFSConfigKeys.DFS_DATANODE_READAHEAD_BYTES_DEFAULT);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalArrayReads2NoReadahead() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalArrayReads2(),true,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderSimpleReadsNoChecksum() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderSimpleReads(),false,DFSConfigKeys.DFS_DATANODE_READAHEAD_BYTES_DEFAULT);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalImmediateClose() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalImmediateClose(),true,0);
  runBlockReaderLocalTest(new TestBlockReaderLocalImmediateClose(),false,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalOnFileWithoutChecksumNoChecksum() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalOnFileWithoutChecksum(),false,DFSConfigKeys.DFS_DATANODE_READAHEAD_BYTES_DEFAULT);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalReadZeroBytesNoReadahead() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalReadZeroBytes(),true,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalByteBufferFastLaneReadsNoChecksumNoReadahead() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalByteBufferFastLaneReads(),false,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockReaderLocalReadCorruptNoChecksumNoReadahead() throws IOException {
  runBlockReaderLocalTest(new TestBlockReaderLocalReadCorrupt(),false,0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestClientBlockVerification </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test various unaligned reads to make sure that we properly
 * account even when we don't start or end on a checksum boundary
 */
@Test public void testUnalignedReads() throws Exception {
  int startOffsets[]=new int[]{0,3,129};
  int lengths[]=new int[]{30,300,512,513,1025};
  for (  int startOffset : startOffsets) {
    for (    int length : lengths) {
      DFSClient.LOG.info("Testing startOffset = " + startOffset + " and "+ " len="+ length);
      RemoteBlockReader2 reader=(RemoteBlockReader2)spy(util.getBlockReader(testBlock,startOffset,length));
      util.readAndCheckEOS(reader,length,true);
      verify(reader).sendReadResult(Status.CHECKSUM_OK);
      reader.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that if we do an incomplete read, we don't call CHECKSUM_OK
 */
@Test public void testIncompleteRead() throws Exception {
  RemoteBlockReader2 reader=(RemoteBlockReader2)spy(util.getBlockReader(testBlock,0,FILE_SIZE_K * 1024));
  util.readAndCheckEOS(reader,FILE_SIZE_K / 2 * 1024,false);
  verify(reader,never()).sendReadResult(Status.CHECKSUM_OK);
  reader.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that if we ask for a half block, and read it all, we *do
 * send CHECKSUM_OK. The DN takes care of knowing whether it was
 * the whole block or not.
 */
@Test public void testCompletePartialRead() throws Exception {
  RemoteBlockReader2 reader=(RemoteBlockReader2)spy(util.getBlockReader(testBlock,0,FILE_SIZE_K * 1024 / 2));
  util.readAndCheckEOS(reader,FILE_SIZE_K * 1024 / 2,true);
  verify(reader).sendReadResult(Status.CHECKSUM_OK);
  reader.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Verify that if we read an entire block, we send CHECKSUM_OK
 */
@Test public void testBlockVerification() throws Exception {
  RemoteBlockReader2 reader=(RemoteBlockReader2)spy(util.getBlockReader(testBlock,0,FILE_SIZE_K * 1024));
  util.readAndCheckEOS(reader,FILE_SIZE_K * 1024,true);
  verify(reader).sendReadResult(Status.CHECKSUM_OK);
  reader.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestClientReportBadBlock </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This test creates a file with three block replicas. Corrupt two of the
 * replicas. Make dfs client read the file. The corrupted blocks with their
 * owner data nodes should be reported to the name node. 
 */
@Test public void testCorruptTwoOutOfThreeReplicas() throws Exception {
  final short repl=3;
  final int corruptBlocReplicas=2;
  for (int i=0; i < 2; i++) {
    String fileName="/tmp/testClientReportBadBlock/CorruptTwoOutOfThreeReplicas" + i;
    Path filePath=new Path(fileName);
    createAFileWithCorruptedBlockReplicas(filePath,repl,corruptBlocReplicas);
    int replicaCount=0;
    while (replicaCount != repl - corruptBlocReplicas) {
      if (i == 0) {
        dfsClientReadFile(filePath);
      }
 else {
        dfsClientReadFileFromPosition(filePath);
      }
      LocatedBlocks blocks=dfs.dfs.getNamenode().getBlockLocations(filePath.toString(),0,Long.MAX_VALUE);
      replicaCount=blocks.get(0).getLocations().length;
    }
    verifyFirstBlockCorrupted(filePath,false);
    int expectedReplicaCount=repl - corruptBlocReplicas;
    verifyCorruptedBlockCount(filePath,expectedReplicaCount);
    verifyFsckHealth("Target Replicas is 3 but found 1 replica");
    testFsckListCorruptFilesBlocks(filePath,0);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This test creates a file with three block replicas. Corrupt all of the
 * replicas. Make dfs client read the file. No block corruption should be
 * reported.
 */
@Test public void testCorruptAllOfThreeReplicas() throws Exception {
  final short repl=3;
  final int corruptBlockNumber=3;
  for (int i=0; i < 2; i++) {
    String fileName="/tmp/testClientReportBadBlock/testCorruptAllReplicas" + i;
    Path filePath=new Path(fileName);
    createAFileWithCorruptedBlockReplicas(filePath,repl,corruptBlockNumber);
    if (i == 0) {
      dfsClientReadFile(filePath);
    }
 else {
      dfsClientReadFileFromPosition(filePath);
    }
    int expectedReplicasReturned=repl;
    verifyCorruptedBlockCount(filePath,expectedReplicasReturned);
    verifyFirstBlockCorrupted(filePath,false);
    verifyFsckHealth("");
    testFsckListCorruptFilesBlocks(filePath,0);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOneBlockReplica() throws Exception {
  final short repl=1;
  final int corruptBlockNumber=1;
  for (int i=0; i < 2; i++) {
    String fileName="/tmp/testClientReportBadBlock/OneBlockReplica" + i;
    Path filePath=new Path(fileName);
    createAFileWithCorruptedBlockReplicas(filePath,repl,corruptBlockNumber);
    if (i == 0) {
      dfsClientReadFile(filePath);
    }
 else {
      dfsClientReadFileFromPosition(filePath);
    }
    int expectedReplicaCount=1;
    verifyCorruptedBlockCount(filePath,expectedReplicaCount);
    verifyFirstBlockCorrupted(filePath,true);
    verifyFsckBlockCorrupted();
    testFsckListCorruptFilesBlocks(filePath,-1);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestCrcCorruption </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Same thing with multiple datanodes - in history, this has
 * behaved differently than the above.
 * This test usually completes in around 15 seconds - if it
 * times out, this suggests that the client is retrying
 * indefinitely.
 */
@Test(timeout=300000) public void testEntirelyCorruptFileThreeNodes() throws Exception {
  doTestEntirelyCorruptFile(3);
}

</code></pre>

<br>
<pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCrcCorruption() throws Exception {
  System.out.println("TestCrcCorruption with default parameters");
  Configuration conf1=new HdfsConfiguration();
  conf1.setInt(DFSConfigKeys.DFS_BLOCKREPORT_INTERVAL_MSEC_KEY,3 * 1000);
  DFSTestUtil util1=new DFSTestUtil.Builder().setName("TestCrcCorruption").setNumFiles(40).build();
  thistest(conf1,util1);
  System.out.println("TestCrcCorruption with specific parameters");
  Configuration conf2=new HdfsConfiguration();
  conf2.setInt(DFSConfigKeys.DFS_BYTES_PER_CHECKSUM_KEY,17);
  conf2.setInt(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,34);
  DFSTestUtil util2=new DFSTestUtil.Builder().setName("TestCrcCorruption").setNumFiles(40).setMaxSize(400).build();
  thistest(conf2,util2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Make a single-DN cluster, corrupt a block, and make sure
 * there's no infinite loop, but rather it eventually
 * reports the exception to the client.
 */
@Test(timeout=300000) public void testEntirelyCorruptFileOneNode() throws Exception {
  doTestEntirelyCorruptFile(1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDFSClientFailover </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Same test as above, but for FileContext.
 */
@Test public void testFileContextDoesntDnsResolveLogicalURI() throws Exception {
  NameService spyNS=spyOnNameService();
  FileSystem fs=HATestUtil.configureFailoverFs(cluster,conf);
  String logicalHost=fs.getUri().getHost();
  Configuration haClientConf=fs.getConf();
  FileContext fc=FileContext.getFileContext(haClientConf);
  Path root=new Path("/");
  fc.listStatus(root);
  fc.listStatus(fc.makeQualified(root));
  fc.getDefaultFileSystem().getCanonicalServiceName();
  Mockito.verify(spyNS,Mockito.never()).lookupAllHostAddr(Mockito.eq(logicalHost));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that even a non-idempotent method will properly fail-over if the
 * first IPC attempt times out trying to connect. Regression test for
 * HDFS-4404. 
 */
@Test public void testFailoverOnConnectTimeout() throws Exception {
  conf.setClass(CommonConfigurationKeysPublic.HADOOP_RPC_SOCKET_FACTORY_CLASS_DEFAULT_KEY,InjectingSocketFactory.class,SocketFactory.class);
  InjectingSocketFactory.portToInjectOn=cluster.getNameNodePort(0);
  FileSystem fs=HATestUtil.configureFailoverFs(cluster,conf);
  cluster.shutdownNameNode(0);
  cluster.transitionToActive(1);
  IOUtils.closeStream(fs.create(TEST_FILE));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that the client doesn't ever try to DNS-resolve the logical URI.
 * Regression test for HADOOP-9150.
 */
@Test public void testDoesntDnsResolveLogicalURI() throws Exception {
  NameService spyNS=spyOnNameService();
  FileSystem fs=HATestUtil.configureFailoverFs(cluster,conf);
  String logicalHost=fs.getUri().getHost();
  Path qualifiedRoot=fs.makeQualified(new Path("/"));
  fs.getCanonicalServiceName();
  fs.listStatus(qualifiedRoot);
  Mockito.verify(spyNS,Mockito.never()).lookupAllHostAddr(Mockito.eq(logicalHost));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDFSClientRetries </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultipleLinearRandomRetry(){
  parseMultipleLinearRandomRetry(null,"");
  parseMultipleLinearRandomRetry(null,"11");
  parseMultipleLinearRandomRetry(null,"11,22,33");
  parseMultipleLinearRandomRetry(null,"11,22,33,44,55");
  parseMultipleLinearRandomRetry(null,"AA");
  parseMultipleLinearRandomRetry(null,"11,AA");
  parseMultipleLinearRandomRetry(null,"11,22,33,FF");
  parseMultipleLinearRandomRetry(null,"11,-22");
  parseMultipleLinearRandomRetry(null,"-11,22");
  parseMultipleLinearRandomRetry("[22x11ms]","11,22");
  parseMultipleLinearRandomRetry("[22x11ms, 44x33ms]","11,22,33,44");
  parseMultipleLinearRandomRetry("[22x11ms, 44x33ms, 66x55ms]","11,22,33,44,55,66");
  parseMultipleLinearRandomRetry("[22x11ms, 44x33ms, 66x55ms]","   11,   22, 33,  44, 55,  66   ");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This makes sure that when DN closes clients socket after client had
 * successfully connected earlier, the data can still be fetched.
 */
@Test public void testWriteTimeoutAtDataNode() throws IOException, InterruptedException {
  final int writeTimeout=100;
  conf.setInt(DFSConfigKeys.DFS_DATANODE_SOCKET_WRITE_TIMEOUT_KEY,writeTimeout);
  final int blockSize=10 * 1024 * 1024;
  conf.setInt(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,blockSize);
  conf.setInt(DFSConfigKeys.DFS_CLIENT_MAX_BLOCK_ACQUIRE_FAILURES_KEY,1);
  final int bufferSize=4096;
  conf.setInt(CommonConfigurationKeys.IO_FILE_BUFFER_SIZE_KEY,bufferSize);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(3).build();
  try {
    cluster.waitActive();
    FileSystem fs=cluster.getFileSystem();
    Path filePath=new Path("/testWriteTimeoutAtDataNode");
    OutputStream out=fs.create(filePath,true,bufferSize);
    writeData(out,2 * blockSize);
    out.close();
    byte[] buf=new byte[1024 * 1024];
    InputStream in=fs.open(filePath,bufferSize);
    IOUtils.readFully(in,buf,0,bufferSize / 2);
    for (int i=0; i < 10; i++) {
      Thread.sleep(2 * writeTimeout);
      IOUtils.readFully(in,buf,0,buf.length);
    }
    in.close();
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test client retry with namenode restarting. 
 */
@Test(timeout=300000) public void testNamenodeRestart() throws Exception {
  namenodeRestartTest(new Configuration(),false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDFSFinalize </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This test attempts to finalize the NameNode and DataNode.
 */
@Test public void testFinalize() throws Exception {
  UpgradeUtilities.initialize();
  for (int numDirs=1; numDirs <= 2; numDirs++) {
    conf=new HdfsConfiguration();
    conf.setInt(DFSConfigKeys.DFS_DATANODE_SCAN_PERIOD_HOURS_KEY,-1);
    conf=UpgradeUtilities.initializeStorageStateConf(numDirs,conf);
    String[] nameNodeDirs=conf.getStrings(DFSConfigKeys.DFS_NAMENODE_NAME_DIR_KEY);
    String[] dataNodeDirs=conf.getStrings(DFSConfigKeys.DFS_DATANODE_DATA_DIR_KEY);
    log("Finalize NN & DN with existing previous dir",numDirs);
    UpgradeUtilities.createNameNodeStorageDirs(nameNodeDirs,"current");
    UpgradeUtilities.createNameNodeStorageDirs(nameNodeDirs,"previous");
    UpgradeUtilities.createDataNodeStorageDirs(dataNodeDirs,"current");
    UpgradeUtilities.createDataNodeStorageDirs(dataNodeDirs,"previous");
    cluster=new MiniDFSCluster.Builder(conf).format(false).manageDataDfsDirs(false).manageNameDfsDirs(false).startupOption(StartupOption.REGULAR).build();
    cluster.finalizeCluster(conf);
    cluster.triggerBlockReports();
    Thread.sleep(1000);
    checkResult(nameNodeDirs,dataNodeDirs,null);
    log("Finalize NN & DN without existing previous dir",numDirs);
    cluster.finalizeCluster(conf);
    cluster.triggerBlockReports();
    Thread.sleep(1000);
    checkResult(nameNodeDirs,dataNodeDirs,null);
    cluster.shutdown();
    UpgradeUtilities.createEmptyDirs(nameNodeDirs);
    UpgradeUtilities.createEmptyDirs(dataNodeDirs);
    log("Finalize NN & BP with existing previous dir",numDirs);
    String bpid=UpgradeUtilities.getCurrentBlockPoolID(cluster);
    UpgradeUtilities.createNameNodeStorageDirs(nameNodeDirs,"current");
    UpgradeUtilities.createNameNodeStorageDirs(nameNodeDirs,"previous");
    UpgradeUtilities.createDataNodeStorageDirs(dataNodeDirs,"current");
    UpgradeUtilities.createBlockPoolStorageDirs(dataNodeDirs,"current",bpid);
    UpgradeUtilities.createBlockPoolStorageDirs(dataNodeDirs,"previous",bpid);
    cluster=new MiniDFSCluster.Builder(conf).format(false).manageDataDfsDirs(false).manageNameDfsDirs(false).startupOption(StartupOption.REGULAR).build();
    cluster.finalizeCluster(conf);
    cluster.triggerBlockReports();
    Thread.sleep(1000);
    checkResult(nameNodeDirs,dataNodeDirs,bpid);
    log("Finalize NN & BP without existing previous dir",numDirs);
    cluster.finalizeCluster(conf);
    cluster.triggerBlockReports();
    Thread.sleep(1000);
    checkResult(nameNodeDirs,dataNodeDirs,bpid);
    cluster.shutdown();
    UpgradeUtilities.createEmptyDirs(nameNodeDirs);
    UpgradeUtilities.createEmptyDirs(dataNodeDirs);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDFSPermission </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOwnership() throws Exception {
  testOwnership(OpType.CREATE);
  testOwnership(OpType.MKDIRS);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * check that ImmutableFsPermission can be used as the argument
 * to setPermission
 */
@Test public void testImmutableFsPermission() throws IOException {
  fs=FileSystem.get(conf);
  fs.setPermission(new Path("/"),FsPermission.createImmutable((short)0777));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPermissionChecking() throws Exception {
  try {
    fs=FileSystem.get(conf);
    fs.setPermission(new Path("/"),new FsPermission((short)0777));
    PermissionGenerator ancestorPermissionGenerator=new PermissionGenerator(r);
    PermissionGenerator dirPermissionGenerator=new PermissionGenerator(r);
    PermissionGenerator filePermissionGenerator=new PermissionGenerator(r);
    short[] ancestorPermissions=new short[NUM_TEST_PERMISSIONS];
    short[] parentPermissions=new short[NUM_TEST_PERMISSIONS];
    short[] permissions=new short[NUM_TEST_PERMISSIONS];
    Path[] ancestorPaths=new Path[NUM_TEST_PERMISSIONS];
    Path[] parentPaths=new Path[NUM_TEST_PERMISSIONS];
    Path[] filePaths=new Path[NUM_TEST_PERMISSIONS];
    Path[] dirPaths=new Path[NUM_TEST_PERMISSIONS];
    for (int i=0; i < NUM_TEST_PERMISSIONS; i++) {
      ancestorPaths[i]=new Path(ANCESTOR_NAME + i);
      create(OpType.MKDIRS,ancestorPaths[i]);
      fs.setOwner(ancestorPaths[i],USER1_NAME,GROUP2_NAME);
      parentPaths[i]=new Path(ancestorPaths[i],PARENT_NAME + i);
      create(OpType.MKDIRS,parentPaths[i]);
      fs.setOwner(parentPaths[i],USER1_NAME,GROUP2_NAME);
      filePaths[i]=new Path(parentPaths[i],FILE_NAME + i);
      dirPaths[i]=new Path(parentPaths[i],DIR_NAME + i);
      ancestorPermissions[i]=ancestorPermissionGenerator.next();
      parentPermissions[i]=dirPermissionGenerator.next();
      permissions[i]=filePermissionGenerator.next();
      fs.setPermission(ancestorPaths[i],new FsPermission(ancestorPermissions[i]));
      fs.setPermission(parentPaths[i],new FsPermission(parentPermissions[i]));
    }
    testPermissionCheckingPerUser(USER1,ancestorPermissions,parentPermissions,permissions,parentPaths,filePaths,dirPaths);
    testPermissionCheckingPerUser(USER2,ancestorPermissions,parentPermissions,permissions,parentPaths,filePaths,dirPaths);
    testPermissionCheckingPerUser(USER3,ancestorPermissions,parentPermissions,permissions,parentPaths,filePaths,dirPaths);
    testPermissionCheckingPerUser(SUPERUSER,ancestorPermissions,parentPermissions,permissions,parentPaths,filePaths,dirPaths);
  }
  finally {
    fs.close();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This tests if permission setting in create, mkdir, and 
 * setPermission works correctly
 */
@Test public void testPermissionSetting() throws Exception {
  testPermissionSetting(OpType.CREATE);
  testPermissionSetting(OpType.MKDIRS);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDFSShell </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testFilePermissions() throws IOException {
  Configuration conf=new HdfsConfiguration();
  FileSystem fs=FileSystem.getLocal(conf);
  testChmod(conf,fs,(new File(TEST_ROOT_DIR,"chmodTest")).getAbsolutePath());
  conf.set(DFSConfigKeys.DFS_PERMISSIONS_ENABLED_KEY,"true");
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(2).build();
  fs=cluster.getFileSystem();
  testChmod(conf,fs,"/tmp/chmodTest");
  FsShell shell=new FsShell();
  shell.setConf(conf);
  fs=cluster.getFileSystem();
  String file="/tmp/chownTest";
  Path path=new Path(file);
  Path parent=new Path("/tmp");
  Path root=new Path("/");
  TestDFSShell.writeFile(fs,path);
  runCmd(shell,"-chgrp","-R","herbivores","/*","unknownFile*");
  confirmOwner(null,"herbivores",fs,parent,path);
  runCmd(shell,"-chgrp","mammals",file);
  confirmOwner(null,"mammals",fs,path);
  runCmd(shell,"-chown","-R",":reptiles","/");
  confirmOwner(null,"reptiles",fs,root,parent,path);
  runCmd(shell,"-chown","python:","/nonExistentFile",file);
  confirmOwner("python","reptiles",fs,path);
  runCmd(shell,"-chown","-R","hadoop:toys","unknownFile","/");
  confirmOwner("hadoop","toys",fs,root,parent,path);
  runCmd(shell,"-chown","hdfs.user",file);
  confirmOwner("hdfs.user",null,fs,path);
  runCmd(shell,"-chown","_Hdfs.User-10:_hadoop.users--",file);
  confirmOwner("_Hdfs.User-10","_hadoop.users--",fs,path);
  runCmd(shell,"-chown","hdfs/hadoop-core@apache.org:asf-projects",file);
  confirmOwner("hdfs/hadoop-core@apache.org","asf-projects",fs,path);
  runCmd(shell,"-chgrp","hadoop-core@apache.org/100",file);
  confirmOwner(null,"hadoop-core@apache.org/100",fs,path);
  cluster.shutdown();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that server trash configuration is respected even when the
 * client configuration is set.
 */
@Test(timeout=30000) public void testServerConfigRespectedWithClient() throws Exception {
  deleteFileUsingTrash(true,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that the client trash configuration is respected when
 * the server configuration is not set.
 */
@Test(timeout=30000) public void testClientConfigRespected() throws Exception {
  deleteFileUsingTrash(false,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testSetXAttrCaseSensitivity() throws Exception {
  UserGroupInformation user=UserGroupInformation.createUserForTesting("user",new String[]{"mygroup"});
  MiniDFSCluster cluster=null;
  PrintStream bak=null;
  try {
    final Configuration conf=new HdfsConfiguration();
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(1).build();
    cluster.waitActive();
    FileSystem fs=cluster.getFileSystem();
    Path p=new Path("/mydir");
    fs.mkdirs(p);
    bak=System.err;
    final FsShell fshell=new FsShell(conf);
    final ByteArrayOutputStream out=new ByteArrayOutputStream();
    System.setOut(new PrintStream(out));
    doSetXattr(out,fshell,new String[]{"-setfattr","-n","User.Foo","/mydir"},new String[]{"-getfattr","-d","/mydir"},new String[]{"user.Foo"},new String[]{});
    doSetXattr(out,fshell,new String[]{"-setfattr","-n","user.FOO","/mydir"},new String[]{"-getfattr","-d","/mydir"},new String[]{"user.Foo","user.FOO"},new String[]{});
    doSetXattr(out,fshell,new String[]{"-setfattr","-n","USER.foo","/mydir"},new String[]{"-getfattr","-d","/mydir"},new String[]{"user.Foo","user.FOO","user.foo"},new String[]{});
    doSetXattr(out,fshell,new String[]{"-setfattr","-n","USER.fOo","-v","myval","/mydir"},new String[]{"-getfattr","-d","/mydir"},new String[]{"user.Foo","user.FOO","user.foo","user.fOo=\"myval\""},new String[]{"user.Foo=","user.FOO=","user.foo="});
    doSetXattr(out,fshell,new String[]{"-setfattr","-x","useR.foo","/mydir"},new String[]{"-getfattr","-d","/mydir"},new String[]{"user.Foo","user.FOO"},new String[]{"foo"});
    doSetXattr(out,fshell,new String[]{"-setfattr","-x","USER.FOO","/mydir"},new String[]{"-getfattr","-d","/mydir"},new String[]{"user.Foo"},new String[]{"FOO"});
    doSetXattr(out,fshell,new String[]{"-setfattr","-x","useR.Foo","/mydir"},new String[]{"-getfattr","-n","User.Foo","/mydir"},new String[]{},new String[]{"Foo"});
  }
  finally {
    if (bak != null) {
      System.setOut(bak);
    }
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that trash is disabled by default.
 */
@Test(timeout=30000) public void testNoTrashConfig() throws Exception {
  deleteFileUsingTrash(false,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testText() throws Exception {
  Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=null;
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(2).build();
    final FileSystem dfs=cluster.getFileSystem();
    textTest(new Path("/texttest").makeQualified(dfs.getUri(),dfs.getWorkingDirectory()),conf);
    conf.set("fs.defaultFS",dfs.getUri().toString());
    final FileSystem lfs=FileSystem.getLocal(conf);
    textTest(new Path(TEST_ROOT_DIR,"texttest").makeQualified(lfs.getUri(),lfs.getWorkingDirectory()),conf);
  }
  finally {
    if (null != cluster) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000) public void testCopyCommandsWithRawXAttrs() throws Exception {
  final Configuration conf=new Configuration();
  conf.setBoolean(DFSConfigKeys.DFS_NAMENODE_XATTRS_ENABLED_KEY,true);
  final MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(1).format(true).build();
  FsShell shell=null;
  FileSystem fs=null;
  final String testdir="/tmp/TestDFSShell-testCopyCommandsWithRawXAttrs-" + counter.getAndIncrement();
  final Path hdfsTestDir=new Path(testdir);
  final Path rawHdfsTestDir=new Path("/.reserved/raw" + testdir);
  try {
    fs=cluster.getFileSystem();
    fs.mkdirs(hdfsTestDir);
    final Path src=new Path(hdfsTestDir,"srcfile");
    final String rawSrcBase="/.reserved/raw" + testdir;
    final Path rawSrc=new Path(rawSrcBase,"srcfile");
    fs.create(src).close();
    final Path srcDir=new Path(hdfsTestDir,"srcdir");
    final Path rawSrcDir=new Path("/.reserved/raw" + testdir,"srcdir");
    fs.mkdirs(srcDir);
    final Path srcDirFile=new Path(srcDir,"srcfile");
    final Path rawSrcDirFile=new Path("/.reserved/raw" + srcDirFile);
    fs.create(srcDirFile).close();
    final Path[] paths={rawSrc,rawSrcDir,rawSrcDirFile};
    final String[] xattrNames={USER_A1,RAW_A1};
    final byte[][] xattrVals={USER_A1_VALUE,RAW_A1_VALUE};
    for (int i=0; i < paths.length; i++) {
      for (int j=0; j < xattrNames.length; j++) {
        fs.setXAttr(paths[i],xattrNames[j],xattrVals[j]);
      }
    }
    shell=new FsShell(conf);
    doTestCopyCommandsWithRawXAttrs(shell,fs,src,hdfsTestDir,false);
    doTestCopyCommandsWithRawXAttrs(shell,fs,rawSrc,hdfsTestDir,false);
    doTestCopyCommandsWithRawXAttrs(shell,fs,src,rawHdfsTestDir,false);
    doTestCopyCommandsWithRawXAttrs(shell,fs,rawSrc,rawHdfsTestDir,true);
    final Path savedWd=fs.getWorkingDirectory();
    try {
      fs.setWorkingDirectory(new Path(rawSrcBase));
      final Path relRawSrc=new Path("../srcfile");
      final Path relRawHdfsTestDir=new Path("..");
      doTestCopyCommandsWithRawXAttrs(shell,fs,relRawSrc,relRawHdfsTestDir,true);
    }
  finally {
      fs.setWorkingDirectory(savedWd);
    }
    doTestCopyCommandsWithRawXAttrs(shell,fs,srcDir,hdfsTestDir,false);
    doTestCopyCommandsWithRawXAttrs(shell,fs,rawSrcDir,hdfsTestDir,false);
    doTestCopyCommandsWithRawXAttrs(shell,fs,srcDir,rawHdfsTestDir,false);
    doTestCopyCommandsWithRawXAttrs(shell,fs,rawSrcDir,rawHdfsTestDir,true);
    final String relRawSrcDir="./.reserved/../.reserved/raw/../raw" + testdir + "/srcdir";
    final String relRawDstDir="./.reserved/../.reserved/raw/../raw" + testdir;
    doTestCopyCommandsWithRawXAttrs(shell,fs,new Path(relRawSrcDir),new Path(relRawDstDir),true);
  }
  finally {
    if (null != shell) {
      shell.close();
    }
    if (null != fs) {
      fs.delete(hdfsTestDir,true);
      fs.close();
    }
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that the server trash configuration is respected when
 * the client configuration is not set.
 */
@Test(timeout=30000) public void testServerConfigRespected() throws Exception {
  deleteFileUsingTrash(true,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDFSShellGenericOptions </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDFSCommand() throws IOException {
  String namenode=null;
  MiniDFSCluster cluster=null;
  try {
    Configuration conf=new HdfsConfiguration();
    cluster=new MiniDFSCluster.Builder(conf).build();
    namenode=FileSystem.getDefaultUri(conf).toString();
    String[] args=new String[4];
    args[2]="-mkdir";
    args[3]="/data";
    testFsOption(args,namenode);
    testConfOption(args,namenode);
    testPropertyOption(args,namenode);
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDFSUpgrade </h4><pre class="type-5 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore public void testUpgrade4() throws Exception {
  int numDirs=4;
  conf=new HdfsConfiguration();
  conf.setInt(DFSConfigKeys.DFS_DATANODE_SCAN_PERIOD_HOURS_KEY,-1);
  conf=UpgradeUtilities.initializeStorageStateConf(numDirs,conf);
  String[] nameNodeDirs=conf.getStrings(DFSConfigKeys.DFS_NAMENODE_NAME_DIR_KEY);
  log("NameNode upgrade with one bad storage dir",numDirs);
  UpgradeUtilities.createNameNodeStorageDirs(nameNodeDirs,"current");
  try {
    startNameNodeShouldFail(StartupOption.UPGRADE,IOException.class,Pattern.compile("failed in 1 storage"));
  }
  finally {
    UpgradeUtilities.createEmptyDirs(nameNodeDirs);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDFSUpgradeFromImage </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test upgrade from 0.22 image
 */
@Test public void testUpgradeFromRel22Image() throws IOException {
  unpackStorage(HADOOP22_IMAGE,HADOOP_DFS_DIR_TXT);
  upgradeAndVerify(new MiniDFSCluster.Builder(upgradeConf).numDataNodes(4));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test upgrade from a 1.x image with some blocksBeingWritten
 */
@Test public void testUpgradeFromRel1BBWImage() throws IOException {
  unpackStorage(HADOOP1_BBW_IMAGE,HADOOP_DFS_DIR_TXT);
  Configuration conf=new Configuration(upgradeConf);
  conf.set(DFSConfigKeys.DFS_DATANODE_DATA_DIR_KEY,System.getProperty("test.build.data") + File.separator + "dfs"+ File.separator+ "data"+ File.separator+ "data1");
  upgradeAndVerify(new MiniDFSCluster.Builder(conf).numDataNodes(1).enableManagedDfsDirsRedundancy(false).manageDataDfsDirs(false));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDFSUtil </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAssertAllResultsEqual(){
  checkAllResults(new Long[]{},true);
  checkAllResults(new Long[]{1l},true);
  checkAllResults(new Long[]{1l,1l},true);
  checkAllResults(new Long[]{1l,1l,1l},true);
  checkAllResults(new Long[]{new Long(1),new Long(1)},true);
  checkAllResults(new Long[]{null,null,null},true);
  checkAllResults(new Long[]{1l,2l},false);
  checkAllResults(new Long[]{2l,1l},false);
  checkAllResults(new Long[]{1l,2l,1l},false);
  checkAllResults(new Long[]{2l,1l,1l},false);
  checkAllResults(new Long[]{1l,1l,2l},false);
  checkAllResults(new Long[]{1l,null},false);
  checkAllResults(new Long[]{null,1l},false);
  checkAllResults(new Long[]{1l,null,1l},false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDataTransferProtocol </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOpWrite() throws IOException {
  int numDataNodes=1;
  final long BLOCK_ID_FUDGE=128;
  Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(numDataNodes).build();
  try {
    cluster.waitActive();
    String poolId=cluster.getNamesystem().getBlockPoolId();
    datanode=DataNodeTestUtils.getDNRegistrationForBP(cluster.getDataNodes().get(0),poolId);
    dnAddr=NetUtils.createSocketAddr(datanode.getXferAddr());
    FileSystem fileSys=cluster.getFileSystem();
    Path file=new Path("dataprotocol.dat");
    DFSTestUtil.createFile(fileSys,file,1L,(short)numDataNodes,0L);
    ExtendedBlock firstBlock=DFSTestUtil.getFirstBlock(fileSys,file);
    testWrite(firstBlock,BlockConstructionStage.PIPELINE_SETUP_CREATE,0L,"Cannot create an existing block",true);
    testWrite(firstBlock,BlockConstructionStage.DATA_STREAMING,0L,"Unexpected stage",true);
    long newGS=firstBlock.getGenerationStamp() + 1;
    testWrite(firstBlock,BlockConstructionStage.PIPELINE_SETUP_STREAMING_RECOVERY,newGS,"Cannot recover data streaming to a finalized replica",true);
    newGS=firstBlock.getGenerationStamp() + 1;
    testWrite(firstBlock,BlockConstructionStage.PIPELINE_SETUP_APPEND,newGS,"Append to a finalized replica",false);
    firstBlock.setGenerationStamp(newGS);
    file=new Path("dataprotocol1.dat");
    DFSTestUtil.createFile(fileSys,file,1L,(short)numDataNodes,0L);
    firstBlock=DFSTestUtil.getFirstBlock(fileSys,file);
    newGS=firstBlock.getGenerationStamp() + 1;
    testWrite(firstBlock,BlockConstructionStage.PIPELINE_SETUP_APPEND_RECOVERY,newGS,"Recover appending to a finalized replica",false);
    file=new Path("dataprotocol2.dat");
    DFSTestUtil.createFile(fileSys,file,1L,(short)numDataNodes,0L);
    firstBlock=DFSTestUtil.getFirstBlock(fileSys,file);
    newGS=firstBlock.getGenerationStamp() + 1;
    testWrite(firstBlock,BlockConstructionStage.PIPELINE_CLOSE_RECOVERY,newGS,"Recover failed close to a finalized replica",false);
    firstBlock.setGenerationStamp(newGS);
    long newBlockId=firstBlock.getBlockId() + BLOCK_ID_FUDGE;
    ExtendedBlock newBlock=new ExtendedBlock(firstBlock.getBlockPoolId(),newBlockId,0,firstBlock.getGenerationStamp());
    testWrite(newBlock,BlockConstructionStage.PIPELINE_SETUP_CREATE,0L,"Create a new block",false);
    newGS=newBlock.getGenerationStamp() + 1;
    newBlock.setBlockId(newBlock.getBlockId() + 1);
    testWrite(newBlock,BlockConstructionStage.PIPELINE_SETUP_STREAMING_RECOVERY,newGS,"Recover a new block",true);
    newGS=newBlock.getGenerationStamp() + 1;
    testWrite(newBlock,BlockConstructionStage.PIPELINE_SETUP_APPEND,newGS,"Cannot append to a new block",true);
    newBlock.setBlockId(newBlock.getBlockId() + 1);
    newGS=newBlock.getGenerationStamp() + 1;
    testWrite(newBlock,BlockConstructionStage.PIPELINE_SETUP_APPEND_RECOVERY,newGS,"Cannot append to a new block",true);
    Path file1=new Path("dataprotocol1.dat");
    DFSTestUtil.createFile(fileSys,file1,1L,(short)numDataNodes,0L);
    DFSOutputStream out=(DFSOutputStream)(fileSys.append(file1).getWrappedStream());
    out.write(1);
    out.hflush();
    FSDataInputStream in=fileSys.open(file1);
    firstBlock=DFSTestUtil.getAllBlocks(in).get(0).getBlock();
    firstBlock.setNumBytes(2L);
    try {
      testWrite(firstBlock,BlockConstructionStage.PIPELINE_SETUP_CREATE,0L,"Cannot create a RBW block",true);
      newGS=firstBlock.getGenerationStamp() + 1;
      testWrite(firstBlock,BlockConstructionStage.PIPELINE_SETUP_APPEND,newGS,"Cannot append to a RBW replica",true);
      testWrite(firstBlock,BlockConstructionStage.PIPELINE_SETUP_APPEND_RECOVERY,newGS,"Recover append to a RBW replica",false);
      firstBlock.setGenerationStamp(newGS);
      file=new Path("dataprotocol2.dat");
      DFSTestUtil.createFile(fileSys,file,1L,(short)numDataNodes,0L);
      out=(DFSOutputStream)(fileSys.append(file).getWrappedStream());
      out.write(1);
      out.hflush();
      in=fileSys.open(file);
      firstBlock=DFSTestUtil.getAllBlocks(in).get(0).getBlock();
      firstBlock.setNumBytes(2L);
      newGS=firstBlock.getGenerationStamp() + 1;
      testWrite(firstBlock,BlockConstructionStage.PIPELINE_SETUP_STREAMING_RECOVERY,newGS,"Recover a RBW replica",false);
    }
  finally {
      IOUtils.closeStream(in);
      IOUtils.closeStream(out);
    }
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDataTransferProtocol() throws IOException {
  Random random=new Random();
  int oneMil=1024 * 1024;
  Path file=new Path("dataprotocol.dat");
  int numDataNodes=1;
  Configuration conf=new HdfsConfiguration();
  conf.setInt(DFSConfigKeys.DFS_REPLICATION_KEY,numDataNodes);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(numDataNodes).build();
  try {
    cluster.waitActive();
    datanode=cluster.getFileSystem().getDataNodeStats(DatanodeReportType.LIVE)[0];
    dnAddr=NetUtils.createSocketAddr(datanode.getXferAddr());
    FileSystem fileSys=cluster.getFileSystem();
    int fileLen=Math.min(conf.getInt(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,4096),4096);
    DFSTestUtil.createFile(fileSys,file,fileLen,fileLen,fileSys.getDefaultBlockSize(file),fileSys.getDefaultReplication(file),0L);
    final ExtendedBlock firstBlock=DFSTestUtil.getFirstBlock(fileSys,file);
    final String poolId=firstBlock.getBlockPoolId();
    long newBlockId=firstBlock.getBlockId() + 1;
    recvBuf.reset();
    sendBuf.reset();
    recvOut.writeShort((short)(DataTransferProtocol.DATA_TRANSFER_VERSION - 1));
    sendOut.writeShort((short)(DataTransferProtocol.DATA_TRANSFER_VERSION - 1));
    sendRecvData("Wrong Version",true);
    sendBuf.reset();
    sendOut.writeShort((short)DataTransferProtocol.DATA_TRANSFER_VERSION);
    sendOut.writeByte(Op.WRITE_BLOCK.code - 1);
    sendRecvData("Wrong Op Code",true);
    sendBuf.reset();
    DataChecksum badChecksum=Mockito.spy(DEFAULT_CHECKSUM);
    Mockito.doReturn(-1).when(badChecksum).getBytesPerChecksum();
    writeBlock(poolId,newBlockId,badChecksum);
    recvBuf.reset();
    sendResponse(Status.ERROR,null,null,recvOut);
    sendRecvData("wrong bytesPerChecksum while writing",true);
    sendBuf.reset();
    recvBuf.reset();
    writeBlock(poolId,++newBlockId,DEFAULT_CHECKSUM);
    PacketHeader hdr=new PacketHeader(4,0,100,false,-1 - random.nextInt(oneMil),false);
    hdr.write(sendOut);
    sendResponse(Status.SUCCESS,"",null,recvOut);
    new PipelineAck(100,new Status[]{Status.ERROR}).write(recvOut);
    sendRecvData("negative DATA_CHUNK len while writing block " + newBlockId,true);
    sendBuf.reset();
    recvBuf.reset();
    writeBlock(poolId,++newBlockId,DEFAULT_CHECKSUM);
    hdr=new PacketHeader(8,0,100,true,0,false);
    hdr.write(sendOut);
    sendOut.writeInt(0);
    sendOut.flush();
    sendResponse(Status.SUCCESS,"",null,recvOut);
    new PipelineAck(100,new Status[]{Status.SUCCESS}).write(recvOut);
    sendRecvData("Writing a zero len block blockid " + newBlockId,false);
    String bpid=cluster.getNamesystem().getBlockPoolId();
    ExtendedBlock blk=new ExtendedBlock(bpid,firstBlock.getLocalBlock());
    long blkid=blk.getBlockId();
    sendBuf.reset();
    recvBuf.reset();
    blk.setBlockId(blkid - 1);
    sender.readBlock(blk,BlockTokenSecretManager.DUMMY_TOKEN,"cl",0L,fileLen,true,CachingStrategy.newDefaultStrategy());
    sendRecvData("Wrong block ID " + newBlockId + " for read",false);
    sendBuf.reset();
    blk.setBlockId(blkid);
    sender.readBlock(blk,BlockTokenSecretManager.DUMMY_TOKEN,"cl",-1L,fileLen,true,CachingStrategy.newDefaultStrategy());
    sendRecvData("Negative start-offset for read for block " + firstBlock.getBlockId(),false);
    sendBuf.reset();
    sender.readBlock(blk,BlockTokenSecretManager.DUMMY_TOKEN,"cl",fileLen,fileLen,true,CachingStrategy.newDefaultStrategy());
    sendRecvData("Wrong start-offset for reading block " + firstBlock.getBlockId(),false);
    recvBuf.reset();
    BlockOpResponseProto.newBuilder().setStatus(Status.SUCCESS).setReadOpChecksumInfo(ReadOpChecksumInfoProto.newBuilder().setChecksum(DataTransferProtoUtil.toProto(DEFAULT_CHECKSUM)).setChunkOffset(0L)).build().writeDelimitedTo(recvOut);
    sendBuf.reset();
    sender.readBlock(blk,BlockTokenSecretManager.DUMMY_TOKEN,"cl",0L,-1L - random.nextInt(oneMil),true,CachingStrategy.newDefaultStrategy());
    sendRecvData("Negative length for reading block " + firstBlock.getBlockId(),false);
    recvBuf.reset();
    sendResponse(Status.ERROR,null,"opReadBlock " + firstBlock + " received exception java.io.IOException:  "+ "Offset 0 and length 4097 don't match block "+ firstBlock+ " ( blockLen 4096 )",recvOut);
    sendBuf.reset();
    sender.readBlock(blk,BlockTokenSecretManager.DUMMY_TOKEN,"cl",0L,fileLen + 1,true,CachingStrategy.newDefaultStrategy());
    sendRecvData("Wrong length for reading block " + firstBlock.getBlockId(),false);
    sendBuf.reset();
    sender.readBlock(blk,BlockTokenSecretManager.DUMMY_TOKEN,"cl",0L,fileLen,true,CachingStrategy.newDefaultStrategy());
    readFile(fileSys,file,fileLen);
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDatanodeBlockScanner </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReplicaInfoParsing() throws Exception {
  testReplicaInfoParsingSingle(BASE_PATH);
  testReplicaInfoParsingSingle(BASE_PATH + "/subdir1");
  testReplicaInfoParsingSingle(BASE_PATH + "/subdir1/subdir2/subdir3");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockCorruptionRecoveryPolicy2() throws Exception {
  LOG.info("Testing corrupt replica recovery for two corrupt replicas");
  blockCorruptionRecoveryPolicy(5,(short)3,2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * testBlockCorruptionRecoveryPolicy.
 * This tests recovery of corrupt replicas, first for one corrupt replica
 * then for two. The test invokes blockCorruptionRecoveryPolicy which
 * 1. Creates a block with desired number of replicas
 * 2. Corrupts the desired number of replicas and restarts the datanodes
 * containing the corrupt replica. Additionaly we also read the block
 * in case restarting does not report corrupt replicas.
 * Restarting or reading from the datanode would trigger reportBadBlocks 
 * to namenode.
 * NameNode adds it to corruptReplicasMap and neededReplication
 * 3. Test waits until all corrupt replicas are reported, meanwhile
 * Re-replciation brings the block back to healthy state
 * 4. Test again waits until the block is reported with expected number
 * of good replicas.
 */
@Test public void testBlockCorruptionRecoveryPolicy1() throws Exception {
  LOG.info("Testing corrupt replica recovery for one corrupt replica");
  blockCorruptionRecoveryPolicy(4,(short)3,1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDatanodeConfig </h4><pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testMemlockLimit() throws Exception {
  assumeTrue(NativeIO.isAvailable());
  final long memlockLimit=NativeIO.POSIX.getCacheManipulator().getMemlockLimit();
  assumeTrue(memlockLimit != Long.MAX_VALUE);
  File dataDir=new File(BASE_DIR,"data").getCanonicalFile();
  Configuration conf=cluster.getConfiguration(0);
  conf.set(DFSConfigKeys.DFS_DATANODE_DATA_DIR_KEY,makeURI("file",null,fileAsURI(dataDir).getPath()));
  long prevLimit=conf.getLong(DFSConfigKeys.DFS_DATANODE_MAX_LOCKED_MEMORY_KEY,DFSConfigKeys.DFS_DATANODE_MAX_LOCKED_MEMORY_DEFAULT);
  DataNode dn=null;
  try {
    conf.setLong(DFSConfigKeys.DFS_DATANODE_MAX_LOCKED_MEMORY_KEY,memlockLimit);
    dn=DataNode.createDataNode(new String[]{},conf);
    dn.shutdown();
    dn=null;
    conf.setLong(DFSConfigKeys.DFS_DATANODE_MAX_LOCKED_MEMORY_KEY,memlockLimit + 1);
    try {
      dn=DataNode.createDataNode(new String[]{},conf);
    }
 catch (    RuntimeException e) {
      GenericTestUtils.assertExceptionContains("more than the datanode's available RLIMIT_MEMLOCK",e);
    }
  }
  finally {
    if (dn != null) {
      dn.shutdown();
    }
    conf.setLong(DFSConfigKeys.DFS_DATANODE_MAX_LOCKED_MEMORY_KEY,prevLimit);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDatanodeDeath </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimple2() throws IOException {
  simpleTest(2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimple1() throws IOException {
  simpleTest(1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimple0() throws IOException {
  simpleTest(0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testComplex() throws IOException {
  complexTest();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDatanodeLayoutUpgrade </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUpgradeToIdBasedLayout() throws IOException {
  TestDFSUpgradeFromImage upgrade=new TestDFSUpgradeFromImage();
  upgrade.unpackStorage(HADOOP24_DATANODE,HADOOP_DATANODE_DIR_TXT);
  Configuration conf=new Configuration(TestDFSUpgradeFromImage.upgradeConf);
  conf.set(DFSConfigKeys.DFS_DATANODE_DATA_DIR_KEY,System.getProperty("test.build.data") + File.separator + "dfs"+ File.separator+ "data");
  conf.set(DFSConfigKeys.DFS_NAMENODE_NAME_DIR_KEY,System.getProperty("test.build.data") + File.separator + "dfs"+ File.separator+ "name");
  upgrade.upgradeAndVerify(new MiniDFSCluster.Builder(conf).numDataNodes(1).manageDataDfsDirs(false).manageNameDfsDirs(false));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDatanodeReport </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This test attempts to different types of datanode report.
 */
@Test public void testDatanodeReport() throws Exception {
  conf.setInt(DFSConfigKeys.DFS_NAMENODE_HEARTBEAT_RECHECK_INTERVAL_KEY,500);
  conf.setLong(DFSConfigKeys.DFS_HEARTBEAT_INTERVAL_KEY,1L);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(NUM_OF_DATANODES).build();
  try {
    cluster.waitActive();
    final String bpid=cluster.getNamesystem().getBlockPoolId();
    final List<DataNode> datanodes=cluster.getDataNodes();
    final DFSClient client=cluster.getFileSystem().dfs;
    assertReports(NUM_OF_DATANODES,DatanodeReportType.ALL,client,datanodes,bpid);
    assertReports(NUM_OF_DATANODES,DatanodeReportType.LIVE,client,datanodes,bpid);
    assertReports(0,DatanodeReportType.DEAD,client,datanodes,bpid);
    final DataNode last=datanodes.get(datanodes.size() - 1);
    LOG.info("XXX shutdown datanode " + last.getDatanodeUuid());
    last.shutdown();
    DatanodeInfo[] nodeInfo=client.datanodeReport(DatanodeReportType.DEAD);
    while (nodeInfo.length != 1) {
      try {
        Thread.sleep(500);
      }
 catch (      Exception e) {
      }
      nodeInfo=client.datanodeReport(DatanodeReportType.DEAD);
    }
    assertReports(NUM_OF_DATANODES,DatanodeReportType.ALL,client,datanodes,null);
    assertReports(NUM_OF_DATANODES - 1,DatanodeReportType.LIVE,client,datanodes,null);
    assertReports(1,DatanodeReportType.DEAD,client,datanodes,null);
    Thread.sleep(5000);
    assertGauge("ExpiredHeartbeats",1,getMetrics("FSNamesystem"));
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDecommission </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test host/include file functionality. Only datanodes
 * in the include file are allowed to connect to the namenode in a non
 * federated cluster.
 */
@Test(timeout=360000) public void testHostsFile() throws IOException, InterruptedException {
  testHostsFile(1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests recommission for non federated cluster
 */
@Test(timeout=360000) public void testRecommission() throws IOException {
  testRecommission(1,6);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test decommission for federeated cluster
 */
@Test(timeout=360000) public void testDecommissionFederation() throws IOException {
  testDecommission(2,2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests cluster storage statistics during decommissioning for
 * federated cluster
 */
@Test(timeout=360000) public void testClusterStatsFederation() throws Exception {
  testClusterStats(3);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests cluster storage statistics during decommissioning for non
 * federated cluster
 */
@Test(timeout=360000) public void testClusterStats() throws Exception {
  testClusterStats(1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test host/include file functionality. Only datanodes
 * in the include file are allowed to connect to the namenode in a 
 * federated cluster.
 */
@Test(timeout=360000) public void testHostsFileFederation() throws IOException, InterruptedException {
  testHostsFile(3);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test decommission process on standby NN.
 * Verify admins can run "dfsadmin -refreshNodes" on SBN and decomm
 * process can finish as long as admins run "dfsadmin -refreshNodes"
 * on active NN.
 * SBN used to mark excess replica upon recommission. The SBN's pick
 * for excess replica could be different from the one picked by ANN.
 * That creates inconsistent state and prevent SBN from finishing
 * decommission.
 */
@Test(timeout=360000) public void testDecommissionOnStandby() throws Exception {
  Configuration hdfsConf=new HdfsConfiguration(conf);
  hdfsConf.setInt(DFSConfigKeys.DFS_HA_TAILEDITS_PERIOD_KEY,1);
  hdfsConf.setInt(DFSConfigKeys.DFS_NAMENODE_HEARTBEAT_RECHECK_INTERVAL_KEY,30000);
  hdfsConf.setInt(DFSConfigKeys.DFS_NAMENODE_TOLERATE_HEARTBEAT_MULTIPLIER_KEY,2);
  long slowHeartbeatDNwaitTime=hdfsConf.getLong(DFSConfigKeys.DFS_HEARTBEAT_INTERVAL_KEY,DFSConfigKeys.DFS_HEARTBEAT_INTERVAL_DEFAULT) * 1000 * (hdfsConf.getInt(DFSConfigKeys.DFS_NAMENODE_TOLERATE_HEARTBEAT_MULTIPLIER_KEY,DFSConfigKeys.DFS_NAMENODE_TOLERATE_HEARTBEAT_MULTIPLIER_DEFAULT) + 1);
  cluster=new MiniDFSCluster.Builder(hdfsConf).nnTopology(MiniDFSNNTopology.simpleHATopology()).numDataNodes(3).build();
  cluster.transitionToActive(0);
  cluster.waitActive();
  Path file1=new Path("testDecommissionHA.dat");
  int replicas=3;
  FileSystem activeFileSys=cluster.getFileSystem(0);
  writeFile(activeFileSys,file1,replicas);
  HATestUtil.waitForStandbyToCatchUp(cluster.getNameNode(0),cluster.getNameNode(1));
  hdfsConf.setLong(DFSConfigKeys.DFS_HEARTBEAT_INTERVAL_KEY,30);
  cluster.startDataNodes(hdfsConf,1,true,null,null,null);
  DataNode lastDN=cluster.getDataNodes().get(3);
  lastDN.getDatanodeUuid();
  DataNode firstDN=cluster.getDataNodes().get(0);
  DatanodeInfo decommissionedNodeFromANN=decommissionNode(0,firstDN.getDatanodeUuid(),null,AdminStates.DECOMMISSIONED);
  DatanodeInfo decomNodeFromSBN=decommissionNode(1,firstDN.getDatanodeUuid(),null,AdminStates.DECOMMISSIONED);
  Thread.sleep(slowHeartbeatDNwaitTime);
  recomissionNode(1,decomNodeFromSBN);
  MiniDFSCluster.DataNodeProperties LastDNprop=cluster.stopDataNode(3);
  LastDNprop.conf.setLong(DFSConfigKeys.DFS_HEARTBEAT_INTERVAL_KEY,HEARTBEAT_INTERVAL);
  cluster.restartDataNode(LastDNprop);
  MiniDFSCluster.DataNodeProperties nextToLastDNprop=cluster.stopDataNode(2);
  nextToLastDNprop.conf.setLong(DFSConfigKeys.DFS_HEARTBEAT_INTERVAL_KEY,30);
  cluster.restartDataNode(nextToLastDNprop);
  cluster.waitActive();
  Thread.sleep(slowHeartbeatDNwaitTime);
  recomissionNode(0,decommissionedNodeFromANN);
  cluster.triggerHeartbeats();
  HATestUtil.waitForDNDeletions(cluster);
  cluster.triggerDeletionReports();
  decommissionNode(0,firstDN.getDatanodeUuid(),null,AdminStates.DECOMMISSIONED);
  decommissionNode(1,firstDN.getDatanodeUuid(),null,AdminStates.DECOMMISSIONED);
  cluster.shutdown();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests decommission for non federated cluster
 */
@Test(timeout=360000) public void testDecommission() throws IOException {
  testDecommission(1,6);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000) public void testDecommissionWithOpenfile() throws IOException, InterruptedException {
  LOG.info("Starting test testDecommissionWithOpenfile");
  startCluster(1,7,conf);
  FileSystem fileSys=cluster.getFileSystem(0);
  FSNamesystem ns=cluster.getNamesystem(0);
  String openFile="/testDecommissionWithOpenfile.dat";
  writeFile(fileSys,new Path(openFile),(short)3);
  FSDataOutputStream fdos=fileSys.append(new Path(openFile));
  LocatedBlocks lbs=NameNodeAdapter.getBlockLocations(cluster.getNameNode(0),openFile,0,fileSize);
  DatanodeInfo[] dnInfos4LastBlock=lbs.getLastLocatedBlock().getLocations();
  DatanodeInfo[] dnInfos4FirstBlock=lbs.get(0).getLocations();
  ArrayList<String> nodes=new ArrayList<String>();
  ArrayList<DatanodeInfo> dnInfos=new ArrayList<DatanodeInfo>();
  for (  DatanodeInfo datanodeInfo : dnInfos4FirstBlock) {
    DatanodeInfo found=datanodeInfo;
    for (    DatanodeInfo dif : dnInfos4LastBlock) {
      if (datanodeInfo.equals(dif)) {
        found=null;
      }
    }
    if (found != null) {
      nodes.add(found.getXferAddr());
      dnInfos.add(found);
    }
  }
  nodes.add(dnInfos4LastBlock[0].getXferAddr());
  dnInfos.add(dnInfos4LastBlock[0]);
  writeConfigFile(excludeFile,nodes);
  refreshNodes(ns,conf);
  for (  DatanodeInfo dn : dnInfos) {
    waitNodeState(dn,AdminStates.DECOMMISSIONED);
  }
  fdos.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestDistributedFileSystem </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDFSCloseOrdering() throws Exception {
  DistributedFileSystem fs=new MyDistributedFileSystem();
  Path path=new Path("/a");
  fs.deleteOnExit(path);
  fs.close();
  InOrder inOrder=inOrder(fs.dfs);
  inOrder.verify(fs.dfs).closeOutputStreams(eq(false));
  inOrder.verify(fs.dfs).delete(eq(path.toString()),eq(true));
  inOrder.verify(fs.dfs).close();
}

</code></pre>

<br>
<pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testListFiles() throws IOException {
  Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).build();
  try {
    DistributedFileSystem fs=cluster.getFileSystem();
    final Path relative=new Path("relative");
    fs.create(new Path(relative,"foo")).close();
    final List<LocatedFileStatus> retVal=new ArrayList<LocatedFileStatus>();
    final RemoteIterator<LocatedFileStatus> iter=fs.listFiles(relative,true);
    while (iter.hasNext()) {
      retVal.add(iter.next());
    }
    System.out.println("retVal = " + retVal);
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAllWithDualPort() throws Exception {
  dualPortTesting=true;
  try {
    testFileSystemCloseAll();
    testDFSClose();
    testDFSClient();
    testFileChecksum();
  }
  finally {
    dualPortTesting=false;
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStatistics() throws Exception {
  int lsLimit=2;
  final Configuration conf=getTestConfiguration();
  conf.setInt(DFSConfigKeys.DFS_LIST_LIMIT,lsLimit);
  final MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).build();
  try {
    final FileSystem fs=cluster.getFileSystem();
    Path dir=new Path("/test");
    Path file=new Path(dir,"file");
    int readOps=DFSTestUtil.getStatistics(fs).getReadOps();
    int writeOps=DFSTestUtil.getStatistics(fs).getWriteOps();
    int largeReadOps=DFSTestUtil.getStatistics(fs).getLargeReadOps();
    fs.mkdirs(dir);
    checkStatistics(fs,readOps,++writeOps,largeReadOps);
    FSDataOutputStream out=fs.create(file,(short)1);
    out.close();
    checkStatistics(fs,readOps,++writeOps,largeReadOps);
    FileStatus status=fs.getFileStatus(file);
    checkStatistics(fs,++readOps,writeOps,largeReadOps);
    fs.getFileBlockLocations(file,0,0);
    checkStatistics(fs,++readOps,writeOps,largeReadOps);
    fs.getFileBlockLocations(status,0,0);
    checkStatistics(fs,++readOps,writeOps,largeReadOps);
    FSDataInputStream in=fs.open(file);
    in.close();
    checkStatistics(fs,++readOps,writeOps,largeReadOps);
    fs.setReplication(file,(short)2);
    checkStatistics(fs,readOps,++writeOps,largeReadOps);
    Path file1=new Path(dir,"file1");
    fs.rename(file,file1);
    checkStatistics(fs,readOps,++writeOps,largeReadOps);
    fs.getContentSummary(file1);
    checkStatistics(fs,++readOps,writeOps,largeReadOps);
    for (int i=0; i < 10; i++) {
      Path p=new Path(dir,Integer.toString(i));
      fs.mkdirs(p);
      FileStatus[] list=fs.listStatus(dir);
      if (list.length > lsLimit) {
        int iterations=(int)Math.ceil((double)list.length / lsLimit);
        largeReadOps+=iterations;
        readOps+=iterations;
      }
 else {
        readOps++;
      }
      checkStatistics(fs,readOps,++writeOps,largeReadOps);
    }
    fs.getStatus(file1);
    checkStatistics(fs,++readOps,writeOps,largeReadOps);
    fs.getFileChecksum(file1);
    checkStatistics(fs,++readOps,writeOps,largeReadOps);
    fs.setPermission(file1,new FsPermission((short)0777));
    checkStatistics(fs,readOps,++writeOps,largeReadOps);
    fs.setTimes(file1,0L,0L);
    checkStatistics(fs,readOps,++writeOps,largeReadOps);
    UserGroupInformation ugi=UserGroupInformation.getCurrentUser();
    fs.setOwner(file1,ugi.getUserName(),ugi.getGroupNames()[0]);
    checkStatistics(fs,readOps,++writeOps,largeReadOps);
    fs.delete(dir,true);
    checkStatistics(fs,readOps,++writeOps,largeReadOps);
  }
  finally {
    if (cluster != null)     cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFileSystemCloseAll() throws Exception {
  Configuration conf=getTestConfiguration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(0).build();
  URI address=FileSystem.getDefaultUri(conf);
  try {
    FileSystem.closeAll();
    conf=getTestConfiguration();
    FileSystem.setDefaultUri(conf,address);
    FileSystem.get(conf);
    FileSystem.get(conf);
    FileSystem.closeAll();
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests DFSClient.close throws no ConcurrentModificationException if 
 * multiple files are open.
 * Also tests that any cached sockets are closed. (HDFS-3359)
 */
@Test public void testDFSClose() throws Exception {
  Configuration conf=getTestConfiguration();
  MiniDFSCluster cluster=null;
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(2).build();
    FileSystem fileSys=cluster.getFileSystem();
    fileSys.create(new Path("/test/dfsclose/file-0"));
    fileSys.create(new Path("/test/dfsclose/file-1"));
    Path p=new Path("/non-empty-file");
    DFSTestUtil.createFile(fileSys,p,1L,(short)1,0L);
    DFSTestUtil.readFile(fileSys,p);
    fileSys.close();
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAllWithNoXmlDefaults() throws Exception {
  noXmlDefaults=true;
  try {
    testFileSystemCloseAll();
    testDFSClose();
    testDFSClient();
    testFileChecksum();
  }
  finally {
    noXmlDefaults=false;
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEmptyDelegationToken() throws IOException {
  Configuration conf=getTestConfiguration();
  MiniDFSCluster cluster=null;
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(1).build();
    FileSystem fileSys=cluster.getFileSystem();
    fileSys.getDelegationToken("");
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestEncryptedTransfer </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEncryptedWriteWithTwoDns() throws IOException {
  testEncryptedWrite(2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEncryptedWriteWithMultipleDns() throws IOException {
  testEncryptedWrite(10);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEncryptedWriteWithOneDn() throws IOException {
  testEncryptedWrite(1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestEncryptionZones </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testRenameFileContext() throws Exception {
  doRenameEncryptionZone(fcWrapper);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test listing encryption zones as a non super user.
 */
@Test(timeout=60000) public void testListEncryptionZonesAsNonSuperUser() throws Exception {
  final UserGroupInformation user=UserGroupInformation.createUserForTesting("user",new String[]{"mygroup"});
  final Path testRoot=new Path(fsHelper.getTestRootDir());
  final Path superPath=new Path(testRoot,"superuseronly");
  final Path allPath=new Path(testRoot,"accessall");
  fsWrapper.mkdir(superPath,new FsPermission((short)0700),true);
  dfsAdmin.createEncryptionZone(superPath,TEST_KEY);
  fsWrapper.mkdir(allPath,new FsPermission((short)0707),true);
  dfsAdmin.createEncryptionZone(allPath,TEST_KEY);
  user.doAs(new PrivilegedExceptionAction(){
    @Override public Object run() throws Exception {
      final HdfsAdmin userAdmin=new HdfsAdmin(FileSystem.getDefaultUri(conf),conf);
      try {
        userAdmin.listEncryptionZones();
      }
 catch (      AccessControlException e) {
        assertExceptionContains("Superuser privilege is required",e);
      }
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testRenameFileSystem() throws Exception {
  doRenameEncryptionZone(fsWrapper);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestFSInputChecker </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFSInputChecker() throws Exception {
  Configuration conf=new HdfsConfiguration();
  conf.setLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,BLOCK_SIZE);
  conf.setInt(DFSConfigKeys.DFS_BYTES_PER_CHECKSUM_KEY,BYTES_PER_SUM);
  rand.nextBytes(expected);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).build();
  FileSystem fileSys=cluster.getFileSystem();
  try {
    testChecker(fileSys,true);
    testChecker(fileSys,false);
    testSeekAndRead(fileSys);
  }
  finally {
    fileSys.close();
    cluster.shutdown();
  }
  fileSys=FileSystem.getLocal(conf);
  try {
    testChecker(fileSys,true);
    testChecker(fileSys,false);
    testFileCorruption((LocalFileSystem)fileSys);
    testSeekAndRead(fileSys);
  }
  finally {
    fileSys.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestFSOutputSummer </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void TestDFSCheckSumType() throws Exception {
  Configuration conf=new HdfsConfiguration();
  conf.setLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,BLOCK_SIZE);
  conf.setInt(DFSConfigKeys.DFS_BYTES_PER_CHECKSUM_KEY,BYTES_PER_CHECKSUM);
  conf.set(DFSConfigKeys.DFS_CHECKSUM_TYPE_KEY,"NULL");
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(NUM_OF_DATANODES).build();
  fileSys=cluster.getFileSystem();
  try {
    Path file=new Path("try.dat");
    Random rand=new Random(seed);
    rand.nextBytes(expected);
    writeFile1(file);
  }
  finally {
    fileSys.close();
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test write operation for output stream in DFS.
 */
@Test public void testFSOutputSummer() throws Exception {
  doTestFSOutputSummer("CRC32");
  doTestFSOutputSummer("CRC32C");
  doTestFSOutputSummer("NULL");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestFetchImage </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Download a few fsimages using `hdfs dfsadmin -fetchImage ...' and verify
 * the results.
 */
@Test public void testFetchImage() throws Exception {
  FETCHED_IMAGE_FILE.mkdirs();
  Configuration conf=new Configuration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).build();
  FileSystem fs=null;
  try {
    DFSAdmin dfsAdmin=new DFSAdmin();
    dfsAdmin.setConf(conf);
    runFetchImage(dfsAdmin,cluster);
    fs=cluster.getFileSystem();
    fs.mkdirs(new Path("/foo"));
    fs.mkdirs(new Path("/foo2"));
    fs.mkdirs(new Path("/foo3"));
    cluster.getNameNodeRpc().setSafeMode(SafeModeAction.SAFEMODE_ENTER,false);
    cluster.getNameNodeRpc().saveNamespace();
    cluster.getNameNodeRpc().setSafeMode(SafeModeAction.SAFEMODE_LEAVE,false);
    runFetchImage(dfsAdmin,cluster);
  }
  finally {
    if (fs != null) {
      fs.close();
    }
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestFiHFlush </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Similar to {@link #hFlushFi01_b()} but for a pipeline's 2nd datanode
 */
@Test public void hFlushFi03_b() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  Configuration conf=new HdfsConfiguration();
  int customPerChecksumSize=512;
  int customBlockSize=customPerChecksumSize * 3;
  conf.setInt(DFSConfigKeys.DFS_BYTES_PER_CHECKSUM_KEY,customPerChecksumSize);
  conf.setLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,customBlockSize);
  runDiskErrorTest(conf,methodName,customBlockSize,new DerrAction(methodName,2),2,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Similar to {@link #hFlushFi01_c()} but for a pipeline's 2nd datanode
 */
@Test public void hFlushFi03_c() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  Configuration conf=new HdfsConfiguration();
  int customPerChecksumSize=400;
  int customBlockSize=customPerChecksumSize * 3;
  conf.setInt(DFSConfigKeys.DFS_BYTES_PER_CHECKSUM_KEY,customPerChecksumSize);
  conf.setLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,customBlockSize);
  runDiskErrorTest(conf,methodName,customBlockSize,new DerrAction(methodName,2),2,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Similar to {@link #hFlushFi01_a()} but for a pipeline's 2nd datanode
 */
@Test public void hFlushFi03_a() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runDiskErrorTest(new HdfsConfiguration(),methodName,AppendTestUtil.BLOCK_SIZE,new DerrAction(methodName,2),2,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Similar to {@link #hFlushFi01_b()} but writing happens
 * across block and checksum's boundaries
 */
@Test public void hFlushFi01_c() throws Exception {
  final String methodName=FiTestUtil.getMethodName();
  Configuration conf=new HdfsConfiguration();
  int customPerChecksumSize=400;
  int customBlockSize=customPerChecksumSize * 3;
  conf.setInt(DFSConfigKeys.DFS_BYTES_PER_CHECKSUM_KEY,customPerChecksumSize);
  conf.setLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,customBlockSize);
  runDiskErrorTest(conf,methodName,customBlockSize,new DerrAction(methodName,0),0,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * The tests calls {@link #runDiskErrorTest(Configuration,String,int,DerrAction,int,boolean)}to make a number of writes across a block boundaries.
 * hflush() is called after each write() during a pipeline life time.
 * Thus, injected fault ought to be triggered for 0th datanode
 */
@Test public void hFlushFi01_b() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  Configuration conf=new HdfsConfiguration();
  int customPerChecksumSize=512;
  int customBlockSize=customPerChecksumSize * 3;
  conf.setInt(DFSConfigKeys.DFS_BYTES_PER_CHECKSUM_KEY,customPerChecksumSize);
  conf.setLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,customBlockSize);
  runDiskErrorTest(conf,methodName,customBlockSize,new DerrAction(methodName,0),0,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * The tests calls {@link #runDiskErrorTest(Configuration,String,int,DerrAction,int,boolean)}to make a number of writes within a block boundaries.
 * Although hflush() is called the test shouldn't expect an IOException
 * in this case because the invocation is happening after write() call 
 * is complete when pipeline doesn't exist anymore.
 * Thus, injected fault won't be triggered for 0th datanode
 */
@Test public void hFlushFi01_a() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runDiskErrorTest(new HdfsConfiguration(),methodName,AppendTestUtil.BLOCK_SIZE,new DerrAction(methodName,0),0,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Similar to {@link #hFlushFi01_a()} but for a pipeline's 1st datanode
 */
@Test public void hFlushFi02_a() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runDiskErrorTest(new HdfsConfiguration(),methodName,AppendTestUtil.BLOCK_SIZE,new DerrAction(methodName,1),1,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Similar to {@link #hFlushFi01_c()} but for a pipeline's 1st datanode
 */
@Test public void hFlushFi02_c() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  Configuration conf=new HdfsConfiguration();
  int customPerChecksumSize=400;
  int customBlockSize=customPerChecksumSize * 3;
  conf.setInt(DFSConfigKeys.DFS_BYTES_PER_CHECKSUM_KEY,customPerChecksumSize);
  conf.setLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,customBlockSize);
  runDiskErrorTest(conf,methodName,customBlockSize,new DerrAction(methodName,1),1,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Similar to {@link #hFlushFi01_b()} but for a pipeline's 1st datanode
 */
@Test public void hFlushFi02_b() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  Configuration conf=new HdfsConfiguration();
  int customPerChecksumSize=512;
  int customBlockSize=customPerChecksumSize * 3;
  conf.setInt(DFSConfigKeys.DFS_BYTES_PER_CHECKSUM_KEY,customPerChecksumSize);
  conf.setLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,customBlockSize);
  runDiskErrorTest(conf,methodName,customBlockSize,new DerrAction(methodName,1),1,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestFiPipelines </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Similar to pipeline_04 but sends many packets into a pipeline 
 * @throws IOException in case of an error
 */
@Test public void pipeline_05() throws IOException {
  final String METHOD_NAME=GenericTestUtils.getMethodName();
  if (LOG.isDebugEnabled()) {
    LOG.debug("Running " + METHOD_NAME);
  }
  final PipelinesTestUtil.PipelinesTest pipst=(PipelinesTestUtil.PipelinesTest)PipelinesTestUtil.initTest();
  pipst.fiCallSetNumBytes.set(new PipelinesTestUtil.ReceivedCheckAction(METHOD_NAME));
  pipst.fiCallSetBytesAcked.set(new PipelinesTestUtil.AckedCheckAction(METHOD_NAME));
  Path filePath=new Path("/" + METHOD_NAME + ".dat");
  FSDataOutputStream fsOut=fs.create(filePath);
  for (int i=0; i < 17; i++) {
    TestPipelines.writeData(fsOut,23);
  }
  fs.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test initiates and sets actions created by injection framework. The actions
 * work with both aspects of sending acknologment packets in a pipeline.
 * Creates and closes a file of certain length < packet size.
 * Injected actions will check if number of visible bytes at datanodes equals
 * to number of acknoleged bytes
 * @throws IOException in case of an error
 */
@Test public void pipeline_04() throws IOException {
  final String METHOD_NAME=GenericTestUtils.getMethodName();
  if (LOG.isDebugEnabled()) {
    LOG.debug("Running " + METHOD_NAME);
  }
  final PipelinesTestUtil.PipelinesTest pipst=(PipelinesTestUtil.PipelinesTest)PipelinesTestUtil.initTest();
  pipst.fiCallSetNumBytes.set(new PipelinesTestUtil.ReceivedCheckAction(METHOD_NAME));
  pipst.fiCallSetBytesAcked.set(new PipelinesTestUtil.AckedCheckAction(METHOD_NAME));
  Path filePath=new Path("/" + METHOD_NAME + ".dat");
  FSDataOutputStream fsOut=fs.create(filePath);
  TestPipelines.writeData(fsOut,2);
  fs.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestFileAppend </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * FileNotFoundException is expected for appending to a non-exisiting file
 * @throws FileNotFoundException as the result
 */
@Test(expected=FileNotFoundException.class) public void testFileNotFound() throws IOException {
  Configuration conf=new HdfsConfiguration();
  if (simulatedStorage) {
    SimulatedFSDataset.setFactory(conf);
  }
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).build();
  FileSystem fs=cluster.getFileSystem();
  try {
    Path file1=new Path("/nonexistingfile.dat");
    fs.append(file1);
  }
  finally {
    fs.close();
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test a simple flush on a simple HDFS file.
 * @throws IOException an exception might be thrown
 */
@Test public void testSimpleFlush() throws IOException {
  Configuration conf=new HdfsConfiguration();
  if (simulatedStorage) {
    SimulatedFSDataset.setFactory(conf);
  }
  fileContents=AppendTestUtil.initBuffer(AppendTestUtil.FILE_SIZE);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).build();
  FileSystem fs=cluster.getFileSystem();
  try {
    Path file1=new Path("/simpleFlush.dat");
    FSDataOutputStream stm=AppendTestUtil.createFile(fs,file1,1);
    System.out.println("Created file simpleFlush.dat");
    int mid=AppendTestUtil.FILE_SIZE / 2;
    stm.write(fileContents,0,mid);
    stm.hflush();
    System.out.println("Wrote and Flushed first part of file.");
    stm.write(fileContents,mid,AppendTestUtil.FILE_SIZE - mid);
    System.out.println("Written second part of file");
    stm.hflush();
    stm.hflush();
    System.out.println("Wrote and Flushed second part of file.");
    checkFile(fs,file1,1);
    stm.close();
    System.out.println("Closed file.");
    AppendTestUtil.checkFullFile(fs,file1,AppendTestUtil.FILE_SIZE,fileContents,"Read 2");
  }
 catch (  IOException e) {
    System.out.println("Exception :" + e);
    throw e;
  }
catch (  Throwable e) {
    System.out.println("Throwable :" + e);
    e.printStackTrace();
    throw new IOException("Throwable : " + e);
  }
 finally {
    fs.close();
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that file data can be flushed.
 * @throws IOException an exception might be thrown
 */
@Test public void testComplexFlush() throws IOException {
  Configuration conf=new HdfsConfiguration();
  if (simulatedStorage) {
    SimulatedFSDataset.setFactory(conf);
  }
  fileContents=AppendTestUtil.initBuffer(AppendTestUtil.FILE_SIZE);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).build();
  FileSystem fs=cluster.getFileSystem();
  try {
    Path file1=new Path("/complexFlush.dat");
    FSDataOutputStream stm=AppendTestUtil.createFile(fs,file1,1);
    System.out.println("Created file complexFlush.dat");
    int start=0;
    for (start=0; (start + 29) < AppendTestUtil.FILE_SIZE; ) {
      stm.write(fileContents,start,29);
      stm.hflush();
      start+=29;
    }
    stm.write(fileContents,start,AppendTestUtil.FILE_SIZE - start);
    checkFile(fs,file1,1);
    stm.close();
    AppendTestUtil.checkFullFile(fs,file1,AppendTestUtil.FILE_SIZE,fileContents,"Read 2");
  }
 catch (  IOException e) {
    System.out.println("Exception :" + e);
    throw e;
  }
catch (  Throwable e) {
    System.out.println("Throwable :" + e);
    e.printStackTrace();
    throw new IOException("Throwable : " + e);
  }
 finally {
    fs.close();
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestFileAppend3 </h4><pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * TC12: Append to partial CRC chunk
 * @throws IOException an exception might be thrown
 */
@Test public void testTC12() throws Exception {
  final Path p=new Path("/TC12/foo");
  System.out.println("p=" + p);
  final int len1=25687;
{
    FSDataOutputStream out=fs.create(p,false,buffersize,REPLICATION,BLOCK_SIZE);
    AppendTestUtil.write(out,0,len1);
    out.close();
  }
  final int len2=5877;
{
    FSDataOutputStream out=fs.append(p);
    AppendTestUtil.write(out,len1,len2);
    out.close();
  }
  AppendTestUtil.check(fs,p,len1 + len2);
}

</code></pre>

<br>
<pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * TC1: Append on block boundary.
 * @throws IOException an exception might be thrown
 */
@Test public void testTC1() throws Exception {
  final Path p=new Path("/TC1/foo");
  System.out.println("p=" + p);
  final int len1=(int)BLOCK_SIZE;
{
    FSDataOutputStream out=fs.create(p,false,buffersize,REPLICATION,BLOCK_SIZE);
    AppendTestUtil.write(out,0,len1);
    out.close();
  }
  final int len2=(int)BLOCK_SIZE / 2;
{
    FSDataOutputStream out=fs.append(p);
    AppendTestUtil.write(out,len1,len2);
    out.close();
  }
  AppendTestUtil.check(fs,p,len1 + len2);
}

</code></pre>

<br>
<pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * TC2: Append on non-block boundary.
 * @throws IOException an exception might be thrown
 */
@Test public void testTC2() throws Exception {
  final Path p=new Path("/TC2/foo");
  System.out.println("p=" + p);
  final int len1=(int)(BLOCK_SIZE + BLOCK_SIZE / 2);
{
    FSDataOutputStream out=fs.create(p,false,buffersize,REPLICATION,BLOCK_SIZE);
    AppendTestUtil.write(out,0,len1);
    out.close();
  }
  AppendTestUtil.check(fs,p,len1);
  final int len2=(int)BLOCK_SIZE / 4;
{
    FSDataOutputStream out=fs.append(p);
    AppendTestUtil.write(out,len1,len2);
    out.close();
  }
  AppendTestUtil.check(fs,p,len1 + len2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestFileAppend4 </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test the updation of NeededReplications for the Appended Block
 */
@Test(timeout=60000) public void testUpdateNeededReplicationsForAppendedFile() throws Exception {
  Configuration conf=new Configuration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(1).build();
  DistributedFileSystem fileSystem=null;
  try {
    fileSystem=cluster.getFileSystem();
    Path f=new Path("/testAppend");
    FSDataOutputStream create=fileSystem.create(f,(short)2);
    create.write("/testAppend".getBytes());
    create.close();
    FSDataOutputStream append=fileSystem.append(f);
    append.write("/testAppend".getBytes());
    append.close();
    cluster.startDataNodes(conf,1,true,null,null);
    DFSTestUtil.waitReplication(fileSystem,f,(short)2);
  }
  finally {
    if (null != fileSystem) {
      fileSystem.close();
    }
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestFileAppendRestart </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test to append to the file, when one of datanode in the existing pipeline
 * is down.
 */
@Test public void testAppendWithPipelineRecovery() throws Exception {
  Configuration conf=new Configuration();
  MiniDFSCluster cluster=null;
  FSDataOutputStream out=null;
  try {
    cluster=new MiniDFSCluster.Builder(conf).manageDataDfsDirs(true).manageNameDfsDirs(true).numDataNodes(4).racks(new String[]{"/rack1","/rack1","/rack1","/rack2"}).build();
    cluster.waitActive();
    DistributedFileSystem fs=cluster.getFileSystem();
    Path path=new Path("/test1");
    out=fs.create(path,true,BLOCK_SIZE,(short)3,BLOCK_SIZE);
    AppendTestUtil.write(out,0,1024);
    out.close();
    cluster.stopDataNode(3);
    out=fs.append(path);
    AppendTestUtil.write(out,1024,1024);
    out.close();
    cluster.restartNameNode(true);
    AppendTestUtil.check(fs,path,2048);
  }
  finally {
    IOUtils.closeStream(out);
    if (null != cluster) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestFileConcurrentReader </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testUnfinishedBlockCRCErrorTransferTo() throws IOException {
  runTestUnfinishedBlockCRCError(true,SyncType.SYNC,DEFAULT_WRITE_SIZE);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testUnfinishedBlockCRCErrorTransferToVerySmallWrite() throws IOException {
  runTestUnfinishedBlockCRCError(true,SyncType.SYNC,SMALL_WRITE_SIZE);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testUnfinishedBlockCRCErrorNormalTransfer() throws IOException {
  runTestUnfinishedBlockCRCError(false,SyncType.SYNC,DEFAULT_WRITE_SIZE);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that that writes to an incomplete block are available to a reader
 */
@Test(timeout=30000) public void testUnfinishedBlockRead() throws IOException {
  Path file1=new Path("/unfinished-block");
  FSDataOutputStream stm=TestFileCreation.createFile(fileSystem,file1,1);
  int partialBlockSize=blockSize / 2;
  writeFileAndSync(stm,partialBlockSize);
  checkCanRead(fileSystem,file1,partialBlockSize);
  stm.close();
}

</code></pre>

<br>
<pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * test case: if the BlockSender decides there is only one packet to send,
 * the previous computation of the pktSize based on transferToAllowed
 * would result in too small a buffer to do the buffer-copy needed
 * for partial chunks.
 */
@Test(timeout=30000) public void testUnfinishedBlockPacketBufferOverrun() throws IOException {
  Path path=new Path("/");
  System.out.println("Path : \"" + path.toString() + "\"");
  Path file1=new Path("/unfinished-block");
  final FSDataOutputStream stm=TestFileCreation.createFile(fileSystem,file1,1);
  final int bytesPerChecksum=conf.getInt("io.bytes.per.checksum",512);
  final int partialBlockSize=bytesPerChecksum - 1;
  writeFileAndSync(stm,partialBlockSize);
  checkCanRead(fileSystem,file1,partialBlockSize);
  stm.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testUnfinishedBlockCRCErrorNormalTransferVerySmallWrite() throws IOException {
  runTestUnfinishedBlockCRCError(false,SyncType.SYNC,SMALL_WRITE_SIZE);
}

</code></pre>

<br>
<pre class="type-5 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore public void _testUnfinishedBlockCRCErrorNormalTransferAppend() throws IOException {
  runTestUnfinishedBlockCRCError(false,SyncType.APPEND,DEFAULT_WRITE_SIZE);
}

</code></pre>

<br>
<pre class="type-5 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Ignore public void _testUnfinishedBlockCRCErrorTransferToAppend() throws IOException {
  runTestUnfinishedBlockCRCError(true,SyncType.APPEND,DEFAULT_WRITE_SIZE);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestFileCorruption </h4><pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * check if local FS can handle corrupted blocks properly 
 */
@Test public void testLocalFileCorruption() throws Exception {
  Configuration conf=new HdfsConfiguration();
  Path file=new Path(PathUtils.getTestDirName(getClass()),"corruptFile");
  FileSystem fs=FileSystem.getLocal(conf);
  DataOutputStream dos=fs.create(file);
  dos.writeBytes("original bytes");
  dos.close();
  dos=new DataOutputStream(new FileOutputStream(file.toString()));
  dos.writeBytes("corruption");
  dos.close();
  DataInputStream dis=fs.open(file,512);
  try {
    System.out.println("A ChecksumException is expected to be logged.");
    dis.readByte();
  }
 catch (  ChecksumException ignore) {
  }
  fs.delete(file,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestFileCreation </h4><pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Same test but the client should use DN hostnames 
 */
@Test public void testFileCreationUsingHostname() throws IOException {
  assumeTrue(System.getProperty("os.name").startsWith("Linux"));
  checkFileCreation(null,true);
}

</code></pre>

<br>
<pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFsClose() throws Exception {
  System.out.println("test file system close start");
  final int DATANODE_NUM=3;
  Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(DATANODE_NUM).build();
  DistributedFileSystem dfs=null;
  try {
    cluster.waitActive();
    dfs=cluster.getFileSystem();
    final String f=DIR + "foofs";
    final Path fpath=new Path(f);
    FSDataOutputStream out=TestFileCreation.createFile(dfs,fpath,DATANODE_NUM);
    out.write("something".getBytes());
    dfs.close();
  }
  finally {
    System.out.println("testFsClose successful");
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFileCreation() throws IOException {
  checkFileCreation(null,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Another regression test for HDFS-3626. This one creates files using
 * a Path instantiated from a string object.
 */
@Test public void testCreateNonCanonicalPathAndRestartFromString() throws Exception {
  doCreateTest(CreationMethod.PATH_FROM_STRING);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that file data becomes available before file is closed.
 */
@Test public void testFileCreationSimulated() throws IOException {
  simulatedStorage=true;
  testFileCreation();
  simulatedStorage=false;
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Regression test for HDFS-3626. Creates a file using a non-canonical path
 * (i.e. with extra slashes between components) and makes sure that the NN
 * can properly restart.
 * This test RPCs directly to the NN, to ensure that even an old client
 * which passes an invalid path won't cause corrupt edits.
 */
@Test public void testCreateNonCanonicalPathAndRestartRpc() throws Exception {
  doCreateTest(CreationMethod.DIRECT_NN_RPC);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Another regression test for HDFS-3626. This one creates files using
 * a Path instantiated from a URI object.
 */
@Test public void testCreateNonCanonicalPathAndRestartFromUri() throws Exception {
  doCreateTest(CreationMethod.PATH_FROM_URI);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestFsShellPermission </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDelete() throws Exception {
  Configuration conf=null;
  MiniDFSCluster cluster=null;
  try {
    conf=new Configuration();
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(2).build();
    String nnUri=FileSystem.getDefaultUri(conf).toString();
    FileSystem fs=FileSystem.get(URI.create(nnUri),conf);
    ArrayList<TestDeleteHelper> ta=new ArrayList<TestDeleteHelper>();
    ta.add(genRmrEmptyDirWithReadPerm());
    ta.add(genRmrEmptyDirWithNoPerm());
    ta.add(genRmrfEmptyDirWithNoPerm());
    ta.add(genRmrNonEmptyDirWithReadPerm());
    ta.add(genRmrNonEmptyDirWithNoPerm());
    ta.add(genRmrNonEmptyDirWithAllPerm());
    ta.add(genRmrfNonEmptyDirWithNoPerm());
    ta.add(genDeleteSingleFileNotAsOwner());
    for (    TestDeleteHelper t : ta) {
      t.execute(conf,fs);
    }
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestGetFileChecksum </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetFileChecksum() throws Exception {
  testGetFileChecksum(new Path("/foo"),BLOCKSIZE / 4);
  testGetFileChecksum(new Path("/bar"),BLOCKSIZE / 4 - 1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestHDFSServerPorts </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNameNodePorts() throws Exception {
  runTestNameNodePorts(false);
  runTestNameNodePorts(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestHDFSTrash </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTrash() throws IOException {
  TestTrash.trashShell(cluster.getFileSystem(),new Path("/"));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNonDefaultFS() throws IOException {
  FileSystem fs=cluster.getFileSystem();
  Configuration conf=fs.getConf();
  conf.set(DFSConfigKeys.FS_DEFAULT_NAME_KEY,fs.getUri().toString());
  TestTrash.trashNonDefaultFS(conf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestHFlush </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * The test calls{@link #doTheJob(Configuration,String,long,short,boolean,EnumSet)}while requiring the semantic of {@link SyncFlag#UPDATE_LENGTH}.
 */
@Test public void hSyncUpdateLength_01() throws IOException {
  doTheJob(new HdfsConfiguration(),fName,AppendTestUtil.BLOCK_SIZE,(short)2,true,EnumSet.of(SyncFlag.UPDATE_LENGTH));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * The test calls{@link #doTheJob(Configuration,String,long,short,boolean,EnumSet)}while requiring the semantic of {@link SyncFlag#UPDATE_LENGTH}.
 * Similar with {@link #hFlush_02()} , it writes a file with a custom block
 * size so the writes will be happening across block' boundaries
 */
@Test public void hSyncUpdateLength_02() throws IOException {
  Configuration conf=new HdfsConfiguration();
  int customPerChecksumSize=512;
  int customBlockSize=customPerChecksumSize * 3;
  conf.setInt(DFSConfigKeys.DFS_BYTES_PER_CHECKSUM_KEY,customPerChecksumSize);
  conf.setLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,customBlockSize);
  doTheJob(conf,fName,customBlockSize,(short)2,true,EnumSet.of(SyncFlag.UPDATE_LENGTH));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * The test calls{@link #doTheJob(Configuration,String,long,short,boolean,EnumSet)}while requiring the semantic of {@link SyncFlag#UPDATE_LENGTH}.
 * Similar with {@link #hFlush_03()} , it writes a file with a custom block
 * size so the writes will be happening across block's and checksum'
 * boundaries.
 */
@Test public void hSyncUpdateLength_03() throws IOException {
  Configuration conf=new HdfsConfiguration();
  int customPerChecksumSize=400;
  int customBlockSize=customPerChecksumSize * 3;
  conf.setInt(DFSConfigKeys.DFS_BYTES_PER_CHECKSUM_KEY,customPerChecksumSize);
  conf.setLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,customBlockSize);
  doTheJob(conf,fName,customBlockSize,(short)2,true,EnumSet.of(SyncFlag.UPDATE_LENGTH));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * The test uses{@link #doTheJob(Configuration,String,long,short,boolean,EnumSet)} 
 * to write a file with a custom block size so the writes will be 
 * happening across block' boundaries
 */
@Test public void hFlush_02() throws IOException {
  Configuration conf=new HdfsConfiguration();
  int customPerChecksumSize=512;
  int customBlockSize=customPerChecksumSize * 3;
  conf.setInt(DFSConfigKeys.DFS_BYTES_PER_CHECKSUM_KEY,customPerChecksumSize);
  conf.setLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,customBlockSize);
  doTheJob(conf,fName,customBlockSize,(short)2,false,EnumSet.noneOf(SyncFlag.class));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * The test uses{@link #doTheJob(Configuration,String,long,short,boolean,EnumSet)} 
 * to write a file with a standard block size
 */
@Test public void hFlush_01() throws IOException {
  doTheJob(new HdfsConfiguration(),fName,AppendTestUtil.BLOCK_SIZE,(short)2,false,EnumSet.noneOf(SyncFlag.class));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * The test uses{@link #doTheJob(Configuration,String,long,short,boolean,EnumSet)} 
 * to write a file with a custom block size so the writes will be 
 * happening across block's and checksum' boundaries
 */
@Test public void hFlush_03() throws IOException {
  Configuration conf=new HdfsConfiguration();
  int customPerChecksumSize=400;
  int customBlockSize=customPerChecksumSize * 3;
  conf.setInt(DFSConfigKeys.DFS_BYTES_PER_CHECKSUM_KEY,customPerChecksumSize);
  conf.setLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,customBlockSize);
  doTheJob(conf,fName,customBlockSize,(short)2,false,EnumSet.noneOf(SyncFlag.class));
}

</code></pre>

<br>
<pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This creates a slow writer and check to see 
 * if pipeline heartbeats work fine
 */
@Test public void testPipelineHeartbeat() throws Exception {
  final int DATANODE_NUM=2;
  final int fileLen=6;
  Configuration conf=new HdfsConfiguration();
  final int timeout=2000;
  conf.setInt(DFSConfigKeys.DFS_CLIENT_SOCKET_TIMEOUT_KEY,timeout);
  final Path p=new Path("/pipelineHeartbeat/foo");
  System.out.println("p=" + p);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(DATANODE_NUM).build();
  try {
    DistributedFileSystem fs=cluster.getFileSystem();
    byte[] fileContents=AppendTestUtil.initBuffer(fileLen);
    FSDataOutputStream stm=AppendTestUtil.createFile(fs,p,DATANODE_NUM);
    stm.write(fileContents,0,1);
    Thread.sleep(timeout);
    stm.hflush();
    System.out.println("Wrote 1 byte and hflush " + p);
    Thread.sleep(timeout);
    stm.write(fileContents,1,1);
    stm.hflush();
    stm.write(fileContents,2,1);
    Thread.sleep(timeout);
    stm.hflush();
    stm.write(fileContents,3,1);
    Thread.sleep(timeout);
    stm.write(fileContents,4,1);
    stm.hflush();
    stm.write(fileContents,5,1);
    Thread.sleep(timeout);
    stm.close();
    AppendTestUtil.checkFullFile(fs,p,fileLen,fileContents,"Failed to slowly write to a file");
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestHttpPolicy </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=HadoopIllegalArgumentException.class) public void testInvalidPolicyValue(){
  Configuration conf=new Configuration();
  conf.set(DFSConfigKeys.DFS_HTTP_POLICY_KEY,"invalid");
  DFSUtil.getHttpPolicy(conf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestInjectionForSimulatedStorage </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInjection() throws IOException {
  MiniDFSCluster cluster=null;
  String testFile="/replication-test-file";
  Path testPath=new Path(testFile);
  byte buffer[]=new byte[1024];
  for (int i=0; i < buffer.length; i++) {
    buffer[i]='1';
  }
  try {
    Configuration conf=new HdfsConfiguration();
    conf.set(DFSConfigKeys.DFS_REPLICATION_KEY,Integer.toString(numDataNodes));
    conf.setInt(DFSConfigKeys.DFS_BYTES_PER_CHECKSUM_KEY,checksumSize);
    SimulatedFSDataset.setFactory(conf);
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(numDataNodes).build();
    cluster.waitActive();
    String bpid=cluster.getNamesystem().getBlockPoolId();
    DFSClient dfsClient=new DFSClient(new InetSocketAddress("localhost",cluster.getNameNodePort()),conf);
    DFSTestUtil.createFile(cluster.getFileSystem(),testPath,filesize,filesize,blockSize,(short)numDataNodes,0L);
    waitForBlockReplication(testFile,dfsClient.getNamenode(),numDataNodes,20);
    List<Map<DatanodeStorage,BlockListAsLongs>> blocksList=cluster.getAllBlockReports(bpid);
    cluster.shutdown();
    cluster=null;
    LOG.info("Restarting minicluster");
    conf=new HdfsConfiguration();
    SimulatedFSDataset.setFactory(conf);
    conf.set(DFSConfigKeys.DFS_NAMENODE_SAFEMODE_THRESHOLD_PCT_KEY,"0.0f");
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(numDataNodes * 2).format(false).build();
    cluster.waitActive();
    Set<Block> uniqueBlocks=new HashSet<Block>();
    for (    Map<DatanodeStorage,BlockListAsLongs> map : blocksList) {
      for (      BlockListAsLongs blockList : map.values()) {
        for (        Block b : blockList) {
          uniqueBlocks.add(new Block(b));
        }
      }
    }
    LOG.info("Inserting " + uniqueBlocks.size() + " blocks");
    cluster.injectBlocks(0,uniqueBlocks,null);
    dfsClient=new DFSClient(new InetSocketAddress("localhost",cluster.getNameNodePort()),conf);
    waitForBlockReplication(testFile,dfsClient.getNamenode(),numDataNodes,-1);
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestIsMethodSupported </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClientNamenodeProtocol() throws IOException {
  ClientProtocol cp=NameNodeProxies.createNonHAProxy(conf,nnAddress,ClientProtocol.class,UserGroupInformation.getCurrentUser(),true).getProxy();
  RpcClientUtil.isMethodSupported(cp,ClientNamenodeProtocolPB.class,RPC.RpcKind.RPC_PROTOCOL_BUFFER,RPC.getProtocolVersion(ClientNamenodeProtocolPB.class),"mkdirs");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestLargeBlock </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test for block size of 2GB + 512B. This test can take a rather long time to
 * complete on Windows (reading the file back can be slow) so we use a larger
 * timeout here.
 * @throws IOException in case of errors
 */
@Test(timeout=900000) public void testLargeBlockSize() throws IOException {
  final long blockSize=2L * 1024L * 1024L* 1024L + 512L;
  runTest(blockSize);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestLeaseRecovery2 </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This test makes it so the client does not renew its lease and also
 * set the hard lease expiration period to be short, thus triggering
 * lease expiration to happen while the client is still alive. The test
 * also causes the NN to restart after lease recovery has begun, but before
 * the DNs have completed the blocks. This test verifies that when the NN
 * comes back up, the client no longer holds the lease.
 * The test makes sure that the lease recovery completes and the client
 * fails if it continues to write to the file, even after NN restart.
 * @throws Exception
 */
@Test public void testHardLeaseRecoveryAfterNameNodeRestart() throws Exception {
  hardLeaseRecoveryRestartHelper(false,-1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test the NameNode's revoke lease on current lease holder function.
 * @throws Exception
 */
@Test public void testImmediateRecoveryOfLease() throws Exception {
  byte[] actual=new byte[FILE_SIZE];
  int size=AppendTestUtil.nextInt(FILE_SIZE);
  Path filepath=createFile("/immediateRecoverLease-shortlease",size,true);
  cluster.setLeasePeriod(SHORT_LEASE_PERIOD,LONG_LEASE_PERIOD);
  recoverLeaseUsingCreate(filepath);
  verifyFile(dfs,filepath,actual,size);
  cluster.setLeasePeriod(LONG_LEASE_PERIOD,LONG_LEASE_PERIOD);
  size=AppendTestUtil.nextInt(FILE_SIZE);
  filepath=createFile("/immediateRecoverLease-longlease",size,false);
  recoverLease(filepath,null);
  verifyFile(dfs,filepath,actual,size);
  size=AppendTestUtil.nextInt(FILE_SIZE);
  filepath=createFile("/immediateRecoverLease-sameclient",size,false);
  Path filepath1=new Path(filepath.toString() + AppendTestUtil.nextInt());
  FSDataOutputStream stm=dfs.create(filepath1,true,BUF_SIZE,REPLICATION_NUM,BLOCK_SIZE);
  recoverLease(filepath,dfs);
  verifyFile(dfs,filepath,actual,size);
  stm.write(buffer,0,size);
  stm.close();
  verifyFile(dfs,filepath1,actual,size);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testHardLeaseRecoveryWithRenameAfterNameNodeRestart() throws Exception {
  hardLeaseRecoveryRestartHelper(true,-1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLeaseRecoverByAnotherUser() throws Exception {
  byte[] actual=new byte[FILE_SIZE];
  cluster.setLeasePeriod(SHORT_LEASE_PERIOD,LONG_LEASE_PERIOD);
  Path filepath=createFile("/immediateRecoverLease-x",0,true);
  recoverLeaseUsingCreate2(filepath);
  verifyFile(dfs,filepath,actual,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testHardLeaseRecoveryAfterNameNodeRestart2() throws Exception {
  hardLeaseRecoveryRestartHelper(false,1535);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestMiniDFSCluster </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=100000) public void testIsClusterUpAfterShutdown() throws Throwable {
  Configuration conf=new HdfsConfiguration();
  File testDataCluster4=new File(testDataPath,CLUSTER_4);
  String c4Path=testDataCluster4.getAbsolutePath();
  conf.set(MiniDFSCluster.HDFS_MINIDFS_BASEDIR,c4Path);
  MiniDFSCluster cluster4=new MiniDFSCluster.Builder(conf).build();
  try {
    DistributedFileSystem dfs=cluster4.getFileSystem();
    dfs.setSafeMode(HdfsConstants.SafeModeAction.SAFEMODE_ENTER);
    cluster4.shutdown();
  }
  finally {
    while (cluster4.isClusterUp()) {
      Thread.sleep(1000);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestMultiThreadedHflush </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultipleHflushersRepl3() throws Exception {
  doTestMultipleHflushers(3);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test case where a bunch of threads are both appending and flushing.
 * They all finish before the file is closed.
 */
@Test public void testMultipleHflushersRepl1() throws Exception {
  doTestMultipleHflushers(1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test case where a bunch of threads are continuously calling hflush() while another
 * thread appends some data and then closes the file.
 * The hflushing threads should eventually catch an IOException stating that the stream
 * was closed -- and not an NPE or anything like that.
 */
@Test public void testHflushWhileClosing() throws Throwable {
  Configuration conf=new Configuration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).build();
  FileSystem fs=cluster.getFileSystem();
  Path p=new Path("/hflush-and-close.dat");
  final FSDataOutputStream stm=createFile(fs,p,1);
  ArrayList<Thread> flushers=new ArrayList<Thread>();
  final AtomicReference<Throwable> thrown=new AtomicReference<Throwable>();
  try {
    for (int i=0; i < 10; i++) {
      Thread flusher=new Thread(){
        @Override public void run(){
          try {
            while (true) {
              try {
                stm.hflush();
              }
 catch (              ClosedChannelException ioe) {
                return;
              }
            }
          }
 catch (          Throwable t) {
            thrown.set(t);
          }
        }
      }
;
      flusher.start();
      flushers.add(flusher);
    }
    for (int i=0; i < 10000; i++) {
      stm.write(1);
    }
    stm.close();
    for (    Thread t : flushers) {
      t.join();
    }
    if (thrown.get() != null) {
      throw thrown.get();
    }
  }
  finally {
    fs.close();
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestParallelReadUtil </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testParallelNoChecksums() throws IOException {
  verifyChecksums=false;
  runTestWorkload(new MixedWorkloadHelper());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testParallelReadByteBuffer() throws IOException {
  runTestWorkload(new DirectReadWorkerHelper());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testParallelReadMixed() throws IOException {
  runTestWorkload(new MixedWorkloadHelper());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Do parallel read several times with different number of files and threads.
 * Note that while this is the only "test" in a junit sense, we're actually
 * dispatching a lot more. Failures in the other methods (and other threads)
 * need to be manually collected, which is inconvenient.
 */
@Test public void testParallelReadCopying() throws IOException {
  runTestWorkload(new CopyingReadWorkerHelper());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestPersistBlocks </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * check if DFS remains in proper condition after a restart 
 */
@Test public void TestRestartDfsWithFlush() throws Exception {
  testRestartDfs(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Earlier versions of HDFS didn't persist block allocation to the edit log.
 * This makes sure that we can still load an edit log when the OP_CLOSE
 * is the opcode which adds all of the blocks. This is a regression
 * test for HDFS-2773.
 * This test uses a tarred pseudo-distributed cluster from Hadoop 1.0
 * which has a multi-block file. This is similar to the tests in{@link TestDFSUpgradeFromImage} but none of those images include
 * a multi-block file.
 */
@Test public void testEarlierVersionEditLog() throws Exception {
  final Configuration conf=new HdfsConfiguration();
  String tarFile=System.getProperty("test.cache.data","build/test/cache") + "/" + HADOOP_1_0_MULTIBLOCK_TGZ;
  String testDir=PathUtils.getTestDirName(getClass());
  File dfsDir=new File(testDir,"image-1.0");
  if (dfsDir.exists() && !FileUtil.fullyDelete(dfsDir)) {
    throw new IOException("Could not delete dfs directory '" + dfsDir + "'");
  }
  FileUtil.unTar(new File(tarFile),new File(testDir));
  File nameDir=new File(dfsDir,"name");
  GenericTestUtils.assertExists(nameDir);
  File dataDir=new File(dfsDir,"data");
  GenericTestUtils.assertExists(dataDir);
  conf.set(DFSConfigKeys.DFS_NAMENODE_NAME_DIR_KEY,nameDir.getAbsolutePath());
  conf.set(DFSConfigKeys.DFS_DATANODE_DATA_DIR_KEY,dataDir.getAbsolutePath());
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(0).format(false).manageDataDfsDirs(false).manageNameDfsDirs(false).numDataNodes(1).startupOption(StartupOption.UPGRADE).build();
  try {
    FileSystem fs=cluster.getFileSystem();
    Path testPath=new Path("/user/todd/4blocks");
    DFSTestUtil.readFile(fs,testPath);
    FSDataOutputStream stm=fs.append(testPath);
    try {
      stm.write(1);
    }
  finally {
      IOUtils.closeStream(stm);
    }
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestPread </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreadDFSNoChecksum() throws IOException {
  Configuration conf=new Configuration();
  ((Log4JLogger)DataTransferProtocol.LOG).getLogger().setLevel(Level.ALL);
  dfsPreadTest(conf,false,false);
  dfsPreadTest(conf,true,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreadDFSSimulated() throws IOException {
  simulatedStorage=true;
  testPreadDFS();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests positional read in LocalFS.
 */
@Test public void testPreadLocalFS() throws IOException {
  Configuration conf=new HdfsConfiguration();
  FileSystem fileSys=FileSystem.getLocal(conf);
  try {
    Path file1=new Path("build/test/data","preadtest.dat");
    writeFile(fileSys,file1);
    pReadFile(fileSys,file1);
    cleanupFile(fileSys,file1);
  }
  finally {
    fileSys.close();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests positional read in DFS, with hedged reads enabled.
 */
@Test public void testHedgedPreadDFSBasic() throws IOException {
  isHedgedRead=true;
  Configuration conf=new Configuration();
  conf.setInt(DFSConfigKeys.DFS_DFSCLIENT_HEDGED_READ_THREADPOOL_SIZE,5);
  conf.setLong(DFSConfigKeys.DFS_DFSCLIENT_HEDGED_READ_THRESHOLD_MILLIS,1);
  dfsPreadTest(conf,false,true);
  dfsPreadTest(conf,true,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests positional read in DFS.
 */
@Test public void testPreadDFS() throws IOException {
  Configuration conf=new Configuration();
  dfsPreadTest(conf,false,true);
  dfsPreadTest(conf,true,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestRead </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testEOFWithBlockReaderLocal() throws Exception {
  ShortCircuitTestContext testContext=new ShortCircuitTestContext("testEOFWithBlockReaderLocal");
  try {
    final Configuration conf=testContext.newConfiguration();
    conf.setLong(DFSConfigKeys.DFS_CLIENT_CACHE_READAHEAD,BLOCK_SIZE);
    MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(1).format(true).build();
    testEOF(cluster,1);
    testEOF(cluster,14);
    testEOF(cluster,10000);
    cluster.shutdown();
  }
  finally {
    testContext.close();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testEOFWithRemoteBlockReader() throws Exception {
  final Configuration conf=new Configuration();
  conf.setLong(DFSConfigKeys.DFS_CLIENT_CACHE_READAHEAD,BLOCK_SIZE);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(1).format(true).build();
  testEOF(cluster,1);
  testEOF(cluster,14);
  testEOF(cluster,10000);
  cluster.shutdown();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestReadWhileWriting </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test reading while writing. 
 */
@Test public void pipeline_02_03() throws Exception {
  final Configuration conf=new HdfsConfiguration();
  conf.setLong(DFSConfigKeys.DFS_HEARTBEAT_INTERVAL_KEY,1);
  final MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(4).build();
  try {
    cluster.setLeasePeriod(SOFT_LEASE_LIMIT,HARD_LEASE_LIMIT);
    cluster.waitActive();
    final FileSystem fs=cluster.getFileSystem();
    final Path p=new Path(DIR,"file1");
    final int half=BLOCK_SIZE / 2;
{
      final FSDataOutputStream out=fs.create(p,true,fs.getConf().getInt(CommonConfigurationKeys.IO_FILE_BUFFER_SIZE_KEY,4096),(short)3,BLOCK_SIZE);
      write(out,0,half);
      ((DFSOutputStream)out.getWrappedStream()).hflush();
    }
    checkFile(p,half,conf);
    AppendTestUtil.LOG.info("leasechecker.interruptAndJoin()");
    ((DistributedFileSystem)fs).dfs.getLeaseRenewer().interruptAndJoin();
{
      Thread.sleep(2 * SOFT_LEASE_LIMIT);
      final UserGroupInformation current=UserGroupInformation.getCurrentUser();
      final UserGroupInformation ugi=UserGroupInformation.createUserForTesting(current.getShortUserName() + "x",new String[]{"supergroup"});
      final DistributedFileSystem dfs=ugi.doAs(new PrivilegedExceptionAction<DistributedFileSystem>(){
        @Override public DistributedFileSystem run() throws Exception {
          return (DistributedFileSystem)FileSystem.newInstance(conf);
        }
      }
);
      final FSDataOutputStream out=append(dfs,p);
      write(out,0,half);
      out.close();
    }
    checkFile(p,2 * half,conf);
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestReplication </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that blocks should get replicated if we have corrupted blocks and
 * having good replicas at least equal or greater to minreplication
 * Simulate rbw blocks by creating dummy copies, then a DN restart to detect
 * those corrupted blocks asap.
 */
@Test(timeout=30000) public void testReplicationWhenBlockCorruption() throws Exception {
  MiniDFSCluster cluster=null;
  try {
    Configuration conf=new HdfsConfiguration();
    conf.setLong(DFSConfigKeys.DFS_NAMENODE_REPLICATION_PENDING_TIMEOUT_SEC_KEY,1);
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(3).build();
    FileSystem fs=cluster.getFileSystem();
    FSDataOutputStream create=fs.create(new Path("/test"));
    fs.setReplication(new Path("/test"),(short)1);
    create.write(new byte[1024]);
    create.close();
    List<File> nonParticipatedNodeDirs=new ArrayList<File>();
    File participatedNodeDirs=null;
    for (int i=0; i < cluster.getDataNodes().size(); i++) {
      File storageDir=cluster.getInstanceStorageDir(i,0);
      String bpid=cluster.getNamesystem().getBlockPoolId();
      File data_dir=MiniDFSCluster.getFinalizedDir(storageDir,bpid);
      if (data_dir.listFiles().length == 0) {
        nonParticipatedNodeDirs.add(data_dir);
      }
 else {
        participatedNodeDirs=data_dir;
      }
    }
    String blockFile=null;
    File[] listFiles=participatedNodeDirs.listFiles();
    for (    File file : listFiles) {
      if (file.getName().startsWith("blk_") && !file.getName().endsWith("meta")) {
        blockFile=file.getName();
        for (        File file1 : nonParticipatedNodeDirs) {
          file1.mkdirs();
          new File(file1,blockFile).createNewFile();
          new File(file1,blockFile + "_1000.meta").createNewFile();
        }
        break;
      }
    }
    fs.setReplication(new Path("/test"),(short)3);
    cluster.restartDataNodes();
    cluster.waitActive();
    cluster.triggerBlockReports();
    DFSTestUtil.waitReplication(fs,new Path("/test"),(short)3);
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReplication() throws IOException {
  runReplication(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReplicationSimulatedStorag() throws IOException {
  runReplication(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test if replication can detect mismatched length on-disk blocks
 * @throws Exception
 */
@Test public void testReplicateLenMismatchedBlock() throws Exception {
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(new HdfsConfiguration()).numDataNodes(2).build();
  try {
    cluster.waitActive();
    changeBlockLen(cluster,-1);
    changeBlockLen(cluster,1);
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestReservedRawPaths </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000) public void testRelativePathnames() throws Exception {
  final Path baseFileRaw=new Path("/.reserved/raw/base");
  final int len=8192;
  DFSTestUtil.createFile(fs,baseFileRaw,len,(short)1,0xFEED);
  final Path root=new Path("/");
  final Path rawRoot=new Path("/.reserved/raw");
  assertPathEquals(root,new Path(rawRoot,"../raw"));
  assertPathEquals(root,new Path(rawRoot,"../../.reserved/raw"));
  assertPathEquals(baseFileRaw,new Path(rawRoot,"../raw/base"));
  assertPathEquals(baseFileRaw,new Path(rawRoot,"../../.reserved/raw/base"));
  assertPathEquals(baseFileRaw,new Path(rawRoot,"../../.reserved/raw/base/../base"));
  assertPathEquals(baseFileRaw,new Path("/.reserved/../.reserved/raw/../raw/base"));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Basic read/write tests of raw files.
 * Create a non-encrypted file
 * Create an encryption zone
 * Verify that non-encrypted file contents and decrypted file in EZ are equal
 * Compare the raw encrypted bytes of the file with the decrypted version to
 * ensure they're different
 * Compare the raw and non-raw versions of the non-encrypted file to ensure
 * they're the same.
 */
@Test(timeout=120000) public void testReadWriteRaw() throws Exception {
  final Path baseFile=new Path("/base");
  final int len=8192;
  DFSTestUtil.createFile(fs,baseFile,len,(short)1,0xFEED);
  final Path zone=new Path("/zone");
  fs.mkdirs(zone);
  dfsAdmin.createEncryptionZone(zone,TEST_KEY);
  final Path encFile1=new Path(zone,"myfile");
  DFSTestUtil.createFile(fs,encFile1,len,(short)1,0xFEED);
  verifyFilesEqual(fs,baseFile,encFile1,len);
  final Path encFile1Raw=new Path(zone,"/.reserved/raw/zone/myfile");
  verifyFilesNotEqual(fs,encFile1Raw,encFile1,len);
  final Path baseFileRaw=new Path(zone,"/.reserved/raw/base");
  verifyFilesEqual(fs,baseFile,baseFileRaw,len);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000) public void testReservedRoot() throws Exception {
  final Path root=new Path("/");
  final Path rawRoot=new Path("/.reserved/raw");
  final Path rawRootSlash=new Path("/.reserved/raw/");
  assertPathEquals(root,rawRoot);
  assertPathEquals(root,rawRootSlash);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that getFileStatus on raw and non raw resolve to the same
 * file.
 */
@Test(timeout=120000) public void testGetFileStatus() throws Exception {
  final Path zone=new Path("zone");
  final Path slashZone=new Path("/",zone);
  fs.mkdirs(slashZone);
  dfsAdmin.createEncryptionZone(slashZone,TEST_KEY);
  final Path base=new Path("base");
  final Path reservedRaw=new Path("/.reserved/raw");
  final Path baseRaw=new Path(reservedRaw,base);
  final int len=8192;
  DFSTestUtil.createFile(fs,baseRaw,len,(short)1,0xFEED);
  assertPathEquals(new Path("/",base),baseRaw);
  final Path ezEncFile=new Path(slashZone,base);
  final Path ezRawEncFile=new Path(new Path(reservedRaw,zone),base);
  DFSTestUtil.createFile(fs,ezEncFile,len,(short)1,0xFEED);
  assertPathEquals(ezEncFile,ezRawEncFile);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000) public void testReservedRawMkdir() throws Exception {
  final Path zone=new Path("zone");
  final Path slashZone=new Path("/",zone);
  fs.mkdirs(slashZone);
  dfsAdmin.createEncryptionZone(slashZone,TEST_KEY);
  final Path rawRoot=new Path("/.reserved/raw");
  final Path dir1=new Path("dir1");
  final Path rawDir1=new Path(rawRoot,dir1);
  fs.mkdirs(rawDir1);
  assertPathEquals(rawDir1,new Path("/",dir1));
  fs.delete(rawDir1,true);
  final Path rawZone=new Path(rawRoot,zone);
  final Path rawDir1EZ=new Path(rawZone,dir1);
  fs.mkdirs(rawDir1EZ);
  assertPathEquals(rawDir1EZ,new Path(slashZone,dir1));
  fs.delete(rawDir1EZ,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestRestartDFS </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * check if DFS remains in proper condition after a restart 
 */
@Test public void testRestartDFS() throws Exception {
  final Configuration conf=new HdfsConfiguration();
  runTests(conf,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * check if DFS remains in proper condition after a restart 
 * this rerun is with 2 ports enabled for RPC in the namenode
 */
@Test public void testRestartDualPortDFS() throws Exception {
  final Configuration conf=new HdfsConfiguration();
  runTests(conf,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestRollingUpgrade </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * In non-HA setup, after rolling upgrade prepare, the Secondary NN should
 * still be able to do checkpoint
 */
@Test public void testCheckpointWithSNN() throws Exception {
  MiniDFSCluster cluster=null;
  DistributedFileSystem dfs=null;
  SecondaryNameNode snn=null;
  try {
    Configuration conf=new HdfsConfiguration();
    cluster=new MiniDFSCluster.Builder(conf).build();
    cluster.waitActive();
    conf.set(DFSConfigKeys.DFS_NAMENODE_SECONDARY_HTTP_ADDRESS_KEY,"0.0.0.0:0");
    snn=new SecondaryNameNode(conf);
    dfs=cluster.getFileSystem();
    dfs.mkdirs(new Path("/test/foo"));
    snn.doCheckpoint();
    dfs.setSafeMode(SafeModeAction.SAFEMODE_ENTER);
    dfs.rollingUpgrade(RollingUpgradeAction.PREPARE);
    dfs.setSafeMode(SafeModeAction.SAFEMODE_LEAVE);
    dfs.mkdirs(new Path("/test/bar"));
    snn.doCheckpoint();
  }
  finally {
    IOUtils.cleanup(null,dfs);
    if (snn != null) {
      snn.shutdown();
    }
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRollback() throws IOException {
  final Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=null;
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(0).build();
    cluster.waitActive();
    final Path foo=new Path("/foo");
    final Path bar=new Path("/bar");
    cluster.getFileSystem().mkdirs(foo);
    startRollingUpgrade(foo,bar,cluster);
    cluster.getFileSystem().rollEdits();
    cluster.getFileSystem().rollEdits();
    rollbackRollingUpgrade(foo,bar,cluster);
    startRollingUpgrade(foo,bar,cluster);
    cluster.getFileSystem().rollEdits();
    cluster.getFileSystem().rollEdits();
    rollbackRollingUpgrade(foo,bar,cluster);
    startRollingUpgrade(foo,bar,cluster);
    cluster.restartNameNode();
    rollbackRollingUpgrade(foo,bar,cluster);
    startRollingUpgrade(foo,bar,cluster);
    cluster.restartNameNode();
    rollbackRollingUpgrade(foo,bar,cluster);
    startRollingUpgrade(foo,bar,cluster);
    rollbackRollingUpgrade(foo,bar,cluster);
    startRollingUpgrade(foo,bar,cluster);
    rollbackRollingUpgrade(foo,bar,cluster);
  }
  finally {
    if (cluster != null)     cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=300000) public void testQueryAfterRestart() throws IOException, InterruptedException {
  final Configuration conf=new Configuration();
  MiniDFSCluster cluster=null;
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(0).build();
    cluster.waitActive();
    DistributedFileSystem dfs=cluster.getFileSystem();
    dfs.setSafeMode(SafeModeAction.SAFEMODE_ENTER);
    dfs.rollingUpgrade(RollingUpgradeAction.PREPARE);
    queryForPreparation(dfs);
    dfs.setSafeMode(SafeModeAction.SAFEMODE_ENTER);
    dfs.saveNamespace();
    dfs.setSafeMode(SafeModeAction.SAFEMODE_LEAVE);
    cluster.restartNameNodes();
    dfs.rollingUpgrade(RollingUpgradeAction.QUERY);
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestRollingUpgradeDowngrade </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Ensure that during downgrade the NN fails to load a fsimage with newer
 * format.
 */
@Test(expected=IncorrectVersionException.class) public void testRejectNewFsImage() throws IOException {
  final Configuration conf=new Configuration();
  MiniDFSCluster cluster=null;
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(0).build();
    cluster.waitActive();
    DistributedFileSystem fs=cluster.getFileSystem();
    fs.setSafeMode(SafeModeAction.SAFEMODE_ENTER);
    fs.saveNamespace();
    fs.setSafeMode(SafeModeAction.SAFEMODE_LEAVE);
    NNStorage storage=spy(cluster.getNameNode().getFSImage().getStorage());
    int futureVersion=NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION - 1;
    doReturn(futureVersion).when(storage).getServiceLayoutVersion();
    storage.writeAll();
    cluster.restartNameNode(0,true,"-rollingUpgrade","downgrade");
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestSeekBug </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test if the seek bug exists in FSDataInputStream in DFS.
 */
@Test public void testSeekBugDFS() throws IOException {
  Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).build();
  FileSystem fileSys=cluster.getFileSystem();
  try {
    Path file1=new Path("seektest.dat");
    DFSTestUtil.createFile(fileSys,file1,ONEMB,ONEMB,fileSys.getDefaultBlockSize(file1),fileSys.getDefaultReplication(file1),seed);
    seekReadFile(fileSys,file1);
    smallReadSeek(fileSys,file1);
    cleanupFile(fileSys,file1);
  }
  finally {
    fileSys.close();
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests if the seek bug exists in FSDataInputStream in LocalFS.
 */
@Test public void testSeekBugLocalFS() throws IOException {
  Configuration conf=new HdfsConfiguration();
  FileSystem fileSys=FileSystem.getLocal(conf);
  try {
    Path file1=new Path("build/test/data","seektest.dat");
    DFSTestUtil.createFile(fileSys,file1,ONEMB,ONEMB,fileSys.getDefaultBlockSize(file1),fileSys.getDefaultReplication(file1),seed);
    seekReadFile(fileSys,file1);
    cleanupFile(fileSys,file1);
  }
  finally {
    fileSys.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestSetTimes </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that when access time updates are not needed, the FSNamesystem
 * write lock is not taken by getBlockLocations.
 * Regression test for HDFS-3981.
 */
@Test(timeout=60000) public void testGetBlockLocationsOnlyUsesReadLock() throws IOException {
  Configuration conf=new HdfsConfiguration();
  conf.setInt(DFSConfigKeys.DFS_NAMENODE_ACCESSTIME_PRECISION_KEY,100 * 1000);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(0).build();
  ReentrantReadWriteLock spyLock=NameNodeAdapter.spyOnFsLock(cluster.getNamesystem());
  try {
    Path p=new Path("/empty-file");
    DFSTestUtil.createFile(cluster.getFileSystem(),p,0,(short)1,0L);
    MockitoUtil.doThrowWhenCallStackMatches(new AssertionError("Should not need write lock"),".*getBlockLocations.*").when(spyLock).writeLock();
    cluster.getFileSystem().getFileBlockLocations(p,0,100);
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestSetrepDecreasing </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000) public void testSetrepDecreasing() throws IOException {
  TestSetrepIncreasing.setrep(5,3,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestSetrepIncreasing </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000) public void testSetrepIncreasing() throws IOException {
  setrep(3,7,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000) public void testSetrepIncreasingSimulatedStorage() throws IOException {
  setrep(3,7,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestSmallBlock </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests small block size in in DFS.
 */
@Test public void testSmallBlock() throws IOException {
  Configuration conf=new HdfsConfiguration();
  if (simulatedStorage) {
    SimulatedFSDataset.setFactory(conf);
  }
  conf.set(DFSConfigKeys.DFS_BYTES_PER_CHECKSUM_KEY,"1");
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).build();
  FileSystem fileSys=cluster.getFileSystem();
  try {
    Path file1=new Path("smallblocktest.dat");
    DFSTestUtil.createFile(fileSys,file1,fileSize,fileSize,blockSize,(short)1,seed);
    checkFile(fileSys,file1);
    cleanupFile(fileSys,file1);
  }
  finally {
    fileSys.close();
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSmallBlockSimulatedStorage() throws IOException {
  simulatedStorage=true;
  testSmallBlock();
  simulatedStorage=false;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestSnapshotCommands </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeleteSnapshot() throws Exception {
  FsShellRun("-createSnapshot /sub1 sn1");
  FsShellRun("-deleteSnapshot /sub1 sn1");
  FsShellRun("-deleteSnapshot /sub1 sn1",1,"deleteSnapshot: Cannot delete snapshot sn1 from path /sub1: the snapshot does not exist.");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateSnapshot() throws Exception {
  FsShellRun("-createSnapshot /sub1 sn0",0,"Created snapshot /sub1/.snapshot/sn0");
  FsShellRun("-createSnapshot /sub1 sn0",1,"there is already a snapshot with the same name \"sn0\"");
  FsShellRun("-rmr /sub1/sub1sub2");
  FsShellRun("-mkdir /sub1/sub1sub3");
  FsShellRun("-createSnapshot /sub1 sn1",0,"Created snapshot /sub1/.snapshot/sn1");
  FsShellRun("-ls /sub1",0,"/sub1/sub1sub1");
  FsShellRun("-ls /sub1",0,"/sub1/sub1sub3");
  FsShellRun("-ls /sub1/.snapshot",0,"/sub1/.snapshot/sn0");
  FsShellRun("-ls /sub1/.snapshot",0,"/sub1/.snapshot/sn1");
  FsShellRun("-ls /sub1/.snapshot/sn0",0,"/sub1/.snapshot/sn0/sub1sub1");
  FsShellRun("-ls /sub1/.snapshot/sn0",0,"/sub1/.snapshot/sn0/sub1sub2");
  FsShellRun("-ls /sub1/.snapshot/sn1",0,"/sub1/.snapshot/sn1/sub1sub1");
  FsShellRun("-ls /sub1/.snapshot/sn1",0,"/sub1/.snapshot/sn1/sub1sub3");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMkdirUsingReservedName() throws Exception {
  FsShellRun("-ls /");
  FsShellRun("-mkdir /.snapshot",1,"File exists");
  FsShellRun("-mkdir /sub1/.snapshot",1,"File exists");
  FsShellRun("-mkdir -p /sub1/.snapshot");
  FsShellRun("-mkdir -p /sub1/sub1sub1/.snapshot",1,"mkdir: \".snapshot\" is a reserved name.");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRenameSnapshot() throws Exception {
  FsShellRun("-createSnapshot /sub1 sn.orig");
  FsShellRun("-renameSnapshot /sub1 sn.orig sn.rename");
  FsShellRun("-ls /sub1/.snapshot",0,"/sub1/.snapshot/sn.rename");
  FsShellRun("-ls /sub1/.snapshot/sn.rename",0,"/sub1/.snapshot/sn.rename/sub1sub1");
  FsShellRun("-ls /sub1/.snapshot/sn.rename",0,"/sub1/.snapshot/sn.rename/sub1sub2");
  FsShellRun("-renameSnapshot /sub1 sn.nonexist sn.rename",1,"renameSnapshot: The snapshot sn.nonexist does not exist for directory /sub1");
  FsShellRun("-createSnapshot /sub1 sn.new");
  FsShellRun("-renameSnapshot /sub1 sn.new sn.rename",1,"renameSnapshot: The snapshot sn.rename already exists for directory /sub1");
  FsShellRun("-renameSnapshot /sub1 sn.rename sn.new",1,"renameSnapshot: The snapshot sn.new already exists for directory /sub1");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAllowSnapshot() throws Exception {
  DFSAdminRun("-allowSnapshot /sub1",0,"Allowing snaphot on /sub1 succeeded");
  FsShellRun("-mkdir /sub2");
  DFSAdminRun("-allowSnapshot /sub2",0,"Allowing snaphot on /sub2 succeeded");
  DFSAdminRun("-allowSnapshot /sub3",-1,null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDisallowSnapshot() throws Exception {
  FsShellRun("-createSnapshot /sub1 sn1");
  FsShellRun("-rmr /sub1",1,"The directory /sub1 cannot be deleted since /sub1 is snapshottable and already has snapshots");
  DFSAdminRun("-disallowSnapshot /sub1",-1,"disallowSnapshot: The directory /sub1 has snapshot(s). Please redo the operation after removing all the snapshots.");
  FsShellRun("-deleteSnapshot /sub1 sn1");
  DFSAdminRun("-disallowSnapshot /sub1",0,"Disallowing snaphot on /sub1 succeeded");
  DFSAdminRun("-disallowSnapshot /sub1",0,"Disallowing snaphot on /sub1 succeeded");
  FsShellRun("-rmr /sub1");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestWriteBlockGetsBlockLengthHint </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void blockLengthHintIsPropagated() throws IOException {
  final String METHOD_NAME=GenericTestUtils.getMethodName();
  final Path path=new Path("/" + METHOD_NAME + ".dat");
  Configuration conf=new HdfsConfiguration();
  FsDatasetChecker.setFactory(conf);
  conf.setLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,DEFAULT_BLOCK_LENGTH);
  conf.setInt(DFSConfigKeys.DFS_DATANODE_SCAN_PERIOD_HOURS_KEY,-1);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(1).build();
  try {
    cluster.waitActive();
    DFSTestUtil.createFile(cluster.getFileSystem(),path,4096,EXPECTED_BLOCK_LENGTH,EXPECTED_BLOCK_LENGTH,(short)1,0x1BAD5EED);
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.TestWriteConfigurationToDFS </h4><pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testWriteConf() throws Exception {
  Configuration conf=new HdfsConfiguration();
  conf.setInt(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,4096);
  System.out.println("Setting conf in: " + System.identityHashCode(conf));
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(1).build();
  FileSystem fs=null;
  OutputStream os=null;
  try {
    fs=cluster.getFileSystem();
    Path filePath=new Path("/testWriteConf.xml");
    os=fs.create(filePath);
    StringBuilder longString=new StringBuilder();
    for (int i=0; i < 100000; i++) {
      longString.append("hello");
    }
    conf.set("foobar",longString.toString());
    conf.writeXml(os);
    os.close();
    os=null;
    fs.close();
    fs=null;
  }
  finally {
    IOUtils.cleanup(null,os,fs);
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.nfs.TestMountd </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStart() throws IOException {
  NfsConfiguration config=new NfsConfiguration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(config).numDataNodes(1).build();
  cluster.waitActive();
  config.setInt("nfs3.mountd.port",0);
  config.setInt("nfs3.server.port",0);
  Nfs3 nfs3=new Nfs3(config);
  nfs3.startServiceInternal(false);
  RpcProgramMountd mountd=(RpcProgramMountd)nfs3.getMountd().getRpcProgram();
  mountd.nullOp(new XDR(),1234,InetAddress.getByName("localhost"));
  RpcProgramNfs3 nfsd=(RpcProgramNfs3)nfs3.getRpcProgram();
  nfsd.nullProcedure();
  cluster.shutdown();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.protocol.TestLayoutVersion </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests to make sure a given layout version supports all the
 * features from the ancestor
 */
@Test public void testFeaturesFromAncestorSupported(){
  for (  LayoutFeature f : Feature.values()) {
    validateFeatureList(f);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.protocol.datatransfer.TestPacketReceiver </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReceiveAndMirror() throws IOException {
  PacketReceiver pr=new PacketReceiver(false);
  doTestReceiveAndMirror(pr,100,10);
  doTestReceiveAndMirror(pr,50,10);
  doTestReceiveAndMirror(pr,150,10);
  pr.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.protocol.datatransfer.sasl.TestSaslDataTransfer </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testIntegrity() throws Exception {
  HdfsConfiguration clusterConf=createSecureConfig("authentication,integrity,privacy");
  startCluster(clusterConf);
  HdfsConfiguration clientConf=new HdfsConfiguration(clusterConf);
  clientConf.set(DFS_DATA_TRANSFER_PROTECTION_KEY,"integrity");
  doTest(clientConf);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testServerSaslNoClientSasl() throws Exception {
  HdfsConfiguration clusterConf=createSecureConfig("authentication,integrity,privacy");
  startCluster(clusterConf);
  HdfsConfiguration clientConf=new HdfsConfiguration(clusterConf);
  clientConf.set(DFS_DATA_TRANSFER_PROTECTION_KEY,"");
  exception.expect(IOException.class);
  exception.expectMessage("could only be replicated to 0 nodes");
  doTest(clientConf);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPrivacy() throws Exception {
  HdfsConfiguration clusterConf=createSecureConfig("authentication,integrity,privacy");
  startCluster(clusterConf);
  HdfsConfiguration clientConf=new HdfsConfiguration(clusterConf);
  clientConf.set(DFS_DATA_TRANSFER_PROTECTION_KEY,"privacy");
  doTest(clientConf);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAuthentication() throws Exception {
  HdfsConfiguration clusterConf=createSecureConfig("authentication,integrity,privacy");
  startCluster(clusterConf);
  HdfsConfiguration clientConf=new HdfsConfiguration(clusterConf);
  clientConf.set(DFS_DATA_TRANSFER_PROTECTION_KEY,"authentication");
  doTest(clientConf);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClientSaslNoServerSasl() throws Exception {
  HdfsConfiguration clusterConf=createSecureConfig("");
  startCluster(clusterConf);
  HdfsConfiguration clientConf=new HdfsConfiguration(clusterConf);
  clientConf.set(DFS_DATA_TRANSFER_PROTECTION_KEY,"authentication");
  exception.expect(IOException.class);
  exception.expectMessage("could only be replicated to 0 nodes");
  doTest(clientConf);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClientAndServerDoNotHaveCommonQop() throws Exception {
  HdfsConfiguration clusterConf=createSecureConfig("privacy");
  startCluster(clusterConf);
  HdfsConfiguration clientConf=new HdfsConfiguration(clusterConf);
  clientConf.set(DFS_DATA_TRANSFER_PROTECTION_KEY,"authentication");
  exception.expect(IOException.class);
  exception.expectMessage("could only be replicated to 0 nodes");
  doTest(clientConf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.protocolPB.TestPBHelper </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConvertExportedBlockKeys(){
  BlockKey[] keys=new BlockKey[]{getBlockKey(2),getBlockKey(3)};
  ExportedBlockKeys expKeys=new ExportedBlockKeys(true,9,10,getBlockKey(1),keys);
  ExportedBlockKeysProto expKeysProto=PBHelper.convert(expKeys);
  ExportedBlockKeys expKeys1=PBHelper.convert(expKeysProto);
  compare(expKeys,expKeys1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConvertBlockKey(){
  BlockKey key=getBlockKey(1);
  BlockKeyProto keyProto=PBHelper.convert(key);
  BlockKey key1=PBHelper.convert(keyProto);
  compare(key,key1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConvertBlockWithLocations(){
  BlockWithLocations locs=getBlockWithLocations(1);
  BlockWithLocationsProto locsProto=PBHelper.convert(locs);
  BlockWithLocations locs2=PBHelper.convert(locsProto);
  compare(locs,locs2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConvertBlockToken(){
  Token<BlockTokenIdentifier> token=new Token<BlockTokenIdentifier>("identifier".getBytes(),"password".getBytes(),new Text("kind"),new Text("service"));
  TokenProto tokenProto=PBHelper.convert(token);
  Token<BlockTokenIdentifier> token2=PBHelper.convert(tokenProto);
  compare(token,token2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConvertRemoteEditLog(){
  RemoteEditLog l=new RemoteEditLog(1,100);
  RemoteEditLogProto lProto=PBHelper.convert(l);
  RemoteEditLog l1=PBHelper.convert(lProto);
  compare(l,l1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConvertDatanodeID(){
  DatanodeID dn=DFSTestUtil.getLocalDatanodeID();
  DatanodeIDProto dnProto=PBHelper.convert(dn);
  DatanodeID dn2=PBHelper.convert(dnProto);
  compare(dn,dn2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConvertLocatedBlockNoStorageMedia(){
  LocatedBlock lb=createLocatedBlockNoStorageMedia();
  LocatedBlockProto lbProto=PBHelper.convert(lb);
  LocatedBlock lb2=PBHelper.convert(lbProto);
  compare(lb,lb2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConvertLocatedBlock(){
  LocatedBlock lb=createLocatedBlock();
  LocatedBlockProto lbProto=PBHelper.convert(lb);
  LocatedBlock lb2=PBHelper.convert(lbProto);
  compare(lb,lb2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void TestConvertDatanodeStorage(){
  DatanodeStorage dns1=new DatanodeStorage("id1",DatanodeStorage.State.NORMAL,StorageType.SSD);
  DatanodeStorageProto proto=PBHelper.convert(dns1);
  DatanodeStorage dns2=PBHelper.convert(proto);
  compare(dns1,dns2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.qjournal.client.TestIPCLoggerChannel </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimpleCall() throws Exception {
  ch.sendEdits(1,1,3,FAKE_DATA).get();
  Mockito.verify(mockProxy).journal(Mockito.<RequestInfo>any(),Mockito.eq(1L),Mockito.eq(1L),Mockito.eq(3),Mockito.same(FAKE_DATA));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.qjournal.client.TestQuorumJournalManager </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test the case where the NN crashes after starting a new segment
 * on all nodes, but before writing the first transaction to it.
 */
@Test public void testCrashAtBeginningOfSegment() throws Exception {
  writeSegment(cluster,qjm,1,3,true);
  waitForAllPendingCalls(qjm.getLoggerSetForTests());
  EditLogOutputStream stm=qjm.startLogSegment(4,NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION);
  try {
    waitForAllPendingCalls(qjm.getLoggerSetForTests());
  }
  finally {
    stm.abort();
  }
  qjm=closeLater(new QuorumJournalManager(conf,cluster.getQuorumJournalURI(JID),FAKE_NSINFO));
  qjm.recoverUnfinalizedSegments();
  checkRecovery(cluster,1,3);
  writeSegment(cluster,qjm,4,3,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testToString() throws Exception {
  GenericTestUtils.assertMatches(qjm.toString(),"QJM to \\[127.0.0.1:\\d+, 127.0.0.1:\\d+, 127.0.0.1:\\d+\\]");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test case where a new writer picks up from an old one which crashed
 * with the three loggers at different txnids
 */
@Test public void testChangeWritersLogsOutOfSync1() throws Exception {
  doOutOfSyncTest(0,5L);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testChangeWritersLogsOutOfSync2() throws Exception {
  doOutOfSyncTest(1,5L);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testChangeWritersLogsOutOfSync3() throws Exception {
  doOutOfSyncTest(2,4L);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSelectInputStreamsNotOnBoundary() throws Exception {
  final int txIdsPerSegment=10;
  for (int txid=1; txid <= 5 * txIdsPerSegment; txid+=txIdsPerSegment) {
    writeSegment(cluster,qjm,txid,txIdsPerSegment,true);
  }
  File curDir=cluster.getCurrentDir(0,JID);
  GenericTestUtils.assertGlobEquals(curDir,"edits_.*",NNStorage.getFinalizedEditsFileName(1,10),NNStorage.getFinalizedEditsFileName(11,20),NNStorage.getFinalizedEditsFileName(21,30),NNStorage.getFinalizedEditsFileName(31,40),NNStorage.getFinalizedEditsFileName(41,50));
  ArrayList<EditLogInputStream> streams=new ArrayList<EditLogInputStream>();
  qjm.selectInputStreams(streams,25,false);
  verifyEdits(streams,25,50);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOutOfSyncAtBeginningOfSegment1() throws Exception {
  doTestOutOfSyncAtBeginningOfSegment(1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test case where a new writer picks up from an old one with no failures
 * and the previous unfinalized segment entirely consistent -- i.e. all
 * the JournalNodes end at the same transaction ID.
 */
@Test public void testChangeWritersLogsInSync() throws Exception {
  writeSegment(cluster,qjm,1,3,false);
  QJMTestUtil.assertExistsInQuorum(cluster,NNStorage.getInProgressEditsFileName(1));
  qjm=closeLater(new QuorumJournalManager(conf,cluster.getQuorumJournalURI(JID),FAKE_NSINFO));
  qjm.recoverUnfinalizedSegments();
  checkRecovery(cluster,1,3);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOutOfSyncAtBeginningOfSegment0() throws Exception {
  doTestOutOfSyncAtBeginningOfSegment(0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOutOfSyncAtBeginningOfSegment2() throws Exception {
  doTestOutOfSyncAtBeginningOfSegment(2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Regression test for HDFS-3725. One of the journal nodes is down
 * during the writing of one segment, then comes back up later to
 * take part in a later segment. Thus, its local edits are
 * not a contiguous sequence. This should be handled correctly.
 */
@Test public void testOneJNMissingSegments() throws Exception {
  writeSegment(cluster,qjm,1,3,true);
  waitForAllPendingCalls(qjm.getLoggerSetForTests());
  cluster.getJournalNode(0).stopAndJoin(0);
  writeSegment(cluster,qjm,4,3,true);
  waitForAllPendingCalls(qjm.getLoggerSetForTests());
  cluster.restartJournalNode(0);
  writeSegment(cluster,qjm,7,3,true);
  waitForAllPendingCalls(qjm.getLoggerSetForTests());
  cluster.getJournalNode(1).stopAndJoin(0);
  QuorumJournalManager readerQjm=createSpyingQJM();
  List<EditLogInputStream> streams=Lists.newArrayList();
  try {
    readerQjm.selectInputStreams(streams,1,false);
    verifyEdits(streams,1,9);
  }
  finally {
    IOUtils.cleanup(LOG,streams.toArray(new Closeable[0]));
    readerQjm.close();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleWriter() throws Exception {
  writeSegment(cluster,qjm,1,3,true);
  checkRecovery(cluster,1,3);
  writeSegment(cluster,qjm,4,1,true);
  checkRecovery(cluster,4,4);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.qjournal.client.TestQuorumJournalManagerUnit </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAllLoggersStartOk() throws Exception {
  futureReturns(null).when(spyLoggers.get(0)).startLogSegment(Mockito.anyLong(),Mockito.eq(NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION));
  futureReturns(null).when(spyLoggers.get(1)).startLogSegment(Mockito.anyLong(),Mockito.eq(NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION));
  futureReturns(null).when(spyLoggers.get(2)).startLogSegment(Mockito.anyLong(),Mockito.eq(NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION));
  qjm.startLogSegment(1,NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWriteEdits() throws Exception {
  EditLogOutputStream stm=createLogSegment();
  writeOp(stm,1);
  writeOp(stm,2);
  stm.setReadyToFlush();
  writeOp(stm,3);
  futureReturns(null).when(spyLoggers.get(0)).sendEdits(anyLong(),eq(1L),eq(2),Mockito.<byte[]>any());
  futureReturns(null).when(spyLoggers.get(1)).sendEdits(anyLong(),eq(1L),eq(2),Mockito.<byte[]>any());
  futureReturns(null).when(spyLoggers.get(2)).sendEdits(anyLong(),eq(1L),eq(2),Mockito.<byte[]>any());
  stm.flush();
  stm.setReadyToFlush();
  futureReturns(null).when(spyLoggers.get(0)).sendEdits(anyLong(),eq(3L),eq(1),Mockito.<byte[]>any());
  futureReturns(null).when(spyLoggers.get(1)).sendEdits(anyLong(),eq(3L),eq(1),Mockito.<byte[]>any());
  futureReturns(null).when(spyLoggers.get(2)).sendEdits(anyLong(),eq(3L),eq(1),Mockito.<byte[]>any());
  stm.flush();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWriteEditsOneSlow() throws Exception {
  EditLogOutputStream stm=createLogSegment();
  writeOp(stm,1);
  stm.setReadyToFlush();
  futureReturns(null).when(spyLoggers.get(0)).sendEdits(anyLong(),eq(1L),eq(1),Mockito.<byte[]>any());
  futureReturns(null).when(spyLoggers.get(1)).sendEdits(anyLong(),eq(1L),eq(1),Mockito.<byte[]>any());
  SettableFuture<Void> slowLog=SettableFuture.create();
  Mockito.doReturn(slowLog).when(spyLoggers.get(2)).sendEdits(anyLong(),eq(1L),eq(1),Mockito.<byte[]>any());
  stm.flush();
  Mockito.verify(spyLoggers.get(0)).setCommittedTxId(1L);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testQuorumOfLoggersStartOk() throws Exception {
  futureReturns(null).when(spyLoggers.get(0)).startLogSegment(Mockito.anyLong(),Mockito.eq(NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION));
  futureReturns(null).when(spyLoggers.get(1)).startLogSegment(Mockito.anyLong(),Mockito.eq(NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION));
  futureThrows(new IOException("logger failed")).when(spyLoggers.get(2)).startLogSegment(Mockito.anyLong(),Mockito.eq(NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION));
  qjm.startLogSegment(1,NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.qjournal.server.TestJournal </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Assume that a client is writing to a journal, but loses its connection
 * in the middle of a segment. Thus, any future journal() calls in that
 * segment may fail, because some txns were missed while the connection was
 * down.
 * Eventually, the connection comes back, and the NN tries to start a new
 * segment at a higher txid. This should abort the old one and succeed.
 */
@Test(timeout=10000) public void testAbortOldSegmentIfFinalizeIsMissed() throws Exception {
  journal.newEpoch(FAKE_NSINFO,1);
  journal.startLogSegment(makeRI(1),1,NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION);
  journal.journal(makeRI(2),1,1,3,QJMTestUtil.createTxnData(1,3));
  GenericTestUtils.assertExists(journal.getStorage().getInProgressEditLog(1));
  journal.startLogSegment(makeRI(3),6,NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION);
  journal.journal(makeRI(4),6,6,3,QJMTestUtil.createTxnData(6,3));
  GenericTestUtils.assertExists(journal.getStorage().getInProgressEditLog(1));
  GenericTestUtils.assertExists(journal.getStorage().getInProgressEditLog(6));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.qjournal.server.TestJournalNode </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Simple test of how fast the code path is to write edits.
 * This isn't a true unit test, but can be run manually to
 * check performance.
 * At the time of development, this test ran in ~4sec on an
 * SSD-enabled laptop (1.8ms/batch).
 */
@Test(timeout=100000) public void testPerformance() throws Exception {
  doPerfTest(8192,1024);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=100000) public void testJournal() throws Exception {
  MetricsRecordBuilder metrics=MetricsAsserts.getMetrics(journal.getMetricsForTests().getName());
  MetricsAsserts.assertCounter("BatchesWritten",0L,metrics);
  MetricsAsserts.assertCounter("BatchesWrittenWhileLagging",0L,metrics);
  MetricsAsserts.assertGauge("CurrentLagTxns",0L,metrics);
  IPCLoggerChannel ch=new IPCLoggerChannel(conf,FAKE_NSINFO,journalId,jn.getBoundIpcAddress());
  ch.newEpoch(1).get();
  ch.setEpoch(1);
  ch.startLogSegment(1,NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION).get();
  ch.sendEdits(1L,1,1,"hello".getBytes(Charsets.UTF_8)).get();
  metrics=MetricsAsserts.getMetrics(journal.getMetricsForTests().getName());
  MetricsAsserts.assertCounter("BatchesWritten",1L,metrics);
  MetricsAsserts.assertCounter("BatchesWrittenWhileLagging",0L,metrics);
  MetricsAsserts.assertGauge("CurrentLagTxns",0L,metrics);
  ch.setCommittedTxId(100L);
  ch.sendEdits(1L,2,1,"goodbye".getBytes(Charsets.UTF_8)).get();
  metrics=MetricsAsserts.getMetrics(journal.getMetricsForTests().getName());
  MetricsAsserts.assertCounter("BatchesWritten",2L,metrics);
  MetricsAsserts.assertCounter("BatchesWrittenWhileLagging",1L,metrics);
  MetricsAsserts.assertGauge("CurrentLagTxns",98L,metrics);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.security.TestClientProtocolWithDelegationToken </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDelegationTokenRpc() throws Exception {
  ClientProtocol mockNN=mock(ClientProtocol.class);
  FSNamesystem mockNameSys=mock(FSNamesystem.class);
  DelegationTokenSecretManager sm=new DelegationTokenSecretManager(DFSConfigKeys.DFS_NAMENODE_DELEGATION_KEY_UPDATE_INTERVAL_DEFAULT,DFSConfigKeys.DFS_NAMENODE_DELEGATION_KEY_UPDATE_INTERVAL_DEFAULT,DFSConfigKeys.DFS_NAMENODE_DELEGATION_TOKEN_MAX_LIFETIME_DEFAULT,3600000,mockNameSys);
  sm.startThreads();
  final Server server=new RPC.Builder(conf).setProtocol(ClientProtocol.class).setInstance(mockNN).setBindAddress(ADDRESS).setPort(0).setNumHandlers(5).setVerbose(true).setSecretManager(sm).build();
  server.start();
  final UserGroupInformation current=UserGroupInformation.getCurrentUser();
  final InetSocketAddress addr=NetUtils.getConnectAddress(server);
  String user=current.getUserName();
  Text owner=new Text(user);
  DelegationTokenIdentifier dtId=new DelegationTokenIdentifier(owner,owner,null);
  Token<DelegationTokenIdentifier> token=new Token<DelegationTokenIdentifier>(dtId,sm);
  SecurityUtil.setTokenService(token,addr);
  LOG.info("Service for token is " + token.getService());
  current.addToken(token);
  current.doAs(new PrivilegedExceptionAction(){
    @Override public Object run() throws Exception {
      ClientProtocol proxy=null;
      try {
        proxy=RPC.getProxy(ClientProtocol.class,ClientProtocol.versionID,addr,conf);
        proxy.getServerDefaults();
      }
  finally {
        server.stop();
        if (proxy != null) {
          RPC.stopProxy(proxy);
        }
      }
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.security.token.block.TestBlockToken </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWritable() throws Exception {
  TestWritable.testWritable(new BlockTokenIdentifier());
  BlockTokenSecretManager sm=new BlockTokenSecretManager(blockKeyUpdateInterval,blockTokenLifetime,0,"fake-pool",null);
  TestWritable.testWritable(generateTokenId(sm,block1,EnumSet.allOf(BlockTokenSecretManager.AccessMode.class)));
  TestWritable.testWritable(generateTokenId(sm,block2,EnumSet.of(BlockTokenSecretManager.AccessMode.WRITE)));
  TestWritable.testWritable(generateTokenId(sm,block3,EnumSet.noneOf(BlockTokenSecretManager.AccessMode.class)));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * test block key and token handling 
 */
@Test public void testBlockTokenSecretManager() throws Exception {
  BlockTokenSecretManager masterHandler=new BlockTokenSecretManager(blockKeyUpdateInterval,blockTokenLifetime,0,"fake-pool",null);
  BlockTokenSecretManager slaveHandler=new BlockTokenSecretManager(blockKeyUpdateInterval,blockTokenLifetime,"fake-pool",null);
  ExportedBlockKeys keys=masterHandler.exportKeys();
  slaveHandler.addKeys(keys);
  tokenGenerationAndVerification(masterHandler,slaveHandler);
  masterHandler.updateKeys();
  tokenGenerationAndVerification(masterHandler,slaveHandler);
  keys=masterHandler.exportKeys();
  slaveHandler.addKeys(keys);
  tokenGenerationAndVerification(masterHandler,slaveHandler);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test {@link BlockPoolTokenSecretManager}
 */
@Test public void testBlockPoolTokenSecretManager() throws Exception {
  BlockPoolTokenSecretManager bpMgr=new BlockPoolTokenSecretManager();
  for (int i=0; i < 10; i++) {
    String bpid=Integer.toString(i);
    BlockTokenSecretManager masterHandler=new BlockTokenSecretManager(blockKeyUpdateInterval,blockTokenLifetime,0,"fake-pool",null);
    BlockTokenSecretManager slaveHandler=new BlockTokenSecretManager(blockKeyUpdateInterval,blockTokenLifetime,"fake-pool",null);
    bpMgr.addBlockPool(bpid,slaveHandler);
    ExportedBlockKeys keys=masterHandler.exportKeys();
    bpMgr.addKeys(bpid,keys);
    tokenGenerationAndVerification(masterHandler,bpMgr.get(bpid));
    masterHandler.updateKeys();
    tokenGenerationAndVerification(masterHandler,bpMgr.get(bpid));
    keys=masterHandler.exportKeys();
    bpMgr.addKeys(bpid,keys);
    tokenGenerationAndVerification(masterHandler,bpMgr.get(bpid));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.balancer.TestBalancer </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test a cluster with even distribution,
 * then three nodes are added to the cluster,
 * runs balancer with two of the nodes in the include list
 */
@Test(timeout=100000) public void testBalancerCliWithIncludeList() throws Exception {
  final Configuration conf=new HdfsConfiguration();
  initConf(conf);
  Set<String> includeHosts=new HashSet<String>();
  includeHosts.add("datanodeY");
  doTest(conf,new long[]{CAPACITY,CAPACITY},new String[]{RACK0,RACK1},CAPACITY,RACK2,new HostNameBasedNodes(new String[]{"datanodeX","datanodeY","datanodeZ"},Parameters.DEFAULT.nodesToBeExcluded,includeHosts),true,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test a cluster with even distribution,
 * then three nodes are added to the cluster,
 * runs balancer with two of the nodes in the include list
 */
@Test(timeout=100000) public void testBalancerCliWithIncludeListInAFile() throws Exception {
  final Configuration conf=new HdfsConfiguration();
  initConf(conf);
  Set<String> includeHosts=new HashSet<String>();
  includeHosts.add("datanodeY");
  doTest(conf,new long[]{CAPACITY,CAPACITY},new String[]{RACK0,RACK1},CAPACITY,RACK2,new HostNameBasedNodes(new String[]{"datanodeX","datanodeY","datanodeZ"},Parameters.DEFAULT.nodesToBeExcluded,includeHosts),true,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test a cluster with even distribution,
 * then three nodes are added to the cluster,
 * runs balancer with two of the nodes in the include list
 */
@Test(timeout=100000) public void testBalancerCliWithIncludeListWithPortsInAFile() throws Exception {
  final Configuration conf=new HdfsConfiguration();
  initConf(conf);
  doTest(conf,new long[]{CAPACITY,CAPACITY},new String[]{RACK0,RACK1},CAPACITY,RACK2,new PortNumberBasedNodes(3,0,1),true,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test a cluster with even distribution,
 * then three nodes are added to the cluster,
 * runs balancer with two of the nodes in the exclude list
 */
@Test(timeout=100000) public void testBalancerCliWithExcludeList() throws Exception {
  final Configuration conf=new HdfsConfiguration();
  initConf(conf);
  Set<String> excludeHosts=new HashSet<String>();
  excludeHosts.add("datanodeY");
  excludeHosts.add("datanodeZ");
  doTest(conf,new long[]{CAPACITY,CAPACITY},new String[]{RACK0,RACK1},CAPACITY,RACK2,new HostNameBasedNodes(new String[]{"datanodeX","datanodeY","datanodeZ"},excludeHosts,Parameters.DEFAULT.nodesToBeIncluded),true,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test a cluster with even distribution,G
 * then three nodes are added to the cluster,
 * runs balancer with two of the nodes in the exclude list
 */
@Test(timeout=100000) public void testBalancerCliWithExcludeListWithPortsInAFile() throws Exception {
  final Configuration conf=new HdfsConfiguration();
  initConf(conf);
  doTest(conf,new long[]{CAPACITY,CAPACITY},new String[]{RACK0,RACK1},CAPACITY,RACK2,new PortNumberBasedNodes(3,2,0),true,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test a cluster with even distribution,
 * then three nodes are added to the cluster,
 * runs balancer with two of the nodes in the include list
 */
@Test(timeout=100000) public void testBalancerWithIncludeList() throws Exception {
  final Configuration conf=new HdfsConfiguration();
  initConf(conf);
  Set<String> includeHosts=new HashSet<String>();
  includeHosts.add("datanodeY");
  doTest(conf,new long[]{CAPACITY,CAPACITY},new String[]{RACK0,RACK1},CAPACITY,RACK2,new HostNameBasedNodes(new String[]{"datanodeX","datanodeY","datanodeZ"},Parameters.DEFAULT.nodesToBeExcluded,includeHosts),false,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test a cluster with even distribution,
 * then three nodes are added to the cluster,
 * runs balancer with two of the nodes in the exclude list
 */
@Test(timeout=100000) public void testBalancerCliWithExcludeListWithPorts() throws Exception {
  final Configuration conf=new HdfsConfiguration();
  initConf(conf);
  doTest(conf,new long[]{CAPACITY,CAPACITY},new String[]{RACK0,RACK1},CAPACITY,RACK2,new PortNumberBasedNodes(3,2,0),true,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Verify balancer exits 0 on success.
 */
@Test(timeout=100000) public void testExitZeroOnSuccess() throws Exception {
  final Configuration conf=new HdfsConfiguration();
  initConf(conf);
  oneNodeTest(conf,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test a cluster with even distribution,
 * then three nodes are added to the cluster,
 * runs balancer with two of the nodes in the include list
 */
@Test(timeout=100000) public void testBalancerWithIncludeListWithPorts() throws Exception {
  final Configuration conf=new HdfsConfiguration();
  initConf(conf);
  doTest(conf,new long[]{CAPACITY,CAPACITY},new String[]{RACK0,RACK1},CAPACITY,RACK2,new PortNumberBasedNodes(3,0,1),false,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=100000) public void testBalancerWithZeroThreadsForMove() throws Exception {
  Configuration conf=new HdfsConfiguration();
  conf.setInt(DFSConfigKeys.DFS_DATANODE_BALANCE_MAX_NUM_CONCURRENT_MOVES_KEY,0);
  testBalancer1Internal(conf);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test a cluster with even distribution,
 * then three nodes are added to the cluster,
 * runs balancer with two of the nodes in the include list
 */
@Test(timeout=100000) public void testBalancerCliWithIncludeListWithPorts() throws Exception {
  final Configuration conf=new HdfsConfiguration();
  initConf(conf);
  doTest(conf,new long[]{CAPACITY,CAPACITY},new String[]{RACK0,RACK1},CAPACITY,RACK2,new PortNumberBasedNodes(3,0,1),true,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test a cluster with even distribution,
 * then three nodes are added to the cluster,
 * runs balancer with two of the nodes in the exclude list
 */
@Test(timeout=100000) public void testBalancerWithExcludeListWithPorts() throws Exception {
  final Configuration conf=new HdfsConfiguration();
  initConf(conf);
  doTest(conf,new long[]{CAPACITY,CAPACITY},new String[]{RACK0,RACK1},CAPACITY,RACK2,new PortNumberBasedNodes(3,2,0),false,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test a cluster with even distribution,
 * then a new empty node is added to the cluster
 */
@Test(timeout=100000) public void testBalancer0() throws Exception {
  testBalancer0Internal(new HdfsConfiguration());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test a cluster with even distribution,
 * then three nodes are added to the cluster,
 * runs balancer with two of the nodes in the exclude list
 */
@Test(timeout=100000) public void testBalancerWithExcludeList() throws Exception {
  final Configuration conf=new HdfsConfiguration();
  initConf(conf);
  Set<String> excludeHosts=new HashSet<String>();
  excludeHosts.add("datanodeY");
  excludeHosts.add("datanodeZ");
  doTest(conf,new long[]{CAPACITY,CAPACITY},new String[]{RACK0,RACK1},CAPACITY,RACK2,new HostNameBasedNodes(new String[]{"datanodeX","datanodeY","datanodeZ"},excludeHosts,Parameters.DEFAULT.nodesToBeIncluded),false,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test a cluster with even distribution,
 * then three nodes are added to the cluster,
 * runs balancer with two of the nodes in the exclude list in a file
 */
@Test(timeout=100000) public void testBalancerCliWithExcludeListInAFile() throws Exception {
  final Configuration conf=new HdfsConfiguration();
  initConf(conf);
  Set<String> excludeHosts=new HashSet<String>();
  excludeHosts.add("datanodeY");
  excludeHosts.add("datanodeZ");
  doTest(conf,new long[]{CAPACITY,CAPACITY},new String[]{RACK0,RACK1},CAPACITY,RACK2,new HostNameBasedNodes(new String[]{"datanodeX","datanodeY","datanodeZ"},excludeHosts,Parameters.DEFAULT.nodesToBeIncluded),true,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=100000) public void testBalancerWithNonZeroThreadsForMove() throws Exception {
  Configuration conf=new HdfsConfiguration();
  conf.setInt(DFSConfigKeys.DFS_DATANODE_BALANCE_MAX_NUM_CONCURRENT_MOVES_KEY,8);
  testBalancer1Internal(conf);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=100000) public void testBalancer2() throws Exception {
  testBalancer2Internal(new HdfsConfiguration());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test unevenly distributed cluster 
 */
@Test(timeout=100000) public void testBalancer1() throws Exception {
  testBalancer1Internal(new HdfsConfiguration());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.balancer.TestBalancerWithEncryptedTransfer </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testEncryptedBalancer2() throws Exception {
  new TestBalancer().testBalancer2Internal(conf);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testEncryptedBalancer1() throws Exception {
  new TestBalancer().testBalancer1Internal(conf);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testEncryptedBalancer0() throws Exception {
  new TestBalancer().testBalancer0Internal(conf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.balancer.TestBalancerWithMultipleNameNodes </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test unevenly distributed cluster 
 */
@Test public void testUnevenDistribution() throws Exception {
  final Configuration conf=createConf();
  unevenDistribution(2,new long[]{30 * CAPACITY / 100,5 * CAPACITY / 100},new long[]{CAPACITY,CAPACITY},new String[]{RACK0,RACK1},conf);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test a cluster with even distribution, 
 * then a new empty node is added to the cluster
 */
@Test public void testBalancer() throws Exception {
  final Configuration conf=createConf();
  runTest(2,new long[]{CAPACITY},new String[]{RACK0},CAPACITY / 2,RACK0,conf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.balancer.TestBalancerWithSaslDataTransfer </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBalancer0Authentication() throws Exception {
  TEST_BALANCER.testBalancer0Internal(createSecureConfig("authentication"));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBalancer0Integrity() throws Exception {
  TEST_BALANCER.testBalancer0Internal(createSecureConfig("integrity"));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBalancer0Privacy() throws Exception {
  TEST_BALANCER.testBalancer0Internal(createSecureConfig("privacy"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.blockmanagement.TestBlockManager </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlocksAreNotUnderreplicatedInSingleRack() throws Exception {
  List<DatanodeDescriptor> nodes=ImmutableList.of(BlockManagerTestUtil.getDatanodeDescriptor("1.1.1.1","/rackA",true),BlockManagerTestUtil.getDatanodeDescriptor("2.2.2.2","/rackA",true),BlockManagerTestUtil.getDatanodeDescriptor("3.3.3.3","/rackA",true),BlockManagerTestUtil.getDatanodeDescriptor("4.4.4.4","/rackA",true),BlockManagerTestUtil.getDatanodeDescriptor("5.5.5.5","/rackA",true),BlockManagerTestUtil.getDatanodeDescriptor("6.6.6.6","/rackA",true));
  addNodes(nodes);
  List<DatanodeDescriptor> origNodes=nodes.subList(0,3);
  for (int i=0; i < NUM_TEST_ITERS; i++) {
    doTestSingleRackClusterIsSufficientlyReplicated(i,origNodes);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Regression test for HDFS-1480
 * - Cluster has 2 racks, A and B, each with three nodes.
 * - Block initially written on A1, A2, B1
 * - Admin decommissions two of these nodes (let's say A1 and A2 but it doesn't matter)
 * - Re-replication should respect rack policy
 */
@Test public void testTwoOfThreeNodesDecommissioned() throws Exception {
  addNodes(nodes);
  for (int i=0; i < NUM_TEST_ITERS; i++) {
    doTestTwoOfThreeNodesDecommissioned(i);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test what happens when a block is on three nodes, and all three of those
 * nodes are decommissioned. It should properly re-replicate to three new
 * nodes. 
 */
@Test public void testAllNodesHoldingReplicasDecommissioned() throws Exception {
  addNodes(nodes);
  for (int i=0; i < NUM_TEST_ITERS; i++) {
    doTestAllNodesHoldingReplicasDecommissioned(i);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that replication of under-replicated blocks is detected
 * and basically works
 */
@Test public void testBasicReplication() throws Exception {
  addNodes(nodes);
  for (int i=0; i < NUM_TEST_ITERS; i++) {
    doBasicTest(i);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test what happens when there are two racks, and an entire rack is
 * decommissioned.
 * Since the cluster is multi-rack, it will consider the block
 * under-replicated rather than create a third replica on the
 * same rack. Adding a new node on a third rack should cause re-replication
 * to that node.
 */
@Test public void testOneOfTwoRacksDecommissioned() throws Exception {
  addNodes(nodes);
  for (int i=0; i < NUM_TEST_ITERS; i++) {
    doTestOneOfTwoRacksDecommissioned(i);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Unit test version of testSufficientlyReplBlocksUsesNewRack from{@link TestBlocksWithNotEnoughRacks}.
 */
@Test public void testSufficientlyReplBlocksUsesNewRack() throws Exception {
  addNodes(nodes);
  for (int i=0; i < NUM_TEST_ITERS; i++) {
    doTestSufficientlyReplBlocksUsesNewRack(i);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.blockmanagement.TestBlockTokenWithDFS </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Integration testing of access token, involving NN, DN, and Balancer
 */
@Test public void testEnd2End() throws Exception {
  Configuration conf=new Configuration();
  conf.setBoolean(DFSConfigKeys.DFS_BLOCK_ACCESS_TOKEN_ENABLE_KEY,true);
  new TestBalancer().integrationTest(conf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.blockmanagement.TestBlocksWithNotEnoughRacks </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUnderReplicatedUsesNewRacks() throws Exception {
  Configuration conf=getConf();
  short REPLICATION_FACTOR=3;
  final Path filePath=new Path("/testFile");
  String racks[]={"/rack1","/rack1","/rack1","/rack1","/rack1"};
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(racks.length).racks(racks).build();
  final FSNamesystem ns=cluster.getNameNode().getNamesystem();
  try {
    final FileSystem fs=cluster.getFileSystem();
    DFSTestUtil.createFile(fs,filePath,1L,REPLICATION_FACTOR,1L);
    ExtendedBlock b=DFSTestUtil.getFirstBlock(fs,filePath);
    DFSTestUtil.waitForReplication(cluster,b,1,REPLICATION_FACTOR,0);
    String newRacks[]={"/rack2","/rack2"};
    cluster.startDataNodes(conf,2,true,null,newRacks);
    REPLICATION_FACTOR=5;
    NameNodeAdapter.setReplication(ns,"/testFile",REPLICATION_FACTOR);
    DFSTestUtil.waitForReplication(cluster,b,2,REPLICATION_FACTOR,0);
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReplDueToNodeFailRespectsRackPolicy() throws Exception {
  Configuration conf=getConf();
  short REPLICATION_FACTOR=3;
  final Path filePath=new Path("/testFile");
  String racks[]={"/rack1","/rack1","/rack1","/rack2","/rack2"};
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(racks.length).racks(racks).build();
  final FSNamesystem ns=cluster.getNameNode().getNamesystem();
  final DatanodeManager dm=ns.getBlockManager().getDatanodeManager();
  try {
    final FileSystem fs=cluster.getFileSystem();
    DFSTestUtil.createFile(fs,filePath,1L,REPLICATION_FACTOR,1L);
    ExtendedBlock b=DFSTestUtil.getFirstBlock(fs,filePath);
    DFSTestUtil.waitForReplication(cluster,b,2,REPLICATION_FACTOR,0);
    ArrayList<DataNode> datanodes=cluster.getDataNodes();
    int idx=datanodes.size() - 1;
    DataNode dataNode=datanodes.get(idx);
    DatanodeID dnId=dataNode.getDatanodeId();
    cluster.stopDataNode(idx);
    dm.removeDatanode(dnId);
    DFSTestUtil.waitForReplication(cluster,b,2,REPLICATION_FACTOR,0);
    datanodes=cluster.getDataNodes();
    idx=datanodes.size() - 1;
    dataNode=datanodes.get(idx);
    dnId=dataNode.getDatanodeId();
    cluster.stopDataNode(idx);
    dm.removeDatanode(dnId);
    DFSTestUtil.waitForReplication(cluster,b,1,REPLICATION_FACTOR,1);
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSufficientlySingleReplBlockUsesNewRack() throws Exception {
  Configuration conf=getConf();
  short REPLICATION_FACTOR=1;
  final Path filePath=new Path("/testFile");
  String racks[]={"/rack1","/rack1","/rack1","/rack2"};
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(racks.length).racks(racks).build();
  final FSNamesystem ns=cluster.getNameNode().getNamesystem();
  try {
    final FileSystem fs=cluster.getFileSystem();
    DFSTestUtil.createFile(fs,filePath,1L,REPLICATION_FACTOR,1L);
    ExtendedBlock b=DFSTestUtil.getFirstBlock(fs,filePath);
    DFSTestUtil.waitForReplication(cluster,b,1,REPLICATION_FACTOR,0);
    REPLICATION_FACTOR=2;
    NameNodeAdapter.setReplication(ns,"/testFile",REPLICATION_FACTOR);
    DFSTestUtil.waitForReplication(cluster,b,2,REPLICATION_FACTOR,0);
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSufficientlyReplBlocksUsesNewRack() throws Exception {
  Configuration conf=getConf();
  final short REPLICATION_FACTOR=3;
  final Path filePath=new Path("/testFile");
  String racks[]={"/rack1","/rack1","/rack1"};
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(racks.length).racks(racks).build();
  try {
    final FileSystem fs=cluster.getFileSystem();
    DFSTestUtil.createFile(fs,filePath,1L,REPLICATION_FACTOR,1L);
    ExtendedBlock b=DFSTestUtil.getFirstBlock(fs,filePath);
    DFSTestUtil.waitForReplication(cluster,b,1,REPLICATION_FACTOR,0);
    String newRacks[]={"/rack2"};
    cluster.startDataNodes(conf,1,true,null,newRacks);
    cluster.waitActive();
    DFSTestUtil.waitForReplication(cluster,b,2,REPLICATION_FACTOR,0);
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReduceReplFactorRespectsRackPolicy() throws Exception {
  Configuration conf=getConf();
  short REPLICATION_FACTOR=3;
  final Path filePath=new Path("/testFile");
  String racks[]={"/rack1","/rack1","/rack2","/rack2"};
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(racks.length).racks(racks).build();
  final FSNamesystem ns=cluster.getNameNode().getNamesystem();
  try {
    final FileSystem fs=cluster.getFileSystem();
    DFSTestUtil.createFile(fs,filePath,1L,REPLICATION_FACTOR,1L);
    ExtendedBlock b=DFSTestUtil.getFirstBlock(fs,filePath);
    DFSTestUtil.waitForReplication(cluster,b,2,REPLICATION_FACTOR,0);
    REPLICATION_FACTOR=2;
    NameNodeAdapter.setReplication(ns,"/testFile",REPLICATION_FACTOR);
    DFSTestUtil.waitForReplication(cluster,b,2,REPLICATION_FACTOR,0);
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.blockmanagement.TestCachedBlocksList </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testMultipleLists(){
  DatanodeDescriptor[] datanodes=new DatanodeDescriptor[]{new DatanodeDescriptor(new DatanodeID("127.0.0.1","localhost","abcd",5000,5001,5002,5003)),new DatanodeDescriptor(new DatanodeID("127.0.1.1","localhost","efgh",6000,6001,6002,6003))};
  CachedBlocksList[] lists=new CachedBlocksList[]{datanodes[0].getPendingCached(),datanodes[0].getCached(),datanodes[1].getPendingCached(),datanodes[1].getCached(),datanodes[1].getPendingUncached()};
  final int NUM_BLOCKS=8000;
  CachedBlock[] blocks=new CachedBlock[NUM_BLOCKS];
  for (int i=0; i < NUM_BLOCKS; i++) {
    blocks[i]=new CachedBlock(i,(short)i,true);
  }
  Random r=new Random(654);
  for (  CachedBlocksList list : lists) {
    testAddElementsToList(list,blocks);
  }
  for (  CachedBlocksList list : lists) {
    testRemoveElementsFromList(r,list,blocks);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.blockmanagement.TestReplicationPolicy </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * In this testcase, it tries to choose more targets than available nodes and
 * check the result, with stale node avoidance on the write path enabled.
 * @throws Exception
 */
@Test public void testChooseTargetWithMoreThanAvailableNodesWithStaleness() throws Exception {
  try {
    namenode.getNamesystem().getBlockManager().getDatanodeManager().setNumStaleNodes(NUM_OF_DATANODES);
    testChooseTargetWithMoreThanAvailableNodes();
  }
  finally {
    namenode.getNamesystem().getBlockManager().getDatanodeManager().setNumStaleNodes(0);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testConvertLastBlockToUnderConstructionDoesNotCauseSkippedReplication() throws IOException {
  Namesystem mockNS=mock(Namesystem.class);
  when(mockNS.isPopulatingReplQueues()).thenReturn(true);
  FSClusterStats mockStats=mock(FSClusterStats.class);
  BlockManager bm=new BlockManager(mockNS,mockStats,new HdfsConfiguration());
  UnderReplicatedBlocks underReplicatedBlocks=bm.neededReplications;
  Block block1=new Block(random.nextLong());
  Block block2=new Block(random.nextLong());
  underReplicatedBlocks.add(block1,0,1,1);
  underReplicatedBlocks.add(block2,0,1,1);
  List<List<Block>> chosenBlocks;
  chosenBlocks=underReplicatedBlocks.chooseUnderReplicatedBlocks(1);
  assertTheChosenBlocks(chosenBlocks,1,0,0,0,0);
  final BlockInfo info=new BlockInfo(block1,1);
  final BlockCollection mbc=mock(BlockCollection.class);
  when(mbc.getLastBlock()).thenReturn(info);
  when(mbc.getPreferredBlockSize()).thenReturn(block1.getNumBytes() + 1);
  when(mbc.getBlockReplication()).thenReturn((short)1);
  when(mbc.isUnderConstruction()).thenReturn(true);
  ContentSummary cs=mock(ContentSummary.class);
  when(cs.getLength()).thenReturn((long)1);
  when(mbc.computeContentSummary()).thenReturn(cs);
  info.setBlockCollection(mbc);
  bm.addBlockCollection(info,mbc);
  DatanodeStorageInfo[] storageAry={new DatanodeStorageInfo(dataNodes[0],new DatanodeStorage("s1"))};
  final BlockInfoUnderConstruction ucBlock=info.convertToBlockUnderConstruction(BlockUCState.UNDER_CONSTRUCTION,storageAry);
  when(mbc.setLastBlock((BlockInfo)any(),(DatanodeStorageInfo[])any())).thenReturn(ucBlock);
  bm.convertLastBlockToUnderConstruction(mbc);
  chosenBlocks=underReplicatedBlocks.chooseUnderReplicatedBlocks(1);
  assertTheChosenBlocks(chosenBlocks,1,0,0,0,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test for the ChooseUnderReplicatedBlocks are processed based on priority
 */
@Test public void testChooseUnderReplicatedBlocks() throws Exception {
  UnderReplicatedBlocks underReplicatedBlocks=new UnderReplicatedBlocks();
  for (int i=0; i < 5; i++) {
    underReplicatedBlocks.add(new Block(random.nextLong()),1,0,3);
    underReplicatedBlocks.add(new Block(random.nextLong()),2,0,7);
    underReplicatedBlocks.add(new Block(random.nextLong()),6,0,6);
    underReplicatedBlocks.add(new Block(random.nextLong()),5,0,6);
    underReplicatedBlocks.add(new Block(random.nextLong()),0,0,3);
  }
  List<List<Block>> chosenBlocks=underReplicatedBlocks.chooseUnderReplicatedBlocks(6);
  assertTheChosenBlocks(chosenBlocks,5,1,0,0,0);
  chosenBlocks=underReplicatedBlocks.chooseUnderReplicatedBlocks(10);
  assertTheChosenBlocks(chosenBlocks,0,4,5,1,0);
  underReplicatedBlocks.add(new Block(random.nextLong()),1,0,3);
  chosenBlocks=underReplicatedBlocks.chooseUnderReplicatedBlocks(10);
  assertTheChosenBlocks(chosenBlocks,1,0,0,4,5);
  chosenBlocks=underReplicatedBlocks.chooseUnderReplicatedBlocks(7);
  assertTheChosenBlocks(chosenBlocks,6,1,0,0,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testAddStoredBlockDoesNotCauseSkippedReplication() throws IOException {
  Namesystem mockNS=mock(Namesystem.class);
  when(mockNS.isPopulatingReplQueues()).thenReturn(true);
  when(mockNS.hasWriteLock()).thenReturn(true);
  FSClusterStats mockStats=mock(FSClusterStats.class);
  BlockManager bm=new BlockManager(mockNS,mockStats,new HdfsConfiguration());
  UnderReplicatedBlocks underReplicatedBlocks=bm.neededReplications;
  Block block1=new Block(random.nextLong());
  Block block2=new Block(random.nextLong());
  underReplicatedBlocks.add(block1,0,1,1);
  underReplicatedBlocks.add(block2,0,1,1);
  List<List<Block>> chosenBlocks;
  chosenBlocks=underReplicatedBlocks.chooseUnderReplicatedBlocks(1);
  assertTheChosenBlocks(chosenBlocks,1,0,0,0,0);
  BlockInfoUnderConstruction info=new BlockInfoUnderConstruction(block1,1);
  BlockCollection bc=mock(BlockCollection.class);
  when(bc.getBlockReplication()).thenReturn((short)1);
  bm.addBlockCollection(info,bc);
  bm.addStoredBlockUnderConstruction(new StatefulBlockInfo(info,info,ReplicaState.FINALIZED),TestReplicationPolicy.storages[0]);
  chosenBlocks=underReplicatedBlocks.chooseUnderReplicatedBlocks(1);
  assertTheChosenBlocks(chosenBlocks,1,0,0,0,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testupdateNeededReplicationsDoesNotCauseSkippedReplication() throws IOException {
  Namesystem mockNS=mock(Namesystem.class);
  when(mockNS.isPopulatingReplQueues()).thenReturn(true);
  FSClusterStats mockStats=mock(FSClusterStats.class);
  BlockManager bm=new BlockManager(mockNS,mockStats,new HdfsConfiguration());
  UnderReplicatedBlocks underReplicatedBlocks=bm.neededReplications;
  Block block1=new Block(random.nextLong());
  Block block2=new Block(random.nextLong());
  underReplicatedBlocks.add(block1,0,1,1);
  underReplicatedBlocks.add(block2,0,1,1);
  List<List<Block>> chosenBlocks;
  chosenBlocks=underReplicatedBlocks.chooseUnderReplicatedBlocks(1);
  assertTheChosenBlocks(chosenBlocks,1,0,0,0,0);
  bm.setReplication((short)0,(short)1,"",block1);
  chosenBlocks=underReplicatedBlocks.chooseUnderReplicatedBlocks(1);
  assertTheChosenBlocks(chosenBlocks,1,0,0,0,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testUpdateDoesNotCauseSkippedReplication(){
  UnderReplicatedBlocks underReplicatedBlocks=new UnderReplicatedBlocks();
  Block block1=new Block(random.nextLong());
  Block block2=new Block(random.nextLong());
  Block block3=new Block(random.nextLong());
  final int block1CurReplicas=2;
  final int block1ExpectedReplicas=7;
  underReplicatedBlocks.add(block1,block1CurReplicas,0,block1ExpectedReplicas);
  underReplicatedBlocks.add(block2,2,0,7);
  underReplicatedBlocks.add(block3,2,0,6);
  List<List<Block>> chosenBlocks;
  chosenBlocks=underReplicatedBlocks.chooseUnderReplicatedBlocks(1);
  assertTheChosenBlocks(chosenBlocks,0,1,0,0,0);
  underReplicatedBlocks.update(block1,block1CurReplicas + 1,0,block1ExpectedReplicas,1,0);
  chosenBlocks=underReplicatedBlocks.chooseUnderReplicatedBlocks(1);
  assertTheChosenBlocks(chosenBlocks,0,1,0,0,0);
  chosenBlocks=underReplicatedBlocks.chooseUnderReplicatedBlocks(1);
  assertTheChosenBlocks(chosenBlocks,0,0,1,0,0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.common.TestJspHelper </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetUgi() throws IOException {
  conf.set(DFSConfigKeys.FS_DEFAULT_NAME_KEY,"hdfs://localhost:4321/");
  HttpServletRequest request=mock(HttpServletRequest.class);
  ServletContext context=mock(ServletContext.class);
  String user="TheDoctor";
  Text userText=new Text(user);
  DelegationTokenIdentifier dtId=new DelegationTokenIdentifier(userText,userText,null);
  Token<DelegationTokenIdentifier> token=new Token<DelegationTokenIdentifier>(dtId,new DummySecretManager(0,0,0,0));
  String tokenString=token.encodeToUrlString();
  when(request.getParameter(JspHelper.DELEGATION_PARAMETER_NAME)).thenReturn(tokenString);
  when(request.getRemoteUser()).thenReturn(user);
  when(request.getParameter(JspHelper.NAMENODE_ADDRESS)).thenReturn("1.1.1.1:1111");
  conf.set(DFSConfigKeys.HADOOP_SECURITY_AUTHENTICATION,"kerberos");
  UserGroupInformation.setConfiguration(conf);
  verifyServiceInToken(context,request,"1.1.1.1:1111");
  when(request.getParameter(JspHelper.NAMENODE_ADDRESS)).thenReturn(null);
  InetSocketAddress addr=new InetSocketAddress("localhost",2222);
  when(context.getAttribute(NameNodeHttpServer.NAMENODE_ADDRESS_ATTRIBUTE_KEY)).thenReturn(addr);
  verifyServiceInToken(context,request,addr.getAddress().getHostAddress() + ":2222");
  token.setService(new Text("3.3.3.3:3333"));
  tokenString=token.encodeToUrlString();
  when(context.getAttribute(NameNodeHttpServer.NAMENODE_ADDRESS_ATTRIBUTE_KEY)).thenReturn(null);
  when(request.getParameter(JspHelper.DELEGATION_PARAMETER_NAME)).thenReturn(tokenString);
  verifyServiceInToken(context,request,"3.3.3.3:3333");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestBPOfferService </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Ensure that, if the two NNs configured for a block pool
 * have different block pool IDs, they will refuse to both
 * register.
 */
@Test public void testNNsFromDifferentClusters() throws Exception {
  Mockito.doReturn(new NamespaceInfo(1,"fake foreign cluster",FAKE_BPID,0)).when(mockNN1).versionRequest();
  BPOfferService bpos=setupBPOSForNNs(mockNN1,mockNN2);
  bpos.start();
  try {
    waitForOneToFail(bpos);
  }
  finally {
    bpos.stop();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that DNA_INVALIDATE commands from the standby are ignored.
 */
@Test public void testIgnoreDeletionsFromNonActive() throws Exception {
  BPOfferService bpos=setupBPOSForNNs(mockNN1,mockNN2);
  Mockito.doReturn(new BlockCommand(DatanodeProtocol.DNA_INVALIDATE,FAKE_BPID,new Block[]{FAKE_BLOCK.getLocalBlock()})).when(mockNN2).blockReport(Mockito.<DatanodeRegistration>anyObject(),Mockito.eq(FAKE_BPID),Mockito.<StorageBlockReport[]>anyObject());
  bpos.start();
  try {
    waitForInitialization(bpos);
    waitForBlockReport(mockNN1);
    waitForBlockReport(mockNN2);
  }
  finally {
    bpos.stop();
  }
  Mockito.verify(mockFSDataset,Mockito.never()).invalidate(Mockito.eq(FAKE_BPID),(Block[])Mockito.anyObject());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestBlockPoolSliceStorage </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=300000) public void testGetTrashAndRestoreDirectories(){
  storage=makeBlockPoolStorage();
  for (int i=0; i < 3; ++i) {
    getTrashDirectoryForBlockFile("blk_myblockfile",i);
    getTrashDirectoryForBlockFile("blk_myblockfile.meta",i);
    getRestoreDirectoryForBlockFile("blk_myblockfile",i);
    getRestoreDirectoryForBlockFile("blk_myblockfile.meta",i);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestBlockRecovery </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * BlockRecovery_02.11.
 * Two replicas are RBW.
 * @throws IOException in case of an error
 */
@Test public void testRBWReplicas() throws IOException {
  if (LOG.isDebugEnabled()) {
    LOG.debug("Running " + GenericTestUtils.getMethodName());
  }
  ReplicaRecoveryInfo replica1=new ReplicaRecoveryInfo(BLOCK_ID,REPLICA_LEN1,GEN_STAMP - 1,ReplicaState.RBW);
  ReplicaRecoveryInfo replica2=new ReplicaRecoveryInfo(BLOCK_ID,REPLICA_LEN2,GEN_STAMP - 2,ReplicaState.RBW);
  InterDatanodeProtocol dn1=mock(InterDatanodeProtocol.class);
  InterDatanodeProtocol dn2=mock(InterDatanodeProtocol.class);
  long minLen=Math.min(REPLICA_LEN1,REPLICA_LEN2);
  testSyncReplicas(replica1,replica2,dn1,dn2,minLen);
  verify(dn1).updateReplicaUnderRecovery(block,RECOVERY_ID,minLen);
  verify(dn2).updateReplicaUnderRecovery(block,RECOVERY_ID,minLen);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * BlockRecovery_02.12.
 * One replica is RBW and another is RWR. 
 * @throws IOException in case of an error
 */
@Test public void testRBW_RWRReplicas() throws IOException {
  if (LOG.isDebugEnabled()) {
    LOG.debug("Running " + GenericTestUtils.getMethodName());
  }
  ReplicaRecoveryInfo replica1=new ReplicaRecoveryInfo(BLOCK_ID,REPLICA_LEN1,GEN_STAMP - 1,ReplicaState.RBW);
  ReplicaRecoveryInfo replica2=new ReplicaRecoveryInfo(BLOCK_ID,REPLICA_LEN1,GEN_STAMP - 2,ReplicaState.RWR);
  InterDatanodeProtocol dn1=mock(InterDatanodeProtocol.class);
  InterDatanodeProtocol dn2=mock(InterDatanodeProtocol.class);
  testSyncReplicas(replica1,replica2,dn1,dn2,REPLICA_LEN1);
  verify(dn1).updateReplicaUnderRecovery(block,RECOVERY_ID,REPLICA_LEN1);
  verify(dn2,never()).updateReplicaUnderRecovery(block,RECOVERY_ID,REPLICA_LEN1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * BlockRecovery_02.9.
 * One replica is Finalized and another is RBW. 
 * @throws IOException in case of an error
 */
@Test public void testFinalizedRbwReplicas() throws IOException {
  if (LOG.isDebugEnabled()) {
    LOG.debug("Running " + GenericTestUtils.getMethodName());
  }
  ReplicaRecoveryInfo replica1=new ReplicaRecoveryInfo(BLOCK_ID,REPLICA_LEN1,GEN_STAMP - 1,ReplicaState.FINALIZED);
  ReplicaRecoveryInfo replica2=new ReplicaRecoveryInfo(BLOCK_ID,REPLICA_LEN1,GEN_STAMP - 2,ReplicaState.RBW);
  InterDatanodeProtocol dn1=mock(InterDatanodeProtocol.class);
  InterDatanodeProtocol dn2=mock(InterDatanodeProtocol.class);
  testSyncReplicas(replica1,replica2,dn1,dn2,REPLICA_LEN1);
  verify(dn1).updateReplicaUnderRecovery(block,RECOVERY_ID,REPLICA_LEN1);
  verify(dn2).updateReplicaUnderRecovery(block,RECOVERY_ID,REPLICA_LEN1);
  replica1=new ReplicaRecoveryInfo(BLOCK_ID,REPLICA_LEN1,GEN_STAMP - 1,ReplicaState.FINALIZED);
  replica2=new ReplicaRecoveryInfo(BLOCK_ID,REPLICA_LEN2,GEN_STAMP - 2,ReplicaState.RBW);
  dn1=mock(InterDatanodeProtocol.class);
  dn2=mock(InterDatanodeProtocol.class);
  testSyncReplicas(replica1,replica2,dn1,dn2,REPLICA_LEN1);
  verify(dn1).updateReplicaUnderRecovery(block,RECOVERY_ID,REPLICA_LEN1);
  verify(dn2,never()).updateReplicaUnderRecovery(block,RECOVERY_ID,REPLICA_LEN1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * BlockRecoveryFI_06. all datanodes throws an exception.
 * @throws IOExceptionin case of an error
 */
@Test public void testErrorReplicas() throws IOException, InterruptedException {
  if (LOG.isDebugEnabled()) {
    LOG.debug("Running " + GenericTestUtils.getMethodName());
  }
  DataNode spyDN=spy(dn);
  doThrow(new IOException()).when(spyDN).initReplicaRecovery(any(RecoveringBlock.class));
  Daemon d=spyDN.recoverBlocks("fake NN",initRecoveringBlocks());
  d.join();
  verify(spyDN,never()).syncBlock(any(RecoveringBlock.class),anyListOf(BlockRecord.class));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * BlockRecovery_02.13. 
 * Two replicas are RWR.
 * @throws IOException in case of an error
 */
@Test public void testRWRReplicas() throws IOException {
  if (LOG.isDebugEnabled()) {
    LOG.debug("Running " + GenericTestUtils.getMethodName());
  }
  ReplicaRecoveryInfo replica1=new ReplicaRecoveryInfo(BLOCK_ID,REPLICA_LEN1,GEN_STAMP - 1,ReplicaState.RWR);
  ReplicaRecoveryInfo replica2=new ReplicaRecoveryInfo(BLOCK_ID,REPLICA_LEN2,GEN_STAMP - 2,ReplicaState.RWR);
  InterDatanodeProtocol dn1=mock(InterDatanodeProtocol.class);
  InterDatanodeProtocol dn2=mock(InterDatanodeProtocol.class);
  long minLen=Math.min(REPLICA_LEN1,REPLICA_LEN2);
  testSyncReplicas(replica1,replica2,dn1,dn2,minLen);
  verify(dn1).updateReplicaUnderRecovery(block,RECOVERY_ID,minLen);
  verify(dn2).updateReplicaUnderRecovery(block,RECOVERY_ID,minLen);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * BlockRecovery_02.10.
 * One replica is Finalized and another is RWR. 
 * @throws IOException in case of an error
 */
@Test public void testFinalizedRwrReplicas() throws IOException {
  if (LOG.isDebugEnabled()) {
    LOG.debug("Running " + GenericTestUtils.getMethodName());
  }
  ReplicaRecoveryInfo replica1=new ReplicaRecoveryInfo(BLOCK_ID,REPLICA_LEN1,GEN_STAMP - 1,ReplicaState.FINALIZED);
  ReplicaRecoveryInfo replica2=new ReplicaRecoveryInfo(BLOCK_ID,REPLICA_LEN1,GEN_STAMP - 2,ReplicaState.RWR);
  InterDatanodeProtocol dn1=mock(InterDatanodeProtocol.class);
  InterDatanodeProtocol dn2=mock(InterDatanodeProtocol.class);
  testSyncReplicas(replica1,replica2,dn1,dn2,REPLICA_LEN1);
  verify(dn1).updateReplicaUnderRecovery(block,RECOVERY_ID,REPLICA_LEN1);
  verify(dn2,never()).updateReplicaUnderRecovery(block,RECOVERY_ID,REPLICA_LEN1);
  replica1=new ReplicaRecoveryInfo(BLOCK_ID,REPLICA_LEN1,GEN_STAMP - 1,ReplicaState.FINALIZED);
  replica2=new ReplicaRecoveryInfo(BLOCK_ID,REPLICA_LEN2,GEN_STAMP - 2,ReplicaState.RBW);
  dn1=mock(InterDatanodeProtocol.class);
  dn2=mock(InterDatanodeProtocol.class);
  testSyncReplicas(replica1,replica2,dn1,dn2,REPLICA_LEN1);
  verify(dn1).updateReplicaUnderRecovery(block,RECOVERY_ID,REPLICA_LEN1);
  verify(dn2,never()).updateReplicaUnderRecovery(block,RECOVERY_ID,REPLICA_LEN1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * BlockRecoveryFI_05. One DN throws RecoveryInProgressException.
 * @throws IOExceptionin case of an error
 */
@Test public void testRecoveryInProgressException() throws IOException, InterruptedException {
  if (LOG.isDebugEnabled()) {
    LOG.debug("Running " + GenericTestUtils.getMethodName());
  }
  DataNode spyDN=spy(dn);
  doThrow(new RecoveryInProgressException("Replica recovery is in progress")).when(spyDN).initReplicaRecovery(any(RecoveringBlock.class));
  Daemon d=spyDN.recoverBlocks("fake NN",initRecoveringBlocks());
  d.join();
  verify(spyDN,never()).syncBlock(any(RecoveringBlock.class),anyListOf(BlockRecord.class));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * BlockRecoveryFI_07. max replica length from all DNs is zero.
 * @throws IOException in case of an error
 */
@Test public void testZeroLenReplicas() throws IOException, InterruptedException {
  if (LOG.isDebugEnabled()) {
    LOG.debug("Running " + GenericTestUtils.getMethodName());
  }
  DataNode spyDN=spy(dn);
  doReturn(new ReplicaRecoveryInfo(block.getBlockId(),0,block.getGenerationStamp(),ReplicaState.FINALIZED)).when(spyDN).initReplicaRecovery(any(RecoveringBlock.class));
  Daemon d=spyDN.recoverBlocks("fake NN",initRecoveringBlocks());
  d.join();
  DatanodeProtocol dnP=dn.getActiveNamenodeForBP(POOL_ID);
  verify(dnP).commitBlockSynchronization(block,RECOVERY_ID,0,true,true,DatanodeID.EMPTY_ARRAY,null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestCachingStrategy </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000) public void testFadviseSkippedForSmallReads() throws Exception {
  LOG.info("testFadviseSkippedForSmallReads");
  tracker.clear();
  Configuration conf=new HdfsConfiguration();
  conf.setBoolean(DFSConfigKeys.DFS_DATANODE_DROP_CACHE_BEHIND_READS_KEY,true);
  conf.setBoolean(DFSConfigKeys.DFS_DATANODE_DROP_CACHE_BEHIND_WRITES_KEY,true);
  MiniDFSCluster cluster=null;
  String TEST_PATH="/test";
  int TEST_PATH_LEN=MAX_TEST_FILE_LEN;
  FSDataInputStream fis=null;
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(1).build();
    cluster.waitActive();
    FileSystem fs=cluster.getFileSystem();
    createHdfsFile(fs,new Path(TEST_PATH),TEST_PATH_LEN,null);
    ExtendedBlock block=cluster.getNameNode().getRpcServer().getBlockLocations(TEST_PATH,0,Long.MAX_VALUE).get(0).getBlock();
    String fadvisedFileName=MiniDFSCluster.getBlockFile(0,block).getName();
    Stats stats=tracker.getStats(fadvisedFileName);
    stats.assertDroppedInRange(0,TEST_PATH_LEN - WRITE_PACKET_SIZE);
    stats.clear();
    stats.assertNotDroppedInRange(0,TEST_PATH_LEN);
    fis=fs.open(new Path(TEST_PATH));
    byte buf[]=new byte[17];
    fis.readFully(4096,buf,0,buf.length);
    stats=tracker.getStats(fadvisedFileName);
    stats.assertNotDroppedInRange(0,TEST_PATH_LEN - WRITE_PACKET_SIZE);
  }
  finally {
    IOUtils.cleanup(null,fis);
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestDataNodeInitStorage </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testDataNodeInitStorage() throws Throwable {
  Configuration conf=new HdfsConfiguration();
  SimulatedFsDatasetVerifier.setFactory(conf);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(1).build();
  cluster.waitActive();
  cluster.shutdown();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestDataNodeMetrics </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReceivePacketMetrics() throws Exception {
  Configuration conf=new HdfsConfiguration();
  final int interval=1;
  conf.set(DFSConfigKeys.DFS_METRICS_PERCENTILES_INTERVALS_KEY,"" + interval);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).build();
  try {
    cluster.waitActive();
    DistributedFileSystem fs=cluster.getFileSystem();
    Path testFile=new Path("/testFlushNanosMetric.txt");
    FSDataOutputStream fout=fs.create(testFile);
    fout.write(new byte[1]);
    fout.hsync();
    fout.close();
    List<DataNode> datanodes=cluster.getDataNodes();
    DataNode datanode=datanodes.get(0);
    MetricsRecordBuilder dnMetrics=getMetrics(datanode.getMetrics().name());
    assertCounter("FlushNanosNumOps",2L,dnMetrics);
    assertCounter("FsyncNanosNumOps",2L,dnMetrics);
    Thread.sleep((interval + 1) * 1000);
    String sec=interval + "s";
    assertQuantileGauges("FlushNanos" + sec,dnMetrics);
    assertQuantileGauges("FsyncNanos" + sec,dnMetrics);
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestDataNodeRollingUpgrade </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=600000) public void testDatanodeRollingUpgradeWithFinalize() throws Exception {
  try {
    startCluster();
    Path testFile1=new Path("/TestDataNodeRollingUpgrade1.dat");
    Path testFile2=new Path("/TestDataNodeRollingUpgrade2.dat");
    DFSTestUtil.createFile(fs,testFile1,FILE_SIZE,REPL_FACTOR,SEED);
    DFSTestUtil.createFile(fs,testFile2,FILE_SIZE,REPL_FACTOR,SEED);
    fs.setSafeMode(SafeModeAction.SAFEMODE_ENTER);
    startRollingUpgrade();
    File blockFile=getBlockForFile(testFile2,true);
    File trashFile=getTrashFileForBlock(blockFile,false);
    deleteAndEnsureInTrash(testFile2,blockFile,trashFile);
    finalizeRollingUpgrade();
    ensureTrashDisabled();
    assert (!fs.exists(testFile2));
    assert (fs.exists(testFile1));
  }
  finally {
    shutdownCluster();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestDataNodeVolumeFailure </h4><pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testVolumeFailure() throws Exception {
  FileSystem fs=cluster.getFileSystem();
  dataDir=new File(cluster.getDataDirectory());
  System.out.println("Data dir: is " + dataDir.getPath());
  String filename="/test.txt";
  Path filePath=new Path(filename);
  int filesize=block_size * blocks_num;
  DFSTestUtil.createFile(fs,filePath,filesize,repl,1L);
  DFSTestUtil.waitReplication(fs,filePath,repl);
  System.out.println("file " + filename + "(size "+ filesize+ ") is created and replicated");
  data_fail=new File(dataDir,"data3");
  failedDir=MiniDFSCluster.getFinalizedDir(dataDir,cluster.getNamesystem().getBlockPoolId());
  if (failedDir.exists() && !deteteBlocks(failedDir)) {
    throw new IOException("Could not delete hdfs directory '" + failedDir + "'");
  }
  data_fail.setReadOnly();
  failedDir.setReadOnly();
  System.out.println("Deleteing " + failedDir.getPath() + "; exist="+ failedDir.exists());
  triggerFailure(filename,filesize);
  DataNode dn=cluster.getDataNodes().get(1);
  String bpid=cluster.getNamesystem().getBlockPoolId();
  DatanodeRegistration dnR=dn.getDNRegistrationForBP(bpid);
  Map<DatanodeStorage,BlockListAsLongs> perVolumeBlockLists=dn.getFSDataset().getBlockReports(bpid);
  StorageBlockReport[] reports=new StorageBlockReport[perVolumeBlockLists.size()];
  int reportIndex=0;
  for (  Map.Entry<DatanodeStorage,BlockListAsLongs> kvPair : perVolumeBlockLists.entrySet()) {
    DatanodeStorage dnStorage=kvPair.getKey();
    BlockListAsLongs blockList=kvPair.getValue();
    reports[reportIndex++]=new StorageBlockReport(dnStorage,blockList.getBlockListAsLongs());
  }
  cluster.getNameNodeRpc().blockReport(dnR,bpid,reports);
  verify(filename,filesize);
  System.out.println("creating file test1.txt");
  Path fileName1=new Path("/test1.txt");
  DFSTestUtil.createFile(fs,fileName1,filesize,repl,1L);
  DFSTestUtil.waitReplication(fs,fileName1,repl);
  System.out.println("file " + fileName1.getName() + " is created and replicated");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestDataNodeVolumeFailureToleration </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test for different combination of volume configs and volumes tolerated 
 * values.
 */
@Test public void testVolumeAndTolerableConfiguration() throws Exception {
  testVolumeConfig(-1,0,false,true);
  testVolumeConfig(100,0,false,true);
  testVolumeConfig(0,1,false,false);
  testVolumeConfig(1,1,true,false);
  testVolumeConfig(0,0,true,false);
  testVolumeConfig(0,2,false,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestDatanodeStartupOptions </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * A few options that should all fail to parse.
 */
@Test(timeout=60000) public void testStartupFailure(){
  checkExpected(false,StartupOption.REGULAR,conf,"unknownoption");
  checkExpected(false,StartupOption.REGULAR,conf,"-regular -rollback");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * A few options that should all parse successfully.
 */
@Test(timeout=60000) public void testStartupSuccess(){
  checkExpected(true,StartupOption.REGULAR,conf);
  checkExpected(true,StartupOption.REGULAR,conf,"-regular");
  checkExpected(true,StartupOption.REGULAR,conf,"-REGULAR");
  checkExpected(true,StartupOption.ROLLBACK,conf,"-rollback");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestDirectoryScanner </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDirectoryScanner() throws Exception {
  for (int parallelism=1; parallelism < 3; parallelism++) {
    runTest(parallelism);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000) public void TestScanInfo() throws Exception {
  testScanInfoObject(123,new File(TEST_VOLUME.getFinalizedDir(BPID_1).getAbsolutePath(),"blk_123"),new File(TEST_VOLUME.getFinalizedDir(BPID_1).getAbsolutePath(),"blk_123__1001.meta"));
  testScanInfoObject(464,new File(TEST_VOLUME.getFinalizedDir(BPID_1).getAbsolutePath(),"blk_123"),null);
  testScanInfoObject(523,null,new File(TEST_VOLUME.getFinalizedDir(BPID_1).getAbsolutePath(),"blk_123__1009.meta"));
  testScanInfoObject(789,null,null);
  testScanInfoObject(456);
  testScanInfoObject(123,new File(TEST_VOLUME.getFinalizedDir(BPID_2).getAbsolutePath(),"blk_567"),new File(TEST_VOLUME.getFinalizedDir(BPID_2).getAbsolutePath(),"blk_567__1004.meta"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestDnRespectsBlockReportSplitThreshold </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests the behavior when the count of blocks is exactly equal to the
 * threshold.
 */
@Test(timeout=300000) public void testCornerCaseAtThreshold() throws IOException, InterruptedException {
  startUpCluster(BLOCKS_IN_FILE);
  NameNode nn=cluster.getNameNode();
  DataNode dn=cluster.getDataNodes().get(0);
  createFile(GenericTestUtils.getMethodName(),BLOCKS_IN_FILE);
  DatanodeProtocolClientSideTranslatorPB nnSpy=DataNodeTestUtils.spyOnBposToNN(dn,nn);
  DataNodeTestUtils.triggerBlockReport(dn);
  ArgumentCaptor<StorageBlockReport[]> captor=ArgumentCaptor.forClass(StorageBlockReport[].class);
  Mockito.verify(nnSpy,times(cluster.getStoragesPerDatanode())).blockReport(any(DatanodeRegistration.class),anyString(),captor.capture());
  verifyCapturedArguments(captor,1,BLOCKS_IN_FILE);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that if splitThreshold is zero, then we always get a separate
 * call per storage.
 */
@Test(timeout=300000) public void testAlwaysSplit() throws IOException, InterruptedException {
  startUpCluster(0);
  NameNode nn=cluster.getNameNode();
  DataNode dn=cluster.getDataNodes().get(0);
  createFile(GenericTestUtils.getMethodName(),BLOCKS_IN_FILE);
  DatanodeProtocolClientSideTranslatorPB nnSpy=DataNodeTestUtils.spyOnBposToNN(dn,nn);
  DataNodeTestUtils.triggerBlockReport(dn);
  ArgumentCaptor<StorageBlockReport[]> captor=ArgumentCaptor.forClass(StorageBlockReport[].class);
  Mockito.verify(nnSpy,times(cluster.getStoragesPerDatanode())).blockReport(any(DatanodeRegistration.class),anyString(),captor.capture());
  verifyCapturedArguments(captor,1,BLOCKS_IN_FILE);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests the behavior when the count of blocks is exactly one less than
 * the threshold.
 */
@Test(timeout=300000) public void testCornerCaseUnderThreshold() throws IOException, InterruptedException {
  startUpCluster(BLOCKS_IN_FILE + 1);
  NameNode nn=cluster.getNameNode();
  DataNode dn=cluster.getDataNodes().get(0);
  createFile(GenericTestUtils.getMethodName(),BLOCKS_IN_FILE);
  DatanodeProtocolClientSideTranslatorPB nnSpy=DataNodeTestUtils.spyOnBposToNN(dn,nn);
  DataNodeTestUtils.triggerBlockReport(dn);
  ArgumentCaptor<StorageBlockReport[]> captor=ArgumentCaptor.forClass(StorageBlockReport[].class);
  Mockito.verify(nnSpy,times(1)).blockReport(any(DatanodeRegistration.class),anyString(),captor.capture());
  verifyCapturedArguments(captor,cluster.getStoragesPerDatanode(),BLOCKS_IN_FILE);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestFiDataTransferProtocol </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline setup, DN0 throws an OutOfMemoryException right after it
 * received a setup request from client.
 * Client gets an IOException and determine DN0 bad.
 */
@Test public void pipeline_Fi_09() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runReceiverOpWriteBlockTest(methodName,0,new OomAction(methodName,0));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline setup with DN0 very slow but it won't lead to timeout.
 * Client finishes setup successfully.
 */
@Test public void pipeline_Fi_06() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runSlowDatanodeTest(methodName,new SleepAction(methodName,0,3000));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline setup, DN0 never responses after received setup ack from DN1.
 * Client gets an IOException and determine DN0 bad.
 */
@Test public void pipeline_Fi_05() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runStatusReadTest(methodName,0,new SleepAction(methodName,0,0));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline setup with DN2 very slow but it won't lead to timeout.
 * Client finishes setup successfully.
 */
@Test public void pipeline_Fi_08() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runSlowDatanodeTest(methodName,new SleepAction(methodName,2,3000));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline setup with DN1 very slow but it won't lead to timeout.
 * Client finishes setup successfully.
 */
@Test public void pipeline_Fi_07() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runSlowDatanodeTest(methodName,new SleepAction(methodName,1,3000));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Streaming: Write a packet, DN1 throws a DiskOutOfSpaceError
 * when it writes the data to disk.
 * Client gets an IOException and determine DN1 bad.
 */
@Test public void pipeline_Fi_15() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runCallWritePacketToDisk(methodName,1,new DoosAction(methodName,1));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline setup:
 * DN1 never responses after received setup request from client.
 * Client gets an IOException and determine DN1 bad.
 */
@Test public void pipeline_Fi_02() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runReceiverOpWriteBlockTest(methodName,1,new SleepAction(methodName,1,0));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline setup:
 * DN0 never responses after received setup request from client.
 * Client gets an IOException and determine DN0 bad.
 */
@Test public void pipeline_Fi_01() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runReceiverOpWriteBlockTest(methodName,0,new SleepAction(methodName,0,0));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Streaming: Write a packet, DN0 throws a DiskOutOfSpaceError
 * when it writes the data to disk.
 * Client gets an IOException and determine DN0 bad.
 */
@Test public void pipeline_Fi_14() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runCallWritePacketToDisk(methodName,0,new DoosAction(methodName,0));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline setup, DN1 never responses after received setup ack from DN2.
 * Client gets an IOException and determine DN1 bad.
 */
@Test public void pipeline_Fi_04() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runStatusReadTest(methodName,1,new SleepAction(methodName,1,0));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Streaming: Write a packet, DN2 throws a DiskOutOfSpaceError
 * when it writes the data to disk.
 * Client gets an IOException and determine DN2 bad.
 */
@Test public void pipeline_Fi_16() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runCallWritePacketToDisk(methodName,2,new DoosAction(methodName,2));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline setup:
 * DN2 never responses after received setup request from client.
 * Client gets an IOException and determine DN2 bad.
 */
@Test public void pipeline_Fi_03() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runReceiverOpWriteBlockTest(methodName,2,new SleepAction(methodName,2,0));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline setup, DN2 throws an OutOfMemoryException right after it
 * received a setup request from DN1.
 * Client gets an IOException and determine DN2 bad.
 */
@Test public void pipeline_Fi_11() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runReceiverOpWriteBlockTest(methodName,2,new OomAction(methodName,2));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline setup, DN1 throws an OutOfMemoryException right after it
 * received a setup request from DN0.
 * Client gets an IOException and determine DN1 bad.
 */
@Test public void pipeline_Fi_10() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runReceiverOpWriteBlockTest(methodName,1,new OomAction(methodName,1));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline setup, DN0 throws an OutOfMemoryException right after it
 * received a setup ack from DN1.
 * Client gets an IOException and determine DN0 bad.
 */
@Test public void pipeline_Fi_13() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runStatusReadTest(methodName,0,new OomAction(methodName,0));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline setup, DN1 throws an OutOfMemoryException right after it
 * received a setup ack from DN2.
 * Client gets an IOException and determine DN1 bad.
 */
@Test public void pipeline_Fi_12() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runStatusReadTest(methodName,1,new OomAction(methodName,1));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestFiDataTransferProtocol2 </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Streaming: Randomize datanode speed, write several packets, DN1 throws a
 * OutOfMemoryException when it receives the ack of the third packet from DN2.
 * Client gets an IOException and determines DN1 bad.
 */
@Test public void pipeline_Fi_29() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runTest29_30(methodName,1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Streaming:
 * Randomize datanode speed, write several packets,
 * DN0 throws a DiskOutOfSpaceError when it writes the third packet to disk.
 * Client gets an IOException and determines DN0 bad.
 */
@Test public void pipeline_Fi_17() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runTest17_19(methodName,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Streaming: Randomize datanode speed, write several packets, DN0 throws a
 * OutOfMemoryException when it receives the ack of the third packet from DN1.
 * Client gets an IOException and determines DN0 bad.
 */
@Test public void pipeline_Fi_30() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runTest29_30(methodName,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Streaming:
 * Randomize datanode speed, write several packets,
 * DN1 throws a DiskOutOfSpaceError when it writes the third packet to disk.
 * Client gets an IOException and determines DN1 bad.
 */
@Test public void pipeline_Fi_18() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runTest17_19(methodName,1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Streaming:
 * Randomize datanode speed, write several packets,
 * DN2 throws a DiskOutOfSpaceError when it writes the third packet to disk.
 * Client gets an IOException and determines DN2 bad.
 */
@Test public void pipeline_Fi_19() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runTest17_19(methodName,2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Streaming: Client writes several packets with DN1 very slow. Client
 * finishes write successfully.
 */
@Test public void pipeline_Fi_21() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  FiTestUtil.LOG.info("Running " + methodName + " ...");
  final DataTransferTest t=(DataTransferTest)DataTransferTestUtil.initTest();
  initSlowDatanodeTest(t,new SleepAction(methodName,1,MAX_SLEEP));
  writeSeveralPackets(methodName);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Streaming: Write several packets, DN1 never responses when it receives the
 * ack of the third packet from DN2. Client gets an IOException and determines
 * DN1 bad.
 */
@Test public void pipeline_Fi_34() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runTest34_35(methodName,1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Streaming: Client writes several packets with DN2 very slow. Client
 * finishes write successfully.
 */
@Test public void pipeline_Fi_22() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  FiTestUtil.LOG.info("Running " + methodName + " ...");
  final DataTransferTest t=(DataTransferTest)DataTransferTestUtil.initTest();
  initSlowDatanodeTest(t,new SleepAction(methodName,2,MAX_SLEEP));
  writeSeveralPackets(methodName);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Streaming: Write several packets, DN0 never responses when it receives the
 * ack of the third packet from DN1. Client gets an IOException and determines
 * DN0 bad.
 */
@Test public void pipeline_Fi_35() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runTest34_35(methodName,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Streaming: Client writes several packets with DN0 very slow. Client
 * finishes write successfully.
 */
@Test public void pipeline_Fi_20() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  FiTestUtil.LOG.info("Running " + methodName + " ...");
  final DataTransferTest t=(DataTransferTest)DataTransferTestUtil.initTest();
  initSlowDatanodeTest(t,new SleepAction(methodName,0,MAX_SLEEP));
  writeSeveralPackets(methodName);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestFiPipelineClose </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline close:
 * DN2 throws a disk error exception when it is closing the block file.
 * Client gets an IOException and determine DN2 bad.
 */
@Test public void pipeline_Fi_51() throws IOException {
  run49_51(FiTestUtil.getMethodName(),2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline close:
 * DN0 never responses after received close ack DN1.
 * Client gets an IOException and determine DN0 bad.
 */
@Test public void pipeline_Fi_40() throws IOException {
  run39_40(FiTestUtil.getMethodName(),0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline close with DN0 very slow but it won't lead to timeout.
 * Client finishes close successfully.
 */
@Test public void pipeline_Fi_41() throws IOException {
  run41_43(FiTestUtil.getMethodName(),0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline close with DN1 very slow but it won't lead to timeout.
 * Client finishes close successfully.
 */
@Test public void pipeline_Fi_42() throws IOException {
  run41_43(FiTestUtil.getMethodName(),1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline close with DN2 very slow but it won't lead to timeout.
 * Client finishes close successfully.
 */
@Test public void pipeline_Fi_43() throws IOException {
  run41_43(FiTestUtil.getMethodName(),2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline close:
 * DN0 throws an OutOfMemoryException
 * right after it received a close request from client.
 * Client gets an IOException and determine DN0 bad.
 */
@Test public void pipeline_Fi_44() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runPipelineCloseTest(methodName,new OomAction(methodName,0));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline close:
 * DN1 throws an OutOfMemoryException
 * right after it received a close request from client.
 * Client gets an IOException and determine DN1 bad.
 */
@Test public void pipeline_Fi_45() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runPipelineCloseTest(methodName,new OomAction(methodName,1));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline close:
 * DN2 throws an OutOfMemoryException
 * right after it received a close request from client.
 * Client gets an IOException and determine DN2 bad.
 */
@Test public void pipeline_Fi_46() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runPipelineCloseTest(methodName,new OomAction(methodName,2));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline close:
 * DN1 throws an OutOfMemoryException right after
 * it received a close ack from DN2.
 * Client gets an IOException and determine DN1 bad.
 */
@Test public void pipeline_Fi_47() throws IOException {
  run47_48(FiTestUtil.getMethodName(),1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline close:
 * DN0 throws an OutOfMemoryException right after
 * it received a close ack from DN1.
 * Client gets an IOException and determine DN0 bad.
 */
@Test public void pipeline_Fi_48() throws IOException {
  run47_48(FiTestUtil.getMethodName(),0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline close:
 * DN0 throws a disk error exception when it is closing the block file.
 * Client gets an IOException and determine DN0 bad.
 */
@Test public void pipeline_Fi_49() throws IOException {
  run49_51(FiTestUtil.getMethodName(),0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline close:
 * DN0 never responses after received close request from client.
 * Client gets an IOException and determine DN0 bad.
 */
@Test public void pipeline_Fi_36() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runPipelineCloseTest(methodName,new SleepAction(methodName,0,0));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline close:
 * DN1 never responses after received close request from client.
 * Client gets an IOException and determine DN1 bad.
 */
@Test public void pipeline_Fi_37() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runPipelineCloseTest(methodName,new SleepAction(methodName,1,0));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline close:
 * DN2 never responses after received close request from client.
 * Client gets an IOException and determine DN2 bad.
 */
@Test public void pipeline_Fi_38() throws IOException {
  final String methodName=FiTestUtil.getMethodName();
  runPipelineCloseTest(methodName,new SleepAction(methodName,2,0));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline close:
 * DN1 never responses after received close ack DN2.
 * Client gets an IOException and determine DN1 bad.
 */
@Test public void pipeline_Fi_39() throws IOException {
  run39_40(FiTestUtil.getMethodName(),1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Pipeline close:
 * DN1 throws a disk error exception when it is closing the block file.
 * Client gets an IOException and determine DN1 bad.
 */
@Test public void pipeline_Fi_50() throws IOException {
  run49_51(FiTestUtil.getMethodName(),1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestFsDatasetCache </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=600000) public void testCacheAndUncacheBlockSimple() throws Exception {
  testCacheAndUncacheBlock();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testUncacheUnknownBlock() throws Exception {
  Path fileName=new Path("/testUncacheUnknownBlock");
  int fileLen=4096;
  DFSTestUtil.createFile(fs,fileName,fileLen,(short)1,0xFDFD);
  HdfsBlockLocation[] locs=(HdfsBlockLocation[])fs.getFileBlockLocations(fileName,0,fileLen);
  setHeartbeatResponse(uncacheBlocks(locs));
  GenericTestUtils.waitFor(new Supplier<Boolean>(){
    @Override public Boolean get(){
      return fsd.getNumBlocksFailedToUncache() > 0;
    }
  }
,100,10000);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Run testCacheAndUncacheBlock with some failures injected into the mlock
 * call.  This tests the ability of the NameNode to resend commands.
 */
@Test(timeout=600000) public void testCacheAndUncacheBlockWithRetries() throws Exception {
  NativeIO.POSIX.setCacheManipulator(new NoMlockCacheManipulator(){
    private final Set<String> seenIdentifiers=new HashSet<String>();
    @Override public void mlock(    String identifier,    ByteBuffer mmap,    long length) throws IOException {
      if (seenIdentifiers.contains(identifier)) {
        LOG.info("mlocking " + identifier);
        return;
      }
      seenIdentifiers.add(identifier);
      throw new IOException("injecting IOException during mlock of " + identifier);
    }
  }
);
  testCacheAndUncacheBlock();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testUncacheQuiesces() throws Exception {
  Path fileName=new Path("/testUncacheQuiesces");
  int fileLen=4096;
  DFSTestUtil.createFile(fs,fileName,fileLen,(short)1,0xFDFD);
  DistributedFileSystem dfs=cluster.getFileSystem();
  dfs.addCachePool(new CachePoolInfo("pool"));
  dfs.addCacheDirective(new CacheDirectiveInfo.Builder().setPool("pool").setPath(fileName).setReplication((short)3).build());
  GenericTestUtils.waitFor(new Supplier<Boolean>(){
    @Override public Boolean get(){
      MetricsRecordBuilder dnMetrics=getMetrics(dn.getMetrics().name());
      long blocksCached=MetricsAsserts.getLongCounter("BlocksCached",dnMetrics);
      return blocksCached > 0;
    }
  }
,1000,30000);
  dfs.removeCacheDirective(1);
  GenericTestUtils.waitFor(new Supplier<Boolean>(){
    @Override public Boolean get(){
      MetricsRecordBuilder dnMetrics=getMetrics(dn.getMetrics().name());
      long blocksUncached=MetricsAsserts.getLongCounter("BlocksUncached",dnMetrics);
      return blocksUncached > 0;
    }
  }
,1000,30000);
  Thread.sleep(10000);
  MetricsRecordBuilder dnMetrics=getMetrics(dn.getMetrics().name());
  MetricsAsserts.assertCounter("BlocksCached",1l,dnMetrics);
  MetricsAsserts.assertCounter("BlocksUncached",1l,dnMetrics);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestHSync </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that syncBlock is correctly performed at replicas 
 */
@Test public void testHSyncWithReplication() throws Exception {
  Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(3).build();
  final FileSystem fs=cluster.getFileSystem();
  final Path p=new Path("/testHSyncWithReplication/foo");
  final int len=1 << 16;
  FSDataOutputStream out=fs.create(p,FsPermission.getDefault(),EnumSet.of(CreateFlag.CREATE,CreateFlag.OVERWRITE,CreateFlag.SYNC_BLOCK),4096,(short)3,len,null);
  out.write(1);
  out.hflush();
  checkSyncMetric(cluster,0,0);
  checkSyncMetric(cluster,1,0);
  checkSyncMetric(cluster,2,0);
  out.hsync();
  checkSyncMetric(cluster,0,1);
  checkSyncMetric(cluster,1,1);
  checkSyncMetric(cluster,2,1);
  out.hsync();
  checkSyncMetric(cluster,0,2);
  checkSyncMetric(cluster,1,2);
  checkSyncMetric(cluster,2,2);
  cluster.shutdown();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test hsync via SequenceFiles 
 */
@Test public void testSequenceFileSync() throws Exception {
  Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).build();
  final FileSystem fs=cluster.getFileSystem();
  final Path p=new Path("/testSequenceFileSync/foo");
  final int len=1 << 16;
  FSDataOutputStream out=fs.create(p,FsPermission.getDefault(),EnumSet.of(CreateFlag.CREATE,CreateFlag.OVERWRITE,CreateFlag.SYNC_BLOCK),4096,(short)1,len,null);
  Writer w=SequenceFile.createWriter(new Configuration(),Writer.stream(out),Writer.keyClass(RandomDatum.class),Writer.valueClass(RandomDatum.class),Writer.compression(CompressionType.NONE,new DefaultCodec()));
  w.hflush();
  checkSyncMetric(cluster,0);
  w.hsync();
  checkSyncMetric(cluster,1);
  int seed=new Random().nextInt();
  RandomDatum.Generator generator=new RandomDatum.Generator(seed);
  generator.next();
  w.append(generator.getKey(),generator.getValue());
  w.hsync();
  checkSyncMetric(cluster,2);
  w.close();
  checkSyncMetric(cluster,2);
  out.close();
  checkSyncMetric(cluster,3);
  cluster.shutdown();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test basic hsync cases 
 */
@Test public void testHSync() throws Exception {
  Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).build();
  final FileSystem fs=cluster.getFileSystem();
  final Path p=new Path("/testHSync/foo");
  final int len=1 << 16;
  FSDataOutputStream out=fs.create(p,FsPermission.getDefault(),EnumSet.of(CreateFlag.CREATE,CreateFlag.OVERWRITE,CreateFlag.SYNC_BLOCK),4096,(short)1,len,null);
  out.hflush();
  checkSyncMetric(cluster,0);
  out.hsync();
  checkSyncMetric(cluster,0);
  out.write(1);
  checkSyncMetric(cluster,0);
  out.hsync();
  checkSyncMetric(cluster,1);
  out.hsync();
  checkSyncMetric(cluster,2);
  out.hflush();
  checkSyncMetric(cluster,2);
  out.close();
  checkSyncMetric(cluster,3);
  out=fs.create(p,FsPermission.getDefault(),EnumSet.of(CreateFlag.CREATE,CreateFlag.OVERWRITE),4096,(short)1,len,null);
  out.hsync();
  checkSyncMetric(cluster,3);
  out.write(1);
  checkSyncMetric(cluster,3);
  out.hsync();
  checkSyncMetric(cluster,4);
  out.hsync();
  checkSyncMetric(cluster,5);
  out.close();
  checkSyncMetric(cluster,5);
  cluster.shutdown();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test hsync on an exact block boundary 
 */
@Test public void testHSyncBlockBoundary() throws Exception {
  Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).build();
  final FileSystem fs=cluster.getFileSystem();
  final Path p=new Path("/testHSyncBlockBoundary/foo");
  final int len=1 << 16;
  final byte[] fileContents=AppendTestUtil.initBuffer(len);
  FSDataOutputStream out=fs.create(p,FsPermission.getDefault(),EnumSet.of(CreateFlag.CREATE,CreateFlag.OVERWRITE,CreateFlag.SYNC_BLOCK),4096,(short)1,len,null);
  out.write(fileContents,0,len);
  out.hflush();
  checkSyncMetric(cluster,1);
  out.hsync();
  checkSyncMetric(cluster,1);
  out.write(1);
  out.hsync();
  checkSyncMetric(cluster,2);
  out.close();
  checkSyncMetric(cluster,3);
  cluster.shutdown();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestIncrementalBlockReports </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Ensure that an IBR is generated immediately for a block received by
 * the DN.
 * @throws InterruptedException
 * @throws IOException
 */
@Test(timeout=60000) public void testReportBlockReceived() throws InterruptedException, IOException {
  try {
    DatanodeProtocolClientSideTranslatorPB nnSpy=spyOnDnCallsToNn();
    injectBlockReceived();
    Thread.sleep(2000);
    Mockito.verify(nnSpy,times(1)).blockReceivedAndDeleted(any(DatanodeRegistration.class),anyString(),any(StorageReceivedDeletedBlocks[].class));
  }
  finally {
    cluster.shutdown();
    cluster=null;
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Ensure that a delayed IBR is generated for a block deleted on the DN.
 * @throws InterruptedException
 * @throws IOException
 */
@Test(timeout=60000) public void testReportBlockDeleted() throws InterruptedException, IOException {
  try {
    DataNodeTestUtils.triggerBlockReport(singletonDn);
    DatanodeProtocolClientSideTranslatorPB nnSpy=spyOnDnCallsToNn();
    injectBlockDeleted();
    Thread.sleep(2000);
    Mockito.verify(nnSpy,times(0)).blockReceivedAndDeleted(any(DatanodeRegistration.class),anyString(),any(StorageReceivedDeletedBlocks[].class));
    DataNodeTestUtils.triggerBlockReport(singletonDn);
    Thread.sleep(2000);
    Mockito.verify(nnSpy,times(1)).blockReceivedAndDeleted(any(DatanodeRegistration.class),anyString(),any(StorageReceivedDeletedBlocks[].class));
  }
  finally {
    cluster.shutdown();
    cluster=null;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestIncrementalBrVariations </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * One incremental BR per storage.
 */
@Test public void testSplitIncrementalBlockReport() throws IOException {
  verifyIncrementalBlockReports(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Incremental BRs from all storages combined in a single message.
 */
@Test public void testCombinedIncrementalBlockReport() throws IOException {
  verifyIncrementalBlockReports(false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestMultipleNNDataBlockScanner </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000) public void testBlockScannerAfterRefresh() throws IOException, InterruptedException {
  setUp();
  try {
    Configuration dnConf=cluster.getDataNodes().get(0).getConf();
    Configuration conf=new HdfsConfiguration(dnConf);
    StringBuilder namenodesBuilder=new StringBuilder();
    String bpidToShutdown=cluster.getNamesystem(2).getBlockPoolId();
    for (int i=0; i < 2; i++) {
      String nsId=DFSUtil.getNamenodeNameServiceId(cluster.getConfiguration(i));
      namenodesBuilder.append(nsId);
      namenodesBuilder.append(",");
    }
    conf.set(DFSConfigKeys.DFS_NAMESERVICES,namenodesBuilder.toString());
    DataNode dn=cluster.getDataNodes().get(0);
    dn.refreshNamenodes(conf);
    try {
      while (true) {
        dn.blockScanner.getBlocksScannedInLastRun(bpidToShutdown);
        Thread.sleep(1000);
      }
    }
 catch (    IOException ex) {
      LOG.info(ex.getMessage());
    }
    namenodesBuilder.append(DFSUtil.getNamenodeNameServiceId(cluster.getConfiguration(2)));
    conf.set(DFSConfigKeys.DFS_NAMESERVICES,namenodesBuilder.toString());
    dn.refreshNamenodes(conf);
    for (int i=0; i < 3; i++) {
      long blocksScanned=0;
      while (blocksScanned != 20) {
        blocksScanned=dn.blockScanner.getBlocksScannedInLastRun(bpids[i]);
        LOG.info("Waiting for all blocks to be scanned for bpid=" + bpids[i] + "; Scanned so far="+ blocksScanned);
        Thread.sleep(5000);
      }
    }
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000) public void testDataBlockScanner() throws IOException, InterruptedException {
  setUp();
  try {
    DataNode dn=cluster.getDataNodes().get(0);
    for (int i=0; i < 3; i++) {
      long blocksScanned=0;
      while (blocksScanned != 20) {
        blocksScanned=dn.blockScanner.getBlocksScannedInLastRun(bpids[i]);
        LOG.info("Waiting for all blocks to be scanned for bpid=" + bpids[i] + "; Scanned so far="+ blocksScanned);
        Thread.sleep(5000);
      }
    }
    StringBuilder buffer=new StringBuilder();
    dn.blockScanner.printBlockReport(buffer,false);
    LOG.info("Block Report\n" + buffer.toString());
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000) public void test2NNBlockRescanInterval() throws IOException {
  ((Log4JLogger)BlockPoolSliceScanner.LOG).getLogger().setLevel(Level.ALL);
  Configuration conf=new HdfsConfiguration();
  cluster=new MiniDFSCluster.Builder(conf).nnTopology(MiniDFSNNTopology.simpleFederatedTopology(3)).build();
  try {
    FileSystem fs=cluster.getFileSystem(1);
    Path file2=new Path("/test/testBlockScanInterval");
    DFSTestUtil.createFile(fs,file2,30,(short)1,0);
    fs=cluster.getFileSystem(0);
    Path file1=new Path("/test/testBlockScanInterval");
    DFSTestUtil.createFile(fs,file1,30,(short)1,0);
    for (int i=0; i < 8; i++) {
      LOG.info("Verifying that the blockscanner scans exactly once");
      waitAndScanBlocks(1,1);
    }
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000) public void testBlockScannerAfterRestart() throws IOException, InterruptedException {
  setUp();
  try {
    cluster.restartDataNode(0);
    cluster.waitActive();
    DataNode dn=cluster.getDataNodes().get(0);
    for (int i=0; i < 3; i++) {
      while (!dn.blockScanner.isInitialized(bpids[i])) {
        Thread.sleep(1000);
      }
      long blocksScanned=0;
      while (blocksScanned != 20) {
        if (dn.blockScanner != null) {
          blocksScanned=dn.blockScanner.getBlocksScannedInLastRun(bpids[i]);
          LOG.info("Waiting for all blocks to be scanned for bpid=" + bpids[i] + "; Scanned so far="+ blocksScanned);
        }
        Thread.sleep(5000);
      }
    }
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * HDFS-3828: DN rescans blocks too frequently
 * @throws Exception
 */
@Test(timeout=120000) public void testBlockRescanInterval() throws IOException {
  ((Log4JLogger)BlockPoolSliceScanner.LOG).getLogger().setLevel(Level.ALL);
  Configuration conf=new HdfsConfiguration();
  cluster=new MiniDFSCluster.Builder(conf).build();
  try {
    FileSystem fs=cluster.getFileSystem();
    Path file1=new Path("/test/testBlockScanInterval");
    DFSTestUtil.createFile(fs,file1,30,(short)1,0);
    for (int i=0; i < 4; i++) {
      LOG.info("Verifying that the blockscanner scans exactly once");
      waitAndScanBlocks(1,1);
    }
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestReadOnlySharedStorage </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Verify that <tt>READ_ONLY_SHARED</tt> replicas are <i>not</i> counted towards the overall 
 * replication count, but <i>are</i> included as replica locations returned to clients for reads.
 */
@Test public void testReplicaCounting() throws Exception {
  validateNumberReplicas(1);
  fs.setReplication(PATH,(short)2);
  waitForLocations(3);
  validateNumberReplicas(2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.TestSimulatedFSDataset </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInValidBlocks() throws IOException {
  final SimulatedFSDataset fsdataset=getSimulatedFSDataset();
  ExtendedBlock b=new ExtendedBlock(bpid,1,5,0);
  checkInvalidBlock(b);
  addSomeBlocks(fsdataset);
  b=new ExtendedBlock(bpid,NUMBLOCKS + 99,5,0);
  checkInvalidBlock(b);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.fsdataset.TestAvailableSpaceVolumeChoosingPolicy </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testRRPolicyExceptionMessage() throws Exception {
  final AvailableSpaceVolumeChoosingPolicy<FsVolumeSpi> policy=new AvailableSpaceVolumeChoosingPolicy<FsVolumeSpi>();
  initPolicy(policy,1.0f);
  TestRoundRobinVolumeChoosingPolicy.testRRPolicyExceptionMessage(policy);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void randomizedTest1() throws Exception {
  doRandomizedTest(0.75f,1,1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testRR() throws Exception {
  @SuppressWarnings("unchecked") final AvailableSpaceVolumeChoosingPolicy<FsVolumeSpi> policy=ReflectionUtils.newInstance(AvailableSpaceVolumeChoosingPolicy.class,null);
  initPolicy(policy,1.0f);
  TestRoundRobinVolumeChoosingPolicy.testRR(policy);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void randomizedTest4() throws Exception {
  doRandomizedTest(0.90f,5,1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void randomizedTest3() throws Exception {
  doRandomizedTest(0.75f,1,5);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void randomizedTest2() throws Exception {
  doRandomizedTest(0.75f,5,1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.fsdataset.TestRoundRobinVolumeChoosingPolicy </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRR() throws Exception {
  @SuppressWarnings("unchecked") final RoundRobinVolumeChoosingPolicy<FsVolumeSpi> policy=ReflectionUtils.newInstance(RoundRobinVolumeChoosingPolicy.class,null);
  testRR(policy);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRRPolicyExceptionMessage() throws Exception {
  final RoundRobinVolumeChoosingPolicy<FsVolumeSpi> policy=new RoundRobinVolumeChoosingPolicy<FsVolumeSpi>();
  testRRPolicyExceptionMessage(policy);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.TestDatanodeRestart </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFinalizedReplicas() throws Exception {
  Configuration conf=new HdfsConfiguration();
  conf.setLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,1024L);
  conf.setInt(DFSConfigKeys.DFS_CLIENT_WRITE_PACKET_SIZE_KEY,512);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(3).build();
  cluster.waitActive();
  FileSystem fs=cluster.getFileSystem();
  try {
    final String TopDir="/test";
    DFSTestUtil util=new DFSTestUtil.Builder().setName("TestDatanodeRestart").setNumFiles(2).build();
    util.createFiles(fs,TopDir,(short)3);
    util.waitReplication(fs,TopDir,(short)3);
    util.checkFiles(fs,TopDir);
    cluster.restartDataNodes();
    cluster.waitActive();
    util.checkFiles(fs,TopDir);
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.TestInterDatanodeProtocol </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test block MD access via a DN 
 */
@Test public void testBlockMetaDataInfo() throws Exception {
  checkBlockMetaDataInfo(false);
}

</code></pre>

<br>
<pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * The same as above, but use hostnames for DN<->DN communication 
 */
@Test public void testBlockMetaDataInfoWithHostname() throws Exception {
  assumeTrue(System.getProperty("os.name").startsWith("Linux"));
  checkBlockMetaDataInfo(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.datanode.fsdataset.impl.TestWriteToReplica </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClose() throws Exception {
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(new HdfsConfiguration()).build();
  try {
    cluster.waitActive();
    DataNode dn=cluster.getDataNodes().get(0);
    FsDatasetImpl dataSet=(FsDatasetImpl)DataNodeTestUtils.getFSDataset(dn);
    String bpid=cluster.getNamesystem().getBlockPoolId();
    ExtendedBlock[] blocks=setup(bpid,dataSet);
    testClose(dataSet,blocks);
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWriteToTempoary() throws Exception {
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(new HdfsConfiguration()).build();
  try {
    cluster.waitActive();
    DataNode dn=cluster.getDataNodes().get(0);
    FsDatasetImpl dataSet=(FsDatasetImpl)DataNodeTestUtils.getFSDataset(dn);
    String bpid=cluster.getNamesystem().getBlockPoolId();
    ExtendedBlock[] blocks=setup(bpid,dataSet);
    testWriteToTemporary(dataSet,blocks);
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWriteToRbw() throws Exception {
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(new HdfsConfiguration()).build();
  try {
    cluster.waitActive();
    DataNode dn=cluster.getDataNodes().get(0);
    FsDatasetImpl dataSet=(FsDatasetImpl)DataNodeTestUtils.getFSDataset(dn);
    String bpid=cluster.getNamesystem().getBlockPoolId();
    ExtendedBlock[] blocks=setup(bpid,dataSet);
    testWriteToRbw(dataSet,blocks);
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppend() throws Exception {
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(new HdfsConfiguration()).build();
  try {
    cluster.waitActive();
    DataNode dn=cluster.getDataNodes().get(0);
    FsDatasetImpl dataSet=(FsDatasetImpl)DataNodeTestUtils.getFSDataset(dn);
    String bpid=cluster.getNamesystem().getBlockPoolId();
    ExtendedBlock[] blocks=setup(bpid,dataSet);
    testAppend(bpid,dataSet,blocks);
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.FSAclBaseTest </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testRemoveDefaultAclPathNotFound() throws IOException {
  fs.removeDefaultAcl(path);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveAclMustBeOwnerOrSuper() throws Exception {
  Path bruceDir=new Path(path,"bruce");
  Path bruceFile=new Path(bruceDir,"file");
  fs.mkdirs(bruceDir);
  fs.setOwner(bruceDir,"bruce",null);
  fsAsBruce.create(bruceFile).close();
  fsAsBruce.removeAcl(bruceFile);
  fs.removeAcl(bruceFile);
  fsAsSupergroupMember.removeAcl(bruceFile);
  exception.expect(AccessControlException.class);
  fsAsDiana.removeAcl(bruceFile);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetAclStatusRequiresTraverseOrSuper() throws Exception {
  Path bruceDir=new Path(path,"bruce");
  Path bruceFile=new Path(bruceDir,"file");
  fs.mkdirs(bruceDir);
  fs.setOwner(bruceDir,"bruce",null);
  fsAsBruce.create(bruceFile).close();
  fsAsBruce.setAcl(bruceDir,Lists.newArrayList(aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,USER,"diana",READ),aclEntry(ACCESS,GROUP,NONE),aclEntry(ACCESS,OTHER,NONE)));
  fsAsBruce.getAclStatus(bruceFile);
  fs.getAclStatus(bruceFile);
  fsAsSupergroupMember.getAclStatus(bruceFile);
  exception.expect(AccessControlException.class);
  fsAsDiana.getAclStatus(bruceFile);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testModifyAclEntriesMustBeOwnerOrSuper() throws Exception {
  Path bruceDir=new Path(path,"bruce");
  Path bruceFile=new Path(bruceDir,"file");
  fs.mkdirs(bruceDir);
  fs.setOwner(bruceDir,"bruce",null);
  fsAsBruce.create(bruceFile).close();
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(ACCESS,USER,"diana",ALL));
  fsAsBruce.modifyAclEntries(bruceFile,aclSpec);
  fs.modifyAclEntries(bruceFile,aclSpec);
  fsAsSupergroupMember.modifyAclEntries(bruceFile,aclSpec);
  exception.expect(AccessControlException.class);
  fsAsDiana.modifyAclEntries(bruceFile,aclSpec);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveAclEntriesMustBeOwnerOrSuper() throws Exception {
  Path bruceDir=new Path(path,"bruce");
  Path bruceFile=new Path(bruceDir,"file");
  fs.mkdirs(bruceDir);
  fs.setOwner(bruceDir,"bruce",null);
  fsAsBruce.create(bruceFile).close();
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(ACCESS,USER,"diana"));
  fsAsBruce.removeAclEntries(bruceFile,aclSpec);
  fs.removeAclEntries(bruceFile,aclSpec);
  fsAsSupergroupMember.removeAclEntries(bruceFile,aclSpec);
  exception.expect(AccessControlException.class);
  fsAsDiana.removeAclEntries(bruceFile,aclSpec);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSkipAclEnforcementSuper() throws Exception {
  Path bruceDir=new Path(path,"bruce");
  Path bruceFile=new Path(bruceDir,"file");
  fs.mkdirs(bruceDir);
  fs.setOwner(bruceDir,"bruce",null);
  fsAsBruce.create(bruceFile).close();
  fsAsBruce.modifyAclEntries(bruceFile,Lists.newArrayList(aclEntry(ACCESS,USER,"diana",NONE)));
  assertFilePermissionGranted(fs,DIANA,bruceFile);
  assertFilePermissionGranted(fsAsBruce,DIANA,bruceFile);
  assertFilePermissionDenied(fsAsDiana,DIANA,bruceFile);
  assertFilePermissionGranted(fsAsSupergroupMember,SUPERGROUP_MEMBER,bruceFile);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testRemoveAclPathNotFound() throws IOException {
  fs.removeAcl(path);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveDefaultAclMustBeOwnerOrSuper() throws Exception {
  Path bruceDir=new Path(path,"bruce");
  Path bruceFile=new Path(bruceDir,"file");
  fs.mkdirs(bruceDir);
  fs.setOwner(bruceDir,"bruce",null);
  fsAsBruce.create(bruceFile).close();
  fsAsBruce.removeDefaultAcl(bruceFile);
  fs.removeDefaultAcl(bruceFile);
  fsAsSupergroupMember.removeDefaultAcl(bruceFile);
  exception.expect(AccessControlException.class);
  fsAsDiana.removeDefaultAcl(bruceFile);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testRemoveAclEntriesPathNotFound() throws IOException {
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(ACCESS,USER,"foo"));
  fs.removeAclEntries(path,aclSpec);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AclException.class) public void testSetAclDefaultOnFile() throws IOException {
  fs.create(path).close();
  fs.setPermission(path,FsPermission.createImmutable((short)0640));
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(DEFAULT,USER,"foo",ALL));
  fs.setAcl(path,aclSpec);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSkipAclEnforcementPermsDisabled() throws Exception {
  Path bruceDir=new Path(path,"bruce");
  Path bruceFile=new Path(bruceDir,"file");
  fs.mkdirs(bruceDir);
  fs.setOwner(bruceDir,"bruce",null);
  fsAsBruce.create(bruceFile).close();
  fsAsBruce.modifyAclEntries(bruceFile,Lists.newArrayList(aclEntry(ACCESS,USER,"diana",NONE)));
  assertFilePermissionDenied(fsAsDiana,DIANA,bruceFile);
  try {
    conf.setBoolean(DFSConfigKeys.DFS_PERMISSIONS_ENABLED_KEY,false);
    destroyFileSystems();
    restartCluster();
    initFileSystems();
    assertFilePermissionGranted(fsAsDiana,DIANA,bruceFile);
  }
  finally {
    conf.setBoolean(DFSConfigKeys.DFS_PERMISSIONS_ENABLED_KEY,true);
    restartCluster();
  }
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testModifyAclEntriesPathNotFound() throws IOException {
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,USER,"foo",ALL),aclEntry(ACCESS,GROUP,READ_EXECUTE),aclEntry(ACCESS,OTHER,NONE));
  fs.modifyAclEntries(path,aclSpec);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AclException.class) public void testModifyAclEntriesDefaultOnFile() throws IOException {
  fs.create(path).close();
  fs.setPermission(path,FsPermission.createImmutable((short)0640));
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(DEFAULT,USER,"foo",ALL));
  fs.modifyAclEntries(path,aclSpec);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=FileNotFoundException.class) public void testSetAclPathNotFound() throws IOException {
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(ACCESS,USER,READ_WRITE),aclEntry(ACCESS,USER,"foo",READ),aclEntry(ACCESS,GROUP,READ),aclEntry(ACCESS,OTHER,NONE));
  fs.setAcl(path,aclSpec);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetAclMustBeOwnerOrSuper() throws Exception {
  Path bruceDir=new Path(path,"bruce");
  Path bruceFile=new Path(bruceDir,"file");
  fs.mkdirs(bruceDir);
  fs.setOwner(bruceDir,"bruce",null);
  fsAsBruce.create(bruceFile).close();
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(ACCESS,USER,READ_WRITE),aclEntry(ACCESS,USER,"diana",READ_WRITE),aclEntry(ACCESS,GROUP,READ),aclEntry(ACCESS,OTHER,READ));
  fsAsBruce.setAcl(bruceFile,aclSpec);
  fs.setAcl(bruceFile,aclSpec);
  fsAsSupergroupMember.setAcl(bruceFile,aclSpec);
  exception.expect(AccessControlException.class);
  fsAsDiana.setAcl(bruceFile,aclSpec);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestAclConfigFlag </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveDefaultAcl() throws Exception {
  initCluster(true,false);
  fs.mkdirs(PATH);
  expectException();
  fs.removeAclEntries(PATH,Lists.newArrayList(aclEntry(DEFAULT,USER,"foo",READ_WRITE)));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveAcl() throws Exception {
  initCluster(true,false);
  fs.mkdirs(PATH);
  expectException();
  fs.removeAcl(PATH);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetAclStatus() throws Exception {
  initCluster(true,false);
  fs.mkdirs(PATH);
  expectException();
  fs.getAclStatus(PATH);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveAclEntries() throws Exception {
  initCluster(true,false);
  fs.mkdirs(PATH);
  expectException();
  fs.removeAclEntries(PATH,Lists.newArrayList(aclEntry(DEFAULT,USER,"foo",READ_WRITE)));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testModifyAclEntries() throws Exception {
  initCluster(true,false);
  fs.mkdirs(PATH);
  expectException();
  fs.modifyAclEntries(PATH,Lists.newArrayList(aclEntry(DEFAULT,USER,"foo",READ_WRITE)));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFsImage() throws Exception {
  initCluster(true,true);
  fs.mkdirs(PATH);
  fs.setAcl(PATH,Lists.newArrayList(aclEntry(DEFAULT,USER,"foo",READ_WRITE)));
  restart(true,true);
  restart(false,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetAcl() throws Exception {
  initCluster(true,false);
  fs.mkdirs(PATH);
  expectException();
  fs.setAcl(PATH,Lists.newArrayList(aclEntry(DEFAULT,USER,"foo",READ_WRITE)));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEditLog() throws Exception {
  initCluster(true,true);
  fs.mkdirs(PATH);
  fs.setAcl(PATH,Lists.newArrayList(aclEntry(DEFAULT,USER,"foo",READ_WRITE)));
  restart(false,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestAclTransformation </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AclException.class) public void testReplaceAclEntriesDuplicateEntries() throws AclException {
  List<AclEntry> existing=new ImmutableList.Builder<AclEntry>().add(aclEntry(ACCESS,USER,ALL)).add(aclEntry(ACCESS,GROUP,READ)).add(aclEntry(ACCESS,OTHER,NONE)).build();
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,USER,"bruce",ALL),aclEntry(ACCESS,USER,"diana",READ_WRITE),aclEntry(ACCESS,USER,"clark",READ),aclEntry(ACCESS,USER,"bruce",READ_EXECUTE),aclEntry(ACCESS,GROUP,READ),aclEntry(ACCESS,OTHER,NONE));
  replaceAclEntries(existing,aclSpec);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AclException.class) public void testReplaceAclEntriesMissingOther() throws AclException {
  List<AclEntry> existing=new ImmutableList.Builder<AclEntry>().add(aclEntry(ACCESS,USER,ALL)).add(aclEntry(ACCESS,GROUP,READ)).add(aclEntry(ACCESS,OTHER,NONE)).build();
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,USER,"bruce",READ_WRITE),aclEntry(ACCESS,GROUP,READ_EXECUTE),aclEntry(ACCESS,GROUP,"sales",ALL),aclEntry(ACCESS,MASK,ALL));
  replaceAclEntries(existing,aclSpec);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AclException.class) public void testMergeAclEntriesNamedMask() throws AclException {
  List<AclEntry> existing=new ImmutableList.Builder<AclEntry>().add(aclEntry(ACCESS,USER,ALL)).add(aclEntry(ACCESS,GROUP,READ)).add(aclEntry(ACCESS,OTHER,NONE)).build();
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(ACCESS,MASK,"bruce",READ_EXECUTE));
  mergeAclEntries(existing,aclSpec);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AclException.class) public void testFilterAclEntriesByAclSpecRemoveDefaultMaskRequired() throws AclException {
  List<AclEntry> existing=new ImmutableList.Builder<AclEntry>().add(aclEntry(ACCESS,USER,ALL)).add(aclEntry(ACCESS,GROUP,READ)).add(aclEntry(ACCESS,OTHER,NONE)).add(aclEntry(DEFAULT,USER,ALL)).add(aclEntry(DEFAULT,USER,"bruce",READ)).add(aclEntry(DEFAULT,GROUP,READ)).add(aclEntry(DEFAULT,MASK,ALL)).add(aclEntry(DEFAULT,OTHER,NONE)).build();
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(DEFAULT,MASK));
  filterAclEntriesByAclSpec(existing,aclSpec);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AclException.class) public void testReplaceAclEntriesInputTooLarge() throws AclException {
  List<AclEntry> existing=new ImmutableList.Builder<AclEntry>().add(aclEntry(ACCESS,USER,ALL)).add(aclEntry(ACCESS,GROUP,READ)).add(aclEntry(ACCESS,OTHER,NONE)).build();
  replaceAclEntries(existing,ACL_SPEC_TOO_LARGE);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AclException.class) public void testReplaceAclEntriesNamedOther() throws AclException {
  List<AclEntry> existing=new ImmutableList.Builder<AclEntry>().add(aclEntry(ACCESS,USER,ALL)).add(aclEntry(ACCESS,GROUP,READ)).add(aclEntry(ACCESS,OTHER,NONE)).build();
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,GROUP,READ),aclEntry(ACCESS,OTHER,NONE),aclEntry(ACCESS,OTHER,"bruce",READ_EXECUTE));
  replaceAclEntries(existing,aclSpec);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AclException.class) public void testReplaceAclEntriesMissingGroup() throws AclException {
  List<AclEntry> existing=new ImmutableList.Builder<AclEntry>().add(aclEntry(ACCESS,USER,ALL)).add(aclEntry(ACCESS,GROUP,READ)).add(aclEntry(ACCESS,OTHER,NONE)).build();
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,USER,"bruce",READ_WRITE),aclEntry(ACCESS,GROUP,"sales",ALL),aclEntry(ACCESS,MASK,ALL),aclEntry(ACCESS,OTHER,NONE));
  replaceAclEntries(existing,aclSpec);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AclException.class) public void testReplaceAclEntriesResultTooLarge() throws AclException {
  List<AclEntry> existing=new ImmutableList.Builder<AclEntry>().add(aclEntry(ACCESS,USER,ALL)).add(aclEntry(ACCESS,GROUP,READ)).add(aclEntry(ACCESS,OTHER,NONE)).build();
  List<AclEntry> aclSpec=Lists.newArrayListWithCapacity(32);
  aclSpec.add(aclEntry(ACCESS,USER,ALL));
  for (int i=1; i <= 29; ++i) {
    aclSpec.add(aclEntry(ACCESS,USER,"user" + i,READ));
  }
  aclSpec.add(aclEntry(ACCESS,GROUP,READ));
  aclSpec.add(aclEntry(ACCESS,OTHER,NONE));
  replaceAclEntries(existing,aclSpec);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AclException.class) public void testMergeAclEntriesInputTooLarge() throws AclException {
  List<AclEntry> existing=new ImmutableList.Builder<AclEntry>().add(aclEntry(ACCESS,USER,ALL)).add(aclEntry(ACCESS,GROUP,READ)).add(aclEntry(ACCESS,OTHER,NONE)).build();
  mergeAclEntries(existing,ACL_SPEC_TOO_LARGE);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AclException.class) public void testReplaceAclEntriesMissingUser() throws AclException {
  List<AclEntry> existing=new ImmutableList.Builder<AclEntry>().add(aclEntry(ACCESS,USER,ALL)).add(aclEntry(ACCESS,GROUP,READ)).add(aclEntry(ACCESS,OTHER,NONE)).build();
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(ACCESS,USER,"bruce",READ_WRITE),aclEntry(ACCESS,GROUP,READ_EXECUTE),aclEntry(ACCESS,GROUP,"sales",ALL),aclEntry(ACCESS,MASK,ALL),aclEntry(ACCESS,OTHER,NONE));
  replaceAclEntries(existing,aclSpec);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AclException.class) public void testMergeAclEntriesDuplicateEntries() throws AclException {
  List<AclEntry> existing=new ImmutableList.Builder<AclEntry>().add(aclEntry(ACCESS,USER,ALL)).add(aclEntry(ACCESS,GROUP,READ)).add(aclEntry(ACCESS,OTHER,NONE)).build();
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(ACCESS,USER,"bruce",ALL),aclEntry(ACCESS,USER,"diana",READ_WRITE),aclEntry(ACCESS,USER,"clark",READ),aclEntry(ACCESS,USER,"bruce",READ_EXECUTE));
  mergeAclEntries(existing,aclSpec);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AclException.class) public void testMergeAclEntriesResultTooLarge() throws AclException {
  ImmutableList.Builder<AclEntry> aclBuilder=new ImmutableList.Builder<AclEntry>().add(aclEntry(ACCESS,USER,ALL));
  for (int i=1; i <= 28; ++i) {
    aclBuilder.add(aclEntry(ACCESS,USER,"user" + i,READ));
  }
  aclBuilder.add(aclEntry(ACCESS,GROUP,READ)).add(aclEntry(ACCESS,MASK,READ)).add(aclEntry(ACCESS,OTHER,NONE));
  List<AclEntry> existing=aclBuilder.build();
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(ACCESS,USER,"bruce",READ));
  mergeAclEntries(existing,aclSpec);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AclException.class) public void testFilterAclEntriesByAclSpecRemoveAccessMaskRequired() throws AclException {
  List<AclEntry> existing=new ImmutableList.Builder<AclEntry>().add(aclEntry(ACCESS,USER,ALL)).add(aclEntry(ACCESS,USER,"bruce",READ)).add(aclEntry(ACCESS,GROUP,READ)).add(aclEntry(ACCESS,MASK,ALL)).add(aclEntry(ACCESS,OTHER,NONE)).build();
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(ACCESS,MASK));
  filterAclEntriesByAclSpec(existing,aclSpec);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AclException.class) public void testMergeAclEntriesNamedOther() throws AclException {
  List<AclEntry> existing=new ImmutableList.Builder<AclEntry>().add(aclEntry(ACCESS,USER,ALL)).add(aclEntry(ACCESS,GROUP,READ)).add(aclEntry(ACCESS,OTHER,NONE)).build();
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(ACCESS,OTHER,"bruce",READ_EXECUTE));
  mergeAclEntries(existing,aclSpec);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AclException.class) public void testReplaceAclEntriesNamedMask() throws AclException {
  List<AclEntry> existing=new ImmutableList.Builder<AclEntry>().add(aclEntry(ACCESS,USER,ALL)).add(aclEntry(ACCESS,GROUP,READ)).add(aclEntry(ACCESS,OTHER,NONE)).build();
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,GROUP,READ),aclEntry(ACCESS,OTHER,NONE),aclEntry(ACCESS,MASK,"bruce",READ_EXECUTE));
  replaceAclEntries(existing,aclSpec);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AclException.class) public void testFilterAclEntriesByAclSpecInputTooLarge() throws AclException {
  List<AclEntry> existing=new ImmutableList.Builder<AclEntry>().add(aclEntry(ACCESS,USER,ALL)).add(aclEntry(ACCESS,GROUP,READ)).add(aclEntry(ACCESS,OTHER,NONE)).build();
  filterAclEntriesByAclSpec(existing,ACL_SPEC_TOO_LARGE);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestAllowFormat </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test to skip format for non file scheme directory configured
 * @throws Exception
 */
@Test public void testFormatShouldBeIgnoredForNonFileBasedDirs() throws Exception {
  Configuration conf=new HdfsConfiguration();
  String logicalName="mycluster";
  String localhost="127.0.0.1";
  InetSocketAddress nnAddr1=new InetSocketAddress(localhost,8020);
  InetSocketAddress nnAddr2=new InetSocketAddress(localhost,9020);
  HATestUtil.setFailoverConfigurations(conf,logicalName,nnAddr1,nnAddr2);
  conf.set(DFS_NAMENODE_NAME_DIR_KEY,new File(DFS_BASE_DIR,"name").getAbsolutePath());
  conf.setBoolean(DFS_NAMENODE_SUPPORT_ALLOW_FORMAT_KEY,true);
  conf.set(DFSUtil.addKeySuffixes(DFSConfigKeys.DFS_NAMENODE_EDITS_PLUGIN_PREFIX,"dummy"),DummyJournalManager.class.getName());
  conf.set(DFSConfigKeys.DFS_NAMENODE_SHARED_EDITS_DIR_KEY,"dummy://" + localhost + ":2181/ledgers");
  conf.set(DFSConfigKeys.DFS_HA_NAMENODE_ID_KEY,"nn1");
  NameNode.format(conf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestAuditLogs </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * test that open via webhdfs puts proper entry in audit log 
 */
@Test public void testAuditWebHdfsOpen() throws Exception {
  final Path file=new Path(fnames[0]);
  fs.setPermission(file,new FsPermission((short)0644));
  fs.setOwner(file,"root",null);
  setupAuditLogs();
  WebHdfsFileSystem webfs=WebHdfsTestUtil.getWebHdfsFileSystemAs(userGroupInfo,conf,WebHdfsFileSystem.SCHEME);
  webfs.open(file);
  verifyAuditLogsCheckPattern(true,3,webOpenPattern);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestBackupNode </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCheckpointNode() throws Exception {
  testCheckpoint(StartupOption.CHECKPOINT);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBackupNode() throws Exception {
  testCheckpoint(StartupOption.BACKUP);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestBlockUnderConstruction </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBlockCreation() throws IOException {
  Path file1=new Path(BASE_DIR,"file1.dat");
  FSDataOutputStream out=TestFileCreation.createFile(hdfs,file1,3);
  for (int idx=0; idx < NUM_BLOCKS; idx++) {
    writeFile(file1,out,BLOCK_SIZE);
    verifyFileBlocks(file1.toString(),true);
  }
  out.close();
  verifyFileBlocks(file1.toString(),false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestCacheDirectives </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000) public void testWaitForCachedReplicasInDirectory() throws Exception {
  final String pool="friendlyPool";
  final CachePoolInfo poolInfo=new CachePoolInfo(pool);
  dfs.addCachePool(poolInfo);
  final List<Path> paths=new LinkedList<Path>();
  paths.add(new Path("/foo/bar"));
  paths.add(new Path("/foo/baz"));
  paths.add(new Path("/foo2/bar2"));
  paths.add(new Path("/foo2/baz2"));
  dfs.mkdir(new Path("/foo"),FsPermission.getDirDefault());
  dfs.mkdir(new Path("/foo2"),FsPermission.getDirDefault());
  final int numBlocksPerFile=2;
  for (  Path path : paths) {
    FileSystemTestHelper.createFile(dfs,path,numBlocksPerFile,(int)BLOCK_SIZE,(short)3,false);
  }
  waitForCachedBlocks(namenode,0,0,"testWaitForCachedReplicasInDirectory:0");
  long id=dfs.addCacheDirective(new CacheDirectiveInfo.Builder().setPath(new Path("/foo")).setReplication((short)2).setPool(pool).build());
  waitForCachedBlocks(namenode,4,8,"testWaitForCachedReplicasInDirectory:1:blocks");
  waitForCacheDirectiveStats(dfs,4 * numBlocksPerFile * BLOCK_SIZE,4 * numBlocksPerFile * BLOCK_SIZE,2,2,new CacheDirectiveInfo.Builder().setPath(new Path("/foo")).build(),"testWaitForCachedReplicasInDirectory:1:directive");
  waitForCachePoolStats(dfs,4 * numBlocksPerFile * BLOCK_SIZE,4 * numBlocksPerFile * BLOCK_SIZE,2,2,poolInfo,"testWaitForCachedReplicasInDirectory:1:pool");
  long id2=dfs.addCacheDirective(new CacheDirectiveInfo.Builder().setPath(new Path("/foo/bar")).setReplication((short)4).setPool(pool).build());
  waitForCachedBlocks(namenode,4,10,"testWaitForCachedReplicasInDirectory:2:blocks");
  waitForCacheDirectiveStats(dfs,4 * numBlocksPerFile * BLOCK_SIZE,4 * numBlocksPerFile * BLOCK_SIZE,2,2,new CacheDirectiveInfo.Builder().setPath(new Path("/foo")).build(),"testWaitForCachedReplicasInDirectory:2:directive-1");
  waitForCacheDirectiveStats(dfs,4 * numBlocksPerFile * BLOCK_SIZE,3 * numBlocksPerFile * BLOCK_SIZE,1,0,new CacheDirectiveInfo.Builder().setPath(new Path("/foo/bar")).build(),"testWaitForCachedReplicasInDirectory:2:directive-2");
  waitForCachePoolStats(dfs,(4 + 4) * numBlocksPerFile * BLOCK_SIZE,(4 + 3) * numBlocksPerFile * BLOCK_SIZE,3,2,poolInfo,"testWaitForCachedReplicasInDirectory:2:pool");
  dfs.removeCacheDirective(id);
  dfs.removeCacheDirective(id2);
  waitForCachedBlocks(namenode,0,0,"testWaitForCachedReplicasInDirectory:3:blocks");
  waitForCachePoolStats(dfs,0,0,0,0,poolInfo,"testWaitForCachedReplicasInDirectory:3:pool");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testExceedsCapacity() throws Exception {
  final Path fileName=new Path("/exceeds");
  final long fileLen=CACHE_CAPACITY * (NUM_DATANODES * 2);
  int numCachedReplicas=(int)((CACHE_CAPACITY * NUM_DATANODES) / BLOCK_SIZE);
  DFSTestUtil.createFile(dfs,fileName,fileLen,(short)NUM_DATANODES,0xFADED);
  dfs.addCachePool(new CachePoolInfo("pool"));
  dfs.addCacheDirective(new CacheDirectiveInfo.Builder().setPool("pool").setPath(fileName).setReplication((short)1).build());
  waitForCachedBlocks(namenode,-1,numCachedReplicas,"testExceeds:1");
  checkPendingCachedEmpty(cluster);
  Thread.sleep(1000);
  checkPendingCachedEmpty(cluster);
  dfs.delete(fileName,false);
  DFSTestUtil.createFile(dfs,fileName,4096,fileLen,CACHE_CAPACITY * 2,(short)1,0xFADED);
  checkPendingCachedEmpty(cluster);
  Thread.sleep(1000);
  checkPendingCachedEmpty(cluster);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests stepping the cache replication factor up and down, checking the
 * number of cached replicas and blocks as well as the advertised locations.
 * @throws Exception
 */
@Test(timeout=120000) public void testReplicationFactor() throws Exception {
  final String pool="friendlyPool";
  dfs.addCachePool(new CachePoolInfo(pool));
  final List<Path> paths=new LinkedList<Path>();
  paths.add(new Path("/foo/bar"));
  paths.add(new Path("/foo/baz"));
  paths.add(new Path("/foo2/bar2"));
  paths.add(new Path("/foo2/baz2"));
  dfs.mkdir(new Path("/foo"),FsPermission.getDirDefault());
  dfs.mkdir(new Path("/foo2"),FsPermission.getDirDefault());
  final int numBlocksPerFile=2;
  for (  Path path : paths) {
    FileSystemTestHelper.createFile(dfs,path,numBlocksPerFile,(int)BLOCK_SIZE,(short)3,false);
  }
  waitForCachedBlocks(namenode,0,0,"testReplicationFactor:0");
  checkNumCachedReplicas(dfs,paths,0,0);
  long id=dfs.addCacheDirective(new CacheDirectiveInfo.Builder().setPath(new Path("/foo")).setReplication((short)1).setPool(pool).build());
  waitForCachedBlocks(namenode,4,4,"testReplicationFactor:1");
  checkNumCachedReplicas(dfs,paths,4,4);
  for (int i=2; i <= 3; i++) {
    dfs.modifyCacheDirective(new CacheDirectiveInfo.Builder().setId(id).setReplication((short)i).build());
    waitForCachedBlocks(namenode,4,4 * i,"testReplicationFactor:2");
    checkNumCachedReplicas(dfs,paths,4,4 * i);
  }
  for (int i=2; i >= 1; i--) {
    dfs.modifyCacheDirective(new CacheDirectiveInfo.Builder().setId(id).setReplication((short)i).build());
    waitForCachedBlocks(namenode,4,4 * i,"testReplicationFactor:3");
    checkNumCachedReplicas(dfs,paths,4,4 * i);
  }
  dfs.removeCacheDirective(id);
  waitForCachedBlocks(namenode,0,0,"testReplicationFactor:4");
  checkNumCachedReplicas(dfs,paths,0,0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestCheckpoint </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that the 2NN triggers a checkpoint after the configurable interval
 */
@Test(timeout=30000) public void testCheckpointTriggerOnTxnCount() throws Exception {
  MiniDFSCluster cluster=null;
  SecondaryNameNode secondary=null;
  Configuration conf=new HdfsConfiguration();
  conf.setInt(DFSConfigKeys.DFS_NAMENODE_CHECKPOINT_TXNS_KEY,10);
  conf.setInt(DFSConfigKeys.DFS_NAMENODE_CHECKPOINT_CHECK_PERIOD_KEY,1);
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(0).format(true).build();
    FileSystem fs=cluster.getFileSystem();
    secondary=startSecondaryNameNode(conf);
    secondary.startCheckpointThread();
    final NNStorage storage=secondary.getFSImage().getStorage();
    GenericTestUtils.waitFor(new Supplier<Boolean>(){
      @Override public Boolean get(){
        LOG.info("Waiting for checkpoint txn id to go to 2");
        return storage.getMostRecentCheckpointTxId() == 2;
      }
    }
,200,15000);
    for (int i=0; i < 10; i++) {
      fs.mkdirs(new Path("/test" + i));
    }
    GenericTestUtils.waitFor(new Supplier<Boolean>(){
      @Override public Boolean get(){
        LOG.info("Waiting for checkpoint txn id to go > 2");
        return storage.getMostRecentCheckpointTxId() > 2;
      }
    }
,200,15000);
  }
  finally {
    cleanup(secondary);
    secondary=null;
    cleanup(cluster);
    cluster=null;
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test case where the secondary does a checkpoint, then stops for a while.
 * In the meantime, the NN saves its image several times, so that the
 * logs that connect the 2NN's old checkpoint to the current txid
 * get archived. Then, the 2NN tries to checkpoint again.
 */
@Test public void testSecondaryHasVeryOutOfDateImage() throws IOException {
  MiniDFSCluster cluster=null;
  SecondaryNameNode secondary=null;
  Configuration conf=new HdfsConfiguration();
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(numDatanodes).format(true).build();
    secondary=startSecondaryNameNode(conf);
    secondary.doCheckpoint();
    NamenodeProtocols nn=cluster.getNameNodeRpc();
    nn.setSafeMode(SafeModeAction.SAFEMODE_ENTER,false);
    for (int i=0; i < 3; i++) {
      nn.saveNamespace();
    }
    nn.setSafeMode(SafeModeAction.SAFEMODE_LEAVE,false);
    secondary.doCheckpoint();
  }
  finally {
    cleanup(secondary);
    secondary=null;
    cleanup(cluster);
    cluster=null;
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that, if a storage directory is failed when a checkpoint occurs,
 * the non-failed storage directory receives the checkpoint.
 */
@Test public void testCheckpointWithFailedStorageDir() throws Exception {
  MiniDFSCluster cluster=null;
  SecondaryNameNode secondary=null;
  File currentDir=null;
  Configuration conf=new HdfsConfiguration();
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(0).format(true).build();
    secondary=startSecondaryNameNode(conf);
    secondary.doCheckpoint();
    NamenodeProtocols nn=cluster.getNameNodeRpc();
    NNStorage storage=cluster.getNameNode().getFSImage().getStorage();
    StorageDirectory sd0=storage.getStorageDir(0);
    StorageDirectory sd1=storage.getStorageDir(1);
    currentDir=sd0.getCurrentDir();
    FileUtil.setExecutable(currentDir,false);
    secondary.doCheckpoint();
    GenericTestUtils.assertExists(new File(sd1.getCurrentDir(),NNStorage.getImageFileName(2)));
    FileUtil.setExecutable(currentDir,true);
    nn.restoreFailedStorage("true");
    nn.rollEditLog();
    secondary.doCheckpoint();
    assertNNHasCheckpoints(cluster,ImmutableList.of(8));
    assertParallelFilesInvariant(cluster,ImmutableList.of(secondary));
  }
  finally {
    if (currentDir != null) {
      FileUtil.setExecutable(currentDir,true);
    }
    cleanup(secondary);
    secondary=null;
    cleanup(cluster);
    cluster=null;
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Simulate a secondary node failure to transfer image. Uses an unchecked
 * error and fail transfer before even setting the length header. This used to
 * cause image truncation. Regression test for HDFS-3330.
 */
@Test public void testSecondaryFailsWithErrorBeforeSettingHeaders() throws IOException {
  Mockito.doThrow(new Error("If this exception is not caught by the " + "name-node, fs image will be truncated.")).when(faultInjector).beforeGetImageSetsHeaders();
  doSecondaryFailsToReturnImage();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Simulate 2NN sending a corrupt image (error type 4)
 * The digest header in the HTTP transfer should prevent
 * this from corrupting the NN.
 */
@Test public void testNameNodeImageSendFailWrongDigest() throws IOException {
  LOG.info("Starting testNameNodeImageSendFailWrongDigest");
  Mockito.doReturn(true).when(faultInjector).shouldCorruptAByte(Mockito.any(File.class));
  doSendFailTest("does not match advertised digest");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Simulate 2NN failing to send the whole file (error type 3)
 * The length header in the HTTP transfer should prevent
 * this from corrupting the NN.
 */
@Test public void testNameNodeImageSendFailWrongSize() throws IOException {
  LOG.info("Starting testNameNodeImageSendFailWrongSize");
  Mockito.doReturn(true).when(faultInjector).shouldSendShortFile(filePathContaining("fsimage"));
  doSendFailTest("is not of the advertised size");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestCommitBlockSynchronization </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCommitBlockSynchronizationWithCloseAndNonExistantTarget() throws IOException {
  INodeFile file=mockFileUnderConstruction();
  Block block=new Block(blockId,length,genStamp);
  FSNamesystem namesystemSpy=makeNameSystemSpy(block,file);
  DatanodeID[] newTargets=new DatanodeID[]{new DatanodeID("0.0.0.0","nonexistantHost","1",0,0,0,0)};
  ExtendedBlock lastBlock=new ExtendedBlock();
  namesystemSpy.commitBlockSynchronization(lastBlock,genStamp,length,true,false,newTargets,null);
  namesystemSpy.commitBlockSynchronization(lastBlock,genStamp,length,true,false,newTargets,null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCommitBlockSynchronization() throws IOException {
  INodeFile file=mockFileUnderConstruction();
  Block block=new Block(blockId,length,genStamp);
  FSNamesystem namesystemSpy=makeNameSystemSpy(block,file);
  DatanodeID[] newTargets=new DatanodeID[0];
  ExtendedBlock lastBlock=new ExtendedBlock();
  namesystemSpy.commitBlockSynchronization(lastBlock,genStamp,length,false,false,newTargets,null);
  namesystemSpy.commitBlockSynchronization(lastBlock,genStamp,length,false,false,newTargets,null);
  BlockInfo completedBlockInfo=new BlockInfo(block,1);
  completedBlockInfo.setBlockCollection(file);
  completedBlockInfo.setGenerationStamp(genStamp);
  doReturn(completedBlockInfo).when(namesystemSpy).getStoredBlock(any(Block.class));
  namesystemSpy.commitBlockSynchronization(lastBlock,genStamp,length,false,false,newTargets,null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCommitBlockSynchronizationWithDelete() throws IOException {
  INodeFile file=mockFileUnderConstruction();
  Block block=new Block(blockId,length,genStamp);
  FSNamesystem namesystemSpy=makeNameSystemSpy(block,file);
  DatanodeID[] newTargets=new DatanodeID[0];
  ExtendedBlock lastBlock=new ExtendedBlock();
  namesystemSpy.commitBlockSynchronization(lastBlock,genStamp,length,false,true,newTargets,null);
  doReturn(false).when(file).removeLastBlock(any(Block.class));
  namesystemSpy.commitBlockSynchronization(lastBlock,genStamp,length,false,true,newTargets,null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCommitBlockSynchronizationWithClose() throws IOException {
  INodeFile file=mockFileUnderConstruction();
  Block block=new Block(blockId,length,genStamp);
  FSNamesystem namesystemSpy=makeNameSystemSpy(block,file);
  DatanodeID[] newTargets=new DatanodeID[0];
  ExtendedBlock lastBlock=new ExtendedBlock();
  namesystemSpy.commitBlockSynchronization(lastBlock,genStamp,length,true,false,newTargets,null);
  namesystemSpy.commitBlockSynchronization(lastBlock,genStamp,length,true,false,newTargets,null);
  BlockInfo completedBlockInfo=new BlockInfo(block,1);
  completedBlockInfo.setBlockCollection(file);
  completedBlockInfo.setGenerationStamp(genStamp);
  doReturn(completedBlockInfo).when(namesystemSpy).getStoredBlock(any(Block.class));
  namesystemSpy.commitBlockSynchronization(lastBlock,genStamp,length,true,false,newTargets,null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestCreateEditsLog </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that an edits log created using CreateEditsLog is valid and can be
 * loaded successfully by a namenode.
 */
@Test(timeout=60000) public void testCanLoadCreatedEditsLog() throws Exception {
  HdfsConfiguration conf=new HdfsConfiguration();
  File nameDir=new File(HDFS_DIR,"name");
  conf.set(DFS_NAMENODE_NAME_DIR_KEY,Util.fileAsURI(nameDir).toString());
  DFSTestUtil.formatNameNode(conf);
  CreateEditsLog.main(new String[]{"-f","1000","0","1","-d",TEST_DIR.getAbsolutePath()});
  Path editsWildcard=new Path(TEST_DIR.getAbsolutePath(),"*");
  FileContext localFc=FileContext.getLocalFSFileContext();
  for (  FileStatus edits : localFc.util().globStatus(editsWildcard)) {
    Path src=edits.getPath();
    Path dst=new Path(new File(nameDir,"current").getAbsolutePath(),src.getName());
    localFc.rename(src,dst);
  }
  cluster=new MiniDFSCluster.Builder(conf).format(false).manageNameDfsDirs(false).waitSafeMode(false).build();
  cluster.waitClusterUp();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestDeleteRace </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeleteAddBlockRaceWithSnapshot() throws Exception {
  testDeleteAddBlockRace(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=600000) public void testDeleteAndCommitBlockSynchonizationRaceNoSnapshot() throws Exception {
  testDeleteAndCommitBlockSynchronizationRace(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeleteAddBlockRace() throws Exception {
  testDeleteAddBlockRace(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRenameRace() throws Exception {
  try {
    conf.setClass(DFSConfigKeys.DFS_BLOCK_REPLICATOR_CLASSNAME_KEY,SlowBlockPlacementPolicy.class,BlockPlacementPolicy.class);
    cluster=new MiniDFSCluster.Builder(conf).build();
    FileSystem fs=cluster.getFileSystem();
    Path dirPath1=new Path("/testRenameRace1");
    Path dirPath2=new Path("/testRenameRace2");
    Path filePath=new Path("/testRenameRace1/file1");
    fs.mkdirs(dirPath1);
    FSDataOutputStream out=fs.create(filePath);
    Thread renameThread=new RenameThread(fs,dirPath1,dirPath2);
    renameThread.start();
    out.write(new byte[32],0,32);
    out.close();
    cluster.restartNameNode(0);
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=600000) public void testDeleteAndCommitBlockSynchronizationRaceHasSnapshot() throws Exception {
  testDeleteAndCommitBlockSynchronizationRace(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestEditLog </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test creating a directory with lots and lots of edit log segments
 */
@Test public void testManyEditLogSegments() throws IOException {
  final int NUM_EDIT_LOG_ROLLS=1000;
  Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=null;
  FileSystem fileSys=null;
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(NUM_DATA_NODES).build();
    cluster.waitActive();
    fileSys=cluster.getFileSystem();
    final FSNamesystem namesystem=cluster.getNamesystem();
    FSImage fsimage=namesystem.getFSImage();
    final FSEditLog editLog=fsimage.getEditLog();
    for (int i=0; i < NUM_EDIT_LOG_ROLLS; i++) {
      editLog.logSetReplication("fakefile" + i,(short)(i % 3));
      assertExistsInStorageDirs(cluster,NameNodeDirType.EDITS,NNStorage.getInProgressEditsFileName((i * 3) + 1));
      editLog.logSync();
      editLog.rollEditLog();
      assertExistsInStorageDirs(cluster,NameNodeDirType.EDITS,NNStorage.getFinalizedEditsFileName((i * 3) + 1,(i * 3) + 3));
    }
    editLog.close();
  }
  finally {
    if (fileSys != null)     fileSys.close();
    if (cluster != null)     cluster.shutdown();
  }
  long startTime=Time.now();
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(NUM_DATA_NODES).build();
    cluster.waitActive();
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
  long endTime=Time.now();
  double delta=((float)(endTime - startTime)) / 1000.0;
  LOG.info(String.format("loaded %d edit log segments in %.2f seconds",NUM_EDIT_LOG_ROLLS,delta));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests transaction logging in dfs.
 */
@Test public void testMultiThreadedEditLog() throws IOException {
  testEditLog(2048);
  testEditLog(1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCrashRecoveryEmptyLogOneDirNoUpdateSeenTxId() throws Exception {
  doTestCrashRecoveryEmptyLog(false,false,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCrashRecoveryEmptyLogBothDirsNoUpdateSeenTxId() throws Exception {
  doTestCrashRecoveryEmptyLog(true,false,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Simple test for writing to and rolling the edit log.
 */
@Test public void testSimpleEditLog() throws IOException {
  Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=null;
  FileSystem fileSys=null;
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(NUM_DATA_NODES).build();
    cluster.waitActive();
    fileSys=cluster.getFileSystem();
    final FSNamesystem namesystem=cluster.getNamesystem();
    FSImage fsimage=namesystem.getFSImage();
    final FSEditLog editLog=fsimage.getEditLog();
    assertExistsInStorageDirs(cluster,NameNodeDirType.EDITS,NNStorage.getInProgressEditsFileName(1));
    editLog.logSetReplication("fakefile",(short)1);
    editLog.logSync();
    editLog.rollEditLog();
    assertExistsInStorageDirs(cluster,NameNodeDirType.EDITS,NNStorage.getFinalizedEditsFileName(1,3));
    assertExistsInStorageDirs(cluster,NameNodeDirType.EDITS,NNStorage.getInProgressEditsFileName(4));
    editLog.logSetReplication("fakefile",(short)2);
    editLog.logSync();
    editLog.close();
  }
  finally {
    if (fileSys != null)     fileSys.close();
    if (cluster != null)     cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Regression test for HDFS-1112/HDFS-3020. Ensures that, even if
 * logSync isn't called periodically, the edit log will sync itself.
 */
@Test public void testAutoSync() throws Exception {
  File logDir=new File(TEST_DIR,"testAutoSync");
  logDir.mkdirs();
  FSEditLog log=FSImageTestUtil.createStandaloneEditLog(logDir);
  String oneKB=StringUtils.byteToHexString(new byte[500]);
  try {
    log.openForWrite();
    NameNodeMetrics mockMetrics=Mockito.mock(NameNodeMetrics.class);
    log.setMetricsForTests(mockMetrics);
    for (int i=0; i < 400; i++) {
      log.logDelete(oneKB,1L,false);
    }
    Mockito.verify(mockMetrics,Mockito.times(0)).addSync(Mockito.anyLong());
    for (int i=0; i < 400; i++) {
      log.logDelete(oneKB,1L,false);
    }
    Mockito.verify(mockMetrics,Mockito.times(1)).addSync(Mockito.anyLong());
  }
  finally {
    log.close();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test what happens if the NN crashes when it has has started but
 * had no transactions written.
 */
@Test public void testCrashRecoveryNoTransactions() throws Exception {
  testCrashRecovery(0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test what happens if the NN crashes when it has has started and
 * had a few transactions written
 */
@Test public void testCrashRecoveryWithTransactions() throws Exception {
  testCrashRecovery(150);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCrashRecoveryEmptyLogOneDir() throws Exception {
  doTestCrashRecoveryEmptyLog(false,true,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCrashRecoveryEmptyLogBothDirs() throws Exception {
  doTestCrashRecoveryEmptyLog(true,true,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * "Fuzz" test for the edit log.
 * This tests that we can read random garbage from the edit log without
 * crashing the JVM or throwing an unchecked exception.
 */
@Test public void testFuzzSequences() throws IOException {
  final int MAX_GARBAGE_LENGTH=512;
  final int MAX_INVALID_SEQ=5000;
  final int RANDOM_SEED=123;
  Random r=new Random(RANDOM_SEED);
  for (int i=0; i < MAX_INVALID_SEQ; i++) {
    byte[] garbage=new byte[r.nextInt(MAX_GARBAGE_LENGTH)];
    r.nextBytes(garbage);
    validateNoCrash(garbage);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestEditLogAutoroll </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testEditLogAutoroll() throws Exception {
  final long startTxId=editLog.getCurSegmentTxId();
  for (int i=0; i < 11; i++) {
    fs.mkdirs(new Path("testEditLogAutoroll-" + i));
  }
  GenericTestUtils.waitFor(new Supplier<Boolean>(){
    @Override public Boolean get(){
      return editLog.getCurSegmentTxId() > startTxId;
    }
  }
,1000,5000);
  nn0.transitionToStandby();
  GenericTestUtils.assertNoThreadsMatching(".*" + NameNodeEditLogRoller.class.getSimpleName() + ".*");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestEditLogFileOutputStream </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests EditLogFileOutputStream doesn't throw NullPointerException on being
 * abort/abort sequence. See HDFS-2011.
 */
@Test public void testEditLogFileOutputStreamAbortAbort() throws IOException {
  EditLogFileOutputStream editLogStream=null;
  try {
    editLogStream=new EditLogFileOutputStream(conf,TEST_EDITS,0);
    editLogStream.abort();
    editLogStream.abort();
  }
  finally {
    IOUtils.cleanup(null,editLogStream);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests writing to the EditLogFileOutputStream. Due to preallocation, the
 * length of the edit log will usually be longer than its valid contents.
 */
@Test public void testRawWrites() throws IOException {
  EditLogFileOutputStream elos=new EditLogFileOutputStream(conf,TEST_EDITS,0);
  try {
    byte[] small=new byte[]{1,2,3,4,5,8,7};
    elos.create(NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION);
    elos.writeRaw(small,0,small.length);
    flushAndCheckLength(elos,MIN_PREALLOCATION_LENGTH);
    elos.writeRaw(small,0,small.length);
    flushAndCheckLength(elos,MIN_PREALLOCATION_LENGTH);
    final int BIG_WRITE_LENGTH=3 * MIN_PREALLOCATION_LENGTH;
    byte[] buf=new byte[4096];
    for (int i=0; i < buf.length; i++) {
      buf[i]=0;
    }
    int total=BIG_WRITE_LENGTH;
    while (total > 0) {
      int toWrite=(total > buf.length) ? buf.length : total;
      elos.writeRaw(buf,0,toWrite);
      total-=toWrite;
    }
    flushAndCheckLength(elos,4 * MIN_PREALLOCATION_LENGTH);
  }
  finally {
    if (elos != null)     elos.close();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests EditLogFileOutputStream doesn't throw NullPointerException on
 * close/abort sequence. See HDFS-2011.
 */
@Test public void testEditLogFileOutputStreamCloseAbort() throws IOException {
  EditLogFileOutputStream editLogStream=new EditLogFileOutputStream(conf,TEST_EDITS,0);
  editLogStream.close();
  editLogStream.abort();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestFSDirectory </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSkipQuotaCheck() throws Exception {
  try {
    hdfs.setQuota(sub2,1,Long.MAX_VALUE);
    try {
      DFSTestUtil.createFile(hdfs,file6,1024,REPLICATION,seed);
      throw new IOException("The create should have failed.");
    }
 catch (    NSQuotaExceededException qe) {
    }
    fsdir.disableQuotaChecks();
    DFSTestUtil.createFile(hdfs,file6,1024,REPLICATION,seed);
    hdfs.delete(file6,false);
    fsdir.enableQuotaChecks();
    try {
      DFSTestUtil.createFile(hdfs,file6,1024,REPLICATION,seed);
      throw new IOException("The create should have failed.");
    }
 catch (    NSQuotaExceededException qe) {
    }
  }
  finally {
    hdfs.delete(file6,false);
    hdfs.setQuota(sub2,Long.MAX_VALUE,Long.MAX_VALUE);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestFSEditLogLoader </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that, if the NN restarts with a new minimum replication,
 * any files created with the old replication count will get
 * automatically bumped up to the new minimum upon restart.
 */
@Test public void testReplicationAdjusted() throws Exception {
  Configuration conf=new HdfsConfiguration();
  conf.setInt(DFSConfigKeys.DFS_NAMENODE_REPLICATION_INTERVAL_KEY,1);
  conf.setInt(DFSConfigKeys.DFS_HEARTBEAT_INTERVAL_KEY,1);
  MiniDFSCluster cluster=null;
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(2).build();
    cluster.waitActive();
    FileSystem fs=cluster.getFileSystem();
    Path p=new Path("/testfile");
    DFSTestUtil.createFile(fs,p,10,(short)1,1);
    DFSTestUtil.waitReplication(fs,p,(short)1);
    cluster.shutdown();
    cluster=null;
    conf.setInt(DFSConfigKeys.DFS_NAMENODE_REPLICATION_MIN_KEY,2);
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(2).format(false).build();
    cluster.waitActive();
    fs=cluster.getFileSystem();
    DFSTestUtil.waitReplication(fs,p,(short)2);
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestFSImage </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPersist() throws IOException {
  Configuration conf=new Configuration();
  testPersistHelper(conf);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCompression() throws IOException {
  Configuration conf=new Configuration();
  conf.setBoolean(DFSConfigKeys.DFS_IMAGE_COMPRESS_KEY,true);
  conf.set(DFSConfigKeys.DFS_IMAGE_COMPRESSION_CODEC_KEY,"org.apache.hadoop.io.compress.GzipCodec");
  testPersistHelper(conf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestFSImageWithAcl </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPersistAcl() throws IOException {
  testAcl(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFsImageDefaultAclNewChildren() throws IOException {
  doTestDefaultAclNewChildren(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclEditLog() throws IOException {
  testAcl(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEditLogDefaultAclNewChildren() throws IOException {
  doTestDefaultAclNewChildren(false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestFSImageWithSnapshot </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test the fsimage saving/loading while file appending.
 */
@Test(timeout=60000) public void testSaveLoadImageWithAppending() throws Exception {
  Path sub1=new Path(dir,"sub1");
  Path sub1file1=new Path(sub1,"sub1file1");
  Path sub1file2=new Path(sub1,"sub1file2");
  DFSTestUtil.createFile(hdfs,sub1file1,BLOCKSIZE,REPLICATION,seed);
  DFSTestUtil.createFile(hdfs,sub1file2,BLOCKSIZE,REPLICATION,seed);
  hdfs.allowSnapshot(dir);
  hdfs.createSnapshot(dir,"s0");
  HdfsDataOutputStream out=appendFileWithoutClosing(sub1file1,BLOCKSIZE);
  out.hsync(EnumSet.of(SyncFlag.UPDATE_LENGTH));
  DFSTestUtil.appendFile(hdfs,sub1file2,BLOCKSIZE);
  hdfs.createSnapshot(dir,"s1");
  out.close();
  out=appendFileWithoutClosing(sub1file1,BLOCKSIZE);
  out.hsync(EnumSet.of(SyncFlag.UPDATE_LENGTH));
  hdfs.createSnapshot(dir,"s2");
  out.close();
  out=appendFileWithoutClosing(sub1file1,BLOCKSIZE);
  out.hsync(EnumSet.of(SyncFlag.UPDATE_LENGTH));
  File fsnBefore=dumpTree2File("before");
  File imageFile=saveFSImageToTempFile();
  out.close();
  cluster.shutdown();
  cluster=new MiniDFSCluster.Builder(conf).format(true).numDataNodes(REPLICATION).build();
  cluster.waitActive();
  fsn=cluster.getNamesystem();
  hdfs=cluster.getFileSystem();
  loadFSImageFromTempFile(imageFile);
  File fsnAfter=dumpTree2File("after");
  SnapshotTestHelper.compareDumpedTreeInFile(fsnBefore,fsnAfter,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Testing steps:
 * <pre>
 * 1. Creating/modifying directories/files while snapshots are being taken.
 * 2. Dump the FSDirectory tree of the namesystem.
 * 3. Save the namesystem to a temp file (FSImage saving).
 * 4. Restart the cluster and format the namesystem.
 * 5. Load the namesystem from the temp file (FSImage loading).
 * 6. Dump the FSDirectory again and compare the two dumped string.
 * </pre>
 */
@Test public void testSaveLoadImage() throws Exception {
  int s=0;
  hdfs.mkdirs(dir);
  SnapshotTestHelper.createSnapshot(hdfs,dir,"s" + ++s);
  Path sub1=new Path(dir,"sub1");
  hdfs.mkdirs(sub1);
  hdfs.setPermission(sub1,new FsPermission((short)0777));
  Path sub11=new Path(sub1,"sub11");
  hdfs.mkdirs(sub11);
  checkImage(s);
  hdfs.createSnapshot(dir,"s" + ++s);
  Path sub1file1=new Path(sub1,"sub1file1");
  Path sub1file2=new Path(sub1,"sub1file2");
  DFSTestUtil.createFile(hdfs,sub1file1,BLOCKSIZE,REPLICATION,seed);
  DFSTestUtil.createFile(hdfs,sub1file2,BLOCKSIZE,REPLICATION,seed);
  checkImage(s);
  hdfs.createSnapshot(dir,"s" + ++s);
  Path sub2=new Path(dir,"sub2");
  Path sub2file1=new Path(sub2,"sub2file1");
  Path sub2file2=new Path(sub2,"sub2file2");
  DFSTestUtil.createFile(hdfs,sub2file1,BLOCKSIZE,REPLICATION,seed);
  DFSTestUtil.createFile(hdfs,sub2file2,BLOCKSIZE,REPLICATION,seed);
  checkImage(s);
  hdfs.createSnapshot(dir,"s" + ++s);
  hdfs.setReplication(sub1file1,(short)(REPLICATION - 1));
  hdfs.delete(sub1file2,true);
  hdfs.setOwner(sub2,"dr.who","unknown");
  hdfs.delete(sub2file1,true);
  checkImage(s);
  hdfs.createSnapshot(dir,"s" + ++s);
  Path sub1_sub2file2=new Path(sub1,"sub2file2");
  hdfs.rename(sub2file2,sub1_sub2file2);
  hdfs.rename(sub1file1,sub2file1);
  checkImage(s);
  hdfs.rename(sub2file1,sub2file2);
  checkImage(s);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Testing a special case with snapshots. When the following steps happen:
 * <pre>
 * 1. Take snapshot s1 on dir.
 * 2. Create new dir and files under subsubDir, which is descendant of dir.
 * 3. Take snapshot s2 on dir.
 * 4. Delete subsubDir.
 * 5. Delete snapshot s2.
 * </pre>
 * When we merge the diff from s2 to s1 (since we deleted s2), we need to make
 * sure all the files/dirs created after s1 should be destroyed. Otherwise
 * we may save these files/dirs to the fsimage, and cause FileNotFound 
 * Exception while loading fsimage.  
 */
@Test(timeout=300000) public void testSaveLoadImageAfterSnapshotDeletion() throws Exception {
  Path dir=new Path("/dir");
  Path subDir=new Path(dir,"subdir");
  Path subsubDir=new Path(subDir,"subsubdir");
  hdfs.mkdirs(subsubDir);
  SnapshotTestHelper.createSnapshot(hdfs,dir,"s1");
  Path newDir=new Path(subsubDir,"newdir");
  Path newFile=new Path(newDir,"newfile");
  hdfs.mkdirs(newDir);
  DFSTestUtil.createFile(hdfs,newFile,BLOCKSIZE,REPLICATION,seed);
  SnapshotTestHelper.createSnapshot(hdfs,dir,"s2");
  hdfs.delete(subsubDir,true);
  hdfs.deleteSnapshot(dir,"s2");
  cluster.shutdown();
  cluster=new MiniDFSCluster.Builder(conf).numDataNodes(REPLICATION).format(false).build();
  cluster.waitActive();
  fsn=cluster.getNamesystem();
  hdfs=cluster.getFileSystem();
  hdfs.setSafeMode(SafeModeAction.SAFEMODE_ENTER);
  hdfs.saveNamespace();
  hdfs.setSafeMode(SafeModeAction.SAFEMODE_LEAVE);
  cluster.shutdown();
  cluster=new MiniDFSCluster.Builder(conf).format(false).numDataNodes(REPLICATION).build();
  cluster.waitActive();
  fsn=cluster.getNamesystem();
  hdfs=cluster.getFileSystem();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test the fsimage loading while there is file under construction.
 */
@Test(timeout=60000) public void testLoadImageWithAppending() throws Exception {
  Path sub1=new Path(dir,"sub1");
  Path sub1file1=new Path(sub1,"sub1file1");
  Path sub1file2=new Path(sub1,"sub1file2");
  DFSTestUtil.createFile(hdfs,sub1file1,BLOCKSIZE,REPLICATION,seed);
  DFSTestUtil.createFile(hdfs,sub1file2,BLOCKSIZE,REPLICATION,seed);
  hdfs.allowSnapshot(dir);
  hdfs.createSnapshot(dir,"s0");
  HdfsDataOutputStream out=appendFileWithoutClosing(sub1file1,BLOCKSIZE);
  out.hsync(EnumSet.of(SyncFlag.UPDATE_LENGTH));
  hdfs.setSafeMode(SafeModeAction.SAFEMODE_ENTER);
  hdfs.saveNamespace();
  hdfs.setSafeMode(SafeModeAction.SAFEMODE_LEAVE);
  cluster.shutdown();
  cluster=new MiniDFSCluster.Builder(conf).format(false).numDataNodes(REPLICATION).build();
  cluster.waitActive();
  fsn=cluster.getNamesystem();
  hdfs=cluster.getFileSystem();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestFSImageWithXAttr </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testXAttrEditLog() throws IOException {
  testXAttr(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPersistXAttr() throws IOException {
  testXAttr(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestFSPermissionChecker </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclNamedUserDeny() throws IOException {
  INodeFile inodeFile=createINodeFile(inodeRoot,"file1","bruce","execs",(short)0644);
  addAcl(inodeFile,aclEntry(ACCESS,USER,READ_WRITE),aclEntry(ACCESS,USER,"diana",NONE),aclEntry(ACCESS,GROUP,READ),aclEntry(ACCESS,MASK,READ),aclEntry(ACCESS,OTHER,READ));
  assertPermissionGranted(BRUCE,"/file1",READ_WRITE);
  assertPermissionGranted(CLARK,"/file1",READ);
  assertPermissionDenied(DIANA,"/file1",READ);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclNamedUser() throws IOException {
  INodeFile inodeFile=createINodeFile(inodeRoot,"file1","bruce","execs",(short)0640);
  addAcl(inodeFile,aclEntry(ACCESS,USER,READ_WRITE),aclEntry(ACCESS,USER,"diana",READ),aclEntry(ACCESS,GROUP,READ),aclEntry(ACCESS,MASK,READ),aclEntry(ACCESS,OTHER,NONE));
  assertPermissionGranted(DIANA,"/file1",READ);
  assertPermissionDenied(DIANA,"/file1",WRITE);
  assertPermissionDenied(DIANA,"/file1",EXECUTE);
  assertPermissionDenied(DIANA,"/file1",READ_WRITE);
  assertPermissionDenied(DIANA,"/file1",READ_EXECUTE);
  assertPermissionDenied(DIANA,"/file1",WRITE_EXECUTE);
  assertPermissionDenied(DIANA,"/file1",ALL);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclNamedUserTraverseDeny() throws IOException {
  INodeDirectory inodeDir=createINodeDirectory(inodeRoot,"dir1","bruce","execs",(short)0755);
  INodeFile inodeFile=createINodeFile(inodeDir,"file1","bruce","execs",(short)0644);
  addAcl(inodeDir,aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,USER,"diana",NONE),aclEntry(ACCESS,GROUP,READ_EXECUTE),aclEntry(ACCESS,MASK,READ_EXECUTE),aclEntry(ACCESS,OTHER,READ_EXECUTE));
  assertPermissionGranted(BRUCE,"/dir1/file1",READ_WRITE);
  assertPermissionGranted(CLARK,"/dir1/file1",READ);
  assertPermissionDenied(DIANA,"/dir1/file1",READ);
  assertPermissionDenied(DIANA,"/dir1/file1",WRITE);
  assertPermissionDenied(DIANA,"/dir1/file1",EXECUTE);
  assertPermissionDenied(DIANA,"/dir1/file1",READ_WRITE);
  assertPermissionDenied(DIANA,"/dir1/file1",READ_EXECUTE);
  assertPermissionDenied(DIANA,"/dir1/file1",WRITE_EXECUTE);
  assertPermissionDenied(DIANA,"/dir1/file1",ALL);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclOwner() throws IOException {
  INodeFile inodeFile=createINodeFile(inodeRoot,"file1","bruce","execs",(short)0640);
  addAcl(inodeFile,aclEntry(ACCESS,USER,READ_WRITE),aclEntry(ACCESS,GROUP,READ),aclEntry(ACCESS,MASK,READ),aclEntry(ACCESS,OTHER,NONE));
  assertPermissionGranted(BRUCE,"/file1",READ);
  assertPermissionGranted(BRUCE,"/file1",WRITE);
  assertPermissionGranted(BRUCE,"/file1",READ_WRITE);
  assertPermissionDenied(BRUCE,"/file1",EXECUTE);
  assertPermissionDenied(DIANA,"/file1",READ);
  assertPermissionDenied(DIANA,"/file1",WRITE);
  assertPermissionDenied(DIANA,"/file1",EXECUTE);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclGroupTraverseDeny() throws IOException {
  INodeDirectory inodeDir=createINodeDirectory(inodeRoot,"dir1","bruce","execs",(short)0755);
  INodeFile inodeFile=createINodeFile(inodeDir,"file1","bruce","execs",(short)0644);
  addAcl(inodeDir,aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,GROUP,NONE),aclEntry(ACCESS,MASK,NONE),aclEntry(ACCESS,OTHER,READ_EXECUTE));
  assertPermissionGranted(BRUCE,"/dir1/file1",READ_WRITE);
  assertPermissionGranted(DIANA,"/dir1/file1",READ);
  assertPermissionDenied(CLARK,"/dir1/file1",READ);
  assertPermissionDenied(CLARK,"/dir1/file1",WRITE);
  assertPermissionDenied(CLARK,"/dir1/file1",EXECUTE);
  assertPermissionDenied(CLARK,"/dir1/file1",READ_WRITE);
  assertPermissionDenied(CLARK,"/dir1/file1",READ_EXECUTE);
  assertPermissionDenied(CLARK,"/dir1/file1",WRITE_EXECUTE);
  assertPermissionDenied(CLARK,"/dir1/file1",ALL);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclGroupMask() throws IOException {
  INodeFile inodeFile=createINodeFile(inodeRoot,"file1","bruce","execs",(short)0644);
  addAcl(inodeFile,aclEntry(ACCESS,USER,READ_WRITE),aclEntry(ACCESS,GROUP,READ_WRITE),aclEntry(ACCESS,MASK,READ),aclEntry(ACCESS,OTHER,READ));
  assertPermissionGranted(BRUCE,"/file1",READ_WRITE);
  assertPermissionGranted(CLARK,"/file1",READ);
  assertPermissionDenied(CLARK,"/file1",WRITE);
  assertPermissionDenied(CLARK,"/file1",EXECUTE);
  assertPermissionDenied(CLARK,"/file1",READ_WRITE);
  assertPermissionDenied(CLARK,"/file1",READ_EXECUTE);
  assertPermissionDenied(CLARK,"/file1",WRITE_EXECUTE);
  assertPermissionDenied(CLARK,"/file1",ALL);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclGroupDeny() throws IOException {
  INodeFile inodeFile=createINodeFile(inodeRoot,"file1","bruce","sales",(short)0604);
  addAcl(inodeFile,aclEntry(ACCESS,USER,READ_WRITE),aclEntry(ACCESS,GROUP,NONE),aclEntry(ACCESS,MASK,NONE),aclEntry(ACCESS,OTHER,READ));
  assertPermissionGranted(BRUCE,"/file1",READ_WRITE);
  assertPermissionGranted(CLARK,"/file1",READ);
  assertPermissionDenied(DIANA,"/file1",READ);
  assertPermissionDenied(DIANA,"/file1",WRITE);
  assertPermissionDenied(DIANA,"/file1",EXECUTE);
  assertPermissionDenied(DIANA,"/file1",READ_WRITE);
  assertPermissionDenied(DIANA,"/file1",READ_EXECUTE);
  assertPermissionDenied(DIANA,"/file1",WRITE_EXECUTE);
  assertPermissionDenied(DIANA,"/file1",ALL);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclNamedGroupDeny() throws IOException {
  INodeFile inodeFile=createINodeFile(inodeRoot,"file1","bruce","sales",(short)0644);
  addAcl(inodeFile,aclEntry(ACCESS,USER,READ_WRITE),aclEntry(ACCESS,GROUP,READ),aclEntry(ACCESS,GROUP,"execs",NONE),aclEntry(ACCESS,MASK,READ),aclEntry(ACCESS,OTHER,READ));
  assertPermissionGranted(BRUCE,"/file1",READ_WRITE);
  assertPermissionGranted(DIANA,"/file1",READ);
  assertPermissionDenied(CLARK,"/file1",READ);
  assertPermissionDenied(CLARK,"/file1",WRITE);
  assertPermissionDenied(CLARK,"/file1",EXECUTE);
  assertPermissionDenied(CLARK,"/file1",READ_WRITE);
  assertPermissionDenied(CLARK,"/file1",READ_EXECUTE);
  assertPermissionDenied(CLARK,"/file1",WRITE_EXECUTE);
  assertPermissionDenied(CLARK,"/file1",ALL);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclGroupTraverseDenyOnlyDefaultEntries() throws IOException {
  INodeDirectory inodeDir=createINodeDirectory(inodeRoot,"dir1","bruce","execs",(short)0755);
  INodeFile inodeFile=createINodeFile(inodeDir,"file1","bruce","execs",(short)0644);
  addAcl(inodeDir,aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,GROUP,NONE),aclEntry(ACCESS,OTHER,READ_EXECUTE),aclEntry(DEFAULT,USER,ALL),aclEntry(DEFAULT,GROUP,"sales",NONE),aclEntry(DEFAULT,GROUP,NONE),aclEntry(DEFAULT,OTHER,READ_EXECUTE));
  assertPermissionGranted(BRUCE,"/dir1/file1",READ_WRITE);
  assertPermissionGranted(DIANA,"/dir1/file1",READ);
  assertPermissionDenied(CLARK,"/dir1/file1",READ);
  assertPermissionDenied(CLARK,"/dir1/file1",WRITE);
  assertPermissionDenied(CLARK,"/dir1/file1",EXECUTE);
  assertPermissionDenied(CLARK,"/dir1/file1",READ_WRITE);
  assertPermissionDenied(CLARK,"/dir1/file1",READ_EXECUTE);
  assertPermissionDenied(CLARK,"/dir1/file1",WRITE_EXECUTE);
  assertPermissionDenied(CLARK,"/dir1/file1",ALL);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclNamedGroup() throws IOException {
  INodeFile inodeFile=createINodeFile(inodeRoot,"file1","bruce","execs",(short)0640);
  addAcl(inodeFile,aclEntry(ACCESS,USER,READ_WRITE),aclEntry(ACCESS,GROUP,READ),aclEntry(ACCESS,GROUP,"sales",READ),aclEntry(ACCESS,MASK,READ),aclEntry(ACCESS,OTHER,NONE));
  assertPermissionGranted(BRUCE,"/file1",READ_WRITE);
  assertPermissionGranted(CLARK,"/file1",READ);
  assertPermissionGranted(DIANA,"/file1",READ);
  assertPermissionDenied(DIANA,"/file1",WRITE);
  assertPermissionDenied(DIANA,"/file1",EXECUTE);
  assertPermissionDenied(DIANA,"/file1",READ_WRITE);
  assertPermissionDenied(DIANA,"/file1",READ_EXECUTE);
  assertPermissionDenied(DIANA,"/file1",ALL);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclNamedGroupMask() throws IOException {
  INodeFile inodeFile=createINodeFile(inodeRoot,"file1","bruce","execs",(short)0644);
  addAcl(inodeFile,aclEntry(ACCESS,USER,READ_WRITE),aclEntry(ACCESS,GROUP,READ),aclEntry(ACCESS,GROUP,"sales",READ_WRITE),aclEntry(ACCESS,MASK,READ),aclEntry(ACCESS,OTHER,READ));
  assertPermissionGranted(BRUCE,"/file1",READ_WRITE);
  assertPermissionGranted(CLARK,"/file1",READ);
  assertPermissionGranted(DIANA,"/file1",READ);
  assertPermissionDenied(DIANA,"/file1",WRITE);
  assertPermissionDenied(DIANA,"/file1",EXECUTE);
  assertPermissionDenied(DIANA,"/file1",READ_WRITE);
  assertPermissionDenied(DIANA,"/file1",READ_EXECUTE);
  assertPermissionDenied(DIANA,"/file1",WRITE_EXECUTE);
  assertPermissionDenied(DIANA,"/file1",ALL);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclGroup() throws IOException {
  INodeFile inodeFile=createINodeFile(inodeRoot,"file1","bruce","execs",(short)0640);
  addAcl(inodeFile,aclEntry(ACCESS,USER,READ_WRITE),aclEntry(ACCESS,GROUP,READ),aclEntry(ACCESS,MASK,READ),aclEntry(ACCESS,OTHER,NONE));
  assertPermissionGranted(CLARK,"/file1",READ);
  assertPermissionDenied(CLARK,"/file1",WRITE);
  assertPermissionDenied(CLARK,"/file1",EXECUTE);
  assertPermissionDenied(CLARK,"/file1",READ_WRITE);
  assertPermissionDenied(CLARK,"/file1",READ_EXECUTE);
  assertPermissionDenied(CLARK,"/file1",WRITE_EXECUTE);
  assertPermissionDenied(CLARK,"/file1",ALL);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclNamedUserMask() throws IOException {
  INodeFile inodeFile=createINodeFile(inodeRoot,"file1","bruce","execs",(short)0620);
  addAcl(inodeFile,aclEntry(ACCESS,USER,READ_WRITE),aclEntry(ACCESS,USER,"diana",READ),aclEntry(ACCESS,GROUP,READ),aclEntry(ACCESS,MASK,WRITE),aclEntry(ACCESS,OTHER,NONE));
  assertPermissionDenied(DIANA,"/file1",READ);
  assertPermissionDenied(DIANA,"/file1",WRITE);
  assertPermissionDenied(DIANA,"/file1",EXECUTE);
  assertPermissionDenied(DIANA,"/file1",READ_WRITE);
  assertPermissionDenied(DIANA,"/file1",READ_EXECUTE);
  assertPermissionDenied(DIANA,"/file1",WRITE_EXECUTE);
  assertPermissionDenied(DIANA,"/file1",ALL);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclNamedGroupTraverseDeny() throws IOException {
  INodeDirectory inodeDir=createINodeDirectory(inodeRoot,"dir1","bruce","execs",(short)0755);
  INodeFile inodeFile=createINodeFile(inodeDir,"file1","bruce","execs",(short)0644);
  addAcl(inodeDir,aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,GROUP,READ_EXECUTE),aclEntry(ACCESS,GROUP,"sales",NONE),aclEntry(ACCESS,MASK,READ_EXECUTE),aclEntry(ACCESS,OTHER,READ_EXECUTE));
  assertPermissionGranted(BRUCE,"/dir1/file1",READ_WRITE);
  assertPermissionGranted(CLARK,"/dir1/file1",READ);
  assertPermissionDenied(DIANA,"/dir1/file1",READ);
  assertPermissionDenied(DIANA,"/dir1/file1",WRITE);
  assertPermissionDenied(DIANA,"/dir1/file1",EXECUTE);
  assertPermissionDenied(DIANA,"/dir1/file1",READ_WRITE);
  assertPermissionDenied(DIANA,"/dir1/file1",READ_EXECUTE);
  assertPermissionDenied(DIANA,"/dir1/file1",WRITE_EXECUTE);
  assertPermissionDenied(DIANA,"/dir1/file1",ALL);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclOther() throws IOException {
  INodeFile inodeFile=createINodeFile(inodeRoot,"file1","bruce","sales",(short)0774);
  addAcl(inodeFile,aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,USER,"diana",ALL),aclEntry(ACCESS,GROUP,READ_WRITE),aclEntry(ACCESS,MASK,ALL),aclEntry(ACCESS,OTHER,READ));
  assertPermissionGranted(BRUCE,"/file1",ALL);
  assertPermissionGranted(DIANA,"/file1",ALL);
  assertPermissionGranted(CLARK,"/file1",READ);
  assertPermissionDenied(CLARK,"/file1",WRITE);
  assertPermissionDenied(CLARK,"/file1",EXECUTE);
  assertPermissionDenied(CLARK,"/file1",READ_WRITE);
  assertPermissionDenied(CLARK,"/file1",READ_EXECUTE);
  assertPermissionDenied(CLARK,"/file1",WRITE_EXECUTE);
  assertPermissionDenied(CLARK,"/file1",ALL);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestFavoredNodesEndToEnd </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=180000) public void testWhenFavoredNodesNotPresent() throws Exception {
  InetSocketAddress arbitraryAddrs[]=new InetSocketAddress[3];
  for (int i=0; i < 3; i++) {
    arbitraryAddrs[i]=getArbitraryLocalHostAddr();
  }
  Path p=new Path("/filename-foo-bar");
  FSDataOutputStream out=dfs.create(p,FsPermission.getDefault(),true,4096,(short)3,4096L,null,arbitraryAddrs);
  out.write(SOME_BYTES);
  out.close();
  getBlockLocations(p);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestFileJournalManager </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * tests that passing an invalid dir to matchEditLogs throws IOException 
 */
@Test(expected=IOException.class) public void testMatchEditLogInvalidDirThrowsIOException() throws IOException {
  File badDir=new File("does not exist");
  FileJournalManager.matchEditLogs(badDir);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestFileLimit </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFileLimitSimulated() throws IOException {
  simulatedStorage=true;
  testFileLimit();
  simulatedStorage=false;
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testMinBlockSizeLimit() throws Exception {
  final long blockSize=4096;
  Configuration conf=new HdfsConfiguration();
  conf.setLong(DFSConfigKeys.DFS_NAMENODE_MIN_BLOCK_SIZE_KEY,blockSize);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).build();
  FileSystem fs=cluster.getFileSystem();
  try {
    fs.create(new Path("/testmblock1"),true,4096,(short)3,blockSize);
    try {
      fs.create(new Path("/testmblock2"),true,4096,(short)3,blockSize - 1);
      assert false : "Expected IOException after creating a file with small" + " blocks ";
    }
 catch (    IOException e) {
      GenericTestUtils.assertExceptionContains("Specified block size is less",e);
    }
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testMaxBlocksPerFileLimit() throws Exception {
  Configuration conf=new HdfsConfiguration();
  final long blockSize=4096;
  final long numBlocks=2;
  conf.setLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,blockSize);
  conf.setLong(DFSConfigKeys.DFS_NAMENODE_MAX_BLOCKS_PER_FILE_KEY,numBlocks);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).build();
  FileSystem fs=cluster.getFileSystem();
  HdfsDataOutputStream fout=(HdfsDataOutputStream)fs.create(new Path("/testmaxfilelimit"));
  try {
    fout.write(new byte[(int)blockSize * (int)numBlocks]);
    fout.hflush();
    try {
      fout.write(new byte[1]);
      fout.hflush();
      assert false : "Expected IOException after writing too many blocks";
    }
 catch (    IOException e) {
      GenericTestUtils.assertExceptionContains("File has reached the limit" + " on maximum number of",e);
    }
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestFsLimits </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMaxDirItemsLimits() throws Exception {
  conf.setInt(DFSConfigKeys.DFS_NAMENODE_MAX_DIRECTORY_ITEMS_KEY,0);
  try {
    mkdirs("1",null);
  }
 catch (  IllegalArgumentException e) {
    GenericTestUtils.assertExceptionContains("Cannot set dfs",e);
  }
  conf.setInt(DFSConfigKeys.DFS_NAMENODE_MAX_DIRECTORY_ITEMS_KEY,64 * 100 * 1024);
  try {
    mkdirs("1",null);
  }
 catch (  IllegalArgumentException e) {
    GenericTestUtils.assertExceptionContains("Cannot set dfs",e);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMaxDirItemsRename() throws Exception {
  conf.setInt(DFSConfigKeys.DFS_NAMENODE_MAX_DIRECTORY_ITEMS_KEY,2);
  mkdirs("/1",null);
  mkdirs("/2",null);
  mkdirs("/2/A",null);
  rename("/2/A","/A",MaxDirectoryItemsExceededException.class);
  rename("/2/A","/1/A",null);
  mkdirs("/2/B",null);
  deprecatedRename("/2/B","/B",MaxDirectoryItemsExceededException.class);
  deprecatedRename("/2/B","/1/B",null);
  rename("/1","/3",null);
  deprecatedRename("/2","/4",null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMaxComponentLength() throws Exception {
  conf.setInt(DFSConfigKeys.DFS_NAMENODE_MAX_COMPONENT_LENGTH_KEY,2);
  mkdirs("/1",null);
  mkdirs("/22",null);
  mkdirs("/333",PathComponentTooLongException.class);
  mkdirs("/4444",PathComponentTooLongException.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNoLimits() throws Exception {
  mkdirs("/1",null);
  mkdirs("/22",null);
  mkdirs("/333",null);
  mkdirs("/4444",null);
  mkdirs("/55555",null);
  mkdirs("/1/" + HdfsConstants.DOT_SNAPSHOT_DIR,HadoopIllegalArgumentException.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMaxDirItems() throws Exception {
  conf.setInt(DFSConfigKeys.DFS_NAMENODE_MAX_DIRECTORY_ITEMS_KEY,2);
  mkdirs("/1",null);
  mkdirs("/22",null);
  mkdirs("/333",MaxDirectoryItemsExceededException.class);
  mkdirs("/4444",MaxDirectoryItemsExceededException.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDuringEditLogs() throws Exception {
  conf.setInt(DFSConfigKeys.DFS_NAMENODE_MAX_COMPONENT_LENGTH_KEY,3);
  conf.setInt(DFSConfigKeys.DFS_NAMENODE_MAX_DIRECTORY_ITEMS_KEY,2);
  fsIsReady=false;
  mkdirs("/1",null);
  mkdirs("/22",null);
  mkdirs("/333",null);
  mkdirs("/4444",null);
  mkdirs("/1/" + HdfsConstants.DOT_SNAPSHOT_DIR,HadoopIllegalArgumentException.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMaxComponentsAndMaxDirItems() throws Exception {
  conf.setInt(DFSConfigKeys.DFS_NAMENODE_MAX_COMPONENT_LENGTH_KEY,3);
  conf.setInt(DFSConfigKeys.DFS_NAMENODE_MAX_DIRECTORY_ITEMS_KEY,2);
  mkdirs("/1",null);
  mkdirs("/22",null);
  mkdirs("/333",MaxDirectoryItemsExceededException.class);
  mkdirs("/4444",PathComponentTooLongException.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMaxComponentLengthRename() throws Exception {
  conf.setInt(DFSConfigKeys.DFS_NAMENODE_MAX_COMPONENT_LENGTH_KEY,2);
  mkdirs("/5",null);
  rename("/5","/555",PathComponentTooLongException.class);
  rename("/5","/55",null);
  mkdirs("/6",null);
  deprecatedRename("/6","/666",PathComponentTooLongException.class);
  deprecatedRename("/6","/66",null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestGenericJournalConf </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that an exception is thrown if a journal class doesn't exist
 * in the configuration 
 */
@Test(expected=IllegalArgumentException.class) public void testNotConfigured() throws Exception {
  MiniDFSCluster cluster=null;
  Configuration conf=new Configuration();
  conf.set(DFSConfigKeys.DFS_NAMENODE_EDITS_DIR_KEY,"dummy://test");
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(0).build();
    cluster.waitActive();
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that an exception is thrown if a journal class doesn't
 * exist in the classloader.
 */
@Test(expected=IllegalArgumentException.class) public void testClassDoesntExist() throws Exception {
  MiniDFSCluster cluster=null;
  Configuration conf=new Configuration();
  conf.set(DFSConfigKeys.DFS_NAMENODE_EDITS_PLUGIN_PREFIX + ".dummy","org.apache.hadoop.nonexistent");
  conf.set(DFSConfigKeys.DFS_NAMENODE_EDITS_DIR_KEY,"dummy://test");
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(0).build();
    cluster.waitActive();
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestINodeFile </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * IllegalArgumentException is expected for setting below lower bound
 * for PreferredBlockSize.
 * @throws IllegalArgumentException as the result
 */
@Test(expected=IllegalArgumentException.class) public void testPreferredBlockSizeBelowLowerBound() throws IllegalArgumentException {
  replication=3;
  preferredBlockSize=-1;
  createINodeFile(replication,preferredBlockSize);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test for {@link FSDirectory#getPathComponents(INode)}
 */
@Test public void testGetPathFromInode() throws QuotaExceededException {
  String path="/a/b/c";
  INode inode=createTreeOfInodes(path);
  byte[][] expected=INode.getPathComponents(path);
  byte[][] actual=FSDirectory.getPathComponents(inode);
  DFSTestUtil.checkComponentsEquals(expected,actual);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * IllegalArgumentException is expected for setting above upper bound
 * for PreferredBlockSize.
 * @throws IllegalArgumentException as the result
 */
@Test(expected=IllegalArgumentException.class) public void testPreferredBlockSizeAboveUpperBound() throws IllegalArgumentException {
  replication=3;
  preferredBlockSize=BLKSIZE_MAXVALUE + 1;
  createINodeFile(replication,preferredBlockSize);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * IllegalArgumentException is expected for setting below lower bound
 * for Replication.
 * @throws IllegalArgumentException as the result
 */
@Test(expected=IllegalArgumentException.class) public void testReplicationBelowLowerBound() throws IllegalArgumentException {
  replication=-1;
  preferredBlockSize=128 * 1024 * 1024;
  createINodeFile(replication,preferredBlockSize);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestNNStorageRetentionManager </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test the "easy case" where we have more images in the
 * directory than we need to keep. Should purge the
 * old ones.
 */
@Test public void testPurgeEasyCase() throws IOException {
  TestCaseDescription tc=new TestCaseDescription();
  tc.addRoot("/foo1",NameNodeDirType.IMAGE_AND_EDITS);
  tc.addImage("/foo1/current/" + getImageFileName(100),true);
  tc.addImage("/foo1/current/" + getImageFileName(200),true);
  tc.addImage("/foo1/current/" + getImageFileName(300),false);
  tc.addImage("/foo1/current/" + getImageFileName(400),false);
  tc.addLog("/foo1/current/" + getFinalizedEditsFileName(101,200),true);
  tc.addLog("/foo1/current/" + getFinalizedEditsFileName(201,300),true);
  tc.addLog("/foo1/current/" + getFinalizedEditsFileName(301,400),false);
  tc.addLog("/foo1/current/" + getInProgressEditsFileName(401),false);
  tc.addLog("/foo1/current/VERSION",false);
  runTest(tc);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Check for edge case with no logs or images present at all.
 */
@Test public void testEmptyDir() throws IOException {
  TestCaseDescription tc=new TestCaseDescription();
  tc.addRoot("/foo1",NameNodeDirType.IMAGE_AND_EDITS);
  runTest(tc);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that old in-progress logs are properly purged
 */
@Test public void testOldInProgress() throws IOException {
  TestCaseDescription tc=new TestCaseDescription();
  tc.addRoot("/foo1",NameNodeDirType.IMAGE_AND_EDITS);
  tc.addImage("/foo1/current/" + getImageFileName(100),true);
  tc.addImage("/foo1/current/" + getImageFileName(200),true);
  tc.addImage("/foo1/current/" + getImageFileName(300),false);
  tc.addImage("/foo1/current/" + getImageFileName(400),false);
  tc.addLog("/foo1/current/" + getInProgressEditsFileName(101),true);
  runTest(tc);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Same as above, but across multiple directories
 */
@Test public void testPurgeMultipleDirs() throws IOException {
  TestCaseDescription tc=new TestCaseDescription();
  tc.addRoot("/foo1",NameNodeDirType.IMAGE_AND_EDITS);
  tc.addRoot("/foo2",NameNodeDirType.IMAGE_AND_EDITS);
  tc.addImage("/foo1/current/" + getImageFileName(100),true);
  tc.addImage("/foo1/current/" + getImageFileName(200),true);
  tc.addImage("/foo2/current/" + getImageFileName(200),true);
  tc.addImage("/foo1/current/" + getImageFileName(300),false);
  tc.addImage("/foo1/current/" + getImageFileName(400),false);
  tc.addLog("/foo1/current/" + getFinalizedEditsFileName(101,200),true);
  tc.addLog("/foo1/current/" + getFinalizedEditsFileName(201,300),true);
  tc.addLog("/foo2/current/" + getFinalizedEditsFileName(201,300),true);
  tc.addLog("/foo1/current/" + getFinalizedEditsFileName(301,400),false);
  tc.addLog("/foo2/current/" + getFinalizedEditsFileName(301,400),false);
  tc.addLog("/foo1/current/" + getInProgressEditsFileName(401),false);
  runTest(tc);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Check for edge case with no logs present at all.
 */
@Test public void testNoLogs() throws IOException {
  TestCaseDescription tc=new TestCaseDescription();
  tc.addRoot("/foo1",NameNodeDirType.IMAGE_AND_EDITS);
  tc.addImage("/foo1/current/" + getImageFileName(100),true);
  tc.addImage("/foo1/current/" + getImageFileName(200),true);
  tc.addImage("/foo1/current/" + getImageFileName(300),false);
  tc.addImage("/foo1/current/" + getImageFileName(400),false);
  runTest(tc);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRetainExtraLogsLimitedSegments() throws IOException {
  conf.setLong(DFSConfigKeys.DFS_NAMENODE_NUM_EXTRA_EDITS_RETAINED_KEY,150);
  conf.setLong(DFSConfigKeys.DFS_NAMENODE_MAX_EXTRA_EDITS_SEGMENTS_RETAINED_KEY,2);
  TestCaseDescription tc=new TestCaseDescription();
  tc.addRoot("/foo1",NameNodeDirType.IMAGE);
  tc.addRoot("/foo2",NameNodeDirType.EDITS);
  tc.addImage("/foo1/current/" + getImageFileName(100),true);
  tc.addImage("/foo1/current/" + getImageFileName(200),true);
  tc.addImage("/foo1/current/" + getImageFileName(300),false);
  tc.addImage("/foo1/current/" + getImageFileName(400),false);
  tc.addLog("/foo2/current/" + getFinalizedEditsFileName(1,100),true);
  tc.addLog("/foo2/current/" + getFinalizedEditsFileName(101,175),true);
  tc.addLog("/foo2/current/" + getInProgressEditsFileName(176) + ".empty",true);
  tc.addLog("/foo2/current/" + getFinalizedEditsFileName(176,200),true);
  tc.addLog("/foo2/current/" + getFinalizedEditsFileName(201,225),true);
  tc.addLog("/foo2/current/" + getInProgressEditsFileName(226) + ".corrupt",true);
  tc.addLog("/foo2/current/" + getFinalizedEditsFileName(226,240),true);
  tc.addLog("/foo2/current/" + getFinalizedEditsFileName(241,275),false);
  tc.addLog("/foo2/current/" + getFinalizedEditsFileName(276,300),false);
  tc.addLog("/foo2/current/" + getInProgressEditsFileName(301) + ".empty",false);
  tc.addLog("/foo2/current/" + getFinalizedEditsFileName(301,350),false);
  tc.addLog("/foo2/current/" + getInProgressEditsFileName(351) + ".corrupt",false);
  tc.addLog("/foo2/current/" + getFinalizedEditsFileName(351,400),false);
  tc.addLog("/foo2/current/" + getInProgressEditsFileName(401),false);
  runTest(tc);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that if we have fewer fsimages than the configured
 * retention, we don't purge any of them
 */
@Test public void testPurgeLessThanRetention() throws IOException {
  TestCaseDescription tc=new TestCaseDescription();
  tc.addRoot("/foo1",NameNodeDirType.IMAGE_AND_EDITS);
  tc.addImage("/foo1/current/" + getImageFileName(100),false);
  tc.addLog("/foo1/current/" + getFinalizedEditsFileName(101,200),false);
  tc.addLog("/foo1/current/" + getFinalizedEditsFileName(201,300),false);
  tc.addLog("/foo1/current/" + getFinalizedEditsFileName(301,400),false);
  tc.addLog("/foo1/current/" + getInProgressEditsFileName(401),false);
  runTest(tc);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSeparateEditDirs() throws IOException {
  TestCaseDescription tc=new TestCaseDescription();
  tc.addRoot("/foo1",NameNodeDirType.IMAGE);
  tc.addRoot("/foo2",NameNodeDirType.EDITS);
  tc.addImage("/foo1/current/" + getImageFileName(100),true);
  tc.addImage("/foo1/current/" + getImageFileName(200),true);
  tc.addImage("/foo1/current/" + getImageFileName(300),false);
  tc.addImage("/foo1/current/" + getImageFileName(400),false);
  tc.addLog("/foo2/current/" + getFinalizedEditsFileName(101,200),true);
  tc.addLog("/foo2/current/" + getFinalizedEditsFileName(201,300),true);
  tc.addLog("/foo2/current/" + getFinalizedEditsFileName(301,400),false);
  tc.addLog("/foo2/current/" + getInProgressEditsFileName(401),false);
  runTest(tc);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRetainExtraLogs() throws IOException {
  conf.setLong(DFSConfigKeys.DFS_NAMENODE_NUM_EXTRA_EDITS_RETAINED_KEY,50);
  TestCaseDescription tc=new TestCaseDescription();
  tc.addRoot("/foo1",NameNodeDirType.IMAGE);
  tc.addRoot("/foo2",NameNodeDirType.EDITS);
  tc.addImage("/foo1/current/" + getImageFileName(100),true);
  tc.addImage("/foo1/current/" + getImageFileName(200),true);
  tc.addImage("/foo1/current/" + getImageFileName(300),false);
  tc.addImage("/foo1/current/" + getImageFileName(400),false);
  tc.addLog("/foo2/current/" + getFinalizedEditsFileName(101,200),true);
  tc.addLog("/foo2/current/" + getFinalizedEditsFileName(201,300),false);
  tc.addLog("/foo2/current/" + getFinalizedEditsFileName(301,400),false);
  tc.addLog("/foo2/current/" + getInProgressEditsFileName(401),false);
  runTest(tc);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestNNThroughputBenchmark </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This test runs all benchmarks defined in {@link NNThroughputBenchmark}.
 */
@Test public void testNNThroughput() throws Exception {
  Configuration conf=new HdfsConfiguration();
  File nameDir=new File(MiniDFSCluster.getBaseDirectory(),"name");
  conf.set(DFSConfigKeys.DFS_NAMENODE_NAME_DIR_KEY,nameDir.getAbsolutePath());
  FileSystem.setDefaultUri(conf,"hdfs://localhost:" + 0);
  conf.set(DFSConfigKeys.DFS_NAMENODE_HTTP_ADDRESS_KEY,"0.0.0.0:0");
  DFSTestUtil.formatNameNode(conf);
  String[] args=new String[]{"-op","all"};
  NNThroughputBenchmark.runBenchmark(conf,Arrays.asList(args));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestNameNodeRecovery </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test an empty edit log with extra-long padding 
 */
@Test(timeout=180000) public void testEmptyExtraPaddedLog() throws IOException {
  runEditLogTest(new EltsTestEmptyLog(3 * EditLogFileOutputStream.MIN_PREALLOCATION_LENGTH));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test an empty edit log with padding 
 */
@Test(timeout=180000) public void testEmptyPaddedLog() throws IOException {
  runEditLogTest(new EltsTestEmptyLog(EditLogFileOutputStream.MIN_PREALLOCATION_LENGTH));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that we can successfully recover from a situation where the last
 * entry in the edit log has been truncated. 
 */
@Test(timeout=180000) public void testRecoverTruncatedEditLog() throws IOException {
  testNameNodeRecoveryImpl(new TruncatingCorruptor(),true);
  testNameNodeRecoveryImpl(new TruncatingCorruptor(),false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=180000) public void testOpcodesAfterPadding() throws IOException {
  runEditLogTest(new EltsTestOpcodesAfterPadding(EditLogFileOutputStream.MIN_PREALLOCATION_LENGTH));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test an empty edit log 
 */
@Test(timeout=180000) public void testEmptyLog() throws IOException {
  runEditLogTest(new EltsTestEmptyLog(0));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that we can successfully recover from a situation where there is
 * garbage in the middle of the edit log file output stream. 
 */
@Test(timeout=180000) public void testSkipEdit() throws IOException {
  runEditLogTest(new EltsTestGarbageInEditLog());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that don't need to recover from a situation where the last
 * entry in the edit log has been padded with 0. 
 */
@Test(timeout=180000) public void testRecoverZeroPaddedEditLog() throws IOException {
  testNameNodeRecoveryImpl(new SafePaddingCorruptor((byte)0),true);
  testNameNodeRecoveryImpl(new SafePaddingCorruptor((byte)0),false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that don't need to recover from a situation where the last
 * entry in the edit log has been padded with 0xff bytes. 
 */
@Test(timeout=180000) public void testRecoverNegativeOnePaddedEditLog() throws IOException {
  testNameNodeRecoveryImpl(new SafePaddingCorruptor((byte)-1),true);
  testNameNodeRecoveryImpl(new SafePaddingCorruptor((byte)-1),false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test an empty edit log with extra-long padding 
 */
@Test(timeout=180000) public void testNonDefaultMaxOpSize() throws IOException {
  runEditLogTest(new EltsTestNonDefaultMaxOpSize());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that we can successfully recover from a situation where the last
 * entry in the edit log has been padded with garbage. 
 */
@Test(timeout=180000) public void testRecoverPaddedEditLog() throws IOException {
  testNameNodeRecoveryImpl(new PaddingCorruptor(),true);
  testNameNodeRecoveryImpl(new PaddingCorruptor(),false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=180000) public void testOpcodesAfterExtraPadding() throws IOException {
  runEditLogTest(new EltsTestOpcodesAfterPadding(3 * EditLogFileOutputStream.MIN_PREALLOCATION_LENGTH));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestNameNodeRetryCacheMetrics </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRetryCacheMetrics() throws IOException {
  checkMetrics(0,0,0);
  trySaveNamespace();
  checkMetrics(2,0,1);
  namesystem.close();
  checkMetrics(2,1,1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestPathComponents </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBytes2ByteArray() throws Exception {
  testString("/");
  testString("/file");
  testString("/directory/");
  testString("//");
  testString("/dir//file");
  testString("/dir/dir1//");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestSaveNamespace </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testRTEWhileSavingSecondImage() throws Exception {
  saveNamespaceWithInjectedFault(Fault.SAVE_SECOND_FSIMAGE_RTE);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testCrashWhenWritingVersionFiles() throws Exception {
  saveNamespaceWithInjectedFault(Fault.WRITE_STORAGE_ALL);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testSaveWhileEditsRolled() throws Exception {
  Configuration conf=getConf();
  NameNode.initMetrics(conf,NamenodeRole.NAMENODE);
  DFSTestUtil.formatNameNode(conf);
  FSNamesystem fsn=FSNamesystem.loadFromDisk(conf);
  try {
    doAnEdit(fsn,1);
    CheckpointSignature sig=fsn.rollEditLog();
    LOG.warn("Checkpoint signature: " + sig);
    doAnEdit(fsn,2);
    fsn.setSafeMode(SafeModeAction.SAFEMODE_ENTER);
    fsn.saveNamespace();
    fsn.close();
    fsn=null;
    fsn=FSNamesystem.loadFromDisk(conf);
    checkEditExists(fsn,1);
    checkEditExists(fsn,2);
  }
  finally {
    if (fsn != null) {
      fsn.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testSaveNamespaceWithDanglingLease() throws Exception {
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(new Configuration()).numDataNodes(1).build();
  cluster.waitActive();
  DistributedFileSystem fs=cluster.getFileSystem();
  try {
    cluster.getNamesystem().leaseManager.addLease("me","/non-existent");
    fs.setSafeMode(SafeModeAction.SAFEMODE_ENTER);
    cluster.getNameNodeRpc().saveNamespace();
    fs.setSafeMode(SafeModeAction.SAFEMODE_LEAVE);
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testCrashWhenWritingVersionFileInOneDir() throws Exception {
  saveNamespaceWithInjectedFault(Fault.WRITE_STORAGE_ONE);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test case where savenamespace fails in all directories
 * and then the NN shuts down. Here we should recover from the
 * failed checkpoint since it only affected ".ckpt" files, not
 * valid image files
 */
@Test(timeout=30000) public void testFailedSaveNamespace() throws Exception {
  doTestFailedSaveNamespace(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test for save namespace should succeed when parent directory renamed with
 * open lease and destination directory exist. 
 * This test is a regression for HDFS-2827
 */
@Test(timeout=30000) public void testSaveNamespaceWithRenamedLease() throws Exception {
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(new Configuration()).numDataNodes(1).build();
  cluster.waitActive();
  DistributedFileSystem fs=cluster.getFileSystem();
  OutputStream out=null;
  try {
    fs.mkdirs(new Path("/test-target"));
    out=fs.create(new Path("/test-source/foo"));
    fs.rename(new Path("/test-source/"),new Path("/test-target/"));
    fs.setSafeMode(SafeModeAction.SAFEMODE_ENTER);
    cluster.getNameNodeRpc().saveNamespace();
    fs.setSafeMode(SafeModeAction.SAFEMODE_LEAVE);
  }
  finally {
    IOUtils.cleanup(LOG,out,fs);
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testIOEWhileSavingSecondImage() throws Exception {
  saveNamespaceWithInjectedFault(Fault.SAVE_SECOND_FSIMAGE_IOE);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test case where saveNamespace fails in all directories, but then
 * the operator restores the directories and calls it again.
 * This should leave the NN in a clean state for next start.
 */
@Test(timeout=30000) public void testFailedSaveNamespaceWithRecovery() throws Exception {
  doTestFailedSaveNamespace(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testCrashInAllImageDirs() throws Exception {
  saveNamespaceWithInjectedFault(Fault.SAVE_ALL_FSIMAGES);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestSecondaryNameNodeUpgrade </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUpgradePreFedSucceeds() throws IOException {
  doIt(ImmutableMap.of("layoutVersion","-19","clusterID","","blockpoolID",""));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUpgradeLayoutVersionSucceeds() throws IOException {
  doIt(ImmutableMap.of("layoutVersion","-39"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestSecurityTokenEditLog </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testEditsForCancelOnTokenExpire() throws IOException, InterruptedException {
  long renewInterval=2000;
  Configuration conf=new Configuration();
  conf.setBoolean(DFSConfigKeys.DFS_NAMENODE_DELEGATION_TOKEN_ALWAYS_USE_KEY,true);
  conf.setLong(DFS_NAMENODE_DELEGATION_TOKEN_RENEW_INTERVAL_KEY,renewInterval);
  conf.setLong(DFS_NAMENODE_DELEGATION_TOKEN_MAX_LIFETIME_KEY,renewInterval * 2);
  Text renewer=new Text(UserGroupInformation.getCurrentUser().getUserName());
  FSImage fsImage=mock(FSImage.class);
  FSEditLog log=mock(FSEditLog.class);
  doReturn(log).when(fsImage).getEditLog();
  FSNamesystem fsn=new FSNamesystem(conf,fsImage);
  DelegationTokenSecretManager dtsm=fsn.getDelegationTokenSecretManager();
  try {
    dtsm.startThreads();
    Token<DelegationTokenIdentifier> token1=fsn.getDelegationToken(renewer);
    Token<DelegationTokenIdentifier> token2=fsn.getDelegationToken(renewer);
    DelegationTokenIdentifier ident1=token1.decodeIdentifier();
    DelegationTokenIdentifier ident2=token2.decodeIdentifier();
    verify(log,times(1)).logGetDelegationToken(eq(ident1),anyLong());
    verify(log,times(1)).logGetDelegationToken(eq(ident2),anyLong());
    Thread.sleep(renewInterval / 2);
    fsn.renewDelegationToken(token2);
    verify(log,times(1)).logRenewDelegationToken(eq(ident2),anyLong());
    dtsm.stopThreads();
    dtsm.startThreads();
    Thread.sleep(250);
    verify(log,times(0)).logCancelDelegationToken(eq(ident1));
    verify(log,times(0)).logCancelDelegationToken(eq(ident2));
    Thread.sleep(renewInterval / 2);
    dtsm.stopThreads();
    dtsm.startThreads();
    Thread.sleep(250);
    verify(log,times(1)).logCancelDelegationToken(eq(ident1));
    verify(log,times(0)).logCancelDelegationToken(eq(ident2));
    Thread.sleep(renewInterval / 2);
    dtsm.stopThreads();
    dtsm.startThreads();
    Thread.sleep(250);
    verify(log,times(1)).logCancelDelegationToken(eq(ident1));
    verify(log,times(1)).logCancelDelegationToken(eq(ident2));
  }
  finally {
    dtsm.stopThreads();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestStartup </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * secnn-6
 * checkpoint for edits and image is the same directory
 * @throws IOException
 */
@Test public void testChkpointStartup2() throws IOException {
  LOG.info("--starting checkpointStartup2 - same directory for checkpoint");
  config.set(DFSConfigKeys.DFS_NAMENODE_NAME_DIR_KEY,fileAsURI(new File(hdfsDir,"name")).toString());
  config.set(DFSConfigKeys.DFS_NAMENODE_EDITS_DIR_KEY,fileAsURI(new File(hdfsDir,"edits")).toString());
  config.set(DFSConfigKeys.DFS_NAMENODE_CHECKPOINT_EDITS_DIR_KEY,fileAsURI(new File(hdfsDir,"chkpt")).toString());
  config.set(DFSConfigKeys.DFS_NAMENODE_CHECKPOINT_DIR_KEY,fileAsURI(new File(hdfsDir,"chkpt")).toString());
  createCheckPoint(1);
  corruptNameNodeFiles();
  checkNameNodeFiles();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * seccn-8
 * checkpoint for edits and image are different directories 
 * @throws IOException
 */
@Test public void testChkpointStartup1() throws IOException {
  LOG.info("--starting testStartup Recovery");
  config.set(DFSConfigKeys.DFS_NAMENODE_NAME_DIR_KEY,fileAsURI(new File(hdfsDir,"name")).toString());
  config.set(DFSConfigKeys.DFS_NAMENODE_EDITS_DIR_KEY,fileAsURI(new File(hdfsDir,"edits")).toString());
  config.set(DFSConfigKeys.DFS_NAMENODE_CHECKPOINT_EDITS_DIR_KEY,fileAsURI(new File(hdfsDir,"chkpt_edits")).toString());
  config.set(DFSConfigKeys.DFS_NAMENODE_CHECKPOINT_DIR_KEY,fileAsURI(new File(hdfsDir,"chkpt")).toString());
  createCheckPoint(1);
  corruptNameNodeFiles();
  checkNameNodeFiles();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testImageChecksum() throws Exception {
  LOG.info("Test uncompressed image checksum");
  testImageChecksum(false);
  LOG.info("Test compressed image checksum");
  testImageChecksum(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testCorruptImageFallback() throws IOException {
  createCheckPoint(2);
  corruptFSImageMD5(false);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(config).format(false).manageDataDfsDirs(false).manageNameDfsDirs(false).build();
  try {
    cluster.waitActive();
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestValidateConfigurationSettings </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests setting the rpc port to a different as the web port that an 
 * exception is NOT thrown 
 */
@Test public void testThatDifferentRPCandHttpPortsAreOK() throws IOException {
  Configuration conf=new HdfsConfiguration();
  File nameDir=new File(MiniDFSCluster.getBaseDirectory(),"name");
  conf.set(DFSConfigKeys.DFS_NAMENODE_NAME_DIR_KEY,nameDir.getAbsolutePath());
  Random rand=new Random();
  for (int i=0; i < 5; ++i) {
    final int port1=30000 + rand.nextInt(10000);
    final int port2=port1 + 1 + rand.nextInt(10000);
    FileSystem.setDefaultUri(conf,"hdfs://localhost:" + port1);
    conf.set(DFSConfigKeys.DFS_NAMENODE_HTTP_ADDRESS_KEY,"127.0.0.1:" + port2);
    DFSTestUtil.formatNameNode(conf);
    NameNode nameNode=null;
    try {
      nameNode=new NameNode(conf);
      break;
    }
 catch (    BindException be) {
      continue;
    }
 finally {
      if (nameNode != null) {
        nameNode.stop();
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * HDFS-3013: NameNode format command doesn't pick up
 * dfs.namenode.name.dir.NameServiceId configuration.
 */
@Test public void testGenericKeysForNameNodeFormat() throws IOException {
  Configuration conf=new HdfsConfiguration();
  conf.set(DFSConfigKeys.DFS_NAMENODE_RPC_ADDRESS_KEY,"127.0.0.1:0");
  conf.set(DFSConfigKeys.DFS_NAMENODE_HTTP_ADDRESS_KEY,"127.0.0.1:0");
  conf.set(DFSConfigKeys.DFS_NAMESERVICES,"ns1");
  File dir=new File(MiniDFSCluster.getBaseDirectory(),"testGenericKeysForNameNodeFormat");
  if (dir.exists()) {
    FileUtil.fullyDelete(dir);
  }
  conf.set(DFSConfigKeys.DFS_NAMENODE_NAME_DIR_KEY + ".ns1",dir.getAbsolutePath());
  DFSTestUtil.formatNameNode(conf);
  GenericTestUtils.assertExists(dir);
  NameNode nameNode=new NameNode(conf);
  nameNode.stop();
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests setting the rpc port to the same as the web port to test that 
 * an exception
 * is thrown when trying to re-use the same port
 */
@Test(expected=BindException.class) public void testThatMatchingRPCandHttpPortsThrowException() throws IOException {
  NameNode nameNode=null;
  try {
    Configuration conf=new HdfsConfiguration();
    File nameDir=new File(MiniDFSCluster.getBaseDirectory(),"name");
    conf.set(DFSConfigKeys.DFS_NAMENODE_NAME_DIR_KEY,nameDir.getAbsolutePath());
    Random rand=new Random();
    final int port=30000 + rand.nextInt(30000);
    FileSystem.setDefaultUri(conf,"hdfs://localhost:" + port);
    conf.set(DFSConfigKeys.DFS_NAMENODE_HTTP_ADDRESS_KEY,"127.0.0.1:" + port);
    DFSTestUtil.formatNameNode(conf);
    nameNode=new NameNode(conf);
  }
  finally {
    if (nameNode != null) {
      nameNode.stop();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.TestXAttrConfigFlag </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEditLog() throws Exception {
  initCluster(true,true);
  fs.mkdirs(PATH);
  fs.setXAttr(PATH,"user.foo",null);
  restart(false,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveXAttr() throws Exception {
  initCluster(true,false);
  fs.mkdirs(PATH);
  expectException();
  fs.removeXAttr(PATH,"user.foo");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetXAttrs() throws Exception {
  initCluster(true,false);
  fs.mkdirs(PATH);
  expectException();
  fs.getXAttrs(PATH);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetXAttr() throws Exception {
  initCluster(true,false);
  fs.mkdirs(PATH);
  expectException();
  fs.setXAttr(PATH,"user.foo",null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFsImage() throws Exception {
  initCluster(true,true);
  fs.mkdirs(PATH);
  fs.setXAttr(PATH,"user.foo",null);
  restart(true,true);
  restart(false,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.ha.TestDFSZKFailoverController </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testManualFailover() throws Exception {
  thr2.zkfc.getLocalTarget().getZKFCProxy(conf,15000).gracefulFailover();
  waitForHAState(0,HAServiceState.STANDBY);
  waitForHAState(1,HAServiceState.ACTIVE);
  thr1.zkfc.getLocalTarget().getZKFCProxy(conf,15000).gracefulFailover();
  waitForHAState(0,HAServiceState.ACTIVE);
  waitForHAState(1,HAServiceState.STANDBY);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.ha.TestDNFencingWithReplication </h4><pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFencingStress() throws Exception {
  HAStressTestHarness harness=new HAStressTestHarness();
  harness.conf.setInt(DFSConfigKeys.DFS_BLOCKREPORT_INTERVAL_MSEC_KEY,1000);
  final MiniDFSCluster cluster=harness.startCluster();
  try {
    cluster.waitActive();
    cluster.transitionToActive(0);
    FileSystem fs=harness.getFailoverFs();
    TestContext togglers=new TestContext();
    for (int i=0; i < NUM_THREADS; i++) {
      Path p=new Path("/test-" + i);
      DFSTestUtil.createFile(fs,p,BLOCK_SIZE * 10,(short)3,(long)i);
      togglers.addThread(new ReplicationToggler(togglers,fs,p));
    }
    harness.addReplicationTriggerThread(500);
    harness.addFailoverThread(5000);
    harness.startThreads();
    togglers.startThreads();
    togglers.waitFor(RUNTIME);
    togglers.stop();
    harness.stopThreads();
    for (int i=0; i < NUM_THREADS; i++) {
      Path p=new Path("/test-" + i);
      DFSTestUtil.readFile(fs,p);
    }
  }
  finally {
    System.err.println("===========================\n\n\n\n");
    harness.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.ha.TestDelegationTokensWithHA </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDelegationTokenWithDoAs() throws Exception {
  final Token<DelegationTokenIdentifier> token=getDelegationToken(fs,"JobTracker");
  final UserGroupInformation longUgi=UserGroupInformation.createRemoteUser("JobTracker/foo.com@FOO.COM");
  final UserGroupInformation shortUgi=UserGroupInformation.createRemoteUser("JobTracker");
  longUgi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      token.renew(conf);
      return null;
    }
  }
);
  shortUgi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      token.renew(conf);
      return null;
    }
  }
);
  longUgi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      token.cancel(conf);
      ;
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.ha.TestEditLogTailer </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNN0TriggersLogRolls() throws Exception {
  testStandbyTriggersLogRolls(0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNN1TriggersLogRolls() throws Exception {
  testStandbyTriggersLogRolls(1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.ha.TestEditLogsDuringFailover </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverFinalizesAndReadsInProgressWithPartialTxAtEnd() throws Exception {
  testFailoverFinalizesAndReadsInProgress(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverFinalizesAndReadsInProgressSimple() throws Exception {
  testFailoverFinalizesAndReadsInProgress(false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.ha.TestFailoverWithBlockTokensEnabled </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void TestFailoverAfterAccessKeyUpdate() throws IOException, URISyntaxException, InterruptedException {
  lowerKeyUpdateIntervalAndClearKeys(cluster);
  Thread.sleep(10 * 1000);
  writeUsingBothNameNodes();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverAfterRegistration() throws IOException, URISyntaxException {
  writeUsingBothNameNodes();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.ha.TestHAFsck </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that fsck still works with HA enabled.
 */
@Test public void testHaFsck() throws Exception {
  Configuration conf=new Configuration();
  MiniDFSNNTopology topology=new MiniDFSNNTopology().addNameservice(new MiniDFSNNTopology.NSConf("ha-nn-uri-0").addNN(new MiniDFSNNTopology.NNConf("nn1").setHttpPort(10051)).addNN(new MiniDFSNNTopology.NNConf("nn2").setHttpPort(10052)));
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).nnTopology(topology).numDataNodes(0).build();
  FileSystem fs=null;
  try {
    cluster.waitActive();
    cluster.transitionToActive(0);
    HATestUtil.setFailoverConfigurations(cluster,conf,"ha-nn-uri-0",0);
    fs=HATestUtil.configureFailoverFs(cluster,conf);
    fs.mkdirs(new Path("/test1"));
    fs.mkdirs(new Path("/test2"));
    runFsck(conf);
    cluster.transitionToStandby(0);
    cluster.transitionToActive(1);
    runFsck(conf);
  }
  finally {
    if (fs != null) {
      fs.close();
    }
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.ha.TestHASafeMode </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Regression test for HDFS-2753. In this bug, the following sequence was
 * observed:
 * - Some blocks are written to DNs while the SBN was down. This causes
 * the blockReceived messages to get queued in the BPServiceActor on the
 * DN.
 * - When the SBN returns, the DN re-registers with the SBN, and then
 * flushes its blockReceived queue to the SBN before it sends its
 * first block report. This caused the first block report to be
 * incorrect ignored.
 * - The SBN would become stuck in safemode.
 */
@Test public void testBlocksAddedWhileStandbyIsDown() throws Exception {
  DFSTestUtil.createFile(fs,new Path("/test"),3 * BLOCK_SIZE,(short)3,1L);
  banner("Stopping standby");
  cluster.shutdownNameNode(1);
  DFSTestUtil.createFile(fs,new Path("/test2"),3 * BLOCK_SIZE,(short)3,1L);
  banner("Rolling edit log so standby gets all edits on restart");
  nn0.getRpcServer().rollEditLog();
  restartStandby();
  assertSafeMode(nn1,6,6,3,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Set up a namesystem with several edits, both deletions and
 * additions, and failover to a new NN while that NN is in
 * safemode. Ensure that it will exit safemode.
 */
@Test public void testComplexFailoverIntoSafemode() throws Exception {
  banner("Starting with NN0 active and NN1 standby, creating some blocks");
  DFSTestUtil.createFile(fs,new Path("/test"),3 * BLOCK_SIZE,(short)3,1L);
  nn0.getRpcServer().rollEditLog();
  banner("Creating some blocks that won't be in the edit log");
  DFSTestUtil.createFile(fs,new Path("/test2"),5 * BLOCK_SIZE,(short)3,1L);
  banner("Deleting the original blocks");
  fs.delete(new Path("/test"),true);
  banner("Restarting standby");
  restartStandby();
  assertSafeMode(nn1,3,3,3,0);
  banner("Initiating a failover into NN1 in safemode");
  NameNodeAdapter.abortEditLogs(nn0);
  cluster.transitionToActive(1);
  assertSafeMode(nn1,5,5,3,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Similar to {@link #testBlocksRemovedBeforeStandbyRestart()} except that
 * the blocks are removed after the SBN has restarted. So, the
 * blocks were present in the original block reports at startup
 * but are deleted separately later by deletion reports.
 */
@Test public void testBlocksRemovedWhileInSafeMode() throws Exception {
  banner("Starting with NN0 active and NN1 standby, creating some blocks");
  DFSTestUtil.createFile(fs,new Path("/test"),10 * BLOCK_SIZE,(short)3,1L);
  nn0.getRpcServer().rollEditLog();
  banner("Restarting standby");
  restartStandby();
  assertSafeMode(nn1,10,10,3,0);
  banner("Removing the blocks without rolling the edit log");
  fs.delete(new Path("/test"),true);
  BlockManagerTestUtil.computeAllPendingWork(nn0.getNamesystem().getBlockManager());
  banner("Triggering deletions on DNs and Deletion Reports");
  cluster.triggerHeartbeats();
  HATestUtil.waitForDNDeletions(cluster);
  cluster.triggerDeletionReports();
  assertSafeMode(nn1,10,10,3,0);
  banner("Waiting for standby to catch up to active namespace");
  HATestUtil.waitForStandbyToCatchUp(nn0,nn1);
  assertSafeMode(nn1,0,0,3,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test for the following case proposed by ATM:
 * 1. Both NNs are up, one is active. There are 100 blocks. Both are
 * out of safemode.
 * 2. 10 block deletions get processed by NN1. NN2 enqueues these DN messages
 * until it next reads from a checkpointed edits file.
 * 3. NN2 gets restarted. Its queues are lost.
 * 4. NN2 comes up, reads from all the finalized edits files. Concludes there
 * should still be 100 blocks.
 * 5. NN2 receives a block report from all the DNs, which only accounts for
 * 90 blocks. It doesn't leave safemode.
 * 6. NN1 dies or is transitioned to standby.
 * 7. NN2 is transitioned to active. It reads all the edits from NN1. It now
 * knows there should only be 90 blocks, but it's still in safemode.
 * 8. NN2 doesn't ever recheck whether it should leave safemode.
 * This is essentially the inverse of {@link #testBlocksAddedBeforeStandbyRestart()}
 */
@Test public void testBlocksRemovedBeforeStandbyRestart() throws Exception {
  banner("Starting with NN0 active and NN1 standby, creating some blocks");
  DFSTestUtil.createFile(fs,new Path("/test"),5 * BLOCK_SIZE,(short)3,1L);
  nn0.getRpcServer().rollEditLog();
  banner("Removing the blocks without rolling the edit log");
  fs.delete(new Path("/test"),true);
  BlockManagerTestUtil.computeAllPendingWork(nn0.getNamesystem().getBlockManager());
  cluster.triggerHeartbeats();
  banner("Restarting standby");
  restartStandby();
  assertSafeMode(nn1,0,5,3,0);
  banner("Waiting for standby to catch up to active namespace");
  HATestUtil.waitForStandbyToCatchUp(nn0,nn1);
  assertSafeMode(nn1,0,0,3,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSafeBlockTracking2() throws Exception {
  testSafeBlockTracking(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests the case where, while a standby is down, more blocks are
 * added to the namespace, but not rolled. So, when it starts up,
 * it receives notification about the new blocks during
 * the safemode extension period.
 */
@Test public void testBlocksAddedBeforeStandbyRestart() throws Exception {
  banner("Starting with NN0 active and NN1 standby, creating some blocks");
  DFSTestUtil.createFile(fs,new Path("/test"),3 * BLOCK_SIZE,(short)3,1L);
  nn0.getRpcServer().rollEditLog();
  banner("Creating some blocks that won't be in the edit log");
  DFSTestUtil.createFile(fs,new Path("/test2"),5 * BLOCK_SIZE,(short)3,1L);
  banner("Restarting standby");
  restartStandby();
  assertSafeMode(nn1,3,3,3,0);
  banner("Waiting for standby to catch up to active namespace");
  HATestUtil.waitForStandbyToCatchUp(nn0,nn1);
  assertSafeMode(nn1,8,8,3,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Similar to {@link #testBlocksAddedBeforeStandbyRestart()} except that
 * the new blocks are allocated after the SBN has restarted. So, the
 * blocks were not present in the original block reports at startup
 * but are reported separately by blockReceived calls.
 */
@Test public void testBlocksAddedWhileInSafeMode() throws Exception {
  banner("Starting with NN0 active and NN1 standby, creating some blocks");
  DFSTestUtil.createFile(fs,new Path("/test"),3 * BLOCK_SIZE,(short)3,1L);
  nn0.getRpcServer().rollEditLog();
  banner("Restarting standby");
  restartStandby();
  assertSafeMode(nn1,3,3,3,0);
  banner("Creating some blocks while SBN is in safe mode");
  DFSTestUtil.createFile(fs,new Path("/test2"),5 * BLOCK_SIZE,(short)3,1L);
  banner("Waiting for standby to catch up to active namespace");
  HATestUtil.waitForStandbyToCatchUp(nn0,nn1);
  assertSafeMode(nn1,8,8,3,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that the standby node properly tracks the number of total
 * and safe blocks while it is in safe mode. Since safe-mode only
 * counts completed blocks, append needs to decrement the total
 * number of blocks and then re-increment when the file is closed
 * again.
 */
@Test public void testAppendWhileInSafeMode() throws Exception {
  banner("Starting with NN0 active and NN1 standby, creating some blocks");
  DFSTestUtil.createFile(fs,new Path("/test"),4 * BLOCK_SIZE + BLOCK_SIZE / 2,(short)3,1L);
  nn0.getRpcServer().rollEditLog();
  banner("Restarting standby");
  restartStandby();
  assertSafeMode(nn1,5,5,3,0);
  FSDataOutputStream stm=fs.append(new Path("/test"));
  try {
    assertSafeMode(nn1,5,5,3,0);
    HATestUtil.waitForStandbyToCatchUp(nn0,nn1);
    assertSafeMode(nn1,4,4,3,0);
  }
  finally {
    IOUtils.closeStream(stm);
  }
  banner("Removing the blocks without rolling the edit log");
  fs.delete(new Path("/test"),true);
  BlockManagerTestUtil.computeAllPendingWork(nn0.getNamesystem().getBlockManager());
  banner("Triggering deletions on DNs and Deletion Reports");
  cluster.triggerHeartbeats();
  HATestUtil.waitForDNDeletions(cluster);
  cluster.triggerDeletionReports();
  assertSafeMode(nn1,4,4,3,0);
  banner("Waiting for standby to catch up to active namespace");
  HATestUtil.waitForStandbyToCatchUp(nn0,nn1);
  assertSafeMode(nn1,0,0,3,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Regression test for a bug experienced while developing
 * HDFS-2742. The scenario here is:
 * - image contains some blocks
 * - edits log contains at least one block addition, followed
 * by deletion of more blocks than were added.
 * - When node starts up, some incorrect accounting of block
 * totals caused an assertion failure.
 */
@Test public void testBlocksDeletedInEditLog() throws Exception {
  banner("Starting with NN0 active and NN1 standby, creating some blocks");
  DFSTestUtil.createFile(fs,new Path("/test"),4 * BLOCK_SIZE,(short)3,1L);
  NameNodeAdapter.enterSafeMode(nn0,false);
  NameNodeAdapter.saveNamespace(nn0);
  NameNodeAdapter.leaveSafeMode(nn0);
  DFSTestUtil.createFile(fs,new Path("/test2"),2 * BLOCK_SIZE,(short)3,1L);
  fs.delete(new Path("/test"),true);
  restartActive();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSafeBlockTracking() throws Exception {
  testSafeBlockTracking(false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.ha.TestHAStateTransitions </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests manual failover back and forth between two NameNodes.
 */
@Test public void testManualFailoverAndFailback() throws Exception {
  Configuration conf=new Configuration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).nnTopology(MiniDFSNNTopology.simpleHATopology()).numDataNodes(1).build();
  try {
    cluster.waitActive();
    testManualFailoverFailback(cluster,conf,0);
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverWithEmptyInProgressEditLogWithHeader() throws Exception {
  testFailoverAfterCrashDuringLogRoll(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailoverWithEmptyInProgressEditLog() throws Exception {
  testFailoverAfterCrashDuringLogRoll(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests manual failover back and forth between two NameNodes
 * for federation cluster with two namespaces.
 */
@Test public void testManualFailoverFailbackFederationHA() throws Exception {
  Configuration conf=new Configuration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).nnTopology(MiniDFSNNTopology.simpleHAFederatedTopology(2)).numDataNodes(1).build();
  try {
    cluster.waitActive();
    testManualFailoverFailback(cluster,conf,0);
    testManualFailoverFailback(cluster,conf,1);
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that transitioning a service to the state that it is already
 * in is a nop, specifically, an exception is not thrown.
 */
@Test public void testTransitionToCurrentStateIsANop() throws Exception {
  Configuration conf=new Configuration();
  conf.setLong(DFSConfigKeys.DFS_NAMENODE_PATH_BASED_CACHE_REFRESH_INTERVAL_MS,1L);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).nnTopology(MiniDFSNNTopology.simpleHATopology()).numDataNodes(1).build();
  LinkedList<Thread> crmThreads=new LinkedList<Thread>();
  try {
    cluster.waitActive();
    addCrmThreads(cluster,crmThreads);
    cluster.transitionToActive(0);
    addCrmThreads(cluster,crmThreads);
    cluster.transitionToActive(0);
    addCrmThreads(cluster,crmThreads);
    cluster.transitionToStandby(0);
    addCrmThreads(cluster,crmThreads);
    cluster.transitionToStandby(0);
    addCrmThreads(cluster,crmThreads);
  }
  finally {
    cluster.shutdown();
  }
  for (  Thread thread : crmThreads) {
    Uninterruptibles.joinUninterruptibly(thread);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Regression test for HDFS-2693: when doing state transitions, we need to
 * lock the FSNamesystem so that we don't end up doing any writes while it's
 * "in between" states.
 * This test case starts up several client threads which do mutation operations
 * while flipping a NN back and forth from active to standby.
 */
@Test(timeout=120000) public void testTransitionSynchronization() throws Exception {
  Configuration conf=new Configuration();
  final MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).nnTopology(MiniDFSNNTopology.simpleHATopology()).numDataNodes(0).build();
  try {
    cluster.waitActive();
    ReentrantReadWriteLock spyLock=NameNodeAdapter.spyOnFsLock(cluster.getNameNode(0).getNamesystem());
    Mockito.doAnswer(new GenericTestUtils.SleepAnswer(50)).when(spyLock).writeLock();
    final FileSystem fs=HATestUtil.configureFailoverFs(cluster,conf);
    TestContext ctx=new TestContext();
    for (int i=0; i < 50; i++) {
      final int finalI=i;
      ctx.addThread(new RepeatingTestThread(ctx){
        @Override public void doAnAction() throws Exception {
          Path p=new Path("/test-" + finalI);
          fs.mkdirs(p);
          fs.delete(p,true);
        }
      }
);
    }
    ctx.addThread(new RepeatingTestThread(ctx){
      @Override public void doAnAction() throws Exception {
        cluster.transitionToStandby(0);
        Thread.sleep(50);
        cluster.transitionToActive(0);
      }
    }
);
    ctx.startThreads();
    ctx.waitFor(20000);
    ctx.stop();
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.ha.TestHarFileSystemWithHA </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that the HarFileSystem works with underlying HDFS URIs that have no
 * port specified, as is often the case with an HA setup.
 */
@Test public void testHarUriWithHaUriWithNoPort() throws Exception {
  Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=null;
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(1).nnTopology(MiniDFSNNTopology.simpleHATopology()).build();
    cluster.transitionToActive(0);
    HATestUtil.setFailoverConfigurations(cluster,conf);
    createEmptyHarArchive(HATestUtil.configureFailoverFs(cluster,conf),TEST_HAR_PATH);
    URI failoverUri=FileSystem.getDefaultUri(conf);
    Path p=new Path("har://hdfs-" + failoverUri.getAuthority() + TEST_HAR_PATH);
    p.getFileSystem(conf);
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.ha.TestLossyRetryInvocationHandler </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStartNNWithTrashEmptier() throws Exception {
  MiniDFSCluster cluster=null;
  Configuration conf=new HdfsConfiguration();
  conf.setLong("fs.trash.interval",360);
  conf.setInt(DFSConfigKeys.DFS_CLIENT_TEST_DROP_NAMENODE_RESPONSE_NUM_KEY,2);
  try {
    cluster=new MiniDFSCluster.Builder(conf).nnTopology(MiniDFSNNTopology.simpleHATopology()).numDataNodes(0).build();
    cluster.waitActive();
    cluster.transitionToActive(0);
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.ha.TestPipelinesFailover </h4><pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Stress test for pipeline/lease recovery. Starts a number of
 * threads, each of which creates a file and has another client
 * break the lease. While these threads run, failover proceeds
 * back and forth between two namenodes.
 */
@Test(timeout=STRESS_RUNTIME * 3) public void testPipelineRecoveryStress() throws Exception {
  HAStressTestHarness harness=new HAStressTestHarness();
  harness.conf.setBoolean(DFSConfigKeys.DFS_PERMISSIONS_ENABLED_KEY,false);
  harness.conf.setInt(DFSConfigKeys.DFS_CLIENT_FAILOVER_SLEEPTIME_MAX_KEY,1000);
  final MiniDFSCluster cluster=harness.startCluster();
  try {
    cluster.waitActive();
    cluster.transitionToActive(0);
    FileSystem fs=harness.getFailoverFs();
    DistributedFileSystem fsAsOtherUser=createFsAsOtherUser(cluster,harness.conf);
    TestContext testers=new TestContext();
    for (int i=0; i < STRESS_NUM_THREADS; i++) {
      Path p=new Path("/test-" + i);
      testers.addThread(new PipelineTestThread(testers,fs,fsAsOtherUser,p));
    }
    harness.addReplicationTriggerThread(500);
    harness.addFailoverThread(5000);
    harness.startThreads();
    testers.startThreads();
    testers.waitFor(STRESS_RUNTIME);
    testers.stop();
    harness.stopThreads();
  }
  finally {
    System.err.println("===========================\n\n\n\n");
    harness.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests continuing a write pipeline over a failover when a DN fails
 * after the failover - ensures that updating the pipeline succeeds
 * even when the pipeline was constructed on a different NN.
 */
@Test(timeout=30000) public void testWriteOverGracefulFailoverWithDnFail() throws Exception {
  doTestWriteOverFailoverWithDnFail(TestScenario.GRACEFUL_FAILOVER);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testWriteOverCrashFailoverWithDnFail() throws Exception {
  doTestWriteOverFailoverWithDnFail(TestScenario.ORIGINAL_ACTIVE_CRASHED);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testAllocateBlockAfterCrashFailover() throws Exception {
  doWriteOverFailoverTest(TestScenario.ORIGINAL_ACTIVE_CRASHED,MethodToTestIdempotence.ALLOCATE_BLOCK);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests continuing a write pipeline over a failover.
 */
@Test(timeout=30000) public void testWriteOverGracefulFailover() throws Exception {
  doWriteOverFailoverTest(TestScenario.GRACEFUL_FAILOVER,MethodToTestIdempotence.ALLOCATE_BLOCK);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testCompleteFileAfterCrashFailover() throws Exception {
  doWriteOverFailoverTest(TestScenario.ORIGINAL_ACTIVE_CRASHED,MethodToTestIdempotence.COMPLETE_FILE);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.ha.TestRetryCacheWithHA </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Add a list of cache pools, list cache pools,
 * switch active NN, and list cache pools again.
 */
@Test(timeout=60000) public void testListCachePools() throws Exception {
  final int poolCount=7;
  HashSet<String> poolNames=new HashSet<String>(poolCount);
  for (int i=0; i < poolCount; i++) {
    String poolName="testListCachePools-" + i;
    dfs.addCachePool(new CachePoolInfo(poolName));
    poolNames.add(poolName);
  }
  listCachePools(poolNames,0);
  cluster.transitionToStandby(0);
  cluster.transitionToActive(1);
  cluster.waitActive(1);
  listCachePools(poolNames,1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testRename2() throws Exception {
  final DFSClient client=genClientWithDummyHandler();
  AtMostOnceOp op=new Rename2Op(client,"/file1","/file2");
  testClientRetryWithFailover(op);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testAppend() throws Exception {
  final DFSClient client=genClientWithDummyHandler();
  AtMostOnceOp op=new AppendOp(client,"/testfile");
  testClientRetryWithFailover(op);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testCreateSymlink() throws Exception {
  final DFSClient client=genClientWithDummyHandler();
  AtMostOnceOp op=new CreateSymlinkOp(client,"/testfile","/testlink");
  testClientRetryWithFailover(op);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testConcat() throws Exception {
  final DFSClient client=genClientWithDummyHandler();
  AtMostOnceOp op=new ConcatOp(client,new Path("/test/file"),5);
  testClientRetryWithFailover(op);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testCreate() throws Exception {
  final DFSClient client=genClientWithDummyHandler();
  AtMostOnceOp op=new CreateOp(client,"/testfile");
  testClientRetryWithFailover(op);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testSetXAttr() throws Exception {
  DFSClient client=genClientWithDummyHandler();
  AtMostOnceOp op=new SetXAttrOp(client,"/setxattr");
  testClientRetryWithFailover(op);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testUpdatePipeline() throws Exception {
  final DFSClient client=genClientWithDummyHandler();
  AtMostOnceOp op=new UpdatePipelineOp(client,"/testfile");
  testClientRetryWithFailover(op);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testAddCachePool() throws Exception {
  DFSClient client=genClientWithDummyHandler();
  AtMostOnceOp op=new AddCachePoolOp(client,"pool");
  testClientRetryWithFailover(op);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testRemoveCachePool() throws Exception {
  DFSClient client=genClientWithDummyHandler();
  AtMostOnceOp op=new RemoveCachePoolOp(client,"pool");
  testClientRetryWithFailover(op);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testAddCacheDirectiveInfo() throws Exception {
  DFSClient client=genClientWithDummyHandler();
  AtMostOnceOp op=new AddCacheDirectiveInfoOp(client,new CacheDirectiveInfo.Builder().setPool("pool").setPath(new Path("/path")).build());
  testClientRetryWithFailover(op);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testDeleteSnapshot() throws Exception {
  final DFSClient client=genClientWithDummyHandler();
  AtMostOnceOp op=new DeleteSnapshotOp(client,"/test","s1");
  testClientRetryWithFailover(op);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testModifyCachePool() throws Exception {
  DFSClient client=genClientWithDummyHandler();
  AtMostOnceOp op=new ModifyCachePoolOp(client,"pool");
  testClientRetryWithFailover(op);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testModifyCacheDirectiveInfo() throws Exception {
  DFSClient client=genClientWithDummyHandler();
  AtMostOnceOp op=new ModifyCacheDirectiveInfoOp(client,new CacheDirectiveInfo.Builder().setPool("pool").setPath(new Path("/path")).setReplication((short)1).build(),(short)555);
  testClientRetryWithFailover(op);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testDelete() throws Exception {
  final DFSClient client=genClientWithDummyHandler();
  AtMostOnceOp op=new DeleteOp(client,"/testfile");
  testClientRetryWithFailover(op);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testRemoveCacheDescriptor() throws Exception {
  DFSClient client=genClientWithDummyHandler();
  AtMostOnceOp op=new RemoveCacheDirectiveInfoOp(client,"pool","/path");
  testClientRetryWithFailover(op);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testRenameSnapshot() throws Exception {
  final DFSClient client=genClientWithDummyHandler();
  AtMostOnceOp op=new RenameSnapshotOp(client,"/test","s1","s2");
  testClientRetryWithFailover(op);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testRename() throws Exception {
  final DFSClient client=genClientWithDummyHandler();
  AtMostOnceOp op=new RenameOp(client,"/file1","/file2");
  testClientRetryWithFailover(op);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testCreateSnapshot() throws Exception {
  final DFSClient client=genClientWithDummyHandler();
  AtMostOnceOp op=new CreateSnapshotOp(client,"/test","s1");
  testClientRetryWithFailover(op);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Add a list of cache directives, list cache directives,
 * switch active NN, and list cache directives again.
 */
@Test(timeout=60000) public void testListCacheDirectives() throws Exception {
  final int poolCount=7;
  HashSet<String> poolNames=new HashSet<String>(poolCount);
  Path path=new Path("/p");
  for (int i=0; i < poolCount; i++) {
    String poolName="testListCacheDirectives-" + i;
    CacheDirectiveInfo directiveInfo=new CacheDirectiveInfo.Builder().setPool(poolName).setPath(path).build();
    dfs.addCachePool(new CachePoolInfo(poolName));
    dfs.addCacheDirective(directiveInfo,EnumSet.of(CacheFlag.FORCE));
    poolNames.add(poolName);
  }
  listCacheDirectives(poolNames,0);
  cluster.transitionToStandby(0);
  cluster.transitionToActive(1);
  cluster.waitActive(1);
  listCacheDirectives(poolNames,1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testRemoveXAttr() throws Exception {
  DFSClient client=genClientWithDummyHandler();
  AtMostOnceOp op=new RemoveXAttrOp(client,"/removexattr");
  testClientRetryWithFailover(op);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.ha.TestStandbyCheckpoints </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test for the case when the SBN is configured to checkpoint based
 * on a time period, but no transactions are happening on the
 * active. Thus, it would want to save a second checkpoint at the
 * same txid, which is a no-op. This test makes sure this doesn't
 * cause any problem.
 */
@Test public void testCheckpointWhenNoNewTransactionsHappened() throws Exception {
  cluster.getConfiguration(1).setInt(DFSConfigKeys.DFS_NAMENODE_CHECKPOINT_PERIOD_KEY,0);
  cluster.restartNameNode(1);
  nn1=cluster.getNameNode(1);
  FSImage spyImage1=NameNodeAdapter.spyOnFsImage(nn1);
  Thread.sleep(1000);
  Mockito.verify(spyImage1,Mockito.never()).saveNamespace((FSNamesystem)Mockito.anyObject());
  HATestUtil.waitForStandbyToCatchUp(nn0,nn1);
  Thread.sleep(2000);
  Mockito.verify(spyImage1,Mockito.times(1)).saveNamespace((FSNamesystem)Mockito.anyObject(),Mockito.eq(NameNodeFile.IMAGE),(Canceler)Mockito.anyObject());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.ha.TestStandbyIsHot </h4><pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testStandbyIsHot() throws Exception {
  Configuration conf=new Configuration();
  HAUtil.setAllowStandbyReads(conf,true);
  conf.setInt(DFSConfigKeys.DFS_HA_TAILEDITS_PERIOD_KEY,1);
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).nnTopology(MiniDFSNNTopology.simpleHATopology()).numDataNodes(3).build();
  try {
    cluster.waitActive();
    cluster.transitionToActive(0);
    NameNode nn1=cluster.getNameNode(0);
    NameNode nn2=cluster.getNameNode(1);
    FileSystem fs=HATestUtil.configureFailoverFs(cluster,conf);
    Thread.sleep(1000);
    System.err.println("==================================");
    DFSTestUtil.writeFile(fs,TEST_FILE_PATH,TEST_FILE_DATA);
    nn1.getRpcServer().rollEditLog();
    System.err.println("==================================");
    LOG.info("Waiting for block locations to appear on standby node");
    waitForBlockLocations(cluster,nn2,TEST_FILE,3);
    cluster.triggerHeartbeats();
    cluster.triggerBlockReports();
    LOG.info("Changing replication to 1");
    fs.setReplication(TEST_FILE_PATH,(short)1);
    BlockManagerTestUtil.computeAllPendingWork(nn1.getNamesystem().getBlockManager());
    waitForBlockLocations(cluster,nn1,TEST_FILE,1);
    nn1.getRpcServer().rollEditLog();
    LOG.info("Waiting for lowered replication to show up on standby");
    waitForBlockLocations(cluster,nn2,TEST_FILE,1);
    LOG.info("Changing replication to 3");
    fs.setReplication(TEST_FILE_PATH,(short)3);
    BlockManagerTestUtil.computeAllPendingWork(nn1.getNamesystem().getBlockManager());
    nn1.getRpcServer().rollEditLog();
    LOG.info("Waiting for higher replication to show up on standby");
    waitForBlockLocations(cluster,nn2,TEST_FILE,3);
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.metrics.TestNNMetricFilesInGetListingOps </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFilesInGetListingOps() throws Exception {
  createFile("/tmp1/t1",3200,(short)3);
  createFile("/tmp1/t2",3200,(short)3);
  createFile("/tmp2/t1",3200,(short)3);
  createFile("/tmp2/t2",3200,(short)3);
  cluster.getNameNodeRpc().getListing("/tmp1",HdfsFileStatus.EMPTY_NAME,false);
  assertCounter("FilesInGetListingOps",2L,getMetrics(NN_METRICS));
  cluster.getNameNodeRpc().getListing("/tmp2",HdfsFileStatus.EMPTY_NAME,false);
  assertCounter("FilesInGetListingOps",4L,getMetrics(NN_METRICS));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.metrics.TestNameNodeMetrics </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test to ensure metrics reflects missing blocks 
 */
@Test public void testMissingBlock() throws Exception {
  Path file=getTestPath("testMissingBlocks");
  createFile(file,100,(short)1);
  LocatedBlock block=NameNodeAdapter.getBlockLocations(cluster.getNameNode(),file.toString(),0,1).get(0);
  cluster.getNamesystem().writeLock();
  try {
    bm.findAndMarkBlockAsCorrupt(block.getBlock(),block.getLocations()[0],"STORAGE_ID","TEST");
  }
  finally {
    cluster.getNamesystem().writeUnlock();
  }
  Thread.sleep(1000);
  MetricsRecordBuilder rb=getMetrics(NS_METRICS);
  assertGauge("UnderReplicatedBlocks",1L,rb);
  assertGauge("MissingBlocks",1L,rb);
  fs.delete(file,true);
  waitForDnMetricValue(NS_METRICS,"UnderReplicatedBlocks",0L);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test metrics indicating the number of stale DataNodes 
 */
@Test public void testStaleNodes() throws Exception {
  for (int i=0; i < 2; i++) {
    DataNode dn=cluster.getDataNodes().get(i);
    DataNodeTestUtils.setHeartbeatsDisabledForTests(dn,true);
    long staleInterval=CONF.getLong(DFSConfigKeys.DFS_NAMENODE_STALE_DATANODE_INTERVAL_KEY,DFSConfigKeys.DFS_NAMENODE_STALE_DATANODE_INTERVAL_DEFAULT);
    cluster.getNameNode().getNamesystem().getBlockManager().getDatanodeManager().getDatanode(dn.getDatanodeId()).setLastUpdate(Time.now() - staleInterval - 1);
  }
  BlockManagerTestUtil.checkHeartbeat(cluster.getNameNode().getNamesystem().getBlockManager());
  assertGauge("StaleDataNodes",2,getMetrics(NS_METRICS));
  for (int i=0; i < 2; i++) {
    DataNode dn=cluster.getDataNodes().get(i);
    DataNodeTestUtils.setHeartbeatsDisabledForTests(dn,false);
    cluster.getNameNode().getNamesystem().getBlockManager().getDatanodeManager().getDatanode(dn.getDatanodeId()).setLastUpdate(Time.now());
  }
  BlockManagerTestUtil.checkHeartbeat(cluster.getNameNode().getNamesystem().getBlockManager());
  assertGauge("StaleDataNodes",0,getMetrics(NS_METRICS));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRenameMetrics() throws Exception {
  Path src=getTestPath("src");
  createFile(src,100,(short)1);
  Path target=getTestPath("target");
  createFile(target,100,(short)1);
  fs.rename(src,target,Rename.OVERWRITE);
  MetricsRecordBuilder rb=getMetrics(NN_METRICS);
  assertCounter("FilesRenamed",1L,rb);
  assertCounter("FilesDeleted",1L,rb);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that capacity metrics are exported and pass
 * basic sanity tests.
 */
@Test(timeout=1800) public void testCapacityMetrics() throws Exception {
  MetricsRecordBuilder rb=getMetrics(NS_METRICS);
  long capacityTotal=MetricsAsserts.getLongGauge("CapacityTotal",rb);
  assert (capacityTotal != 0);
  long capacityUsed=MetricsAsserts.getLongGauge("CapacityUsed",rb);
  long capacityRemaining=MetricsAsserts.getLongGauge("CapacityRemaining",rb);
  long capacityUsedNonDFS=MetricsAsserts.getLongGauge("CapacityUsedNonDFS",rb);
  assert (capacityUsed + capacityRemaining + capacityUsedNonDFS == capacityTotal);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Create excess blocks by reducing the replication factor for
 * for a file and ensure metrics reflects it
 */
@Test public void testExcessBlocks() throws Exception {
  Path file=getTestPath("testExcessBlocks");
  createFile(file,100,(short)2);
  long totalBlocks=1;
  NameNodeAdapter.setReplication(namesystem,file.toString(),(short)1);
  MetricsRecordBuilder rb=getMetrics(NS_METRICS);
  assertGauge("ExcessBlocks",totalBlocks,rb);
  fs.delete(file,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that the sync and block report metrics get updated on cluster
 * startup.
 */
@Test public void testSyncAndBlockReportMetric() throws Exception {
  MetricsRecordBuilder rb=getMetrics(NN_METRICS);
  assertCounter("SyncsNumOps",1L,rb);
  assertCounter("BlockReportNumOps",(long)DATANODE_COUNT * cluster.getStoragesPerDatanode(),rb);
  Thread.sleep((PERCENTILES_INTERVAL + 1) * 1000);
  assertQuantileGauges("Syncs1s",rb);
  assertQuantileGauges("BlockReport1s",rb);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test numGetBlockLocations metric   
 * Test initiates and performs file operations (create,read,close,open file )
 * which results in metrics changes. These metrics changes are updated and 
 * tested for correctness.
 * create file operation does not increment numGetBlockLocation
 * one read file operation increments numGetBlockLocation by 1
 * @throws IOException in case of an error
 */
@Test public void testGetBlockLocationMetric() throws Exception {
  Path file1_Path=new Path(TEST_ROOT_DIR_PATH,"file1.dat");
  assertCounter("GetBlockLocations",0L,getMetrics(NN_METRICS));
  createFile(file1_Path,100,(short)2);
  assertCounter("GetBlockLocations",0L,getMetrics(NN_METRICS));
  readFile(fs,file1_Path);
  assertCounter("GetBlockLocations",1L,getMetrics(NN_METRICS));
  readFile(fs,file1_Path);
  readFile(fs,file1_Path);
  assertCounter("GetBlockLocations",3L,getMetrics(NN_METRICS));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test metrics associated with addition of a file 
 */
@Test public void testFileAdd() throws Exception {
  final Path file=getTestPath("testFileAdd");
  createFile(file,3200,(short)3);
  final long blockCount=32;
  int blockCapacity=namesystem.getBlockCapacity();
  assertGauge("BlockCapacity",blockCapacity,getMetrics(NS_METRICS));
  MetricsRecordBuilder rb=getMetrics(NN_METRICS);
  assertCounter("CreateFileOps",1L,rb);
  assertCounter("FilesCreated",(long)file.depth(),rb);
  long filesTotal=file.depth() + 1;
  rb=getMetrics(NS_METRICS);
  assertGauge("FilesTotal",filesTotal,rb);
  assertGauge("BlocksTotal",blockCount,rb);
  fs.delete(file,true);
  filesTotal--;
  rb=waitForDnMetricValue(NS_METRICS,"FilesTotal",filesTotal);
  assertGauge("BlocksTotal",0L,rb);
  assertGauge("PendingDeletionBlocks",0L,rb);
  rb=getMetrics(NN_METRICS);
  assertCounter("DeleteFileOps",1L,rb);
  assertCounter("FilesDeleted",1L,rb);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Corrupt a block and ensure metrics reflects it 
 */
@Test public void testCorruptBlock() throws Exception {
  final Path file=getTestPath("testCorruptBlock");
  createFile(file,100,(short)2);
  for (  DataNode dn : cluster.getDataNodes()) {
    DataNodeTestUtils.setHeartbeatsDisabledForTests(dn,true);
  }
  LocatedBlock block=NameNodeAdapter.getBlockLocations(cluster.getNameNode(),file.toString(),0,1).get(0);
  cluster.getNamesystem().writeLock();
  try {
    bm.findAndMarkBlockAsCorrupt(block.getBlock(),block.getLocations()[0],"STORAGE_ID","TEST");
  }
  finally {
    cluster.getNamesystem().writeUnlock();
  }
  BlockManagerTestUtil.getComputedDatanodeWork(bm);
  MetricsRecordBuilder rb=getMetrics(NS_METRICS);
  assertGauge("CorruptBlocks",1L,rb);
  assertGauge("PendingReplicationBlocks",1L,rb);
  fs.delete(file,true);
  rb=waitForDnMetricValue(NS_METRICS,"CorruptBlocks",0L);
  assertGauge("PendingReplicationBlocks",0L,rb);
  assertGauge("ScheduledReplicationBlocks",0L,rb);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.snapshot.TestAclWithSnapshot </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveDefaultAclSnapshotPath() throws Exception {
  FileSystem.mkdirs(hdfs,path,FsPermission.createImmutable((short)0700));
  SnapshotTestHelper.createSnapshot(hdfs,path,snapshotName);
  exception.expect(SnapshotAccessControlException.class);
  hdfs.removeDefaultAcl(snapshotPath);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveAclEntriesSnapshotPath() throws Exception {
  FileSystem.mkdirs(hdfs,path,FsPermission.createImmutable((short)0700));
  SnapshotTestHelper.createSnapshot(hdfs,path,snapshotName);
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(DEFAULT,USER,"bruce"));
  exception.expect(SnapshotAccessControlException.class);
  hdfs.removeAclEntries(snapshotPath,aclSpec);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testModifyAclEntriesSnapshotPath() throws Exception {
  FileSystem.mkdirs(hdfs,path,FsPermission.createImmutable((short)0700));
  SnapshotTestHelper.createSnapshot(hdfs,path,snapshotName);
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(DEFAULT,USER,"bruce",READ_EXECUTE));
  exception.expect(SnapshotAccessControlException.class);
  hdfs.modifyAclEntries(snapshotPath,aclSpec);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetAclSnapshotPath() throws Exception {
  FileSystem.mkdirs(hdfs,path,FsPermission.createImmutable((short)0700));
  SnapshotTestHelper.createSnapshot(hdfs,path,snapshotName);
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(DEFAULT,USER,"bruce"));
  exception.expect(SnapshotAccessControlException.class);
  hdfs.setAcl(snapshotPath,aclSpec);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoveAclSnapshotPath() throws Exception {
  FileSystem.mkdirs(hdfs,path,FsPermission.createImmutable((short)0700));
  SnapshotTestHelper.createSnapshot(hdfs,path,snapshotName);
  exception.expect(SnapshotAccessControlException.class);
  hdfs.removeAcl(snapshotPath);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.snapshot.TestDisallowModifyROSnapshot </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000,expected=SnapshotAccessControlException.class) public void testCreateSymlink() throws Exception {
  @SuppressWarnings("deprecation") DFSClient dfsclient=new DFSClient(conf);
  dfsclient.createSymlink(sub2.toString(),"/TestSnapshot/sub1/.snapshot",false);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000,expected=SnapshotAccessControlException.class) public void testSetTime() throws Exception {
  fs.setTimes(objInSnapshot,100,100);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000,expected=SnapshotAccessControlException.class) public void testSetPermission() throws Exception {
  fs.setPermission(objInSnapshot,new FsPermission("777"));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000,expected=SnapshotAccessControlException.class) public void testQuota() throws Exception {
  fs.setQuota(objInSnapshot,100,100);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000,expected=SnapshotAccessControlException.class) public void testSetOwner() throws Exception {
  fs.setOwner(objInSnapshot,"username","groupname");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000,expected=SnapshotAccessControlException.class) public void testDelete() throws Exception {
  fs.delete(objInSnapshot,true);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000,expected=SnapshotAccessControlException.class) public void testAppend() throws Exception {
  fs.append(objInSnapshot,65535,null);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000,expected=SnapshotAccessControlException.class) public void testCreate() throws Exception {
  @SuppressWarnings("deprecation") DFSClient dfsclient=new DFSClient(conf);
  dfsclient.create(objInSnapshot.toString(),true);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000,expected=SnapshotAccessControlException.class) public void testSetReplication() throws Exception {
  fs.setReplication(objInSnapshot,(short)1);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000,expected=SnapshotAccessControlException.class) public void testMkdir() throws Exception {
  fs.mkdirs(objInSnapshot,new FsPermission("777"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.snapshot.TestOpenFilesWithSnapshot </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFilesDeletionWithCheckpoint() throws Exception {
  Path path=new Path("/test");
  doWriteAndAbort(fs,path);
  fs.delete(new Path("/test/test/test2"),true);
  fs.delete(new Path("/test/test/test3"),true);
  NameNode nameNode=cluster.getNameNode();
  NameNodeAdapter.enterSafeMode(nameNode,false);
  NameNodeAdapter.saveNamespace(nameNode);
  NameNodeAdapter.leaveSafeMode(nameNode);
  cluster.restartNameNode(true);
  String test2snapshotPath=Snapshot.getSnapshotPath(path.toString(),"s1/test/test2");
  DFSTestUtil.readFile(fs,new Path(test2snapshotPath));
  String test3snapshotPath=Snapshot.getSnapshotPath(path.toString(),"s1/test/test3");
  DFSTestUtil.readFile(fs,new Path(test3snapshotPath));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOpenFilesWithMultipleSnapshotsWithoutCheckpoint() throws Exception {
  doTestMultipleSnapshots(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWithCheckpoint() throws Exception {
  Path path=new Path("/test");
  doWriteAndAbort(fs,path);
  fs.delete(new Path("/test/test"),true);
  NameNode nameNode=cluster.getNameNode();
  NameNodeAdapter.enterSafeMode(nameNode,false);
  NameNodeAdapter.saveNamespace(nameNode);
  NameNodeAdapter.leaveSafeMode(nameNode);
  cluster.restartNameNode(true);
  String test2snapshotPath=Snapshot.getSnapshotPath(path.toString(),"s1/test/test2");
  DFSTestUtil.readFile(fs,new Path(test2snapshotPath));
  String test3snapshotPath=Snapshot.getSnapshotPath(path.toString(),"s1/test/test3");
  DFSTestUtil.readFile(fs,new Path(test3snapshotPath));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOpenFilesWithMultipleSnapshots() throws Exception {
  doTestMultipleSnapshots(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testParentDirWithUCFileDeleteWithSnapShot() throws Exception {
  Path path=new Path("/test");
  doWriteAndAbort(fs,path);
  fs.delete(new Path("/test/test"),true);
  cluster.restartNameNode();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUCFileDeleteWithSnapShot() throws Exception {
  Path path=new Path("/test");
  doWriteAndAbort(fs,path);
  fs.delete(new Path("/test/test/test2"),true);
  fs.delete(new Path("/test/test/test3"),true);
  cluster.restartNameNode();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOpenFilesWithRename() throws Exception {
  Path path=new Path("/test");
  doWriteAndAbort(fs,path);
  Path fileWithEmptyBlock=new Path("/test/test/test4");
  fs.create(fileWithEmptyBlock);
  NamenodeProtocols nameNodeRpc=cluster.getNameNodeRpc();
  String clientName=fs.getClient().getClientName();
  nameNodeRpc.addBlock(fileWithEmptyBlock.toString(),clientName,null,null,INodeId.GRANDFATHER_INODE_ID,null);
  fs.createSnapshot(path,"s2");
  fs.rename(new Path("/test/test"),new Path("/test/test-renamed"));
  fs.delete(new Path("/test/test-renamed"),true);
  NameNode nameNode=cluster.getNameNode();
  NameNodeAdapter.enterSafeMode(nameNode,false);
  NameNodeAdapter.saveNamespace(nameNode);
  NameNodeAdapter.leaveSafeMode(nameNode);
  cluster.restartNameNode(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.snapshot.TestRenameWithSnapshots </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * move a directory to its prior descedant
 */
@Test public void testRename2PreDescendant_3() throws Exception {
  final Path root=new Path("/");
  final Path sdir1=new Path("/dir1");
  final Path sdir2=new Path("/dir2");
  final Path foo=new Path(sdir1,"foo");
  final Path bar=new Path(foo,"bar");
  final Path fileInBar=new Path(bar,"file");
  hdfs.mkdirs(bar);
  hdfs.mkdirs(sdir2);
  DFSTestUtil.createFile(hdfs,fileInBar,BLOCKSIZE,REPL,SEED);
  hdfs.setQuota(sdir1,Long.MAX_VALUE - 1,Long.MAX_VALUE - 1);
  hdfs.setQuota(sdir2,Long.MAX_VALUE - 1,Long.MAX_VALUE - 1);
  hdfs.setQuota(foo,Long.MAX_VALUE - 1,Long.MAX_VALUE - 1);
  hdfs.setQuota(bar,Long.MAX_VALUE - 1,Long.MAX_VALUE - 1);
  SnapshotTestHelper.createSnapshot(hdfs,root,snap1);
  hdfs.delete(fileInBar,true);
  SnapshotTestHelper.createSnapshot(hdfs,root,snap2);
  final Path bar2=new Path(sdir2,"bar2");
  hdfs.rename(bar,bar2);
  final Path foo2=new Path(bar2,"foo2");
  hdfs.rename(foo,foo2);
  restartClusterAndCheckImage(true);
  hdfs.deleteSnapshot(root,snap1);
  restartClusterAndCheckImage(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * move a directory to its prior descendant
 */
@Test public void testRename2PreDescendant_2() throws Exception {
  final Path root=new Path("/");
  final Path sdir1=new Path("/dir1");
  final Path sdir2=new Path("/dir2");
  final Path foo=new Path(sdir1,"foo");
  final Path bar=new Path(foo,"bar");
  final Path file1InBar=new Path(bar,"file1");
  final Path file2InBar=new Path(bar,"file2");
  hdfs.mkdirs(bar);
  hdfs.mkdirs(sdir2);
  DFSTestUtil.createFile(hdfs,file1InBar,BLOCKSIZE,REPL,SEED);
  DFSTestUtil.createFile(hdfs,file2InBar,BLOCKSIZE,REPL,SEED);
  hdfs.setQuota(sdir1,Long.MAX_VALUE - 1,Long.MAX_VALUE - 1);
  hdfs.setQuota(sdir2,Long.MAX_VALUE - 1,Long.MAX_VALUE - 1);
  hdfs.setQuota(foo,Long.MAX_VALUE - 1,Long.MAX_VALUE - 1);
  hdfs.setQuota(bar,Long.MAX_VALUE - 1,Long.MAX_VALUE - 1);
  SnapshotTestHelper.createSnapshot(hdfs,root,snap1);
  hdfs.delete(file1InBar,true);
  SnapshotTestHelper.createSnapshot(hdfs,root,snap2);
  hdfs.delete(file2InBar,true);
  final Path bar2=new Path(sdir2,"bar2");
  hdfs.rename(bar,bar2);
  final Path foo2=new Path(bar2,"foo2");
  hdfs.rename(foo,foo2);
  restartClusterAndCheckImage(true);
  hdfs.deleteSnapshot(root,snap2);
  restartClusterAndCheckImage(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRename2PreDescendant() throws Exception {
  final Path sdir1=new Path("/dir1");
  final Path sdir2=new Path("/dir2");
  final Path foo=new Path(sdir1,"foo");
  final Path bar=new Path(foo,"bar");
  hdfs.mkdirs(bar);
  hdfs.mkdirs(sdir2);
  SnapshotTestHelper.createSnapshot(hdfs,sdir1,snap1);
  final Path bar2=new Path(sdir2,"bar");
  hdfs.rename(bar,bar2);
  final Path foo2=new Path(bar2,"foo");
  hdfs.rename(foo,foo2);
  restartClusterAndCheckImage(true);
  hdfs.deleteSnapshot(sdir1,snap1);
  restartClusterAndCheckImage(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Similar with testRenameUCFileInSnapshot, but do renaming first and then 
 * append file without closing it. Unit test for HDFS-5425.
 */
@Test public void testAppendFileAfterRenameInSnapshot() throws Exception {
  final Path test=new Path("/test");
  final Path foo=new Path(test,"foo");
  final Path bar=new Path(foo,"bar");
  DFSTestUtil.createFile(hdfs,bar,BLOCKSIZE,REPL,SEED);
  SnapshotTestHelper.createSnapshot(hdfs,test,"s0");
  final Path bar2=new Path(foo,"bar2");
  hdfs.rename(bar,bar2);
  FSDataOutputStream out=hdfs.append(bar2);
  out.writeByte(0);
  ((DFSOutputStream)out.getWrappedStream()).hsync(EnumSet.of(SyncFlag.UPDATE_LENGTH));
  restartClusterAndCheckImage(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Rename of the underconstruction file in snapshot should not fail NN restart
 * after checkpoint. Unit test for HDFS-5425.
 */
@Test public void testRenameUCFileInSnapshot() throws Exception {
  final Path test=new Path("/test");
  final Path foo=new Path(test,"foo");
  final Path bar=new Path(foo,"bar");
  hdfs.mkdirs(foo);
  hdfs.create(bar);
  SnapshotTestHelper.createSnapshot(hdfs,test,"s0");
  final Path bar2=new Path(foo,"bar2");
  hdfs.rename(bar,bar2);
  restartClusterAndCheckImage(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.snapshot.TestSnapshot </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Main test, where we will go in the following loop:
 * <pre>
 * Create snapshot and check the creation <--+  
 * -> Change the current/live files/dir         | 
 * -> Check previous snapshots -----------------+
 * </pre>
 */
@Test public void testSnapshot() throws Throwable {
  try {
    runTestSnapshot(SNAPSHOT_ITERATION_NUMBER);
  }
 catch (  Throwable t) {
    SnapshotTestHelper.LOG.info("FAILED",t);
    SnapshotTestHelper.dumpTree("FAILED",cluster);
    throw t;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.snapshot.TestSnapshotDeletion </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test deleting snapshots in more complicated scenarios (snapshot diffs are
 * distributed in the directory sub-tree)
 */
@Test(timeout=300000) public void testCombineSnapshotDiff2() throws Exception {
  testCombineSnapshotDiffImpl(sub,"subsub1/subsubsub1/",3);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Deleting directory with snapshottable descendant with snapshots must fail.
 */
@Test(timeout=300000) public void testDeleteDirectoryWithSnapshot2() throws Exception {
  Path file0=new Path(sub,"file0");
  Path file1=new Path(sub,"file1");
  DFSTestUtil.createFile(hdfs,file0,BLOCKSIZE,REPLICATION,seed);
  DFSTestUtil.createFile(hdfs,file1,BLOCKSIZE,REPLICATION,seed);
  Path subfile1=new Path(subsub,"file0");
  Path subfile2=new Path(subsub,"file1");
  DFSTestUtil.createFile(hdfs,subfile1,BLOCKSIZE,REPLICATION,seed);
  DFSTestUtil.createFile(hdfs,subfile2,BLOCKSIZE,REPLICATION,seed);
  hdfs.allowSnapshot(subsub);
  hdfs.createSnapshot(subsub,"s1");
  exception.expect(RemoteException.class);
  String error=subsub.toString() + " is snapshottable and already has snapshots";
  exception.expectMessage(error);
  hdfs.delete(dir,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test deleting snapshots in a more complicated scenario: need to combine
 * snapshot diffs, but no need to handle diffs distributed in a dir tree
 */
@Test(timeout=300000) public void testCombineSnapshotDiff1() throws Exception {
  testCombineSnapshotDiffImpl(sub,"",1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Deleting snapshottable directory with snapshots must fail.
 */
@Test(timeout=300000) public void testDeleteDirectoryWithSnapshot() throws Exception {
  Path file0=new Path(sub,"file0");
  Path file1=new Path(sub,"file1");
  DFSTestUtil.createFile(hdfs,file0,BLOCKSIZE,REPLICATION,seed);
  DFSTestUtil.createFile(hdfs,file1,BLOCKSIZE,REPLICATION,seed);
  hdfs.allowSnapshot(sub);
  hdfs.createSnapshot(sub,"s1");
  exception.expect(RemoteException.class);
  String error="The directory " + sub.toString() + " cannot be deleted since "+ sub.toString()+ " is snapshottable and already has snapshots";
  exception.expectMessage(error);
  hdfs.delete(sub,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testHANNRestartAfterSnapshotDeletion() throws Exception {
  hdfs.close();
  cluster.shutdown();
  conf=new Configuration();
  cluster=new MiniDFSCluster.Builder(conf).nnTopology(MiniDFSNNTopology.simpleHATopology()).numDataNodes(1).build();
  cluster.transitionToActive(0);
  NameNode snn=cluster.getNameNode(1);
  snn.stop();
  hdfs=(DistributedFileSystem)HATestUtil.configureFailoverFs(cluster,conf);
  Path dir=new Path("/dir");
  Path subDir=new Path(dir,"sub");
  hdfs.mkdirs(dir);
  hdfs.allowSnapshot(dir);
  for (int i=0; i < 5; i++) {
    DFSTestUtil.createFile(hdfs,new Path(subDir,"" + i),100,(short)1,1024L);
  }
  hdfs.createSnapshot(dir,"s0");
  hdfs.delete(subDir,true);
  NameNode ann=cluster.getNameNode(0);
  ann.getRpcServer().rollEditLog();
  hdfs.deleteSnapshot(dir,"s0");
  Thread.sleep(2000);
  NameNodeAdapter.abortEditLogs(ann);
  cluster.restartNameNode(0,false);
  cluster.transitionToActive(0);
  cluster.waitClusterUp();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.snapshot.TestSnapshotDiffReport </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Rename a file and then append some data to it
 */
@Test public void testDiffReportWithRenameAndAppend() throws Exception {
  final Path root=new Path("/");
  final Path foo=new Path(root,"foo");
  DFSTestUtil.createFile(hdfs,foo,BLOCKSIZE,REPLICATION,seed);
  SnapshotTestHelper.createSnapshot(hdfs,root,"s0");
  final Path bar=new Path(root,"bar");
  hdfs.rename(foo,bar);
  DFSTestUtil.appendFile(hdfs,bar,10);
  SnapshotTestHelper.createSnapshot(hdfs,root,"s1");
  verifyDiffReport(root,"s0","s1",new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("")),new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("foo")),new DiffReportEntry(DiffType.RENAME,DFSUtil.string2Bytes("foo"),DFSUtil.string2Bytes("bar")));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Rename a directory to its prior descendant, and verify the diff report.
 */
@Test public void testDiffReportWithRename() throws Exception {
  final Path root=new Path("/");
  final Path sdir1=new Path(root,"dir1");
  final Path sdir2=new Path(root,"dir2");
  final Path foo=new Path(sdir1,"foo");
  final Path bar=new Path(foo,"bar");
  hdfs.mkdirs(bar);
  hdfs.mkdirs(sdir2);
  SnapshotTestHelper.createSnapshot(hdfs,root,"s1");
  final Path bar2=new Path(sdir2,"bar");
  hdfs.rename(bar,bar2);
  final Path foo2=new Path(bar2,"foo");
  hdfs.rename(foo,foo2);
  SnapshotTestHelper.createSnapshot(hdfs,root,"s2");
  hdfs.delete(sdir2,true);
  verifyDiffReport(root,"s1","s2",new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("")),new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("dir1")),new DiffReportEntry(DiffType.RENAME,DFSUtil.string2Bytes("dir1/foo"),DFSUtil.string2Bytes("dir2/bar/foo")),new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("dir2")),new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("dir1/foo/bar")),new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("dir1/foo")),new DiffReportEntry(DiffType.RENAME,DFSUtil.string2Bytes("dir1/foo/bar"),DFSUtil.string2Bytes("dir2/bar")));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDiffReportWithRenameToNewDir() throws Exception {
  final Path root=new Path("/");
  final Path foo=new Path(root,"foo");
  final Path fileInFoo=new Path(foo,"file");
  DFSTestUtil.createFile(hdfs,fileInFoo,BLOCKSIZE,REPLICATION,seed);
  SnapshotTestHelper.createSnapshot(hdfs,root,"s0");
  final Path bar=new Path(root,"bar");
  hdfs.mkdirs(bar);
  final Path fileInBar=new Path(bar,"file");
  hdfs.rename(fileInFoo,fileInBar);
  SnapshotTestHelper.createSnapshot(hdfs,root,"s1");
  verifyDiffReport(root,"s0","s1",new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("")),new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("foo")),new DiffReportEntry(DiffType.CREATE,DFSUtil.string2Bytes("bar")),new DiffReportEntry(DiffType.RENAME,DFSUtil.string2Bytes("foo/file"),DFSUtil.string2Bytes("bar/file")));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Make changes under a sub-directory, then delete the sub-directory. Make
 * sure the diff report computation correctly retrieve the diff from the
 * deleted sub-directory.
 */
@Test(timeout=60000) public void testDiffReport2() throws Exception {
  Path subsub1=new Path(sub1,"subsub1");
  Path subsubsub1=new Path(subsub1,"subsubsub1");
  hdfs.mkdirs(subsubsub1);
  modifyAndCreateSnapshot(subsubsub1,new Path[]{sub1});
  hdfs.delete(subsub1,true);
  verifyDiffReport(sub1,"s0","s2",new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("subsub1/subsubsub1")),new DiffReportEntry(DiffType.CREATE,DFSUtil.string2Bytes("subsub1/subsubsub1/file15")),new DiffReportEntry(DiffType.DELETE,DFSUtil.string2Bytes("subsub1/subsubsub1/file12")),new DiffReportEntry(DiffType.DELETE,DFSUtil.string2Bytes("subsub1/subsubsub1/file11")),new DiffReportEntry(DiffType.CREATE,DFSUtil.string2Bytes("subsub1/subsubsub1/file11")),new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("subsub1/subsubsub1/file13")),new DiffReportEntry(DiffType.CREATE,DFSUtil.string2Bytes("subsub1/subsubsub1/link13")),new DiffReportEntry(DiffType.DELETE,DFSUtil.string2Bytes("subsub1/subsubsub1/link13")));
  verifyDiffReport(sub1,"s0","",new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("")),new DiffReportEntry(DiffType.DELETE,DFSUtil.string2Bytes("subsub1")));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Rename a file/dir outside of the snapshottable dir should be reported as
 * deleted. Rename a file/dir from outside should be reported as created.
 */
@Test public void testDiffReportWithRenameOutside() throws Exception {
  final Path root=new Path("/");
  final Path dir1=new Path(root,"dir1");
  final Path dir2=new Path(root,"dir2");
  final Path foo=new Path(dir1,"foo");
  final Path fileInFoo=new Path(foo,"file");
  final Path bar=new Path(dir2,"bar");
  final Path fileInBar=new Path(bar,"file");
  DFSTestUtil.createFile(hdfs,fileInFoo,BLOCKSIZE,REPLICATION,seed);
  DFSTestUtil.createFile(hdfs,fileInBar,BLOCKSIZE,REPLICATION,seed);
  SnapshotTestHelper.createSnapshot(hdfs,dir1,"s0");
  final Path newBar=new Path(dir1,"newBar");
  hdfs.rename(bar,newBar);
  final Path newFoo=new Path(dir2,"new");
  hdfs.rename(foo,newFoo);
  SnapshotTestHelper.createSnapshot(hdfs,dir1,"s1");
  verifyDiffReport(dir1,"s0","s1",new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("")),new DiffReportEntry(DiffType.CREATE,DFSUtil.string2Bytes(newBar.getName())),new DiffReportEntry(DiffType.DELETE,DFSUtil.string2Bytes(foo.getName())));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Renaming a file/dir then delete the ancestor dir of the rename target
 * should be reported as deleted.
 */
@Test public void testDiffReportWithRenameAndDelete() throws Exception {
  final Path root=new Path("/");
  final Path dir1=new Path(root,"dir1");
  final Path dir2=new Path(root,"dir2");
  final Path foo=new Path(dir1,"foo");
  final Path fileInFoo=new Path(foo,"file");
  final Path bar=new Path(dir2,"bar");
  final Path fileInBar=new Path(bar,"file");
  DFSTestUtil.createFile(hdfs,fileInFoo,BLOCKSIZE,REPLICATION,seed);
  DFSTestUtil.createFile(hdfs,fileInBar,BLOCKSIZE,REPLICATION,seed);
  SnapshotTestHelper.createSnapshot(hdfs,root,"s0");
  hdfs.rename(fileInFoo,fileInBar,Rename.OVERWRITE);
  SnapshotTestHelper.createSnapshot(hdfs,root,"s1");
  verifyDiffReport(root,"s0","s1",new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("")),new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("dir1/foo")),new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("dir2/bar")),new DiffReportEntry(DiffType.DELETE,DFSUtil.string2Bytes("dir2/bar/file")),new DiffReportEntry(DiffType.RENAME,DFSUtil.string2Bytes("dir1/foo/file"),DFSUtil.string2Bytes("dir2/bar/file")));
  hdfs.delete(bar,true);
  SnapshotTestHelper.createSnapshot(hdfs,root,"s2");
  verifyDiffReport(root,"s0","s2",new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("")),new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("dir1/foo")),new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("dir2")),new DiffReportEntry(DiffType.DELETE,DFSUtil.string2Bytes("dir2/bar")),new DiffReportEntry(DiffType.DELETE,DFSUtil.string2Bytes("dir1/foo/file")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.snapshot.TestSnapshotMetrics </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test the metrics Snapshots, CreateSnapshotOps, DeleteSnapshotOps,
 * RenameSnapshotOps
 */
@Test public void testSnapshots() throws Exception {
  cluster.getNamesystem().getSnapshotManager().setAllowNestedSnapshots(true);
  assertGauge("Snapshots",0,getMetrics(NS_METRICS));
  assertCounter("CreateSnapshotOps",0L,getMetrics(NN_METRICS));
  try {
    hdfs.createSnapshot(sub1,"s1");
  }
 catch (  Exception e) {
  }
  assertGauge("Snapshots",0,getMetrics(NS_METRICS));
  assertCounter("CreateSnapshotOps",1L,getMetrics(NN_METRICS));
  hdfs.allowSnapshot(sub1);
  hdfs.createSnapshot(sub1,"s1");
  assertGauge("Snapshots",1,getMetrics(NS_METRICS));
  assertCounter("CreateSnapshotOps",2L,getMetrics(NN_METRICS));
  hdfs.createSnapshot(sub1,"s2");
  assertGauge("Snapshots",2,getMetrics(NS_METRICS));
  assertCounter("CreateSnapshotOps",3L,getMetrics(NN_METRICS));
  hdfs.getSnapshotDiffReport(sub1,"s1","s2");
  assertCounter("SnapshotDiffReportOps",1L,getMetrics(NN_METRICS));
  Path subsub1=new Path(sub1,"sub1sub1");
  Path subfile=new Path(subsub1,"file");
  DFSTestUtil.createFile(hdfs,subfile,1024,REPLICATION,seed);
  hdfs.allowSnapshot(subsub1);
  hdfs.createSnapshot(subsub1,"s11");
  assertGauge("Snapshots",3,getMetrics(NS_METRICS));
  assertCounter("CreateSnapshotOps",4L,getMetrics(NN_METRICS));
  hdfs.deleteSnapshot(sub1,"s2");
  assertGauge("Snapshots",2,getMetrics(NS_METRICS));
  assertCounter("DeleteSnapshotOps",1L,getMetrics(NN_METRICS));
  hdfs.renameSnapshot(sub1,"s1","NewS1");
  assertGauge("Snapshots",2,getMetrics(NS_METRICS));
  assertCounter("RenameSnapshotOps",1L,getMetrics(NN_METRICS));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.snapshot.TestSnapshotNameWithInvalidCharacters </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=600000) public void TestSnapshotWithInvalidName() throws Exception {
  Path file1=new Path(dir1,file1Name);
  DFSTestUtil.createFile(hdfs,file1,BLOCKSIZE,REPLICATION,SEED);
  hdfs.allowSnapshot(dir1);
  try {
    hdfs.createSnapshot(dir1,snapshot1);
  }
 catch (  RemoteException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void TestSnapshotWithInvalidName1() throws Exception {
  Path file1=new Path(dir1,file1Name);
  DFSTestUtil.createFile(hdfs,file1,BLOCKSIZE,REPLICATION,SEED);
  hdfs.allowSnapshot(dir1);
  try {
    hdfs.createSnapshot(dir1,snapshot2);
  }
 catch (  RemoteException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.snapshot.TestSnapshotRename </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test rename a non-existing snapshot
 */
@Test(timeout=60000) public void testRenameNonExistingSnapshot() throws Exception {
  DFSTestUtil.createFile(hdfs,file1,BLOCKSIZE,REPLICATION,seed);
  SnapshotTestHelper.createSnapshot(hdfs,sub1,"s1");
  exception.expect(SnapshotException.class);
  String error="The snapshot wrongName does not exist for directory " + sub1.toString();
  exception.expectMessage(error);
  hdfs.renameSnapshot(sub1,"wrongName","s2");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test rename a snapshot to another existing snapshot 
 */
@Test(timeout=60000) public void testRenameToExistingSnapshot() throws Exception {
  DFSTestUtil.createFile(hdfs,file1,BLOCKSIZE,REPLICATION,seed);
  SnapshotTestHelper.createSnapshot(hdfs,sub1,"s1");
  SnapshotTestHelper.createSnapshot(hdfs,sub1,"s2");
  exception.expect(SnapshotException.class);
  String error="The snapshot s2 already exists for directory " + sub1.toString();
  exception.expectMessage(error);
  hdfs.renameSnapshot(sub1,"s1","s2");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Rename snapshot(s), and check the correctness of the snapshot list within{@link INodeDirectorySnapshottable}
 */
@Test(timeout=60000) public void testSnapshotList() throws Exception {
  DFSTestUtil.createFile(hdfs,file1,BLOCKSIZE,REPLICATION,seed);
  SnapshotTestHelper.createSnapshot(hdfs,sub1,"s1");
  SnapshotTestHelper.createSnapshot(hdfs,sub1,"s2");
  SnapshotTestHelper.createSnapshot(hdfs,sub1,"s3");
  hdfs.renameSnapshot(sub1,"s3","s22");
  INodeDirectory srcRoot=fsdir.getINode(sub1.toString()).asDirectory();
  checkSnapshotList(srcRoot,new String[]{"s1","s2","s22"},new String[]{"s1","s2","s22"});
  hdfs.renameSnapshot(sub1,"s1","s4");
  checkSnapshotList(srcRoot,new String[]{"s2","s22","s4"},new String[]{"s4","s2","s22"});
  hdfs.renameSnapshot(sub1,"s22","s0");
  checkSnapshotList(srcRoot,new String[]{"s0","s2","s4"},new String[]{"s4","s2","s0"});
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.snapshot.TestSnapshotReplication </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test replication number calculation for a normal file without snapshots.
 */
@Test(timeout=60000) public void testReplicationWithoutSnapshot() throws Exception {
  DFSTestUtil.createFile(hdfs,file1,BLOCKSIZE,REPLICATION,seed);
  checkFileReplication(file1,REPLICATION,REPLICATION);
  hdfs.setReplication(file1,(short)(REPLICATION - 1));
  checkFileReplication(file1,(short)(REPLICATION - 1),(short)(REPLICATION - 1));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.snapshot.TestUpdatePipelineWithSnapshots </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUpdatePipelineAfterDelete() throws Exception {
  Configuration conf=new HdfsConfiguration();
  Path file=new Path("/test-file");
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).build();
  try {
    FileSystem fs=cluster.getFileSystem();
    NamenodeProtocols namenode=cluster.getNameNodeRpc();
    DFSOutputStream out=null;
    try {
      out=(DFSOutputStream)(fs.create(file).getWrappedStream());
      out.write(1);
      out.hflush();
      SnapshotTestHelper.createSnapshot((DistributedFileSystem)fs,new Path("/"),"s1");
      FSDataInputStream in=null;
      ExtendedBlock oldBlock=null;
      try {
        in=fs.open(file);
        oldBlock=DFSTestUtil.getAllBlocks(in).get(0).getBlock();
      }
  finally {
        IOUtils.closeStream(in);
      }
      String clientName=((DistributedFileSystem)fs).getClient().getClientName();
      LocatedBlock newLocatedBlock=namenode.updateBlockForPipeline(oldBlock,clientName);
      ExtendedBlock newBlock=new ExtendedBlock(oldBlock.getBlockPoolId(),oldBlock.getBlockId(),oldBlock.getNumBytes(),newLocatedBlock.getBlock().getGenerationStamp());
      fs.delete(file,true);
      try {
        namenode.updatePipeline(clientName,oldBlock,newBlock,newLocatedBlock.getLocations(),newLocatedBlock.getStorageIDs());
      }
 catch (      IOException ioe) {
        assertExceptionContains("does not exist or it is not under construction",ioe);
      }
      cluster.restartNameNode(true);
    }
  finally {
      IOUtils.closeStream(out);
    }
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.snapshot.TestXAttrWithSnapshot </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Assert exception of removing xattr on read-only snapshot.
 */
@Test public void testRemoveXAttrSnapshotPath() throws Exception {
  FileSystem.mkdirs(hdfs,path,FsPermission.createImmutable((short)0700));
  hdfs.setXAttr(path,name1,value1);
  SnapshotTestHelper.createSnapshot(hdfs,path,snapshotName);
  exception.expect(SnapshotAccessControlException.class);
  hdfs.removeXAttr(snapshotPath,name1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that an exception is thrown when adding an XAttr Feature to
 * a snapshotted path
 */
@Test public void testSetXAttrAfterSnapshotExceedsQuota() throws Exception {
  Path filePath=new Path(path,"file1");
  FileSystem.mkdirs(hdfs,path,FsPermission.createImmutable((short)0755));
  hdfs.allowSnapshot(path);
  hdfs.setQuota(path,3,HdfsConstants.QUOTA_DONT_SET);
  FileSystem.create(hdfs,filePath,FsPermission.createImmutable((short)0600)).close();
  hdfs.createSnapshot(path,snapshotName);
  exception.expect(NSQuotaExceededException.class);
  hdfs.setXAttr(filePath,name1,value1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Assert exception of setting xattr on read-only snapshot.
 */
@Test public void testSetXAttrSnapshotPath() throws Exception {
  FileSystem.mkdirs(hdfs,path,FsPermission.createImmutable((short)0700));
  SnapshotTestHelper.createSnapshot(hdfs,path,snapshotName);
  exception.expect(SnapshotAccessControlException.class);
  hdfs.setXAttr(snapshotPath,name1,value1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.server.namenode.startupprogress.TestStartupProgressMetrics </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInitialState(){
  MetricsRecordBuilder builder=getMetrics(metrics,true);
  assertCounter("ElapsedTime",0L,builder);
  assertGauge("PercentComplete",0.0f,builder);
  assertCounter("LoadingFsImageCount",0L,builder);
  assertCounter("LoadingFsImageElapsedTime",0L,builder);
  assertCounter("LoadingFsImageTotal",0L,builder);
  assertGauge("LoadingFsImagePercentComplete",0.0f,builder);
  assertCounter("LoadingEditsCount",0L,builder);
  assertCounter("LoadingEditsElapsedTime",0L,builder);
  assertCounter("LoadingEditsTotal",0L,builder);
  assertGauge("LoadingEditsPercentComplete",0.0f,builder);
  assertCounter("SavingCheckpointCount",0L,builder);
  assertCounter("SavingCheckpointElapsedTime",0L,builder);
  assertCounter("SavingCheckpointTotal",0L,builder);
  assertGauge("SavingCheckpointPercentComplete",0.0f,builder);
  assertCounter("SafeModeCount",0L,builder);
  assertCounter("SafeModeElapsedTime",0L,builder);
  assertCounter("SafeModeTotal",0L,builder);
  assertGauge("SafeModePercentComplete",0.0f,builder);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.shortcircuit.TestShortCircuitCache </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testCreateAndDestroy() throws Exception {
  ShortCircuitCache cache=new ShortCircuitCache(10,1,10,1,1,10000,0);
  cache.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testExpiry() throws Exception {
  final ShortCircuitCache cache=new ShortCircuitCache(2,1,1,10000000,1,10000000,0);
  final TestFileDescriptorPair pair=new TestFileDescriptorPair();
  ShortCircuitReplicaInfo replicaInfo1=cache.fetchOrCreate(new ExtendedBlockId(123,"test_bp1"),new SimpleReplicaCreator(123,cache,pair));
  Preconditions.checkNotNull(replicaInfo1.getReplica());
  Preconditions.checkState(replicaInfo1.getInvalidTokenException() == null);
  pair.compareWith(replicaInfo1.getReplica().getDataStream(),replicaInfo1.getReplica().getMetaStream());
  replicaInfo1.getReplica().unref();
  final MutableBoolean triedToCreate=new MutableBoolean(false);
  do {
    Thread.sleep(10);
    ShortCircuitReplicaInfo replicaInfo2=cache.fetchOrCreate(new ExtendedBlockId(123,"test_bp1"),new ShortCircuitReplicaCreator(){
      @Override public ShortCircuitReplicaInfo createShortCircuitReplicaInfo(){
        triedToCreate.setValue(true);
        return null;
      }
    }
);
    if ((replicaInfo2 != null) && (replicaInfo2.getReplica() != null)) {
      replicaInfo2.getReplica().unref();
    }
  }
 while (triedToCreate.isFalse());
  cache.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.shortcircuit.TestShortCircuitLocalRead </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testSmallFileLocalRead() throws Exception {
  doTestShortCircuitRead(false,13,0);
  doTestShortCircuitRead(false,13,5);
  doTestShortCircuitRead(true,13,0);
  doTestShortCircuitRead(true,13,5);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testReadWithRemoteBlockReader() throws IOException, InterruptedException {
  doTestShortCircuitReadWithRemoteBlockReader(true,3 * blockSize + 100,getCurrentUser(),0,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testLongFile() throws Exception {
  doTestShortCircuitRead(false,10 * blockSize + 100,777);
  doTestShortCircuitRead(true,10 * blockSize + 100,777);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testFileLocalReadChecksum() throws Exception {
  doTestShortCircuitRead(false,3 * blockSize + 100,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Try a short circuit from a reader that is not allowed to
 * to use short circuit. The test ensures reader falls back to non
 * shortcircuit reads when shortcircuit is disallowed.
 */
@Test(timeout=60000) public void testLocalReadFallback() throws Exception {
  doTestShortCircuitReadLegacy(true,13,0,getCurrentUser(),"notallowed",true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testFileLocalReadNoChecksum() throws Exception {
  doTestShortCircuitRead(true,3 * blockSize + 100,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testLocalReadLegacy() throws Exception {
  doTestShortCircuitReadLegacy(true,13,0,getCurrentUser(),getCurrentUser(),false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testReadFromAnOffset() throws Exception {
  doTestShortCircuitRead(false,3 * blockSize + 100,777);
  doTestShortCircuitRead(true,3 * blockSize + 100,777);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.shortcircuit.TestShortCircuitShm </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testStartupShutdown() throws Exception {
  File path=new File(TEST_BASE,"testStartupShutdown");
  path.mkdirs();
  SharedFileDescriptorFactory factory=SharedFileDescriptorFactory.create("shm_",new String[]{path.getAbsolutePath()});
  FileInputStream stream=factory.createDescriptor("testStartupShutdown",4096);
  ShortCircuitShm shm=new ShortCircuitShm(ShmId.createRandom(),stream);
  shm.free();
  stream.close();
  FileUtil.fullyDelete(path);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.tools.TestDelegationTokenFetcher </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * try to fetch token without http server with IOException
 */
@Test(expected=IOException.class) public void testTokenFetchFail() throws Exception {
  WebHdfsFileSystem fs=mock(WebHdfsFileSystem.class);
  doThrow(new IOException()).when(fs).getDelegationToken(anyString());
  Path p=new Path(f.getRoot().getAbsolutePath(),tokenFile);
  DelegationTokenFetcher.saveDelegationToken(conf,fs,null,p);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.tools.TestGetConf </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests to make sure the returned addresses are correct in case of default
 * configuration with no federation
 */
@Test(timeout=10000) public void testNonFederation() throws Exception {
  HdfsConfiguration conf=new HdfsConfiguration(false);
  conf.set(FS_DEFAULT_NAME_KEY,"hdfs://localhost:1000");
  verifyAddresses(conf,TestType.NAMENODE,false,"localhost:1000");
  verifyAddresses(conf,TestType.NNRPCADDRESSES,true,"localhost:1000");
  conf.set(DFS_NAMENODE_BACKUP_ADDRESS_KEY,"localhost:1001");
  verifyAddresses(conf,TestType.BACKUP,false,"localhost:1001");
  conf.set(DFS_NAMENODE_SECONDARY_HTTP_ADDRESS_KEY,"localhost:1002");
  verifyAddresses(conf,TestType.SECONDARY,false,"localhost:1002");
  conf=new HdfsConfiguration();
  conf.set(DFS_NAMENODE_SERVICE_RPC_ADDRESS_KEY,"localhost:1000");
  conf.set(DFS_NAMENODE_RPC_ADDRESS_KEY,"localhost:1001");
  verifyAddresses(conf,TestType.NAMENODE,false,"localhost:1000");
  verifyAddresses(conf,TestType.NNRPCADDRESSES,true,"localhost:1000");
  conf=new HdfsConfiguration();
  conf.set(DFS_NAMENODE_RPC_ADDRESS_KEY,"localhost:1001");
  verifyAddresses(conf,TestType.NAMENODE,false,"localhost:1001");
  verifyAddresses(conf,TestType.NNRPCADDRESSES,true,"localhost:1001");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests to make sure the returned addresses are correct in case of federation
 * of setup.
 */
@Test(timeout=10000) public void testFederation() throws Exception {
  final int nsCount=10;
  HdfsConfiguration conf=new HdfsConfiguration(false);
  setupNameServices(conf,nsCount);
  String[] nnAddresses=setupAddress(conf,DFS_NAMENODE_SERVICE_RPC_ADDRESS_KEY,nsCount,1000);
  setupAddress(conf,DFS_NAMENODE_RPC_ADDRESS_KEY,nsCount,1500);
  setupStaticHostResolution(nsCount);
  String[] backupAddresses=setupAddress(conf,DFS_NAMENODE_BACKUP_ADDRESS_KEY,nsCount,2000);
  String[] secondaryAddresses=setupAddress(conf,DFS_NAMENODE_SECONDARY_HTTP_ADDRESS_KEY,nsCount,3000);
  verifyAddresses(conf,TestType.NAMENODE,false,nnAddresses);
  verifyAddresses(conf,TestType.BACKUP,false,backupAddresses);
  verifyAddresses(conf,TestType.SECONDARY,false,secondaryAddresses);
  verifyAddresses(conf,TestType.NNRPCADDRESSES,true,nnAddresses);
  conf=new HdfsConfiguration(false);
  setupNameServices(conf,nsCount);
  nnAddresses=setupAddress(conf,DFS_NAMENODE_RPC_ADDRESS_KEY,nsCount,1000);
  backupAddresses=setupAddress(conf,DFS_NAMENODE_BACKUP_ADDRESS_KEY,nsCount,2000);
  secondaryAddresses=setupAddress(conf,DFS_NAMENODE_SECONDARY_HTTP_ADDRESS_KEY,nsCount,3000);
  verifyAddresses(conf,TestType.NAMENODE,false,nnAddresses);
  verifyAddresses(conf,TestType.BACKUP,false,backupAddresses);
  verifyAddresses(conf,TestType.SECONDARY,false,secondaryAddresses);
  verifyAddresses(conf,TestType.NNRPCADDRESSES,true,nnAddresses);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.tools.offlineImageViewer.TestOfflineImageViewer </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IOException.class) public void testTruncatedFSImage() throws IOException {
  File truncatedFile=folder.newFile();
  StringWriter output=new StringWriter();
  copyPartOfFile(originalFsimage,truncatedFile);
  new FileDistributionCalculator(new Configuration(),0,0,new PrintWriter(output)).visit(new RandomAccessFile(truncatedFile,"r"));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPBImageXmlWriter() throws IOException, SAXException, ParserConfigurationException {
  StringWriter output=new StringWriter();
  PrintWriter o=new PrintWriter(output);
  PBImageXmlWriter v=new PBImageXmlWriter(new Configuration(),o);
  v.visit(new RandomAccessFile(originalFsimage,"r"));
  SAXParserFactory spf=SAXParserFactory.newInstance();
  SAXParser parser=spf.newSAXParser();
  final String xml=output.getBuffer().toString();
  parser.parse(new InputSource(new StringReader(xml)),new DefaultHandler());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.util.TestChunkedArrayList </h4><pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPerformance(){
  String obj="hello world";
  final int numElems=1000000;
  final int numTrials=5;
  for (int trial=0; trial < numTrials; trial++) {
    System.gc();
{
      ArrayList<String> arrayList=new ArrayList<String>();
      Stopwatch sw=new Stopwatch();
      sw.start();
      for (int i=0; i < numElems; i++) {
        arrayList.add(obj);
      }
      System.out.println("       ArrayList " + sw.elapsedMillis());
    }
    System.gc();
{
      ChunkedArrayList<String> chunkedList=new ChunkedArrayList<String>();
      Stopwatch sw=new Stopwatch();
      sw.start();
      for (int i=0; i < numElems; i++) {
        chunkedList.add(obj);
      }
      System.out.println("ChunkedArrayList " + sw.elapsedMillis());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.util.TestCyclicIteration </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCyclicIteration() throws Exception {
  for (int n=0; n < 5; n++) {
    checkCyclicIteration(n);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.util.TestDiff </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test directory diff. 
 */
@Test(timeout=60000) public void testDiff() throws Exception {
  for (int startSize=0; startSize <= 10000; startSize=nextStep(startSize)) {
    for (int m=0; m <= 10000; m=nextStep(m)) {
      runDiffTest(startSize,m);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.util.TestMD5FileUtils </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test when .md5 file does not exist at all
 */
@Test(expected=IOException.class) public void testVerifyMD5FileMissing() throws Exception {
  MD5FileUtils.verifySavedMD5(TEST_FILE,TEST_MD5);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testVerifyMD5FileGood() throws Exception {
  MD5FileUtils.saveMD5File(TEST_FILE,TEST_MD5);
  MD5FileUtils.verifySavedMD5(TEST_FILE,TEST_MD5);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.util.TestXMLUtils </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMangleStringWithForbiddenCodePoint() throws Exception {
  testRoundTrip("a\u0001bcdef","a\\0001;bcdef");
  testRoundTrip("a\u0002\ud800bcdef","a\\0002;\\d800;bcdef");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMangleStringWithBackSlash() throws Exception {
  testRoundTrip("a\\bcdef","a\\005c;bcdef");
  testRoundTrip("\\\\","\\005c;\\005c;");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMangleEmptyString() throws Exception {
  testRoundTrip("","");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMangleVanillaString() throws Exception {
  testRoundTrip("abcdef","abcdef");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.web.TestJsonUtil </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testToDatanodeInfoWithoutSecurePort() throws Exception {
  Map<String,Object> response=new HashMap<String,Object>();
  response.put("ipAddr","127.0.0.1");
  response.put("hostName","localhost");
  response.put("storageID","fake-id");
  response.put("xferPort",1337l);
  response.put("infoPort",1338l);
  response.put("ipcPort",1339l);
  response.put("capacity",1024l);
  response.put("dfsUsed",512l);
  response.put("remaining",512l);
  response.put("blockPoolUsed",512l);
  response.put("lastUpdate",0l);
  response.put("xceiverCount",4096l);
  response.put("networkLocation","foo.bar.baz");
  response.put("adminState","NORMAL");
  response.put("cacheCapacity",123l);
  response.put("cacheUsed",321l);
  JsonUtil.toDatanodeInfo(response);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.web.TestTokenAspect </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInitWithNoTokens() throws IOException, URISyntaxException {
  Configuration conf=new Configuration();
  DummyFs fs=spy(new DummyFs());
  doReturn(null).when(fs).getDelegationToken(anyString());
  fs.initialize(new URI("dummyfs://127.0.0.1:1234"),conf);
  fs.tokenAspect.ensureTokenInitialized();
  verify(fs,never()).setDelegationToken(Mockito.<Token<? extends TokenIdentifier>>any());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCachedInitialization() throws IOException, URISyntaxException {
  Configuration conf=new Configuration();
  DummyFs fs=spy(new DummyFs());
  Token<TokenIdentifier> token=new Token<TokenIdentifier>(new byte[0],new byte[0],DummyFs.TOKEN_KIND,new Text("127.0.0.1:1234"));
  doReturn(token).when(fs).getDelegationToken(anyString());
  doReturn(token).when(fs).getRenewToken();
  fs.emulateSecurityEnabled=true;
  fs.initialize(new URI("dummyfs://127.0.0.1:1234"),conf);
  fs.tokenAspect.ensureTokenInitialized();
  verify(fs,times(1)).getDelegationToken(null);
  verify(fs,times(1)).setDelegationToken(token);
  fs.tokenAspect.ensureTokenInitialized();
  verify(fs,times(1)).getDelegationToken(null);
  verify(fs,times(1)).setDelegationToken(token);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.web.TestWebHDFS </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=300000) public void testLargeFile() throws Exception {
  largeFileTest(200L << 20);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test client retry with namenode restarting. 
 */
@Test(timeout=300000) public void testNamenodeRestart() throws Exception {
  ((Log4JLogger)NamenodeWebHdfsMethods.LOG).getLogger().setLevel(Level.ALL);
  final Configuration conf=WebHdfsTestUtil.createConf();
  TestDFSClientRetries.namenodeRestartTest(conf,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.web.TestWebHDFSForHA </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSecureHAToken() throws IOException, InterruptedException {
  Configuration conf=DFSTestUtil.newHAConfiguration(LOGICAL_NAME);
  conf.setBoolean(DFSConfigKeys.DFS_NAMENODE_DELEGATION_TOKEN_ALWAYS_USE_KEY,true);
  MiniDFSCluster cluster=null;
  WebHdfsFileSystem fs=null;
  try {
    cluster=new MiniDFSCluster.Builder(conf).nnTopology(topo).numDataNodes(0).build();
    HATestUtil.setFailoverConfigurations(cluster,conf,LOGICAL_NAME);
    cluster.waitActive();
    fs=spy((WebHdfsFileSystem)FileSystem.get(WEBHDFS_URI,conf));
    FileSystemTestHelper.addFileSystemForTesting(WEBHDFS_URI,conf,fs);
    cluster.transitionToActive(0);
    Token<?> token=fs.getDelegationToken(null);
    cluster.shutdownNameNode(0);
    cluster.transitionToActive(1);
    token.renew(conf);
    token.cancel(conf);
    verify(fs).renewDelegationToken(token);
    verify(fs).cancelDelegationToken(token);
  }
  finally {
    IOUtils.cleanup(null,fs);
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.web.TestWebHdfsTokens </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=5000) public void testNoTokenForCancelToken() throws IOException {
  checkNoTokenForOperation(PutOpParam.Op.CANCELDELEGATIONTOKEN);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=5000) public void testNoTokenForRenewToken() throws IOException {
  checkNoTokenForOperation(PutOpParam.Op.RENEWDELEGATIONTOKEN);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=5000) public void testNoTokenForGetToken() throws IOException {
  checkNoTokenForOperation(GetOpParam.Op.GETDELEGATIONTOKEN);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings("unchecked") @Test public void testLazyTokenFetchForSWebhdfs() throws Exception {
  MiniDFSCluster cluster=null;
  SWebHdfsFileSystem fs=null;
  try {
    final Configuration clusterConf=new HdfsConfiguration(conf);
    SecurityUtil.setAuthenticationMethod(SIMPLE,clusterConf);
    clusterConf.setBoolean(DFSConfigKeys.DFS_NAMENODE_DELEGATION_TOKEN_ALWAYS_USE_KEY,true);
    String BASEDIR=System.getProperty("test.build.dir","target/test-dir") + "/" + TestWebHdfsTokens.class.getSimpleName();
    String keystoresDir;
    String sslConfDir;
    clusterConf.setBoolean(DFSConfigKeys.DFS_WEBHDFS_ENABLED_KEY,true);
    clusterConf.set(DFSConfigKeys.DFS_HTTP_POLICY_KEY,HttpConfig.Policy.HTTPS_ONLY.name());
    clusterConf.set(DFSConfigKeys.DFS_NAMENODE_HTTPS_ADDRESS_KEY,"localhost:0");
    clusterConf.set(DFSConfigKeys.DFS_DATANODE_HTTPS_ADDRESS_KEY,"localhost:0");
    File base=new File(BASEDIR);
    FileUtil.fullyDelete(base);
    base.mkdirs();
    keystoresDir=new File(BASEDIR).getAbsolutePath();
    sslConfDir=KeyStoreTestUtil.getClasspathDir(TestWebHdfsTokens.class);
    KeyStoreTestUtil.setupSSLConfig(keystoresDir,sslConfDir,clusterConf,false);
    UserGroupInformation.setConfiguration(clusterConf);
    cluster=new MiniDFSCluster.Builder(clusterConf).numDataNodes(1).build();
    cluster.waitActive();
    InetSocketAddress addr=cluster.getNameNode().getHttpsAddress();
    String nnAddr=NetUtils.getHostPortString(addr);
    clusterConf.set(DFSConfigKeys.DFS_NAMENODE_HTTPS_ADDRESS_KEY,nnAddr);
    SecurityUtil.setAuthenticationMethod(KERBEROS,clusterConf);
    UserGroupInformation.setConfiguration(clusterConf);
    uri=DFSUtil.createUri("swebhdfs",cluster.getNameNode().getHttpsAddress());
    validateLazyTokenFetch(clusterConf);
  }
  finally {
    IOUtils.cleanup(null,fs);
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings("unchecked") @Test public void testLazyTokenFetchForWebhdfs() throws Exception {
  MiniDFSCluster cluster=null;
  WebHdfsFileSystem fs=null;
  try {
    final Configuration clusterConf=new HdfsConfiguration(conf);
    SecurityUtil.setAuthenticationMethod(SIMPLE,clusterConf);
    clusterConf.setBoolean(DFSConfigKeys.DFS_NAMENODE_DELEGATION_TOKEN_ALWAYS_USE_KEY,true);
    UserGroupInformation.setConfiguration(clusterConf);
    cluster=new MiniDFSCluster.Builder(clusterConf).numDataNodes(1).build();
    cluster.waitActive();
    SecurityUtil.setAuthenticationMethod(KERBEROS,clusterConf);
    UserGroupInformation.setConfiguration(clusterConf);
    uri=DFSUtil.createUri("webhdfs",cluster.getNameNode().getHttpAddress());
    validateLazyTokenFetch(clusterConf);
  }
  finally {
    IOUtils.cleanup(null,fs);
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=5000) public void testTokenForNonTokenOp() throws IOException {
  WebHdfsFileSystem fs=spyWebhdfsInSecureSetup();
  Token<?> token=mock(Token.class);
  doReturn(token).when(fs).getDelegationToken(null);
  fs.toUrl(GetOpParam.Op.OPEN,null);
  verify(fs).getDelegationToken();
  verify(fs).getDelegationToken(null);
  verify(fs).setDelegationToken(token);
  reset(fs);
  fs.toUrl(GetOpParam.Op.OPEN,null);
  verify(fs).getDelegationToken();
  verify(fs,never()).getDelegationToken(null);
  verify(fs,never()).setDelegationToken(token);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.hdfs.web.TestWebHdfsUrl </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testCheckAccessUrl() throws IOException {
  Configuration conf=new Configuration();
  UserGroupInformation ugi=UserGroupInformation.createRemoteUser("test-user");
  UserGroupInformation.setLoginUser(ugi);
  WebHdfsFileSystem webhdfs=getWebHdfsFileSystem(ugi,conf);
  Path fsPath=new Path("/p1");
  URL checkAccessUrl=webhdfs.toUrl(GetOpParam.Op.CHECKACCESS,fsPath,new FsActionParam(FsAction.READ_WRITE));
  checkQueryParams(new String[]{GetOpParam.Op.CHECKACCESS.toQueryString(),new UserParam(ugi.getShortUserName()).toString(),FsActionParam.NAME + "=" + FsAction.READ_WRITE.SYMBOL},checkAccessUrl);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testSecureProxyAuthParamsInUrl() throws IOException {
  Configuration conf=new Configuration();
  SecurityUtil.setAuthenticationMethod(KERBEROS,conf);
  UserGroupInformation.setConfiguration(conf);
  UserGroupInformation ugi=UserGroupInformation.createRemoteUser("test-user");
  ugi.setAuthenticationMethod(KERBEROS);
  ugi=UserGroupInformation.createProxyUser("test-proxy-user",ugi);
  UserGroupInformation.setLoginUser(ugi);
  WebHdfsFileSystem webhdfs=getWebHdfsFileSystem(ugi,conf);
  Path fsPath=new Path("/");
  String tokenString=webhdfs.getDelegationToken().encodeToUrlString();
  URL getTokenUrl=webhdfs.toUrl(GetOpParam.Op.GETDELEGATIONTOKEN,fsPath);
  checkQueryParams(new String[]{GetOpParam.Op.GETDELEGATIONTOKEN.toQueryString(),new UserParam(ugi.getRealUser().getShortUserName()).toString(),new DoAsParam(ugi.getShortUserName()).toString()},getTokenUrl);
  URL renewTokenUrl=webhdfs.toUrl(PutOpParam.Op.RENEWDELEGATIONTOKEN,fsPath,new TokenArgumentParam(tokenString));
  checkQueryParams(new String[]{PutOpParam.Op.RENEWDELEGATIONTOKEN.toQueryString(),new UserParam(ugi.getRealUser().getShortUserName()).toString(),new DoAsParam(ugi.getShortUserName()).toString(),new TokenArgumentParam(tokenString).toString()},renewTokenUrl);
  URL cancelTokenUrl=webhdfs.toUrl(PutOpParam.Op.CANCELDELEGATIONTOKEN,fsPath,new TokenArgumentParam(tokenString));
  checkQueryParams(new String[]{PutOpParam.Op.CANCELDELEGATIONTOKEN.toQueryString(),new UserParam(ugi.getRealUser().getShortUserName()).toString(),new DoAsParam(ugi.getShortUserName()).toString(),new TokenArgumentParam(tokenString).toString()},cancelTokenUrl);
  URL fileStatusUrl=webhdfs.toUrl(GetOpParam.Op.GETFILESTATUS,fsPath);
  checkQueryParams(new String[]{GetOpParam.Op.GETFILESTATUS.toQueryString(),new DelegationParam(tokenString).toString()},fileStatusUrl);
  webhdfs.setDelegationToken(null);
  cancelTokenUrl=webhdfs.toUrl(PutOpParam.Op.CANCELDELEGATIONTOKEN,fsPath,new TokenArgumentParam(tokenString));
  checkQueryParams(new String[]{PutOpParam.Op.CANCELDELEGATIONTOKEN.toQueryString(),new UserParam(ugi.getRealUser().getShortUserName()).toString(),new DoAsParam(ugi.getShortUserName()).toString(),new TokenArgumentParam(tokenString).toString()},cancelTokenUrl);
  fileStatusUrl=webhdfs.toUrl(GetOpParam.Op.GETFILESTATUS,fsPath);
  checkQueryParams(new String[]{GetOpParam.Op.GETFILESTATUS.toQueryString(),new UserParam(ugi.getRealUser().getShortUserName()).toString(),new DoAsParam(ugi.getShortUserName()).toString()},fileStatusUrl);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testSecureAuthParamsInUrl() throws IOException {
  Configuration conf=new Configuration();
  SecurityUtil.setAuthenticationMethod(KERBEROS,conf);
  UserGroupInformation.setConfiguration(conf);
  UserGroupInformation ugi=UserGroupInformation.createRemoteUser("test-user");
  ugi.setAuthenticationMethod(KERBEROS);
  UserGroupInformation.setLoginUser(ugi);
  WebHdfsFileSystem webhdfs=getWebHdfsFileSystem(ugi,conf);
  Path fsPath=new Path("/");
  String tokenString=webhdfs.getDelegationToken().encodeToUrlString();
  URL getTokenUrl=webhdfs.toUrl(GetOpParam.Op.GETDELEGATIONTOKEN,fsPath);
  checkQueryParams(new String[]{GetOpParam.Op.GETDELEGATIONTOKEN.toQueryString(),new UserParam(ugi.getShortUserName()).toString()},getTokenUrl);
  URL renewTokenUrl=webhdfs.toUrl(PutOpParam.Op.RENEWDELEGATIONTOKEN,fsPath,new TokenArgumentParam(tokenString));
  checkQueryParams(new String[]{PutOpParam.Op.RENEWDELEGATIONTOKEN.toQueryString(),new UserParam(ugi.getShortUserName()).toString(),new TokenArgumentParam(tokenString).toString()},renewTokenUrl);
  URL cancelTokenUrl=webhdfs.toUrl(PutOpParam.Op.CANCELDELEGATIONTOKEN,fsPath,new TokenArgumentParam(tokenString));
  checkQueryParams(new String[]{PutOpParam.Op.CANCELDELEGATIONTOKEN.toQueryString(),new UserParam(ugi.getShortUserName()).toString(),new TokenArgumentParam(tokenString).toString()},cancelTokenUrl);
  URL fileStatusUrl=webhdfs.toUrl(GetOpParam.Op.GETFILESTATUS,fsPath);
  checkQueryParams(new String[]{GetOpParam.Op.GETFILESTATUS.toQueryString(),new DelegationParam(tokenString).toString()},fileStatusUrl);
  webhdfs.setDelegationToken(null);
  cancelTokenUrl=webhdfs.toUrl(PutOpParam.Op.CANCELDELEGATIONTOKEN,fsPath,new TokenArgumentParam(tokenString));
  checkQueryParams(new String[]{PutOpParam.Op.CANCELDELEGATIONTOKEN.toQueryString(),new UserParam(ugi.getShortUserName()).toString(),new TokenArgumentParam(tokenString).toString()},cancelTokenUrl);
  fileStatusUrl=webhdfs.toUrl(GetOpParam.Op.GETFILESTATUS,fsPath);
  checkQueryParams(new String[]{GetOpParam.Op.GETFILESTATUS.toQueryString(),new UserParam(ugi.getShortUserName()).toString()},fileStatusUrl);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testSimpleProxyAuthParamsInUrl() throws IOException {
  Configuration conf=new Configuration();
  UserGroupInformation ugi=UserGroupInformation.createRemoteUser("test-user");
  ugi=UserGroupInformation.createProxyUser("test-proxy-user",ugi);
  UserGroupInformation.setLoginUser(ugi);
  WebHdfsFileSystem webhdfs=getWebHdfsFileSystem(ugi,conf);
  Path fsPath=new Path("/");
  URL fileStatusUrl=webhdfs.toUrl(GetOpParam.Op.GETFILESTATUS,fsPath);
  checkQueryParams(new String[]{GetOpParam.Op.GETFILESTATUS.toQueryString(),new UserParam(ugi.getRealUser().getShortUserName()).toString(),new DoAsParam(ugi.getShortUserName()).toString()},fileStatusUrl);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testSimpleAuthParamsInUrl() throws IOException {
  Configuration conf=new Configuration();
  UserGroupInformation ugi=UserGroupInformation.createRemoteUser("test-user");
  UserGroupInformation.setLoginUser(ugi);
  WebHdfsFileSystem webhdfs=getWebHdfsFileSystem(ugi,conf);
  Path fsPath=new Path("/");
  URL fileStatusUrl=webhdfs.toUrl(GetOpParam.Op.GETFILESTATUS,fsPath);
  checkQueryParams(new String[]{GetOpParam.Op.GETFILESTATUS.toQueryString(),new UserParam(ugi.getShortUserName()).toString()},fileStatusUrl);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.http.TestHtmlQuoting </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRoundtrip() throws Exception {
  runRoundTrip("");
  runRoundTrip("<>&'\"");
  runRoundTrip("ab>cd<ef&ghi'\"");
  runRoundTrip("A string\n with no quotable chars in it!");
  runRoundTrip(null);
  StringBuilder buffer=new StringBuilder();
  for (char ch=0; ch < 127; ++ch) {
    buffer.append(ch);
  }
  runRoundTrip(buffer.toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.http.TestHttpServer </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * HTTPServer.Builder should proceed if a external connector is available.
 */
@Test public void testHttpServerBuilderWithExternalConnector() throws Exception {
  Connector c=mock(Connector.class);
  doReturn("localhost").when(c).getHost();
  HttpServer2 s=new HttpServer2.Builder().setName("test").setConnector(c).build();
  s.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.http.TestHttpServerLifecycle </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that the server is alive once started
 * @throws Throwable on failure
 */
@Test public void testStartedServerIsAlive() throws Throwable {
  HttpServer2 server=null;
  server=createTestServer();
  assertNotLive(server);
  server.start();
  assertAlive(server);
  stop(server);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that the server is alive once started
 * @throws Throwable on failure
 */
@Test public void testCreatedServerIsNotAlive() throws Throwable {
  HttpServer2 server=createTestServer();
  assertNotLive(server);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStopUnstartedServer() throws Throwable {
  HttpServer2 server=createTestServer();
  stop(server);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that the server is not alive once stopped
 * @throws Throwable on failure
 */
@Test public void testStoppedServerIsNotAlive() throws Throwable {
  HttpServer2 server=createAndStartTestServer();
  assertAlive(server);
  stop(server);
  assertNotLive(server);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that the server is not alive once stopped
 * @throws Throwable on failure
 */
@Test public void testStoppingTwiceServerIsAllowed() throws Throwable {
  HttpServer2 server=createAndStartTestServer();
  assertAlive(server);
  stop(server);
  assertNotLive(server);
  stop(server);
  assertNotLive(server);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that the server with request logging enabled
 * @throws Throwable on failure
 */
@Test public void testStartedServerWithRequestLog() throws Throwable {
  HttpRequestLogAppender requestLogAppender=new HttpRequestLogAppender();
  requestLogAppender.setName("httprequestlog");
  requestLogAppender.setFilename(System.getProperty("test.build.data","/tmp/") + "jetty-name-yyyy_mm_dd.log");
  Logger.getLogger(HttpServer2.class.getName() + ".test").addAppender(requestLogAppender);
  HttpServer2 server=null;
  server=createTestServer();
  assertNotLive(server);
  server.start();
  assertAlive(server);
  stop(server);
  Logger.getLogger(HttpServer2.class.getName() + ".test").removeAppender(requestLogAppender);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.http.TestHttpServerWebapps </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that the test server is loadable on the classpath
 * @throws Throwable if something went wrong
 */
@Test public void testValidServerResource() throws Throwable {
  HttpServer2 server=null;
  try {
    server=createServer("test");
  }
  finally {
    stop(server);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.io.TestBytesWritable </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testToString(){
  checkToString(new byte[]{0,1,2,0x10},"00 01 02 10");
  checkToString(new byte[]{-0x80,-0x7f,-0x1,-0x2,1,0},"80 81 ff fe 01 00");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.io.TestDataByteBuffers </h4><pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBaseBuffers() throws IOException {
  DataOutputBuffer dob=new DataOutputBuffer();
  Random r=new Random();
  long seed=r.nextLong();
  r.setSeed(seed);
  System.out.println("SEED: " + seed);
  writeJunk(dob,r,seed,1000);
  DataInputBuffer dib=new DataInputBuffer();
  dib.reset(dob.getData(),0,dob.getLength());
  readJunk(dib,r,seed,1000);
  dob.reset();
  writeJunk(dob,r,seed,1000);
  dib.reset(dob.getData(),0,dob.getLength());
  readJunk(dib,r,seed,1000);
}

</code></pre>

<br>
<pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void TestDataOutputByteBufferCompatibility() throws IOException {
  DataOutputByteBuffer dob=new DataOutputByteBuffer();
  Random r=new Random();
  long seed=r.nextLong();
  r.setSeed(seed);
  System.out.println("SEED: " + seed);
  writeJunk(dob,r,seed,1000);
  ByteBuffer buf=ByteBuffer.allocate(dob.getLength());
  for (  ByteBuffer b : dob.getData()) {
    buf.put(b);
  }
  buf.flip();
  DataInputBuffer dib=new DataInputBuffer();
  dib.reset(buf.array(),0,buf.remaining());
  readJunk(dib,r,seed,1000);
}

</code></pre>

<br>
<pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void TestDataInputByteBufferCompatibility() throws IOException {
  DataOutputBuffer dob=new DataOutputBuffer();
  Random r=new Random();
  long seed=r.nextLong();
  r.setSeed(seed);
  System.out.println("SEED: " + seed);
  writeJunk(dob,r,seed,1000);
  ByteBuffer buf=ByteBuffer.wrap(dob.getData(),0,dob.getLength());
  DataInputByteBuffer dib=new DataInputByteBuffer();
  dib.reset(buf);
  readJunk(dib,r,seed,1000);
}

</code></pre>

<br>
<pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testByteBuffers() throws IOException {
  DataOutputByteBuffer dob=new DataOutputByteBuffer();
  Random r=new Random();
  long seed=r.nextLong();
  r.setSeed(seed);
  System.out.println("SEED: " + seed);
  writeJunk(dob,r,seed,1000);
  DataInputByteBuffer dib=new DataInputByteBuffer();
  dib.reset(dob.getData());
  readJunk(dib,r,seed,1000);
  dob.reset();
  writeJunk(dob,r,seed,1000);
  dib.reset(dob.getData());
  readJunk(dib,r,seed,1000);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.io.TestIOUtils </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopyBytesWithCountShouldCloseStreamsWhenCloseIsTrue() throws Exception {
  InputStream inputStream=Mockito.mock(InputStream.class);
  OutputStream outputStream=Mockito.mock(OutputStream.class);
  Mockito.doReturn(-1).when(inputStream).read(new byte[4096],0,1);
  IOUtils.copyBytes(inputStream,outputStream,(long)1,true);
  Mockito.verify(inputStream,Mockito.atLeastOnce()).close();
  Mockito.verify(outputStream,Mockito.atLeastOnce()).close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopyBytesShouldNotCloseStreamsWhenCloseIsFalse() throws Exception {
  InputStream inputStream=Mockito.mock(InputStream.class);
  OutputStream outputStream=Mockito.mock(OutputStream.class);
  Mockito.doReturn(-1).when(inputStream).read(new byte[1]);
  IOUtils.copyBytes(inputStream,outputStream,1,false);
  Mockito.verify(inputStream,Mockito.atMost(0)).close();
  Mockito.verify(outputStream,Mockito.atMost(0)).close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopyBytesShouldCloseInputSteamWhenOutputStreamCloseThrowsException() throws Exception {
  InputStream inputStream=Mockito.mock(InputStream.class);
  OutputStream outputStream=Mockito.mock(OutputStream.class);
  Mockito.doReturn(-1).when(inputStream).read(new byte[1]);
  Mockito.doThrow(new IOException()).when(outputStream).close();
  try {
    IOUtils.copyBytes(inputStream,outputStream,1,true);
  }
 catch (  IOException e) {
  }
  Mockito.verify(inputStream,Mockito.atLeastOnce()).close();
  Mockito.verify(outputStream,Mockito.atLeastOnce()).close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopyBytesShouldCloseStreamsWhenCloseIsTrue() throws Exception {
  InputStream inputStream=Mockito.mock(InputStream.class);
  OutputStream outputStream=Mockito.mock(OutputStream.class);
  Mockito.doReturn(-1).when(inputStream).read(new byte[1]);
  IOUtils.copyBytes(inputStream,outputStream,1,true);
  Mockito.verify(inputStream,Mockito.atLeastOnce()).close();
  Mockito.verify(outputStream,Mockito.atLeastOnce()).close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopyBytesWithCountShouldNotCloseStreamsWhenCloseIsFalse() throws Exception {
  InputStream inputStream=Mockito.mock(InputStream.class);
  OutputStream outputStream=Mockito.mock(OutputStream.class);
  Mockito.doReturn(-1).when(inputStream).read(new byte[4096],0,1);
  IOUtils.copyBytes(inputStream,outputStream,(long)1,false);
  Mockito.verify(inputStream,Mockito.atMost(0)).close();
  Mockito.verify(outputStream,Mockito.atMost(0)).close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.io.TestObjectWritableProtos </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProtoBufs3() throws IOException {
  doTest(3);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProtoBufs2() throws IOException {
  doTest(2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProtoBufs() throws IOException {
  doTest(1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.io.TestSecureIOUtils </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testReadCorrectlyRestrictedWithSecurity() throws IOException {
  SecureIOUtils.openForRead(testFilePathIs,realOwner,realGroup).close();
  SecureIOUtils.openFSDataInputStream(testFilePathFadis,realOwner,realGroup).close();
  SecureIOUtils.openForRandomRead(testFilePathRaf,"r",realOwner,realGroup).close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testReadUnrestricted() throws IOException {
  SecureIOUtils.openForRead(testFilePathIs,null,null).close();
  SecureIOUtils.openFSDataInputStream(testFilePathFadis,null,null).close();
  SecureIOUtils.openForRandomRead(testFilePathRaf,"r",null,null).close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.io.TestSequenceFileSync </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLowSyncpoint() throws IOException {
  final Configuration conf=new Configuration();
  final FileSystem fs=FileSystem.getLocal(conf);
  final Path path=new Path(System.getProperty("test.build.data","/tmp"),"sequencefile.sync.test");
  final IntWritable input=new IntWritable();
  final Text val=new Text();
  SequenceFile.Writer writer=new SequenceFile.Writer(fs,conf,path,IntWritable.class,Text.class);
  try {
    writeSequenceFile(writer,NUMRECORDS);
    for (int i=0; i < 5; i++) {
      final SequenceFile.Reader reader;
      if (i % 2 == 0) {
        reader=new SequenceFile.Reader(fs,path,conf);
      }
 else {
        final FSDataInputStream in=fs.open(path);
        final long length=fs.getFileStatus(path).getLen();
        final int buffersize=conf.getInt("io.file.buffer.size",4096);
        reader=new SequenceFile.Reader(in,buffersize,0L,length,conf);
      }
      try {
        forOffset(reader,input,val,i,0,0);
        forOffset(reader,input,val,i,65,0);
        forOffset(reader,input,val,i,2000,21);
        forOffset(reader,input,val,i,0,0);
      }
  finally {
        reader.close();
      }
    }
  }
  finally {
    fs.delete(path,false);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.io.compress.TestBlockDecompressorStream </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRead1() throws IOException {
  testRead(0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRead2() throws IOException {
  testRead(4);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.io.compress.TestCodec </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testBZip2NativeCodec() throws IOException {
  Configuration conf=new Configuration();
  conf.set("io.compression.codec.bzip2.library","system-native");
  if (NativeCodeLoader.isNativeCodeLoaded()) {
    if (Bzip2Factory.isNativeBzip2Loaded(conf)) {
      codecTest(conf,seed,0,"org.apache.hadoop.io.compress.BZip2Codec");
      codecTest(conf,seed,count,"org.apache.hadoop.io.compress.BZip2Codec");
      conf.set("io.compression.codec.bzip2.library","java-builtin");
      codecTest(conf,seed,0,"org.apache.hadoop.io.compress.BZip2Codec");
      codecTest(conf,seed,count,"org.apache.hadoop.io.compress.BZip2Codec");
    }
 else {
      LOG.warn("Native hadoop library available but native bzip2 is not");
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSplitableCodecs() throws Exception {
  testSplitableCodec(BZip2Codec.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSnappyCodec() throws IOException {
  if (SnappyCodec.isNativeCodeLoaded()) {
    codecTest(conf,seed,0,"org.apache.hadoop.io.compress.SnappyCodec");
    codecTest(conf,seed,count,"org.apache.hadoop.io.compress.SnappyCodec");
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testSequenceFileBZip2Codec() throws IOException, ClassNotFoundException, InstantiationException, IllegalAccessException {
  Configuration conf=new Configuration();
  conf.set("io.compression.codec.bzip2.library","java-builtin");
  sequenceFileCodecTest(conf,0,"org.apache.hadoop.io.compress.BZip2Codec",100);
  sequenceFileCodecTest(conf,100,"org.apache.hadoop.io.compress.BZip2Codec",100);
  sequenceFileCodecTest(conf,200000,"org.apache.hadoop.io.compress.BZip2Codec",1000000);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSequenceFileDefaultCodec() throws IOException, ClassNotFoundException, InstantiationException, IllegalAccessException {
  sequenceFileCodecTest(conf,100,"org.apache.hadoop.io.compress.DefaultCodec",100);
  sequenceFileCodecTest(conf,200000,"org.apache.hadoop.io.compress.DefaultCodec",1000000);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGzipCodecWithParam() throws IOException {
  Configuration conf=new Configuration(this.conf);
  ZlibFactory.setCompressionLevel(conf,CompressionLevel.BEST_COMPRESSION);
  ZlibFactory.setCompressionStrategy(conf,CompressionStrategy.HUFFMAN_ONLY);
  codecTest(conf,seed,0,"org.apache.hadoop.io.compress.GzipCodec");
  codecTest(conf,seed,count,"org.apache.hadoop.io.compress.GzipCodec");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testBZip2Codec() throws IOException {
  Configuration conf=new Configuration();
  conf.set("io.compression.codec.bzip2.library","java-builtin");
  codecTest(conf,seed,0,"org.apache.hadoop.io.compress.BZip2Codec");
  codecTest(conf,seed,count,"org.apache.hadoop.io.compress.BZip2Codec");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCodecInitWithCompressionLevel() throws Exception {
  Configuration conf=new Configuration();
  conf.setBoolean(CommonConfigurationKeys.IO_NATIVE_LIB_AVAILABLE_KEY,true);
  if (ZlibFactory.isNativeZlibLoaded(conf)) {
    LOG.info("testCodecInitWithCompressionLevel with native");
    codecTestWithNOCompression(conf,"org.apache.hadoop.io.compress.GzipCodec");
    codecTestWithNOCompression(conf,"org.apache.hadoop.io.compress.DefaultCodec");
  }
 else {
    LOG.warn("testCodecInitWithCompressionLevel for native skipped" + ": native libs not loaded");
  }
  conf=new Configuration();
  conf.setBoolean(CommonConfigurationKeys.IO_NATIVE_LIB_AVAILABLE_KEY,false);
  codecTestWithNOCompression(conf,"org.apache.hadoop.io.compress.DefaultCodec");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCodecPoolCompressorReinit() throws Exception {
  Configuration conf=new Configuration();
  conf.setBoolean(CommonConfigurationKeys.IO_NATIVE_LIB_AVAILABLE_KEY,true);
  if (ZlibFactory.isNativeZlibLoaded(conf)) {
    GzipCodec gzc=ReflectionUtils.newInstance(GzipCodec.class,conf);
    gzipReinitTest(conf,gzc);
  }
 else {
    LOG.warn("testCodecPoolCompressorReinit skipped: native libs not loaded");
  }
  conf.setBoolean(CommonConfigurationKeys.IO_NATIVE_LIB_AVAILABLE_KEY,false);
  DefaultCodec dfc=ReflectionUtils.newInstance(DefaultCodec.class,conf);
  gzipReinitTest(conf,dfc);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGzipCodecWriteJava() throws IOException {
  testGzipCodecWrite(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNativeGzipConcat() throws IOException {
  Configuration conf=new Configuration();
  conf.setBoolean(CommonConfigurationKeys.IO_NATIVE_LIB_AVAILABLE_KEY,true);
  if (!ZlibFactory.isNativeZlibLoaded(conf)) {
    LOG.warn("skipped: native libs not loaded");
    return;
  }
  GzipConcatTest(conf,GzipCodec.GzipZlibDecompressor.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBuiltInGzipConcat() throws IOException {
  Configuration conf=new Configuration();
  conf.setBoolean(CommonConfigurationKeys.IO_NATIVE_LIB_AVAILABLE_KEY,false);
  GzipConcatTest(conf,BuiltInGzipDecompressor.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGzipCodec() throws IOException {
  codecTest(conf,seed,0,"org.apache.hadoop.io.compress.GzipCodec");
  codecTest(conf,seed,count,"org.apache.hadoop.io.compress.GzipCodec");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeflateCodec() throws IOException {
  codecTest(conf,seed,0,"org.apache.hadoop.io.compress.DeflateCodec");
  codecTest(conf,seed,count,"org.apache.hadoop.io.compress.DeflateCodec");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testSequenceFileBZip2NativeCodec() throws IOException, ClassNotFoundException, InstantiationException, IllegalAccessException {
  Configuration conf=new Configuration();
  conf.set("io.compression.codec.bzip2.library","system-native");
  if (NativeCodeLoader.isNativeCodeLoaded()) {
    if (Bzip2Factory.isNativeBzip2Loaded(conf)) {
      sequenceFileCodecTest(conf,0,"org.apache.hadoop.io.compress.BZip2Codec",100);
      sequenceFileCodecTest(conf,100,"org.apache.hadoop.io.compress.BZip2Codec",100);
      sequenceFileCodecTest(conf,200000,"org.apache.hadoop.io.compress.BZip2Codec",1000000);
    }
 else {
      LOG.warn("Native hadoop library available but native bzip2 is not");
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGzipNativeCodecWrite() throws IOException {
  testGzipCodecWrite(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSequenceFileDeflateCodec() throws IOException, ClassNotFoundException, InstantiationException, IllegalAccessException {
  sequenceFileCodecTest(conf,100,"org.apache.hadoop.io.compress.DeflateCodec",100);
  sequenceFileCodecTest(conf,200000,"org.apache.hadoop.io.compress.DeflateCodec",1000000);
}

</code></pre>

<br>
<pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Regression test for HADOOP-8423: seeking in a block-compressed
 * stream would not properly reset the block decompressor state.
 */
@Test public void testSnappyMapFile() throws Exception {
  Assume.assumeTrue(SnappyCodec.isNativeCodeLoaded());
  codecTestMapFile(SnappyCodec.class,CompressionType.BLOCK,100);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDefaultCodec() throws IOException {
  codecTest(conf,seed,0,"org.apache.hadoop.io.compress.DefaultCodec");
  codecTest(conf,seed,count,"org.apache.hadoop.io.compress.DefaultCodec");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.io.file.tfile.TestTFileByteArrays </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOneDataEntry() throws IOException {
  if (skip)   return;
  writeRecords(1);
  readRecords(1);
  checkBlockIndex(0,0);
  readValueBeforeKey(0);
  readKeyWithoutValue(0);
  readValueWithoutKey(0);
  readKeyManyTimes(0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwoBlocks() throws IOException {
  if (skip)   return;
  writeRecords(records1stBlock + 5);
  readRecords(records1stBlock + 5);
  checkBlockIndex(records1stBlock + 4,1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFailureKeyLongerThan64K() throws IOException {
  if (skip)   return;
  byte[] buf=new byte[64 * K + 1];
  Random rand=new Random();
  rand.nextBytes(buf);
  try {
    writer.append(buf,"valueX".getBytes());
  }
 catch (  IndexOutOfBoundsException e) {
  }
  closeOutput();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Fill up exactly one block.
 * @throws IOException
 */
@Test public void testOneBlock() throws IOException {
  if (skip)   return;
  writeRecords(records1stBlock);
  readRecords(records1stBlock);
  checkBlockIndex(records1stBlock - 1,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * One block plus one record.
 * @throws IOException
 */
@Test public void testOneBlockPlusOneEntry() throws IOException {
  if (skip)   return;
  writeRecords(records1stBlock + 1);
  readRecords(records1stBlock + 1);
  checkBlockIndex(records1stBlock - 1,0);
  checkBlockIndex(records1stBlock,1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testThreeBlocks() throws IOException {
  if (skip)   return;
  writeRecords(2 * records1stBlock + 5);
  readRecords(2 * records1stBlock + 5);
  checkBlockIndex(2 * records1stBlock + 4,2);
  readValueBeforeKey(0);
  readKeyWithoutValue(0);
  readValueWithoutKey(0);
  readKeyManyTimes(0);
  readValueBeforeKey(2 * records1stBlock + 4);
  readKeyWithoutValue(2 * records1stBlock + 4);
  readValueWithoutKey(2 * records1stBlock + 4);
  readKeyManyTimes(2 * records1stBlock + 4);
  checkBlockIndex(records1stBlock - 1,0);
  checkBlockIndex(records1stBlock,1);
  readValueBeforeKey(records1stBlock);
  readKeyWithoutValue(records1stBlock);
  readValueWithoutKey(records1stBlock);
  readKeyManyTimes(records1stBlock);
  checkBlockIndex(records1stBlock + records2ndBlock - 1,1);
  checkBlockIndex(records1stBlock + records2ndBlock,2);
  readValueBeforeKey(records1stBlock + records2ndBlock - 1);
  readKeyWithoutValue(records1stBlock + records2ndBlock - 1);
  readValueWithoutKey(records1stBlock + records2ndBlock - 1);
  readKeyManyTimes(records1stBlock + records2ndBlock - 1);
  readValueBeforeKey(records1stBlock + 10);
  readKeyWithoutValue(records1stBlock + 10);
  readValueWithoutKey(records1stBlock + 10);
  readKeyManyTimes(records1stBlock + 10);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwoDataEntries() throws IOException {
  if (skip)   return;
  writeRecords(2);
  readRecords(2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.io.nativeio.TestNativeIO </h4><pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testGetMemlockLimit() throws Exception {
  assumeTrue(NativeIO.isAvailable());
  NativeIO.getMemlockLimit();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.io.retry.TestRetryProxy </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRetryForever() throws UnreliableException {
  UnreliableInterface unreliable=(UnreliableInterface)RetryProxy.create(UnreliableInterface.class,unreliableImpl,RETRY_FOREVER);
  unreliable.alwaysSucceeds();
  unreliable.failsOnceThenSucceeds();
  unreliable.failsTenTimesThenSucceeds();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.io.serializer.TestSerializationFactory </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSerializationKeyIsEmpty(){
  Configuration conf=new Configuration();
  conf.set(CommonConfigurationKeys.IO_SERIALIZATIONS_KEY,"");
  SerializationFactory factory=new SerializationFactory(conf);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSerializationKeyIsInvalid(){
  Configuration conf=new Configuration();
  conf.set(CommonConfigurationKeys.IO_SERIALIZATIONS_KEY,"INVALID_KEY_XXX");
  SerializationFactory factory=new SerializationFactory(conf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ipc.TestCallQueueManager </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEmptyConsume() throws InterruptedException {
  manager=new CallQueueManager<FakeCall>(queueClass,10,"",null);
  assertCanTake(manager,0,1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCallQueueCapacity() throws InterruptedException {
  manager=new CallQueueManager<FakeCall>(queueClass,10,"",null);
  assertCanPut(manager,10,20);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ipc.TestDecayRpcScheduler </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testParseThresholds(){
  Configuration conf=new Configuration();
  scheduler=new DecayRpcScheduler(1,"",conf);
  assertEqualDecimalArrays(new double[]{},scheduler.getThresholds());
  scheduler=new DecayRpcScheduler(2,"",conf);
  assertEqualDecimalArrays(new double[]{0.5},scheduler.getThresholds());
  scheduler=new DecayRpcScheduler(3,"",conf);
  assertEqualDecimalArrays(new double[]{0.25,0.5},scheduler.getThresholds());
  scheduler=new DecayRpcScheduler(4,"",conf);
  assertEqualDecimalArrays(new double[]{0.125,0.25,0.5},scheduler.getThresholds());
  conf=new Configuration();
  conf.set("ns." + DecayRpcScheduler.IPC_CALLQUEUE_DECAYSCHEDULER_THRESHOLDS_KEY,"1, 10, 20, 50, 85");
  scheduler=new DecayRpcScheduler(6,"ns",conf);
  assertEqualDecimalArrays(new double[]{0.01,0.1,0.2,0.5,0.85},scheduler.getThresholds());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ipc.TestIPC </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000,expected=IOException.class) public void testIpcAfterStopping() throws IOException {
  Server server=new TestServer(5,false);
  InetSocketAddress addr=NetUtils.getConnectAddress(server);
  server.start();
  Client client=new Client(LongWritable.class,conf);
  client.call(new LongWritable(RANDOM.nextLong()),addr,null,null,MIN_SLEEP_TIME,0,conf);
  client.stop();
  client.call(new LongWritable(RANDOM.nextLong()),addr,null,null,MIN_SLEEP_TIME,0,conf);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test case that fails a write, but only after taking enough time
 * that a ping should have been sent. This is a reproducer for a
 * deadlock seen in one iteration of HADOOP-6762.
 */
@Test(timeout=60000) public void testIOEOnWriteAfterPingClient() throws Exception {
  Client.setPingInterval(conf,100);
  try {
    WRITABLE_FAULTS_SLEEP=1000;
    doErrorTest(IOEOnWriteWritable.class,LongWritable.class,LongWritable.class,LongWritable.class);
  }
  finally {
    WRITABLE_FAULTS_SLEEP=0;
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testIOEOnServerReadParam() throws Exception {
  doErrorTest(LongWritable.class,IOEOnReadWritable.class,LongWritable.class,LongWritable.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Check service class byte in IPC header is correct on wire.
 */
@Test(timeout=60000) public void testIpcWithServiceClass() throws IOException {
  Server server=new TestServer(5,false);
  InetSocketAddress addr=NetUtils.getConnectAddress(server);
  server.start();
  Client.setConnectTimeout(conf,10000);
  callAndVerify(server,addr,0,true);
  callAndVerify(server,addr,-128,true);
  callAndVerify(server,addr,-129,false);
  callAndVerify(server,addr,127,true);
  callAndVerify(server,addr,128,false);
  server.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Check that reader queueing works
 * @throws BrokenBarrierException 
 * @throws InterruptedException 
 */
@Test(timeout=60000) public void testIpcWithReaderQueuing() throws Exception {
  for (int i=0; i < 10; i++) {
    checkBlocking(1,1,1);
  }
  for (int i=0; i < 10; i++) {
    checkBlocking(4,5,2);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testRTEOnServerWriteResponse() throws Exception {
  doErrorTest(LongWritable.class,LongWritable.class,RTEOnWriteWritable.class,LongWritable.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testIpcFromHadoop0_21_0() throws IOException {
  doIpcVersionTest(NetworkTraces.HADOOP_0_21_0_RPC_DUMP,NetworkTraces.RESPONSE_TO_HADOOP_0_21_0_RPC);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testRTEOnClientWriteParam() throws Exception {
  doErrorTest(RTEOnWriteWritable.class,LongWritable.class,LongWritable.class,LongWritable.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testSerial() throws IOException, InterruptedException {
  internalTestSerial(3,false,2,5,100);
  internalTestSerial(3,true,2,5,10);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testIOEOnServerWriteResponse() throws Exception {
  doErrorTest(LongWritable.class,LongWritable.class,IOEOnWriteWritable.class,LongWritable.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testIOEOnClientWriteParam() throws Exception {
  doErrorTest(IOEOnWriteWritable.class,LongWritable.class,LongWritable.class,LongWritable.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testIpcFromHadoop0_20_3() throws IOException {
  doIpcVersionTest(NetworkTraces.HADOOP_0_20_3_RPC_DUMP,NetworkTraces.RESPONSE_TO_HADOOP_0_20_3_RPC);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testIOEOnClientReadResponse() throws Exception {
  doErrorTest(LongWritable.class,LongWritable.class,LongWritable.class,IOEOnReadWritable.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testHttpGetResponse() throws IOException {
  doIpcVersionTest("GET / HTTP/1.0\r\n\r\n".getBytes(),Server.RECEIVED_HTTP_REQ_RESPONSE.getBytes());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testRTEOnServerReadParam() throws Exception {
  doErrorTest(LongWritable.class,RTEOnReadWritable.class,LongWritable.class,LongWritable.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testRTEOnClientReadResponse() throws Exception {
  doErrorTest(LongWritable.class,LongWritable.class,LongWritable.class,RTEOnReadWritable.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testConnectionRetriesOnSocketTimeoutExceptions() throws IOException {
  Configuration conf=new Configuration();
  conf.setInt(CommonConfigurationKeysPublic.IPC_CLIENT_CONNECT_MAX_RETRIES_ON_SOCKET_TIMEOUTS_KEY,0);
  assertRetriesOnSocketTimeouts(conf,1);
  conf.setInt(CommonConfigurationKeysPublic.IPC_CLIENT_CONNECT_MAX_RETRIES_ON_SOCKET_TIMEOUTS_KEY,3);
  assertRetriesOnSocketTimeouts(conf,4);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testIpcFromHadoop_0_18_13() throws IOException {
  doIpcVersionTest(NetworkTraces.HADOOP_0_18_3_RPC_DUMP,NetworkTraces.RESPONSE_TO_HADOOP_0_18_3_RPC);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ipc.TestMiniRPCBenchmark </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimple() throws Exception {
  Configuration conf=new Configuration();
  conf.set("hadoop.security.authentication","simple");
  MiniRPCBenchmark mb=new MiniRPCBenchmark(Level.DEBUG);
  mb.runMiniBenchmark(conf,10,null,null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ipc.TestMultipleProtocolServer </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IOException.class) public void testIncorrectServerCreation() throws IOException {
  new RPC.Builder(conf).setProtocol(Foo1.class).setInstance(new Foo0Impl()).setBindAddress(ADDRESS).setPort(0).setNumHandlers(2).setVerbose(false).build();
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IOException.class) public void testNonExistingProtocol() throws IOException {
  ProtocolProxy<?> proxy;
  proxy=RPC.getProtocolProxy(FooUnimplemented.class,FooUnimplemented.versionID,addr,conf);
  FooUnimplemented foo=(FooUnimplemented)proxy.getProxy();
  foo.ping();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPBService() throws Exception {
  Configuration conf2=new Configuration();
  RPC.setProtocolEngine(conf2,TestRpcService.class,ProtobufRpcEngine.class);
  TestRpcService client=RPC.getProxy(TestRpcService.class,0,addr,conf2);
  TestProtoBufRpc.testProtoBufRpc(client);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ipc.TestProtoBufRpc </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=5000) public void testProtoBufRpc() throws Exception {
  TestRpcService client=getClient();
  testProtoBufRpc(client);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ipc.TestRPC </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that the mockProtocol helper returns mock proxies that can
 * be stopped without error.
 */
@Test public void testStopMockObject() throws IOException {
  RPC.stopProxy(MockitoUtil.mockProtocol(TestProtocol.class));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test stopping a non-registered proxy
 * @throws IOException
 */
@Test(expected=HadoopIllegalArgumentException.class) public void testStopNonRegisteredProxy() throws IOException {
  RPC.stopProxy(null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConnectionPing() throws Exception {
  Configuration conf=new Configuration();
  int pingInterval=50;
  conf.setBoolean(CommonConfigurationKeys.IPC_CLIENT_PING_KEY,true);
  conf.setInt(CommonConfigurationKeys.IPC_PING_INTERVAL_KEY,pingInterval);
  final Server server=new RPC.Builder(conf).setProtocol(TestProtocol.class).setInstance(new TestImpl()).setBindAddress(ADDRESS).setPort(0).setNumHandlers(5).setVerbose(true).build();
  server.start();
  final TestProtocol proxy=RPC.getProxy(TestProtocol.class,TestProtocol.versionID,server.getListenerAddress(),conf);
  try {
    proxy.sleep(pingInterval * 4);
  }
  finally {
    if (proxy != null)     RPC.stopProxy(proxy);
    server.stop();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCalls() throws IOException {
  testCallsInternal(conf);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAuthorization() throws IOException {
  Configuration conf=new Configuration();
  conf.setBoolean(CommonConfigurationKeys.HADOOP_SECURITY_AUTHORIZATION,true);
  conf.set(ACL_CONFIG,"*");
  doRPCs(conf,false);
  conf.set(ACL_CONFIG,"invalid invalid");
  doRPCs(conf,true);
  conf.setInt(CommonConfigurationKeys.IPC_SERVER_RPC_READ_THREADS_KEY,2);
  conf.set(ACL_CONFIG,"*");
  doRPCs(conf,false);
  conf.set(ACL_CONFIG,"invalid invalid");
  doRPCs(conf,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ipc.TestRPCCompatibility </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testVersion0ClientVersion1Server() throws Exception {
  TestImpl1 impl=new TestImpl1();
  server=new RPC.Builder(conf).setProtocol(TestProtocol1.class).setInstance(impl).setBindAddress(ADDRESS).setPort(0).setNumHandlers(2).setVerbose(false).build();
  server.addProtocol(RPC.RpcKind.RPC_WRITABLE,TestProtocol0.class,impl);
  server.start();
  addr=NetUtils.getConnectAddress(server);
  proxy=RPC.getProtocolProxy(TestProtocol0.class,TestProtocol0.versionID,addr,conf);
  TestProtocol0 proxy0=(TestProtocol0)proxy.getProxy();
  proxy0.ping();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ipc.TestRetryCache </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This simlulates a short server operation. Multiple threads start an
 * operation that takes short time and finally fails. The retries in this case
 * do not wait for the current operation to complete. All the retries end up
 * performing the operation again.
 */
@Test public void testShortOperationsFailure() throws Exception {
  testOperations(r.nextInt(),25,0,false,false,newCall());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This simlulates a short server operation. Multiple threads start an
 * operation that takes very short time and finally succeeds. The retries in
 * this case do not wait long for the current operation to complete. All the
 * retries then complete based on the entry in the retry cache.
 */
@Test public void testShortOperationsSuccess() throws Exception {
  testOperations(r.nextInt(),25,0,false,false,newCall());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This simlulates a long server operation. Multiple threads start an
 * operation that takes long time and finally fails. The retries in this case
 * end up waiting for the current operation to complete. All the retries end
 * up performing the operation again.
 */
@Test public void testLongOperationsFailure() throws Exception {
  testOperations(r.nextInt(),100,20,false,false,newCall());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRetryAfterFailure() throws Exception {
  Server.Call call=newCall();
  int input=r.nextInt();
  Server.getCurCall().set(call);
  testServer.echo(input,input + 1,5,false);
  testOperations(input,25,0,false,true,call);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRetryAfterSuccess() throws Exception {
  Server.Call call=newCall();
  int input=r.nextInt();
  Server.getCurCall().set(call);
  testServer.echo(input,input + 1,5,true);
  testOperations(input,25,0,true,true,call);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This simlulates a long server retried operations. Multiple threads start an
 * operation that takes long time and finally succeeds. The retries in this
 * case end up waiting for the current operation to complete. All the retries
 * then complete based on the entry in the retry cache.
 */
@Test public void testLongOperationsSuccessful() throws Exception {
  testOperations(r.nextInt(),100,20,true,false,newCall());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ipc.TestRetryCacheMetrics </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNames(){
  RetryCache cache=mock(RetryCache.class);
  when(cache.getCacheName()).thenReturn(cacheName);
  RetryCacheMetrics metrics=RetryCacheMetrics.create(cache);
  metrics.incrCacheHit();
  metrics.incrCacheCleared();
  metrics.incrCacheCleared();
  metrics.incrCacheUpdated();
  metrics.incrCacheUpdated();
  metrics.incrCacheUpdated();
  checkMetrics(1,2,3);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ipc.TestSaslRPC </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimpleServer() throws Exception {
  assertAuthEquals(SIMPLE,getAuthMethod(SIMPLE,SIMPLE));
  assertAuthEquals(SIMPLE,getAuthMethod(SIMPLE,SIMPLE,UseToken.OTHER));
  assertAuthEquals(SIMPLE,getAuthMethod(KERBEROS,SIMPLE));
  assertAuthEquals(SIMPLE,getAuthMethod(KERBEROS,SIMPLE,UseToken.OTHER));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTokenOnlyServer() throws Exception {
  assertAuthEquals(Denied(SIMPLE),getAuthMethod(SIMPLE,TOKEN));
  assertAuthEquals(No(TOKEN),getAuthMethod(SIMPLE,TOKEN,UseToken.OTHER));
  assertAuthEquals(No(TOKEN),getAuthMethod(KERBEROS,TOKEN));
  assertAuthEquals(No(TOKEN),getAuthMethod(KERBEROS,TOKEN,UseToken.OTHER));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimpleServerWithInvalidTokens() throws Exception {
  assertAuthEquals(SIMPLE,getAuthMethod(SIMPLE,SIMPLE,UseToken.INVALID));
  assertAuthEquals(SIMPLE,getAuthMethod(KERBEROS,SIMPLE,UseToken.INVALID));
  enableSecretManager=true;
  assertAuthEquals(SIMPLE,getAuthMethod(SIMPLE,SIMPLE,UseToken.INVALID));
  assertAuthEquals(SIMPLE,getAuthMethod(KERBEROS,SIMPLE,UseToken.INVALID));
  forceSecretManager=true;
  assertAuthEquals(BadToken,getAuthMethod(SIMPLE,SIMPLE,UseToken.INVALID));
  assertAuthEquals(BadToken,getAuthMethod(KERBEROS,SIMPLE,UseToken.INVALID));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKerberosServerWithInvalidTokens() throws Exception {
  assertAuthEquals(BadToken,getAuthMethod(SIMPLE,KERBEROS,UseToken.INVALID));
  assertAuthEquals(BadToken,getAuthMethod(KERBEROS,KERBEROS,UseToken.INVALID));
  enableSecretManager=false;
  assertAuthEquals(No(KERBEROS),getAuthMethod(SIMPLE,KERBEROS,UseToken.INVALID));
  assertAuthEquals(KrbFailed,getAuthMethod(KERBEROS,KERBEROS,UseToken.INVALID));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDigestRpc() throws Exception {
  TestTokenSecretManager sm=new TestTokenSecretManager();
  final Server server=new RPC.Builder(conf).setProtocol(TestSaslProtocol.class).setInstance(new TestSaslImpl()).setBindAddress(ADDRESS).setPort(0).setNumHandlers(5).setVerbose(true).setSecretManager(sm).build();
  doDigestRpc(server,sm);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDigestRpcWithoutAnnotation() throws Exception {
  TestTokenSecretManager sm=new TestTokenSecretManager();
  try {
    SecurityUtil.setSecurityInfoProviders(new CustomSecurityInfo());
    final Server server=new RPC.Builder(conf).setProtocol(TestSaslProtocol.class).setInstance(new TestSaslImpl()).setBindAddress(ADDRESS).setPort(0).setNumHandlers(5).setVerbose(true).setSecretManager(sm).build();
    doDigestRpc(server,sm);
  }
  finally {
    SecurityUtil.setSecurityInfoProviders(new SecurityInfo[0]);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSimpleServerWithTokens() throws Exception {
  assertAuthEquals(SIMPLE,getAuthMethod(SIMPLE,SIMPLE));
  assertAuthEquals(SIMPLE,getAuthMethod(KERBEROS,SIMPLE));
  assertAuthEquals(SIMPLE,getAuthMethod(KERBEROS,SIMPLE,UseToken.VALID));
  assertAuthEquals(SIMPLE,getAuthMethod(KERBEROS,SIMPLE,UseToken.OTHER));
  enableSecretManager=true;
  assertAuthEquals(SIMPLE,getAuthMethod(SIMPLE,SIMPLE,UseToken.VALID));
  assertAuthEquals(SIMPLE,getAuthMethod(SIMPLE,SIMPLE,UseToken.OTHER));
  assertAuthEquals(SIMPLE,getAuthMethod(KERBEROS,SIMPLE,UseToken.VALID));
  assertAuthEquals(SIMPLE,getAuthMethod(KERBEROS,SIMPLE,UseToken.OTHER));
  forceSecretManager=true;
  assertAuthEquals(TOKEN,getAuthMethod(SIMPLE,SIMPLE,UseToken.VALID));
  assertAuthEquals(SIMPLE,getAuthMethod(SIMPLE,SIMPLE,UseToken.OTHER));
  assertAuthEquals(TOKEN,getAuthMethod(KERBEROS,SIMPLE,UseToken.VALID));
  assertAuthEquals(SIMPLE,getAuthMethod(KERBEROS,SIMPLE,UseToken.OTHER));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSaslPlainServer() throws IOException {
  runNegotiation(new TestPlainCallbacks.Client("user","pass"),new TestPlainCallbacks.Server("user","pass"));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTokenOnlyServerWithInvalidTokens() throws Exception {
  assertAuthEquals(BadToken,getAuthMethod(SIMPLE,TOKEN,UseToken.INVALID));
  assertAuthEquals(BadToken,getAuthMethod(KERBEROS,TOKEN,UseToken.INVALID));
  enableSecretManager=false;
  assertAuthEquals(NoTokenAuth,getAuthMethod(SIMPLE,TOKEN,UseToken.INVALID));
  assertAuthEquals(NoTokenAuth,getAuthMethod(KERBEROS,TOKEN,UseToken.INVALID));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKerberosServer() throws Exception {
  assertAuthEquals(Denied(SIMPLE),getAuthMethod(SIMPLE,KERBEROS));
  assertAuthEquals(No(TOKEN,KERBEROS),getAuthMethod(SIMPLE,KERBEROS,UseToken.OTHER));
  assertAuthEquals(KrbFailed,getAuthMethod(KERBEROS,KERBEROS));
  assertAuthEquals(KrbFailed,getAuthMethod(KERBEROS,KERBEROS,UseToken.OTHER));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTokenOnlyServerWithTokens() throws Exception {
  assertAuthEquals(TOKEN,getAuthMethod(SIMPLE,TOKEN,UseToken.VALID));
  assertAuthEquals(TOKEN,getAuthMethod(KERBEROS,TOKEN,UseToken.VALID));
  enableSecretManager=false;
  assertAuthEquals(NoTokenAuth,getAuthMethod(SIMPLE,TOKEN,UseToken.VALID));
  assertAuthEquals(NoTokenAuth,getAuthMethod(KERBEROS,TOKEN,UseToken.VALID));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNoClientFallbackToSimple() throws Exception {
  clientFallBackToSimpleAllowed=false;
  assertAuthEquals(SIMPLE,getAuthMethod(SIMPLE,SIMPLE));
  assertAuthEquals(SIMPLE,getAuthMethod(SIMPLE,SIMPLE,UseToken.OTHER));
  assertAuthEquals(SIMPLE,getAuthMethod(SIMPLE,SIMPLE,UseToken.VALID));
  assertAuthEquals(SIMPLE,getAuthMethod(SIMPLE,SIMPLE,UseToken.INVALID));
  assertAuthEquals(NoFallback,getAuthMethod(KERBEROS,SIMPLE));
  assertAuthEquals(NoFallback,getAuthMethod(KERBEROS,SIMPLE,UseToken.OTHER));
  assertAuthEquals(NoFallback,getAuthMethod(KERBEROS,SIMPLE,UseToken.VALID));
  assertAuthEquals(NoFallback,getAuthMethod(KERBEROS,SIMPLE,UseToken.INVALID));
  forceSecretManager=true;
  assertAuthEquals(SIMPLE,getAuthMethod(SIMPLE,SIMPLE));
  assertAuthEquals(SIMPLE,getAuthMethod(SIMPLE,SIMPLE,UseToken.OTHER));
  assertAuthEquals(TOKEN,getAuthMethod(SIMPLE,SIMPLE,UseToken.VALID));
  assertAuthEquals(BadToken,getAuthMethod(SIMPLE,SIMPLE,UseToken.INVALID));
  assertAuthEquals(NoFallback,getAuthMethod(KERBEROS,SIMPLE));
  assertAuthEquals(NoFallback,getAuthMethod(KERBEROS,SIMPLE,UseToken.OTHER));
  assertAuthEquals(TOKEN,getAuthMethod(KERBEROS,SIMPLE,UseToken.VALID));
  assertAuthEquals(BadToken,getAuthMethod(KERBEROS,SIMPLE,UseToken.INVALID));
  assertAuthEquals(Denied(SIMPLE),getAuthMethod(SIMPLE,TOKEN));
  assertAuthEquals(No(TOKEN),getAuthMethod(SIMPLE,TOKEN,UseToken.OTHER));
  assertAuthEquals(TOKEN,getAuthMethod(SIMPLE,TOKEN,UseToken.VALID));
  assertAuthEquals(BadToken,getAuthMethod(SIMPLE,TOKEN,UseToken.INVALID));
  assertAuthEquals(No(TOKEN),getAuthMethod(KERBEROS,TOKEN));
  assertAuthEquals(No(TOKEN),getAuthMethod(KERBEROS,TOKEN,UseToken.OTHER));
  assertAuthEquals(TOKEN,getAuthMethod(KERBEROS,TOKEN,UseToken.VALID));
  assertAuthEquals(BadToken,getAuthMethod(KERBEROS,TOKEN,UseToken.INVALID));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKerberosServerWithTokens() throws Exception {
  assertAuthEquals(TOKEN,getAuthMethod(SIMPLE,KERBEROS,UseToken.VALID));
  assertAuthEquals(TOKEN,getAuthMethod(KERBEROS,KERBEROS,UseToken.VALID));
  enableSecretManager=false;
  assertAuthEquals(No(KERBEROS),getAuthMethod(SIMPLE,KERBEROS,UseToken.VALID));
  assertAuthEquals(KrbFailed,getAuthMethod(KERBEROS,KERBEROS,UseToken.VALID));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.ipc.TestWeightedRoundRobinMultiplexer </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLegalInstantiation(){
  Configuration conf=new Configuration();
  conf.setStrings("namespace." + IPC_CALLQUEUE_WRRMUX_WEIGHTS_KEY,"1","2","3");
  mux=new WeightedRoundRobinMultiplexer(3,"namespace.",conf);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testInstantiateIllegalMux(){
  Configuration conf=new Configuration();
  conf.setStrings("namespace." + IPC_CALLQUEUE_WRRMUX_WEIGHTS_KEY,"1","2","3");
  mux=new WeightedRoundRobinMultiplexer(2,"namespace",conf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.jmx.TestJMXJsonServlet </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testQuery() throws Exception {
  String result=readOutput(new URL(baseUrl,"/jmx?qry=java.lang:type=Runtime"));
  LOG.info("/jmx?qry=java.lang:type=Runtime RESULT: " + result);
  assertReFind("\"name\"\\s*:\\s*\"java.lang:type=Runtime\"",result);
  assertReFind("\"modelerType\"",result);
  result=readOutput(new URL(baseUrl,"/jmx?qry=java.lang:type=Memory"));
  LOG.info("/jmx?qry=java.lang:type=Memory RESULT: " + result);
  assertReFind("\"name\"\\s*:\\s*\"java.lang:type=Memory\"",result);
  assertReFind("\"modelerType\"",result);
  result=readOutput(new URL(baseUrl,"/jmx"));
  LOG.info("/jmx RESULT: " + result);
  assertReFind("\"name\"\\s*:\\s*\"java.lang:type=Memory\"",result);
  result=readOutput(new URL(baseUrl,"/jmx?get=java.lang:type=Memory::HeapMemoryUsage"));
  LOG.info("/jmx RESULT: " + result);
  assertReFind("\"name\"\\s*:\\s*\"java.lang:type=Memory\"",result);
  assertReFind("\"committed\"\\s*:",result);
  result=readOutput(new URL(baseUrl,"/jmx?get=java.lang:type=Memory::"));
  LOG.info("/jmx RESULT: " + result);
  assertReFind("\"ERROR\"",result);
  result=readOutput(new URL(baseUrl,"/jmx?qry=java.lang:type=Memory&callback=mycallback1"));
  LOG.info("/jmx?qry=java.lang:type=Memory&callback=mycallback RESULT: " + result);
  assertReFind("^mycallback1\\(\\{",result);
  assertReFind("\\}\\);$",result);
  result=readOutput(new URL(baseUrl,"/jmx?get=java.lang:type=Memory::&callback=mycallback2"));
  LOG.info("/jmx RESULT: " + result);
  assertReFind("^mycallback2\\(\\{",result);
  assertReFind("\"ERROR\"",result);
  assertReFind("\\}\\);$",result);
  result=readOutput(new URL(baseUrl,"/jmx?get=java.lang:type=Memory::HeapMemoryUsage&callback=mycallback3"));
  LOG.info("/jmx RESULT: " + result);
  assertReFind("^mycallback3\\(\\{",result);
  assertReFind("\"name\"\\s*:\\s*\"java.lang:type=Memory\"",result);
  assertReFind("\"committed\"\\s*:",result);
  assertReFind("\\}\\);$",result);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.lib.lang.TestRunnableCallable </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RuntimeException.class) public void callableExRun() throws Exception {
  CEx c=new CEx();
  RunnableCallable rc=new RunnableCallable(c);
  rc.run();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.lib.server.TestServer </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) @TestDir public void illegalState2() throws Exception {
  Server server=new Server("server",TestDirHelper.getTestDir().getAbsolutePath(),new Configuration(false));
  server.get(Object.class);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) @TestDir public void illegalState1() throws Exception {
  Server server=new Server("server",TestDirHelper.getTestDir().getAbsolutePath(),new Configuration(false));
  server.destroy();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestException(exception=ServerException.class,msgRegExp="S04.*") @TestDir public void serviceNotImplementingServiceInterface() throws Exception {
  String dir=TestDirHelper.getTestDir().getAbsolutePath();
  Configuration conf=new Configuration(false);
  conf.set("server.services",MyService4.class.getName());
  Server server=new Server("server",dir,dir,dir,dir,conf);
  server.init();
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) @TestDir public void illegalState4() throws Exception {
  String dir=TestDirHelper.getTestDir().getAbsolutePath();
  Server server=new Server("server",dir,dir,dir,dir,new Configuration(false));
  server.init();
  server.init();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestException(exception=ServerException.class,msgRegExp="S01.*") @TestDir public void initNoHomeDir() throws Exception {
  File homeDir=new File(TestDirHelper.getTestDir(),"home");
  Configuration conf=new Configuration(false);
  conf.set("server.services",TestService.class.getName());
  Server server=new Server("server",homeDir.getAbsolutePath(),conf);
  server.init();
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) @TestDir public void illegalState3() throws Exception {
  Server server=new Server("server",TestDirHelper.getTestDir().getAbsolutePath(),new Configuration(false));
  server.setService(null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestException(exception=ServerException.class,msgRegExp="S08.*") @TestDir public void invalidSservice() throws Exception {
  String dir=TestDirHelper.getTestDir().getAbsolutePath();
  Configuration conf=new Configuration(false);
  conf.set("server.services","foo");
  Server server=new Server("server",dir,dir,dir,dir,conf);
  server.init();
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) @TestDir public void nonSeteableStatus() throws Exception {
  Configuration conf=new Configuration(false);
  Server server=createServer(conf);
  server.init();
  server.setStatus(Server.Status.SHUTDOWN);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestException(exception=ServerException.class,msgRegExp="S07.*") @TestDir public void serviceWithNoDefaultConstructor() throws Exception {
  String dir=TestDirHelper.getTestDir().getAbsolutePath();
  Configuration conf=new Configuration(false);
  conf.set("server.services",MyService7.class.getName());
  Server server=new Server("server",dir,dir,dir,dir,conf);
  server.init();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestException(exception=ServerException.class,msgRegExp="S02.*") @TestDir public void initHomeDirNotDir() throws Exception {
  File homeDir=new File(TestDirHelper.getTestDir(),"home");
  new FileOutputStream(homeDir).close();
  Configuration conf=new Configuration(false);
  conf.set("server.services",TestService.class.getName());
  Server server=new Server("server",homeDir.getAbsolutePath(),conf);
  server.init();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestException(exception=ServerException.class,msgRegExp="S11.*") @TestDir public void changeStatusServiceException() throws Exception {
  TestService.LIFECYCLE.clear();
  Configuration conf=new Configuration(false);
  conf.set("server.services",TestServiceExceptionOnStatusChange.class.getName());
  Server server=createServer(conf);
  server.init();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestDir public void log4jFile() throws Exception {
  InputStream is=Server.getResource("default-log4j.properties");
  OutputStream os=new FileOutputStream(new File(TestDirHelper.getTestDir(),"server-log4j.properties"));
  IOUtils.copyBytes(is,os,1024,true);
  Configuration conf=new Configuration(false);
  Server server=createServer(conf);
  server.init();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestException(exception=ServerException.class,msgRegExp="S10.*") @TestDir public void serviceWithMissingDependency() throws Exception {
  String dir=TestDirHelper.getTestDir().getAbsolutePath();
  Configuration conf=new Configuration(false);
  String services=StringUtils.join(",",Arrays.asList(MyService3.class.getName(),MyService6.class.getName()));
  conf.set("server.services",services);
  Server server=new Server("server",dir,dir,dir,dir,conf);
  server.init();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.lib.service.hadoop.TestFileSystemAccessService </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestException(exception=ServiceException.class,msgRegExp="H01.*") @TestDir public void noKerberosKeytabProperty() throws Exception {
  String dir=TestDirHelper.getTestDir().getAbsolutePath();
  String services=StringUtils.join(",",Arrays.asList(InstrumentationService.class.getName(),SchedulerService.class.getName(),FileSystemAccessService.class.getName()));
  Configuration conf=new Configuration(false);
  conf.set("server.services",services);
  conf.set("server.hadoop.authentication.type","kerberos");
  conf.set("server.hadoop.authentication.kerberos.keytab"," ");
  Server server=new Server("server",dir,dir,dir,dir,conf);
  server.init();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestException(exception=ServiceException.class,msgRegExp="H09.*") @TestDir public void invalidSecurity() throws Exception {
  String dir=TestDirHelper.getTestDir().getAbsolutePath();
  String services=StringUtils.join(",",Arrays.asList(InstrumentationService.class.getName(),SchedulerService.class.getName(),FileSystemAccessService.class.getName()));
  Configuration conf=new Configuration(false);
  conf.set("server.services",services);
  conf.set("server.hadoop.authentication.type","foo");
  Server server=new Server("server",dir,dir,dir,dir,conf);
  server.init();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestException(exception=ServiceException.class,msgRegExp="H02.*") @TestDir public void kerberosInitializationFailure() throws Exception {
  String dir=TestDirHelper.getTestDir().getAbsolutePath();
  String services=StringUtils.join(",",Arrays.asList(InstrumentationService.class.getName(),SchedulerService.class.getName(),FileSystemAccessService.class.getName()));
  Configuration conf=new Configuration(false);
  conf.set("server.services",services);
  conf.set("server.hadoop.authentication.type","kerberos");
  conf.set("server.hadoop.authentication.kerberos.keytab","/tmp/foo");
  conf.set("server.hadoop.authentication.kerberos.principal","foo@FOO");
  Server server=new Server("server",dir,dir,dir,dir,conf);
  server.init();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestException(exception=ServiceException.class,msgRegExp="H01.*") @TestDir public void noKerberosPrincipalProperty() throws Exception {
  String dir=TestDirHelper.getTestDir().getAbsolutePath();
  String services=StringUtils.join(",",Arrays.asList(InstrumentationService.class.getName(),SchedulerService.class.getName(),FileSystemAccessService.class.getName()));
  Configuration conf=new Configuration(false);
  conf.set("server.services",services);
  conf.set("server.hadoop.authentication.type","kerberos");
  conf.set("server.hadoop.authentication.kerberos.keytab","/tmp/foo");
  conf.set("server.hadoop.authentication.kerberos.principal"," ");
  Server server=new Server("server",dir,dir,dir,dir,conf);
  server.init();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestDir public void inWhitelists() throws Exception {
  String dir=TestDirHelper.getTestDir().getAbsolutePath();
  String services=StringUtils.join(",",Arrays.asList(InstrumentationService.class.getName(),SchedulerService.class.getName(),FileSystemAccessService.class.getName()));
  Configuration conf=new Configuration(false);
  conf.set("server.services",services);
  Server server=new Server("server",dir,dir,dir,dir,conf);
  server.init();
  FileSystemAccessService fsAccess=(FileSystemAccessService)server.get(FileSystemAccess.class);
  fsAccess.validateNamenode("NN");
  server.destroy();
  conf=new Configuration(false);
  conf.set("server.services",services);
  conf.set("server.hadoop.name.node.whitelist","*");
  server=new Server("server",dir,dir,dir,dir,conf);
  server.init();
  fsAccess=(FileSystemAccessService)server.get(FileSystemAccess.class);
  fsAccess.validateNamenode("NN");
  server.destroy();
  conf=new Configuration(false);
  conf.set("server.services",services);
  conf.set("server.hadoop.name.node.whitelist","NN");
  server=new Server("server",dir,dir,dir,dir,conf);
  server.init();
  fsAccess=(FileSystemAccessService)server.get(FileSystemAccess.class);
  fsAccess.validateNamenode("NN");
  server.destroy();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestException(exception=FileSystemAccessException.class,msgRegExp="H06.*") @TestDir @TestHdfs public void fileSystemExecutorNoNameNode() throws Exception {
  String dir=TestDirHelper.getTestDir().getAbsolutePath();
  String services=StringUtils.join(",",Arrays.asList(InstrumentationService.class.getName(),SchedulerService.class.getName(),FileSystemAccessService.class.getName()));
  Configuration hadoopConf=new Configuration(false);
  hadoopConf.set(CommonConfigurationKeysPublic.FS_DEFAULT_NAME_KEY,TestHdfsHelper.getHdfsConf().get(CommonConfigurationKeysPublic.FS_DEFAULT_NAME_KEY));
  createHadoopConf(hadoopConf);
  Configuration conf=new Configuration(false);
  conf.set("server.services",services);
  Server server=new Server("server",dir,dir,dir,dir,conf);
  server.init();
  FileSystemAccess fsAccess=server.get(FileSystemAccess.class);
  Configuration hdfsConf=fsAccess.getFileSystemConfiguration();
  hdfsConf.set(CommonConfigurationKeysPublic.FS_DEFAULT_NAME_KEY,"");
  fsAccess.execute("u",hdfsConf,new FileSystemAccess.FileSystemExecutor<Void>(){
    @Override public Void execute(    FileSystem fs) throws IOException {
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @TestException(exception=FileSystemAccessException.class,msgRegExp="H05.*") @TestDir public void NameNodeNotinWhitelists() throws Exception {
  String dir=TestDirHelper.getTestDir().getAbsolutePath();
  String services=StringUtils.join(",",Arrays.asList(InstrumentationService.class.getName(),SchedulerService.class.getName(),FileSystemAccessService.class.getName()));
  Configuration conf=new Configuration(false);
  conf.set("server.services",services);
  conf.set("server.hadoop.name.node.whitelist","NN");
  Server server=new Server("server",dir,dir,dir,dir,conf);
  server.init();
  FileSystemAccessService fsAccess=(FileSystemAccessService)server.get(FileSystemAccess.class);
  fsAccess.validateNamenode("NNx");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.lib.service.security.TestGroupsService </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RuntimeException.class) @TestDir public void invalidGroupsMapping() throws Exception {
  String dir=TestDirHelper.getTestDir().getAbsolutePath();
  Configuration conf=new Configuration(false);
  conf.set("server.services",StringUtils.join(",",Arrays.asList(GroupsService.class.getName())));
  conf.set("server.groups.hadoop.security.group.mapping",String.class.getName());
  Server server=new Server("server",dir,dir,dir,dir,conf);
  server.init();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.lib.servlet.TestServerWebApp </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=RuntimeException.class) @TestDir public void failedInit() throws Exception {
  String dir=TestDirHelper.getTestDir().getAbsolutePath();
  System.setProperty("TestServerWebApp2.home.dir",dir);
  System.setProperty("TestServerWebApp2.config.dir",dir);
  System.setProperty("TestServerWebApp2.log.dir",dir);
  System.setProperty("TestServerWebApp2.temp.dir",dir);
  System.setProperty("testserverwebapp2.services","FOO");
  ServerWebApp server=new ServerWebApp("TestServerWebApp2"){
  }
;
  server.contextInitialized(null);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void getHomeDirNotDef(){
  ServerWebApp.getHomeDir("TestServerWebApp00");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.lib.util.TestCheck </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void notEmptyElementsNullElements(){
  Check.notEmptyElements(Arrays.asList("a",null),"name");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void checkGTZeroLessThanZero(){
  Check.gt0(-1,"test");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void notNullNull(){
  Check.notNull(null,"name");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void checkGELessThanZero(){
  Check.ge0(-1,"test");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void validIdentifierInvalid2() throws Exception {
  Check.validIdentifier("a1",1,"");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void notNullElementsNullList(){
  Check.notNullElements(null,"name");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void notEmptyElementsNotNull(){
  Check.notEmptyElements(new ArrayList<String>(),"name");
  Check.notEmptyElements(Arrays.asList("a"),"name");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void validIdentifierInvalid1() throws Exception {
  Check.validIdentifier("!",1,"");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void notEmptyElementsEmptyElements(){
  Check.notEmptyElements(Arrays.asList("a",""),"name");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void notEmptyEmpty(){
  Check.notEmpty("","name");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void notEmptyElementsNullList(){
  Check.notEmptyElements(null,"name");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void notEmptyNull(){
  Check.notEmpty(null,"name");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void validIdentifierInvalid3() throws Exception {
  Check.validIdentifier("1",1,"");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void notNullElementsNotNull(){
  Check.notNullElements(new ArrayList<String>(),"name");
  Check.notNullElements(Arrays.asList("a"),"name");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void notNullElementsNullElements(){
  Check.notNullElements(Arrays.asList("a","",null),"name");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void checkGTZeroZero(){
  Check.gt0(0,"test");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.lib.util.TestConfigurationUtils </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IOException.class) public void constructorsFail3() throws Exception {
  InputStream is=new ByteArrayInputStream("<xonfiguration></xonfiguration>".getBytes());
  Configuration conf=new Configuration(false);
  ConfigurationUtils.load(conf,is);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.lib.wsrs.TestParam </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRegEx() throws Exception {
  Param<String> param=new StringParam("r","aa",Pattern.compile("..")){
  }
;
  test(param,"r","..","aa","bb","c",null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testString() throws Exception {
  Param<String> param=new StringParam("s","foo"){
  }
;
  test(param,"s","a string","foo","bar",null,null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLong() throws Exception {
  Param<Long> param=new LongParam("L",1L){
  }
;
  test(param,"L","a long",1L,2L,"x",null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBoolean() throws Exception {
  Param<Boolean> param=new BooleanParam("b",false){
  }
;
  test(param,"b","a boolean",false,true,"x",null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEnum() throws Exception {
  EnumParam<ENUM> param=new EnumParam<ENUM>("e",ENUM.class,ENUM.FOO){
  }
;
  test(param,"e","FOO,BAR",ENUM.FOO,ENUM.BAR,"x",null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInteger() throws Exception {
  Param<Integer> param=new IntegerParam("I",1){
  }
;
  test(param,"I","an integer",1,2,"x","" + ((long)Integer.MAX_VALUE + 1));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testByte() throws Exception {
  Param<Byte> param=new ByteParam("B",(byte)1){
  }
;
  test(param,"B","a byte",(byte)1,(byte)2,"x","256");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.log.TestLog4Json </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Create a log instance and and log to it
 * @throws Throwable if it all goes wrong
 */
@Test public void testLog() throws Throwable {
  String message="test message";
  Throwable throwable=null;
  String json=logOut(message,throwable);
  println("testLog",json);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConstruction() throws Throwable {
  Log4Json l4j=new Log4Json();
  String outcome=l4j.toJson(new StringWriter(),"name",0,"DEBUG","thread1","hello, world",null).toString();
  println("testConstruction",outcome);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testException() throws Throwable {
  Exception e=new NoRouteToHostException("that box caught fire 3 years ago");
  ThrowableInformation ti=new ThrowableInformation(e);
  Log4Json l4j=new Log4Json();
  long timeStamp=Time.now();
  String outcome=l4j.toJson(new StringWriter(),"testException",timeStamp,"INFO","quoted\"","new line\n and {}",ti).toString();
  println("testException",outcome);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Create a log instance and and log to it
 * @throws Throwable if it all goes wrong
 */
@Test public void testLogExceptions() throws Throwable {
  String message="test message";
  Throwable inner=new IOException("Directory / not found");
  Throwable throwable=new IOException("startup failure",inner);
  String json=logOut(message,throwable);
  println("testLogExceptions",json);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.TestClientServiceDelegate </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRMDownForJobStatusBeforeGetAMReport() throws IOException {
  Configuration conf=new YarnConfiguration();
  testRMDownForJobStatusBeforeGetAMReport(conf,MRJobConfig.DEFAULT_MR_CLIENT_MAX_RETRIES);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRMDownForJobStatusBeforeGetAMReportWithRetryTimes() throws IOException {
  Configuration conf=new YarnConfiguration();
  conf.setInt(MRJobConfig.MR_CLIENT_MAX_RETRIES,2);
  testRMDownForJobStatusBeforeGetAMReport(conf,conf.getInt(MRJobConfig.MR_CLIENT_MAX_RETRIES,MRJobConfig.DEFAULT_MR_CLIENT_MAX_RETRIES));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.TestCombineOutputCollector </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDefaultCollect() throws Throwable {
  TaskReporter mockTaskReporter=mock(TaskReporter.class);
  @SuppressWarnings("unchecked") Writer<String,Integer> mockWriter=mock(Writer.class);
  Configuration conf=new Configuration();
  coc=new CombineOutputCollector<String,Integer>(outCounter,mockTaskReporter,conf);
  coc.setWriter(mockWriter);
  verify(mockTaskReporter,never()).progress();
  for (int i=0; i < Task.DEFAULT_COMBINE_RECORDS_BEFORE_PROGRESS; i++) {
    coc.collect("dummy",i);
  }
  verify(mockTaskReporter,times(1)).progress();
  for (int i=0; i < Task.DEFAULT_COMBINE_RECORDS_BEFORE_PROGRESS; i++) {
    coc.collect("dummy",i);
  }
  verify(mockTaskReporter,times(2)).progress();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCustomCollect() throws Throwable {
  TaskReporter mockTaskReporter=mock(TaskReporter.class);
  @SuppressWarnings("unchecked") Writer<String,Integer> mockWriter=mock(Writer.class);
  Configuration conf=new Configuration();
  conf.set(MRJobConfig.COMBINE_RECORDS_BEFORE_PROGRESS,"2");
  coc=new CombineOutputCollector<String,Integer>(outCounter,mockTaskReporter,conf);
  coc.setWriter(mockWriter);
  verify(mockTaskReporter,never()).progress();
  coc.collect("dummy",1);
  verify(mockTaskReporter,never()).progress();
  coc.collect("dummy",2);
  verify(mockTaskReporter,times(1)).progress();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.TestCounters </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings("deprecation") @Test public void testWriteWithLegacyNames(){
  Counters counters=new Counters();
  counters.incrCounter(Task.Counter.MAP_INPUT_RECORDS,1);
  counters.incrCounter(JobInProgress.Counter.DATA_LOCAL_MAPS,1);
  counters.findCounter("FileSystemCounters","FILE_BYTES_READ").increment(1);
  checkLegacyNames(counters);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCounters() throws IOException {
  Enum[] keysWithResource={TaskCounter.MAP_INPUT_RECORDS,TaskCounter.MAP_OUTPUT_BYTES};
  Enum[] keysWithoutResource={myCounters.TEST1,myCounters.TEST2};
  String[] groups={"group1","group2","group{}()[]"};
  String[] counters={"counter1","counter2","counter{}()[]"};
  try {
    testCounter(getEnumCounters(keysWithResource));
    testCounter(getEnumCounters(keysWithoutResource));
    testCounter(getEnumCounters(groups,counters));
  }
 catch (  ParseException pe) {
    throw new IOException(pe);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings("deprecation") @Test public void testGroupIteratorConcurrency(){
  Counters counters=new Counters();
  counters.incrCounter("group1","counter1",1);
  Group group=counters.getGroup("group1");
  Iterator<Counter> iterator=group.iterator();
  counters.incrCounter("group1","counter2",1);
  iterator.next();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCounterLimits(){
  testMaxCountersLimits(new Counters());
  testMaxGroupsLimits(new Counters());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings("deprecation") @Test public void testCounterIteratorConcurrency(){
  Counters counters=new Counters();
  counters.incrCounter("group1","counter1",1);
  Iterator<Group> iterator=counters.iterator();
  counters.incrCounter("group2","counter2",1);
  iterator.next();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings("deprecation") @Test public void testReadWithLegacyNames(){
  Counters counters=new Counters();
  counters.incrCounter(TaskCounter.MAP_INPUT_RECORDS,1);
  counters.incrCounter(JobCounter.DATA_LOCAL_MAPS,1);
  counters.findCounter("file",FileSystemCounter.BYTES_READ).increment(1);
  checkLegacyNames(counters);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.TestFileInputFormat </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testListStatusNestedRecursive() throws IOException {
  Configuration conf=new Configuration();
  conf.setInt(FileInputFormat.LIST_STATUS_NUM_THREADS,numThreads);
  List<Path> expectedPaths=org.apache.hadoop.mapreduce.lib.input.TestFileInputFormat.configureTestNestedRecursive(conf,localFs);
  JobConf jobConf=new JobConf(conf);
  TextInputFormat fif=new TextInputFormat();
  fif.configure(jobConf);
  FileStatus[] statuses=fif.listStatus(jobConf);
  org.apache.hadoop.mapreduce.lib.input.TestFileInputFormat.verifyFileStatuses(expectedPaths,Lists.newArrayList(statuses),localFs);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testListStatusSimple() throws IOException {
  Configuration conf=new Configuration();
  conf.setInt(FileInputFormat.LIST_STATUS_NUM_THREADS,numThreads);
  List<Path> expectedPaths=org.apache.hadoop.mapreduce.lib.input.TestFileInputFormat.configureTestSimple(conf,localFs);
  JobConf jobConf=new JobConf(conf);
  TextInputFormat fif=new TextInputFormat();
  fif.configure(jobConf);
  FileStatus[] statuses=fif.listStatus(jobConf);
  org.apache.hadoop.mapreduce.lib.input.TestFileInputFormat.verifyFileStatuses(expectedPaths,Lists.newArrayList(statuses),localFs);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testListStatusNestedNonRecursive() throws IOException {
  Configuration conf=new Configuration();
  conf.setInt(FileInputFormat.LIST_STATUS_NUM_THREADS,numThreads);
  List<Path> expectedPaths=org.apache.hadoop.mapreduce.lib.input.TestFileInputFormat.configureTestNestedNonRecursive(conf,localFs);
  JobConf jobConf=new JobConf(conf);
  TextInputFormat fif=new TextInputFormat();
  fif.configure(jobConf);
  FileStatus[] statuses=fif.listStatus(jobConf);
  org.apache.hadoop.mapreduce.lib.input.TestFileInputFormat.verifyFileStatuses(expectedPaths,Lists.newArrayList(statuses),localFs);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.TestFixedLengthInputFormat </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * 20 random tests of various record, file, and split sizes.  All tests have
 * compressed file as input.
 */
@Test(timeout=500000) public void testFormatCompressedIn() throws IOException {
  runRandomTests(new GzipCodec());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test with partial record at the end of a compressed input file.
 */
@Test(timeout=5000) public void testPartialRecordCompressedIn() throws IOException {
  CompressionCodec gzip=new GzipCodec();
  runPartialRecordTest(gzip);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test with partial record at the end of an uncompressed input file.
 */
@Test(timeout=5000) public void testPartialRecordUncompressedIn() throws IOException {
  runPartialRecordTest(null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * 20 random tests of various record, file, and split sizes.  All tests have
 * uncompressed file as input.
 */
@Test(timeout=500000) public void testFormat() throws IOException {
  runRandomTests(null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.TestIFile </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testIFileWriterWithCodec() throws Exception {
  Configuration conf=new Configuration();
  FileSystem localFs=FileSystem.getLocal(conf);
  FileSystem rfs=((LocalFileSystem)localFs).getRaw();
  Path path=new Path(new Path("build/test.ifile"),"data");
  DefaultCodec codec=new GzipCodec();
  codec.setConf(conf);
  IFile.Writer<Text,Text> writer=new IFile.Writer<Text,Text>(conf,rfs.create(path),Text.class,Text.class,codec,null);
  writer.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.TestJobCleanup </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test if a failed job with custom committer runs the deprecated{@link FileOutputCommitter#cleanupJob(JobContext)} code for api
 * compatibility testing.
 */
@Test public void testCustomCleanup() throws IOException {
  testSuccessfulJob(CUSTOM_CLEANUP_FILE_NAME,CommitterWithCustomDeprecatedCleanup.class,new String[]{});
  testFailedJob(CUSTOM_CLEANUP_FILE_NAME,CommitterWithCustomDeprecatedCleanup.class,new String[]{FileOutputCommitter.SUCCEEDED_FILE_NAME});
  testKilledJob(TestJobCleanup.CUSTOM_CLEANUP_FILE_NAME,CommitterWithCustomDeprecatedCleanup.class,new String[]{FileOutputCommitter.SUCCEEDED_FILE_NAME});
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test if a failed job with custom committer runs the abort code.
 * @throws IOException
 */
@Test public void testCustomAbort() throws IOException {
  testSuccessfulJob(FileOutputCommitter.SUCCEEDED_FILE_NAME,CommitterWithCustomAbort.class,new String[]{ABORT_FAILED_FILE_NAME,ABORT_KILLED_FILE_NAME});
  testFailedJob(ABORT_FAILED_FILE_NAME,CommitterWithCustomAbort.class,new String[]{FileOutputCommitter.SUCCEEDED_FILE_NAME,ABORT_KILLED_FILE_NAME});
  testKilledJob(ABORT_KILLED_FILE_NAME,CommitterWithCustomAbort.class,new String[]{FileOutputCommitter.SUCCEEDED_FILE_NAME,ABORT_FAILED_FILE_NAME});
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test default cleanup/abort behavior
 * @throws IOException
 */
@Test public void testDefaultCleanupAndAbort() throws IOException {
  testSuccessfulJob(FileOutputCommitter.SUCCEEDED_FILE_NAME,FileOutputCommitter.class,new String[]{});
  testFailedJob(null,FileOutputCommitter.class,new String[]{FileOutputCommitter.SUCCEEDED_FILE_NAME});
  testKilledJob(null,FileOutputCommitter.class,new String[]{FileOutputCommitter.SUCCEEDED_FILE_NAME});
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.TestJobCounters </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOldCounterC() throws Exception {
  JobConf conf=createConfiguration();
  createWordsFile(inFiles[3],conf);
  createWordsFile(inFiles[4],conf);
  long inputSize=0;
  inputSize+=getFileSize(inFiles[0]);
  inputSize+=getFileSize(inFiles[1]);
  inputSize+=getFileSize(inFiles[2]);
  inputSize+=getFileSize(inFiles[3]);
  inputSize+=getFileSize(inFiles[4]);
  conf.setNumMapTasks(4);
  conf.setInt(JobContext.IO_SORT_FACTOR,3);
  FileInputFormat.setInputPaths(conf,IN_DIR);
  FileOutputFormat.setOutputPath(conf,new Path(OUT_DIR,"outputO2"));
  RunningJob myJob=JobClient.runJob(conf);
  Counters c1=myJob.getCounters();
  validateCounters(c1,122880,25600,102400);
  validateFileCounters(c1,inputSize,0,0,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOldCounterD() throws Exception {
  JobConf conf=createConfiguration();
  conf.setNumMapTasks(3);
  conf.setInt(JobContext.IO_SORT_FACTOR,2);
  conf.setNumReduceTasks(0);
  removeWordsFile(inFiles[3],conf);
  removeWordsFile(inFiles[4],conf);
  long inputSize=0;
  inputSize+=getFileSize(inFiles[0]);
  inputSize+=getFileSize(inFiles[1]);
  inputSize+=getFileSize(inFiles[2]);
  FileInputFormat.setInputPaths(conf,IN_DIR);
  FileOutputFormat.setOutputPath(conf,new Path(OUT_DIR,"outputO3"));
  RunningJob myJob=JobClient.runJob(conf);
  Counters c1=myJob.getCounters();
  validateCounters(c1,0,15360,61440);
  validateFileCounters(c1,inputSize,0,-1,-1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings("deprecation") @Test public void testOldCounters() throws Exception {
  Counters c1=new Counters();
  c1.incrCounter(FileInputFormat.Counter.BYTES_READ,100);
  c1.incrCounter(FileOutputFormat.Counter.BYTES_WRITTEN,200);
  c1.incrCounter(TaskCounter.MAP_OUTPUT_BYTES,100);
  c1.incrCounter(TaskCounter.MAP_OUTPUT_MATERIALIZED_BYTES,100);
  validateFileCounters(c1,100,200,100,100);
  validateOldFileCounters(c1,100,200,100,100);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOldCounterA() throws Exception {
  JobConf conf=createConfiguration();
  conf.setNumMapTasks(3);
  conf.setInt(JobContext.IO_SORT_FACTOR,2);
  removeWordsFile(inFiles[3],conf);
  removeWordsFile(inFiles[4],conf);
  long inputSize=0;
  inputSize+=getFileSize(inFiles[0]);
  inputSize+=getFileSize(inFiles[1]);
  inputSize+=getFileSize(inFiles[2]);
  FileInputFormat.setInputPaths(conf,IN_DIR);
  FileOutputFormat.setOutputPath(conf,new Path(OUT_DIR,"outputO0"));
  RunningJob myJob=JobClient.runJob(conf);
  Counters c1=myJob.getCounters();
  validateCounters(c1,73728,15360,61440);
  validateFileCounters(c1,inputSize,0,0,0);
  validateOldFileCounters(c1,inputSize,61928,0,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOldCounterB() throws Exception {
  JobConf conf=createConfiguration();
  createWordsFile(inFiles[3],conf);
  removeWordsFile(inFiles[4],conf);
  long inputSize=0;
  inputSize+=getFileSize(inFiles[0]);
  inputSize+=getFileSize(inFiles[1]);
  inputSize+=getFileSize(inFiles[2]);
  inputSize+=getFileSize(inFiles[3]);
  conf.setNumMapTasks(4);
  conf.setInt(JobContext.IO_SORT_FACTOR,2);
  FileInputFormat.setInputPaths(conf,IN_DIR);
  FileOutputFormat.setOutputPath(conf,new Path(OUT_DIR,"outputO1"));
  RunningJob myJob=JobClient.runJob(conf);
  Counters c1=myJob.getCounters();
  validateCounters(c1,98304,20480,81920);
  validateFileCounters(c1,inputSize,0,0,0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.TestLineRecordReader </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBzip2SplitEndsAtCR() throws IOException {
  testSplitRecords("blockEndingInCR.txt.bz2",136498);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRecordSpanningMultipleSplitsCompressed() throws IOException {
  checkRecordSpanningMultipleSplits("recordSpanningMultipleSplits.txt.bz2",200 * 1000,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRecordSpanningMultipleSplits() throws IOException {
  checkRecordSpanningMultipleSplits("recordSpanningMultipleSplits.txt",10,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBzip2SplitEndsAtCRThenLF() throws IOException {
  testSplitRecords("blockEndingInCRThenLF.txt.bz2",136498);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.TestLocalContainerLauncher </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings("rawtypes") @Test(timeout=10000) public void testKillJob() throws Exception {
  JobConf conf=new JobConf();
  AppContext context=mock(AppContext.class);
  final CountDownLatch isDone=new CountDownLatch(1);
  EventHandler handler=new EventHandler(){
    @Override public void handle(    Event event){
      LOG.info("handling event " + event.getClass() + " with type "+ event.getType());
      if (event instanceof TaskAttemptEvent) {
        if (event.getType() == TaskAttemptEventType.TA_CONTAINER_CLEANED) {
          isDone.countDown();
        }
      }
    }
  }
;
  when(context.getEventHandler()).thenReturn(handler);
  LocalContainerLauncher launcher=new LocalContainerLauncher(context,mock(TaskUmbilicalProtocol.class));
  launcher.init(conf);
  launcher.start();
  JobId jobId=MRBuilderUtils.newJobId(System.currentTimeMillis(),1,1);
  TaskId taskId=MRBuilderUtils.newTaskId(jobId,1,TaskType.MAP);
  TaskAttemptId taId=MRBuilderUtils.newTaskAttemptId(taskId,0);
  Job job=mock(Job.class);
  when(job.getTotalMaps()).thenReturn(1);
  when(job.getTotalReduces()).thenReturn(0);
  Map<JobId,Job> jobs=new HashMap<JobId,Job>();
  jobs.put(jobId,job);
  when(context.getAllJobs()).thenReturn(jobs);
  org.apache.hadoop.mapreduce.v2.app.job.Task ytask=mock(org.apache.hadoop.mapreduce.v2.app.job.Task.class);
  when(ytask.getType()).thenReturn(TaskType.MAP);
  when(job.getTask(taskId)).thenReturn(ytask);
  MapTask mapTask=mock(MapTask.class);
  when(mapTask.isMapOrReduce()).thenReturn(true);
  when(mapTask.isMapTask()).thenReturn(true);
  TaskAttemptID taskID=TypeConverter.fromYarn(taId);
  when(mapTask.getTaskID()).thenReturn(taskID);
  when(mapTask.getJobID()).thenReturn(taskID.getJobID());
  doAnswer(new Answer<Void>(){
    @Override public Void answer(    InvocationOnMock invocation) throws Throwable {
      LOG.info("sleeping for 5 minutes...");
      Thread.sleep(5 * 60 * 1000);
      return null;
    }
  }
).when(mapTask).run(isA(JobConf.class),isA(TaskUmbilicalProtocol.class));
  ContainerLauncherEvent launchEvent=new ContainerRemoteLaunchEvent(taId,null,createMockContainer(),mapTask);
  launcher.handle(launchEvent);
  Thread.sleep(200);
  ContainerLauncherEvent cleanupEvent=new ContainerLauncherEvent(taId,null,null,null,ContainerLauncher.EventType.CONTAINER_REMOTE_CLEANUP);
  launcher.handle(cleanupEvent);
  isDone.await();
  launcher.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.TestLocalDistributedCacheManager </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEmptyDownload() throws Exception {
  JobConf conf=new JobConf();
  conf.setClass("fs.mock.impl",MockFileSystem.class,FileSystem.class);
  URI mockBase=new URI("mock://test-nn1/");
  when(mockfs.getUri()).thenReturn(mockBase);
  Path working=new Path("mock://test-nn1/user/me/");
  when(mockfs.getWorkingDirectory()).thenReturn(working);
  when(mockfs.resolvePath(any(Path.class))).thenAnswer(new Answer<Path>(){
    @Override public Path answer(    InvocationOnMock args) throws Throwable {
      return (Path)args.getArguments()[0];
    }
  }
);
  when(mockfs.getFileStatus(any(Path.class))).thenAnswer(new Answer<FileStatus>(){
    @Override public FileStatus answer(    InvocationOnMock args) throws Throwable {
      Path p=(Path)args.getArguments()[0];
      throw new FileNotFoundException(p + " not supported by mocking");
    }
  }
);
  when(mockfs.getConf()).thenReturn(conf);
  when(mockfs.open(any(Path.class),anyInt())).thenAnswer(new Answer<FSDataInputStream>(){
    @Override public FSDataInputStream answer(    InvocationOnMock args) throws Throwable {
      Path src=(Path)args.getArguments()[0];
      throw new FileNotFoundException(src + " not supported by mocking");
    }
  }
);
  conf.set(MRJobConfig.CACHE_FILES,"");
  conf.set(MRConfig.LOCAL_DIR,localDir.getAbsolutePath());
  LocalDistributedCacheManager manager=new LocalDistributedCacheManager();
  try {
    manager.setup(conf);
  }
  finally {
    manager.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.TestMRCJCJobConf </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that findContainingJar works correctly even if the
 * path has a "+" sign or spaces in it
 */
@Test public void testFindContainingJarWithPlus() throws Exception {
  new File(TEST_DIR_WITH_SPECIAL_CHARS).mkdirs();
  Configuration conf=new Configuration();
  FileSystem localfs=FileSystem.getLocal(conf);
  FileUtil.copy(localfs,new Path(JAR_RELATIVE_PATH),localfs,new Path(TEST_DIR_WITH_SPECIAL_CHARS,"test.jar"),false,true,conf);
  testJarAtPath(TEST_DIR_WITH_SPECIAL_CHARS + File.separator + "test.jar");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFindContainingJar() throws Exception {
  testJarAtPath(JAR_RELATIVE_PATH);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.TestMRIntermediateDataEncryption </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultipleMapsPerNode() throws Exception {
  doEncryptionTest(8,1,2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultipleReducers() throws Exception {
  doEncryptionTest(2,4,2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleReducer() throws Exception {
  doEncryptionTest(3,1,2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.TestMapRed </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * public TestMapRed(int range, int counts, Configuration conf) throws IOException {
 * this.range = range;
 * this.counts = counts;
 * this.conf = conf;
 * }
 */
@Test public void testMapred() throws Exception {
  launch();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBiggerInput(){
  runJob(1000);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCompression() throws Exception {
  EnumSet<SequenceFile.CompressionType> seq=EnumSet.allOf(SequenceFile.CompressionType.class);
  for (  CompressionType redCompression : seq) {
    for (int combine=0; combine < 2; ++combine) {
      checkCompression(false,redCompression,combine == 1);
      checkCompression(true,redCompression,combine == 1);
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSmallInput(){
  runJob(100);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.TestMiniMRWithDFSWithDistinctUsers </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDistinctUsers() throws Exception {
  JobConf job1=mr.createJobConf();
  String input="The quick brown fox\nhas many silly\n" + "red fox sox\n";
  Path inDir=new Path("/testing/distinct/input");
  Path outDir=new Path("/user/alice/output");
  TestMiniMRClasspath.configureWordCount(fs,job1,input,2,1,inDir,outDir);
  runJobAsUser(job1,ALICE_UGI);
  JobConf job2=mr.createJobConf();
  Path inDir2=new Path("/testing/distinct/input2");
  Path outDir2=new Path("/user/bob/output2");
  TestMiniMRClasspath.configureWordCount(fs,job2,input,2,1,inDir2,outDir2);
  runJobAsUser(job2,BOB_UGI);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Regression test for MAPREDUCE-2327. Verifies that, even if a map
 * task makes lots of spills (more than fit in the spill index cache)
 * that it will succeed.
 */
@Test public void testMultipleSpills() throws Exception {
  JobConf job1=mr.createJobConf();
  job1.setFloat(MRJobConfig.MAP_SORT_SPILL_PERCENT,0.0001f);
  job1.setInt(MRJobConfig.IO_SORT_MB,1);
  job1.setInt(MRJobConfig.INDEX_CACHE_MEMORY_LIMIT,0);
  String input="The quick brown fox\nhas many silly\n" + "red fox sox\n";
  Path inDir=new Path("/testing/distinct/input");
  Path outDir=new Path("/user/alice/output");
  TestMiniMRClasspath.configureWordCount(fs,job1,input,2,1,inDir,outDir);
  runJobAsUser(job1,ALICE_UGI);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.TestShuffleHandler </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Validate shuffle connection and input/output metrics.
 * @throws Exception exception
 */
@Test(timeout=10000) public void testShuffleMetrics() throws Exception {
  MetricsSystem ms=new MetricsSystemImpl();
  ShuffleHandler sh=new ShuffleHandler(ms);
  ChannelFuture cf=make(stub(ChannelFuture.class).returning(true,false).from.isSuccess());
  sh.metrics.shuffleConnections.incr();
  sh.metrics.shuffleOutputBytes.incr(1 * MiB);
  sh.metrics.shuffleConnections.incr();
  sh.metrics.shuffleOutputBytes.incr(2 * MiB);
  checkShuffleMetrics(ms,3 * MiB,0,0,2);
  sh.metrics.operationComplete(cf);
  sh.metrics.operationComplete(cf);
  checkShuffleMetrics(ms,3 * MiB,1,1,0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.TestTaskStatus </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMapTaskStatusStartAndFinishTimes(){
  checkTaskStatues(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReduceTaskStatusStartAndFinishTimes(){
  checkTaskStatues(false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.TestYARNRunner </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testGetHSDelegationToken() throws Exception {
  try {
    Configuration conf=new Configuration();
    InetSocketAddress mockRmAddress=new InetSocketAddress("localhost",4444);
    Text rmTokenSevice=SecurityUtil.buildTokenService(mockRmAddress);
    InetSocketAddress mockHsAddress=new InetSocketAddress("localhost",9200);
    Text hsTokenSevice=SecurityUtil.buildTokenService(mockHsAddress);
    RMDelegationTokenIdentifier tokenIdentifier=new RMDelegationTokenIdentifier(new Text("owner"),new Text("renewer"),new Text("real"));
    Token<RMDelegationTokenIdentifier> token=new Token<RMDelegationTokenIdentifier>(new byte[0],new byte[0],tokenIdentifier.getKind(),rmTokenSevice);
    token.setKind(RMDelegationTokenIdentifier.KIND_NAME);
    org.apache.hadoop.yarn.api.records.Token historyToken=org.apache.hadoop.yarn.api.records.Token.newInstance(new byte[0],MRDelegationTokenIdentifier.KIND_NAME.toString(),new byte[0],hsTokenSevice.toString());
    GetDelegationTokenResponse getDtResponse=Records.newRecord(GetDelegationTokenResponse.class);
    getDtResponse.setDelegationToken(historyToken);
    MRClientProtocol mockHsProxy=mock(MRClientProtocol.class);
    doReturn(mockHsAddress).when(mockHsProxy).getConnectAddress();
    doReturn(getDtResponse).when(mockHsProxy).getDelegationToken(any(GetDelegationTokenRequest.class));
    ResourceMgrDelegate rmDelegate=mock(ResourceMgrDelegate.class);
    doReturn(rmTokenSevice).when(rmDelegate).getRMDelegationTokenService();
    ClientCache clientCache=mock(ClientCache.class);
    doReturn(mockHsProxy).when(clientCache).getInitializedHSProxy();
    Credentials creds=new Credentials();
    YARNRunner yarnRunner=new YARNRunner(conf,rmDelegate,clientCache);
    yarnRunner.addHistoryToken(creds);
    verify(mockHsProxy,times(0)).getDelegationToken(any(GetDelegationTokenRequest.class));
    creds.addToken(new Text("rmdt"),token);
    yarnRunner.addHistoryToken(creds);
    verify(mockHsProxy,times(0)).getDelegationToken(any(GetDelegationTokenRequest.class));
    conf.set(CommonConfigurationKeys.HADOOP_SECURITY_AUTHENTICATION,"kerberos");
    UserGroupInformation.setConfiguration(conf);
    creds=new Credentials();
    yarnRunner.addHistoryToken(creds);
    verify(mockHsProxy,times(0)).getDelegationToken(any(GetDelegationTokenRequest.class));
    creds.addToken(new Text("rmdt"),token);
    yarnRunner.addHistoryToken(creds);
    verify(mockHsProxy,times(1)).getDelegationToken(any(GetDelegationTokenRequest.class));
    yarnRunner.addHistoryToken(creds);
    verify(mockHsProxy,times(1)).getDelegationToken(any(GetDelegationTokenRequest.class));
  }
  finally {
    UserGroupInformation.setConfiguration(new Configuration());
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testJobKill() throws Exception {
  clientDelegate=mock(ClientServiceDelegate.class);
  when(clientDelegate.getJobStatus(any(JobID.class))).thenReturn(new org.apache.hadoop.mapreduce.JobStatus(jobId,0f,0f,0f,0f,State.PREP,JobPriority.HIGH,"tmp","tmp","tmp","tmp"));
  when(clientDelegate.killJob(any(JobID.class))).thenReturn(true);
  doAnswer(new Answer<ClientServiceDelegate>(){
    @Override public ClientServiceDelegate answer(    InvocationOnMock invocation) throws Throwable {
      return clientDelegate;
    }
  }
).when(clientCache).getClient(any(JobID.class));
  yarnRunner.killJob(jobId);
  verify(resourceMgrDelegate).killApplication(appId);
  when(clientDelegate.getJobStatus(any(JobID.class))).thenReturn(new org.apache.hadoop.mapreduce.JobStatus(jobId,0f,0f,0f,0f,State.RUNNING,JobPriority.HIGH,"tmp","tmp","tmp","tmp"));
  yarnRunner.killJob(jobId);
  verify(clientDelegate).killJob(jobId);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.gridmix.TestDistCacheEmulation </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test if DistributedCacheEmulator's setup of GenerateDistCacheData is
 * working as expected.
 * @throws IOException
 * @throws InterruptedException
 */
@Test(timeout=20000) public void testSetupGenerateDistCacheData() throws IOException, InterruptedException {
  long[] sortedFileSizes=new long[5];
  Configuration jobConf=runSetupGenerateDistCacheData(true,sortedFileSizes);
  validateSetupGenDC(jobConf,sortedFileSizes);
  runSetupGenerateDistCacheData(false,sortedFileSizes);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.gridmix.TestFilePool </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStriper() throws Exception {
  final Random r=new Random();
  final Configuration conf=new Configuration();
  final FileSystem fs=FileSystem.getLocal(conf).getRaw();
  conf.setLong(FilePool.GRIDMIX_MIN_FILE,3 * 1024);
  final FilePool pool=new FilePool(conf,base){
    @Override public BlockLocation[] locationsFor(    FileStatus stat,    long start,    long len) throws IOException {
      return new BlockLocation[]{new BlockLocation()};
    }
  }
;
  pool.refresh();
  final int expectedPoolSize=(NFILES / 2 * (NFILES / 2 + 1) - 6) * 1024;
  final InputStriper striper=new InputStriper(pool,expectedPoolSize);
  int last=0;
  for (int i=0; i < expectedPoolSize; last=Math.min(expectedPoolSize - i,r.nextInt(expectedPoolSize))) {
    checkSplitEq(fs,striper.splitFor(pool,last,0),last);
    i+=last;
  }
  final InputStriper striper2=new InputStriper(pool,expectedPoolSize);
  checkSplitEq(fs,striper2.splitFor(pool,expectedPoolSize,0),expectedPoolSize);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.gridmix.TestGridmixMemoryEmulation </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test task-level java heap options configuration in {@link GridmixJob}.
 */
@Test public void testJavaHeapOptions() throws Exception {
  testJavaHeapOptions(null,null,null,null,null,null,null,null,null);
  testJavaHeapOptions("-Xms10m","-Xms20m","-Xms30m",null,null,null,null,null,null);
  testJavaHeapOptions(null,null,null,"-Xms10m","-Xms20m","-Xms30m","-Xms10m","-Xms20m","-Xms30m");
  testJavaHeapOptions("","","",null,null,null,null,null,null);
  testJavaHeapOptions(null,null,null,"","","","","","");
  testJavaHeapOptions("","","","-Xmx10m -Xms1m","-Xmx50m -Xms2m","-Xms2m -Xmx100m","-Xmx10m -Xms1m","-Xmx50m -Xms2m","-Xms2m -Xmx100m");
  testJavaHeapOptions("-Xmx10m","-Xmx20m","-Xmx30m",null,null,null,"-Xmx10m","-Xmx20m","-Xmx30m");
  testJavaHeapOptions("-Xms5m -Xmx200m","-Xms15m -Xmx300m","-Xms25m -Xmx50m","-XXabc","-XXxyz","-XXdef","-XXabc -Xmx200m","-XXxyz -Xmx300m","-XXdef -Xmx50m");
  testJavaHeapOptions("-Xms5m -Xmx200m","-Xms15m -Xmx300m","-Xms25m -Xmx50m","-XXabc -Xmx500m","-XXxyz -Xmx600m","-XXdef -Xmx700m","-XXabc -Xmx200m","-XXxyz -Xmx300m","-XXdef -Xmx50m");
  testJavaHeapOptions("-Xmx10m","-Xmx20m","-Xmx50m","-Xms2m","-Xms3m","-Xms5m","-Xms2m -Xmx10m","-Xms3m -Xmx20m","-Xms5m -Xmx50m");
  testJavaHeapOptions("-Xmx10m","-Xmx20m","-Xmx50m","-Xmx2m","-Xmx3m","-Xmx5m","-Xmx10m","-Xmx20m","-Xmx50m");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.gridmix.TestGridmixRecord </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKeyData() throws Exception {
  final int min=2;
  final int max=300;
  final GridmixKey a=new GridmixKey(GridmixKey.DATA,1,0L);
  final GridmixKey b=new GridmixKey(GridmixKey.DATA,1,0L);
  lengthTest(a,b,min,max);
  randomReplayTest(a,b,min,max);
  binSortTest(a,b,min,max,new GridmixKey.Comparator());
  eqSeedTest(a,b,300);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBaseRecord() throws Exception {
  final int min=1;
  final int max=300;
  final GridmixRecord a=new GridmixRecord();
  final GridmixRecord b=new GridmixRecord();
  lengthTest(a,b,min,max);
  randomReplayTest(a,b,min,max);
  binSortTest(a,b,min,max,new GridmixRecord.Comparator());
  eqSeedTest(a,b,300);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKeySpec() throws Exception {
  final int min=6;
  final int max=300;
  final GridmixKey a=new GridmixKey(GridmixKey.REDUCE_SPEC,1,0L);
  final GridmixKey b=new GridmixKey(GridmixKey.REDUCE_SPEC,1,0L);
  lengthTest(a,b,min,max);
  randomReplayTest(a,b,min,max);
  binSortTest(a,b,min,max,new GridmixKey.Comparator());
  eqSeedTest(a,b,max);
  checkSpec(a,b);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.gridmix.TestGridmixSubmission </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=500000) public void testReplaySubmit() throws Exception {
  policy=GridmixJobSubmissionPolicy.REPLAY;
  LOG.info(" Replay started at " + System.currentTimeMillis());
  doSubmission(null,false);
  LOG.info(" Replay ended at " + System.currentTimeMillis());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=500000) public void testStressSubmit() throws Exception {
  policy=GridmixJobSubmissionPolicy.STRESS;
  LOG.info(" Stress started at " + System.currentTimeMillis());
  doSubmission(null,false);
  LOG.info(" Stress ended at " + System.currentTimeMillis());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests the reading of traces in GridMix3. These traces are generated by
 * Rumen and are in the JSON format. The traces can optionally be compressed
 * and uncompressed traces can also be passed to GridMix3 via its standard
 * input stream. The testing is effected via JUnit assertions.
 * @throws Exception if there was an error.
 */
@Test(timeout=20000) public void testTraceReader() throws Exception {
  Configuration conf=new Configuration();
  FileSystem lfs=FileSystem.getLocal(conf);
  Path rootInputDir=new Path(System.getProperty("src.test.data"));
  rootInputDir=rootInputDir.makeQualified(lfs.getUri(),lfs.getWorkingDirectory());
  Path rootTempDir=new Path(System.getProperty("test.build.data",System.getProperty("java.io.tmpdir")),"testTraceReader");
  rootTempDir=rootTempDir.makeQualified(lfs.getUri(),lfs.getWorkingDirectory());
  Path inputFile=new Path(rootInputDir,"wordcount.json.gz");
  Path tempFile=new Path(rootTempDir,"gridmix3-wc.json");
  InputStream origStdIn=System.in;
  InputStream tmpIs=null;
  try {
    DebugGridmix dgm=new DebugGridmix();
    JobStoryProducer jsp=dgm.createJobStoryProducer(inputFile.toString(),conf);
    LOG.info("Verifying JobStory from compressed trace...");
    verifyWordCountJobStory(jsp.getNextJob());
    expandGzippedTrace(lfs,inputFile,tempFile);
    jsp=dgm.createJobStoryProducer(tempFile.toString(),conf);
    LOG.info("Verifying JobStory from uncompressed trace...");
    verifyWordCountJobStory(jsp.getNextJob());
    tmpIs=lfs.open(tempFile);
    System.setIn(tmpIs);
    LOG.info("Verifying JobStory from trace in standard input...");
    jsp=dgm.createJobStoryProducer("-",conf);
    verifyWordCountJobStory(jsp.getNextJob());
  }
  finally {
    System.setIn(origStdIn);
    if (tmpIs != null) {
      tmpIs.close();
    }
    lfs.delete(rootTempDir,true);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.gridmix.TestLoadJob </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=500000) public void testReplaySubmit() throws Exception {
  policy=GridmixJobSubmissionPolicy.REPLAY;
  LOG.info(" Replay started at " + System.currentTimeMillis());
  doSubmission(JobCreator.LOADJOB.name(),false);
  LOG.info(" Replay ended at " + System.currentTimeMillis());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=500000) public void testSerialSubmit() throws Exception {
  policy=GridmixJobSubmissionPolicy.SERIAL;
  LOG.info("Serial started at " + System.currentTimeMillis());
  doSubmission(JobCreator.LOADJOB.name(),false);
  LOG.info("Serial ended at " + System.currentTimeMillis());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.gridmix.TestRandomAlgorithm </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRandomSelectSelector(){
  for (  int[] param : parameters) {
    testRandomSelectSelector(param[0],param[1],param[2]);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRandomSelect(){
  for (  int[] param : parameters) {
    testRandomSelect(param[0],param[1],param[2]);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.gridmix.TestRecordFactory </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAvg() throws Exception {
  final Random r=new Random();
  final long avgsize=r.nextInt(1 << 10) + 1;
  final long targetRecs=r.nextInt(1 << 14);
  testFactory(targetRecs * avgsize,targetRecs);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testZero() throws Exception {
  final Random r=new Random();
  final long targetBytes=r.nextInt(1 << 20);
  testFactory(targetBytes,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRandom() throws Exception {
  final Random r=new Random();
  final long targetBytes=r.nextInt(1 << 20) + 3 * (1 << 14);
  final long targetRecs=r.nextInt(1 << 14);
  testFactory(targetBytes,targetRecs);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.gridmix.TestSleepJob </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSerialSubmit() throws Exception {
  policy=GridmixJobSubmissionPolicy.SERIAL;
  LOG.info("Serial started at " + System.currentTimeMillis());
  doSubmission(JobCreator.SLEEPJOB.name(),false);
  LOG.info("Serial ended at " + System.currentTimeMillis());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRandomLocation() throws Exception {
  UserGroupInformation ugi=UserGroupInformation.getLoginUser();
  testRandomLocation(1,10,ugi);
  testRandomLocation(2,10,ugi);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStressSubmit() throws Exception {
  policy=GridmixJobSubmissionPolicy.STRESS;
  LOG.info(" Replay started at " + System.currentTimeMillis());
  doSubmission(JobCreator.SLEEPJOB.name(),false);
  LOG.info(" Replay ended at " + System.currentTimeMillis());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReplaySubmit() throws Exception {
  policy=GridmixJobSubmissionPolicy.REPLAY;
  LOG.info(" Replay started at " + System.currentTimeMillis());
  doSubmission(JobCreator.SLEEPJOB.name(),false);
  LOG.info(" Replay ended at " + System.currentTimeMillis());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.gridmix.TestUserResolve </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Validate the behavior of {@link RoundRobinUserResolver} for different
 * user resource files like
 * <li> Empty user resource file
 * <li> Non existent user resource file
 * <li> User resource file with valid content
 * @throws Exception
 */
@Test public void testRoundRobinResolver() throws Exception {
  final UserResolver rslv=new RoundRobinUserResolver();
  Path usersFilePath=new Path(rootDir,"users");
  URI userRsrc=new URI(usersFilePath.toString());
  fs.delete(usersFilePath,false);
  String expectedErrorMsg="File " + userRsrc + " does not exist";
  validateBadUsersFile(rslv,userRsrc,expectedErrorMsg);
  writeUserList(usersFilePath,"");
  expectedErrorMsg=RoundRobinUserResolver.buildEmptyUsersErrorMsg(userRsrc);
  validateBadUsersFile(rslv,userRsrc,expectedErrorMsg);
  writeUserList(usersFilePath,"user0,groupA,groupB,groupC\nuser1,groupA,groupC\n");
  validateValidUsersFile(rslv,userRsrc);
  writeUserList(usersFilePath,"user0,groupA,groupB\nuser1,");
  validateValidUsersFile(rslv,userRsrc);
  writeUserList(usersFilePath,"user0\nuser1");
  validateValidUsersFile(rslv,userRsrc);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapred.jobcontrol.TestJobControl </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testJobControl() throws Exception {
  doJobControlTest();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.TestContextFactory </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCloneMapContext() throws Exception {
  TaskID taskId=new TaskID(jobId,TaskType.MAP,0);
  TaskAttemptID taskAttemptid=new TaskAttemptID(taskId,0);
  MapContext<IntWritable,IntWritable,IntWritable,IntWritable> mapContext=new MapContextImpl<IntWritable,IntWritable,IntWritable,IntWritable>(conf,taskAttemptid,null,null,null,null,null);
  Mapper<IntWritable,IntWritable,IntWritable,IntWritable>.Context mapperContext=new WrappedMapper<IntWritable,IntWritable,IntWritable,IntWritable>().getMapContext(mapContext);
  ContextFactory.cloneMapContext(mapperContext,conf,null,null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCloneContext() throws Exception {
  ContextFactory.cloneContext(jobContext,conf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.TestCounters </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLimits(){
  for (int i=0; i < 3; ++i) {
    testMaxCounters(new Counters());
    testMaxGroups(new Counters());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.TestLocalRunner </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOneMapMultiReduce() throws Exception {
  doMultiReducerTest(1,2,1,1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultiMapMultiReduce() throws Exception {
  doMultiReducerTest(4,4,2,2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOneMapMultiParallelReduce() throws Exception {
  doMultiReducerTest(1,2,1,2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Run a test with several mappers in parallel, operating at different
 * speeds. Verify that the correct amount of output is created.
 */
@Test(timeout=120 * 1000) public void testMultiMaps() throws Exception {
  Job job=Job.getInstance();
  Path inputPath=createMultiMapsInput();
  Path outputPath=getOutputPath();
  Configuration conf=new Configuration();
  FileSystem fs=FileSystem.getLocal(conf);
  if (fs.exists(outputPath)) {
    fs.delete(outputPath,true);
  }
  job.setMapperClass(StressMapper.class);
  job.setReducerClass(CountingReducer.class);
  job.setNumReduceTasks(1);
  LocalJobRunner.setLocalMaxRunningMaps(job,6);
  job.getConfiguration().set(MRJobConfig.IO_SORT_MB,"25");
  FileInputFormat.addInputPath(job,inputPath);
  FileOutputFormat.setOutputPath(job,outputPath);
  final Thread toInterrupt=Thread.currentThread();
  Thread interrupter=new Thread(){
    public void run(){
      try {
        Thread.sleep(120 * 1000);
        toInterrupt.interrupt();
      }
 catch (      InterruptedException ie) {
      }
    }
  }
;
  LOG.info("Submitting job...");
  job.submit();
  LOG.info("Starting thread to interrupt main thread in 2 minutes");
  interrupter.start();
  LOG.info("Waiting for job to complete...");
  try {
    job.waitForCompletion(true);
  }
 catch (  InterruptedException ie) {
    LOG.fatal("Interrupted while waiting for job completion",ie);
    for (int i=0; i < 10; i++) {
      LOG.fatal("Dumping stacks");
      ReflectionUtils.logThreadInfo(LOG,"multimap threads",0);
      Thread.sleep(1000);
    }
    throw ie;
  }
  LOG.info("Job completed, stopping interrupter");
  interrupter.interrupt();
  try {
    interrupter.join();
  }
 catch (  InterruptedException ie) {
  }
  LOG.info("Verifying output");
  verifyOutput(outputPath);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultiMapOneReduce() throws Exception {
  doMultiReducerTest(4,1,2,1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.TestMapCollection </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSplitMetaSpill() throws Exception {
  runTest("splitmetaspill",7,1,131072,1,0.8f);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRandomCompress() throws Exception {
  Configuration conf=new Configuration();
  conf.setInt(Job.COMPLETION_POLL_INTERVAL_KEY,100);
  Job job=Job.getInstance(conf);
  conf=job.getConfiguration();
  conf.setInt(MRJobConfig.IO_SORT_MB,1);
  conf.setBoolean(MRJobConfig.MAP_OUTPUT_COMPRESS,true);
  conf.setClass("test.mapcollection.class",RandomFactory.class,RecordFactory.class);
  final Random r=new Random();
  final long seed=r.nextLong();
  LOG.info("SEED: " + seed);
  r.setSeed(seed);
  conf.set(MRJobConfig.MAP_SORT_SPILL_PERCENT,Float.toString(Math.max(0.1f,r.nextFloat())));
  RandomFactory.setLengths(conf,r,1 << 14);
  conf.setInt("test.spillmap.records",r.nextInt(500));
  conf.setLong("test.randomfactory.seed",r.nextLong());
  runTest("randomCompress",job);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLowSpill() throws Exception {
  runTest("lowspill",4000,96,20,1,0.00390625f);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPostSpillMeta() throws Exception {
  Configuration conf=new Configuration();
  conf.setInt(Job.COMPLETION_POLL_INTERVAL_KEY,100);
  Job job=Job.getInstance(conf);
  conf=job.getConfiguration();
  conf.setInt(MRJobConfig.IO_SORT_MB,1);
  conf.set(MRJobConfig.MAP_SORT_SPILL_PERCENT,Float.toString(.986328125f));
  conf.setClass("test.mapcollection.class",StepFactory.class,RecordFactory.class);
  StepFactory.setLengths(conf,4000,0,96,0,252);
  conf.setInt("test.spillmap.records",1000);
  conf.setBoolean("test.disable.key.read",true);
  conf.setBoolean("test.disable.val.read",true);
  runTest("postspillmeta",job);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleRecord() throws Exception {
  runTest("singlerecord",100,100,1,1,1.0f);
  runTest("zerokeyvalsingle",0,0,1,1,1.0f);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testValLastByte() throws Exception {
  runTest("vallastbyte",128,896,1344,1,0.5f);
  runTest("keylastbyte",512,1024,896,1,0.5f);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testZeroVal() throws Exception {
  runTest("zeroval",1,0,10000,1,.8f);
  runTest("zerokey",0,1,10000,1,.8f);
  runTest("zerokeyval",0,0,10000,1,.8f);
  runTest("zerokeyvalfull",0,0,10000,1,1.0f);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSpillPer2B() throws Exception {
  runTest("fullspill2B",1,1,10000,1,1.0f);
  runTest("fullspill200B",100,100,10000,1,1.0f);
  runTest("fullspillbuf",10 * 1024,20 * 1024,256,1,1.0f);
  runTest("lt50perspill",100,100,10000,1,0.3f);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLargeRecConcurrent() throws Exception {
  Configuration conf=new Configuration();
  conf.setInt(Job.COMPLETION_POLL_INTERVAL_KEY,100);
  Job job=Job.getInstance(conf);
  conf=job.getConfiguration();
  conf.setInt(MRJobConfig.IO_SORT_MB,1);
  conf.set(MRJobConfig.MAP_SORT_SPILL_PERCENT,Float.toString(.986328125f));
  conf.setClass("test.mapcollection.class",StepFactory.class,RecordFactory.class);
  StepFactory.setLengths(conf,4000,261120,96,1024,251);
  conf.setInt("test.spillmap.records",255);
  conf.setBoolean("test.disable.key.read",false);
  conf.setBoolean("test.disable.val.read",false);
  runTest("largeconcurrent",job);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRandom() throws Exception {
  Configuration conf=new Configuration();
  conf.setInt(Job.COMPLETION_POLL_INTERVAL_KEY,100);
  Job job=Job.getInstance(conf);
  conf=job.getConfiguration();
  conf.setInt(MRJobConfig.IO_SORT_MB,1);
  conf.setClass("test.mapcollection.class",RandomFactory.class,RecordFactory.class);
  final Random r=new Random();
  final long seed=r.nextLong();
  LOG.info("SEED: " + seed);
  r.setSeed(seed);
  conf.set(MRJobConfig.MAP_SORT_SPILL_PERCENT,Float.toString(Math.max(0.1f,r.nextFloat())));
  RandomFactory.setLengths(conf,r,1 << 14);
  conf.setInt("test.spillmap.records",r.nextInt(500));
  conf.setLong("test.randomfactory.seed",r.nextLong());
  runTest("random",job);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLargeRecords() throws Exception {
  runTest("largerec",100,1024 * 1024,5,1,.8f);
  runTest("largekeyzeroval",1024 * 1024,0,5,1,.8f);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.checkpoint.TestFSCheckpointID </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFSCheckpointIDSerialization() throws IOException {
  Path inpath=new Path("/tmp/blah");
  FSCheckpointID cidin=new FSCheckpointID(inpath);
  DataOutputBuffer out=new DataOutputBuffer();
  cidin.write(out);
  out.close();
  FSCheckpointID cidout=new FSCheckpointID(null);
  DataInputBuffer in=new DataInputBuffer();
  in.reset(out.getData(),0,out.getLength());
  cidout.readFields(in);
  in.close();
  assert cidin.equals(cidout);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.checkpoint.TestFSCheckpointService </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCheckpointCreate() throws Exception {
  checkpointCreate(ByteBuffer.allocate(BUFSIZE));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCheckpointCreateDirect() throws Exception {
  checkpointCreate(ByteBuffer.allocateDirect(BUFSIZE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.jobhistory.TestJobHistoryEventHandler </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=50000) public void testUnflushedTimer() throws Exception {
  TestParams t=new TestParams();
  Configuration conf=new Configuration();
  conf.set(MRJobConfig.MR_AM_STAGING_DIR,t.workDir);
  conf.setLong(MRJobConfig.MR_AM_HISTORY_COMPLETE_EVENT_FLUSH_TIMEOUT_MS,2 * 1000l);
  conf.setInt(MRJobConfig.MR_AM_HISTORY_JOB_COMPLETE_UNFLUSHED_MULTIPLIER,10);
  conf.setInt(MRJobConfig.MR_AM_HISTORY_MAX_UNFLUSHED_COMPLETE_EVENTS,100);
  conf.setInt(MRJobConfig.MR_AM_HISTORY_USE_BATCHED_FLUSH_QUEUE_SIZE_THRESHOLD,5);
  JHEvenHandlerForTest realJheh=new JHEvenHandlerForTest(t.mockAppContext,0);
  JHEvenHandlerForTest jheh=spy(realJheh);
  jheh.init(conf);
  EventWriter mockWriter=null;
  try {
    jheh.start();
    handleEvent(jheh,new JobHistoryEvent(t.jobId,new AMStartedEvent(t.appAttemptId,200,t.containerId,"nmhost",3000,4000)));
    mockWriter=jheh.getEventWriter();
    verify(mockWriter).write(any(HistoryEvent.class));
    for (int i=0; i < 100; i++) {
      queueEvent(jheh,new JobHistoryEvent(t.jobId,new TaskFinishedEvent(t.taskID,null,0,TaskType.MAP,"",null)));
    }
    handleNextNEvents(jheh,9);
    verify(mockWriter,times(0)).flush();
    Thread.sleep(2 * 4 * 1000l);
    verify(mockWriter).flush();
  }
  finally {
    jheh.stop();
    verify(mockWriter).close();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=50000) public void testProcessDoneFilesNotLastAMRetry() throws Exception {
  TestParams t=new TestParams(false);
  Configuration conf=new Configuration();
  JHEvenHandlerForTest realJheh=new JHEvenHandlerForTest(t.mockAppContext,0);
  JHEvenHandlerForTest jheh=spy(realJheh);
  jheh.init(conf);
  EventWriter mockWriter=null;
  try {
    jheh.start();
    handleEvent(jheh,new JobHistoryEvent(t.jobId,new AMStartedEvent(t.appAttemptId,200,t.containerId,"nmhost",3000,4000)));
    verify(jheh,times(0)).processDoneFiles(t.jobId);
    handleEvent(jheh,new JobHistoryEvent(t.jobId,new JobUnsuccessfulCompletionEvent(TypeConverter.fromYarn(t.jobId),0,0,0,JobStateInternal.ERROR.toString())));
    verify(jheh,times(0)).processDoneFiles(t.jobId);
    handleEvent(jheh,new JobHistoryEvent(t.jobId,new JobFinishedEvent(TypeConverter.fromYarn(t.jobId),0,0,0,0,0,new Counters(),new Counters(),new Counters())));
    verify(jheh,times(1)).processDoneFiles(t.jobId);
    handleEvent(jheh,new JobHistoryEvent(t.jobId,new JobUnsuccessfulCompletionEvent(TypeConverter.fromYarn(t.jobId),0,0,0,JobStateInternal.FAILED.toString())));
    verify(jheh,times(2)).processDoneFiles(t.jobId);
    handleEvent(jheh,new JobHistoryEvent(t.jobId,new JobUnsuccessfulCompletionEvent(TypeConverter.fromYarn(t.jobId),0,0,0,JobStateInternal.KILLED.toString())));
    verify(jheh,times(3)).processDoneFiles(t.jobId);
    mockWriter=jheh.getEventWriter();
    verify(mockWriter,times(5)).write(any(HistoryEvent.class));
  }
  finally {
    jheh.stop();
    verify(mockWriter).close();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=50000) public void testProcessDoneFilesOnLastAMRetry() throws Exception {
  TestParams t=new TestParams(true);
  Configuration conf=new Configuration();
  JHEvenHandlerForTest realJheh=new JHEvenHandlerForTest(t.mockAppContext,0);
  JHEvenHandlerForTest jheh=spy(realJheh);
  jheh.init(conf);
  EventWriter mockWriter=null;
  try {
    jheh.start();
    handleEvent(jheh,new JobHistoryEvent(t.jobId,new AMStartedEvent(t.appAttemptId,200,t.containerId,"nmhost",3000,4000)));
    verify(jheh,times(0)).processDoneFiles(any(JobId.class));
    handleEvent(jheh,new JobHistoryEvent(t.jobId,new JobUnsuccessfulCompletionEvent(TypeConverter.fromYarn(t.jobId),0,0,0,JobStateInternal.ERROR.toString())));
    verify(jheh,times(1)).processDoneFiles(any(JobId.class));
    handleEvent(jheh,new JobHistoryEvent(t.jobId,new JobFinishedEvent(TypeConverter.fromYarn(t.jobId),0,0,0,0,0,new Counters(),new Counters(),new Counters())));
    verify(jheh,times(2)).processDoneFiles(any(JobId.class));
    handleEvent(jheh,new JobHistoryEvent(t.jobId,new JobUnsuccessfulCompletionEvent(TypeConverter.fromYarn(t.jobId),0,0,0,JobStateInternal.FAILED.toString())));
    verify(jheh,times(3)).processDoneFiles(any(JobId.class));
    handleEvent(jheh,new JobHistoryEvent(t.jobId,new JobUnsuccessfulCompletionEvent(TypeConverter.fromYarn(t.jobId),0,0,0,JobStateInternal.KILLED.toString())));
    verify(jheh,times(4)).processDoneFiles(any(JobId.class));
    mockWriter=jheh.getEventWriter();
    verify(mockWriter,times(5)).write(any(HistoryEvent.class));
  }
  finally {
    jheh.stop();
    verify(mockWriter).close();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=50000) public void testBatchedFlushJobEndMultiplier() throws Exception {
  TestParams t=new TestParams();
  Configuration conf=new Configuration();
  conf.set(MRJobConfig.MR_AM_STAGING_DIR,t.workDir);
  conf.setLong(MRJobConfig.MR_AM_HISTORY_COMPLETE_EVENT_FLUSH_TIMEOUT_MS,60 * 1000l);
  conf.setInt(MRJobConfig.MR_AM_HISTORY_JOB_COMPLETE_UNFLUSHED_MULTIPLIER,3);
  conf.setInt(MRJobConfig.MR_AM_HISTORY_MAX_UNFLUSHED_COMPLETE_EVENTS,10);
  conf.setInt(MRJobConfig.MR_AM_HISTORY_USE_BATCHED_FLUSH_QUEUE_SIZE_THRESHOLD,0);
  JHEvenHandlerForTest realJheh=new JHEvenHandlerForTest(t.mockAppContext,0);
  JHEvenHandlerForTest jheh=spy(realJheh);
  jheh.init(conf);
  EventWriter mockWriter=null;
  try {
    jheh.start();
    handleEvent(jheh,new JobHistoryEvent(t.jobId,new AMStartedEvent(t.appAttemptId,200,t.containerId,"nmhost",3000,4000)));
    mockWriter=jheh.getEventWriter();
    verify(mockWriter).write(any(HistoryEvent.class));
    for (int i=0; i < 100; i++) {
      queueEvent(jheh,new JobHistoryEvent(t.jobId,new TaskFinishedEvent(t.taskID,null,0,TaskType.MAP,"",null)));
    }
    queueEvent(jheh,new JobHistoryEvent(t.jobId,new JobFinishedEvent(TypeConverter.fromYarn(t.jobId),0,10,10,0,0,null,null,new Counters())));
    handleNextNEvents(jheh,29);
    verify(mockWriter,times(0)).flush();
    handleNextNEvents(jheh,72);
    verify(mockWriter,times(4)).flush();
  }
  finally {
    jheh.stop();
    verify(mockWriter).close();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=50000) public void testFirstFlushOnCompletionEvent() throws Exception {
  TestParams t=new TestParams();
  Configuration conf=new Configuration();
  conf.set(MRJobConfig.MR_AM_STAGING_DIR,t.workDir);
  conf.setLong(MRJobConfig.MR_AM_HISTORY_COMPLETE_EVENT_FLUSH_TIMEOUT_MS,60 * 1000l);
  conf.setInt(MRJobConfig.MR_AM_HISTORY_JOB_COMPLETE_UNFLUSHED_MULTIPLIER,10);
  conf.setInt(MRJobConfig.MR_AM_HISTORY_MAX_UNFLUSHED_COMPLETE_EVENTS,10);
  conf.setInt(MRJobConfig.MR_AM_HISTORY_USE_BATCHED_FLUSH_QUEUE_SIZE_THRESHOLD,200);
  JHEvenHandlerForTest realJheh=new JHEvenHandlerForTest(t.mockAppContext,0);
  JHEvenHandlerForTest jheh=spy(realJheh);
  jheh.init(conf);
  EventWriter mockWriter=null;
  try {
    jheh.start();
    handleEvent(jheh,new JobHistoryEvent(t.jobId,new AMStartedEvent(t.appAttemptId,200,t.containerId,"nmhost",3000,4000)));
    mockWriter=jheh.getEventWriter();
    verify(mockWriter).write(any(HistoryEvent.class));
    for (int i=0; i < 100; i++) {
      queueEvent(jheh,new JobHistoryEvent(t.jobId,new TaskStartedEvent(t.taskID,0,TaskType.MAP,"")));
    }
    handleNextNEvents(jheh,100);
    verify(mockWriter,times(0)).flush();
    handleEvent(jheh,new JobHistoryEvent(t.jobId,new TaskFinishedEvent(t.taskID,null,0,TaskType.MAP,"",null)));
    verify(mockWriter).flush();
  }
  finally {
    jheh.stop();
    verify(mockWriter).close();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=50000) public void testMaxUnflushedCompletionEvents() throws Exception {
  TestParams t=new TestParams();
  Configuration conf=new Configuration();
  conf.set(MRJobConfig.MR_AM_STAGING_DIR,t.workDir);
  conf.setLong(MRJobConfig.MR_AM_HISTORY_COMPLETE_EVENT_FLUSH_TIMEOUT_MS,60 * 1000l);
  conf.setInt(MRJobConfig.MR_AM_HISTORY_JOB_COMPLETE_UNFLUSHED_MULTIPLIER,10);
  conf.setInt(MRJobConfig.MR_AM_HISTORY_MAX_UNFLUSHED_COMPLETE_EVENTS,10);
  conf.setInt(MRJobConfig.MR_AM_HISTORY_USE_BATCHED_FLUSH_QUEUE_SIZE_THRESHOLD,5);
  JHEvenHandlerForTest realJheh=new JHEvenHandlerForTest(t.mockAppContext,0);
  JHEvenHandlerForTest jheh=spy(realJheh);
  jheh.init(conf);
  EventWriter mockWriter=null;
  try {
    jheh.start();
    handleEvent(jheh,new JobHistoryEvent(t.jobId,new AMStartedEvent(t.appAttemptId,200,t.containerId,"nmhost",3000,4000)));
    mockWriter=jheh.getEventWriter();
    verify(mockWriter).write(any(HistoryEvent.class));
    for (int i=0; i < 100; i++) {
      queueEvent(jheh,new JobHistoryEvent(t.jobId,new TaskFinishedEvent(t.taskID,null,0,TaskType.MAP,"",null)));
    }
    handleNextNEvents(jheh,9);
    verify(mockWriter,times(0)).flush();
    handleNextNEvents(jheh,1);
    verify(mockWriter).flush();
    handleNextNEvents(jheh,50);
    verify(mockWriter,times(6)).flush();
  }
  finally {
    jheh.stop();
    verify(mockWriter).close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.lib.db.TestSplitters </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=2000) public void testTextSplitter() throws Exception {
  TextSplitter splitter=new TextSplitter();
  ResultSet result=mock(ResultSet.class);
  List<InputSplit> splits=splitter.split(configuration,result,"column");
  assertSplits(new String[]{"column IS NULL column IS NULL"},splits);
  when(result.getString(1)).thenReturn("result1");
  when(result.getString(2)).thenReturn("result2");
  splits=splitter.split(configuration,result,"column1");
  assertSplits(new String[]{"column1 >= 'result1' column1 < 'result1.'","column1 >= 'result1' column1 <= 'result2'"},splits);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=2000) public void testBigDecimalSplitter() throws Exception {
  BigDecimalSplitter splitter=new BigDecimalSplitter();
  ResultSet result=mock(ResultSet.class);
  List<InputSplit> splits=splitter.split(configuration,result,"column");
  assertSplits(new String[]{".*column IS NULL"},splits);
  when(result.getString(1)).thenReturn("result1");
  when(result.getString(2)).thenReturn("result2");
  when(result.getBigDecimal(1)).thenReturn(new BigDecimal(10));
  when(result.getBigDecimal(2)).thenReturn(new BigDecimal(12));
  splits=splitter.split(configuration,result,"column1");
  assertSplits(new String[]{"column1 >= 10 column1 < 11","column1 >= 11 column1 <= 12"},splits);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=2000) public void testIntegerSplitter() throws Exception {
  IntegerSplitter splitter=new IntegerSplitter();
  ResultSet result=mock(ResultSet.class);
  List<InputSplit> splits=splitter.split(configuration,result,"column");
  assertSplits(new String[]{".*column IS NULL"},splits);
  when(result.getString(1)).thenReturn("result1");
  when(result.getString(2)).thenReturn("result2");
  when(result.getLong(1)).thenReturn(8L);
  when(result.getLong(2)).thenReturn(19L);
  splits=splitter.split(configuration,result,"column1");
  assertSplits(new String[]{"column1 >= 8 column1 < 13","column1 >= 13 column1 < 18","column1 >= 18 column1 <= 19"},splits);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=2000) public void testFloatSplitter() throws Exception {
  FloatSplitter splitter=new FloatSplitter();
  ResultSet results=mock(ResultSet.class);
  List<InputSplit> splits=splitter.split(configuration,results,"column");
  assertSplits(new String[]{".*column IS NULL"},splits);
  when(results.getString(1)).thenReturn("result1");
  when(results.getString(2)).thenReturn("result2");
  when(results.getDouble(1)).thenReturn(5.0);
  when(results.getDouble(2)).thenReturn(7.0);
  splits=splitter.split(configuration,results,"column1");
  assertSplits(new String[]{"column1 >= 5.0 column1 < 6.0","column1 >= 6.0 column1 <= 7.0"},splits);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.lib.input.TestFileInputFormat </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testListStatusNestedRecursive() throws IOException {
  Configuration conf=new Configuration();
  conf.setInt(FileInputFormat.LIST_STATUS_NUM_THREADS,numThreads);
  List<Path> expectedPaths=configureTestNestedRecursive(conf,localFs);
  Job job=Job.getInstance(conf);
  FileInputFormat<?,?> fif=new TextInputFormat();
  List<FileStatus> statuses=fif.listStatus(job);
  verifyFileStatuses(expectedPaths,statuses,localFs);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testListStatusSimple() throws IOException {
  Configuration conf=new Configuration();
  conf.setInt(FileInputFormat.LIST_STATUS_NUM_THREADS,numThreads);
  List<Path> expectedPaths=configureTestSimple(conf,localFs);
  Job job=Job.getInstance(conf);
  FileInputFormat<?,?> fif=new TextInputFormat();
  List<FileStatus> statuses=fif.listStatus(job);
  verifyFileStatuses(expectedPaths,statuses,localFs);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testListStatusNestedNonRecursive() throws IOException {
  Configuration conf=new Configuration();
  conf.setInt(FileInputFormat.LIST_STATUS_NUM_THREADS,numThreads);
  List<Path> expectedPaths=configureTestNestedNonRecursive(conf,localFs);
  Job job=Job.getInstance(conf);
  FileInputFormat<?,?> fif=new TextInputFormat();
  List<FileStatus> statuses=fif.listStatus(job);
  verifyFileStatuses(expectedPaths,statuses,localFs);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.lib.input.TestFixedLengthInputFormat </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test with partial record at the end of a compressed input file.
 */
@Test(timeout=5000) public void testPartialRecordCompressedIn() throws Exception {
  CompressionCodec gzip=new GzipCodec();
  runPartialRecordTest(gzip);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test with partial record at the end of an uncompressed input file.
 */
@Test(timeout=5000) public void testPartialRecordUncompressedIn() throws Exception {
  runPartialRecordTest(null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * 20 random tests of various record, file, and split sizes.  All tests have
 * compressed file as input.
 */
@Test(timeout=500000) public void testFormatCompressedIn() throws Exception {
  runRandomTests(new GzipCodec());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * 20 random tests of various record, file, and split sizes.  All tests have
 * uncompressed file as input.
 */
@Test(timeout=500000) public void testFormat() throws Exception {
  runRandomTests(null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.lib.input.TestLineRecordReader </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRecordSpanningMultipleSplitsCompressed() throws IOException {
  checkRecordSpanningMultipleSplits("recordSpanningMultipleSplits.txt.bz2",200 * 1000,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBzip2SplitEndsAtCRThenLF() throws IOException {
  testSplitRecords("blockEndingInCRThenLF.txt.bz2",136498);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRecordSpanningMultipleSplits() throws IOException {
  checkRecordSpanningMultipleSplits("recordSpanningMultipleSplits.txt",10,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBzip2SplitEndsAtCR() throws IOException {
  testSplitRecords("blockEndingInCR.txt.bz2",136498);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.lib.input.TestMRCJCFileInputFormat </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNumInputFiles() throws Exception {
  Configuration conf=spy(new Configuration());
  Job job=make(stub(Job.class).returning(conf).from.getConfiguration());
  FileStatus stat=make(stub(FileStatus.class).returning(0L).from.getLen());
  TextInputFormat ispy=spy(new TextInputFormat());
  doReturn(Arrays.asList(stat)).when(ispy).listStatus(job);
  ispy.getSplits(job);
  verify(conf).setLong(FileInputFormat.NUM_INPUT_FILES,1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.lib.jobcontrol.TestMapReduceJobControlWithMocks </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKillJob() throws Exception {
  JobControl jobControl=new JobControl("Test");
  ControlledJob job=createFailedControlledJob(jobControl);
  job.killJob();
  verify(job.getJob()).killJob();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.lib.output.TestPreemptableFileOutputCommitter </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPartialOutputCleanup() throws FileNotFoundException, IllegalArgumentException, IOException {
  Configuration conf=new Configuration(false);
  conf.setInt(MRJobConfig.APPLICATION_ATTEMPT_ID,1);
  TaskAttemptID tid0=new TaskAttemptID("1363718006656",1,TaskType.REDUCE,14,3);
  Path p=spy(new Path("/user/hadoop/out"));
  Path a=new Path("hdfs://user/hadoop/out");
  Path p0=new Path(a,"_temporary/1/attempt_1363718006656_0001_r_000014_0");
  Path p1=new Path(a,"_temporary/1/attempt_1363718006656_0001_r_000014_1");
  Path p2=new Path(a,"_temporary/1/attempt_1363718006656_0001_r_000013_0");
  Path p3=new Path(a,"_temporary/1/attempt_1363718006656_0001_r_000014_2");
  FileStatus[] fsa=new FileStatus[3];
  fsa[0]=new FileStatus();
  fsa[0].setPath(p0);
  fsa[1]=new FileStatus();
  fsa[1].setPath(p1);
  fsa[2]=new FileStatus();
  fsa[2].setPath(p2);
  final FileSystem fs=mock(FileSystem.class);
  when(fs.exists(eq(p0))).thenReturn(true);
  when(fs.exists(eq(p1))).thenReturn(true);
  when(fs.exists(eq(p2))).thenReturn(true);
  when(fs.exists(eq(p3))).thenReturn(false);
  when(fs.delete(eq(p0),eq(true))).thenReturn(true);
  when(fs.delete(eq(p1),eq(true))).thenReturn(true);
  doReturn(fs).when(p).getFileSystem(any(Configuration.class));
  when(fs.makeQualified(eq(p))).thenReturn(a);
  TaskAttemptContext context=mock(TaskAttemptContext.class);
  when(context.getTaskAttemptID()).thenReturn(tid0);
  when(context.getConfiguration()).thenReturn(conf);
  PartialFileOutputCommitter foc=new TestPFOC(p,context,fs);
  foc.cleanUpPartialOutputForTask(context);
  verify(fs).delete(eq(p0),eq(true));
  verify(fs).delete(eq(p1),eq(true));
  verify(fs,never()).delete(eq(p3),eq(true));
  verify(fs,never()).delete(eq(p2),eq(true));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.security.TestTokenCache </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testObtainTokens() throws Exception {
  Credentials credentials=new Credentials();
  FileSystem fs=mock(FileSystem.class);
  TokenCache.obtainTokensForNamenodesInternal(fs,credentials,conf);
  verify(fs).addDelegationTokens(eq(renewer),eq(credentials));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleTokenFetch() throws Exception {
  Configuration conf=new Configuration();
  conf.set(YarnConfiguration.RM_PRINCIPAL,"mapred/host@REALM");
  String renewer=Master.getMasterPrincipal(conf);
  Credentials credentials=new Credentials();
  final MockFileSystem fs=new MockFileSystem();
  final MockFileSystem mockFs=(MockFileSystem)fs.getRawFileSystem();
  when(mockFs.getCanonicalServiceName()).thenReturn("host:0");
  when(mockFs.getUri()).thenReturn(new URI("mockfs://host:0"));
  Path mockPath=mock(Path.class);
  when(mockPath.getFileSystem(conf)).thenReturn(mockFs);
  Path[] paths=new Path[]{mockPath,mockPath};
  when(mockFs.addDelegationTokens("me",credentials)).thenReturn(null);
  TokenCache.obtainTokensForNamenodesInternal(credentials,paths,conf);
  verify(mockFs,times(1)).addDelegationTokens(renewer,credentials);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.security.TestUmbilicalProtocolWithJobToken </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testJobTokenRpc() throws Exception {
  TaskUmbilicalProtocol mockTT=mock(TaskUmbilicalProtocol.class);
  doReturn(TaskUmbilicalProtocol.versionID).when(mockTT).getProtocolVersion(anyString(),anyLong());
  doReturn(ProtocolSignature.getProtocolSignature(mockTT,TaskUmbilicalProtocol.class.getName(),TaskUmbilicalProtocol.versionID,0)).when(mockTT).getProtocolSignature(anyString(),anyLong(),anyInt());
  JobTokenSecretManager sm=new JobTokenSecretManager();
  final Server server=new RPC.Builder(conf).setProtocol(TaskUmbilicalProtocol.class).setInstance(mockTT).setBindAddress(ADDRESS).setPort(0).setNumHandlers(5).setVerbose(true).setSecretManager(sm).build();
  server.start();
  final UserGroupInformation current=UserGroupInformation.getCurrentUser();
  final InetSocketAddress addr=NetUtils.getConnectAddress(server);
  String jobId=current.getUserName();
  JobTokenIdentifier tokenId=new JobTokenIdentifier(new Text(jobId));
  Token<JobTokenIdentifier> token=new Token<JobTokenIdentifier>(tokenId,sm);
  sm.addTokenForJob(jobId,token);
  SecurityUtil.setTokenService(token,addr);
  LOG.info("Service address for token is " + token.getService());
  current.addToken(token);
  current.doAs(new PrivilegedExceptionAction(){
    @Override public Object run() throws Exception {
      TaskUmbilicalProtocol proxy=null;
      try {
        proxy=(TaskUmbilicalProtocol)RPC.getProxy(TaskUmbilicalProtocol.class,TaskUmbilicalProtocol.versionID,addr,conf);
        proxy.statusUpdate(null,null);
      }
  finally {
        server.stop();
        if (proxy != null) {
          RPC.stopProxy(proxy);
        }
      }
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.security.ssl.TestEncryptedShuffle </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void encryptedShuffleWithClientCerts() throws Exception {
  encryptedShuffleWithCerts(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void encryptedShuffleWithoutClientCerts() throws Exception {
  encryptedShuffleWithCerts(false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.task.reduce.TestEventFetcher </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConsecutiveFetch() throws IOException, InterruptedException {
  final int MAX_EVENTS_TO_FETCH=100;
  TaskAttemptID tid=new TaskAttemptID("12345",1,TaskType.REDUCE,1,1);
  TaskUmbilicalProtocol umbilical=mock(TaskUmbilicalProtocol.class);
  when(umbilical.getMapCompletionEvents(any(JobID.class),anyInt(),anyInt(),any(TaskAttemptID.class))).thenReturn(getMockedCompletionEventsUpdate(0,0));
  when(umbilical.getMapCompletionEvents(any(JobID.class),eq(0),eq(MAX_EVENTS_TO_FETCH),eq(tid))).thenReturn(getMockedCompletionEventsUpdate(0,MAX_EVENTS_TO_FETCH));
  when(umbilical.getMapCompletionEvents(any(JobID.class),eq(MAX_EVENTS_TO_FETCH),eq(MAX_EVENTS_TO_FETCH),eq(tid))).thenReturn(getMockedCompletionEventsUpdate(MAX_EVENTS_TO_FETCH,MAX_EVENTS_TO_FETCH));
  when(umbilical.getMapCompletionEvents(any(JobID.class),eq(MAX_EVENTS_TO_FETCH * 2),eq(MAX_EVENTS_TO_FETCH),eq(tid))).thenReturn(getMockedCompletionEventsUpdate(MAX_EVENTS_TO_FETCH * 2,3));
  @SuppressWarnings("unchecked") ShuffleScheduler<String,String> scheduler=mock(ShuffleScheduler.class);
  ExceptionReporter reporter=mock(ExceptionReporter.class);
  EventFetcherForTest<String,String> ef=new EventFetcherForTest<String,String>(tid,umbilical,scheduler,reporter,MAX_EVENTS_TO_FETCH);
  ef.getMapCompletionEvents();
  verify(reporter,never()).reportException(any(Throwable.class));
  InOrder inOrder=inOrder(umbilical);
  inOrder.verify(umbilical).getMapCompletionEvents(any(JobID.class),eq(0),eq(MAX_EVENTS_TO_FETCH),eq(tid));
  inOrder.verify(umbilical).getMapCompletionEvents(any(JobID.class),eq(MAX_EVENTS_TO_FETCH),eq(MAX_EVENTS_TO_FETCH),eq(tid));
  inOrder.verify(umbilical).getMapCompletionEvents(any(JobID.class),eq(MAX_EVENTS_TO_FETCH * 2),eq(MAX_EVENTS_TO_FETCH),eq(tid));
  verify(scheduler,times(MAX_EVENTS_TO_FETCH * 2 + 3)).resolve(any(TaskCompletionEvent.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.task.reduce.TestFetcher </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings("unchecked") @Test(timeout=10000) public void testCopyFromHostCompressFailure() throws Exception {
  InMemoryMapOutput<Text,Text> immo=mock(InMemoryMapOutput.class);
  Fetcher<Text,Text> underTest=new FakeFetcher<Text,Text>(job,id,ss,mm,r,metrics,except,key,connection);
  String replyHash=SecureShuffleUtils.generateHash(encHash.getBytes(),key);
  when(connection.getResponseCode()).thenReturn(200);
  when(connection.getHeaderField(SecureShuffleUtils.HTTP_HEADER_REPLY_URL_HASH)).thenReturn(replyHash);
  ShuffleHeader header=new ShuffleHeader(map1ID.toString(),10,10,1);
  ByteArrayOutputStream bout=new ByteArrayOutputStream();
  header.write(new DataOutputStream(bout));
  ByteArrayInputStream in=new ByteArrayInputStream(bout.toByteArray());
  when(connection.getInputStream()).thenReturn(in);
  when(connection.getHeaderField(ShuffleHeader.HTTP_HEADER_NAME)).thenReturn(ShuffleHeader.DEFAULT_HTTP_HEADER_NAME);
  when(connection.getHeaderField(ShuffleHeader.HTTP_HEADER_VERSION)).thenReturn(ShuffleHeader.DEFAULT_HTTP_HEADER_VERSION);
  when(mm.reserve(any(TaskAttemptID.class),anyLong(),anyInt())).thenReturn(immo);
  doThrow(new java.lang.InternalError()).when(immo).shuffle(any(MapHost.class),any(InputStream.class),anyLong(),anyLong(),any(ShuffleClientMetrics.class),any(Reporter.class));
  underTest.copyFromHost(host);
  verify(connection).addRequestProperty(SecureShuffleUtils.HTTP_HEADER_URL_HASH,encHash);
  verify(ss,times(1)).copyFailed(map1ID,host,true,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReduceOutOfDiskSpace() throws Throwable {
  LOG.info("testReduceOutOfDiskSpace");
  Fetcher<Text,Text> underTest=new FakeFetcher<Text,Text>(job,id,ss,mm,r,metrics,except,key,connection);
  String replyHash=SecureShuffleUtils.generateHash(encHash.getBytes(),key);
  ShuffleHeader header=new ShuffleHeader(map1ID.toString(),10,10,1);
  ByteArrayOutputStream bout=new ByteArrayOutputStream();
  header.write(new DataOutputStream(bout));
  ByteArrayInputStream in=new ByteArrayInputStream(bout.toByteArray());
  when(connection.getResponseCode()).thenReturn(200);
  when(connection.getHeaderField(ShuffleHeader.HTTP_HEADER_NAME)).thenReturn(ShuffleHeader.DEFAULT_HTTP_HEADER_NAME);
  when(connection.getHeaderField(ShuffleHeader.HTTP_HEADER_VERSION)).thenReturn(ShuffleHeader.DEFAULT_HTTP_HEADER_VERSION);
  when(connection.getHeaderField(SecureShuffleUtils.HTTP_HEADER_REPLY_URL_HASH)).thenReturn(replyHash);
  when(connection.getInputStream()).thenReturn(in);
  when(mm.reserve(any(TaskAttemptID.class),anyLong(),anyInt())).thenThrow(new DiskErrorException("No disk space available"));
  underTest.copyFromHost(host);
  verify(ss).reportLocalError(any(IOException.class));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopyFromHostIncompatibleShuffleVersion() throws Exception {
  String replyHash=SecureShuffleUtils.generateHash(encHash.getBytes(),key);
  when(connection.getResponseCode()).thenReturn(200);
  when(connection.getHeaderField(ShuffleHeader.HTTP_HEADER_NAME)).thenReturn("mapreduce").thenReturn("other").thenReturn("other");
  when(connection.getHeaderField(ShuffleHeader.HTTP_HEADER_VERSION)).thenReturn("1.0.1").thenReturn("1.0.0").thenReturn("1.0.1");
  when(connection.getHeaderField(SecureShuffleUtils.HTTP_HEADER_REPLY_URL_HASH)).thenReturn(replyHash);
  ByteArrayInputStream in=new ByteArrayInputStream(new byte[0]);
  when(connection.getInputStream()).thenReturn(in);
  for (int i=0; i < 3; ++i) {
    Fetcher<Text,Text> underTest=new FakeFetcher<Text,Text>(job,id,ss,mm,r,metrics,except,key,connection);
    underTest.copyFromHost(host);
  }
  verify(connection,times(3)).addRequestProperty(SecureShuffleUtils.HTTP_HEADER_URL_HASH,encHash);
  verify(allErrs,times(3)).increment(1);
  verify(ss,times(3)).copyFailed(map1ID,host,false,false);
  verify(ss,times(3)).copyFailed(map2ID,host,false,false);
  verify(ss,times(3)).putBackKnownMapOutput(any(MapHost.class),eq(map1ID));
  verify(ss,times(3)).putBackKnownMapOutput(any(MapHost.class),eq(map2ID));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopyFromHostBogusHeader() throws Exception {
  Fetcher<Text,Text> underTest=new FakeFetcher<Text,Text>(job,id,ss,mm,r,metrics,except,key,connection);
  String replyHash=SecureShuffleUtils.generateHash(encHash.getBytes(),key);
  when(connection.getResponseCode()).thenReturn(200);
  when(connection.getHeaderField(ShuffleHeader.HTTP_HEADER_NAME)).thenReturn(ShuffleHeader.DEFAULT_HTTP_HEADER_NAME);
  when(connection.getHeaderField(ShuffleHeader.HTTP_HEADER_VERSION)).thenReturn(ShuffleHeader.DEFAULT_HTTP_HEADER_VERSION);
  when(connection.getHeaderField(SecureShuffleUtils.HTTP_HEADER_REPLY_URL_HASH)).thenReturn(replyHash);
  ByteArrayInputStream in=new ByteArrayInputStream("\u00010 BOGUS DATA\nBOGUS DATA\nBOGUS DATA\n".getBytes());
  when(connection.getInputStream()).thenReturn(in);
  underTest.copyFromHost(host);
  verify(connection).addRequestProperty(SecureShuffleUtils.HTTP_HEADER_URL_HASH,encHash);
  verify(allErrs).increment(1);
  verify(ss).copyFailed(map1ID,host,true,false);
  verify(ss).copyFailed(map2ID,host,true,false);
  verify(ss).putBackKnownMapOutput(any(MapHost.class),eq(map1ID));
  verify(ss).putBackKnownMapOutput(any(MapHost.class),eq(map2ID));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testCopyFromHostConnectionTimeout() throws Exception {
  when(connection.getInputStream()).thenThrow(new SocketTimeoutException("This is a fake timeout :)"));
  Fetcher<Text,Text> underTest=new FakeFetcher<Text,Text>(job,id,ss,mm,r,metrics,except,key,connection);
  underTest.copyFromHost(host);
  verify(connection).addRequestProperty(SecureShuffleUtils.HTTP_HEADER_URL_HASH,encHash);
  verify(allErrs).increment(1);
  verify(ss).copyFailed(map1ID,host,false,false);
  verify(ss).copyFailed(map2ID,host,false,false);
  verify(ss).putBackKnownMapOutput(any(MapHost.class),eq(map1ID));
  verify(ss).putBackKnownMapOutput(any(MapHost.class),eq(map2ID));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopyFromHostWait() throws Exception {
  Fetcher<Text,Text> underTest=new FakeFetcher<Text,Text>(job,id,ss,mm,r,metrics,except,key,connection);
  String replyHash=SecureShuffleUtils.generateHash(encHash.getBytes(),key);
  when(connection.getResponseCode()).thenReturn(200);
  when(connection.getHeaderField(SecureShuffleUtils.HTTP_HEADER_REPLY_URL_HASH)).thenReturn(replyHash);
  ShuffleHeader header=new ShuffleHeader(map1ID.toString(),10,10,1);
  ByteArrayOutputStream bout=new ByteArrayOutputStream();
  header.write(new DataOutputStream(bout));
  ByteArrayInputStream in=new ByteArrayInputStream(bout.toByteArray());
  when(connection.getInputStream()).thenReturn(in);
  when(connection.getHeaderField(ShuffleHeader.HTTP_HEADER_NAME)).thenReturn(ShuffleHeader.DEFAULT_HTTP_HEADER_NAME);
  when(connection.getHeaderField(ShuffleHeader.HTTP_HEADER_VERSION)).thenReturn(ShuffleHeader.DEFAULT_HTTP_HEADER_VERSION);
  when(mm.reserve(any(TaskAttemptID.class),anyLong(),anyInt())).thenReturn(null);
  underTest.copyFromHost(host);
  verify(connection).addRequestProperty(SecureShuffleUtils.HTTP_HEADER_URL_HASH,encHash);
  verify(allErrs,never()).increment(1);
  verify(ss,never()).copyFailed(map1ID,host,true,false);
  verify(ss,never()).copyFailed(map2ID,host,true,false);
  verify(ss).putBackKnownMapOutput(any(MapHost.class),eq(map1ID));
  verify(ss).putBackKnownMapOutput(any(MapHost.class),eq(map2ID));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopyFromHostExtraBytes() throws Exception {
  Fetcher<Text,Text> underTest=new FakeFetcher<Text,Text>(job,id,ss,mm,r,metrics,except,key,connection);
  String replyHash=SecureShuffleUtils.generateHash(encHash.getBytes(),key);
  when(connection.getResponseCode()).thenReturn(200);
  when(connection.getHeaderField(ShuffleHeader.HTTP_HEADER_NAME)).thenReturn(ShuffleHeader.DEFAULT_HTTP_HEADER_NAME);
  when(connection.getHeaderField(ShuffleHeader.HTTP_HEADER_VERSION)).thenReturn(ShuffleHeader.DEFAULT_HTTP_HEADER_VERSION);
  when(connection.getHeaderField(SecureShuffleUtils.HTTP_HEADER_REPLY_URL_HASH)).thenReturn(replyHash);
  ShuffleHeader header=new ShuffleHeader(map1ID.toString(),14,10,1);
  ByteArrayOutputStream bout=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(bout);
  IFileOutputStream ios=new IFileOutputStream(dos);
  header.write(dos);
  ios.write("MAPDATA123".getBytes());
  ios.finish();
  ShuffleHeader header2=new ShuffleHeader(map2ID.toString(),14,10,1);
  IFileOutputStream ios2=new IFileOutputStream(dos);
  header2.write(dos);
  ios2.write("MAPDATA456".getBytes());
  ios2.finish();
  ByteArrayInputStream in=new ByteArrayInputStream(bout.toByteArray());
  when(connection.getInputStream()).thenReturn(in);
  InMemoryMapOutput<Text,Text> mapOut=new InMemoryMapOutput<Text,Text>(job,map1ID,mm,8,null,true);
  InMemoryMapOutput<Text,Text> mapOut2=new InMemoryMapOutput<Text,Text>(job,map2ID,mm,10,null,true);
  when(mm.reserve(eq(map1ID),anyLong(),anyInt())).thenReturn(mapOut);
  when(mm.reserve(eq(map2ID),anyLong(),anyInt())).thenReturn(mapOut2);
  underTest.copyFromHost(host);
  verify(allErrs).increment(1);
  verify(ss).copyFailed(map1ID,host,true,false);
  verify(ss,never()).copyFailed(map2ID,host,true,false);
  verify(ss).putBackKnownMapOutput(any(MapHost.class),eq(map1ID));
  verify(ss).putBackKnownMapOutput(any(MapHost.class),eq(map2ID));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.task.reduce.TestMerger </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCompressed() throws IOException {
  testMergeShouldReturnProperProgress(getCompressedSegments());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUncompressed() throws IOException {
  testMergeShouldReturnProperProgress(getUncompressedSegments());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEncryptedMerger() throws Throwable {
  jobConf.setBoolean(MRJobConfig.MR_ENCRYPTED_INTERMEDIATE_DATA,true);
  conf.setBoolean(MRJobConfig.MR_ENCRYPTED_INTERMEDIATE_DATA,true);
  Credentials credentials=UserGroupInformation.getCurrentUser().getCredentials();
  TokenCache.setShuffleSecretKey(new byte[16],credentials);
  UserGroupInformation.getCurrentUser().addCredentials(credentials);
  testInMemoryAndOnDiskMerger();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.util.TestMRAsyncDiskService </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testVolumeNormalization() throws Throwable {
  LOG.info("TEST_ROOT_DIR is " + TEST_ROOT_DIR);
  String relativeTestRoot=relativeToWorking(TEST_ROOT_DIR);
  FileSystem localFileSystem=FileSystem.getLocal(new Configuration());
  String[] vols=new String[]{relativeTestRoot + "/0",relativeTestRoot + "/1"};
  Path delDir=new Path(vols[0],MRAsyncDiskService.TOBEDELETED);
  localFileSystem.mkdirs(delDir);
  localFileSystem.create(new Path(delDir,"foo")).close();
  MRAsyncDiskService service=new MRAsyncDiskService(localFileSystem,vols);
  makeSureCleanedUp(vols,service);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.TestMRAppWithCombiner </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCombinerShouldUpdateTheReporter() throws Exception {
  JobConf conf=new JobConf(mrCluster.getConfig());
  int numMaps=5;
  int numReds=2;
  Path in=new Path(mrCluster.getTestWorkDir().getAbsolutePath(),"testCombinerShouldUpdateTheReporter-in");
  Path out=new Path(mrCluster.getTestWorkDir().getAbsolutePath(),"testCombinerShouldUpdateTheReporter-out");
  createInputOutPutFolder(in,out,numMaps);
  conf.setJobName("test-job-with-combiner");
  conf.setMapperClass(IdentityMapper.class);
  conf.setCombinerClass(MyCombinerToCheckReporter.class);
  conf.setReducerClass(IdentityReducer.class);
  DistributedCache.addFileToClassPath(TestMRJobs.APP_JAR,conf);
  conf.setOutputCommitter(CustomOutputCommitter.class);
  conf.setInputFormat(TextInputFormat.class);
  conf.setOutputKeyClass(LongWritable.class);
  conf.setOutputValueClass(Text.class);
  FileInputFormat.setInputPaths(conf,in);
  FileOutputFormat.setOutputPath(conf,out);
  conf.setNumMapTasks(numMaps);
  conf.setNumReduceTasks(numReds);
  runJob(conf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.TestMRJobs </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=300000) public void testJobClassloader() throws IOException, InterruptedException, ClassNotFoundException {
  testJobClassloader(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=300000) public void testJobClassloaderWithCustomClasses() throws IOException, InterruptedException, ClassNotFoundException {
  testJobClassloader(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=600000) public void testDistributedCache() throws Exception {
  Path localJobJarPath=makeJobJarWithLib(TEST_ROOT_DIR.toUri().toString());
  _testDistributedCache(localJobJarPath.toUri().toString());
  Path remoteJobJarPath=new Path(remoteFs.getUri().toString() + "/",localJobJarPath.getName());
  remoteFs.moveFromLocalFile(localJobJarPath,remoteJobJarPath);
  File localJobJarFile=new File(localJobJarPath.toUri().toString());
  if (localJobJarFile.exists()) {
    localJobJarFile.delete();
  }
  _testDistributedCache(remoteJobJarPath.toUri().toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.TestMRJobsWithProfiler </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=150000) public void testDefaultProfiler() throws Exception {
  LOG.info("Starting testDefaultProfiler");
  testProfilerInternal(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=150000) public void testDifferentProfilers() throws Exception {
  LOG.info("Starting testDefaultProfiler");
  testProfilerInternal(false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.TestRPCFactories </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void test(){
  testPbServerFactory();
  testPbClientFactory();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.TestUberAM </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Override @Test public void testSleepJob() throws IOException, InterruptedException, ClassNotFoundException {
  numSleepReducers=1;
  if (mrCluster != null) {
    mrCluster.getConfig().setInt("TestMRJobs.testSleepJob.reduces",numSleepReducers);
  }
  super.testSleepJob();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSleepJobWithMultipleReducers() throws IOException, InterruptedException, ClassNotFoundException {
  numSleepReducers=3;
  if (mrCluster != null) {
    mrCluster.getConfig().setInt("TestMRJobs.testSleepJob.reduces",numSleepReducers);
  }
  super.testSleepJob();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.app.MRAppBenchmark </h4><pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void benchmark2() throws Exception {
  int maps=100;
  int reduces=50;
  int maxConcurrentRunningTasks=500;
  System.out.println("Running benchmark with throttled running tasks with " + "maxConcurrentRunningTasks:" + maxConcurrentRunningTasks + " maps:"+ maps+ " reduces:"+ reduces);
  run(new ThrottledMRApp(maps,reduces,maxConcurrentRunningTasks));
}

</code></pre>

<br>
<pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void benchmark1() throws Exception {
  int maps=100;
  int reduces=0;
  System.out.println("Running benchmark with maps:" + maps + " reduces:"+ reduces);
  run(new MRApp(maps,reduces,true,this.getClass().getName(),true){
    @Override protected ContainerAllocator createContainerAllocator(    ClientService clientService,    AppContext context){
      AMPreemptionPolicy policy=new NoopAMPreemptionPolicy();
      return new RMContainerAllocator(clientService,context,policy){
        @Override protected ApplicationMasterProtocol createSchedulerProxy(){
          return new ApplicationMasterProtocol(){
            @Override public RegisterApplicationMasterResponse registerApplicationMaster(            RegisterApplicationMasterRequest request) throws IOException {
              RegisterApplicationMasterResponse response=Records.newRecord(RegisterApplicationMasterResponse.class);
              response.setMaximumResourceCapability(Resource.newInstance(10240,1));
              return response;
            }
            @Override public FinishApplicationMasterResponse finishApplicationMaster(            FinishApplicationMasterRequest request) throws IOException {
              FinishApplicationMasterResponse response=Records.newRecord(FinishApplicationMasterResponse.class);
              return response;
            }
            @Override public AllocateResponse allocate(            AllocateRequest request) throws IOException {
              AllocateResponse response=Records.newRecord(AllocateResponse.class);
              List<ResourceRequest> askList=request.getAskList();
              List<Container> containers=new ArrayList<Container>();
              for (              ResourceRequest req : askList) {
                if (!ResourceRequest.isAnyLocation(req.getResourceName())) {
                  continue;
                }
                int numContainers=req.getNumContainers();
                for (int i=0; i < numContainers; i++) {
                  ContainerId containerId=ContainerId.newInstance(getContext().getApplicationAttemptId(),request.getResponseId() + i);
                  containers.add(Container.newInstance(containerId,NodeId.newInstance("host" + containerId.getId(),2345),"host" + containerId.getId() + ":5678",req.getCapability(),req.getPriority(),null));
                }
              }
              response.setAllocatedContainers(containers);
              response.setResponseId(request.getResponseId() + 1);
              response.setNumClusterNodes(350);
              return response;
            }
          }
;
        }
      }
;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.app.TestCheckpointPreemptionPolicy </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreemptionContract(){
  final Map<ContainerId,TaskAttemptId> containers=assignedContainers;
  AMPreemptionPolicy.Context mPctxt=new AMPreemptionPolicy.Context(){
    @Override public TaskAttemptId getTaskAttempt(    ContainerId cId){
      return containers.get(cId);
    }
    @Override public List<Container> getContainers(    TaskType t){
      List<Container> p=new ArrayList<Container>();
      for (      Map.Entry<ContainerId,TaskAttemptId> ent : assignedContainers.entrySet()) {
        if (ent.getValue().getTaskId().getTaskType().equals(t)) {
          p.add(Container.newInstance(ent.getKey(),null,null,contToResourceMap.get(ent.getKey()),Priority.newInstance(0),null));
        }
      }
      return p;
    }
  }
;
  PreemptionMessage pM=generatePreemptionMessage(preemptedContainers,contToResourceMap,Resource.newInstance(minAlloc,1),false);
  CheckpointAMPreemptionPolicy policy=new CheckpointAMPreemptionPolicy();
  policy.init(mActxt);
  int supposedMemPreemption=pM.getContract().getResourceRequest().get(0).getResourceRequest().getCapability().getMemory() * pM.getContract().getResourceRequest().get(0).getResourceRequest().getNumContainers();
  policy.preempt(mPctxt,pM);
  List<TaskAttemptId> preempting=validatePreemption(pM,policy,supposedMemPreemption);
  policy.preempt(mPctxt,pM);
  List<TaskAttemptId> preempting2=validatePreemption(pM,policy,supposedMemPreemption);
  assert preempting2.equals(preempting);
  policy.handleCompletedContainer(preempting.get(0));
  policy.handleCompletedContainer(preempting.get(1));
  Iterator<Map.Entry<ContainerId,TaskAttemptId>> it=assignedContainers.entrySet().iterator();
  while (it.hasNext()) {
    Map.Entry<ContainerId,TaskAttemptId> ent=it.next();
    if (ent.getValue().equals(preempting.get(0)) || ent.getValue().equals(preempting.get(1)))     it.remove();
  }
  policy.preempt(mPctxt,pM);
  List<TaskAttemptId> preempting3=validatePreemption(pM,policy,supposedMemPreemption);
  assert preempting3.equals(preempting2) == false;
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStrictPreemptionContract(){
  final Map<ContainerId,TaskAttemptId> containers=assignedContainers;
  AMPreemptionPolicy.Context mPctxt=new AMPreemptionPolicy.Context(){
    @Override public TaskAttemptId getTaskAttempt(    ContainerId cId){
      return containers.get(cId);
    }
    @Override public List<Container> getContainers(    TaskType t){
      List<Container> p=new ArrayList<Container>();
      for (      Map.Entry<ContainerId,TaskAttemptId> ent : assignedContainers.entrySet()) {
        if (ent.getValue().getTaskId().getTaskType().equals(t)) {
          p.add(Container.newInstance(ent.getKey(),null,null,contToResourceMap.get(ent.getKey()),Priority.newInstance(0),null));
        }
      }
      return p;
    }
  }
;
  PreemptionMessage pM=generatePreemptionMessage(preemptedContainers,contToResourceMap,Resource.newInstance(1024,1),true);
  CheckpointAMPreemptionPolicy policy=new CheckpointAMPreemptionPolicy();
  policy.init(mActxt);
  policy.preempt(mPctxt,pM);
  for (  ContainerId c : preemptedContainers) {
    TaskAttemptId t=assignedContainers.get(c);
    if (TaskType.MAP.equals(t.getTaskId().getTaskType())) {
      assert policy.isPreempted(t) == false;
    }
 else {
      assert policy.isPreempted(t);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.app.TestFail </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReduceFailureMaxPercent() throws Exception {
  MRApp app=new MockFirstFailingTaskMRApp(2,4);
  Configuration conf=new Configuration();
  conf.setInt(MRJobConfig.MAP_MAX_ATTEMPTS,1);
  conf.setInt(MRJobConfig.REDUCE_MAX_ATTEMPTS,2);
  conf.setInt(MRJobConfig.MAP_FAILURES_MAX_PERCENT,50);
  conf.setInt(MRJobConfig.MAP_MAX_ATTEMPTS,1);
  conf.setInt(MRJobConfig.REDUCE_FAILURES_MAXPERCENT,20);
  conf.setInt(MRJobConfig.REDUCE_MAX_ATTEMPTS,1);
  Job job=app.submit(conf);
  app.waitForState(job,JobState.FAILED);
  app=new MockFirstFailingTaskMRApp(2,4);
  conf=new Configuration();
  conf.setInt(MRJobConfig.MAP_MAX_ATTEMPTS,1);
  conf.setInt(MRJobConfig.REDUCE_MAX_ATTEMPTS,2);
  conf.setInt(MRJobConfig.MAP_FAILURES_MAX_PERCENT,50);
  conf.setInt(MRJobConfig.MAP_MAX_ATTEMPTS,1);
  conf.setInt(MRJobConfig.REDUCE_FAILURES_MAXPERCENT,25);
  conf.setInt(MRJobConfig.REDUCE_MAX_ATTEMPTS,1);
  job=app.submit(conf);
  app.waitForState(job,JobState.SUCCEEDED);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMapFailureMaxPercent() throws Exception {
  MRApp app=new MockFirstFailingTaskMRApp(4,0);
  Configuration conf=new Configuration();
  conf.setInt(MRJobConfig.MAP_MAX_ATTEMPTS,2);
  conf.setInt(MRJobConfig.REDUCE_MAX_ATTEMPTS,1);
  conf.setInt(MRJobConfig.MAP_FAILURES_MAX_PERCENT,20);
  conf.setInt(MRJobConfig.MAP_MAX_ATTEMPTS,1);
  Job job=app.submit(conf);
  app.waitForState(job,JobState.FAILED);
  app=new MockFirstFailingTaskMRApp(4,0);
  conf=new Configuration();
  conf.setInt(MRJobConfig.MAP_MAX_ATTEMPTS,2);
  conf.setInt(MRJobConfig.REDUCE_MAX_ATTEMPTS,1);
  conf.setInt(MRJobConfig.MAP_FAILURES_MAX_PERCENT,25);
  conf.setInt(MRJobConfig.MAP_MAX_ATTEMPTS,1);
  job=app.submit(conf);
  app.waitForState(job,JobState.SUCCEEDED);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.app.TestJobEndNotifier </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that setting parameters has the desired effect
 */
@Test public void checkConfiguration(){
  Configuration conf=new Configuration();
  testNumRetries(conf);
  testWaitInterval(conf);
  testTimeout(conf);
  testProxyConfiguration(conf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.app.TestKillAMPreemptionPolicy </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings("unchecked") @Test public void testKillAMPreemptPolicy(){
  ApplicationId appId=ApplicationId.newInstance(123456789,1);
  ContainerId container=ContainerId.newInstance(ApplicationAttemptId.newInstance(appId,1),1);
  AMPreemptionPolicy.Context mPctxt=mock(AMPreemptionPolicy.Context.class);
  when(mPctxt.getTaskAttempt(any(ContainerId.class))).thenReturn(MRBuilderUtils.newTaskAttemptId(MRBuilderUtils.newTaskId(MRBuilderUtils.newJobId(appId,1),1,TaskType.MAP),0));
  List<Container> p=new ArrayList<Container>();
  p.add(Container.newInstance(container,null,null,null,null,null));
  when(mPctxt.getContainers(any(TaskType.class))).thenReturn(p);
  KillAMPreemptionPolicy policy=new KillAMPreemptionPolicy();
  RunningAppContext mActxt=getRunningAppContext();
  policy.init(mActxt);
  PreemptionMessage pM=getPreemptionMessage(false,false,container);
  policy.preempt(mPctxt,pM);
  verify(mActxt.getEventHandler(),times(0)).handle(any(TaskAttemptEvent.class));
  verify(mActxt.getEventHandler(),times(0)).handle(any(JobCounterUpdateEvent.class));
  mActxt=getRunningAppContext();
  policy.init(mActxt);
  pM=getPreemptionMessage(true,false,container);
  policy.preempt(mPctxt,pM);
  verify(mActxt.getEventHandler(),times(2)).handle(any(TaskAttemptEvent.class));
  verify(mActxt.getEventHandler(),times(2)).handle(any(JobCounterUpdateEvent.class));
  mActxt=getRunningAppContext();
  policy.init(mActxt);
  pM=getPreemptionMessage(false,true,container);
  policy.preempt(mPctxt,pM);
  verify(mActxt.getEventHandler(),times(2)).handle(any(TaskAttemptEvent.class));
  verify(mActxt.getEventHandler(),times(2)).handle(any(JobCounterUpdateEvent.class));
  mActxt=getRunningAppContext();
  policy.init(mActxt);
  pM=getPreemptionMessage(true,true,container);
  policy.preempt(mPctxt,pM);
  verify(mActxt.getEventHandler(),times(4)).handle(any(TaskAttemptEvent.class));
  verify(mActxt.getEventHandler(),times(4)).handle(any(JobCounterUpdateEvent.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.app.TestMRApp </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void checkTaskStateTypeConversion(){
  for (  TaskState state : TaskState.values()) {
    TypeConverter.fromYarn(state);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void checkJobStateTypeConversion(){
  for (  JobState state : JobState.values()) {
    TypeConverter.fromYarn(state);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testZeroMapReduces() throws Exception {
  MRApp app=new MRApp(0,0,true,this.getClass().getName(),true);
  Job job=app.submit(new Configuration());
  app.waitForState(job,JobState.SUCCEEDED);
}

</code></pre>

<br>
<pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCountersOnJobFinish() throws Exception {
  MRAppWithSpiedJob app=new MRAppWithSpiedJob(1,1,true,this.getClass().getName(),true);
  JobImpl job=(JobImpl)app.submit(new Configuration());
  app.waitForState(job,JobState.SUCCEEDED);
  app.verifyCompleted();
  System.out.println(job.getAllCounters());
  job.getAllCounters();
  job.getAllCounters();
  verify(job,times(1)).constructFinalFullcounters();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testZeroMaps() throws Exception {
  MRApp app=new MRApp(0,1,true,this.getClass().getName(),true);
  Job job=app.submit(new Configuration());
  app.waitForState(job,JobState.SUCCEEDED);
  app.verifyCompleted();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.app.TestRecovery </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRecoverySuccessAttempt(){
  LOG.info("--- START: testRecoverySuccessAttempt ---");
  long clusterTimestamp=System.currentTimeMillis();
  EventHandler mockEventHandler=mock(EventHandler.class);
  MapTaskImpl recoverMapTask=getMockMapTask(clusterTimestamp,mockEventHandler);
  TaskId taskId=recoverMapTask.getID();
  JobID jobID=new JobID(Long.toString(clusterTimestamp),1);
  TaskID taskID=new TaskID(jobID,org.apache.hadoop.mapreduce.TaskType.MAP,taskId.getId());
  Map<TaskAttemptID,TaskAttemptInfo> mockTaskAttempts=new HashMap<TaskAttemptID,TaskAttemptInfo>();
  TaskAttemptID taId1=new TaskAttemptID(taskID,2);
  TaskAttemptInfo mockTAinfo1=getMockTaskAttemptInfo(taId1,TaskAttemptState.SUCCEEDED);
  mockTaskAttempts.put(taId1,mockTAinfo1);
  TaskAttemptID taId2=new TaskAttemptID(taskID,1);
  TaskAttemptInfo mockTAinfo2=getMockTaskAttemptInfo(taId2,TaskAttemptState.FAILED);
  mockTaskAttempts.put(taId2,mockTAinfo2);
  OutputCommitter mockCommitter=mock(OutputCommitter.class);
  TaskInfo mockTaskInfo=mock(TaskInfo.class);
  when(mockTaskInfo.getTaskStatus()).thenReturn("SUCCEEDED");
  when(mockTaskInfo.getTaskId()).thenReturn(taskID);
  when(mockTaskInfo.getAllTaskAttempts()).thenReturn(mockTaskAttempts);
  recoverMapTask.handle(new TaskRecoverEvent(taskId,mockTaskInfo,mockCommitter,true));
  ArgumentCaptor<Event> arg=ArgumentCaptor.forClass(Event.class);
  verify(mockEventHandler,atLeast(1)).handle((org.apache.hadoop.yarn.event.Event)arg.capture());
  Map<TaskAttemptID,TaskAttemptState> finalAttemptStates=new HashMap<TaskAttemptID,TaskAttemptState>();
  finalAttemptStates.put(taId1,TaskAttemptState.SUCCEEDED);
  finalAttemptStates.put(taId2,TaskAttemptState.FAILED);
  List<EventType> jobHistoryEvents=new ArrayList<EventType>();
  jobHistoryEvents.add(EventType.TASK_STARTED);
  jobHistoryEvents.add(EventType.MAP_ATTEMPT_STARTED);
  jobHistoryEvents.add(EventType.MAP_ATTEMPT_FINISHED);
  jobHistoryEvents.add(EventType.MAP_ATTEMPT_STARTED);
  jobHistoryEvents.add(EventType.MAP_ATTEMPT_FAILED);
  jobHistoryEvents.add(EventType.TASK_FINISHED);
  recoveryChecker(recoverMapTask,TaskState.SUCCEEDED,finalAttemptStates,arg,jobHistoryEvents,2L,1L);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRecoveryAllFailAttempts(){
  LOG.info("--- START: testRecoveryAllFailAttempts ---");
  long clusterTimestamp=System.currentTimeMillis();
  EventHandler mockEventHandler=mock(EventHandler.class);
  MapTaskImpl recoverMapTask=getMockMapTask(clusterTimestamp,mockEventHandler);
  TaskId taskId=recoverMapTask.getID();
  JobID jobID=new JobID(Long.toString(clusterTimestamp),1);
  TaskID taskID=new TaskID(jobID,org.apache.hadoop.mapreduce.TaskType.MAP,taskId.getId());
  Map<TaskAttemptID,TaskAttemptInfo> mockTaskAttempts=new HashMap<TaskAttemptID,TaskAttemptInfo>();
  TaskAttemptID taId1=new TaskAttemptID(taskID,2);
  TaskAttemptInfo mockTAinfo1=getMockTaskAttemptInfo(taId1,TaskAttemptState.FAILED);
  mockTaskAttempts.put(taId1,mockTAinfo1);
  TaskAttemptID taId2=new TaskAttemptID(taskID,1);
  TaskAttemptInfo mockTAinfo2=getMockTaskAttemptInfo(taId2,TaskAttemptState.FAILED);
  mockTaskAttempts.put(taId2,mockTAinfo2);
  OutputCommitter mockCommitter=mock(OutputCommitter.class);
  TaskInfo mockTaskInfo=mock(TaskInfo.class);
  when(mockTaskInfo.getTaskStatus()).thenReturn("FAILED");
  when(mockTaskInfo.getTaskId()).thenReturn(taskID);
  when(mockTaskInfo.getAllTaskAttempts()).thenReturn(mockTaskAttempts);
  recoverMapTask.handle(new TaskRecoverEvent(taskId,mockTaskInfo,mockCommitter,true));
  ArgumentCaptor<Event> arg=ArgumentCaptor.forClass(Event.class);
  verify(mockEventHandler,atLeast(1)).handle((org.apache.hadoop.yarn.event.Event)arg.capture());
  Map<TaskAttemptID,TaskAttemptState> finalAttemptStates=new HashMap<TaskAttemptID,TaskAttemptState>();
  finalAttemptStates.put(taId1,TaskAttemptState.FAILED);
  finalAttemptStates.put(taId2,TaskAttemptState.FAILED);
  List<EventType> jobHistoryEvents=new ArrayList<EventType>();
  jobHistoryEvents.add(EventType.TASK_STARTED);
  jobHistoryEvents.add(EventType.MAP_ATTEMPT_STARTED);
  jobHistoryEvents.add(EventType.MAP_ATTEMPT_FAILED);
  jobHistoryEvents.add(EventType.MAP_ATTEMPT_STARTED);
  jobHistoryEvents.add(EventType.MAP_ATTEMPT_FAILED);
  jobHistoryEvents.add(EventType.TASK_FAILED);
  recoveryChecker(recoverMapTask,TaskState.FAILED,finalAttemptStates,arg,jobHistoryEvents,2L,2L);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRecoveryAllAttemptsKilled(){
  LOG.info("--- START:  testRecoveryAllAttemptsKilled ---");
  long clusterTimestamp=System.currentTimeMillis();
  EventHandler mockEventHandler=mock(EventHandler.class);
  MapTaskImpl recoverMapTask=getMockMapTask(clusterTimestamp,mockEventHandler);
  TaskId taskId=recoverMapTask.getID();
  JobID jobID=new JobID(Long.toString(clusterTimestamp),1);
  TaskID taskID=new TaskID(jobID,org.apache.hadoop.mapreduce.TaskType.MAP,taskId.getId());
  Map<TaskAttemptID,TaskAttemptInfo> mockTaskAttempts=new HashMap<TaskAttemptID,TaskAttemptInfo>();
  TaskAttemptID taId1=new TaskAttemptID(taskID,2);
  TaskAttemptInfo mockTAinfo1=getMockTaskAttemptInfo(taId1,TaskAttemptState.KILLED);
  mockTaskAttempts.put(taId1,mockTAinfo1);
  TaskAttemptID taId2=new TaskAttemptID(taskID,1);
  TaskAttemptInfo mockTAinfo2=getMockTaskAttemptInfo(taId2,TaskAttemptState.KILLED);
  mockTaskAttempts.put(taId2,mockTAinfo2);
  OutputCommitter mockCommitter=mock(OutputCommitter.class);
  TaskInfo mockTaskInfo=mock(TaskInfo.class);
  when(mockTaskInfo.getTaskStatus()).thenReturn("KILLED");
  when(mockTaskInfo.getTaskId()).thenReturn(taskID);
  when(mockTaskInfo.getAllTaskAttempts()).thenReturn(mockTaskAttempts);
  recoverMapTask.handle(new TaskRecoverEvent(taskId,mockTaskInfo,mockCommitter,true));
  ArgumentCaptor<Event> arg=ArgumentCaptor.forClass(Event.class);
  verify(mockEventHandler,atLeast(1)).handle((org.apache.hadoop.yarn.event.Event)arg.capture());
  Map<TaskAttemptID,TaskAttemptState> finalAttemptStates=new HashMap<TaskAttemptID,TaskAttemptState>();
  finalAttemptStates.put(taId1,TaskAttemptState.KILLED);
  finalAttemptStates.put(taId2,TaskAttemptState.KILLED);
  List<EventType> jobHistoryEvents=new ArrayList<EventType>();
  jobHistoryEvents.add(EventType.TASK_STARTED);
  jobHistoryEvents.add(EventType.MAP_ATTEMPT_STARTED);
  jobHistoryEvents.add(EventType.MAP_ATTEMPT_KILLED);
  jobHistoryEvents.add(EventType.MAP_ATTEMPT_STARTED);
  jobHistoryEvents.add(EventType.MAP_ATTEMPT_KILLED);
  jobHistoryEvents.add(EventType.TASK_FAILED);
  recoveryChecker(recoverMapTask,TaskState.KILLED,finalAttemptStates,arg,jobHistoryEvents,2L,0L);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRecoveryTaskSuccessAllAttemptsFail(){
  LOG.info("--- START:  testRecoveryTaskSuccessAllAttemptsFail ---");
  long clusterTimestamp=System.currentTimeMillis();
  EventHandler mockEventHandler=mock(EventHandler.class);
  MapTaskImpl recoverMapTask=getMockMapTask(clusterTimestamp,mockEventHandler);
  TaskId taskId=recoverMapTask.getID();
  JobID jobID=new JobID(Long.toString(clusterTimestamp),1);
  TaskID taskID=new TaskID(jobID,org.apache.hadoop.mapreduce.TaskType.MAP,taskId.getId());
  Map<TaskAttemptID,TaskAttemptInfo> mockTaskAttempts=new HashMap<TaskAttemptID,TaskAttemptInfo>();
  TaskAttemptID taId1=new TaskAttemptID(taskID,2);
  TaskAttemptInfo mockTAinfo1=getMockTaskAttemptInfo(taId1,TaskAttemptState.FAILED);
  mockTaskAttempts.put(taId1,mockTAinfo1);
  TaskAttemptID taId2=new TaskAttemptID(taskID,1);
  TaskAttemptInfo mockTAinfo2=getMockTaskAttemptInfo(taId2,TaskAttemptState.FAILED);
  mockTaskAttempts.put(taId2,mockTAinfo2);
  OutputCommitter mockCommitter=mock(OutputCommitter.class);
  TaskInfo mockTaskInfo=mock(TaskInfo.class);
  when(mockTaskInfo.getTaskStatus()).thenReturn("SUCCEEDED");
  when(mockTaskInfo.getTaskId()).thenReturn(taskID);
  when(mockTaskInfo.getAllTaskAttempts()).thenReturn(mockTaskAttempts);
  recoverMapTask.handle(new TaskRecoverEvent(taskId,mockTaskInfo,mockCommitter,true));
  ArgumentCaptor<Event> arg=ArgumentCaptor.forClass(Event.class);
  verify(mockEventHandler,atLeast(1)).handle((org.apache.hadoop.yarn.event.Event)arg.capture());
  Map<TaskAttemptID,TaskAttemptState> finalAttemptStates=new HashMap<TaskAttemptID,TaskAttemptState>();
  finalAttemptStates.put(taId1,TaskAttemptState.FAILED);
  finalAttemptStates.put(taId2,TaskAttemptState.FAILED);
  TaskAttemptID taId3=new TaskAttemptID(taskID,2000);
  finalAttemptStates.put(taId3,TaskAttemptState.NEW);
  List<EventType> jobHistoryEvents=new ArrayList<EventType>();
  jobHistoryEvents.add(EventType.TASK_STARTED);
  jobHistoryEvents.add(EventType.MAP_ATTEMPT_STARTED);
  jobHistoryEvents.add(EventType.MAP_ATTEMPT_FAILED);
  jobHistoryEvents.add(EventType.MAP_ATTEMPT_STARTED);
  jobHistoryEvents.add(EventType.MAP_ATTEMPT_FAILED);
  recoveryChecker(recoverMapTask,TaskState.RUNNING,finalAttemptStates,arg,jobHistoryEvents,2L,2L);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRecoveryTaskSuccessAllAttemptsSucceed(){
  LOG.info("--- START:  testRecoveryTaskSuccessAllAttemptsFail ---");
  long clusterTimestamp=System.currentTimeMillis();
  EventHandler mockEventHandler=mock(EventHandler.class);
  MapTaskImpl recoverMapTask=getMockMapTask(clusterTimestamp,mockEventHandler);
  TaskId taskId=recoverMapTask.getID();
  JobID jobID=new JobID(Long.toString(clusterTimestamp),1);
  TaskID taskID=new TaskID(jobID,org.apache.hadoop.mapreduce.TaskType.MAP,taskId.getId());
  Map<TaskAttemptID,TaskAttemptInfo> mockTaskAttempts=new HashMap<TaskAttemptID,TaskAttemptInfo>();
  TaskAttemptID taId1=new TaskAttemptID(taskID,2);
  TaskAttemptInfo mockTAinfo1=getMockTaskAttemptInfo(taId1,TaskAttemptState.SUCCEEDED);
  mockTaskAttempts.put(taId1,mockTAinfo1);
  TaskAttemptID taId2=new TaskAttemptID(taskID,1);
  TaskAttemptInfo mockTAinfo2=getMockTaskAttemptInfo(taId2,TaskAttemptState.SUCCEEDED);
  mockTaskAttempts.put(taId2,mockTAinfo2);
  OutputCommitter mockCommitter=mock(OutputCommitter.class);
  TaskInfo mockTaskInfo=mock(TaskInfo.class);
  when(mockTaskInfo.getTaskStatus()).thenReturn("SUCCEEDED");
  when(mockTaskInfo.getTaskId()).thenReturn(taskID);
  when(mockTaskInfo.getAllTaskAttempts()).thenReturn(mockTaskAttempts);
  recoverMapTask.handle(new TaskRecoverEvent(taskId,mockTaskInfo,mockCommitter,true));
  ArgumentCaptor<Event> arg=ArgumentCaptor.forClass(Event.class);
  verify(mockEventHandler,atLeast(1)).handle((org.apache.hadoop.yarn.event.Event)arg.capture());
  Map<TaskAttemptID,TaskAttemptState> finalAttemptStates=new HashMap<TaskAttemptID,TaskAttemptState>();
  finalAttemptStates.put(taId1,TaskAttemptState.SUCCEEDED);
  finalAttemptStates.put(taId2,TaskAttemptState.SUCCEEDED);
  List<EventType> jobHistoryEvents=new ArrayList<EventType>();
  jobHistoryEvents.add(EventType.TASK_STARTED);
  jobHistoryEvents.add(EventType.MAP_ATTEMPT_STARTED);
  jobHistoryEvents.add(EventType.MAP_ATTEMPT_FINISHED);
  jobHistoryEvents.add(EventType.MAP_ATTEMPT_STARTED);
  jobHistoryEvents.add(EventType.MAP_ATTEMPT_FINISHED);
  jobHistoryEvents.add(EventType.TASK_FINISHED);
  recoveryChecker(recoverMapTask,TaskState.SUCCEEDED,finalAttemptStates,arg,jobHistoryEvents,2L,0L);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.app.TestRuntimeEstimators </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testExponentialEstimator() throws Exception {
  TaskRuntimeEstimator specificEstimator=new ExponentiallySmoothedTaskRuntimeEstimator();
  coreTestEstimator(specificEstimator,3);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLegacyEstimator() throws Exception {
  TaskRuntimeEstimator specificEstimator=new LegacyTaskRuntimeEstimator();
  coreTestEstimator(specificEstimator,3);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.app.TestStagingCleanup </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeletionofStagingOnUnregistrationFailure() throws IOException {
  testDeletionofStagingOnUnregistrationFailure(2,false);
  testDeletionofStagingOnUnregistrationFailure(1,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testDeletionofStagingOnKill() throws IOException {
  conf.set(MRJobConfig.MAPREDUCE_JOB_DIR,stagingJobDir);
  fs=mock(FileSystem.class);
  when(fs.delete(any(Path.class),anyBoolean())).thenReturn(true);
  String user=UserGroupInformation.getCurrentUser().getShortUserName();
  Path stagingDir=MRApps.getStagingAreaDir(conf,user);
  when(fs.exists(stagingDir)).thenReturn(true);
  ApplicationId appId=ApplicationId.newInstance(System.currentTimeMillis(),0);
  ApplicationAttemptId attemptId=ApplicationAttemptId.newInstance(appId,0);
  JobId jobid=recordFactory.newRecordInstance(JobId.class);
  jobid.setAppId(appId);
  ContainerAllocator mockAlloc=mock(ContainerAllocator.class);
  MRAppMaster appMaster=new TestMRApp(attemptId,mockAlloc);
  appMaster.init(conf);
  MRAppMaster.MRAppMasterShutdownHook hook=new MRAppMaster.MRAppMasterShutdownHook(appMaster);
  hook.run();
  verify(fs,times(0)).delete(stagingJobPath,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.app.TestTaskHeartbeatHandler </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings({"rawtypes","unchecked"}) @Test public void testTimeout() throws InterruptedException {
  EventHandler mockHandler=mock(EventHandler.class);
  Clock clock=new SystemClock();
  TaskHeartbeatHandler hb=new TaskHeartbeatHandler(mockHandler,clock,1);
  Configuration conf=new Configuration();
  conf.setInt(MRJobConfig.TASK_TIMEOUT,10);
  conf.setInt(MRJobConfig.TASK_TIMEOUT_CHECK_INTERVAL_MS,10);
  hb.init(conf);
  hb.start();
  try {
    ApplicationId appId=ApplicationId.newInstance(0l,5);
    JobId jobId=MRBuilderUtils.newJobId(appId,4);
    TaskId tid=MRBuilderUtils.newTaskId(jobId,3,TaskType.MAP);
    TaskAttemptId taid=MRBuilderUtils.newTaskAttemptId(tid,2);
    hb.register(taid);
    Thread.sleep(100);
    verify(mockHandler,times(2)).handle(any(Event.class));
  }
  finally {
    hb.stop();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.app.job.impl.TestJobImpl </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testCheckJobCompleteSuccess() throws Exception {
  Configuration conf=new Configuration();
  conf.set(MRJobConfig.MR_AM_STAGING_DIR,stagingDir);
  AsyncDispatcher dispatcher=new AsyncDispatcher();
  dispatcher.init(conf);
  dispatcher.start();
  CyclicBarrier syncBarrier=new CyclicBarrier(2);
  OutputCommitter committer=new TestingOutputCommitter(syncBarrier,true);
  CommitterEventHandler commitHandler=createCommitterEventHandler(dispatcher,committer);
  commitHandler.init(conf);
  commitHandler.start();
  JobImpl job=createRunningStubbedJob(conf,dispatcher,2,null);
  completeJobTasks(job);
  assertJobState(job,JobStateInternal.COMMITTING);
  syncBarrier.await();
  assertJobState(job,JobStateInternal.SUCCEEDED);
  job.handle(new JobEvent(job.getID(),JobEventType.JOB_TASK_ATTEMPT_COMPLETED));
  assertJobState(job,JobStateInternal.SUCCEEDED);
  job.handle(new JobEvent(job.getID(),JobEventType.JOB_MAP_TASK_RESCHEDULED));
  assertJobState(job,JobStateInternal.SUCCEEDED);
  dispatcher.stop();
  commitHandler.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAbortJobCalledAfterKillingTasks() throws IOException {
  Configuration conf=new Configuration();
  conf.set(MRJobConfig.MR_AM_STAGING_DIR,stagingDir);
  conf.set(MRJobConfig.MR_AM_COMMITTER_CANCEL_TIMEOUT_MS,"1000");
  InlineDispatcher dispatcher=new InlineDispatcher();
  dispatcher.init(conf);
  dispatcher.start();
  OutputCommitter committer=Mockito.mock(OutputCommitter.class);
  CommitterEventHandler commitHandler=createCommitterEventHandler(dispatcher,committer);
  commitHandler.init(conf);
  commitHandler.start();
  JobImpl job=createRunningStubbedJob(conf,dispatcher,2,null);
  job.handle(new JobTaskEvent(MRBuilderUtils.newTaskId(job.getID(),1,TaskType.MAP),TaskState.FAILED));
  Mockito.verify(committer,Mockito.never()).abortJob((JobContext)Mockito.any(),(State)Mockito.any());
  assertJobState(job,JobStateInternal.FAIL_WAIT);
  Mockito.verify(committer,Mockito.timeout(2000).times(1)).abortJob((JobContext)Mockito.any(),(State)Mockito.any());
  assertJobState(job,JobStateInternal.FAILED);
  dispatcher.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testKilledDuringKillAbort() throws Exception {
  Configuration conf=new Configuration();
  conf.set(MRJobConfig.MR_AM_STAGING_DIR,stagingDir);
  AsyncDispatcher dispatcher=new AsyncDispatcher();
  dispatcher.init(conf);
  dispatcher.start();
  OutputCommitter committer=new StubbedOutputCommitter(){
    @Override public synchronized void abortJob(    JobContext jobContext,    State state) throws IOException {
      while (!Thread.interrupted()) {
        try {
          wait();
        }
 catch (        InterruptedException e) {
        }
      }
    }
  }
;
  CommitterEventHandler commitHandler=createCommitterEventHandler(dispatcher,committer);
  commitHandler.init(conf);
  commitHandler.start();
  JobImpl job=createStubbedJob(conf,dispatcher,2,null);
  JobId jobId=job.getID();
  job.handle(new JobEvent(jobId,JobEventType.JOB_INIT));
  assertJobState(job,JobStateInternal.INITED);
  job.handle(new JobStartEvent(jobId));
  assertJobState(job,JobStateInternal.SETUP);
  job.handle(new JobEvent(jobId,JobEventType.JOB_KILL));
  assertJobState(job,JobStateInternal.KILL_ABORT);
  job.handle(new JobEvent(jobId,JobEventType.JOB_KILL));
  assertJobState(job,JobStateInternal.KILLED);
  dispatcher.stop();
  commitHandler.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testCommitJobFailsJob() throws Exception {
  Configuration conf=new Configuration();
  conf.set(MRJobConfig.MR_AM_STAGING_DIR,stagingDir);
  AsyncDispatcher dispatcher=new AsyncDispatcher();
  dispatcher.init(conf);
  dispatcher.start();
  CyclicBarrier syncBarrier=new CyclicBarrier(2);
  OutputCommitter committer=new TestingOutputCommitter(syncBarrier,false);
  CommitterEventHandler commitHandler=createCommitterEventHandler(dispatcher,committer);
  commitHandler.init(conf);
  commitHandler.start();
  JobImpl job=createRunningStubbedJob(conf,dispatcher,2,null);
  completeJobTasks(job);
  assertJobState(job,JobStateInternal.COMMITTING);
  syncBarrier.await();
  assertJobState(job,JobStateInternal.FAILED);
  dispatcher.stop();
  commitHandler.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testKilledDuringSetup() throws Exception {
  Configuration conf=new Configuration();
  conf.set(MRJobConfig.MR_AM_STAGING_DIR,stagingDir);
  AsyncDispatcher dispatcher=new AsyncDispatcher();
  dispatcher.init(conf);
  dispatcher.start();
  OutputCommitter committer=new StubbedOutputCommitter(){
    @Override public synchronized void setupJob(    JobContext jobContext) throws IOException {
      while (!Thread.interrupted()) {
        try {
          wait();
        }
 catch (        InterruptedException e) {
        }
      }
    }
  }
;
  CommitterEventHandler commitHandler=createCommitterEventHandler(dispatcher,committer);
  commitHandler.init(conf);
  commitHandler.start();
  JobImpl job=createStubbedJob(conf,dispatcher,2,null);
  JobId jobId=job.getID();
  job.handle(new JobEvent(jobId,JobEventType.JOB_INIT));
  assertJobState(job,JobStateInternal.INITED);
  job.handle(new JobStartEvent(jobId));
  assertJobState(job,JobStateInternal.SETUP);
  job.handle(new JobEvent(job.getID(),JobEventType.JOB_KILL));
  assertJobState(job,JobStateInternal.KILLED);
  dispatcher.stop();
  commitHandler.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testKilledDuringFailAbort() throws Exception {
  Configuration conf=new Configuration();
  conf.set(MRJobConfig.MR_AM_STAGING_DIR,stagingDir);
  AsyncDispatcher dispatcher=new AsyncDispatcher();
  dispatcher.init(conf);
  dispatcher.start();
  OutputCommitter committer=new StubbedOutputCommitter(){
    @Override public void setupJob(    JobContext jobContext) throws IOException {
      throw new IOException("forced failure");
    }
    @Override public synchronized void abortJob(    JobContext jobContext,    State state) throws IOException {
      while (!Thread.interrupted()) {
        try {
          wait();
        }
 catch (        InterruptedException e) {
        }
      }
    }
  }
;
  CommitterEventHandler commitHandler=createCommitterEventHandler(dispatcher,committer);
  commitHandler.init(conf);
  commitHandler.start();
  JobImpl job=createStubbedJob(conf,dispatcher,2,null);
  JobId jobId=job.getID();
  job.handle(new JobEvent(jobId,JobEventType.JOB_INIT));
  assertJobState(job,JobStateInternal.INITED);
  job.handle(new JobStartEvent(jobId));
  assertJobState(job,JobStateInternal.FAIL_ABORT);
  job.handle(new JobEvent(jobId,JobEventType.JOB_KILL));
  assertJobState(job,JobStateInternal.KILLED);
  dispatcher.stop();
  commitHandler.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testFailAbortDoesntHang() throws IOException {
  Configuration conf=new Configuration();
  conf.set(MRJobConfig.MR_AM_STAGING_DIR,stagingDir);
  conf.set(MRJobConfig.MR_AM_COMMITTER_CANCEL_TIMEOUT_MS,"1000");
  DrainDispatcher dispatcher=new DrainDispatcher();
  dispatcher.init(conf);
  dispatcher.start();
  OutputCommitter committer=Mockito.mock(OutputCommitter.class);
  CommitterEventHandler commitHandler=createCommitterEventHandler(dispatcher,committer);
  commitHandler.init(conf);
  commitHandler.start();
  conf.setInt(MRJobConfig.NUM_REDUCES,0);
  conf.setInt(MRJobConfig.MAP_MAX_ATTEMPTS,1);
  JobImpl job=createRunningStubbedJob(conf,dispatcher,1,null);
  for (  Task t : job.tasks.values()) {
    TaskImpl task=(TaskImpl)t;
    task.handle(new TaskEvent(task.getID(),TaskEventType.T_SCHEDULE));
    for (    TaskAttempt ta : task.getAttempts().values()) {
      task.handle(new TaskTAttemptEvent(ta.getID(),TaskEventType.T_ATTEMPT_FAILED));
    }
  }
  dispatcher.await();
  Mockito.verify(committer,Mockito.timeout(2000).times(1)).abortJob((JobContext)Mockito.any(),(State)Mockito.any());
  assertJobState(job,JobStateInternal.FAILED);
  dispatcher.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testKilledDuringCommit() throws Exception {
  Configuration conf=new Configuration();
  conf.set(MRJobConfig.MR_AM_STAGING_DIR,stagingDir);
  AsyncDispatcher dispatcher=new AsyncDispatcher();
  dispatcher.init(conf);
  dispatcher.start();
  CyclicBarrier syncBarrier=new CyclicBarrier(2);
  OutputCommitter committer=new WaitingOutputCommitter(syncBarrier,true);
  CommitterEventHandler commitHandler=createCommitterEventHandler(dispatcher,committer);
  commitHandler.init(conf);
  commitHandler.start();
  JobImpl job=createRunningStubbedJob(conf,dispatcher,2,null);
  completeJobTasks(job);
  assertJobState(job,JobStateInternal.COMMITTING);
  syncBarrier.await();
  job.handle(new JobEvent(job.getID(),JobEventType.JOB_KILL));
  assertJobState(job,JobStateInternal.KILLED);
  dispatcher.stop();
  commitHandler.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.app.job.impl.TestTaskAttempt </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMillisCountersUpdate() throws Exception {
  verifyMillisCounters(2048,2048,1024);
  verifyMillisCounters(2048,1024,1024);
  verifyMillisCounters(10240,1024,2048);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMRAppHistoryForMap() throws Exception {
  MRApp app=new FailingAttemptsMRApp(1,0);
  testMRAppHistory(app);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMRAppHistoryForReduce() throws Exception {
  MRApp app=new FailingAttemptsMRApp(0,1);
  testMRAppHistory(app);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.app.job.impl.TestTaskImpl </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKillRunningTaskAttempt(){
  LOG.info("--- START: testKillRunningTaskAttempt ---");
  mockTask=createMockTask(TaskType.MAP);
  TaskId taskId=getNewTaskID();
  scheduleTaskAttempt(taskId);
  launchTaskAttempt(getLastAttempt().getAttemptId());
  killRunningTaskAttempt(getLastAttempt().getAttemptId());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLaunchTaskAttempt(){
  LOG.info("--- START: testLaunchTaskAttempt ---");
  mockTask=createMockTask(TaskType.MAP);
  TaskId taskId=getNewTaskID();
  scheduleTaskAttempt(taskId);
  launchTaskAttempt(getLastAttempt().getAttemptId());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKillScheduledTaskAttempt(){
  LOG.info("--- START: testKillScheduledTaskAttempt ---");
  mockTask=createMockTask(TaskType.MAP);
  TaskId taskId=getNewTaskID();
  scheduleTaskAttempt(taskId);
  killScheduledTaskAttempt(getLastAttempt().getAttemptId());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKillSuccessfulTask(){
  LOG.info("--- START: testKillSuccesfulTask ---");
  mockTask=createMockTask(TaskType.MAP);
  TaskId taskId=getNewTaskID();
  scheduleTaskAttempt(taskId);
  launchTaskAttempt(getLastAttempt().getAttemptId());
  commitTaskAttempt(getLastAttempt().getAttemptId());
  mockTask.handle(new TaskTAttemptEvent(getLastAttempt().getAttemptId(),TaskEventType.T_ATTEMPT_SUCCEEDED));
  assertTaskSucceededState();
  mockTask.handle(new TaskEvent(taskId,TaskEventType.T_KILL));
  assertTaskSucceededState();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testScheduleTask(){
  LOG.info("--- START: testScheduleTask ---");
  mockTask=createMockTask(TaskType.MAP);
  TaskId taskId=getNewTaskID();
  scheduleTaskAttempt(taskId);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInit(){
  LOG.info("--- START: testInit ---");
  mockTask=createMockTask(TaskType.MAP);
  assertTaskNewState();
  assert (taskAttempts.size() == 0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultipleTaskAttemptsSucceed(){
  mockTask=createMockTask(TaskType.MAP);
  runSpeculativeTaskAttemptSucceeds(TaskEventType.T_ATTEMPT_SUCCEEDED);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTaskProgress(){
  LOG.info("--- START: testTaskProgress ---");
  mockTask=createMockTask(TaskType.MAP);
  TaskId taskId=getNewTaskID();
  scheduleTaskAttempt(taskId);
  float progress=0f;
  assert (mockTask.getProgress() == progress);
  launchTaskAttempt(getLastAttempt().getAttemptId());
  progress=50f;
  updateLastAttemptProgress(progress);
  assert (mockTask.getProgress() == progress);
  progress=100f;
  updateLastAttemptProgress(progress);
  assert (mockTask.getProgress() == progress);
  progress=0f;
  updateLastAttemptState(TaskAttemptState.KILLED);
  assert (mockTask.getProgress() == progress);
  killRunningTaskAttempt(getLastAttempt().getAttemptId());
  assert (taskAttempts.size() == 2);
  assert (mockTask.getProgress() == 0f);
  launchTaskAttempt(getLastAttempt().getAttemptId());
  progress=50f;
  updateLastAttemptProgress(progress);
  assert (mockTask.getProgress() == progress);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReduceSpeculativeTaskAttemptSucceedsEvenIfFirstIsKilled(){
  mockTask=createMockTask(TaskType.REDUCE);
  runSpeculativeTaskAttemptSucceeds(TaskEventType.T_ATTEMPT_KILLED);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKillScheduledTask(){
  LOG.info("--- START: testKillScheduledTask ---");
  mockTask=createMockTask(TaskType.MAP);
  TaskId taskId=getNewTaskID();
  scheduleTaskAttempt(taskId);
  killTask(taskId);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMapSpeculativeTaskAttemptSucceedsEvenIfFirstIsKilled(){
  mockTask=createMockTask(TaskType.MAP);
  runSpeculativeTaskAttemptSucceeds(TaskEventType.T_ATTEMPT_KILLED);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCommitAfterSucceeds(){
  mockTask=createMockTask(TaskType.REDUCE);
  runSpeculativeTaskAttemptSucceeds(TaskEventType.T_ATTEMPT_COMMIT_PENDING);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReduceSpeculativeTaskAttemptSucceedsEvenIfFirstFails(){
  mockTask=createMockTask(TaskType.REDUCE);
  runSpeculativeTaskAttemptSucceeds(TaskEventType.T_ATTEMPT_FAILED);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMapSpeculativeTaskAttemptSucceedsEvenIfFirstFails(){
  mockTask=createMockTask(TaskType.MAP);
  runSpeculativeTaskAttemptSucceeds(TaskEventType.T_ATTEMPT_FAILED);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.app.launcher.TestContainerLauncherImpl </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings({"rawtypes","unchecked"}) @Test(timeout=5000) public void testContainerCleaned() throws Exception {
  LOG.info("STARTING testContainerCleaned");
  CyclicBarrier startLaunchBarrier=new CyclicBarrier(2);
  CyclicBarrier completeLaunchBarrier=new CyclicBarrier(2);
  AppContext mockContext=mock(AppContext.class);
  EventHandler mockEventHandler=mock(EventHandler.class);
  when(mockContext.getEventHandler()).thenReturn(mockEventHandler);
  ContainerManagementProtocol mockCM=new ContainerManagerForTest(startLaunchBarrier,completeLaunchBarrier);
  ContainerLauncherImplUnderTest ut=new ContainerLauncherImplUnderTest(mockContext,mockCM);
  Configuration conf=new Configuration();
  ut.init(conf);
  ut.start();
  try {
    ContainerId contId=makeContainerId(0l,0,0,1);
    TaskAttemptId taskAttemptId=makeTaskAttemptId(0l,0,0,TaskType.MAP,0);
    String cmAddress="127.0.0.1:8000";
    StartContainersResponse startResp=recordFactory.newRecordInstance(StartContainersResponse.class);
    startResp.setAllServicesMetaData(serviceResponse);
    LOG.info("inserting launch event");
    ContainerRemoteLaunchEvent mockLaunchEvent=mock(ContainerRemoteLaunchEvent.class);
    when(mockLaunchEvent.getType()).thenReturn(EventType.CONTAINER_REMOTE_LAUNCH);
    when(mockLaunchEvent.getContainerID()).thenReturn(contId);
    when(mockLaunchEvent.getTaskAttemptID()).thenReturn(taskAttemptId);
    when(mockLaunchEvent.getContainerMgrAddress()).thenReturn(cmAddress);
    when(mockLaunchEvent.getContainerToken()).thenReturn(createNewContainerToken(contId,cmAddress));
    ut.handle(mockLaunchEvent);
    startLaunchBarrier.await();
    LOG.info("inserting cleanup event");
    ContainerLauncherEvent mockCleanupEvent=mock(ContainerLauncherEvent.class);
    when(mockCleanupEvent.getType()).thenReturn(EventType.CONTAINER_REMOTE_CLEANUP);
    when(mockCleanupEvent.getContainerID()).thenReturn(contId);
    when(mockCleanupEvent.getTaskAttemptID()).thenReturn(taskAttemptId);
    when(mockCleanupEvent.getContainerMgrAddress()).thenReturn(cmAddress);
    ut.handle(mockCleanupEvent);
    completeLaunchBarrier.await();
    ut.waitForPoolToIdle();
    ArgumentCaptor<Event> arg=ArgumentCaptor.forClass(Event.class);
    verify(mockEventHandler,atLeast(2)).handle(arg.capture());
    boolean containerCleaned=false;
    for (int i=0; i < arg.getAllValues().size(); i++) {
      LOG.info(arg.getAllValues().get(i).toString());
      Event currentEvent=arg.getAllValues().get(i);
      if (currentEvent.getType() == TaskAttemptEventType.TA_CONTAINER_CLEANED) {
        containerCleaned=true;
      }
    }
    assert (containerCleaned);
  }
  finally {
    ut.stop();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=5000) public void testMyShutdown() throws Exception {
  LOG.info("in test Shutdown");
  AppContext mockContext=mock(AppContext.class);
  @SuppressWarnings("rawtypes") EventHandler mockEventHandler=mock(EventHandler.class);
  when(mockContext.getEventHandler()).thenReturn(mockEventHandler);
  ContainerManagementProtocol mockCM=mock(ContainerManagementProtocol.class);
  ContainerLauncherImplUnderTest ut=new ContainerLauncherImplUnderTest(mockContext,mockCM);
  Configuration conf=new Configuration();
  ut.init(conf);
  ut.start();
  try {
    ContainerId contId=makeContainerId(0l,0,0,1);
    TaskAttemptId taskAttemptId=makeTaskAttemptId(0l,0,0,TaskType.MAP,0);
    String cmAddress="127.0.0.1:8000";
    StartContainersResponse startResp=recordFactory.newRecordInstance(StartContainersResponse.class);
    startResp.setAllServicesMetaData(serviceResponse);
    LOG.info("inserting launch event");
    ContainerRemoteLaunchEvent mockLaunchEvent=mock(ContainerRemoteLaunchEvent.class);
    when(mockLaunchEvent.getType()).thenReturn(EventType.CONTAINER_REMOTE_LAUNCH);
    when(mockLaunchEvent.getContainerID()).thenReturn(contId);
    when(mockLaunchEvent.getTaskAttemptID()).thenReturn(taskAttemptId);
    when(mockLaunchEvent.getContainerMgrAddress()).thenReturn(cmAddress);
    when(mockCM.startContainers(any(StartContainersRequest.class))).thenReturn(startResp);
    when(mockLaunchEvent.getContainerToken()).thenReturn(createNewContainerToken(contId,cmAddress));
    ut.handle(mockLaunchEvent);
    ut.waitForPoolToIdle();
    verify(mockCM).startContainers(any(StartContainersRequest.class));
  }
  finally {
    ut.stop();
    verify(mockCM).stopContainers(any(StopContainersRequest.class));
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=5000) public void testHandle() throws Exception {
  LOG.info("STARTING testHandle");
  AppContext mockContext=mock(AppContext.class);
  @SuppressWarnings("rawtypes") EventHandler mockEventHandler=mock(EventHandler.class);
  when(mockContext.getEventHandler()).thenReturn(mockEventHandler);
  String cmAddress="127.0.0.1:8000";
  ContainerManagementProtocol mockCM=mock(ContainerManagementProtocol.class);
  ContainerLauncherImplUnderTest ut=new ContainerLauncherImplUnderTest(mockContext,mockCM);
  Configuration conf=new Configuration();
  ut.init(conf);
  ut.start();
  try {
    ContainerId contId=makeContainerId(0l,0,0,1);
    TaskAttemptId taskAttemptId=makeTaskAttemptId(0l,0,0,TaskType.MAP,0);
    StartContainersResponse startResp=recordFactory.newRecordInstance(StartContainersResponse.class);
    startResp.setAllServicesMetaData(serviceResponse);
    LOG.info("inserting launch event");
    ContainerRemoteLaunchEvent mockLaunchEvent=mock(ContainerRemoteLaunchEvent.class);
    when(mockLaunchEvent.getType()).thenReturn(EventType.CONTAINER_REMOTE_LAUNCH);
    when(mockLaunchEvent.getContainerID()).thenReturn(contId);
    when(mockLaunchEvent.getTaskAttemptID()).thenReturn(taskAttemptId);
    when(mockLaunchEvent.getContainerMgrAddress()).thenReturn(cmAddress);
    when(mockCM.startContainers(any(StartContainersRequest.class))).thenReturn(startResp);
    when(mockLaunchEvent.getContainerToken()).thenReturn(createNewContainerToken(contId,cmAddress));
    ut.handle(mockLaunchEvent);
    ut.waitForPoolToIdle();
    verify(mockCM).startContainers(any(StartContainersRequest.class));
    LOG.info("inserting cleanup event");
    ContainerLauncherEvent mockCleanupEvent=mock(ContainerLauncherEvent.class);
    when(mockCleanupEvent.getType()).thenReturn(EventType.CONTAINER_REMOTE_CLEANUP);
    when(mockCleanupEvent.getContainerID()).thenReturn(contId);
    when(mockCleanupEvent.getTaskAttemptID()).thenReturn(taskAttemptId);
    when(mockCleanupEvent.getContainerMgrAddress()).thenReturn(cmAddress);
    ut.handle(mockCleanupEvent);
    ut.waitForPoolToIdle();
    verify(mockCM).stopContainers(any(StopContainersRequest.class));
  }
  finally {
    ut.stop();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=5000) public void testOutOfOrder() throws Exception {
  LOG.info("STARTING testOutOfOrder");
  AppContext mockContext=mock(AppContext.class);
  @SuppressWarnings("rawtypes") EventHandler mockEventHandler=mock(EventHandler.class);
  when(mockContext.getEventHandler()).thenReturn(mockEventHandler);
  ContainerManagementProtocol mockCM=mock(ContainerManagementProtocol.class);
  ContainerLauncherImplUnderTest ut=new ContainerLauncherImplUnderTest(mockContext,mockCM);
  Configuration conf=new Configuration();
  ut.init(conf);
  ut.start();
  try {
    ContainerId contId=makeContainerId(0l,0,0,1);
    TaskAttemptId taskAttemptId=makeTaskAttemptId(0l,0,0,TaskType.MAP,0);
    String cmAddress="127.0.0.1:8000";
    StartContainersResponse startResp=recordFactory.newRecordInstance(StartContainersResponse.class);
    startResp.setAllServicesMetaData(serviceResponse);
    LOG.info("inserting cleanup event");
    ContainerLauncherEvent mockCleanupEvent=mock(ContainerLauncherEvent.class);
    when(mockCleanupEvent.getType()).thenReturn(EventType.CONTAINER_REMOTE_CLEANUP);
    when(mockCleanupEvent.getContainerID()).thenReturn(contId);
    when(mockCleanupEvent.getTaskAttemptID()).thenReturn(taskAttemptId);
    when(mockCleanupEvent.getContainerMgrAddress()).thenReturn(cmAddress);
    ut.handle(mockCleanupEvent);
    ut.waitForPoolToIdle();
    verify(mockCM,never()).stopContainers(any(StopContainersRequest.class));
    LOG.info("inserting launch event");
    ContainerRemoteLaunchEvent mockLaunchEvent=mock(ContainerRemoteLaunchEvent.class);
    when(mockLaunchEvent.getType()).thenReturn(EventType.CONTAINER_REMOTE_LAUNCH);
    when(mockLaunchEvent.getContainerID()).thenReturn(contId);
    when(mockLaunchEvent.getTaskAttemptID()).thenReturn(taskAttemptId);
    when(mockLaunchEvent.getContainerMgrAddress()).thenReturn(cmAddress);
    when(mockCM.startContainers(any(StartContainersRequest.class))).thenReturn(startResp);
    when(mockLaunchEvent.getContainerToken()).thenReturn(createNewContainerToken(contId,cmAddress));
    ut.handle(mockLaunchEvent);
    ut.waitForPoolToIdle();
    verify(mockCM,never()).startContainers(any(StartContainersRequest.class));
  }
  finally {
    ut.stop();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.app.metrics.TestMRAppMetrics </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNames(){
  Job job=mock(Job.class);
  Task mapTask=make(stub(Task.class).returning(TaskType.MAP).from.getType());
  Task reduceTask=make(stub(Task.class).returning(TaskType.REDUCE).from.getType());
  MRAppMetrics metrics=MRAppMetrics.create();
  metrics.submittedJob(job);
  metrics.waitingTask(mapTask);
  metrics.waitingTask(reduceTask);
  metrics.preparingJob(job);
  metrics.submittedJob(job);
  metrics.waitingTask(mapTask);
  metrics.waitingTask(reduceTask);
  metrics.preparingJob(job);
  metrics.submittedJob(job);
  metrics.waitingTask(mapTask);
  metrics.waitingTask(reduceTask);
  metrics.preparingJob(job);
  metrics.endPreparingJob(job);
  metrics.endPreparingJob(job);
  metrics.endPreparingJob(job);
  metrics.runningJob(job);
  metrics.launchedTask(mapTask);
  metrics.runningTask(mapTask);
  metrics.failedTask(mapTask);
  metrics.endWaitingTask(reduceTask);
  metrics.endRunningTask(mapTask);
  metrics.endRunningJob(job);
  metrics.failedJob(job);
  metrics.runningJob(job);
  metrics.launchedTask(mapTask);
  metrics.runningTask(mapTask);
  metrics.killedTask(mapTask);
  metrics.endWaitingTask(reduceTask);
  metrics.endRunningTask(mapTask);
  metrics.endRunningJob(job);
  metrics.killedJob(job);
  metrics.runningJob(job);
  metrics.launchedTask(mapTask);
  metrics.runningTask(mapTask);
  metrics.completedTask(mapTask);
  metrics.endRunningTask(mapTask);
  metrics.launchedTask(reduceTask);
  metrics.runningTask(reduceTask);
  metrics.completedTask(reduceTask);
  metrics.endRunningTask(reduceTask);
  metrics.endRunningJob(job);
  metrics.completedJob(job);
  checkMetrics(3,1,1,1,0,0,3,1,1,1,0,0,1,1,0,0,0,0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.app.rm.TestRMContainerAllocator </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReduceScheduling() throws Exception {
  int totalMaps=10;
  int succeededMaps=1;
  int scheduledMaps=10;
  int scheduledReduces=0;
  int assignedMaps=2;
  int assignedReduces=0;
  int mapResourceReqt=1024;
  int reduceResourceReqt=2 * 1024;
  int numPendingReduces=4;
  float maxReduceRampupLimit=0.5f;
  float reduceSlowStart=0.2f;
  RMContainerAllocator allocator=mock(RMContainerAllocator.class);
  doCallRealMethod().when(allocator).scheduleReduces(anyInt(),anyInt(),anyInt(),anyInt(),anyInt(),anyInt(),anyInt(),anyInt(),anyInt(),anyFloat(),anyFloat());
  allocator.scheduleReduces(totalMaps,succeededMaps,scheduledMaps,scheduledReduces,assignedMaps,assignedReduces,mapResourceReqt,reduceResourceReqt,numPendingReduces,maxReduceRampupLimit,reduceSlowStart);
  verify(allocator,never()).setIsReduceStarted(true);
  allocator.scheduleReduces(totalMaps,succeededMaps,0,scheduledReduces,totalMaps - succeededMaps,assignedReduces,mapResourceReqt,reduceResourceReqt,numPendingReduces,maxReduceRampupLimit,reduceSlowStart);
  verify(allocator,never()).setIsReduceStarted(true);
  verify(allocator,never()).scheduleAllReduces();
  succeededMaps=3;
  allocator.scheduleReduces(totalMaps,succeededMaps,scheduledMaps,scheduledReduces,assignedMaps,assignedReduces,mapResourceReqt,reduceResourceReqt,numPendingReduces,maxReduceRampupLimit,reduceSlowStart);
  verify(allocator,times(1)).setIsReduceStarted(true);
  doReturn(100 * 1024).when(allocator).getMemLimit();
  allocator.scheduleReduces(totalMaps,succeededMaps,scheduledMaps,scheduledReduces,assignedMaps,assignedReduces,mapResourceReqt,reduceResourceReqt,numPendingReduces,maxReduceRampupLimit,reduceSlowStart);
  verify(allocator).rampUpReduces(anyInt());
  verify(allocator,never()).rampDownReduces(anyInt());
  scheduledReduces=3;
  doReturn(10 * 1024).when(allocator).getMemLimit();
  allocator.scheduleReduces(totalMaps,succeededMaps,scheduledMaps,scheduledReduces,assignedMaps,assignedReduces,mapResourceReqt,reduceResourceReqt,numPendingReduces,maxReduceRampupLimit,reduceSlowStart);
  verify(allocator).rampDownReduces(anyInt());
  scheduledMaps=2;
  assignedReduces=2;
  doReturn(10 * 1024).when(allocator).getMemLimit();
  allocator.scheduleReduces(totalMaps,succeededMaps,scheduledMaps,scheduledReduces,assignedMaps,assignedReduces,mapResourceReqt,reduceResourceReqt,numPendingReduces,maxReduceRampupLimit,reduceSlowStart);
  verify(allocator,times(2)).rampDownReduces(anyInt());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.app.webapp.TestAMWebApp </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppView(){
  WebAppTests.testPage(AppView.class,AppContext.class,new MockAppContext(0,1,1,1));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTasksView(){
  AppContext appContext=new MockAppContext(0,1,1,1);
  Map<String,String> params=getTaskParams(appContext);
  WebAppTests.testPage(TasksPage.class,AppContext.class,appContext,params);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTaskView(){
  AppContext appContext=new MockAppContext(0,1,1,1);
  Map<String,String> params=getTaskParams(appContext);
  App app=new App(appContext);
  app.setJob(appContext.getAllJobs().values().iterator().next());
  app.setTask(app.getJob().getTasks().values().iterator().next());
  WebAppTests.testPage(TaskPage.class,App.class,app,params);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTaskCountersView(){
  AppContext appContext=new MockAppContext(0,1,1,1);
  Map<String,String> params=getTaskParams(appContext);
  WebAppTests.testPage(CountersPage.class,AppContext.class,appContext,params);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleTaskCounterView(){
  AppContext appContext=new MockAppContext(0,1,1,2);
  Map<String,String> params=getTaskParams(appContext);
  params.put(AMParams.COUNTER_GROUP,"org.apache.hadoop.mapreduce.FileSystemCounter");
  params.put(AMParams.COUNTER_NAME,"HDFS_WRITE_OPS");
  TaskId taskID=MRApps.toTaskID(params.get(AMParams.TASK_ID));
  Job job=appContext.getJob(taskID.getJobId());
  Task task=job.getTask(taskID);
  TaskAttempt attempt=task.getAttempts().values().iterator().next();
  attempt.getReport().setCounters(null);
  WebAppTests.testPage(SingleCounterPage.class,AppContext.class,appContext,params);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConfView(){
  WebAppTests.testPage(JobConfPage.class,AppContext.class,new MockAppContext(0,1,1,1));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleCounterView(){
  AppContext appContext=new MockAppContext(0,1,1,1);
  Job job=appContext.getAllJobs().values().iterator().next();
  Task failedTask=MockJobs.newTask(job.getID(),2,1,true);
  Map<TaskId,Task> tasks=job.getTasks();
  tasks.put(failedTask.getID(),failedTask);
  Map<String,String> params=getJobParams(appContext);
  params.put(AMParams.COUNTER_GROUP,"org.apache.hadoop.mapreduce.FileSystemCounter");
  params.put(AMParams.COUNTER_NAME,"HDFS_WRITE_OPS");
  WebAppTests.testPage(SingleCounterPage.class,AppContext.class,appContext,params);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testJobView(){
  AppContext appContext=new MockAppContext(0,1,1,1);
  Map<String,String> params=getJobParams(appContext);
  WebAppTests.testPage(JobPage.class,AppContext.class,appContext,params);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCountersView(){
  AppContext appContext=new MockAppContext(0,1,1,1);
  Map<String,String> params=getJobParams(appContext);
  WebAppTests.testPage(CountersPage.class,AppContext.class,appContext,params);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.app.webapp.TestAMWebServicesAttempts </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTaskAttemptIdInvalid2() throws JSONException, Exception {
  testTaskAttemptIdErrorGeneric("attempt_12345_m_000000_0","java.lang.Exception: TaskAttemptId string : attempt_12345_m_000000_0 is not properly formed");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTaskAttemptIdInvalid() throws JSONException, Exception {
  testTaskAttemptIdErrorGeneric("attempt_0_12345_d_000000_0","java.lang.Exception: Bad TaskType identifier. TaskAttemptId string : attempt_0_12345_d_000000_0 is not properly formed.");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTaskAttemptIdBogus() throws JSONException, Exception {
  testTaskAttemptIdErrorGeneric("bogusid","java.lang.Exception: TaskAttemptId string : bogusid is not properly formed");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTaskAttemptIdInvalid3() throws JSONException, Exception {
  testTaskAttemptIdErrorGeneric("attempt_0_12345_m_000000","java.lang.Exception: TaskAttemptId string : attempt_0_12345_m_000000 is not properly formed");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTaskAttemptIdNonExist() throws JSONException, Exception {
  testTaskAttemptIdErrorGeneric("attempt_0_12345_m_000000_0","java.lang.Exception: Error getting info on task attempt id attempt_0_12345_m_000000_0");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.app.webapp.TestAppController </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * test bad request should be status 400...
 */
@Test public void testBadRequest(){
  String message="test string";
  appController.badRequest(message);
  verifyExpectations(message);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBadRequestWithNullMessage(){
  appController.badRequest(null);
  verifyExpectations(StringUtils.EMPTY);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.hs.TestHistoryFileManager </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateDirsWithoutFileSystem() throws Exception {
  Configuration conf=new YarnConfiguration();
  conf.set(FileSystem.FS_DEFAULT_NAME_KEY,"hdfs://localhost:1");
  testTryCreateHistoryDirs(conf,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.hs.TestHistoryServerFileSystemStateStoreService </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTokenStoreHdfs() throws IOException {
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).build();
  conf=cluster.getConfiguration(0);
  try {
    testTokenStore("/tmp/historystore");
  }
  finally {
    cluster.shutdown();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTokenStore() throws IOException {
  testTokenStore(testDir.getAbsoluteFile().toURI().toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.hs.TestJobHistoryParsing </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=50000) public void testHistoryParsingWithParseErrors() throws Exception {
  LOG.info("STARTING testHistoryParsingWithParseErrors()");
  try {
    checkHistoryParsing(3,0,2);
  }
  finally {
    LOG.info("FINISHED testHistoryParsingWithParseErrors()");
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=300000) public void testHistoryParsing() throws Exception {
  LOG.info("STARTING testHistoryParsing()");
  try {
    checkHistoryParsing(2,1,2);
  }
  finally {
    LOG.info("FINISHED testHistoryParsing()");
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test compatibility of JobHistoryParser with 2.0.3-alpha history files
 * @throws IOException
 */
@Test public void testTaskAttemptUnsuccessfulCompletionWithoutCounters203() throws IOException {
  Path histPath=new Path(getClass().getClassLoader().getResource("job_2.0.3-alpha-FAILED.jhist").getFile());
  JobHistoryParser parser=new JobHistoryParser(FileSystem.getLocal(new Configuration()),histPath);
  JobInfo jobInfo=parser.parse();
  LOG.info(" job info: " + jobInfo.getJobname() + " "+ jobInfo.getFinishedMaps()+ " "+ jobInfo.getTotalMaps()+ " "+ jobInfo.getJobId());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test compatibility of JobHistoryParser with 2.4.0 history files
 * @throws IOException
 */
@Test public void testTaskAttemptUnsuccessfulCompletionWithoutCounters240() throws IOException {
  Path histPath=new Path(getClass().getClassLoader().getResource("job_2.4.0-FAILED.jhist").getFile());
  JobHistoryParser parser=new JobHistoryParser(FileSystem.getLocal(new Configuration()),histPath);
  JobInfo jobInfo=parser.parse();
  LOG.info(" job info: " + jobInfo.getJobname() + " "+ jobInfo.getFinishedMaps()+ " "+ jobInfo.getTotalMaps()+ " "+ jobInfo.getJobId());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test compatibility of JobHistoryParser with 0.23.9 history files
 * @throws IOException
 */
@Test public void testTaskAttemptUnsuccessfulCompletionWithoutCounters0239() throws IOException {
  Path histPath=new Path(getClass().getClassLoader().getResource("job_0.23.9-FAILED.jhist").getFile());
  JobHistoryParser parser=new JobHistoryParser(FileSystem.getLocal(new Configuration()),histPath);
  JobInfo jobInfo=parser.parse();
  LOG.info(" job info: " + jobInfo.getJobname() + " "+ jobInfo.getFinishedMaps()+ " "+ jobInfo.getTotalMaps()+ " "+ jobInfo.getJobId());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.hs.server.TestHSAdminServer </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRefreshJobRetentionSettings() throws Exception {
  String[] args=new String[1];
  args[0]="-refreshJobRetentionSettings";
  hsAdminClient.run(args);
  verify(jobHistoryService).refreshJobRetentionSettings();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRefreshLoadedJobCache() throws Exception {
  String[] args=new String[1];
  args[0]="-refreshLoadedJobCache";
  hsAdminClient.run(args);
  verify(jobHistoryService).refreshLoadedJobCache();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRefreshLogRetentionSettings() throws Exception {
  String[] args=new String[1];
  args[0]="-refreshLogRetentionSettings";
  hsAdminClient.run(args);
  verify(alds).refreshLogRetentionSettings();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.hs.webapp.TestHSWebApp </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConfView(){
  LOG.info("HsConfPage");
  WebAppTests.testPage(HsConfPage.class,AppContext.class,new MockAppContext(0,1,1,1));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTasksView(){
  LOG.info("HsTasksPage");
  AppContext appContext=new MockAppContext(0,1,1,1);
  Map<String,String> params=TestAMWebApp.getTaskParams(appContext);
  WebAppTests.testPage(HsTasksPage.class,AppContext.class,appContext,params);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLogsViewSingle() throws IOException {
  LOG.info("HsLogsPage with params for single log and data limits");
  MockAppContext ctx=new MockAppContext(0,1,1,1);
  Map<String,String> params=new HashMap<String,String>();
  final Configuration conf=new YarnConfiguration();
  conf.setBoolean(YarnConfiguration.LOG_AGGREGATION_ENABLED,true);
  params.put("start","-2048");
  params.put("end","-1024");
  params.put(CONTAINER_LOG_TYPE,"syslog");
  params.put(CONTAINER_ID,MRApp.newContainerId(1,1,333,1).toString());
  params.put(NM_NODENAME,NodeId.newInstance(MockJobs.NM_HOST,MockJobs.NM_PORT).toString());
  params.put(ENTITY_STRING,"container_10_0001_01_000001");
  params.put(APP_OWNER,"owner");
  Injector injector=WebAppTests.testPage(AggregatedLogsPage.class,AppContext.class,ctx,params,new AbstractModule(){
    @Override protected void configure(){
      bind(Configuration.class).toInstance(conf);
    }
  }
);
  PrintWriter spyPw=WebAppTests.getPrintWriter(injector);
  verify(spyPw).write("Logs not available for container_10_0001_01_000001." + " Aggregation may not be complete, " + "Check back later or try the nodemanager at " + MockJobs.NM_HOST + ":"+ MockJobs.NM_PORT);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testJobCounterViewForKilledJob(){
  LOG.info("JobCounterViewForKilledJob");
  AppContext appContext=new MockAppContext(0,1,1,1,true);
  Map<String,String> params=TestAMWebApp.getJobParams(appContext);
  WebAppTests.testPage(HsCountersPage.class,AppContext.class,appContext,params);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testJobCounterView(){
  LOG.info("JobCounterView");
  AppContext appContext=new MockAppContext(0,1,1,1);
  Map<String,String> params=TestAMWebApp.getJobParams(appContext);
  WebAppTests.testPage(HsCountersPage.class,AppContext.class,appContext,params);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testJobView(){
  LOG.info("HsJobPage");
  AppContext appContext=new MockAppContext(0,1,1,1);
  Map<String,String> params=TestAMWebApp.getJobParams(appContext);
  WebAppTests.testPage(HsJobPage.class,AppContext.class,appContext,params);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAttemptsWithJobView(){
  LOG.info("HsAttemptsPage with data");
  MockAppContext ctx=new MockAppContext(0,1,1,1);
  JobId id=ctx.getAllJobs().keySet().iterator().next();
  Map<String,String> params=new HashMap<String,String>();
  params.put(JOB_ID,id.toString());
  params.put(TASK_TYPE,"m");
  params.put(ATTEMPT_STATE,"SUCCESSFUL");
  WebAppTests.testPage(HsAttemptsPage.class,AppContext.class,ctx,params);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLogsViewBadStartEnd() throws IOException {
  LOG.info("HsLogsPage with bad start/end params");
  MockAppContext ctx=new MockAppContext(0,1,1,1);
  Map<String,String> params=new HashMap<String,String>();
  params.put("start","foo");
  params.put("end","bar");
  params.put(CONTAINER_ID,MRApp.newContainerId(1,1,333,1).toString());
  params.put(NM_NODENAME,NodeId.newInstance(MockJobs.NM_HOST,MockJobs.NM_PORT).toString());
  params.put(ENTITY_STRING,"container_10_0001_01_000001");
  params.put(APP_OWNER,"owner");
  Injector injector=WebAppTests.testPage(AggregatedLogsPage.class,AppContext.class,ctx,params);
  PrintWriter spyPw=WebAppTests.getPrintWriter(injector);
  verify(spyPw).write("Invalid log start value: foo");
  verify(spyPw).write("Invalid log end value: bar");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTaskView(){
  LOG.info("HsTaskPage");
  AppContext appContext=new MockAppContext(0,1,1,1);
  Map<String,String> params=TestAMWebApp.getTaskParams(appContext);
  WebAppTests.testPage(HsTaskPage.class,AppContext.class,appContext,params);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLogsView2() throws IOException {
  LOG.info("HsLogsPage with data");
  MockAppContext ctx=new MockAppContext(0,1,1,1);
  Map<String,String> params=new HashMap<String,String>();
  params.put(CONTAINER_ID,MRApp.newContainerId(1,1,333,1).toString());
  params.put(NM_NODENAME,NodeId.newInstance(MockJobs.NM_HOST,MockJobs.NM_PORT).toString());
  params.put(ENTITY_STRING,"container_10_0001_01_000001");
  params.put(APP_OWNER,"owner");
  Injector injector=WebAppTests.testPage(AggregatedLogsPage.class,AppContext.class,ctx,params);
  PrintWriter spyPw=WebAppTests.getPrintWriter(injector);
  verify(spyPw).write("Aggregation is not enabled. Try the nodemanager at " + MockJobs.NM_HOST + ":"+ MockJobs.NM_PORT);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAboutView(){
  LOG.info("HsAboutPage");
  WebAppTests.testPage(HsAboutPage.class,AppContext.class,new MockAppContext(0,1,1,1));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAttemptsView(){
  LOG.info("HsAttemptsPage");
  AppContext appContext=new MockAppContext(0,1,1,1);
  Map<String,String> params=TestAMWebApp.getTaskParams(appContext);
  WebAppTests.testPage(HsAttemptsPage.class,AppContext.class,appContext,params);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleCounterView(){
  LOG.info("HsSingleCounterPage");
  WebAppTests.testPage(HsSingleCounterPage.class,AppContext.class,new MockAppContext(0,1,1,1));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLogsView1() throws IOException {
  LOG.info("HsLogsPage");
  Injector injector=WebAppTests.testPage(AggregatedLogsPage.class,AppContext.class,new MockAppContext(0,1,1,1));
  PrintWriter spyPw=WebAppTests.getPrintWriter(injector);
  verify(spyPw).write("Cannot get container logs without a ContainerId");
  verify(spyPw).write("Cannot get container logs without a NodeId");
  verify(spyPw).write("Cannot get container logs without an app owner");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.hs.webapp.TestHsWebServicesAttempts </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTaskAttemptIdInvalid3() throws JSONException, Exception {
  testTaskAttemptIdErrorGeneric("attempt_0_1234_m_000000","java.lang.Exception: TaskAttemptId string : " + "attempt_0_1234_m_000000 is not properly formed");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTaskAttemptIdNonExist() throws JSONException, Exception {
  testTaskAttemptIdErrorGeneric("attempt_0_1234_m_000000_0","java.lang.Exception: Error getting info on task attempt id attempt_0_1234_m_000000_0");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTaskAttemptIdInvalid2() throws JSONException, Exception {
  testTaskAttemptIdErrorGeneric("attempt_1234_m_000000_0","java.lang.Exception: TaskAttemptId string : " + "attempt_1234_m_000000_0 is not properly formed");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTaskAttemptIdBogus() throws JSONException, Exception {
  testTaskAttemptIdErrorGeneric("bogusid","java.lang.Exception: TaskAttemptId string : " + "bogusid is not properly formed");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTaskAttemptIdInvalid() throws JSONException, Exception {
  testTaskAttemptIdErrorGeneric("attempt_0_1234_d_000000_0","java.lang.Exception: Bad TaskType identifier. TaskAttemptId string : " + "attempt_0_1234_d_000000_0 is not properly formed.");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.mapreduce.v2.util.TestMRApps </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings("deprecation") @Test(timeout=120000,expected=InvalidJobConfException.class) public void testSetupDistributedCacheConflictsFiles() throws Exception {
  Configuration conf=new Configuration();
  conf.setClass("fs.mockfs.impl",MockFileSystem.class,FileSystem.class);
  URI mockUri=URI.create("mockfs://mock/");
  FileSystem mockFs=((FilterFileSystem)FileSystem.get(mockUri,conf)).getRawFileSystem();
  URI file=new URI("mockfs://mock/tmp/something.zip#something");
  Path filePath=new Path(file);
  URI file2=new URI("mockfs://mock/tmp/something.txt#something");
  Path file2Path=new Path(file2);
  when(mockFs.resolvePath(filePath)).thenReturn(filePath);
  when(mockFs.resolvePath(file2Path)).thenReturn(file2Path);
  DistributedCache.addCacheFile(file,conf);
  DistributedCache.addCacheFile(file2,conf);
  conf.set(MRJobConfig.CACHE_FILE_TIMESTAMPS,"10,11");
  conf.set(MRJobConfig.CACHE_FILES_SIZES,"10,11");
  conf.set(MRJobConfig.CACHE_FILE_VISIBILITIES,"true,true");
  Map<String,LocalResource> localResources=new HashMap<String,LocalResource>();
  MRApps.setupDistributedCache(conf,localResources);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000,expected=IllegalArgumentException.class) public void testTaskAttemptIDShort(){
  MRApps.toTaskAttemptID("attempt_0_0_0_m_0");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings("deprecation") @Test(timeout=120000,expected=InvalidJobConfException.class) public void testSetupDistributedCacheConflicts() throws Exception {
  Configuration conf=new Configuration();
  conf.setClass("fs.mockfs.impl",MockFileSystem.class,FileSystem.class);
  URI mockUri=URI.create("mockfs://mock/");
  FileSystem mockFs=((FilterFileSystem)FileSystem.get(mockUri,conf)).getRawFileSystem();
  URI archive=new URI("mockfs://mock/tmp/something.zip#something");
  Path archivePath=new Path(archive);
  URI file=new URI("mockfs://mock/tmp/something.txt#something");
  Path filePath=new Path(file);
  when(mockFs.resolvePath(archivePath)).thenReturn(archivePath);
  when(mockFs.resolvePath(filePath)).thenReturn(filePath);
  DistributedCache.addCacheArchive(archive,conf);
  conf.set(MRJobConfig.CACHE_ARCHIVES_TIMESTAMPS,"10");
  conf.set(MRJobConfig.CACHE_ARCHIVES_SIZES,"10");
  conf.set(MRJobConfig.CACHE_ARCHIVES_VISIBILITIES,"true");
  DistributedCache.addCacheFile(file,conf);
  conf.set(MRJobConfig.CACHE_FILE_TIMESTAMPS,"11");
  conf.set(MRJobConfig.CACHE_FILES_SIZES,"11");
  conf.set(MRJobConfig.CACHE_FILE_VISIBILITIES,"true");
  Map<String,LocalResource> localResources=new HashMap<String,LocalResource>();
  MRApps.setupDistributedCache(conf,localResources);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000,expected=IllegalArgumentException.class) public void testJobIDShort(){
  MRApps.toJobID("job_0_0_0");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000,expected=IllegalArgumentException.class) public void testTaskIDShort(){
  MRApps.toTaskID("task_0_0000_m");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000,expected=IllegalArgumentException.class) public void testTaskIDBadType(){
  MRApps.toTaskID("task_0_0000_x_000000");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.metrics2.filter.TestPatternFilter </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Filters should accepts unmatched item when both include and
 * exclude patterns are present.
 */
@Test public void shouldAcceptUnmatchedWhenBothAreConfigured(){
  SubsetConfiguration c=new ConfigBuilder().add("p.include","foo").add("p.include.tags","foo:f").add("p.exclude","bar").add("p.exclude.tags","bar:b").subset("p");
  shouldAccept(c,"foo");
  shouldAccept(c,Arrays.asList(tag("foo","","f")));
  shouldAccept(c,mockMetricsRecord("foo",Arrays.asList(tag("foo","","f"))));
  shouldReject(c,"bar");
  shouldReject(c,Arrays.asList(tag("bar","","b")));
  shouldReject(c,mockMetricsRecord("bar",Arrays.asList(tag("foo","","f"))));
  shouldReject(c,mockMetricsRecord("foo",Arrays.asList(tag("bar","","b"))));
  shouldAccept(c,"foobar");
  shouldAccept(c,Arrays.asList(tag("foobar","","")));
  shouldAccept(c,mockMetricsRecord("foobar",Arrays.asList(tag("foobar","",""))));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Include patterns should take precedence over exclude patterns
 */
@Test public void includeShouldOverrideExclude(){
  SubsetConfiguration c=new ConfigBuilder().add("p.include","foo").add("p.include.tags","foo:f").add("p.exclude","foo").add("p.exclude.tags","foo:f").subset("p");
  shouldAccept(c,"foo");
  shouldAccept(c,Arrays.asList(tag("foo","","f")));
  shouldAccept(c,mockMetricsRecord("foo",Arrays.asList(tag("foo","","f"))));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Filters should handle black-listing correctly
 */
@Test public void excludeOnlyShouldOnlyExcludeMatched(){
  SubsetConfiguration bl=new ConfigBuilder().add("p.exclude","foo").add("p.exclude.tags","foo:f").subset("p");
  shouldAccept(bl,"bar");
  shouldAccept(bl,Arrays.asList(tag("bar","","")));
  shouldAccept(bl,mockMetricsRecord("bar",Arrays.asList(tag("bar","",""))));
  shouldReject(bl,"foo");
  shouldReject(bl,Arrays.asList(tag("bar","",""),tag("foo","","f")),new boolean[]{true,false});
  shouldReject(bl,mockMetricsRecord("foo",Arrays.asList(tag("bar","",""))));
  shouldReject(bl,mockMetricsRecord("bar",Arrays.asList(tag("bar","",""),tag("foo","","f"))));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Filters should handle white-listing correctly
 */
@Test public void includeOnlyShouldOnlyIncludeMatched(){
  SubsetConfiguration wl=new ConfigBuilder().add("p.include","foo").add("p.include.tags","foo:f").subset("p");
  shouldAccept(wl,"foo");
  shouldAccept(wl,Arrays.asList(tag("bar","",""),tag("foo","","f")),new boolean[]{false,true});
  shouldAccept(wl,mockMetricsRecord("foo",Arrays.asList(tag("bar","",""),tag("foo","","f"))));
  shouldReject(wl,"bar");
  shouldReject(wl,Arrays.asList(tag("bar","","")));
  shouldReject(wl,Arrays.asList(tag("foo","","boo")));
  shouldReject(wl,mockMetricsRecord("bar",Arrays.asList(tag("foo","","f"))));
  shouldReject(wl,mockMetricsRecord("foo",Arrays.asList(tag("bar","",""))));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Filters should default to accept
 */
@Test public void emptyConfigShouldAccept(){
  SubsetConfiguration empty=new ConfigBuilder().subset("");
  shouldAccept(empty,"anything");
  shouldAccept(empty,Arrays.asList(tag("key","desc","value")));
  shouldAccept(empty,mockMetricsRecord("anything",Arrays.asList(tag("key","desc","value"))));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.metrics2.impl.TestGangliaMetrics </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGangliaMetrics2() throws Exception {
  ConfigBuilder cb=new ConfigBuilder().add("default.period",10).add("test.sink.gsink30.context","test").add("test.sink.gsink31.context","test").save(TestMetricsConfig.getTestFilename("hadoop-metrics2-test"));
  MetricsSystemImpl ms=new MetricsSystemImpl("Test");
  ms.start();
  TestSource s1=ms.register("s1","s1 desc",new TestSource("s1rec"));
  s1.c1.incr();
  s1.xxx.incr();
  s1.g1.set(2);
  s1.yyy.incr(2);
  s1.s1.add(0);
  final int expectedCountFromGanglia30=expectedMetrics.length;
  final int expectedCountFromGanglia31=2 * expectedMetrics.length;
  AbstractGangliaSink gsink30=new GangliaSink30();
  gsink30.init(cb.subset("test"));
  MockDatagramSocket mockds30=new MockDatagramSocket();
  GangliaMetricsTestHelper.setDatagramSocket(gsink30,mockds30);
  AbstractGangliaSink gsink31=new GangliaSink31();
  gsink31.init(cb.subset("test"));
  MockDatagramSocket mockds31=new MockDatagramSocket();
  GangliaMetricsTestHelper.setDatagramSocket(gsink31,mockds31);
  ms.register("gsink30","gsink30 desc",gsink30);
  ms.register("gsink31","gsink31 desc",gsink31);
  ms.publishMetricsNow();
  ms.stop();
  checkMetrics(mockds30.getCapturedSend(),expectedCountFromGanglia30);
  checkMetrics(mockds31.getCapturedSend(),expectedCountFromGanglia31);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.metrics2.impl.TestGraphiteMetrics </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClose(){
  GraphiteSink sink=new GraphiteSink();
  Writer mockWriter=mock(Writer.class);
  Whitebox.setInternalState(sink,"writer",mockWriter);
  try {
    sink.close();
  }
 catch (  IOException ioe) {
    ioe.printStackTrace();
  }
  try {
    verify(mockWriter).close();
  }
 catch (  IOException ioe) {
    ioe.printStackTrace();
  }
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MetricsException.class) public void testCloseAndWrite() throws IOException {
  GraphiteSink sink=new GraphiteSink();
  List<MetricsTag> tags=new ArrayList<MetricsTag>();
  tags.add(new MetricsTag(MsInfo.Context,"all"));
  tags.add(new MetricsTag(MsInfo.Hostname,"host"));
  Set<AbstractMetric> metrics=new HashSet<AbstractMetric>();
  metrics.add(makeMetric("foo1",1.25));
  metrics.add(makeMetric("foo2",2.25));
  MetricsRecord record=new MetricsRecordImpl(MsInfo.Context,(long)10000,tags,metrics);
  OutputStreamWriter writer=mock(OutputStreamWriter.class);
  Whitebox.setInternalState(sink,"writer",writer);
  sink.close();
  sink.putMetrics(record);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.metrics2.impl.TestMetricsConfig </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Common use cases
 * @throws Exception
 */
@Test public void testCommon() throws Exception {
  String filename=getTestFilename("test-metrics2");
  new ConfigBuilder().add("*.foo","default foo").add("p1.*.bar","p1 default bar").add("p1.t1.*.bar","p1.t1 default bar").add("p1.t1.i1.name","p1.t1.i1.name").add("p1.t1.42.bar","p1.t1.42.bar").add("p1.t2.i1.foo","p1.t2.i1.foo").add("p2.*.foo","p2 default foo").save(filename);
  MetricsConfig mc=MetricsConfig.create("p1",filename);
  LOG.debug("mc:" + mc);
  Configuration expected=new ConfigBuilder().add("*.bar","p1 default bar").add("t1.*.bar","p1.t1 default bar").add("t1.i1.name","p1.t1.i1.name").add("t1.42.bar","p1.t1.42.bar").add("t2.i1.foo","p1.t2.i1.foo").config;
  assertEq(expected,mc);
  testInstances(mc);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test the config file load order
 * @throws Exception
 */
@Test public void testLoadFirst() throws Exception {
  String filename=getTestFilename("hadoop-metrics2-p1");
  new ConfigBuilder().add("p1.foo","p1foo").save(filename);
  MetricsConfig mc=MetricsConfig.create("p1");
  MetricsConfig mc2=MetricsConfig.create("p1","na1","na2",filename);
  Configuration expected=new ConfigBuilder().add("foo","p1foo").config;
  assertEq(expected,mc);
  assertEq(expected,mc2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.metrics2.impl.TestMetricsSystemImpl </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MetricsException.class) public void testRegisterDupError(){
  MetricsSystem ms=new MetricsSystemImpl("test");
  TestSource ts=new TestSource("ts");
  ms.register(ts);
  ms.register(ts);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.metrics2.impl.TestSinkQueue </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test blocking when queue is empty
 * @throws Exception
 */
@Test public void testEmptyBlocking() throws Exception {
  testEmptyBlocking(0);
  testEmptyBlocking(100);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.metrics2.lib.TestMetricsAnnotations </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MetricsException.class) public void testBadMethodReturnType(){
  MetricsAnnotations.makeSource(new BadMetrics3());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFields(){
  MyMetrics metrics=new MyMetrics();
  MetricsSource source=MetricsAnnotations.makeSource(metrics);
  metrics.c1.incr();
  metrics.c2.incr();
  metrics.g1.incr();
  metrics.g2.incr();
  metrics.g3.incr();
  metrics.r1.add(1);
  metrics.s1.add(1);
  metrics.rs1.add("rs1",1);
  MetricsRecordBuilder rb=getMetrics(source);
  verify(rb).addCounter(info("C1","C1"),1);
  verify(rb).addCounter(info("Counter2","Counter2 desc"),1L);
  verify(rb).addGauge(info("G1","G1"),1);
  verify(rb).addGauge(info("G2","G2"),1);
  verify(rb).addGauge(info("G3","g3 desc"),1L);
  verify(rb).addCounter(info("R1NumOps","Number of ops for r1"),1L);
  verify(rb).addGauge(info("R1AvgTime","Average time for r1"),1.0);
  verify(rb).addCounter(info("S1NumOps","Number of ops for s1"),1L);
  verify(rb).addGauge(info("S1AvgTime","Average time for s1"),1.0);
  verify(rb).addCounter(info("Rs1NumOps","Number of ops for rs1"),1L);
  verify(rb).addGauge(info("Rs1AvgTime","Average time for rs1"),1.0);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MetricsException.class) public void testEmptyMetrics(){
  MetricsAnnotations.makeSource(new EmptyMetrics());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClasses(){
  MetricsRecordBuilder rb=getMetrics(MetricsAnnotations.makeSource(new MyMetrics3()));
  MetricsCollector collector=rb.parent();
  verify(collector).addRecord(info("MyMetrics3","My metrics"));
  verify(rb).add(tag(MsInfo.Context,"foo"));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMethods(){
  MyMetrics2 metrics=new MyMetrics2();
  MetricsSource source=MetricsAnnotations.makeSource(metrics);
  MetricsRecordBuilder rb=getMetrics(source);
  verify(rb).addGauge(info("G1","G1"),1);
  verify(rb).addGauge(info("G2","G2"),2L);
  verify(rb).addGauge(info("G3","G3"),3.0f);
  verify(rb).addGauge(info("G4","G4"),4.0);
  verify(rb).addCounter(info("C1","C1"),1);
  verify(rb).addCounter(info("C2","C2"),2L);
  verify(rb).tag(info("T1","T1"),"t1");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MetricsException.class) public void testBadHybrid(){
  MetricsAnnotations.makeSource(new BadHybridMetrics());
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=MetricsException.class) public void testBadFields(){
  MetricsAnnotations.makeSource(new BadMetrics());
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testBadMethodWithArgs(){
  MetricsAnnotations.makeSource(new BadMetrics2());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.metrics2.lib.TestMetricsRegistry </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test the add by name method
 */
@Test public void testAddByName(){
  MetricsRecordBuilder rb=mockMetricsRecordBuilder();
  final MetricsRegistry r=new MetricsRegistry("test");
  r.add("s1",42);
  r.get("s1").snapshot(rb);
  verify(rb).addCounter(info("S1NumOps","Number of ops for s1"),1L);
  verify(rb).addGauge(info("S1AvgTime","Average time for s1"),42.0);
  r.newCounter("c1","test add",1);
  r.newGauge("g1","test add",1);
  expectMetricsException("Unsupported add",new Runnable(){
    @Override public void run(){
      r.add("c1",42);
    }
  }
);
  expectMetricsException("Unsupported add",new Runnable(){
    @Override public void run(){
      r.add("g1",42);
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.metrics2.lib.TestMutableMetrics </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test the snapshot method
 */
@Test public void testSnapshot(){
  MetricsRecordBuilder mb=mockMetricsRecordBuilder();
  MetricsRegistry registry=new MetricsRegistry("test");
  registry.newCounter("c1","int counter",1);
  registry.newCounter("c2","long counter",2L);
  registry.newGauge("g1","int gauge",3);
  registry.newGauge("g2","long gauge",4L);
  registry.newStat("s1","stat","Ops","Time",true).add(0);
  registry.newRate("s2","stat",false).add(0);
  registry.snapshot(mb,true);
  MutableStat s2=(MutableStat)registry.get("s2");
  s2.snapshot(mb,true);
  s2.add(1);
  s2.snapshot(mb,true);
  verify(mb).addCounter(info("c1","int counter"),1);
  verify(mb).addCounter(info("c2","long counter"),2L);
  verify(mb).addGauge(info("g1","int gauge"),3);
  verify(mb).addGauge(info("g2","long gauge"),4L);
  verify(mb).addCounter(info("S1NumOps","Number of ops for stat"),1L);
  verify(mb).addGauge(eq(info("S1AvgTime","Average time for stat")),eq(0.0,EPSILON));
  verify(mb).addGauge(eq(info("S1StdevTime","Standard deviation of time for stat")),eq(0.0,EPSILON));
  verify(mb).addGauge(eq(info("S1IMinTime","Interval min time for stat")),eq(0.0,EPSILON));
  verify(mb).addGauge(eq(info("S1IMaxTime","Interval max time for stat")),eq(0.0,EPSILON));
  verify(mb).addGauge(eq(info("S1MinTime","Min time for stat")),eq(0.0,EPSILON));
  verify(mb).addGauge(eq(info("S1MaxTime","Max time for stat")),eq(0.0,EPSILON));
  verify(mb,times(2)).addCounter(info("S2NumOps","Number of ops for stat"),1L);
  verify(mb,times(2)).addGauge(eq(info("S2AvgTime","Average time for stat")),eq(0.0,EPSILON));
  verify(mb).addCounter(info("S2NumOps","Number of ops for stat"),2L);
  verify(mb).addGauge(eq(info("S2AvgTime","Average time for stat")),eq(1.0,EPSILON));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMutableRates(){
  MetricsRecordBuilder rb=mockMetricsRecordBuilder();
  MetricsRegistry registry=new MetricsRegistry("test");
  MutableRates rates=new MutableRates(registry);
  rates.init(TestProtocol.class);
  registry.snapshot(rb,false);
  assertCounter("FooNumOps",0L,rb);
  assertGauge("FooAvgTime",0.0,rb);
  assertCounter("BarNumOps",0L,rb);
  assertGauge("BarAvgTime",0.0,rb);
}

</code></pre>

<br>
<pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Ensure that quantile estimates from {@link MutableQuantiles} are within
 * specified error bounds.
 */
@Test(timeout=30000) public void testMutableQuantilesError() throws Exception {
  MetricsRecordBuilder mb=mockMetricsRecordBuilder();
  MetricsRegistry registry=new MetricsRegistry("test");
  MutableQuantiles quantiles=registry.newQuantiles("foo","stat","Ops","Latency",5);
  long start=System.nanoTime() / 1000000;
  for (long i=1; i <= 1000; i++) {
    quantiles.add(i);
    quantiles.add(1001 - i);
  }
  long end=System.nanoTime() / 1000000;
  Thread.sleep(6000 - (end - start));
  registry.snapshot(mb,false);
  Map<Quantile,Long> previousSnapshot=quantiles.previousSnapshot;
  for (  Entry<Quantile,Long> item : previousSnapshot.entrySet()) {
    System.out.println(String.format("Quantile %.2f has value %d",item.getKey().quantile,item.getValue()));
  }
  verify(mb).addGauge(info("FooNumOps","Number of ops for stat with 5s interval"),(long)2000);
  Quantile[] quants=MutableQuantiles.quantiles;
  String name="Foo%dthPercentileLatency";
  String desc="%d percentile latency with 5 second interval for stat";
  for (  Quantile q : quants) {
    int percentile=(int)(100 * q.quantile);
    int error=(int)(1000 * q.error);
    String n=String.format(name,percentile);
    String d=String.format(desc,percentile);
    long expected=(long)(q.quantile * 1000);
    verify(mb).addGauge(eq(info(n,d)),leq(expected + error));
    verify(mb).addGauge(eq(info(n,d)),geq(expected - error));
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that {@link MutableQuantiles} rolls over correctly even if no items
 * have been added to the window
 */
@Test(timeout=30000) public void testMutableQuantilesEmptyRollover() throws Exception {
  MetricsRecordBuilder mb=mockMetricsRecordBuilder();
  MetricsRegistry registry=new MetricsRegistry("test");
  MutableQuantiles quantiles=registry.newQuantiles("foo","stat","Ops","Latency",5);
  quantiles.snapshot(mb,true);
  verify(mb).addGauge(info("FooNumOps","Number of ops for stat with 5s interval"),(long)0);
  Thread.sleep(6000);
  quantiles.snapshot(mb,false);
  verify(mb,times(2)).addGauge(info("FooNumOps","Number of ops for stat with 5s interval"),(long)0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that {@link MutableQuantiles} rolls the window over at the specified
 * interval.
 */
@Test(timeout=30000) public void testMutableQuantilesRollover() throws Exception {
  MetricsRecordBuilder mb=mockMetricsRecordBuilder();
  MetricsRegistry registry=new MetricsRegistry("test");
  MutableQuantiles quantiles=registry.newQuantiles("foo","stat","Ops","Latency",5);
  Quantile[] quants=MutableQuantiles.quantiles;
  String name="Foo%dthPercentileLatency";
  String desc="%d percentile latency with 5 second interval for stat";
  long start=System.nanoTime() / 1000000;
  for (int i=1; i <= 3; i++) {
    for (long j=1; j <= 1000; j++) {
      quantiles.add(i);
    }
    long sleep=(start + (5000 * i) + 1000) - (System.nanoTime() / 1000000);
    Thread.sleep(sleep);
    registry.snapshot(mb,false);
    for (    Quantile q : quants) {
      int percentile=(int)(100 * q.quantile);
      String n=String.format(name,percentile);
      String d=String.format(desc,percentile);
      verify(mb).addGauge(info(n,d),(long)i);
    }
  }
  verify(mb,times(3)).addGauge(info("FooNumOps","Number of ops for stat with 5s interval"),(long)1000);
  for (  Quantile q : quants) {
    int percentile=(int)(100 * q.quantile);
    String n=String.format(name,percentile);
    String d=String.format(desc,percentile);
    verify(mb,times(3)).addGauge(eq(info(n,d)),anyLong());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.metrics2.source.TestJvmMetrics </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPresence(){
  JvmPauseMonitor pauseMonitor=new JvmPauseMonitor(new Configuration());
  JvmMetrics jvmMetrics=new JvmMetrics("test","test");
  jvmMetrics.setPauseMonitor(pauseMonitor);
  MetricsRecordBuilder rb=getMetrics(jvmMetrics);
  MetricsCollector mc=rb.parent();
  verify(mc).addRecord(JvmMetrics);
  verify(rb).tag(ProcessName,"test");
  verify(rb).tag(SessionId,"test");
  for (  JvmMetricsInfo info : JvmMetricsInfo.values()) {
    if (info.name().startsWith("Mem"))     verify(rb).addGauge(eq(info),anyFloat());
 else     if (info.name().startsWith("Gc"))     verify(rb).addCounter(eq(info),anyLong());
 else     if (info.name().startsWith("Threads"))     verify(rb).addGauge(eq(info),anyInt());
 else     if (info.name().startsWith("Log"))     verify(rb).addCounter(eq(info),anyLong());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.net.TestDNS </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * TestCase: get our local address and reverse look it up
 */
@Test public void testRDNS() throws Exception {
  InetAddress localhost=getLocalIPAddr();
  try {
    String s=DNS.reverseDns(localhost,null);
    LOG.info("Local revers DNS hostname is " + s);
  }
 catch (  NameNotFoundException e) {
    if (!localhost.isLinkLocalAddress() || localhost.isLoopbackAddress()) {
      LOG.info("Reverse DNS failing as due to incomplete networking",e);
      LOG.info("Address is " + localhost + " Loopback="+ localhost.isLoopbackAddress()+ " Linklocal="+ localhost.isLinkLocalAddress());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.net.TestNetUtils </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResolverGetByNameUnqualified(){
  String host="unknown";
  verifyGetByName(host,host + ".a.b.",host + ".b.",host + ".c.",host + ".");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=UnknownHostException.class) public void testVerifyHostnamesException() throws UnknownHostException {
  String[] names={"valid.host.com","1.com","invalid host here"};
  NetUtils.verifyHostnames(names);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWrapConnectException() throws Throwable {
  IOException e=new ConnectException("failed");
  IOException wrapped=verifyExceptionClass(e,ConnectException.class);
  assertInException(wrapped,"failed");
  assertWikified(wrapped);
  assertInException(wrapped,"localhost");
  assertRemoteDetailsIncluded(wrapped);
  assertInException(wrapped,"/ConnectionRefused");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResolverUnqualifedFull(){
  String host="host.a.b";
  InetAddress addr=verifyResolve(host,host + ".");
  verifyInetAddress(addr,host,"1.1.1.1");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResolverGetByNameUnqualifiedWithDomain(){
  String host="unknown.domain";
  verifyGetByName(host,host + ".",host + ".a.b.",host + ".b.",host + ".c.");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResolverGetByNameQualified(){
  String host="unknown.";
  verifyGetByName(host,host);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResolverGetByNameWithSearchQualified(){
  String host="unknown.";
  verifyGetByNameWithSearch(host,host);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResolverGetByNameWithSearchUnqualifiedWithDomain(){
  String host="unknown.domain";
  verifyGetByNameWithSearch(host,host + ".a.b.",host + ".b.",host + ".c.");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResolverIP(){
  String host="1.1.1.1";
  InetAddress addr=verifyResolve(host);
  verifyInetAddress(addr,host,host);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSocketReadTimeoutWithChannel() throws Exception {
  doSocketReadTimeoutTest(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResolverUnqualified(){
  String host="host";
  InetAddress addr=verifyResolve(host,host + ".a.b.");
  verifyInetAddress(addr,"host.a.b","1.1.1.1");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResolverLoopback(){
  String host="Localhost";
  InetAddress addr=verifyResolve(host);
  verifyInetAddress(addr,"Localhost","127.0.0.1");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResolverUnqualifiedWithDomain(){
  String host="host.a";
  InetAddress addr=verifyResolve(host,host + ".",host + ".a.b.",host + ".b.");
  verifyInetAddress(addr,"host.a.b","1.1.1.1");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResolverGetByExactNameQualified(){
  verifyGetByExactNameSearch("unknown.","unknown.");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWrapBindException() throws Throwable {
  IOException e=new BindException("failed");
  IOException wrapped=verifyExceptionClass(e,BindException.class);
  assertInException(wrapped,"failed");
  assertLocalDetailsIncluded(wrapped);
  assertNotInException(wrapped,DEST_PORT_NAME);
  assertInException(wrapped,"/BindException");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResolverGetByNameWithSearchQualifiedWithDomain(){
  String host="unknown.domain.";
  verifyGetByNameWithSearch(host,host);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResolverGetByExactNameUnqualifiedWithDomain(){
  verifyGetByExactNameSearch("unknown.domain","unknown.domain.");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWrapUnknownHostException() throws Throwable {
  IOException e=new UnknownHostException("failed");
  IOException wrapped=verifyExceptionClass(e,UnknownHostException.class);
  assertInException(wrapped,"failed");
  assertWikified(wrapped);
  assertInException(wrapped,"localhost");
  assertRemoteDetailsIncluded(wrapped);
  assertInException(wrapped,"/UnknownHost");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResolverGetByExactNameUnqualified(){
  verifyGetByExactNameSearch("unknown","unknown.");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSocketReadTimeoutWithoutChannel() throws Exception {
  doSocketReadTimeoutTest(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResolverGetByExactNameQualifiedWithDomain(){
  verifyGetByExactNameSearch("unknown.domain.","unknown.domain.");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResolverQualifed(){
  String host="host.a.b.";
  InetAddress addr=verifyResolve(host,host);
  verifyInetAddress(addr,host,"1.1.1.1");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResolverGetByNameWithSearchUnqualified(){
  String host="unknown";
  verifyGetByNameWithSearch(host,host + ".a.b.",host + ".b.",host + ".c.");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResolverGetByNameQualifiedWithDomain(){
  verifyGetByName("unknown.domain.","unknown.domain.");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.net.TestStaticMapping </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStaticIsMultiSwitchOnScript() throws Throwable {
  StaticMapping mapping=newInstance("ls");
  assertMultiSwitch(mapping);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStaticIsSingleSwitchOnNullScript() throws Throwable {
  StaticMapping mapping=newInstance(null);
  mapping.setConf(createConf(null));
  assertSingleSwitch(mapping);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This test verifies that resultion queries get relayed to the inner rack
 * @throws Throwable on any problem
 */
@Test public void testCachingRelaysResolveQueries() throws Throwable {
  StaticMapping mapping=newInstance();
  mapping.setConf(createConf("top"));
  StaticMapping staticMapping=mapping;
  CachedDNSToSwitchMapping cachedMap=new CachedDNSToSwitchMapping(staticMapping);
  assertMapSize(cachedMap,0);
  StaticMapping.addNodeToRack("n1","/r1");
  assertMapSize(staticMapping,1);
  assertMapSize(cachedMap,0);
  cachedMap.resolve(createQueryList());
  assertMapSize(cachedMap,2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Verify that if the inner mapping is multi-switch, so is the cached one
 * @throws Throwable on any problem
 */
@Test public void testCachingRelaysMultiSwitchQueries() throws Throwable {
  StaticMapping staticMapping=newInstance("top");
  assertMultiSwitch(staticMapping);
  CachedDNSToSwitchMapping cachedMap=new CachedDNSToSwitchMapping(staticMapping);
  LOG.info("Mapping: " + cachedMap + "\n"+ cachedMap.dumpTopology());
  assertMultiSwitch(cachedMap);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Verify that if the inner mapping is single-switch, so is the cached one
 * @throws Throwable on any problem
 */
@Test public void testCachingRelaysSingleSwitchQueries() throws Throwable {
  StaticMapping staticMapping=newInstance(null);
  assertSingleSwitch(staticMapping);
  CachedDNSToSwitchMapping cachedMap=new CachedDNSToSwitchMapping(staticMapping);
  LOG.info("Mapping: " + cachedMap + "\n"+ cachedMap.dumpTopology());
  assertSingleSwitch(cachedMap);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This test verifies that resultion queries get relayed to the inner rack
 * @throws Throwable on any problem
 */
@Test public void testCachingCachesNegativeEntries() throws Throwable {
  StaticMapping staticMapping=newInstance();
  CachedDNSToSwitchMapping cachedMap=new CachedDNSToSwitchMapping(staticMapping);
  assertMapSize(cachedMap,0);
  assertMapSize(staticMapping,0);
  List<String> resolved=cachedMap.resolve(createQueryList());
  assertMapSize(staticMapping,0);
  assertMapSize(cachedMap,2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.net.unix.TestDomainSocket </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=180000) public void testClientServerOutStreamInStreamWithSocketpair() throws Exception {
  testClientServer1(OutputStreamWriteStrategy.class,InputStreamReadStrategy.class,DomainSocket.socketpair());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=180000) public void testClientServerOutStreamInAbbWithSocketpair() throws Exception {
  testClientServer1(OutputStreamWriteStrategy.class,ArrayBackedByteBufferReadStrategy.class,DomainSocket.socketpair());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that attempting to connect to an invalid path doesn't work.
 * @throws IOException
 */
@Test(timeout=180000) public void testInvalidOperations() throws IOException {
  try {
    DomainSocket.connect(new File(sockDir.getDir(),"test_sock_invalid_operation").getAbsolutePath());
  }
 catch (  IOException e) {
    GenericTestUtils.assertExceptionContains("connect(2) error: ",e);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=180000) public void testAsyncCloseDuringRead() throws Exception {
  testAsyncCloseDuringIO(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that if one thread is blocking in a read or write operation, another
 * thread can close the socket and stop the accept.
 * @throws IOException
 */
@Test(timeout=180000) public void testSocketAcceptAndClose() throws Exception {
  final String TEST_PATH=new File(sockDir.getDir(),"test_sock_accept_and_close").getAbsolutePath();
  final DomainSocket serv=DomainSocket.bindAndListen(TEST_PATH);
  ExecutorService exeServ=Executors.newSingleThreadExecutor();
  Callable<Void> callable=new Callable<Void>(){
    public Void call(){
      try {
        serv.accept();
        throw new RuntimeException("expected the accept() to be " + "interrupted and fail");
      }
 catch (      AsynchronousCloseException e) {
        return null;
      }
catch (      IOException e) {
        throw new RuntimeException("unexpected IOException",e);
      }
    }
  }
;
  Future<Void> future=exeServ.submit(callable);
  Thread.sleep(500);
  serv.close();
  future.get(2,TimeUnit.MINUTES);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=180000) public void testClientServerOutStreamInDbbWithSocketpair() throws Exception {
  testClientServer1(OutputStreamWriteStrategy.class,DirectByteBufferReadStrategy.class,DomainSocket.socketpair());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that we can create a socket and close it, even if it hasn't been
 * opened.
 * @throws IOException
 */
@Test(timeout=180000) public void testSocketCreateAndClose() throws IOException {
  DomainSocket serv=DomainSocket.bindAndListen(new File(sockDir.getDir(),"test_sock_create_and_close").getAbsolutePath());
  serv.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test file descriptor path security.
 * @throws IOException
 */
@Test(timeout=180000) public void testFdPassingPathSecurity() throws Exception {
  TemporarySocketDirectory tmp=new TemporarySocketDirectory();
  try {
    String prefix=tmp.getDir().getAbsolutePath();
    Shell.execCommand(new String[]{"mkdir","-p",prefix + "/foo/bar/baz"});
    Shell.execCommand(new String[]{"chmod","0700",prefix + "/foo/bar/baz"});
    Shell.execCommand(new String[]{"chmod","0700",prefix + "/foo/bar"});
    Shell.execCommand(new String[]{"chmod","0707",prefix + "/foo"});
    Shell.execCommand(new String[]{"mkdir","-p",prefix + "/q1/q2"});
    Shell.execCommand(new String[]{"chmod","0700",prefix + "/q1"});
    Shell.execCommand(new String[]{"chmod","0700",prefix + "/q1/q2"});
    testValidateSocketPath(prefix + "/q1/q2",prefix);
    try {
      testValidateSocketPath(prefix + "/foo/bar/baz",prefix);
    }
 catch (    IOException e) {
      GenericTestUtils.assertExceptionContains("/foo' is world-writable.  " + "Its permissions are 0707.  Please fix this or select a " + "different socket path.",e);
    }
    try {
      testValidateSocketPath(prefix + "/nope",prefix);
    }
 catch (    IOException e) {
      GenericTestUtils.assertExceptionContains("failed to stat a path " + "component: ",e);
    }
    DomainSocket.validateSocketPathSecurity0("/foo",1);
  }
  finally {
    tmp.close();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=180000) public void testClientServerOutStreamInStream() throws Exception {
  testClientServer1(OutputStreamWriteStrategy.class,InputStreamReadStrategy.class,null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=180000) public void testClientServerOutStreamInDbb() throws Exception {
  testClientServer1(OutputStreamWriteStrategy.class,DirectByteBufferReadStrategy.class,null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=180000) public void testAsyncCloseDuringWrite() throws Exception {
  testAsyncCloseDuringIO(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=180000) public void testClientServerOutStreamInAbb() throws Exception {
  testClientServer1(OutputStreamWriteStrategy.class,ArrayBackedByteBufferReadStrategy.class,null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.net.unix.TestDomainSocketWatcher </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that we can get notifications out a DomainSocketWatcher.
 */
@Test(timeout=180000) public void testDeliverNotifications() throws Exception {
  DomainSocketWatcher watcher=new DomainSocketWatcher(10000000);
  DomainSocket pair[]=DomainSocket.socketpair();
  final CountDownLatch latch=new CountDownLatch(1);
  watcher.add(pair[1],new DomainSocketWatcher.Handler(){
    @Override public boolean handle(    DomainSocket sock){
      latch.countDown();
      return true;
    }
  }
);
  pair[0].close();
  latch.await();
  watcher.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=300000) public void testStress() throws Exception {
  final int SOCKET_NUM=250;
  final ReentrantLock lock=new ReentrantLock();
  final DomainSocketWatcher watcher=new DomainSocketWatcher(10000000);
  final ArrayList<DomainSocket[]> pairs=new ArrayList<DomainSocket[]>();
  final AtomicInteger handled=new AtomicInteger(0);
  final Thread adderThread=new Thread(new Runnable(){
    @Override public void run(){
      try {
        for (int i=0; i < SOCKET_NUM; i++) {
          DomainSocket pair[]=DomainSocket.socketpair();
          watcher.add(pair[1],new DomainSocketWatcher.Handler(){
            @Override public boolean handle(            DomainSocket sock){
              handled.incrementAndGet();
              return true;
            }
          }
);
          lock.lock();
          try {
            pairs.add(pair);
          }
  finally {
            lock.unlock();
          }
        }
      }
 catch (      Throwable e) {
        LOG.error(e);
        throw new RuntimeException(e);
      }
    }
  }
);
  final Thread removerThread=new Thread(new Runnable(){
    @Override public void run(){
      final Random random=new Random();
      try {
        while (handled.get() != SOCKET_NUM) {
          lock.lock();
          try {
            if (!pairs.isEmpty()) {
              int idx=random.nextInt(pairs.size());
              DomainSocket pair[]=pairs.remove(idx);
              if (random.nextBoolean()) {
                pair[0].close();
              }
 else {
                watcher.remove(pair[1]);
              }
            }
          }
  finally {
            lock.unlock();
          }
        }
      }
 catch (      Throwable e) {
        LOG.error(e);
        throw new RuntimeException(e);
      }
    }
  }
);
  adderThread.start();
  removerThread.start();
  Uninterruptibles.joinUninterruptibly(adderThread);
  Uninterruptibles.joinUninterruptibly(removerThread);
  watcher.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that we can create a DomainSocketWatcher and then shut it down.
 */
@Test(timeout=60000) public void testCreateShutdown() throws Exception {
  DomainSocketWatcher watcher=new DomainSocketWatcher(10000000);
  watcher.close();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that a java interruption can stop the watcher thread
 */
@Test(timeout=60000) public void testInterruption() throws Exception {
  final DomainSocketWatcher watcher=new DomainSocketWatcher(10);
  watcher.watcherThread.interrupt();
  Uninterruptibles.joinUninterruptibly(watcher.watcherThread);
  watcher.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.oncrpc.TestRpcAcceptedReply </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IndexOutOfBoundsException.class) public void testAcceptStateFromInvalidValue(){
  AcceptState.fromValue(6);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.oncrpc.TestRpcDeniedReply </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IndexOutOfBoundsException.class) public void testRejectStateFromInvalidValue1(){
  RejectState.fromValue(2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.oncrpc.TestRpcMessage </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testValidateMessageException(){
  RpcMessage msg=getRpcMessage(0,RpcMessage.Type.RPC_CALL);
  msg.validateMessageType(RpcMessage.Type.RPC_REPLY);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testValidateMessage(){
  RpcMessage msg=getRpcMessage(0,RpcMessage.Type.RPC_CALL);
  msg.validateMessageType(RpcMessage.Type.RPC_CALL);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.oncrpc.TestRpcReply </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IndexOutOfBoundsException.class) public void testReplyStateFromInvalidValue1(){
  ReplyState.fromValue(2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.oncrpc.TestXDR </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPerformance(){
  final int TEST_TIMES=8 << 20;
  serializeInt(TEST_TIMES);
  serializeLong(TEST_TIMES);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.TestJNIGroupsMapping </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testJNIGroupsMapping() throws Exception {
  String user=UserGroupInformation.getCurrentUser().getShortUserName();
  testForUser(user);
  testForUser("fooBarBaz1234DoesNotExist");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.TestLdapGroupsMapping </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetGroups() throws IOException, NamingException {
  when(mockContext.search(anyString(),anyString(),any(Object[].class),any(SearchControls.class))).thenReturn(mockUserNamingEnum,mockGroupNamingEnum);
  doTestGetGroups(Arrays.asList(testGroups),2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetGroupsWithLdapDown() throws IOException, NamingException {
  when(mockContext.search(anyString(),anyString(),any(Object[].class),any(SearchControls.class))).thenThrow(new CommunicationException("Connection is closed"));
  doTestGetGroups(Arrays.asList(new String[]{}),1 + LdapGroupsMapping.RECONNECT_RETRY_COUNT);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetGroupsWithConnectionClosed() throws IOException, NamingException {
  when(mockContext.search(anyString(),anyString(),any(Object[].class),any(SearchControls.class))).thenThrow(new CommunicationException("Connection is closed")).thenReturn(mockUserNamingEnum,mockGroupNamingEnum);
  doTestGetGroups(Arrays.asList(testGroups),1 + 2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.TestNetgroupCache </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Cache a group with a set of users.
 * Test membership correctness.
 * Clear cache, remove a user from the group and cache the group
 * Test membership correctness.
 */
@Test public void testUserRemoval(){
  List<String> users=new ArrayList<String>();
  users.add(USER1);
  users.add(USER2);
  NetgroupCache.add(GROUP1,users);
  verifyGroupMembership(USER1,1,GROUP1);
  verifyGroupMembership(USER2,1,GROUP1);
  users.remove(USER2);
  NetgroupCache.clear();
  NetgroupCache.add(GROUP1,users);
  verifyGroupMembership(USER1,1,GROUP1);
  verifyGroupMembership(USER2,0,null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Cache two groups with a set of users.
 * Test membership correctness.
 */
@Test public void testMembership(){
  List<String> users=new ArrayList<String>();
  users.add(USER1);
  users.add(USER2);
  NetgroupCache.add(GROUP1,users);
  users=new ArrayList<String>();
  users.add(USER1);
  users.add(USER3);
  NetgroupCache.add(GROUP2,users);
  verifyGroupMembership(USER1,2,GROUP1);
  verifyGroupMembership(USER1,2,GROUP2);
  verifyGroupMembership(USER2,1,GROUP1);
  verifyGroupMembership(USER3,1,GROUP2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Cache two groups with a set of users.
 * Test membership correctness.
 * Clear cache, cache only one group.
 * Test membership correctness.
 */
@Test public void testGroupRemoval(){
  List<String> users=new ArrayList<String>();
  users.add(USER1);
  users.add(USER2);
  NetgroupCache.add(GROUP1,users);
  users=new ArrayList<String>();
  users.add(USER1);
  users.add(USER3);
  NetgroupCache.add(GROUP2,users);
  verifyGroupMembership(USER1,2,GROUP1);
  verifyGroupMembership(USER1,2,GROUP2);
  verifyGroupMembership(USER2,1,GROUP1);
  verifyGroupMembership(USER3,1,GROUP2);
  NetgroupCache.clear();
  users=new ArrayList<String>();
  users.add(USER1);
  users.add(USER2);
  NetgroupCache.add(GROUP1,users);
  verifyGroupMembership(USER1,1,GROUP1);
  verifyGroupMembership(USER2,1,GROUP1);
  verifyGroupMembership(USER3,0,null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.TestPermission </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreate() throws Exception {
  Configuration conf=new HdfsConfiguration();
  conf.setBoolean(DFSConfigKeys.DFS_PERMISSIONS_ENABLED_KEY,true);
  conf.set(FsPermission.UMASK_LABEL,"000");
  MiniDFSCluster cluster=null;
  FileSystem fs=null;
  try {
    cluster=new MiniDFSCluster.Builder(conf).numDataNodes(3).build();
    cluster.waitActive();
    fs=FileSystem.get(conf);
    FsPermission rootPerm=checkPermission(fs,"/",null);
    FsPermission inheritPerm=FsPermission.createImmutable((short)(rootPerm.toShort() | 0300));
    FsPermission dirPerm=new FsPermission((short)0777);
    fs.mkdirs(new Path("/a1/a2/a3"),dirPerm);
    checkPermission(fs,"/a1",dirPerm);
    checkPermission(fs,"/a1/a2",dirPerm);
    checkPermission(fs,"/a1/a2/a3",dirPerm);
    dirPerm=new FsPermission((short)0123);
    FsPermission permission=FsPermission.createImmutable((short)(dirPerm.toShort() | 0300));
    fs.mkdirs(new Path("/aa/1/aa/2/aa/3"),dirPerm);
    checkPermission(fs,"/aa/1",permission);
    checkPermission(fs,"/aa/1/aa/2",permission);
    checkPermission(fs,"/aa/1/aa/2/aa/3",dirPerm);
    FsPermission filePerm=new FsPermission((short)0444);
    Path p=new Path("/b1/b2/b3.txt");
    FSDataOutputStream out=fs.create(p,filePerm,true,conf.getInt(CommonConfigurationKeys.IO_FILE_BUFFER_SIZE_KEY,4096),fs.getDefaultReplication(p),fs.getDefaultBlockSize(p),null);
    out.write(123);
    out.close();
    checkPermission(fs,"/b1",inheritPerm);
    checkPermission(fs,"/b1/b2",inheritPerm);
    checkPermission(fs,"/b1/b2/b3.txt",filePerm);
    conf.set(FsPermission.UMASK_LABEL,"022");
    permission=FsPermission.createImmutable((short)0666);
    FileSystem.mkdirs(fs,new Path("/c1"),new FsPermission(permission));
    FileSystem.create(fs,new Path("/c1/c2.txt"),new FsPermission(permission));
    checkPermission(fs,"/c1",permission);
    checkPermission(fs,"/c1/c2.txt",permission);
  }
  finally {
    try {
      if (fs != null)       fs.close();
    }
 catch (    Exception e) {
      LOG.error(StringUtils.stringifyException(e));
    }
    try {
      if (cluster != null)       cluster.shutdown();
    }
 catch (    Exception e) {
      LOG.error(StringUtils.stringifyException(e));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.TestPermissionSymlinks </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=5000) public void testFileStatus() throws Exception {
  fs.setPermission(target,new FsPermission((short)0000));
  doGetFileLinkStatusTargetNotReadable();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclRenameSrcNotWritableFC() throws Exception {
  fs.setAcl(linkParent,Arrays.asList(aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,USER,user.getUserName(),READ_EXECUTE),aclEntry(ACCESS,GROUP,ALL),aclEntry(ACCESS,OTHER,ALL)));
  doRenameSrcNotWritableFC();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclRenameSrcNotWritableFS() throws Exception {
  fs.setAcl(linkParent,Arrays.asList(aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,USER,user.getUserName(),READ_EXECUTE),aclEntry(ACCESS,GROUP,ALL),aclEntry(ACCESS,OTHER,ALL)));
  doRenameSrcNotWritableFS();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclRenameTargetNotWritableFC() throws Exception {
  fs.setAcl(target,Arrays.asList(aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,USER,user.getUserName(),READ_EXECUTE),aclEntry(ACCESS,GROUP,ALL),aclEntry(ACCESS,OTHER,ALL)));
  fs.setAcl(targetParent,Arrays.asList(aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,USER,user.getUserName(),READ_EXECUTE),aclEntry(ACCESS,GROUP,ALL),aclEntry(ACCESS,OTHER,ALL)));
  doRenameLinkTargetNotWritableFC();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclRenameTargetNotWritableFS() throws Exception {
  fs.setAcl(target,Arrays.asList(aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,USER,user.getUserName(),READ_EXECUTE),aclEntry(ACCESS,GROUP,ALL),aclEntry(ACCESS,OTHER,ALL)));
  fs.setAcl(targetParent,Arrays.asList(aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,USER,user.getUserName(),READ_EXECUTE),aclEntry(ACCESS,GROUP,ALL),aclEntry(ACCESS,OTHER,ALL)));
  doRenameLinkTargetNotWritableFS();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclReadTargetNotReadable() throws Exception {
  fs.setAcl(target,Arrays.asList(aclEntry(ACCESS,USER,READ_WRITE),aclEntry(ACCESS,USER,user.getUserName(),NONE),aclEntry(ACCESS,GROUP,READ),aclEntry(ACCESS,OTHER,READ)));
  doReadTargetNotReadable();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=5000) public void testReadWhenTargetNotReadable() throws Exception {
  fs.setPermission(target,new FsPermission((short)0000));
  doReadTargetNotReadable();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclGetFileLinkStatusTargetNotReadable() throws Exception {
  fs.setAcl(target,Arrays.asList(aclEntry(ACCESS,USER,READ_WRITE),aclEntry(ACCESS,USER,user.getUserName(),NONE),aclEntry(ACCESS,GROUP,READ),aclEntry(ACCESS,OTHER,READ)));
  doGetFileLinkStatusTargetNotReadable();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=5000) public void testDelete() throws Exception {
  fs.setPermission(linkParent,new FsPermission((short)0555));
  doDeleteLinkParentNotWritable();
  fs.setPermission(linkParent,new FsPermission((short)0777));
  fs.setPermission(targetParent,new FsPermission((short)0555));
  fs.setPermission(target,new FsPermission((short)0555));
  doDeleteTargetParentAndTargetNotWritable();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclDelete() throws Exception {
  fs.setAcl(linkParent,Arrays.asList(aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,USER,user.getUserName(),READ_EXECUTE),aclEntry(ACCESS,GROUP,ALL),aclEntry(ACCESS,OTHER,ALL)));
  doDeleteLinkParentNotWritable();
  fs.setAcl(linkParent,Arrays.asList(aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,GROUP,ALL),aclEntry(ACCESS,OTHER,ALL)));
  fs.setAcl(targetParent,Arrays.asList(aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,USER,user.getUserName(),READ_EXECUTE),aclEntry(ACCESS,GROUP,ALL),aclEntry(ACCESS,OTHER,ALL)));
  fs.setAcl(target,Arrays.asList(aclEntry(ACCESS,USER,ALL),aclEntry(ACCESS,USER,user.getUserName(),READ_EXECUTE),aclEntry(ACCESS,GROUP,ALL),aclEntry(ACCESS,OTHER,ALL)));
  doDeleteTargetParentAndTargetNotWritable();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=5000) public void testRenameSrcNotWritableFC() throws Exception {
  fs.setPermission(linkParent,new FsPermission((short)0555));
  doRenameSrcNotWritableFC();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=5000) public void testRenameLinkTargetNotWritableFS() throws Exception {
  fs.setPermission(target,new FsPermission((short)0555));
  fs.setPermission(targetParent,new FsPermission((short)0555));
  doRenameLinkTargetNotWritableFS();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=5000) public void testRenameLinkTargetNotWritableFC() throws Exception {
  fs.setPermission(target,new FsPermission((short)0555));
  fs.setPermission(targetParent,new FsPermission((short)0555));
  doRenameLinkTargetNotWritableFC();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=5000) public void testRenameSrcNotWritableFS() throws Exception {
  fs.setPermission(linkParent,new FsPermission((short)0555));
  doRenameSrcNotWritableFS();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.TestSecurityUtil </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSocketAddrWithIP(){
  String staticHost="127.0.0.1";
  NetUtils.addStaticResolution(staticHost,"localhost");
  verifyServiceAddr(staticHost,"127.0.0.1");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSocketAddrWithNameToStaticIP(){
  String staticHost="host3";
  NetUtils.addStaticResolution(staticHost,"255.255.255.255");
  verifyServiceAddr(staticHost,"255.255.255.255");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSocketAddrWithName(){
  String staticHost="my";
  NetUtils.addStaticResolution(staticHost,"localhost");
  verifyServiceAddr("LocalHost","127.0.0.1");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSocketAddrWithIPToStaticIP(){
  String staticHost="1.2.3.4";
  NetUtils.addStaticResolution(staticHost,"255.255.255.255");
  verifyServiceAddr(staticHost,"255.255.255.255");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBadHostsAndPorts(){
  runBadCases("",true);
  runBadCases(":",false);
  runBadCases("hdfs/",false);
  runBadCases("hdfs:/",false);
  runBadCases("hdfs://",true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGoodHostsAndPorts(){
  InetSocketAddress compare=NetUtils.createSocketAddrForHost("localhost",123);
  runGoodCases(compare,"localhost",123);
  runGoodCases(compare,"localhost:",123);
  runGoodCases(compare,"localhost:123",456);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSocketAddrWithNameToStaticName(){
  String staticHost="host1";
  NetUtils.addStaticResolution(staticHost,"localhost");
  verifyServiceAddr(staticHost,"127.0.0.1");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPrincipalsWithLowerCaseHosts() throws IOException {
  String service="xyz/";
  String realm="@REALM";
  String principalInConf=service + SecurityUtil.HOSTNAME_PATTERN + realm;
  String hostname="FooHost";
  String principal=service + hostname.toLowerCase() + realm;
  verify(principalInConf,hostname,principal);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.TestUserGroupInformation </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testProxyLogin() throws IOException {
  tryLoginAuthenticationMethod(AuthenticationMethod.PROXY,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testTokenLogin() throws IOException {
  tryLoginAuthenticationMethod(AuthenticationMethod.TOKEN,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings("unchecked") @Test(timeout=30000) public <T extends TokenIdentifier>void testAddToken() throws Exception {
  UserGroupInformation ugi=UserGroupInformation.createRemoteUser("someone");
  Token<T> t1=mock(Token.class);
  Token<T> t2=mock(Token.class);
  Token<T> t3=mock(Token.class);
  ugi.addToken(t1);
  checkTokens(ugi,t1);
  ugi.addToken(t2);
  checkTokens(ugi,t2);
  when(t1.getService()).thenReturn(new Text("t1"));
  ugi.addToken(t1);
  checkTokens(ugi,t1,t2);
  when(t3.getService()).thenReturn(new Text("t1"));
  ugi.addToken(t3);
  checkTokens(ugi,t2,t3);
  when(t1.getService()).thenReturn(new Text("t1.1"));
  ugi.addToken(t1);
  checkTokens(ugi,t1,t2,t3);
  ugi.addToken(t1);
  checkTokens(ugi,t1,t2,t3);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * test constructor 
 */
@Test(timeout=30000) public void testConstructorWithKerberosRules() throws Exception {
  SecurityUtil.setAuthenticationMethod(AuthenticationMethod.KERBEROS,conf);
  conf.set(HADOOP_SECURITY_AUTH_TO_LOCAL,"RULE:[2:$1@$0](.*@OTHER.REALM)s/(.*)@.*/other-$1/" + "RULE:[1:$1@$0](.*@OTHER.REALM)s/(.*)@.*/other-$1/" + "DEFAULT");
  UserGroupInformation.setConfiguration(conf);
  testConstructorSuccess("user1","user1");
  testConstructorSuccess("user2@DEFAULT.REALM","user2");
  testConstructorSuccess("user3/cron@DEFAULT.REALM","user3");
  testConstructorSuccess("user4@OTHER.REALM","other-user4");
  testConstructorSuccess("user5/cron@OTHER.REALM","other-user5");
  testConstructorFailures(null);
  testConstructorFailures("");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * test constructor 
 */
@Test(timeout=30000) public void testConstructor() throws Exception {
  testConstructorSuccess("user1","user1");
  testConstructorSuccess("user2@DEFAULT.REALM","user2");
  testConstructorSuccess("user3/cron@DEFAULT.REALM","user3");
  testConstructorSuccess("user4@OTHER.REALM","user4");
  testConstructorSuccess("user5/cron@OTHER.REALM","user5");
  testConstructorFailures(null);
  testConstructorFailures("");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * test constructor 
 */
@Test(timeout=30000) public void testConstructorWithKerberos() throws Exception {
  SecurityUtil.setAuthenticationMethod(AuthenticationMethod.KERBEROS,conf);
  UserGroupInformation.setConfiguration(conf);
  testConstructorSuccess("user1","user1");
  testConstructorSuccess("user2@DEFAULT.REALM","user2");
  testConstructorSuccess("user3/cron@DEFAULT.REALM","user3");
  testConstructorFailures("user4@OTHER.REALM");
  testConstructorFailures("user5/cron@OTHER.REALM");
  testConstructorFailures(null);
  testConstructorFailures("");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testSimpleLogin() throws IOException {
  tryLoginAuthenticationMethod(AuthenticationMethod.SIMPLE,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * test constructor 
 */
@Test(timeout=30000) public void testConstructorWithRules() throws Exception {
  conf.set(HADOOP_SECURITY_AUTH_TO_LOCAL,"RULE:[1:$1@$0](.*@OTHER.REALM)s/(.*)@.*/other-$1/");
  UserGroupInformation.setConfiguration(conf);
  testConstructorSuccess("user1","user1");
  testConstructorSuccess("user4@OTHER.REALM","other-user4");
  testConstructorFailures("user2@DEFAULT.REALM");
  testConstructorFailures("user3/cron@DEFAULT.REALM");
  testConstructorFailures("user5/cron@OTHER.REALM");
  testConstructorFailures(null);
  testConstructorFailures("");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.authentication.client.TestAuthenticatedURL </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInjectToken() throws Exception {
  HttpURLConnection conn=Mockito.mock(HttpURLConnection.class);
  AuthenticatedURL.Token token=new AuthenticatedURL.Token();
  token.set("foo");
  AuthenticatedURL.injectToken(conn,token);
  Mockito.verify(conn).addRequestProperty(Mockito.eq("Cookie"),Mockito.anyString());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConnectionConfigurator() throws Exception {
  HttpURLConnection conn=Mockito.mock(HttpURLConnection.class);
  Mockito.when(conn.getResponseCode()).thenReturn(HttpURLConnection.HTTP_UNAUTHORIZED);
  ConnectionConfigurator connConf=Mockito.mock(ConnectionConfigurator.class);
  Mockito.when(connConf.configure(Mockito.<HttpURLConnection>any())).thenReturn(conn);
  Authenticator authenticator=Mockito.mock(Authenticator.class);
  AuthenticatedURL aURL=new AuthenticatedURL(authenticator,connConf);
  aURL.openConnection(new URL("http://foo"),new AuthenticatedURL.Token());
  Mockito.verify(connConf).configure(Mockito.<HttpURLConnection>any());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.authentication.client.TestKerberosAuthenticator </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testFallbacktoPseudoAuthenticator() throws Exception {
  AuthenticatorTestCase auth=new AuthenticatorTestCase();
  Properties props=new Properties();
  props.setProperty(AuthenticationFilter.AUTH_TYPE,"simple");
  props.setProperty(PseudoAuthenticationHandler.ANONYMOUS_ALLOWED,"false");
  AuthenticatorTestCase.setAuthenticationHandlerConfig(props);
  auth._testAuthentication(new KerberosAuthenticator(),false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testAuthenticationPost() throws Exception {
  final AuthenticatorTestCase auth=new AuthenticatorTestCase();
  AuthenticatorTestCase.setAuthenticationHandlerConfig(getAuthenticationHandlerConfiguration());
  KerberosTestUtils.doAsClient(new Callable<Void>(){
    @Override public Void call() throws Exception {
      auth._testAuthentication(new KerberosAuthenticator(),true);
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testAuthentication() throws Exception {
  final AuthenticatorTestCase auth=new AuthenticatorTestCase();
  AuthenticatorTestCase.setAuthenticationHandlerConfig(getAuthenticationHandlerConfiguration());
  KerberosTestUtils.doAsClient(new Callable<Void>(){
    @Override public Void call() throws Exception {
      auth._testAuthentication(new KerberosAuthenticator(),false);
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testFallbacktoPseudoAuthenticatorAnonymous() throws Exception {
  AuthenticatorTestCase auth=new AuthenticatorTestCase();
  Properties props=new Properties();
  props.setProperty(AuthenticationFilter.AUTH_TYPE,"simple");
  props.setProperty(PseudoAuthenticationHandler.ANONYMOUS_ALLOWED,"true");
  AuthenticatorTestCase.setAuthenticationHandlerConfig(props);
  auth._testAuthentication(new KerberosAuthenticator(),false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.authentication.client.TestPseudoAuthenticator </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAuthenticationAnonymousAllowed() throws Exception {
  AuthenticatorTestCase auth=new AuthenticatorTestCase();
  AuthenticatorTestCase.setAuthenticationHandlerConfig(getAuthenticationHandlerConfiguration(true));
  auth._testAuthentication(new PseudoAuthenticator(),false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAuthenticationAnonymousDisallowed() throws Exception {
  AuthenticatorTestCase auth=new AuthenticatorTestCase();
  AuthenticatorTestCase.setAuthenticationHandlerConfig(getAuthenticationHandlerConfiguration(false));
  auth._testAuthentication(new PseudoAuthenticator(),false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAuthenticationAnonymousAllowedWithPost() throws Exception {
  AuthenticatorTestCase auth=new AuthenticatorTestCase();
  AuthenticatorTestCase.setAuthenticationHandlerConfig(getAuthenticationHandlerConfiguration(true));
  auth._testAuthentication(new PseudoAuthenticator(),true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAuthenticationAnonymousDisallowedWithPost() throws Exception {
  AuthenticatorTestCase auth=new AuthenticatorTestCase();
  AuthenticatorTestCase.setAuthenticationHandlerConfig(getAuthenticationHandlerConfiguration(false));
  auth._testAuthentication(new PseudoAuthenticator(),true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.authentication.server.TestAltKerberosAuthenticationHandler </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testNonDefaultNonBrowserUserAgentAsNonBrowser() throws Exception {
  if (handler != null) {
    handler.destroy();
    handler=null;
  }
  handler=getNewAuthenticationHandler();
  Properties props=getDefaultProperties();
  props.setProperty("alt-kerberos.non-browser.user-agents","foo, bar");
  try {
    handler.init(props);
  }
 catch (  Exception ex) {
    handler=null;
    throw ex;
  }
  testRequestWithoutAuthorization();
  testRequestWithInvalidAuthorization();
  testRequestWithAuthorization();
  testRequestWithInvalidKerberosAuthorization();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.authentication.server.TestAuthenticationFilter </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoFilterAuthenticationImmediateExpiration() throws Exception {
  _testDoFilterAuthentication(false,false,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoFilterAuthenticationWithInvalidToken() throws Exception {
  _testDoFilterAuthentication(false,true,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoFilterAuthenticatedInvalidType() throws Exception {
  String secret="secret";
  AuthenticationFilter filter=new AuthenticationFilter();
  try {
    FilterConfig config=Mockito.mock(FilterConfig.class);
    Mockito.when(config.getInitParameter("management.operation.return")).thenReturn("true");
    Mockito.when(config.getInitParameter(AuthenticationFilter.AUTH_TYPE)).thenReturn(DummyAuthenticationHandler.class.getName());
    Mockito.when(config.getInitParameter(AuthenticationFilter.SIGNATURE_SECRET)).thenReturn(secret);
    Mockito.when(config.getInitParameterNames()).thenReturn(new Vector<String>(Arrays.asList(AuthenticationFilter.AUTH_TYPE,AuthenticationFilter.SIGNATURE_SECRET,"management.operation.return")).elements());
    ServletContext context=Mockito.mock(ServletContext.class);
    Mockito.when(context.getAttribute(AuthenticationFilter.SIGNATURE_PROVIDER_ATTRIBUTE)).thenReturn(null);
    Mockito.when(config.getServletContext()).thenReturn(context);
    filter.init(config);
    HttpServletRequest request=Mockito.mock(HttpServletRequest.class);
    Mockito.when(request.getRequestURL()).thenReturn(new StringBuffer("http://foo:8080/bar"));
    AuthenticationToken token=new AuthenticationToken("u","p","invalidtype");
    token.setExpires(System.currentTimeMillis() + TOKEN_VALIDITY_SEC);
    Signer signer=new Signer(new StringSignerSecretProvider(secret));
    String tokenSigned=signer.sign(token.toString());
    Cookie cookie=new Cookie(AuthenticatedURL.AUTH_COOKIE,tokenSigned);
    Mockito.when(request.getCookies()).thenReturn(new Cookie[]{cookie});
    HttpServletResponse response=Mockito.mock(HttpServletResponse.class);
    FilterChain chain=Mockito.mock(FilterChain.class);
    verifyUnauthorized(filter,request,response,chain);
  }
  finally {
    filter.destroy();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoFilterAuthenticationWithDomainPath() throws Exception {
  _testDoFilterAuthentication(true,false,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoFilterAuthentication() throws Exception {
  _testDoFilterAuthentication(false,false,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testManagementOperation() throws Exception {
  AuthenticationFilter filter=new AuthenticationFilter();
  try {
    FilterConfig config=Mockito.mock(FilterConfig.class);
    Mockito.when(config.getInitParameter("management.operation.return")).thenReturn("false");
    Mockito.when(config.getInitParameter(AuthenticationFilter.AUTH_TYPE)).thenReturn(DummyAuthenticationHandler.class.getName());
    Mockito.when(config.getInitParameterNames()).thenReturn(new Vector<String>(Arrays.asList(AuthenticationFilter.AUTH_TYPE,"management.operation.return")).elements());
    ServletContext context=Mockito.mock(ServletContext.class);
    Mockito.when(context.getAttribute(AuthenticationFilter.SIGNATURE_PROVIDER_ATTRIBUTE)).thenReturn(null);
    Mockito.when(config.getServletContext()).thenReturn(context);
    filter.init(config);
    HttpServletRequest request=Mockito.mock(HttpServletRequest.class);
    Mockito.when(request.getRequestURL()).thenReturn(new StringBuffer("http://foo:8080/bar"));
    HttpServletResponse response=Mockito.mock(HttpServletResponse.class);
    FilterChain chain=Mockito.mock(FilterChain.class);
    filter.doFilter(request,response,chain);
    Mockito.verify(response).setStatus(HttpServletResponse.SC_ACCEPTED);
    Mockito.verifyNoMoreInteractions(response);
    Mockito.reset(request);
    Mockito.reset(response);
    AuthenticationToken token=new AuthenticationToken("u","p","t");
    token.setExpires(System.currentTimeMillis() + TOKEN_VALIDITY_SEC);
    Signer signer=new Signer(new StringSignerSecretProvider("secret"));
    String tokenSigned=signer.sign(token.toString());
    Cookie cookie=new Cookie(AuthenticatedURL.AUTH_COOKIE,tokenSigned);
    Mockito.when(request.getCookies()).thenReturn(new Cookie[]{cookie});
    filter.doFilter(request,response,chain);
    Mockito.verify(response).setStatus(HttpServletResponse.SC_ACCEPTED);
    Mockito.verifyNoMoreInteractions(response);
  }
  finally {
    filter.destroy();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDoFilterAuthenticatedExpired() throws Exception {
  String secret="secret";
  AuthenticationFilter filter=new AuthenticationFilter();
  try {
    FilterConfig config=Mockito.mock(FilterConfig.class);
    Mockito.when(config.getInitParameter("management.operation.return")).thenReturn("true");
    Mockito.when(config.getInitParameter(AuthenticationFilter.AUTH_TYPE)).thenReturn(DummyAuthenticationHandler.class.getName());
    Mockito.when(config.getInitParameter(AuthenticationFilter.SIGNATURE_SECRET)).thenReturn(secret);
    Mockito.when(config.getInitParameterNames()).thenReturn(new Vector<String>(Arrays.asList(AuthenticationFilter.AUTH_TYPE,AuthenticationFilter.SIGNATURE_SECRET,"management.operation.return")).elements());
    ServletContext context=Mockito.mock(ServletContext.class);
    Mockito.when(context.getAttribute(AuthenticationFilter.SIGNATURE_PROVIDER_ATTRIBUTE)).thenReturn(null);
    Mockito.when(config.getServletContext()).thenReturn(context);
    filter.init(config);
    HttpServletRequest request=Mockito.mock(HttpServletRequest.class);
    Mockito.when(request.getRequestURL()).thenReturn(new StringBuffer("http://foo:8080/bar"));
    AuthenticationToken token=new AuthenticationToken("u","p",DummyAuthenticationHandler.TYPE);
    token.setExpires(System.currentTimeMillis() - TOKEN_VALIDITY_SEC);
    Signer signer=new Signer(new StringSignerSecretProvider(secret));
    String tokenSigned=signer.sign(token.toString());
    Cookie cookie=new Cookie(AuthenticatedURL.AUTH_COOKIE,tokenSigned);
    Mockito.when(request.getCookies()).thenReturn(new Cookie[]{cookie});
    HttpServletResponse response=Mockito.mock(HttpServletResponse.class);
    FilterChain chain=Mockito.mock(FilterChain.class);
    verifyUnauthorized(filter,request,response,chain);
  }
  finally {
    filter.destroy();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.authentication.server.TestPseudoAuthenticationHandler </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUserNameAnonymousOff() throws Exception {
  _testUserName(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUserNameAnonymousOn() throws Exception {
  _testUserName(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.authentication.util.TestKerberosName </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAntiPatterns() throws Exception {
  checkBadName("owen/owen/owen@FOO.COM");
  checkBadName("owen@foo/bar.com");
  checkBadTranslation("foo@ACME.COM");
  checkBadTranslation("root/joe@FOO.COM");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRules() throws Exception {
  checkTranslation("omalley@" + KerberosTestUtils.getRealm(),"omalley");
  checkTranslation("hdfs/10.0.0.1@" + KerberosTestUtils.getRealm(),"hdfs");
  checkTranslation("oom@YAHOO.COM","oom");
  checkTranslation("johndoe/zoo@FOO.COM","guest");
  checkTranslation("joe/admin@FOO.COM","joe");
  checkTranslation("joe/root@FOO.COM","root");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testToLowerCase() throws Exception {
  String rules="RULE:[1:$1]/L\n" + "RULE:[2:$1]/L\n" + "RULE:[2:$1;$2](^.*;admin$)s/;admin$///L\n"+ "RULE:[2:$1;$2](^.*;guest$)s/;guest$//g/L\n"+ "DEFAULT";
  KerberosName.setRules(rules);
  KerberosName.printRules();
  checkTranslation("Joe@FOO.COM","joe");
  checkTranslation("Joe/root@FOO.COM","joe");
  checkTranslation("Joe/admin@FOO.COM","joe");
  checkTranslation("Joe/guestguest@FOO.COM","joe");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.authorize.TestAccessControlList </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Verify the method isUserAllowed()
 */
@Test public void testIsUserAllowed(){
  AccessControlList acl;
  UserGroupInformation drwho=UserGroupInformation.createUserForTesting("drwho@EXAMPLE.COM",new String[]{"aliens","humanoids","timelord"});
  UserGroupInformation susan=UserGroupInformation.createUserForTesting("susan@EXAMPLE.COM",new String[]{"aliens","humanoids","timelord"});
  UserGroupInformation barbara=UserGroupInformation.createUserForTesting("barbara@EXAMPLE.COM",new String[]{"humans","teachers"});
  UserGroupInformation ian=UserGroupInformation.createUserForTesting("ian@EXAMPLE.COM",new String[]{"humans","teachers"});
  acl=new AccessControlList("drwho humanoids");
  assertUserAllowed(drwho,acl);
  assertUserAllowed(susan,acl);
  assertUserNotAllowed(barbara,acl);
  assertUserNotAllowed(ian,acl);
  acl=new AccessControlList("drwho");
  assertUserAllowed(drwho,acl);
  assertUserNotAllowed(susan,acl);
  assertUserNotAllowed(barbara,acl);
  assertUserNotAllowed(ian,acl);
  acl=new AccessControlList("drwho ");
  assertUserAllowed(drwho,acl);
  assertUserNotAllowed(susan,acl);
  assertUserNotAllowed(barbara,acl);
  assertUserNotAllowed(ian,acl);
  acl=new AccessControlList(" humanoids");
  assertUserAllowed(drwho,acl);
  assertUserAllowed(susan,acl);
  assertUserNotAllowed(barbara,acl);
  assertUserNotAllowed(ian,acl);
  acl=new AccessControlList("drwho,ian aliens,teachers");
  assertUserAllowed(drwho,acl);
  assertUserAllowed(susan,acl);
  assertUserAllowed(barbara,acl);
  assertUserAllowed(ian,acl);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test the netgroups (groups in ACL rules that start with @)
 * This is a  manual test because it requires:
 * - host setup
 * - native code compiled
 * - specify the group mapping class
 * Host setup:
 * /etc/nsswitch.conf should have a line like this:
 * netgroup: files
 * /etc/netgroup should be (the whole file):
 * lasVegas (,elvis,)
 * memphis (,elvis,) (,jerryLeeLewis,)
 * To run this test:
 * export JAVA_HOME='path/to/java'
 * ant \
 * -Dtestcase=TestAccessControlList \
 * -Dtest.output=yes \
 * -DTestAccessControlListGroupMapping=$className \
 * compile-native test
 * where $className is one of the classes that provide group
 * mapping services, i.e. classes that implement
 * GroupMappingServiceProvider interface, at this time:
 * - org.apache.hadoop.security.JniBasedUnixGroupsNetgroupMapping
 * - org.apache.hadoop.security.ShellBasedUnixGroupsNetgroupMapping
 */
@Test public void testNetgroups() throws Exception {
  if (!NativeCodeLoader.isNativeCodeLoaded()) {
    LOG.info("Not testing netgroups, " + "this test only runs when native code is compiled");
    return;
  }
  String groupMappingClassName=System.getProperty("TestAccessControlListGroupMapping");
  if (groupMappingClassName == null) {
    LOG.info("Not testing netgroups, no group mapping class specified, " + "use -DTestAccessControlListGroupMapping=$className to specify " + "group mapping class (must implement GroupMappingServiceProvider "+ "interface and support netgroups)");
    return;
  }
  LOG.info("Testing netgroups using: " + groupMappingClassName);
  Configuration conf=new Configuration();
  conf.set(CommonConfigurationKeysPublic.HADOOP_SECURITY_GROUP_MAPPING,groupMappingClassName);
  Groups groups=Groups.getUserToGroupsMappingService(conf);
  AccessControlList acl;
  acl=new AccessControlList("ja my");
  acl=new AccessControlList("sinatra ratpack,@lasVegas");
  acl=new AccessControlList(" somegroup,@someNetgroup");
  acl=new AccessControlList("carlPerkins ratpack,@lasVegas");
  acl.addGroup("@memphis");
  validateNetgroups(groups,acl);
  groups.refresh();
  validateNetgroups(groups,acl);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.authorize.TestProxyUsers </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxyUsers() throws Exception {
  Configuration conf=new Configuration();
  conf.set(DefaultImpersonationProvider.getTestProvider().getProxySuperuserGroupConfKey(REAL_USER_NAME),StringUtils.join(",",Arrays.asList(GROUP_NAMES)));
  conf.set(DefaultImpersonationProvider.getTestProvider().getProxySuperuserIpConfKey(REAL_USER_NAME),PROXY_IP);
  ProxyUsers.refreshSuperUserGroupsConfiguration(conf);
  UserGroupInformation realUserUgi=UserGroupInformation.createRemoteUser(REAL_USER_NAME);
  UserGroupInformation proxyUserUgi=UserGroupInformation.createProxyUserForTesting(PROXY_USER_NAME,realUserUgi,GROUP_NAMES);
  assertAuthorized(proxyUserUgi,"1.2.3.4");
  assertNotAuthorized(proxyUserUgi,"1.2.3.5");
  realUserUgi=UserGroupInformation.createRemoteUser(REAL_USER_NAME);
  proxyUserUgi=UserGroupInformation.createProxyUserForTesting(PROXY_USER_NAME,realUserUgi,OTHER_GROUP_NAMES);
  assertNotAuthorized(proxyUserUgi,"1.2.3.4");
  assertNotAuthorized(proxyUserUgi,"1.2.3.5");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testProxyUsersWithNullPrefix() throws Exception {
  ProxyUsers.refreshSuperUserGroupsConfiguration(new Configuration(false),null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWildcardUser(){
  Configuration conf=new Configuration();
  conf.set(DefaultImpersonationProvider.getTestProvider().getProxySuperuserUserConfKey(REAL_USER_NAME),"*");
  conf.set(DefaultImpersonationProvider.getTestProvider().getProxySuperuserIpConfKey(REAL_USER_NAME),PROXY_IP);
  ProxyUsers.refreshSuperUserGroupsConfiguration(conf);
  UserGroupInformation realUserUgi=UserGroupInformation.createRemoteUser(REAL_USER_NAME);
  UserGroupInformation proxyUserUgi=UserGroupInformation.createProxyUserForTesting(AUTHORIZED_PROXY_USER_NAME,realUserUgi,GROUP_NAMES);
  assertAuthorized(proxyUserUgi,"1.2.3.4");
  assertNotAuthorized(proxyUserUgi,"1.2.3.5");
  realUserUgi=UserGroupInformation.createRemoteUser(REAL_USER_NAME);
  proxyUserUgi=UserGroupInformation.createProxyUserForTesting(PROXY_USER_NAME,realUserUgi,OTHER_GROUP_NAMES);
  assertAuthorized(proxyUserUgi,"1.2.3.4");
  assertNotAuthorized(proxyUserUgi,"1.2.3.5");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxyUsersWithCustomPrefix() throws Exception {
  Configuration conf=new Configuration(false);
  conf.set("x." + REAL_USER_NAME + ".users",StringUtils.join(",",Arrays.asList(AUTHORIZED_PROXY_USER_NAME)));
  conf.set("x." + REAL_USER_NAME + ".hosts",PROXY_IP);
  ProxyUsers.refreshSuperUserGroupsConfiguration(conf,"x");
  UserGroupInformation realUserUgi=UserGroupInformation.createRemoteUser(REAL_USER_NAME);
  UserGroupInformation proxyUserUgi=UserGroupInformation.createProxyUserForTesting(AUTHORIZED_PROXY_USER_NAME,realUserUgi,GROUP_NAMES);
  assertAuthorized(proxyUserUgi,"1.2.3.4");
  assertNotAuthorized(proxyUserUgi,"1.2.3.5");
  realUserUgi=UserGroupInformation.createRemoteUser(REAL_USER_NAME);
  proxyUserUgi=UserGroupInformation.createProxyUserForTesting(PROXY_USER_NAME,realUserUgi,GROUP_NAMES);
  assertNotAuthorized(proxyUserUgi,"1.2.3.4");
  assertNotAuthorized(proxyUserUgi,"1.2.3.5");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxyUsersWithUserConf() throws Exception {
  Configuration conf=new Configuration();
  conf.set(DefaultImpersonationProvider.getTestProvider().getProxySuperuserUserConfKey(REAL_USER_NAME),StringUtils.join(",",Arrays.asList(AUTHORIZED_PROXY_USER_NAME)));
  conf.set(DefaultImpersonationProvider.getTestProvider().getProxySuperuserIpConfKey(REAL_USER_NAME),PROXY_IP);
  ProxyUsers.refreshSuperUserGroupsConfiguration(conf);
  UserGroupInformation realUserUgi=UserGroupInformation.createRemoteUser(REAL_USER_NAME);
  UserGroupInformation proxyUserUgi=UserGroupInformation.createProxyUserForTesting(AUTHORIZED_PROXY_USER_NAME,realUserUgi,GROUP_NAMES);
  assertAuthorized(proxyUserUgi,"1.2.3.4");
  assertNotAuthorized(proxyUserUgi,"1.2.3.5");
  realUserUgi=UserGroupInformation.createRemoteUser(REAL_USER_NAME);
  proxyUserUgi=UserGroupInformation.createProxyUserForTesting(PROXY_USER_NAME,realUserUgi,GROUP_NAMES);
  assertNotAuthorized(proxyUserUgi,"1.2.3.4");
  assertNotAuthorized(proxyUserUgi,"1.2.3.5");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWildcardIP(){
  Configuration conf=new Configuration();
  conf.set(DefaultImpersonationProvider.getTestProvider().getProxySuperuserGroupConfKey(REAL_USER_NAME),StringUtils.join(",",Arrays.asList(GROUP_NAMES)));
  conf.set(DefaultImpersonationProvider.getTestProvider().getProxySuperuserIpConfKey(REAL_USER_NAME),"*");
  ProxyUsers.refreshSuperUserGroupsConfiguration(conf);
  UserGroupInformation realUserUgi=UserGroupInformation.createRemoteUser(REAL_USER_NAME);
  UserGroupInformation proxyUserUgi=UserGroupInformation.createProxyUserForTesting(PROXY_USER_NAME,realUserUgi,GROUP_NAMES);
  assertAuthorized(proxyUserUgi,"1.2.3.4");
  assertAuthorized(proxyUserUgi,"1.2.3.5");
  realUserUgi=UserGroupInformation.createRemoteUser(REAL_USER_NAME);
  proxyUserUgi=UserGroupInformation.createProxyUserForTesting(PROXY_USER_NAME,realUserUgi,OTHER_GROUP_NAMES);
  assertNotAuthorized(proxyUserUgi,"1.2.3.4");
  assertNotAuthorized(proxyUserUgi,"1.2.3.5");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProxyUsersWithProviderOverride() throws Exception {
  Configuration conf=new Configuration();
  conf.set(CommonConfigurationKeysPublic.HADOOP_SECURITY_IMPERSONATION_PROVIDER_CLASS,"org.apache.hadoop.security.authorize.TestProxyUsers$TestDummyImpersonationProvider");
  ProxyUsers.refreshSuperUserGroupsConfiguration(conf);
  UserGroupInformation realUserUgi=UserGroupInformation.createUserForTesting(REAL_USER_NAME,SUDO_GROUP_NAMES);
  UserGroupInformation proxyUserUgi=UserGroupInformation.createProxyUserForTesting(PROXY_USER_NAME,realUserUgi,GROUP_NAMES);
  assertAuthorized(proxyUserUgi,"1.2.3.4");
  assertAuthorized(proxyUserUgi,"1.2.3.5");
  realUserUgi=UserGroupInformation.createUserForTesting(REAL_USER_NAME,GROUP_NAMES);
  proxyUserUgi=UserGroupInformation.createProxyUserForTesting(PROXY_USER_NAME,realUserUgi,GROUP_NAMES);
  assertNotAuthorized(proxyUserUgi,"1.2.3.4");
  assertNotAuthorized(proxyUserUgi,"1.2.3.5");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testProxyUsersWithEmptyPrefix() throws Exception {
  ProxyUsers.refreshSuperUserGroupsConfiguration(new Configuration(false),"");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testWildcardGroup(){
  Configuration conf=new Configuration();
  conf.set(DefaultImpersonationProvider.getTestProvider().getProxySuperuserGroupConfKey(REAL_USER_NAME),"*");
  conf.set(DefaultImpersonationProvider.getTestProvider().getProxySuperuserIpConfKey(REAL_USER_NAME),PROXY_IP);
  ProxyUsers.refreshSuperUserGroupsConfiguration(conf);
  UserGroupInformation realUserUgi=UserGroupInformation.createRemoteUser(REAL_USER_NAME);
  UserGroupInformation proxyUserUgi=UserGroupInformation.createProxyUserForTesting(PROXY_USER_NAME,realUserUgi,GROUP_NAMES);
  assertAuthorized(proxyUserUgi,"1.2.3.4");
  assertNotAuthorized(proxyUserUgi,"1.2.3.5");
  realUserUgi=UserGroupInformation.createRemoteUser(REAL_USER_NAME);
  proxyUserUgi=UserGroupInformation.createProxyUserForTesting(PROXY_USER_NAME,realUserUgi,OTHER_GROUP_NAMES);
  assertAuthorized(proxyUserUgi,"1.2.3.4");
  assertNotAuthorized(proxyUserUgi,"1.2.3.5");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testIPRange(){
  Configuration conf=new Configuration();
  conf.set(DefaultImpersonationProvider.getTestProvider().getProxySuperuserGroupConfKey(REAL_USER_NAME),"*");
  conf.set(DefaultImpersonationProvider.getTestProvider().getProxySuperuserIpConfKey(REAL_USER_NAME),PROXY_IP_RANGE);
  ProxyUsers.refreshSuperUserGroupsConfiguration(conf);
  UserGroupInformation realUserUgi=UserGroupInformation.createRemoteUser(REAL_USER_NAME);
  UserGroupInformation proxyUserUgi=UserGroupInformation.createProxyUserForTesting(PROXY_USER_NAME,realUserUgi,GROUP_NAMES);
  assertAuthorized(proxyUserUgi,"10.222.0.0");
  assertNotAuthorized(proxyUserUgi,"10.221.0.0");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test the netgroups (groups in ACL rules that start with @)
 * This is a  manual test because it requires:
 * - host setup
 * - native code compiled
 * - specify the group mapping class
 * Host setup:
 * /etc/nsswitch.conf should have a line like this:
 * netgroup: files
 * /etc/netgroup should be (the whole file):
 * foo_group (,proxied_user,)
 * To run this test:
 * export JAVA_HOME='path/to/java'
 * mvn test \
 * -Dtest=TestProxyUsers \
 * -DTestProxyUsersGroupMapping=$className \
 * where $className is one of the classes that provide group
 * mapping services, i.e. classes that implement
 * GroupMappingServiceProvider interface, at this time:
 * - org.apache.hadoop.security.JniBasedUnixGroupsNetgroupMapping
 * - org.apache.hadoop.security.ShellBasedUnixGroupsNetgroupMapping
 */
@Test public void testNetgroups() throws IOException {
  if (!NativeCodeLoader.isNativeCodeLoaded()) {
    LOG.info("Not testing netgroups, " + "this test only runs when native code is compiled");
    return;
  }
  String groupMappingClassName=System.getProperty("TestProxyUsersGroupMapping");
  if (groupMappingClassName == null) {
    LOG.info("Not testing netgroups, no group mapping class specified, " + "use -DTestProxyUsersGroupMapping=$className to specify " + "group mapping class (must implement GroupMappingServiceProvider "+ "interface and support netgroups)");
    return;
  }
  LOG.info("Testing netgroups using: " + groupMappingClassName);
  Configuration conf=new Configuration();
  conf.set(CommonConfigurationKeysPublic.HADOOP_SECURITY_GROUP_MAPPING,groupMappingClassName);
  conf.set(DefaultImpersonationProvider.getTestProvider().getProxySuperuserGroupConfKey(REAL_USER_NAME),StringUtils.join(",",Arrays.asList(NETGROUP_NAMES)));
  conf.set(DefaultImpersonationProvider.getTestProvider().getProxySuperuserIpConfKey(REAL_USER_NAME),PROXY_IP);
  ProxyUsers.refreshSuperUserGroupsConfiguration(conf);
  Groups groups=Groups.getUserToGroupsMappingService(conf);
  UserGroupInformation realUserUgi=UserGroupInformation.createRemoteUser(REAL_USER_NAME);
  UserGroupInformation proxyUserUgi=UserGroupInformation.createProxyUserForTesting(PROXY_USER_NAME,realUserUgi,groups.getGroups(PROXY_USER_NAME).toArray(new String[groups.getGroups(PROXY_USER_NAME).size()]));
  assertAuthorized(proxyUserUgi,PROXY_IP);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.ssl.TestReloadingX509TrustManager </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IOException.class) public void testLoadMissingTrustStore() throws Exception {
  String truststoreLocation=BASEDIR + "/testmissing.jks";
  ReloadingX509TrustManager tm=new ReloadingX509TrustManager("jks",truststoreLocation,"password",10);
  try {
    tm.init();
  }
  finally {
    tm.destroy();
  }
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IOException.class) public void testLoadCorruptTrustStore() throws Exception {
  String truststoreLocation=BASEDIR + "/testcorrupt.jks";
  OutputStream os=new FileOutputStream(truststoreLocation);
  os.write(1);
  os.close();
  ReloadingX509TrustManager tm=new ReloadingX509TrustManager("jks",truststoreLocation,"password",10);
  try {
    tm.init();
  }
  finally {
    tm.destroy();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.ssl.TestSSLFactory </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void serverModeWithoutClientCertsSocket() throws Exception {
  serverMode(false,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNoClientCertsInitialization() throws Exception {
  Configuration conf=createConfiguration(false,true);
  conf.unset(SSLFactory.SSL_REQUIRE_CLIENT_CERT_KEY);
  SSLFactory sslFactory=new SSLFactory(SSLFactory.Mode.CLIENT,conf);
  try {
    sslFactory.init();
  }
  finally {
    sslFactory.destroy();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClientDifferentPasswordAndKeyPassword() throws Exception {
  checkSSLFactoryInitWithPasswords(SSLFactory.Mode.CLIENT,"password","keyPassword","password","keyPassword");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNoTrustStore() throws Exception {
  Configuration conf=createConfiguration(false,false);
  conf.unset(SSLFactory.SSL_REQUIRE_CLIENT_CERT_KEY);
  SSLFactory sslFactory=new SSLFactory(SSLFactory.Mode.SERVER,conf);
  try {
    sslFactory.init();
  }
  finally {
    sslFactory.destroy();
  }
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void serverModeWithClientCertsVerifier() throws Exception {
  serverMode(true,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testServerKeyPasswordDefaultsToPassword() throws Exception {
  checkSSLFactoryInitWithPasswords(SSLFactory.Mode.SERVER,"password","password","password",null);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void serverModeWithoutClientCertsVerifier() throws Exception {
  serverMode(false,false);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void serverModeWithClientCertsSocket() throws Exception {
  serverMode(true,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testServerDifferentPasswordAndKeyPassword() throws Exception {
  checkSSLFactoryInitWithPasswords(SSLFactory.Mode.SERVER,"password","keyPassword","password","keyPassword");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=GeneralSecurityException.class) public void invalidHostnameVerifier() throws Exception {
  Configuration conf=createConfiguration(false,true);
  conf.set(SSLFactory.SSL_HOSTNAME_VERIFIER_KEY,"foo");
  SSLFactory sslFactory=new SSLFactory(SSLFactory.Mode.CLIENT,conf);
  try {
    sslFactory.init();
  }
  finally {
    sslFactory.destroy();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClientKeyPasswordDefaultsToPassword() throws Exception {
  checkSSLFactoryInitWithPasswords(SSLFactory.Mode.CLIENT,"password","password","password",null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testServerCredProviderPasswords() throws Exception {
  KeyStoreTestUtil.provisionPasswordsToCredentialProvider();
  checkSSLFactoryInitWithPasswords(SSLFactory.Mode.SERVER,"storepass","keypass",null,null,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.token.delegation.web.TestDelegationTokenAuthenticationHandlerWithMocks </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testManagementOperations() throws Exception {
  testNonManagementOperation();
  testManagementOperationErrors();
  testGetToken(null,new Text("foo"));
  testGetToken("bar",new Text("foo"));
  testCancelToken();
  testRenewToken();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAuthenticate() throws Exception {
  testValidDelegationToken();
  testInvalidDelegationToken();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.security.token.delegation.web.TestWebDelegationToken </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDelegationTokenAuthenticationURLWithNoDTFilter() throws Exception {
  testDelegationTokenAuthenticatedURLWithNoDT(NoDTFilter.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDelegationTokenAuthenticationURLWithNoDTHandler() throws Exception {
  testDelegationTokenAuthenticatedURLWithNoDT(NoDTHandlerDTAFilter.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.service.TestCompositeService </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Shut down from not-inited: expect nothing to have happened
 */
@Test public void testServiceStopFromNotInited(){
  ServiceManager serviceManager=new ServiceManager("ServiceManager");
  for (int i=0; i < NUM_OF_SERVICES; i++) {
    CompositeServiceImpl service=new CompositeServiceImpl(i);
    serviceManager.addTestService(service);
  }
  CompositeServiceImpl[] services=serviceManager.getServices().toArray(new CompositeServiceImpl[0]);
  serviceManager.stop();
  assertInState(STATE.NOTINITED,services);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Use a null configuration & expect a failure
 * @throws Throwable
 */
@Test public void testInitNullConf() throws Throwable {
  ServiceManager serviceManager=new ServiceManager("testInitNullConf");
  CompositeServiceImpl service=new CompositeServiceImpl(0);
  serviceManager.addTestService(service);
  try {
    serviceManager.init(null);
    LOG.warn("Null Configurations are permitted " + serviceManager);
  }
 catch (  ServiceStateException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Walk the service through their lifecycle without any children;
 * verify that it all works.
 */
@Test public void testServiceLifecycleNoChildren(){
  ServiceManager serviceManager=new ServiceManager("ServiceManager");
  serviceManager.init(new Configuration());
  serviceManager.start();
  serviceManager.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Shut down from inited
 */
@Test public void testServiceStopFromInited(){
  ServiceManager serviceManager=new ServiceManager("ServiceManager");
  for (int i=0; i < NUM_OF_SERVICES; i++) {
    CompositeServiceImpl service=new CompositeServiceImpl(i);
    serviceManager.addTestService(service);
  }
  CompositeServiceImpl[] services=serviceManager.getServices().toArray(new CompositeServiceImpl[0]);
  serviceManager.init(new Configuration());
  serviceManager.stop();
  if (STOP_ONLY_STARTED_SERVICES) {
    assertInState(STATE.INITED,services);
  }
 else {
    assertInState(STATE.STOPPED,services);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAddServiceInInit() throws Throwable {
  BreakableService child=new BreakableService();
  assertInState(STATE.NOTINITED,child);
  CompositeServiceAddingAChild composite=new CompositeServiceAddingAChild(child);
  composite.init(new Configuration());
  assertInState(STATE.INITED,child);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testServiceStop(){
  ServiceManager serviceManager=new ServiceManager("ServiceManager");
  for (int i=0; i < NUM_OF_SERVICES; i++) {
    CompositeServiceImpl service=new CompositeServiceImpl(i);
    if (i == FAILED_SERVICE_SEQ_NUMBER) {
      service.setThrowExceptionOnStop(true);
    }
    serviceManager.addTestService(service);
  }
  CompositeServiceImpl[] services=serviceManager.getServices().toArray(new CompositeServiceImpl[0]);
  Configuration conf=new Configuration();
  serviceManager.init(conf);
  serviceManager.start();
  try {
    serviceManager.stop();
  }
 catch (  ServiceTestRuntimeException e) {
  }
  assertInState(STATE.STOPPED,services);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.service.TestGlobalStateChangeListener </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This test triggers a failure in the listener - the expectation is that the
 * service has already reached it's desired state, purely because the
 * notifications take place afterwards.
 */
@Test public void testListenerFailure(){
  listener.setFailingState(Service.STATE.INITED);
  register();
  BreakableStateChangeListener l2=new BreakableStateChangeListener();
  register(l2);
  BreakableService service=new BreakableService();
  service.init(new Configuration());
  assertListenerState(listener,Service.STATE.INITED);
  assertListenerEventCount(listener,1);
  assertListenerEventCount(l2,0);
  assertServiceStateInited(service);
  service.start();
  service.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Create a chain of listeners and set one in the middle to fail; verify that
 * those in front got called, and those after did not.
 */
@Test public void testListenerChain(){
  LoggingStateChangeListener logListener=new LoggingStateChangeListener();
  register(logListener);
  BreakableStateChangeListener l0=new BreakableStateChangeListener("l0");
  register(l0);
  listener.setFailingState(Service.STATE.STARTED);
  register();
  BreakableStateChangeListener l3=new BreakableStateChangeListener("l3");
  register(l3);
  BreakableService service=new BreakableService();
  service.init(new Configuration());
  assertServiceStateInited(service);
  assertListenerState(l0,Service.STATE.INITED);
  assertListenerState(listener,Service.STATE.INITED);
  assertListenerState(l3,Service.STATE.INITED);
  service.start();
  assertServiceStateStarted(service);
  assertListenerState(l0,Service.STATE.STARTED);
  assertListenerEventCount(l0,2);
  assertListenerState(listener,Service.STATE.STARTED);
  assertListenerEventCount(listener,2);
  assertListenerState(l3,Service.STATE.INITED);
  assertListenerEventCount(l3,1);
  service.stop();
  assertListenerEventCount(l0,3);
  assertListenerEventCount(listener,3);
  assertListenerEventCount(l3,2);
  unregister(logListener);
  unregister(l0);
  unregister(l3);
  service=new BreakableService();
  service.init(new Configuration());
  assertListenerEventCount(l0,3);
  assertListenerEventCount(l3,2);
  assertListenerEventCount(listener,4);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.service.TestServiceLifecycle </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Walk the {@link BreakableService} through it's lifecycle, 
 * more to verify that service's counters work than anything else
 * @throws Throwable if necessary
 */
@Test public void testWalkthrough() throws Throwable {
  BreakableService svc=new BreakableService();
  assertServiceStateCreated(svc);
  assertStateCount(svc,Service.STATE.NOTINITED,1);
  assertStateCount(svc,Service.STATE.INITED,0);
  assertStateCount(svc,Service.STATE.STARTED,0);
  assertStateCount(svc,Service.STATE.STOPPED,0);
  svc.init(new Configuration());
  assertServiceStateInited(svc);
  assertStateCount(svc,Service.STATE.INITED,1);
  svc.start();
  assertServiceStateStarted(svc);
  assertStateCount(svc,Service.STATE.STARTED,1);
  svc.stop();
  assertServiceStateStopped(svc);
  assertStateCount(svc,Service.STATE.STOPPED,1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * verify that when a service that is not started is stopped, the
 * service enters the stopped state
 * @throws Throwable on a failure
 */
@Test public void testStopUnstarted() throws Throwable {
  BreakableService svc=new BreakableService();
  svc.stop();
  assertServiceStateStopped(svc);
  assertStateCount(svc,Service.STATE.INITED,0);
  assertStateCount(svc,Service.STATE.STOPPED,1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Call start twice
 * @throws Throwable if necessary
 */
@Test public void testStartTwice() throws Throwable {
  BreakableService svc=new BreakableService();
  svc.init(new Configuration());
  svc.start();
  svc.start();
  assertStateCount(svc,Service.STATE.STARTED,1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Verify that when a service is stopped more than once, no exception
 * is thrown.
 * @throws Throwable if necessary
 */
@Test public void testStopTwice() throws Throwable {
  BreakableService svc=new BreakableService();
  svc.init(new Configuration());
  svc.start();
  svc.stop();
  assertStateCount(svc,Service.STATE.STOPPED,1);
  svc.stop();
  assertStateCount(svc,Service.STATE.STOPPED,1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testServiceNotifications() throws Throwable {
  BreakableService svc=new BreakableService(false,false,false);
  BreakableStateChangeListener listener=new BreakableStateChangeListener();
  svc.registerServiceListener(listener);
  svc.init(new Configuration());
  assertEventCount(listener,1);
  svc.start();
  assertEventCount(listener,2);
  svc.stop();
  assertEventCount(listener,3);
  svc.stop();
  assertEventCount(listener,3);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * call init twice
 * @throws Throwable if necessary
 */
@Test public void testInitTwice() throws Throwable {
  BreakableService svc=new BreakableService();
  Configuration conf=new Configuration();
  conf.set("test.init","t");
  svc.init(conf);
  svc.init(new Configuration());
  assertStateCount(svc,Service.STATE.INITED,1);
  assertServiceConfigurationContains(svc,"test.init");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInitNullConf() throws Throwable {
  BreakableService svc=new BreakableService(false,false,false);
  try {
    svc.init(null);
    LOG.warn("Null Configurations are permitted ");
  }
 catch (  ServiceStateException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStopInInitService() throws Throwable {
  Service service=new StopInInitService();
  BreakableStateChangeListener listener=new BreakableStateChangeListener();
  service.registerServiceListener(listener);
  service.init(new Configuration());
  assertServiceInState(service,Service.STATE.STOPPED);
  assertEventCount(listener,1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSelfTerminatingService() throws Throwable {
  SelfTerminatingService service=new SelfTerminatingService();
  BreakableStateChangeListener listener=new BreakableStateChangeListener();
  service.registerServiceListener(listener);
  service.init(new Configuration());
  assertEventCount(listener,1);
  service.start();
  assertEventCount(listener,2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This test uses a service listener that unregisters itself during the callbacks.
 * This a test that verifies the concurrency logic on the listener management
 * code, that it doesn't throw any immutable state change exceptions
 * if you change list membership during the notifications.
 * The standard <code>AbstractService</code> implementation copies the list
 * to an array in a <code>synchronized</code> block then iterates through
 * the copy precisely to prevent this problem.
 * @throws Throwable on a failure
 */
@Test public void testServiceNotificationsUnregisterDuringCallback() throws Throwable {
  BreakableService svc=new BreakableService(false,false,false);
  BreakableStateChangeListener listener=new SelfUnregisteringBreakableStateChangeListener();
  BreakableStateChangeListener l2=new BreakableStateChangeListener();
  svc.registerServiceListener(listener);
  svc.registerServiceListener(l2);
  svc.init(new Configuration());
  assertEventCount(listener,1);
  assertEventCount(l2,1);
  svc.unregisterServiceListener(listener);
  svc.start();
  assertEventCount(listener,1);
  assertEventCount(l2,2);
  svc.stop();
  assertEventCount(listener,1);
  svc.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that when a service listener is unregistered, it stops being invoked
 * @throws Throwable on a failure
 */
@Test public void testServiceNotificationsStopOnceUnregistered() throws Throwable {
  BreakableService svc=new BreakableService(false,false,false);
  BreakableStateChangeListener listener=new BreakableStateChangeListener();
  svc.registerServiceListener(listener);
  svc.init(new Configuration());
  assertEventCount(listener,1);
  svc.unregisterServiceListener(listener);
  svc.start();
  assertEventCount(listener,1);
  svc.stop();
  assertEventCount(listener,1);
  svc.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStartInInitService() throws Throwable {
  Service service=new StartInInitService();
  BreakableStateChangeListener listener=new BreakableStateChangeListener();
  service.registerServiceListener(listener);
  service.init(new Configuration());
  assertServiceInState(service,Service.STATE.STARTED);
  assertEventCount(listener,1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.streaming.TestStreamJob </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testCreateJobWithExtraArgs() throws IOException {
  ArrayList<String> dummyArgs=new ArrayList<String>();
  dummyArgs.add("-input");
  dummyArgs.add("dummy");
  dummyArgs.add("-output");
  dummyArgs.add("dummy");
  dummyArgs.add("-mapper");
  dummyArgs.add("dummy");
  dummyArgs.add("dummy");
  dummyArgs.add("-reducer");
  dummyArgs.add("dummy");
  StreamJob.createJob(dummyArgs.toArray(new String[]{}));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.streaming.TestStreamXmlMultipleRecords </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests if StreamXmlRecordReader will read the next record, _after_ the
 * end of a split if the split falls before the end of end-tag of a record.
 * Tests with slowmatch=true.
 * @throws Exception
 */
@Test public void testStreamXmlMultiInnerSlow() throws Exception {
  if (hasPerl) {
    blockSize=60;
    isSlowMatch="true";
    super.testCommandLine();
  }
 else {
    LOG.warn("No perl; skipping test.");
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests if StreamXmlRecordReader will read a record twice if end of a
 * split is after few characters after the end-tag of a record but before the
 * begin-tag of next record.
 * Tests with slowmatch=true.
 * @throws Exception
 */
@Test public void testStreamXmlMultiOuterSlow() throws Exception {
  if (hasPerl) {
    blockSize=80;
    isSlowMatch="true";
    super.testCommandLine();
  }
 else {
    LOG.warn("No perl; skipping test.");
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests if StreamXmlRecordReader will read a record twice if end of a
 * split is after few characters after the end-tag of a record but before the
 * begin-tag of next record.
 * Tests with slowmatch=false.
 * @throws Exception
 */
@Test public void testStreamXmlMultiOuterFast() throws Exception {
  if (hasPerl) {
    blockSize=80;
    isSlowMatch="false";
    super.testCommandLine();
  }
 else {
    LOG.warn("No perl; skipping test.");
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests if StreamXmlRecordReader will read the next record, _after_ the
 * end of a split if the split falls before the end of end-tag of a record.
 * Tests with slowmatch=false.
 * @throws Exception
 */
@Test public void testStreamXmlMultiInnerFast() throws Exception {
  if (hasPerl) {
    blockSize=60;
    isSlowMatch="false";
    super.testCommandLine();
  }
 else {
    LOG.warn("No perl; skipping test.");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.streaming.TestStreamingBackground </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBackgroundSubmitOk() throws Exception {
  runStreamJob();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.streaming.TestStreamingCounters </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCommandLine() throws Exception {
  super.testCommandLine();
  validateCounters();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.streaming.TestStreamingExitStatus </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReduceFailNotOk() throws Exception {
  runStreamJob(true,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMapFailOk() throws Exception {
  runStreamJob(false,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReduceFailOk() throws Exception {
  runStreamJob(false,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMapFailNotOk() throws Exception {
  runStreamJob(true,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.streaming.TestStreamingKeyValue </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Run the job the default way (the input format key is not emitted).
 */
@Test public void testCommandLineWithoutKey() throws Exception {
  runStreamJob(outputWithoutKey,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Run the job with the indicating the input format key should be emitted. 
 */
@Test public void testCommandLineWithKey() throws Exception {
  runStreamJob(outputWithKey,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.streaming.TestStreamingOutputKeyValueTypes </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testJavaMapperAndCommandReducerAndZeroReduces() throws Exception {
  map="org.apache.hadoop.mapred.lib.IdentityMapper";
  reduce=CAT;
  args.add("-numReduceTasks");
  args.add("0");
  super.testCommandLine();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCommandMapperAndJavaReducerAndZeroReduces() throws Exception {
  map=CAT;
  reduce=MyReducer.class.getName();
  args.add("-numReduceTasks");
  args.add("0");
  super.testCommandLine();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDefaultToIdentityReducer() throws Exception {
  args.add("-mapper");
  args.add(map);
  args.add("-jobconf");
  args.add("mapreduce.task.files.preserve.failedtasks=true");
  args.add("-jobconf");
  args.add("stream.tmpdir=" + System.getProperty("test.build.data","/tmp"));
  args.add("-inputformat");
  args.add(TextInputFormat.class.getName());
  super.testCommandLine();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testJavaMapperAndJavaReducerAndZeroReduces() throws Exception {
  map="org.apache.hadoop.mapred.lib.IdentityMapper";
  reduce="org.apache.hadoop.mapred.lib.IdentityReducer";
  args.add("-numReduceTasks");
  args.add("0");
  super.testCommandLine();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCommandMapperAndCommandReducerAndZeroReduces() throws Exception {
  map=CAT;
  reduce=CAT;
  args.add("-numReduceTasks");
  args.add("0");
  super.testCommandLine();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.streaming.TestStreamingOutputOnlyKeys </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOutputOnlyKeys() throws Exception {
  args.add("-jobconf");
  args.add("stream.reduce.input" + "=keyonlytext");
  args.add("-jobconf");
  args.add("stream.reduce.output" + "=keyonlytext");
  super.testCommandLine();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.streaming.TestStreamingStatus </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Check if mapper/reducer with empty/nonempty input works properly if
 * reporting is done using lines like "reporter:status:" and
 * "reporter:counter:" before map()/reduce() method is called.
 * Validate the task's log of STDERR if messages are written
 * to stderr before map()/reduce() is called.
 * Also validate job output.
 * @throws IOException
 */
@Test public void testReporting() throws Exception {
  testStreamJob(false);
  testStreamJob(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.streaming.TestStreamingStderr </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStderrNoInput() throws Exception {
  runStreamJob("target/stderr-pre",false,10000,0,0);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStderrAfterOutput() throws Exception {
  runStreamJob("target/stderr-post",false,0,0,10000);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStderrCountsAsProgress() throws Exception {
  runStreamJob("target/stderr-progress",true,10,1000,0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.test.TestHFSTestCase </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testJettyNoAnnotation() throws Exception {
  TestJettyHelper.getJettyServer();
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testDirNoAnnotation() throws Exception {
  TestDirHelper.getTestDir();
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testHdfsNoAnnotation() throws Exception {
  TestHdfsHelper.getHdfsConf();
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testJettyNoAnnotation2() throws Exception {
  TestJettyHelper.getJettyURL();
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testHdfsNoAnnotation2() throws Exception {
  TestHdfsHelper.getHdfsTestDir();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.test.TestHTestCase </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testDirNoAnnotation() throws Exception {
  TestDirHelper.getTestDir();
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testJettyNoAnnotation2() throws Exception {
  TestJettyHelper.getJettyURL();
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalStateException.class) public void testJettyNoAnnotation() throws Exception {
  TestJettyHelper.getJettyServer();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.tools.TestDistCpViewFs </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultiFileTargetMissing(){
  caseMultiFileTargetMissing(false);
  caseMultiFileTargetMissing(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultiFileTargetPresent(){
  caseMultiFileTargetPresent(false);
  caseMultiFileTargetPresent(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleDirTargetMissing(){
  caseSingleDirTargetMissing(false);
  caseSingleDirTargetMissing(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleFileTargetFile(){
  caseSingleFileTargetFile(false);
  caseSingleFileTargetFile(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleFileMissingTarget(){
  caseSingleFileMissingTarget(false);
  caseSingleFileMissingTarget(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleFileTargetDir(){
  caseSingleFileTargetDir(false);
  caseSingleFileTargetDir(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.tools.TestDistCpWithAcls </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclsNotImplemented() throws Exception {
  assertRunDistCp(DistCpConstants.ACLS_NOT_SUPPORTED,"stubfs://dstAclsNotImplemented");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAclsNotEnabled() throws Exception {
  try {
    restart(false);
    assertRunDistCp(DistCpConstants.ACLS_NOT_SUPPORTED,"/dstAclsNotEnabled");
  }
  finally {
    restart(true);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreserveAcls() throws Exception {
  assertRunDistCp(DistCpConstants.SUCCESS,"/dstPreserveAcls");
  assertAclEntries("/dstPreserveAcls/dir1",new AclEntry[]{aclEntry(DEFAULT,USER,ALL),aclEntry(DEFAULT,USER,"bruce",ALL),aclEntry(DEFAULT,GROUP,READ_EXECUTE),aclEntry(DEFAULT,MASK,ALL),aclEntry(DEFAULT,OTHER,READ_EXECUTE)});
  assertPermission("/dstPreserveAcls/dir1",(short)0755);
  assertAclEntries("/dstPreserveAcls/dir1/subdir1",new AclEntry[]{});
  assertPermission("/dstPreserveAcls/dir1/subdir1",(short)0755);
  assertAclEntries("/dstPreserveAcls/dir2",new AclEntry[]{});
  assertPermission("/dstPreserveAcls/dir2",(short)0755);
  assertAclEntries("/dstPreserveAcls/dir2/file2",new AclEntry[]{aclEntry(ACCESS,GROUP,READ),aclEntry(ACCESS,GROUP,"sales",NONE)});
  assertPermission("/dstPreserveAcls/dir2/file2",(short)0644);
  assertAclEntries("/dstPreserveAcls/dir2/file3",new AclEntry[]{});
  assertPermission("/dstPreserveAcls/dir2/file3",(short)0660);
  assertAclEntries("/dstPreserveAcls/dir3sticky",new AclEntry[]{});
  assertPermission("/dstPreserveAcls/dir3sticky",(short)01777);
  assertAclEntries("/dstPreserveAcls/file1",new AclEntry[]{aclEntry(ACCESS,USER,"diana",READ),aclEntry(ACCESS,GROUP,READ)});
  assertPermission("/dstPreserveAcls/file1",(short)0644);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.tools.TestDistCpWithRawXAttrs </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreserveRawXAttrs1() throws Exception {
  final String relSrc="/./.reserved/../.reserved/raw/../raw/src/../src";
  final String relDst="/./.reserved/../.reserved/raw/../raw/dest/../dest";
  doTestPreserveRawXAttrs(relSrc,relDst,"-px",true,true,DistCpConstants.SUCCESS);
  doTestPreserveRawXAttrs(rootedSrcName,rootedDestName,"-px",false,true,DistCpConstants.SUCCESS);
  doTestPreserveRawXAttrs(rootedSrcName,rawDestName,"-px",false,true,DistCpConstants.INVALID_ARGUMENT);
  doTestPreserveRawXAttrs(rawSrcName,rootedDestName,"-px",false,true,DistCpConstants.INVALID_ARGUMENT);
  doTestPreserveRawXAttrs(rawSrcName,rawDestName,"-px",true,true,DistCpConstants.SUCCESS);
  final Path savedWd=fs.getWorkingDirectory();
  try {
    fs.setWorkingDirectory(new Path("/.reserved/raw"));
    doTestPreserveRawXAttrs("../.." + rawSrcName,"../.." + rawDestName,"-px",true,true,DistCpConstants.SUCCESS);
  }
  finally {
    fs.setWorkingDirectory(savedWd);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreserveRawXAttrs2() throws Exception {
  doTestPreserveRawXAttrs(rootedSrcName,rootedDestName,"-p",false,false,DistCpConstants.SUCCESS);
  doTestPreserveRawXAttrs(rootedSrcName,rawDestName,"-p",false,false,DistCpConstants.INVALID_ARGUMENT);
  doTestPreserveRawXAttrs(rawSrcName,rootedDestName,"-p",false,false,DistCpConstants.INVALID_ARGUMENT);
  doTestPreserveRawXAttrs(rawSrcName,rawDestName,"-p",true,false,DistCpConstants.SUCCESS);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreserveRawXAttrs3() throws Exception {
  doTestPreserveRawXAttrs(rootedSrcName,rootedDestName,null,false,false,DistCpConstants.SUCCESS);
  doTestPreserveRawXAttrs(rootedSrcName,rawDestName,null,false,false,DistCpConstants.INVALID_ARGUMENT);
  doTestPreserveRawXAttrs(rawSrcName,rootedDestName,null,false,false,DistCpConstants.INVALID_ARGUMENT);
  doTestPreserveRawXAttrs(rawSrcName,rawDestName,null,true,false,DistCpConstants.SUCCESS);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.tools.TestDistCpWithXAttrs </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testXAttrsNotEnabled() throws Exception {
  try {
    restart(false);
    DistCpTestUtils.assertRunDistCp(DistCpConstants.XATTRS_NOT_SUPPORTED,rootedSrcName,"/dstXAttrsNotEnabled","-px",conf);
  }
  finally {
    restart(true);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreserveXAttrs() throws Exception {
  DistCpTestUtils.assertRunDistCp(DistCpConstants.SUCCESS,rootedSrcName,"/dstPreserveXAttrs","-px",conf);
  Map<String,byte[]> xAttrs=Maps.newHashMap();
  xAttrs.put(name1,value1);
  xAttrs.put(name2,value2);
  DistCpTestUtils.assertXAttrs(dstDir1,fs,xAttrs);
  xAttrs.clear();
  xAttrs.put(name1,value1);
  xAttrs.put(name3,new byte[0]);
  DistCpTestUtils.assertXAttrs(dstSubDir1,fs,xAttrs);
  xAttrs.clear();
  xAttrs.put(name1,value1);
  xAttrs.put(name2,value2);
  xAttrs.put(name3,new byte[0]);
  DistCpTestUtils.assertXAttrs(dstFile1,fs,xAttrs);
  xAttrs.clear();
  xAttrs.put(name2,value2);
  DistCpTestUtils.assertXAttrs(dstDir2,fs,xAttrs);
  xAttrs.clear();
  xAttrs.put(name1,value1);
  xAttrs.put(name4,new byte[0]);
  DistCpTestUtils.assertXAttrs(dstFile2,fs,xAttrs);
  xAttrs.clear();
  xAttrs.put(name3,new byte[0]);
  xAttrs.put(name4,new byte[0]);
  DistCpTestUtils.assertXAttrs(dstFile3,fs,xAttrs);
  xAttrs.clear();
  DistCpTestUtils.assertXAttrs(dstFile4,fs,xAttrs);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testXAttrsNotImplemented() throws Exception {
  DistCpTestUtils.assertRunDistCp(DistCpConstants.XATTRS_NOT_SUPPORTED,rootedSrcName,"stubfs://dstXAttrsNotImplemented","-px",conf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.tools.TestFileBasedCopyListing </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleDirTargetMissing(){
  caseSingleDirTargetMissing(false);
  caseSingleDirTargetMissing(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGlobTargetMissingMultiLevel(){
  caseGlobTargetMissingMultiLevel(false);
  caseGlobTargetMissingMultiLevel(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultiFileTargetMissing(){
  caseMultiFileTargetMissing(false);
  caseMultiFileTargetMissing(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGlobTargetMissingSingleLevel(){
  caseGlobTargetMissingSingleLevel(false);
  caseGlobTargetMissingSingleLevel(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultiFileTargetPresent(){
  caseMultiFileTargetPresent(false);
  caseMultiFileTargetPresent(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultiDirTargetMissing(){
  caseMultiDirTargetMissing(false);
  caseMultiDirTargetMissing(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleFileMissingTarget(){
  caseSingleFileMissingTarget(false);
  caseSingleFileMissingTarget(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleFileTargetDir(){
  caseSingleFileTargetDir(false);
  caseSingleFileTargetDir(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleFileTargetFile(){
  caseSingleFileTargetFile(false);
  caseSingleFileTargetFile(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.tools.TestGlobbedCopyListing </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRun() throws Exception {
  final URI uri=cluster.getFileSystem().getUri();
  final String pathString=uri.toString();
  Path fileSystemPath=new Path(pathString);
  Path source=new Path(fileSystemPath.toString() + "/tmp/source");
  Path target=new Path(fileSystemPath.toString() + "/tmp/target");
  Path listingPath=new Path(fileSystemPath.toString() + "/tmp/META/fileList.seq");
  DistCpOptions options=new DistCpOptions(Arrays.asList(source),target);
  options.setTargetPathExists(false);
  new GlobbedCopyListing(new Configuration(),CREDENTIALS).buildListing(listingPath,options);
  verifyContents(listingPath);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.tools.TestIntegration </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=100000) public void testSingleDirTargetMissing(){
  caseSingleDirTargetMissing(false);
  caseSingleDirTargetMissing(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=100000) public void testMultiFileTargetPresent(){
  caseMultiFileTargetPresent(false);
  caseMultiFileTargetPresent(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=100000) public void testSingleFileMissingTarget(){
  caseSingleFileMissingTarget(false);
  caseSingleFileMissingTarget(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=100000) public void testSingleFileTargetDir(){
  caseSingleFileTargetDir(false);
  caseSingleFileTargetDir(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=100000) public void testSingleFileTargetFile(){
  caseSingleFileTargetFile(false);
  caseSingleFileTargetFile(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=100000) public void testMultiFileTargetMissing(){
  caseMultiFileTargetMissing(false);
  caseMultiFileTargetMissing(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.tools.TestLogalyzer </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLogalyzer() throws Exception {
  Path f=createLogFile();
  String[] args=new String[10];
  args[0]="-archiveDir";
  args[1]=f.toString();
  args[2]="-grep";
  args[3]="44";
  args[4]="-sort";
  args[5]="0";
  args[6]="-analysis";
  args[7]=outdir.getAbsolutePath();
  args[8]="-separator";
  args[9]=" ";
  Logalyzer.main(args);
  checkResult();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.tools.TestOptionsParser </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testParseNonPositiveBandwidth(){
  OptionsParser.parse(new String[]{"-bandwidth","-11","hdfs://localhost:8020/source/first","hdfs://localhost:8020/target/"});
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testParseZeroBandwidth(){
  OptionsParser.parse(new String[]{"-bandwidth","0","hdfs://localhost:8020/source/first","hdfs://localhost:8020/target/"});
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.tools.TestTools </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testJMXToolAdditionParameter(){
  String pattern="key = -addition";
  checkOutput(new String[]{"-service=NameNode","-server=localhost","-addition"},pattern,System.err,JMXGet.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testJMXToolHelp(){
  String pattern="usage: jmxget options are:";
  checkOutput(new String[]{"-help"},pattern,System.out,JMXGet.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDelegationTokenFetcherErrorOption(){
  String pattern="ERROR: Only specify cancel, renew or print.";
  checkOutput(new String[]{"-cancel","-renew"},pattern,System.err,DelegationTokenFetcher.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDelegationTokenFetcherPrintUsage(){
  String pattern="Options:";
  checkOutput(new String[]{"-help"},pattern,System.out,DelegationTokenFetcher.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.tools.mapred.TestCopyMapper </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCopyWithDifferentChecksumType() throws Exception {
  testCopy(true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=40000) public void testPreserveUserGroup(){
  testPreserveUserGroupImpl(true);
  testPreserveUserGroupImpl(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=40000) public void testPreserveBlockSizeAndReplication(){
  testPreserveBlockSizeAndReplicationImpl(true);
  testPreserveBlockSizeAndReplicationImpl(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=40000) public void testRun() throws Exception {
  testCopy(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=40000) public void testIgnoreFailures(){
  doTestIgnoreFailures(true);
  doTestIgnoreFailures(false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.tools.mapred.TestUniformSizeInputFormat </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetSplits() throws Exception {
  testGetSplits(9);
  for (int i=1; i < N_FILES; ++i)   testGetSplits(i);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.tools.util.TestThrottledInputStream </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRead(){
  File tmpFile;
  File outFile;
  try {
    tmpFile=createFile(1024);
    outFile=createFile();
    tmpFile.deleteOnExit();
    outFile.deleteOnExit();
    long maxBandwidth=copyAndAssert(tmpFile,outFile,0,1,-1,CB.BUFFER);
    copyAndAssert(tmpFile,outFile,maxBandwidth,20,0,CB.BUFFER);
    copyAndAssert(tmpFile,outFile,maxBandwidth,20,0,CB.BUFF_OFFSET);
    copyAndAssert(tmpFile,outFile,maxBandwidth,20,0,CB.ONE_C);
  }
 catch (  IOException e) {
    LOG.error("Exception encountered ",e);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.util.TestClasspath </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testJarReplace() throws IOException {
  testJar();
  testJar();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.util.TestDataChecksum </h4><pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBulkOps() throws Exception {
  for (  DataChecksum.Type type : CHECKSUM_TYPES) {
    System.err.println("---- beginning tests with checksum type " + type + "----");
    DataChecksum checksum=DataChecksum.newDataChecksum(type,BYTES_PER_CHUNK);
    for (    boolean useDirect : new boolean[]{false,true}) {
      doBulkTest(checksum,1023,useDirect);
      doBulkTest(checksum,1024,useDirect);
      doBulkTest(checksum,1025,useDirect);
    }
  }
}

</code></pre>

<br>
<pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Simple performance test for the "common case" checksum usage in HDFS:
 * computing and verifying CRC32C with 512 byte chunking on native
 * buffers.
 */
@Test public void commonUsagePerfTest() throws Exception {
  final int NUM_RUNS=5;
  final DataChecksum checksum=DataChecksum.newDataChecksum(DataChecksum.Type.CRC32C,512);
  final int dataLength=512 * 1024 * 1024;
  Harness h=new Harness(checksum,dataLength,true);
  for (int i=0; i < NUM_RUNS; i++) {
    Stopwatch s=new Stopwatch().start();
    checksum.calculateChunkedSums(h.dataBuf,h.checksumBuf);
    s.stop();
    System.err.println("Calculate run #" + i + ": "+ s.elapsedTime(TimeUnit.MICROSECONDS)+ "us");
    s=new Stopwatch().start();
    checksum.verifyChunkedSums(h.dataBuf,h.checksumBuf,"fake file",0);
    s.stop();
    System.err.println("Verify run #" + i + ": "+ s.elapsedTime(TimeUnit.MICROSECONDS)+ "us");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.util.TestDiskChecker </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testCheckDir_notDir() throws Throwable {
  _checkDirs(false,new FsPermission("000"),false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testMkdirs_noDir() throws Throwable {
  _mkdirs(false,defaultPerm,defaultPerm);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testCheckDir_notListable() throws Throwable {
  _checkDirs(true,new FsPermission("666"),false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testCheckDir_notReadable() throws Throwable {
  _checkDirs(true,new FsPermission("000"),false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testMkdirs_dirExists() throws Throwable {
  _mkdirs(true,defaultPerm,defaultPerm);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testCheckDir_notWritable() throws Throwable {
  _checkDirs(true,new FsPermission("444"),false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * These test cases test to test the creation of a local folder with correct
 * permission for result of mapper.
 */
@Test(timeout=30000) public void testCheckDir_normal_local() throws Throwable {
  _checkDirs(true,"755",true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testMkdirs_noDir_badUmask() throws Throwable {
  _mkdirs(false,defaultPerm,invalidPerm);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testCheckDir_notListable_local() throws Throwable {
  _checkDirs(true,"666",false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testCheckDir_notWritable_local() throws Throwable {
  _checkDirs(true,"444",false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testCheckDir_normal() throws Throwable {
  _checkDirs(true,new FsPermission("755"),true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testCheckDir_notReadable_local() throws Throwable {
  _checkDirs(true,"000",false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testCheckDir_notDir_local() throws Throwable {
  _checkDirs(false,"000",false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testMkdirs_dirExists_badUmask() throws Throwable {
  _mkdirs(true,defaultPerm,invalidPerm);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.util.TestGSet </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test for {@link LightWeightGSet#computeCapacity(double,String)}with invalid percent greater than 100.
 */
@Test(expected=HadoopIllegalArgumentException.class) public void testComputeCapacityInvalidPercent(){
  LightWeightGSet.computeCapacity(1024,101.0,"testMap");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test for {@link LightWeightGSet#computeCapacity(double,String)}
 */
@Test public void testComputeCapacity(){
  testCapacity(0,0.0);
  testCapacity(100,0.0);
  testCapacity(0,100.0);
  Random r=new Random();
  for (int i=0; i < 100; i++) {
    long maxMemory=r.nextInt(Integer.MAX_VALUE);
    double percent=r.nextInt(101);
    testCapacity(maxMemory,percent);
  }
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test for {@link LightWeightGSet#computeCapacity(double,String)}with invalid negative max memory
 */
@Test(expected=HadoopIllegalArgumentException.class) public void testComputeCapacityInvalidMemory(){
  LightWeightGSet.computeCapacity(-1,50.0,"testMap");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGSet(){
  check(new GSetTestCase(1,1 << 4,65537));
  check(new GSetTestCase(17,1 << 16,17));
  check(new GSetTestCase(255,1 << 10,65537));
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test for {@link LightWeightGSet#computeCapacity(double,String)}with invalid percent less than 0.
 */
@Test(expected=HadoopIllegalArgumentException.class) public void testComputeCapacityNegativePercent(){
  LightWeightGSet.computeCapacity(1024,-1.0,"testMap");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.util.TestLightWeightCache </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLightWeightCache(){
{
    final long creationExpiration=ran.nextInt(1024) + 1;
    check(1,creationExpiration,0L,1 << 10,65537);
    check(17,creationExpiration,0L,1 << 16,17);
    check(255,creationExpiration,0L,1 << 16,65537);
  }
  for (int i=0; i < 3; i++) {
    final long creationExpiration=ran.nextInt(1024) + 1;
    final long accessExpiration=ran.nextInt(1024) + 1;
    check(1,creationExpiration,accessExpiration,1 << 10,65537);
    check(17,creationExpiration,accessExpiration,1 << 16,17);
    check(255,creationExpiration,accessExpiration,1 << 16,65537);
  }
  final int dataSize=1 << 16;
  for (int i=0; i < 10; i++) {
    final int modulus=ran.nextInt(1024) + 1;
    final int sizeLimit=ran.nextInt(modulus) + 1;
    checkSizeLimit(sizeLimit,dataSize,modulus);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.util.TestNativeLibraryChecker </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNativeLibraryChecker(){
  ExitUtil.disableSystemExit();
  NativeLibraryChecker.main(new String[]{"-h"});
  expectExit(new String[]{"-a","-h"});
  expectExit(new String[]{"aaa"});
  if (NativeCodeLoader.isNativeCodeLoaded()) {
    NativeLibraryChecker.main(new String[0]);
  }
 else {
    expectExit(new String[0]);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.util.TestProtoUtil </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that readRawVarint32 is compatible with the varints encoded
 * by ProtoBuf's CodedOutputStream.
 */
@Test public void testVarInt() throws IOException {
  for (  int value : TEST_VINT_VALUES) {
    doVarIntTest(value);
  }
  for (int i=1; i != 0; i<<=1) {
    doVarIntTest(i);
    doVarIntTest(-i);
    doVarIntTest(i - 1);
    doVarIntTest(~i);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.util.TestPureJavaCrc32 </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCorrectness() throws Exception {
  checkSame();
  theirs.update(104);
  ours.update(104);
  checkSame();
  checkOnBytes(new byte[]{40,60,97,-70},false);
  checkOnBytes("hello world!".getBytes("UTF-8"),false);
  for (int i=0; i < 10000; i++) {
    byte randomBytes[]=new byte[new Random().nextInt(2048)];
    new Random().nextBytes(randomBytes);
    checkOnBytes(randomBytes,false);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.util.TestRunJar </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests the client classloader to verify the main class and its dependent
 * class are loaded correctly by the application classloader, and others are
 * loaded by the system classloader.
 */
@Test public void testClientClassLoader() throws Throwable {
  RunJar runJar=spy(new RunJar());
  when(runJar.useClientClassLoader()).thenReturn(true);
  String mainCls=ClassLoaderCheckMain.class.getName();
  String thirdCls=ClassLoaderCheckThird.class.getName();
  String systemClasses="-" + mainCls + ","+ "-"+ thirdCls+ ","+ ApplicationClassLoader.DEFAULT_SYSTEM_CLASSES;
  when(runJar.getSystemClasses()).thenReturn(systemClasses);
  File testJar=makeClassLoaderTestJar(mainCls,thirdCls);
  String[] args=new String[3];
  args[0]=testJar.getAbsolutePath();
  args[1]=mainCls;
  runJar.run(args);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.util.TestWinUtils </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testChmod() throws IOException {
  testChmodInternal("7","-------rwx");
  testChmodInternal("70","----rwx---");
  testChmodInternal("u-x,g+r,o=g","-rw-r--r--");
  testChmodInternal("u-x,g+rw","-rw-rw----");
  testChmodInternal("u-x,g+rwx-x,o=u","-rw-rw-rw-");
  testChmodInternal("+","-rwx------");
  testChmodInternalR("755","rwxr-xr-x","rwxr-xr-x");
  testChmodInternalR("u-x,g+r,o=g","rw-r--r--","rw-r--r--");
  testChmodInternalR("u-x,g+rw","rw-rw----","rw-rw----");
  testChmodInternalR("u-x,g+rwx-x,o=u","rw-rw-rw-","rw-rw-rw-");
  testChmodInternalR("a+rX","rw-r--r--","rwxr-xr-x");
  testNewFileChmodInternal("-rwx------");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.util.TestZKUtil </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInvalidACLs(){
  badAcl("a:b","ACL 'a:b' not of expected form scheme:id:perm");
  badAcl("a","ACL 'a' not of expected form scheme:id:perm");
  badAcl("password:foo:rx","Invalid permission 'x' in permission string 'rx'");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.util.bloom.TestBloomFilters </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRetouchedBloomFilterSpecific(){
  int numInsertions=1000;
  int hashFunctionNumber=5;
  ImmutableSet<Integer> hashes=ImmutableSet.of(Hash.MURMUR_HASH,Hash.JENKINS_HASH);
  for (  Integer hashId : hashes) {
    RetouchedBloomFilter filter=new RetouchedBloomFilter(bitSize,hashFunctionNumber,hashId);
    checkOnAbsentFalsePositive(hashId,numInsertions,filter,Digits.ODD,RemoveScheme.MAXIMUM_FP);
    filter.and(new RetouchedBloomFilter(bitSize,hashFunctionNumber,hashId));
    checkOnAbsentFalsePositive(hashId,numInsertions,filter,Digits.EVEN,RemoveScheme.MAXIMUM_FP);
    filter.and(new RetouchedBloomFilter(bitSize,hashFunctionNumber,hashId));
    checkOnAbsentFalsePositive(hashId,numInsertions,filter,Digits.ODD,RemoveScheme.MINIMUM_FN);
    filter.and(new RetouchedBloomFilter(bitSize,hashFunctionNumber,hashId));
    checkOnAbsentFalsePositive(hashId,numInsertions,filter,Digits.EVEN,RemoveScheme.MINIMUM_FN);
    filter.and(new RetouchedBloomFilter(bitSize,hashFunctionNumber,hashId));
    checkOnAbsentFalsePositive(hashId,numInsertions,filter,Digits.ODD,RemoveScheme.RATIO);
    filter.and(new RetouchedBloomFilter(bitSize,hashFunctionNumber,hashId));
    checkOnAbsentFalsePositive(hashId,numInsertions,filter,Digits.EVEN,RemoveScheme.RATIO);
    filter.and(new RetouchedBloomFilter(bitSize,hashFunctionNumber,hashId));
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFiltersWithJenkinsHash(){
  int hashId=Hash.JENKINS_HASH;
  BloomFilterCommonTester.of(hashId,numInsertions).withFilterInstance(new BloomFilter(bitSize,hashFunctionNumber,hashId)).withFilterInstance(new RetouchedBloomFilter(bitSize,hashFunctionNumber,hashId)).withTestCases(ImmutableSet.of(BloomFilterTestStrategy.KEY_TEST_STRATEGY,BloomFilterTestStrategy.ADD_KEYS_STRATEGY,BloomFilterTestStrategy.EXCEPTIONS_CHECK_STRATEGY,BloomFilterTestStrategy.ODD_EVEN_ABSENT_STRATEGY,BloomFilterTestStrategy.WRITE_READ_STRATEGY,BloomFilterTestStrategy.FILTER_OR_STRATEGY,BloomFilterTestStrategy.FILTER_AND_STRATEGY,BloomFilterTestStrategy.FILTER_XOR_STRATEGY)).test();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFiltersWithMurmurHash(){
  int hashId=Hash.MURMUR_HASH;
  BloomFilterCommonTester.of(hashId,numInsertions).withFilterInstance(new BloomFilter(bitSize,hashFunctionNumber,hashId)).withFilterInstance(new RetouchedBloomFilter(bitSize,hashFunctionNumber,hashId)).withTestCases(ImmutableSet.of(BloomFilterTestStrategy.KEY_TEST_STRATEGY,BloomFilterTestStrategy.ADD_KEYS_STRATEGY,BloomFilterTestStrategy.EXCEPTIONS_CHECK_STRATEGY,BloomFilterTestStrategy.ODD_EVEN_ABSENT_STRATEGY,BloomFilterTestStrategy.WRITE_READ_STRATEGY,BloomFilterTestStrategy.FILTER_OR_STRATEGY,BloomFilterTestStrategy.FILTER_AND_STRATEGY,BloomFilterTestStrategy.FILTER_XOR_STRATEGY)).test();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.TestContainerLaunchRPC </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testHadoopProtoRPCTimeout() throws Exception {
  testRPCTimeout(HadoopYarnProtoRPC.class.getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.TestRPC </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testHadoopProtoRPC() throws Exception {
  test(HadoopYarnProtoRPC.class.getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.TestRPCFactories </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void test(){
  testPbServerFactory();
  testPbClientFactory();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.TestYSCRPCFactories </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void test(){
  testPbServerFactory();
  testPbClientFactory();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.api.TestPBImplRecords </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testContainerResourceIncreaseRequestPBImpl() throws Exception {
  validatePBImplRecord(ContainerResourceIncreaseRequestPBImpl.class,ContainerResourceIncreaseRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMoveApplicationAcrossQueuesResponsePBImpl() throws Exception {
  validatePBImplRecord(MoveApplicationAcrossQueuesResponsePBImpl.class,MoveApplicationAcrossQueuesResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testContainerIdPBImpl() throws Exception {
  validatePBImplRecord(ContainerIdPBImpl.class,ContainerIdProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRefreshUserToGroupsMappingsResponsePBImpl() throws Exception {
  validatePBImplRecord(RefreshUserToGroupsMappingsResponsePBImpl.class,RefreshUserToGroupsMappingsResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRefreshServiceAclsRequestPBImpl() throws Exception {
  validatePBImplRecord(RefreshServiceAclsRequestPBImpl.class,RefreshServiceAclsRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreemptionMessagePBImpl() throws Exception {
  validatePBImplRecord(PreemptionMessagePBImpl.class,PreemptionMessageProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRegisterApplicationMasterRequestPBImpl() throws Exception {
  validatePBImplRecord(RegisterApplicationMasterRequestPBImpl.class,RegisterApplicationMasterRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testApplicationAttemptIdPBImpl() throws Exception {
  validatePBImplRecord(ApplicationAttemptIdPBImpl.class,ApplicationAttemptIdProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFinishApplicationMasterRequestPBImpl() throws Exception {
  validatePBImplRecord(FinishApplicationMasterRequestPBImpl.class,FinishApplicationMasterRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetDelegationTokenRequestPBImpl() throws Exception {
  validatePBImplRecord(GetDelegationTokenRequestPBImpl.class,GetDelegationTokenRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetContainerReportRequestPBImpl() throws Exception {
  validatePBImplRecord(GetContainerReportRequestPBImpl.class,GetContainerReportRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFinishApplicationMasterResponsePBImpl() throws Exception {
  validatePBImplRecord(FinishApplicationMasterResponsePBImpl.class,FinishApplicationMasterResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetApplicationAttemptReportResponsePBImpl() throws Exception {
  validatePBImplRecord(GetApplicationAttemptReportResponsePBImpl.class,GetApplicationAttemptReportResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRefreshServiceAclsResponsePBImpl() throws Exception {
  validatePBImplRecord(RefreshServiceAclsResponsePBImpl.class,RefreshServiceAclsResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStartContainersResponsePBImpl() throws Exception {
  validatePBImplRecord(StartContainersResponsePBImpl.class,StartContainersResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKillApplicationRequestPBImpl() throws Exception {
  validatePBImplRecord(KillApplicationRequestPBImpl.class,KillApplicationRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLocalResourcePBImpl() throws Exception {
  validatePBImplRecord(LocalResourcePBImpl.class,LocalResourceProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRenewDelegationTokenRequestPBImpl() throws Exception {
  validatePBImplRecord(RenewDelegationTokenRequestPBImpl.class,RenewDelegationTokenRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetClusterMetricsRequestPBImpl() throws Exception {
  validatePBImplRecord(GetClusterMetricsRequestPBImpl.class,GetClusterMetricsRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCancelDelegationTokenRequestPBImpl() throws Exception {
  validatePBImplRecord(CancelDelegationTokenRequestPBImpl.class,CancelDelegationTokenRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetContainerStatusesResponsePBImpl() throws Exception {
  validatePBImplRecord(GetContainerStatusesResponsePBImpl.class,GetContainerStatusesResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResourceRequestPBImpl() throws Exception {
  validatePBImplRecord(ResourceRequestPBImpl.class,ResourceRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetApplicationsResponsePBImpl() throws Exception {
  validatePBImplRecord(GetApplicationsResponsePBImpl.class,GetApplicationsResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testContainerPBImpl() throws Exception {
  validatePBImplRecord(ContainerPBImpl.class,ContainerProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRefreshAdminAclsResponsePBImpl() throws Exception {
  validatePBImplRecord(RefreshAdminAclsResponsePBImpl.class,RefreshAdminAclsResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRefreshSuperUserGroupsConfigurationRequestPBImpl() throws Exception {
  validatePBImplRecord(RefreshSuperUserGroupsConfigurationRequestPBImpl.class,RefreshSuperUserGroupsConfigurationRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRefreshSuperUserGroupsConfigurationResponsePBImpl() throws Exception {
  validatePBImplRecord(RefreshSuperUserGroupsConfigurationResponsePBImpl.class,RefreshSuperUserGroupsConfigurationResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetQueueUserAclsInfoRequestPBImpl() throws Exception {
  validatePBImplRecord(GetQueueUserAclsInfoRequestPBImpl.class,GetQueueUserAclsInfoRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreemptionResourceRequestPBImpl() throws Exception {
  validatePBImplRecord(PreemptionResourceRequestPBImpl.class,PreemptionResourceRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetContainerStatusesRequestPBImpl() throws Exception {
  validatePBImplRecord(GetContainerStatusesRequestPBImpl.class,GetContainerStatusesRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetDelegationTokenResponsePBImpl() throws Exception {
  validatePBImplRecord(GetDelegationTokenResponsePBImpl.class,GetDelegationTokenResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetApplicationAttemptsRequestPBImpl() throws Exception {
  validatePBImplRecord(GetApplicationAttemptsRequestPBImpl.class,GetApplicationAttemptsRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testContainerResourceIncreasePBImpl() throws Exception {
  validatePBImplRecord(ContainerResourceIncreasePBImpl.class,ContainerResourceIncreaseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testApplicationAttemptReportPBImpl() throws Exception {
  validatePBImplRecord(ApplicationAttemptReportPBImpl.class,ApplicationAttemptReportProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetClusterNodesResponsePBImpl() throws Exception {
  validatePBImplRecord(GetClusterNodesResponsePBImpl.class,GetClusterNodesResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetApplicationReportResponsePBImpl() throws Exception {
  validatePBImplRecord(GetApplicationReportResponsePBImpl.class,GetApplicationReportResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStopContainersRequestPBImpl() throws Exception {
  validatePBImplRecord(StopContainersRequestPBImpl.class,StopContainersRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetQueueUserAclsInfoResponsePBImpl() throws Exception {
  validatePBImplRecord(GetQueueUserAclsInfoResponsePBImpl.class,GetQueueUserAclsInfoResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetQueueInfoResponsePBImpl() throws Exception {
  validatePBImplRecord(GetQueueInfoResponsePBImpl.class,GetQueueInfoResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetClusterMetricsResponsePBImpl() throws Exception {
  validatePBImplRecord(GetClusterMetricsResponsePBImpl.class,GetClusterMetricsResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUpdateNodeResourceResponsePBImpl() throws Exception {
  validatePBImplRecord(UpdateNodeResourceResponsePBImpl.class,UpdateNodeResourceResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetApplicationReportRequestPBImpl() throws Exception {
  validatePBImplRecord(GetApplicationReportRequestPBImpl.class,GetApplicationReportRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testContainerLaunchContextPBImpl() throws Exception {
  validatePBImplRecord(ContainerLaunchContextPBImpl.class,ContainerLaunchContextProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTokenPBImpl() throws Exception {
  validatePBImplRecord(TokenPBImpl.class,TokenProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetApplicationAttemptReportRequestPBImpl() throws Exception {
  validatePBImplRecord(GetApplicationAttemptReportRequestPBImpl.class,GetApplicationAttemptReportRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetQueueInfoRequestPBImpl() throws Exception {
  validatePBImplRecord(GetQueueInfoRequestPBImpl.class,GetQueueInfoRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testApplicationReportPBImpl() throws Exception {
  validatePBImplRecord(ApplicationReportPBImpl.class,ApplicationReportProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetClusterNodesRequestPBImpl() throws Exception {
  validatePBImplRecord(GetClusterNodesRequestPBImpl.class,GetClusterNodesRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAllocateRequestPBImpl() throws Exception {
  validatePBImplRecord(AllocateRequestPBImpl.class,AllocateRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testContainerStatusPBImpl() throws Exception {
  validatePBImplRecord(ContainerStatusPBImpl.class,ContainerStatusProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStartContainersRequestPBImpl() throws Exception {
  validatePBImplRecord(StartContainersRequestPBImpl.class,StartContainersRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetNewApplicationResponsePBImpl() throws Exception {
  validatePBImplRecord(GetNewApplicationResponsePBImpl.class,GetNewApplicationResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testApplicationSubmissionContextPBImpl() throws Exception {
  validatePBImplRecord(ApplicationSubmissionContextPBImpl.class,ApplicationSubmissionContextProto.class);
}

</code></pre>

<br>
<pre class="type-5 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testResourceOptionPBImpl() throws Exception {
  validatePBImplRecord(ResourceOptionPBImpl.class,ResourceOptionProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testQueueInfoPBImpl() throws Exception {
  validatePBImplRecord(QueueInfoPBImpl.class,QueueInfoProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResourceBlacklistRequestPBImpl() throws Exception {
  validatePBImplRecord(ResourceBlacklistRequestPBImpl.class,ResourceBlacklistRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testYarnClusterMetricsPBImpl() throws Exception {
  validatePBImplRecord(YarnClusterMetricsPBImpl.class,YarnClusterMetricsProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreemptionContainerPBImpl() throws Exception {
  validatePBImplRecord(PreemptionContainerPBImpl.class,PreemptionContainerProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testContainerReportPBImpl() throws Exception {
  validatePBImplRecord(ContainerReportPBImpl.class,ContainerReportProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRenewDelegationTokenResponsePBImpl() throws Exception {
  validatePBImplRecord(RenewDelegationTokenResponsePBImpl.class,RenewDelegationTokenResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testContainerResourceDecreasePBImpl() throws Exception {
  validatePBImplRecord(ContainerResourceDecreasePBImpl.class,ContainerResourceDecreaseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMoveApplicationAcrossQueuesRequestPBImpl() throws Exception {
  validatePBImplRecord(MoveApplicationAcrossQueuesRequestPBImpl.class,MoveApplicationAcrossQueuesRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStartContainerRequestPBImpl() throws Exception {
  validatePBImplRecord(StartContainerRequestPBImpl.class,StartContainerRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testApplicationIdPBImpl() throws Exception {
  validatePBImplRecord(ApplicationIdPBImpl.class,ApplicationIdProto.class);
}

</code></pre>

<br>
<pre class="type-5 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testNodeIdPBImpl() throws Exception {
  validatePBImplRecord(NodeIdPBImpl.class,NodeIdProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetContainersRequestPBImpl() throws Exception {
  validatePBImplRecord(GetContainersRequestPBImpl.class,GetContainersRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetContainerReportResponsePBImpl() throws Exception {
  validatePBImplRecord(GetContainerReportResponsePBImpl.class,GetContainerReportResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetNewApplicationRequestPBImpl() throws Exception {
  validatePBImplRecord(GetNewApplicationRequestPBImpl.class,GetNewApplicationRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testQueueUserACLInfoPBImpl() throws Exception {
  validatePBImplRecord(QueueUserACLInfoPBImpl.class,QueueUserACLInfoProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUpdateNodeResourceRequestPBImpl() throws Exception {
  validatePBImplRecord(UpdateNodeResourceRequestPBImpl.class,UpdateNodeResourceRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKillApplicationResponsePBImpl() throws Exception {
  validatePBImplRecord(KillApplicationResponsePBImpl.class,KillApplicationResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPriorityPBImpl() throws Exception {
  validatePBImplRecord(PriorityPBImpl.class,PriorityProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRefreshQueuesResponsePBImpl() throws Exception {
  validatePBImplRecord(RefreshQueuesResponsePBImpl.class,RefreshQueuesResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSubmitApplicationRequestPBImpl() throws Exception {
  validatePBImplRecord(SubmitApplicationRequestPBImpl.class,SubmitApplicationRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRefreshUserToGroupsMappingsRequestPBImpl() throws Exception {
  validatePBImplRecord(RefreshUserToGroupsMappingsRequestPBImpl.class,RefreshUserToGroupsMappingsRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNMTokenPBImpl() throws Exception {
  validatePBImplRecord(NMTokenPBImpl.class,NMTokenProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRefreshAdminAclsRequestPBImpl() throws Exception {
  validatePBImplRecord(RefreshAdminAclsRequestPBImpl.class,RefreshAdminAclsRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRefreshNodesResponsePBImpl() throws Exception {
  validatePBImplRecord(RefreshNodesResponsePBImpl.class,RefreshNodesResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetContainersResponsePBImpl() throws Exception {
  validatePBImplRecord(GetContainersResponsePBImpl.class,GetContainersResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRefreshNodesRequestPBImpl() throws Exception {
  validatePBImplRecord(RefreshNodesRequestPBImpl.class,RefreshNodesRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRegisterApplicationMasterResponsePBImpl() throws Exception {
  validatePBImplRecord(RegisterApplicationMasterResponsePBImpl.class,RegisterApplicationMasterResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetApplicationAttemptsResponsePBImpl() throws Exception {
  validatePBImplRecord(GetApplicationAttemptsResponsePBImpl.class,GetApplicationAttemptsResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetApplicationsRequestPBImpl() throws Exception {
  validatePBImplRecord(GetApplicationsRequestPBImpl.class,GetApplicationsRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeReportPBImpl() throws Exception {
  validatePBImplRecord(NodeReportPBImpl.class,NodeReportProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSerializedExceptionPBImpl() throws Exception {
  validatePBImplRecord(SerializedExceptionPBImpl.class,SerializedExceptionProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResourcePBImpl() throws Exception {
  validatePBImplRecord(ResourcePBImpl.class,ResourceProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreemptionContractPBImpl() throws Exception {
  validatePBImplRecord(PreemptionContractPBImpl.class,PreemptionContractProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSubmitApplicationResponsePBImpl() throws Exception {
  validatePBImplRecord(SubmitApplicationResponsePBImpl.class,SubmitApplicationResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStopContainersResponsePBImpl() throws Exception {
  validatePBImplRecord(StopContainersResponsePBImpl.class,StopContainersResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testURLPBImpl() throws Exception {
  validatePBImplRecord(URLPBImpl.class,URLProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testApplicationResourceUsageReportPBImpl() throws Exception {
  validatePBImplRecord(ApplicationResourceUsageReportPBImpl.class,ApplicationResourceUsageReportProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAllocateResponsePBImpl() throws Exception {
  validatePBImplRecord(AllocateResponsePBImpl.class,AllocateResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCancelDelegationTokenResponsePBImpl() throws Exception {
  validatePBImplRecord(CancelDelegationTokenResponsePBImpl.class,CancelDelegationTokenResponseProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRefreshQueuesRequestPBImpl() throws Exception {
  validatePBImplRecord(RefreshQueuesRequestPBImpl.class,RefreshQueuesRequestProto.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStrictPreemptionContractPBImpl() throws Exception {
  validatePBImplRecord(StrictPreemptionContractPBImpl.class,StrictPreemptionContractProto.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.client.TestApplicationClientProtocolOnHA </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=15000) public void testForceKillApplicationOnHA() throws Exception {
  client.killApplication(cluster.createFakeAppId());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=15000) public void testMoveApplicationAcrossQueuesOnHA() throws Exception {
  client.moveApplicationAcrossQueues(cluster.createFakeAppId(),"root");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=15000) public void testCancelDelegationTokenOnHA() throws Exception {
  CancelDelegationTokenRequest request=CancelDelegationTokenRequest.newInstance(cluster.createFakeToken());
  ClientRMProxy.createRMProxy(this.conf,ApplicationClientProtocol.class).cancelDelegationToken(request);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.client.api.async.impl.TestAMRMClientAsync </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=5000) public void testCallAMRMClientAsyncStopFromCallbackHandler() throws YarnException, IOException, InterruptedException {
  Configuration conf=new Configuration();
  TestCallbackHandler2 callbackHandler=new TestCallbackHandler2();
  @SuppressWarnings("unchecked") AMRMClient<ContainerRequest> client=mock(AMRMClientImpl.class);
  List<ContainerStatus> completed=Arrays.asList(ContainerStatus.newInstance(newContainerId(0,0,0,0),ContainerState.COMPLETE,"",0));
  final AllocateResponse response=createAllocateResponse(completed,new ArrayList<Container>(),null);
  when(client.allocate(anyFloat())).thenReturn(response);
  AMRMClientAsync<ContainerRequest> asyncClient=AMRMClientAsync.createAMRMClientAsync(client,20,callbackHandler);
  callbackHandler.asynClient=asyncClient;
  asyncClient.init(conf);
  asyncClient.start();
synchronized (callbackHandler.notifier) {
    asyncClient.registerApplicationMaster("localhost",1234,null);
    while (callbackHandler.notify == false) {
      try {
        callbackHandler.notifier.wait();
      }
 catch (      InterruptedException e) {
        e.printStackTrace();
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testAMRMClientAsyncRunTimeException() throws Exception {
  String exStr="TestRunTimeException";
  RuntimeException mockRunTimeException=mock(RuntimeException.class);
  when(mockRunTimeException.getMessage()).thenReturn(exStr);
  runHeartBeatThrowOutException(mockRunTimeException);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testAMRMClientAsyncShutDown() throws Exception {
  Configuration conf=new Configuration();
  TestCallbackHandler callbackHandler=new TestCallbackHandler();
  @SuppressWarnings("unchecked") AMRMClient<ContainerRequest> client=mock(AMRMClientImpl.class);
  final AllocateResponse shutDownResponse=createAllocateResponse(new ArrayList<ContainerStatus>(),new ArrayList<Container>(),null);
  shutDownResponse.setAMCommand(AMCommand.AM_SHUTDOWN);
  when(client.allocate(anyFloat())).thenReturn(shutDownResponse);
  AMRMClientAsync<ContainerRequest> asyncClient=AMRMClientAsync.createAMRMClientAsync(client,10,callbackHandler);
  asyncClient.init(conf);
  asyncClient.start();
  asyncClient.registerApplicationMaster("localhost",1234,null);
  Thread.sleep(50);
  verify(client,times(1)).allocate(anyFloat());
  asyncClient.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=5000) public void testCallBackThrowOutExceptionNoStop() throws YarnException, IOException, InterruptedException {
  TestCallbackHandler2 callbackHandler=spy(new TestCallbackHandler2());
  callbackHandler.stop=false;
  runCallBackThrowOutException(callbackHandler);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testAMRMClientAsyncException() throws Exception {
  String exStr="TestException";
  YarnException mockException=mock(YarnException.class);
  when(mockException.getMessage()).thenReturn(exStr);
  runHeartBeatThrowOutException(mockException);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=5000) public void testCallBackThrowOutException() throws YarnException, IOException, InterruptedException {
  TestCallbackHandler2 callbackHandler=spy(new TestCallbackHandler2());
  runCallBackThrowOutException(callbackHandler);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.client.api.impl.TestAHSClient </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClientStop(){
  Configuration conf=new Configuration();
  AHSClient client=AHSClient.createAHSClient();
  client.init(conf);
  client.start();
  client.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.client.api.impl.TestAMRMClientContainerRequest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFillInRacks(){
  AMRMClientImpl<ContainerRequest> client=new AMRMClientImpl<ContainerRequest>();
  Configuration conf=new Configuration();
  conf.setClass(CommonConfigurationKeysPublic.NET_TOPOLOGY_NODE_SWITCH_MAPPING_IMPL_KEY,MyResolver.class,DNSToSwitchMapping.class);
  client.init(conf);
  Resource capability=Resource.newInstance(1024,1);
  ContainerRequest request=new ContainerRequest(capability,new String[]{"host1","host2"},new String[]{"/rack2"},Priority.newInstance(1));
  client.addContainerRequest(request);
  verifyResourceRequest(client,request,"host1",true);
  verifyResourceRequest(client,request,"host2",true);
  verifyResourceRequest(client,request,"/rack1",true);
  verifyResourceRequest(client,request,"/rack2",true);
  verifyResourceRequest(client,request,ResourceRequest.ANY,true);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=InvalidContainerRequestException.class) public void testDifferentLocalityRelaxationSamePriority(){
  AMRMClientImpl<ContainerRequest> client=new AMRMClientImpl<ContainerRequest>();
  Configuration conf=new Configuration();
  conf.setClass(CommonConfigurationKeysPublic.NET_TOPOLOGY_NODE_SWITCH_MAPPING_IMPL_KEY,MyResolver.class,DNSToSwitchMapping.class);
  client.init(conf);
  Resource capability=Resource.newInstance(1024,1);
  ContainerRequest request1=new ContainerRequest(capability,new String[]{"host1","host2"},null,Priority.newInstance(1),false);
  client.addContainerRequest(request1);
  ContainerRequest request2=new ContainerRequest(capability,new String[]{"host3"},null,Priority.newInstance(1),true);
  client.addContainerRequest(request2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInvalidValidWhenOldRemoved(){
  AMRMClientImpl<ContainerRequest> client=new AMRMClientImpl<ContainerRequest>();
  Configuration conf=new Configuration();
  conf.setClass(CommonConfigurationKeysPublic.NET_TOPOLOGY_NODE_SWITCH_MAPPING_IMPL_KEY,MyResolver.class,DNSToSwitchMapping.class);
  client.init(conf);
  Resource capability=Resource.newInstance(1024,1);
  ContainerRequest request1=new ContainerRequest(capability,new String[]{"host1","host2"},null,Priority.newInstance(1),false);
  client.addContainerRequest(request1);
  client.removeContainerRequest(request1);
  ContainerRequest request2=new ContainerRequest(capability,new String[]{"host3"},null,Priority.newInstance(1),true);
  client.addContainerRequest(request2);
  client.removeContainerRequest(request2);
  ContainerRequest request3=new ContainerRequest(capability,new String[]{"host1","host2"},null,Priority.newInstance(1),false);
  client.addContainerRequest(request3);
  client.removeContainerRequest(request3);
  ContainerRequest request4=new ContainerRequest(capability,null,new String[]{"rack1"},Priority.newInstance(1),true);
  client.addContainerRequest(request4);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDisableLocalityRelaxation(){
  AMRMClientImpl<ContainerRequest> client=new AMRMClientImpl<ContainerRequest>();
  Configuration conf=new Configuration();
  conf.setClass(CommonConfigurationKeysPublic.NET_TOPOLOGY_NODE_SWITCH_MAPPING_IMPL_KEY,MyResolver.class,DNSToSwitchMapping.class);
  client.init(conf);
  Resource capability=Resource.newInstance(1024,1);
  ContainerRequest nodeLevelRequest=new ContainerRequest(capability,new String[]{"host1","host2"},null,Priority.newInstance(1),false);
  client.addContainerRequest(nodeLevelRequest);
  verifyResourceRequest(client,nodeLevelRequest,ResourceRequest.ANY,false);
  verifyResourceRequest(client,nodeLevelRequest,"/rack1",false);
  verifyResourceRequest(client,nodeLevelRequest,"host1",true);
  verifyResourceRequest(client,nodeLevelRequest,"host2",true);
  ContainerRequest nodeLevelRequest2=new ContainerRequest(capability,new String[]{"host2","host3"},null,Priority.newInstance(1),false);
  client.addContainerRequest(nodeLevelRequest2);
  AMRMClient.ContainerRequest rackLevelRequest=new AMRMClient.ContainerRequest(capability,null,new String[]{"/rack3","/rack4"},Priority.newInstance(2),false);
  client.addContainerRequest(rackLevelRequest);
  verifyResourceRequest(client,rackLevelRequest,ResourceRequest.ANY,false);
  verifyResourceRequest(client,rackLevelRequest,"/rack3",true);
  verifyResourceRequest(client,rackLevelRequest,"/rack4",true);
  AMRMClient.ContainerRequest rackLevelRequest2=new AMRMClient.ContainerRequest(capability,null,new String[]{"/rack4","/rack5"},Priority.newInstance(2),false);
  client.addContainerRequest(rackLevelRequest2);
  ContainerRequest bothLevelRequest=new ContainerRequest(capability,new String[]{"host3","host4"},new String[]{"rack1","/otherrack"},Priority.newInstance(3),false);
  client.addContainerRequest(bothLevelRequest);
  verifyResourceRequest(client,bothLevelRequest,ResourceRequest.ANY,false);
  verifyResourceRequest(client,bothLevelRequest,"rack1",true);
  verifyResourceRequest(client,bothLevelRequest,"/otherrack",true);
  verifyResourceRequest(client,bothLevelRequest,"host3",true);
  verifyResourceRequest(client,bothLevelRequest,"host4",true);
  ContainerRequest bothLevelRequest2=new ContainerRequest(capability,new String[]{"host4","host5"},new String[]{"rack1","/otherrack2"},Priority.newInstance(3),false);
  client.addContainerRequest(bothLevelRequest2);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=InvalidContainerRequestException.class) public void testLocalityRelaxationDifferentLevels(){
  AMRMClientImpl<ContainerRequest> client=new AMRMClientImpl<ContainerRequest>();
  Configuration conf=new Configuration();
  conf.setClass(CommonConfigurationKeysPublic.NET_TOPOLOGY_NODE_SWITCH_MAPPING_IMPL_KEY,MyResolver.class,DNSToSwitchMapping.class);
  client.init(conf);
  Resource capability=Resource.newInstance(1024,1);
  ContainerRequest request1=new ContainerRequest(capability,new String[]{"host1","host2"},null,Priority.newInstance(1),false);
  client.addContainerRequest(request1);
  ContainerRequest request2=new ContainerRequest(capability,null,new String[]{"rack1"},Priority.newInstance(1),true);
  client.addContainerRequest(request2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.client.api.impl.TestYarnClient </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClientStop(){
  Configuration conf=new Configuration();
  ResourceManager rm=new ResourceManager();
  rm.init(conf);
  rm.start();
  YarnClient client=YarnClient.createYarnClient();
  client.init(conf);
  client.start();
  client.stop();
  rm.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAsyncAPIPollTimeout(){
  testAsyncAPIPollTimeoutHelper(null,false);
  testAsyncAPIPollTimeoutHelper(0L,true);
  testAsyncAPIPollTimeoutHelper(1L,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKillApplication() throws Exception {
  MockRM rm=new MockRM();
  rm.start();
  RMApp app=rm.submitApp(2000);
  Configuration conf=new Configuration();
  @SuppressWarnings("resource") final YarnClient client=new MockYarnClient();
  client.init(conf);
  client.start();
  client.killApplication(app.getApplicationId());
  verify(((MockYarnClient)client).getRMClient(),times(2)).forceKillApplication(any(KillApplicationRequest.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.client.cli.TestYarnCLI </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeCLIUsageInfo() throws Exception {
  verifyUsageInfo(new NodeCLI());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppCLIUsageInfo() throws Exception {
  verifyUsageInfo(new ApplicationCLI());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.ipc.TestRPCUtil </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoteIOExceptionDerivativeUnwrapping(){
  Class<? extends Throwable> exception=FileNotFoundException.class;
  verifyRemoteExceptionUnwrapping(exception,exception.getName());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoteIOExceptionUnwrapping(){
  Class<? extends Throwable> exception=IOException.class;
  verifyRemoteExceptionUnwrapping(exception,exception.getName());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoteYarnExceptionDerivativeUnwrapping(){
  Class<? extends Throwable> exception=YarnTestException.class;
  verifyRemoteExceptionUnwrapping(exception,exception.getName());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoteYarnExceptionWithoutStringConstructor(){
  Class<? extends Throwable> exception=YarnTestExceptionNoConstructor.class;
  verifyRemoteExceptionUnwrapping(RemoteException.class,exception.getName());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUnexpectedRemoteExceptionUnwrapping(){
  Class<? extends Throwable> exception=Exception.class;
  verifyRemoteExceptionUnwrapping(RemoteException.class,exception.getName());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoteYarnExceptionUnwrapping(){
  Class<? extends Throwable> exception=YarnException.class;
  verifyRemoteExceptionUnwrapping(exception,exception.getName());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUnknownExceptionUnwrapping(){
  Class<? extends Throwable> exception=YarnException.class;
  String className="UnknownException.class";
  verifyRemoteExceptionUnwrapping(exception,className);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRemoteRuntimeExceptionUnwrapping(){
  Class<? extends Throwable> exception=NullPointerException.class;
  verifyRemoteExceptionUnwrapping(exception,exception.getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.lib.TestZKClient </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testzkClient() throws Exception {
  test("/some/test");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.logaggregation.TestAggregatedLogDeletionService </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCheckInterval() throws Exception {
  long RETENTION_SECS=10 * 24 * 3600;
  long now=System.currentTimeMillis();
  long toDeleteTime=now - RETENTION_SECS * 1000;
  String root="mockfs://foo/";
  String remoteRootLogDir=root + "tmp/logs";
  String suffix="logs";
  Configuration conf=new Configuration();
  conf.setClass("fs.mockfs.impl",MockFileSystem.class,FileSystem.class);
  conf.set(YarnConfiguration.LOG_AGGREGATION_ENABLED,"true");
  conf.set(YarnConfiguration.LOG_AGGREGATION_RETAIN_SECONDS,"864000");
  conf.set(YarnConfiguration.LOG_AGGREGATION_RETAIN_CHECK_INTERVAL_SECONDS,"1");
  conf.set(YarnConfiguration.NM_REMOTE_APP_LOG_DIR,remoteRootLogDir);
  conf.set(YarnConfiguration.NM_REMOTE_APP_LOG_DIR_SUFFIX,suffix);
  FileSystem.closeAll();
  Path rootPath=new Path(root);
  FileSystem rootFs=rootPath.getFileSystem(conf);
  FileSystem mockFs=((FilterFileSystem)rootFs).getRawFileSystem();
  Path remoteRootLogPath=new Path(remoteRootLogDir);
  Path userDir=new Path(remoteRootLogPath,"me");
  FileStatus userDirStatus=new FileStatus(0,true,0,0,now,userDir);
  when(mockFs.listStatus(remoteRootLogPath)).thenReturn(new FileStatus[]{userDirStatus});
  Path userLogDir=new Path(userDir,suffix);
  Path app1Dir=new Path(userLogDir,"application_1_1");
  FileStatus app1DirStatus=new FileStatus(0,true,0,0,now,app1Dir);
  when(mockFs.listStatus(userLogDir)).thenReturn(new FileStatus[]{app1DirStatus});
  Path app1Log1=new Path(app1Dir,"host1");
  FileStatus app1Log1Status=new FileStatus(10,false,1,1,now,app1Log1);
  when(mockFs.listStatus(app1Dir)).thenReturn(new FileStatus[]{app1Log1Status});
  AggregatedLogDeletionService deletionSvc=new AggregatedLogDeletionService();
  deletionSvc.init(conf);
  deletionSvc.start();
  verify(mockFs,timeout(10000).atLeast(4)).listStatus(any(Path.class));
  verify(mockFs,never()).delete(app1Dir,true);
  app1DirStatus=new FileStatus(0,true,0,0,toDeleteTime,app1Dir);
  app1Log1Status=new FileStatus(10,false,1,1,toDeleteTime,app1Log1);
  when(mockFs.listStatus(userLogDir)).thenReturn(new FileStatus[]{app1DirStatus});
  when(mockFs.listStatus(app1Dir)).thenReturn(new FileStatus[]{app1Log1Status});
  verify(mockFs,timeout(10000)).delete(app1Dir,true);
  deletionSvc.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeletion() throws Exception {
  long now=System.currentTimeMillis();
  long toDeleteTime=now - (2000 * 1000);
  long toKeepTime=now - (1500 * 1000);
  String root="mockfs://foo/";
  String remoteRootLogDir=root + "tmp/logs";
  String suffix="logs";
  Configuration conf=new Configuration();
  conf.setClass("fs.mockfs.impl",MockFileSystem.class,FileSystem.class);
  conf.set(YarnConfiguration.LOG_AGGREGATION_ENABLED,"true");
  conf.set(YarnConfiguration.LOG_AGGREGATION_RETAIN_SECONDS,"1800");
  conf.set(YarnConfiguration.NM_REMOTE_APP_LOG_DIR,remoteRootLogDir);
  conf.set(YarnConfiguration.NM_REMOTE_APP_LOG_DIR_SUFFIX,suffix);
  Path rootPath=new Path(root);
  FileSystem rootFs=rootPath.getFileSystem(conf);
  FileSystem mockFs=((FilterFileSystem)rootFs).getRawFileSystem();
  Path remoteRootLogPath=new Path(remoteRootLogDir);
  Path userDir=new Path(remoteRootLogPath,"me");
  FileStatus userDirStatus=new FileStatus(0,true,0,0,toKeepTime,userDir);
  when(mockFs.listStatus(remoteRootLogPath)).thenReturn(new FileStatus[]{userDirStatus});
  Path userLogDir=new Path(userDir,suffix);
  Path app1Dir=new Path(userLogDir,"application_1_1");
  FileStatus app1DirStatus=new FileStatus(0,true,0,0,toDeleteTime,app1Dir);
  Path app2Dir=new Path(userLogDir,"application_1_2");
  FileStatus app2DirStatus=new FileStatus(0,true,0,0,toDeleteTime,app2Dir);
  Path app3Dir=new Path(userLogDir,"application_1_3");
  FileStatus app3DirStatus=new FileStatus(0,true,0,0,toDeleteTime,app3Dir);
  Path app4Dir=new Path(userLogDir,"application_1_4");
  FileStatus app4DirStatus=new FileStatus(0,true,0,0,toDeleteTime,app4Dir);
  when(mockFs.listStatus(userLogDir)).thenReturn(new FileStatus[]{app1DirStatus,app2DirStatus,app3DirStatus,app4DirStatus});
  when(mockFs.listStatus(app1Dir)).thenReturn(new FileStatus[]{});
  Path app2Log1=new Path(app2Dir,"host1");
  FileStatus app2Log1Status=new FileStatus(10,false,1,1,toDeleteTime,app2Log1);
  Path app2Log2=new Path(app2Dir,"host2");
  FileStatus app2Log2Status=new FileStatus(10,false,1,1,toKeepTime,app2Log2);
  when(mockFs.listStatus(app2Dir)).thenReturn(new FileStatus[]{app2Log1Status,app2Log2Status});
  Path app3Log1=new Path(app3Dir,"host1");
  FileStatus app3Log1Status=new FileStatus(10,false,1,1,toDeleteTime,app3Log1);
  Path app3Log2=new Path(app3Dir,"host2");
  FileStatus app3Log2Status=new FileStatus(10,false,1,1,toDeleteTime,app3Log2);
  when(mockFs.delete(app3Dir,true)).thenThrow(new AccessControlException("Injected Error\nStack Trace :("));
  when(mockFs.listStatus(app3Dir)).thenReturn(new FileStatus[]{app3Log1Status,app3Log2Status});
  Path app4Log1=new Path(app4Dir,"host1");
  FileStatus app4Log1Status=new FileStatus(10,false,1,1,toDeleteTime,app4Log1);
  Path app4Log2=new Path(app4Dir,"host2");
  FileStatus app4Log2Status=new FileStatus(10,false,1,1,toDeleteTime,app4Log2);
  when(mockFs.listStatus(app4Dir)).thenReturn(new FileStatus[]{app4Log1Status,app4Log2Status});
  AggregatedLogDeletionService.LogDeletionTask task=new AggregatedLogDeletionService.LogDeletionTask(conf,1800);
  task.run();
  verify(mockFs).delete(app1Dir,true);
  verify(mockFs,times(0)).delete(app2Dir,true);
  verify(mockFs).delete(app3Dir,true);
  verify(mockFs).delete(app4Dir,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.TestContainerManagerSecurity </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=1000000) public void testContainerManager() throws Exception {
  try {
    yarnCluster=new MiniYARNCluster(TestContainerManagerSecurity.class.getName(),1,1,1);
    yarnCluster.init(conf);
    yarnCluster.start();
    testNMTokens(conf);
    testContainerToken(conf);
  }
 catch (  Exception e) {
    e.printStackTrace();
    throw e;
  }
 finally {
    if (yarnCluster != null) {
      yarnCluster.stop();
      yarnCluster=null;
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.TestDiskFailures </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Make log-dirs fail/inaccessible and verify if NodeManager can
 * recognize the disk failures properly and can update the list of
 * log-dirs accordingly with good disks. Also verify the overall health
 * status of the node.
 * @throws IOException
 */
@Test public void testLogDirsFailures() throws IOException {
  testDirsFailures(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Make local-dirs fail/inaccessible and verify if NodeManager can
 * recognize the disk failures properly and can update the list of
 * local-dirs accordingly with good disks. Also verify the overall
 * health status of the node.
 * @throws IOException
 */
@Test public void testLocalDirsFailures() throws IOException {
  testDirsFailures(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.TestRMNMSecretKeys </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=1000000) public void testNMUpdation() throws Exception {
  YarnConfiguration conf=new YarnConfiguration();
  validateRMNMKeyExchange(conf);
  conf.set(CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHENTICATION,"kerberos");
  UserGroupInformation.setConfiguration(conf);
  validateRMNMKeyExchange(conf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.applicationhistoryservice.TestFileSystemApplicationHistoryStore </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMissingContainerHistoryData() throws IOException {
  LOG.info("Starting testMissingContainerHistoryData");
  testWriteHistoryData(3,true,false);
  testReadHistoryData(3,true,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testReadWriteHistoryData() throws IOException {
  LOG.info("Starting testReadWriteHistoryData");
  testWriteHistoryData(5);
  testReadHistoryData(5);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMissingApplicationAttemptHistoryData() throws IOException {
  LOG.info("Starting testMissingApplicationAttemptHistoryData");
  testWriteHistoryData(3,false,true);
  testReadHistoryData(3,false,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.applicationhistoryservice.webapp.TestAHSWebApp </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testContainerPage() throws Exception {
  Injector injector=WebAppTests.createMockInjector(ApplicationContext.class,mockApplicationHistoryManager(1,1,1));
  ContainerPage containerPageInstance=injector.getInstance(ContainerPage.class);
  containerPageInstance.render();
  WebAppTests.flushOutput(injector);
  containerPageInstance.set(YarnWebParams.CONTAINER_ID,ContainerId.newInstance(ApplicationAttemptId.newInstance(ApplicationId.newInstance(0,1),1),1).toString());
  containerPageInstance.render();
  WebAppTests.flushOutput(injector);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testView() throws Exception {
  Injector injector=WebAppTests.createMockInjector(ApplicationContext.class,mockApplicationHistoryManager(5,1,1));
  AHSView ahsViewInstance=injector.getInstance(AHSView.class);
  ahsViewInstance.render();
  WebAppTests.flushOutput(injector);
  ahsViewInstance.set(YarnWebParams.APP_STATE,YarnApplicationState.FAILED.toString());
  ahsViewInstance.render();
  WebAppTests.flushOutput(injector);
  ahsViewInstance.set(YarnWebParams.APP_STATE,StringHelper.cjoin(YarnApplicationState.FAILED.toString(),YarnApplicationState.KILLED));
  ahsViewInstance.render();
  WebAppTests.flushOutput(injector);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppPage() throws Exception {
  Injector injector=WebAppTests.createMockInjector(ApplicationContext.class,mockApplicationHistoryManager(1,5,1));
  AppPage appPageInstance=injector.getInstance(AppPage.class);
  appPageInstance.render();
  WebAppTests.flushOutput(injector);
  appPageInstance.set(YarnWebParams.APPLICATION_ID,ApplicationId.newInstance(0,1).toString());
  appPageInstance.render();
  WebAppTests.flushOutput(injector);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppAttemptPage() throws Exception {
  Injector injector=WebAppTests.createMockInjector(ApplicationContext.class,mockApplicationHistoryManager(1,1,5));
  AppAttemptPage appAttemptPageInstance=injector.getInstance(AppAttemptPage.class);
  appAttemptPageInstance.render();
  WebAppTests.flushOutput(injector);
  appAttemptPageInstance.set(YarnWebParams.APPLICATION_ATTEMPT_ID,ApplicationAttemptId.newInstance(ApplicationId.newInstance(0,1),1).toString());
  appAttemptPageInstance.render();
  WebAppTests.flushOutput(injector);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.TestEventFlow </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSuccessfulContainerLaunch() throws InterruptedException, IOException, YarnException {
  FileContext localFS=FileContext.getLocalFSFileContext();
  localFS.delete(new Path(localDir.getAbsolutePath()),true);
  localFS.delete(new Path(localLogDir.getAbsolutePath()),true);
  localFS.delete(new Path(remoteLogDir.getAbsolutePath()),true);
  localDir.mkdir();
  localLogDir.mkdir();
  remoteLogDir.mkdir();
  YarnConfiguration conf=new YarnConfiguration();
  Context context=new NMContext(new NMContainerTokenSecretManager(conf),new NMTokenSecretManagerInNM(),null,null,new NMNullStateStoreService()){
    @Override public int getHttpPort(){
      return 1234;
    }
  }
;
  conf.set(YarnConfiguration.NM_LOCAL_DIRS,localDir.getAbsolutePath());
  conf.set(YarnConfiguration.NM_LOG_DIRS,localLogDir.getAbsolutePath());
  conf.set(YarnConfiguration.NM_REMOTE_APP_LOG_DIR,remoteLogDir.getAbsolutePath());
  ContainerExecutor exec=new DefaultContainerExecutor();
  exec.setConf(conf);
  DeletionService del=new DeletionService(exec);
  Dispatcher dispatcher=new AsyncDispatcher();
  NodeHealthCheckerService healthChecker=new NodeHealthCheckerService();
  healthChecker.init(conf);
  LocalDirsHandlerService dirsHandler=healthChecker.getDiskHandler();
  NodeManagerMetrics metrics=NodeManagerMetrics.create();
  NodeStatusUpdater nodeStatusUpdater=new NodeStatusUpdaterImpl(context,dispatcher,healthChecker,metrics){
    @Override protected ResourceTracker getRMClient(){
      return new LocalRMInterface();
    }
    @Override protected void stopRMProxy(){
      return;
    }
    @Override protected void startStatusUpdater(){
      return;
    }
    @Override public long getRMIdentifier(){
      return SIMULATED_RM_IDENTIFIER;
    }
  }
;
  DummyContainerManager containerManager=new DummyContainerManager(context,exec,del,nodeStatusUpdater,metrics,new ApplicationACLsManager(conf),dirsHandler);
  nodeStatusUpdater.init(conf);
  ((NMContext)context).setContainerManager(containerManager);
  nodeStatusUpdater.start();
  containerManager.init(conf);
  containerManager.start();
  ContainerLaunchContext launchContext=recordFactory.newRecordInstance(ContainerLaunchContext.class);
  ApplicationId applicationId=ApplicationId.newInstance(0,0);
  ApplicationAttemptId applicationAttemptId=ApplicationAttemptId.newInstance(applicationId,0);
  ContainerId cID=ContainerId.newInstance(applicationAttemptId,0);
  String user="testing";
  StartContainerRequest scRequest=StartContainerRequest.newInstance(launchContext,TestContainerManager.createContainerToken(cID,SIMULATED_RM_IDENTIFIER,context.getNodeId(),user,context.getContainerTokenSecretManager()));
  List<StartContainerRequest> list=new ArrayList<StartContainerRequest>();
  list.add(scRequest);
  StartContainersRequest allRequests=StartContainersRequest.newInstance(list);
  containerManager.startContainers(allRequests);
  BaseContainerManagerTest.waitForContainerState(containerManager,cID,ContainerState.RUNNING);
  List<ContainerId> containerIds=new ArrayList<ContainerId>();
  containerIds.add(cID);
  StopContainersRequest stopRequest=StopContainersRequest.newInstance(containerIds);
  containerManager.stopContainers(stopRequest);
  BaseContainerManagerTest.waitForContainerState(containerManager,cID,ContainerState.COMPLETE);
  containerManager.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.TestNMAuditLogger </h4><pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test {@link NMAuditLogger} without IP set.
 */
@Test public void testNMAuditLoggerWithoutIP() throws Exception {
  testSuccessLogFormat(false);
  testFailureLogFormat(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test {@link NMAuditLogger} with IP set.
 */
@Test public void testNMAuditLoggerWithIP() throws Exception {
  Configuration conf=new Configuration();
  Server server=new RPC.Builder(conf).setProtocol(TestProtocol.class).setInstance(new MyTestRPCServer()).setBindAddress("0.0.0.0").setPort(0).setNumHandlers(5).setVerbose(true).build();
  server.start();
  InetSocketAddress addr=NetUtils.getConnectAddress(server);
  TestProtocol proxy=(TestProtocol)RPC.getProxy(TestProtocol.class,TestProtocol.versionID,addr,conf);
  proxy.ping();
  server.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.TestNodeManagerResync </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testKillContainersOnResync() throws IOException, InterruptedException, YarnException {
  TestNodeManager1 nm=new TestNodeManager1(false);
  testContainerPreservationOnResyncImpl(nm,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreserveContainersOnResyncKeepingContainers() throws IOException, InterruptedException, YarnException {
  TestNodeManager1 nm=new TestNodeManager1(true);
  testContainerPreservationOnResyncImpl(nm,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.TestNodeStatusUpdater </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNMShutdownForRegistrationFailure() throws Exception {
  nm=new NodeManagerWithCustomNodeStatusUpdater(){
    @Override protected NodeStatusUpdater createUpdater(    Context context,    Dispatcher dispatcher,    NodeHealthCheckerService healthChecker){
      MyNodeStatusUpdater nodeStatusUpdater=new MyNodeStatusUpdater(context,dispatcher,healthChecker,metrics);
      MyResourceTracker2 myResourceTracker2=new MyResourceTracker2();
      myResourceTracker2.registerNodeAction=NodeAction.SHUTDOWN;
      myResourceTracker2.shutDownMessage="RM Shutting Down Node";
      nodeStatusUpdater.resourceTracker=myResourceTracker2;
      return nodeStatusUpdater;
    }
  }
;
  verifyNodeStartFailure("Recieved SHUTDOWN signal from Resourcemanager ," + "Registration of NodeManager failed, " + "Message from ResourceManager: RM Shutting Down Node");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Verifies that if for some reason NM fails to start ContainerManager RPC
 * server, RM is oblivious to NM's presence. The behaviour is like this
 * because otherwise, NM will report to RM even if all its servers are not
 * started properly, RM will think that the NM is alive and will retire the NM
 * only after NM_EXPIRY interval. See MAPREDUCE-2749.
 */
@Test public void testNoRegistrationWhenNMServicesFail() throws Exception {
  nm=new NodeManager(){
    @Override protected NodeStatusUpdater createNodeStatusUpdater(    Context context,    Dispatcher dispatcher,    NodeHealthCheckerService healthChecker){
      return new MyNodeStatusUpdater(context,dispatcher,healthChecker,metrics);
    }
    @Override protected ContainerManagerImpl createContainerManager(    Context context,    ContainerExecutor exec,    DeletionService del,    NodeStatusUpdater nodeStatusUpdater,    ApplicationACLsManager aclsManager,    LocalDirsHandlerService diskhandler){
      return new ContainerManagerImpl(context,exec,del,nodeStatusUpdater,metrics,aclsManager,diskhandler){
        @Override protected void serviceStart(){
          throw new YarnRuntimeException("Starting of RPC Server failed");
        }
      }
;
    }
  }
;
  verifyNodeStartFailure("Starting of RPC Server failed");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.TestRPCFactories </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void test(){
  testPbServerFactory();
  testPbClientFactory();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.containermanager.TestContainerManager </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testContainerLaunchAndExitFailure() throws IOException, InterruptedException, YarnException {
  containerManager.start();
  int exitCode=50;
  testContainerLaunchAndExit(exitCode);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testContainerLaunchAndExitSuccess() throws IOException, InterruptedException, YarnException {
  containerManager.start();
  int exitCode=0;
  testContainerLaunchAndExit(exitCode);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.TestContainerLaunch </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testImmediateKill() throws Exception {
  internalKillTest(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testDelayedKill() throws Exception {
  internalKillTest(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.containermanager.localizer.TestContainerLocalizer </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @SuppressWarnings("unchecked") public void testLocalizerTokenIsGettingRemoved() throws Exception {
  FileContext fs=FileContext.getLocalFSFileContext();
  spylfs=spy(fs.getDefaultFileSystem());
  ContainerLocalizer localizer=setupContainerLocalizerForTest();
  doNothing().when(localizer).localizeFiles(any(LocalizationProtocol.class),any(CompletionService.class),any(UserGroupInformation.class));
  localizer.runLocalization(nmAddr);
  verify(spylfs,times(1)).delete(tokenPath,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @SuppressWarnings("unchecked") public void testContainerLocalizerClosesFilesystems() throws Exception {
  FileContext fs=FileContext.getLocalFSFileContext();
  spylfs=spy(fs.getDefaultFileSystem());
  ContainerLocalizer localizer=setupContainerLocalizerForTest();
  doNothing().when(localizer).localizeFiles(any(LocalizationProtocol.class),any(CompletionService.class),any(UserGroupInformation.class));
  verify(localizer,never()).closeFileSystems(any(UserGroupInformation.class));
  localizer.runLocalization(nmAddr);
  verify(localizer).closeFileSystems(any(UserGroupInformation.class));
  spylfs=spy(fs.getDefaultFileSystem());
  localizer=setupContainerLocalizerForTest();
  doThrow(new YarnRuntimeException("Forced Failure")).when(localizer).localizeFiles(any(LocalizationProtocol.class),any(CompletionService.class),any(UserGroupInformation.class));
  verify(localizer,never()).closeFileSystems(any(UserGroupInformation.class));
  localizer.runLocalization(nmAddr);
  verify(localizer).closeFileSystems(any(UserGroupInformation.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.containermanager.localizer.TestLocalResource </h4><pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResourceEquality() throws URISyntaxException {
  Random r=new Random();
  long seed=r.nextLong();
  r.setSeed(seed);
  System.out.println("SEED: " + seed);
  long basetime=r.nextLong() >>> 2;
  org.apache.hadoop.yarn.api.records.LocalResource yA=getYarnResource(new Path("http://yak.org:80/foobar"),-1,basetime,FILE,PUBLIC,null);
  org.apache.hadoop.yarn.api.records.LocalResource yB=getYarnResource(new Path("http://yak.org:80/foobar"),-1,basetime,FILE,PUBLIC,null);
  final LocalResourceRequest a=new LocalResourceRequest(yA);
  LocalResourceRequest b=new LocalResourceRequest(yA);
  checkEqual(a,b);
  b=new LocalResourceRequest(yB);
  checkEqual(a,b);
  yB=getYarnResource(new Path("http://yak.org:80/foobar"),-1,basetime,FILE,PRIVATE,null);
  b=new LocalResourceRequest(yB);
  checkEqual(a,b);
  yB=getYarnResource(new Path("http://yak.org:80/foobar"),0,basetime,FILE,PRIVATE,null);
  b=new LocalResourceRequest(yB);
  checkEqual(a,b);
  yB=getYarnResource(new Path("hdfs://dingo.org:80/foobar"),0,basetime,ARCHIVE,PUBLIC,null);
  b=new LocalResourceRequest(yB);
  checkNotEqual(a,b);
  yB=getYarnResource(new Path("http://yak.org:80/foobar"),0,basetime,ARCHIVE,PUBLIC,null);
  b=new LocalResourceRequest(yB);
  checkNotEqual(a,b);
  yB=getYarnResource(new Path("http://yak.org:80/foobar"),0,basetime + 1,FILE,PUBLIC,null);
  b=new LocalResourceRequest(yB);
  checkNotEqual(a,b);
  yB=getYarnResource(new Path("http://yak.org:80/foobar"),0,basetime + 1,FILE,PUBLIC,"^/foo/.*");
  b=new LocalResourceRequest(yB);
  checkNotEqual(a,b);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.containermanager.localizer.TestResourceLocalizationService </h4><pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) @SuppressWarnings("unchecked") public void testFailedPublicResource() throws Exception {
  List<Path> localDirs=new ArrayList<Path>();
  String[] sDirs=new String[4];
  for (int i=0; i < 4; ++i) {
    localDirs.add(lfs.makeQualified(new Path(basedir,i + "")));
    sDirs[i]=localDirs.get(i).toString();
  }
  conf.setStrings(YarnConfiguration.NM_LOCAL_DIRS,sDirs);
  DrainDispatcher dispatcher=new DrainDispatcher();
  EventHandler<ApplicationEvent> applicationBus=mock(EventHandler.class);
  dispatcher.register(ApplicationEventType.class,applicationBus);
  EventHandler<ContainerEvent> containerBus=mock(EventHandler.class);
  dispatcher.register(ContainerEventType.class,containerBus);
  ContainerExecutor exec=mock(ContainerExecutor.class);
  DeletionService delService=mock(DeletionService.class);
  LocalDirsHandlerService dirsHandler=new LocalDirsHandlerService();
  dirsHandler.init(conf);
  dispatcher.init(conf);
  dispatcher.start();
  try {
    ResourceLocalizationService rawService=new ResourceLocalizationService(dispatcher,exec,delService,dirsHandler,new NMNullStateStoreService());
    ResourceLocalizationService spyService=spy(rawService);
    doReturn(mockServer).when(spyService).createServer();
    doReturn(lfs).when(spyService).getLocalFileContext(isA(Configuration.class));
    spyService.init(conf);
    spyService.start();
    final String user="user0";
    final Application app=mock(Application.class);
    final ApplicationId appId=BuilderUtils.newApplicationId(314159265358979L,3);
    when(app.getUser()).thenReturn(user);
    when(app.getAppId()).thenReturn(appId);
    spyService.handle(new ApplicationLocalizationEvent(LocalizationEventType.INIT_APPLICATION_RESOURCES,app));
    dispatcher.await();
    final Container c=getMockContainer(appId,42,user);
    Random r=new Random();
    long seed=r.nextLong();
    System.out.println("SEED: " + seed);
    r.setSeed(seed);
    final CyclicBarrier barrier=new CyclicBarrier(2);
    doAnswer(new Answer<Void>(){
      public Void answer(      InvocationOnMock invocation) throws IOException {
        try {
          barrier.await();
        }
 catch (        InterruptedException e) {
        }
catch (        BrokenBarrierException e) {
        }
        throw new IOException("forced failure");
      }
    }
).when(spylfs).setPermission(isA(Path.class),isA(FsPermission.class));
    final LocalResource pubResource=getPublicMockedResource(r);
    final LocalResourceRequest pubReq=new LocalResourceRequest(pubResource);
    Map<LocalResourceVisibility,Collection<LocalResourceRequest>> req=new HashMap<LocalResourceVisibility,Collection<LocalResourceRequest>>();
    req.put(LocalResourceVisibility.PUBLIC,Collections.singletonList(pubReq));
    Set<LocalResourceRequest> pubRsrcs=new HashSet<LocalResourceRequest>();
    pubRsrcs.add(pubReq);
    spyService.handle(new ContainerLocalizationRequestEvent(c,req));
    spyService.handle(new ContainerLocalizationRequestEvent(c,req));
    dispatcher.await();
    barrier.await();
    verify(containerBus,timeout(5000).times(2)).handle(isA(ContainerResourceFailedEvent.class));
  }
  finally {
    dispatcher.stop();
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLocalizationInit() throws Exception {
  conf.set(CommonConfigurationKeys.FS_PERMISSIONS_UMASK_KEY,"077");
  AsyncDispatcher dispatcher=new AsyncDispatcher();
  dispatcher.init(new Configuration());
  ContainerExecutor exec=mock(ContainerExecutor.class);
  DeletionService delService=spy(new DeletionService(exec));
  delService.init(conf);
  delService.start();
  List<Path> localDirs=new ArrayList<Path>();
  String[] sDirs=new String[4];
  for (int i=0; i < 4; ++i) {
    localDirs.add(lfs.makeQualified(new Path(basedir,i + "")));
    sDirs[i]=localDirs.get(i).toString();
  }
  conf.setStrings(YarnConfiguration.NM_LOCAL_DIRS,sDirs);
  LocalDirsHandlerService diskhandler=new LocalDirsHandlerService();
  diskhandler.init(conf);
  ResourceLocalizationService locService=spy(new ResourceLocalizationService(dispatcher,exec,delService,diskhandler,new NMNullStateStoreService()));
  doReturn(lfs).when(locService).getLocalFileContext(isA(Configuration.class));
  try {
    dispatcher.start();
    locService.init(conf);
    final FsPermission defaultPerm=new FsPermission((short)0755);
    for (    Path p : localDirs) {
      p=new Path((new URI(p.toString())).getPath());
      Path usercache=new Path(p,ContainerLocalizer.USERCACHE);
      verify(spylfs).mkdir(eq(usercache),eq(defaultPerm),eq(true));
      Path publicCache=new Path(p,ContainerLocalizer.FILECACHE);
      verify(spylfs).mkdir(eq(publicCache),eq(defaultPerm),eq(true));
      Path nmPriv=new Path(p,ResourceLocalizationService.NM_PRIVATE_DIR);
      verify(spylfs).mkdir(eq(nmPriv),eq(ResourceLocalizationService.NM_PRIVATE_PERM),eq(true));
    }
  }
  finally {
    dispatcher.stop();
    delService.stop();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.containermanager.logaggregation.TestLogAggregationService </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @SuppressWarnings("unchecked") public void testLogAggregationInitAppFailsWithoutKillingNM() throws Exception {
  this.conf.set(YarnConfiguration.NM_LOG_DIRS,localLogDir.getAbsolutePath());
  this.conf.set(YarnConfiguration.NM_REMOTE_APP_LOG_DIR,this.remoteRootLogDir.getAbsolutePath());
  DrainDispatcher dispatcher=createDispatcher();
  EventHandler<ApplicationEvent> appEventHandler=mock(EventHandler.class);
  dispatcher.register(ApplicationEventType.class,appEventHandler);
  LogAggregationService logAggregationService=spy(new LogAggregationService(dispatcher,this.context,this.delSrvc,super.dirsHandler));
  logAggregationService.init(this.conf);
  logAggregationService.start();
  ApplicationId appId=BuilderUtils.newApplicationId(System.currentTimeMillis(),(int)Math.random());
  doThrow(new YarnRuntimeException("KABOOM!")).when(logAggregationService).initAppAggregator(eq(appId),eq(user),any(Credentials.class),any(ContainerLogsRetentionPolicy.class),anyMap());
  logAggregationService.handle(new LogHandlerAppStartedEvent(appId,this.user,null,ContainerLogsRetentionPolicy.AM_AND_FAILED_CONTAINERS_ONLY,this.acls));
  dispatcher.await();
  ApplicationEvent expectedEvents[]=new ApplicationEvent[]{new ApplicationEvent(appId,ApplicationEventType.APPLICATION_LOG_HANDLING_FAILED)};
  checkEvents(appEventHandler,expectedEvents,false,"getType","getApplicationID","getDiagnostic");
  verify(logAggregationService,never()).closeFileSystems(any(UserGroupInformation.class));
  logAggregationService.handle(new LogHandlerContainerFinishedEvent(BuilderUtils.newContainerId(4,1,1,1),0));
  dispatcher.await();
  logAggregationService.handle(new LogHandlerAppFinishedEvent(BuilderUtils.newApplicationId(1,5)));
  dispatcher.await();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testLogAggregationForRealContainerLaunch() throws IOException, InterruptedException, YarnException {
  this.containerManager.start();
  File scriptFile=new File(tmpDir,"scriptFile.sh");
  PrintWriter fileWriter=new PrintWriter(scriptFile);
  fileWriter.write("\necho Hello World! Stdout! > " + new File(localLogDir,"stdout"));
  fileWriter.write("\necho Hello World! Stderr! > " + new File(localLogDir,"stderr"));
  fileWriter.write("\necho Hello World! Syslog! > " + new File(localLogDir,"syslog"));
  fileWriter.close();
  ContainerLaunchContext containerLaunchContext=recordFactory.newRecordInstance(ContainerLaunchContext.class);
  ApplicationId appId=ApplicationId.newInstance(0,0);
  ApplicationAttemptId appAttemptId=BuilderUtils.newApplicationAttemptId(appId,1);
  ContainerId cId=BuilderUtils.newContainerId(appAttemptId,0);
  URL resource_alpha=ConverterUtils.getYarnUrlFromPath(localFS.makeQualified(new Path(scriptFile.getAbsolutePath())));
  LocalResource rsrc_alpha=recordFactory.newRecordInstance(LocalResource.class);
  rsrc_alpha.setResource(resource_alpha);
  rsrc_alpha.setSize(-1);
  rsrc_alpha.setVisibility(LocalResourceVisibility.APPLICATION);
  rsrc_alpha.setType(LocalResourceType.FILE);
  rsrc_alpha.setTimestamp(scriptFile.lastModified());
  String destinationFile="dest_file";
  Map<String,LocalResource> localResources=new HashMap<String,LocalResource>();
  localResources.put(destinationFile,rsrc_alpha);
  containerLaunchContext.setLocalResources(localResources);
  List<String> commands=new ArrayList<String>();
  commands.add("/bin/bash");
  commands.add(scriptFile.getAbsolutePath());
  containerLaunchContext.setCommands(commands);
  StartContainerRequest scRequest=StartContainerRequest.newInstance(containerLaunchContext,TestContainerManager.createContainerToken(cId,DUMMY_RM_IDENTIFIER,context.getNodeId(),user,context.getContainerTokenSecretManager()));
  List<StartContainerRequest> list=new ArrayList<StartContainerRequest>();
  list.add(scRequest);
  StartContainersRequest allRequests=StartContainersRequest.newInstance(list);
  this.containerManager.startContainers(allRequests);
  BaseContainerManagerTest.waitForContainerState(this.containerManager,cId,ContainerState.COMPLETE);
  this.containerManager.handle(new CMgrCompletedAppsEvent(Arrays.asList(appId),CMgrCompletedAppsEvent.Reason.ON_SHUTDOWN));
  this.containerManager.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @SuppressWarnings("unchecked") public void testVerifyAndCreateRemoteDirsFailure() throws Exception {
  this.conf.set(YarnConfiguration.NM_LOG_DIRS,localLogDir.getAbsolutePath());
  this.conf.set(YarnConfiguration.NM_REMOTE_APP_LOG_DIR,this.remoteRootLogDir.getAbsolutePath());
  DrainDispatcher dispatcher=createDispatcher();
  EventHandler<ApplicationEvent> appEventHandler=mock(EventHandler.class);
  dispatcher.register(ApplicationEventType.class,appEventHandler);
  LogAggregationService logAggregationService=spy(new LogAggregationService(dispatcher,this.context,this.delSrvc,super.dirsHandler));
  logAggregationService.init(this.conf);
  YarnRuntimeException e=new YarnRuntimeException("KABOOM!");
  doThrow(e).when(logAggregationService).verifyAndCreateRemoteLogDir(any(Configuration.class));
  logAggregationService.start();
  ApplicationId appId=BuilderUtils.newApplicationId(System.currentTimeMillis(),(int)Math.random());
  logAggregationService.handle(new LogHandlerAppStartedEvent(appId,this.user,null,ContainerLogsRetentionPolicy.AM_AND_FAILED_CONTAINERS_ONLY,this.acls));
  dispatcher.await();
  ApplicationEvent[] expectedEvents=new ApplicationEvent[]{new ApplicationEvent(appId,ApplicationEventType.APPLICATION_LOG_HANDLING_FAILED)};
  checkEvents(appEventHandler,expectedEvents,false,"getType","getApplicationID","getDiagnostic");
  Mockito.reset(logAggregationService);
  ApplicationId appId2=BuilderUtils.newApplicationId(System.currentTimeMillis(),(int)Math.random());
  File appLogDir=new File(localLogDir,ConverterUtils.toString(appId2));
  appLogDir.mkdir();
  logAggregationService.handle(new LogHandlerAppStartedEvent(appId2,this.user,null,ContainerLogsRetentionPolicy.AM_AND_FAILED_CONTAINERS_ONLY,this.acls));
  dispatcher.await();
  expectedEvents=new ApplicationEvent[]{new ApplicationEvent(appId,ApplicationEventType.APPLICATION_LOG_HANDLING_FAILED),new ApplicationEvent(appId2,ApplicationEventType.APPLICATION_LOG_HANDLING_INITED)};
  checkEvents(appEventHandler,expectedEvents,false,"getType","getApplicationID","getDiagnostic");
  logAggregationService.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppLogDirCreation() throws Exception {
  final String logSuffix="logs";
  this.conf.set(YarnConfiguration.NM_LOG_DIRS,localLogDir.getAbsolutePath());
  this.conf.set(YarnConfiguration.NM_REMOTE_APP_LOG_DIR,this.remoteRootLogDir.getAbsolutePath());
  this.conf.set(YarnConfiguration.NM_REMOTE_APP_LOG_DIR_SUFFIX,logSuffix);
  InlineDispatcher dispatcher=new InlineDispatcher();
  dispatcher.init(this.conf);
  dispatcher.start();
  FileSystem fs=FileSystem.get(this.conf);
  final FileSystem spyFs=spy(FileSystem.get(this.conf));
  LogAggregationService aggSvc=new LogAggregationService(dispatcher,this.context,this.delSrvc,super.dirsHandler){
    @Override protected FileSystem getFileSystem(    Configuration conf){
      return spyFs;
    }
  }
;
  aggSvc.init(this.conf);
  aggSvc.start();
  ApplicationId appId=BuilderUtils.newApplicationId(1,1);
  Path userDir=fs.makeQualified(new Path(remoteRootLogDir.getAbsolutePath(),this.user));
  Path suffixDir=new Path(userDir,logSuffix);
  Path appDir=new Path(suffixDir,appId.toString());
  aggSvc.handle(new LogHandlerAppStartedEvent(appId,this.user,null,ContainerLogsRetentionPolicy.ALL_CONTAINERS,this.acls));
  verify(spyFs).mkdirs(eq(userDir),isA(FsPermission.class));
  verify(spyFs).mkdirs(eq(suffixDir),isA(FsPermission.class));
  verify(spyFs).mkdirs(eq(appDir),isA(FsPermission.class));
  ApplicationId appId2=BuilderUtils.newApplicationId(1,2);
  Path appDir2=new Path(suffixDir,appId2.toString());
  aggSvc.handle(new LogHandlerAppStartedEvent(appId2,this.user,null,ContainerLogsRetentionPolicy.ALL_CONTAINERS,this.acls));
  verify(spyFs).mkdirs(eq(appDir2),isA(FsPermission.class));
  ApplicationId appId3=BuilderUtils.newApplicationId(1,3);
  Path appDir3=new Path(suffixDir,appId3.toString());
  new File(appDir3.toUri().getPath()).mkdir();
  aggSvc.handle(new LogHandlerAppStartedEvent(appId3,this.user,null,ContainerLogsRetentionPolicy.ALL_CONTAINERS,this.acls));
  verify(spyFs,never()).mkdirs(eq(appDir3),isA(FsPermission.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.containermanager.loghandler.TestNonAggregatingLogHandler </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStop() throws Exception {
  NonAggregatingLogHandler aggregatingLogHandler=new NonAggregatingLogHandler(null,null,null);
  aggregatingLogHandler.stop();
  NonAggregatingLogHandlerWithMockExecutor logHandler=new NonAggregatingLogHandlerWithMockExecutor(null,null,null);
  logHandler.init(new Configuration());
  logHandler.stop();
  verify(logHandler.mockSched).shutdown();
  verify(logHandler.mockSched).awaitTermination(eq(10l),eq(TimeUnit.SECONDS));
  verify(logHandler.mockSched).shutdownNow();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @SuppressWarnings("unchecked") public void testDelayedDelete(){
  DeletionService delService=mock(DeletionService.class);
  Configuration conf=new YarnConfiguration();
  String user="testuser";
  File[] localLogDirs=new File[2];
  localLogDirs[0]=new File("target",this.getClass().getName() + "-localLogDir0").getAbsoluteFile();
  localLogDirs[1]=new File("target",this.getClass().getName() + "-localLogDir1").getAbsoluteFile();
  String localLogDirsString=localLogDirs[0].getAbsolutePath() + "," + localLogDirs[1].getAbsolutePath();
  conf.set(YarnConfiguration.NM_LOG_DIRS,localLogDirsString);
  conf.setBoolean(YarnConfiguration.LOG_AGGREGATION_ENABLED,false);
  conf.setLong(YarnConfiguration.NM_LOG_RETAIN_SECONDS,YarnConfiguration.DEFAULT_NM_LOG_RETAIN_SECONDS);
  DrainDispatcher dispatcher=createDispatcher(conf);
  EventHandler<ApplicationEvent> appEventHandler=mock(EventHandler.class);
  dispatcher.register(ApplicationEventType.class,appEventHandler);
  LocalDirsHandlerService dirsHandler=new LocalDirsHandlerService();
  dirsHandler.init(conf);
  ApplicationId appId1=BuilderUtils.newApplicationId(1234,1);
  ApplicationAttemptId appAttemptId1=BuilderUtils.newApplicationAttemptId(appId1,1);
  ContainerId container11=BuilderUtils.newContainerId(appAttemptId1,1);
  NonAggregatingLogHandler logHandler=new NonAggregatingLogHandlerWithMockExecutor(dispatcher,delService,dirsHandler);
  logHandler.init(conf);
  logHandler.start();
  logHandler.handle(new LogHandlerAppStartedEvent(appId1,user,null,ContainerLogsRetentionPolicy.ALL_CONTAINERS,null));
  logHandler.handle(new LogHandlerContainerFinishedEvent(container11,0));
  logHandler.handle(new LogHandlerAppFinishedEvent(appId1));
  Path[] localAppLogDirs=new Path[2];
  localAppLogDirs[0]=new Path(localLogDirs[0].getAbsolutePath(),appId1.toString());
  localAppLogDirs[1]=new Path(localLogDirs[1].getAbsolutePath(),appId1.toString());
  ScheduledThreadPoolExecutor mockSched=((NonAggregatingLogHandlerWithMockExecutor)logHandler).mockSched;
  verify(mockSched).schedule(any(Runnable.class),eq(10800l),eq(TimeUnit.SECONDS));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testHandlingApplicationFinishedEvent(){
  Configuration conf=new Configuration();
  LocalDirsHandlerService dirsService=new LocalDirsHandlerService();
  DeletionService delService=new DeletionService(null);
  NonAggregatingLogHandler aggregatingLogHandler=new NonAggregatingLogHandler(new InlineDispatcher(),delService,dirsService);
  dirsService.init(conf);
  dirsService.start();
  delService.init(conf);
  delService.start();
  aggregatingLogHandler.init(conf);
  aggregatingLogHandler.start();
  ApplicationId appId=BuilderUtils.newApplicationId(1234,1);
  aggregatingLogHandler.handle(new LogHandlerAppFinishedEvent(appId));
  aggregatingLogHandler.stop();
  aggregatingLogHandler.handle(new LogHandlerAppFinishedEvent(appId));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test @SuppressWarnings("unchecked") public void testLogDeletion(){
  DeletionService delService=mock(DeletionService.class);
  Configuration conf=new YarnConfiguration();
  String user="testuser";
  File[] localLogDirs=new File[2];
  localLogDirs[0]=new File("target",this.getClass().getName() + "-localLogDir0").getAbsoluteFile();
  localLogDirs[1]=new File("target",this.getClass().getName() + "-localLogDir1").getAbsoluteFile();
  String localLogDirsString=localLogDirs[0].getAbsolutePath() + "," + localLogDirs[1].getAbsolutePath();
  conf.set(YarnConfiguration.NM_LOG_DIRS,localLogDirsString);
  conf.setBoolean(YarnConfiguration.LOG_AGGREGATION_ENABLED,false);
  conf.setLong(YarnConfiguration.NM_LOG_RETAIN_SECONDS,0l);
  DrainDispatcher dispatcher=createDispatcher(conf);
  EventHandler<ApplicationEvent> appEventHandler=mock(EventHandler.class);
  dispatcher.register(ApplicationEventType.class,appEventHandler);
  LocalDirsHandlerService dirsHandler=new LocalDirsHandlerService();
  dirsHandler.init(conf);
  ApplicationId appId1=BuilderUtils.newApplicationId(1234,1);
  ApplicationAttemptId appAttemptId1=BuilderUtils.newApplicationAttemptId(appId1,1);
  ContainerId container11=BuilderUtils.newContainerId(appAttemptId1,1);
  NonAggregatingLogHandler logHandler=new NonAggregatingLogHandler(dispatcher,delService,dirsHandler);
  logHandler.init(conf);
  logHandler.start();
  logHandler.handle(new LogHandlerAppStartedEvent(appId1,user,null,ContainerLogsRetentionPolicy.ALL_CONTAINERS,null));
  logHandler.handle(new LogHandlerContainerFinishedEvent(container11,0));
  logHandler.handle(new LogHandlerAppFinishedEvent(appId1));
  Path[] localAppLogDirs=new Path[2];
  localAppLogDirs[0]=new Path(localLogDirs[0].getAbsolutePath(),appId1.toString());
  localAppLogDirs[1]=new Path(localLogDirs[1].getAbsolutePath(),appId1.toString());
  long verifyStartTime=System.currentTimeMillis();
  WantedButNotInvoked notInvokedException=null;
  boolean matched=false;
  while (!matched && System.currentTimeMillis() < verifyStartTime + 5000l) {
    try {
      verify(delService).delete(eq(user),(Path)eq(null),eq(localAppLogDirs[0]),eq(localAppLogDirs[1]));
      matched=true;
    }
 catch (    WantedButNotInvoked e) {
      notInvokedException=e;
      try {
        Thread.sleep(50l);
      }
 catch (      InterruptedException i) {
      }
    }
  }
  if (!matched) {
    throw notInvokedException;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.metrics.TestNodeManagerMetrics </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNames(){
  NodeManagerMetrics metrics=NodeManagerMetrics.create();
  Resource total=Records.newRecord(Resource.class);
  total.setMemory(8 * GiB);
  total.setVirtualCores(16);
  Resource resource=Records.newRecord(Resource.class);
  resource.setMemory(1 * GiB);
  resource.setVirtualCores(2);
  metrics.addResource(total);
  for (int i=5; i-- > 0; ) {
    metrics.launchedContainer();
    metrics.allocateContainer(resource);
  }
  metrics.initingContainer();
  metrics.endInitingContainer();
  metrics.runningContainer();
  metrics.endRunningContainer();
  metrics.completedContainer();
  metrics.releaseContainer(resource);
  metrics.failedContainer();
  metrics.releaseContainer(resource);
  metrics.killedContainer();
  metrics.releaseContainer(resource);
  metrics.initingContainer();
  metrics.runningContainer();
  checkMetrics(5,1,1,1,1,1,2,2,6,4,12);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.webapp.TestContainerLogsPage </h4><pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testContainerLogPageAccess() throws IOException {
  assumeTrue(NativeIO.isAvailable());
  String user="randomUser" + System.currentTimeMillis();
  File absLogDir=null, appDir=null, containerDir=null, syslog=null;
  try {
    absLogDir=new File("target",TestContainerLogsPage.class.getSimpleName() + "LogDir").getAbsoluteFile();
    absLogDir.mkdir();
    Configuration conf=new Configuration();
    conf.set(YarnConfiguration.NM_LOG_DIRS,absLogDir.toURI().toString());
    conf.set(CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHENTICATION,"kerberos");
    UserGroupInformation.setConfiguration(conf);
    NodeHealthCheckerService healthChecker=new NodeHealthCheckerService();
    healthChecker.init(conf);
    LocalDirsHandlerService dirsHandler=healthChecker.getDiskHandler();
    RecordFactory recordFactory=RecordFactoryProvider.getRecordFactory(conf);
    long clusterTimeStamp=1234;
    ApplicationId appId=BuilderUtils.newApplicationId(recordFactory,clusterTimeStamp,1);
    Application app=mock(Application.class);
    when(app.getAppId()).thenReturn(appId);
    when(app.getUser()).thenReturn(user);
    ApplicationAttemptId appAttemptId=BuilderUtils.newApplicationAttemptId(appId,1);
    ContainerId container1=BuilderUtils.newContainerId(recordFactory,appId,appAttemptId,0);
    appDir=new File(absLogDir,appId.toString());
    appDir.mkdir();
    containerDir=new File(appDir,container1.toString());
    containerDir.mkdir();
    syslog=new File(containerDir,"syslog");
    syslog.createNewFile();
    BufferedOutputStream out=new BufferedOutputStream(new FileOutputStream(syslog));
    out.write("Log file Content".getBytes());
    out.close();
    Context context=mock(Context.class);
    ConcurrentMap<ApplicationId,Application> appMap=new ConcurrentHashMap<ApplicationId,Application>();
    appMap.put(appId,app);
    when(context.getApplications()).thenReturn(appMap);
    ConcurrentHashMap<ContainerId,Container> containers=new ConcurrentHashMap<ContainerId,Container>();
    when(context.getContainers()).thenReturn(containers);
    when(context.getLocalDirsHandler()).thenReturn(dirsHandler);
    MockContainer container=new MockContainer(appAttemptId,new AsyncDispatcher(),conf,user,appId,1);
    container.setState(ContainerState.RUNNING);
    context.getContainers().put(container1,container);
    ContainersLogsBlock cLogsBlock=new ContainersLogsBlock(context);
    Map<String,String> params=new HashMap<String,String>();
    params.put(YarnWebParams.CONTAINER_ID,container1.toString());
    params.put(YarnWebParams.CONTAINER_LOG_TYPE,"syslog");
    Injector injector=WebAppTests.testPage(ContainerLogsPage.class,ContainersLogsBlock.class,cLogsBlock,params,(Module[])null);
    PrintWriter spyPw=WebAppTests.getPrintWriter(injector);
    verify(spyPw).write("Exception reading log file. Application submitted by '" + user + "' doesn't own requested log file : syslog");
  }
  finally {
    if (syslog != null) {
      syslog.delete();
    }
    if (containerDir != null) {
      containerDir.delete();
    }
    if (appDir != null) {
      appDir.delete();
    }
    if (absLogDir != null) {
      absLogDir.delete();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.webapp.TestNMWebServer </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNMWebAppWithEphemeralPort() throws IOException {
  int port=startNMWebAppServer("0.0.0.0:0");
  validatePortVal(port);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNMWebApp() throws IOException, YarnException {
  Context nmContext=new NodeManager.NMContext(null,null,null,null,null);
  ResourceView resourceView=new ResourceView(){
    @Override public long getVmemAllocatedForContainers(){
      return 0;
    }
    @Override public long getPmemAllocatedForContainers(){
      return 0;
    }
    @Override public long getVCoresAllocatedForContainers(){
      return 0;
    }
    @Override public boolean isVmemCheckEnabled(){
      return true;
    }
    @Override public boolean isPmemCheckEnabled(){
      return true;
    }
  }
;
  Configuration conf=new Configuration();
  conf.set(YarnConfiguration.NM_LOCAL_DIRS,testRootDir.getAbsolutePath());
  conf.set(YarnConfiguration.NM_LOG_DIRS,testLogDir.getAbsolutePath());
  NodeHealthCheckerService healthChecker=new NodeHealthCheckerService();
  healthChecker.init(conf);
  LocalDirsHandlerService dirsHandler=healthChecker.getDiskHandler();
  WebServer server=new WebServer(nmContext,resourceView,new ApplicationACLsManager(conf),dirsHandler);
  server.init(conf);
  server.start();
  RecordFactory recordFactory=RecordFactoryProvider.getRecordFactory(conf);
  Dispatcher dispatcher=new AsyncDispatcher();
  String user="nobody";
  long clusterTimeStamp=1234;
  ApplicationId appId=BuilderUtils.newApplicationId(recordFactory,clusterTimeStamp,1);
  Application app=mock(Application.class);
  when(app.getUser()).thenReturn(user);
  when(app.getAppId()).thenReturn(appId);
  nmContext.getApplications().put(appId,app);
  ApplicationAttemptId appAttemptId=BuilderUtils.newApplicationAttemptId(appId,1);
  ContainerId container1=BuilderUtils.newContainerId(recordFactory,appId,appAttemptId,0);
  ContainerId container2=BuilderUtils.newContainerId(recordFactory,appId,appAttemptId,1);
  NodeManagerMetrics metrics=mock(NodeManagerMetrics.class);
  NMStateStoreService stateStore=new NMNullStateStoreService();
  for (  ContainerId containerId : new ContainerId[]{container1,container2}) {
    ContainerLaunchContext launchContext=recordFactory.newRecordInstance(ContainerLaunchContext.class);
    long currentTime=System.currentTimeMillis();
    Token containerToken=BuilderUtils.newContainerToken(containerId,"127.0.0.1",1234,user,BuilderUtils.newResource(1024,1),currentTime + 10000L,123,"password".getBytes(),currentTime);
    Container container=new ContainerImpl(conf,dispatcher,stateStore,launchContext,null,metrics,BuilderUtils.newContainerTokenIdentifier(containerToken)){
      @Override public ContainerState getContainerState(){
        return ContainerState.RUNNING;
      }
    }
;
    nmContext.getContainers().put(containerId,container);
    ApplicationId applicationId=containerId.getApplicationAttemptId().getApplicationId();
    nmContext.getApplications().get(applicationId).getContainers().put(containerId,container);
    writeContainerLogs(nmContext,containerId,dirsHandler);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNMWebAppWithOutPort() throws IOException {
  int port=startNMWebAppServer("0.0.0.0");
  validatePortVal(port);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.webapp.TestNMWebServicesApps </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeApps() throws JSONException, Exception {
  testNodeHelper("apps",MediaType.APPLICATION_JSON);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeSingleAppsDefault() throws JSONException, Exception {
  testNodeSingleAppHelper("");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeAppsDefault() throws JSONException, Exception {
  testNodeHelper("apps/","");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeSingleApps() throws JSONException, Exception {
  testNodeSingleAppHelper(MediaType.APPLICATION_JSON);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeAppsSlash() throws JSONException, Exception {
  testNodeHelper("apps/",MediaType.APPLICATION_JSON);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.nodemanager.webapp.TestNMWebServicesContainers </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeSingleContainersSlash() throws JSONException, Exception {
  testNodeSingleContainersHelper(MediaType.APPLICATION_JSON);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeSingleContainersDefault() throws JSONException, Exception {
  testNodeSingleContainersHelper("");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeContainers() throws JSONException, Exception {
  testNodeHelper("containers",MediaType.APPLICATION_JSON);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeSingleContainers() throws JSONException, Exception {
  testNodeSingleContainersHelper(MediaType.APPLICATION_JSON);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeContainersSlash() throws JSONException, Exception {
  testNodeHelper("containers/",MediaType.APPLICATION_JSON);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodeContainersDefault() throws JSONException, Exception {
  testNodeHelper("containers/","");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.QueueACLsTestBase </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testApplicationACLs() throws Exception {
  verifyKillAppSuccess(QUEUE_A_USER,QUEUE_A_USER,QUEUEA,true);
  verifyKillAppSuccess(QUEUE_A_USER,QUEUE_A_ADMIN,QUEUEA,true);
  verifyKillAppSuccess(QUEUE_A_USER,COMMON_USER,QUEUEA,true);
  verifyKillAppSuccess(QUEUE_A_USER,ROOT_ADMIN,QUEUEA,true);
  verifyKillAppFailure(QUEUE_A_USER,QUEUE_B_USER,QUEUEA,true);
  verifyKillAppFailure(QUEUE_A_USER,QUEUE_B_ADMIN,QUEUEA,true);
  verifyKillAppSuccess(QUEUE_B_USER,QUEUE_B_USER,QUEUEB,true);
  verifyKillAppSuccess(QUEUE_B_USER,QUEUE_B_ADMIN,QUEUEB,true);
  verifyKillAppSuccess(QUEUE_B_USER,COMMON_USER,QUEUEB,true);
  verifyKillAppSuccess(QUEUE_B_USER,ROOT_ADMIN,QUEUEB,true);
  verifyKillAppFailure(QUEUE_B_USER,QUEUE_A_USER,QUEUEB,true);
  verifyKillAppFailure(QUEUE_B_USER,QUEUE_A_ADMIN,QUEUEB,true);
  verifyKillAppSuccess(ROOT_ADMIN,ROOT_ADMIN,QUEUEA,false);
  verifyKillAppSuccess(ROOT_ADMIN,ROOT_ADMIN,QUEUEB,false);
  verifyGetClientAMToken(QUEUE_A_USER,ROOT_ADMIN,QUEUEA,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.TestApplicationACLs </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testApplicationACLs() throws Exception {
  verifyOwnerAccess();
  verifySuperUserAccess();
  verifyFriendAccess();
  verifyEnemyAccess();
  verifyAdministerQueueUserAccess();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.TestApplicationCleanup </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings("resource") @Test(timeout=60000) public void testAppCleanupWhenRMRestartedAfterAppFinished() throws Exception {
  conf.setInt(YarnConfiguration.RM_AM_MAX_ATTEMPTS,1);
  MemoryRMStateStore memStore=new MemoryRMStateStore();
  memStore.init(conf);
  MockRM rm1=new MockRM(conf,memStore);
  rm1.start();
  MockNM nm1=new MockNM("127.0.0.1:1234",15120,rm1.getResourceTrackerService());
  nm1.registerNode();
  RMApp app0=rm1.submitApp(200);
  MockAM am0=launchAM(app0,rm1,nm1);
  nm1.nodeHeartbeat(am0.getApplicationAttemptId(),1,ContainerState.COMPLETE);
  rm1.waitForState(app0.getApplicationId(),RMAppState.FAILED);
  MockRM rm2=new MockRM(conf,memStore);
  rm2.start();
  nm1.setResourceTrackerService(rm2.getResourceTrackerService());
  nm1.registerNode(Arrays.asList(app0.getApplicationId()));
  rm2.waitForState(app0.getApplicationId(),RMAppState.FAILED);
  waitForAppCleanupMessageRecved(nm1,app0.getApplicationId());
  rm1.stop();
  rm2.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings("resource") @Test(timeout=60000) public void testContainerCleanupWhenRMRestartedAppNotRegistered() throws Exception {
  conf.setInt(YarnConfiguration.RM_AM_MAX_ATTEMPTS,1);
  MemoryRMStateStore memStore=new MemoryRMStateStore();
  memStore.init(conf);
  final DrainDispatcher dispatcher=new DrainDispatcher();
  MockRM rm1=new MockRM(conf,memStore){
    @Override protected Dispatcher createDispatcher(){
      return dispatcher;
    }
  }
;
  rm1.start();
  MockNM nm1=new MockNM("127.0.0.1:1234",15120,rm1.getResourceTrackerService());
  nm1.registerNode();
  RMApp app0=rm1.submitApp(200);
  MockAM am0=launchAM(app0,rm1,nm1);
  nm1.nodeHeartbeat(am0.getApplicationAttemptId(),1,ContainerState.RUNNING);
  rm1.waitForState(app0.getApplicationId(),RMAppState.RUNNING);
  final DrainDispatcher dispatcher2=new DrainDispatcher();
  MockRM rm2=new MockRM(conf,memStore){
    @Override protected Dispatcher createDispatcher(){
      return dispatcher2;
    }
  }
;
  rm2.start();
  nm1.setResourceTrackerService(rm2.getResourceTrackerService());
  nm1.registerNode(Arrays.asList(app0.getApplicationId()));
  rm2.waitForState(app0.getApplicationId(),RMAppState.ACCEPTED);
  NodeHeartbeatResponse response=nm1.nodeHeartbeat(am0.getApplicationAttemptId(),2,ContainerState.RUNNING);
  waitForContainerCleanup(dispatcher2,nm1,response);
  rm1.stop();
  rm2.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings("resource") @Test(timeout=60000) public void testAppCleanupWhenRMRestartedBeforeAppFinished() throws Exception {
  conf.setInt(YarnConfiguration.RM_AM_MAX_ATTEMPTS,1);
  MemoryRMStateStore memStore=new MemoryRMStateStore();
  memStore.init(conf);
  MockRM rm1=new MockRM(conf,memStore);
  rm1.start();
  MockNM nm1=new MockNM("127.0.0.1:1234",1024,rm1.getResourceTrackerService());
  nm1.registerNode();
  MockNM nm2=new MockNM("127.0.0.1:5678",1024,rm1.getResourceTrackerService());
  nm2.registerNode();
  RMApp app0=rm1.submitApp(200);
  MockAM am0=launchAM(app0,rm1,nm1);
  AllocateResponse allocResponse=am0.allocate(Arrays.asList(ResourceRequest.newInstance(Priority.newInstance(1),"*",Resource.newInstance(1024,0),1)),null);
  while (null == allocResponse.getAllocatedContainers() || allocResponse.getAllocatedContainers().isEmpty()) {
    nm2.nodeHeartbeat(true);
    allocResponse=am0.allocate(null,null);
    Thread.sleep(1000);
  }
  MockRM rm2=new MockRM(conf,memStore);
  rm2.start();
  nm1.setResourceTrackerService(rm2.getResourceTrackerService());
  nm1.registerNode(Arrays.asList(NMContainerStatus.newInstance(ContainerId.newInstance(am0.getApplicationAttemptId(),1),ContainerState.COMPLETE,Resource.newInstance(1024,1),"",0,Priority.newInstance(0),1234)),Arrays.asList(app0.getApplicationId()));
  nm2.setResourceTrackerService(rm2.getResourceTrackerService());
  nm2.registerNode(Arrays.asList(app0.getApplicationId()));
  rm2.waitForState(app0.getApplicationId(),RMAppState.FAILED);
  waitForAppCleanupMessageRecved(nm1,app0.getApplicationId());
  waitForAppCleanupMessageRecved(nm2,app0.getApplicationId());
  rm1.stop();
  rm2.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testAppCleanupWhenNMReconnects() throws Exception {
  conf.setInt(YarnConfiguration.RM_AM_MAX_ATTEMPTS,1);
  MemoryRMStateStore memStore=new MemoryRMStateStore();
  memStore.init(conf);
  MockRM rm1=new MockRM(conf,memStore);
  rm1.start();
  MockNM nm1=new MockNM("127.0.0.1:1234",15120,rm1.getResourceTrackerService());
  nm1.registerNode();
  RMApp app0=rm1.submitApp(200);
  MockAM am0=launchAM(app0,rm1,nm1);
  nm1.nodeHeartbeat(am0.getApplicationAttemptId(),1,ContainerState.COMPLETE);
  rm1.waitForState(app0.getApplicationId(),RMAppState.FAILED);
  waitForAppCleanupMessageRecved(nm1,app0.getApplicationId());
  nm1.registerNode(Arrays.asList(app0.getApplicationId()));
  waitForAppCleanupMessageRecved(nm1,app0.getApplicationId());
  rm1.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.TestApplicationMasterService </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=1200000) public void testProgressFilter() throws Exception {
  MockRM rm=new MockRM(conf);
  rm.start();
  MockNM nm1=rm.registerNode("127.0.0.1:1234",6 * GB);
  RMApp app1=rm.submitApp(2048);
  nm1.nodeHeartbeat(true);
  RMAppAttempt attempt1=app1.getCurrentAppAttempt();
  MockAM am1=rm.sendAMLaunched(attempt1.getAppAttemptId());
  am1.registerAppAttempt();
  AllocateRequestPBImpl allocateRequest=new AllocateRequestPBImpl();
  List<ContainerId> release=new ArrayList<ContainerId>();
  List<ResourceRequest> ask=new ArrayList<ResourceRequest>();
  allocateRequest.setReleaseList(release);
  allocateRequest.setAskList(ask);
  allocateRequest.setProgress(Float.POSITIVE_INFINITY);
  am1.allocate(allocateRequest);
  while (attempt1.getProgress() != 1) {
    LOG.info("Waiting for allocate event to be handled ...");
    sleep(100);
  }
  allocateRequest.setProgress(Float.NaN);
  am1.allocate(allocateRequest);
  while (attempt1.getProgress() != 0) {
    LOG.info("Waiting for allocate event to be handled ...");
    sleep(100);
  }
  allocateRequest.setProgress((float)9);
  am1.allocate(allocateRequest);
  while (attempt1.getProgress() != 1) {
    LOG.info("Waiting for allocate event to be handled ...");
    sleep(100);
  }
  allocateRequest.setProgress(Float.NEGATIVE_INFINITY);
  am1.allocate(allocateRequest);
  while (attempt1.getProgress() != 0) {
    LOG.info("Waiting for allocate event to be handled ...");
    sleep(100);
  }
  allocateRequest.setProgress((float)0.5);
  am1.allocate(allocateRequest);
  while (attempt1.getProgress() != 0.5) {
    LOG.info("Waiting for allocate event to be handled ...");
    sleep(100);
  }
  allocateRequest.setProgress((float)-1);
  am1.allocate(allocateRequest);
  while (attempt1.getProgress() != 0) {
    LOG.info("Waiting for allocate event to be handled ...");
    sleep(100);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.TestClientRMService </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTokenCancellationByOwner() throws Exception {
  RMContext rmContext=mock(RMContext.class);
  final ClientRMService rmService=new ClientRMService(rmContext,null,null,null,null,dtsm);
  testerKerb.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      checkTokenCancellation(rmService,testerKerb,other);
      return null;
    }
  }
);
  owner.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      checkTokenCancellation(owner,other);
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=4000) public void testConcurrentAppSubmit() throws IOException, InterruptedException, BrokenBarrierException, YarnException {
  YarnScheduler yarnScheduler=mockYarnScheduler();
  RMContext rmContext=mock(RMContext.class);
  mockRMContext(yarnScheduler,rmContext);
  RMStateStore stateStore=mock(RMStateStore.class);
  when(rmContext.getStateStore()).thenReturn(stateStore);
  RMAppManager appManager=new RMAppManager(rmContext,yarnScheduler,null,mock(ApplicationACLsManager.class),new Configuration());
  final ApplicationId appId1=getApplicationId(100);
  final ApplicationId appId2=getApplicationId(101);
  final SubmitApplicationRequest submitRequest1=mockSubmitAppRequest(appId1,null,null);
  final SubmitApplicationRequest submitRequest2=mockSubmitAppRequest(appId2,null,null);
  final CyclicBarrier startBarrier=new CyclicBarrier(2);
  final CyclicBarrier endBarrier=new CyclicBarrier(2);
  @SuppressWarnings("rawtypes") EventHandler eventHandler=new EventHandler(){
    @Override public void handle(    Event rawEvent){
      if (rawEvent instanceof RMAppEvent) {
        RMAppEvent event=(RMAppEvent)rawEvent;
        if (event.getApplicationId().equals(appId1)) {
          try {
            startBarrier.await();
            endBarrier.await();
          }
 catch (          BrokenBarrierException e) {
            LOG.warn("Broken Barrier",e);
          }
catch (          InterruptedException e) {
            LOG.warn("Interrupted while awaiting barriers",e);
          }
        }
      }
    }
  }
;
  when(rmContext.getDispatcher().getEventHandler()).thenReturn(eventHandler);
  final ClientRMService rmService=new ClientRMService(rmContext,yarnScheduler,appManager,null,null,null);
  Thread t=new Thread(){
    @Override public void run(){
      try {
        rmService.submitApplication(submitRequest1);
      }
 catch (      YarnException e) {
      }
    }
  }
;
  t.start();
  startBarrier.await();
  rmService.submitApplication(submitRequest2);
  endBarrier.await();
  t.join();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTokenRenewalByLoginUser() throws Exception {
  UserGroupInformation.getLoginUser().doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      checkTokenRenewal(owner,owner);
      checkTokenRenewal(owner,other);
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=ApplicationNotFoundException.class) public void testMoveAbsentApplication() throws YarnException {
  RMContext rmContext=mock(RMContext.class);
  when(rmContext.getRMApps()).thenReturn(new ConcurrentHashMap<ApplicationId,RMApp>());
  ClientRMService rmService=new ClientRMService(rmContext,null,null,null,null,null);
  ApplicationId applicationId=BuilderUtils.newApplicationId(System.currentTimeMillis(),0);
  MoveApplicationAcrossQueuesRequest request=MoveApplicationAcrossQueuesRequest.newInstance(applicationId,"newqueue");
  rmService.moveApplicationAcrossQueues(request);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTokenCancellationByRenewer() throws Exception {
  RMContext rmContext=mock(RMContext.class);
  final ClientRMService rmService=new ClientRMService(rmContext,null,null,null,null,dtsm);
  testerKerb.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      checkTokenCancellation(rmService,owner,testerKerb);
      return null;
    }
  }
);
  other.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      checkTokenCancellation(owner,other);
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTokenRenewalByOwner() throws Exception {
  owner.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      checkTokenRenewal(owner,owner);
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.TestClientRMTokens </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShortCircuitRenewCancelWildcardAddress() throws IOException, InterruptedException {
  InetSocketAddress rmAddr=new InetSocketAddress(123);
  InetSocketAddress serviceAddr=NetUtils.createSocketAddr(InetAddress.getLocalHost().getHostName(),rmAddr.getPort(),null);
  checkShortCircuitRenewCancel(rmAddr,serviceAddr,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShortCircuitRenewCancelDifferentHostDifferentPort() throws IOException, InterruptedException {
  InetSocketAddress rmAddr=NetUtils.createSocketAddr(InetAddress.getLocalHost().getHostName(),123,null);
  checkShortCircuitRenewCancel(rmAddr,new InetSocketAddress("1.1.1.1",rmAddr.getPort() + 1),false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShortCircuitRenewCancel() throws IOException, InterruptedException {
  InetSocketAddress addr=NetUtils.createSocketAddr(InetAddress.getLocalHost().getHostName(),123,null);
  checkShortCircuitRenewCancel(addr,addr,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShortCircuitRenewCancelSameHostDifferentPort() throws IOException, InterruptedException {
  InetSocketAddress rmAddr=NetUtils.createSocketAddr(InetAddress.getLocalHost().getHostName(),123,null);
  checkShortCircuitRenewCancel(rmAddr,new InetSocketAddress(rmAddr.getAddress(),rmAddr.getPort() + 1),false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testShortCircuitRenewCancelDifferentHostSamePort() throws IOException, InterruptedException {
  InetSocketAddress rmAddr=NetUtils.createSocketAddr(InetAddress.getLocalHost().getHostName(),123,null);
  checkShortCircuitRenewCancel(rmAddr,new InetSocketAddress("1.1.1.1",rmAddr.getPort()),false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.TestFifoScheduler </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDefaultMinimumAllocation() throws Exception {
  testMinimumAllocation(new YarnConfiguration(TestFifoScheduler.conf),YarnConfiguration.DEFAULT_RM_SCHEDULER_MINIMUM_ALLOCATION_MB / 2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNonDefaultMinimumAllocation() throws Exception {
  int allocMB=1536;
  YarnConfiguration conf=new YarnConfiguration(TestFifoScheduler.conf);
  conf.setInt(YarnConfiguration.RM_SCHEDULER_MINIMUM_ALLOCATION_MB,allocMB);
  conf.setInt(YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_MB,allocMB * 10);
  testMinimumAllocation(conf,allocMB / 2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.TestKillApplicationWithRMHA </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testKillAppWhenFailoverHappensAtRunningState() throws Exception {
  startRMs();
  MockNM nm1=new MockNM("127.0.0.1:1234",15120,rm1.getResourceTrackerService());
  nm1.registerNode();
  RMApp app0=rm1.submitApp(200);
  MockAM am0=launchAM(app0,rm1,nm1);
  failOverAndKillApp(app0.getApplicationId(),am0.getApplicationAttemptId(),RMAppState.RUNNING,RMAppAttemptState.RUNNING,RMAppState.ACCEPTED);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testKillAppWhenFailoverHappensAtFinalState() throws Exception {
  startRMs();
  MockNM nm1=new MockNM("127.0.0.1:1234",15120,rm1.getResourceTrackerService());
  nm1.registerNode();
  RMApp app0=rm1.submitApp(200);
  MockAM am0=launchAM(app0,rm1,nm1);
  rm1.killApp(app0.getApplicationId());
  rm1.waitForState(app0.getApplicationId(),RMAppState.KILLED);
  rm1.waitForState(am0.getApplicationAttemptId(),RMAppAttemptState.KILLED);
  failOverAndKillApp(app0.getApplicationId(),am0.getApplicationAttemptId(),RMAppState.KILLED,RMAppAttemptState.KILLED,RMAppState.KILLED);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.TestRM </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=300000) public void testActivatingApplicationAfterAddingNM() throws Exception {
  YarnConfiguration conf=new YarnConfiguration();
  MockRM rm1=new MockRM(conf);
  rm1.start();
  RMApp app1=rm1.submitApp(200);
  RMApp app2=rm1.submitApp(200);
  RMAppAttempt attempt1=app1.getCurrentAppAttempt();
  ApplicationAttemptId attemptId1=attempt1.getAppAttemptId();
  rm1.waitForState(attemptId1,RMAppAttemptState.SCHEDULED);
  RMAppAttempt attempt2=app2.getCurrentAppAttempt();
  ApplicationAttemptId attemptId2=attempt2.getAppAttemptId();
  rm1.waitForState(attemptId2,RMAppAttemptState.SCHEDULED);
  MockNM nm1=new MockNM("h1:1234",15120,rm1.getResourceTrackerService());
  MockNM nm2=new MockNM("h2:5678",15120,rm1.getResourceTrackerService());
  nm1.registerNode();
  nm2.registerNode();
  nm1.nodeHeartbeat(true);
  rm1.waitForState(attemptId1,RMAppAttemptState.ALLOCATED);
  rm1.waitForState(attemptId2,RMAppAttemptState.SCHEDULED);
  nm2.nodeHeartbeat(true);
  rm1.waitForState(attemptId1,RMAppAttemptState.ALLOCATED);
  rm1.waitForState(attemptId2,RMAppAttemptState.ALLOCATED);
  rm1.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetNewAppId() throws Exception {
  Logger rootLogger=LogManager.getRootLogger();
  rootLogger.setLevel(Level.DEBUG);
  MockRM rm=new MockRM();
  rm.start();
  GetNewApplicationResponse resp=rm.getNewAppId();
  assert (resp.getApplicationId().getId() != 0);
  assert (resp.getMaximumResourceCapability().getMemory() > 0);
  rm.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testAppWithNoContainers() throws Exception {
  Logger rootLogger=LogManager.getRootLogger();
  rootLogger.setLevel(Level.DEBUG);
  MockRM rm=new MockRM();
  rm.start();
  MockNM nm1=rm.registerNode("h1:1234",5120);
  RMApp app=rm.submitApp(2000);
  nm1.nodeHeartbeat(true);
  RMAppAttempt attempt=app.getCurrentAppAttempt();
  MockAM am=rm.sendAMLaunched(attempt.getAppAttemptId());
  am.registerAppAttempt();
  am.unregisterAppAttempt();
  nm1.nodeHeartbeat(attempt.getAppAttemptId(),1,ContainerState.COMPLETE);
  am.waitForState(RMAppAttemptState.FINISHED);
  rm.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.TestRMAuditLogger </h4><pre class="type-18 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test {@link RMAuditLogger} without IP set.
 */
@Test public void testRMAuditLoggerWithoutIP() throws Exception {
  testSuccessLogFormat(false);
  testFailureLogFormat(false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test {@link RMAuditLogger} with IP set.
 */
@Test public void testRMAuditLoggerWithIP() throws Exception {
  Configuration conf=new Configuration();
  Server server=new RPC.Builder(conf).setProtocol(TestProtocol.class).setInstance(new MyTestRPCServer()).setBindAddress("0.0.0.0").setPort(0).setNumHandlers(5).setVerbose(true).build();
  server.start();
  InetSocketAddress addr=NetUtils.getConnectAddress(server);
  TestProtocol proxy=(TestProtocol)RPC.getProxy(TestProtocol.class,TestProtocol.versionID,addr,conf);
  proxy.ping();
  server.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.TestRMEmbeddedElector </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that tries to see if there is a deadlock between
 * (a) the thread stopping the RM
 * (b) thread processing the ZK event asking RM to transition to active
 * The test times out if there is a deadlock.
 */
@Test(timeout=10000) public void testDeadlockShutdownBecomeActive() throws InterruptedException {
  MockRM rm=new MockRMWithElector(conf,1000);
  rm.start();
  LOG.info("Waiting for callback");
  while (!callbackCalled.get())   ;
  LOG.info("Stopping RM");
  rm.stop();
  LOG.info("Stopped RM");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.TestRMHA </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testHAWithRMHostName() throws Exception {
  innerTestHAWithRMHostName(false);
  configuration.clear();
  setUp();
  innerTestHAWithRMHostName(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.TestRMRestart </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testSynchronouslyRenewDTOnRecovery() throws Exception {
  conf.setInt(YarnConfiguration.RM_AM_MAX_ATTEMPTS,2);
  conf.set(CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHENTICATION,"kerberos");
  MemoryRMStateStore memStore=new MemoryRMStateStore();
  memStore.init(conf);
  MockRM rm1=new MockRM(conf,memStore);
  rm1.start();
  final MockNM nm1=new MockNM("127.0.0.1:1234",15120,rm1.getResourceTrackerService());
  nm1.registerNode();
  RMApp app0=rm1.submitApp(200);
  final MockAM am0=MockRM.launchAndRegisterAM(app0,rm1,nm1);
  MockRM rm2=new MockRM(conf,memStore){
    @Override protected ResourceTrackerService createResourceTrackerService(){
      return new ResourceTrackerService(this.rmContext,this.nodesListManager,this.nmLivelinessMonitor,this.rmContext.getContainerTokenSecretManager(),this.rmContext.getNMTokenSecretManager()){
        @Override protected void serviceStart() throws Exception {
          super.serviceStart();
          nm1.setResourceTrackerService(getResourceTrackerService());
          NMContainerStatus status=TestRMRestart.createNMContainerStatus(am0.getApplicationAttemptId(),1,ContainerState.COMPLETE);
          nm1.registerNode(Arrays.asList(status),null);
        }
      }
;
    }
  }
;
  rm2.start();
  RMApp loadedApp0=rm2.getRMContext().getRMApps().get(app0.getApplicationId());
  int timeoutSecs=0;
  while (loadedApp0.getAppAttempts().size() != 2 && timeoutSecs++ < 40) {
    Thread.sleep(200);
  }
  MockAM am1=MockRM.launchAndRegisterAM(loadedApp0,rm2,nm1);
  MockRM.finishAMAndVerifyAppState(loadedApp0,rm2,nm1,am1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings("resource") @Test(timeout=60000) public void testQueueMetricsOnRMRestart() throws Exception {
  conf.setInt(YarnConfiguration.RM_AM_MAX_ATTEMPTS,YarnConfiguration.DEFAULT_RM_AM_MAX_ATTEMPTS);
  MemoryRMStateStore memStore=new MemoryRMStateStore();
  memStore.init(conf);
  MockRM rm1=new MockRM(conf,memStore);
  rm1.start();
  MockNM nm1=new MockNM("127.0.0.1:1234",15120,rm1.getResourceTrackerService());
  nm1.registerNode();
  QueueMetrics qm1=rm1.getResourceScheduler().getRootQueueMetrics();
  resetQueueMetrics(qm1);
  assertQueueMetrics(qm1,0,0,0,0);
  RMApp app1=rm1.submitApp(200);
  rm1.waitForState(app1.getApplicationId(),RMAppState.ACCEPTED);
  RMAppAttempt attempt1=app1.getCurrentAppAttempt();
  ApplicationAttemptId attemptId1=attempt1.getAppAttemptId();
  rm1.waitForState(attemptId1,RMAppAttemptState.SCHEDULED);
  assertQueueMetrics(qm1,1,1,0,0);
  nm1.nodeHeartbeat(true);
  rm1.waitForState(attemptId1,RMAppAttemptState.ALLOCATED);
  MockAM am1=rm1.sendAMLaunched(attempt1.getAppAttemptId());
  am1.registerAppAttempt();
  am1.allocate("127.0.0.1",1000,1,new ArrayList<ContainerId>());
  nm1.nodeHeartbeat(true);
  List<Container> conts=am1.allocate(new ArrayList<ResourceRequest>(),new ArrayList<ContainerId>()).getAllocatedContainers();
  while (conts.size() == 0) {
    nm1.nodeHeartbeat(true);
    conts.addAll(am1.allocate(new ArrayList<ResourceRequest>(),new ArrayList<ContainerId>()).getAllocatedContainers());
    Thread.sleep(500);
  }
  assertQueueMetrics(qm1,1,0,1,0);
  MockRM rm2=new MockRM(conf,memStore);
  QueueMetrics qm2=rm2.getResourceScheduler().getRootQueueMetrics();
  resetQueueMetrics(qm2);
  assertQueueMetrics(qm2,0,0,0,0);
  rm2.start();
  nm1.setResourceTrackerService(rm2.getResourceTrackerService());
  RMApp loadedApp1=rm2.getRMContext().getRMApps().get(app1.getApplicationId());
  am1.setAMRMProtocol(rm2.getApplicationMasterService(),rm2.getRMContext());
  am1.allocate(new ArrayList<ResourceRequest>(),new ArrayList<ContainerId>());
  nm1.nodeHeartbeat(true);
  nm1=new MockNM("127.0.0.1:1234",15120,rm2.getResourceTrackerService());
  NMContainerStatus status=TestRMRestart.createNMContainerStatus(loadedApp1.getCurrentAppAttempt().getAppAttemptId(),1,ContainerState.COMPLETE);
  nm1.registerNode(Arrays.asList(status),null);
  while (loadedApp1.getAppAttempts().size() != 2) {
    Thread.sleep(200);
  }
  attempt1=loadedApp1.getCurrentAppAttempt();
  attemptId1=attempt1.getAppAttemptId();
  rm2.waitForState(attemptId1,RMAppAttemptState.SCHEDULED);
  assertQueueMetrics(qm2,1,1,0,0);
  nm1.nodeHeartbeat(true);
  rm2.waitForState(attemptId1,RMAppAttemptState.ALLOCATED);
  assertQueueMetrics(qm2,1,0,1,0);
  am1=rm2.sendAMLaunched(attempt1.getAppAttemptId());
  am1.registerAppAttempt();
  am1.allocate("127.0.0.1",1000,3,new ArrayList<ContainerId>());
  nm1.nodeHeartbeat(true);
  conts=am1.allocate(new ArrayList<ResourceRequest>(),new ArrayList<ContainerId>()).getAllocatedContainers();
  while (conts.size() == 0) {
    nm1.nodeHeartbeat(true);
    conts.addAll(am1.allocate(new ArrayList<ResourceRequest>(),new ArrayList<ContainerId>()).getAllocatedContainers());
    Thread.sleep(500);
  }
  finishApplicationMaster(loadedApp1,rm2,nm1,am1);
  assertQueueMetrics(qm2,1,0,0,1);
  rm2.stop();
  rm1.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testAppSubmissionWithOldDelegationTokenAfterRMRestart() throws Exception {
  conf.setInt(YarnConfiguration.RM_AM_MAX_ATTEMPTS,2);
  conf.set(CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHENTICATION,"kerberos");
  conf.set(YarnConfiguration.RM_ADDRESS,"localhost:8032");
  UserGroupInformation.setConfiguration(conf);
  MemoryRMStateStore memStore=new MemoryRMStateStore();
  memStore.init(conf);
  MockRM rm1=new TestSecurityMockRM(conf,memStore);
  rm1.start();
  GetDelegationTokenRequest request1=GetDelegationTokenRequest.newInstance("renewer1");
  UserGroupInformation.getCurrentUser().setAuthenticationMethod(AuthMethod.KERBEROS);
  GetDelegationTokenResponse response1=rm1.getClientRMService().getDelegationToken(request1);
  Token<RMDelegationTokenIdentifier> token1=ConverterUtils.convertFromYarn(response1.getRMDelegationToken(),rmAddr);
  MockRM rm2=new TestSecurityMockRM(conf,memStore);
  rm2.start();
  Credentials ts=new Credentials();
  ts.addToken(token1.getService(),token1);
  RMApp app=rm2.submitApp(200,"name","user",new HashMap<ApplicationAccessType,String>(),false,"default",1,ts);
  rm2.waitForState(app.getApplicationId(),RMAppState.ACCEPTED);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.TestResourceManager </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNMExpiryAndHeartbeatIntervalsValidation() throws Exception {
  Configuration conf=new YarnConfiguration();
  conf.setLong(YarnConfiguration.RM_NM_EXPIRY_INTERVAL_MS,1000);
  conf.setLong(YarnConfiguration.RM_NM_HEARTBEAT_INTERVAL_MS,1001);
  resourceManager=new ResourceManager();
  ;
  try {
    resourceManager.init(conf);
  }
 catch (  YarnRuntimeException e) {
    if (!e.getMessage().startsWith("Nodemanager expiry interval should be no" + " less than heartbeat interval")) {
      throw e;
    }
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testResourceAllocation() throws IOException, YarnException, InterruptedException {
  LOG.info("--- START: testResourceAllocation ---");
  final int memory=4 * 1024;
  final int vcores=4;
  String host1="host1";
  org.apache.hadoop.yarn.server.resourcemanager.NodeManager nm1=registerNode(host1,1234,2345,NetworkTopology.DEFAULT_RACK,Resources.createResource(memory,vcores));
  String host2="host2";
  org.apache.hadoop.yarn.server.resourcemanager.NodeManager nm2=registerNode(host2,1234,2345,NetworkTopology.DEFAULT_RACK,Resources.createResource(memory / 2,vcores / 2));
  Application application=new Application("user1",resourceManager);
  application.submit();
  application.addNodeManager(host1,1234,nm1);
  application.addNodeManager(host2,1234,nm2);
  final int memory1=1024;
  Resource capability1=Resources.createResource(memory1,1);
  Priority priority1=org.apache.hadoop.yarn.server.resourcemanager.resource.Priority.create(1);
  application.addResourceRequestSpec(priority1,capability1);
  Task t1=new Task(application,priority1,new String[]{host1,host2});
  application.addTask(t1);
  final int memory2=2048;
  Resource capability2=Resources.createResource(memory2,1);
  Priority priority0=org.apache.hadoop.yarn.server.resourcemanager.resource.Priority.create(0);
  application.addResourceRequestSpec(priority0,capability2);
  application.schedule();
  nodeUpdate(nm1);
  application.schedule();
  checkResourceUsage(nm1,nm2);
  LOG.info("Adding new tasks...");
  Task t2=new Task(application,priority1,new String[]{host1,host2});
  application.addTask(t2);
  Task t3=new Task(application,priority0,new String[]{ResourceRequest.ANY});
  application.addTask(t3);
  application.schedule();
  checkResourceUsage(nm1,nm2);
  nodeUpdate(nm2);
  nodeUpdate(nm2);
  nodeUpdate(nm1);
  nodeUpdate(nm1);
  LOG.info("Trying to allocate...");
  application.schedule();
  checkResourceUsage(nm1,nm2);
  LOG.info("Finishing up tasks...");
  application.finishTask(t1);
  application.finishTask(t2);
  application.finishTask(t3);
  AppAttemptRemovedSchedulerEvent appRemovedEvent1=new AppAttemptRemovedSchedulerEvent(application.getApplicationAttemptId(),RMAppAttemptState.FINISHED,false);
  resourceManager.getResourceScheduler().handle(appRemovedEvent1);
  checkResourceUsage(nm1,nm2);
  LOG.info("--- END: testResourceAllocation ---");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.TestResourceTrackerService </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@SuppressWarnings("unchecked") @Test public void testHandleContainerStatusInvalidCompletions() throws Exception {
  rm=new MockRM(new YarnConfiguration());
  rm.start();
  EventHandler handler=spy(rm.getRMContext().getDispatcher().getEventHandler());
  RMApp app=rm.submitApp(1024,true);
  NMContainerStatus report=NMContainerStatus.newInstance(ContainerId.newInstance(ApplicationAttemptId.newInstance(app.getApplicationId(),2),1),ContainerState.COMPLETE,Resource.newInstance(1024,1),"Dummy Completed",0,Priority.newInstance(10),1234);
  rm.getResourceTrackerService().handleNMContainerStatus(report);
  verify(handler,never()).handle((Event)any());
  RMAppAttemptImpl currentAttempt=(RMAppAttemptImpl)app.getCurrentAppAttempt();
  currentAttempt.setMasterContainer(null);
  report=NMContainerStatus.newInstance(ContainerId.newInstance(currentAttempt.getAppAttemptId(),0),ContainerState.COMPLETE,Resource.newInstance(1024,1),"Dummy Completed",0,Priority.newInstance(10),1234);
  rm.getResourceTrackerService().handleNMContainerStatus(report);
  verify(handler,never()).handle((Event)any());
  app=rm.submitApp(1024);
  report=NMContainerStatus.newInstance(ContainerId.newInstance(ApplicationAttemptId.newInstance(app.getApplicationId(),2),1),ContainerState.COMPLETE,Resource.newInstance(1024,1),"Dummy Completed",0,Priority.newInstance(10),1234);
  try {
    rm.getResourceTrackerService().handleNMContainerStatus(report);
  }
 catch (  Exception e) {
  }
  verify(handler,never()).handle((Event)any());
  currentAttempt=(RMAppAttemptImpl)app.getCurrentAppAttempt();
  currentAttempt.setMasterContainer(null);
  report=NMContainerStatus.newInstance(ContainerId.newInstance(currentAttempt.getAppAttemptId(),0),ContainerState.COMPLETE,Resource.newInstance(1024,1),"Dummy Completed",0,Priority.newInstance(10),1234);
  try {
    rm.getResourceTrackerService().handleNMContainerStatus(report);
  }
 catch (  Exception e) {
  }
  verify(handler,never()).handle((Event)any());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.TestSubmitApplicationWithRMHA </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testHandleRMHABeforeSubmitApplicationCallWithSavedApplicationState() throws Exception {
  startRMs();
  ApplicationId appId=rm1.getNewAppId().getApplicationId();
  explicitFailover();
  RMApp app1=rm2.submitApp(200,"",UserGroupInformation.getCurrentUser().getShortUserName(),null,false,null,configuration.getInt(YarnConfiguration.RM_AM_MAX_ATTEMPTS,YarnConfiguration.DEFAULT_RM_AM_MAX_ATTEMPTS),null,null,false,false,true,appId);
  verifySubmitApp(rm2,app1,appId);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.TestWorkPreservingRMRestart </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=600000) public void testAppReregisterOnRMWorkPreservingRestart() throws Exception {
  conf.setInt(YarnConfiguration.RM_AM_MAX_ATTEMPTS,1);
  MemoryRMStateStore memStore=new MemoryRMStateStore();
  memStore.init(conf);
  rm1=new MockRM(conf,memStore);
  rm1.start();
  MockNM nm1=new MockNM("127.0.0.1:1234",15120,rm1.getResourceTrackerService());
  nm1.registerNode();
  RMApp app0=rm1.submitApp(200);
  MockAM am0=MockRM.launchAM(app0,rm1,nm1);
  rm2=new MockRM(conf,memStore);
  rm2.start();
  rm2.waitForState(app0.getApplicationId(),RMAppState.ACCEPTED);
  rm2.waitForState(am0.getApplicationAttemptId(),RMAppAttemptState.LAUNCHED);
  am0.setAMRMProtocol(rm2.getApplicationMasterService(),rm2.getRMContext());
  am0.registerAppAttempt(true);
  rm2.waitForState(app0.getApplicationId(),RMAppState.RUNNING);
  rm2.waitForState(am0.getApplicationAttemptId(),RMAppAttemptState.RUNNING);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testCapacitySchedulerRecovery() throws Exception {
  if (!schedulerClass.equals(CapacityScheduler.class)) {
    return;
  }
  conf.setBoolean(CapacitySchedulerConfiguration.ENABLE_USER_METRICS,true);
  conf.set(CapacitySchedulerConfiguration.RESOURCE_CALCULATOR_CLASS,DominantResourceCalculator.class.getName());
  CapacitySchedulerConfiguration csConf=new CapacitySchedulerConfiguration(conf);
  setupQueueConfiguration(csConf);
  MemoryRMStateStore memStore=new MemoryRMStateStore();
  memStore.init(csConf);
  rm1=new MockRM(csConf,memStore);
  rm1.start();
  MockNM nm1=new MockNM("127.0.0.1:1234",8192,rm1.getResourceTrackerService());
  MockNM nm2=new MockNM("127.1.1.1:4321",8192,rm1.getResourceTrackerService());
  nm1.registerNode();
  nm2.registerNode();
  RMApp app1_1=rm1.submitApp(1024,"app1_1",USER_1,null,A);
  MockAM am1_1=MockRM.launchAndRegisterAM(app1_1,rm1,nm1);
  RMApp app1_2=rm1.submitApp(1024,"app1_2",USER_1,null,A);
  MockAM am1_2=MockRM.launchAndRegisterAM(app1_2,rm1,nm2);
  RMApp app2=rm1.submitApp(1024,"app2",USER_2,null,B);
  MockAM am2=MockRM.launchAndRegisterAM(app2,rm1,nm2);
  rm1.clearQueueMetrics(app1_1);
  rm1.clearQueueMetrics(app1_2);
  rm1.clearQueueMetrics(app2);
  rm2=new MockRM(csConf,memStore);
  rm2.start();
  nm1.setResourceTrackerService(rm2.getResourceTrackerService());
  nm2.setResourceTrackerService(rm2.getResourceTrackerService());
  List<NMContainerStatus> am1_1Containers=createNMContainerStatusForApp(am1_1);
  List<NMContainerStatus> am1_2Containers=createNMContainerStatusForApp(am1_2);
  am1_1Containers.addAll(am1_2Containers);
  nm1.registerNode(am1_1Containers,null);
  List<NMContainerStatus> am2Containers=createNMContainerStatusForApp(am2);
  nm2.registerNode(am2Containers,null);
  waitForNumContainersToRecover(2,rm2,am1_1.getApplicationAttemptId());
  waitForNumContainersToRecover(2,rm2,am1_2.getApplicationAttemptId());
  waitForNumContainersToRecover(2,rm2,am1_2.getApplicationAttemptId());
  Resource containerResource=Resource.newInstance(1024,1);
  Resource nmResource=Resource.newInstance(nm1.getMemory(),nm1.getvCores());
  Resource clusterResource=Resources.multiply(nmResource,2);
  Resource q1Resource=Resources.multiply(clusterResource,0.5);
  Resource q2Resource=Resources.multiply(clusterResource,0.5);
  Resource q1UsedResource=Resources.multiply(containerResource,4);
  Resource q2UsedResource=Resources.multiply(containerResource,2);
  Resource totalUsedResource=Resources.add(q1UsedResource,q2UsedResource);
  Resource q1availableResources=Resources.subtract(q1Resource,q1UsedResource);
  Resource q2availableResources=Resources.subtract(q2Resource,q2UsedResource);
  Resource totalAvailableResource=Resources.add(q1availableResources,q2availableResources);
  Map<ApplicationId,SchedulerApplication> schedulerApps=((AbstractYarnScheduler)rm2.getResourceScheduler()).getSchedulerApplications();
  SchedulerApplication schedulerApp1_1=schedulerApps.get(app1_1.getApplicationId());
  checkCSLeafQueue(rm2,schedulerApp1_1,clusterResource,q1Resource,q1UsedResource,4);
  QueueMetrics queue1Metrics=schedulerApp1_1.getQueue().getMetrics();
  asserteMetrics(queue1Metrics,2,0,2,0,4,q1availableResources.getMemory(),q1availableResources.getVirtualCores(),q1UsedResource.getMemory(),q1UsedResource.getVirtualCores());
  SchedulerApplication schedulerApp2=schedulerApps.get(app2.getApplicationId());
  checkCSLeafQueue(rm2,schedulerApp2,clusterResource,q2Resource,q2UsedResource,2);
  QueueMetrics queue2Metrics=schedulerApp2.getQueue().getMetrics();
  asserteMetrics(queue2Metrics,1,0,1,0,2,q2availableResources.getMemory(),q2availableResources.getVirtualCores(),q2UsedResource.getMemory(),q2UsedResource.getVirtualCores());
  LeafQueue leafQueue=(LeafQueue)schedulerApp2.getQueue();
  ParentQueue parentQueue=(ParentQueue)leafQueue.getParent();
  checkParentQueue(parentQueue,6,totalUsedResource,(float)6 / 16,(float)6 / 16);
  asserteMetrics(parentQueue.getMetrics(),3,0,3,0,6,totalAvailableResource.getMemory(),totalAvailableResource.getVirtualCores(),totalUsedResource.getMemory(),totalUsedResource.getVirtualCores());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.monitor.capacity.TestProportionalCapacityPreemptionPolicy </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreemptSkippedAMContainers(){
  int[][] qData=new int[][]{{100,10,90},{100,100,100},{100,100,0},{70,20,90},{0,0,0},{5,4,1},{-1,5,5},{2,0,0}};
  setAMContainer=true;
  ProportionalCapacityPreemptionPolicy policy=buildPolicy(qData);
  policy.editSchedule();
  verify(mDisp,times(5)).handle(argThat(new IsPreemptionRequestFor(appD)));
  verify(mDisp,times(5)).handle(argThat(new IsPreemptionRequestFor(appC)));
  verify(mDisp,times(4)).handle(argThat(new IsPreemptionRequestFor(appB)));
  verify(mDisp,times(4)).handle(argThat(new IsPreemptionRequestFor(appA)));
  setAMContainer=false;
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProportionalPreemption(){
  int[][] qData=new int[][]{{100,10,40,20,30},{100,100,100,100,100},{100,30,60,10,0},{45,20,5,20,0},{0,0,0,0,0},{3,1,1,1,0},{-1,1,1,1,1},{4,0,0,0,0}};
  ProportionalCapacityPreemptionPolicy policy=buildPolicy(qData);
  policy.editSchedule();
  verify(mDisp,times(16)).handle(argThat(new IsPreemptionRequestFor(appA)));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testHierarchical(){
  int[][] qData=new int[][]{{200,100,50,50,100,10,90},{200,200,200,200,200,200,200},{200,110,60,50,90,90,0},{10,0,0,0,10,0,10},{0,0,0,0,0,0,0},{4,2,1,1,2,1,1},{-1,-1,1,1,-1,1,1},{2,2,0,0,2,0,0}};
  ProportionalCapacityPreemptionPolicy policy=buildPolicy(qData);
  policy.editSchedule();
  verify(mDisp,times(10)).handle(argThat(new IsPreemptionRequestFor(appA)));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOverCapacityImbalance(){
  int[][] qData=new int[][]{{100,40,40,20},{100,100,100,100},{100,55,45,0},{20,10,10,0},{0,0,0,0},{2,1,1,0},{-1,1,1,0},{3,0,0,0}};
  ProportionalCapacityPreemptionPolicy policy=buildPolicy(qData);
  policy.editSchedule();
  verify(mDisp,times(5)).handle(argThat(new IsPreemptionRequestFor(appA)));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testIgnore(){
  int[][] qData=new int[][]{{100,40,40,20},{100,100,100,100},{100,0,60,40},{0,0,0,0},{0,0,0,0},{3,1,1,1},{-1,1,1,1},{3,0,0,0}};
  ProportionalCapacityPreemptionPolicy policy=buildPolicy(qData);
  policy.editSchedule();
  verify(mDisp,never()).handle(isA(ContainerPreemptEvent.class));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNaturalTermination(){
  int[][] qData=new int[][]{{100,40,40,20},{100,100,100,100},{100,55,45,0},{20,10,10,0},{0,0,0,0},{2,1,1,0},{-1,1,1,0},{3,0,0,0}};
  conf.setFloat(NATURAL_TERMINATION_FACTOR,(float)0.1);
  ProportionalCapacityPreemptionPolicy policy=buildPolicy(qData);
  policy.editSchedule();
  verify(mDisp,never()).handle(isA(ContainerPreemptEvent.class));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMaxCap(){
  int[][] qData=new int[][]{{100,40,40,20},{100,100,45,100},{100,55,45,0},{20,10,10,0},{0,0,0,0},{2,1,1,0},{-1,1,1,0},{3,0,0,0}};
  ProportionalCapacityPreemptionPolicy policy=buildPolicy(qData);
  policy.editSchedule();
  verify(mDisp,never()).handle(argThat(new IsPreemptionRequestFor(appA)));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testZeroGuar(){
  int[][] qData=new int[][]{{200,100,0,99,100,10,90},{200,200,200,200,200,200,200},{170,80,60,20,90,90,0},{10,0,0,0,10,0,10},{0,0,0,0,0,0,0},{4,2,1,1,2,1,1},{-1,-1,1,1,-1,1,1},{2,2,0,0,2,0,0}};
  ProportionalCapacityPreemptionPolicy policy=buildPolicy(qData);
  policy.editSchedule();
  verify(mDisp,never()).handle(argThat(new IsPreemptionRequestFor(appA)));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testHierarchicalLarge(){
  int[][] qData=new int[][]{{400,200,60,140,100,70,30,100,10,90},{400,400,400,400,400,400,400,400,400,400},{400,210,70,140,100,50,50,90,90,0},{10,0,0,0,0,0,0,0,0,15},{0,0,0,0,0,0,0,0,0,0},{6,2,1,1,2,1,1,2,1,1},{-1,-1,1,1,-1,1,1,-1,1,1},{3,2,0,0,2,0,0,2,0,0}};
  ProportionalCapacityPreemptionPolicy policy=buildPolicy(qData);
  policy.editSchedule();
  verify(mDisp,times(9)).handle(argThat(new IsPreemptionRequestFor(appA)));
  verify(mDisp,times(4)).handle(argThat(new IsPreemptionRequestFor(appE)));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testObserveOnly(){
  int[][] qData=new int[][]{{100,40,40,20},{100,100,100,100},{100,90,10,0},{80,10,20,50},{0,0,0,0},{2,1,1,0},{-1,1,1,0},{3,0,0,0}};
  conf.setBoolean(OBSERVE_ONLY,true);
  ProportionalCapacityPreemptionPolicy policy=buildPolicy(qData);
  policy.editSchedule();
  verify(mDisp,never()).handle(isA(ContainerPreemptEvent.class));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPreemptCycle(){
  int[][] qData=new int[][]{{100,40,40,20},{100,100,100,100},{100,0,60,40},{10,10,0,0},{0,0,0,0},{3,1,1,1},{-1,1,1,1},{3,0,0,0}};
  ProportionalCapacityPreemptionPolicy policy=buildPolicy(qData);
  policy.editSchedule();
  verify(mDisp,times(10)).handle(argThat(new IsPreemptionRequestFor(appC)));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testZeroGuarOverCap(){
  int[][] qData=new int[][]{{200,100,0,99,0,100,100},{200,200,200,200,200,200,200},{170,170,60,20,90,0,0},{85,50,30,10,10,20,20},{0,0,0,0,0,0,0},{4,3,1,1,1,1,1},{-1,-1,1,1,1,-1,1},{2,3,0,0,0,1,0}};
  ProportionalCapacityPreemptionPolicy policy=buildPolicy(qData);
  policy.editSchedule();
  verify(mDisp,times(14)).handle(argThat(new IsPreemptionRequestFor(appC)));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSkipAMContainer(){
  int[][] qData=new int[][]{{100,50,50},{100,100,100},{100,100,0},{70,20,50},{0,0,0},{5,4,1},{-1,1,1},{2,0,0}};
  setAMContainer=true;
  ProportionalCapacityPreemptionPolicy policy=buildPolicy(qData);
  policy.editSchedule();
  verify(mDisp,times(24)).handle(argThat(new IsPreemptionRequestFor(appD)));
  verify(mDisp,times(24)).handle(argThat(new IsPreemptionRequestFor(appC)));
  verify(mDisp,times(2)).handle(argThat(new IsPreemptionRequestFor(appB)));
  setAMContainer=false;
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDeadzone(){
  int[][] qData=new int[][]{{100,40,40,20},{100,100,100,100},{100,39,43,21},{10,10,0,0},{0,0,0,0},{3,1,1,1},{-1,1,1,1},{3,0,0,0}};
  conf.setFloat(MAX_IGNORED_OVER_CAPACITY,(float)0.1);
  ProportionalCapacityPreemptionPolicy policy=buildPolicy(qData);
  policy.editSchedule();
  verify(mDisp,never()).handle(isA(ContainerPreemptEvent.class));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAMResourcePercentForSkippedAMContainers(){
  int[][] qData=new int[][]{{100,10,90},{100,100,100},{100,100,0},{70,20,90},{0,0,0},{5,4,1},{-1,5,5},{2,0,0}};
  setAMContainer=true;
  setAMResourcePercent=0.5f;
  ProportionalCapacityPreemptionPolicy policy=buildPolicy(qData);
  policy.editSchedule();
  verify(mDisp,times(5)).handle(argThat(new IsPreemptionRequestFor(appD)));
  verify(mDisp,times(5)).handle(argThat(new IsPreemptionRequestFor(appC)));
  verify(mDisp,times(4)).handle(argThat(new IsPreemptionRequestFor(appB)));
  verify(mDisp,times(4)).handle(argThat(new IsPreemptionRequestFor(appA)));
  setAMContainer=false;
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testContainerOrdering(){
  List<RMContainer> containers=new ArrayList<RMContainer>();
  ApplicationAttemptId appAttId=ApplicationAttemptId.newInstance(ApplicationId.newInstance(TS,10),0);
  RMContainer rm1=mockContainer(appAttId,5,mock(Resource.class),3);
  RMContainer rm2=mockContainer(appAttId,3,mock(Resource.class),3);
  RMContainer rm3=mockContainer(appAttId,2,mock(Resource.class),2);
  RMContainer rm4=mockContainer(appAttId,1,mock(Resource.class),2);
  RMContainer rm5=mockContainer(appAttId,4,mock(Resource.class),1);
  containers.add(rm3);
  containers.add(rm2);
  containers.add(rm1);
  containers.add(rm5);
  containers.add(rm4);
  ProportionalCapacityPreemptionPolicy.sortContainers(containers);
  assert containers.get(0).equals(rm1);
  assert containers.get(1).equals(rm2);
  assert containers.get(2).equals(rm3);
  assert containers.get(3).equals(rm4);
  assert containers.get(4).equals(rm5);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.recovery.TestZKRMStateStore </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=60000) public void testZKRMStateStoreRealZK() throws Exception {
  TestZKRMStateStoreTester zkTester=new TestZKRMStateStoreTester();
  testRMAppStateStore(zkTester);
  testRMDTSecretManagerStateStore(zkTester);
  testCheckVersion(zkTester);
  testEpoch(zkTester);
  testAppDeletion(zkTester);
  testDeleteStore(zkTester);
  testAMRMTokenSecretManagerStateStore(zkTester);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.recovery.TestZKRMStateStoreZKClientConnections </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testZKAuths() throws Exception {
  TestZKClient zkClientTester=new TestZKClient();
  YarnConfiguration conf=new YarnConfiguration();
  conf.setInt(YarnConfiguration.RM_ZK_NUM_RETRIES,1);
  conf.setInt(YarnConfiguration.RM_ZK_TIMEOUT_MS,ZK_TIMEOUT_MS);
  conf.set(YarnConfiguration.RM_ZK_ACL,TEST_ACL);
  conf.set(YarnConfiguration.RM_ZK_AUTH,TEST_AUTH_GOOD);
  zkClientTester.getRMStateStore(conf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.rmapp.TestRMAppTransitions </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testAppKilledKilled() throws IOException {
  LOG.info("--- START: testAppKilledKilled ---");
  RMApp application=testCreateAppRunning(null);
  RMAppEvent event=new RMAppEvent(application.getApplicationId(),RMAppEventType.KILL);
  application.handle(event);
  rmDispatcher.await();
  sendAttemptUpdateSavedEvent(application);
  sendAppUpdateSavedEvent(application);
  assertTimesAtFinish(application);
  assertAppState(RMAppState.KILLED,application);
  event=new RMAppFinishedAttemptEvent(application.getApplicationId(),"");
  application.handle(event);
  rmDispatcher.await();
  assertTimesAtFinish(application);
  assertAppState(RMAppState.KILLED,application);
  event=new RMAppFailedAttemptEvent(application.getApplicationId(),RMAppEventType.ATTEMPT_FAILED,"",false);
  application.handle(event);
  rmDispatcher.await();
  assertTimesAtFinish(application);
  assertAppState(RMAppState.KILLED,application);
  event=new RMAppEvent(application.getApplicationId(),RMAppEventType.KILL);
  application.handle(event);
  rmDispatcher.await();
  assertTimesAtFinish(application);
  assertAppState(RMAppState.KILLED,application);
  verifyApplicationFinished(RMAppState.KILLED);
  assertTimesAtFinish(application);
  assertAppState(RMAppState.KILLED,application);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testAppRecoverPath() throws IOException {
  LOG.info("--- START: testAppRecoverPath ---");
  testCreateAppSubmittedRecovery(null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppAtFinishingIgnoreKill() throws IOException {
  LOG.info("--- START: testAppAtFinishingIgnoreKill ---");
  RMApp application=testCreateAppFinishing(null);
  RMAppEvent event=new RMAppEvent(application.getApplicationId(),RMAppEventType.KILL);
  application.handle(event);
  rmDispatcher.await();
  assertAppState(RMAppState.FINISHING,application);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testAppNewKill() throws IOException {
  LOG.info("--- START: testAppNewKill ---");
  RMApp application=createNewTestApp(null);
  RMAppEvent event=new RMAppEvent(application.getApplicationId(),RMAppEventType.KILL);
  application.handle(event);
  rmDispatcher.await();
  sendAppUpdateSavedEvent(application);
  assertKilled(application);
  assertAppFinalStateNotSaved(application);
  verifyApplicationFinished(RMAppState.KILLED);
  verifyAppRemovedSchedulerEvent(RMAppState.KILLED);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testAppsRecoveringStates() throws Exception {
  RMState state=new RMState();
  Map<ApplicationId,ApplicationState> applicationState=state.getApplicationState();
  createRMStateForApplications(applicationState,RMAppState.FINISHED);
  createRMStateForApplications(applicationState,RMAppState.KILLED);
  createRMStateForApplications(applicationState,RMAppState.FAILED);
  for (  ApplicationState appState : applicationState.values()) {
    testRecoverApplication(appState,state);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testAppFailedFailed() throws IOException {
  LOG.info("--- START: testAppFailedFailed ---");
  RMApp application=testCreateAppNewSaving(null);
  RMAppEvent event=new RMAppRejectedEvent(application.getApplicationId(),"");
  application.handle(event);
  rmDispatcher.await();
  sendAppUpdateSavedEvent(application);
  assertTimesAtFinish(application);
  assertAppState(RMAppState.FAILED,application);
  event=new RMAppEvent(application.getApplicationId(),RMAppEventType.KILL);
  application.handle(event);
  rmDispatcher.await();
  assertTimesAtFinish(application);
  assertAppState(RMAppState.FAILED,application);
  verifyApplicationFinished(RMAppState.FAILED);
  assertTimesAtFinish(application);
  assertAppState(RMAppState.FAILED,application);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppNewReject() throws IOException {
  LOG.info("--- START: testAppNewReject ---");
  RMApp application=createNewTestApp(null);
  String rejectedText="Test Application Rejected";
  RMAppEvent event=new RMAppRejectedEvent(application.getApplicationId(),rejectedText);
  application.handle(event);
  rmDispatcher.await();
  sendAppUpdateSavedEvent(application);
  assertFailed(application,rejectedText);
  assertAppFinalStateNotSaved(application);
  verifyApplicationFinished(RMAppState.FAILED);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testAppNewSavingReject() throws IOException {
  LOG.info("--- START: testAppNewSavingReject ---");
  RMApp application=testCreateAppNewSaving(null);
  String rejectedText="Test Application Rejected";
  RMAppEvent event=new RMAppRejectedEvent(application.getApplicationId(),rejectedText);
  application.handle(event);
  rmDispatcher.await();
  sendAppUpdateSavedEvent(application);
  assertFailed(application,rejectedText);
  assertAppFinalStateSaved(application);
  verifyApplicationFinished(RMAppState.FAILED);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testAppNewSavingKill() throws IOException {
  LOG.info("--- START: testAppNewSavingKill ---");
  RMApp application=testCreateAppNewSaving(null);
  RMAppEvent event=new RMAppEvent(application.getApplicationId(),RMAppEventType.KILL);
  application.handle(event);
  rmDispatcher.await();
  sendAppUpdateSavedEvent(application);
  assertKilled(application);
  verifyApplicationFinished(RMAppState.KILLED);
  verifyAppRemovedSchedulerEvent(RMAppState.KILLED);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppAcceptedKill() throws IOException, InterruptedException {
  LOG.info("--- START: testAppAcceptedKill ---");
  RMApp application=testCreateAppAccepted(null);
  RMAppEvent event=new RMAppEvent(application.getApplicationId(),RMAppEventType.KILL);
  application.handle(event);
  rmDispatcher.await();
  assertAppState(RMAppState.KILLING,application);
  RMAppEvent appAttemptKilled=new RMAppEvent(application.getApplicationId(),RMAppEventType.ATTEMPT_KILLED);
  application.handle(appAttemptKilled);
  assertAppState(RMAppState.FINAL_SAVING,application);
  sendAppUpdateSavedEvent(application);
  assertKilled(application);
  assertAppFinalStateSaved(application);
  verifyApplicationFinished(RMAppState.KILLED);
  verifyAppRemovedSchedulerEvent(RMAppState.KILLED);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testAppSubmittedRejected() throws IOException {
  LOG.info("--- START: testAppSubmittedRejected ---");
  RMApp application=testCreateAppSubmittedNoRecovery(null);
  String rejectedText="app rejected";
  RMAppEvent event=new RMAppRejectedEvent(application.getApplicationId(),rejectedText);
  application.handle(event);
  rmDispatcher.await();
  sendAppUpdateSavedEvent(application);
  assertFailed(application,rejectedText);
  assertAppFinalStateSaved(application);
  verifyApplicationFinished(RMAppState.FAILED);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppSubmittedKill() throws IOException, InterruptedException {
  LOG.info("--- START: testAppSubmittedKill---");
  RMApp application=testCreateAppSubmittedNoRecovery(null);
  RMAppEvent event=new RMAppEvent(application.getApplicationId(),RMAppEventType.KILL);
  application.handle(event);
  rmDispatcher.await();
  sendAppUpdateSavedEvent(application);
  assertKilled(application);
  assertAppFinalStateSaved(application);
  verifyApplicationFinished(RMAppState.KILLED);
  verifyAppRemovedSchedulerEvent(RMAppState.KILLED);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppRunningKill() throws IOException {
  LOG.info("--- START: testAppRunningKill ---");
  RMApp application=testCreateAppRunning(null);
  RMAppEvent event=new RMAppEvent(application.getApplicationId(),RMAppEventType.KILL);
  application.handle(event);
  rmDispatcher.await();
  assertAppState(RMAppState.KILLING,application);
  RMAppEvent finishEvent=new RMAppFinishedAttemptEvent(application.getApplicationId(),null);
  application.handle(finishEvent);
  assertAppState(RMAppState.KILLING,application);
  sendAttemptUpdateSavedEvent(application);
  sendAppUpdateSavedEvent(application);
  assertKilled(application);
  verifyApplicationFinished(RMAppState.KILLED);
  verifyAppRemovedSchedulerEvent(RMAppState.KILLED);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.rmapp.attempt.TestRMAppAttemptTransitions </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSuccessfulFinishingToFinished(){
  Container amContainer=allocateApplicationAttempt();
  launchApplicationAttempt(amContainer);
  runApplicationAttempt(amContainer,"host",8042,"oldtrackingurl",false);
  FinalApplicationStatus finalStatus=FinalApplicationStatus.SUCCEEDED;
  String trackingUrl="mytrackingurl";
  String diagnostics="Successful";
  unregisterApplicationAttempt(amContainer,finalStatus,trackingUrl,diagnostics);
  applicationAttempt.handle(new RMAppAttemptContainerFinishedEvent(applicationAttempt.getAppAttemptId(),BuilderUtils.newContainerStatus(amContainer.getId(),ContainerState.COMPLETE,"",0)));
  testAppAttemptFinishedState(amContainer,finalStatus,trackingUrl,diagnostics,0,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNullTrackingUrlUnmanagedAM(){
  testUnmanagedAMSuccess(null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTrackingUrlUnmanagedAM(){
  testUnmanagedAMSuccess("oldTrackingUrl");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testManagedAMWithNullTrackingUrl(){
  testTrackingUrlManagedAM(null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testManagedAMWithEmptyTrackingUrl(){
  testTrackingUrlManagedAM("");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUnregisterToKilledFinishing(){
  Container amContainer=allocateApplicationAttempt();
  launchApplicationAttempt(amContainer);
  runApplicationAttempt(amContainer,"host",8042,"oldtrackingurl",false);
  unregisterApplicationAttempt(amContainer,FinalApplicationStatus.KILLED,"newtrackingurl","Killed by user");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFinishingExpire(){
  Container amContainer=allocateApplicationAttempt();
  launchApplicationAttempt(amContainer);
  runApplicationAttempt(amContainer,"host",8042,"oldtrackingurl",false);
  FinalApplicationStatus finalStatus=FinalApplicationStatus.SUCCEEDED;
  String trackingUrl="mytrackingurl";
  String diagnostics="Successful";
  unregisterApplicationAttempt(amContainer,finalStatus,trackingUrl,diagnostics);
  applicationAttempt.handle(new RMAppAttemptEvent(applicationAttempt.getAppAttemptId(),RMAppAttemptEventType.EXPIRE));
  testAppAttemptFinishedState(amContainer,finalStatus,trackingUrl,diagnostics,0,false);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNewToRecovered(){
  applicationAttempt.handle(new RMAppAttemptEvent(applicationAttempt.getAppAttemptId(),RMAppAttemptEventType.RECOVER));
  testAppAttemptRecoveredState();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUnregisterToSuccessfulFinishing(){
  Container amContainer=allocateApplicationAttempt();
  launchApplicationAttempt(amContainer);
  runApplicationAttempt(amContainer,"host",8042,"oldtrackingurl",false);
  unregisterApplicationAttempt(amContainer,FinalApplicationStatus.SUCCEEDED,"mytrackingurl","Successful");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testManagedAMWithTrackingUrl(){
  testTrackingUrlManagedAM("theTrackingUrl");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFinishingToFinishing(){
  Container amContainer=allocateApplicationAttempt();
  launchApplicationAttempt(amContainer);
  runApplicationAttempt(amContainer,"host",8042,"oldtrackingurl",false);
  FinalApplicationStatus finalStatus=FinalApplicationStatus.SUCCEEDED;
  String trackingUrl="mytrackingurl";
  String diagnostics="Successful";
  unregisterApplicationAttempt(amContainer,finalStatus,trackingUrl,diagnostics);
  applicationAttempt.handle(new RMAppAttemptContainerFinishedEvent(applicationAttempt.getAppAttemptId(),BuilderUtils.newContainerStatus(BuilderUtils.newContainerId(applicationAttempt.getAppAttemptId(),42),ContainerState.COMPLETE,"",0)));
  testAppAttemptFinishingState(amContainer,finalStatus,trackingUrl,diagnostics);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEmptyTrackingUrlUnmanagedAM(){
  testUnmanagedAMSuccess("");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFinishingKill(){
  Container amContainer=allocateApplicationAttempt();
  launchApplicationAttempt(amContainer);
  runApplicationAttempt(amContainer,"host",8042,"oldtrackingurl",false);
  FinalApplicationStatus finalStatus=FinalApplicationStatus.FAILED;
  String trackingUrl="newtrackingurl";
  String diagnostics="Job failed";
  unregisterApplicationAttempt(amContainer,finalStatus,trackingUrl,diagnostics);
  applicationAttempt.handle(new RMAppAttemptEvent(applicationAttempt.getAppAttemptId(),RMAppAttemptEventType.KILL));
  testAppAttemptFinishingState(amContainer,finalStatus,trackingUrl,diagnostics);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.scheduler.TestQueueMetrics </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleQueueWithUserMetrics(){
  String queueName="single2";
  String user="dodo";
  QueueMetrics metrics=QueueMetrics.forQueue(ms,queueName,null,true,conf);
  MetricsSource queueSource=queueSource(ms,queueName);
  AppSchedulingInfo app=mockApp(user);
  metrics.submitApp(user);
  MetricsSource userSource=userSource(ms,queueName,user);
  checkApps(queueSource,1,0,0,0,0,0,true);
  checkApps(userSource,1,0,0,0,0,0,true);
  metrics.submitAppAttempt(user);
  checkApps(queueSource,1,1,0,0,0,0,true);
  checkApps(userSource,1,1,0,0,0,0,true);
  metrics.setAvailableResourcesToQueue(Resources.createResource(100 * GB,100));
  metrics.setAvailableResourcesToUser(user,Resources.createResource(10 * GB,10));
  metrics.incrPendingResources(user,5,Resources.createResource(3 * GB,3));
  checkResources(queueSource,0,0,0,0,0,100 * GB,100,15 * GB,15,5,0,0,0);
  checkResources(userSource,0,0,0,0,0,10 * GB,10,15 * GB,15,5,0,0,0);
  metrics.runAppAttempt(app.getApplicationId(),user);
  checkApps(queueSource,1,0,1,0,0,0,true);
  checkApps(userSource,1,0,1,0,0,0,true);
  metrics.allocateResources(user,3,Resources.createResource(2 * GB,2),true);
  checkResources(queueSource,6 * GB,6,3,3,0,100 * GB,100,9 * GB,9,2,0,0,0);
  checkResources(userSource,6 * GB,6,3,3,0,10 * GB,10,9 * GB,9,2,0,0,0);
  metrics.releaseResources(user,1,Resources.createResource(2 * GB,2));
  checkResources(queueSource,4 * GB,4,2,3,1,100 * GB,100,9 * GB,9,2,0,0,0);
  checkResources(userSource,4 * GB,4,2,3,1,10 * GB,10,9 * GB,9,2,0,0,0);
  metrics.finishAppAttempt(app.getApplicationId(),app.isPending(),app.getUser());
  checkApps(queueSource,1,0,0,0,0,0,true);
  checkApps(userSource,1,0,0,0,0,0,true);
  metrics.finishApp(user,RMAppState.FINISHED);
  checkApps(queueSource,1,0,0,1,0,0,true);
  checkApps(userSource,1,0,0,1,0,0,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwoLevelWithUserMetrics(){
  String parentQueueName="root";
  String leafQueueName="root.leaf";
  String user="alice";
  QueueMetrics parentMetrics=QueueMetrics.forQueue(ms,parentQueueName,null,true,conf);
  Queue parentQueue=make(stub(Queue.class).returning(parentMetrics).from.getMetrics());
  QueueMetrics metrics=QueueMetrics.forQueue(ms,leafQueueName,parentQueue,true,conf);
  MetricsSource parentQueueSource=queueSource(ms,parentQueueName);
  MetricsSource queueSource=queueSource(ms,leafQueueName);
  AppSchedulingInfo app=mockApp(user);
  metrics.submitApp(user);
  MetricsSource userSource=userSource(ms,leafQueueName,user);
  MetricsSource parentUserSource=userSource(ms,parentQueueName,user);
  checkApps(queueSource,1,0,0,0,0,0,true);
  checkApps(parentQueueSource,1,0,0,0,0,0,true);
  checkApps(userSource,1,0,0,0,0,0,true);
  checkApps(parentUserSource,1,0,0,0,0,0,true);
  metrics.submitAppAttempt(user);
  checkApps(queueSource,1,1,0,0,0,0,true);
  checkApps(parentQueueSource,1,1,0,0,0,0,true);
  checkApps(userSource,1,1,0,0,0,0,true);
  checkApps(parentUserSource,1,1,0,0,0,0,true);
  parentMetrics.setAvailableResourcesToQueue(Resources.createResource(100 * GB,100));
  metrics.setAvailableResourcesToQueue(Resources.createResource(100 * GB,100));
  parentMetrics.setAvailableResourcesToUser(user,Resources.createResource(10 * GB,10));
  metrics.setAvailableResourcesToUser(user,Resources.createResource(10 * GB,10));
  metrics.incrPendingResources(user,5,Resources.createResource(3 * GB,3));
  checkResources(queueSource,0,0,0,0,0,100 * GB,100,15 * GB,15,5,0,0,0);
  checkResources(parentQueueSource,0,0,0,0,0,100 * GB,100,15 * GB,15,5,0,0,0);
  checkResources(userSource,0,0,0,0,0,10 * GB,10,15 * GB,15,5,0,0,0);
  checkResources(parentUserSource,0,0,0,0,0,10 * GB,10,15 * GB,15,5,0,0,0);
  metrics.runAppAttempt(app.getApplicationId(),user);
  checkApps(queueSource,1,0,1,0,0,0,true);
  checkApps(userSource,1,0,1,0,0,0,true);
  metrics.allocateResources(user,3,Resources.createResource(2 * GB,2),true);
  metrics.reserveResource(user,Resources.createResource(3 * GB,3));
  checkResources(queueSource,6 * GB,6,3,3,0,100 * GB,100,9 * GB,9,2,3 * GB,3,1);
  checkResources(parentQueueSource,6 * GB,6,3,3,0,100 * GB,100,9 * GB,9,2,3 * GB,3,1);
  checkResources(userSource,6 * GB,6,3,3,0,10 * GB,10,9 * GB,9,2,3 * GB,3,1);
  checkResources(parentUserSource,6 * GB,6,3,3,0,10 * GB,10,9 * GB,9,2,3 * GB,3,1);
  metrics.releaseResources(user,1,Resources.createResource(2 * GB,2));
  metrics.unreserveResource(user,Resources.createResource(3 * GB,3));
  checkResources(queueSource,4 * GB,4,2,3,1,100 * GB,100,9 * GB,9,2,0,0,0);
  checkResources(parentQueueSource,4 * GB,4,2,3,1,100 * GB,100,9 * GB,9,2,0,0,0);
  checkResources(userSource,4 * GB,4,2,3,1,10 * GB,10,9 * GB,9,2,0,0,0);
  checkResources(parentUserSource,4 * GB,4,2,3,1,10 * GB,10,9 * GB,9,2,0,0,0);
  metrics.finishAppAttempt(app.getApplicationId(),app.isPending(),app.getUser());
  checkApps(queueSource,1,0,0,0,0,0,true);
  checkApps(parentQueueSource,1,0,0,0,0,0,true);
  checkApps(userSource,1,0,0,0,0,0,true);
  checkApps(parentUserSource,1,0,0,0,0,0,true);
  metrics.finishApp(user,RMAppState.FINISHED);
  checkApps(queueSource,1,0,0,1,0,0,true);
  checkApps(parentQueueSource,1,0,0,1,0,0,true);
  checkApps(userSource,1,0,0,1,0,0,true);
  checkApps(parentUserSource,1,0,0,1,0,0,true);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMetricsInitializedOnRMInit(){
  YarnConfiguration conf=new YarnConfiguration();
  conf.setClass(YarnConfiguration.RM_SCHEDULER,FifoScheduler.class,ResourceScheduler.class);
  MockRM rm=new MockRM(conf);
  QueueMetrics metrics=rm.getResourceScheduler().getRootQueueMetrics();
  checkApps(metrics,0,0,0,0,0,0,true);
  MetricsAsserts.assertGauge("ReservedContainers",0,metrics);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.TestApplicationLimits </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testHeadroom() throws Exception {
  CapacitySchedulerConfiguration csConf=new CapacitySchedulerConfiguration();
  csConf.setUserLimit(CapacitySchedulerConfiguration.ROOT + "." + A,25);
  setupQueueConfiguration(csConf);
  YarnConfiguration conf=new YarnConfiguration();
  CapacitySchedulerContext csContext=mock(CapacitySchedulerContext.class);
  when(csContext.getConfiguration()).thenReturn(csConf);
  when(csContext.getConf()).thenReturn(conf);
  when(csContext.getMinimumResourceCapability()).thenReturn(Resources.createResource(GB));
  when(csContext.getMaximumResourceCapability()).thenReturn(Resources.createResource(16 * GB));
  when(csContext.getApplicationComparator()).thenReturn(CapacityScheduler.applicationComparator);
  when(csContext.getQueueComparator()).thenReturn(CapacityScheduler.queueComparator);
  when(csContext.getResourceCalculator()).thenReturn(resourceCalculator);
  Resource clusterResource=Resources.createResource(100 * 16 * GB);
  when(csContext.getClusterResource()).thenReturn(clusterResource);
  Map<String,CSQueue> queues=new HashMap<String,CSQueue>();
  CapacityScheduler.parseQueue(csContext,csConf,null,"root",queues,queues,TestUtils.spyHook);
  LeafQueue queue=TestLeafQueue.stubLeafQueue((LeafQueue)queues.get(A));
  String host_0="host_0";
  String rack_0="rack_0";
  FiCaSchedulerNode node_0=TestUtils.getMockNode(host_0,rack_0,0,16 * GB);
  final String user_0="user_0";
  final String user_1="user_1";
  RecordFactory recordFactory=RecordFactoryProvider.getRecordFactory(null);
  RMContext rmContext=TestUtils.getMockRMContext();
  Priority priority_1=TestUtils.createMockPriority(1);
  final ApplicationAttemptId appAttemptId_0_0=TestUtils.getMockApplicationAttemptId(0,0);
  FiCaSchedulerApp app_0_0=spy(new FiCaSchedulerApp(appAttemptId_0_0,user_0,queue,queue.getActiveUsersManager(),rmContext));
  queue.submitApplicationAttempt(app_0_0,user_0);
  List<ResourceRequest> app_0_0_requests=new ArrayList<ResourceRequest>();
  app_0_0_requests.add(TestUtils.createResourceRequest(ResourceRequest.ANY,1 * GB,2,true,priority_1,recordFactory));
  app_0_0.updateResourceRequests(app_0_0_requests);
  queue.assignContainers(clusterResource,node_0);
  Resource expectedHeadroom=Resources.createResource(10 * 16 * GB,1);
  verify(app_0_0).setHeadroom(eq(expectedHeadroom));
  final ApplicationAttemptId appAttemptId_0_1=TestUtils.getMockApplicationAttemptId(1,0);
  FiCaSchedulerApp app_0_1=spy(new FiCaSchedulerApp(appAttemptId_0_1,user_0,queue,queue.getActiveUsersManager(),rmContext));
  queue.submitApplicationAttempt(app_0_1,user_0);
  List<ResourceRequest> app_0_1_requests=new ArrayList<ResourceRequest>();
  app_0_1_requests.add(TestUtils.createResourceRequest(ResourceRequest.ANY,1 * GB,2,true,priority_1,recordFactory));
  app_0_1.updateResourceRequests(app_0_1_requests);
  queue.assignContainers(clusterResource,node_0);
  verify(app_0_0,times(2)).setHeadroom(eq(expectedHeadroom));
  verify(app_0_1).setHeadroom(eq(expectedHeadroom));
  final ApplicationAttemptId appAttemptId_1_0=TestUtils.getMockApplicationAttemptId(2,0);
  FiCaSchedulerApp app_1_0=spy(new FiCaSchedulerApp(appAttemptId_1_0,user_1,queue,queue.getActiveUsersManager(),rmContext));
  queue.submitApplicationAttempt(app_1_0,user_1);
  List<ResourceRequest> app_1_0_requests=new ArrayList<ResourceRequest>();
  app_1_0_requests.add(TestUtils.createResourceRequest(ResourceRequest.ANY,1 * GB,2,true,priority_1,recordFactory));
  app_1_0.updateResourceRequests(app_1_0_requests);
  queue.assignContainers(clusterResource,node_0);
  expectedHeadroom=Resources.createResource(10 * 16 * GB / 2,1);
  verify(app_0_0).setHeadroom(eq(expectedHeadroom));
  verify(app_0_1).setHeadroom(eq(expectedHeadroom));
  verify(app_1_0).setHeadroom(eq(expectedHeadroom));
  clusterResource=Resources.createResource(90 * 16 * GB);
  queue.assignContainers(clusterResource,node_0);
  expectedHeadroom=Resources.createResource(9 * 16 * GB / 2,1);
  verify(app_0_0).setHeadroom(eq(expectedHeadroom));
  verify(app_0_1).setHeadroom(eq(expectedHeadroom));
  verify(app_1_0).setHeadroom(eq(expectedHeadroom));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.TestCSQueueUtils </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAbsoluteMaxAvailCapacityInvalidDivisor() throws Exception {
  runInvalidDivisorTest(false);
  runInvalidDivisorTest(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.TestCapacityScheduler </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMoveAppSuccess() throws Exception {
  ResourceScheduler scheduler=resourceManager.getResourceScheduler();
  String host_0="host_0";
  NodeManager nm_0=registerNode(host_0,1234,2345,NetworkTopology.DEFAULT_RACK,Resources.createResource(5 * GB,1));
  String host_1="host_1";
  NodeManager nm_1=registerNode(host_1,1234,2345,NetworkTopology.DEFAULT_RACK,Resources.createResource(5 * GB,1));
  Priority priority_0=org.apache.hadoop.yarn.server.resourcemanager.resource.Priority.create(0);
  Priority priority_1=org.apache.hadoop.yarn.server.resourcemanager.resource.Priority.create(1);
  Application application_0=new Application("user_0","a1",resourceManager);
  application_0.submit();
  application_0.addNodeManager(host_0,1234,nm_0);
  application_0.addNodeManager(host_1,1234,nm_1);
  Resource capability_0_0=Resources.createResource(3 * GB,1);
  application_0.addResourceRequestSpec(priority_1,capability_0_0);
  Resource capability_0_1=Resources.createResource(2 * GB,1);
  application_0.addResourceRequestSpec(priority_0,capability_0_1);
  Task task_0_0=new Task(application_0,priority_1,new String[]{host_0,host_1});
  application_0.addTask(task_0_0);
  Application application_1=new Application("user_1","b2",resourceManager);
  application_1.submit();
  application_1.addNodeManager(host_0,1234,nm_0);
  application_1.addNodeManager(host_1,1234,nm_1);
  Resource capability_1_0=Resources.createResource(1 * GB,1);
  application_1.addResourceRequestSpec(priority_1,capability_1_0);
  Resource capability_1_1=Resources.createResource(2 * GB,1);
  application_1.addResourceRequestSpec(priority_0,capability_1_1);
  Task task_1_0=new Task(application_1,priority_1,new String[]{host_0,host_1});
  application_1.addTask(task_1_0);
  application_0.schedule();
  application_1.schedule();
  scheduler.moveApplication(application_0.getApplicationId(),"b2");
  nodeUpdate(nm_0);
  nodeUpdate(nm_1);
  application_0.schedule();
  checkApplicationResourceUsage(0 * GB,application_0);
  application_1.schedule();
  checkApplicationResourceUsage(1 * GB,application_1);
  checkNodeResourceUsage(1 * GB,nm_0);
  checkNodeResourceUsage(0 * GB,nm_1);
  scheduler.moveApplication(application_0.getApplicationId(),"a2");
  application_0.schedule();
  nodeUpdate(nm_1);
  application_0.schedule();
  checkApplicationResourceUsage(3 * GB,application_0);
  checkNodeResourceUsage(1 * GB,nm_0);
  checkNodeResourceUsage(3 * GB,nm_1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAsyncScheduling() throws Exception {
  Configuration conf=new Configuration();
  conf.setClass(YarnConfiguration.RM_SCHEDULER,CapacityScheduler.class,ResourceScheduler.class);
  MockRM rm=new MockRM(conf);
  rm.start();
  CapacityScheduler cs=(CapacityScheduler)rm.getResourceScheduler();
  final int NODES=100;
  for (int i=0; i < NODES; ++i) {
    String host="192.168.1." + i;
    RMNode node=MockNodes.newNodeInfo(0,MockNodes.newResource(4 * GB),1,host);
    cs.handle(new NodeAddedSchedulerEvent(node));
  }
  for (int i=0; i < NODES; ++i) {
    CapacityScheduler.schedule(cs);
  }
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=120000) public void testPreemptionInfo() throws Exception {
  Configuration conf=new Configuration();
  conf.setInt(YarnConfiguration.RM_AM_MAX_ATTEMPTS,3);
  conf.setClass(YarnConfiguration.RM_SCHEDULER,CapacityScheduler.class,ResourceScheduler.class);
  int CONTAINER_MEMORY=1024;
  MockRM rm1=new MockRM(conf);
  rm1.start();
  CapacityScheduler cs=(CapacityScheduler)rm1.getResourceScheduler();
  MockNM nm1=new MockNM("127.0.0.1:1234",15120,rm1.getResourceTrackerService());
  nm1.registerNode();
  RMApp app0=rm1.submitApp(CONTAINER_MEMORY);
  MockAM am0=launchAM(app0,rm1,nm1);
  FiCaSchedulerApp schedulerAppAttempt=cs.getSchedulerApplications().get(app0.getApplicationId()).getCurrentAppAttempt();
  List<Container> allocatedContainers=am0.allocateAndWaitForContainers(3,CONTAINER_MEMORY,nm1);
  for (  Container c : allocatedContainers) {
    cs.killContainer(schedulerAppAttempt.getRMContainer(c.getId()));
  }
  waitForAppPreemptionInfo(app0,Resource.newInstance(CONTAINER_MEMORY * 3,3),0,3,Resource.newInstance(CONTAINER_MEMORY * 3,3),false,3);
  cs.killContainer(schedulerAppAttempt.getRMContainer(app0.getCurrentAppAttempt().getMasterContainer().getId()));
  waitForNewAttemptCreated(app0,am0.getApplicationAttemptId());
  waitForAppPreemptionInfo(app0,Resource.newInstance(CONTAINER_MEMORY * 4,4),1,3,Resource.newInstance(0,0),false,0);
  MockAM am1=launchAM(app0,rm1,nm1);
  schedulerAppAttempt=cs.getSchedulerApplications().get(app0.getApplicationId()).getCurrentAppAttempt();
  allocatedContainers=am1.allocateAndWaitForContainers(3,CONTAINER_MEMORY,nm1);
  for (  Container c : allocatedContainers) {
    cs.killContainer(schedulerAppAttempt.getRMContainer(c.getId()));
  }
  waitForAppPreemptionInfo(app0,Resource.newInstance(CONTAINER_MEMORY * 7,7),1,6,Resource.newInstance(CONTAINER_MEMORY * 3,3),false,3);
  rm1.stop();
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=YarnException.class) public void testMoveAppViolateQueueState() throws Exception {
  resourceManager=new ResourceManager();
  CapacitySchedulerConfiguration csConf=new CapacitySchedulerConfiguration();
  setupQueueConfiguration(csConf);
  StringBuilder qState=new StringBuilder();
  qState.append(CapacitySchedulerConfiguration.PREFIX).append(B).append(CapacitySchedulerConfiguration.DOT).append(CapacitySchedulerConfiguration.STATE);
  csConf.set(qState.toString(),QueueState.STOPPED.name());
  YarnConfiguration conf=new YarnConfiguration(csConf);
  conf.setClass(YarnConfiguration.RM_SCHEDULER,CapacityScheduler.class,ResourceScheduler.class);
  resourceManager.init(conf);
  resourceManager.getRMContext().getContainerTokenSecretManager().rollMasterKey();
  resourceManager.getRMContext().getNMTokenSecretManager().rollMasterKey();
  ((AsyncDispatcher)resourceManager.getRMContext().getDispatcher()).start();
  mockContext=mock(RMContext.class);
  when(mockContext.getConfigurationProvider()).thenReturn(new LocalConfigurationProvider());
  ResourceScheduler scheduler=resourceManager.getResourceScheduler();
  String host_0="host_0";
  NodeManager nm_0=registerNode(host_0,1234,2345,NetworkTopology.DEFAULT_RACK,Resources.createResource(6 * GB,1));
  Priority priority_0=org.apache.hadoop.yarn.server.resourcemanager.resource.Priority.create(0);
  Priority priority_1=org.apache.hadoop.yarn.server.resourcemanager.resource.Priority.create(1);
  Application application_0=new Application("user_0","a1",resourceManager);
  application_0.submit();
  application_0.addNodeManager(host_0,1234,nm_0);
  Resource capability_0_0=Resources.createResource(3 * GB,1);
  application_0.addResourceRequestSpec(priority_1,capability_0_0);
  Resource capability_0_1=Resources.createResource(2 * GB,1);
  application_0.addResourceRequestSpec(priority_0,capability_0_1);
  Task task_0_0=new Task(application_0,priority_1,new String[]{host_0});
  application_0.addTask(task_0_0);
  application_0.schedule();
  nodeUpdate(nm_0);
  application_0.schedule();
  checkApplicationResourceUsage(3 * GB,application_0);
  checkNodeResourceUsage(3 * GB,nm_0);
  scheduler.moveApplication(application_0.getApplicationId(),"b1");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRefreshQueues() throws Exception {
  CapacityScheduler cs=new CapacityScheduler();
  CapacitySchedulerConfiguration conf=new CapacitySchedulerConfiguration();
  RMContextImpl rmContext=new RMContextImpl(null,null,null,null,null,null,new RMContainerTokenSecretManager(conf),new NMTokenSecretManagerInRM(conf),new ClientToAMTokenSecretManagerInRM(),null);
  setupQueueConfiguration(conf);
  cs.setConf(new YarnConfiguration());
  cs.setRMContext(resourceManager.getRMContext());
  cs.init(conf);
  cs.start();
  cs.reinitialize(conf,rmContext);
  checkQueueCapacities(cs,A_CAPACITY,B_CAPACITY);
  conf.setCapacity(A,80f);
  conf.setCapacity(B,20f);
  cs.reinitialize(conf,mockContext);
  checkQueueCapacities(cs,80f,20f);
  cs.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCapacityScheduler() throws Exception {
  LOG.info("--- START: testCapacityScheduler ---");
  String host_0="host_0";
  org.apache.hadoop.yarn.server.resourcemanager.NodeManager nm_0=registerNode(host_0,1234,2345,NetworkTopology.DEFAULT_RACK,Resources.createResource(4 * GB,1));
  String host_1="host_1";
  org.apache.hadoop.yarn.server.resourcemanager.NodeManager nm_1=registerNode(host_1,1234,2345,NetworkTopology.DEFAULT_RACK,Resources.createResource(2 * GB,1));
  Priority priority_0=org.apache.hadoop.yarn.server.resourcemanager.resource.Priority.create(0);
  Priority priority_1=org.apache.hadoop.yarn.server.resourcemanager.resource.Priority.create(1);
  Application application_0=new Application("user_0","a1",resourceManager);
  application_0.submit();
  application_0.addNodeManager(host_0,1234,nm_0);
  application_0.addNodeManager(host_1,1234,nm_1);
  Resource capability_0_0=Resources.createResource(1 * GB,1);
  application_0.addResourceRequestSpec(priority_1,capability_0_0);
  Resource capability_0_1=Resources.createResource(2 * GB,1);
  application_0.addResourceRequestSpec(priority_0,capability_0_1);
  Task task_0_0=new Task(application_0,priority_1,new String[]{host_0,host_1});
  application_0.addTask(task_0_0);
  Application application_1=new Application("user_1","b2",resourceManager);
  application_1.submit();
  application_1.addNodeManager(host_0,1234,nm_0);
  application_1.addNodeManager(host_1,1234,nm_1);
  Resource capability_1_0=Resources.createResource(3 * GB,1);
  application_1.addResourceRequestSpec(priority_1,capability_1_0);
  Resource capability_1_1=Resources.createResource(2 * GB,1);
  application_1.addResourceRequestSpec(priority_0,capability_1_1);
  Task task_1_0=new Task(application_1,priority_1,new String[]{host_0,host_1});
  application_1.addTask(task_1_0);
  application_0.schedule();
  application_1.schedule();
  LOG.info("Kick!");
  nodeUpdate(nm_0);
  nodeUpdate(nm_1);
  application_0.schedule();
  checkApplicationResourceUsage(1 * GB,application_0);
  application_1.schedule();
  checkApplicationResourceUsage(3 * GB,application_1);
  checkNodeResourceUsage(4 * GB,nm_0);
  checkNodeResourceUsage(0 * GB,nm_1);
  LOG.info("Adding new tasks...");
  Task task_1_1=new Task(application_1,priority_0,new String[]{ResourceRequest.ANY});
  application_1.addTask(task_1_1);
  application_1.schedule();
  Task task_0_1=new Task(application_0,priority_0,new String[]{host_0,host_1});
  application_0.addTask(task_0_1);
  application_0.schedule();
  LOG.info("Sending hb from " + nm_0.getHostName());
  nodeUpdate(nm_0);
  LOG.info("Sending hb from " + nm_1.getHostName());
  nodeUpdate(nm_1);
  LOG.info("Trying to allocate...");
  application_0.schedule();
  checkApplicationResourceUsage(1 * GB,application_0);
  application_1.schedule();
  checkApplicationResourceUsage(5 * GB,application_1);
  nodeUpdate(nm_0);
  nodeUpdate(nm_1);
  checkNodeResourceUsage(4 * GB,nm_0);
  checkNodeResourceUsage(2 * GB,nm_1);
  LOG.info("--- END: testCapacityScheduler ---");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMoveAppForMoveToQueueWithFreeCap() throws Exception {
  ResourceScheduler scheduler=resourceManager.getResourceScheduler();
  String host_0="host_0";
  NodeManager nm_0=registerNode(host_0,1234,2345,NetworkTopology.DEFAULT_RACK,Resources.createResource(4 * GB,1));
  String host_1="host_1";
  NodeManager nm_1=registerNode(host_1,1234,2345,NetworkTopology.DEFAULT_RACK,Resources.createResource(2 * GB,1));
  Priority priority_0=org.apache.hadoop.yarn.server.resourcemanager.resource.Priority.create(0);
  Priority priority_1=org.apache.hadoop.yarn.server.resourcemanager.resource.Priority.create(1);
  Application application_0=new Application("user_0","a1",resourceManager);
  application_0.submit();
  application_0.addNodeManager(host_0,1234,nm_0);
  application_0.addNodeManager(host_1,1234,nm_1);
  Resource capability_0_0=Resources.createResource(1 * GB,1);
  application_0.addResourceRequestSpec(priority_1,capability_0_0);
  Resource capability_0_1=Resources.createResource(2 * GB,1);
  application_0.addResourceRequestSpec(priority_0,capability_0_1);
  Task task_0_0=new Task(application_0,priority_1,new String[]{host_0,host_1});
  application_0.addTask(task_0_0);
  Application application_1=new Application("user_1","b2",resourceManager);
  application_1.submit();
  application_1.addNodeManager(host_0,1234,nm_0);
  application_1.addNodeManager(host_1,1234,nm_1);
  Resource capability_1_0=Resources.createResource(1 * GB,1);
  application_1.addResourceRequestSpec(priority_1,capability_1_0);
  Resource capability_1_1=Resources.createResource(2 * GB,1);
  application_1.addResourceRequestSpec(priority_0,capability_1_1);
  Task task_1_0=new Task(application_1,priority_1,new String[]{host_0,host_1});
  application_1.addTask(task_1_0);
  application_0.schedule();
  application_1.schedule();
  nodeUpdate(nm_0);
  nodeUpdate(nm_1);
  application_0.schedule();
  checkApplicationResourceUsage(1 * GB,application_0);
  application_1.schedule();
  checkApplicationResourceUsage(1 * GB,application_1);
  checkNodeResourceUsage(2 * GB,nm_0);
  checkNodeResourceUsage(0 * GB,nm_1);
  scheduler.moveApplication(application_0.getApplicationId(),"b1");
  Task task_1_1=new Task(application_1,priority_0,new String[]{ResourceRequest.ANY});
  application_1.addTask(task_1_1);
  application_1.schedule();
  Task task_0_1=new Task(application_0,priority_0,new String[]{host_0,host_1});
  application_0.addTask(task_0_1);
  application_0.schedule();
  nodeUpdate(nm_0);
  nodeUpdate(nm_1);
  application_1.schedule();
  checkApplicationResourceUsage(3 * GB,application_1);
  application_0.schedule();
  checkApplicationResourceUsage(3 * GB,application_0);
  checkNodeResourceUsage(4 * GB,nm_0);
  checkNodeResourceUsage(2 * GB,nm_1);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that parseQueue throws an exception when two leaf queues have the
 * same name
 * @throws IOException
 */
@Test(expected=IOException.class) public void testParseQueue() throws IOException {
  CapacityScheduler cs=new CapacityScheduler();
  cs.setConf(new YarnConfiguration());
  CapacitySchedulerConfiguration conf=new CapacitySchedulerConfiguration();
  setupQueueConfiguration(conf);
  conf.setQueues(CapacitySchedulerConfiguration.ROOT + ".a.a1",new String[]{"b1"});
  conf.setCapacity(CapacitySchedulerConfiguration.ROOT + ".a.a1.b1",100.0f);
  conf.setUserLimitFactor(CapacitySchedulerConfiguration.ROOT + ".a.a1.b1",100.0f);
  cs.reinitialize(conf,new RMContextImpl(null,null,null,null,null,null,new RMContainerTokenSecretManager(conf),new NMTokenSecretManagerInRM(conf),new ClientToAMTokenSecretManagerInRM(),null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.TestChildQueueOrder </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSortedQueues() throws Exception {
  setupSortedQueues(csConf);
  Map<String,CSQueue> queues=new HashMap<String,CSQueue>();
  CSQueue root=CapacityScheduler.parseQueue(csContext,csConf,null,CapacitySchedulerConfiguration.ROOT,queues,queues,TestUtils.spyHook);
  final int memoryPerNode=10;
  final int coresPerNode=16;
  final int numNodes=1;
  FiCaSchedulerNode node_0=TestUtils.getMockNode("host_0",DEFAULT_RACK,0,memoryPerNode * GB);
  doNothing().when(node_0).releaseContainer(any(Container.class));
  final Resource clusterResource=Resources.createResource(numNodes * (memoryPerNode * GB),numNodes * coresPerNode);
  when(csContext.getNumClusterNodes()).thenReturn(numNodes);
  CSQueue a=queues.get(A);
  CSQueue b=queues.get(B);
  CSQueue c=queues.get(C);
  CSQueue d=queues.get(D);
  final String user_0="user_0";
  FiCaSchedulerApp app_0=getMockApplication(0,user_0);
  doReturn(true).when(app_0).containerCompleted(any(RMContainer.class),any(ContainerStatus.class),any(RMContainerEventType.class));
  Priority priority=TestUtils.createMockPriority(1);
  ContainerAllocationExpirer expirer=mock(ContainerAllocationExpirer.class);
  DrainDispatcher drainDispatcher=new DrainDispatcher();
  RMApplicationHistoryWriter writer=mock(RMApplicationHistoryWriter.class);
  RMContext rmContext=mock(RMContext.class);
  when(rmContext.getContainerAllocationExpirer()).thenReturn(expirer);
  when(rmContext.getDispatcher()).thenReturn(drainDispatcher);
  when(rmContext.getRMApplicationHistoryWriter()).thenReturn(writer);
  ApplicationAttemptId appAttemptId=BuilderUtils.newApplicationAttemptId(app_0.getApplicationId(),1);
  ContainerId containerId=BuilderUtils.newContainerId(appAttemptId,1);
  Container container=TestUtils.getMockContainer(containerId,node_0.getNodeID(),Resources.createResource(1 * GB),priority);
  RMContainer rmContainer=new RMContainerImpl(container,appAttemptId,node_0.getNodeID(),"user",rmContext);
  stubQueueAllocation(a,clusterResource,node_0,1 * GB);
  stubQueueAllocation(b,clusterResource,node_0,0 * GB);
  stubQueueAllocation(c,clusterResource,node_0,0 * GB);
  stubQueueAllocation(d,clusterResource,node_0,0 * GB);
  root.assignContainers(clusterResource,node_0);
  for (int i=0; i < 2; i++) {
    stubQueueAllocation(a,clusterResource,node_0,0 * GB);
    stubQueueAllocation(b,clusterResource,node_0,1 * GB);
    stubQueueAllocation(c,clusterResource,node_0,0 * GB);
    stubQueueAllocation(d,clusterResource,node_0,0 * GB);
    root.assignContainers(clusterResource,node_0);
  }
  for (int i=0; i < 3; i++) {
    stubQueueAllocation(a,clusterResource,node_0,0 * GB);
    stubQueueAllocation(b,clusterResource,node_0,0 * GB);
    stubQueueAllocation(c,clusterResource,node_0,1 * GB);
    stubQueueAllocation(d,clusterResource,node_0,0 * GB);
    root.assignContainers(clusterResource,node_0);
  }
  for (int i=0; i < 4; i++) {
    stubQueueAllocation(a,clusterResource,node_0,0 * GB);
    stubQueueAllocation(b,clusterResource,node_0,0 * GB);
    stubQueueAllocation(c,clusterResource,node_0,0 * GB);
    stubQueueAllocation(d,clusterResource,node_0,1 * GB);
    root.assignContainers(clusterResource,node_0);
  }
  verifyQueueMetrics(a,1 * GB,clusterResource);
  verifyQueueMetrics(b,2 * GB,clusterResource);
  verifyQueueMetrics(c,3 * GB,clusterResource);
  verifyQueueMetrics(d,4 * GB,clusterResource);
  LOG.info("status child-queues: " + ((ParentQueue)root).getChildQueuesToPrint());
  for (int i=0; i < 3; i++) {
    d.completedContainer(clusterResource,app_0,node_0,rmContainer,null,RMContainerEventType.KILL,null);
  }
  verifyQueueMetrics(a,1 * GB,clusterResource);
  verifyQueueMetrics(b,2 * GB,clusterResource);
  verifyQueueMetrics(c,3 * GB,clusterResource);
  verifyQueueMetrics(d,1 * GB,clusterResource);
  node_0=TestUtils.getMockNode("host_0",DEFAULT_RACK,0,(memoryPerNode - 1 - 2- 3- 1) * GB);
  LOG.info("status child-queues: " + ((ParentQueue)root).getChildQueuesToPrint());
  for (int i=0; i < 2; i++) {
    stubQueueAllocation(a,clusterResource,node_0,1 * GB);
    stubQueueAllocation(b,clusterResource,node_0,0 * GB);
    stubQueueAllocation(c,clusterResource,node_0,0 * GB);
    stubQueueAllocation(d,clusterResource,node_0,0 * GB);
    root.assignContainers(clusterResource,node_0);
  }
  verifyQueueMetrics(a,3 * GB,clusterResource);
  verifyQueueMetrics(b,2 * GB,clusterResource);
  verifyQueueMetrics(c,3 * GB,clusterResource);
  verifyQueueMetrics(d,1 * GB,clusterResource);
  LOG.info("status child-queues: " + ((ParentQueue)root).getChildQueuesToPrint());
  a.completedContainer(clusterResource,app_0,node_0,rmContainer,null,RMContainerEventType.KILL,null);
  verifyQueueMetrics(a,2 * GB,clusterResource);
  verifyQueueMetrics(b,2 * GB,clusterResource);
  verifyQueueMetrics(c,3 * GB,clusterResource);
  verifyQueueMetrics(d,1 * GB,clusterResource);
  node_0=TestUtils.getMockNode("host_0",DEFAULT_RACK,0,(memoryPerNode - 2 - 2- 3- 1) * GB);
  LOG.info("status child-queues: " + ((ParentQueue)root).getChildQueuesToPrint());
  stubQueueAllocation(a,clusterResource,node_0,0 * GB);
  stubQueueAllocation(b,clusterResource,node_0,1 * GB);
  stubQueueAllocation(c,clusterResource,node_0,0 * GB);
  stubQueueAllocation(d,clusterResource,node_0,0 * GB);
  root.assignContainers(clusterResource,node_0);
  verifyQueueMetrics(a,2 * GB,clusterResource);
  verifyQueueMetrics(b,3 * GB,clusterResource);
  verifyQueueMetrics(c,3 * GB,clusterResource);
  verifyQueueMetrics(d,1 * GB,clusterResource);
  LOG.info("status child-queues: " + ((ParentQueue)root).getChildQueuesToPrint());
  b.completedContainer(clusterResource,app_0,node_0,rmContainer,null,RMContainerEventType.KILL,null);
  verifyQueueMetrics(a,2 * GB,clusterResource);
  verifyQueueMetrics(b,2 * GB,clusterResource);
  verifyQueueMetrics(c,3 * GB,clusterResource);
  verifyQueueMetrics(d,1 * GB,clusterResource);
  node_0=TestUtils.getMockNode("host_0",DEFAULT_RACK,0,(memoryPerNode - 2 - 2- 3- 1) * GB);
  LOG.info("status child-queues: " + ((ParentQueue)root).getChildQueuesToPrint());
  stubQueueAllocation(a,clusterResource,node_0,1 * GB);
  stubQueueAllocation(b,clusterResource,node_0,0 * GB);
  stubQueueAllocation(c,clusterResource,node_0,0 * GB);
  stubQueueAllocation(d,clusterResource,node_0,0 * GB);
  root.assignContainers(clusterResource,node_0);
  verifyQueueMetrics(a,3 * GB,clusterResource);
  verifyQueueMetrics(b,2 * GB,clusterResource);
  verifyQueueMetrics(c,3 * GB,clusterResource);
  verifyQueueMetrics(d,1 * GB,clusterResource);
  LOG.info("status child-queues: " + ((ParentQueue)root).getChildQueuesToPrint());
  stubQueueAllocation(a,clusterResource,node_0,0 * GB);
  stubQueueAllocation(b,clusterResource,node_0,1 * GB);
  stubQueueAllocation(c,clusterResource,node_0,0 * GB);
  stubQueueAllocation(d,clusterResource,node_0,1 * GB);
  root.assignContainers(clusterResource,node_0);
  InOrder allocationOrder=inOrder(d,b);
  allocationOrder.verify(d).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  allocationOrder.verify(b).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  verifyQueueMetrics(a,3 * GB,clusterResource);
  verifyQueueMetrics(b,2 * GB,clusterResource);
  verifyQueueMetrics(c,3 * GB,clusterResource);
  verifyQueueMetrics(d,2 * GB,clusterResource);
  LOG.info("status child-queues: " + ((ParentQueue)root).getChildQueuesToPrint());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.TestLeafQueue </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUserQueueAcl() throws Exception {
  LeafQueue d=stubLeafQueue((LeafQueue)queues.get(D));
  final String user_d="user_d";
  final ApplicationAttemptId appAttemptId_0=TestUtils.getMockApplicationAttemptId(0,1);
  FiCaSchedulerApp app_0=new FiCaSchedulerApp(appAttemptId_0,user_d,d,null,rmContext);
  d.submitApplicationAttempt(app_0,user_d);
  final ApplicationAttemptId appAttemptId_1=TestUtils.getMockApplicationAttemptId(0,2);
  FiCaSchedulerApp app_1=new FiCaSchedulerApp(appAttemptId_1,user_d,d,null,rmContext);
  d.submitApplicationAttempt(app_1,user_d);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.TestParentQueue </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOffSwitchSchedulingMultiLevelQueues() throws Exception {
  setupMultiLevelQueues(csConf);
  Map<String,CSQueue> queues=new HashMap<String,CSQueue>();
  CSQueue root=CapacityScheduler.parseQueue(csContext,csConf,null,CapacitySchedulerConfiguration.ROOT,queues,queues,TestUtils.spyHook);
  final int memoryPerNode=10;
  final int coresPerNode=10;
  final int numNodes=2;
  FiCaSchedulerNode node_0=TestUtils.getMockNode("host_0",DEFAULT_RACK,0,memoryPerNode * GB);
  FiCaSchedulerNode node_1=TestUtils.getMockNode("host_1",DEFAULT_RACK,0,memoryPerNode * GB);
  final Resource clusterResource=Resources.createResource(numNodes * (memoryPerNode * GB),numNodes * coresPerNode);
  when(csContext.getNumClusterNodes()).thenReturn(numNodes);
  LeafQueue b3=(LeafQueue)queues.get(B3);
  LeafQueue b2=(LeafQueue)queues.get(B2);
  stubQueueAllocation(b2,clusterResource,node_0,0 * GB,NodeType.OFF_SWITCH);
  stubQueueAllocation(b3,clusterResource,node_0,1 * GB,NodeType.OFF_SWITCH);
  root.assignContainers(clusterResource,node_0);
  verifyQueueMetrics(b2,0 * GB,clusterResource);
  verifyQueueMetrics(b3,1 * GB,clusterResource);
  stubQueueAllocation(b2,clusterResource,node_1,1 * GB,NodeType.RACK_LOCAL);
  stubQueueAllocation(b3,clusterResource,node_1,1 * GB,NodeType.OFF_SWITCH);
  root.assignContainers(clusterResource,node_1);
  InOrder allocationOrder=inOrder(b2,b3);
  allocationOrder.verify(b2).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  allocationOrder.verify(b3).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  verifyQueueMetrics(b2,1 * GB,clusterResource);
  verifyQueueMetrics(b3,2 * GB,clusterResource);
  stubQueueAllocation(b2,clusterResource,node_0,1 * GB,NodeType.NODE_LOCAL);
  stubQueueAllocation(b3,clusterResource,node_0,1 * GB,NodeType.OFF_SWITCH);
  root.assignContainers(clusterResource,node_0);
  allocationOrder=inOrder(b3,b2);
  allocationOrder.verify(b3).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  allocationOrder.verify(b2).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  verifyQueueMetrics(b2,1 * GB,clusterResource);
  verifyQueueMetrics(b3,3 * GB,clusterResource);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleLevelQueues() throws Exception {
  setupSingleLevelQueues(csConf);
  Map<String,CSQueue> queues=new HashMap<String,CSQueue>();
  CSQueue root=CapacityScheduler.parseQueue(csContext,csConf,null,CapacitySchedulerConfiguration.ROOT,queues,queues,TestUtils.spyHook);
  final int memoryPerNode=10;
  final int coresPerNode=16;
  final int numNodes=2;
  FiCaSchedulerNode node_0=TestUtils.getMockNode("host_0",DEFAULT_RACK,0,memoryPerNode * GB);
  FiCaSchedulerNode node_1=TestUtils.getMockNode("host_1",DEFAULT_RACK,0,memoryPerNode * GB);
  final Resource clusterResource=Resources.createResource(numNodes * (memoryPerNode * GB),numNodes * coresPerNode);
  when(csContext.getNumClusterNodes()).thenReturn(numNodes);
  LeafQueue a=(LeafQueue)queues.get(A);
  LeafQueue b=(LeafQueue)queues.get(B);
  stubQueueAllocation(a,clusterResource,node_0,0 * GB);
  stubQueueAllocation(b,clusterResource,node_0,1 * GB);
  root.assignContainers(clusterResource,node_0);
  verifyQueueMetrics(a,0 * GB,clusterResource);
  verifyQueueMetrics(b,1 * GB,clusterResource);
  stubQueueAllocation(a,clusterResource,node_1,2 * GB);
  stubQueueAllocation(b,clusterResource,node_1,1 * GB);
  root.assignContainers(clusterResource,node_1);
  InOrder allocationOrder=inOrder(a,b);
  allocationOrder.verify(a).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  allocationOrder.verify(b).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  verifyQueueMetrics(a,2 * GB,clusterResource);
  verifyQueueMetrics(b,2 * GB,clusterResource);
  stubQueueAllocation(a,clusterResource,node_0,1 * GB);
  stubQueueAllocation(b,clusterResource,node_0,2 * GB);
  root.assignContainers(clusterResource,node_0);
  allocationOrder=inOrder(b,a);
  allocationOrder.verify(b).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  allocationOrder.verify(a).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  verifyQueueMetrics(a,3 * GB,clusterResource);
  verifyQueueMetrics(b,4 * GB,clusterResource);
  stubQueueAllocation(a,clusterResource,node_0,0 * GB);
  stubQueueAllocation(b,clusterResource,node_0,4 * GB);
  root.assignContainers(clusterResource,node_0);
  allocationOrder=inOrder(b,a);
  allocationOrder.verify(b).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  allocationOrder.verify(a).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  verifyQueueMetrics(a,3 * GB,clusterResource);
  verifyQueueMetrics(b,8 * GB,clusterResource);
  stubQueueAllocation(a,clusterResource,node_1,1 * GB);
  stubQueueAllocation(b,clusterResource,node_1,1 * GB);
  root.assignContainers(clusterResource,node_1);
  allocationOrder=inOrder(a,b);
  allocationOrder.verify(b).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  allocationOrder.verify(a).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  verifyQueueMetrics(a,4 * GB,clusterResource);
  verifyQueueMetrics(b,9 * GB,clusterResource);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testQueueCapacitySettingChildZero() throws Exception {
  setupMultiLevelQueues(csConf);
  final String Q_B=CapacitySchedulerConfiguration.ROOT + "." + B;
  csConf.setCapacity(Q_B + "." + B1,0);
  csConf.setCapacity(Q_B + "." + B2,0);
  csConf.setCapacity(Q_B + "." + B3,0);
  Map<String,CSQueue> queues=new HashMap<String,CSQueue>();
  CapacityScheduler.parseQueue(csContext,csConf,null,CapacitySchedulerConfiguration.ROOT,queues,queues,TestUtils.spyHook);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultiLevelQueues() throws Exception {
  setupMultiLevelQueues(csConf);
  Map<String,CSQueue> queues=new HashMap<String,CSQueue>();
  CSQueue root=CapacityScheduler.parseQueue(csContext,csConf,null,CapacitySchedulerConfiguration.ROOT,queues,queues,TestUtils.spyHook);
  final int memoryPerNode=10;
  final int coresPerNode=16;
  final int numNodes=3;
  FiCaSchedulerNode node_0=TestUtils.getMockNode("host_0",DEFAULT_RACK,0,memoryPerNode * GB);
  FiCaSchedulerNode node_1=TestUtils.getMockNode("host_1",DEFAULT_RACK,0,memoryPerNode * GB);
  FiCaSchedulerNode node_2=TestUtils.getMockNode("host_2",DEFAULT_RACK,0,memoryPerNode * GB);
  final Resource clusterResource=Resources.createResource(numNodes * (memoryPerNode * GB),numNodes * coresPerNode);
  when(csContext.getNumClusterNodes()).thenReturn(numNodes);
  CSQueue a=queues.get(A);
  CSQueue b=queues.get(B);
  CSQueue c=queues.get(C);
  CSQueue d=queues.get(D);
  CSQueue a1=queues.get(A1);
  CSQueue a2=queues.get(A2);
  CSQueue b1=queues.get(B1);
  CSQueue b2=queues.get(B2);
  CSQueue b3=queues.get(B3);
  stubQueueAllocation(a,clusterResource,node_0,0 * GB);
  stubQueueAllocation(b,clusterResource,node_0,0 * GB);
  stubQueueAllocation(c,clusterResource,node_0,1 * GB);
  stubQueueAllocation(d,clusterResource,node_0,0 * GB);
  root.assignContainers(clusterResource,node_0);
  verifyQueueMetrics(a,0 * GB,clusterResource);
  verifyQueueMetrics(b,0 * GB,clusterResource);
  verifyQueueMetrics(c,1 * GB,clusterResource);
  verifyQueueMetrics(d,0 * GB,clusterResource);
  reset(a);
  reset(b);
  reset(c);
  stubQueueAllocation(a,clusterResource,node_1,0 * GB);
  stubQueueAllocation(b2,clusterResource,node_1,4 * GB);
  stubQueueAllocation(c,clusterResource,node_1,0 * GB);
  root.assignContainers(clusterResource,node_1);
  verifyQueueMetrics(a,0 * GB,clusterResource);
  verifyQueueMetrics(b,4 * GB,clusterResource);
  verifyQueueMetrics(c,1 * GB,clusterResource);
  reset(a);
  reset(b);
  reset(c);
  stubQueueAllocation(a1,clusterResource,node_0,1 * GB);
  stubQueueAllocation(b3,clusterResource,node_0,2 * GB);
  stubQueueAllocation(c,clusterResource,node_0,2 * GB);
  root.assignContainers(clusterResource,node_0);
  InOrder allocationOrder=inOrder(a,c,b);
  allocationOrder.verify(a).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  allocationOrder.verify(c).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  allocationOrder.verify(b).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  verifyQueueMetrics(a,1 * GB,clusterResource);
  verifyQueueMetrics(b,6 * GB,clusterResource);
  verifyQueueMetrics(c,3 * GB,clusterResource);
  reset(a);
  reset(b);
  reset(c);
  LOG.info("here");
  ((ParentQueue)a).setMaxCapacity(.1f);
  stubQueueAllocation(a1,clusterResource,node_2,1 * GB);
  stubQueueAllocation(a2,clusterResource,node_2,2 * GB);
  stubQueueAllocation(b3,clusterResource,node_2,1 * GB);
  stubQueueAllocation(b1,clusterResource,node_2,1 * GB);
  stubQueueAllocation(c,clusterResource,node_2,1 * GB);
  root.assignContainers(clusterResource,node_2);
  allocationOrder=inOrder(a,a2,a1,b,c);
  allocationOrder.verify(a).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  allocationOrder.verify(a2).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  allocationOrder.verify(b).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  allocationOrder.verify(c).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  verifyQueueMetrics(a,3 * GB,clusterResource);
  verifyQueueMetrics(b,8 * GB,clusterResource);
  verifyQueueMetrics(c,4 * GB,clusterResource);
  reset(a);
  reset(b);
  reset(c);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testQueueCapacitySettingParentZero() throws Exception {
  setupMultiLevelQueues(csConf);
  final String Q_B=CapacitySchedulerConfiguration.ROOT + "." + B;
  csConf.setCapacity(Q_B,0);
  final String Q_A=CapacitySchedulerConfiguration.ROOT + "." + A;
  csConf.setCapacity(Q_A,60);
  Map<String,CSQueue> queues=new HashMap<String,CSQueue>();
  CapacityScheduler.parseQueue(csContext,csConf,null,CapacitySchedulerConfiguration.ROOT,queues,queues,TestUtils.spyHook);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOffSwitchScheduling() throws Exception {
  setupSingleLevelQueues(csConf);
  Map<String,CSQueue> queues=new HashMap<String,CSQueue>();
  CSQueue root=CapacityScheduler.parseQueue(csContext,csConf,null,CapacitySchedulerConfiguration.ROOT,queues,queues,TestUtils.spyHook);
  final int memoryPerNode=10;
  final int coresPerNode=16;
  final int numNodes=2;
  FiCaSchedulerNode node_0=TestUtils.getMockNode("host_0",DEFAULT_RACK,0,memoryPerNode * GB);
  FiCaSchedulerNode node_1=TestUtils.getMockNode("host_1",DEFAULT_RACK,0,memoryPerNode * GB);
  final Resource clusterResource=Resources.createResource(numNodes * (memoryPerNode * GB),numNodes * coresPerNode);
  when(csContext.getNumClusterNodes()).thenReturn(numNodes);
  LeafQueue a=(LeafQueue)queues.get(A);
  LeafQueue b=(LeafQueue)queues.get(B);
  stubQueueAllocation(a,clusterResource,node_0,0 * GB,NodeType.OFF_SWITCH);
  stubQueueAllocation(b,clusterResource,node_0,1 * GB,NodeType.OFF_SWITCH);
  root.assignContainers(clusterResource,node_0);
  verifyQueueMetrics(a,0 * GB,clusterResource);
  verifyQueueMetrics(b,1 * GB,clusterResource);
  stubQueueAllocation(a,clusterResource,node_1,2 * GB,NodeType.RACK_LOCAL);
  stubQueueAllocation(b,clusterResource,node_1,1 * GB,NodeType.OFF_SWITCH);
  root.assignContainers(clusterResource,node_1);
  InOrder allocationOrder=inOrder(a,b);
  allocationOrder.verify(a).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  allocationOrder.verify(b).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  verifyQueueMetrics(a,2 * GB,clusterResource);
  verifyQueueMetrics(b,2 * GB,clusterResource);
  stubQueueAllocation(a,clusterResource,node_0,1 * GB,NodeType.NODE_LOCAL);
  stubQueueAllocation(b,clusterResource,node_0,2 * GB,NodeType.OFF_SWITCH);
  root.assignContainers(clusterResource,node_0);
  allocationOrder=inOrder(b,a);
  allocationOrder.verify(b).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  allocationOrder.verify(a).assignContainers(eq(clusterResource),any(FiCaSchedulerNode.class));
  verifyQueueMetrics(a,2 * GB,clusterResource);
  verifyQueueMetrics(b,4 * GB,clusterResource);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.TestQueueParsing </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=java.lang.IllegalArgumentException.class) public void testRootQueueParsing() throws Exception {
  CapacitySchedulerConfiguration conf=new CapacitySchedulerConfiguration();
  conf.setCapacity(CapacitySchedulerConfiguration.ROOT,90);
  CapacityScheduler capacityScheduler=new CapacityScheduler();
  capacityScheduler.setConf(new YarnConfiguration());
  capacityScheduler.init(conf);
  capacityScheduler.start();
  capacityScheduler.reinitialize(conf,null);
  capacityScheduler.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.TestAllocationFileLoaderService </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Verify that you can't place queues at the same level as the root queue in
 * the allocations file.
 */
@Test(expected=AllocationConfigurationException.class) public void testQueueAlongsideRoot() throws Exception {
  Configuration conf=new Configuration();
  conf.set(FairSchedulerConfiguration.ALLOCATION_FILE,ALLOC_FILE);
  PrintWriter out=new PrintWriter(new FileWriter(ALLOC_FILE));
  out.println("<?xml version=\"1.0\"?>");
  out.println("<allocations>");
  out.println("<queue name=\"root\">");
  out.println("</queue>");
  out.println("<queue name=\"other\">");
  out.println("</queue>");
  out.println("</allocations>");
  out.close();
  AllocationFileLoaderService allocLoader=new AllocationFileLoaderService();
  allocLoader.init(conf);
  ReloadListener confHolder=new ReloadListener();
  allocLoader.setReloadListener(confHolder);
  allocLoader.reloadAllocations();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.TestComputeFairShares </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that CPU works as well as memory
 */
@Test public void testCPU(){
  scheds.add(new FakeSchedulable(Resources.createResource(0,20),new ResourceWeights(2.0f)));
  scheds.add(new FakeSchedulable(Resources.createResource(0,0),new ResourceWeights(1.0f)));
  scheds.add(new FakeSchedulable(Resources.createResource(0,5),new ResourceWeights(1.0f)));
  scheds.add(new FakeSchedulable(Resources.createResource(0,15),new ResourceWeights(0.5f)));
  ComputeFairShares.computeShares(scheds,Resources.createResource(0,45),ResourceType.CPU);
  verifyCPUShares(20,5,5,15);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Weighted sharing test where pools 1 and 2 are now given lower demands than
 * above. Pool 1 stops at 10 slots, leaving 35. If the remaining pools split
 * this into a 1:1:0.5 ratio, they would get 14:14:7 slots respectively, but
 * pool 2's demand is only 11, so it only gets 11. The remaining 2 pools split
 * the 24 slots left into a 1:0.5 ratio, getting 16 and 8 slots respectively.
 */
@Test public void testWeightedSharingWithMaxShares(){
  scheds.add(new FakeSchedulable(0,10,2.0));
  scheds.add(new FakeSchedulable(0,11,1.0));
  scheds.add(new FakeSchedulable(0,30,1.0));
  scheds.add(new FakeSchedulable(0,20,0.5));
  ComputeFairShares.computeShares(scheds,Resources.createResource(45),ResourceType.MEMORY);
  verifyMemoryShares(10,11,16,8);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * In this test, pool 4 has a smaller demand than the 40 / 4 = 10 slots that
 * it would be assigned with equal sharing. It should only get the 3 slots
 * it demands. The other pools must then split the remaining 37 slots, but
 * pool 3, with 11 slots demanded, is now below its share of 37/3 ~= 12.3,
 * so it only gets 11 slots. Pools 1 and 2 split the rest and get 13 each. 
 */
@Test public void testLowMaxShares(){
  scheds.add(new FakeSchedulable(0,100));
  scheds.add(new FakeSchedulable(0,50));
  scheds.add(new FakeSchedulable(0,11));
  scheds.add(new FakeSchedulable(0,3));
  ComputeFairShares.computeShares(scheds,Resources.createResource(40),ResourceType.MEMORY);
  verifyMemoryShares(13,13,11,3);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that being called on an empty list doesn't confuse the algorithm.
 */
@Test public void testEmptyList(){
  ComputeFairShares.computeShares(scheds,Resources.createResource(40),ResourceType.MEMORY);
  verifyMemoryShares();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Weighted fair sharing test with min shares. As in the min share test above,
 * pool 1 has a min share greater than its demand so it only gets its demand.
 * Pool 3 has a min share of 15 even though its weight is very small, so it
 * gets 15 slots. The remaining pools share the remaining 20 slots equally,
 * getting 10 each. Pool 3's min share of 5 slots doesn't affect this.
 */
@Test public void testWeightedSharingWithMinShares(){
  scheds.add(new FakeSchedulable(20,2.0));
  scheds.add(new FakeSchedulable(0,1.0));
  scheds.add(new FakeSchedulable(5,1.0));
  scheds.add(new FakeSchedulable(15,0.5));
  ComputeFairShares.computeShares(scheds,Resources.createResource(45),ResourceType.MEMORY);
  verifyMemoryShares(20,5,5,15);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test that shares are computed accurately even when the number of slots is
 * very large.
 */
@Test public void testLargeShares(){
  int million=1000 * 1000;
  scheds.add(new FakeSchedulable());
  scheds.add(new FakeSchedulable());
  scheds.add(new FakeSchedulable());
  scheds.add(new FakeSchedulable());
  ComputeFairShares.computeShares(scheds,Resources.createResource(40 * million),ResourceType.MEMORY);
  verifyMemoryShares(10 * million,10 * million,10 * million,10 * million);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Basic test for weighted shares with no minimum shares and no low demands.
 * Each pool should get slots in proportion to its weight.
 */
@Test public void testWeightedSharing(){
  scheds.add(new FakeSchedulable(0,2.0));
  scheds.add(new FakeSchedulable(0,1.0));
  scheds.add(new FakeSchedulable(0,1.0));
  scheds.add(new FakeSchedulable(0,0.5));
  ComputeFairShares.computeShares(scheds,Resources.createResource(45),ResourceType.MEMORY);
  verifyMemoryShares(20,10,10,5);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * In this test, some pools have minimum shares set. Pool 1 has a min share
 * of 20 so it gets 20 slots. Pool 2 also has a min share of 20, but its
 * demand is only 10 so it can only get 10 slots. The remaining pools have
 * 10 slots to split between them. Pool 4 gets 3 slots because its demand is
 * only 3, and pool 3 gets the remaining 7 slots. Pool 4 also had a min share
 * of 2 slots but this should not affect the outcome.
 */
@Test public void testMinShares(){
  scheds.add(new FakeSchedulable(20));
  scheds.add(new FakeSchedulable(18));
  scheds.add(new FakeSchedulable(0));
  scheds.add(new FakeSchedulable(2));
  ComputeFairShares.computeShares(scheds,Resources.createResource(40),ResourceType.MEMORY);
  verifyMemoryShares(20,18,0,2);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Basic test - pools with different demands that are all higher than their
 * fair share (of 10 slots) should each get their fair share.
 */
@Test public void testEqualSharing(){
  scheds.add(new FakeSchedulable());
  scheds.add(new FakeSchedulable());
  scheds.add(new FakeSchedulable());
  scheds.add(new FakeSchedulable());
  ComputeFairShares.computeShares(scheds,Resources.createResource(40),ResourceType.MEMORY);
  verifyMemoryShares(10,10,10,10);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.TestFairScheduler </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=YarnException.class) public void testMoveToNonexistentQueue() throws Exception {
  scheduler.init(conf);
  scheduler.start();
  scheduler.reinitialize(conf,resourceManager.getRMContext());
  scheduler.getQueueManager().getLeafQueue("queue1",true);
  ApplicationAttemptId appAttId=createSchedulingRequest(1024,1,"queue1","user1",3);
  scheduler.moveApplication(appAttId.getApplicationId(),"queue2");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUserAndQueueMaxRunningApps() throws Exception {
  conf.set(FairSchedulerConfiguration.ALLOCATION_FILE,ALLOC_FILE);
  PrintWriter out=new PrintWriter(new FileWriter(ALLOC_FILE));
  out.println("<?xml version=\"1.0\"?>");
  out.println("<allocations>");
  out.println("<queue name=\"queue1\">");
  out.println("<maxRunningApps>2</maxRunningApps>");
  out.println("</queue>");
  out.println("<user name=\"user1\">");
  out.println("<maxRunningApps>1</maxRunningApps>");
  out.println("</user>");
  out.println("</allocations>");
  out.close();
  scheduler.init(conf);
  scheduler.start();
  scheduler.reinitialize(conf,resourceManager.getRMContext());
  ApplicationAttemptId attId1=createSchedulingRequest(1024,"queue1","user1");
  verifyAppRunnable(attId1,true);
  verifyQueueNumRunnable("queue1",1,0);
  ApplicationAttemptId attId2=createSchedulingRequest(1024,"queue2","user1");
  verifyAppRunnable(attId2,false);
  verifyQueueNumRunnable("queue2",0,1);
  ApplicationAttemptId attId3=createSchedulingRequest(1024,"queue1","user2");
  verifyAppRunnable(attId3,true);
  verifyQueueNumRunnable("queue1",2,0);
  ApplicationAttemptId attId4=createSchedulingRequest(1024,"queue1","user2");
  verifyAppRunnable(attId4,false);
  verifyQueueNumRunnable("queue1",2,1);
  AppAttemptRemovedSchedulerEvent appRemovedEvent1=new AppAttemptRemovedSchedulerEvent(attId1,RMAppAttemptState.FINISHED,false);
  scheduler.handle(appRemovedEvent1);
  verifyAppRunnable(attId2,true);
  verifyQueueNumRunnable("queue2",1,0);
  verifyAppRunnable(attId4,true);
  verifyQueueNumRunnable("queue1",2,0);
  ApplicationAttemptId attId5=createSchedulingRequest(1024,"queue1","user2");
  verifyAppRunnable(attId5,false);
  verifyQueueNumRunnable("queue1",2,1);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAddAndRemoveAppFromFairScheduler() throws Exception {
  AbstractYarnScheduler<SchedulerApplicationAttempt,SchedulerNode> scheduler=(AbstractYarnScheduler<SchedulerApplicationAttempt,SchedulerNode>)resourceManager.getResourceScheduler();
  TestSchedulerUtils.verifyAppAddedAndRemovedFromScheduler(scheduler.getSchedulerApplications(),scheduler,"default");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=YarnException.class) public void testMoveWouldViolateMaxAppsConstraints() throws Exception {
  scheduler.init(conf);
  scheduler.start();
  scheduler.reinitialize(conf,resourceManager.getRMContext());
  QueueManager queueMgr=scheduler.getQueueManager();
  queueMgr.getLeafQueue("queue2",true);
  scheduler.getAllocationConfiguration().queueMaxApps.put("root.queue2",0);
  ApplicationAttemptId appAttId=createSchedulingRequest(1024,1,"queue1","user1",3);
  scheduler.moveApplication(appAttId.getApplicationId(),"queue2");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.TestFairSchedulerConfiguration </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AllocationConfigurationException.class) public void testOnlyCPU() throws Exception {
  parseResourceConfigValue("1024vcores");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AllocationConfigurationException.class) public void testNoUnits() throws Exception {
  parseResourceConfigValue("1024");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AllocationConfigurationException.class) public void testGibberish() throws Exception {
  parseResourceConfigValue("1o24vc0res");
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AllocationConfigurationException.class) public void testOnlyMemory() throws Exception {
  parseResourceConfigValue("1024mb");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.TestQueuePlacementPolicy </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTerminals() throws Exception {
  StringBuffer sb=new StringBuffer();
  sb.append("<queuePlacementPolicy>");
  sb.append("  <rule name='secondaryGroupExistingQueue' create='true'/>");
  sb.append("  <rule name='default' create='false'/>");
  sb.append("</queuePlacementPolicy>");
  parse(sb.toString());
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AllocationConfigurationException.class) public void testOmittedTerminalRule() throws Exception {
  StringBuffer sb=new StringBuffer();
  sb.append("<queuePlacementPolicy>");
  sb.append("  <rule name='specified' />");
  sb.append("  <rule name='user' create=\"false\" />");
  sb.append("</queuePlacementPolicy>");
  parse(sb.toString());
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AllocationConfigurationException.class) public void testTerminalRuleInMiddle() throws Exception {
  StringBuffer sb=new StringBuffer();
  sb.append("<queuePlacementPolicy>");
  sb.append("  <rule name='specified' />");
  sb.append("  <rule name='default' />");
  sb.append("  <rule name='user' />");
  sb.append("</queuePlacementPolicy>");
  parse(sb.toString());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNestedUserQueueParsingErrors(){
  StringBuffer sb=new StringBuffer();
  sb.append("<queuePlacementPolicy>");
  sb.append("  <rule name='specified' />");
  sb.append("  <rule name='nestedUserQueue'/>");
  sb.append("  <rule name='default' />");
  sb.append("</queuePlacementPolicy>");
  assertIfExceptionThrown(sb);
  sb=new StringBuffer();
  sb.append("<queuePlacementPolicy>");
  sb.append("  <rule name='specified' />");
  sb.append("  <rule name='nestedUserQueue'>");
  sb.append("       <rule name='unknownRule'/>");
  sb.append("  </rule>");
  sb.append("  <rule name='default' />");
  sb.append("</queuePlacementPolicy>");
  assertIfExceptionThrown(sb);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.policies.TestEmptyQueues </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=1000) public void testDRFPolicy(){
  testComputeShares(SchedulingPolicy.getInstance(DominantResourceFairnessPolicy.class));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=1000) public void testFairSharePolicy(){
  testComputeShares(SchedulingPolicy.getInstance(FairSharePolicy.class));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=1000) public void testFifoPolicy(){
  testComputeShares(SchedulingPolicy.getInstance(FifoPolicy.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.scheduler.fifo.TestFifoScheduler </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAddAndRemoveAppFromFiFoScheduler() throws Exception {
  Configuration conf=new Configuration();
  conf.setClass(YarnConfiguration.RM_SCHEDULER,FifoScheduler.class,ResourceScheduler.class);
  MockRM rm=new MockRM(conf);
  @SuppressWarnings("unchecked") AbstractYarnScheduler<SchedulerApplicationAttempt,SchedulerNode> fs=(AbstractYarnScheduler<SchedulerApplicationAttempt,SchedulerNode>)rm.getResourceScheduler();
  TestSchedulerUtils.verifyAppAddedAndRemovedFromScheduler(fs.getSchedulerApplications(),fs,"queue");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.security.TestDelegationTokenRenewer </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void testConcurrentAddApplication() throws IOException, InterruptedException, BrokenBarrierException {
  final CyclicBarrier startBarrier=new CyclicBarrier(2);
  final CyclicBarrier endBarrier=new CyclicBarrier(2);
  final Credentials creds1=new Credentials();
  final Token<?> token1=mock(Token.class);
  creds1.addToken(new Text("token"),token1);
  doReturn(true).when(token1).isManaged();
  doAnswer(new Answer<Long>(){
    public Long answer(    InvocationOnMock invocation) throws InterruptedException, BrokenBarrierException {
      startBarrier.await();
      endBarrier.await();
      return Long.MAX_VALUE;
    }
  }
).when(token1).renew(any(Configuration.class));
  final Credentials creds2=new Credentials();
  final Token<?> token2=mock(Token.class);
  creds2.addToken(new Text("token"),token2);
  doReturn(true).when(token2).isManaged();
  doReturn(Long.MAX_VALUE).when(token2).renew(any(Configuration.class));
  final DelegationTokenRenewer dtr=createNewDelegationTokenRenewer(conf,counter);
  RMContext mockContext=mock(RMContext.class);
  ClientRMService mockClientRMService=mock(ClientRMService.class);
  when(mockContext.getClientRMService()).thenReturn(mockClientRMService);
  InetSocketAddress sockAddr=InetSocketAddress.createUnresolved("localhost",1234);
  when(mockClientRMService.getBindAddress()).thenReturn(sockAddr);
  dtr.setRMContext(mockContext);
  when(mockContext.getDelegationTokenRenewer()).thenReturn(dtr);
  dtr.init(conf);
  dtr.start();
  Thread submitThread=new Thread(){
    @Override public void run(){
      dtr.addApplicationAsync(mock(ApplicationId.class),creds1,false);
    }
  }
;
  submitThread.start();
  startBarrier.await();
  dtr.addApplicationAsync(mock(ApplicationId.class),creds2,false);
  endBarrier.await();
  submitThread.join();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.security.TestDelegationTokenRenewerLifecycle </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testStartupFailure() throws Exception {
  Configuration conf=new Configuration();
  DelegationTokenRenewer delegationTokenRenewer=new DelegationTokenRenewer();
  RMContext mockContext=mock(RMContext.class);
  ClientRMService mockClientRMService=mock(ClientRMService.class);
  when(mockContext.getClientRMService()).thenReturn(mockClientRMService);
  delegationTokenRenewer.setRMContext(mockContext);
  delegationTokenRenewer.init(conf);
  delegationTokenRenewer.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.webapp.TestNodesPage </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodesBlockRenderForLostNodes(){
  NodesBlock nodesBlock=injector.getInstance(NodesBlock.class);
  nodesBlock.set("node.state","lost");
  nodesBlock.render();
  PrintWriter writer=injector.getInstance(PrintWriter.class);
  WebAppTests.flushOutput(injector);
  Mockito.verify(writer,Mockito.times(numberOfActualTableHeaders + numberOfThInMetricsTable)).print("<th");
  Mockito.verify(writer,Mockito.times(numberOfRacks * numberOfLostNodesPerRack * numberOfActualTableHeaders + numberOfThInMetricsTable)).print("<td");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodesBlockRender() throws Exception {
  injector.getInstance(NodesBlock.class).render();
  PrintWriter writer=injector.getInstance(PrintWriter.class);
  WebAppTests.flushOutput(injector);
  Mockito.verify(writer,Mockito.times(numberOfActualTableHeaders + numberOfThInMetricsTable)).print("<th");
  Mockito.verify(writer,Mockito.times(numberOfRacks * numberOfNodesPerRack * numberOfActualTableHeaders + numberOfThInMetricsTable)).print("<td");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebApp </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodesPage(){
  final RMContext rmContext=mockRMContext(3,2,12,8 * GiB);
  Injector injector=WebAppTests.createMockInjector(RMContext.class,rmContext,new Module(){
    @Override public void configure(    Binder binder){
      try {
        binder.bind(ResourceManager.class).toInstance(mockRm(rmContext));
      }
 catch (      IOException e) {
        throw new IllegalStateException(e);
      }
    }
  }
);
  NodesPage instance=injector.getInstance(NodesPage.class);
  instance.render();
  WebAppTests.flushOutput(injector);
  instance.moreParams().put(YarnWebParams.NODE_STATE,NodeState.UNHEALTHY.toString());
  instance.render();
  WebAppTests.flushOutput(injector);
  instance.moreParams().put(YarnWebParams.NODE_STATE,NodeState.LOST.toString());
  instance.render();
  WebAppTests.flushOutput(injector);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testView(){
  Injector injector=WebAppTests.createMockInjector(RMContext.class,mockRMContext(15,1,2,8 * GiB),new Module(){
    @Override public void configure(    Binder binder){
      try {
        binder.bind(ResourceManager.class).toInstance(mockRm(3,1,2,8 * GiB));
      }
 catch (      IOException e) {
        throw new IllegalStateException(e);
      }
    }
  }
);
  RmView rmViewInstance=injector.getInstance(RmView.class);
  rmViewInstance.set(YarnWebParams.APP_STATE,YarnApplicationState.RUNNING.toString());
  rmViewInstance.render();
  WebAppTests.flushOutput(injector);
  rmViewInstance.set(YarnWebParams.APP_STATE,StringHelper.cjoin(YarnApplicationState.ACCEPTED.toString(),YarnApplicationState.RUNNING.toString()));
  rmViewInstance.render();
  WebAppTests.flushOutput(injector);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebAppFairScheduler </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFairSchedulerWebAppPage(){
  List<RMAppState> appStates=Arrays.asList(RMAppState.NEW,RMAppState.NEW_SAVING,RMAppState.SUBMITTED);
  final RMContext rmContext=mockRMContext(appStates);
  Injector injector=WebAppTests.createMockInjector(RMContext.class,rmContext,new Module(){
    @Override public void configure(    Binder binder){
      try {
        ResourceManager mockRmWithFairScheduler=mockRm(rmContext);
        binder.bind(ResourceManager.class).toInstance(mockRmWithFairScheduler);
      }
 catch (      IOException e) {
        throw new IllegalStateException(e);
      }
    }
  }
);
  FairSchedulerPage fsViewInstance=injector.getInstance(FairSchedulerPage.class);
  fsViewInstance.render();
  WebAppTests.flushOutput(injector);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesApps </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testApps() throws JSONException, Exception {
  rm.start();
  MockNM amNodeManager=rm.registerNode("127.0.0.1:1234",2048);
  RMApp app1=rm.submitApp(CONTAINER_MB);
  amNodeManager.nodeHeartbeat(true);
  testAppsHelper("apps",app1,MediaType.APPLICATION_JSON);
  rm.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppsSlash() throws JSONException, Exception {
  rm.start();
  MockNM amNodeManager=rm.registerNode("127.0.0.1:1234",2048);
  RMApp app1=rm.submitApp(CONTAINER_MB);
  amNodeManager.nodeHeartbeat(true);
  testAppsHelper("apps/",app1,MediaType.APPLICATION_JSON);
  rm.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleAppsDefault() throws JSONException, Exception {
  rm.start();
  MockNM amNodeManager=rm.registerNode("127.0.0.1:1234",2048);
  RMApp app1=rm.submitApp(CONTAINER_MB);
  amNodeManager.nodeHeartbeat(true);
  testSingleAppsHelper(app1.getApplicationId().toString() + "/",app1,"");
  rm.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppAttempts() throws JSONException, Exception {
  rm.start();
  MockNM amNodeManager=rm.registerNode("127.0.0.1:1234",2048);
  RMApp app1=rm.submitApp(CONTAINER_MB,"testwordcount","user1");
  amNodeManager.nodeHeartbeat(true);
  testAppAttemptsHelper(app1.getApplicationId().toString(),app1,MediaType.APPLICATION_JSON);
  rm.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleApp() throws JSONException, Exception {
  rm.start();
  MockNM amNodeManager=rm.registerNode("127.0.0.1:1234",2048);
  RMApp app1=rm.submitApp(CONTAINER_MB,"testwordcount","user1");
  amNodeManager.nodeHeartbeat(true);
  testSingleAppsHelper(app1.getApplicationId().toString(),app1,MediaType.APPLICATION_JSON);
  rm.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleAppsSlash() throws JSONException, Exception {
  rm.start();
  MockNM amNodeManager=rm.registerNode("127.0.0.1:1234",2048);
  RMApp app1=rm.submitApp(CONTAINER_MB);
  amNodeManager.nodeHeartbeat(true);
  testSingleAppsHelper(app1.getApplicationId().toString() + "/",app1,MediaType.APPLICATION_JSON);
  rm.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppsDefault() throws JSONException, Exception {
  rm.start();
  MockNM amNodeManager=rm.registerNode("127.0.0.1:1234",2048);
  RMApp app1=rm.submitApp(CONTAINER_MB);
  amNodeManager.nodeHeartbeat(true);
  testAppsHelper("apps/",app1,"");
  rm.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppAttemptsSlash() throws JSONException, Exception {
  rm.start();
  MockNM amNodeManager=rm.registerNode("127.0.0.1:1234",2048);
  RMApp app1=rm.submitApp(CONTAINER_MB);
  amNodeManager.nodeHeartbeat(true);
  testAppAttemptsHelper(app1.getApplicationId().toString() + "/",app1,MediaType.APPLICATION_JSON);
  rm.stop();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testAppAttemtpsDefault() throws JSONException, Exception {
  rm.start();
  MockNM amNodeManager=rm.registerNode("127.0.0.1:1234",2048);
  RMApp app1=rm.submitApp(CONTAINER_MB);
  amNodeManager.nodeHeartbeat(true);
  testAppAttemptsHelper(app1.getApplicationId().toString() + "/",app1,"");
  rm.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesAppsModification </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetNewApplication() throws Exception {
  rm.start();
  String mediaTypes[]={MediaType.APPLICATION_JSON,MediaType.APPLICATION_XML};
  for (  String acceptMedia : mediaTypes) {
    testGetNewApplication(acceptMedia);
  }
  rm.stop();
  return;
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetNewApplicationAndSubmit() throws Exception {
  rm.start();
  MockNM amNodeManager=rm.registerNode("127.0.0.1:1234",2048);
  amNodeManager.nodeHeartbeat(true);
  String mediaTypes[]={MediaType.APPLICATION_JSON,MediaType.APPLICATION_XML};
  for (  String acceptMedia : mediaTypes) {
    for (    String contentMedia : mediaTypes) {
      testAppSubmit(acceptMedia,contentMedia);
      testAppSubmitErrors(acceptMedia,contentMedia);
    }
  }
  rm.stop();
  return;
}

</code></pre>

<br>
<pre class="type-15 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Sets implicit assumptions 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=30000) public void testSingleAppKillUnauthorized() throws Exception {
  boolean isCapacityScheduler=rm.getResourceScheduler() instanceof CapacityScheduler;
  assumeTrue("Currently this test is only supported on CapacityScheduler",isCapacityScheduler);
  CapacitySchedulerConfiguration csconf=new CapacitySchedulerConfiguration();
  csconf.setAcl("root",QueueACL.ADMINISTER_QUEUE,"someuser");
  csconf.setAcl("root.default",QueueACL.ADMINISTER_QUEUE,"someuser");
  rm.getResourceScheduler().reinitialize(csconf,rm.getRMContext());
  rm.start();
  MockNM amNodeManager=rm.registerNode("127.0.0.1:1234",2048);
  String[] mediaTypes={MediaType.APPLICATION_JSON,MediaType.APPLICATION_XML};
  for (  String mediaType : mediaTypes) {
    RMApp app=rm.submitApp(CONTAINER_MB,"test","someuser");
    amNodeManager.nodeHeartbeat(true);
    ClientResponse response=this.constructWebResource("apps",app.getApplicationId().toString(),"state").accept(mediaType).get(ClientResponse.class);
    AppState info=response.getEntity(AppState.class);
    info.setState(YarnApplicationState.KILLED.toString());
    response=this.constructWebResource("apps",app.getApplicationId().toString(),"state").accept(mediaType).entity(info,MediaType.APPLICATION_XML).put(ClientResponse.class);
    validateResponseStatus(response,Status.FORBIDDEN);
  }
  rm.stop();
  return;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesDelegationTokens </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreateDelegationToken() throws Exception {
  rm.start();
  this.client().addFilter(new LoggingFilter(System.out));
  final String renewer="test-renewer";
  String jsonBody="{ \"renewer\" : \"" + renewer + "\" }";
  String xmlBody="<delegation-token><renewer>" + renewer + "</renewer></delegation-token>";
  String[] mediaTypes={MediaType.APPLICATION_JSON,MediaType.APPLICATION_XML};
  Map<String,String> bodyMap=new HashMap<String,String>();
  bodyMap.put(MediaType.APPLICATION_JSON,jsonBody);
  bodyMap.put(MediaType.APPLICATION_XML,xmlBody);
  for (  final String mediaType : mediaTypes) {
    final String body=bodyMap.get(mediaType);
    for (    final String contentType : mediaTypes) {
      if (isKerberosAuth == true) {
        verifyKerberosAuthCreate(mediaType,contentType,body,renewer);
      }
 else {
        verifySimpleAuthCreate(mediaType,contentType,body);
      }
    }
  }
  rm.stop();
  return;
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.resourcemanager.webapp.TestRMWebServicesNodes </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleNode() throws JSONException, Exception {
  rm.registerNode("h1:1234",5120);
  MockNM nm2=rm.registerNode("h2:1235",5121);
  testSingleNodeHelper("h2:1235",nm2,MediaType.APPLICATION_JSON);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodesSlash() throws JSONException, Exception {
  testNodesHelper("nodes/",MediaType.APPLICATION_JSON);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleNodeDefault() throws JSONException, Exception {
  MockNM nm1=rm.registerNode("h1:1234",5120);
  rm.registerNode("h2:1235",5121);
  testSingleNodeHelper("h1:1234/",nm1,"");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSingleNodeSlash() throws JSONException, Exception {
  MockNM nm1=rm.registerNode("h1:1234",5120);
  rm.registerNode("h2:1235",5121);
  testSingleNodeHelper("h1:1234/",nm1,MediaType.APPLICATION_JSON);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodes() throws JSONException, Exception {
  testNodesHelper("nodes",MediaType.APPLICATION_JSON);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNodesDefault() throws JSONException, Exception {
  testNodesHelper("nodes/","");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.timeline.TestGenericObjectMapper </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testEncoding(){
  testEncoding(Long.MAX_VALUE);
  testEncoding(Long.MIN_VALUE);
  testEncoding(0l);
  testEncoding(128l);
  testEncoding(256l);
  testEncoding(512l);
  testEncoding(-256l);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.timeline.TestLeveldbTimelineStore </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetSingleEntity() throws IOException {
  super.testGetSingleEntity();
  ((LeveldbTimelineStore)store).clearStartTimeCache();
  super.testGetSingleEntity();
  loadTestData();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.timeline.webapp.TestCrossOriginFilter </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSameOrigin() throws ServletException, IOException {
  Map<String,String> conf=new HashMap<String,String>();
  conf.put(CrossOriginFilter.ALLOWED_ORIGINS,"");
  FilterConfig filterConfig=new FilterConfigTest(conf);
  HttpServletRequest mockReq=mock(HttpServletRequest.class);
  when(mockReq.getHeader(CrossOriginFilter.ORIGIN)).thenReturn(null);
  HttpServletResponse mockRes=mock(HttpServletResponse.class);
  FilterChain mockChain=mock(FilterChain.class);
  CrossOriginFilter filter=new CrossOriginFilter();
  filter.init(filterConfig);
  filter.doFilter(mockReq,mockRes,mockChain);
  verifyZeroInteractions(mockRes);
  verify(mockChain).doFilter(mockReq,mockRes);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCrossOriginFilter() throws ServletException, IOException {
  Map<String,String> conf=new HashMap<String,String>();
  conf.put(CrossOriginFilter.ALLOWED_ORIGINS,"example.com");
  FilterConfig filterConfig=new FilterConfigTest(conf);
  HttpServletRequest mockReq=mock(HttpServletRequest.class);
  when(mockReq.getHeader(CrossOriginFilter.ORIGIN)).thenReturn("example.com");
  when(mockReq.getHeader(CrossOriginFilter.ACCESS_CONTROL_REQUEST_METHOD)).thenReturn("GET");
  when(mockReq.getHeader(CrossOriginFilter.ACCESS_CONTROL_REQUEST_HEADERS)).thenReturn("X-Requested-With");
  HttpServletResponse mockRes=mock(HttpServletResponse.class);
  FilterChain mockChain=mock(FilterChain.class);
  CrossOriginFilter filter=new CrossOriginFilter();
  filter.init(filterConfig);
  filter.doFilter(mockReq,mockRes,mockChain);
  verify(mockRes).setHeader(CrossOriginFilter.ACCESS_CONTROL_ALLOW_ORIGIN,"example.com");
  verify(mockRes).setHeader(CrossOriginFilter.ACCESS_CONTROL_ALLOW_CREDENTIALS,Boolean.TRUE.toString());
  verify(mockRes).setHeader(CrossOriginFilter.ACCESS_CONTROL_ALLOW_METHODS,filter.getAllowedMethodsHeader());
  verify(mockRes).setHeader(CrossOriginFilter.ACCESS_CONTROL_ALLOW_HEADERS,filter.getAllowedHeadersHeader());
  verify(mockChain).doFilter(mockReq,mockRes);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDisallowedHeader() throws ServletException, IOException {
  Map<String,String> conf=new HashMap<String,String>();
  conf.put(CrossOriginFilter.ALLOWED_ORIGINS,"example.com");
  FilterConfig filterConfig=new FilterConfigTest(conf);
  HttpServletRequest mockReq=mock(HttpServletRequest.class);
  when(mockReq.getHeader(CrossOriginFilter.ORIGIN)).thenReturn("example.com");
  when(mockReq.getHeader(CrossOriginFilter.ACCESS_CONTROL_REQUEST_METHOD)).thenReturn("GET");
  when(mockReq.getHeader(CrossOriginFilter.ACCESS_CONTROL_REQUEST_HEADERS)).thenReturn("Disallowed-Header");
  HttpServletResponse mockRes=mock(HttpServletResponse.class);
  FilterChain mockChain=mock(FilterChain.class);
  CrossOriginFilter filter=new CrossOriginFilter();
  filter.init(filterConfig);
  filter.doFilter(mockReq,mockRes,mockChain);
  verifyZeroInteractions(mockRes);
  verify(mockChain).doFilter(mockReq,mockRes);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDisallowedMethod() throws ServletException, IOException {
  Map<String,String> conf=new HashMap<String,String>();
  conf.put(CrossOriginFilter.ALLOWED_ORIGINS,"example.com");
  FilterConfig filterConfig=new FilterConfigTest(conf);
  HttpServletRequest mockReq=mock(HttpServletRequest.class);
  when(mockReq.getHeader(CrossOriginFilter.ORIGIN)).thenReturn("example.com");
  when(mockReq.getHeader(CrossOriginFilter.ACCESS_CONTROL_REQUEST_METHOD)).thenReturn("DISALLOWED_METHOD");
  HttpServletResponse mockRes=mock(HttpServletResponse.class);
  FilterChain mockChain=mock(FilterChain.class);
  CrossOriginFilter filter=new CrossOriginFilter();
  filter.init(filterConfig);
  filter.doFilter(mockReq,mockRes,mockChain);
  verifyZeroInteractions(mockRes);
  verify(mockChain).doFilter(mockReq,mockRes);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDisallowedOrigin() throws ServletException, IOException {
  Map<String,String> conf=new HashMap<String,String>();
  conf.put(CrossOriginFilter.ALLOWED_ORIGINS,"example.com");
  FilterConfig filterConfig=new FilterConfigTest(conf);
  HttpServletRequest mockReq=mock(HttpServletRequest.class);
  when(mockReq.getHeader(CrossOriginFilter.ORIGIN)).thenReturn("example.org");
  HttpServletResponse mockRes=mock(HttpServletResponse.class);
  FilterChain mockChain=mock(FilterChain.class);
  CrossOriginFilter filter=new CrossOriginFilter();
  filter.init(filterConfig);
  filter.doFilter(mockReq,mockRes,mockChain);
  verifyZeroInteractions(mockRes);
  verify(mockChain).doFilter(mockReq,mockRes);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.server.webproxy.TestProxyUriUtils </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testGetPathApplicationIdBad(){
  ProxyUriUtils.getPath(null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.util.TestFSDownload </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testDownloadPatternJar() throws IOException, URISyntaxException, InterruptedException {
  downloadWithFileType(TEST_FILE_TYPE.JAR);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testDownloadArchiveTgz() throws IOException, URISyntaxException, InterruptedException {
  downloadWithFileType(TEST_FILE_TYPE.TGZ);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testDownloadArchiveZip() throws IOException, URISyntaxException, InterruptedException {
  downloadWithFileType(TEST_FILE_TYPE.ZIP);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=10000) public void testDownloadArchive() throws IOException, URISyntaxException, InterruptedException {
  downloadWithFileType(TEST_FILE_TYPE.TAR);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.util.TestProcfsBasedProcessTree </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that cumulative memory is computed only for processes older than a
 * given age.
 * @throws IOExceptionif there was a problem setting up the fake procfs directories or
 * files.
 */
@Test(timeout=30000) public void testMemForOlderProcesses() throws IOException {
  testMemForOlderProcesses(false);
  testMemForOlderProcesses(true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.util.TestWindowsResourceCalculatorPlugin </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test(timeout=20000) public void errorInGetSystemInfo(){
  WindowsResourceCalculatorPluginTester tester=new WindowsResourceCalculatorPluginTester();
  tester.infoStr=null;
  tester.getAvailablePhysicalMemorySize();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.webapp.TestParseRoute </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=WebAppException.class) public void testMissingLeadingSlash(){
  WebApp.parseRoute("foo/bar");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.webapp.TestSubViews </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSubView() throws Exception {
  Injector injector=WebAppTests.createMockInjector(this);
  injector.getInstance(MainView.class).render();
  PrintWriter out=injector.getInstance(HttpServletResponse.class).getWriter();
  out.flush();
  verify(out).print("sub1 text");
  verify(out).print("sub2 text");
  verify(out,times(16)).println();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.webapp.TestWebApp </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCreate(){
  WebApp app=WebApps.$for(this).start();
  app.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.webapp.hamlet.TestHamletImpl </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetLinkHref(){
  LINK link=mock(LINK.class);
  HamletImpl.setLinkHref(link,"uri");
  HamletImpl.setLinkHref(link,"style.css");
  verify(link).$href("uri");
  verify(link).$rel("stylesheet");
  verify(link).$href("style.css");
  verifyNoMoreInteractions(link);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetScriptSrc(){
  SCRIPT script=mock(SCRIPT.class);
  HamletImpl.setScriptSrc(script,"uri");
  HamletImpl.setScriptSrc(script,"script.js");
  verify(script).$src("uri");
  verify(script).$type("text/javascript");
  verify(script).$src("script.js");
  verifyNoMoreInteractions(script);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSetSelector(){
  CoreAttrs e=mock(CoreAttrs.class);
  HamletImpl.setSelector(e,"#id.class");
  verify(e).$id("id");
  verify(e).$class("class");
  H1 t=mock(H1.class);
  HamletImpl.setSelector(t,"#id.class")._("heading");
  verify(t).$id("id");
  verify(t).$class("class");
  verify(t)._("heading");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.webapp.hamlet.TestParseSelector </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=WebAppException.class) public void testMissingAll(){
  parseSelector("");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.webapp.view.TestCommonViews </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFooterBlock(){
  WebAppTests.testBlock(FooterBlock.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testHeaderBlock(){
  WebAppTests.testBlock(HeaderBlock.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testJQueryUI(){
  WebAppTests.testBlock(JQueryUI.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testErrorPage(){
  Injector injector=WebAppTests.testPage(ErrorPage.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInfoBlock(){
  Injector injector=WebAppTests.createMockInjector(this);
  ResponseInfo info=injector.getInstance(ResponseInfo.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.webapp.view.TestHtmlBlock </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=WebAppException.class) public void testShortBlock(){
  WebAppTests.testBlock(ShortBlock.class);
}

</code></pre>

<br>
<pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=WebAppException.class) public void testShortPage(){
  WebAppTests.testPage(ShortPage.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUsual(){
  Injector injector=WebAppTests.testBlock(TestBlock.class);
  PrintWriter out=injector.getInstance(PrintWriter.class);
  verify(out).print(" id=\"testid\"");
  verify(out).print("test note");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.webapp.view.TestHtmlPage </h4><pre class="type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=WebAppException.class) public void testShort(){
  WebAppTests.testPage(ShortView.class);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testUsual(){
  Injector injector=WebAppTests.testPage(TestView.class);
  PrintWriter out=injector.getInstance(PrintWriter.class);
  verify(out).print(" http-equiv=\"X-UA-Compatible\"");
  verify(out).print(" content=\"IE=8\"");
  verify(out).print(" http-equiv=\"Content-type\"");
  verify(out).print(String.format(" content=\"%s\"",MimeType.HTML));
  verify(out).print("test");
  verify(out).print(" id=\"testid\"");
  verify(out).print("test note");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.webapp.view.TestTwoColumnCssPage </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldNotThrow(){
  WebAppTests.testPage(TwoColumnCssLayout.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.hadoop.yarn.webapp.view.TestTwoColumnLayout </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void shouldNotThrow(){
  WebAppTests.testPage(TwoColumnLayout.class);
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
