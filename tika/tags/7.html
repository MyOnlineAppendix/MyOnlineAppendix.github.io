<h3><span class=" glyphicon glyphicon-tag"/>&nbspIterativeVerifier</h3><kbd>Verifies assertions in iterations</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.tika.TestRereadableInputStream </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws IOException {
  InputStream is=createTestInputStream();
  RereadableInputStream ris=new RereadableInputStream(is,MEMORY_THRESHOLD,true,true);
  try {
    for (int pass=0; pass < NUM_PASSES; pass++) {
      for (int byteNum=0; byteNum < TEST_SIZE; byteNum++) {
        int byteRead=ris.read();
        assertEquals("Pass = " + pass + ", byte num should be "+ byteNum+ " but is "+ byteRead+ ".",byteNum,byteRead);
      }
      ris.rewind();
    }
  }
  finally {
    ris.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.batch.RecursiveParserWrapperFSConsumerTest </h4><pre class="type-9 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEmbeddedWithNPE() throws Exception {
  final String path="/test-documents/embedded_with_npe.xml";
  final Metadata metadata=new Metadata();
  metadata.add(Metadata.RESOURCE_NAME_KEY,"embedded_with_npe.xml");
  ArrayBlockingQueue<FileResource> queue=new ArrayBlockingQueue<FileResource>(2);
  queue.add(new FileResource(){
    @Override public String getResourceId(){
      return "testFile";
    }
    @Override public Metadata getMetadata(){
      return metadata;
    }
    @Override public InputStream openInputStream() throws IOException {
      return this.getClass().getResourceAsStream(path);
    }
  }
);
  queue.add(new PoisonFileResource());
  MockOSFactory mockOSFactory=new MockOSFactory();
  RecursiveParserWrapperFSConsumer consumer=new RecursiveParserWrapperFSConsumer(queue,new AutoDetectParserFactory(),new BasicContentHandlerFactory(BasicContentHandlerFactory.HANDLER_TYPE.TEXT,-1),mockOSFactory,new TikaConfig());
  IFileProcessorFutureResult result=consumer.call();
  mockOSFactory.getStreams().get(0).flush();
  byte[] bytes=mockOSFactory.getStreams().get(0).toByteArray();
  List<Metadata> results=JsonMetadataList.fromJson(new InputStreamReader(new ByteArrayInputStream(bytes),UTF_8));
  assertEquals(4,results.size());
  assertContains("another null pointer",results.get(2).get(RecursiveParserWrapper.EMBEDDED_EXCEPTION));
  assertEquals("Nikolai Lobachevsky",results.get(0).get("author"));
  for (int i=1; i < 4; i++) {
    assertEquals("embeddedAuthor" + i,results.get(i).get("author"));
    assertContains("some_embedded_content" + i,results.get(i).get(RecursiveParserWrapper.TIKA_CONTENT));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.batch.fs.BatchProcessTest </h4><pre class="type-9 type-7 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000) public void allHeavyHangsTestWithStarvedCrawler() throws Exception {
  Path outputDir=getNewOutputDir("allHeavyHangsStarvedCrawler-");
  Map<String,String> args=getDefaultArgs("heavy_heavy_hangs",outputDir);
  args.put("numConsumers","2");
  args.put("maxQueueSize","2");
  args.put("timeoutThresholdMillis","100000000");
  BatchProcessTestExecutor ex=new BatchProcessTestExecutor(args);
  StreamStrings streamStrings=ex.execute();
  assertEquals(2,countChildren(outputDir));
  for (int i=0; i < 2; i++) {
    Path hvyHang=outputDir.resolve("test" + i + "_heavy_hang.xml.xml");
    assertTrue(Files.exists(hvyHang));
    assertEquals(0,Files.size(hvyHang));
  }
  assertContains(BatchProcess.BATCH_CONSTANTS.BATCH_PROCESS_FATAL_MUST_RESTART.toString(),streamStrings.getErrString());
  assertContains("Crawler timed out",streamStrings.getErrString());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000) public void allHeavyHangsTestWithCrazyNumberConsumersTest() throws Exception {
  Path outputDir=getNewOutputDir("allHeavyHangsCrazyNumberConsumers-");
  Map<String,String> args=getDefaultArgs("heavy_heavy_hangs",outputDir);
  args.put("numConsumers","100");
  BatchProcessTestExecutor ex=new BatchProcessTestExecutor(args);
  StreamStrings streamStrings=ex.execute();
  assertEquals(7,countChildren(outputDir));
  for (int i=0; i < 6; i++) {
    Path hvyHang=outputDir.resolve("test" + i + "_heavy_hang.xml.xml");
    assertTrue(Files.exists(hvyHang));
    assertEquals(0,Files.size(hvyHang));
  }
  assertContains("This is tika-batch's first test file",readFileToString(outputDir.resolve("test6_ok.xml.xml"),UTF_8));
  assertNotContained(BatchProcess.BATCH_CONSTANTS.BATCH_PROCESS_FATAL_MUST_RESTART.toString(),streamStrings.getErrString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.filetypedetector.TikaFileTypeDetectorTest </h4><pre class="type-9 type-7 type-5 type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public final void testMetaInfServicesLoad() throws Exception {
  ServiceLoader<FileTypeDetector> serviceLoader=ServiceLoader.load(FileTypeDetector.class);
  Iterator<FileTypeDetector> iterator=serviceLoader.iterator();
  assertTrue(iterator.hasNext());
  while (iterator.hasNext()) {
    FileTypeDetector fileTypeDetector=iterator.next();
    assertNotNull(fileTypeDetector);
    assertTrue(fileTypeDetector instanceof TikaFileTypeDetector);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.fork.ForkParserTest </h4><pre class="type-7 type-2 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testParallelParsing() throws Exception {
  final ForkParser parser=new ForkParser(ForkParserTest.class.getClassLoader(),new ForkTestParser());
  try {
    final ParseContext context=new ParseContext();
    Thread[] threads=new Thread[10];
    ContentHandler[] output=new ContentHandler[threads.length];
    for (int i=0; i < threads.length; i++) {
      final ContentHandler o=new BodyContentHandler();
      output[i]=o;
      threads[i]=new Thread(){
        public void run(){
          try {
            InputStream stream=new ByteArrayInputStream(new byte[0]);
            parser.parse(stream,o,new Metadata(),context);
          }
 catch (          Exception e) {
            e.printStackTrace();
          }
        }
      }
;
      threads[i].start();
    }
    for (int i=0; i < threads.length; i++) {
      threads[i].join();
      assertEquals("Hello, World!",output[i].toString().trim());
    }
  }
  finally {
    parser.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSerialParsing() throws Exception {
  ForkParser parser=new ForkParser(ForkParserTest.class.getClassLoader(),new ForkTestParser());
  try {
    ParseContext context=new ParseContext();
    for (int i=0; i < 10; i++) {
      ContentHandler output=new BodyContentHandler();
      InputStream stream=new ByteArrayInputStream(new byte[0]);
      parser.parse(stream,output,new Metadata(),context);
      assertEquals("Hello, World!",output.toString().trim());
    }
  }
  finally {
    parser.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.io.FilenameUtilsTest </h4><pre class="type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void normalizeWithReservedChar() throws Exception {
  final String[] TEST_NAMES={"test?.txt","?test.txt","test.txt?","?test?txt?"};
  final String[] EXPECTED_NAMES={"test%3F.txt","%3Ftest.txt","test.txt%3F","%3Ftest%3Ftxt%3F"};
  for (int i=0; i < TEST_NAMES.length; ++i) {
    assertEquals(EXPECTED_NAMES[i],FilenameUtils.normalize(TEST_NAMES[i]));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.parser.AutoDetectParserTest </h4><pre class="type-9 type-7 type-14 type-12 type-4 type-5 type-2 type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test to ensure that the Ogg Audio parsers (Vorbis, Opus, Flac etc)
 * have been correctly included, and are available
 */
@SuppressWarnings("deprecation") @Test public void testOggFlacAudio() throws Exception {
  String[] testFiles=new String[]{"testVORBIS.ogg","testFLAC.flac","testFLAC.oga","testOPUS.opus"};
  MediaType[] mediaTypes=new MediaType[]{MediaType.parse(OGG_VORBIS),MediaType.parse(FLAC_NATIVE),MediaType.parse(OGG_FLAC),MediaType.parse(OGG_OPUS)};
  VorbisParser vParser=new VorbisParser();
  assertNotNull("Parser not found for " + mediaTypes[0],vParser.getSupportedTypes(new ParseContext()));
  FlacParser fParser=new FlacParser();
  assertNotNull("Parser not found for " + mediaTypes[1],fParser.getSupportedTypes(new ParseContext()));
  assertNotNull("Parser not found for " + mediaTypes[2],fParser.getSupportedTypes(new ParseContext()));
  OpusParser oParser=new OpusParser();
  assertNotNull("Parser not found for " + mediaTypes[3],oParser.getSupportedTypes(new ParseContext()));
  CompositeParser parser=(CompositeParser)tika.getParser();
  for (  MediaType mt : mediaTypes) {
    assertNotNull("Parser not found for " + mt,parser.getParsers().get(mt));
  }
  for (int i=0; i < testFiles.length; i++) {
    String file=testFiles[i];
    try (InputStream input=AutoDetectParserTest.class.getResourceAsStream("/test-documents/" + file)){
      if (input == null) {
        fail("Could not find test file " + file);
      }
      Metadata metadata=new Metadata();
      ContentHandler handler=new BodyContentHandler();
      new AutoDetectParser(tika).parse(input,handler,metadata);
      assertEquals("Incorrect content type for " + file,mediaTypes[i].toString(),metadata.get(Metadata.CONTENT_TYPE));
      assertEquals("Test Artist",metadata.get(Metadata.AUTHOR));
      assertEquals("Test Title",metadata.get(Metadata.TITLE));
      assertEquals("Test Artist",metadata.get(TikaCoreProperties.CREATOR));
      assertEquals("Test Title",metadata.get(TikaCoreProperties.TITLE));
      if (!file.endsWith(".opus")) {
        assertEquals("Test Album",metadata.get(XMPDM.ALBUM));
      }
      assertEquals("Test Artist",metadata.get(XMPDM.ARTIST));
      assertEquals("Stereo",metadata.get(XMPDM.AUDIO_CHANNEL_TYPE));
      assertEquals("44100",metadata.get(XMPDM.AUDIO_SAMPLE_RATE));
      String content=handler.toString();
      assertTrue(content.contains("Test Title"));
      assertTrue(content.contains("Test Artist"));
    }
   }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.parser.html.HtmlParserTest </h4><pre class="type-9 type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testNoisyMetaCharsetHeaders() throws Exception {
  Tika tika=new Tika();
  String hit="\u0623\u0639\u0631\u0628";
  for (int i=1; i <= 4; i++) {
    String fileName="/test-documents/testHTMLNoisyMetaEncoding_" + i + ".html";
    String content=tika.parseToString(HtmlParserTest.class.getResourceAsStream(fileName));
    assertTrue("testing: " + fileName,content.contains(hit));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.parser.jdbc.SQLite3ParserTest </h4><pre class="type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testParserContainerExtractor() throws Exception {
  ParserContainerExtractor ex=new ParserContainerExtractor();
  ByteCopyingHandler byteCopier=new ByteCopyingHandler();
  InputStream is=getResourceAsStream(TEST_FILE1);
  Metadata metadata=new Metadata();
  metadata.set(Metadata.RESOURCE_NAME_KEY,TEST_FILE_NAME);
  ex.extract(TikaInputStream.get(is),ex,byteCopier);
  assertEquals(4,byteCopier.bytes.size());
  String[] strings=new String[4];
  for (int i=1; i < byteCopier.bytes.size(); i++) {
    byte[] byteArr=byteCopier.bytes.get(i);
    String s=new String(byteArr,0,Math.min(byteArr.length,1000),UTF_8);
    strings[i]=s;
  }
  byte[] oleBytes=new byte[]{(byte)-48,(byte)-49,(byte)17,(byte)-32,(byte)-95,(byte)-79,(byte)26,(byte)-31,(byte)0,(byte)0};
  for (int i=0; i < 10; i++) {
    assertEquals(oleBytes[i],byteCopier.bytes.get(0)[i]);
  }
  assertContains("PNG",strings[1]);
  assertContains("PK",strings[2]);
  assertContains("PNG",strings[3]);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.parser.microsoft.POIContainerExtractionTest </h4><pre class="type-9 type-7 type-2 type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Office files which have other office files
 * embedded into them. The embedded office files
 * will sometimes have images in them.
 * <p/>
 * eg xls
 * -> word
 * -> image
 * -> image
 * -> powerpoint
 * -> excel
 * -> image
 */
@Test public void testEmbeddedOfficeFiles() throws Exception {
  ContainerExtractor extractor=new ParserContainerExtractor();
  TrackingHandler handler;
  handler=process("testEXCEL_embeded.xls",extractor,false);
  assertEquals(5,handler.filenames.size());
  assertEquals(5,handler.mediaTypes.size());
  assertEquals(null,handler.filenames.get(0));
  assertEquals(null,handler.filenames.get(1));
  assertEquals(null,handler.filenames.get(2));
  assertEquals("MBD0003271D.ppt",handler.filenames.get(3));
  assertEquals("MBD00032A24.doc",handler.filenames.get(4));
  assertEquals(TYPE_EMF,handler.mediaTypes.get(0));
  assertEquals(TYPE_EMF,handler.mediaTypes.get(1));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(2));
  assertEquals(TYPE_PPT,handler.mediaTypes.get(3));
  assertEquals(TYPE_DOC,handler.mediaTypes.get(4));
  handler=process("testEXCEL_embeded.xls",extractor,true);
  assertEquals(17,handler.filenames.size());
  assertEquals(17,handler.mediaTypes.size());
  assertEquals(null,handler.filenames.get(0));
  assertEquals(null,handler.filenames.get(1));
  assertEquals(null,handler.filenames.get(2));
  assertEquals("MBD0003271D.ppt",handler.filenames.get(3));
  assertEquals("1",handler.filenames.get(4));
  assertEquals(null,handler.filenames.get(5));
  assertEquals("2",handler.filenames.get(6));
  assertEquals("image1.png",handler.filenames.get(7));
  assertEquals("image2.jpg",handler.filenames.get(8));
  assertEquals("image3.png",handler.filenames.get(9));
  assertEquals("image1.png",handler.filenames.get(16));
  assertEquals(TYPE_EMF,handler.mediaTypes.get(0));
  assertEquals(TYPE_EMF,handler.mediaTypes.get(1));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(2));
  assertEquals(TYPE_PPT,handler.mediaTypes.get(3));
  assertEquals(TYPE_XLS,handler.mediaTypes.get(4));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(5));
  assertEquals(TYPE_DOC,handler.mediaTypes.get(6));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(7));
  assertEquals(TYPE_JPG,handler.mediaTypes.get(8));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(9));
  assertEquals(TYPE_DOC,handler.mediaTypes.get(15));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(16));
  handler=process("testWORD_embeded.doc",extractor,false);
  assertEquals(9,handler.filenames.size());
  assertEquals(9,handler.mediaTypes.size());
  assertEquals("image1.emf",handler.filenames.get(0));
  assertEquals("image4.png",handler.filenames.get(1));
  assertEquals("image5.jpg",handler.filenames.get(2));
  assertEquals("image6.png",handler.filenames.get(3));
  assertEquals("image2.emf",handler.filenames.get(4));
  assertEquals("image3.emf",handler.filenames.get(5));
  assertEquals(null,handler.filenames.get(6));
  assertEquals("_1345471035.ppt",handler.filenames.get(7));
  assertEquals("_1345470949.xls",handler.filenames.get(8));
  assertEquals(TYPE_EMF,handler.mediaTypes.get(0));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(1));
  assertEquals(TYPE_JPG,handler.mediaTypes.get(2));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(3));
  assertEquals(TYPE_EMF,handler.mediaTypes.get(4));
  assertEquals(TYPE_EMF,handler.mediaTypes.get(5));
  assertEquals(TYPE_DOCX,handler.mediaTypes.get(6));
  assertEquals(TYPE_PPT,handler.mediaTypes.get(7));
  assertEquals(TYPE_XLS,handler.mediaTypes.get(8));
  handler=process("testWORD_embeded.doc",extractor,true);
  assertEquals(16,handler.filenames.size());
  assertEquals(16,handler.mediaTypes.size());
  assertEquals("image1.emf",handler.filenames.get(0));
  assertEquals("image4.png",handler.filenames.get(1));
  assertEquals("image5.jpg",handler.filenames.get(2));
  assertEquals("image6.png",handler.filenames.get(3));
  assertEquals("image2.emf",handler.filenames.get(4));
  assertEquals("image3.emf",handler.filenames.get(5));
  assertEquals(null,handler.filenames.get(6));
  assertEquals("image2.png",handler.filenames.get(7));
  assertEquals("image3.jpeg",handler.filenames.get(8));
  assertEquals("image4.png",handler.filenames.get(9));
  for (int i=11; i < 14; i++) {
    assertNull(handler.filenames.get(i));
  }
  assertEquals(TYPE_EMF,handler.mediaTypes.get(0));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(1));
  assertEquals(TYPE_JPG,handler.mediaTypes.get(2));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(3));
  assertEquals(TYPE_EMF,handler.mediaTypes.get(4));
  assertEquals(TYPE_EMF,handler.mediaTypes.get(5));
  assertEquals(TYPE_DOCX,handler.mediaTypes.get(6));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(7));
  assertEquals(TYPE_JPG,handler.mediaTypes.get(8));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(9));
  assertEquals(TYPE_PPT,handler.mediaTypes.get(10));
  assertEquals(TYPE_XLS,handler.mediaTypes.get(14));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(15));
  handler=process("testPPT_embeded.ppt",extractor,false);
  assertEquals(7,handler.filenames.size());
  assertEquals(7,handler.mediaTypes.size());
  assertEquals("1",handler.filenames.get(0));
  assertEquals("2",handler.filenames.get(1));
  assertEquals(null,handler.filenames.get(2));
  assertEquals(null,handler.filenames.get(3));
  assertEquals(null,handler.filenames.get(4));
  assertEquals(null,handler.filenames.get(5));
  assertEquals(null,handler.filenames.get(6));
  assertEquals(TYPE_XLS,handler.mediaTypes.get(0));
  assertEquals(TYPE_DOC,handler.mediaTypes.get(1));
  assertEquals(TYPE_EMF,handler.mediaTypes.get(2));
  assertEquals(TYPE_EMF,handler.mediaTypes.get(3));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(4));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(5));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(6));
  handler=process("testPPT_embeded.ppt",extractor,true);
  assertEquals(11,handler.filenames.size());
  assertEquals(11,handler.mediaTypes.size());
  assertEquals("1",handler.filenames.get(0));
  assertEquals(null,handler.filenames.get(1));
  assertEquals("2",handler.filenames.get(2));
  assertEquals("image1.png",handler.filenames.get(3));
  assertEquals("image2.jpg",handler.filenames.get(4));
  assertEquals("image3.png",handler.filenames.get(5));
  assertEquals(null,handler.filenames.get(6));
  assertEquals(null,handler.filenames.get(7));
  assertEquals(null,handler.filenames.get(8));
  assertEquals(null,handler.filenames.get(9));
  assertEquals(null,handler.filenames.get(10));
  assertEquals(TYPE_XLS,handler.mediaTypes.get(0));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(1));
  assertEquals(TYPE_DOC,handler.mediaTypes.get(2));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(3));
  assertEquals(TYPE_JPG,handler.mediaTypes.get(4));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(5));
  assertEquals(TYPE_EMF,handler.mediaTypes.get(6));
  assertEquals(TYPE_EMF,handler.mediaTypes.get(7));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(8));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(9));
  assertEquals(TYPE_PNG,handler.mediaTypes.get(10));
  handler=process("testWORD_embedded_pdf.doc",extractor,true);
  assertEquals(2,handler.filenames.size());
  assertEquals(2,handler.mediaTypes.size());
  assertEquals("image1.emf",handler.filenames.get(0));
  assertEquals("_1402837031.pdf",handler.filenames.get(1));
  assertEquals(TYPE_EMF,handler.mediaTypes.get(0));
  assertEquals(TYPE_PDF,handler.mediaTypes.get(1));
  handler=process("testMSG_att_doc.msg",extractor,true);
  assertEquals(2,handler.filenames.size());
  assertEquals(2,handler.mediaTypes.size());
  assertEquals("test-unicode.doc",handler.filenames.get(0));
  assertEquals(TYPE_DOC,handler.mediaTypes.get(0));
  assertEquals("pj1.txt",handler.filenames.get(1));
  assertEquals(TYPE_TXT,handler.mediaTypes.get(1));
  handler=process("testMSG_att_msg.msg",extractor,true);
  assertEquals(2,handler.filenames.size());
  assertEquals(2,handler.mediaTypes.size());
  assertEquals("__substg1.0_3701000D.msg",handler.filenames.get(0));
  assertEquals(TYPE_MSG,handler.mediaTypes.get(0));
  assertEquals("smbprn.00009008.KdcPjl.pdf",handler.filenames.get(1));
  assertEquals(TYPE_PDF,handler.mediaTypes.get(1));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.parser.microsoft.ooxml.OOXMLParserTest </h4><pre class="type-7 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * For the PowerPoint formats we don't currently support, ensure that
 * we don't break either
 */
@Test public void testUnsupportedPowerPoint() throws Exception {
  String[] extensions=new String[]{"xps","thmx"};
  String[] mimeTypes=new String[]{"application/vnd.ms-xpsdocument","application/vnd.openxmlformats-officedocument"};
  for (int i=0; i < extensions.length; i++) {
    String extension=extensions[i];
    String filename="testPPT." + extension;
    Parser parser=new AutoDetectParser();
    Metadata metadata=new Metadata();
    metadata.set(Metadata.RESOURCE_NAME_KEY,filename);
    ContentHandler handler=new BodyContentHandler();
    ParseContext context=new ParseContext();
    try (InputStream input=getTestDocument(filename)){
      parser.parse(input,handler,metadata,context);
      assertEquals("Mime-type checking for " + filename,mimeTypes[i],metadata.get(Metadata.CONTENT_TYPE));
    }
   }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-14 type-4 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * We have a number of different powerpoint files,
 * such as presentation, macro-enabled etc
 */
@Test public void testPowerPoint() throws Exception {
  String[] extensions=new String[]{"pptx","pptm","ppsm","ppsx","potm"};
  String[] mimeTypes=new String[]{"application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint.presentation.macroenabled.12","application/vnd.ms-powerpoint.slideshow.macroenabled.12","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.template.macroenabled.12"};
  for (int i=0; i < extensions.length; i++) {
    String extension=extensions[i];
    String filename="testPPT." + extension;
    Parser parser=new AutoDetectParser();
    Metadata metadata=new Metadata();
    ContentHandler handler=new BodyContentHandler();
    ParseContext context=new ParseContext();
    try (InputStream input=getTestDocument(filename)){
      parser.parse(input,handler,metadata,context);
      assertEquals("Mime-type checking for " + filename,mimeTypes[i],metadata.get(Metadata.CONTENT_TYPE));
      assertEquals("Attachment Test",metadata.get(TikaCoreProperties.TITLE));
      assertEquals("Rajiv",metadata.get(TikaCoreProperties.CREATOR));
      assertEquals("Rajiv",metadata.get(Metadata.AUTHOR));
      String content=handler.toString();
      if (extension.equals("thmx")) {
        assertEquals("",content);
      }
 else {
        assertTrue("Text missing for " + filename + "\n"+ content,content.contains("Attachment Test"));
        assertTrue("Text missing for " + filename + "\n"+ content,content.contains("This is a test file data with the same content"));
        assertTrue("Text missing for " + filename + "\n"+ content,content.contains("content parsing"));
        assertTrue("Text missing for " + filename + "\n"+ content,content.contains("Different words to test against"));
        assertTrue("Text missing for " + filename + "\n"+ content,content.contains("Mystery"));
      }
    }
   }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.parser.rtf.RTFParserTest </h4><pre class="type-9 type-7 type-14 type-2 type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmbeddedMonster() throws Exception {
  Set<MediaType> skipTypes=new HashSet<MediaType>();
  skipTypes.add(MediaType.parse("application/x-emf"));
  skipTypes.add(MediaType.parse("application/x-msmetafile"));
  List<String> trueNames=new ArrayList<String>();
  trueNames.add("file_0.doc");
  trueNames.add("Hw.txt");
  trueNames.add("file_1.xlsx");
  trueNames.add("test-zip-of-zip_\u666E\u6797\u65AF\u987F.zip");
  trueNames.add("html-within-zip.zip");
  trueNames.add("text.html");
  trueNames.add("testHTML_utf8_\u666E\u6797\u65AF\u987F.html");
  trueNames.add("testJPEG_\u666E\u6797\u65AF\u987F.jpg");
  trueNames.add("file_2.xls");
  trueNames.add("testMSG_\u666E\u6797\u65AF\u987F.msg");
  trueNames.add("file_3.pdf");
  trueNames.add("file_4.ppt");
  trueNames.add("file_5.pptx");
  trueNames.add("thumbnail.jpeg");
  trueNames.add("file_6.doc");
  trueNames.add("file_7.doc");
  trueNames.add("file_8.docx");
  trueNames.add("testJPEG_\u666E\u6797\u65AF\u987F.jpg");
  List<String> trueTypes=new ArrayList<String>();
  trueTypes.add("application/msword");
  trueTypes.add("text/plain");
  trueTypes.add("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
  trueTypes.add("application/zip");
  trueTypes.add("application/zip");
  trueTypes.add("text/html");
  trueTypes.add("text/html");
  trueTypes.add("image/jpeg");
  trueTypes.add("application/vnd.ms-excel");
  trueTypes.add("application/vnd.ms-outlook");
  trueTypes.add("application/pdf");
  trueTypes.add("application/vnd.ms-powerpoint");
  trueTypes.add("application/vnd.openxmlformats-officedocument.presentationml.presentation");
  trueTypes.add("image/jpeg");
  trueTypes.add("application/msword");
  trueTypes.add("application/msword");
  trueTypes.add("application/vnd.openxmlformats-officedocument.wordprocessingml.document");
  trueTypes.add("image/jpeg");
  TrackingHandler tracker=new TrackingHandler(skipTypes);
  try (TikaInputStream tis=TikaInputStream.get(getResourceAsStream("/test-documents/testRTFEmbeddedFiles.rtf"))){
    ContainerExtractor ex=new ParserContainerExtractor();
    assertEquals(true,ex.isSupported(tis));
    ex.extract(tis,ex,tracker);
  }
   assertEquals(trueNames.size(),tracker.filenames.size());
  assertEquals(trueTypes.size(),tracker.mediaTypes.size());
  for (int i=0; i < tracker.filenames.size(); i++) {
    String expectedName=trueNames.get(i);
    if (expectedName == null) {
      assertNull(tracker.filenames.get(i));
    }
 else {
      assertNotNull(tracker.filenames.get(i));
      assertEquals("filename equals ",expectedName,FilenameUtils.getName(tracker.filenames.get(i)));
    }
    assertEquals(trueTypes.get(i),tracker.mediaTypes.get(i).toString());
  }
  tracker=new TrackingHandler();
  try (TikaInputStream tis=TikaInputStream.get(getResourceAsStream("/test-documents/testRTFEmbeddedFiles.rtf"))){
    ContainerExtractor ex=new ParserContainerExtractor();
    assertEquals(true,ex.isSupported(tis));
    ex.extract(tis,ex,tracker);
  }
   assertEquals(47,tracker.filenames.size());
  assertEquals("thumbnail_26.emf",tracker.filenames.get(45));
  assertEquals("thumbnail_27.wmf",tracker.filenames.get(46));
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
