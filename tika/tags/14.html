<h3><span class=" glyphicon glyphicon-tag"/>&nbspBranchVerifier</h3><kbd>Verifies assertions inside branch conditions</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.tika.bundle.BundleIT </h4><pre class="type-14 type-4 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBundleLoaded() throws Exception {
  boolean hasCore=false, hasBundle=false;
  for (  Bundle b : bc.getBundles()) {
    if ("org.apache.tika.core".equals(b.getSymbolicName())) {
      hasCore=true;
      assertEquals("Core not activated",Bundle.ACTIVE,b.getState());
    }
    if ("org.apache.tika.bundle".equals(b.getSymbolicName())) {
      hasBundle=true;
      assertEquals("Bundle not activated",Bundle.ACTIVE,b.getState());
    }
  }
  assertTrue("Core bundle not found",hasCore);
  assertTrue("Bundle bundle not found",hasBundle);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.config.TikaParserConfigTest </h4><pre class="type-14 type-12 type-4 type-5 type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testParserExcludeFromDefault() throws Exception {
  TikaConfig config=getConfig("TIKA-1558-blacklist.xml");
  assertNotNull(config.getParser());
  assertNotNull(config.getDetector());
  CompositeParser parser=(CompositeParser)config.getParser();
  MediaType PE_EXE=MediaType.application("x-msdownload");
  MediaType ELF=MediaType.application("x-elf");
  ParserDecorator confWrappedParser=(ParserDecorator)parser.getParsers().get(MediaType.APPLICATION_XML);
  assertNotNull(confWrappedParser);
  DefaultParser confParser=(DefaultParser)confWrappedParser.getWrappedParser();
  DefaultParser normParser=new DefaultParser(config.getMediaTypeRegistry());
  assertContains(PE_EXE,normParser.getSupportedTypes(context));
  assertContains(ELF,normParser.getSupportedTypes(context));
  boolean hasExec=false;
  for (  Parser p : normParser.getParsers().values()) {
    if (p instanceof ExecutableParser) {
      hasExec=true;
      break;
    }
  }
  assertTrue(hasExec);
  assertNotContained(PE_EXE,confParser.getSupportedTypes(context));
  assertNotContained(ELF,confParser.getSupportedTypes(context));
  for (  Parser p : confParser.getParsers().values()) {
    if (p instanceof ExecutableParser)     fail("Shouldn't have the Executable Parser from config");
  }
}

</code></pre>

<br>
<pre class="type-14 type-12 type-4 type-5 type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * TIKA-1558 It should be possible to exclude Parsers from being picked up by
 * DefaultParser.
 */
@Test public void defaultParserBlacklist() throws Exception {
  TikaConfig config=new TikaConfig();
  assertNotNull(config.getParser());
  assertNotNull(config.getDetector());
  CompositeParser cp=(CompositeParser)config.getParser();
  List<Parser> parsers=cp.getAllComponentParsers();
  boolean hasXML=false;
  for (  Parser p : parsers) {
    if (p instanceof XMLParser) {
      hasXML=true;
      break;
    }
  }
  assertTrue("Default config should include an XMLParser.",hasXML);
  config=getConfig("TIKA-1558-blacklistsub.xml");
  cp=(CompositeParser)config.getParser();
  parsers=cp.getAllComponentParsers();
  for (  Parser p : parsers) {
    if (p instanceof XMLParser)     fail("Custom config should not include an XMLParser (" + p.getClass() + ").");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.example.TranslatorExampleTest </h4><pre class="type-14 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMicrosoftTranslateToFrench(){
  String text="hello";
  String expected="salut";
  String translated=translatorExample.microsoftTranslateToFrench(text);
  if (!translated.equals(text))   assertEquals(expected,translated.toLowerCase(Locale.ROOT));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.language.LanguageIdentifierTest </h4><pre class="type-14 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testMixedLanguages() throws IOException {
  for (  String language : languages) {
    for (    String other : languages) {
      if (!language.equals(other)) {
        if (language.equals("lt") || other.equals("lt")) {
          continue;
        }
        ProfilingWriter writer=new ProfilingWriter();
        writeTo(language,writer);
        writeTo(other,writer);
        LanguageIdentifier identifier=null;
        identifier=new LanguageIdentifier(writer.getProfile());
        assertFalse("mix of " + language + " and "+ other+ " incorrectly detected as "+ identifier,identifier.isReasonablyCertain());
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-14 type-4 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLanguageDetection() throws IOException {
  for (  String language : languages) {
    ProfilingWriter writer=new ProfilingWriter();
    writeTo(language,writer);
    LanguageIdentifier identifier=null;
    identifier=new LanguageIdentifier(writer.getProfile());
    assertEquals(language,identifier.getLanguage());
    if (!language.equals("lt")) {
      assertTrue(identifier.toString(),identifier.isReasonablyCertain());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.language.translate.CachedTranslatorTest </h4><pre class="type-14 type-4 type-2 type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleTranslate() throws Exception {
  String source="hola senor";
  String expected="hello sir";
  if (cachedTranslator.isAvailable()) {
    String result=cachedTranslator.translate(source,"es","en");
    assertNotNull(result);
    assertEquals("Result: [" + result + "]: not equal to expected: ["+ expected+ "]",expected,result);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.language.translate.MicrosoftTranslatorTest </h4><pre class="type-14 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testSimpleTranslate() throws Exception {
  String source="hello";
  String expected="salut";
  String translated=translator.translate(source,"en","fr");
  if (translator.isAvailable())   assertTrue("Translate " + source + " to "+ expected+ " (was "+ translated+ ")",expected.equalsIgnoreCase(translated));
}

</code></pre>

<br>
<pre class="type-14 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testSimpleDetectTranslate() throws Exception {
  String source="hello";
  String expected="salut";
  String translated=translator.translate(source,"fr");
  if (translator.isAvailable())   assertTrue("Translate " + source + " to "+ expected+ " (was "+ translated+ ")",expected.equalsIgnoreCase(translated));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.language.translate.MosesTranslatorTest </h4><pre class="type-14 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testSimpleTranslate() throws Exception {
  String source="hola";
  String expected="hello";
  String translated=translator.translate(source,"sp","en");
  if (translator.isAvailable())   assertTrue("Translate " + source + " to "+ expected+ " (was "+ translated+ ")",expected.equalsIgnoreCase(translated));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.parser.AutoDetectParserTest </h4><pre class="type-9 type-7 type-14 type-12 type-4 type-5 type-2 type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test to ensure that the Ogg Audio parsers (Vorbis, Opus, Flac etc)
 * have been correctly included, and are available
 */
@SuppressWarnings("deprecation") @Test public void testOggFlacAudio() throws Exception {
  String[] testFiles=new String[]{"testVORBIS.ogg","testFLAC.flac","testFLAC.oga","testOPUS.opus"};
  MediaType[] mediaTypes=new MediaType[]{MediaType.parse(OGG_VORBIS),MediaType.parse(FLAC_NATIVE),MediaType.parse(OGG_FLAC),MediaType.parse(OGG_OPUS)};
  VorbisParser vParser=new VorbisParser();
  assertNotNull("Parser not found for " + mediaTypes[0],vParser.getSupportedTypes(new ParseContext()));
  FlacParser fParser=new FlacParser();
  assertNotNull("Parser not found for " + mediaTypes[1],fParser.getSupportedTypes(new ParseContext()));
  assertNotNull("Parser not found for " + mediaTypes[2],fParser.getSupportedTypes(new ParseContext()));
  OpusParser oParser=new OpusParser();
  assertNotNull("Parser not found for " + mediaTypes[3],oParser.getSupportedTypes(new ParseContext()));
  CompositeParser parser=(CompositeParser)tika.getParser();
  for (  MediaType mt : mediaTypes) {
    assertNotNull("Parser not found for " + mt,parser.getParsers().get(mt));
  }
  for (int i=0; i < testFiles.length; i++) {
    String file=testFiles[i];
    try (InputStream input=AutoDetectParserTest.class.getResourceAsStream("/test-documents/" + file)){
      if (input == null) {
        fail("Could not find test file " + file);
      }
      Metadata metadata=new Metadata();
      ContentHandler handler=new BodyContentHandler();
      new AutoDetectParser(tika).parse(input,handler,metadata);
      assertEquals("Incorrect content type for " + file,mediaTypes[i].toString(),metadata.get(Metadata.CONTENT_TYPE));
      assertEquals("Test Artist",metadata.get(Metadata.AUTHOR));
      assertEquals("Test Title",metadata.get(Metadata.TITLE));
      assertEquals("Test Artist",metadata.get(TikaCoreProperties.CREATOR));
      assertEquals("Test Title",metadata.get(TikaCoreProperties.TITLE));
      if (!file.endsWith(".opus")) {
        assertEquals("Test Album",metadata.get(XMPDM.ALBUM));
      }
      assertEquals("Test Artist",metadata.get(XMPDM.ARTIST));
      assertEquals("Stereo",metadata.get(XMPDM.AUDIO_CHANNEL_TYPE));
      assertEquals("44100",metadata.get(XMPDM.AUDIO_SAMPLE_RATE));
      String content=handler.toString();
      assertTrue(content.contains("Test Title"));
      assertTrue(content.contains("Test Artist"));
    }
   }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.parser.image.BPGParserTest </h4><pre class="type-14 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Tests a file with geographic information in it
 */
@Test public void testBPG_Geo() throws Exception {
  Metadata metadata=new Metadata();
  metadata.set(Metadata.CONTENT_TYPE,"image/x-bpg");
  InputStream stream=getClass().getResourceAsStream("/test-documents/testBPG_GEO.bpg");
  parser.parse(stream,new DefaultHandler(),metadata,new ParseContext());
  assertEquals("100",metadata.get(Metadata.IMAGE_WIDTH));
  assertEquals("68",metadata.get(Metadata.IMAGE_LENGTH));
  assertEquals("10",metadata.get(Metadata.BITS_PER_SAMPLE));
  assertEquals("YCbCr Colour",metadata.get(Photoshop.COLOR_MODE));
  if (false) {
    assertEquals("12.54321",metadata.get(Metadata.LATITUDE));
    assertEquals("-54.1234",metadata.get(Metadata.LONGITUDE));
  }
  if (false) {
    assertEquals("6.25E-4",metadata.get(Metadata.EXPOSURE_TIME));
    assertEquals("5.6",metadata.get(Metadata.F_NUMBER));
    assertEquals("false",metadata.get(Metadata.FLASH_FIRED));
    assertEquals("194.0",metadata.get(Metadata.FOCAL_LENGTH));
    assertEquals("400",metadata.get(Metadata.ISO_SPEED_RATINGS));
    assertEquals("Canon",metadata.get(Metadata.EQUIPMENT_MAKE));
    assertEquals("Canon EOS 40D",metadata.get(Metadata.EQUIPMENT_MODEL));
    assertEquals("Adobe Photoshop CS3 Macintosh",metadata.get(Metadata.SOFTWARE));
    assertEquals("240.0",metadata.get(Metadata.RESOLUTION_HORIZONTAL));
    assertEquals("240.0",metadata.get(Metadata.RESOLUTION_VERTICAL));
    assertEquals("Inch",metadata.get(Metadata.RESOLUTION_UNIT));
  }
}

</code></pre>

<br>
<pre class="type-14 type-4 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests a file with comments
 */
@Test public void testBPG_Commented() throws Exception {
  Metadata metadata=new Metadata();
  metadata.set(Metadata.CONTENT_TYPE,"image/x-bpg");
  InputStream stream=getClass().getResourceAsStream("/test-documents/testBPG_commented.bpg");
  parser.parse(stream,new DefaultHandler(),metadata,new ParseContext());
  assertEquals("103",metadata.get(Metadata.IMAGE_WIDTH));
  assertEquals("77",metadata.get(Metadata.IMAGE_LENGTH));
  assertEquals("10",metadata.get(Metadata.BITS_PER_SAMPLE));
  assertEquals("YCbCr Colour",metadata.get(Photoshop.COLOR_MODE));
  if (false) {
    assertEquals("Tosteberga \u00C4ngar",metadata.get(TikaCoreProperties.TITLE));
    assertEquals("Bird site in north eastern Sk\u00E5ne, Sweden.\n(new line)",metadata.get(TikaCoreProperties.DESCRIPTION));
    List<String> keywords=Arrays.asList(metadata.getValues(Metadata.KEYWORDS));
    assertTrue(keywords.contains("coast"));
    assertTrue(keywords.contains("bird watching"));
    assertEquals(keywords,Arrays.asList(metadata.getValues(TikaCoreProperties.KEYWORDS)));
  }
  if (false) {
    assertEquals("1.0E-6",metadata.get(Metadata.EXPOSURE_TIME));
    assertEquals("2.8",metadata.get(Metadata.F_NUMBER));
    assertEquals("4.6",metadata.get(Metadata.FOCAL_LENGTH));
    assertEquals("114",metadata.get(Metadata.ISO_SPEED_RATINGS));
    assertEquals(null,metadata.get(Metadata.EQUIPMENT_MAKE));
    assertEquals(null,metadata.get(Metadata.EQUIPMENT_MODEL));
    assertEquals(null,metadata.get(Metadata.SOFTWARE));
    assertEquals("1",metadata.get(Metadata.ORIENTATION));
    assertEquals("300.0",metadata.get(Metadata.RESOLUTION_HORIZONTAL));
    assertEquals("300.0",metadata.get(Metadata.RESOLUTION_VERTICAL));
    assertEquals("Inch",metadata.get(Metadata.RESOLUTION_UNIT));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.parser.microsoft.ooxml.OOXMLParserTest </h4><pre class="type-9 type-7 type-14 type-4 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * We have a number of different powerpoint files,
 * such as presentation, macro-enabled etc
 */
@Test public void testPowerPoint() throws Exception {
  String[] extensions=new String[]{"pptx","pptm","ppsm","ppsx","potm"};
  String[] mimeTypes=new String[]{"application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint.presentation.macroenabled.12","application/vnd.ms-powerpoint.slideshow.macroenabled.12","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.template.macroenabled.12"};
  for (int i=0; i < extensions.length; i++) {
    String extension=extensions[i];
    String filename="testPPT." + extension;
    Parser parser=new AutoDetectParser();
    Metadata metadata=new Metadata();
    ContentHandler handler=new BodyContentHandler();
    ParseContext context=new ParseContext();
    try (InputStream input=getTestDocument(filename)){
      parser.parse(input,handler,metadata,context);
      assertEquals("Mime-type checking for " + filename,mimeTypes[i],metadata.get(Metadata.CONTENT_TYPE));
      assertEquals("Attachment Test",metadata.get(TikaCoreProperties.TITLE));
      assertEquals("Rajiv",metadata.get(TikaCoreProperties.CREATOR));
      assertEquals("Rajiv",metadata.get(Metadata.AUTHOR));
      String content=handler.toString();
      if (extension.equals("thmx")) {
        assertEquals("",content);
      }
 else {
        assertTrue("Text missing for " + filename + "\n"+ content,content.contains("Attachment Test"));
        assertTrue("Text missing for " + filename + "\n"+ content,content.contains("This is a test file data with the same content"));
        assertTrue("Text missing for " + filename + "\n"+ content,content.contains("content parsing"));
        assertTrue("Text missing for " + filename + "\n"+ content,content.contains("Different words to test against"));
        assertTrue("Text missing for " + filename + "\n"+ content,content.contains("Mystery"));
      }
    }
   }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.parser.pdf.PDFParserTest </h4><pre class="type-9 type-14 type-4 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testVersions() throws Exception {
  Map<String,String> dcFormat=new HashMap<String,String>();
  dcFormat.put("4.x","application/pdf; version=1.3");
  dcFormat.put("5.x","application/pdf; version=1.4");
  dcFormat.put("6.x","application/pdf; version=1.5");
  dcFormat.put("7.x","application/pdf; version=1.6");
  dcFormat.put("8.x","application/pdf; version=1.7");
  dcFormat.put("9.x","application/pdf; version=1.7");
  dcFormat.put("10.x","application/pdf; version=1.7");
  dcFormat.put("11.x.PDFA-1b","application/pdf; version=1.7");
  Map<String,String> pdfVersions=new HashMap<String,String>();
  pdfVersions.put("4.x","1.3");
  pdfVersions.put("5.x","1.4");
  pdfVersions.put("6.x","1.5");
  pdfVersions.put("7.x","1.6");
  pdfVersions.put("8.x","1.7");
  pdfVersions.put("9.x","1.7");
  pdfVersions.put("10.x","1.7");
  pdfVersions.put("11.x.PDFA-1b","1.7");
  Map<String,String> pdfExtensionVersions=new HashMap<String,String>();
  pdfExtensionVersions.put("9.x","1.7 Adobe Extension Level 3");
  pdfExtensionVersions.put("10.x","1.7 Adobe Extension Level 8");
  pdfExtensionVersions.put("11.x.PDFA-1b","1.7 Adobe Extension Level 8");
  Parser p=new AutoDetectParser();
  for (  Map.Entry<String,String> e : dcFormat.entrySet()) {
    String fName="testPDF_Version." + e.getKey() + ".pdf";
    InputStream is=PDFParserTest.class.getResourceAsStream("/test-documents/" + fName);
    Metadata m=new Metadata();
    ContentHandler h=new BodyContentHandler();
    ParseContext c=new ParseContext();
    p.parse(is,h,m,c);
    is.close();
    boolean foundDC=false;
    String[] vals=m.getValues("dc:format");
    for (    String v : vals) {
      if (v.equals(e.getValue())) {
        foundDC=true;
      }
    }
    assertTrue("dc:format ::" + e.getValue(),foundDC);
    String extensionVersionTruth=pdfExtensionVersions.get(e.getKey());
    if (extensionVersionTruth != null) {
      assertEquals("pdf:PDFExtensionVersion :: " + extensionVersionTruth,extensionVersionTruth,m.get("pdf:PDFExtensionVersion"));
    }
    assertEquals("pdf:PDFVersion",pdfVersions.get(e.getKey()),m.get("pdf:PDFVersion"));
  }
  String fName="testPDF_Version.11.x.PDFA-1b.pdf";
  InputStream is=PDFParserTest.class.getResourceAsStream("/test-documents/" + fName);
  Metadata m=new Metadata();
  ParseContext c=new ParseContext();
  ContentHandler h=new BodyContentHandler();
  p.parse(is,h,m,c);
  is.close();
  Set<String> versions=new HashSet<String>();
  for (  String fmt : m.getValues("dc:format")) {
    versions.add(fmt);
  }
  for (  String hit : new String[]{"application/pdf; version=1.7","application/pdf; version=\"A-1b\"","application/pdf; version=\"1.7 Adobe Extension Level 8\""}) {
    assertTrue(hit,versions.contains(hit));
  }
  assertEquals("pdfaid:conformance",m.get("pdfaid:conformance"),"B");
  assertEquals("pdfaid:part",m.get("pdfaid:part"),"1");
}

</code></pre>

<br>
<pre class="type-9 type-14 type-4 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * tests for equality between traditional sequential parser
 * and newer nonsequential parser.
 * <p/>
 * TODO: more testing
 */
@Test public void testSequentialParser() throws Exception {
  Parser sequentialParser=new AutoDetectParser();
  Parser nonSequentialParser=new AutoDetectParser();
  ParseContext seqContext=new ParseContext();
  PDFParserConfig seqConfig=new PDFParserConfig();
  seqConfig.setUseNonSequentialParser(false);
  seqContext.set(PDFParserConfig.class,seqConfig);
  ParseContext nonSeqContext=new ParseContext();
  PDFParserConfig nonSeqConfig=new PDFParserConfig();
  nonSeqConfig.setUseNonSequentialParser(true);
  nonSeqContext.set(PDFParserConfig.class,nonSeqConfig);
  File testDocs=new File(this.getClass().getResource("/test-documents").toURI());
  int pdfs=0;
  Set<String> knownMetadataDiffs=new HashSet<String>();
  Set<String> knownContentDiffs=new HashSet<String>();
  for (  File f : testDocs.listFiles()) {
    if (!f.getName().toLowerCase(Locale.ROOT).endsWith(".pdf")) {
      continue;
    }
    String sequentialContent=null;
    Metadata sequentialMetadata=new Metadata();
    try {
      sequentialContent=getText(new FileInputStream(f),sequentialParser,seqContext,sequentialMetadata);
    }
 catch (    EncryptedDocumentException e) {
      continue;
    }
catch (    Exception e) {
      throw new TikaException("Sequential Parser failed on test file " + f,e);
    }
    pdfs++;
    String nonSequentialContent=null;
    Metadata nonSequentialMetadata=new Metadata();
    try {
      nonSequentialContent=getText(new FileInputStream(f),nonSequentialParser,nonSeqContext,nonSequentialMetadata);
    }
 catch (    Exception e) {
      throw new TikaException("Non-Sequential Parser failed on test file " + f,e);
    }
    if (knownContentDiffs.contains(f.getName())) {
      assertFalse(f.getName(),sequentialContent.equals(nonSequentialContent));
    }
 else {
      assertEquals(f.getName(),sequentialContent,nonSequentialContent);
    }
    if (knownMetadataDiffs.contains(f.getName())) {
      assertFalse(f.getName(),sequentialMetadata.equals(nonSequentialMetadata));
    }
 else {
      assertEquals(f.getName(),sequentialMetadata,nonSequentialMetadata);
    }
  }
  boolean ge15=(pdfs >= 15);
  assertTrue("Number of pdf files tested >= 15 in non-sequential parser test",ge15);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.parser.pkg.Seven7ParserTest </h4><pre class="type-14 type-12 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPasswordProtected() throws Exception {
  Parser parser=new AutoDetectParser();
  ContentHandler handler=new BodyContentHandler();
  Metadata metadata=new Metadata();
  boolean ex=false;
  try (InputStream stream=Seven7ParserTest.class.getResourceAsStream("/test-documents/test7Z_protected_passTika.7z")){
    parser.parse(stream,handler,metadata,recursingContext);
    fail("Shouldn't be able to read a password protected 7z without the password");
  }
 catch (  EncryptedDocumentException e) {
    ex=true;
  }
  assertTrue("test no password",ex);
  ex=false;
  recursingContext.set(PasswordProvider.class,new PasswordProvider(){
    @Override public String getPassword(    Metadata metadata){
      return "wrong";
    }
  }
);
  handler=new BodyContentHandler();
  try (InputStream stream=Seven7ParserTest.class.getResourceAsStream("/test-documents/test7Z_protected_passTika.7z")){
    parser.parse(stream,handler,metadata,recursingContext);
    fail("Shouldn't be able to read a password protected 7z with wrong password");
  }
 catch (  TikaException e) {
    ex=true;
  }
  assertTrue("TikaException for bad password",ex);
  assertEquals("",handler.toString());
  ex=false;
  if (isStrongCryptoAvailable()) {
    recursingContext.set(PasswordProvider.class,new PasswordProvider(){
      @Override public String getPassword(      Metadata metadata){
        return "Tika";
      }
    }
);
    handler=new BodyContentHandler();
    try (InputStream stream=Seven7ParserTest.class.getResourceAsStream("/test-documents/test7Z_protected_passTika.7z")){
      parser.parse(stream,handler,metadata,recursingContext);
    }
     assertEquals(TYPE_7ZIP.toString(),metadata.get(Metadata.CONTENT_TYPE));
    String content=handler.toString();
    assertContains("text.txt",content);
    assertContains("TEST DATA FOR TIKA.",content);
    assertContains("This is text inside an encrypted 7zip (7z) file.",content);
    assertContains("It should be processed by Tika just fine!",content);
    assertContains("TIKA-1521",content);
  }
 else {
    boolean ioe=false;
    recursingContext.set(PasswordProvider.class,new PasswordProvider(){
      @Override public String getPassword(      Metadata metadata){
        return "Tika";
      }
    }
);
    handler=new BodyContentHandler();
    try (InputStream stream=Seven7ParserTest.class.getResourceAsStream("/test-documents/test7Z_protected_passTika.7z")){
      parser.parse(stream,handler,metadata,recursingContext);
    }
 catch (    TikaException e) {
      ioe=true;
    }
    assertTrue("IOException because JCE was not installed",ioe);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.parser.rtf.RTFParserTest </h4><pre class="type-9 type-7 type-14 type-2 type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmbeddedMonster() throws Exception {
  Set<MediaType> skipTypes=new HashSet<MediaType>();
  skipTypes.add(MediaType.parse("application/x-emf"));
  skipTypes.add(MediaType.parse("application/x-msmetafile"));
  List<String> trueNames=new ArrayList<String>();
  trueNames.add("file_0.doc");
  trueNames.add("Hw.txt");
  trueNames.add("file_1.xlsx");
  trueNames.add("test-zip-of-zip_\u666E\u6797\u65AF\u987F.zip");
  trueNames.add("html-within-zip.zip");
  trueNames.add("text.html");
  trueNames.add("testHTML_utf8_\u666E\u6797\u65AF\u987F.html");
  trueNames.add("testJPEG_\u666E\u6797\u65AF\u987F.jpg");
  trueNames.add("file_2.xls");
  trueNames.add("testMSG_\u666E\u6797\u65AF\u987F.msg");
  trueNames.add("file_3.pdf");
  trueNames.add("file_4.ppt");
  trueNames.add("file_5.pptx");
  trueNames.add("thumbnail.jpeg");
  trueNames.add("file_6.doc");
  trueNames.add("file_7.doc");
  trueNames.add("file_8.docx");
  trueNames.add("testJPEG_\u666E\u6797\u65AF\u987F.jpg");
  List<String> trueTypes=new ArrayList<String>();
  trueTypes.add("application/msword");
  trueTypes.add("text/plain");
  trueTypes.add("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
  trueTypes.add("application/zip");
  trueTypes.add("application/zip");
  trueTypes.add("text/html");
  trueTypes.add("text/html");
  trueTypes.add("image/jpeg");
  trueTypes.add("application/vnd.ms-excel");
  trueTypes.add("application/vnd.ms-outlook");
  trueTypes.add("application/pdf");
  trueTypes.add("application/vnd.ms-powerpoint");
  trueTypes.add("application/vnd.openxmlformats-officedocument.presentationml.presentation");
  trueTypes.add("image/jpeg");
  trueTypes.add("application/msword");
  trueTypes.add("application/msword");
  trueTypes.add("application/vnd.openxmlformats-officedocument.wordprocessingml.document");
  trueTypes.add("image/jpeg");
  TrackingHandler tracker=new TrackingHandler(skipTypes);
  try (TikaInputStream tis=TikaInputStream.get(getResourceAsStream("/test-documents/testRTFEmbeddedFiles.rtf"))){
    ContainerExtractor ex=new ParserContainerExtractor();
    assertEquals(true,ex.isSupported(tis));
    ex.extract(tis,ex,tracker);
  }
   assertEquals(trueNames.size(),tracker.filenames.size());
  assertEquals(trueTypes.size(),tracker.mediaTypes.size());
  for (int i=0; i < tracker.filenames.size(); i++) {
    String expectedName=trueNames.get(i);
    if (expectedName == null) {
      assertNull(tracker.filenames.get(i));
    }
 else {
      assertNotNull(tracker.filenames.get(i));
      assertEquals("filename equals ",expectedName,FilenameUtils.getName(tracker.filenames.get(i)));
    }
    assertEquals(trueTypes.get(i),tracker.mediaTypes.get(i).toString());
  }
  tracker=new TrackingHandler();
  try (TikaInputStream tis=TikaInputStream.get(getResourceAsStream("/test-documents/testRTFEmbeddedFiles.rtf"))){
    ContainerExtractor ex=new ParserContainerExtractor();
    assertEquals(true,ex.isSupported(tis));
    ex.extract(tis,ex,tracker);
  }
   assertEquals(47,tracker.filenames.size());
  assertEquals("thumbnail_26.emf",tracker.filenames.get(45));
  assertEquals("thumbnail_27.wmf",tracker.filenames.get(46));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.tika.server.TikaParsersTest </h4><pre class="type-9 type-14 type-4 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void testGetJSON() throws Exception {
  for (  boolean details : new boolean[]{false,true}) {
    Response response=WebClient.create(endPoint + getPath(details)).type(javax.ws.rs.core.MediaType.APPLICATION_JSON).accept(javax.ws.rs.core.MediaType.APPLICATION_JSON).get();
    String jsonStr=getStringFromInputStream((InputStream)response.getEntity());
    Map<String,Map<String,Object>> json=(Map<String,Map<String,Object>>)JSON.parse(jsonStr);
    assertEquals(true,json.containsKey("name"));
    assertEquals(true,json.containsKey("composite"));
    assertEquals(true,json.containsKey("children"));
    assertEquals("org.apache.tika.parser.DefaultParser",json.get("name"));
    assertEquals(Boolean.TRUE,json.get("composite"));
    Object[] children=(Object[])(Object)json.get("children");
    assertTrue(children.length >= 20);
    boolean hasOpus=false, hasOOXML=false, hasPDF=false, hasZip=false;
    int nonComposite=0;
    int composite=0;
    for (    Object o : children) {
      Map<String,Object> d=(Map<String,Object>)o;
      assertEquals(true,d.containsKey("name"));
      assertEquals(true,d.containsKey("composite"));
      if (d.get("composite") == Boolean.FALSE)       nonComposite++;
 else       composite++;
      if (d.get("composite") == Boolean.FALSE)       assertEquals(details,d.containsKey("supportedTypes"));
      String name=(String)d.get("name");
      if (OpusParser.class.getName().equals(name)) {
        hasOpus=true;
      }
      if (OOXMLParser.class.getName().equals(name)) {
        hasOOXML=true;
      }
      if (PDFParser.class.getName().equals(name)) {
        hasPDF=true;
      }
      if (PackageParser.class.getName().equals(name)) {
        hasZip=true;
      }
    }
    assertEquals(true,hasOpus);
    assertEquals(true,hasOOXML);
    assertEquals(true,hasPDF);
    assertEquals(true,hasZip);
    assertTrue(nonComposite > 20);
    assertTrue(composite == 0 || composite == 1);
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
