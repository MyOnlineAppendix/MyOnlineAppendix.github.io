<h3 style="margin:0px">Class: org.apache.tika.detect.TestContainerAwareDetector (16 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(14)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDetectZip() throws Exception {
  assertTypeByData("test-documents.zip","application/zip");
  assertTypeByData("test-zip-of-zip.zip","application/zip");
  assertTypeByData("testJAR.jar","application/java-archive");
  assertTypeByData("testWAR.war","application/x-tika-java-web-archive");
  assertTypeByData("testEAR.ear","application/x-tika-java-enterprise-archive");
  assertTypeByData("testAPK.apk","application/vnd.android.package-archive");
  assertTypeByNameAndData("testJAR_with_HTML.jar","testJAR_with_HTML.jar","application/java-archive","application/java-archive");
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDetectODF() throws Exception {
  assertTypeByData("testODFwithOOo3.odt","application/vnd.oasis.opendocument.text");
  assertTypeByData("testOpenOffice2.odf","application/vnd.oasis.opendocument.formula");
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDetectOLE2() throws Exception {
  assertTypeByData("testEXCEL.xls","application/vnd.ms-excel");
  assertTypeByData("testWORD.doc","application/msword");
  assertTypeByData("testPPT.ppt","application/vnd.ms-powerpoint");
  assertTypeByData("test-outlook.msg","application/vnd.ms-outlook");
  assertTypeByData("test-outlook2003.msg","application/vnd.ms-outlook");
  assertTypeByData("testVISIO.vsd","application/vnd.visio");
  assertTypeByData("testPUBLISHER.pub","application/x-mspublisher");
  assertTypeByData("testWORKS.wps","application/vnd.ms-works");
  assertTypeByData("testWORKS2000.wps","application/vnd.ms-works");
  assertTypeByData("testWORKSWordProcessor3.0.wps","application/vnd.ms-works");
  assertTypeByData("testWORKSWordProcessor4.0.wps","application/vnd.ms-works");
  assertTypeByData("testWORKSSpreadsheet7.0.xlr","application/x-tika-msworks-spreadsheet");
  assertTypeByData("testPROJECT2003.mpp","application/vnd.ms-project");
  assertTypeByData("testPROJECT2007.mpp","application/vnd.ms-project");
  assertTypeByData("testEXCEL_95.xls","application/vnd.ms-excel");
  assertTypeByData("testCOREL.shw","application/x-corelpresentations");
  assertTypeByData("testQUATTRO.qpw","application/x-quattro-pro");
  assertTypeByData("testQUATTRO.wb3","application/x-quattro-pro");
  assertTypeByData("testHWP_5.0.hwp","application/x-hwp-v5");
  assertTypeByNameAndData("testEXCEL.xls","application/vnd.ms-excel");
  assertTypeByNameAndData("testWORD.doc","application/msword");
  assertTypeByNameAndData("testPPT.ppt","application/vnd.ms-powerpoint");
  assertTypeByNameAndData("testEXCEL.xls","notWord.doc","application/vnd.ms-excel");
  assertTypeByNameAndData("testWORD.doc","notExcel.xls","application/msword");
  assertTypeByNameAndData("testPPT.ppt","notWord.doc","application/vnd.ms-powerpoint");
  assertTypeByNameAndData("testEXCEL.xls","notPDF.pdf","application/vnd.ms-excel");
  assertTypeByNameAndData("testEXCEL.xls","notPNG.png","application/vnd.ms-excel");
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Password Protected OLE2 files are fairly straightforward to detect, as they
 * have the same structure as regular OLE2 files. (Core streams may be encrypted
 * however)
 */
@Test public void testDetectProtectedOLE2() throws Exception {
  assertTypeByData("testEXCEL_protected_passtika.xls","application/vnd.ms-excel");
  assertTypeByData("testWORD_protected_passtika.doc","application/msword");
  assertTypeByData("testPPT_protected_passtika.ppt","application/vnd.ms-powerpoint");
  assertTypeByNameAndData("testEXCEL_protected_passtika.xls","application/vnd.ms-excel");
  assertTypeByNameAndData("testWORD_protected_passtika.doc","application/msword");
  assertTypeByNameAndData("testPPT_protected_passtika.ppt","application/vnd.ms-powerpoint");
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * There is no way to distinguish "proper" StarOffice files from templates.
 * All templates have the same extension but their actual type depends on
 * the magic. Our current MimeTypes class doesn't allow us to use the same
 * glob pattern in more than one mimetype.
 * @throws Exception
 */
@Test public void testDetectStarOfficeFiles() throws Exception {
  assertType("testStarOffice-5.2-calc.sdc","application/vnd.stardivision.calc","application/vnd.stardivision.calc");
  assertType("testVORCalcTemplate.vor","application/vnd.stardivision.calc","application/vnd.stardivision.calc");
  assertType("testStarOffice-5.2-draw.sda","application/vnd.stardivision.draw","application/vnd.stardivision.draw");
  assertType("testVORDrawTemplate.vor","application/vnd.stardivision.draw","application/vnd.stardivision.draw");
  assertType("testStarOffice-5.2-impress.sdd","application/vnd.stardivision.impress","application/vnd.stardivision.impress");
  assertType("testVORImpressTemplate.vor","application/vnd.stardivision.impress","application/vnd.stardivision.impress");
  assertType("testStarOffice-5.2-writer.sdw","application/vnd.stardivision.writer","application/vnd.stardivision.writer");
  assertType("testVORWriterTemplate.vor","application/vnd.stardivision.writer","application/vnd.stardivision.writer");
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDetectIPA() throws Exception {
  assertTypeByNameAndData("testIPA.ipa","application/x-itunes-ipa");
  assertTypeByData("testIPA.ipa","application/x-itunes-ipa");
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testASiC() throws Exception {
  assertTypeByData("testASiCE.asice","application/vnd.etsi.asic-e+zip");
  assertTypeByData("testASiCS.asics","application/vnd.etsi.asic-s+zip");
  assertTypeByNameAndData("testASiCE.asice","application/vnd.etsi.asic-e+zip");
  assertTypeByNameAndData("testASiCS.asics","application/vnd.etsi.asic-s+zip");
}

</code></pre>

<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTruncatedFiles() throws Exception {
  Metadata m=new Metadata();
  try (TikaInputStream xlsx=getTruncatedFile("testEXCEL.xlsx",300)){
    assertEquals(MediaType.application("x-tika-ooxml"),detector.detect(xlsx,m));
  }
   m=new Metadata();
  m.add(Metadata.RESOURCE_NAME_KEY,"testEXCEL.xlsx");
  try (TikaInputStream xlsx=getTruncatedFile("testEXCEL.xlsx",300)){
    assertEquals(MediaType.application("vnd.openxmlformats-officedocument.spreadsheetml.sheet"),detector.detect(xlsx,m));
  }
   m=new Metadata();
  try (TikaInputStream xls=getTruncatedFile("testEXCEL.xls",400)){
    assertEquals(MediaType.application("x-tika-msoffice"),detector.detect(xls,m));
  }
   m=new Metadata();
  m.add(Metadata.RESOURCE_NAME_KEY,"testEXCEL.xls");
  try (TikaInputStream xls=getTruncatedFile("testEXCEL.xls",400)){
    assertEquals(MediaType.application("vnd.ms-excel"),detector.detect(xls,m));
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * EPub uses a similar mimetype entry to OpenDocument for storing
 * the mimetype within the parent zip file
 */
@Test public void testDetectEPub() throws Exception {
  assertTypeByData("testEPUB.epub","application/epub+zip");
  assertTypeByData("testiBooks.ibooks","application/x-ibooks+zip");
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Check that temporary files created by Tika are removed after
 * closing TikaInputStream.
 */
@Test public void testRemovalTempfiles() throws Exception {
  assertRemovalTempfiles("testWORD.docx");
  assertRemovalTempfiles("test-documents.zip");
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDetectKMZ() throws Exception {
  assertTypeByData("testKMZ.kmz","application/vnd.google-earth.kmz");
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDetectOOXML() throws Exception {
  assertTypeByData("testEXCEL.xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
  assertTypeByData("testWORD.docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document");
  assertTypeByData("testPPT.pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation");
  assertTypeByData("testPPT.pptm","application/vnd.ms-powerpoint.presentation.macroenabled.12");
  assertTypeByData("testPPT.ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow");
  assertTypeByData("testPPT.ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12");
  assertTypeByData("testDOTM.dotm","application/vnd.ms-word.template.macroEnabled.12");
  assertTypeByData("testEXCEL.strict.xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
  assertTypeByData("testPPT.xps","application/vnd.ms-xpsdocument");
  assertTypeByData("testVISIO.vsdm","application/vnd.ms-visio.drawing.macroenabled.12");
  assertTypeByData("testVISIO.vsdx","application/vnd.ms-visio.drawing");
  assertTypeByData("testVISIO.vssm","application/vnd.ms-visio.stencil.macroenabled.12");
  assertTypeByData("testVISIO.vssx","application/vnd.ms-visio.stencil");
  assertTypeByData("testVISIO.vstm","application/vnd.ms-visio.template.macroenabled.12");
  assertTypeByData("testVISIO.vstx","application/vnd.ms-visio.template");
  assertTypeByData("testEXCEL.xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12");
  assertTypeByNameAndData("testEXCEL.xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
  assertTypeByNameAndData("testWORD.docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document");
  assertTypeByNameAndData("testPPT.pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation");
  assertTypeByNameAndData("testEXCEL.xlsx","notWord.docx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
  assertTypeByNameAndData("testWORD.docx","notExcel.xlsx","application/vnd.openxmlformats-officedocument.wordprocessingml.document");
  assertTypeByNameAndData("testPPT.pptx","notWord.docx","application/vnd.openxmlformats-officedocument.presentationml.presentation");
  assertTypeByNameAndData("testEXCEL.xlsx","notOldExcel.xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDetectLotusNotesEml() throws Exception {
  assertTypeByData("testLotusEml.eml","message/rfc822");
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDetectIWork() throws Exception {
  assertTypeByData("testKeynote.key","application/vnd.apple.keynote");
  assertTypeByData("testNumbers.numbers","application/vnd.apple.numbers");
  assertTypeByData("testPages.pages","application/vnd.apple.pages");
}

</code></pre>

<pre class="type-4 type-5 type-2 type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOpenContainer() throws Exception {
  try (TikaInputStream stream=TikaInputStream.get(TestContainerAwareDetector.class.getResource("/test-documents/testPPT.ppt"))){
    assertNull(stream.getOpenContainer());
    assertEquals(MediaType.parse("application/vnd.ms-powerpoint"),detector.detect(stream,new Metadata()));
    assertTrue(stream.getOpenContainer() instanceof NPOIFSFileSystem);
  }
 }

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Password Protected OOXML files are much more tricky beasts to work with.
 * They have a very different structure to regular OOXML files, and instead
 * of being ZIP based they are actually an OLE2 file which contains the
 * OOXML structure within an encrypted stream.
 * This makes detecting them much harder...
 */
@Test public void testDetectProtectedOOXML() throws Exception {
  assertTypeByData("testEXCEL_protected_passtika.xlsx","application/x-tika-ooxml-protected");
  assertTypeByData("testWORD_protected_passtika.docx","application/x-tika-ooxml-protected");
  assertTypeByData("testPPT_protected_passtika.pptx","application/x-tika-ooxml-protected");
  assertTypeByNameAndData("testEXCEL_protected_passtika.xlsx","application/x-tika-ooxml-protected");
  assertTypeByNameAndData("testWORD_protected_passtika.docx","application/x-tika-ooxml-protected");
  assertTypeByNameAndData("testPPT_protected_passtika.pptx","application/x-tika-ooxml-protected");
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
