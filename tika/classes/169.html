<h3 style="margin:0px">Class: org.apache.tika.parser.txt.TXTParserTest (11 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(10)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(6)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(1)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test case for TIKA-339: don't override incoming language
 * @see <a href="https://issues.apache.org/jira/browse/TIKA-335">TIKA-335</a>
 */
@Test public void testRetainIncomingLanguage() throws Exception {
  final String test="Simple Content";
  Metadata metadata=new Metadata();
  metadata.set(TikaCoreProperties.LANGUAGE,"en");
  parser.parse(new ByteArrayInputStream(test.getBytes(UTF_8)),new BodyContentHandler(),metadata,new ParseContext());
  assertEquals("en",metadata.get(TikaCoreProperties.LANGUAGE));
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEmptyText() throws Exception {
  ContentHandler handler=new BodyContentHandler();
  Metadata metadata=new Metadata();
  parser.parse(new ByteArrayInputStream(new byte[0]),handler,metadata,new ParseContext());
  assertEquals("text/plain; charset=UTF-8",metadata.get(Metadata.CONTENT_TYPE));
  assertEquals("\n",handler.toString());
}

</code></pre>

<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test case for TIKA-771: "Hello, World!" in UTF-8/ASCII gets detected as IBM500
 * @see <a href="https://issues.apache.org/jira/browse/TIKA-771">TIKA-771</a>
 */
@Test public void testCharsetDetectionWithShortSnipet() throws Exception {
  final String text="Hello, World!";
  Metadata metadata=new Metadata();
  parser.parse(new ByteArrayInputStream(text.getBytes(UTF_8)),new BodyContentHandler(),metadata,new ParseContext());
  assertEquals("text/plain; charset=ISO-8859-1",metadata.get(Metadata.CONTENT_TYPE));
  metadata.set(Metadata.CONTENT_TYPE,"application/binary; charset=UTF-8");
  parser.parse(new ByteArrayInputStream(text.getBytes(UTF_8)),new BodyContentHandler(),metadata,new ParseContext());
  assertEquals("text/plain; charset=UTF-8",metadata.get(Metadata.CONTENT_TYPE));
}

</code></pre>

<pre class="type-4 type-2 type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEnglishText() throws Exception {
  String text="Hello, World! This is simple UTF-8 text content written" + " in English to test autodetection of both the character" + " encoding and the language of the input stream.";
  Metadata metadata=new Metadata();
  StringWriter writer=new StringWriter();
  parser.parse(new ByteArrayInputStream(text.getBytes(ISO_8859_1)),new WriteOutContentHandler(writer),metadata,new ParseContext());
  String content=writer.toString();
  assertEquals("text/plain; charset=ISO-8859-1",metadata.get(Metadata.CONTENT_TYPE));
  assertNull(metadata.get(Metadata.CONTENT_LANGUAGE));
  assertNull(metadata.get(TikaCoreProperties.LANGUAGE));
  assertContains("Hello",content);
  assertContains("World",content);
  assertContains("autodetection",content);
  assertContains("stream",content);
}

</code></pre>

<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test case for TIKA-341: using charset in content-type
 * @see <a href="https://issues.apache.org/jira/browse/TIKA-341">TIKA-341</a>
 */
@Test public void testUsingCharsetInContentTypeHeader() throws Exception {
  final String test2="the name is \u00e1ndre";
  Metadata metadata=new Metadata();
  parser.parse(new ByteArrayInputStream(test2.getBytes(ISO_8859_1)),new BodyContentHandler(),metadata,new ParseContext());
  assertEquals("text/plain; charset=ISO-8859-1",metadata.get(Metadata.CONTENT_TYPE));
  assertEquals("ISO-8859-1",metadata.get(Metadata.CONTENT_ENCODING));
  metadata=new Metadata();
  metadata.set(Metadata.CONTENT_TYPE,"text/html; charset=ISO-8859-15");
  parser.parse(new ByteArrayInputStream(test2.getBytes(ISO_8859_1)),new BodyContentHandler(),metadata,new ParseContext());
  assertEquals("text/plain; charset=ISO-8859-15",metadata.get(Metadata.CONTENT_TYPE));
  assertEquals("ISO-8859-15",metadata.get(Metadata.CONTENT_ENCODING));
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEBCDIC_CP500() throws Exception {
  Metadata metadata=new Metadata();
  StringWriter writer=new StringWriter();
  parser.parse(TXTParserTest.class.getResourceAsStream("/test-documents/english.cp500.txt"),new WriteOutContentHandler(writer),metadata,new ParseContext());
  assertEquals("text/plain; charset=IBM500",metadata.get(Metadata.CONTENT_TYPE));
  metadata=new Metadata();
  writer=new StringWriter();
  parser.parse(new ByteArrayInputStream("<html><body>hello world</body></html>".getBytes(ISO_8859_1)),new WriteOutContentHandler(writer),metadata,new ParseContext());
  assertEquals("text/plain; charset=ISO-8859-1",metadata.get(Metadata.CONTENT_TYPE));
}

</code></pre>

<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUTF8Text() throws Exception {
  String text="I\u00F1t\u00EBrn\u00E2ti\u00F4n\u00E0liz\u00E6ti\u00F8n";
  ContentHandler handler=new BodyContentHandler();
  Metadata metadata=new Metadata();
  parser.parse(new ByteArrayInputStream(text.getBytes(UTF_8)),handler,metadata,new ParseContext());
  assertEquals("text/plain; charset=UTF-8",metadata.get(Metadata.CONTENT_TYPE));
  assertEquals("UTF-8",metadata.get(Metadata.CONTENT_ENCODING));
  assertContains(text,handler.toString());
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test for the heuristics that we use to assign an eight-bit character
 * encoding to mostly ASCII sequences. If a more specific match can not
 * be made, a string with a CR(LF) in it is most probably windows-1252,
 * otherwise ISO-8859-1, except if it contains the currency/euro symbol
 * (byte 0xa4) in which case it's more likely to be ISO-8859-15.
 */
@Test public void testLatinDetectionHeuristics() throws Exception {
  String windows="test\r\n";
  String unix="test\n";
  String euro="test \u20ac\n";
  Metadata metadata;
  metadata=new Metadata();
  parser.parse(new ByteArrayInputStream(windows.getBytes("ISO-8859-15")),new DefaultHandler(),metadata,new ParseContext());
  assertEquals("text/plain; charset=windows-1252",metadata.get(Metadata.CONTENT_TYPE));
  metadata=new Metadata();
  parser.parse(new ByteArrayInputStream(unix.getBytes("ISO-8859-15")),new DefaultHandler(),metadata,new ParseContext());
  assertEquals("text/plain; charset=ISO-8859-1",metadata.get(Metadata.CONTENT_TYPE));
  metadata=new Metadata();
  parser.parse(new ByteArrayInputStream(euro.getBytes("ISO-8859-15")),new DefaultHandler(),metadata,new ParseContext());
  assertEquals("text/plain; charset=ISO-8859-15",metadata.get(Metadata.CONTENT_TYPE));
}

</code></pre>

<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test case for TIKA-335: using incoming charset
 * @see <a href="https://issues.apache.org/jira/browse/TIKA-335">TIKA-335</a>
 */
@Test public void testUseIncomingCharsetAsHint() throws Exception {
  final String test2="the name is \u00e1ndre";
  Metadata metadata=new Metadata();
  parser.parse(new ByteArrayInputStream(test2.getBytes(ISO_8859_1)),new BodyContentHandler(),metadata,new ParseContext());
  assertEquals("text/plain; charset=ISO-8859-1",metadata.get(Metadata.CONTENT_TYPE));
  assertEquals("ISO-8859-1",metadata.get(Metadata.CONTENT_ENCODING));
  metadata.set(Metadata.CONTENT_TYPE,"text/plain; charset=ISO-8859-15");
  parser.parse(new ByteArrayInputStream(test2.getBytes(ISO_8859_1)),new BodyContentHandler(),metadata,new ParseContext());
  assertEquals("text/plain; charset=ISO-8859-15",metadata.get(Metadata.CONTENT_TYPE));
  assertEquals("ISO-8859-15",metadata.get(Metadata.CONTENT_ENCODING));
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test case for TIKA-240: Drop the BOM when extracting plain text
 * @see <a href="https://issues.apache.org/jira/browse/TIKA-240">TIKA-240</a>
 */
@Test public void testDropByteOrderMark() throws Exception {
  assertExtractText("UTF-8 BOM","test",new byte[]{(byte)0xEF,(byte)0xBB,(byte)0xBF,'t','e','s','t'});
  assertExtractText("UTF-16 BE BOM","test",new byte[]{(byte)0xFE,(byte)0xFF,0,'t',0,'e',0,'s',0,'t'});
  assertExtractText("UTF-16 LE BOM","test",new byte[]{(byte)0xFF,(byte)0xFE,'t',0,'e',0,'s',0,'t',0});
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCP866() throws Exception {
  Metadata metadata=new Metadata();
  StringWriter writer=new StringWriter();
  parser.parse(TXTParserTest.class.getResourceAsStream("/test-documents/russian.cp866.txt"),new WriteOutContentHandler(writer),metadata,new ParseContext());
  assertEquals("text/plain; charset=IBM866",metadata.get(Metadata.CONTENT_TYPE));
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
