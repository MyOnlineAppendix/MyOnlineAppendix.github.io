<h3 style="margin:0px">Class: org.apache.commons.compress.archivers.zip.ZipFileTest (13 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(9)</kbd></button>&nbsp;<button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(7)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(5)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(2)</kbd></button>&nbsp;<button id="12"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('12')" data-toggle="tooltip" title="Verifies assertions inside branch conditions"><kbd id="tag-12"class="label-info"style="display: inline-block;font-size:7pt" >BranchVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="13"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('13')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-13"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Releases resources used by the test cases"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >TestCleaner&nbsp;(1)</kbd></button>&nbsp;<button id="14"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('14')" data-toggle="tooltip" title="Verifies assertions in iterations"><kbd id="tag-14"class="label-info"style="display: inline-block;font-size:7pt" >IterativeVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
"></span><br>
@After public void tearDown(){
  ZipFile.closeQuietly(zf);
}

</code></pre>

<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPhysicalOrder() throws Exception {
  readOrderTest();
  ArrayList<ZipArchiveEntry> l=Collections.list(zf.getEntriesInPhysicalOrder());
  assertEntryName(l,0,"AbstractUnicodeExtraField");
  assertEntryName(l,1,"AsiExtraField");
  assertEntryName(l,2,"ExtraFieldUtils");
  assertEntryName(l,3,"FallbackZipEncoding");
  assertEntryName(l,4,"GeneralPurposeBit");
  assertEntryName(l,5,"JarMarker");
  assertEntryName(l,6,"NioZipEncoding");
  assertEntryName(l,7,"Simple8BitZipEncoding");
  assertEntryName(l,8,"UnicodeCommentExtraField");
  assertEntryName(l,9,"UnicodePathExtraField");
  assertEntryName(l,10,"UnixStat");
  assertEntryName(l,11,"UnparseableExtraFieldData");
  assertEntryName(l,12,"UnrecognizedExtraField");
  assertEntryName(l,13,"ZipArchiveEntry");
  assertEntryName(l,14,"ZipArchiveInputStream");
  assertEntryName(l,15,"ZipArchiveOutputStream");
  assertEntryName(l,16,"ZipEncoding");
  assertEntryName(l,17,"ZipEncodingHelper");
  assertEntryName(l,18,"ZipExtraField");
  assertEntryName(l,19,"ZipFile");
  assertEntryName(l,20,"ZipLong");
  assertEntryName(l,21,"ZipShort");
  assertEntryName(l,22,"ZipUtil");
}

</code></pre>

<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCDOrder() throws Exception {
  readOrderTest();
  ArrayList<ZipArchiveEntry> l=Collections.list(zf.getEntries());
  assertEntryName(l,0,"AbstractUnicodeExtraField");
  assertEntryName(l,1,"AsiExtraField");
  assertEntryName(l,2,"ExtraFieldUtils");
  assertEntryName(l,3,"FallbackZipEncoding");
  assertEntryName(l,4,"GeneralPurposeBit");
  assertEntryName(l,5,"JarMarker");
  assertEntryName(l,6,"NioZipEncoding");
  assertEntryName(l,7,"Simple8BitZipEncoding");
  assertEntryName(l,8,"UnicodeCommentExtraField");
  assertEntryName(l,9,"UnicodePathExtraField");
  assertEntryName(l,10,"UnixStat");
  assertEntryName(l,11,"UnparseableExtraFieldData");
  assertEntryName(l,12,"UnrecognizedExtraField");
  assertEntryName(l,13,"ZipArchiveEntry");
  assertEntryName(l,14,"ZipArchiveInputStream");
  assertEntryName(l,15,"ZipArchiveOutputStream");
  assertEntryName(l,16,"ZipEncoding");
  assertEntryName(l,17,"ZipEncodingHelper");
  assertEntryName(l,18,"ZipExtraField");
  assertEntryName(l,19,"ZipUtil");
  assertEntryName(l,20,"ZipLong");
  assertEntryName(l,21,"ZipShort");
  assertEntryName(l,22,"ZipFile");
}

</code></pre>

<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testDoubleClose() throws Exception {
  readOrderTest();
  zf.close();
  try {
    zf.close();
  }
 catch (  Exception ex) {
    fail("Caught exception of second close");
  }
}

</code></pre>

<pre class="type-8 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * Test case for 
 * <a href="https://issues.apache.org/jira/browse/COMPRESS-208"
 * >COMPRESS-208</a>.
 */
@Test public void testSkipsPK00Prefix() throws Exception {
  File archive=getFile("COMPRESS-208.zip");
  zf=new ZipFile(archive);
  assertNotNull(zf.getEntry("test1.xml"));
  assertNotNull(zf.getEntry("test2.xml"));
}

</code></pre>

<pre class="type-8 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * @see "https://issues.apache.org/jira/browse/COMPRESS-176"
 */
@Test public void testWinzipBackSlashWorkaround() throws Exception {
  File archive=getFile("test-winzip.zip");
  zf=new ZipFile(archive);
  assertNull(zf.getEntry("\u00e4\\\u00fc.txt"));
  assertNotNull(zf.getEntry("\u00e4/\u00fc.txt"));
}

</code></pre>

<pre class="type-13 type-14 type-12 type-8 type-7 type-9 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnixSymlinkSampleFile() throws Exception {
  final String entryPrefix="COMPRESS-214_unix_symlinks/";
  final TreeMap<String,String> expectedVals=new TreeMap<String,String>();
  expectedVals.put(entryPrefix + "link1","../COMPRESS-214_unix_symlinks/./a/b/c/../../../\uF999");
  expectedVals.put(entryPrefix + "link2","../COMPRESS-214_unix_symlinks/./a/b/c/../../../g");
  expectedVals.put(entryPrefix + "link3","../COMPRESS-214_unix_symlinks/././a/b/c/../../../\u76F4\u6A39");
  expectedVals.put(entryPrefix + "link4","\u82B1\u5B50/\u745B\u5B50");
  expectedVals.put(entryPrefix + "\uF999","./\u82B1\u5B50/\u745B\u5B50/\u5897\u8C37/\uF999");
  expectedVals.put(entryPrefix + "g","./a/b/c/d/e/f/g");
  expectedVals.put(entryPrefix + "\u76F4\u6A39","./g");
  expectedVals.put(entryPrefix + "link5","../COMPRESS-214_unix_symlinks/././a/b");
  expectedVals.put(entryPrefix + "link6","../COMPRESS-214_unix_symlinks/././a/b/");
  File archive=getFile("COMPRESS-214_unix_symlinks.zip");
  zf=new ZipFile(archive);
  Enumeration<ZipArchiveEntry> en=zf.getEntries();
  while (en.hasMoreElements()) {
    ZipArchiveEntry zae=en.nextElement();
    String link=zf.getUnixSymlink(zae);
    if (zae.isUnixSymlink()) {
      String name=zae.getName();
      String expected=expectedVals.get(name);
      assertEquals(expected,link);
    }
 else {
      assertNull(link);
    }
  }
}

</code></pre>

<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUnshrinking() throws Exception {
  zf=new ZipFile(getFile("SHRUNK.ZIP"));
  ZipArchiveEntry test=zf.getEntry("TEST1.XML");
  FileInputStream original=new FileInputStream(getFile("test1.xml"));
  try {
    assertArrayEquals(IOUtils.toByteArray(original),IOUtils.toByteArray(zf.getInputStream(test)));
  }
  finally {
    original.close();
  }
  test=zf.getEntry("TEST2.XML");
  original=new FileInputStream(getFile("test2.xml"));
  try {
    assertArrayEquals(IOUtils.toByteArray(original),IOUtils.toByteArray(zf.getInputStream(test)));
  }
  finally {
    original.close();
  }
}

</code></pre>

<pre class="type-8 type-7 type-9 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadingOfStoredEntry() throws Exception {
  File f=File.createTempFile("commons-compress-zipfiletest",".zip");
  f.deleteOnExit();
  OutputStream o=null;
  InputStream i=null;
  try {
    o=new FileOutputStream(f);
    ZipArchiveOutputStream zo=new ZipArchiveOutputStream(o);
    ZipArchiveEntry ze=new ZipArchiveEntry("foo");
    ze.setMethod(ZipEntry.STORED);
    ze.setSize(4);
    ze.setCrc(0xb63cfbcdl);
    zo.putArchiveEntry(ze);
    zo.write(new byte[]{1,2,3,4});
    zo.closeArchiveEntry();
    zo.close();
    o.close();
    o=null;
    zf=new ZipFile(f);
    ze=zf.getEntry("foo");
    assertNotNull(ze);
    i=zf.getInputStream(ze);
    byte[] b=new byte[4];
    assertEquals(4,i.read(b));
    assertEquals(-1,i.read());
  }
  finally {
    if (o != null) {
      o.close();
    }
    if (i != null) {
      i.close();
    }
    f.delete();
  }
}

</code></pre>

<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @see "https://issues.apache.org/jira/browse/COMPRESS-228"
 */
@Test public void testExcessDataInZip64ExtraField() throws Exception {
  File archive=getFile("COMPRESS-228.zip");
  zf=new ZipFile(archive);
  ZipArchiveEntry ze=zf.getEntry("src/main/java/org/apache/commons/compress/archivers/zip/ZipFile.java");
  assertEquals(26101,ze.getSize());
}

</code></pre>

<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test case for 
 * <a href="https://issues.apache.org/jira/browse/COMPRESS-264"
 * >COMPRESS-264</a>.
 */
@Test public void testReadingOfFirstStoredEntry() throws Exception {
  File archive=getFile("COMPRESS-264.zip");
  zf=new ZipFile(archive);
  ZipArchiveEntry ze=zf.getEntry("test.txt");
  assertEquals(5,ze.getSize());
  assertArrayEquals(new byte[]{'d','a','t','a','\n'},IOUtils.toByteArray(zf.getInputStream(ze)));
}

</code></pre>

<pre class="type-8 type-7 type-9 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @see "https://issues.apache.org/jira/browse/COMPRESS-227"
 */
@Test public void testDuplicateEntry() throws Exception {
  File archive=getFile("COMPRESS-227.zip");
  zf=new ZipFile(archive);
  ZipArchiveEntry ze=zf.getEntry("test1.txt");
  assertNotNull(ze);
  assertNotNull(zf.getInputStream(ze));
  int numberOfEntries=0;
  for (  ZipArchiveEntry entry : zf.getEntries("test1.txt")) {
    numberOfEntries++;
    assertNotNull(zf.getInputStream(entry));
  }
  assertEquals(2,numberOfEntries);
}

</code></pre>

<pre class="type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUnzipBZip2CompressedEntry() throws Exception {
  File archive=getFile("bzip2-zip.zip");
  zf=new ZipFile(archive);
  ZipArchiveEntry ze=zf.getEntry("lots-of-as");
  assertEquals(42,ze.getSize());
  byte[] expected=new byte[42];
  Arrays.fill(expected,(byte)'a');
  assertArrayEquals(expected,IOUtils.toByteArray(zf.getInputStream(ze)));
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
