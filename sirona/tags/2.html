<h3><span class=" glyphicon glyphicon-tag"/>&nbspEqualityVerifier</h3><kbd>Verifies whether objects/variable are equal to an expected value </kbd><br><br><br><h4 style="margin:0px">Class: org.apache.sirona.agent.ehcache.EhCacheGaugesTest </h4><pre class="type-7 type-4 type-1 type-5 type-6 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cacheGauges() throws Exception {
  new EhCacheCachesCountManagerGauge(mgr);
  final Set<?> registeredListeners=mgr.getCacheManagerEventListenerRegistry().getRegisteredListeners();
  assertEquals(1,registeredListeners.size());
  final Object listener=registeredListeners.iterator().next();
  final Map<String,Collection<Gauge>> gauges=getField(listener,"children");
  assertTrue(gauges.isEmpty());
  mgr.addCache("cache1");
  assertEquals(1,gauges.size());
  for (  final Gauge g : gauges.values().iterator().next()) {
    if (g.role().getName().equals("ehcache-__DEFAULT__-cacheHitCount")) {
      assertEquals(0.,g.value(),0.);
      mgr.getCache("cache1").put(new Element("k","v",0));
      mgr.getCache("cache1").get("k");
      mgr.getCache("cache1").get("k");
      assertEquals(2.,g.value(),0.);
      return;
    }
  }
  fail("gauge not found");
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void register(){
  assertEquals(3,EhCacheGaugeFactory.register(mgr).size());
}

</code></pre>

<br>
<pre class="type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void ehCacheTransactionCommittedCountManagerGauge(){
  final Gauge gauge=new EhCacheTransactionCommittedCountManagerGauge(mgr);
  assertEquals(0.,gauge.value(),0.);
  mgr.getTransactionController().begin();
  mgr.getTransactionController().commit();
  assertEquals(1.,gauge.value(),0.);
}

</code></pre>

<br>
<pre class="type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void cacheGaugesUnregister() throws Exception {
  new EhCacheCachesCountManagerGauge(mgr);
  final Map<String,Collection<Gauge>> gauges=getField(mgr.getCacheManagerEventListenerRegistry().getRegisteredListeners().iterator().next(),"children");
  mgr.addCache("cache1");
  assertEquals(1,gauges.size());
  mgr.removeCache("cache1");
  assertEquals(0,gauges.size());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void factory(){
  assertEquals(3,new EhCacheGaugeFactory().gauges().length);
  new CacheManager(new Configuration().name("other"));
  assertEquals(6,new EhCacheGaugeFactory().gauges().length);
}

</code></pre>

<br>
<pre class="type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void ehCacheCachesCountManagerGauge(){
  final Gauge gauge=new EhCacheCachesCountManagerGauge(mgr);
  assertEquals(0.,gauge.value(),0.);
  mgr.addCacheIfAbsent("cache1");
  assertEquals(1.,gauge.value(),0.);
  mgr.addCacheIfAbsent("cache2");
  assertEquals(2.,gauge.value(),0.);
  mgr.removeCache("cache1");
  assertEquals(1.,gauge.value(),0.);
}

</code></pre>

<br>
<pre class="type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void ehCacheTransactionRollbackedCountManagerGauge(){
  final Gauge gauge=new EhCacheTransactionRollbackedCountManagerGauge(mgr);
  assertEquals(0.,gauge.value(),0.);
  mgr.getTransactionController().begin();
  mgr.getTransactionController().rollback();
  assertEquals(1.,gauge.value(),0.);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.agent.jaxrs.cxf.CXF26PerformanceTest </h4><pre class="type-7 type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void ambiguousPathSegments() throws IOException {
  final Page page=new WebClient().getPage(base.toExternalForm() + "api/service/foo/foo");
  assertEquals(HttpURLConnection.HTTP_OK,page.getWebResponse().getStatusCode());
  assertEquals("foofoo",page.getWebResponse().getContentAsString());
  assertEquals(1,Repository.INSTANCE.counters().size());
  final String name="GET-/sirona-cxf26/api/service/{a}/{b}";
  assertEquals(name,Repository.INSTANCE.counters().iterator().next().getKey().getName());
  final Counter hitCounter=Repository.INSTANCE.getCounter(new Counter.Key(CxfJaxRsPerformanceHandler.ROLE,name));
  assertEquals(1,hitCounter.getHits());
}

</code></pre>

<br>
<pre class="type-7 type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void onePathSegment() throws IOException {
  final Page page=new WebClient().getPage(base.toExternalForm() + "api/service/simple?ignored=true");
  assertEquals(HttpURLConnection.HTTP_OK,page.getWebResponse().getStatusCode());
  assertEquals("simple",page.getWebResponse().getContentAsString());
  assertEquals(1,Repository.INSTANCE.counters().size());
  final String name="GET-/sirona-cxf26/api/service/{name}";
  assertEquals(name,Repository.INSTANCE.counters().iterator().next().getKey().getName());
  final Counter hitCounter=Repository.INSTANCE.getCounter(new Counter.Key(CxfJaxRsPerformanceHandler.ROLE,name));
  assertEquals(1,hitCounter.getHits());
}

</code></pre>

<br>
<pre class="type-7 type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void twoPathSegments() throws IOException {
  final Page page=new WebClient().getPage(base.toExternalForm() + "api/service/foo/bar");
  assertEquals(HttpURLConnection.HTTP_OK,page.getWebResponse().getStatusCode());
  assertEquals("foobar",page.getWebResponse().getContentAsString());
  assertEquals(1,Repository.INSTANCE.counters().size());
  final String name="GET-/sirona-cxf26/api/service/{a}/{b}";
  assertEquals(name,Repository.INSTANCE.counters().iterator().next().getKey().getName());
  final Counter hitCounter=Repository.INSTANCE.getCounter(new Counter.Key(CxfJaxRsPerformanceHandler.ROLE,name));
  assertEquals(1,hitCounter.getHits());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.agent.jaxrs.jaxrs2.JAXRS2PerformanceTest </h4><pre class="type-7 type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void onePathSegment() throws IOException {
  final Page page=new WebClient().getPage(base.toExternalForm() + "api/service/simple?ignored=true");
  assertEquals(HttpURLConnection.HTTP_OK,page.getWebResponse().getStatusCode());
  assertEquals("simple",page.getWebResponse().getContentAsString());
  assertEquals(1,Repository.INSTANCE.counters().size());
  final String name="GET-/sirona-jaxrs2/api/service/{name}";
  assertEquals(name,Repository.INSTANCE.counters().iterator().next().getKey().getName());
  final Counter hitCounter=Repository.INSTANCE.getCounter(new Counter.Key(PerformanceServerFilter.ROLE,name));
  assertEquals(1,hitCounter.getHits());
}

</code></pre>

<br>
<pre class="type-7 type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void ambiguousPathSegments() throws IOException {
  final Page page=new WebClient().getPage(base.toExternalForm() + "api/service/foo/foo");
  assertEquals(HttpURLConnection.HTTP_OK,page.getWebResponse().getStatusCode());
  assertEquals("foofoo",page.getWebResponse().getContentAsString());
  assertEquals(1,Repository.INSTANCE.counters().size());
  final String name="GET-/sirona-jaxrs2/api/service/{a}/{b}";
  assertEquals(name,Repository.INSTANCE.counters().iterator().next().getKey().getName());
  final Counter hitCounter=Repository.INSTANCE.getCounter(new Counter.Key(PerformanceServerFilter.ROLE,name));
  assertEquals(1,hitCounter.getHits());
}

</code></pre>

<br>
<pre class="type-7 type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void twoPathSegments() throws IOException {
  final Page page=new WebClient().getPage(base.toExternalForm() + "api/service/foo/bar");
  assertEquals(HttpURLConnection.HTTP_OK,page.getWebResponse().getStatusCode());
  assertEquals("foobar",page.getWebResponse().getContentAsString());
  assertEquals(1,Repository.INSTANCE.counters().size());
  final String name="GET-/sirona-jaxrs2/api/service/{a}/{b}";
  assertEquals(name,Repository.INSTANCE.counters().iterator().next().getKey().getName());
  final Counter hitCounter=Repository.INSTANCE.getCounter(new Counter.Key(PerformanceServerFilter.ROLE,name));
  assertEquals(1,hitCounter.getHits());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.agent.webapp.pull.PullAnswerTest </h4><pre class="type-6 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void json(){
  final JSONArray snapshotJson=JSONArray.class.cast(JSONSerializer.toJSON(createRepo().snapshot().replaceAll("\"time\": \"[^\"]*\"","\"time\": \"assert\"").replaceAll("\"marker\": \"[^\"]*\"","\"marker\": \"ubuntu\"")));
  assertEquals(11,snapshotJson.size());
  final Collection<Integer> counters=new LinkedList<Integer>();
  final Collection<String> gauges=new LinkedList<String>();
  final Collection<String> validations=new LinkedList<String>();
  final Collection<Long> statuses=new LinkedList<Long>();
  for (int i=0; i < 11; i++) {
    final JSONObject object=JSONObject.class.cast(snapshotJson.get(i));
    final Object type=object.get("type");
    final JSONObject data=JSONObject.class.cast(object.get("data"));
    if ("counter".equals(type)) {
      counters.add(Number.class.cast(data.get("max")).intValue());
    }
    if ("gauge".equals(type)) {
      gauges.add(String.class.cast(data.get("role")));
    }
    if ("validation".equals(type)) {
      validations.add(String.class.cast(data.get("name")));
    }
    if ("status".equals(type)) {
      statuses.add(Number.class.cast(data.get("date")).longValue());
    }
  }
  assertEquals(1,statuses.size());
  assertEquals(3,counters.size());
  assertTrue(counters.contains(0));
  assertTrue(counters.contains(1));
  assertTrue(counters.contains(2));
  assertTrue(gauges.contains("gaugerole"));
  assertTrue(validations.contains("fake"));
  assertTrue(validations.contains("refake"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.alert.AlerterSupportTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void alert(){
  final Map<String,NodeStatus> nodeStatus=new HashMap<String,NodeStatus>();
  final AlerterSupport support=new AlerterSupport();
  support.notify(nodeStatus);
  final Collection<AlertListener.Alert> alerts=new ArrayList<AlertListener.Alert>();
  support.addAlerter(new AlertListener(){
    public void onAlert(    final Alert alert){
      alerts.add(alert);
    }
  }
);
  support.notify(nodeStatus);
  assertEquals(0,alerts.size());
  nodeStatus.put("host1",new NodeStatus(new ValidationResult[]{new ValidationResult("v1",Status.OK,"")},new Date()));
  support.notify(nodeStatus);
  assertEquals(0,alerts.size());
  nodeStatus.put("host2",new NodeStatus(new ValidationResult[]{new ValidationResult("v2",Status.OK,"")},new Date()));
  support.notify(nodeStatus);
  assertEquals(0,alerts.size());
  nodeStatus.put("host1",new NodeStatus(new ValidationResult[]{new ValidationResult("v2",Status.KO,"")},new Date()));
  support.notify(nodeStatus);
  assertEquals(1,alerts.size());
  alerts.clear();
  nodeStatus.put("host1",new NodeStatus(new ValidationResult[]{new ValidationResult("v2",Status.DEGRADED,"")},new Date()));
  support.notify(nodeStatus);
  assertEquals(1,alerts.size());
  alerts.clear();
  nodeStatus.put("host1",new NodeStatus(new ValidationResult[]{new ValidationResult("v2",Status.DEGRADED,"")},new Date()));
  nodeStatus.put("host2",new NodeStatus(new ValidationResult[]{new ValidationResult("v1",Status.KO,"")},new Date()));
  support.notify(nodeStatus);
  assertEquals(2,alerts.size());
  alerts.clear();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.alerter.mail.MailAlerterTest </h4><pre class="type-5 type-6 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void run() throws MessagingException, IOException {
  final MailAlerter listener=new MailAlerter();
  listener.setFrom("me@here.asf");
  listener.setPort(Integer.toString(greenMail.getSmtp().getPort()));
  listener.setHost("localhost");
  listener.setTo("target@mock.com");
  listener.init();
  listener.onAlert(new AlertListener.Alert("node1",new NodeStatus(new ValidationResult[]{new ValidationResult("val",Status.OK,"msg")},new Date())){
  }
);
  greenMail.waitForIncomingEmail(1);
  final MimeMessage[] messages=greenMail.getReceivedMessages();
  assertEquals(1,messages.length);
  assertEquals("me@here.asf",messages[0].getFrom()[0].toString());
  assertEquals(1,messages[0].getAllRecipients().length);
  assertEquals("target@mock.com",messages[0].getAllRecipients()[0].toString());
  assertTrue(messages[0].getContent().toString().contains("node1 throw an alert for:\r\n\r\nval;msg;OK\r\n"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.aop.DynamicInterceptionTest </h4><pre class="type-5 type-6 type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void playWithInterceptor() throws Throwable {
  final ConfigurablePerfInterceptor interceptor=new ConfigurablePerfInterceptor();
  assertFalse(repository.counters().iterator().hasNext());
  interceptor.invoke(THRESHOLD * 5);
  Counter counter=repository.counters().iterator().next();
  assertNotNull(counter);
  assertEquals(1,counter.getHits());
  assertEquals("dynamic",repository.counters().iterator().next().getKey().getName());
  interceptor.invoke(THRESHOLD / 20);
  assertEquals(2,repository.counters().iterator().next().getHits());
  for (int i=0; i < MAX_IT; i++) {
    interceptor.invoke(THRESHOLD * 5);
  }
  assertEquals(2,repository.counters().iterator().next().getHits());
  interceptor.invoke(THRESHOLD / 5);
  assertEquals(3,repository.counters().iterator().next().getHits());
  for (int i=0; i < MAX_IT; i++) {
    interceptor.invoke(THRESHOLD * 2);
  }
  assertEquals(3,repository.counters().iterator().next().getHits());
  interceptor.invoke(THRESHOLD * 5);
  interceptor.invoke(THRESHOLD * 5);
  assertEquals(5,repository.counters().iterator().next().getHits());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.aop.SironaProxyFactoryTest </h4><pre class="type-4 type-1 type-5 type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test(){
  final Foo foo=SironaProxyFactory.monitor(Foo.class,new FooImpl());
  foo.haveARest(2000);
  final Counter perf=Repository.INSTANCE.getCounter(new Counter.Key(Role.PERFORMANCES,FooImpl.class.getName() + ".haveARest"));
  assertNotNull(perf);
  assertEquals(2000,TimeUnit.NANOSECONDS.toMillis((int)perf.getMax()),200);
  try {
    foo.throwSthg();
  }
 catch (  final Exception e) {
  }
  Counter failures=null;
  for (  final Counter c : Repository.INSTANCE.counters()) {
    if (c.getKey().getName().contains("UnsupportedOperationException")) {
      if (failures != null) {
        fail();
      }
      failures=c;
    }
  }
  assertNotNull(failures);
  assertEquals(1,failures.getHits());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.aspectj.AspectJMonitoringTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void monitor(){
  new MonitorMe().foo();
  assertEquals(1,Repository.INSTANCE.getCounter(new Counter.Key(Role.PERFORMANCES,getClass().getName() + "$MonitorMe.foo")).getHits());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.boomerang.BoomerangServletTest </h4><pre class="type-5 type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void collect() throws ServletException, IOException {
  final BoomerangServlet servlet=new BoomerangServlet();
  final ClassLoader loader=Thread.currentThread().getContextClassLoader();
  servlet.init(ServletConfig.class.cast(Proxy.newProxyInstance(loader,new Class<?>[]{ServletConfig.class},new InvocationHandler(){
    @Override public Object invoke(    final Object proxy,    final Method method,    final Object[] args) throws Throwable {
      return null;
    }
  }
)));
  try {
    servlet.service(HttpServletRequest.class.cast(Proxy.newProxyInstance(loader,new Class<?>[]{HttpServletRequest.class},new InvocationHandler(){
      @Override public Object invoke(      final Object proxy,      final Method method,      final Object[] args) throws Throwable {
        if ("getQueryString".equals(method.getName())) {
          return "v=0.9&u=http%3A%2F%2Flocalhost%2Fboomerang%2Ftest.html&rt.start=navigation" + "&rt.bstart=1391971905166&rt.end=1391971905170&t_done=146&t_resp=6" + "&t_page=140&r=&t_other=boomerang%7C2%2Cboomr_fb%7C142&bw=NaN&bw_err=NaN"+ "&lat=19&lat_err=2.85&bw_time=1391971906";
        }
        return null;
      }
    }
)),HttpServletResponse.class.cast(Proxy.newProxyInstance(loader,new Class<?>[]{HttpServletResponse.class},new InvocationHandler(){
      @Override public Object invoke(      final Object proxy,      final Method method,      final Object[] args) throws Throwable {
        if ("getWriter".equals(method.getName())) {
          return new PrintWriter(new ByteArrayOutputStream());
        }
        return null;
      }
    }
)));
  }
  finally {
    servlet.destroy();
  }
  final Counter perceived=Repository.INSTANCE.getCounter(new Counter.Key(BoomerangServlet.BOOMERANG_PERCEIVED,"/boomerang/test.html"));
  assertNotNull(perceived);
  assertEquals(1,perceived.getHits());
  assertEquals(146.,perceived.getMax(),0.);
  final Counter latency=Repository.INSTANCE.getCounter(new Counter.Key(BoomerangServlet.BOOMERANG_LATENCY,"/boomerang/test.html"));
  assertNotNull(latency);
  assertEquals(1,latency.getHits());
  assertEquals(19.,latency.getMax(),0.);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.cassandra.collector.counter.AgentCounterTest </h4><pre class="type-5 type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void keyspaceInit(){
  assertEquals(3,cluster.describeKeyspaces().size());
  new CassandraCollectorCounterDataStore();
  assertEquals(3 + 1,cluster.describeKeyspaces().size());
  assertNotNull(cluster.describeKeyspace(keyspace.getKeyspaceName()));
}

</code></pre>

<br>
<pre class="type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getAggregatedCounters(){
  final Counter.Key key1=new Counter.Key(new Role("cassandra",Unit.MEGA),"k1");
  final Counter.Key key2=new Counter.Key(new Role("cassandra",Unit.MEGA),"k2");
  new CassandraCollectorCounterDataStore().getOrCreateCounter(key1,"node1").update(new M2AwareStatisticalSummary(1,1,1,1,1,1,1),1);
  new CassandraCollectorCounterDataStore().getOrCreateCounter(key1,"node2").update(new M2AwareStatisticalSummary(3,4,4,4,4,4,4),2);
  new CassandraCollectorCounterDataStore().getOrCreateCounter(key2,"node1").update(new M2AwareStatisticalSummary(1,1,1,1,1,1,1),1);
  new CassandraCollectorCounterDataStore().getOrCreateCounter(key2,"node2").update(new M2AwareStatisticalSummary(3,4,4,4,4,4,4),2);
  final Collection<Counter> aggregations=new CassandraCollectorCounterDataStore().getCounters();
  assertEquals(2,aggregations.size());
  for (  final Counter aggregation : aggregations) {
    assertEquals(3,aggregation.getMaxConcurrency());
    assertEquals(1.,aggregation.getMean(),0.);
    assertEquals(1.,aggregation.getMin(),0.);
    assertEquals(5.,aggregation.getHits(),0.);
    assertEquals(2.05,aggregation.getVariance(),0.);
    assertEquals(4.,aggregation.getMax(),0.);
    assertEquals(5.,aggregation.getSum(),0.);
    assertEquals(8.2,aggregation.getSecondMoment(),0.);
  }
}

</code></pre>

<br>
<pre class="type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getAggregatedCountersByKey(){
  final Counter.Key key=new Counter.Key(new Role("cassandra",Unit.MEGA),"k");
  final CassandraCollectorCounterDataStore store=new CassandraCollectorCounterDataStore();
  final CassandraLeafCounter counter1=new CassandraLeafCounter(key,store,"node1").sync(new M2AwareStatisticalSummary(1,1,1,1,1,1,1),1);
  final CassandraLeafCounter counter2=new CassandraLeafCounter(key,store,"node2").sync(new M2AwareStatisticalSummary(3,4,4,4,4,4,4),2);
  new CassandraCollectorCounterDataStore().getOrCreateCounter(key,"node1").update(counter1.getStatistics(),counter1.getMaxConcurrency());
  new CassandraCollectorCounterDataStore().getOrCreateCounter(key,"node2").update(counter2.getStatistics(),counter2.getMaxConcurrency());
  final AggregatedCollectorCounter aggregation=new CassandraCollectorCounterDataStore().getOrCreateCounter(key);
  assertEquals(3,aggregation.getMaxConcurrency());
  assertEquals(1.,aggregation.getMean(),0.);
  assertEquals(1.,aggregation.getMin(),0.);
  assertEquals(5.,aggregation.getHits(),0.);
  assertEquals(2.05,aggregation.getVariance(),0.);
  assertEquals(4.,aggregation.getMax(),0.);
  assertEquals(5.,aggregation.getSum(),0.);
  assertEquals(8.2,aggregation.getSecondMoment(),0.);
}

</code></pre>

<br>
<pre class="type-5 type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getOrCreateCounter(){
  final Counter.Key key=new Counter.Key(new Role("K100Drap",Unit.UNARY),"K100Drap#1");
  final String marker="node1";
  assertNull(new CassandraCollectorCounterDataStore().findByKey(key,marker));
  new CassandraCollectorCounterDataStore().getOrCreateCounter(key,marker);
  assertNotNull(new CassandraCollectorCounterDataStore().findByKey(key,marker));
  final LeafCollectorCounter counter=new CassandraCollectorCounterDataStore().getOrCreateCounter(key,marker);
  assertEquals("K100Drap#1",counter.getKey().getName());
  assertEquals("K100Drap",counter.getKey().getRole().getName());
}

</code></pre>

<br>
<pre class="type-5 type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void update(){
  final Counter.Key key=new Counter.Key(new Role("K100Drap",Unit.UNARY),"K100Drap#1");
  new CassandraCollectorCounterDataStore().getOrCreateCounter(key,"node1");
  assertNotNull(new CassandraCollectorCounterDataStore().findByKey(key,"node1"));
  new CassandraCollectorCounterDataStore().update(key,"node1",new M2AwareStatisticalSummary(3,4,4,4,4,4,4),2);
  final LeafCollectorCounter counter=new CassandraCollectorCounterDataStore().getOrCreateCounter(key,"node1");
  assertEquals("K100Drap#1",counter.getKey().getName());
  assertEquals("K100Drap",counter.getKey().getRole().getName());
  assertEquals(4,counter.getMax(),0.);
  assertEquals(2,counter.getMaxConcurrency(),0.);
}

</code></pre>

<br>
<pre class="type-6 type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void markers(){
  final Counter.Key key=new Counter.Key(new Role("K100Drap",Unit.UNARY),"K100Drap#1");
  final String marker="node1";
  assertNull(new CassandraCollectorCounterDataStore().findByKey(key,marker));
  new CassandraCollectorCounterDataStore().getOrCreateCounter(key,marker);
  assertNotNull(new CassandraCollectorCounterDataStore().findByKey(key,marker));
  final Collection<String> markers=new CassandraCollectorCounterDataStore().markers();
  assertEquals(1,markers.size());
  assertTrue(markers.contains("node1"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.cassandra.collector.gauge.AgentGaugeTest </h4><pre class="type-5 type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void findRoles(){
  new CassandraCollectorGaugeDataStore().addToGauge(ROLE,1,5,MARKER);
  final Role found=new CassandraCollectorGaugeDataStore().findGaugeRole(ROLE.getName());
  assertNotNull(found);
  assertEquals(ROLE.getUnit(),found.getUnit());
}

</code></pre>

<br>
<pre class="type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createGaugeWithMarker(){
  new CassandraCollectorGaugeDataStore().createOrNoopGauge(ROLE,MARKER);
  new CassandraCollectorGaugeDataStore().createOrNoopGauge(ROLE,MARKER);
  final Collection<String> markers=new CassandraCollectorGaugeDataStore().markers();
  assertNotNull(markers);
  assertEquals(1,markers.size());
  assertEquals(MARKER,markers.iterator().next());
}

</code></pre>

<br>
<pre class="type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gauges(){
  new CassandraCollectorGaugeDataStore().addToGauge(ROLE,1,5,MARKER);
  final Collection<Role> gauges=new CassandraCollectorGaugeDataStore().gauges();
  assertNotNull(gauges);
  assertEquals(1,gauges.size());
  assertEquals(ROLE,gauges.iterator().next());
}

</code></pre>

<br>
<pre class="type-5 type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addToGaugesWithMarker(){
  new CassandraCollectorGaugeDataStore().addToGauge(ROLE,1,5,MARKER);
  new CassandraCollectorGaugeDataStore().addToGauge(ROLE,2,6,MARKER);
  final Map<Long,Double> values=new CassandraCollectorGaugeDataStore().getGaugeValues(new GaugeValuesRequest(0,5,ROLE),MARKER);
  assertNotNull(values);
  assertEquals(2,values.size());
  assertEquals(5.,values.get(1L),0.);
  assertEquals(6.,values.get(2L),0.);
}

</code></pre>

<br>
<pre class="type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getAggregatedGauges(){
  new CassandraCollectorGaugeDataStore().addToGauge(ROLE,1,5,MARKER);
  new CassandraCollectorGaugeDataStore().addToGauge(ROLE,2,6,MARKER);
  new CassandraCollectorGaugeDataStore().addToGauge(ROLE,1,5,"node2");
  new CassandraCollectorGaugeDataStore().addToGauge(ROLE,2,6,"node2");
  final Map<Long,Double> values=new CassandraCollectorGaugeDataStore().getGaugeValues(new GaugeValuesRequest(0,5,ROLE));
  assertNotNull(values);
  assertEquals(2,values.size());
  assertEquals(10.,values.get(1L),0.);
  assertEquals(12.,values.get(2L),0.);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.cassandra.collector.status.AgentStatusTest </h4><pre class="type-7 type-5 type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkPersistence(){
  new CassandraCollectorNodeStatusDataStore().store("node1",new NodeStatus(new ValidationResult[]{new ValidationResult("v1",Status.OK,"m1"),new ValidationResult("v2",Status.KO,"m2")},new Date()));
  new CassandraCollectorNodeStatusDataStore().store("node2",new NodeStatus(new ValidationResult[]{new ValidationResult("v3",Status.OK,"m3"),new ValidationResult("v4",Status.KO,"m4")},new Date()));
  final Map<String,NodeStatus> statuses=new CassandraCollectorNodeStatusDataStore().statuses();
  assertEquals(2,statuses.size());
  final NodeStatus n1=statuses.get("node1");
  assertNotNull(n1);
  final ValidationResult[] result1=n1.getResults();
  assertEquals(2,result1.length);
  assertEquals("v1",result1[0].getName());
  assertEquals("m1",result1[0].getMessage());
  assertEquals(Status.OK,result1[0].getStatus());
  assertEquals("v2",result1[1].getName());
  assertEquals("m2",result1[1].getMessage());
  assertEquals(Status.KO,result1[1].getStatus());
  final NodeStatus n2=statuses.get("node2");
  assertNotNull(n2);
  final ValidationResult[] result2=n2.getResults();
  assertEquals(2,result2.length);
  assertEquals("v3",result2[0].getName());
  assertEquals("m3",result2[0].getMessage());
  assertEquals(Status.OK,result2[0].getStatus());
  assertEquals("v4",result2[1].getName());
  assertEquals("m4",result2[1].getMessage());
  assertEquals(Status.KO,result2[1].getStatus());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.cassandra.local.CounterDataStoreTest </h4><pre class="type-7 type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getCounters() throws InterruptedException {
  final CassandraCounterDataStore store=new CassandraCounterDataStore(){
    protected void initMarkerIfNotAlreadyDone(){
      marker="test";
    }
    @Override protected int getPeriod(    final String prefix){
      return 100;
    }
  }
;
  assertEquals(0,store.getCounters().size());
  final Counter counter=store.getOrCreateCounter(new Counter.Key(Role.FAILURES,"oops"));
  counter.add(150);
  counter.updateConcurrency(5);
  Thread.sleep(250);
  final Collection<Counter> counters=store.getCounters();
  assertEquals(1,counters.size());
  final Counter c=counters.iterator().next();
  assertEquals(counter,c);
  assertEquals(5,c.getMaxConcurrency());
  assertEquals(150.,c.getMax(),0.);
  assertEquals(1,c.getHits());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.cassandra.local.GaugeDataStoreTest </h4><pre class="type-5 type-6 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gauges() throws InterruptedException, IllegalAccessException {
  final CassandraGaugeDataStore store=IoCs.processInstance(new CassandraGaugeDataStore(){
    @Created protected void forceMarker(){
      marker="test";
    }
    @Override protected int getPeriod(    final String prefix){
      return 100;
    }
  }
);
  assertEquals(0,store.gauges().size());
  final Gauge gauge=new Gauge(){
    @Override public Role role(){
      return Role.FAILURES;
    }
    @Override public double value(){
      return 5;
    }
  }
;
  store.createOrNoopGauge(gauge.role());
  store.addGauge(gauge);
  Thread.sleep(250);
  store.shutdown();
  final Collection<Role> gauges=store.gauges();
  assertEquals(1,gauges.size());
  assertEquals(gauge.role(),gauges.iterator().next());
  final SortedMap<Long,Double> gaugeValues=store.getGaugeValues(new GaugeValuesRequest(0,System.currentTimeMillis(),Role.FAILURES));
  assertTrue(gaugeValues.size() > 0);
  assertEquals(5.,gaugeValues.values().iterator().next(),0.);
  store.gaugeStopped(gauge.role());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.cassandra.local.PathTrackingDataStoreTest </h4><pre class="type-6 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_save() throws Exception {
  try {
    PathTrackingEntry entry=new PathTrackingEntry(UUID.randomUUID().toString(),"nodeId","org.au.beer.TheBest","littlecreatures",new Date().getTime(),12,1);
    getStore().store(entry);
    Assert.assertFalse(getStore().retrieveAll().isEmpty());
    Assert.assertEquals(1,getStore().retrieveAll().size());
  }
  finally {
    cluster.truncate(builder.getKeyspace(),builder.getPathTrackingColumFamily());
    Assert.assertTrue(getStore().retrieveAll().isEmpty());
    Assert.assertEquals(0,getStore().retrieveAll().size());
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_retrieve_trackingIds() throws Exception {
  List<String> ids=new ArrayList<String>();
  try {
    String uuid=UUID.randomUUID().toString();
    ids.add(uuid);
    PathTrackingEntry first=new PathTrackingEntry(uuid,"nodeId","org.au.beer.TheBest","littlecreatures",new Date().getTime(),12,1);
    getStore().store(first);
    Calendar twoDaysAgo=Calendar.getInstance();
    twoDaysAgo.add(Calendar.DATE,-2);
    uuid=UUID.randomUUID().toString();
    ids.add(uuid);
    PathTrackingEntry second=new PathTrackingEntry(uuid,"nodeId","org.au.beer.TheBest","littlecreatures",twoDaysAgo.getTime().getTime(),12,1);
    getStore().store(second);
    Assert.assertFalse(getStore().retrieveAll().isEmpty());
    Assert.assertEquals(2,getStore().retrieveAll().size());
    Calendar yesterday=Calendar.getInstance();
    yesterday.add(Calendar.DATE,-1);
    Collection<PathCallInformation> trackingIds=getStore().retrieveTrackingIds(yesterday.getTime(),new Date());
    Assert.assertEquals(1,trackingIds.size());
    Assert.assertEquals(first.getTrackingId(),trackingIds.iterator().next().getTrackingId());
  }
  finally {
    cluster.truncate(builder.getKeyspace(),builder.getPathTrackingColumFamily());
    Assert.assertTrue(getStore().retrieveAll().isEmpty());
    Assert.assertEquals(0,getStore().retrieveAll().size());
  }
}

</code></pre>

<br>
<pre class="type-7 type-5 type-6 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_retrieve_tracking_path() throws Exception {
  try {
    String firstuuid=UUID.randomUUID().toString();
    PathTrackingEntry first=new PathTrackingEntry(firstuuid,"nodeId","org.au.beer.TheBest","littlecreatures",new Date().getTime(),12,1);
    getStore().store(first);
    Calendar twoDaysAgo=Calendar.getInstance();
    twoDaysAgo.add(Calendar.DATE,-2);
    String seconduuid=UUID.randomUUID().toString();
    PathTrackingEntry second=new PathTrackingEntry(seconduuid,"nodeId","org.au.beer.TheBest","littlecreatures",twoDaysAgo.getTime().getTime(),12,1);
    getStore().store(second);
    Assert.assertFalse(getStore().retrieveAll().isEmpty());
    Assert.assertEquals(2,getStore().retrieveAll().size());
    PathTrackingEntry third=new PathTrackingEntry(firstuuid,"nodeId","org.au.beer.TheBest","littlecreatures",new Date().getTime(),23,2);
    getStore().store(third);
    Assert.assertFalse(getStore().retrieveAll().isEmpty());
    Assert.assertEquals(2,getStore().retrieveAll().size());
    Assert.assertEquals(2,getStore().retrieveAll().get(firstuuid).size());
    Calendar yesterday=Calendar.getInstance();
    yesterday.add(Calendar.DATE,-1);
    Collection<PathCallInformation> trackingIds=getStore().retrieveTrackingIds(yesterday.getTime(),new Date());
    Assert.assertEquals(1,trackingIds.size());
    Assert.assertEquals(first.getTrackingId(),trackingIds.iterator().next().getTrackingId());
    Collection<PathTrackingEntry> entries=getStore().retrieve(firstuuid);
    Assert.assertEquals(2,entries.size());
  }
  finally {
    cluster.truncate(builder.getKeyspace(),builder.getPathTrackingColumFamily());
    Assert.assertTrue(getStore().retrieveAll().isEmpty());
    Assert.assertEquals(0,getStore().retrieveAll().size());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.cassandra.local.StatusDataStoreTest </h4><pre class="type-7 type-5 type-6 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void statuses() throws InterruptedException, IllegalAccessException {
  final CassandraStatusDataStore store=IoCs.processInstance(new CassandraStatusDataStore(){
    @Created protected void forceMarker(){
      marker="test";
    }
    @Override protected NodeStatusReporter newNodeStatusReporter(){
      return new NodeStatusReporter(){
        @Override public synchronized NodeStatus computeStatus(){
          return new NodeStatus(new ValidationResult[]{new ValidationResult("sample",Status.OK,"msg")},new Date());
        }
      }
;
    }
    @Override protected int getPeriod(    final String prefix){
      return 100;
    }
  }
);
  assertEquals(0,store.statuses().size());
  Thread.sleep(250);
  store.shutdown();
  final Map<String,NodeStatus> statuses=store.statuses();
  assertEquals(1,statuses.size());
  assertTrue(statuses.containsKey("test"));
  final ValidationResult[] results=statuses.get("test").getResults();
  assertEquals(1,results.length);
  final ValidationResult validationResult=results[0];
  assertEquals("sample",validationResult.getName());
  assertEquals("msg",validationResult.getMessage());
  assertEquals(Status.OK,validationResult.getStatus());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.cdi.SironaExtensionTestBase </h4><pre class="type-7 type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkMeasures() throws Exception {
  final CdiTestContainer container=CdiTestContainerLoader.getCdiContainer();
  container.bootContainer();
  container.startApplicationScope();
  final BeanManager beanManager=container.getBeanManager();
  final Class<?> type=type();
  final TwoSeconds bean=TwoSeconds.class.cast(beanManager.getReference(beanManager.resolve(beanManager.getBeans(type)),type,null));
  bean.twoSeconds();
  container.stopApplicationScope();
  container.shutdownContainer();
  final Counter perf=Repository.INSTANCE.getCounter(new Counter.Key(Role.PERFORMANCES,type.getName() + ".twoSeconds"));
  assertNotNull(perf);
  assertEquals(2000,TimeUnit.NANOSECONDS.toMillis((int)perf.getMax()),200);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.collector.server.CubeDataStoreCompatibilityTest </h4><pre class="type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void cubeMe(){
  new SeeMyProtectedStuffStore().doPush();
  final CollectorCounterStore store=IoCs.getInstance(CollectorCounterStore.class);
  final Counter counter1=store.getOrCreateCounter(new Counter.Key(new Role("cube",Unit.UNARY),"client"));
  final Counter counter1Client1=store.getOrCreateCounter(new Counter.Key(new Role("cube",Unit.UNARY),"client"),"local");
  assertEquals(50,counter1.getHits());
  assertEquals(counter1.getHits(),counter1Client1.getHits());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.collector.server.HttpCollectorTest </h4><pre class="type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void collectStatus() throws Exception {
  final Date pushDate=new Date();
{
    final Event[] events1=new Event[1];
{
      events1[0]=new Event();
      events1[0].setTime(pushDate);
      events1[0].setType("validation");
      events1[0].setData(new MapBuilder<String,Object>().set("message","good").set("status",Status.OK).set("name","validation1").set("marker","node1").build());
    }
    doPost(events1);
  }
{
    final Event[] events2=new Event[1];
{
      events2[0]=new Event();
      events2[0].setTime(pushDate);
      events2[0].setType("validation");
      events2[0].setData(new MapBuilder<String,Object>().set("message","bad").set("status",Status.KO).set("name","validation3").set("marker","node2").build());
    }
    doPost(events2);
  }
  final NodeStatusDataStore store=IoCs.getInstance(CollectorNodeStatusDataStore.class);
  final Map<String,NodeStatus> statuses=store.statuses();
  assertEquals(2,statuses.size());
  assertEquals(Status.OK,statuses.get("node1").getStatus());
  assertEquals(1,statuses.get("node1").getResults().length);
  assertEquals(Status.KO,statuses.get("node2").getStatus());
  assertEquals(1,statuses.get("node2").getResults().length);
}

</code></pre>

<br>
<pre class="type-5 type-6 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void collectGauges() throws Exception {
  final Date pushDate=new Date();
{
    final Event[] events1=new Event[1];
{
      events1[0]=new Event();
      events1[0].setTime(pushDate);
      events1[0].setType("gauge");
      events1[0].setData(new MapBuilder<String,Object>().set("role","event-role").set("unit",Unit.UNARY.getName()).set("value",5).set("marker","node1").build());
    }
    doPost(events1);
  }
{
    final Event[] events2=new Event[2];
{
      events2[0]=new Event();
      events2[0].setTime(pushDate);
      events2[0].setType("gauge");
      events2[0].setData(new MapBuilder<String,Object>().set("role","event-role").set("unit",Unit.UNARY.getName()).set("value",15).set("marker","node2").build());
    }
{
      events2[1]=new Event();
      events2[1].setTime(pushDate);
      events2[1].setType("gauge");
      events2[1].setData(new MapBuilder<String,Object>().set("role","event2-role").set("unit",Unit.UNARY.getName()).set("value",25).set("marker","node2").build());
    }
    doPost(events2);
  }
  final CollectorGaugeDataStore store=IoCs.getInstance(CollectorGaugeDataStore.class);
  final GaugeValuesRequest gaugeValuesRequest=new GaugeValuesRequest(0,System.currentTimeMillis() + 1000,new Role("event-role",Unit.UNARY));
  final Map<Long,Double> aggregated=store.getGaugeValues(gaugeValuesRequest);
  final Map<Long,Double> node1=store.getGaugeValues(gaugeValuesRequest,"node1");
  final Map<Long,Double> node2=store.getGaugeValues(gaugeValuesRequest,"node2");
  assertEquals(1,aggregated.size());
  assertTrue(aggregated.containsValue(20.));
  assertTrue(node1.containsValue(5.));
  assertTrue(node2.containsValue(15.));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.collector.server.RegistrationTest </h4><pre class="type-6 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void pull() throws ServletException, InterruptedException {
  final Collector collector=new Collector();
  try {
    collector.init(new ServletConfig(){
      @Override public String getServletName(){
        return null;
      }
      @Override public ServletContext getServletContext(){
        return null;
      }
      @Override public String getInitParameter(      final String name){
        if (name.endsWith("period")) {
          return "100";
        }
        return "http://localhost:" + Integer.getInteger("collector.server.port",1234);
      }
      @Override public Enumeration<String> getInitParameterNames(){
        return null;
      }
    }
);
    Thread.sleep(600);
    final Collection<Counter> counters=Repository.INSTANCE.counters();
    assertEquals(counters.toString(),3,counters.size());
    final Collection<Role> gauges=Repository.INSTANCE.gauges();
    assertEquals(gauges.toString(),3,gauges.size());
    assertTrue(Repository.INSTANCE.statuses().containsKey("ubuntu"));
  }
  finally {
    collector.destroy();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.configuration.ConfigurationTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void isTrue(){
  Assert.assertEquals(true,Configuration.is("org.apache.sirona.goodbeer",false));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void isFalse(){
  Assert.assertEquals(false,Configuration.is("org.apache.sirona.badbeer",false));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getArray(){
  String[] array=Configuration.getArray("org.apache.sirona.ehcache.methods",null);
  Assert.assertEquals(3,array.length);
  Assert.assertEquals("foo",array[0]);
  Assert.assertEquals("bar",array[1]);
  Assert.assertEquals("beer",array[2]);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.configuration.IoCsTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void method() throws Exception {
  assertEquals("method-value",IoCs.autoSet(new Method()).value);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void field() throws Exception {
  assertEquals("field-value",IoCs.autoSet(new Field()).field);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void methodPreventField() throws Exception {
  assertEquals("method-value-again",IoCs.autoSet(new MethodNotField()).methodNotField.value);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.counters.AggregatorTest </h4><pre class="type-5 type-6 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void counterStore(){
  final Counter.Key key=new Counter.Key(new Role("r",Unit.UNARY),"n");
  final CollectorCounterStore store=new InMemoryCollectorCounterStore();
  store.update(key,"client1",new M2AwareStatisticalSummary(1,2,5,0,10,6,7),4);
  store.update(key,"client2",new M2AwareStatisticalSummary(2,4,8,1,15,9,5),2);
  assertEquals(2,store.markers().size());
  assertTrue(store.markers().contains("client1"));
  assertTrue(store.markers().contains("client2"));
  final Counter counter1=store.getCounters("client1").iterator().next();
  assertEquals(4,counter1.getMaxConcurrency());
  assertEquals(4,counter1.currentConcurrency().get());
  assertEquals(5,counter1.getHits());
  assertEquals(10.,counter1.getMin(),0);
  assertEquals(0.,counter1.getMax(),0);
  assertEquals(1.4142,counter1.getStandardDeviation(),0.001);
  assertEquals(2.,counter1.getVariance(),0);
  assertEquals(6.,counter1.getSum(),0);
  final Counter counter2=store.getCounters("client2").iterator().next();
  assertEquals(2,counter2.getMaxConcurrency());
  assertEquals(2,counter2.currentConcurrency().get());
  assertEquals(8,counter2.getHits());
  assertEquals(15.,counter2.getMin(),0);
  assertEquals(1.,counter2.getMax(),0);
  assertEquals(2.,counter2.getStandardDeviation(),0.);
  assertEquals(4.,counter2.getVariance(),0);
  assertEquals(9.,counter2.getSum(),0);
  final Counter aggregate=store.getOrCreateCounter(key);
  assertEquals(6,aggregate.getMaxConcurrency());
  assertEquals(6,aggregate.currentConcurrency().get());
  assertEquals(13,aggregate.getHits());
  assertEquals(10.,aggregate.getMin(),0);
  assertEquals(1.,aggregate.getMax(),0);
  assertEquals(1.12089,aggregate.getStandardDeviation(),0.001);
  assertEquals(1.2564,aggregate.getVariance(),0.001);
  assertEquals(15.,aggregate.getSum(),0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.counters.ClearAfterCollectTest </h4><pre class="type-6 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void clear() throws InterruptedException {
  final LinkedList<Integer> size=new LinkedList<Integer>();
  final AtomicBoolean measure=new AtomicBoolean();
  final BatchCounterDataStore store=new BatchCounterDataStore(){
    protected void pushCountersByBatch(    final Collection<Counter> instance){
      if (!measure.get()) {
        return;
      }
      size.add(instance.size());
    }
    protected int getPeriod(    final String prefix){
      return 1000;
    }
    protected boolean isClearAfterCollect(    final String prefix){
      return true;
    }
  }
;
  store.getOrCreateCounter(new Counter.Key(Role.PERFORMANCES,"counter")).add(123);
  measure.set(true);
  Thread.sleep(2200);
  measure.set(false);
  store.shutdown();
  assertTrue(size.size() >= 2);
  assertEquals(1,size.iterator().next().intValue());
  assertEquals(0,size.get(1).intValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.counters.JMXTest </h4><pre class="type-5 type-6 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void register() throws Exception {
  final DefaultCounter counter=new DefaultCounter(new Counter.Key(Role.JDBC,"def"),null){
    @Override public double getMax(){
      return 3;
    }
  }
;
  final MBeanServer server=ManagementFactory.getPlatformMBeanServer();
  final ObjectName objectName=new ObjectName(Configuration.CONFIG_PROPERTY_PREFIX + "counter:role=" + counter.getKey().getRole().getName()+ ",name="+ counter.getKey().getName());
  counter.setJmx(objectName);
  server.registerMBean(new CounterJMX(counter),objectName);
  try {
    assertTrue(server.isRegistered(objectName));
    assertEquals(3.,server.getAttribute(objectName,"Max"));
    assertEquals("def",server.getAttribute(objectName,"Name"));
    assertEquals("jdbc",server.getAttribute(objectName,"Role"));
  }
  finally {
    server.unregisterMBean(objectName);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.counters.UnitTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void scales(){
  assertEquals(1L,NANOSECOND.getScale());
  assertEquals(1000L,MICROSECOND.getScale());
  assertEquals(1000000L,MILLISECOND.getScale());
  assertEquals(1000000000L,SECOND.getScale());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.gauges.CollectorGaugeTest </h4><pre class="type-5 type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gaugeStore(){
  final Role role=new Role("gauge",Unit.UNARY);
  final CollectorGaugeDataStore store=new DelegatedCollectorGaugeDataStore();
  store.addToGauge(role,1234,5678,"client1");
  store.addToGauge(role,987,654,"client2");
  final GaugeValuesRequest request=new GaugeValuesRequest(0,Integer.MAX_VALUE,role);
  final Map<Long,Double> result=store.getGaugeValues(request);
  final Map<Long,Double> client1=store.getGaugeValues(request,"client1");
  final Map<Long,Double> client2=store.getGaugeValues(request,"client2");
  assertNotNull(result);
  assertNotNull(client1);
  assertNotNull(client2);
  assertEquals(2,result.size());
  assertEquals(654,result.get(987L),0);
  assertEquals(5678,result.get(1234L),0);
  assertEquals(1,client1.size());
  assertEquals(5678,client1.get(1234L),0);
  assertEquals(1,client2.size());
  assertEquals(654,client2.get(987L),0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.javaagent.SironaAgentTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testArgsExtractMissingSeparator() throws Exception {
  Map<String,String> parameters=SironaAgent.extractParameters("foo=barbeer=pale ale");
  Assert.assertEquals(1,parameters.size());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testArgsExtractMissingEquals() throws Exception {
  Map<String,String> parameters=SironaAgent.extractParameters("foo=bar|beerpale ale");
  Assert.assertEquals("bar",parameters.get("foo"));
  Assert.assertEquals("",parameters.get("beerpale ale"));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testArgsExtract() throws Exception {
  Map<String,String> parameters=SironaAgent.extractParameters("foo=bar|beer=pale ale");
  Assert.assertEquals(2,parameters.size());
  Assert.assertEquals("bar",parameters.get("foo"));
  Assert.assertEquals("pale ale",parameters.get("beer"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.javaagent.listener.AgentContextTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void extract_class_method_names(){
  Assert.assertEquals("org.apache.test.sirona.javaagent.App",PathTrackingListener.extractClassName("org.apache.test.sirona.javaagent.App.foo()"));
  Assert.assertEquals("org.apache.test.sirona.javaagent.App",PathTrackingListener.extractClassName("org.apache.test.sirona.javaagent.App.pub(java.lang.String)"));
  Assert.assertEquals("App",PathTrackingListener.extractClassName("App.foo()"));
  Assert.assertEquals("org.App",PathTrackingListener.extractClassName("org.App.foo()"));
  Assert.assertEquals("pub(java.lang.String)",PathTrackingListener.extractMethodName("org.apache.test.sirona.javaagent.App.pub(java.lang.String)"));
  Assert.assertEquals("foo()",PathTrackingListener.extractMethodName("org.apache.test.sirona.javaagent.App.foo()"));
  Assert.assertEquals("foo()",PathTrackingListener.extractMethodName("App.foo()"));
  Assert.assertEquals("foo()",PathTrackingListener.extractMethodName("org.App.foo()"));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void keyClass(){
  final Class<?> clazz=new AgentContext("org.apache.sirona.javaagent.listener.AgentContextTest.keyClass()",this,new InvocationListener[0],null).keyAsClass();
  assertEquals(AgentContextTest.class,clazz);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void keyMethod() throws NoSuchMethodException {
  final Method mtd=new AgentContext("org.apache.sirona.javaagent.listener.AgentContextTest.keyMethod()",this,new InvocationListener[0],null).keyAsMethod();
  assertEquals(AgentContextTest.class.getMethod("keyMethod"),mtd);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.javaagent.listener.PathTrackingInvocationRecursiveTest </h4><pre class="type-5 type-6 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @AgentArgs(value="",sysProps="project.build.directory=${project.build.directory}|sirona.agent.debug=true|org.apache.sirona.configuration.sirona.properties=${project.build.directory}/test-classes/pathtracking/sirona.properties") public void simpleTest() throws Exception {
  App app=new App().redirectStreamout();
  app.beer();
  DataStoreFactory dataStoreFactory=IoCs.findOrCreateInstance(DataStoreFactory.class);
  ExtendedInMemoryPathTrackingDataStore ptds=ExtendedInMemoryPathTrackingDataStore.class.cast(dataStoreFactory.getPathTrackingDataStore());
  Map<String,Set<PathTrackingEntry>> all=ptds.retrieveAll();
  System.out.println(all);
  boolean called=MockPathTrackingInvocationListener.START_PATH_CALLED;
  Assert.assertTrue(called);
  called=MockPathTrackingInvocationListener.END_PATH_CALLED;
  Assert.assertTrue(called);
  Assert.assertTrue(!all.isEmpty());
  Assert.assertEquals(2,all.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.javaagent.listener.PathTrackingListenerTest </h4><pre class="type-7 type-5 type-6 type-2 type-13 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @AgentArgs(value="debug=true|sirona.agent.debug=${sirona.agent.debug}",sysProps="project.build.directory=${project.build.directory}|sirona.agent.debug=${sirona.agent.debug}|org.apache.sirona.configuration.sirona.properties=${project.build.directory}/test-classes/pathtracking/sirona.properties|java.io.tmpdir=${project.build.directory}") public void simpleTest() throws Exception {
  App app=new App();
  app.beer();
  DataStoreFactory dataStoreFactory=IoCs.findOrCreateInstance(DataStoreFactory.class);
  ExtendedInMemoryPathTrackingDataStore ptds=ExtendedInMemoryPathTrackingDataStore.class.cast(dataStoreFactory.getPathTrackingDataStore());
  Map<String,Set<PathTrackingEntry>> all=ptds.retrieveAll();
  Assert.assertTrue(!all.isEmpty());
  Assert.assertEquals(1,all.size());
  List<PathTrackingEntry> entries=new ArrayList<PathTrackingEntry>(all.values().iterator().next());
  Assert.assertEquals(entries.toString(),4,entries.size());
  for (  PathTrackingEntry entry : entries) {
    System.out.println("entry:" + entry);
  }
  PathTrackingEntry entry=entries.get(0);
  Assert.assertEquals("beer()",entry.getMethodName());
  Assert.assertEquals("org.apache.test.sirona.javaagent.App",entry.getClassName());
  Assert.assertEquals("level should be 1",1,entry.getLevel());
  entry=entries.get(1);
  Assert.assertEquals("foo()",entry.getMethodName());
  Assert.assertEquals("org.apache.test.sirona.javaagent.App",entry.getClassName());
  Assert.assertEquals("level should be 2",2,entry.getLevel());
  Assert.assertTrue(entry.getExecutionTime() >= 500 * 1000000);
  entry=entries.get(2);
  Assert.assertEquals("pub(java.lang.String,java.util.List,int)",entry.getMethodName());
  Assert.assertEquals("org.apache.test.sirona.javaagent.App",entry.getClassName());
  Assert.assertEquals("level should be 2",2,entry.getLevel());
  Assert.assertTrue(entry.getExecutionTime() >= 100 * 1000000);
  entry=entries.get(3);
  Assert.assertEquals("bar()",entry.getMethodName());
  Assert.assertEquals("org.apache.test.sirona.javaagent.App",entry.getClassName());
  Assert.assertEquals("level should be 2",3,entry.getLevel());
  Assert.assertTrue(entry.getExecutionTime() >= 300 * 1000000);
  PathTrackingInvocationListener listener=PathTracker.getPathTrackingInvocationListeners()[0];
  MockPathTrackingInvocationListener mock=(MockPathTrackingInvocationListener)(listener);
  System.out.println("mock.startPathCallCount: " + mock.startPathCallCount);
  Assert.assertEquals(1,mock.startPathCallCount);
  Assert.assertEquals(1,mock.endPathCallCount);
  Assert.assertEquals(mock.entered.toString(),4,mock.enterMethodCallCount);
  Assert.assertEquals(mock.exit.toString(),4,mock.exitMethodCallCount);
  InvocationListener[] listeners=AgentContext.listeners("org.apache.test.sirona.javaagent.App.pub(java.lang.String,java.util.List,int)",null);
  mock=findInstance(listeners);
  AgentContext agentContext=mock.contextPerKey.get("org.apache.test.sirona.javaagent.App.pub(java.lang.String,java.util.List,int)");
  Object[] parameters=agentContext.getMethodParameters();
  Assert.assertEquals(3,parameters.length);
  Assert.assertEquals("blabla",parameters[0]);
  Assert.assertTrue(List.class.isAssignableFrom(parameters[1].getClass()));
  Assert.assertTrue(((List)parameters[1]).get(0).equals("Mountain Goat"));
  Assert.assertTrue(((List)parameters[1]).get(1).equals("Fatyak"));
  Assert.assertEquals(2,parameters[2]);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.jdbc.HsqlDBTest </h4><pre class="type-7 type-6 type-10 type-2 type-12 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void driverMonitoring() throws Exception {
  final Connection connection=DriverManager.getConnection("jdbc:sirona:hsqldb:mem:monitoring?delegateDriver=" + jdbcDriver.class.getName(),"SA","");
  assertNotNull(connection);
  assertTrue(Proxy.isProxyClass(connection.getClass()));
  final InvocationHandler handler=Proxy.getInvocationHandler(connection);
  assertThat(handler,instanceOf(MonitoredConnection.class));
  final String create="CREATE TABLE Address (Nr INTEGER, Name VARCHAR(128));";
  final Statement statement=connection.createStatement();
  statement.execute(create);
  assertEquals(1,Repository.INSTANCE.getCounter(new Counter.Key(Role.JDBC,create)).getMaxConcurrency(),0.);
  final String insert="INSERT INTO Address (Nr, Name) VALUES(1, 'foo')";
  final PreparedStatement preparedStatement=connection.prepareStatement(insert);
  preparedStatement.execute();
  assertEquals(1,Repository.INSTANCE.getCounter(new Counter.Key(Role.JDBC,insert)).getMaxConcurrency(),0.);
  preparedStatement.execute();
  assertEquals(1,Repository.INSTANCE.getCounter(new Counter.Key(Role.JDBC,insert)).getMaxConcurrency(),0.);
  assertEquals(2,Repository.INSTANCE.getCounter(new Counter.Key(Role.JDBC,insert)).getHits(),0.);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.jta.GaugesTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  final EJBContainer container=EJBContainer.createEJBContainer(new Properties(){
{
      setProperty("openejb.jul.forceReload",Boolean.TRUE.toString());
      setProperty("logging.level.OpenEJB","OFF");
    }
  }
);
  container.getContext().bind("inject",this);
  final long start=System.currentTimeMillis();
  final CountDownLatch latch=new CountDownLatch(ITERATIONS);
  try {
    final ExecutorService es=Executors.newFixedThreadPool(50);
    for (int i=0; i < ITERATIONS; i++) {
      es.submit(new Runnable(){
        @Override public void run(){
          try {
            jtaSupport.commit();
          }
 catch (          final Exception e) {
            e.printStackTrace(System.out);
          }
          try {
            jtaSupport.rollback();
          }
  finally {
            latch.countDown();
          }
        }
      }
);
    }
    es.shutdown();
    latch.await();
    Thread.sleep(500);
    final long end=System.currentTimeMillis();
    assertEquals(ITERATIONS,sum(Repository.INSTANCE.getGaugeValues(start,end,JTAGauges.JTA_COMMITED).values()),0);
    assertEquals(ITERATIONS,sum(Repository.INSTANCE.getGaugeValues(start,end,JTAGauges.JTA_ROLLBACKED).values()),0);
    assertEquals(ITERATIONS / 2,sum(Repository.INSTANCE.getGaugeValues(start,end,JTAGauges.JTA_ACTIVE).values()),ITERATIONS * .1);
  }
  finally {
    container.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.output.PathTrackingDumperTest </h4><pre class="type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void run(){
  final PathTrackingDataStore store=new InMemoryPathTrackingDataStore();
{
    final PathTrackingEntry entry=new PathTrackingEntry();
    entry.setTrackingId("t1");
    entry.setClassName("com.myclass.Foo");
    entry.setMethodName("bar");
    entry.setLevel(1);
    entry.setNodeId("n1");
    entry.setStartTime(TimeUnit.DAYS.toNanos(1));
    entry.setExecutionTime(TimeUnit.MILLISECONDS.toNanos(121));
    store.store(entry);
  }
{
    final PathTrackingEntry entry=new PathTrackingEntry();
    entry.setTrackingId("t1");
    entry.setClassName("com.myclass.Dummy");
    entry.setMethodName("drums");
    entry.setLevel(2);
    entry.setNodeId("n2");
    entry.setStartTime(TimeUnit.DAYS.toNanos(1) + TimeUnit.MILLISECONDS.toNanos(12));
    entry.setExecutionTime(TimeUnit.MILLISECONDS.toNanos(43));
    store.store(entry);
  }
{
    final PathTrackingEntry entry=new PathTrackingEntry();
    entry.setTrackingId("t2");
    entry.setClassName("com.myclass.Alone");
    entry.setMethodName("single");
    entry.setLevel(1);
    entry.setNodeId("n9");
    entry.setStartTime(TimeUnit.DAYS.toNanos(2));
    entry.setExecutionTime(TimeUnit.MILLISECONDS.toNanos(89));
    store.store(entry);
  }
  final PathTrackingDumper dumper=new PathTrackingDumper(store,true);
  assertEquals("1 com.myclass.Foo#bar -> 121ms\n" + "  2 com.myclass.Dummy#drums -> 43ms\n" + "1 com.myclass.Alone#single -> 89ms\n",dumper.dumpAsString(new Date(0),new Date()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.plugin.hazelcast.BasicHazelcastTest </h4><pre class="type-14 type-7 type-5 type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void gauges() throws Throwable {
  final Config config=new Config();
  final NetworkConfig networkConfig=new NetworkConfig();
  final JoinConfig join=new JoinConfig();
  final TcpIpConfig tcpIpConfig=new TcpIpConfig();
  tcpIpConfig.setEnabled(true);
  tcpIpConfig.setMembers(singletonList("localhost"));
  join.setTcpIpConfig(tcpIpConfig);
  networkConfig.setJoin(join);
  config.setNetworkConfig(networkConfig);
  final HazelcastInstance instance1=Hazelcast.newHazelcastInstance(config);
  final HazelcastInstance instance2=Hazelcast.newHazelcastInstance(config);
  HazelcastInstance instance3=null;
  Map<Long,Double> members1=null, partitions;
  final Gauge.LoaderHelper loader=new Gauge.LoaderHelper(false);
  try {
    Thread.sleep(250);
    instance3=Hazelcast.newHazelcastInstance(config);
    Thread.sleep(250);
    members1=gaugeValues("hazelcast-members-cluster");
    partitions=gaugeValues("hazelcast-partitions-cluster");
    Thread.sleep(300);
    assertNotNull(partitions);
    assertEquals(instance2.getPartitionService().getPartitions().size(),partitions.values().iterator().next(),0.);
    final CountDownLatch instance1Stopped=new CountDownLatch(1);
    instance1.getLifecycleService().addLifecycleListener(new LifecycleListener(){
      @Override public void stateChanged(      final LifecycleEvent event){
        if (LifecycleEvent.LifecycleState.SHUTDOWN.equals(event.getState())) {
          instance1Stopped.countDown();
        }
      }
    }
);
    instance1.getLifecycleService().shutdown();
    instance1Stopped.await();
    Thread.sleep(300);
    assertNotNull(members1);
    assertEquals(2.,members1.values().iterator().next(),0.);
    assertEquals(2.,gaugeValues("hazelcast-members-cluster").values().iterator().next(),0.);
    assertEquals(3.,new TreeMap<Long,Double>(members1).lastEntry().getValue(),0.);
    int tryCount=0;
    while (true) {
      try {
        assertEquals(2.,new TreeMap<Long,Double>(gaugeValues("hazelcast-members-cluster")).lastEntry().getValue(),0.);
        break;
      }
 catch (      final Throwable th) {
        if (tryCount < 10) {
          tryCount++;
          Thread.sleep(100);
        }
 else {
          throw th;
        }
      }
    }
  }
  finally {
    loader.destroy();
    instance2.getLifecycleService().shutdown();
    if (instance3 != null) {
      instance3.getLifecycleService().shutdown();
    }
    if (instance1.getLifecycleService().isRunning()) {
      instance1.getLifecycleService().shutdown();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.reporting.FormatsTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void renderToCSV() throws Exception {
  final StringWriter out=new StringWriter();
  final TemplateHelper helper=new TemplateHelper(new PrintWriter(out),Collections.<String,Object>emptyMap());
  final Template template=Format.Defaults.CSV.render(Collections.<String,Object>emptyMap());
  helper.renderPlain(template.getTemplate(),template.getUserParams());
  assertEquals(CSVFormat.HEADER + "RendererTest;failures (u);1.0;1.0;1.0;1.0;0.0;1.0;0.0;1.0;0.0;1.0" + SystemUtils.LINE_SEPARATOR,out.toString());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void renderToXML() throws Exception {
  final StringWriter out=new StringWriter();
  final TemplateHelper helper=new TemplateHelper(new PrintWriter(out),Collections.<String,Object>emptyMap());
  final Template template=Format.Defaults.XML.render(Collections.<String,Object>emptyMap());
  helper.renderPlain(template.getTemplate(),template.getUserParams());
  assertEquals("<?xml version=\"1.0\"?> <repository> " + "<counter name=\"RendererTest\" role=\"failures\" unit=\"u\" Hits=\"1.0\" Max=\"1.0\" Mean=\"1.0\" Min=\"1.0\" " + "StandardDeviation=\"0.0\" Sum=\"1.0\" Variance=\"0.0\" Value=\"1.0\" Concurrency=\"0.0\" MaxConcurrency=\"1.0\" />"+ " </repository>",inline(out));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void renderToJSON() throws Exception {
  final StringWriter out=new StringWriter();
  final TemplateHelper helper=new TemplateHelper(new PrintWriter(out),Collections.<String,Object>emptyMap());
  final Template template=Format.Defaults.JSON.render(Collections.<String,Object>emptyMap());
  helper.renderPlain(template.getTemplate(),template.getUserParams());
  assertEquals("{\"counters\":[" + " {\"name\":\"RendererTest\", \"role\":\"failures\",\"unit\":\"u\",\"Hits\":\"1.0\",\"Max\":\"1.0\",\"Mean\":\"1.0\",\"Min\":\"1.0\"," + "\"StandardDeviation\":\"0.0\",\"Sum\":\"1.0\",\"Variance\":\"0.0\","+ "\"Value\":\"1.0\",\"Concurrency\":\"0.0\",\"MaxConcurrency\":\"1.0\"} ]}",inline(out));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.reporting.template.ReportTest </h4><pre class="type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void generalList() throws IOException {
  final WebClient client=newClient();
  final HtmlPage page=client.getPage(base.toExternalForm() + "sirona/report");
  WebAssert.assertElementPresent(page,"report-table");
  final String text=page.getElementById("report-table").asText();
  assertEquals("Counter\tRole\tHits\tMax\tMean\tMin\tStandardDeviation\tSum\tVariance\tValue\tConcurrency\tMaxConcurrency" + lineSeparator + "counter\trole(u)\t1.00\t55.00\t55.00\t55.00\t0.00\t55.00\t0.00\t55.00\t0.00\t0.00",text.replace(" ",""));
}

</code></pre>

<br>
<pre class="type-7 type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void detail() throws IOException {
  final WebClient client=newClient();
  final HtmlPage page=client.getPage(base.toExternalForm() + "sirona/report/counter/" + MapFormat.generateCounterKeyString(key));
  WebAssert.assertElementPresent(page,"counter");
  final String text=page.getElementById("counter").asText();
  assertEquals("Counter\tRole\tHits\tMax\tMean\tMin\tStandardDeviation\tSum\tVariance\tValue\tConcurrency\tMaxConcurrency" + lineSeparator + "counter\trole (u)\t1.00\t55.00\t55.00\t55.00\t0.00\t55.00\t0.00\t55.00\t0.00\t0.00",text);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.repositories.DefaultRepositoryTest </h4><pre class="type-15 type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void alerts(){
  if (Alerter1.instance != null && Alerter1.instance.alerts != null) {
    Alerter1.instance.alerts.clear();
  }
  if (Alerter2.instance != null && Alerter2.instance.alerts != null) {
    Alerter2.instance.alerts.clear();
  }
  NodeStatusDataStore original;
  try {
    original=IoCs.findOrCreateInstance(NodeStatusDataStore.class);
  }
 catch (  final SironaException se) {
    original=null;
  }
  final ForTestPeriodicNodeStatusDataStore testNodeStatusStore=new ForTestPeriodicNodeStatusDataStore();
  IoCs.setSingletonInstance(NodeStatusDataStore.class,testNodeStatusStore);
  try {
    new DefaultRepository();
    assertEquals("a-config-value",Alerter1.instance.config);
    assertNotNull(Alerter1.instance);
    assertEquals(0,Alerter1.instance.alerts.size());
    assertNotNull(Alerter2.instance);
    assertEquals(0,Alerter2.instance.alerts.size());
    testNodeStatusStore.periodicTask();
    assertEquals(1,Alerter1.instance.alerts.size());
    assertEquals(1,Alerter2.instance.alerts.size());
    assertSame(Alerter1.instance.alerts.iterator().next(),Alerter2.instance.alerts.iterator().next());
  }
  finally {
    IoCs.setSingletonInstance(NodeStatusDataStore.class,original);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.spring.SpringMonitoringTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void checkMonitoringIsActivated(){
  service.doIt();
  assertEquals(1,Repository.INSTANCE.getCounter(new Counter.Key(Role.PERFORMANCES,MyService.class.getName() + ".doIt")).getHits());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.status.ValidationTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void globalStatus(){
  final Date date=new Date();
  Assert.assertEquals(Status.OK,new NodeStatus(new ValidationResult[]{new ValidationResult(null,Status.OK,null)},date).getStatus());
  Assert.assertEquals(Status.KO,new NodeStatus(new ValidationResult[]{new ValidationResult(null,Status.KO,null)},date).getStatus());
  Assert.assertEquals(Status.DEGRADED,new NodeStatus(new ValidationResult[]{new ValidationResult(null,Status.DEGRADED,null)},date).getStatus());
  Assert.assertEquals(Status.KO,new NodeStatus(new ValidationResult[]{new ValidationResult(null,Status.DEGRADED,null),new ValidationResult(null,Status.KO,null)},date).getStatus());
  Assert.assertEquals(Status.DEGRADED,new NodeStatus(new ValidationResult[]{new ValidationResult(null,Status.DEGRADED,null),new ValidationResult(null,Status.OK,null)},date).getStatus());
}

</code></pre>

<br>
<pre class="type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void periodicNodeReporter() throws InterruptedException {
  final PeriodicNodeStatusDataStore store=IoCs.processInstance(new PeriodicNodeStatusDataStore(){
    protected int getPeriod(    final String name){
      return 100;
    }
  }
);
  Thread.sleep(200);
  Assert.assertEquals(Status.OK,store.statuses().values().iterator().next().getStatus());
  SpiTestImpl.status=new ValidationResult("",Status.KO,"");
  Thread.sleep(200);
  Assert.assertEquals(Status.KO,store.statuses().values().iterator().next().getStatus());
  store.shutdown();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.store.memory.tracking.InMemoryPathTrackingTest </h4><pre class="type-7 type-5 type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStoreRetrieveAll() throws Exception {
  InMemoryPathTrackingDataStore store=new InMemoryPathTrackingDataStore();
  long now=System.nanoTime();
  PathTrackingEntry entry=new PathTrackingEntry(UUID.randomUUID().toString(),"nodeId","className","methodName",now,now + 1,1);
  store.store(entry);
  Map<String,Set<PathTrackingEntry>> all=store.getPathTrackingEntries();
  Assert.assertNotNull(all);
  Assert.assertEquals(1,all.size());
  Assert.assertEquals(1,all.entrySet().iterator().next().getValue().size());
  entry=all.entrySet().iterator().next().getValue().iterator().next();
  Assert.assertEquals("nodeId",entry.getNodeId());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.test.web.JspMonitoringTest </h4><pre class="type-14 type-7 type-4 type-5 type-6 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void redirect() throws IOException {
  final String testUrl=url.toExternalForm() + "test";
  for (int i=0; i < 2; i++) {
    assertEquals("Hello",newClient().getPage(testUrl).getWebResponse().getContentAsString());
  }
  assertEquals("Hello",newClient().getPage(testUrl + "?ignoredQuery=yes&ofcourse=itis").getWebResponse().getContentAsString());
  assertFalse(Repository.INSTANCE.counters().isEmpty());
  boolean jspCounterFound=false;
  for (  Counter counter : Repository.INSTANCE.counters()) {
    if (counter.getKey().getRole().equals(Role.JSP)) {
      assertEquals(url.getPath() + "test.jsp",counter.getKey().getName());
      assertEquals(3,counter.getHits());
      jspCounterFound=true;
    }
  }
  assertTrue("Jsp counter not found",jspCounterFound);
}

</code></pre>

<br>
<pre class="type-14 type-7 type-5 type-6 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void jsp() throws IOException {
  final String testUrl=url.toExternalForm() + "test.jsp";
  for (int i=0; i < 2; i++) {
    assertEquals("Hello",newClient().getPage(testUrl).getWebResponse().getContentAsString());
  }
  assertEquals("Hello",newClient().getPage(testUrl + "?ignoredQuery=yes&ofcourse=itis").getWebResponse().getContentAsString());
  assertFalse(Repository.INSTANCE.counters().isEmpty());
  final Counter counter=Repository.INSTANCE.getCounter(new Counter.Key(Role.JSP,"/ajsp/test.jsp"));
  assertEquals(Role.JSP,counter.getKey().getRole());
  assertEquals(url.getPath() + "test.jsp",counter.getKey().getName());
  assertEquals(3,counter.getHits());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.test.web.RequestPerformanceTest </h4><pre class="type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void monitorRequest() throws IOException {
  final TextPage page=newClient().getPage(base.toExternalForm() + "hit");
  assertEquals(HttpURLConnection.HTTP_OK,page.getWebResponse().getStatusCode());
  final Counter hitCounter=Repository.INSTANCE.getCounter(new Counter.Key(Role.WEB,"/sirona-test/hit"));
  assertEquals(1,hitCounter.getHits());
}

</code></pre>

<br>
<pre class="type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void unknownStatusIsIgnored() throws IOException, InterruptedException {
  final TextPage page=newClient().getPage(base.toExternalForm() + "hit?status=4567");
  assertEquals(4567,page.getWebResponse().getStatusCode());
  Thread.sleep(1000);
  assertEquals(0,statusGaugeSum(new Role("/sirona-test-HTTP-4567",Unit.UNARY)));
}

</code></pre>

<br>
<pre class="type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void knownStatusIsMonitored() throws IOException, InterruptedException {
  final Role role=new Role("/sirona-test-HTTP-200",Unit.UNARY);
  final int before=statusGaugeSum(role);
  final TextPage page=newClient().getPage(base.toExternalForm() + "hit");
  assertEquals(HttpURLConnection.HTTP_OK,page.getWebResponse().getStatusCode());
  Thread.sleep(1000);
  assertEquals("" + Repository.INSTANCE.getGaugeValues(0,System.currentTimeMillis() + 1000,role),1,statusGaugeSum(role) - before);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.tomee.agent.GaugesTest </h4><pre class="type-4 type-1 type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkGauges() throws InterruptedException {
  final Role gaugeRole=Repository.INSTANCE.findGaugeRole("tomee-pool-stateless-instancesPooled-AStatelessBean");
  final Role gaugeActiveRole=Repository.INSTANCE.findGaugeRole("tomee-pool-stateless-instancesActive-AStatelessBean");
  assertNotNull("gauge role should be found",gaugeRole);
  assertNotNull("gauge active role should be found",gaugeActiveRole);
  assertEquals(0,sum(gaugeRole));
  assertEquals(0,sum(gaugeActiveRole));
  bean.work();
  Thread.sleep(135);
  int failCount=0;
  while (sum(gaugeRole) < 1 && failCount < 10) {
    Thread.sleep(20);
    failCount++;
  }
  if (failCount >= 10) {
    fail("Can't get statless pool count");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.tomee.agent.ValidationsTest </h4><pre class="type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void checkValidations() throws InterruptedException {
  Thread.sleep(150);
  final NodeStatus result=IoCs.getInstance(NodeStatusDataStore.class).statuses().values().iterator().next();
  assertEquals(1,result.getResults().length);
  final ValidationResult validationResult=result.getResults()[0];
  assertEquals("tomee-datasource-db",validationResult.getName());
  assertEquals(Status.OK,validationResult.getStatus());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.util.SironaServiceLoaderTest </h4><pre class="type-7 type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void use_normal_call() throws Exception {
  Iterator<BeerService> ite=SironaServiceLoader.load(BeerService.class,Thread.currentThread().getContextClassLoader()).iterator();
  BeerService beerService=ite.next();
  Assert.assertNotNull(beerService);
  Assert.assertEquals(MoutainGoatBeerService.NAME,beerService.getName());
}

</code></pre>

<br>
<pre class="type-7 type-10 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void use_1_5_call() throws Exception {
  Iterator<BeerService> ite=SironaServiceLoader.load(BeerService.class,Thread.currentThread().getContextClassLoader()).iterator1_5();
  BeerService beerService=ite.next();
  Assert.assertNotNull(beerService);
  Assert.assertEquals(MoutainGoatBeerService.NAME,beerService.getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sirona.websocket.WebSocketTest </h4><pre class="type-7 type-5 type-6 type-2 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void runFewClientActions(){
  final Date date=new Date();
  final Repository clientRepo=new DefaultRepository(IoCs.processInstance(new WebSocketCounterDataStore(){
    @Override protected int getPeriod(    final String name){
      return 1000;
    }
  }
),IoCs.processInstance(new WebSocketGaugeDataStore(){
    @Override protected int getPeriod(    final String name){
      return 1000;
    }
  }
),IoCs.processInstance(new WebSocketNodeStatusDataStore(){
    @Override protected int getPeriod(    final String name){
      return 1000;
    }
    @Override protected NodeStatusReporter newNodeStatusReporter(){
      return new NodeStatusReporter(){
        @Override public synchronized NodeStatus computeStatus(){
          return new NodeStatus(new ValidationResult[]{new ValidationResult("v1",Status.OK,"all is fine"),new ValidationResult("v2",Status.KO,"oops something went wrong")},date);
        }
      }
;
    }
  }
),new InMemoryPathTrackingDataStore(),Collections.<AlertListener>emptyList()){
  }
;
  clientRepo.addGauge(new Gauge(){
    @Override public Role role(){
      return new Role("testgauge",Unit.HECTO);
    }
    @Override public double value(){
      return 10.;
    }
  }
);
  clientRepo.getCounter(new Counter.Key(new Role("c",Unit.Time.MINUTE),"testcounter")).add(20);
  try {
    sleep(2500);
  }
 catch (  final InterruptedException e) {
    Thread.interrupted();
  }
{
    final Collection<Role> gauges=Repository.INSTANCE.gauges();
    assertEquals(1,gauges.size());
    final Iterator<Role> iterator=gauges.iterator();
    final Role next=iterator.next();
    assertEquals("testgauge",next.getName());
    assertEquals("*100",next.getUnit().getName());
    final long now=System.currentTimeMillis();
    final SortedMap<Long,Double> gaugeValues=Repository.INSTANCE.getGaugeValues(now - 3000,now,next);
    assertTrue(gauges.size() > 0);
    assertEquals(10.,gaugeValues.get(gaugeValues.firstKey()),0.);
  }
{
    final Collection<Counter> counters=Repository.INSTANCE.counters();
    assertEquals(1,counters.size());
    final Counter counter=counters.iterator().next();
    assertEquals("testcounter",counter.getKey().getName());
    assertEquals("c",counter.getKey().getRole().getName());
    assertEquals("min",counter.getKey().getRole().getUnit().getName());
    assertEquals(20.,counter.getSum(),0.);
    assertEquals(1,counter.getHits());
  }
{
    final Map<String,NodeStatus> statuses=Repository.INSTANCE.statuses();
    assertEquals(1,statuses.size());
    assertTrue(statuses.containsKey("test"));
    final NodeStatus status=statuses.get("test");
    assertTrue(Math.abs(date.getTime() - status.getDate().getTime()) < 1250);
    assertEquals(Status.KO,status.getStatus());
    assertEquals(2,status.getResults().length);
    assertEquals("v1",status.getResults()[0].getName());
    assertEquals(Status.OK,status.getResults()[0].getStatus());
    assertEquals("all is fine",status.getResults()[0].getMessage());
    assertEquals("v2",status.getResults()[1].getName());
    assertEquals(Status.KO,status.getResults()[1].getStatus());
    assertEquals("oops something went wrong",status.getResults()[1].getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.test.sirona.javaagent.AgentPerfInterceptorAgentContractTest </h4><pre class="type-7 type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void attributes(){
  final String key="ref";
  final Object instance=new Object();
  AgentContext.listeners(key,new byte[0]);
  final AgentContext context=AgentContext.startOn(instance,key,null);
  context.stop(null);
  assertEquals(instance,context.getReference());
  assertEquals(key,context.getKey());
  assertEquals(1,Repository.INSTANCE.getCounter(AgentContext.key(key)).getHits());
}

</code></pre>

<br>
<pre class="type-7 type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void start(){
  final String key="start";
  AgentContext.listeners(key,new byte[0]);
  final AgentContext context=AgentContext.startOn(null,key,null);
  context.stop(null);
  assertEquals("org.apache.sirona.javaagent.AgentContext",context.getClass().getName());
  assertEquals(1,Repository.INSTANCE.getCounter(AgentContext.key(key)).getHits());
}

</code></pre>

<br>
<pre class="type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void key(){
  final Counter.Key key=AgentContext.key("key");
  assertEquals(Role.PERFORMANCES,key.getRole());
  assertEquals("key",key.getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.test.sirona.javaagent.HttpUrlConnectionAddHeaderTest </h4><pre class="type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void addHeader() throws IOException {
  final URL url=new URL("http://localhost:" + server.getAddress().getPort());
  final URLConnection connection=url.openConnection();
  connection.setConnectTimeout(200);
  connection.setReadTimeout(100);
  try {
    connection.connect();
  }
 catch (  final Exception e) {
  }
 finally {
    try {
      HttpURLConnection.class.cast(connection).disconnect();
    }
 catch (    final Exception e) {
    }
  }
  assertEquals("sirona",connection.getRequestProperty("origin-test"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.test.sirona.javaagent.OpenEJBTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void scanning() throws MalformedURLException {
  final AnnotationFinder finder=new AnnotationFinder(new FileArchive(Thread.currentThread().getContextClassLoader(),JarLocation.jarLocation(TicTacToeServiceEJB.class).toURI().toURL())).link();
  assertEquals(1,finder.findMetaAnnotatedFields(PersistenceContext.class).size());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void checkEJBAreInstrumented() throws Throwable {
  assertEquals(0,Repository.INSTANCE.counters().size());
  TicTacToeServiceEJB.class.cast(LocalBeanProxyFactory.newProxyInstance(Thread.currentThread().getContextClassLoader(),new InvocationHandler(){
    @Override public Object invoke(    final Object proxy,    final Method method,    final Object[] args) throws Throwable {
      return method.invoke(new TicTacToeServiceEJB(),args);
    }
  }
,TicTacToeServiceEJB.class)).touch();
  assertEquals(2,Repository.INSTANCE.counters().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.test.sirona.javaagent.OpenJPATest </h4><pre class="type-5 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void checkTheEntityIsUsableAndTransformationDidntFail() throws Throwable {
  assertEquals(0,Repository.INSTANCE.counters().size());
  final ServiceSquareEntity serviceSquareEntity=new ServiceSquareEntity();
  serviceSquareEntity.setPlayer(ServiceSquareEntity.Player.O);
  assertEquals("O",serviceSquareEntity.getPlayer().name());
  assertEquals(5,Repository.INSTANCE.counters().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.test.sirona.javaagent.SimpleTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void staticMonitoring(){
  assertHits("org.apache.test.sirona.javaagent.SimpleTest$StaticTransform.monitorMe()",0);
  assertEquals(1,StaticTransform.init);
  assertHits("org.apache.test.sirona.javaagent.SimpleTest$StaticTransform.monitorMe()",1);
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
