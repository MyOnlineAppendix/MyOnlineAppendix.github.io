<h3><span class=" glyphicon glyphicon-tag"/>&nbspUtilityVerifier</h3><kbd>Verifies (un)successful execution of the test case by reporting explicitly a failure</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.kafka.clients.MetadataTest </h4><pre class="type-10 type-9 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests that {@link org.apache.kafka.clients.Metadata#awaitUpdate(int,long)} doesn't
 * wait forever with a max timeout value of 0
 * @throws Exception
 * @see https://issues.apache.org/jira/browse/KAFKA-1836
 */
@Test public void testMetadataUpdateWaitTime() throws Exception {
  long time=0;
  metadata.update(Cluster.empty(),time);
  assertFalse("No update needed.",metadata.timeToNextUpdate(time) == 0);
  try {
    metadata.awaitUpdate(metadata.requestUpdate(),0);
    fail("Wait on metadata update was expected to timeout, but it didn't");
  }
 catch (  TimeoutException te) {
  }
  final long twoSecondWait=2000;
  try {
    metadata.awaitUpdate(metadata.requestUpdate(),twoSecondWait);
    fail("Wait on metadata update was expected to timeout, but it didn't");
  }
 catch (  TimeoutException te) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.KafkaConsumerTest </h4><pre class="type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstructorClose() throws Exception {
  Properties props=new Properties();
  props.setProperty(ConsumerConfig.CLIENT_ID_CONFIG,"testConstructorClose");
  props.setProperty(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG,"some.invalid.hostname.foo.bar:9999");
  props.setProperty(ConsumerConfig.METRIC_REPORTER_CLASSES_CONFIG,MockMetricsReporter.class.getName());
  final int oldInitCount=MockMetricsReporter.INIT_COUNT.get();
  final int oldCloseCount=MockMetricsReporter.CLOSE_COUNT.get();
  try {
    KafkaConsumer<byte[],byte[]> consumer=new KafkaConsumer<byte[],byte[]>(props,new ByteArrayDeserializer(),new ByteArrayDeserializer());
  }
 catch (  KafkaException e) {
    Assert.assertEquals(oldInitCount + 1,MockMetricsReporter.INIT_COUNT.get());
    Assert.assertEquals(oldCloseCount + 1,MockMetricsReporter.CLOSE_COUNT.get());
    Assert.assertEquals("Failed to construct kafka consumer",e.getMessage());
    return;
  }
  Assert.fail("should have caught an exception and returned");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.ConsumerNetworkClientTest </h4><pre class="type-10 type-9 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void wakeup(){
  RequestFuture<ClientResponse> future=consumerClient.send(node,ApiKeys.METADATA,heartbeatRequest());
  consumerClient.wakeup();
  try {
    consumerClient.poll(0);
    fail();
  }
 catch (  WakeupException e) {
  }
  client.respond(heartbeatResponse(Errors.NONE.code()));
  consumerClient.poll(future);
  assertTrue(future.isDone());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.FetcherTest </h4><pre class="type-10 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFetchOffsetOutOfRangeException(){
  subscriptionsNoAutoReset.assignFromUser(Arrays.asList(tp));
  subscriptionsNoAutoReset.seek(tp,0);
  fetcherNoAutoReset.initFetches(cluster);
  client.prepareResponse(fetchResponse(this.records.buffer(),Errors.OFFSET_OUT_OF_RANGE.code(),100L,0));
  consumerClient.poll(0);
  assertFalse(subscriptionsNoAutoReset.isOffsetResetNeeded(tp));
  try {
    fetcherNoAutoReset.fetchedRecords();
    fail("Should have thrown OffsetOutOfRangeException");
  }
 catch (  OffsetOutOfRangeException e) {
    assertTrue(e.offsetOutOfRangePartitions().containsKey(tp));
    assertEquals(e.offsetOutOfRangePartitions().size(),1);
  }
  assertEquals(0,fetcherNoAutoReset.fetchedRecords().size());
}

</code></pre>

<br>
<pre class="type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnauthorizedTopic(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.seek(tp,0);
  fetcher.initFetches(cluster);
  client.prepareResponse(fetchResponse(this.records.buffer(),Errors.TOPIC_AUTHORIZATION_FAILED.code(),100L,0));
  consumerClient.poll(0);
  try {
    fetcher.fetchedRecords();
    fail("fetchedRecords should have thrown");
  }
 catch (  TopicAuthorizationException e) {
    assertEquals(Collections.singleton(topicName),e.unauthorizedTopics());
  }
}

</code></pre>

<br>
<pre class="type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAllTopicsUnauthorized(){
  client.prepareResponse(new MetadataResponse(cluster,Collections.singletonMap(topicName,Errors.TOPIC_AUTHORIZATION_FAILED)).toStruct());
  try {
    fetcher.getAllTopicMetadata(10L);
    fail();
  }
 catch (  TopicAuthorizationException e) {
    assertEquals(Collections.singleton(topicName),e.unauthorizedTopics());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.KafkaProducerTest </h4><pre class="type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstructorFailureCloseResource(){
  Properties props=new Properties();
  props.setProperty(ProducerConfig.CLIENT_ID_CONFIG,"testConstructorClose");
  props.setProperty(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG,"some.invalid.hostname.foo.bar:9999");
  props.setProperty(ProducerConfig.METRIC_REPORTER_CLASSES_CONFIG,MockMetricsReporter.class.getName());
  final int oldInitCount=MockMetricsReporter.INIT_COUNT.get();
  final int oldCloseCount=MockMetricsReporter.CLOSE_COUNT.get();
  try {
    KafkaProducer<byte[],byte[]> producer=new KafkaProducer<byte[],byte[]>(props,new ByteArraySerializer(),new ByteArraySerializer());
  }
 catch (  KafkaException e) {
    Assert.assertEquals(oldInitCount + 1,MockMetricsReporter.INIT_COUNT.get());
    Assert.assertEquals(oldCloseCount + 1,MockMetricsReporter.CLOSE_COUNT.get());
    Assert.assertEquals("Failed to construct kafka producer",e.getMessage());
    return;
  }
  Assert.fail("should have caught an exception and returned");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.MockProducerTest </h4><pre class="type-10 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testManualCompletion() throws Exception {
  MockProducer<byte[],byte[]> producer=new MockProducer<byte[],byte[]>(false,new MockSerializer(),new MockSerializer());
  ProducerRecord<byte[],byte[]> record1=new ProducerRecord<byte[],byte[]>(topic,"key1".getBytes(),"value1".getBytes());
  ProducerRecord<byte[],byte[]> record2=new ProducerRecord<byte[],byte[]>(topic,"key2".getBytes(),"value2".getBytes());
  Future<RecordMetadata> md1=producer.send(record1);
  assertFalse("Send shouldn't have completed",md1.isDone());
  Future<RecordMetadata> md2=producer.send(record2);
  assertFalse("Send shouldn't have completed",md2.isDone());
  assertTrue("Complete the first request",producer.completeNext());
  assertFalse("Requst should be successful",isError(md1));
  assertFalse("Second request still incomplete",md2.isDone());
  IllegalArgumentException e=new IllegalArgumentException("blah");
  assertTrue("Complete the second request with an error",producer.errorNext(e));
  try {
    md2.get();
    fail("Expected error to be thrown");
  }
 catch (  ExecutionException err) {
    assertEquals(e,err.getCause());
  }
  assertFalse("No more requests to complete",producer.completeNext());
  Future<RecordMetadata> md3=producer.send(record1);
  Future<RecordMetadata> md4=producer.send(record2);
  assertTrue("Requests should not be completed.",!md3.isDone() && !md4.isDone());
  producer.flush();
  assertTrue("Requests should be completed.",md3.isDone() && md4.isDone());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.RecordSendTest </h4><pre class="type-10 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that waiting on a request that never completes times out
 */
@Test public void testTimeout() throws Exception {
  ProduceRequestResult request=new ProduceRequestResult();
  FutureRecordMetadata future=new FutureRecordMetadata(request,relOffset);
  assertFalse("Request is not completed",future.isDone());
  try {
    future.get(5,TimeUnit.MILLISECONDS);
    fail("Should have thrown exception.");
  }
 catch (  TimeoutException e) {
  }
  request.done(topicPartition,baseOffset,null);
  assertTrue(future.isDone());
  assertEquals(baseOffset + relOffset,future.get().offset());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.internals.BufferPoolTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
/** 
 * Test if Timeout exception is thrown when there is not enough memory to allocate and the elapsed time is greater than the max specified block time
 * @throws Exception
 */
@Test public void testBlockTimeout() throws Exception {
  BufferPool pool=new BufferPool(2,1,metrics,time,metricGroup);
  pool.allocate(1,maxBlockTimeMs);
  try {
    pool.allocate(2,maxBlockTimeMs);
    fail("The buffer allocated more memory than its maximum value 2");
  }
 catch (  TimeoutException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.metrics.MetricsTest </h4><pre class="type-10 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMetricName(){
  MetricName n1=metrics.metricName("name","group","description","key1","value1","key2","value2");
  Map<String,String> tags=new HashMap<String,String>();
  tags.put("key1","value1");
  tags.put("key2","value2");
  MetricName n2=metrics.metricName("name","group","description",tags);
  assertEquals("metric names created in two different ways should be equal",n1,n2);
  try {
    metrics.metricName("name","group","description","key1");
    fail("Creating MetricName with an odd number of keyValue should fail");
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<pre class="type-10 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQuotas(){
  Sensor sensor=metrics.sensor("test");
  sensor.add(metrics.metricName("test1.total","grp1"),new Total(),new MetricConfig().quota(Quota.upperBound(5.0)));
  sensor.add(metrics.metricName("test2.total","grp1"),new Total(),new MetricConfig().quota(Quota.lowerBound(0.0)));
  sensor.record(5.0);
  try {
    sensor.record(1.0);
    fail("Should have gotten a quota violation.");
  }
 catch (  QuotaViolationException e) {
  }
  assertEquals(6.0,metrics.metrics().get(metrics.metricName("test1.total","grp1")).value(),EPS);
  sensor.record(-6.0);
  try {
    sensor.record(-1.0);
    fail("Should have gotten a quota violation.");
  }
 catch (  QuotaViolationException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.network.SslTransportLayerTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
/** 
 * Tests that channels cannot be created if keystore cannot be loaded
 */
@Test public void testInvalidKeystorePassword() throws Exception {
  SslChannelBuilder channelBuilder=new SslChannelBuilder(Mode.CLIENT);
  try {
    sslClientConfigs.put(SslConfigs.SSL_KEYSTORE_PASSWORD_CONFIG,"invalid");
    channelBuilder.configure(sslClientConfigs);
    fail("SSL channel configured with invalid keystore password");
  }
 catch (  KafkaException e) {
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
/** 
 * Tests that channels cannot be created if truststore cannot be loaded
 */
@Test public void testInvalidTruststorePassword() throws Exception {
  SslChannelBuilder channelBuilder=new SslChannelBuilder(Mode.CLIENT);
  try {
    sslClientConfigs.put(SslConfigs.SSL_TRUSTSTORE_PASSWORD_CONFIG,"invalid");
    channelBuilder.configure(sslClientConfigs);
    fail("SSL channel configured with invalid truststore password");
  }
 catch (  KafkaException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.protocol.types.ProtocolSerializationTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testArray(){
  Type type=new ArrayOf(Type.INT8);
  int size=10;
  ByteBuffer invalidBuffer=ByteBuffer.allocate(4 + size);
  invalidBuffer.putInt(Integer.MAX_VALUE);
  for (int i=0; i < size; i++)   invalidBuffer.put((byte)i);
  invalidBuffer.rewind();
  try {
    type.read(invalidBuffer);
    fail("Array size not validated");
  }
 catch (  SchemaException e) {
  }
}

</code></pre>

<br>
<pre class="type-14 type-10 type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNulls(){
  for (  Field f : this.schema.fields()) {
    Object o=this.struct.get(f);
    try {
      this.struct.set(f,null);
      this.struct.validate();
      if (!f.type.isNullable())       fail("Should not allow serialization of null value.");
    }
 catch (    SchemaException e) {
      assertFalse(f.type.isNullable());
    }
 finally {
      this.struct.set(f,o);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.record.RecordTest </h4><pre class="type-8 type-13 type-10 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChecksum(){
  assertEquals(record.checksum(),record.computeChecksum());
  assertEquals(record.checksum(),Record.computeChecksum(this.key == null ? null : this.key.array(),this.value == null ? null : this.value.array(),this.compression,0,-1));
  assertTrue(record.isValid());
  for (int i=Record.CRC_OFFSET + Record.CRC_LENGTH; i < record.size(); i++) {
    Record copy=copyOf(record);
    copy.buffer().put(i,(byte)69);
    assertFalse(copy.isValid());
    try {
      copy.ensureValid();
      fail("Should fail the above test.");
    }
 catch (    InvalidRecordException e) {
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.data.SchemaProjectorTest </h4><pre class="type-8 type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMapProjection() throws Exception {
  Schema source=SchemaBuilder.map(Schema.INT32_SCHEMA,Schema.INT32_SCHEMA).optional().build();
  Schema target=SchemaBuilder.map(Schema.INT32_SCHEMA,Schema.INT32_SCHEMA).defaultValue(Collections.singletonMap(1,2)).build();
  Object projected=SchemaProjector.project(source,Collections.singletonMap(3,4),target);
  assertEquals(Collections.singletonMap(3,4),(Map<Integer,Integer>)projected);
  projected=SchemaProjector.project(source,null,target);
  assertEquals(Collections.singletonMap(1,2),(Map<Integer,Integer>)projected);
  Schema promotedTarget=SchemaBuilder.map(Schema.INT64_SCHEMA,Schema.FLOAT32_SCHEMA).defaultValue(Collections.singletonMap(3L,4.5F)).build();
  projected=SchemaProjector.project(source,Collections.singletonMap(3,4),promotedTarget);
  assertEquals(Collections.singletonMap(3L,4.F),(Map<Long,Float>)projected);
  projected=SchemaProjector.project(source,null,promotedTarget);
  assertEquals(Collections.singletonMap(3L,4.5F),(Map<Long,Float>)projected);
  Schema noDefaultValueTarget=SchemaBuilder.map(Schema.INT32_SCHEMA,Schema.INT32_SCHEMA).build();
  try {
    SchemaProjector.project(source,null,noDefaultValueTarget);
    fail("Reader does not provide a default value.");
  }
 catch (  SchemaProjectorException e) {
  }
  Schema nonPromotableTarget=SchemaBuilder.map(Schema.BOOLEAN_SCHEMA,Schema.STRING_SCHEMA).build();
  try {
    SchemaProjector.project(source,null,nonPromotableTarget);
    fail("Neither source type matches target type nor source type can be promoted to target type");
  }
 catch (  SchemaProjectorException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-10 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStructRemoveField() throws Exception {
  Schema source=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).field("field2",Schema.INT32_SCHEMA).build();
  Struct sourceStruct=new Struct(source);
  sourceStruct.put("field",1);
  sourceStruct.put("field2",234);
  Schema target=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).build();
  Struct targetStruct=(Struct)SchemaProjector.project(source,sourceStruct,target);
  assertEquals(1,targetStruct.get("field"));
  try {
    targetStruct.get("field2");
    fail("field2 is not part of the projected struct");
  }
 catch (  DataException e) {
  }
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testMaybeCompatible() throws Exception {
  Schema source=SchemaBuilder.int32().name("source").build();
  Schema target=SchemaBuilder.int32().name("target").build();
  try {
    SchemaProjector.project(source,12,target);
    fail("Source name and target name mismatch.");
  }
 catch (  SchemaProjectorException e) {
  }
  Schema targetWithParameters=SchemaBuilder.int32().parameters(Collections.singletonMap("key","value"));
  try {
    SchemaProjector.project(source,34,targetWithParameters);
    fail("Source parameters and target parameters mismatch.");
  }
 catch (  SchemaProjectorException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testArrayProjection() throws Exception {
  Schema source=SchemaBuilder.array(Schema.INT32_SCHEMA).build();
  Object projected=SchemaProjector.project(source,Arrays.asList(1,2,3),source);
  assertEquals(Arrays.asList(1,2,3),(List<Integer>)projected);
  Schema optionalSource=SchemaBuilder.array(Schema.INT32_SCHEMA).optional().build();
  Schema target=SchemaBuilder.array(Schema.INT32_SCHEMA).defaultValue(Arrays.asList(1,2,3)).build();
  projected=SchemaProjector.project(optionalSource,Arrays.asList(4,5),target);
  assertEquals(Arrays.asList(4,5),(List<Integer>)projected);
  projected=SchemaProjector.project(optionalSource,null,target);
  assertEquals(Arrays.asList(1,2,3),(List<Integer>)projected);
  Schema promotedTarget=SchemaBuilder.array(Schema.INT64_SCHEMA).defaultValue(Arrays.asList(1L,2L,3L)).build();
  projected=SchemaProjector.project(optionalSource,Arrays.asList(4,5),promotedTarget);
  List<Long> expectedProjected=Arrays.asList(4L,5L);
  assertEquals(expectedProjected,(List<Long>)projected);
  projected=SchemaProjector.project(optionalSource,null,promotedTarget);
  assertEquals(Arrays.asList(1L,2L,3L),(List<Long>)projected);
  Schema noDefaultValueTarget=SchemaBuilder.array(Schema.INT32_SCHEMA).build();
  try {
    SchemaProjector.project(optionalSource,null,noDefaultValueTarget);
    fail("Target schema does not provide a default value.");
  }
 catch (  SchemaProjectorException e) {
  }
  Schema nonPromotableTarget=SchemaBuilder.array(Schema.BOOLEAN_SCHEMA).build();
  try {
    SchemaProjector.project(optionalSource,null,nonPromotableTarget);
    fail("Neither source type matches target type nor source type can be promoted to target type");
  }
 catch (  SchemaProjectorException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLogicalTypeProjection() throws Exception {
  Schema[] logicalTypeSchemas={Decimal.schema(2),Date.SCHEMA,Time.SCHEMA,Timestamp.SCHEMA};
  Object projected;
  BigDecimal testDecimal=new BigDecimal(new BigInteger("156"),2);
  projected=SchemaProjector.project(Decimal.schema(2),testDecimal,Decimal.schema(2));
  assertEquals(testDecimal,projected);
  projected=SchemaProjector.project(Date.SCHEMA,1000,Date.SCHEMA);
  assertEquals(1000,projected);
  projected=SchemaProjector.project(Time.SCHEMA,231,Time.SCHEMA);
  assertEquals(231,projected);
  projected=SchemaProjector.project(Timestamp.SCHEMA,34567L,Timestamp.SCHEMA);
  assertEquals(34567L,projected);
  Schema namedSchema=SchemaBuilder.int32().name("invalidLogicalTypeName").build();
  for (  Schema logicalTypeSchema : logicalTypeSchemas) {
    try {
      SchemaProjector.project(logicalTypeSchema,null,Schema.BOOLEAN_SCHEMA);
      fail("Cannot project logical types to non-logical types.");
    }
 catch (    SchemaProjectorException e) {
    }
    try {
      SchemaProjector.project(logicalTypeSchema,null,namedSchema);
      fail("Reader name is not a valid logical type name.");
    }
 catch (    SchemaProjectorException e) {
    }
    try {
      SchemaProjector.project(Schema.BOOLEAN_SCHEMA,null,logicalTypeSchema);
      fail("Cannot project non-logical types to logical types.");
    }
 catch (    SchemaProjectorException e) {
    }
  }
}

</code></pre>

<br>
<pre class="type-8 type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPrimitiveTypeProjection() throws Exception {
  Object projected;
  projected=SchemaProjector.project(Schema.BOOLEAN_SCHEMA,false,Schema.BOOLEAN_SCHEMA);
  assertEquals(false,projected);
  byte[] bytes={(byte)1,(byte)2};
  projected=SchemaProjector.project(Schema.BYTES_SCHEMA,bytes,Schema.BYTES_SCHEMA);
  assertEquals(bytes,projected);
  projected=SchemaProjector.project(Schema.STRING_SCHEMA,"abc",Schema.STRING_SCHEMA);
  assertEquals("abc",projected);
  projected=SchemaProjector.project(Schema.BOOLEAN_SCHEMA,false,Schema.OPTIONAL_BOOLEAN_SCHEMA);
  assertEquals(false,projected);
  projected=SchemaProjector.project(Schema.BYTES_SCHEMA,bytes,Schema.OPTIONAL_BYTES_SCHEMA);
  assertEquals(bytes,projected);
  projected=SchemaProjector.project(Schema.STRING_SCHEMA,"abc",Schema.OPTIONAL_STRING_SCHEMA);
  assertEquals("abc",projected);
  try {
    SchemaProjector.project(Schema.OPTIONAL_BOOLEAN_SCHEMA,false,Schema.BOOLEAN_SCHEMA);
    fail("Cannot project optional schema to schema with no default value.");
  }
 catch (  DataException e) {
  }
  try {
    SchemaProjector.project(Schema.OPTIONAL_BYTES_SCHEMA,bytes,Schema.BYTES_SCHEMA);
    fail("Cannot project optional schema to schema with no default value.");
  }
 catch (  DataException e) {
  }
  try {
    SchemaProjector.project(Schema.OPTIONAL_STRING_SCHEMA,"abc",Schema.STRING_SCHEMA);
    fail("Cannot project optional schema to schema with no default value.");
  }
 catch (  DataException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-10 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStructAddField() throws Exception {
  Schema source=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).build();
  Struct sourceStruct=new Struct(source);
  sourceStruct.put("field",1);
  Schema target=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).field("field2",SchemaBuilder.int32().defaultValue(123).build()).build();
  Struct targetStruct=(Struct)SchemaProjector.project(source,sourceStruct,target);
  assertEquals(1,(int)targetStruct.getInt32("field"));
  assertEquals(123,(int)targetStruct.getInt32("field2"));
  Schema incompatibleTargetSchema=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).field("field2",Schema.INT32_SCHEMA).build();
  try {
    SchemaProjector.project(source,sourceStruct,incompatibleTargetSchema);
    fail("Incompatible schema.");
  }
 catch (  DataException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-13 type-14 type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNumericTypeProjection() throws Exception {
  Schema[] promotableSchemas={Schema.INT8_SCHEMA,Schema.INT16_SCHEMA,Schema.INT32_SCHEMA,Schema.INT64_SCHEMA,Schema.FLOAT32_SCHEMA,Schema.FLOAT64_SCHEMA};
  Schema[] promotableOptionalSchemas={Schema.OPTIONAL_INT8_SCHEMA,Schema.OPTIONAL_INT16_SCHEMA,Schema.OPTIONAL_INT32_SCHEMA,Schema.OPTIONAL_INT64_SCHEMA,Schema.OPTIONAL_FLOAT32_SCHEMA,Schema.OPTIONAL_FLOAT64_SCHEMA};
  Object[] values={(byte)127,(short)255,32767,327890L,1.2F,1.2345};
  Map<Object,List<?>> expectedProjected=new HashMap<>();
  expectedProjected.put(values[0],Arrays.asList((byte)127,(short)127,127,127L,127.F,127.));
  expectedProjected.put(values[1],Arrays.asList((short)255,255,255L,255.F,255.));
  expectedProjected.put(values[2],Arrays.asList(32767,32767L,32767.F,32767.));
  expectedProjected.put(values[3],Arrays.asList(327890L,327890.F,327890.));
  expectedProjected.put(values[4],Arrays.asList(1.2F,1.2));
  expectedProjected.put(values[5],Arrays.asList(1.2345));
  Object promoted;
  for (int i=0; i < promotableSchemas.length; ++i) {
    Schema source=promotableSchemas[i];
    List<?> expected=expectedProjected.get(values[i]);
    for (int j=i; j < promotableSchemas.length; ++j) {
      Schema target=promotableSchemas[j];
      promoted=SchemaProjector.project(source,values[i],target);
      if (target.type() == Type.FLOAT64) {
        assertEquals((Double)(expected.get(j - i)),(double)promoted,1e-6);
      }
 else {
        assertEquals(expected.get(j - i),promoted);
      }
    }
    for (int j=i; j < promotableOptionalSchemas.length; ++j) {
      Schema target=promotableOptionalSchemas[j];
      promoted=SchemaProjector.project(source,values[i],target);
      if (target.type() == Type.FLOAT64) {
        assertEquals((Double)(expected.get(j - i)),(double)promoted,1e-6);
      }
 else {
        assertEquals(expected.get(j - i),promoted);
      }
    }
  }
  for (int i=0; i < promotableOptionalSchemas.length; ++i) {
    Schema source=promotableSchemas[i];
    List<?> expected=expectedProjected.get(values[i]);
    for (int j=i; j < promotableOptionalSchemas.length; ++j) {
      Schema target=promotableOptionalSchemas[j];
      promoted=SchemaProjector.project(source,values[i],target);
      if (target.type() == Type.FLOAT64) {
        assertEquals((Double)(expected.get(j - i)),(double)promoted,1e-6);
      }
 else {
        assertEquals(expected.get(j - i),promoted);
      }
    }
  }
  Schema[] nonPromotableSchemas={Schema.BOOLEAN_SCHEMA,Schema.BYTES_SCHEMA,Schema.STRING_SCHEMA};
  for (  Schema promotableSchema : promotableSchemas) {
    for (    Schema nonPromotableSchema : nonPromotableSchemas) {
      Object dummy=new Object();
      try {
        SchemaProjector.project(promotableSchema,dummy,nonPromotableSchema);
        fail("Cannot promote " + promotableSchema.type() + " to "+ nonPromotableSchema.type());
      }
 catch (      DataException e) {
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.runtime.WorkerSinkTaskTest </h4><pre class="type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testErrorInRebalancePartitionRevocation() throws Exception {
  RuntimeException exception=new RuntimeException("Revocation error");
  expectInitializeTask();
  expectPollInitialAssignment();
  expectRebalanceRevocationError(exception);
  PowerMock.replayAll();
  workerTask.initialize(TASK_PROPS);
  workerTask.initializeAndStart();
  workerTask.poll(Long.MAX_VALUE);
  try {
    workerTask.poll(Long.MAX_VALUE);
    fail("Poll should have raised the rebalance exception");
  }
 catch (  RuntimeException e) {
    assertEquals(exception,e);
  }
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testErrorInRebalancePartitionAssignment() throws Exception {
  RuntimeException exception=new RuntimeException("Assignment error");
  expectInitializeTask();
  expectPollInitialAssignment();
  expectRebalanceAssignmentError(exception);
  PowerMock.replayAll();
  workerTask.initialize(TASK_PROPS);
  workerTask.initializeAndStart();
  workerTask.poll(Long.MAX_VALUE);
  try {
    workerTask.poll(Long.MAX_VALUE);
    fail("Poll should have raised the rebalance exception");
  }
 catch (  RuntimeException e) {
    assertEquals(exception,e);
  }
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.runtime.WorkerSinkTaskThreadedTest </h4><pre class="type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAssignmentPauseResume() throws Exception {
  expectInitializeTask();
  expectOnePoll().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      assertEquals(new HashSet<>(Arrays.asList(TOPIC_PARTITION,TOPIC_PARTITION2,TOPIC_PARTITION3)),sinkTaskContext.getValue().assignment());
      return null;
    }
  }
);
  EasyMock.expect(consumer.assignment()).andReturn(new HashSet<>(Arrays.asList(TOPIC_PARTITION,TOPIC_PARTITION2,TOPIC_PARTITION3)));
  expectOnePoll().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      try {
        sinkTaskContext.getValue().pause(UNASSIGNED_TOPIC_PARTITION);
        fail("Trying to pause unassigned partition should have thrown an Connect exception");
      }
 catch (      ConnectException e) {
      }
      sinkTaskContext.getValue().pause(TOPIC_PARTITION,TOPIC_PARTITION2);
      return null;
    }
  }
);
  consumer.pause(UNASSIGNED_TOPIC_PARTITION);
  PowerMock.expectLastCall().andThrow(new IllegalStateException("unassigned topic partition"));
  consumer.pause(TOPIC_PARTITION,TOPIC_PARTITION2);
  PowerMock.expectLastCall();
  expectOnePoll().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      try {
        sinkTaskContext.getValue().resume(UNASSIGNED_TOPIC_PARTITION);
        fail("Trying to resume unassigned partition should have thrown an Connect exception");
      }
 catch (      ConnectException e) {
      }
      sinkTaskContext.getValue().resume(TOPIC_PARTITION,TOPIC_PARTITION2);
      return null;
    }
  }
);
  consumer.resume(UNASSIGNED_TOPIC_PARTITION);
  PowerMock.expectLastCall().andThrow(new IllegalStateException("unassigned topic partition"));
  consumer.resume(TOPIC_PARTITION,TOPIC_PARTITION2);
  PowerMock.expectLastCall();
  expectStopTask(0);
  PowerMock.replayAll();
  workerTask.initialize(TASK_PROPS);
  workerTask.initializeAndStart();
  workerTask.iteration();
  workerTask.iteration();
  workerTask.iteration();
  workerTask.stop();
  workerTask.awaitStop(Long.MAX_VALUE);
  workerTask.close();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.runtime.WorkerTest </h4><pre class="type-10 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReconfigureConnectorTasks() throws Exception {
  offsetBackingStore.configure(EasyMock.anyObject(Map.class));
  EasyMock.expectLastCall();
  offsetBackingStore.start();
  EasyMock.expectLastCall();
  Connector connector=PowerMock.createMock(Connector.class);
  ConnectorContext ctx=PowerMock.createMock(ConnectorContext.class);
  PowerMock.mockStatic(Worker.class);
  PowerMock.expectPrivate(Worker.class,"instantiateConnector",new Object[]{WorkerTestConnector.class}).andReturn(connector);
  EasyMock.expect(connector.version()).andReturn("1.0");
  Map<String,String> props=new HashMap<>();
  props.put(ConnectorConfig.TOPICS_CONFIG,"foo,bar");
  props.put(ConnectorConfig.TASKS_MAX_CONFIG,"1");
  props.put(ConnectorConfig.NAME_CONFIG,CONNECTOR_ID);
  props.put(ConnectorConfig.CONNECTOR_CLASS_CONFIG,WorkerTestConnector.class.getName());
  connector.initialize(ctx);
  EasyMock.expectLastCall();
  connector.start(props);
  EasyMock.expectLastCall();
  EasyMock.<Class<? extends Task>>expect(connector.taskClass()).andReturn(TestSourceTask.class);
  Map<String,String> taskProps=new HashMap<>();
  taskProps.put("foo","bar");
  EasyMock.expect(connector.taskConfigs(2)).andReturn(Arrays.asList(taskProps,taskProps));
  connector.stop();
  EasyMock.expectLastCall();
  offsetBackingStore.stop();
  EasyMock.expectLastCall();
  PowerMock.replayAll();
  worker=new Worker(new MockTime(),config,offsetBackingStore);
  worker.start();
  ConnectorConfig config=new ConnectorConfig(props);
  assertEquals(Collections.emptySet(),worker.connectorNames());
  worker.addConnector(config,ctx);
  assertEquals(new HashSet<>(Arrays.asList(CONNECTOR_ID)),worker.connectorNames());
  try {
    worker.addConnector(config,ctx);
    fail("Should have thrown exception when trying to add connector with same name.");
  }
 catch (  ConnectException e) {
  }
  List<Map<String,String>> taskConfigs=worker.connectorTaskConfigs(CONNECTOR_ID,2,Arrays.asList("foo","bar"));
  Map<String,String> expectedTaskProps=new HashMap<>();
  expectedTaskProps.put("foo","bar");
  expectedTaskProps.put(TaskConfig.TASK_CLASS_CONFIG,TestSourceTask.class.getName());
  expectedTaskProps.put(SinkTask.TOPICS_CONFIG,"foo,bar");
  assertEquals(2,taskConfigs.size());
  assertEquals(expectedTaskProps,taskConfigs.get(0));
  assertEquals(expectedTaskProps,taskConfigs.get(1));
  worker.stopConnector(CONNECTOR_ID);
  assertEquals(Collections.emptySet(),worker.connectorNames());
  worker.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-10 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddRemoveConnector() throws Exception {
  offsetBackingStore.configure(EasyMock.anyObject(Map.class));
  EasyMock.expectLastCall();
  offsetBackingStore.start();
  EasyMock.expectLastCall();
  Connector connector=PowerMock.createMock(Connector.class);
  ConnectorContext ctx=PowerMock.createMock(ConnectorContext.class);
  PowerMock.mockStatic(Worker.class);
  PowerMock.expectPrivate(Worker.class,"instantiateConnector",new Object[]{WorkerTestConnector.class}).andReturn(connector);
  EasyMock.expect(connector.version()).andReturn("1.0");
  Map<String,String> props=new HashMap<>();
  props.put(ConnectorConfig.TOPICS_CONFIG,"foo,bar");
  props.put(ConnectorConfig.TASKS_MAX_CONFIG,"1");
  props.put(ConnectorConfig.NAME_CONFIG,CONNECTOR_ID);
  props.put(ConnectorConfig.CONNECTOR_CLASS_CONFIG,WorkerTestConnector.class.getName());
  connector.initialize(ctx);
  EasyMock.expectLastCall();
  connector.start(props);
  EasyMock.expectLastCall();
  connector.stop();
  EasyMock.expectLastCall();
  offsetBackingStore.stop();
  EasyMock.expectLastCall();
  PowerMock.replayAll();
  worker=new Worker(new MockTime(),config,offsetBackingStore);
  worker.start();
  ConnectorConfig config=new ConnectorConfig(props);
  assertEquals(Collections.emptySet(),worker.connectorNames());
  worker.addConnector(config,ctx);
  assertEquals(new HashSet<>(Arrays.asList(CONNECTOR_ID)),worker.connectorNames());
  try {
    worker.addConnector(config,ctx);
    fail("Should have thrown exception when trying to add connector with same name.");
  }
 catch (  ConnectException e) {
  }
  worker.stopConnector(CONNECTOR_ID);
  assertEquals(Collections.emptySet(),worker.connectorNames());
  worker.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.runtime.standalone.StandaloneHerderTest </h4><pre class="type-10 type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDestroyConnector() throws Exception {
  connector=PowerMock.createMock(BogusSourceConnector.class);
  expectAdd(CONNECTOR_NAME,BogusSourceConnector.class,BogusSourceTask.class,false);
  expectDestroy();
  PowerMock.replayAll();
  herder.putConnectorConfig(CONNECTOR_NAME,connectorConfig(CONNECTOR_NAME,BogusSourceConnector.class),false,createCallback);
  FutureCallback<Herder.Created<ConnectorInfo>> futureCb=new FutureCallback<>();
  herder.putConnectorConfig(CONNECTOR_NAME,null,true,futureCb);
  futureCb.get(1000L,TimeUnit.MILLISECONDS);
  futureCb=new FutureCallback<>();
  herder.putConnectorConfig(CONNECTOR_NAME,null,true,futureCb);
  try {
    futureCb.get(1000L,TimeUnit.MILLISECONDS);
    fail("Should have thrown NotFoundException");
  }
 catch (  ExecutionException e) {
    assertTrue(e.getCause() instanceof NotFoundException);
  }
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.storage.KafkaConfigStorageTest </h4><pre class="type-10 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutTaskConfigsDoesNotResolveAllInconsistencies() throws Exception {
  expectConfigure();
  List<ConsumerRecord<String,byte[]>> existingRecords=Arrays.asList(new ConsumerRecord<>(TOPIC,0,0,CONNECTOR_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(0)),new ConsumerRecord<>(TOPIC,0,2,TASK_CONFIG_KEYS.get(1),CONFIGS_SERIALIZED.get(2)),new ConsumerRecord<>(TOPIC,0,4,COMMIT_TASKS_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(4)),new ConsumerRecord<>(TOPIC,0,5,TASK_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(5)));
  LinkedHashMap<byte[],Struct> deserialized=new LinkedHashMap();
  deserialized.put(CONFIGS_SERIALIZED.get(0),CONNECTOR_CONFIG_STRUCTS.get(0));
  deserialized.put(CONFIGS_SERIALIZED.get(2),TASK_CONFIG_STRUCTS.get(0));
  deserialized.put(CONFIGS_SERIALIZED.get(4),TASKS_COMMIT_STRUCT_TWO_TASK_CONNECTOR);
  deserialized.put(CONFIGS_SERIALIZED.get(5),TASK_CONFIG_STRUCTS.get(1));
  logOffset=6;
  expectStart(existingRecords,deserialized);
  expectReadToEnd(new LinkedHashMap<String,byte[]>());
  expectReadToEnd(new LinkedHashMap<String,byte[]>());
  expectConvertWriteRead(TASK_CONFIG_KEYS.get(0),KafkaConfigStorage.TASK_CONFIGURATION_V0,CONFIGS_SERIALIZED.get(0),"properties",SAMPLE_CONFIGS.get(0));
  expectReadToEnd(new LinkedHashMap<String,byte[]>());
  expectConvertWriteRead(COMMIT_TASKS_CONFIG_KEYS.get(0),KafkaConfigStorage.CONNECTOR_TASKS_COMMIT_V0,CONFIGS_SERIALIZED.get(2),"tasks",1);
  tasksReconfiguredCallback.onCompletion(null,Arrays.asList(TASK_IDS.get(0)));
  EasyMock.expectLastCall();
  LinkedHashMap<String,byte[]> serializedConfigs=new LinkedHashMap<>();
  serializedConfigs.put(TASK_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(0));
  serializedConfigs.put(COMMIT_TASKS_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(2));
  expectReadToEnd(serializedConfigs);
  expectStop();
  PowerMock.replayAll();
  configStorage.configure(DEFAULT_CONFIG_STORAGE_PROPS);
  configStorage.start();
  ClusterConfigState configState=configStorage.snapshot();
  assertEquals(6,configState.offset());
  assertEquals(Arrays.asList(CONNECTOR_IDS.get(0)),new ArrayList<>(configState.connectors()));
  assertEquals(Collections.EMPTY_LIST,configState.tasks(CONNECTOR_IDS.get(0)));
  assertNull(configState.taskConfig(TASK_IDS.get(0)));
  assertNull(configState.taskConfig(TASK_IDS.get(1)));
  assertEquals(Collections.singleton(CONNECTOR_IDS.get(0)),configState.inconsistentConnectors());
  try {
    configStorage.putTaskConfigs(Collections.singletonMap(TASK_IDS.get(1),SAMPLE_CONFIGS.get(2)));
    fail("Should have failed due to incomplete task set.");
  }
 catch (  KafkaException e) {
  }
  configStorage.putTaskConfigs(Collections.singletonMap(TASK_IDS.get(0),SAMPLE_CONFIGS.get(0)));
  configState=configStorage.snapshot();
  assertEquals(8,configState.offset());
  assertEquals(Arrays.asList(CONNECTOR_IDS.get(0)),new ArrayList<>(configState.connectors()));
  assertEquals(Arrays.asList(TASK_IDS.get(0)),configState.tasks(CONNECTOR_IDS.get(0)));
  assertEquals(SAMPLE_CONFIGS.get(0),configState.taskConfig(TASK_IDS.get(0)));
  assertEquals(Collections.EMPTY_SET,configState.inconsistentConnectors());
  configStorage.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.storage.KafkaOffsetBackingStoreTest </h4><pre class="type-8 type-10 type-9 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetFailure() throws Exception {
  expectConfigure();
  expectStart(Collections.EMPTY_LIST);
  expectStop();
  Capture<org.apache.kafka.clients.producer.Callback> callback0=EasyMock.newCapture();
  storeLog.send(EasyMock.aryEq(TP0_KEY.array()),EasyMock.aryEq(TP0_VALUE.array()),EasyMock.capture(callback0));
  PowerMock.expectLastCall();
  Capture<org.apache.kafka.clients.producer.Callback> callback1=EasyMock.newCapture();
  storeLog.send(EasyMock.aryEq(TP1_KEY.array()),EasyMock.aryEq(TP1_VALUE.array()),EasyMock.capture(callback1));
  PowerMock.expectLastCall();
  Capture<org.apache.kafka.clients.producer.Callback> callback2=EasyMock.newCapture();
  storeLog.send(EasyMock.aryEq(TP2_KEY.array()),EasyMock.aryEq(TP2_VALUE.array()),EasyMock.capture(callback2));
  PowerMock.expectLastCall();
  PowerMock.replayAll();
  store.configure(DEFAULT_PROPS);
  store.start();
  Map<ByteBuffer,ByteBuffer> toSet=new HashMap<>();
  toSet.put(TP0_KEY,TP0_VALUE);
  toSet.put(TP1_KEY,TP1_VALUE);
  toSet.put(TP2_KEY,TP2_VALUE);
  final AtomicBoolean invoked=new AtomicBoolean(false);
  final AtomicBoolean invokedFailure=new AtomicBoolean(false);
  Future<Void> setFuture=store.set(toSet,new Callback<Void>(){
    @Override public void onCompletion(    Throwable error,    Void result){
      invoked.set(true);
      if (error != null)       invokedFailure.set(true);
    }
  }
);
  assertFalse(setFuture.isDone());
  callback1.getValue().onCompletion(null,null);
  assertFalse(invoked.get());
  callback2.getValue().onCompletion(null,new KafkaException("bogus error"));
  assertTrue(invoked.get());
  assertTrue(invokedFailure.get());
  callback0.getValue().onCompletion(null,null);
  try {
    setFuture.get(10000,TimeUnit.MILLISECONDS);
    fail("Should have seen KafkaException thrown when waiting on KafkaOffsetBackingStore.set() future");
  }
 catch (  ExecutionException e) {
    assertNotNull(e.getCause());
    assertTrue(e.getCause() instanceof KafkaException);
  }
  store.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.log4jappender.KafkaLog4jAppenderTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testKafkaLog4jConfigs(){
  Properties props=new Properties();
  props.put("log4j.rootLogger","INFO");
  props.put("log4j.appender.KAFKA","org.apache.kafka.log4jappender.KafkaLog4jAppender");
  props.put("log4j.appender.KAFKA.layout","org.apache.log4j.PatternLayout");
  props.put("log4j.appender.KAFKA.layout.ConversionPattern","%-5p: %c - %m%n");
  props.put("log4j.appender.KAFKA.Topic","test-topic");
  props.put("log4j.logger.kafka.log4j","INFO, KAFKA");
  try {
    PropertyConfigurator.configure(props);
    Assert.fail("Missing properties exception was expected !");
  }
 catch (  ConfigException ex) {
  }
  props=new Properties();
  props.put("log4j.rootLogger","INFO");
  props.put("log4j.appender.KAFKA","org.apache.kafka.log4jappender.KafkaLog4jAppender");
  props.put("log4j.appender.KAFKA.layout","org.apache.log4j.PatternLayout");
  props.put("log4j.appender.KAFKA.layout.ConversionPattern","%-5p: %c - %m%n");
  props.put("log4j.appender.KAFKA.brokerList","127.0.0.1:9093");
  props.put("log4j.logger.kafka.log4j","INFO, KAFKA");
  try {
    PropertyConfigurator.configure(props);
    Assert.fail("Missing properties exception was expected !");
  }
 catch (  ConfigException ex) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.state.internals.AbstractKeyValueStoreTest </h4><pre class="type-13 type-14 type-10 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutGetRange(){
  KeyValueStoreTestDriver<Integer,String> driver=KeyValueStoreTestDriver.create(Integer.class,String.class);
  KeyValueStore<Integer,String> store=createKeyValueStore(driver.context(),Integer.class,String.class,false);
  try {
    store.put(0,"zero");
    store.put(1,"one");
    store.put(2,"two");
    store.put(4,"four");
    store.put(5,"five");
    assertEquals(5,driver.sizeOf(store));
    assertEquals("zero",store.get(0));
    assertEquals("one",store.get(1));
    assertEquals("two",store.get(2));
    assertNull(store.get(3));
    assertEquals("four",store.get(4));
    assertEquals("five",store.get(5));
    store.delete(5);
    store.flush();
    assertEquals("zero",driver.flushedEntryStored(0));
    assertEquals("one",driver.flushedEntryStored(1));
    assertEquals("two",driver.flushedEntryStored(2));
    assertEquals("four",driver.flushedEntryStored(4));
    assertEquals(null,driver.flushedEntryStored(5));
    assertEquals(false,driver.flushedEntryRemoved(0));
    assertEquals(false,driver.flushedEntryRemoved(1));
    assertEquals(false,driver.flushedEntryRemoved(2));
    assertEquals(false,driver.flushedEntryRemoved(4));
    assertEquals(true,driver.flushedEntryRemoved(5));
    try (KeyValueIterator<Integer,String> iter=store.range(2,4)){
      while (iter.hasNext()) {
        KeyValue<Integer,String> entry=iter.next();
        if (entry.key.equals(2))         assertEquals("two",entry.value);
 else         if (entry.key.equals(4))         assertEquals("four",entry.value);
 else         fail("Unexpected entry: " + entry);
      }
    }
     try (KeyValueIterator<Integer,String> iter=store.range(2,6)){
      while (iter.hasNext()) {
        KeyValue<Integer,String> entry=iter.next();
        if (entry.key.equals(2))         assertEquals("two",entry.value);
 else         if (entry.key.equals(4))         assertEquals("four",entry.value);
 else         fail("Unexpected entry: " + entry);
      }
    }
   }
  finally {
    store.close();
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
