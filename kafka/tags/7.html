<h3><span class=" glyphicon glyphicon-tag"/>&nbspInternalCallVerifier</h3><kbd>Verifies values of objects/variables related to AUT calls</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.kafka.clients.MetadataTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFailedUpdate(){
  long time=100;
  metadata.update(Cluster.empty(),time);
  assertEquals(100,metadata.timeToNextUpdate(1000));
  metadata.failedUpdate(1100);
  assertEquals(100,metadata.timeToNextUpdate(1100));
  assertEquals(100,metadata.lastSuccessfulUpdate());
  metadata.needMetadataForAllTopics(true);
  metadata.update(null,time);
  assertEquals(100,metadata.timeToNextUpdate(1000));
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMetadata() throws Exception {
  long time=0;
  metadata.update(Cluster.empty(),time);
  assertFalse("No update needed.",metadata.timeToNextUpdate(time) == 0);
  metadata.requestUpdate();
  assertFalse("Still no updated needed due to backoff",metadata.timeToNextUpdate(time) == 0);
  time+=refreshBackoffMs;
  assertTrue("Update needed now that backoff time expired",metadata.timeToNextUpdate(time) == 0);
  String topic="my-topic";
  Thread t1=asyncFetch(topic);
  Thread t2=asyncFetch(topic);
  assertTrue("Awaiting update",t1.isAlive());
  assertTrue("Awaiting update",t2.isAlive());
  while (t1.isAlive() || t2.isAlive()) {
    if (metadata.timeToNextUpdate(time) == 0) {
      metadata.update(TestUtils.singletonCluster(topic,1),time);
      time+=refreshBackoffMs;
    }
    Thread.sleep(1);
  }
  t1.join();
  t2.join();
  assertFalse("No update needed.",metadata.timeToNextUpdate(time) == 0);
  time+=metadataExpireMs;
  assertTrue("Update needed due to stale metadata.",metadata.timeToNextUpdate(time) == 0);
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUpdateWithNeedMetadataForAllTopics(){
  long time=0;
  metadata.update(Cluster.empty(),time);
  metadata.needMetadataForAllTopics(true);
  final List<String> expectedTopics=Collections.singletonList("topic");
  metadata.setTopics(expectedTopics);
  metadata.update(new Cluster(Collections.singletonList(new Node(0,"host1",1000)),Arrays.asList(new PartitionInfo("topic",0,null,null,null),new PartitionInfo("topic1",0,null,null,null)),Collections.<String>emptySet()),100);
  assertArrayEquals("Metadata got updated with wrong set of topics.",expectedTopics.toArray(),metadata.topics().toArray());
  metadata.needMetadataForAllTopics(false);
}

</code></pre>

<br>
<pre class="type-10 type-9 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests that {@link org.apache.kafka.clients.Metadata#awaitUpdate(int,long)} doesn't
 * wait forever with a max timeout value of 0
 * @throws Exception
 * @see https://issues.apache.org/jira/browse/KAFKA-1836
 */
@Test public void testMetadataUpdateWaitTime() throws Exception {
  long time=0;
  metadata.update(Cluster.empty(),time);
  assertFalse("No update needed.",metadata.timeToNextUpdate(time) == 0);
  try {
    metadata.awaitUpdate(metadata.requestUpdate(),0);
    fail("Wait on metadata update was expected to timeout, but it didn't");
  }
 catch (  TimeoutException te) {
  }
  final long twoSecondWait=2000;
  try {
    metadata.awaitUpdate(metadata.requestUpdate(),twoSecondWait);
    fail("Wait on metadata update was expected to timeout, but it didn't");
  }
 catch (  TimeoutException te) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.NetworkClientTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLeastLoadedNode(){
  Node leastNode=null;
  client.ready(node,time.milliseconds());
  awaitReady(client,node);
  client.poll(1,time.milliseconds());
  assertTrue("The client should be ready",client.isReady(node,time.milliseconds()));
  leastNode=client.leastLoadedNode(time.milliseconds());
  assertEquals("There should be one leastloadednode",leastNode.id(),node.id());
  time.sleep(reconnectBackoffMsTest);
  selector.close(node.idString());
  client.poll(1,time.milliseconds());
  assertFalse("After we forced the disconnection the client is no longer ready.",client.ready(node,time.milliseconds()));
  leastNode=client.leastLoadedNode(time.milliseconds());
  assertEquals("There should be NO leastloadednode",leastNode,null);
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRequestTimeout(){
  ProduceRequest produceRequest=new ProduceRequest((short)1,1000,Collections.<TopicPartition,ByteBuffer>emptyMap());
  RequestHeader reqHeader=client.nextRequestHeader(ApiKeys.PRODUCE);
  RequestSend send=new RequestSend(node.idString(),reqHeader,produceRequest.toStruct());
  TestCallbackHandler handler=new TestCallbackHandler();
  ClientRequest request=new ClientRequest(time.milliseconds(),true,send,handler);
  awaitReady(client,node);
  long now=time.milliseconds();
  client.send(request,now);
  time.sleep(3000);
  client.poll(3000,time.milliseconds());
  String disconnectedNode=selector.disconnected().get(0);
  assertEquals(node.idString(),disconnectedNode);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClose(){
  client.ready(node,time.milliseconds());
  awaitReady(client,node);
  client.poll(1,time.milliseconds());
  assertTrue("The client should be ready",client.isReady(node,time.milliseconds()));
  ProduceRequest produceRequest=new ProduceRequest((short)1,1000,Collections.<TopicPartition,ByteBuffer>emptyMap());
  RequestHeader reqHeader=client.nextRequestHeader(ApiKeys.PRODUCE);
  RequestSend send=new RequestSend(node.idString(),reqHeader,produceRequest.toStruct());
  ClientRequest request=new ClientRequest(time.milliseconds(),true,send,null);
  client.send(request,time.milliseconds());
  assertEquals("There should be 1 in-flight request after send",1,client.inFlightRequestCount(node.idString()));
  client.close(node.idString());
  assertEquals("There should be no in-flight request after close",0,client.inFlightRequestCount(node.idString()));
  assertFalse("Connection should not be ready after close",client.isReady(node,0));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.KafkaConsumerTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSubscription(){
  Properties props=new Properties();
  props.setProperty(ConsumerConfig.CLIENT_ID_CONFIG,"testSubscription");
  props.setProperty(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG,"localhost:9999");
  props.setProperty(ConsumerConfig.METRIC_REPORTER_CLASSES_CONFIG,MockMetricsReporter.class.getName());
  KafkaConsumer<byte[],byte[]> consumer=new KafkaConsumer<byte[],byte[]>(props,new ByteArrayDeserializer(),new ByteArrayDeserializer());
  consumer.subscribe(Collections.singletonList(topic));
  Assert.assertEquals(Collections.singleton(topic),consumer.subscription());
  Assert.assertTrue(consumer.assignment().isEmpty());
  consumer.subscribe(Collections.<String>emptyList());
  Assert.assertTrue(consumer.subscription().isEmpty());
  Assert.assertTrue(consumer.assignment().isEmpty());
  consumer.assign(Collections.singletonList(tp0));
  Assert.assertTrue(consumer.subscription().isEmpty());
  Assert.assertEquals(Collections.singleton(tp0),consumer.assignment());
  consumer.unsubscribe();
  Assert.assertTrue(consumer.subscription().isEmpty());
  Assert.assertTrue(consumer.assignment().isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.MockConsumerTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleMock(){
  consumer.subscribe(Arrays.asList("test"),new NoOpConsumerRebalanceListener());
  assertEquals(0,consumer.poll(1000).count());
  consumer.rebalance(Arrays.asList(new TopicPartition("test",0),new TopicPartition("test",1)));
  HashMap<TopicPartition,Long> beginningOffsets=new HashMap<>();
  beginningOffsets.put(new TopicPartition("test",0),0L);
  beginningOffsets.put(new TopicPartition("test",1),0L);
  consumer.updateBeginningOffsets(beginningOffsets);
  consumer.seek(new TopicPartition("test",0),0);
  ConsumerRecord<String,String> rec1=new ConsumerRecord<String,String>("test",0,0,"key1","value1");
  ConsumerRecord<String,String> rec2=new ConsumerRecord<String,String>("test",0,1,"key2","value2");
  consumer.addRecord(rec1);
  consumer.addRecord(rec2);
  ConsumerRecords<String,String> recs=consumer.poll(1);
  Iterator<ConsumerRecord<String,String>> iter=recs.iterator();
  assertEquals(rec1,iter.next());
  assertEquals(rec2,iter.next());
  assertFalse(iter.hasNext());
  assertEquals(2L,consumer.position(new TopicPartition("test",0)));
  consumer.commitSync();
  assertEquals(2L,consumer.committed(new TopicPartition("test",0)).offset());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.RangeAssignorTest </h4><pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOneConsumerNoTopic(){
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Collections.<String>emptyList()));
  assertEquals(Collections.singleton(consumerId),assignment.keySet());
  assertTrue(assignment.get(consumerId).isEmpty());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOneConsumerOneTopic(){
  String topic="topic";
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic,3);
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Arrays.asList(topic)));
  assertEquals(Collections.singleton(consumerId),assignment.keySet());
  assertAssignment(Arrays.asList(new TopicPartition(topic,0),new TopicPartition(topic,1),new TopicPartition(topic,2)),assignment.get(consumerId));
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOneConsumerMultipleTopics(){
  String topic1="topic1";
  String topic2="topic2";
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic1,1);
  partitionsPerTopic.put(topic2,2);
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Arrays.asList(topic1,topic2)));
  assertEquals(Collections.singleton(consumerId),assignment.keySet());
  assertAssignment(Arrays.asList(new TopicPartition(topic1,0),new TopicPartition(topic2,0),new TopicPartition(topic2,1)),assignment.get(consumerId));
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOneConsumerNonexistentTopic(){
  String topic="topic";
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic,0);
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Arrays.asList(topic)));
  assertEquals(Collections.singleton(consumerId),assignment.keySet());
  assertTrue(assignment.get(consumerId).isEmpty());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOnlyAssignsPartitionsFromSubscribedTopics(){
  String topic="topic";
  String otherTopic="other";
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic,3);
  partitionsPerTopic.put(otherTopic,3);
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Arrays.asList(topic)));
  assertEquals(Collections.singleton(consumerId),assignment.keySet());
  assertAssignment(Arrays.asList(new TopicPartition(topic,0),new TopicPartition(topic,1),new TopicPartition(topic,2)),assignment.get(consumerId));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.RoundRobinAssignorTest </h4><pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOneConsumerMultipleTopics(){
  String topic1="topic1";
  String topic2="topic2";
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic1,1);
  partitionsPerTopic.put(topic2,2);
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Arrays.asList(topic1,topic2)));
  assertEquals(Arrays.asList(new TopicPartition(topic1,0),new TopicPartition(topic2,0),new TopicPartition(topic2,1)),assignment.get(consumerId));
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOneConsumerNoTopic(){
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Collections.<String>emptyList()));
  assertEquals(Collections.singleton(consumerId),assignment.keySet());
  assertTrue(assignment.get(consumerId).isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTwoConsumersTwoTopicsSixPartitions(){
  String topic1="topic1";
  String topic2="topic2";
  String consumer1="consumer1";
  String consumer2="consumer2";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic1,3);
  partitionsPerTopic.put(topic2,3);
  Map<String,List<String>> consumers=new HashMap<>();
  consumers.put(consumer1,Arrays.asList(topic1,topic2));
  consumers.put(consumer2,Arrays.asList(topic1,topic2));
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,consumers);
  assertEquals(Arrays.asList(new TopicPartition(topic1,0),new TopicPartition(topic1,2),new TopicPartition(topic2,1)),assignment.get(consumer1));
  assertEquals(Arrays.asList(new TopicPartition(topic1,1),new TopicPartition(topic2,0),new TopicPartition(topic2,2)),assignment.get(consumer2));
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOneConsumerNonexistentTopic(){
  String topic="topic";
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic,0);
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Arrays.asList(topic)));
  assertEquals(Collections.singleton(consumerId),assignment.keySet());
  assertTrue(assignment.get(consumerId).isEmpty());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTwoConsumersOneTopicOnePartition(){
  String topic="topic";
  String consumer1="consumer1";
  String consumer2="consumer2";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic,1);
  Map<String,List<String>> consumers=new HashMap<>();
  consumers.put(consumer1,Arrays.asList(topic));
  consumers.put(consumer2,Arrays.asList(topic));
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,consumers);
  assertEquals(Arrays.asList(new TopicPartition(topic,0)),assignment.get(consumer1));
  assertEquals(Collections.<TopicPartition>emptyList(),assignment.get(consumer2));
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOneConsumerOneTopic(){
  String topic="topic";
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic,3);
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Arrays.asList(topic)));
  assertEquals(Arrays.asList(new TopicPartition(topic,0),new TopicPartition(topic,1),new TopicPartition(topic,2)),assignment.get(consumerId));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultipleConsumersMixedTopics(){
  String topic1="topic1";
  String topic2="topic2";
  String consumer1="consumer1";
  String consumer2="consumer2";
  String consumer3="consumer3";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic1,3);
  partitionsPerTopic.put(topic2,2);
  Map<String,List<String>> consumers=new HashMap<>();
  consumers.put(consumer1,Arrays.asList(topic1));
  consumers.put(consumer2,Arrays.asList(topic1,topic2));
  consumers.put(consumer3,Arrays.asList(topic1));
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,consumers);
  assertEquals(Arrays.asList(new TopicPartition(topic1,0)),assignment.get(consumer1));
  assertEquals(Arrays.asList(new TopicPartition(topic1,1),new TopicPartition(topic2,0),new TopicPartition(topic2,1)),assignment.get(consumer2));
  assertEquals(Arrays.asList(new TopicPartition(topic1,2)),assignment.get(consumer3));
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOnlyAssignsPartitionsFromSubscribedTopics(){
  String topic="topic";
  String otherTopic="other";
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic,3);
  partitionsPerTopic.put(otherTopic,3);
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Arrays.asList(topic)));
  assertEquals(Arrays.asList(new TopicPartition(topic,0),new TopicPartition(topic,1),new TopicPartition(topic,2)),assignment.get(consumerId));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTwoConsumersOneTopicTwoPartitions(){
  String topic="topic";
  String consumer1="consumer1";
  String consumer2="consumer2";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic,2);
  Map<String,List<String>> consumers=new HashMap<>();
  consumers.put(consumer1,Arrays.asList(topic));
  consumers.put(consumer2,Arrays.asList(topic));
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,consumers);
  assertEquals(Arrays.asList(new TopicPartition(topic,0)),assignment.get(consumer1));
  assertEquals(Arrays.asList(new TopicPartition(topic,1)),assignment.get(consumer2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.ConsumerCoordinatorTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommitOffsetAsyncDisconnected(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  MockCommitCallback cb=new MockCommitCallback();
  client.prepareResponse(offsetCommitResponse(Collections.singletonMap(tp,Errors.NONE.code())),true);
  coordinator.commitOffsetsAsync(Collections.singletonMap(tp,new OffsetAndMetadata(100L)),cb);
  consumerClient.poll(0);
  assertTrue(coordinator.coordinatorUnknown());
  assertEquals(1,cb.invoked);
  assertTrue(cb.exception instanceof DisconnectException);
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMetadataChangeTriggersRebalance(){
  final String consumerId="consumer";
  subscriptions.subscribe(Arrays.asList(topicName),rebalanceListener);
  subscriptions.needReassignment();
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(joinGroupFollowerResponse(1,consumerId,"leader",Errors.NONE.code()));
  client.prepareResponse(syncGroupResponse(Arrays.asList(tp),Errors.NONE.code()));
  coordinator.ensurePartitionAssignment();
  assertFalse(subscriptions.partitionAssignmentNeeded());
  metadata.update(TestUtils.singletonCluster(topicName,2),time.milliseconds());
  assertTrue(subscriptions.partitionAssignmentNeeded());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRefreshOffsetLoadInProgress(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.needRefreshCommits();
  client.prepareResponse(offsetFetchResponse(tp,Errors.GROUP_LOAD_IN_PROGRESS.code(),"",100L));
  client.prepareResponse(offsetFetchResponse(tp,Errors.NONE.code(),"",100L));
  coordinator.refreshCommittedOffsetsIfNeeded();
  assertFalse(subscriptions.refreshCommitsNeeded());
  assertEquals(100L,subscriptions.committed(tp).offset());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommitOffsetAsyncCoordinatorNotAvailable(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  MockCommitCallback cb=new MockCommitCallback();
  client.prepareResponse(offsetCommitResponse(Collections.singletonMap(tp,Errors.GROUP_COORDINATOR_NOT_AVAILABLE.code())));
  coordinator.commitOffsetsAsync(Collections.singletonMap(tp,new OffsetAndMetadata(100L)),cb);
  consumerClient.poll(0);
  assertTrue(coordinator.coordinatorUnknown());
  assertEquals(1,cb.invoked);
  assertEquals(Errors.GROUP_COORDINATOR_NOT_AVAILABLE.exception(),cb.exception);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMaybeLeaveGroup(){
  final String consumerId="consumer";
  subscriptions.subscribe(Arrays.asList(topicName),rebalanceListener);
  subscriptions.needReassignment();
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(joinGroupFollowerResponse(1,consumerId,"leader",Errors.NONE.code()));
  client.prepareResponse(syncGroupResponse(Arrays.asList(tp),Errors.NONE.code()));
  coordinator.ensurePartitionAssignment();
  final AtomicBoolean received=new AtomicBoolean(false);
  client.prepareResponse(new MockClient.RequestMatcher(){
    @Override public boolean matches(    ClientRequest request){
      received.set(true);
      LeaveGroupRequest leaveRequest=new LeaveGroupRequest(request.request().body());
      return leaveRequest.memberId().equals(consumerId) && leaveRequest.groupId().equals(groupId);
    }
  }
,new LeaveGroupResponse(Errors.NONE.code()).toStruct());
  coordinator.maybeLeaveGroup();
  assertTrue(received.get());
  assertEquals(JoinGroupRequest.UNKNOWN_MEMBER_ID,coordinator.memberId);
  assertEquals(OffsetCommitRequest.DEFAULT_GENERATION_ID,coordinator.generation);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnknownMemberIdOnSyncGroup(){
  final String consumerId="consumer";
  subscriptions.subscribe(Arrays.asList(topicName),rebalanceListener);
  subscriptions.needReassignment();
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(joinGroupFollowerResponse(1,consumerId,"leader",Errors.NONE.code()));
  client.prepareResponse(syncGroupResponse(Collections.<TopicPartition>emptyList(),Errors.UNKNOWN_MEMBER_ID.code()));
  client.prepareResponse(new MockClient.RequestMatcher(){
    @Override public boolean matches(    ClientRequest request){
      JoinGroupRequest joinRequest=new JoinGroupRequest(request.request().body());
      return joinRequest.memberId().equals(JoinGroupRequest.UNKNOWN_MEMBER_ID);
    }
  }
,joinGroupFollowerResponse(2,consumerId,"leader",Errors.NONE.code()));
  client.prepareResponse(syncGroupResponse(Arrays.asList(tp),Errors.NONE.code()));
  coordinator.ensurePartitionAssignment();
  assertFalse(subscriptions.partitionAssignmentNeeded());
  assertEquals(Collections.singleton(tp),subscriptions.assignedPartitions());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommitOffsetOnly(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(offsetCommitResponse(Collections.singletonMap(tp,Errors.NONE.code())));
  AtomicBoolean success=new AtomicBoolean(false);
  coordinator.commitOffsetsAsync(Collections.singletonMap(tp,new OffsetAndMetadata(100L)),callback(success));
  consumerClient.poll(0);
  assertTrue(success.get());
  assertEquals(100L,subscriptions.committed(tp).offset());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIllegalGeneration(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  subscriptions.subscribe(Arrays.asList(topicName),rebalanceListener);
  subscriptions.assignFromSubscribed(Collections.singletonList(tp));
  time.sleep(sessionTimeoutMs);
  RequestFuture<Void> future=coordinator.sendHeartbeatRequest();
  assertEquals(1,consumerClient.pendingRequestCount());
  assertFalse(future.isDone());
  client.prepareResponse(heartbeatResponse(Errors.ILLEGAL_GENERATION.code()));
  time.sleep(sessionTimeoutMs);
  consumerClient.poll(0);
  assertTrue(future.isDone());
  assertTrue(future.failed());
  assertEquals(Errors.ILLEGAL_GENERATION.exception(),future.exception());
  assertTrue(coordinator.needRejoin());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDisconnectInJoin(){
  subscriptions.subscribe(Arrays.asList(topicName),rebalanceListener);
  subscriptions.needReassignment();
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(joinGroupFollowerResponse(1,"consumer","leader",Errors.NONE.code()),true);
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  client.prepareResponse(joinGroupFollowerResponse(1,"consumer","leader",Errors.NONE.code()));
  client.prepareResponse(syncGroupResponse(Arrays.asList(tp),Errors.NONE.code()));
  coordinator.ensurePartitionAssignment();
  assertFalse(subscriptions.partitionAssignmentNeeded());
  assertEquals(Collections.singleton(tp),subscriptions.assignedPartitions());
  assertEquals(1,rebalanceListener.revokedCount);
  assertEquals(1,rebalanceListener.assignedCount);
  assertEquals(Collections.singleton(tp),rebalanceListener.assigned);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCoordinatorDisconnect(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  time.sleep(sessionTimeoutMs);
  RequestFuture<Void> future=coordinator.sendHeartbeatRequest();
  assertEquals(1,consumerClient.pendingRequestCount());
  assertFalse(future.isDone());
  client.prepareResponse(heartbeatResponse(Errors.NONE.code()),true);
  time.sleep(sessionTimeoutMs);
  consumerClient.poll(0);
  assertTrue(future.isDone());
  assertTrue(future.failed());
  assertTrue(future.exception() instanceof DisconnectException);
  assertTrue(coordinator.coordinatorUnknown());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommitOffsetMetadata(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(offsetCommitResponse(Collections.singletonMap(tp,Errors.NONE.code())));
  AtomicBoolean success=new AtomicBoolean(false);
  coordinator.commitOffsetsAsync(Collections.singletonMap(tp,new OffsetAndMetadata(100L,"hello")),callback(success));
  consumerClient.poll(0);
  assertTrue(success.get());
  assertEquals(100L,subscriptions.committed(tp).offset());
  assertEquals("hello",subscriptions.committed(tp).metadata());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRefreshOffsetNotCoordinatorForConsumer(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.needRefreshCommits();
  client.prepareResponse(offsetFetchResponse(tp,Errors.NOT_COORDINATOR_FOR_GROUP.code(),"",100L));
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  client.prepareResponse(offsetFetchResponse(tp,Errors.NONE.code(),"",100L));
  coordinator.refreshCommittedOffsetsIfNeeded();
  assertFalse(subscriptions.refreshCommitsNeeded());
  assertEquals(100L,subscriptions.committed(tp).offset());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCoordinatorNotAvailable(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  time.sleep(sessionTimeoutMs);
  RequestFuture<Void> future=coordinator.sendHeartbeatRequest();
  assertEquals(1,consumerClient.pendingRequestCount());
  assertFalse(future.isDone());
  client.prepareResponse(heartbeatResponse(Errors.GROUP_COORDINATOR_NOT_AVAILABLE.code()));
  time.sleep(sessionTimeoutMs);
  consumerClient.poll(0);
  assertTrue(future.isDone());
  assertTrue(future.failed());
  assertEquals(Errors.GROUP_COORDINATOR_NOT_AVAILABLE.exception(),future.exception());
  assertTrue(coordinator.coordinatorUnknown());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNotCoordinator(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  time.sleep(sessionTimeoutMs);
  RequestFuture<Void> future=coordinator.sendHeartbeatRequest();
  assertEquals(1,consumerClient.pendingRequestCount());
  assertFalse(future.isDone());
  client.prepareResponse(heartbeatResponse(Errors.NOT_COORDINATOR_FOR_GROUP.code()));
  time.sleep(sessionTimeoutMs);
  consumerClient.poll(0);
  assertTrue(future.isDone());
  assertTrue(future.failed());
  assertEquals(Errors.NOT_COORDINATOR_FOR_GROUP.exception(),future.exception());
  assertTrue(coordinator.coordinatorUnknown());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRebalanceInProgressOnSyncGroup(){
  final String consumerId="consumer";
  subscriptions.subscribe(Arrays.asList(topicName),rebalanceListener);
  subscriptions.needReassignment();
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(joinGroupFollowerResponse(1,consumerId,"leader",Errors.NONE.code()));
  client.prepareResponse(syncGroupResponse(Collections.<TopicPartition>emptyList(),Errors.REBALANCE_IN_PROGRESS.code()));
  client.prepareResponse(joinGroupFollowerResponse(2,consumerId,"leader",Errors.NONE.code()));
  client.prepareResponse(syncGroupResponse(Arrays.asList(tp),Errors.NONE.code()));
  coordinator.ensurePartitionAssignment();
  assertFalse(subscriptions.partitionAssignmentNeeded());
  assertEquals(Collections.singleton(tp),subscriptions.assignedPartitions());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNormalJoinGroupLeader(){
  final String consumerId="leader";
  subscriptions.subscribe(Arrays.asList(topicName),rebalanceListener);
  subscriptions.needReassignment();
  metadata.setTopics(Arrays.asList(topicName));
  metadata.update(cluster,time.milliseconds());
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  Map<String,List<String>> memberSubscriptions=Collections.singletonMap(consumerId,Arrays.asList(topicName));
  partitionAssignor.prepare(Collections.singletonMap(consumerId,Arrays.asList(tp)));
  client.prepareResponse(joinGroupLeaderResponse(1,consumerId,memberSubscriptions,Errors.NONE.code()));
  client.prepareResponse(new MockClient.RequestMatcher(){
    @Override public boolean matches(    ClientRequest request){
      SyncGroupRequest sync=new SyncGroupRequest(request.request().body());
      return sync.memberId().equals(consumerId) && sync.generationId() == 1 && sync.groupAssignment().containsKey(consumerId);
    }
  }
,syncGroupResponse(Arrays.asList(tp),Errors.NONE.code()));
  coordinator.ensurePartitionAssignment();
  assertFalse(subscriptions.partitionAssignmentNeeded());
  assertEquals(Collections.singleton(tp),subscriptions.assignedPartitions());
  assertEquals(1,rebalanceListener.revokedCount);
  assertEquals(Collections.emptySet(),rebalanceListener.revoked);
  assertEquals(1,rebalanceListener.assignedCount);
  assertEquals(Collections.singleton(tp),rebalanceListener.assigned);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRefreshOffsetWithNoFetchableOffsets(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.needRefreshCommits();
  client.prepareResponse(offsetFetchResponse(tp,Errors.NONE.code(),"",-1L));
  coordinator.refreshCommittedOffsetsIfNeeded();
  assertFalse(subscriptions.refreshCommitsNeeded());
  assertEquals(null,subscriptions.committed(tp));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNormalJoinGroupFollower(){
  final String consumerId="consumer";
  subscriptions.subscribe(Arrays.asList(topicName),rebalanceListener);
  subscriptions.needReassignment();
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(joinGroupFollowerResponse(1,consumerId,"leader",Errors.NONE.code()));
  client.prepareResponse(new MockClient.RequestMatcher(){
    @Override public boolean matches(    ClientRequest request){
      SyncGroupRequest sync=new SyncGroupRequest(request.request().body());
      return sync.memberId().equals(consumerId) && sync.generationId() == 1 && sync.groupAssignment().isEmpty();
    }
  }
,syncGroupResponse(Arrays.asList(tp),Errors.NONE.code()));
  coordinator.ensurePartitionAssignment();
  assertFalse(subscriptions.partitionAssignmentNeeded());
  assertEquals(Collections.singleton(tp),subscriptions.assignedPartitions());
  assertEquals(1,rebalanceListener.revokedCount);
  assertEquals(1,rebalanceListener.assignedCount);
  assertEquals(Collections.singleton(tp),rebalanceListener.assigned);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIllegalGenerationOnSyncGroup(){
  final String consumerId="consumer";
  subscriptions.subscribe(Arrays.asList(topicName),rebalanceListener);
  subscriptions.needReassignment();
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(joinGroupFollowerResponse(1,consumerId,"leader",Errors.NONE.code()));
  client.prepareResponse(syncGroupResponse(Collections.<TopicPartition>emptyList(),Errors.ILLEGAL_GENERATION.code()));
  client.prepareResponse(new MockClient.RequestMatcher(){
    @Override public boolean matches(    ClientRequest request){
      JoinGroupRequest joinRequest=new JoinGroupRequest(request.request().body());
      return joinRequest.memberId().equals(JoinGroupRequest.UNKNOWN_MEMBER_ID);
    }
  }
,joinGroupFollowerResponse(2,consumerId,"leader",Errors.NONE.code()));
  client.prepareResponse(syncGroupResponse(Arrays.asList(tp),Errors.NONE.code()));
  coordinator.ensurePartitionAssignment();
  assertFalse(subscriptions.partitionAssignmentNeeded());
  assertEquals(Collections.singleton(tp),subscriptions.assignedPartitions());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRefreshOffset(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.needRefreshCommits();
  client.prepareResponse(offsetFetchResponse(tp,Errors.NONE.code(),"",100L));
  coordinator.refreshCommittedOffsetsIfNeeded();
  assertFalse(subscriptions.refreshCommitsNeeded());
  assertEquals(100L,subscriptions.committed(tp).offset());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testProtocolMetadataOrder(){
  RoundRobinAssignor roundRobin=new RoundRobinAssignor();
  RangeAssignor range=new RangeAssignor();
  try (Metrics metrics=new Metrics(time)){
    ConsumerCoordinator coordinator=buildCoordinator(metrics,Arrays.<PartitionAssignor>asList(roundRobin,range));
    List<ProtocolMetadata> metadata=coordinator.metadata();
    assertEquals(2,metadata.size());
    assertEquals(roundRobin.name(),metadata.get(0).name());
    assertEquals(range.name(),metadata.get(1).name());
  }
   try (Metrics metrics=new Metrics(time)){
    ConsumerCoordinator coordinator=buildCoordinator(metrics,Arrays.<PartitionAssignor>asList(range,roundRobin));
    List<ProtocolMetadata> metadata=coordinator.metadata();
    assertEquals(2,metadata.size());
    assertEquals(range.name(),metadata.get(0).name());
    assertEquals(roundRobin.name(),metadata.get(1).name());
  }
 }

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNormalHeartbeat(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  time.sleep(sessionTimeoutMs);
  RequestFuture<Void> future=coordinator.sendHeartbeatRequest();
  assertEquals(1,consumerClient.pendingRequestCount());
  assertFalse(future.isDone());
  client.prepareResponse(heartbeatResponse(Errors.NONE.code()));
  consumerClient.poll(0);
  assertTrue(future.isDone());
  assertTrue(future.succeeded());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnknownConsumerId(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  subscriptions.subscribe(Arrays.asList(topicName),rebalanceListener);
  subscriptions.assignFromSubscribed(Collections.singletonList(tp));
  time.sleep(sessionTimeoutMs);
  RequestFuture<Void> future=coordinator.sendHeartbeatRequest();
  assertEquals(1,consumerClient.pendingRequestCount());
  assertFalse(future.isDone());
  client.prepareResponse(heartbeatResponse(Errors.UNKNOWN_MEMBER_ID.code()));
  time.sleep(sessionTimeoutMs);
  consumerClient.poll(0);
  assertTrue(future.isDone());
  assertTrue(future.failed());
  assertEquals(Errors.UNKNOWN_MEMBER_ID.exception(),future.exception());
  assertTrue(coordinator.needRejoin());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommitOffsetAsyncNotCoordinator(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  MockCommitCallback cb=new MockCommitCallback();
  client.prepareResponse(offsetCommitResponse(Collections.singletonMap(tp,Errors.NOT_COORDINATOR_FOR_GROUP.code())));
  coordinator.commitOffsetsAsync(Collections.singletonMap(tp,new OffsetAndMetadata(100L)),cb);
  consumerClient.poll(0);
  assertTrue(coordinator.coordinatorUnknown());
  assertEquals(1,cb.invoked);
  assertEquals(Errors.NOT_COORDINATOR_FOR_GROUP.exception(),cb.exception);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.ConsumerNetworkClientTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void send(){
  client.prepareResponse(heartbeatResponse(Errors.NONE.code()));
  RequestFuture<ClientResponse> future=consumerClient.send(node,ApiKeys.METADATA,heartbeatRequest());
  assertEquals(1,consumerClient.pendingRequestCount());
  assertEquals(1,consumerClient.pendingRequestCount(node));
  assertFalse(future.isDone());
  consumerClient.poll(future);
  assertTrue(future.isDone());
  assertTrue(future.succeeded());
  ClientResponse clientResponse=future.value();
  HeartbeatResponse response=new HeartbeatResponse(clientResponse.responseBody());
  assertEquals(Errors.NONE.code(),response.errorCode());
}

</code></pre>

<br>
<pre class="type-10 type-9 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void wakeup(){
  RequestFuture<ClientResponse> future=consumerClient.send(node,ApiKeys.METADATA,heartbeatRequest());
  consumerClient.wakeup();
  try {
    consumerClient.poll(0);
    fail();
  }
 catch (  WakeupException e) {
  }
  client.respond(heartbeatResponse(Errors.NONE.code()));
  consumerClient.poll(future);
  assertTrue(future.isDone());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multiSend(){
  client.prepareResponse(heartbeatResponse(Errors.NONE.code()));
  client.prepareResponse(heartbeatResponse(Errors.NONE.code()));
  RequestFuture<ClientResponse> future1=consumerClient.send(node,ApiKeys.METADATA,heartbeatRequest());
  RequestFuture<ClientResponse> future2=consumerClient.send(node,ApiKeys.METADATA,heartbeatRequest());
  assertEquals(2,consumerClient.pendingRequestCount());
  assertEquals(2,consumerClient.pendingRequestCount(node));
  consumerClient.awaitPendingRequests(node);
  assertTrue(future1.succeeded());
  assertTrue(future2.succeeded());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.ConsumerProtocolTest </h4><pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void deserializeNewSubscriptionVersion(){
  short version=100;
  Schema subscriptionSchemaV100=new Schema(new Field(ConsumerProtocol.TOPICS_KEY_NAME,new ArrayOf(Type.STRING)),new Field(ConsumerProtocol.USER_DATA_KEY_NAME,Type.BYTES),new Field("foo",Type.STRING));
  Struct subscriptionV100=new Struct(subscriptionSchemaV100);
  subscriptionV100.set(ConsumerProtocol.TOPICS_KEY_NAME,new Object[]{"topic"});
  subscriptionV100.set(ConsumerProtocol.USER_DATA_KEY_NAME,ByteBuffer.wrap(new byte[0]));
  subscriptionV100.set("foo","bar");
  Struct headerV100=new Struct(ConsumerProtocol.CONSUMER_PROTOCOL_HEADER_SCHEMA);
  headerV100.set(ConsumerProtocol.VERSION_KEY_NAME,version);
  ByteBuffer buffer=ByteBuffer.allocate(subscriptionV100.sizeOf() + headerV100.sizeOf());
  headerV100.writeTo(buffer);
  subscriptionV100.writeTo(buffer);
  buffer.flip();
  Subscription subscription=ConsumerProtocol.deserializeSubscription(buffer);
  assertEquals(Arrays.asList("topic"),subscription.topics());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void deserializeNewAssignmentVersion(){
  short version=100;
  Schema assignmentSchemaV100=new Schema(new Field(ConsumerProtocol.TOPIC_PARTITIONS_KEY_NAME,new ArrayOf(ConsumerProtocol.TOPIC_ASSIGNMENT_V0)),new Field(ConsumerProtocol.USER_DATA_KEY_NAME,Type.BYTES),new Field("foo",Type.STRING));
  Struct assignmentV100=new Struct(assignmentSchemaV100);
  assignmentV100.set(ConsumerProtocol.TOPIC_PARTITIONS_KEY_NAME,new Object[]{new Struct(ConsumerProtocol.TOPIC_ASSIGNMENT_V0).set(ConsumerProtocol.TOPIC_KEY_NAME,"foo").set(ConsumerProtocol.PARTITIONS_KEY_NAME,new Object[]{1})});
  assignmentV100.set(ConsumerProtocol.USER_DATA_KEY_NAME,ByteBuffer.wrap(new byte[0]));
  assignmentV100.set("foo","bar");
  Struct headerV100=new Struct(ConsumerProtocol.CONSUMER_PROTOCOL_HEADER_SCHEMA);
  headerV100.set(ConsumerProtocol.VERSION_KEY_NAME,version);
  ByteBuffer buffer=ByteBuffer.allocate(assignmentV100.sizeOf() + headerV100.sizeOf());
  headerV100.writeTo(buffer);
  assignmentV100.writeTo(buffer);
  buffer.flip();
  PartitionAssignor.Assignment assignment=ConsumerProtocol.deserializeAssignment(buffer);
  assertEquals(toSet(Arrays.asList(new TopicPartition("foo",1))),toSet(assignment.partitions()));
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deserializeNullAssignmentUserData(){
  List<TopicPartition> partitions=Arrays.asList(new TopicPartition("foo",0),new TopicPartition("bar",2));
  ByteBuffer buffer=ConsumerProtocol.serializeAssignment(new PartitionAssignor.Assignment(partitions,null));
  PartitionAssignor.Assignment parsedAssignment=ConsumerProtocol.deserializeAssignment(buffer);
  assertEquals(toSet(partitions),toSet(parsedAssignment.partitions()));
  assertNull(parsedAssignment.userData());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void serializeDeserializeNullSubscriptionUserData(){
  Subscription subscription=new Subscription(Arrays.asList("foo","bar"),null);
  ByteBuffer buffer=ConsumerProtocol.serializeSubscription(subscription);
  Subscription parsedSubscription=ConsumerProtocol.deserializeSubscription(buffer);
  assertEquals(subscription.topics(),parsedSubscription.topics());
  assertNull(subscription.userData());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.DelayedTaskQueueTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRemove(){
  TestTask task1=new TestTask();
  TestTask task2=new TestTask();
  TestTask task3=new TestTask();
  scheduler.add(task1,20);
  scheduler.add(task2,10);
  scheduler.add(task3,30);
  scheduler.add(task1,40);
  assertEquals(10,scheduler.nextTimeout(0));
  scheduler.remove(task2);
  assertEquals(20,scheduler.nextTimeout(0));
  scheduler.remove(task1);
  assertEquals(30,scheduler.nextTimeout(0));
  scheduler.remove(task3);
  assertEquals(Long.MAX_VALUE,scheduler.nextTimeout(0));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testScheduling(){
  assertEquals(Long.MAX_VALUE,scheduler.nextTimeout(0));
  scheduler.poll(0);
  assertEquals(Collections.emptyList(),executed);
  TestTask task1=new TestTask();
  TestTask task2=new TestTask();
  TestTask task3=new TestTask();
  scheduler.add(task1,20);
  assertEquals(20,scheduler.nextTimeout(0));
  scheduler.add(task2,10);
  assertEquals(10,scheduler.nextTimeout(0));
  scheduler.add(task3,30);
  assertEquals(10,scheduler.nextTimeout(0));
  scheduler.poll(5);
  assertEquals(Collections.emptyList(),executed);
  assertEquals(5,scheduler.nextTimeout(5));
  scheduler.poll(10);
  assertEquals(Arrays.asList(task2),executed);
  assertEquals(10,scheduler.nextTimeout(10));
  scheduler.poll(20);
  assertEquals(Arrays.asList(task2,task1),executed);
  assertEquals(20,scheduler.nextTimeout(10));
  scheduler.poll(30);
  assertEquals(Arrays.asList(task2,task1,task3),executed);
  assertEquals(Long.MAX_VALUE,scheduler.nextTimeout(30));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.FetcherTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateFetchPositionResetToEarliestOffset(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.needOffsetReset(tp,OffsetResetStrategy.EARLIEST);
  client.prepareResponse(listOffsetRequestMatcher(ListOffsetRequest.EARLIEST_TIMESTAMP),listOffsetResponse(Errors.NONE,Arrays.asList(5L)));
  fetcher.updateFetchPositions(Collections.singleton(tp));
  assertFalse(subscriptions.isOffsetResetNeeded(tp));
  assertTrue(subscriptions.isFetchable(tp));
  assertEquals(5,(long)subscriptions.position(tp));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateFetchPositionDisconnect(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.needOffsetReset(tp,OffsetResetStrategy.LATEST);
  client.prepareResponse(listOffsetRequestMatcher(ListOffsetRequest.LATEST_TIMESTAMP),listOffsetResponse(Errors.NONE,Arrays.asList(5L)),true);
  client.prepareResponse(listOffsetRequestMatcher(ListOffsetRequest.LATEST_TIMESTAMP),listOffsetResponse(Errors.NONE,Arrays.asList(5L)));
  fetcher.updateFetchPositions(Collections.singleton(tp));
  assertFalse(subscriptions.isOffsetResetNeeded(tp));
  assertTrue(subscriptions.isFetchable(tp));
  assertEquals(5,(long)subscriptions.position(tp));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFetchNotLeaderForPartition(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.seek(tp,0);
  fetcher.initFetches(cluster);
  client.prepareResponse(fetchResponse(this.records.buffer(),Errors.NOT_LEADER_FOR_PARTITION.code(),100L,0));
  consumerClient.poll(0);
  assertEquals(0,fetcher.fetchedRecords().size());
  assertEquals(0L,metadata.timeToNextUpdate(time.milliseconds()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFetchDisconnected(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.seek(tp,0);
  fetcher.initFetches(cluster);
  client.prepareResponse(fetchResponse(this.records.buffer(),Errors.NONE.code(),100L,0),true);
  consumerClient.poll(0);
  assertEquals(0,fetcher.fetchedRecords().size());
  assertFalse(subscriptions.isOffsetResetNeeded(tp));
  assertTrue(subscriptions.isFetchable(tp));
  assertEquals(0,(long)subscriptions.position(tp));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetAllTopicsDisconnect(){
  client.prepareResponse(null,true);
  client.prepareResponse(new MetadataResponse(cluster,Collections.<String,Errors>emptyMap()).toStruct());
  Map<String,List<PartitionInfo>> allTopics=fetcher.getAllTopicMetadata(5000L);
  assertEquals(cluster.topics().size(),allTopics.size());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFetchedRecordsAfterSeek(){
  subscriptionsNoAutoReset.assignFromUser(Arrays.asList(tp));
  subscriptionsNoAutoReset.seek(tp,0);
  fetcherNoAutoReset.initFetches(cluster);
  client.prepareResponse(fetchResponse(this.records.buffer(),Errors.OFFSET_OUT_OF_RANGE.code(),100L,0));
  consumerClient.poll(0);
  assertFalse(subscriptionsNoAutoReset.isOffsetResetNeeded(tp));
  subscriptionsNoAutoReset.seek(tp,2);
  assertEquals(0,fetcherNoAutoReset.fetchedRecords().size());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateFetchPositionToCommitted(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.committed(tp,new OffsetAndMetadata(5));
  fetcher.updateFetchPositions(Collections.singleton(tp));
  assertTrue(subscriptions.isFetchable(tp));
  assertEquals(5,(long)subscriptions.position(tp));
}

</code></pre>

<br>
<pre class="type-8 type-13 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testQuotaMetrics() throws Exception {
  List<ConsumerRecord<byte[],byte[]>> records;
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.seek(tp,0);
  for (int i=1; i < 4; i++) {
    fetcher.initFetches(cluster);
    client.prepareResponse(fetchResponse(this.records.buffer(),Errors.NONE.code(),100L,100 * i));
    consumerClient.poll(0);
    records=fetcher.fetchedRecords().get(tp);
    assertEquals(3,records.size());
  }
  Map<MetricName,KafkaMetric> allMetrics=metrics.metrics();
  KafkaMetric avgMetric=allMetrics.get(metrics.metricName("fetch-throttle-time-avg",metricGroup,""));
  KafkaMetric maxMetric=allMetrics.get(metrics.metricName("fetch-throttle-time-max",metricGroup,""));
  assertEquals(200,avgMetric.value(),EPSILON);
  assertEquals(300,maxMetric.value(),EPSILON);
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetAllTopics(){
  client.prepareResponse(new MetadataResponse(cluster,Collections.<String,Errors>emptyMap()).toStruct());
  Map<String,List<PartitionInfo>> allTopics=fetcher.getAllTopicMetadata(5000L);
  assertEquals(cluster.topics().size(),allTopics.size());
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetTopicMetadataLeaderNotAvailable(){
  Cluster emptyCluster=new Cluster(this.cluster.nodes(),Collections.<PartitionInfo>emptyList(),Collections.<String>emptySet());
  client.prepareResponse(new MetadataResponse(emptyCluster,Collections.singletonMap(topicName,Errors.LEADER_NOT_AVAILABLE)).toStruct());
  client.prepareResponse(new MetadataResponse(this.cluster,Collections.<String,Errors>emptyMap()).toStruct());
  Map<String,List<PartitionInfo>> topicMetadata=fetcher.getTopicMetadata(Collections.singletonList(topicName),5000L);
  assertTrue(topicMetadata.containsKey(topicName));
}

</code></pre>

<br>
<pre class="type-10 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFetchOffsetOutOfRangeException(){
  subscriptionsNoAutoReset.assignFromUser(Arrays.asList(tp));
  subscriptionsNoAutoReset.seek(tp,0);
  fetcherNoAutoReset.initFetches(cluster);
  client.prepareResponse(fetchResponse(this.records.buffer(),Errors.OFFSET_OUT_OF_RANGE.code(),100L,0));
  consumerClient.poll(0);
  assertFalse(subscriptionsNoAutoReset.isOffsetResetNeeded(tp));
  try {
    fetcherNoAutoReset.fetchedRecords();
    fail("Should have thrown OffsetOutOfRangeException");
  }
 catch (  OffsetOutOfRangeException e) {
    assertTrue(e.offsetOutOfRangePartitions().containsKey(tp));
    assertEquals(e.offsetOutOfRangePartitions().size(),1);
  }
  assertEquals(0,fetcherNoAutoReset.fetchedRecords().size());
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFetchDuringRebalance(){
  subscriptions.subscribe(Arrays.asList(topicName),listener);
  subscriptions.assignFromSubscribed(Arrays.asList(tp));
  subscriptions.seek(tp,0);
  fetcher.initFetches(cluster);
  subscriptions.assignFromSubscribed(Arrays.asList(tp));
  client.prepareResponse(fetchResponse(this.records.buffer(),Errors.NONE.code(),100L,0));
  consumerClient.poll(0);
  assertTrue(fetcher.fetchedRecords().isEmpty());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFetchNonContinuousRecords(){
  MemoryRecords records=MemoryRecords.emptyRecords(ByteBuffer.allocate(1024),CompressionType.NONE);
  records.append(15L,"key".getBytes(),"value-1".getBytes());
  records.append(20L,"key".getBytes(),"value-2".getBytes());
  records.append(30L,"key".getBytes(),"value-3".getBytes());
  records.close();
  List<ConsumerRecord<byte[],byte[]>> consumerRecords;
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.seek(tp,0);
  fetcher.initFetches(cluster);
  client.prepareResponse(fetchResponse(records.buffer(),Errors.NONE.code(),100L,0));
  consumerClient.poll(0);
  consumerRecords=fetcher.fetchedRecords().get(tp);
  assertEquals(3,consumerRecords.size());
  assertEquals(31L,(long)subscriptions.position(tp));
  assertEquals(15L,consumerRecords.get(0).offset());
  assertEquals(20L,consumerRecords.get(1).offset());
  assertEquals(30L,consumerRecords.get(2).offset());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFetchUnknownTopicOrPartition(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.seek(tp,0);
  fetcher.initFetches(cluster);
  client.prepareResponse(fetchResponse(this.records.buffer(),Errors.UNKNOWN_TOPIC_OR_PARTITION.code(),100L,0));
  consumerClient.poll(0);
  assertEquals(0,fetcher.fetchedRecords().size());
  assertEquals(0L,metadata.timeToNextUpdate(time.milliseconds()));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFetchOffsetOutOfRange(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.seek(tp,0);
  fetcher.initFetches(cluster);
  client.prepareResponse(fetchResponse(this.records.buffer(),Errors.OFFSET_OUT_OF_RANGE.code(),100L,0));
  consumerClient.poll(0);
  assertTrue(subscriptions.isOffsetResetNeeded(tp));
  assertEquals(0,fetcher.fetchedRecords().size());
  assertEquals(null,subscriptions.position(tp));
}

</code></pre>

<br>
<pre class="type-8 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetTopicMetadataUnknownTopic(){
  Cluster emptyCluster=new Cluster(this.cluster.nodes(),Collections.<PartitionInfo>emptyList(),Collections.<String>emptySet());
  client.prepareResponse(new MetadataResponse(emptyCluster,Collections.singletonMap(topicName,Errors.UNKNOWN_TOPIC_OR_PARTITION)).toStruct());
  Map<String,List<PartitionInfo>> topicMetadata=fetcher.getTopicMetadata(Collections.singletonList(topicName),5000L);
  assertNull(topicMetadata.get(topicName));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateFetchPositionResetToDefaultOffset(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  client.prepareResponse(listOffsetRequestMatcher(ListOffsetRequest.EARLIEST_TIMESTAMP),listOffsetResponse(Errors.NONE,Arrays.asList(5L)));
  fetcher.updateFetchPositions(Collections.singleton(tp));
  assertFalse(subscriptions.isOffsetResetNeeded(tp));
  assertTrue(subscriptions.isFetchable(tp));
  assertEquals(5,(long)subscriptions.position(tp));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateFetchPositionResetToLatestOffset(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.needOffsetReset(tp,OffsetResetStrategy.LATEST);
  client.prepareResponse(listOffsetRequestMatcher(ListOffsetRequest.LATEST_TIMESTAMP),listOffsetResponse(Errors.NONE,Arrays.asList(5L)));
  fetcher.updateFetchPositions(Collections.singleton(tp));
  assertFalse(subscriptions.isOffsetResetNeeded(tp));
  assertTrue(subscriptions.isFetchable(tp));
  assertEquals(5,(long)subscriptions.position(tp));
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFetchNormal(){
  List<ConsumerRecord<byte[],byte[]>> records;
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.seek(tp,0);
  fetcher.initFetches(cluster);
  client.prepareResponse(fetchResponse(this.records.buffer(),Errors.NONE.code(),100L,0));
  consumerClient.poll(0);
  records=fetcher.fetchedRecords().get(tp);
  assertEquals(3,records.size());
  assertEquals(4L,(long)subscriptions.position(tp));
  long offset=1;
  for (  ConsumerRecord<byte[],byte[]> record : records) {
    assertEquals(offset,record.offset());
    offset+=1;
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testInFlightFetchOnPausedPartition(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.seek(tp,0);
  fetcher.initFetches(cluster);
  subscriptions.pause(tp);
  client.prepareResponse(fetchResponse(this.records.buffer(),Errors.NONE.code(),100L,0));
  consumerClient.poll(0);
  assertNull(fetcher.fetchedRecords().get(tp));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.HeartbeatTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTimeToNextHeartbeat(){
  heartbeat.sentHeartbeat(0);
  assertEquals(100,heartbeat.timeToNextHeartbeat(0));
  assertEquals(0,heartbeat.timeToNextHeartbeat(100));
  assertEquals(0,heartbeat.timeToNextHeartbeat(200));
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testShouldHeartbeat(){
  heartbeat.sentHeartbeat(time.milliseconds());
  time.sleep((long)((float)interval * 1.1));
  assertTrue(heartbeat.shouldHeartbeat(time.milliseconds()));
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSessionTimeoutExpired(){
  heartbeat.sentHeartbeat(time.milliseconds());
  time.sleep(305);
  assertTrue(heartbeat.sessionTimeoutExpired(time.milliseconds()));
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testResetSession(){
  heartbeat.sentHeartbeat(time.milliseconds());
  time.sleep(305);
  heartbeat.resetSessionTimeout(time.milliseconds());
  assertFalse(heartbeat.sessionTimeoutExpired(time.milliseconds()));
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testShouldNotHeartbeat(){
  heartbeat.sentHeartbeat(time.milliseconds());
  time.sleep(interval / 2);
  assertFalse(heartbeat.shouldHeartbeat(time.milliseconds()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.RequestFutureTest </h4><pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testComposeSuccessCase(){
  RequestFuture<String> future=new RequestFuture<String>();
  RequestFuture<Integer> composed=future.compose(new RequestFutureAdapter<String,Integer>(){
    @Override public void onSuccess(    String value,    RequestFuture<Integer> future){
      future.complete(value.length());
    }
  }
);
  future.complete("hello");
  assertTrue(composed.isDone());
  assertTrue(composed.succeeded());
  assertEquals(5,(int)composed.value());
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testComposeFailureCase(){
  RequestFuture<String> future=new RequestFuture<String>();
  RequestFuture<Integer> composed=future.compose(new RequestFutureAdapter<String,Integer>(){
    @Override public void onSuccess(    String value,    RequestFuture<Integer> future){
      future.complete(value.length());
    }
  }
);
  RuntimeException e=new RuntimeException();
  future.raise(e);
  assertTrue(composed.isDone());
  assertTrue(composed.failed());
  assertEquals(e,composed.exception());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.SubscriptionStateTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void partitionReset(){
  state.assignFromUser(Arrays.asList(tp0));
  state.seek(tp0,5);
  assertEquals(5L,(long)state.position(tp0));
  state.needOffsetReset(tp0);
  assertFalse(state.isFetchable(tp0));
  assertTrue(state.isOffsetResetNeeded(tp0));
  assertEquals(null,state.position(tp0));
  state.seek(tp0,0);
  assertTrue(state.isFetchable(tp0));
  assertFalse(state.isOffsetResetNeeded(tp0));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void unsubscribeUserAssignment(){
  state.assignFromUser(Arrays.asList(tp0,tp1));
  state.unsubscribe();
  state.subscribe(Arrays.asList(topic),rebalanceListener);
  assertEquals(Collections.singleton(topic),state.subscription());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void unsubscription(){
  state.subscribe(Pattern.compile(".*"),rebalanceListener);
  state.changeSubscription(Arrays.asList(topic,topic1));
  assertTrue(state.partitionAssignmentNeeded());
  state.assignFromSubscribed(asList(tp1));
  assertEquals(Collections.singleton(tp1),state.assignedPartitions());
  assertFalse(state.partitionAssignmentNeeded());
  state.unsubscribe();
  assertEquals(0,state.subscription().size());
  assertTrue(state.assignedPartitions().isEmpty());
  assertTrue(state.partitionAssignmentNeeded());
  state.assignFromUser(Arrays.asList(tp0));
  assertEquals(Collections.singleton(tp0),state.assignedPartitions());
  assertFalse(state.partitionAssignmentNeeded());
  state.unsubscribe();
  assertEquals(0,state.subscription().size());
  assertTrue(state.assignedPartitions().isEmpty());
  assertTrue(state.partitionAssignmentNeeded());
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void partitionPause(){
  state.assignFromUser(Arrays.asList(tp0));
  state.seek(tp0,100);
  assertTrue(state.isFetchable(tp0));
  state.pause(tp0);
  assertFalse(state.isFetchable(tp0));
  state.resume(tp0);
  assertTrue(state.isFetchable(tp0));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void topicSubscription(){
  state.subscribe(Arrays.asList(topic),rebalanceListener);
  assertEquals(1,state.subscription().size());
  assertTrue(state.partitionAssignmentNeeded());
  assertTrue(state.assignedPartitions().isEmpty());
  assertTrue(state.partitionsAutoAssigned());
  state.assignFromSubscribed(asList(tp0));
  state.seek(tp0,1);
  state.committed(tp0,new OffsetAndMetadata(1));
  assertAllPositions(tp0,1L);
  state.assignFromSubscribed(asList(tp1));
  assertTrue(state.isAssigned(tp1));
  assertFalse(state.partitionAssignmentNeeded());
  assertFalse(state.isAssigned(tp0));
  assertFalse(state.isFetchable(tp1));
  assertEquals(Collections.singleton(tp1),state.assignedPartitions());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void partitionAssignment(){
  state.assignFromUser(Arrays.asList(tp0));
  assertEquals(Collections.singleton(tp0),state.assignedPartitions());
  assertFalse(state.partitionAssignmentNeeded());
  state.committed(tp0,new OffsetAndMetadata(1));
  state.seek(tp0,1);
  assertTrue(state.isFetchable(tp0));
  assertAllPositions(tp0,1L);
  state.assignFromUser(Arrays.<TopicPartition>asList());
  assertTrue(state.assignedPartitions().isEmpty());
  assertFalse(state.isAssigned(tp0));
  assertFalse(state.isFetchable(tp0));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void unsubscribeUserSubscribe(){
  state.subscribe(Arrays.asList(topic),rebalanceListener);
  state.unsubscribe();
  state.assignFromUser(Arrays.asList(tp0));
  assertEquals(Collections.singleton(tp0),state.assignedPartitions());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void commitOffsetMetadata(){
  state.assignFromUser(Arrays.asList(tp0));
  state.committed(tp0,new OffsetAndMetadata(5,"hi"));
  assertEquals(5,state.committed(tp0).offset());
  assertEquals("hi",state.committed(tp0).metadata());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void patternSubscription(){
  state.subscribe(Pattern.compile(".*"),rebalanceListener);
  state.changeSubscription(Arrays.asList(topic,topic1));
  assertEquals("Expected subscribed topics count is incorrect",2,state.subscription().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.MockProducerTest </h4><pre class="type-10 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testManualCompletion() throws Exception {
  MockProducer<byte[],byte[]> producer=new MockProducer<byte[],byte[]>(false,new MockSerializer(),new MockSerializer());
  ProducerRecord<byte[],byte[]> record1=new ProducerRecord<byte[],byte[]>(topic,"key1".getBytes(),"value1".getBytes());
  ProducerRecord<byte[],byte[]> record2=new ProducerRecord<byte[],byte[]>(topic,"key2".getBytes(),"value2".getBytes());
  Future<RecordMetadata> md1=producer.send(record1);
  assertFalse("Send shouldn't have completed",md1.isDone());
  Future<RecordMetadata> md2=producer.send(record2);
  assertFalse("Send shouldn't have completed",md2.isDone());
  assertTrue("Complete the first request",producer.completeNext());
  assertFalse("Requst should be successful",isError(md1));
  assertFalse("Second request still incomplete",md2.isDone());
  IllegalArgumentException e=new IllegalArgumentException("blah");
  assertTrue("Complete the second request with an error",producer.errorNext(e));
  try {
    md2.get();
    fail("Expected error to be thrown");
  }
 catch (  ExecutionException err) {
    assertEquals(e,err.getCause());
  }
  assertFalse("No more requests to complete",producer.completeNext());
  Future<RecordMetadata> md3=producer.send(record1);
  Future<RecordMetadata> md4=producer.send(record2);
  assertTrue("Requests should not be completed.",!md3.isDone() && !md4.isDone());
  producer.flush();
  assertTrue("Requests should be completed.",md3.isDone() && md4.isDone());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPartitioner() throws Exception {
  PartitionInfo partitionInfo0=new PartitionInfo(topic,0,null,null,null);
  PartitionInfo partitionInfo1=new PartitionInfo(topic,1,null,null,null);
  Cluster cluster=new Cluster(new ArrayList<Node>(0),asList(partitionInfo0,partitionInfo1),Collections.<String>emptySet());
  MockProducer<String,String> producer=new MockProducer<String,String>(cluster,true,new DefaultPartitioner(),new StringSerializer(),new StringSerializer());
  ProducerRecord<String,String> record=new ProducerRecord<String,String>(topic,"key","value");
  Future<RecordMetadata> metadata=producer.send(record);
  assertEquals("Partition should be correct",1,metadata.get().partition());
  producer.clear();
  assertEquals("Clear should erase our history",0,producer.history().size());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void testAutoCompleteMock() throws Exception {
  MockProducer<byte[],byte[]> producer=new MockProducer<byte[],byte[]>(true,new MockSerializer(),new MockSerializer());
  ProducerRecord<byte[],byte[]> record=new ProducerRecord<byte[],byte[]>(topic,"key".getBytes(),"value".getBytes());
  Future<RecordMetadata> metadata=producer.send(record);
  assertTrue("Send should be immediately complete",metadata.isDone());
  assertFalse("Send should be successful",isError(metadata));
  assertEquals("Offset should be 0",0L,metadata.get().offset());
  assertEquals(topic,metadata.get().topic());
  assertEquals("We should have the record in our history",singletonList(record),producer.history());
  producer.clear();
  assertEquals("Clear should erase our history",0,producer.history().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.ProducerRecordTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEqualsAndHashCode(){
  ProducerRecord<String,Integer> producerRecord=new ProducerRecord<String,Integer>("test",1,"key",1);
  assertEquals(producerRecord,producerRecord);
  assertEquals(producerRecord.hashCode(),producerRecord.hashCode());
  ProducerRecord<String,Integer> equalRecord=new ProducerRecord<String,Integer>("test",1,"key",1);
  assertEquals(producerRecord,equalRecord);
  assertEquals(producerRecord.hashCode(),equalRecord.hashCode());
  ProducerRecord<String,Integer> topicMisMatch=new ProducerRecord<String,Integer>("test-1",1,"key",1);
  assertFalse(producerRecord.equals(topicMisMatch));
  ProducerRecord<String,Integer> partitionMismatch=new ProducerRecord<String,Integer>("test",2,"key",1);
  assertFalse(producerRecord.equals(partitionMismatch));
  ProducerRecord<String,Integer> keyMisMatch=new ProducerRecord<String,Integer>("test",1,"key-1",1);
  assertFalse(producerRecord.equals(keyMisMatch));
  ProducerRecord<String,Integer> valueMisMatch=new ProducerRecord<String,Integer>("test",1,"key",2);
  assertFalse(producerRecord.equals(valueMisMatch));
  ProducerRecord<String,Integer> nullFieldsRecord=new ProducerRecord<String,Integer>("topic",null,null,null);
  assertEquals(nullFieldsRecord,nullFieldsRecord);
  assertEquals(nullFieldsRecord.hashCode(),nullFieldsRecord.hashCode());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.RecordSendTest </h4><pre class="type-10 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that waiting on a request that never completes times out
 */
@Test public void testTimeout() throws Exception {
  ProduceRequestResult request=new ProduceRequestResult();
  FutureRecordMetadata future=new FutureRecordMetadata(request,relOffset);
  assertFalse("Request is not completed",future.isDone());
  try {
    future.get(5,TimeUnit.MILLISECONDS);
    fail("Should have thrown exception.");
  }
 catch (  TimeoutException e) {
  }
  request.done(topicPartition,baseOffset,null);
  assertTrue(future.isDone());
  assertEquals(baseOffset + relOffset,future.get().offset());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.internals.BufferPoolTest </h4><pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test that delayed allocation blocks
 */
@Test public void testDelayedAllocation() throws Exception {
  BufferPool pool=new BufferPool(5 * 1024,1024,metrics,time,metricGroup);
  ByteBuffer buffer=pool.allocate(1024,maxBlockTimeMs);
  CountDownLatch doDealloc=asyncDeallocate(pool,buffer);
  CountDownLatch allocation=asyncAllocate(pool,5 * 1024);
  assertEquals("Allocation shouldn't have happened yet, waiting on memory.",1L,allocation.getCount());
  doDealloc.countDown();
  allocation.await();
}

</code></pre>

<br>
<pre class="type-7 type-3 type-1 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that we cannot try to allocate more memory then we have in the whole pool
 */
@Test(expected=IllegalArgumentException.class) public void testCantAllocateMoreMemoryThanWeHave() throws Exception {
  BufferPool pool=new BufferPool(1024,512,metrics,time,metricGroup);
  ByteBuffer buffer=pool.allocate(1024,maxBlockTimeMs);
  assertEquals(1024,buffer.limit());
  pool.deallocate(buffer);
  buffer=pool.allocate(1025,maxBlockTimeMs);
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test the simple non-blocking allocation paths
 */
@Test public void testSimple() throws Exception {
  long totalMemory=64 * 1024;
  int size=1024;
  BufferPool pool=new BufferPool(totalMemory,size,metrics,time,metricGroup);
  ByteBuffer buffer=pool.allocate(size,maxBlockTimeMs);
  assertEquals("Buffer size should equal requested size.",size,buffer.limit());
  assertEquals("Unallocated memory should have shrunk",totalMemory - size,pool.unallocatedMemory());
  assertEquals("Available memory should have shrunk",totalMemory - size,pool.availableMemory());
  buffer.putInt(1);
  buffer.flip();
  pool.deallocate(buffer);
  assertEquals("All memory should be available",totalMemory,pool.availableMemory());
  assertEquals("But now some is on the free list",totalMemory - size,pool.unallocatedMemory());
  buffer=pool.allocate(size,maxBlockTimeMs);
  assertEquals("Recycled buffer should be cleared.",0,buffer.position());
  assertEquals("Recycled buffer should be cleared.",buffer.capacity(),buffer.limit());
  pool.deallocate(buffer);
  assertEquals("All memory should be available",totalMemory,pool.availableMemory());
  assertEquals("Still a single buffer on the free list",totalMemory - size,pool.unallocatedMemory());
  buffer=pool.allocate(2 * size,maxBlockTimeMs);
  pool.deallocate(buffer);
  assertEquals("All memory should be available",totalMemory,pool.availableMemory());
  assertEquals("Non-standard size didn't go to the free list.",totalMemory - size,pool.unallocatedMemory());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.internals.DefaultPartitionerTest </h4><pre class="type-13 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRoundRobinWithUnavailablePartitions(){
  int countForPart0=0;
  int countForPart2=0;
  for (int i=1; i <= 100; i++) {
    int part=partitioner.partition("test",null,null,null,null,cluster);
    assertTrue("We should never choose a leader-less node in round robin",part == 0 || part == 2);
    if (part == 0)     countForPart0++;
 else     countForPart2++;
  }
  assertEquals("The distribution between two available partitions should be even",countForPart0,countForPart2);
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testKeyPartitionIsStable(){
  int partition=partitioner.partition("test",null,keyBytes,null,null,cluster);
  assertEquals("Same key should yield same partition",partition,partitioner.partition("test",null,keyBytes,null,null,cluster));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.internals.RecordAccumulatorTest </h4><pre class="type-13 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testExpiredBatches() throws InterruptedException {
  Time time=new SystemTime();
  long now=time.milliseconds();
  RecordAccumulator accum=new RecordAccumulator(1024,10 * 1024,CompressionType.NONE,10,100L,metrics,time);
  int appends=1024 / msgSize;
  for (int i=0; i < appends; i++) {
    accum.append(tp1,key,value,null,maxBlockTimeMs);
    assertEquals("No partitions should be ready.",0,accum.ready(cluster,now).readyNodes.size());
  }
  time.sleep(2000);
  accum.ready(cluster,now);
  accum.append(tp1,key,value,null,0);
  Set<Node> readyNodes=accum.ready(cluster,time.milliseconds()).readyNodes;
  assertEquals("Our partition's leader should be ready",Collections.singleton(node1),readyNodes);
  Cluster cluster=new Cluster(new ArrayList<Node>(),new ArrayList<PartitionInfo>(),Collections.<String>emptySet());
  now=time.milliseconds();
  List<RecordBatch> expiredBatches=accum.abortExpiredBatches(60,cluster,now);
  assertEquals(1,expiredBatches.size());
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLinger() throws Exception {
  long lingerMs=10L;
  RecordAccumulator accum=new RecordAccumulator(1024,10 * 1024,CompressionType.NONE,lingerMs,100L,metrics,time);
  accum.append(tp1,key,value,null,maxBlockTimeMs);
  assertEquals("No partitions should be ready",0,accum.ready(cluster,time.milliseconds()).readyNodes.size());
  time.sleep(10);
  assertEquals("Our partition's leader should be ready",Collections.singleton(node1),accum.ready(cluster,time.milliseconds()).readyNodes);
  List<RecordBatch> batches=accum.drain(cluster,Collections.singleton(node1),Integer.MAX_VALUE,0).get(node1.id());
  assertEquals(1,batches.size());
  RecordBatch batch=batches.get(0);
  Iterator<LogEntry> iter=batch.records.iterator();
  LogEntry entry=iter.next();
  assertEquals("Keys should match",ByteBuffer.wrap(key),entry.record().key());
  assertEquals("Values should match",ByteBuffer.wrap(value),entry.record().value());
  assertFalse("No more records",iter.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNextReadyCheckDelay() throws Exception {
  long lingerMs=10L;
  RecordAccumulator accum=new RecordAccumulator(1024,10 * 1024,CompressionType.NONE,lingerMs,100L,metrics,time);
  int appends=1024 / msgSize;
  for (int i=0; i < appends; i++)   accum.append(tp1,key,value,null,maxBlockTimeMs);
  RecordAccumulator.ReadyCheckResult result=accum.ready(cluster,time.milliseconds());
  assertEquals("No nodes should be ready.",0,result.readyNodes.size());
  assertEquals("Next check time should be the linger time",lingerMs,result.nextReadyCheckDelayMs);
  time.sleep(lingerMs / 2);
  for (int i=0; i < appends; i++)   accum.append(tp3,key,value,null,maxBlockTimeMs);
  result=accum.ready(cluster,time.milliseconds());
  assertEquals("No nodes should be ready.",0,result.readyNodes.size());
  assertEquals("Next check time should be defined by node1, half remaining linger time",lingerMs / 2,result.nextReadyCheckDelayMs);
  for (int i=0; i < appends + 1; i++)   accum.append(tp2,key,value,null,maxBlockTimeMs);
  result=accum.ready(cluster,time.milliseconds());
  assertEquals("Node1 should be ready",Collections.singleton(node1),result.readyNodes);
  assertTrue("Next check time should be defined by node2, at most linger time",result.nextReadyCheckDelayMs <= lingerMs);
}

</code></pre>

<br>
<pre class="type-8 type-13 type-9 type-7 type-3 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFull() throws Exception {
  long now=time.milliseconds();
  RecordAccumulator accum=new RecordAccumulator(1024,10 * 1024,CompressionType.NONE,10L,100L,metrics,time);
  int appends=1024 / msgSize;
  for (int i=0; i < appends; i++) {
    accum.append(tp1,key,value,null,maxBlockTimeMs);
    assertEquals("No partitions should be ready.",0,accum.ready(cluster,now).readyNodes.size());
  }
  accum.append(tp1,key,value,null,maxBlockTimeMs);
  assertEquals("Our partition's leader should be ready",Collections.singleton(node1),accum.ready(cluster,time.milliseconds()).readyNodes);
  List<RecordBatch> batches=accum.drain(cluster,Collections.singleton(node1),Integer.MAX_VALUE,0).get(node1.id());
  assertEquals(1,batches.size());
  RecordBatch batch=batches.get(0);
  Iterator<LogEntry> iter=batch.records.iterator();
  for (int i=0; i < appends; i++) {
    LogEntry entry=iter.next();
    assertEquals("Keys should match",ByteBuffer.wrap(key),entry.record().key());
    assertEquals("Values should match",ByteBuffer.wrap(value),entry.record().value());
  }
  assertFalse("No more records",iter.hasNext());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPartialDrain() throws Exception {
  RecordAccumulator accum=new RecordAccumulator(1024,10 * 1024,CompressionType.NONE,10L,100L,metrics,time);
  int appends=1024 / msgSize + 1;
  List<TopicPartition> partitions=asList(tp1,tp2);
  for (  TopicPartition tp : partitions) {
    for (int i=0; i < appends; i++)     accum.append(tp,key,value,null,maxBlockTimeMs);
  }
  assertEquals("Partition's leader should be ready",Collections.singleton(node1),accum.ready(cluster,time.milliseconds()).readyNodes);
  List<RecordBatch> batches=accum.drain(cluster,Collections.singleton(node1),1024,0).get(node1.id());
  assertEquals("But due to size bound only one partition should have been retrieved",1,batches.size());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAppendLarge() throws Exception {
  int batchSize=512;
  RecordAccumulator accum=new RecordAccumulator(batchSize,10 * 1024,CompressionType.NONE,0L,100L,metrics,time);
  accum.append(tp1,key,new byte[2 * batchSize],null,maxBlockTimeMs);
  assertEquals("Our partition's leader should be ready",Collections.singleton(node1),accum.ready(cluster,time.milliseconds()).readyNodes);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAbortIncompleteBatches() throws Exception {
  long lingerMs=Long.MAX_VALUE;
  final AtomicInteger numExceptionReceivedInCallback=new AtomicInteger(0);
  final RecordAccumulator accum=new RecordAccumulator(4 * 1024,64 * 1024,CompressionType.NONE,lingerMs,100L,metrics,time);
class TestCallback implements Callback {
    @Override public void onCompletion(    RecordMetadata metadata,    Exception exception){
      assertTrue(exception.getMessage().equals("Producer is closed forcefully."));
      numExceptionReceivedInCallback.incrementAndGet();
    }
  }
  for (int i=0; i < 100; i++)   accum.append(new TopicPartition(topic,i % 3),key,value,new TestCallback(),maxBlockTimeMs);
  RecordAccumulator.ReadyCheckResult result=accum.ready(cluster,time.milliseconds());
  assertEquals("No nodes should be ready.",0,result.readyNodes.size());
  accum.abortIncompleteBatches();
  assertEquals(numExceptionReceivedInCallback.get(),100);
  assertFalse(accum.hasUnsent());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFlush() throws Exception {
  long lingerMs=Long.MAX_VALUE;
  final RecordAccumulator accum=new RecordAccumulator(4 * 1024,64 * 1024,CompressionType.NONE,lingerMs,100L,metrics,time);
  for (int i=0; i < 100; i++)   accum.append(new TopicPartition(topic,i % 3),key,value,null,maxBlockTimeMs);
  RecordAccumulator.ReadyCheckResult result=accum.ready(cluster,time.milliseconds());
  assertEquals("No nodes should be ready.",0,result.readyNodes.size());
  accum.beginFlush();
  result=accum.ready(cluster,time.milliseconds());
  Map<Integer,List<RecordBatch>> results=accum.drain(cluster,result.readyNodes,Integer.MAX_VALUE,time.milliseconds());
  for (  List<RecordBatch> batches : results.values())   for (  RecordBatch batch : batches)   accum.deallocate(batch);
  accum.awaitFlushCompletion();
  assertFalse(accum.hasUnsent());
}

</code></pre>

<br>
<pre class="type-7 type-3 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testRetryBackoff() throws Exception {
  long lingerMs=Long.MAX_VALUE / 4;
  long retryBackoffMs=Long.MAX_VALUE / 2;
  final RecordAccumulator accum=new RecordAccumulator(1024,10 * 1024,CompressionType.NONE,lingerMs,retryBackoffMs,metrics,time);
  long now=time.milliseconds();
  accum.append(tp1,key,value,null,maxBlockTimeMs);
  RecordAccumulator.ReadyCheckResult result=accum.ready(cluster,now + lingerMs + 1);
  assertEquals("Node1 should be ready",Collections.singleton(node1),result.readyNodes);
  Map<Integer,List<RecordBatch>> batches=accum.drain(cluster,result.readyNodes,Integer.MAX_VALUE,now + lingerMs + 1);
  assertEquals("Node1 should be the only ready node.",1,batches.size());
  assertEquals("Partition 0 should only have one batch drained.",1,batches.get(0).size());
  now=time.milliseconds();
  accum.reenqueue(batches.get(0).get(0),now);
  accum.append(tp2,key,value,null,maxBlockTimeMs);
  result=accum.ready(cluster,now + lingerMs + 1);
  assertEquals("Node1 should be ready",Collections.singleton(node1),result.readyNodes);
  batches=accum.drain(cluster,result.readyNodes,Integer.MAX_VALUE,now + lingerMs + 1);
  assertEquals("Node1 should be the only ready node.",1,batches.size());
  assertEquals("Node1 should only have one batch drained.",1,batches.get(0).size());
  assertEquals("Node1 should only have one batch for partition 1.",tp2,batches.get(0).get(0).topicPartition);
  result=accum.ready(cluster,now + retryBackoffMs + 1);
  assertEquals("Node1 should be ready",Collections.singleton(node1),result.readyNodes);
  batches=accum.drain(cluster,result.readyNodes,Integer.MAX_VALUE,now + retryBackoffMs + 1);
  assertEquals("Node1 should be the only ready node.",1,batches.size());
  assertEquals("Node1 should only have one batch drained.",1,batches.get(0).size());
  assertEquals("Node1 should only have one batch for partition 0.",tp1,batches.get(0).get(0).topicPartition);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.internals.SenderTest </h4><pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRetries() throws Exception {
  int maxRetries=1;
  Metrics m=new Metrics();
  try {
    Sender sender=new Sender(client,metadata,this.accumulator,MAX_REQUEST_SIZE,ACKS_ALL,maxRetries,m,time,"clientId",REQUEST_TIMEOUT);
    Future<RecordMetadata> future=accumulator.append(tp,"key".getBytes(),"value".getBytes(),null,MAX_BLOCK_TIMEOUT).future;
    sender.run(time.milliseconds());
    sender.run(time.milliseconds());
    String id=client.requests().peek().request().destination();
    Node node=new Node(Integer.valueOf(id),"localhost",0);
    assertEquals(1,client.inFlightRequestCount());
    assertTrue("Client ready status should be true",client.isReady(node,0L));
    client.disconnect(id);
    assertEquals(0,client.inFlightRequestCount());
    assertFalse("Client ready status should be false",client.isReady(node,0L));
    sender.run(time.milliseconds());
    sender.run(time.milliseconds());
    sender.run(time.milliseconds());
    assertEquals(1,client.inFlightRequestCount());
    long offset=0;
    client.respond(produceResponse(tp,offset,Errors.NONE.code(),0));
    sender.run(time.milliseconds());
    assertTrue("Request should have retried and completed",future.isDone());
    assertEquals(offset,future.get().offset());
    future=accumulator.append(tp,"key".getBytes(),"value".getBytes(),null,MAX_BLOCK_TIMEOUT).future;
    sender.run(time.milliseconds());
    for (int i=0; i < maxRetries + 1; i++) {
      client.disconnect(client.requests().peek().request().destination());
      sender.run(time.milliseconds());
      sender.run(time.milliseconds());
      sender.run(time.milliseconds());
    }
    sender.run(time.milliseconds());
    completedWithError(future,Errors.NETWORK_EXCEPTION);
  }
  finally {
    m.close();
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testQuotaMetrics() throws Exception {
  final long offset=0;
  for (int i=1; i <= 3; i++) {
    Future<RecordMetadata> future=accumulator.append(tp,"key".getBytes(),"value".getBytes(),null,MAX_BLOCK_TIMEOUT).future;
    sender.run(time.milliseconds());
    client.respond(produceResponse(tp,offset,Errors.NONE.code(),100 * i));
    sender.run(time.milliseconds());
  }
  Map<MetricName,KafkaMetric> allMetrics=metrics.metrics();
  KafkaMetric avgMetric=allMetrics.get(metrics.metricName("produce-throttle-time-avg",METRIC_GROUP,""));
  KafkaMetric maxMetric=allMetrics.get(metrics.metricName("produce-throttle-time-max",METRIC_GROUP,""));
  assertEquals(200,avgMetric.value(),EPS);
  assertEquals(300,maxMetric.value(),EPS);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimple() throws Exception {
  long offset=0;
  Future<RecordMetadata> future=accumulator.append(tp,"key".getBytes(),"value".getBytes(),null,MAX_BLOCK_TIMEOUT).future;
  sender.run(time.milliseconds());
  sender.run(time.milliseconds());
  assertEquals("We should have a single produce request in flight.",1,client.inFlightRequestCount());
  client.respond(produceResponse(tp,offset,Errors.NONE.code(),0));
  sender.run(time.milliseconds());
  assertEquals("All requests completed.",offset,(long)client.inFlightRequestCount());
  sender.run(time.milliseconds());
  assertTrue("Request should be completed",future.isDone());
  assertEquals(offset,future.get().offset());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.cache.LRUCacheTest </h4><pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemove(){
  Cache<String,String> cache=new LRUCache<>(4);
  cache.put("a","b");
  cache.put("c","d");
  cache.put("e","f");
  assertEquals(3,cache.size());
  assertEquals(true,cache.remove("a"));
  assertEquals(2,cache.size());
  assertNull(cache.get("a"));
  assertEquals("d",cache.get("c"));
  assertEquals("f",cache.get("e"));
  assertEquals(false,cache.remove("key-does-not-exist"));
  assertEquals(true,cache.remove("c"));
  assertEquals(1,cache.size());
  assertNull(cache.get("c"));
  assertEquals("f",cache.get("e"));
  assertEquals(true,cache.remove("e"));
  assertEquals(0,cache.size());
  assertNull(cache.get("e"));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPutGet(){
  Cache<String,String> cache=new LRUCache<>(4);
  cache.put("a","b");
  cache.put("c","d");
  cache.put("e","f");
  cache.put("g","h");
  assertEquals(4,cache.size());
  assertEquals("b",cache.get("a"));
  assertEquals("d",cache.get("c"));
  assertEquals("f",cache.get("e"));
  assertEquals("h",cache.get("g"));
}

</code></pre>

<br>
<pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEviction(){
  Cache<String,String> cache=new LRUCache<>(2);
  cache.put("a","b");
  cache.put("c","d");
  assertEquals(2,cache.size());
  cache.put("e","f");
  assertEquals(2,cache.size());
  assertNull(cache.get("a"));
  assertEquals("d",cache.get("c"));
  assertEquals("f",cache.get("e"));
  cache.get("c");
  cache.put("g","h");
  assertEquals(2,cache.size());
  assertNull(cache.get("e"));
  assertEquals("d",cache.get("c"));
  assertEquals("h",cache.get("g"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.config.ConfigDefTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBasicTypes(){
  ConfigDef def=new ConfigDef().define("a",Type.INT,5,Range.between(0,14),Importance.HIGH,"docs").define("b",Type.LONG,Importance.HIGH,"docs").define("c",Type.STRING,"hello",Importance.HIGH,"docs").define("d",Type.LIST,Importance.HIGH,"docs").define("e",Type.DOUBLE,Importance.HIGH,"docs").define("f",Type.CLASS,Importance.HIGH,"docs").define("g",Type.BOOLEAN,Importance.HIGH,"docs").define("h",Type.BOOLEAN,Importance.HIGH,"docs").define("i",Type.BOOLEAN,Importance.HIGH,"docs").define("j",Type.PASSWORD,Importance.HIGH,"docs");
  Properties props=new Properties();
  props.put("a","1   ");
  props.put("b",2);
  props.put("d"," a , b, c");
  props.put("e",42.5d);
  props.put("f",String.class.getName());
  props.put("g","true");
  props.put("h","FalSE");
  props.put("i","TRUE");
  props.put("j","password");
  Map<String,Object> vals=def.parse(props);
  assertEquals(1,vals.get("a"));
  assertEquals(2L,vals.get("b"));
  assertEquals("hello",vals.get("c"));
  assertEquals(asList("a","b","c"),vals.get("d"));
  assertEquals(42.5d,vals.get("e"));
  assertEquals(String.class,vals.get("f"));
  assertEquals(true,vals.get("g"));
  assertEquals(false,vals.get("h"));
  assertEquals(true,vals.get("i"));
  assertEquals(new Password("password"),vals.get("j"));
  assertEquals(Password.HIDDEN,vals.get("j").toString());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSslPasswords(){
  ConfigDef def=new ConfigDef();
  SslConfigs.addClientSslSupport(def);
  Properties props=new Properties();
  props.put(SslConfigs.SSL_KEY_PASSWORD_CONFIG,"key_password");
  props.put(SslConfigs.SSL_KEYSTORE_PASSWORD_CONFIG,"keystore_password");
  props.put(SslConfigs.SSL_TRUSTSTORE_PASSWORD_CONFIG,"truststore_password");
  Map<String,Object> vals=def.parse(props);
  assertEquals(new Password("key_password"),vals.get(SslConfigs.SSL_KEY_PASSWORD_CONFIG));
  assertEquals(Password.HIDDEN,vals.get(SslConfigs.SSL_KEY_PASSWORD_CONFIG).toString());
  assertEquals(new Password("keystore_password"),vals.get(SslConfigs.SSL_KEYSTORE_PASSWORD_CONFIG));
  assertEquals(Password.HIDDEN,vals.get(SslConfigs.SSL_KEYSTORE_PASSWORD_CONFIG).toString());
  assertEquals(new Password("truststore_password"),vals.get(SslConfigs.SSL_TRUSTSTORE_PASSWORD_CONFIG));
  assertEquals(Password.HIDDEN,vals.get(SslConfigs.SSL_TRUSTSTORE_PASSWORD_CONFIG).toString());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNullDefault(){
  ConfigDef def=new ConfigDef().define("a",Type.INT,null,null,null,"docs");
  Map<String,Object> vals=def.parse(new Properties());
  assertEquals(null,vals.get("a"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.metrics.MetricsTest </h4><pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testRemoveInactiveMetrics(){
  Sensor s1=metrics.sensor("test.s1",null,1);
  s1.add(metrics.metricName("test.s1.count","grp1"),new Count());
  Sensor s2=metrics.sensor("test.s2",null,3);
  s2.add(metrics.metricName("test.s2.count","grp1"),new Count());
  Metrics.ExpireSensorTask purger=metrics.new ExpireSensorTask();
  purger.run();
  assertNotNull("Sensor test.s1 must be present",metrics.getSensor("test.s1"));
  assertNotNull("MetricName test.s1.count must be present",metrics.metrics().get(metrics.metricName("test.s1.count","grp1")));
  assertNotNull("Sensor test.s2 must be present",metrics.getSensor("test.s2"));
  assertNotNull("MetricName test.s2.count must be present",metrics.metrics().get(metrics.metricName("test.s2.count","grp1")));
  time.sleep(1001);
  purger.run();
  assertNull("Sensor test.s1 should have been purged",metrics.getSensor("test.s1"));
  assertNull("MetricName test.s1.count should have been purged",metrics.metrics().get(metrics.metricName("test.s1.count","grp1")));
  assertNotNull("Sensor test.s2 must be present",metrics.getSensor("test.s2"));
  assertNotNull("MetricName test.s2.count must be present",metrics.metrics().get(metrics.metricName("test.s2.count","grp1")));
  s2.record();
  time.sleep(2000);
  purger.run();
  assertNotNull("Sensor test.s2 must be present",metrics.getSensor("test.s2"));
  assertNotNull("MetricName test.s2.count must be present",metrics.metrics().get(metrics.metricName("test.s2.count","grp1")));
  time.sleep(1000);
  purger.run();
  assertNull("Sensor test.s2 should have been purged",metrics.getSensor("test.s1"));
  assertNull("MetricName test.s2.count should have been purged",metrics.metrics().get(metrics.metricName("test.s1.count","grp1")));
  s1=metrics.sensor("test.s1",null,1);
  s1.add(metrics.metricName("test.s1.count","grp1"),new Count());
  assertNotNull("Sensor test.s1 must be present",metrics.getSensor("test.s1"));
  assertNotNull("MetricName test.s1.count must be present",metrics.metrics().get(metrics.metricName("test.s1.count","grp1")));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPercentiles(){
  int buckets=100;
  Percentiles percs=new Percentiles(4 * buckets,0.0,100.0,BucketSizing.CONSTANT,new Percentile(metrics.metricName("test.p25","grp1"),25),new Percentile(metrics.metricName("test.p50","grp1"),50),new Percentile(metrics.metricName("test.p75","grp1"),75));
  MetricConfig config=new MetricConfig().eventWindow(50).samples(2);
  Sensor sensor=metrics.sensor("test",config);
  sensor.add(percs);
  Metric p25=this.metrics.metrics().get(metrics.metricName("test.p25","grp1"));
  Metric p50=this.metrics.metrics().get(metrics.metricName("test.p50","grp1"));
  Metric p75=this.metrics.metrics().get(metrics.metricName("test.p75","grp1"));
  for (int i=0; i < buckets; i++)   sensor.record(i);
  assertEquals(25,p25.value(),1.0);
  assertEquals(50,p50.value(),1.0);
  assertEquals(75,p75.value(),1.0);
  for (int i=0; i < buckets; i++)   sensor.record(0.0);
  assertEquals(0.0,p25.value(),1.0);
  assertEquals(0.0,p50.value(),1.0);
  assertEquals(0.0,p75.value(),1.0);
}

</code></pre>

<br>
<pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveSensor(){
  int size=metrics.metrics().size();
  Sensor parent1=metrics.sensor("test.parent1");
  parent1.add(metrics.metricName("test.parent1.count","grp1"),new Count());
  Sensor parent2=metrics.sensor("test.parent2");
  parent2.add(metrics.metricName("test.parent2.count","grp1"),new Count());
  Sensor child1=metrics.sensor("test.child1",parent1,parent2);
  child1.add(metrics.metricName("test.child1.count","grp1"),new Count());
  Sensor child2=metrics.sensor("test.child2",parent2);
  child2.add(metrics.metricName("test.child2.count","grp1"),new Count());
  Sensor grandChild1=metrics.sensor("test.gchild2",child2);
  grandChild1.add(metrics.metricName("test.gchild2.count","grp1"),new Count());
  Sensor sensor=metrics.getSensor("test.parent1");
  assertNotNull(sensor);
  metrics.removeSensor("test.parent1");
  assertNull(metrics.getSensor("test.parent1"));
  assertNull(metrics.metrics().get(metrics.metricName("test.parent1.count","grp1")));
  assertNull(metrics.getSensor("test.child1"));
  assertNull(metrics.childrenSensors().get(sensor));
  assertNull(metrics.metrics().get(metrics.metricName("test.child1.count","grp1")));
  sensor=metrics.getSensor("test.gchild2");
  assertNotNull(sensor);
  metrics.removeSensor("test.gchild2");
  assertNull(metrics.getSensor("test.gchild2"));
  assertNull(metrics.childrenSensors().get(sensor));
  assertNull(metrics.metrics().get(metrics.metricName("test.gchild2.count","grp1")));
  sensor=metrics.getSensor("test.child2");
  assertNotNull(sensor);
  metrics.removeSensor("test.child2");
  assertNull(metrics.getSensor("test.child2"));
  assertNull(metrics.childrenSensors().get(sensor));
  assertNull(metrics.metrics().get(metrics.metricName("test.child2.count","grp1")));
  sensor=metrics.getSensor("test.parent2");
  assertNotNull(sensor);
  metrics.removeSensor("test.parent2");
  assertNull(metrics.getSensor("test.parent2"));
  assertNull(metrics.childrenSensors().get(sensor));
  assertNull(metrics.metrics().get(metrics.metricName("test.parent2.count","grp1")));
  assertEquals(size,metrics.metrics().size());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleStats() throws Exception {
  ConstantMeasurable measurable=new ConstantMeasurable();
  metrics.addMetric(metrics.metricName("direct.measurable","grp1","The fraction of time an appender waits for space allocation."),measurable);
  Sensor s=metrics.sensor("test.sensor");
  s.add(metrics.metricName("test.avg","grp1"),new Avg());
  s.add(metrics.metricName("test.max","grp1"),new Max());
  s.add(metrics.metricName("test.min","grp1"),new Min());
  s.add(metrics.metricName("test.rate","grp1"),new Rate(TimeUnit.SECONDS));
  s.add(metrics.metricName("test.occurences","grp1"),new Rate(TimeUnit.SECONDS,new Count()));
  s.add(metrics.metricName("test.count","grp1"),new Count());
  s.add(new Percentiles(100,-100,100,BucketSizing.CONSTANT,new Percentile(metrics.metricName("test.median","grp1"),50.0),new Percentile(metrics.metricName("test.perc99_9","grp1"),99.9)));
  Sensor s2=metrics.sensor("test.sensor2");
  s2.add(metrics.metricName("s2.total","grp1"),new Total());
  s2.record(5.0);
  int sum=0;
  int count=10;
  for (int i=0; i < count; i++) {
    s.record(i);
    sum+=i;
  }
  double elapsedSecs=(config.timeWindowMs() * (config.samples() - 1)) / 1000.0;
  assertEquals(String.format("Occurrences(0...%d) = %f",count,count / elapsedSecs),count / elapsedSecs,metrics.metrics().get(metrics.metricName("test.occurences","grp1")).value(),EPS);
  long sleepTimeMs=2;
  time.sleep(sleepTimeMs * 1000);
  elapsedSecs+=sleepTimeMs;
  assertEquals("s2 reflects the constant value",5.0,metrics.metrics().get(metrics.metricName("s2.total","grp1")).value(),EPS);
  assertEquals("Avg(0...9) = 4.5",4.5,metrics.metrics().get(metrics.metricName("test.avg","grp1")).value(),EPS);
  assertEquals("Max(0...9) = 9",count - 1,metrics.metrics().get(metrics.metricName("test.max","grp1")).value(),EPS);
  assertEquals("Min(0...9) = 0",0.0,metrics.metrics().get(metrics.metricName("test.min","grp1")).value(),EPS);
  assertEquals("Rate(0...9) = 1.40625",sum / elapsedSecs,metrics.metrics().get(metrics.metricName("test.rate","grp1")).value(),EPS);
  assertEquals(String.format("Occurrences(0...%d) = %f",count,count / elapsedSecs),count / elapsedSecs,metrics.metrics().get(metrics.metricName("test.occurences","grp1")).value(),EPS);
  assertEquals("Count(0...9) = 10",(double)count,metrics.metrics().get(metrics.metricName("test.count","grp1")).value(),EPS);
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRateWindowing() throws Exception {
  MetricConfig cfg=new MetricConfig().samples(3);
  Sensor s=metrics.sensor("test.sensor",cfg);
  s.add(metrics.metricName("test.rate","grp1"),new Rate(TimeUnit.SECONDS));
  int sum=0;
  int count=cfg.samples() - 1;
  for (int i=0; i < count; i++) {
    s.record(100);
    sum+=100;
    time.sleep(cfg.timeWindowMs());
  }
  time.sleep(cfg.timeWindowMs() / 2);
  double elapsedSecs=(cfg.timeWindowMs() * (cfg.samples() - 1) + cfg.timeWindowMs() / 2) / 1000.0;
  KafkaMetric km=metrics.metrics().get(metrics.metricName("test.rate","grp1"));
  assertEquals("Rate(0...2) = 2.666",sum / elapsedSecs,km.value(),EPS);
  assertEquals("Elapsed Time = 75 seconds",elapsedSecs,((Rate)km.measurable()).windowSize(cfg,time.milliseconds()) / 1000,EPS);
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEventWindowing(){
  Count count=new Count();
  MetricConfig config=new MetricConfig().eventWindow(1).samples(2);
  count.record(config,1.0,time.milliseconds());
  count.record(config,1.0,time.milliseconds());
  assertEquals(2.0,count.measure(config,time.milliseconds()),EPS);
  count.record(config,1.0,time.milliseconds());
  assertEquals(2.0,count.measure(config,time.milliseconds()),EPS);
}

</code></pre>

<br>
<pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHierarchicalSensors(){
  Sensor parent1=metrics.sensor("test.parent1");
  parent1.add(metrics.metricName("test.parent1.count","grp1"),new Count());
  Sensor parent2=metrics.sensor("test.parent2");
  parent2.add(metrics.metricName("test.parent2.count","grp1"),new Count());
  Sensor child1=metrics.sensor("test.child1",parent1,parent2);
  child1.add(metrics.metricName("test.child1.count","grp1"),new Count());
  Sensor child2=metrics.sensor("test.child2",parent1);
  child2.add(metrics.metricName("test.child2.count","grp1"),new Count());
  Sensor grandchild=metrics.sensor("test.grandchild",child1);
  grandchild.add(metrics.metricName("test.grandchild.count","grp1"),new Count());
  parent1.record();
  parent2.record();
  child1.record();
  child2.record();
  grandchild.record();
  double p1=parent1.metrics().get(0).value();
  double p2=parent2.metrics().get(0).value();
  double c1=child1.metrics().get(0).value();
  double c2=child2.metrics().get(0).value();
  double gc=grandchild.metrics().get(0).value();
  assertEquals(1.0,gc,EPS);
  assertEquals(1.0 + gc,c1,EPS);
  assertEquals(1.0,c2,EPS);
  assertEquals(1.0 + c1,p2,EPS);
  assertEquals(1.0 + c1 + c2,p1,EPS);
  assertEquals(Arrays.asList(child1,child2),metrics.childrenSensors().get(parent1));
  assertEquals(Arrays.asList(child1),metrics.childrenSensors().get(parent2));
  assertNull(metrics.childrenSensors().get(grandchild));
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOldDataHasNoEffect(){
  Max max=new Max();
  long windowMs=100;
  int samples=2;
  MetricConfig config=new MetricConfig().timeWindow(windowMs,TimeUnit.MILLISECONDS).samples(samples);
  max.record(config,50,time.milliseconds());
  time.sleep(samples * windowMs);
  assertEquals(Double.NEGATIVE_INFINITY,max.measure(config,time.milliseconds()),EPS);
}

</code></pre>

<br>
<pre class="type-10 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMetricName(){
  MetricName n1=metrics.metricName("name","group","description","key1","value1","key2","value2");
  Map<String,String> tags=new HashMap<String,String>();
  tags.put("key1","value1");
  tags.put("key2","value2");
  MetricName n2=metrics.metricName("name","group","description",tags);
  assertEquals("metric names created in two different ways should be equal",n1,n2);
  try {
    metrics.metricName("name","group","description","key1");
    fail("Creating MetricName with an odd number of keyValue should fail");
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTimeWindowing(){
  Count count=new Count();
  MetricConfig config=new MetricConfig().timeWindow(1,TimeUnit.MILLISECONDS).samples(2);
  count.record(config,1.0,time.milliseconds());
  time.sleep(1);
  count.record(config,1.0,time.milliseconds());
  assertEquals(2.0,count.measure(config,time.milliseconds()),EPS);
  time.sleep(1);
  count.record(config,1.0,time.milliseconds());
  assertEquals(2.0,count.measure(config,time.milliseconds()),EPS);
}

</code></pre>

<br>
<pre class="type-10 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQuotas(){
  Sensor sensor=metrics.sensor("test");
  sensor.add(metrics.metricName("test1.total","grp1"),new Total(),new MetricConfig().quota(Quota.upperBound(5.0)));
  sensor.add(metrics.metricName("test2.total","grp1"),new Total(),new MetricConfig().quota(Quota.lowerBound(0.0)));
  sensor.record(5.0);
  try {
    sensor.record(1.0);
    fail("Should have gotten a quota violation.");
  }
 catch (  QuotaViolationException e) {
  }
  assertEquals(6.0,metrics.metrics().get(metrics.metricName("test1.total","grp1")).value(),EPS);
  sensor.record(-6.0);
  try {
    sensor.record(-1.0);
    fail("Should have gotten a quota violation.");
  }
 catch (  QuotaViolationException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveMetric(){
  int size=metrics.metrics().size();
  metrics.addMetric(metrics.metricName("test1","grp1"),new Count());
  metrics.addMetric(metrics.metricName("test2","grp1"),new Count());
  assertNotNull(metrics.removeMetric(metrics.metricName("test1","grp1")));
  assertNull(metrics.metrics().get(metrics.metricName("test1","grp1")));
  assertNotNull(metrics.metrics().get(metrics.metricName("test2","grp1")));
  assertNotNull(metrics.removeMetric(metrics.metricName("test2","grp1")));
  assertNull(metrics.metrics().get(metrics.metricName("test2","grp1")));
  assertEquals(size,metrics.metrics().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.metrics.stats.HistogramTest </h4><pre class="type-13 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testHistogram(){
  BinScheme scheme=new ConstantBinScheme(12,-5,5);
  Histogram hist=new Histogram(scheme);
  for (int i=-5; i < 5; i++)   hist.record(i);
  for (int i=0; i < 10; i++)   assertEquals(scheme.fromBin(i + 1),hist.value(i / 10.0 + EPS),EPS);
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConstantBinScheme(){
  ConstantBinScheme scheme=new ConstantBinScheme(5,-5,5);
  assertEquals("A value below the lower bound should map to the first bin",0,scheme.toBin(-5.01));
  assertEquals("A value above the upper bound should map to the last bin",4,scheme.toBin(5.01));
  assertEquals("Check boundary of bucket 1",1,scheme.toBin(-5));
  assertEquals("Check boundary of bucket 4",4,scheme.toBin(5));
  assertEquals("Check boundary of bucket 3",3,scheme.toBin(4.9999));
  checkBinningConsistency(new ConstantBinScheme(4,0,5));
  checkBinningConsistency(scheme);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.network.SelectorTest </h4><pre class="type-8 type-13 type-14 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Send multiple requests to several connections in parallel. Validate that responses are received in the order that
 * requests were sent.
 */
@Test public void testNormalOperation() throws Exception {
  int conns=5;
  int reqs=500;
  InetSocketAddress addr=new InetSocketAddress("localhost",server.port);
  for (int i=0; i < conns; i++)   connect(Integer.toString(i),addr);
  Map<String,Integer> requests=new HashMap<String,Integer>();
  Map<String,Integer> responses=new HashMap<String,Integer>();
  int responseCount=0;
  for (int i=0; i < conns; i++) {
    String node=Integer.toString(i);
    selector.send(createSend(node,node + "-0"));
  }
  while (responseCount < conns * reqs) {
    selector.poll(0L);
    assertEquals("No disconnects should have occurred.",0,selector.disconnected().size());
    for (    NetworkReceive receive : selector.completedReceives()) {
      String[] pieces=asString(receive).split("-");
      assertEquals("Should be in the form 'conn-counter'",2,pieces.length);
      assertEquals("Check the source",receive.source(),pieces[0]);
      assertEquals("Check that the receive has kindly been rewound",0,receive.payload().position());
      if (responses.containsKey(receive.source())) {
        assertEquals("Check the request counter",(int)responses.get(receive.source()),Integer.parseInt(pieces[1]));
        responses.put(receive.source(),responses.get(receive.source()) + 1);
      }
 else {
        assertEquals("Check the request counter",0,Integer.parseInt(pieces[1]));
        responses.put(receive.source(),1);
      }
      responseCount++;
    }
    for (    Send send : selector.completedSends()) {
      String dest=send.destination();
      if (requests.containsKey(dest))       requests.put(dest,requests.get(dest) + 1);
 else       requests.put(dest,1);
      if (requests.get(dest) < reqs)       selector.send(createSend(dest,dest + "-" + requests.get(dest)));
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMute() throws Exception {
  blockingConnect("0");
  blockingConnect("1");
  selector.send(createSend("0","hello"));
  selector.send(createSend("1","hi"));
  selector.mute("1");
  while (selector.completedReceives().isEmpty())   selector.poll(5);
  assertEquals("We should have only one response",1,selector.completedReceives().size());
  assertEquals("The response should not be from the muted node","0",selector.completedReceives().get(0).source());
  selector.unmute("1");
  do {
    selector.poll(5);
  }
 while (selector.completedReceives().isEmpty());
  assertEquals("We should have only one response",1,selector.completedReceives().size());
  assertEquals("The response should be from the previously muted node","1",selector.completedReceives().get(0).source());
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCloseOldestConnection() throws Exception {
  String id="0";
  blockingConnect(id);
  time.sleep(6000);
  selector.poll(0);
  assertTrue("The idle connection should have been closed",selector.disconnected().contains(id));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.network.SslSelectorTest </h4><pre class="type-8 type-13 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Tests that SSL renegotiation initiated by the server are handled correctly by the client
 * @throws Exception
 */
@Test public void testRenegotiation() throws Exception {
  ChannelBuilder channelBuilder=new SslChannelBuilder(Mode.CLIENT){
    @Override protected SslTransportLayer buildTransportLayer(    SslFactory sslFactory,    String id,    SelectionKey key) throws IOException {
      SocketChannel socketChannel=(SocketChannel)key.channel();
      SslTransportLayer transportLayer=new SslTransportLayer(id,key,sslFactory.createSslEngine(socketChannel.socket().getInetAddress().getHostName(),socketChannel.socket().getPort()),true);
      transportLayer.startHandshake();
      return transportLayer;
    }
  }
;
  channelBuilder.configure(sslClientConfigs);
  Selector selector=new Selector(5000,metrics,time,"MetricGroup2",channelBuilder);
  try {
    int reqs=500;
    String node="0";
    InetSocketAddress addr=new InetSocketAddress("localhost",server.port);
    selector.connect(node,addr,BUFFER_SIZE,BUFFER_SIZE);
    int requests=0;
    int responses=0;
    int renegotiates=0;
    while (!selector.isChannelReady(node)) {
      selector.poll(1000L);
    }
    selector.send(createSend(node,node + "-" + 0));
    requests++;
    while (responses < reqs) {
      selector.poll(0L);
      if (responses >= 100 && renegotiates == 0) {
        renegotiates++;
        server.renegotiate();
      }
      assertEquals("No disconnects should have occurred.",0,selector.disconnected().size());
      for (      NetworkReceive receive : selector.completedReceives()) {
        String[] pieces=asString(receive).split("-");
        assertEquals("Should be in the form 'conn-counter'",2,pieces.length);
        assertEquals("Check the source",receive.source(),pieces[0]);
        assertEquals("Check that the receive has kindly been rewound",0,receive.payload().position());
        assertEquals("Check the request counter",responses,Integer.parseInt(pieces[1]));
        responses++;
      }
      for (int i=0; i < selector.completedSends().size() && requests < reqs && selector.isChannelReady(node); i++, requests++) {
        selector.send(createSend(node,node + "-" + requests));
      }
    }
  }
  finally {
    selector.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.record.MemoryRecordsTest </h4><pre class="type-8 type-13 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIterator(){
  MemoryRecords recs1=MemoryRecords.emptyRecords(ByteBuffer.allocate(1024),compression);
  MemoryRecords recs2=MemoryRecords.emptyRecords(ByteBuffer.allocate(1024),compression);
  List<Record> list=Arrays.asList(new Record("a".getBytes(),"1".getBytes()),new Record("b".getBytes(),"2".getBytes()),new Record("c".getBytes(),"3".getBytes()));
  for (int i=0; i < list.size(); i++) {
    Record r=list.get(i);
    recs1.append(i,r);
    recs2.append(i,toArray(r.key()),toArray(r.value()));
  }
  recs1.close();
  recs2.close();
  for (int iteration=0; iteration < 2; iteration++) {
    for (    MemoryRecords recs : Arrays.asList(recs1,recs2)) {
      Iterator<LogEntry> iter=recs.iterator();
      for (int i=0; i < list.size(); i++) {
        assertTrue(iter.hasNext());
        LogEntry entry=iter.next();
        assertEquals((long)i,entry.offset());
        assertEquals(list.get(i),entry.record());
        entry.record().ensureValid();
      }
      assertFalse(iter.hasNext());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.record.RecordTest </h4><pre class="type-14 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFields(){
  assertEquals(compression,record.compressionType());
  assertEquals(key != null,record.hasKey());
  assertEquals(key,record.key());
  if (key != null)   assertEquals(key.limit(),record.keySize());
  assertEquals(Record.CURRENT_MAGIC_VALUE,record.magic());
  assertEquals(value,record.value());
  if (value != null)   assertEquals(value.limit(),record.valueSize());
}

</code></pre>

<br>
<pre class="type-8 type-13 type-10 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChecksum(){
  assertEquals(record.checksum(),record.computeChecksum());
  assertEquals(record.checksum(),Record.computeChecksum(this.key == null ? null : this.key.array(),this.value == null ? null : this.value.array(),this.compression,0,-1));
  assertTrue(record.isValid());
  for (int i=Record.CRC_OFFSET + Record.CRC_LENGTH; i < record.size(); i++) {
    Record copy=copyOf(record);
    copy.buffer().put(i,(byte)69);
    assertFalse(copy.isValid());
    try {
      copy.ensureValid();
      fail("Should fail the above test.");
    }
 catch (    InvalidRecordException e) {
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.requests.RequestResponseTest </h4><pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testControlledShutdownResponse(){
  ControlledShutdownResponse response=createControlledShutdownResponse();
  ByteBuffer buffer=ByteBuffer.allocate(response.sizeOf());
  response.writeTo(buffer);
  buffer.rewind();
  ControlledShutdownResponse deserialized=ControlledShutdownResponse.parse(buffer);
  assertEquals(response.errorCode(),deserialized.errorCode());
  assertEquals(response.partitionsRemaining(),deserialized.partitionsRemaining());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void fetchResponseVersionTest(){
  Map<TopicPartition,FetchResponse.PartitionData> responseData=new HashMap<TopicPartition,FetchResponse.PartitionData>();
  responseData.put(new TopicPartition("test",0),new FetchResponse.PartitionData(Errors.NONE.code(),1000000,ByteBuffer.allocate(10)));
  FetchResponse v0Response=new FetchResponse(responseData);
  FetchResponse v1Response=new FetchResponse(responseData,10);
  assertEquals("Throttle time must be zero",0,v0Response.getThrottleTime());
  assertEquals("Throttle time must be 10",10,v1Response.getThrottleTime());
  assertEquals("Should use schema version 0",ProtoUtils.responseSchema(ApiKeys.FETCH.id,0),v0Response.toStruct().schema());
  assertEquals("Should use schema version 1",ProtoUtils.responseSchema(ApiKeys.FETCH.id,1),v1Response.toStruct().schema());
  assertEquals("Response data does not match",responseData,v0Response.responseData());
  assertEquals("Response data does not match",responseData,v1Response.responseData());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void produceResponseVersionTest(){
  Map<TopicPartition,ProduceResponse.PartitionResponse> responseData=new HashMap<TopicPartition,ProduceResponse.PartitionResponse>();
  responseData.put(new TopicPartition("test",0),new ProduceResponse.PartitionResponse(Errors.NONE.code(),10000));
  ProduceResponse v0Response=new ProduceResponse(responseData);
  ProduceResponse v1Response=new ProduceResponse(responseData,10);
  assertEquals("Throttle time must be zero",0,v0Response.getThrottleTime());
  assertEquals("Throttle time must be 10",10,v1Response.getThrottleTime());
  assertEquals("Should use schema version 0",ProtoUtils.responseSchema(ApiKeys.PRODUCE.id,0),v0Response.toStruct().schema());
  assertEquals("Should use schema version 1",ProtoUtils.responseSchema(ApiKeys.PRODUCE.id,1),v1Response.toStruct().schema());
  assertEquals("Response data does not match",responseData,v0Response.responses());
  assertEquals("Response data does not match",responseData,v1Response.responses());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.security.auth.KafkaPrincipalTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPrincipalNameCanContainSeparator(){
  String name="name" + KafkaPrincipal.SEPARATOR + "with"+ KafkaPrincipal.SEPARATOR+ "in"+ KafkaPrincipal.SEPARATOR+ "it";
  KafkaPrincipal principal=KafkaPrincipal.fromString(KafkaPrincipal.USER_TYPE + KafkaPrincipal.SEPARATOR + name);
  Assert.assertEquals(KafkaPrincipal.USER_TYPE,principal.getPrincipalType());
  Assert.assertEquals(name,principal.getName());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEqualsAndHashCode(){
  String name="KafkaUser";
  KafkaPrincipal principal1=new KafkaPrincipal(KafkaPrincipal.USER_TYPE,name);
  KafkaPrincipal principal2=new KafkaPrincipal(KafkaPrincipal.USER_TYPE,name);
  Assert.assertEquals(principal1.hashCode(),principal2.hashCode());
  Assert.assertEquals(principal1,principal2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.security.kerberos.KerberosNameTest </h4><pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testParse() throws IOException {
  List<String> rules=new ArrayList<>(Arrays.asList("RULE:[1:$1](App\\..*)s/App\\.(.*)/$1/g","RULE:[2:$1](App\\..*)s/App\\.(.*)/$1/g","DEFAULT"));
  KerberosShortNamer shortNamer=KerberosShortNamer.fromUnparsedRules("REALM.COM",rules);
  KerberosName name=KerberosName.parse("App.service-name/example.com@REALM.COM");
  assertEquals("App.service-name",name.serviceName());
  assertEquals("example.com",name.hostName());
  assertEquals("REALM.COM",name.realm());
  assertEquals("service-name",shortNamer.shortName(name));
  name=KerberosName.parse("App.service-name@REALM.COM");
  assertEquals("App.service-name",name.serviceName());
  assertNull(name.hostName());
  assertEquals("REALM.COM",name.realm());
  assertEquals("service-name",shortNamer.shortName(name));
  name=KerberosName.parse("user/host@REALM.COM");
  assertEquals("user",name.serviceName());
  assertEquals("host",name.hostName());
  assertEquals("REALM.COM",name.realm());
  assertEquals("user",shortNamer.shortName(name));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.security.ssl.SslFactoryTest </h4><pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSslFactoryConfiguration() throws Exception {
  File trustStoreFile=File.createTempFile("truststore",".jks");
  Map<String,Object> serverSslConfig=TestSslUtils.createSslConfig(false,true,Mode.SERVER,trustStoreFile,"server");
  SslFactory sslFactory=new SslFactory(Mode.SERVER);
  sslFactory.configure(serverSslConfig);
  SSLEngine engine=sslFactory.createSslEngine("localhost",0);
  assertNotNull(engine);
  String[] expectedProtocols={"TLSv1.2"};
  assertArrayEquals(expectedProtocols,engine.getEnabledProtocols());
  assertEquals(false,engine.getUseClientMode());
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testClientMode() throws Exception {
  File trustStoreFile=File.createTempFile("truststore",".jks");
  Map<String,Object> clientSslConfig=TestSslUtils.createSslConfig(false,true,Mode.CLIENT,trustStoreFile,"client");
  SslFactory sslFactory=new SslFactory(Mode.CLIENT);
  sslFactory.configure(clientSslConfig);
  SSLEngine engine=sslFactory.createSslEngine("localhost",0);
  assertTrue(engine.getUseClientMode());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.serialization.SerializationTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIntegerSerializer(){
  Integer[] integers=new Integer[]{423412424,-41243432};
  String mytopic="testTopic";
  Serializer<Integer> serializer=new IntegerSerializer();
  Deserializer<Integer> deserializer=new IntegerDeserializer();
  for (  Integer integer : integers) {
    assertEquals("Should get the original integer after serialization and deserialization",integer,deserializer.deserialize(mytopic,serializer.serialize(mytopic,integer)));
  }
  assertEquals("Should support null in serialization and deserialization",null,deserializer.deserialize(mytopic,serializer.serialize(mytopic,null)));
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testStringSerializer(){
  String str="my string";
  String mytopic="testTopic";
  List<String> encodings=new ArrayList<String>();
  encodings.add("UTF8");
  encodings.add("UTF-16");
  for (  String encoding : encodings) {
    SerDeser<String> serDeser=getStringSerDeser(encoding);
    Serializer<String> serializer=serDeser.serializer;
    Deserializer<String> deserializer=serDeser.deserializer;
    assertEquals("Should get the original string after serialization and deserialization with encoding " + encoding,str,deserializer.deserialize(mytopic,serializer.serialize(mytopic,str)));
    assertEquals("Should support null in serialization and deserialization with encoding " + encoding,null,deserializer.deserialize(mytopic,serializer.serialize(mytopic,null)));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.utils.AbstractIteratorTest </h4><pre class="type-13 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIterator(){
  int max=10;
  List<Integer> l=new ArrayList<Integer>();
  for (int i=0; i < max; i++)   l.add(i);
  ListIterator<Integer> iter=new ListIterator<Integer>(l);
  for (int i=0; i < max; i++) {
    Integer value=i;
    assertEquals(value,iter.peek());
    assertTrue(iter.hasNext());
    assertEquals(value,iter.next());
  }
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.utils.CrcTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUpdateInt(){
  final int value=1000;
  final ByteBuffer buffer=ByteBuffer.allocate(4);
  buffer.putInt(value);
  Crc32 crc1=new Crc32();
  Crc32 crc2=new Crc32();
  crc1.updateInt(value);
  crc2.update(buffer.array(),buffer.arrayOffset(),4);
  assertEquals("Crc values should be the same",crc1.getValue(),crc2.getValue());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUpdate(){
  final byte[] bytes="Any String you want".getBytes();
  final int len=bytes.length;
  Crc32 crc1=new Crc32();
  Crc32 crc2=new Crc32();
  Crc32 crc3=new Crc32();
  crc1.update(bytes,0,len);
  for (int i=0; i < len; i++)   crc2.update(bytes[i]);
  crc3.update(bytes,0,len / 2);
  crc3.update(bytes,len / 2,len - len / 2);
  assertEquals("Crc values should be the same",crc1.getValue(),crc2.getValue());
  assertEquals("Crc values should be the same",crc1.getValue(),crc3.getValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.connector.ConnectorReconfigurationTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefaultReconfigure() throws Exception {
  TestConnector conn=new TestConnector(false);
  conn.reconfigure(Collections.<String,String>emptyMap());
  assertEquals(conn.stopOrder,0);
  assertEquals(conn.configureOrder,1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.data.ConnectSchemaTest </h4><pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFieldsOnStructSchema(){
  Schema schema=SchemaBuilder.struct().field("foo",Schema.BOOLEAN_SCHEMA).field("bar",Schema.INT32_SCHEMA).build();
  assertEquals(2,schema.fields().size());
  Field foo=schema.field("foo");
  assertEquals(0,foo.index());
  Field bar=schema.field("bar");
  assertEquals(1,bar.index());
  assertNull(schema.field("other"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.data.DateTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBuilder(){
  Schema plain=Date.SCHEMA;
  assertEquals(Date.LOGICAL_NAME,plain.name());
  assertEquals(1,(Object)plain.version());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.data.DecimalTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBuilder(){
  Schema plain=Decimal.builder(2).build();
  assertEquals(Decimal.LOGICAL_NAME,plain.name());
  assertEquals(Collections.singletonMap(Decimal.SCALE_FIELD,"2"),plain.parameters());
  assertEquals(1,(Object)plain.version());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.data.SchemaBuilderTest </h4><pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMapBuilder(){
  Schema schema=SchemaBuilder.map(Schema.INT8_SCHEMA,Schema.INT8_SCHEMA).build();
  assertTypeAndDefault(schema,Schema.Type.MAP,false,null);
  assertEquals(schema.keySchema(),Schema.INT8_SCHEMA);
  assertEquals(schema.valueSchema(),Schema.INT8_SCHEMA);
  assertNoMetadata(schema);
  Map<Byte,Byte> defMap=Collections.singletonMap((byte)5,(byte)10);
  schema=SchemaBuilder.map(Schema.INT8_SCHEMA,Schema.INT8_SCHEMA).defaultValue(defMap).build();
  assertTypeAndDefault(schema,Schema.Type.MAP,false,defMap);
  assertEquals(schema.keySchema(),Schema.INT8_SCHEMA);
  assertEquals(schema.valueSchema(),Schema.INT8_SCHEMA);
  assertNoMetadata(schema);
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStructBuilder(){
  Schema schema=SchemaBuilder.struct().field("field1",Schema.INT8_SCHEMA).field("field2",Schema.INT8_SCHEMA).build();
  assertTypeAndDefault(schema,Schema.Type.STRUCT,false,null);
  assertEquals(2,schema.fields().size());
  assertEquals("field1",schema.fields().get(0).name());
  assertEquals(0,schema.fields().get(0).index());
  assertEquals(Schema.INT8_SCHEMA,schema.fields().get(0).schema());
  assertEquals("field2",schema.fields().get(1).name());
  assertEquals(1,schema.fields().get(1).index());
  assertEquals(Schema.INT8_SCHEMA,schema.fields().get(1).schema());
  assertNoMetadata(schema);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.data.SchemaProjectorTest </h4><pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStructDefaultValue() throws Exception {
  Schema source=SchemaBuilder.struct().optional().field("field",Schema.INT32_SCHEMA).field("field2",Schema.INT32_SCHEMA).build();
  SchemaBuilder builder=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).field("field2",Schema.INT32_SCHEMA);
  Struct defaultStruct=new Struct(builder).put("field",12).put("field2",345);
  builder.defaultValue(defaultStruct);
  Schema target=builder.build();
  Object projected=SchemaProjector.project(source,null,target);
  assertEquals(defaultStruct,projected);
  Struct sourceStruct=new Struct(source).put("field",45).put("field2",678);
  Struct targetStruct=(Struct)SchemaProjector.project(source,sourceStruct,target);
  assertEquals(sourceStruct.get("field"),targetStruct.get("field"));
  assertEquals(sourceStruct.get("field2"),targetStruct.get("field2"));
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNestedSchemaProjection() throws Exception {
  Schema sourceFlatSchema=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).build();
  Schema targetFlatSchema=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).field("field2",SchemaBuilder.int32().defaultValue(123).build()).build();
  Schema sourceNestedSchema=SchemaBuilder.struct().field("first",Schema.INT32_SCHEMA).field("second",Schema.STRING_SCHEMA).field("array",SchemaBuilder.array(Schema.INT32_SCHEMA).build()).field("map",SchemaBuilder.map(Schema.INT32_SCHEMA,Schema.STRING_SCHEMA).build()).field("nested",sourceFlatSchema).build();
  Schema targetNestedSchema=SchemaBuilder.struct().field("first",Schema.INT32_SCHEMA).field("second",Schema.STRING_SCHEMA).field("array",SchemaBuilder.array(Schema.INT32_SCHEMA).build()).field("map",SchemaBuilder.map(Schema.INT32_SCHEMA,Schema.STRING_SCHEMA).build()).field("nested",targetFlatSchema).build();
  Struct sourceFlatStruct=new Struct(sourceFlatSchema);
  sourceFlatStruct.put("field",113);
  Struct sourceNestedStruct=new Struct(sourceNestedSchema);
  sourceNestedStruct.put("first",1);
  sourceNestedStruct.put("second","abc");
  sourceNestedStruct.put("array",Arrays.asList(1,2));
  sourceNestedStruct.put("map",Collections.singletonMap(5,"def"));
  sourceNestedStruct.put("nested",sourceFlatStruct);
  Struct targetNestedStruct=(Struct)SchemaProjector.project(sourceNestedSchema,sourceNestedStruct,targetNestedSchema);
  assertEquals(1,targetNestedStruct.get("first"));
  assertEquals("abc",targetNestedStruct.get("second"));
  assertEquals(Arrays.asList(1,2),(List<Integer>)targetNestedStruct.get("array"));
  assertEquals(Collections.singletonMap(5,"def"),(Map<Integer,String>)targetNestedStruct.get("map"));
  Struct projectedStruct=(Struct)targetNestedStruct.get("nested");
  assertEquals(113,projectedStruct.get("field"));
  assertEquals(123,projectedStruct.get("field2"));
}

</code></pre>

<br>
<pre class="type-8 type-10 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStructRemoveField() throws Exception {
  Schema source=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).field("field2",Schema.INT32_SCHEMA).build();
  Struct sourceStruct=new Struct(source);
  sourceStruct.put("field",1);
  sourceStruct.put("field2",234);
  Schema target=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).build();
  Struct targetStruct=(Struct)SchemaProjector.project(source,sourceStruct,target);
  assertEquals(1,targetStruct.get("field"));
  try {
    targetStruct.get("field2");
    fail("field2 is not part of the projected struct");
  }
 catch (  DataException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-10 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStructAddField() throws Exception {
  Schema source=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).build();
  Struct sourceStruct=new Struct(source);
  sourceStruct.put("field",1);
  Schema target=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).field("field2",SchemaBuilder.int32().defaultValue(123).build()).build();
  Struct targetStruct=(Struct)SchemaProjector.project(source,sourceStruct,target);
  assertEquals(1,(int)targetStruct.getInt32("field"));
  assertEquals(123,(int)targetStruct.getInt32("field2"));
  Schema incompatibleTargetSchema=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).field("field2",Schema.INT32_SCHEMA).build();
  try {
    SchemaProjector.project(source,sourceStruct,incompatibleTargetSchema);
    fail("Incompatible schema.");
  }
 catch (  DataException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.data.StructTest </h4><pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testComplexStruct(){
  List<Byte> array=Arrays.asList((byte)1,(byte)2);
  Map<Integer,String> map=Collections.singletonMap(1,"string");
  Struct struct=new Struct(NESTED_SCHEMA).put("array",array).put("map",map).put("nested",new Struct(NESTED_CHILD_SCHEMA).put("int8",(byte)12));
  List<Byte> arrayExtracted=struct.getArray("array");
  assertEquals(array,arrayExtracted);
  Map<Byte,Byte> mapExtracted=struct.getMap("map");
  assertEquals(map,mapExtracted);
  assertEquals((byte)12,struct.getStruct("nested").get("int8"));
  struct.validate();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFlatStruct(){
  Struct struct=new Struct(FLAT_STRUCT_SCHEMA).put("int8",(byte)12).put("int16",(short)12).put("int32",12).put("int64",(long)12).put("float32",12.f).put("float64",12.).put("boolean",true).put("string","foobar").put("bytes","foobar".getBytes());
  assertEquals((byte)12,(byte)struct.getInt8("int8"));
  assertEquals((short)12,(short)struct.getInt16("int16"));
  assertEquals(12,(int)struct.getInt32("int32"));
  assertEquals((long)12,(long)struct.getInt64("int64"));
  assertEquals((Float)12.f,struct.getFloat32("float32"));
  assertEquals((Double)12.,struct.getFloat64("float64"));
  assertEquals(true,struct.getBoolean("boolean"));
  assertEquals("foobar",struct.getString("string"));
  assertEquals(ByteBuffer.wrap("foobar".getBytes()),ByteBuffer.wrap(struct.getBytes("bytes")));
  struct.validate();
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEquals(){
  Struct struct1=new Struct(FLAT_STRUCT_SCHEMA).put("int8",(byte)12).put("int16",(short)12).put("int32",12).put("int64",(long)12).put("float32",12.f).put("float64",12.).put("boolean",true).put("string","foobar").put("bytes",ByteBuffer.wrap("foobar".getBytes()));
  Struct struct2=new Struct(FLAT_STRUCT_SCHEMA).put("int8",(byte)12).put("int16",(short)12).put("int32",12).put("int64",(long)12).put("float32",12.f).put("float64",12.).put("boolean",true).put("string","foobar").put("bytes",ByteBuffer.wrap("foobar".getBytes()));
  Struct struct3=new Struct(FLAT_STRUCT_SCHEMA).put("int8",(byte)12).put("int16",(short)12).put("int32",12).put("int64",(long)12).put("float32",12.f).put("float64",12.).put("boolean",true).put("string","mismatching string").put("bytes",ByteBuffer.wrap("foobar".getBytes()));
  assertEquals(struct1,struct2);
  assertNotEquals(struct1,struct3);
  List<Byte> array=Arrays.asList((byte)1,(byte)2);
  Map<Integer,String> map=Collections.singletonMap(1,"string");
  struct1=new Struct(NESTED_SCHEMA).put("array",array).put("map",map).put("nested",new Struct(NESTED_CHILD_SCHEMA).put("int8",(byte)12));
  List<Byte> array2=Arrays.asList((byte)1,(byte)2);
  Map<Integer,String> map2=Collections.singletonMap(1,"string");
  struct2=new Struct(NESTED_SCHEMA).put("array",array2).put("map",map2).put("nested",new Struct(NESTED_CHILD_SCHEMA).put("int8",(byte)12));
  List<Byte> array3=Arrays.asList((byte)1,(byte)2,(byte)3);
  Map<Integer,String> map3=Collections.singletonMap(2,"string");
  struct3=new Struct(NESTED_SCHEMA).put("array",array3).put("map",map3).put("nested",new Struct(NESTED_CHILD_SCHEMA).put("int8",(byte)13));
  assertEquals(struct1,struct2);
  assertNotEquals(struct1,struct3);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.data.TimeTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBuilder(){
  Schema plain=Time.SCHEMA;
  assertEquals(Time.LOGICAL_NAME,plain.name());
  assertEquals(1,(Object)plain.version());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.data.TimestampTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBuilder(){
  Schema plain=Date.SCHEMA;
  assertEquals(Date.LOGICAL_NAME,plain.name());
  assertEquals(1,(Object)plain.version());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.file.FileStreamSinkConnectorTest </h4><pre class="type-13 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSinkTasks(){
  PowerMock.replayAll();
  connector.start(sinkProperties);
  List<Map<String,String>> taskConfigs=connector.taskConfigs(1);
  assertEquals(1,taskConfigs.size());
  assertEquals(FILENAME,taskConfigs.get(0).get(FileStreamSinkConnector.FILE_CONFIG));
  taskConfigs=connector.taskConfigs(2);
  assertEquals(2,taskConfigs.size());
  for (int i=0; i < 2; i++) {
    assertEquals(FILENAME,taskConfigs.get(0).get(FileStreamSinkConnector.FILE_CONFIG));
  }
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTaskClass(){
  PowerMock.replayAll();
  connector.start(sinkProperties);
  assertEquals(FileStreamSinkTask.class,connector.taskClass());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.file.FileStreamSourceConnectorTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSourceTasks(){
  PowerMock.replayAll();
  connector.start(sourceProperties);
  List<Map<String,String>> taskConfigs=connector.taskConfigs(1);
  assertEquals(1,taskConfigs.size());
  assertEquals(FILENAME,taskConfigs.get(0).get(FileStreamSourceConnector.FILE_CONFIG));
  assertEquals(SINGLE_TOPIC,taskConfigs.get(0).get(FileStreamSourceConnector.TOPIC_CONFIG));
  taskConfigs=connector.taskConfigs(2);
  assertEquals(1,taskConfigs.size());
  assertEquals(FILENAME,taskConfigs.get(0).get(FileStreamSourceConnector.FILE_CONFIG));
  assertEquals(SINGLE_TOPIC,taskConfigs.get(0).get(FileStreamSourceConnector.TOPIC_CONFIG));
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTaskClass(){
  PowerMock.replayAll();
  connector.start(sourceProperties);
  assertEquals(FileStreamSourceTask.class,connector.taskClass());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSourceTasksStdin(){
  PowerMock.replayAll();
  sourceProperties.remove(FileStreamSourceConnector.FILE_CONFIG);
  connector.start(sourceProperties);
  List<Map<String,String>> taskConfigs=connector.taskConfigs(1);
  assertEquals(1,taskConfigs.size());
  assertNull(taskConfigs.get(0).get(FileStreamSourceConnector.FILE_CONFIG));
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.file.FileStreamSourceTaskTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNormalLifecycle() throws InterruptedException, IOException {
  expectOffsetLookupReturnNone();
  replay();
  task.start(config);
  FileOutputStream os=new FileOutputStream(tempFile);
  assertEquals(null,task.poll());
  os.write("partial line".getBytes());
  os.flush();
  assertEquals(null,task.poll());
  os.write(" finished\n".getBytes());
  os.flush();
  List<SourceRecord> records=task.poll();
  assertEquals(1,records.size());
  assertEquals(TOPIC,records.get(0).topic());
  assertEquals("partial line finished",records.get(0).value());
  assertEquals(Collections.singletonMap(FileStreamSourceTask.FILENAME_FIELD,tempFile.getAbsolutePath()),records.get(0).sourcePartition());
  assertEquals(Collections.singletonMap(FileStreamSourceTask.POSITION_FIELD,22L),records.get(0).sourceOffset());
  assertEquals(null,task.poll());
  os.write("line1\rline2\r\nline3\nline4\n\r".getBytes());
  os.flush();
  records=task.poll();
  assertEquals(4,records.size());
  assertEquals("line1",records.get(0).value());
  assertEquals(Collections.singletonMap(FileStreamSourceTask.FILENAME_FIELD,tempFile.getAbsolutePath()),records.get(0).sourcePartition());
  assertEquals(Collections.singletonMap(FileStreamSourceTask.POSITION_FIELD,28L),records.get(0).sourceOffset());
  assertEquals("line2",records.get(1).value());
  assertEquals(Collections.singletonMap(FileStreamSourceTask.FILENAME_FIELD,tempFile.getAbsolutePath()),records.get(1).sourcePartition());
  assertEquals(Collections.singletonMap(FileStreamSourceTask.POSITION_FIELD,35L),records.get(1).sourceOffset());
  assertEquals("line3",records.get(2).value());
  assertEquals(Collections.singletonMap(FileStreamSourceTask.FILENAME_FIELD,tempFile.getAbsolutePath()),records.get(2).sourcePartition());
  assertEquals(Collections.singletonMap(FileStreamSourceTask.POSITION_FIELD,41L),records.get(2).sourceOffset());
  assertEquals("line4",records.get(3).value());
  assertEquals(Collections.singletonMap(FileStreamSourceTask.FILENAME_FIELD,tempFile.getAbsolutePath()),records.get(3).sourcePartition());
  assertEquals(Collections.singletonMap(FileStreamSourceTask.POSITION_FIELD,47L),records.get(3).sourceOffset());
  os.write("subsequent text".getBytes());
  os.flush();
  records=task.poll();
  assertEquals(1,records.size());
  assertEquals("",records.get(0).value());
  assertEquals(Collections.singletonMap(FileStreamSourceTask.FILENAME_FIELD,tempFile.getAbsolutePath()),records.get(0).sourcePartition());
  assertEquals(Collections.singletonMap(FileStreamSourceTask.POSITION_FIELD,48L),records.get(0).sourceOffset());
  task.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.json.JsonConverterTest </h4><pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void timeToJson() throws IOException {
  GregorianCalendar calendar=new GregorianCalendar(1970,Calendar.JANUARY,1,0,0,0);
  calendar.setTimeZone(TimeZone.getTimeZone("UTC"));
  calendar.add(Calendar.MILLISECOND,14400000);
  java.util.Date date=calendar.getTime();
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Time.SCHEMA,date));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"int32\", \"optional\": false, \"name\": \"org.apache.kafka.connect.data.Time\", \"version\": 1 }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  JsonNode payload=converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME);
  assertTrue(payload.isInt());
  assertEquals(14400000,payload.longValue());
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dateToJson() throws IOException {
  GregorianCalendar calendar=new GregorianCalendar(1970,Calendar.JANUARY,1,0,0,0);
  calendar.setTimeZone(TimeZone.getTimeZone("UTC"));
  calendar.add(Calendar.DATE,10000);
  java.util.Date date=calendar.getTime();
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Date.SCHEMA,date));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"int32\", \"optional\": false, \"name\": \"org.apache.kafka.connect.data.Date\", \"version\": 1 }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  JsonNode payload=converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME);
  assertTrue(payload.isInt());
  assertEquals(10000,payload.intValue());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConnectSchemaMetadataTranslation(){
  assertEquals(new SchemaAndValue(Schema.BOOLEAN_SCHEMA,true),converter.toConnectData(TOPIC,"{ \"schema\": { \"type\": \"boolean\" }, \"payload\": true }".getBytes()));
  assertEquals(new SchemaAndValue(Schema.OPTIONAL_BOOLEAN_SCHEMA,null),converter.toConnectData(TOPIC,"{ \"schema\": { \"type\": \"boolean\", \"optional\": true }, \"payload\": null }".getBytes()));
  assertEquals(new SchemaAndValue(SchemaBuilder.bool().defaultValue(true).build(),true),converter.toConnectData(TOPIC,"{ \"schema\": { \"type\": \"boolean\", \"default\": true }, \"payload\": null }".getBytes()));
  assertEquals(new SchemaAndValue(SchemaBuilder.bool().required().name("bool").version(2).doc("the documentation").parameter("foo","bar").build(),true),converter.toConnectData(TOPIC,"{ \"schema\": { \"type\": \"boolean\", \"optional\": false, \"name\": \"bool\", \"version\": 2, \"doc\": \"the documentation\", \"parameters\": { \"foo\": \"bar\" }}, \"payload\": true }".getBytes()));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void structToConnect(){
  byte[] structJson="{ \"schema\": { \"type\": \"struct\", \"fields\": [{ \"field\": \"field1\", \"type\": \"boolean\" }, { \"field\": \"field2\", \"type\": \"string\" }] }, \"payload\": { \"field1\": true, \"field2\": \"string\" } }".getBytes();
  Schema expectedSchema=SchemaBuilder.struct().field("field1",Schema.BOOLEAN_SCHEMA).field("field2",Schema.STRING_SCHEMA).build();
  Struct expected=new Struct(expectedSchema).put("field1",true).put("field2","string");
  SchemaAndValue converted=converter.toConnectData(TOPIC,structJson);
  assertEquals(new SchemaAndValue(expectedSchema,expected),converted);
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void longToJson(){
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Schema.INT64_SCHEMA,4398046511104L));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"int64\", \"optional\": false }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertEquals(4398046511104L,converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).longValue());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void arrayToJson(){
  Schema int32Array=SchemaBuilder.array(Schema.INT32_SCHEMA).build();
  JsonNode converted=parse(converter.fromConnectData(TOPIC,int32Array,Arrays.asList(1,2,3)));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"array\", \"items\": { \"type\": \"int32\", \"optional\": false }, \"optional\": false }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertEquals(JsonNodeFactory.instance.arrayNode().add(1).add(2).add(3),converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nullSchemaAndPrimitiveToJson(){
  JsonNode converted=parse(converter.fromConnectData(TOPIC,null,true));
  validateEnvelopeNullSchema(converted);
  assertTrue(converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME).isNull());
  assertEquals(true,converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).booleanValue());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void mapToJsonStringKeys(){
  Schema stringIntMap=SchemaBuilder.map(Schema.STRING_SCHEMA,Schema.INT32_SCHEMA).build();
  Map<String,Integer> input=new HashMap<>();
  input.put("key1",12);
  input.put("key2",15);
  JsonNode converted=parse(converter.fromConnectData(TOPIC,stringIntMap,input));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"map\", \"keys\": { \"type\" : \"string\", \"optional\": false }, \"values\": { \"type\" : \"int32\", \"optional\": false }, \"optional\": false }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertEquals(JsonNodeFactory.instance.objectNode().put("key1",12).put("key2",15),converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME));
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void timestampToConnect(){
  Schema schema=Timestamp.SCHEMA;
  GregorianCalendar calendar=new GregorianCalendar(1970,Calendar.JANUARY,1,0,0,0);
  calendar.setTimeZone(TimeZone.getTimeZone("UTC"));
  calendar.add(Calendar.MILLISECOND,2000000000);
  calendar.add(Calendar.MILLISECOND,2000000000);
  java.util.Date reference=calendar.getTime();
  String msg="{ \"schema\": { \"type\": \"int64\", \"name\": \"org.apache.kafka.connect.data.Timestamp\", \"version\": 1 }, \"payload\": 4000000000 }";
  SchemaAndValue schemaAndValue=converter.toConnectData(TOPIC,msg.getBytes());
  java.util.Date converted=(java.util.Date)schemaAndValue.value();
  assertEquals(schema,schemaAndValue.schema());
  assertEquals(reference,converted);
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void stringToJson(){
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Schema.STRING_SCHEMA,"test-string"));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"string\", \"optional\": false }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertEquals("test-string",converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).textValue());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void decimalToConnect(){
  Schema schema=Decimal.schema(2);
  BigDecimal reference=new BigDecimal(new BigInteger("156"),2);
  String msg="{ \"schema\": { \"type\": \"bytes\", \"name\": \"org.apache.kafka.connect.data.Decimal\", \"version\": 1, \"parameters\": { \"scale\": \"2\" } }, \"payload\": \"AJw=\" }";
  SchemaAndValue schemaAndValue=converter.toConnectData(TOPIC,msg.getBytes());
  BigDecimal converted=(BigDecimal)schemaAndValue.value();
  assertEquals(schema,schemaAndValue.schema());
  assertEquals(reference,converted);
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void intToJson(){
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Schema.INT32_SCHEMA,12));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"int32\", \"optional\": false }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertEquals(12,converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).intValue());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void timeToConnect(){
  Schema schema=Time.SCHEMA;
  GregorianCalendar calendar=new GregorianCalendar(1970,Calendar.JANUARY,1,0,0,0);
  calendar.setTimeZone(TimeZone.getTimeZone("UTC"));
  calendar.add(Calendar.MILLISECOND,14400000);
  java.util.Date reference=calendar.getTime();
  String msg="{ \"schema\": { \"type\": \"int32\", \"name\": \"org.apache.kafka.connect.data.Time\", \"version\": 1 }, \"payload\": 14400000 }";
  SchemaAndValue schemaAndValue=converter.toConnectData(TOPIC,msg.getBytes());
  java.util.Date converted=(java.util.Date)schemaAndValue.value();
  assertEquals(schema,schemaAndValue.schema());
  assertEquals(reference,converted);
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCacheSchemaToJsonConversion(){
  Cache<Schema,ObjectNode> cache=Whitebox.getInternalState(converter,"fromConnectSchemaCache");
  assertEquals(0,cache.size());
  converter.fromConnectData(TOPIC,SchemaBuilder.bool().build(),true);
  assertEquals(1,cache.size());
  converter.fromConnectData(TOPIC,SchemaBuilder.bool().build(),true);
  assertEquals(1,cache.size());
  converter.fromConnectData(TOPIC,SchemaBuilder.bool().optional().build(),true);
  assertEquals(2,cache.size());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void noSchemaToConnect(){
  Map<String,Boolean> props=Collections.singletonMap("schemas.enable",false);
  converter.configure(props,true);
  assertEquals(new SchemaAndValue(null,true),converter.toConnectData(TOPIC,"true".getBytes()));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void booleanToJson(){
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Schema.BOOLEAN_SCHEMA,true));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"boolean\", \"optional\": false }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertEquals(true,converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).booleanValue());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void noSchemaToJson(){
  Map<String,Boolean> props=Collections.singletonMap("schemas.enable",false);
  converter.configure(props,true);
  JsonNode converted=parse(converter.fromConnectData(TOPIC,null,true));
  assertTrue(converted.isBoolean());
  assertEquals(true,converted.booleanValue());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void decimalToJson() throws IOException {
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Decimal.schema(2),new BigDecimal(new BigInteger("156"),2)));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"bytes\", \"optional\": false, \"name\": \"org.apache.kafka.connect.data.Decimal\", \"version\": 1, \"parameters\": { \"scale\": \"2\" } }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertArrayEquals(new byte[]{0,-100},converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).binaryValue());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void bytesToJson() throws IOException {
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Schema.BYTES_SCHEMA,"test-string".getBytes()));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"bytes\", \"optional\": false }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertEquals(ByteBuffer.wrap("test-string".getBytes()),ByteBuffer.wrap(converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).binaryValue()));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void byteToJson(){
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Schema.INT8_SCHEMA,(byte)12));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"int8\", \"optional\": false }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertEquals(12,converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).intValue());
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void timestampToJson() throws IOException {
  GregorianCalendar calendar=new GregorianCalendar(1970,Calendar.JANUARY,1,0,0,0);
  calendar.setTimeZone(TimeZone.getTimeZone("UTC"));
  calendar.add(Calendar.MILLISECOND,2000000000);
  calendar.add(Calendar.MILLISECOND,2000000000);
  java.util.Date date=calendar.getTime();
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Timestamp.SCHEMA,date));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"int64\", \"optional\": false, \"name\": \"org.apache.kafka.connect.data.Timestamp\", \"version\": 1 }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  JsonNode payload=converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME);
  assertTrue(payload.isLong());
  assertEquals(4000000000L,payload.longValue());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nullSchemaAndMapNonStringKeysToJson(){
  Map<Object,Object> input=new HashMap<>();
  input.put("string",12);
  input.put(52,"string");
  input.put(false,true);
  JsonNode converted=parse(converter.fromConnectData(TOPIC,null,input));
  validateEnvelopeNullSchema(converted);
  assertTrue(converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME).isNull());
  assertTrue(converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).isArray());
  ArrayNode payload=(ArrayNode)converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME);
  assertEquals(3,payload.size());
  Set<JsonNode> payloadEntries=new HashSet<>();
  for (  JsonNode elem : payload)   payloadEntries.add(elem);
  assertEquals(new HashSet<>(Arrays.asList(JsonNodeFactory.instance.arrayNode().add("string").add(12),JsonNodeFactory.instance.arrayNode().add(52).add("string"),JsonNodeFactory.instance.arrayNode().add(false).add(true))),payloadEntries);
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void bytesToConnect() throws UnsupportedEncodingException {
  ByteBuffer reference=ByteBuffer.wrap("test-string".getBytes("UTF-8"));
  String msg="{ \"schema\": { \"type\": \"bytes\" }, \"payload\": \"dGVzdC1zdHJpbmc=\" }";
  SchemaAndValue schemaAndValue=converter.toConnectData(TOPIC,msg.getBytes());
  ByteBuffer converted=ByteBuffer.wrap((byte[])schemaAndValue.value());
  assertEquals(reference,converted);
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nullSchemaPrimitiveToConnect(){
  SchemaAndValue converted=converter.toConnectData(TOPIC,"{ \"schema\": null, \"payload\": null }".getBytes());
  assertEquals(SchemaAndValue.NULL,converted);
  converted=converter.toConnectData(TOPIC,"{ \"schema\": null, \"payload\": true }".getBytes());
  assertEquals(new SchemaAndValue(null,true),converted);
  converted=converter.toConnectData(TOPIC,"{ \"schema\": null, \"payload\": 12 }".getBytes());
  assertEquals(new SchemaAndValue(null,12L),converted);
  converted=converter.toConnectData(TOPIC,"{ \"schema\": null, \"payload\": 12.24 }".getBytes());
  assertEquals(new SchemaAndValue(null,12.24),converted);
  converted=converter.toConnectData(TOPIC,"{ \"schema\": null, \"payload\": \"a string\" }".getBytes());
  assertEquals(new SchemaAndValue(null,"a string"),converted);
  converted=converter.toConnectData(TOPIC,"{ \"schema\": null, \"payload\": [1, \"2\", 3] }".getBytes());
  assertEquals(new SchemaAndValue(null,Arrays.asList(1L,"2",3L)),converted);
  converted=converter.toConnectData(TOPIC,"{ \"schema\": null, \"payload\": { \"field1\": 1, \"field2\": 2} }".getBytes());
  Map<String,Long> obj=new HashMap<>();
  obj.put("field1",1L);
  obj.put("field2",2L);
  assertEquals(new SchemaAndValue(null,obj),converted);
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void longToConnect(){
  assertEquals(new SchemaAndValue(Schema.INT64_SCHEMA,12L),converter.toConnectData(TOPIC,"{ \"schema\": { \"type\": \"int64\" }, \"payload\": 12 }".getBytes()));
  assertEquals(new SchemaAndValue(Schema.INT64_SCHEMA,4398046511104L),converter.toConnectData(TOPIC,"{ \"schema\": { \"type\": \"int64\" }, \"payload\": 4398046511104 }".getBytes()));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shortToJson(){
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Schema.INT16_SCHEMA,(short)12));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"int16\", \"optional\": false }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertEquals(12,converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).intValue());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void structToJson(){
  Schema schema=SchemaBuilder.struct().field("field1",Schema.BOOLEAN_SCHEMA).field("field2",Schema.STRING_SCHEMA).field("field3",Schema.STRING_SCHEMA).field("field4",Schema.BOOLEAN_SCHEMA).build();
  Struct input=new Struct(schema).put("field1",true).put("field2","string2").put("field3","string3").put("field4",false);
  JsonNode converted=parse(converter.fromConnectData(TOPIC,schema,input));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"struct\", \"optional\": false, \"fields\": [{ \"field\": \"field1\", \"type\": \"boolean\", \"optional\": false }, { \"field\": \"field2\", \"type\": \"string\", \"optional\": false }, { \"field\": \"field3\", \"type\": \"string\", \"optional\": false }, { \"field\": \"field4\", \"type\": \"boolean\", \"optional\": false }] }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertEquals(JsonNodeFactory.instance.objectNode().put("field1",true).put("field2","string2").put("field3","string3").put("field4",false),converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nullSchemaAndMapToJson(){
  Map<String,Object> input=new HashMap<>();
  input.put("key1",12);
  input.put("key2","string");
  input.put("key3",true);
  JsonNode converted=parse(converter.fromConnectData(TOPIC,null,input));
  validateEnvelopeNullSchema(converted);
  assertTrue(converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME).isNull());
  assertEquals(JsonNodeFactory.instance.objectNode().put("key1",12).put("key2","string").put("key3",true),converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void doubleToJson(){
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Schema.FLOAT64_SCHEMA,12.34));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"double\", \"optional\": false }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertEquals(12.34,converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).doubleValue(),0.001);
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCacheSchemaToConnectConversion(){
  Cache<JsonNode,Schema> cache=Whitebox.getInternalState(converter,"toConnectSchemaCache");
  assertEquals(0,cache.size());
  converter.toConnectData(TOPIC,"{ \"schema\": { \"type\": \"boolean\" }, \"payload\": true }".getBytes());
  assertEquals(1,cache.size());
  converter.toConnectData(TOPIC,"{ \"schema\": { \"type\": \"boolean\" }, \"payload\": true }".getBytes());
  assertEquals(1,cache.size());
  converter.toConnectData(TOPIC,"{ \"schema\": { \"type\": \"boolean\", \"optional\": true }, \"payload\": true }".getBytes());
  assertEquals(2,cache.size());
  converter.toConnectData(TOPIC,"{ \"schema\": { \"type\": \"boolean\", \"optional\": false }, \"payload\": true }".getBytes());
  assertEquals(3,cache.size());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testJsonSchemaMetadataTranslation(){
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Schema.BOOLEAN_SCHEMA,true));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"boolean\", \"optional\": false }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertEquals(true,converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).booleanValue());
  converted=parse(converter.fromConnectData(TOPIC,Schema.OPTIONAL_BOOLEAN_SCHEMA,null));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"boolean\", \"optional\": true }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertTrue(converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).isNull());
  converted=parse(converter.fromConnectData(TOPIC,SchemaBuilder.bool().defaultValue(true).build(),true));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"boolean\", \"optional\": false, \"default\": true }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertEquals(true,converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).booleanValue());
  converted=parse(converter.fromConnectData(TOPIC,SchemaBuilder.bool().required().name("bool").version(3).doc("the documentation").parameter("foo","bar").build(),true));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"boolean\", \"optional\": false, \"name\": \"bool\", \"version\": 3, \"doc\": \"the documentation\", \"parameters\": { \"foo\": \"bar\" }}"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertEquals(true,converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).booleanValue());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void mapToJsonNonStringKeys(){
  Schema intIntMap=SchemaBuilder.map(Schema.INT32_SCHEMA,Schema.INT32_SCHEMA).build();
  Map<Integer,Integer> input=new HashMap<>();
  input.put(1,12);
  input.put(2,15);
  JsonNode converted=parse(converter.fromConnectData(TOPIC,intIntMap,input));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"map\", \"keys\": { \"type\" : \"int32\", \"optional\": false }, \"values\": { \"type\" : \"int32\", \"optional\": false }, \"optional\": false }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertTrue(converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).isArray());
  ArrayNode payload=(ArrayNode)converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME);
  assertEquals(2,payload.size());
  Set<JsonNode> payloadEntries=new HashSet<>();
  for (  JsonNode elem : payload)   payloadEntries.add(elem);
  assertEquals(new HashSet<>(Arrays.asList(JsonNodeFactory.instance.arrayNode().add(1).add(12),JsonNodeFactory.instance.arrayNode().add(2).add(15))),payloadEntries);
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void dateToConnect(){
  Schema schema=Date.SCHEMA;
  GregorianCalendar calendar=new GregorianCalendar(1970,Calendar.JANUARY,1,0,0,0);
  calendar.setTimeZone(TimeZone.getTimeZone("UTC"));
  calendar.add(Calendar.DATE,10000);
  java.util.Date reference=calendar.getTime();
  String msg="{ \"schema\": { \"type\": \"int32\", \"name\": \"org.apache.kafka.connect.data.Date\", \"version\": 1 }, \"payload\": 10000 }";
  SchemaAndValue schemaAndValue=converter.toConnectData(TOPIC,msg.getBytes());
  java.util.Date converted=(java.util.Date)schemaAndValue.value();
  assertEquals(schema,schemaAndValue.schema());
  assertEquals(reference,converted);
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void booleanToConnect(){
  assertEquals(new SchemaAndValue(Schema.BOOLEAN_SCHEMA,true),converter.toConnectData(TOPIC,"{ \"schema\": { \"type\": \"boolean\" }, \"payload\": true }".getBytes()));
  assertEquals(new SchemaAndValue(Schema.BOOLEAN_SCHEMA,false),converter.toConnectData(TOPIC,"{ \"schema\": { \"type\": \"boolean\" }, \"payload\": false }".getBytes()));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void floatToJson(){
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Schema.FLOAT32_SCHEMA,12.34f));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"float\", \"optional\": false }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertEquals(12.34f,converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).floatValue(),0.001);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nullSchemaAndArrayToJson(){
  JsonNode converted=parse(converter.fromConnectData(TOPIC,null,Arrays.asList(1,"string",true)));
  validateEnvelopeNullSchema(converted);
  assertTrue(converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME).isNull());
  assertEquals(JsonNodeFactory.instance.arrayNode().add(1).add("string").add(true),converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.runtime.WorkerSinkTaskThreadedTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCommitTaskFlushFailure() throws Exception {
  expectInitializeTask();
  expectPollInitialAssignment();
  Capture<Collection<SinkRecord>> capturedRecords=expectPolls(WorkerConfig.OFFSET_COMMIT_INTERVAL_MS_DEFAULT);
  expectOffsetFlush(1L,new RuntimeException(),null,0,true);
  consumer.seek(TOPIC_PARTITION,FIRST_OFFSET);
  PowerMock.expectLastCall();
  consumer.seek(TOPIC_PARTITION2,FIRST_OFFSET);
  PowerMock.expectLastCall();
  consumer.seek(TOPIC_PARTITION3,FIRST_OFFSET);
  PowerMock.expectLastCall();
  expectStopTask(2);
  PowerMock.replayAll();
  workerTask.initialize(TASK_PROPS);
  workerTask.initializeAndStart();
  workerTask.iteration();
  workerTask.iteration();
  workerTask.iteration();
  assertEquals(1,workerTask.commitFailures());
  assertEquals(false,Whitebox.getInternalState(workerTask,"committing"));
  workerTask.stop();
  workerTask.awaitStop(Long.MAX_VALUE);
  workerTask.close();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCommit() throws Exception {
  expectInitializeTask();
  expectPollInitialAssignment();
  Capture<Collection<SinkRecord>> capturedRecords=expectPolls(WorkerConfig.OFFSET_COMMIT_INTERVAL_MS_DEFAULT);
  expectOffsetFlush(1L,null,null,0,true);
  expectStopTask(2);
  PowerMock.replayAll();
  workerTask.initialize(TASK_PROPS);
  workerTask.initializeAndStart();
  workerTask.iteration();
  workerTask.iteration();
  workerTask.iteration();
  assertEquals(0,workerTask.commitFailures());
  workerTask.stop();
  workerTask.awaitStop(Long.MAX_VALUE);
  workerTask.close();
  assertEquals(2,capturedRecords.getValues().size());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRewind() throws Exception {
  expectInitializeTask();
  expectPollInitialAssignment();
  final long startOffset=40L;
  final Map<TopicPartition,Long> offsets=new HashMap<>();
  expectOnePoll().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      offsets.put(TOPIC_PARTITION,startOffset);
      sinkTaskContext.getValue().offset(offsets);
      return null;
    }
  }
);
  consumer.seek(TOPIC_PARTITION,startOffset);
  EasyMock.expectLastCall();
  expectOnePoll().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      Map<TopicPartition,Long> offsets=sinkTaskContext.getValue().offsets();
      assertEquals(0,offsets.size());
      return null;
    }
  }
);
  expectStopTask(3);
  PowerMock.replayAll();
  workerTask.initialize(TASK_PROPS);
  workerTask.initializeAndStart();
  workerTask.iteration();
  workerTask.iteration();
  workerTask.iteration();
  workerTask.stop();
  workerTask.awaitStop(Long.MAX_VALUE);
  workerTask.close();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCommitConsumerFailure() throws Exception {
  expectInitializeTask();
  expectPollInitialAssignment();
  Capture<Collection<SinkRecord>> capturedRecords=expectPolls(WorkerConfig.OFFSET_COMMIT_INTERVAL_MS_DEFAULT);
  expectOffsetFlush(1L,null,new Exception(),0,true);
  expectStopTask(2);
  PowerMock.replayAll();
  workerTask.initialize(TASK_PROPS);
  workerTask.initializeAndStart();
  workerTask.iteration();
  workerTask.iteration();
  workerTask.iteration();
  assertEquals(1,workerTask.commitFailures());
  assertEquals(false,Whitebox.getInternalState(workerTask,"committing"));
  workerTask.stop();
  workerTask.awaitStop(Long.MAX_VALUE);
  workerTask.close();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCommitTimeout() throws Exception {
  expectInitializeTask();
  expectPollInitialAssignment();
  Capture<Collection<SinkRecord>> capturedRecords=expectPolls(WorkerConfig.OFFSET_COMMIT_INTERVAL_MS_DEFAULT / 2);
  expectOffsetFlush(2L,null,null,WorkerConfig.OFFSET_COMMIT_TIMEOUT_MS_DEFAULT,false);
  expectStopTask(4);
  PowerMock.replayAll();
  workerTask.initialize(TASK_PROPS);
  workerTask.initializeAndStart();
  workerTask.iteration();
  workerTask.iteration();
  workerTask.iteration();
  workerTask.iteration();
  workerTask.iteration();
  assertEquals(1,workerTask.commitFailures());
  assertEquals(false,Whitebox.getInternalState(workerTask,"committing"));
  workerTask.stop();
  workerTask.awaitStop(Long.MAX_VALUE);
  workerTask.close();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCommitTaskSuccessAndFlushFailure() throws Exception {
  expectInitializeTask();
  expectPollInitialAssignment();
  Capture<Collection<SinkRecord>> capturedRecords=expectPolls(WorkerConfig.OFFSET_COMMIT_INTERVAL_MS_DEFAULT);
  expectOffsetFlush(1L,null,null,0,true);
  expectOffsetFlush(2L,new RuntimeException(),null,0,true);
  consumer.seek(TOPIC_PARTITION,FIRST_OFFSET + 1);
  PowerMock.expectLastCall();
  consumer.seek(TOPIC_PARTITION2,FIRST_OFFSET);
  PowerMock.expectLastCall();
  consumer.seek(TOPIC_PARTITION3,FIRST_OFFSET);
  PowerMock.expectLastCall();
  expectStopTask(2);
  PowerMock.replayAll();
  workerTask.initialize(TASK_PROPS);
  workerTask.initializeAndStart();
  workerTask.iteration();
  workerTask.iteration();
  workerTask.iteration();
  workerTask.iteration();
  assertEquals(1,workerTask.commitFailures());
  assertEquals(false,Whitebox.getInternalState(workerTask,"committing"));
  workerTask.stop();
  workerTask.awaitStop(Long.MAX_VALUE);
  workerTask.close();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.runtime.WorkerSourceTaskTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSendRecordsConvertsData() throws Exception {
  createWorkerTask();
  List<SourceRecord> records=new ArrayList<>();
  records.add(new SourceRecord(PARTITION,OFFSET,"topic",null,KEY_SCHEMA,KEY,RECORD_SCHEMA,RECORD));
  Capture<ProducerRecord<byte[],byte[]>> sent=expectSendRecordAnyTimes();
  PowerMock.replayAll();
  Whitebox.setInternalState(workerTask,"toSend",records);
  Whitebox.invokeMethod(workerTask,"sendRecords");
  assertEquals(SERIALIZED_KEY,sent.getValue().key());
  assertEquals(SERIALIZED_RECORD,sent.getValue().value());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommitFailure() throws Exception {
  createWorkerTask();
  sourceTask.initialize(EasyMock.anyObject(SourceTaskContext.class));
  EasyMock.expectLastCall();
  sourceTask.start(EMPTY_TASK_PROPS);
  EasyMock.expectLastCall();
  final CountDownLatch pollLatch=expectPolls(1);
  expectOffsetFlush(false);
  sourceTask.stop();
  EasyMock.expectLastCall();
  expectOffsetFlush(true);
  PowerMock.replayAll();
  workerTask.initialize(EMPTY_TASK_PROPS);
  executor.submit(workerTask);
  awaitPolls(pollLatch);
  assertFalse(workerTask.commitOffsets());
  workerTask.stop();
  assertEquals(true,workerTask.awaitStop(1000));
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSlowTaskStart() throws Exception {
  createWorkerTask();
  sourceTask.initialize(EasyMock.anyObject(SourceTaskContext.class));
  EasyMock.expectLastCall();
  sourceTask.start(EMPTY_TASK_PROPS);
  EasyMock.expectLastCall().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      Utils.sleep(100);
      return null;
    }
  }
);
  sourceTask.stop();
  EasyMock.expectLastCall();
  PowerMock.replayAll();
  workerTask.initialize(EMPTY_TASK_PROPS);
  executor.submit(workerTask);
  workerTask.stop();
  assertEquals(true,workerTask.awaitStop(1000));
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPollsInBackground() throws Exception {
  createWorkerTask();
  sourceTask.initialize(EasyMock.anyObject(SourceTaskContext.class));
  EasyMock.expectLastCall();
  sourceTask.start(EMPTY_TASK_PROPS);
  EasyMock.expectLastCall();
  final CountDownLatch pollLatch=expectPolls(10);
  sourceTask.stop();
  EasyMock.expectLastCall();
  expectOffsetFlush(true);
  PowerMock.replayAll();
  workerTask.initialize(EMPTY_TASK_PROPS);
  executor.submit(workerTask);
  awaitPolls(pollLatch);
  workerTask.stop();
  assertEquals(true,workerTask.awaitStop(1000));
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommit() throws Exception {
  createWorkerTask();
  sourceTask.initialize(EasyMock.anyObject(SourceTaskContext.class));
  EasyMock.expectLastCall();
  sourceTask.start(EMPTY_TASK_PROPS);
  EasyMock.expectLastCall();
  final CountDownLatch pollLatch=expectPolls(1);
  expectOffsetFlush(true);
  sourceTask.stop();
  EasyMock.expectLastCall();
  expectOffsetFlush(true);
  PowerMock.replayAll();
  workerTask.initialize(EMPTY_TASK_PROPS);
  executor.submit(workerTask);
  awaitPolls(pollLatch);
  assertTrue(workerTask.commitOffsets());
  workerTask.stop();
  assertEquals(true,workerTask.awaitStop(1000));
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.runtime.WorkerTest </h4><pre class="type-10 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReconfigureConnectorTasks() throws Exception {
  offsetBackingStore.configure(EasyMock.anyObject(Map.class));
  EasyMock.expectLastCall();
  offsetBackingStore.start();
  EasyMock.expectLastCall();
  Connector connector=PowerMock.createMock(Connector.class);
  ConnectorContext ctx=PowerMock.createMock(ConnectorContext.class);
  PowerMock.mockStatic(Worker.class);
  PowerMock.expectPrivate(Worker.class,"instantiateConnector",new Object[]{WorkerTestConnector.class}).andReturn(connector);
  EasyMock.expect(connector.version()).andReturn("1.0");
  Map<String,String> props=new HashMap<>();
  props.put(ConnectorConfig.TOPICS_CONFIG,"foo,bar");
  props.put(ConnectorConfig.TASKS_MAX_CONFIG,"1");
  props.put(ConnectorConfig.NAME_CONFIG,CONNECTOR_ID);
  props.put(ConnectorConfig.CONNECTOR_CLASS_CONFIG,WorkerTestConnector.class.getName());
  connector.initialize(ctx);
  EasyMock.expectLastCall();
  connector.start(props);
  EasyMock.expectLastCall();
  EasyMock.<Class<? extends Task>>expect(connector.taskClass()).andReturn(TestSourceTask.class);
  Map<String,String> taskProps=new HashMap<>();
  taskProps.put("foo","bar");
  EasyMock.expect(connector.taskConfigs(2)).andReturn(Arrays.asList(taskProps,taskProps));
  connector.stop();
  EasyMock.expectLastCall();
  offsetBackingStore.stop();
  EasyMock.expectLastCall();
  PowerMock.replayAll();
  worker=new Worker(new MockTime(),config,offsetBackingStore);
  worker.start();
  ConnectorConfig config=new ConnectorConfig(props);
  assertEquals(Collections.emptySet(),worker.connectorNames());
  worker.addConnector(config,ctx);
  assertEquals(new HashSet<>(Arrays.asList(CONNECTOR_ID)),worker.connectorNames());
  try {
    worker.addConnector(config,ctx);
    fail("Should have thrown exception when trying to add connector with same name.");
  }
 catch (  ConnectException e) {
  }
  List<Map<String,String>> taskConfigs=worker.connectorTaskConfigs(CONNECTOR_ID,2,Arrays.asList("foo","bar"));
  Map<String,String> expectedTaskProps=new HashMap<>();
  expectedTaskProps.put("foo","bar");
  expectedTaskProps.put(TaskConfig.TASK_CLASS_CONFIG,TestSourceTask.class.getName());
  expectedTaskProps.put(SinkTask.TOPICS_CONFIG,"foo,bar");
  assertEquals(2,taskConfigs.size());
  assertEquals(expectedTaskProps,taskConfigs.get(0));
  assertEquals(expectedTaskProps,taskConfigs.get(1));
  worker.stopConnector(CONNECTOR_ID);
  assertEquals(Collections.emptySet(),worker.connectorNames());
  worker.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddRemoveTask() throws Exception {
  offsetBackingStore.configure(EasyMock.anyObject(Map.class));
  EasyMock.expectLastCall();
  offsetBackingStore.start();
  EasyMock.expectLastCall();
  ConnectorTaskId taskId=new ConnectorTaskId("job",0);
  TestSourceTask task=PowerMock.createMock(TestSourceTask.class);
  WorkerSourceTask workerTask=PowerMock.createMock(WorkerSourceTask.class);
  PowerMock.mockStatic(Worker.class);
  PowerMock.expectPrivate(Worker.class,"instantiateTask",new Object[]{TestSourceTask.class}).andReturn(task);
  EasyMock.expect(task.version()).andReturn("1.0");
  PowerMock.expectNew(WorkerSourceTask.class,EasyMock.eq(taskId),EasyMock.eq(task),EasyMock.anyObject(Converter.class),EasyMock.anyObject(Converter.class),EasyMock.anyObject(KafkaProducer.class),EasyMock.anyObject(OffsetStorageReader.class),EasyMock.anyObject(OffsetStorageWriter.class),EasyMock.anyObject(WorkerConfig.class),EasyMock.anyObject(Time.class)).andReturn(workerTask);
  Map<String,String> origProps=new HashMap<>();
  origProps.put(TaskConfig.TASK_CLASS_CONFIG,TestSourceTask.class.getName());
  workerTask.initialize(origProps);
  EasyMock.expectLastCall();
  workerTask.stop();
  EasyMock.expectLastCall();
  EasyMock.expect(workerTask.awaitStop(EasyMock.anyLong())).andStubReturn(true);
  EasyMock.expectLastCall();
  offsetBackingStore.stop();
  EasyMock.expectLastCall();
  PowerMock.replayAll();
  worker=new Worker(new MockTime(),config,offsetBackingStore);
  worker.start();
  assertEquals(Collections.emptySet(),worker.taskIds());
  worker.addTask(taskId,new TaskConfig(origProps));
  assertEquals(new HashSet<>(Arrays.asList(taskId)),worker.taskIds());
  worker.stopTask(taskId);
  assertEquals(Collections.emptySet(),worker.taskIds());
  worker.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddConnectorByAlias() throws Exception {
  offsetBackingStore.configure(EasyMock.anyObject(Map.class));
  EasyMock.expectLastCall();
  offsetBackingStore.start();
  EasyMock.expectLastCall();
  Connector connector=PowerMock.createMock(Connector.class);
  ConnectorContext ctx=PowerMock.createMock(ConnectorContext.class);
  PowerMock.mockStatic(Worker.class);
  PowerMock.expectPrivate(Worker.class,"instantiateConnector",new Object[]{WorkerTestConnector.class}).andReturn(connector);
  EasyMock.expect(connector.version()).andReturn("1.0");
  Map<String,String> props=new HashMap<>();
  props.put(ConnectorConfig.TOPICS_CONFIG,"foo,bar");
  props.put(ConnectorConfig.TASKS_MAX_CONFIG,"1");
  props.put(ConnectorConfig.NAME_CONFIG,CONNECTOR_ID);
  props.put(ConnectorConfig.CONNECTOR_CLASS_CONFIG,"WorkerTestConnector");
  connector.initialize(ctx);
  EasyMock.expectLastCall();
  connector.start(props);
  EasyMock.expectLastCall();
  connector.stop();
  EasyMock.expectLastCall();
  offsetBackingStore.stop();
  EasyMock.expectLastCall();
  PowerMock.replayAll();
  worker=new Worker(new MockTime(),config,offsetBackingStore);
  worker.start();
  ConnectorConfig config=new ConnectorConfig(props);
  assertEquals(Collections.emptySet(),worker.connectorNames());
  worker.addConnector(config,ctx);
  assertEquals(new HashSet<>(Arrays.asList(CONNECTOR_ID)),worker.connectorNames());
  worker.stopConnector(CONNECTOR_ID);
  assertEquals(Collections.emptySet(),worker.connectorNames());
  worker.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddConnectorByShortAlias() throws Exception {
  offsetBackingStore.configure(EasyMock.anyObject(Map.class));
  EasyMock.expectLastCall();
  offsetBackingStore.start();
  EasyMock.expectLastCall();
  Connector connector=PowerMock.createMock(Connector.class);
  ConnectorContext ctx=PowerMock.createMock(ConnectorContext.class);
  PowerMock.mockStatic(Worker.class);
  PowerMock.expectPrivate(Worker.class,"instantiateConnector",new Object[]{WorkerTestConnector.class}).andReturn(connector);
  EasyMock.expect(connector.version()).andReturn("1.0");
  Map<String,String> props=new HashMap<>();
  props.put(ConnectorConfig.TOPICS_CONFIG,"foo,bar");
  props.put(ConnectorConfig.TASKS_MAX_CONFIG,"1");
  props.put(ConnectorConfig.NAME_CONFIG,CONNECTOR_ID);
  props.put(ConnectorConfig.CONNECTOR_CLASS_CONFIG,"WorkerTest");
  connector.initialize(ctx);
  EasyMock.expectLastCall();
  connector.start(props);
  EasyMock.expectLastCall();
  connector.stop();
  EasyMock.expectLastCall();
  offsetBackingStore.stop();
  EasyMock.expectLastCall();
  PowerMock.replayAll();
  worker=new Worker(new MockTime(),config,offsetBackingStore);
  worker.start();
  ConnectorConfig config=new ConnectorConfig(props);
  assertEquals(Collections.emptySet(),worker.connectorNames());
  worker.addConnector(config,ctx);
  assertEquals(new HashSet<>(Arrays.asList(CONNECTOR_ID)),worker.connectorNames());
  worker.stopConnector(CONNECTOR_ID);
  assertEquals(Collections.emptySet(),worker.connectorNames());
  worker.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-10 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddRemoveConnector() throws Exception {
  offsetBackingStore.configure(EasyMock.anyObject(Map.class));
  EasyMock.expectLastCall();
  offsetBackingStore.start();
  EasyMock.expectLastCall();
  Connector connector=PowerMock.createMock(Connector.class);
  ConnectorContext ctx=PowerMock.createMock(ConnectorContext.class);
  PowerMock.mockStatic(Worker.class);
  PowerMock.expectPrivate(Worker.class,"instantiateConnector",new Object[]{WorkerTestConnector.class}).andReturn(connector);
  EasyMock.expect(connector.version()).andReturn("1.0");
  Map<String,String> props=new HashMap<>();
  props.put(ConnectorConfig.TOPICS_CONFIG,"foo,bar");
  props.put(ConnectorConfig.TASKS_MAX_CONFIG,"1");
  props.put(ConnectorConfig.NAME_CONFIG,CONNECTOR_ID);
  props.put(ConnectorConfig.CONNECTOR_CLASS_CONFIG,WorkerTestConnector.class.getName());
  connector.initialize(ctx);
  EasyMock.expectLastCall();
  connector.start(props);
  EasyMock.expectLastCall();
  connector.stop();
  EasyMock.expectLastCall();
  offsetBackingStore.stop();
  EasyMock.expectLastCall();
  PowerMock.replayAll();
  worker=new Worker(new MockTime(),config,offsetBackingStore);
  worker.start();
  ConnectorConfig config=new ConnectorConfig(props);
  assertEquals(Collections.emptySet(),worker.connectorNames());
  worker.addConnector(config,ctx);
  assertEquals(new HashSet<>(Arrays.asList(CONNECTOR_ID)),worker.connectorNames());
  try {
    worker.addConnector(config,ctx);
    fail("Should have thrown exception when trying to add connector with same name.");
  }
 catch (  ConnectException e) {
  }
  worker.stopConnector(CONNECTOR_ID);
  assertEquals(Collections.emptySet(),worker.connectorNames());
  worker.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.runtime.distributed.DistributedHerderTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutConnectorConfig() throws Exception {
  EasyMock.expect(member.memberId()).andStubReturn("leader");
  expectRebalance(1,Arrays.asList(CONN1),Collections.<ConnectorTaskId>emptyList());
  expectPostRebalanceCatchup(SNAPSHOT);
  worker.addConnector(EasyMock.<ConnectorConfig>anyObject(),EasyMock.<ConnectorContext>anyObject());
  PowerMock.expectLastCall();
  EasyMock.expect(worker.connectorTaskConfigs(CONN1,MAX_TASKS,null)).andReturn(TASK_CONFIGS);
  member.wakeup();
  PowerMock.expectLastCall().anyTimes();
  member.poll(EasyMock.anyInt());
  PowerMock.expectLastCall();
  member.ensureActive();
  PowerMock.expectLastCall();
  configStorage.putConnectorConfig(CONN1,CONN1_CONFIG_UPDATED);
  PowerMock.expectLastCall().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      connectorConfigCallback.onCompletion(null,CONN1);
      return null;
    }
  }
);
  EasyMock.expect(configStorage.snapshot()).andReturn(SNAPSHOT_UPDATED_CONN1_CONFIG);
  worker.stopConnector(CONN1);
  PowerMock.expectLastCall();
  Capture<ConnectorConfig> capturedUpdatedConfig=EasyMock.newCapture();
  worker.addConnector(EasyMock.capture(capturedUpdatedConfig),EasyMock.<ConnectorContext>anyObject());
  PowerMock.expectLastCall();
  EasyMock.expect(worker.connectorTaskConfigs(CONN1,MAX_TASKS,null)).andReturn(TASK_CONFIGS);
  member.poll(EasyMock.anyInt());
  PowerMock.expectLastCall();
  member.ensureActive();
  PowerMock.expectLastCall();
  member.poll(EasyMock.anyInt());
  PowerMock.expectLastCall();
  PowerMock.replayAll();
  FutureCallback<Map<String,String>> connectorConfigCb=new FutureCallback<>();
  herder.connectorConfig(CONN1,connectorConfigCb);
  herder.tick();
  assertTrue(connectorConfigCb.isDone());
  assertEquals(CONN1_CONFIG,connectorConfigCb.get());
  FutureCallback<Herder.Created<ConnectorInfo>> putConfigCb=new FutureCallback<>();
  herder.putConnectorConfig(CONN1,CONN1_CONFIG_UPDATED,true,putConfigCb);
  herder.tick();
  assertTrue(putConfigCb.isDone());
  ConnectorInfo updatedInfo=new ConnectorInfo(CONN1,CONN1_CONFIG_UPDATED,Arrays.asList(TASK0,TASK1,TASK2));
  assertEquals(new Herder.Created<>(false,updatedInfo),putConfigCb.get());
  connectorConfigCb=new FutureCallback<>();
  herder.connectorConfig(CONN1,connectorConfigCb);
  herder.tick();
  assertTrue(connectorConfigCb.isDone());
  assertEquals(CONN1_CONFIG_UPDATED,connectorConfigCb.get());
  assertEquals(Arrays.asList("foo","bar","baz"),capturedUpdatedConfig.getValue().getList(ConnectorConfig.TOPICS_CONFIG));
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessors() throws Exception {
  EasyMock.expect(member.memberId()).andStubReturn("leader");
  expectRebalance(1,Collections.<String>emptyList(),Collections.<ConnectorTaskId>emptyList());
  expectPostRebalanceCatchup(SNAPSHOT);
  member.wakeup();
  PowerMock.expectLastCall().anyTimes();
  member.poll(EasyMock.anyInt());
  PowerMock.expectLastCall();
  PowerMock.replayAll();
  FutureCallback<Collection<String>> listConnectorsCb=new FutureCallback<>();
  herder.connectors(listConnectorsCb);
  FutureCallback<ConnectorInfo> connectorInfoCb=new FutureCallback<>();
  herder.connectorInfo(CONN1,connectorInfoCb);
  FutureCallback<Map<String,String>> connectorConfigCb=new FutureCallback<>();
  herder.connectorConfig(CONN1,connectorConfigCb);
  FutureCallback<List<TaskInfo>> taskConfigsCb=new FutureCallback<>();
  herder.taskConfigs(CONN1,taskConfigsCb);
  herder.tick();
  assertTrue(listConnectorsCb.isDone());
  assertEquals(Collections.singleton(CONN1),listConnectorsCb.get());
  assertTrue(connectorInfoCb.isDone());
  ConnectorInfo info=new ConnectorInfo(CONN1,CONN1_CONFIG,Arrays.asList(TASK0,TASK1,TASK2));
  assertEquals(info,connectorInfoCb.get());
  assertTrue(connectorConfigCb.isDone());
  assertEquals(CONN1_CONFIG,connectorConfigCb.get());
  assertTrue(taskConfigsCb.isDone());
  assertEquals(Arrays.asList(new TaskInfo(TASK0,TASK_CONFIG),new TaskInfo(TASK1,TASK_CONFIG),new TaskInfo(TASK2,TASK_CONFIG)),taskConfigsCb.get());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.runtime.distributed.WorkerCoordinatorTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNormalJoinGroupFollower(){
  EasyMock.expect(configStorage.snapshot()).andReturn(configState1);
  PowerMock.replayAll();
  final String memberId="member";
  client.prepareResponse(groupMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(joinGroupFollowerResponse(1,memberId,"leader",Errors.NONE.code()));
  client.prepareResponse(new MockClient.RequestMatcher(){
    @Override public boolean matches(    ClientRequest request){
      SyncGroupRequest sync=new SyncGroupRequest(request.request().body());
      return sync.memberId().equals(memberId) && sync.generationId() == 1 && sync.groupAssignment().isEmpty();
    }
  }
,syncGroupResponse(ConnectProtocol.Assignment.NO_ERROR,"leader",1L,Collections.<String>emptyList(),Collections.singletonList(taskId0),Errors.NONE.code()));
  coordinator.ensureActiveGroup();
  assertFalse(coordinator.needRejoin());
  assertEquals(0,rebalanceListener.revokedCount);
  assertEquals(1,rebalanceListener.assignedCount);
  assertFalse(rebalanceListener.assignment.failed());
  assertEquals(1L,rebalanceListener.assignment.offset());
  assertEquals(Collections.emptyList(),rebalanceListener.assignment.connectors());
  assertEquals(Collections.singletonList(taskId0),rebalanceListener.assignment.tasks());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNormalJoinGroupLeader(){
  EasyMock.expect(configStorage.snapshot()).andReturn(configState1);
  PowerMock.replayAll();
  final String consumerId="leader";
  client.prepareResponse(groupMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  Map<String,Long> memberConfigOffsets=new HashMap<>();
  memberConfigOffsets.put("leader",1L);
  memberConfigOffsets.put("member",1L);
  client.prepareResponse(joinGroupLeaderResponse(1,consumerId,memberConfigOffsets,Errors.NONE.code()));
  client.prepareResponse(new MockClient.RequestMatcher(){
    @Override public boolean matches(    ClientRequest request){
      SyncGroupRequest sync=new SyncGroupRequest(request.request().body());
      return sync.memberId().equals(consumerId) && sync.generationId() == 1 && sync.groupAssignment().containsKey(consumerId);
    }
  }
,syncGroupResponse(ConnectProtocol.Assignment.NO_ERROR,"leader",1L,Collections.singletonList(connectorId),Collections.<ConnectorTaskId>emptyList(),Errors.NONE.code()));
  coordinator.ensureActiveGroup();
  assertFalse(coordinator.needRejoin());
  assertEquals(0,rebalanceListener.revokedCount);
  assertEquals(1,rebalanceListener.assignedCount);
  assertFalse(rebalanceListener.assignment.failed());
  assertEquals(1L,rebalanceListener.assignment.offset());
  assertEquals("leader",rebalanceListener.assignment.leader());
  assertEquals(Collections.singletonList(connectorId),rebalanceListener.assignment.connectors());
  assertEquals(Collections.emptyList(),rebalanceListener.assignment.tasks());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLeaderPerformAssignment2() throws Exception {
  EasyMock.expect(configStorage.snapshot()).andReturn(configState2);
  PowerMock.replayAll();
  coordinator.metadata();
  Map<String,ByteBuffer> configs=new HashMap<>();
  configs.put("leader",ConnectProtocol.serializeMetadata(new ConnectProtocol.WorkerState(LEADER_URL,1L)));
  configs.put("member",ConnectProtocol.serializeMetadata(new ConnectProtocol.WorkerState(MEMBER_URL,1L)));
  Map<String,ByteBuffer> result=Whitebox.invokeMethod(coordinator,"performAssignment","leader",WorkerCoordinator.DEFAULT_SUBPROTOCOL,configs);
  ConnectProtocol.Assignment leaderAssignment=ConnectProtocol.deserializeAssignment(result.get("leader"));
  assertEquals(false,leaderAssignment.failed());
  assertEquals("leader",leaderAssignment.leader());
  assertEquals(1,leaderAssignment.offset());
  assertEquals(Collections.singletonList(connectorId),leaderAssignment.connectors());
  assertEquals(Arrays.asList(taskId1,taskId2),leaderAssignment.tasks());
  ConnectProtocol.Assignment memberAssignment=ConnectProtocol.deserializeAssignment(result.get("member"));
  assertEquals(false,memberAssignment.failed());
  assertEquals("leader",memberAssignment.leader());
  assertEquals(1,memberAssignment.offset());
  assertEquals(Collections.singletonList(connectorId2),memberAssignment.connectors());
  assertEquals(Collections.singletonList(taskId0),memberAssignment.tasks());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLeaderPerformAssignment1() throws Exception {
  EasyMock.expect(configStorage.snapshot()).andReturn(configState1);
  PowerMock.replayAll();
  coordinator.metadata();
  Map<String,ByteBuffer> configs=new HashMap<>();
  configs.put("leader",ConnectProtocol.serializeMetadata(new ConnectProtocol.WorkerState(LEADER_URL,1L)));
  configs.put("member",ConnectProtocol.serializeMetadata(new ConnectProtocol.WorkerState(MEMBER_URL,1L)));
  Map<String,ByteBuffer> result=Whitebox.invokeMethod(coordinator,"performAssignment","leader",WorkerCoordinator.DEFAULT_SUBPROTOCOL,configs);
  ConnectProtocol.Assignment leaderAssignment=ConnectProtocol.deserializeAssignment(result.get("leader"));
  assertEquals(false,leaderAssignment.failed());
  assertEquals("leader",leaderAssignment.leader());
  assertEquals(1,leaderAssignment.offset());
  assertEquals(Collections.singletonList(connectorId),leaderAssignment.connectors());
  assertEquals(Collections.emptyList(),leaderAssignment.tasks());
  ConnectProtocol.Assignment memberAssignment=ConnectProtocol.deserializeAssignment(result.get("member"));
  assertEquals(false,memberAssignment.failed());
  assertEquals("leader",memberAssignment.leader());
  assertEquals(1,memberAssignment.offset());
  assertEquals(Collections.emptyList(),memberAssignment.connectors());
  assertEquals(Collections.singletonList(taskId0),memberAssignment.tasks());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMetadata(){
  EasyMock.expect(configStorage.snapshot()).andReturn(configState1);
  PowerMock.replayAll();
  List<ProtocolMetadata> serialized=coordinator.metadata();
  assertEquals(1,serialized.size());
  ProtocolMetadata defaultMetadata=serialized.get(0);
  assertEquals(WorkerCoordinator.DEFAULT_SUBPROTOCOL,defaultMetadata.name());
  ConnectProtocol.WorkerState state=ConnectProtocol.deserializeMetadata(defaultMetadata.metadata());
  assertEquals(1,state.offset());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.runtime.rest.resources.ConnectorsResourceTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetConnectorTaskConfigs() throws Throwable {
  final Capture<Callback<List<TaskInfo>>> cb=Capture.newInstance();
  herder.taskConfigs(EasyMock.eq(CONNECTOR_NAME),EasyMock.capture(cb));
  expectAndCallbackResult(cb,TASK_INFOS);
  PowerMock.replayAll();
  List<TaskInfo> taskInfos=connectorsResource.getTaskConfigs(CONNECTOR_NAME);
  assertEquals(TASK_INFOS,taskInfos);
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetConnector() throws Throwable {
  final Capture<Callback<ConnectorInfo>> cb=Capture.newInstance();
  herder.connectorInfo(EasyMock.eq(CONNECTOR_NAME),EasyMock.capture(cb));
  expectAndCallbackResult(cb,new ConnectorInfo(CONNECTOR_NAME,CONNECTOR_CONFIG,CONNECTOR_TASK_NAMES));
  PowerMock.replayAll();
  ConnectorInfo connInfo=connectorsResource.getConnector(CONNECTOR_NAME);
  assertEquals(new ConnectorInfo(CONNECTOR_NAME,CONNECTOR_CONFIG,CONNECTOR_TASK_NAMES),connInfo);
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetConnectorConfig() throws Throwable {
  final Capture<Callback<Map<String,String>>> cb=Capture.newInstance();
  herder.connectorConfig(EasyMock.eq(CONNECTOR_NAME),EasyMock.capture(cb));
  expectAndCallbackResult(cb,CONNECTOR_CONFIG);
  PowerMock.replayAll();
  Map<String,String> connConfig=connectorsResource.getConnectorConfig(CONNECTOR_NAME);
  assertEquals(CONNECTOR_CONFIG,connConfig);
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testListConnectorsNotLeader() throws Throwable {
  final Capture<Callback<Collection<String>>> cb=Capture.newInstance();
  herder.connectors(EasyMock.capture(cb));
  expectAndCallbackNotLeaderException(cb);
  EasyMock.expect(RestServer.httpRequest(EasyMock.eq("http://leader:8083/connectors"),EasyMock.eq("GET"),EasyMock.isNull(),EasyMock.anyObject(TypeReference.class))).andReturn(new RestServer.HttpResponse<>(200,new HashMap<String,List<String>>(),Arrays.asList(CONNECTOR2_NAME,CONNECTOR_NAME)));
  PowerMock.replayAll();
  Collection<String> connectors=connectorsResource.listConnectors();
  assertEquals(new HashSet<>(Arrays.asList(CONNECTOR_NAME,CONNECTOR2_NAME)),new HashSet<>(connectors));
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testListConnectors() throws Throwable {
  final Capture<Callback<Collection<String>>> cb=Capture.newInstance();
  herder.connectors(EasyMock.capture(cb));
  expectAndCallbackResult(cb,Arrays.asList(CONNECTOR2_NAME,CONNECTOR_NAME));
  PowerMock.replayAll();
  Collection<String> connectors=connectorsResource.listConnectors();
  assertEquals(new HashSet<>(Arrays.asList(CONNECTOR_NAME,CONNECTOR2_NAME)),new HashSet<>(connectors));
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.storage.FileOffsetBackingStoreTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetSet() throws Exception {
  Callback<Void> setCallback=expectSuccessfulSetCallback();
  Callback<Map<ByteBuffer,ByteBuffer>> getCallback=expectSuccessfulGetCallback();
  PowerMock.replayAll();
  store.set(firstSet,setCallback).get();
  Map<ByteBuffer,ByteBuffer> values=store.get(Arrays.asList(buffer("key"),buffer("bad")),getCallback).get();
  assertEquals(buffer("value"),values.get(buffer("key")));
  assertEquals(null,values.get(buffer("bad")));
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSaveRestore() throws Exception {
  Callback<Void> setCallback=expectSuccessfulSetCallback();
  Callback<Map<ByteBuffer,ByteBuffer>> getCallback=expectSuccessfulGetCallback();
  PowerMock.replayAll();
  store.set(firstSet,setCallback).get();
  store.stop();
  FileOffsetBackingStore restore=new FileOffsetBackingStore();
  restore.configure(props);
  restore.start();
  Map<ByteBuffer,ByteBuffer> values=restore.get(Arrays.asList(buffer("key")),getCallback).get();
  assertEquals(buffer("value"),values.get(buffer("key")));
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.storage.KafkaConfigStorageTest </h4><pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutConnectorConfig() throws Exception {
  expectConfigure();
  expectStart(Collections.EMPTY_LIST,Collections.EMPTY_MAP);
  expectConvertWriteAndRead(CONNECTOR_CONFIG_KEYS.get(0),KafkaConfigStorage.CONNECTOR_CONFIGURATION_V0,CONFIGS_SERIALIZED.get(0),"properties",SAMPLE_CONFIGS.get(0));
  connectorReconfiguredCallback.onCompletion(null,CONNECTOR_IDS.get(0));
  EasyMock.expectLastCall();
  expectConvertWriteAndRead(CONNECTOR_CONFIG_KEYS.get(1),KafkaConfigStorage.CONNECTOR_CONFIGURATION_V0,CONFIGS_SERIALIZED.get(1),"properties",SAMPLE_CONFIGS.get(1));
  connectorReconfiguredCallback.onCompletion(null,CONNECTOR_IDS.get(1));
  EasyMock.expectLastCall();
  expectConvertWriteAndRead(CONNECTOR_CONFIG_KEYS.get(1),KafkaConfigStorage.CONNECTOR_CONFIGURATION_V0,null,null,null);
  connectorReconfiguredCallback.onCompletion(null,CONNECTOR_IDS.get(1));
  EasyMock.expectLastCall();
  expectStop();
  PowerMock.replayAll();
  configStorage.configure(DEFAULT_CONFIG_STORAGE_PROPS);
  configStorage.start();
  ClusterConfigState configState=configStorage.snapshot();
  assertEquals(-1,configState.offset());
  assertNull(configState.connectorConfig(CONNECTOR_IDS.get(0)));
  assertNull(configState.connectorConfig(CONNECTOR_IDS.get(1)));
  configStorage.putConnectorConfig(CONNECTOR_IDS.get(0),SAMPLE_CONFIGS.get(0));
  configState=configStorage.snapshot();
  assertEquals(1,configState.offset());
  assertEquals(SAMPLE_CONFIGS.get(0),configState.connectorConfig(CONNECTOR_IDS.get(0)));
  assertNull(configState.connectorConfig(CONNECTOR_IDS.get(1)));
  configStorage.putConnectorConfig(CONNECTOR_IDS.get(1),SAMPLE_CONFIGS.get(1));
  configState=configStorage.snapshot();
  assertEquals(2,configState.offset());
  assertEquals(SAMPLE_CONFIGS.get(0),configState.connectorConfig(CONNECTOR_IDS.get(0)));
  assertEquals(SAMPLE_CONFIGS.get(1),configState.connectorConfig(CONNECTOR_IDS.get(1)));
  configStorage.putConnectorConfig(CONNECTOR_IDS.get(1),null);
  configState=configStorage.snapshot();
  assertEquals(3,configState.offset());
  assertEquals(SAMPLE_CONFIGS.get(0),configState.connectorConfig(CONNECTOR_IDS.get(0)));
  assertNull(configState.connectorConfig(CONNECTOR_IDS.get(1)));
  configStorage.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRestore() throws Exception {
  expectConfigure();
  List<ConsumerRecord<String,byte[]>> existingRecords=Arrays.asList(new ConsumerRecord<>(TOPIC,0,0,CONNECTOR_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(0)),new ConsumerRecord<>(TOPIC,0,1,TASK_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(1)),new ConsumerRecord<>(TOPIC,0,2,TASK_CONFIG_KEYS.get(1),CONFIGS_SERIALIZED.get(2)),new ConsumerRecord<>(TOPIC,0,3,CONNECTOR_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(3)),new ConsumerRecord<>(TOPIC,0,4,COMMIT_TASKS_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(4)),new ConsumerRecord<>(TOPIC,0,5,CONNECTOR_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(5)),new ConsumerRecord<>(TOPIC,0,6,TASK_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(6)));
  LinkedHashMap<byte[],Struct> deserialized=new LinkedHashMap();
  deserialized.put(CONFIGS_SERIALIZED.get(0),CONNECTOR_CONFIG_STRUCTS.get(0));
  deserialized.put(CONFIGS_SERIALIZED.get(1),TASK_CONFIG_STRUCTS.get(0));
  deserialized.put(CONFIGS_SERIALIZED.get(2),TASK_CONFIG_STRUCTS.get(0));
  deserialized.put(CONFIGS_SERIALIZED.get(3),CONNECTOR_CONFIG_STRUCTS.get(1));
  deserialized.put(CONFIGS_SERIALIZED.get(4),TASKS_COMMIT_STRUCT_TWO_TASK_CONNECTOR);
  deserialized.put(CONFIGS_SERIALIZED.get(5),CONNECTOR_CONFIG_STRUCTS.get(2));
  deserialized.put(CONFIGS_SERIALIZED.get(6),TASK_CONFIG_STRUCTS.get(1));
  logOffset=7;
  expectStart(existingRecords,deserialized);
  expectStop();
  PowerMock.replayAll();
  configStorage.configure(DEFAULT_CONFIG_STORAGE_PROPS);
  configStorage.start();
  ClusterConfigState configState=configStorage.snapshot();
  assertEquals(7,configState.offset());
  assertEquals(Arrays.asList(CONNECTOR_IDS.get(0)),new ArrayList<>(configState.connectors()));
  assertEquals(SAMPLE_CONFIGS.get(2),configState.connectorConfig(CONNECTOR_IDS.get(0)));
  assertEquals(Arrays.asList(TASK_IDS.get(0),TASK_IDS.get(1)),configState.tasks(CONNECTOR_IDS.get(0)));
  assertEquals(SAMPLE_CONFIGS.get(0),configState.taskConfig(TASK_IDS.get(0)));
  assertEquals(SAMPLE_CONFIGS.get(0),configState.taskConfig(TASK_IDS.get(1)));
  assertEquals(Collections.EMPTY_SET,configState.inconsistentConnectors());
  configStorage.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutTaskConfigs() throws Exception {
  expectConfigure();
  expectStart(Collections.EMPTY_LIST,Collections.EMPTY_MAP);
  expectReadToEnd(new LinkedHashMap<String,byte[]>());
  expectConvertWriteRead(TASK_CONFIG_KEYS.get(0),KafkaConfigStorage.TASK_CONFIGURATION_V0,CONFIGS_SERIALIZED.get(0),"properties",SAMPLE_CONFIGS.get(0));
  expectConvertWriteRead(TASK_CONFIG_KEYS.get(1),KafkaConfigStorage.TASK_CONFIGURATION_V0,CONFIGS_SERIALIZED.get(1),"properties",SAMPLE_CONFIGS.get(1));
  expectReadToEnd(new LinkedHashMap<String,byte[]>());
  expectConvertWriteRead(COMMIT_TASKS_CONFIG_KEYS.get(0),KafkaConfigStorage.CONNECTOR_TASKS_COMMIT_V0,CONFIGS_SERIALIZED.get(2),"tasks",2);
  tasksReconfiguredCallback.onCompletion(null,Arrays.asList(TASK_IDS.get(0),TASK_IDS.get(1)));
  EasyMock.expectLastCall();
  LinkedHashMap<String,byte[]> serializedConfigs=new LinkedHashMap<>();
  serializedConfigs.put(TASK_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(0));
  serializedConfigs.put(TASK_CONFIG_KEYS.get(1),CONFIGS_SERIALIZED.get(1));
  serializedConfigs.put(COMMIT_TASKS_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(2));
  expectReadToEnd(serializedConfigs);
  expectStop();
  PowerMock.replayAll();
  configStorage.configure(DEFAULT_CONFIG_STORAGE_PROPS);
  configStorage.start();
  whiteboxAddConnector(CONNECTOR_IDS.get(0),SAMPLE_CONFIGS.get(0),Collections.EMPTY_LIST);
  ClusterConfigState configState=configStorage.snapshot();
  assertEquals(-1,configState.offset());
  assertNull(configState.taskConfig(TASK_IDS.get(0)));
  assertNull(configState.taskConfig(TASK_IDS.get(1)));
  Map<ConnectorTaskId,Map<String,String>> taskConfigs=new HashMap<>();
  taskConfigs.put(TASK_IDS.get(0),SAMPLE_CONFIGS.get(0));
  taskConfigs.put(TASK_IDS.get(1),SAMPLE_CONFIGS.get(1));
  configStorage.putTaskConfigs(taskConfigs);
  configState=configStorage.snapshot();
  assertEquals(3,configState.offset());
  String connectorName=CONNECTOR_IDS.get(0);
  assertEquals(Arrays.asList(connectorName),new ArrayList<>(configState.connectors()));
  assertEquals(Arrays.asList(TASK_IDS.get(0),TASK_IDS.get(1)),configState.tasks(connectorName));
  assertEquals(SAMPLE_CONFIGS.get(0),configState.taskConfig(TASK_IDS.get(0)));
  assertEquals(SAMPLE_CONFIGS.get(1),configState.taskConfig(TASK_IDS.get(1)));
  assertEquals(Collections.EMPTY_SET,configState.inconsistentConnectors());
  configStorage.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-10 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutTaskConfigsDoesNotResolveAllInconsistencies() throws Exception {
  expectConfigure();
  List<ConsumerRecord<String,byte[]>> existingRecords=Arrays.asList(new ConsumerRecord<>(TOPIC,0,0,CONNECTOR_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(0)),new ConsumerRecord<>(TOPIC,0,2,TASK_CONFIG_KEYS.get(1),CONFIGS_SERIALIZED.get(2)),new ConsumerRecord<>(TOPIC,0,4,COMMIT_TASKS_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(4)),new ConsumerRecord<>(TOPIC,0,5,TASK_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(5)));
  LinkedHashMap<byte[],Struct> deserialized=new LinkedHashMap();
  deserialized.put(CONFIGS_SERIALIZED.get(0),CONNECTOR_CONFIG_STRUCTS.get(0));
  deserialized.put(CONFIGS_SERIALIZED.get(2),TASK_CONFIG_STRUCTS.get(0));
  deserialized.put(CONFIGS_SERIALIZED.get(4),TASKS_COMMIT_STRUCT_TWO_TASK_CONNECTOR);
  deserialized.put(CONFIGS_SERIALIZED.get(5),TASK_CONFIG_STRUCTS.get(1));
  logOffset=6;
  expectStart(existingRecords,deserialized);
  expectReadToEnd(new LinkedHashMap<String,byte[]>());
  expectReadToEnd(new LinkedHashMap<String,byte[]>());
  expectConvertWriteRead(TASK_CONFIG_KEYS.get(0),KafkaConfigStorage.TASK_CONFIGURATION_V0,CONFIGS_SERIALIZED.get(0),"properties",SAMPLE_CONFIGS.get(0));
  expectReadToEnd(new LinkedHashMap<String,byte[]>());
  expectConvertWriteRead(COMMIT_TASKS_CONFIG_KEYS.get(0),KafkaConfigStorage.CONNECTOR_TASKS_COMMIT_V0,CONFIGS_SERIALIZED.get(2),"tasks",1);
  tasksReconfiguredCallback.onCompletion(null,Arrays.asList(TASK_IDS.get(0)));
  EasyMock.expectLastCall();
  LinkedHashMap<String,byte[]> serializedConfigs=new LinkedHashMap<>();
  serializedConfigs.put(TASK_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(0));
  serializedConfigs.put(COMMIT_TASKS_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(2));
  expectReadToEnd(serializedConfigs);
  expectStop();
  PowerMock.replayAll();
  configStorage.configure(DEFAULT_CONFIG_STORAGE_PROPS);
  configStorage.start();
  ClusterConfigState configState=configStorage.snapshot();
  assertEquals(6,configState.offset());
  assertEquals(Arrays.asList(CONNECTOR_IDS.get(0)),new ArrayList<>(configState.connectors()));
  assertEquals(Collections.EMPTY_LIST,configState.tasks(CONNECTOR_IDS.get(0)));
  assertNull(configState.taskConfig(TASK_IDS.get(0)));
  assertNull(configState.taskConfig(TASK_IDS.get(1)));
  assertEquals(Collections.singleton(CONNECTOR_IDS.get(0)),configState.inconsistentConnectors());
  try {
    configStorage.putTaskConfigs(Collections.singletonMap(TASK_IDS.get(1),SAMPLE_CONFIGS.get(2)));
    fail("Should have failed due to incomplete task set.");
  }
 catch (  KafkaException e) {
  }
  configStorage.putTaskConfigs(Collections.singletonMap(TASK_IDS.get(0),SAMPLE_CONFIGS.get(0)));
  configState=configStorage.snapshot();
  assertEquals(8,configState.offset());
  assertEquals(Arrays.asList(CONNECTOR_IDS.get(0)),new ArrayList<>(configState.connectors()));
  assertEquals(Arrays.asList(TASK_IDS.get(0)),configState.tasks(CONNECTOR_IDS.get(0)));
  assertEquals(SAMPLE_CONFIGS.get(0),configState.taskConfig(TASK_IDS.get(0)));
  assertEquals(Collections.EMPTY_SET,configState.inconsistentConnectors());
  configStorage.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStartStop() throws Exception {
  expectConfigure();
  expectStart(Collections.EMPTY_LIST,Collections.EMPTY_MAP);
  expectStop();
  PowerMock.replayAll();
  configStorage.configure(DEFAULT_CONFIG_STORAGE_PROPS);
  assertEquals(TOPIC,capturedTopic.getValue());
  assertEquals("org.apache.kafka.common.serialization.StringSerializer",capturedProducerProps.getValue().get(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG));
  assertEquals("org.apache.kafka.common.serialization.ByteArraySerializer",capturedProducerProps.getValue().get(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG));
  assertEquals("org.apache.kafka.common.serialization.StringDeserializer",capturedConsumerProps.getValue().get(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG));
  assertEquals("org.apache.kafka.common.serialization.ByteArrayDeserializer",capturedConsumerProps.getValue().get(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG));
  configStorage.start();
  configStorage.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.storage.KafkaOffsetBackingStoreTest </h4><pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSet() throws Exception {
  expectConfigure();
  expectStart(Collections.EMPTY_LIST);
  expectStop();
  final Capture<Callback<Void>> firstGetReadToEndCallback=EasyMock.newCapture();
  storeLog.readToEnd(EasyMock.capture(firstGetReadToEndCallback));
  PowerMock.expectLastCall().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      firstGetReadToEndCallback.getValue().onCompletion(null,null);
      return null;
    }
  }
);
  Capture<org.apache.kafka.clients.producer.Callback> callback0=EasyMock.newCapture();
  storeLog.send(EasyMock.aryEq(TP0_KEY.array()),EasyMock.aryEq(TP0_VALUE.array()),EasyMock.capture(callback0));
  PowerMock.expectLastCall();
  Capture<org.apache.kafka.clients.producer.Callback> callback1=EasyMock.newCapture();
  storeLog.send(EasyMock.aryEq(TP1_KEY.array()),EasyMock.aryEq(TP1_VALUE.array()),EasyMock.capture(callback1));
  PowerMock.expectLastCall();
  final Capture<Callback<Void>> secondGetReadToEndCallback=EasyMock.newCapture();
  storeLog.readToEnd(EasyMock.capture(secondGetReadToEndCallback));
  PowerMock.expectLastCall().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      capturedConsumedCallback.getValue().onCompletion(null,new ConsumerRecord<>(TOPIC,0,0,TP0_KEY.array(),TP0_VALUE.array()));
      capturedConsumedCallback.getValue().onCompletion(null,new ConsumerRecord<>(TOPIC,1,0,TP1_KEY.array(),TP1_VALUE.array()));
      secondGetReadToEndCallback.getValue().onCompletion(null,null);
      return null;
    }
  }
);
  final Capture<Callback<Void>> thirdGetReadToEndCallback=EasyMock.newCapture();
  storeLog.readToEnd(EasyMock.capture(thirdGetReadToEndCallback));
  PowerMock.expectLastCall().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      capturedConsumedCallback.getValue().onCompletion(null,new ConsumerRecord<>(TOPIC,0,1,TP0_KEY.array(),TP0_VALUE_NEW.array()));
      capturedConsumedCallback.getValue().onCompletion(null,new ConsumerRecord<>(TOPIC,1,1,TP1_KEY.array(),TP1_VALUE_NEW.array()));
      thirdGetReadToEndCallback.getValue().onCompletion(null,null);
      return null;
    }
  }
);
  PowerMock.replayAll();
  store.configure(DEFAULT_PROPS);
  store.start();
  final AtomicBoolean getInvokedAndPassed=new AtomicBoolean(false);
  store.get(Arrays.asList(TP0_KEY,TP1_KEY),new Callback<Map<ByteBuffer,ByteBuffer>>(){
    @Override public void onCompletion(    Throwable error,    Map<ByteBuffer,ByteBuffer> result){
      assertEquals(null,result.get(TP0_KEY));
      assertEquals(null,result.get(TP1_KEY));
      getInvokedAndPassed.set(true);
    }
  }
).get(10000,TimeUnit.MILLISECONDS);
  assertTrue(getInvokedAndPassed.get());
  Map<ByteBuffer,ByteBuffer> toSet=new HashMap<>();
  toSet.put(TP0_KEY,TP0_VALUE);
  toSet.put(TP1_KEY,TP1_VALUE);
  final AtomicBoolean invoked=new AtomicBoolean(false);
  Future<Void> setFuture=store.set(toSet,new Callback<Void>(){
    @Override public void onCompletion(    Throwable error,    Void result){
      invoked.set(true);
    }
  }
);
  assertFalse(setFuture.isDone());
  callback1.getValue().onCompletion(null,null);
  assertFalse(invoked.get());
  callback0.getValue().onCompletion(null,null);
  setFuture.get(10000,TimeUnit.MILLISECONDS);
  assertTrue(invoked.get());
  final AtomicBoolean secondGetInvokedAndPassed=new AtomicBoolean(false);
  store.get(Arrays.asList(TP0_KEY,TP1_KEY),new Callback<Map<ByteBuffer,ByteBuffer>>(){
    @Override public void onCompletion(    Throwable error,    Map<ByteBuffer,ByteBuffer> result){
      assertEquals(TP0_VALUE,result.get(TP0_KEY));
      assertEquals(TP1_VALUE,result.get(TP1_KEY));
      secondGetInvokedAndPassed.set(true);
    }
  }
).get(10000,TimeUnit.MILLISECONDS);
  assertTrue(secondGetInvokedAndPassed.get());
  final AtomicBoolean thirdGetInvokedAndPassed=new AtomicBoolean(false);
  store.get(Arrays.asList(TP0_KEY,TP1_KEY),new Callback<Map<ByteBuffer,ByteBuffer>>(){
    @Override public void onCompletion(    Throwable error,    Map<ByteBuffer,ByteBuffer> result){
      assertEquals(TP0_VALUE_NEW,result.get(TP0_KEY));
      assertEquals(TP1_VALUE_NEW,result.get(TP1_KEY));
      thirdGetInvokedAndPassed.set(true);
    }
  }
).get(10000,TimeUnit.MILLISECONDS);
  assertTrue(thirdGetInvokedAndPassed.get());
  store.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-8 type-10 type-9 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetFailure() throws Exception {
  expectConfigure();
  expectStart(Collections.EMPTY_LIST);
  expectStop();
  Capture<org.apache.kafka.clients.producer.Callback> callback0=EasyMock.newCapture();
  storeLog.send(EasyMock.aryEq(TP0_KEY.array()),EasyMock.aryEq(TP0_VALUE.array()),EasyMock.capture(callback0));
  PowerMock.expectLastCall();
  Capture<org.apache.kafka.clients.producer.Callback> callback1=EasyMock.newCapture();
  storeLog.send(EasyMock.aryEq(TP1_KEY.array()),EasyMock.aryEq(TP1_VALUE.array()),EasyMock.capture(callback1));
  PowerMock.expectLastCall();
  Capture<org.apache.kafka.clients.producer.Callback> callback2=EasyMock.newCapture();
  storeLog.send(EasyMock.aryEq(TP2_KEY.array()),EasyMock.aryEq(TP2_VALUE.array()),EasyMock.capture(callback2));
  PowerMock.expectLastCall();
  PowerMock.replayAll();
  store.configure(DEFAULT_PROPS);
  store.start();
  Map<ByteBuffer,ByteBuffer> toSet=new HashMap<>();
  toSet.put(TP0_KEY,TP0_VALUE);
  toSet.put(TP1_KEY,TP1_VALUE);
  toSet.put(TP2_KEY,TP2_VALUE);
  final AtomicBoolean invoked=new AtomicBoolean(false);
  final AtomicBoolean invokedFailure=new AtomicBoolean(false);
  Future<Void> setFuture=store.set(toSet,new Callback<Void>(){
    @Override public void onCompletion(    Throwable error,    Void result){
      invoked.set(true);
      if (error != null)       invokedFailure.set(true);
    }
  }
);
  assertFalse(setFuture.isDone());
  callback1.getValue().onCompletion(null,null);
  assertFalse(invoked.get());
  callback2.getValue().onCompletion(null,new KafkaException("bogus error"));
  assertTrue(invoked.get());
  assertTrue(invokedFailure.get());
  callback0.getValue().onCompletion(null,null);
  try {
    setFuture.get(10000,TimeUnit.MILLISECONDS);
    fail("Should have seen KafkaException thrown when waiting on KafkaOffsetBackingStore.set() future");
  }
 catch (  ExecutionException e) {
    assertNotNull(e.getCause());
    assertTrue(e.getCause() instanceof KafkaException);
  }
  store.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReloadOnStart() throws Exception {
  expectConfigure();
  expectStart(Arrays.asList(new ConsumerRecord<>(TOPIC,0,0,TP0_KEY.array(),TP0_VALUE.array()),new ConsumerRecord<>(TOPIC,1,0,TP1_KEY.array(),TP1_VALUE.array()),new ConsumerRecord<>(TOPIC,0,1,TP0_KEY.array(),TP0_VALUE_NEW.array()),new ConsumerRecord<>(TOPIC,1,1,TP1_KEY.array(),TP1_VALUE_NEW.array())));
  expectStop();
  PowerMock.replayAll();
  store.configure(DEFAULT_PROPS);
  store.start();
  HashMap<ByteBuffer,ByteBuffer> data=Whitebox.getInternalState(store,"data");
  assertEquals(TP0_VALUE_NEW,data.get(TP0_KEY));
  assertEquals(TP1_VALUE_NEW,data.get(TP1_KEY));
  store.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStartStop() throws Exception {
  expectConfigure();
  expectStart(Collections.EMPTY_LIST);
  expectStop();
  PowerMock.replayAll();
  store.configure(DEFAULT_PROPS);
  assertEquals(TOPIC,capturedTopic.getValue());
  assertEquals("org.apache.kafka.common.serialization.ByteArraySerializer",capturedProducerProps.getValue().get(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG));
  assertEquals("org.apache.kafka.common.serialization.ByteArraySerializer",capturedProducerProps.getValue().get(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG));
  assertEquals("org.apache.kafka.common.serialization.ByteArrayDeserializer",capturedConsumerProps.getValue().get(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG));
  assertEquals("org.apache.kafka.common.serialization.ByteArrayDeserializer",capturedConsumerProps.getValue().get(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG));
  store.start();
  store.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.storage.OffsetStorageWriterTest </h4><pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testWriteFlush() throws Exception {
  @SuppressWarnings("unchecked") Callback<Void> callback=PowerMock.createMock(Callback.class);
  expectStore(OFFSET_KEY,OFFSET_KEY_SERIALIZED,OFFSET_VALUE,OFFSET_VALUE_SERIALIZED,callback,false,null);
  PowerMock.replayAll();
  writer.offset(OFFSET_KEY,OFFSET_VALUE);
  assertTrue(writer.beginFlush());
  writer.doFlush(callback).get(1000,TimeUnit.MILLISECONDS);
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testWriteNullKeyFlush() throws Exception {
  @SuppressWarnings("unchecked") Callback<Void> callback=PowerMock.createMock(Callback.class);
  expectStore(null,null,OFFSET_VALUE,OFFSET_VALUE_SERIALIZED,callback,false,null);
  PowerMock.replayAll();
  writer.offset(null,OFFSET_VALUE);
  assertTrue(writer.beginFlush());
  writer.doFlush(callback).get(1000,TimeUnit.MILLISECONDS);
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCancelAfterAwaitFlush() throws Exception {
  @SuppressWarnings("unchecked") Callback<Void> callback=PowerMock.createMock(Callback.class);
  CountDownLatch allowStoreCompleteCountdown=new CountDownLatch(1);
  expectStore(OFFSET_KEY,OFFSET_KEY_SERIALIZED,OFFSET_VALUE,OFFSET_VALUE_SERIALIZED,null,false,allowStoreCompleteCountdown);
  PowerMock.replayAll();
  writer.offset(OFFSET_KEY,OFFSET_VALUE);
  assertTrue(writer.beginFlush());
  Future<Void> flushFuture=writer.doFlush(callback);
  writer.cancelFlush();
  allowStoreCompleteCountdown.countDown();
  flushFuture.get(1000,TimeUnit.MILLISECONDS);
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFlushFailureReplacesOffsets() throws Exception {
  @SuppressWarnings("unchecked") final Callback<Void> callback=PowerMock.createMock(Callback.class);
  expectStore(OFFSET_KEY,OFFSET_KEY_SERIALIZED,OFFSET_VALUE,OFFSET_VALUE_SERIALIZED,callback,true,null);
  expectStore(OFFSET_KEY,OFFSET_KEY_SERIALIZED,OFFSET_VALUE,OFFSET_VALUE_SERIALIZED,callback,false,null);
  PowerMock.replayAll();
  writer.offset(OFFSET_KEY,OFFSET_VALUE);
  assertTrue(writer.beginFlush());
  writer.doFlush(callback).get(1000,TimeUnit.MILLISECONDS);
  assertTrue(writer.beginFlush());
  writer.doFlush(callback).get(1000,TimeUnit.MILLISECONDS);
  assertFalse(writer.beginFlush());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-1 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=ConnectException.class) public void testAlreadyFlushing() throws Exception {
  @SuppressWarnings("unchecked") final Callback<Void> callback=PowerMock.createMock(Callback.class);
  CountDownLatch allowStoreCompleteCountdown=new CountDownLatch(1);
  expectStore(OFFSET_KEY,OFFSET_KEY_SERIALIZED,OFFSET_VALUE,OFFSET_VALUE_SERIALIZED,null,false,allowStoreCompleteCountdown);
  PowerMock.replayAll();
  writer.offset(OFFSET_KEY,OFFSET_VALUE);
  assertTrue(writer.beginFlush());
  writer.doFlush(callback);
  assertTrue(writer.beginFlush());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCancelBeforeAwaitFlush(){
  PowerMock.replayAll();
  writer.offset(OFFSET_KEY,OFFSET_VALUE);
  assertTrue(writer.beginFlush());
  writer.cancelFlush();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testWriteNullValueFlush() throws Exception {
  @SuppressWarnings("unchecked") Callback<Void> callback=PowerMock.createMock(Callback.class);
  expectStore(OFFSET_KEY,OFFSET_KEY_SERIALIZED,null,null,callback,false,null);
  PowerMock.replayAll();
  writer.offset(OFFSET_KEY,null);
  assertTrue(writer.beginFlush());
  writer.doFlush(callback).get(1000,TimeUnit.MILLISECONDS);
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.storage.StringConverterTest </h4><pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBytesToStringNonUtf8Encoding() throws UnsupportedEncodingException {
  converter.configure(Collections.singletonMap("converter.encoding","UTF-16"),true);
  SchemaAndValue data=converter.toConnectData(TOPIC,SAMPLE_STRING.getBytes("UTF-16"));
  assertEquals(Schema.OPTIONAL_STRING_SCHEMA,data.schema());
  assertEquals(SAMPLE_STRING,data.value());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBytesNullToString(){
  SchemaAndValue data=converter.toConnectData(TOPIC,null);
  assertEquals(Schema.OPTIONAL_STRING_SCHEMA,data.schema());
  assertEquals(null,data.value());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBytesToString(){
  SchemaAndValue data=converter.toConnectData(TOPIC,SAMPLE_STRING.getBytes());
  assertEquals(Schema.OPTIONAL_STRING_SCHEMA,data.schema());
  assertEquals(SAMPLE_STRING,data.value());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testToBytesNonUtf8Encoding() throws UnsupportedEncodingException {
  converter.configure(Collections.singletonMap("converter.encoding","UTF-16"),true);
  assertArrayEquals(SAMPLE_STRING.getBytes("UTF-16"),converter.fromConnectData(TOPIC,Schema.STRING_SCHEMA,SAMPLE_STRING));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.util.KafkaBasedLogTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSendAndReadToEnd() throws Exception {
  expectStart();
  TestFuture<RecordMetadata> tp0Future=new TestFuture<>();
  ProducerRecord<String,String> tp0Record=new ProducerRecord<>(TOPIC,TP0_KEY,TP0_VALUE);
  Capture<org.apache.kafka.clients.producer.Callback> callback0=EasyMock.newCapture();
  EasyMock.expect(producer.send(EasyMock.eq(tp0Record),EasyMock.capture(callback0))).andReturn(tp0Future);
  TestFuture<RecordMetadata> tp1Future=new TestFuture<>();
  ProducerRecord<String,String> tp1Record=new ProducerRecord<>(TOPIC,TP1_KEY,TP1_VALUE);
  Capture<org.apache.kafka.clients.producer.Callback> callback1=EasyMock.newCapture();
  EasyMock.expect(producer.send(EasyMock.eq(tp1Record),EasyMock.capture(callback1))).andReturn(tp1Future);
  producer.flush();
  PowerMock.expectLastCall();
  expectStop();
  PowerMock.replayAll();
  Map<TopicPartition,Long> endOffsets=new HashMap<>();
  endOffsets.put(TP0,0L);
  endOffsets.put(TP1,0L);
  consumer.updateEndOffsets(endOffsets);
  store.start();
  assertEquals(CONSUMER_ASSIGNMENT,consumer.assignment());
  assertEquals(0L,consumer.position(TP0));
  assertEquals(0L,consumer.position(TP1));
  final AtomicInteger invoked=new AtomicInteger(0);
  org.apache.kafka.clients.producer.Callback producerCallback=new org.apache.kafka.clients.producer.Callback(){
    @Override public void onCompletion(    RecordMetadata metadata,    Exception exception){
      invoked.incrementAndGet();
    }
  }
;
  store.send(TP0_KEY,TP0_VALUE,producerCallback);
  store.send(TP1_KEY,TP1_VALUE,producerCallback);
  assertEquals(0,invoked.get());
  tp1Future.resolve((RecordMetadata)null);
  callback1.getValue().onCompletion(null,null);
  assertEquals(1,invoked.get());
  tp0Future.resolve((RecordMetadata)null);
  callback0.getValue().onCompletion(null,null);
  assertEquals(2,invoked.get());
  final AtomicBoolean getInvoked=new AtomicBoolean(false);
  final FutureCallback<Void> readEndFutureCallback=new FutureCallback<>(new Callback<Void>(){
    @Override public void onCompletion(    Throwable error,    Void result){
      getInvoked.set(true);
    }
  }
);
  consumer.schedulePollTask(new Runnable(){
    @Override public void run(){
      store.readToEnd(readEndFutureCallback);
      consumer.schedulePollTask(new Runnable(){
        @Override public void run(){
          Map<TopicPartition,Long> newEndOffsets=new HashMap<>();
          newEndOffsets.put(TP0,2L);
          newEndOffsets.put(TP1,2L);
          consumer.updateEndOffsets(newEndOffsets);
        }
      }
);
      consumer.scheduleNopPollTask();
      consumer.scheduleNopPollTask();
      consumer.scheduleNopPollTask();
      consumer.schedulePollTask(new Runnable(){
        @Override public void run(){
          consumer.addRecord(new ConsumerRecord<>(TOPIC,0,0,TP0_KEY,TP0_VALUE));
          consumer.addRecord(new ConsumerRecord<>(TOPIC,0,1,TP0_KEY,TP0_VALUE_NEW));
          consumer.addRecord(new ConsumerRecord<>(TOPIC,1,0,TP1_KEY,TP1_VALUE));
        }
      }
);
      consumer.schedulePollTask(new Runnable(){
        @Override public void run(){
          consumer.addRecord(new ConsumerRecord<>(TOPIC,1,1,TP1_KEY,TP1_VALUE_NEW));
        }
      }
);
    }
  }
);
  readEndFutureCallback.get(10000,TimeUnit.MILLISECONDS);
  assertTrue(getInvoked.get());
  assertEquals(2,consumedRecords.size());
  assertEquals(2,consumedRecords.get(TP0).size());
  assertEquals(TP0_VALUE,consumedRecords.get(TP0).get(0).value());
  assertEquals(TP0_VALUE_NEW,consumedRecords.get(TP0).get(1).value());
  assertEquals(2,consumedRecords.get(TP1).size());
  assertEquals(TP1_VALUE,consumedRecords.get(TP1).get(0).value());
  assertEquals(TP1_VALUE_NEW,consumedRecords.get(TP1).get(1).value());
  store.stop();
  assertFalse(Whitebox.<Thread>getInternalState(store,"thread").isAlive());
  assertTrue(consumer.closed());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStartStop() throws Exception {
  expectStart();
  expectStop();
  PowerMock.replayAll();
  Map<TopicPartition,Long> endOffsets=new HashMap<>();
  endOffsets.put(TP0,0L);
  endOffsets.put(TP1,0L);
  consumer.updateEndOffsets(endOffsets);
  store.start();
  assertEquals(CONSUMER_ASSIGNMENT,consumer.assignment());
  store.stop();
  assertFalse(Whitebox.<Thread>getInternalState(store,"thread").isAlive());
  assertTrue(consumer.closed());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConsumerError() throws Exception {
  expectStart();
  expectStop();
  PowerMock.replayAll();
  final CountDownLatch finishedLatch=new CountDownLatch(1);
  Map<TopicPartition,Long> endOffsets=new HashMap<>();
  endOffsets.put(TP0,1L);
  endOffsets.put(TP1,1L);
  consumer.updateEndOffsets(endOffsets);
  consumer.schedulePollTask(new Runnable(){
    @Override public void run(){
      consumer.schedulePollTask(new Runnable(){
        @Override public void run(){
          consumer.setException(Errors.GROUP_COORDINATOR_NOT_AVAILABLE.exception());
        }
      }
);
      consumer.scheduleNopPollTask();
      consumer.scheduleNopPollTask();
      consumer.schedulePollTask(new Runnable(){
        @Override public void run(){
          consumer.addRecord(new ConsumerRecord<>(TOPIC,0,0,TP0_KEY,TP0_VALUE_NEW));
          consumer.addRecord(new ConsumerRecord<>(TOPIC,1,0,TP0_KEY,TP0_VALUE_NEW));
        }
      }
);
      consumer.schedulePollTask(new Runnable(){
        @Override public void run(){
          finishedLatch.countDown();
        }
      }
);
    }
  }
);
  store.start();
  assertTrue(finishedLatch.await(10000,TimeUnit.MILLISECONDS));
  assertEquals(CONSUMER_ASSIGNMENT,consumer.assignment());
  assertEquals(1L,consumer.position(TP0));
  store.stop();
  assertFalse(Whitebox.<Thread>getInternalState(store,"thread").isAlive());
  assertTrue(consumer.closed());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReloadOnStart() throws Exception {
  expectStart();
  expectStop();
  PowerMock.replayAll();
  Map<TopicPartition,Long> endOffsets=new HashMap<>();
  endOffsets.put(TP0,1L);
  endOffsets.put(TP1,1L);
  consumer.updateEndOffsets(endOffsets);
  final CountDownLatch finishedLatch=new CountDownLatch(1);
  consumer.schedulePollTask(new Runnable(){
    @Override public void run(){
      consumer.scheduleNopPollTask();
      consumer.scheduleNopPollTask();
      consumer.schedulePollTask(new Runnable(){
        @Override public void run(){
          consumer.addRecord(new ConsumerRecord<>(TOPIC,0,0,TP0_KEY,TP0_VALUE));
        }
      }
);
      consumer.scheduleNopPollTask();
      consumer.scheduleNopPollTask();
      consumer.schedulePollTask(new Runnable(){
        @Override public void run(){
          consumer.addRecord(new ConsumerRecord<>(TOPIC,1,0,TP1_KEY,TP1_VALUE));
        }
      }
);
      consumer.schedulePollTask(new Runnable(){
        @Override public void run(){
          finishedLatch.countDown();
        }
      }
);
    }
  }
);
  store.start();
  assertTrue(finishedLatch.await(10000,TimeUnit.MILLISECONDS));
  assertEquals(CONSUMER_ASSIGNMENT,consumer.assignment());
  assertEquals(2,consumedRecords.size());
  assertEquals(TP0_VALUE,consumedRecords.get(TP0).get(0).value());
  assertEquals(TP1_VALUE,consumedRecords.get(TP1).get(0).value());
  store.stop();
  assertFalse(Whitebox.<Thread>getInternalState(store,"thread").isAlive());
  assertTrue(consumer.closed());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testProducerError() throws Exception {
  expectStart();
  TestFuture<RecordMetadata> tp0Future=new TestFuture<>();
  ProducerRecord<String,String> tp0Record=new ProducerRecord<>(TOPIC,TP0_KEY,TP0_VALUE);
  Capture<org.apache.kafka.clients.producer.Callback> callback0=EasyMock.newCapture();
  EasyMock.expect(producer.send(EasyMock.eq(tp0Record),EasyMock.capture(callback0))).andReturn(tp0Future);
  expectStop();
  PowerMock.replayAll();
  Map<TopicPartition,Long> endOffsets=new HashMap<>();
  endOffsets.put(TP0,0L);
  endOffsets.put(TP1,0L);
  consumer.updateEndOffsets(endOffsets);
  store.start();
  assertEquals(CONSUMER_ASSIGNMENT,consumer.assignment());
  assertEquals(0L,consumer.position(TP0));
  assertEquals(0L,consumer.position(TP1));
  final AtomicReference<Throwable> setException=new AtomicReference<>();
  store.send(TP0_KEY,TP0_VALUE,new org.apache.kafka.clients.producer.Callback(){
    @Override public void onCompletion(    RecordMetadata metadata,    Exception exception){
      assertNull(setException.get());
      setException.set(exception);
    }
  }
);
  KafkaException exc=new LeaderNotAvailableException("Error");
  tp0Future.resolve(exc);
  callback0.getValue().onCompletion(null,exc);
  assertNotNull(setException.get());
  store.stop();
  assertFalse(Whitebox.<Thread>getInternalState(store,"thread").isAlive());
  assertTrue(consumer.closed());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.util.ShutdownableThreadTest </h4><pre class="type-8 type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testForcibleShutdown() throws InterruptedException {
  final CountDownLatch startedLatch=new CountDownLatch(1);
  ShutdownableThread thread=new ShutdownableThread("forcible"){
    @Override public void execute(){
      try {
        startedLatch.countDown();
        Thread.sleep(100000);
      }
 catch (      InterruptedException e) {
      }
    }
  }
;
  thread.start();
  startedLatch.await();
  thread.forceShutdown();
  thread.join(1000);
  assertFalse(thread.isAlive());
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGracefulShutdown() throws InterruptedException {
  ShutdownableThread thread=new ShutdownableThread("graceful"){
    @Override public void execute(){
      while (getRunning()) {
        try {
          Thread.sleep(1);
        }
 catch (        InterruptedException e) {
        }
      }
    }
  }
;
  thread.start();
  Thread.sleep(10);
  assertTrue(thread.gracefulShutdown(1000,TimeUnit.MILLISECONDS));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.log4jappender.KafkaLog4jAppenderTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLog4jAppends() throws UnsupportedEncodingException {
  PropertyConfigurator.configure(getLog4jConfig());
  for (int i=1; i <= 5; ++i) {
    logger.error(getMessage(i));
  }
  Assert.assertEquals(5,((MockKafkaLog4jAppender)(logger.getRootLogger().getAppender("KAFKA"))).getHistory().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.StreamsConfigTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetProducerConfigs() throws Exception {
  Map<String,Object> returnedProps=streamsConfig.getProducerConfigs("client");
  assertEquals(returnedProps.get(ConsumerConfig.CLIENT_ID_CONFIG),"client-producer");
}

</code></pre>

<br>
<pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRestoreConsumerConfigs() throws Exception {
  Map<String,Object> returnedProps=streamsConfig.getRestoreConsumerConfigs("client");
  assertEquals(returnedProps.get(ConsumerConfig.CLIENT_ID_CONFIG),"client-restore-consumer");
  assertNull(returnedProps.get(ConsumerConfig.GROUP_ID_CONFIG));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetConsumerConfigs() throws Exception {
  Map<String,Object> returnedProps=streamsConfig.getConsumerConfigs(streamThreadPlaceHolder,"example-job","client");
  assertEquals(returnedProps.get(ConsumerConfig.CLIENT_ID_CONFIG),"client-consumer");
  assertEquals(returnedProps.get(ConsumerConfig.GROUP_ID_CONFIG),"example-job");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.KStreamBuilderTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNewName(){
  KStreamBuilder builder=new KStreamBuilder();
  assertEquals("X-0000000000",builder.newName("X-"));
  assertEquals("Y-0000000001",builder.newName("Y-"));
  assertEquals("Z-0000000002",builder.newName("Z-"));
  builder=new KStreamBuilder();
  assertEquals("X-0000000000",builder.newName("X-"));
  assertEquals("Y-0000000001",builder.newName("Y-"));
  assertEquals("Z-0000000002",builder.newName("Z-"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KStreamBranchTest </h4><pre class="type-7 type-3 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@SuppressWarnings("unchecked") @Test public void testKStreamBranch(){
  KStreamBuilder builder=new KStreamBuilder();
  Predicate<Integer,String> isEven=new Predicate<Integer,String>(){
    @Override public boolean test(    Integer key,    String value){
      return (key % 2) == 0;
    }
  }
;
  Predicate<Integer,String> isMultipleOfThree=new Predicate<Integer,String>(){
    @Override public boolean test(    Integer key,    String value){
      return (key % 3) == 0;
    }
  }
;
  Predicate<Integer,String> isOdd=new Predicate<Integer,String>(){
    @Override public boolean test(    Integer key,    String value){
      return (key % 2) != 0;
    }
  }
;
  final int[] expectedKeys=new int[]{1,2,3,4,5,6};
  KStream<Integer,String> stream;
  KStream<Integer,String>[] branches;
  MockProcessorSupplier<Integer,String>[] processors;
  stream=builder.stream(keyDeserializer,valDeserializer,topicName);
  branches=stream.branch(isEven,isMultipleOfThree,isOdd);
  assertEquals(3,branches.length);
  processors=(MockProcessorSupplier<Integer,String>[])Array.newInstance(MockProcessorSupplier.class,branches.length);
  for (int i=0; i < branches.length; i++) {
    processors[i]=new MockProcessorSupplier<>();
    branches[i].process(processors[i]);
  }
  KStreamTestDriver driver=new KStreamTestDriver(builder);
  for (int i=0; i < expectedKeys.length; i++) {
    driver.process(topicName,expectedKeys[i],"V" + expectedKeys[i]);
  }
  assertEquals(3,processors[0].processed.size());
  assertEquals(1,processors[1].processed.size());
  assertEquals(2,processors[2].processed.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KStreamImplTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNumProcesses(){
  final Serializer<String> stringSerializer=new StringSerializer();
  final Deserializer<String> stringDeserializer=new StringDeserializer();
  final Serializer<Integer> integerSerializer=new IntegerSerializer();
  final Deserializer<Integer> integerDeserializer=new IntegerDeserializer();
  final KStreamBuilder builder=new KStreamBuilder();
  KStream<String,String> source1=builder.stream(stringDeserializer,stringDeserializer,"topic-1","topic-2");
  KStream<String,String> source2=builder.stream(stringDeserializer,stringDeserializer,"topic-3","topic-4");
  KStream<String,String> stream1=source1.filter(new Predicate<String,String>(){
    @Override public boolean test(    String key,    String value){
      return true;
    }
  }
).filterOut(new Predicate<String,String>(){
    @Override public boolean test(    String key,    String value){
      return false;
    }
  }
);
  KStream<String,Integer> stream2=stream1.mapValues(new ValueMapper<String,Integer>(){
    @Override public Integer apply(    String value){
      return new Integer(value);
    }
  }
);
  KStream<String,Integer> stream3=source2.flatMapValues(new ValueMapper<String,Iterable<Integer>>(){
    @Override public Iterable<Integer> apply(    String value){
      return Collections.singletonList(new Integer(value));
    }
  }
);
  KStream<String,Integer>[] streams2=stream2.branch(new Predicate<String,Integer>(){
    @Override public boolean test(    String key,    Integer value){
      return (value % 2) == 0;
    }
  }
,new Predicate<String,Integer>(){
    @Override public boolean test(    String key,    Integer value){
      return true;
    }
  }
);
  KStream<String,Integer>[] streams3=stream3.branch(new Predicate<String,Integer>(){
    @Override public boolean test(    String key,    Integer value){
      return (value % 2) == 0;
    }
  }
,new Predicate<String,Integer>(){
    @Override public boolean test(    String key,    Integer value){
      return true;
    }
  }
);
  KStream<String,Integer> stream4=streams2[0].join(streams3[0],new ValueJoiner<Integer,Integer,Integer>(){
    @Override public Integer apply(    Integer value1,    Integer value2){
      return value1 + value2;
    }
  }
,JoinWindows.of("join-0"),stringSerializer,integerSerializer,integerSerializer,stringDeserializer,integerDeserializer,integerDeserializer);
  KStream<String,Integer> stream5=streams2[1].join(streams3[1],new ValueJoiner<Integer,Integer,Integer>(){
    @Override public Integer apply(    Integer value1,    Integer value2){
      return value1 + value2;
    }
  }
,JoinWindows.of("join-1"),stringSerializer,integerSerializer,integerSerializer,stringDeserializer,integerDeserializer,integerDeserializer);
  stream4.to("topic-5");
  streams2[1].through("topic-6").process(new MockProcessorSupplier<String,Integer>());
  assertEquals(2 + 2 + 1+ 1+ 1+ 2+ 1+ 2+ 5 * 2 + 1 + 2 + 1,builder.build(null).processors().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KStreamKStreamJoinTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testJoin() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    KStreamBuilder builder=new KStreamBuilder();
    final int[] expectedKeys=new int[]{0,1,2,3};
    KStream<Integer,String> stream1;
    KStream<Integer,String> stream2;
    KStream<Integer,String> joined;
    MockProcessorSupplier<Integer,String> processor;
    processor=new MockProcessorSupplier<>();
    stream1=builder.stream(keyDeserializer,valDeserializer,topic1);
    stream2=builder.stream(keyDeserializer,valDeserializer,topic2);
    joined=stream1.join(stream2,joiner,JoinWindows.of("test").within(100),keySerializer,valSerializer,valSerializer,keyDeserializer,valDeserializer,valDeserializer);
    joined.process(processor);
    Collection<Set<String>> copartitionGroups=builder.copartitionGroups();
    assertEquals(1,copartitionGroups.size());
    assertEquals(new HashSet<>(Arrays.asList(topic1,topic2)),copartitionGroups.iterator().next());
    KStreamTestDriver driver=new KStreamTestDriver(builder,baseDir);
    driver.setTime(0L);
    for (int i=0; i < 2; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult();
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],"Y" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+Y0","1:X1+Y1");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+Y0","1:X1+Y1");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+YY0","0:X0+YY0","1:X1+YY1","1:X1+YY1","2:X2+YY2","3:X3+YY3");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+Y0","0:XX0+YY0","1:XX1+Y1","1:XX1+YY1","2:XX2+YY2","3:XX3+YY3");
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],"YYY" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+YYY0","0:X0+YYY0","0:XX0+YYY0","1:X1+YYY1","1:X1+YYY1","1:XX1+YYY1");
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOuterJoin() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    KStreamBuilder builder=new KStreamBuilder();
    final int[] expectedKeys=new int[]{0,1,2,3};
    KStream<Integer,String> stream1;
    KStream<Integer,String> stream2;
    KStream<Integer,String> joined;
    MockProcessorSupplier<Integer,String> processor;
    processor=new MockProcessorSupplier<>();
    stream1=builder.stream(keyDeserializer,valDeserializer,topic1);
    stream2=builder.stream(keyDeserializer,valDeserializer,topic2);
    joined=stream1.outerJoin(stream2,joiner,JoinWindows.of("test").within(100),keySerializer,valSerializer,valSerializer,keyDeserializer,valDeserializer,valDeserializer);
    joined.process(processor);
    Collection<Set<String>> copartitionGroups=builder.copartitionGroups();
    assertEquals(1,copartitionGroups.size());
    assertEquals(new HashSet<>(Arrays.asList(topic1,topic2)),copartitionGroups.iterator().next());
    KStreamTestDriver driver=new KStreamTestDriver(builder,baseDir);
    driver.setTime(0L);
    for (int i=0; i < 2; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+null","1:X1+null");
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],"Y" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+Y0","1:X1+Y1");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+Y0","1:X1+Y1","2:X2+null","3:X3+null");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+YY0","0:X0+YY0","1:X1+YY1","1:X1+YY1","2:X2+YY2","3:X3+YY3");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+Y0","0:XX0+YY0","1:XX1+Y1","1:XX1+YY1","2:XX2+YY2","3:XX3+YY3");
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],"YYY" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+YYY0","0:X0+YYY0","0:XX0+YYY0","1:X1+YYY1","1:X1+YYY1","1:XX1+YYY1");
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWindowing() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    long time=0L;
    KStreamBuilder builder=new KStreamBuilder();
    final int[] expectedKeys=new int[]{0,1,2,3};
    KStream<Integer,String> stream1;
    KStream<Integer,String> stream2;
    KStream<Integer,String> joined;
    MockProcessorSupplier<Integer,String> processor;
    processor=new MockProcessorSupplier<>();
    stream1=builder.stream(keyDeserializer,valDeserializer,topic1);
    stream2=builder.stream(keyDeserializer,valDeserializer,topic2);
    joined=stream1.join(stream2,joiner,JoinWindows.of("test").within(100),keySerializer,valSerializer,valSerializer,keyDeserializer,valDeserializer,valDeserializer);
    joined.process(processor);
    Collection<Set<String>> copartitionGroups=builder.copartitionGroups();
    assertEquals(1,copartitionGroups.size());
    assertEquals(new HashSet<>(Arrays.asList(topic1,topic2)),copartitionGroups.iterator().next());
    KStreamTestDriver driver=new KStreamTestDriver(builder,baseDir);
    driver.setTime(time);
    for (int i=0; i < 2; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult();
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],"Y" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+Y0","1:X1+Y1");
    time=1000L;
    for (int i=0; i < expectedKeys.length; i++) {
      driver.setTime(time + i);
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult();
    time=1000 + 100L;
    driver.setTime(time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+YY0","1:X1+YY1","2:X2+YY2","3:X3+YY3");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    processor.checkAndClearResult("1:X1+YY1","2:X2+YY2","3:X3+YY3");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    processor.checkAndClearResult("2:X2+YY2","3:X3+YY3");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    processor.checkAndClearResult("3:X3+YY3");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    processor.checkAndClearResult();
    time=1000L - 100L - 1L;
    driver.setTime(time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    processor.checkAndClearResult();
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+YY0");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+YY0","1:X1+YY1");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+YY0","1:X1+YY1","2:X2+YY2");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+YY0","1:X1+YY1","2:X2+YY2","3:X3+YY3");
    time=2000L;
    for (int i=0; i < expectedKeys.length; i++) {
      driver.setTime(time + i);
      driver.process(topic2,expectedKeys[i],"Y" + expectedKeys[i]);
    }
    processor.checkAndClearResult();
    time=2000L + 100L;
    driver.setTime(time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+Y0","1:XX1+Y1","2:XX2+Y2","3:XX3+Y3");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("1:XX1+Y1","2:XX2+Y2","3:XX3+Y3");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("2:XX2+Y2","3:XX3+Y3");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("3:XX3+Y3");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult();
    time=2000L - 100L - 1L;
    driver.setTime(time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult();
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+Y0");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+Y0","1:XX1+Y1");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+Y0","1:XX1+Y1","2:XX2+Y2");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+Y0","1:XX1+Y1","2:XX2+Y2","3:XX3+Y3");
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KStreamKStreamLeftJoinTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWindowing() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    long time=0L;
    KStreamBuilder builder=new KStreamBuilder();
    final int[] expectedKeys=new int[]{0,1,2,3};
    KStream<Integer,String> stream1;
    KStream<Integer,String> stream2;
    KStream<Integer,String> joined;
    MockProcessorSupplier<Integer,String> processor;
    processor=new MockProcessorSupplier<>();
    stream1=builder.stream(keyDeserializer,valDeserializer,topic1);
    stream2=builder.stream(keyDeserializer,valDeserializer,topic2);
    joined=stream1.leftJoin(stream2,joiner,JoinWindows.of("test").within(100),keySerializer,valSerializer,keyDeserializer,valDeserializer);
    joined.process(processor);
    Collection<Set<String>> copartitionGroups=builder.copartitionGroups();
    assertEquals(1,copartitionGroups.size());
    assertEquals(new HashSet<>(Arrays.asList(topic1,topic2)),copartitionGroups.iterator().next());
    KStreamTestDriver driver=new KStreamTestDriver(builder,baseDir);
    driver.setTime(time);
    for (int i=0; i < 2; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+null","1:X1+null");
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],"Y" + expectedKeys[i]);
    }
    processor.checkAndClearResult();
    time=1000L;
    for (int i=0; i < expectedKeys.length; i++) {
      driver.setTime(time + i);
      driver.process(topic2,expectedKeys[i],"Y" + expectedKeys[i]);
    }
    processor.checkAndClearResult();
    time=1000L + 100L;
    driver.setTime(time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+Y0","1:XX1+Y1","2:XX2+Y2","3:XX3+Y3");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+null","1:XX1+Y1","2:XX2+Y2","3:XX3+Y3");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+null","1:XX1+null","2:XX2+Y2","3:XX3+Y3");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+null","1:XX1+null","2:XX2+null","3:XX3+Y3");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+null","1:XX1+null","2:XX2+null","3:XX3+null");
    time=1000L - 100L - 1L;
    driver.setTime(time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+null","1:XX1+null","2:XX2+null","3:XX3+null");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+Y0","1:XX1+null","2:XX2+null","3:XX3+null");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+Y0","1:XX1+Y1","2:XX2+null","3:XX3+null");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+Y0","1:XX1+Y1","2:XX2+Y2","3:XX3+null");
    driver.setTime(++time);
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+Y0","1:XX1+Y1","2:XX2+Y2","3:XX3+Y3");
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLeftJoin() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    KStreamBuilder builder=new KStreamBuilder();
    final int[] expectedKeys=new int[]{0,1,2,3};
    KStream<Integer,String> stream1;
    KStream<Integer,String> stream2;
    KStream<Integer,String> joined;
    MockProcessorSupplier<Integer,String> processor;
    processor=new MockProcessorSupplier<>();
    stream1=builder.stream(keyDeserializer,valDeserializer,topic1);
    stream2=builder.stream(keyDeserializer,valDeserializer,topic2);
    joined=stream1.leftJoin(stream2,joiner,JoinWindows.of("test").within(100),keySerializer,valSerializer,keyDeserializer,valDeserializer);
    joined.process(processor);
    Collection<Set<String>> copartitionGroups=builder.copartitionGroups();
    assertEquals(1,copartitionGroups.size());
    assertEquals(new HashSet<>(Arrays.asList(topic1,topic2)),copartitionGroups.iterator().next());
    KStreamTestDriver driver=new KStreamTestDriver(builder,baseDir);
    driver.setTime(0L);
    for (int i=0; i < 2; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+null","1:X1+null");
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],"Y" + expectedKeys[i]);
    }
    processor.checkAndClearResult();
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+Y0","1:X1+Y1","2:X2+null","3:X3+null");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    processor.checkAndClearResult();
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+Y0","0:XX0+YY0","1:XX1+Y1","1:XX1+YY1","2:XX2+YY2","3:XX3+YY3");
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KStreamKTableLeftJoinTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testJoin() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    KStreamBuilder builder=new KStreamBuilder();
    final int[] expectedKeys=new int[]{0,1,2,3};
    KStream<Integer,String> stream;
    KTable<Integer,String> table;
    MockProcessorSupplier<Integer,String> processor;
    processor=new MockProcessorSupplier<>();
    stream=builder.stream(keyDeserializer,valDeserializer,topic1);
    table=builder.table(keySerializer,valSerializer,keyDeserializer,valDeserializer,topic2);
    stream.leftJoin(table,joiner).process(processor);
    Collection<Set<String>> copartitionGroups=builder.copartitionGroups();
    assertEquals(1,copartitionGroups.size());
    assertEquals(new HashSet<>(Arrays.asList(topic1,topic2)),copartitionGroups.iterator().next());
    KStreamTestDriver driver=new KStreamTestDriver(builder,baseDir);
    driver.setTime(0L);
    for (int i=0; i < 2; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+null","1:X1+null");
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],"Y" + expectedKeys[i]);
    }
    processor.checkAndClearResult();
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+Y0","1:X1+Y1","2:X2+null","3:X3+null");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    processor.checkAndClearResult();
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+YY0","1:X1+YY1","2:X2+YY2","3:X3+YY3");
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],null);
    }
    processor.checkAndClearResult();
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+null","1:XX1+null","2:XX2+YY2","3:XX3+YY3");
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KTableFilterTest </h4><pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValueGetter() throws IOException {
  File stateDir=Files.createTempDirectory("test").toFile();
  try {
    final KStreamBuilder builder=new KStreamBuilder();
    String topic1="topic1";
    KTableImpl<String,Integer,Integer> table1=(KTableImpl<String,Integer,Integer>)builder.table(strSerializer,intSerializer,strDeserializer,intDeserializer,topic1);
    KTableImpl<String,Integer,Integer> table2=(KTableImpl<String,Integer,Integer>)table1.filter(new Predicate<String,Integer>(){
      @Override public boolean test(      String key,      Integer value){
        return (value % 2) == 0;
      }
    }
);
    KTableImpl<String,Integer,Integer> table3=(KTableImpl<String,Integer,Integer>)table1.filterOut(new Predicate<String,Integer>(){
      @Override public boolean test(      String key,      Integer value){
        return (value % 2) == 0;
      }
    }
);
    KTableValueGetterSupplier<String,Integer> getterSupplier2=table2.valueGetterSupplier();
    KTableValueGetterSupplier<String,Integer> getterSupplier3=table3.valueGetterSupplier();
    KStreamTestDriver driver=new KStreamTestDriver(builder,stateDir,null,null,null,null);
    KTableValueGetter<String,Integer> getter2=getterSupplier2.get();
    KTableValueGetter<String,Integer> getter3=getterSupplier3.get();
    getter2.init(driver.context());
    getter3.init(driver.context());
    driver.process(topic1,"A",1);
    driver.process(topic1,"B",1);
    driver.process(topic1,"C",1);
    assertNull(getter2.get("A"));
    assertNull(getter2.get("B"));
    assertNull(getter2.get("C"));
    assertEquals(1,(int)getter3.get("A"));
    assertEquals(1,(int)getter3.get("B"));
    assertEquals(1,(int)getter3.get("C"));
    driver.process(topic1,"A",2);
    driver.process(topic1,"B",2);
    assertEquals(2,(int)getter2.get("A"));
    assertEquals(2,(int)getter2.get("B"));
    assertNull(getter2.get("C"));
    assertNull(getter3.get("A"));
    assertNull(getter3.get("B"));
    assertEquals(1,(int)getter3.get("C"));
    driver.process(topic1,"A",3);
    assertNull(getter2.get("A"));
    assertEquals(2,(int)getter2.get("B"));
    assertNull(getter2.get("C"));
    assertEquals(3,(int)getter3.get("A"));
    assertNull(getter3.get("B"));
    assertEquals(1,(int)getter3.get("C"));
    driver.process(topic1,"A",null);
    driver.process(topic1,"B",null);
    assertNull(getter2.get("A"));
    assertNull(getter2.get("B"));
    assertNull(getter2.get("C"));
    assertNull(getter3.get("A"));
    assertNull(getter3.get("B"));
    assertEquals(1,(int)getter3.get("C"));
  }
  finally {
    Utils.delete(stateDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KTableImplTest </h4><pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValueGetter() throws IOException {
  File stateDir=Files.createTempDirectory("test").toFile();
  try {
    final Serializer<String> serializer=new StringSerializer();
    final Deserializer<String> deserializer=new StringDeserializer();
    final KStreamBuilder builder=new KStreamBuilder();
    String topic1="topic1";
    String topic2="topic2";
    KTableImpl<String,String,String> table1=(KTableImpl<String,String,String>)builder.table(serializer,serializer,deserializer,deserializer,topic1);
    KTableImpl<String,String,Integer> table2=(KTableImpl<String,String,Integer>)table1.mapValues(new ValueMapper<String,Integer>(){
      @Override public Integer apply(      String value){
        return new Integer(value);
      }
    }
);
    KTableImpl<String,Integer,Integer> table3=(KTableImpl<String,Integer,Integer>)table2.filter(new Predicate<String,Integer>(){
      @Override public boolean test(      String key,      Integer value){
        return (value % 2) == 0;
      }
    }
);
    KTableImpl<String,String,String> table4=(KTableImpl<String,String,String>)table1.through(topic2,serializer,serializer,deserializer,deserializer);
    KTableValueGetterSupplier<String,String> getterSupplier1=table1.valueGetterSupplier();
    KTableValueGetterSupplier<String,Integer> getterSupplier2=table2.valueGetterSupplier();
    KTableValueGetterSupplier<String,Integer> getterSupplier3=table3.valueGetterSupplier();
    KTableValueGetterSupplier<String,String> getterSupplier4=table4.valueGetterSupplier();
    KStreamTestDriver driver=new KStreamTestDriver(builder,stateDir,null,null,null,null);
    assertEquals(2,driver.allStateStores().size());
    KTableValueGetter<String,String> getter1=getterSupplier1.get();
    getter1.init(driver.context());
    KTableValueGetter<String,Integer> getter2=getterSupplier2.get();
    getter2.init(driver.context());
    KTableValueGetter<String,Integer> getter3=getterSupplier3.get();
    getter3.init(driver.context());
    KTableValueGetter<String,String> getter4=getterSupplier4.get();
    getter4.init(driver.context());
    driver.process(topic1,"A","01");
    driver.process(topic1,"B","01");
    driver.process(topic1,"C","01");
    assertEquals("01",getter1.get("A"));
    assertEquals("01",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    assertEquals(new Integer(1),getter2.get("A"));
    assertEquals(new Integer(1),getter2.get("B"));
    assertEquals(new Integer(1),getter2.get("C"));
    assertNull(getter3.get("A"));
    assertNull(getter3.get("B"));
    assertNull(getter3.get("C"));
    assertEquals("01",getter4.get("A"));
    assertEquals("01",getter4.get("B"));
    assertEquals("01",getter4.get("C"));
    driver.process(topic1,"A","02");
    driver.process(topic1,"B","02");
    assertEquals("02",getter1.get("A"));
    assertEquals("02",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    assertEquals(new Integer(2),getter2.get("A"));
    assertEquals(new Integer(2),getter2.get("B"));
    assertEquals(new Integer(1),getter2.get("C"));
    assertEquals(new Integer(2),getter3.get("A"));
    assertEquals(new Integer(2),getter3.get("B"));
    assertNull(getter3.get("C"));
    assertEquals("02",getter4.get("A"));
    assertEquals("02",getter4.get("B"));
    assertEquals("01",getter4.get("C"));
    driver.process(topic1,"A","03");
    assertEquals("03",getter1.get("A"));
    assertEquals("02",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    assertEquals(new Integer(3),getter2.get("A"));
    assertEquals(new Integer(2),getter2.get("B"));
    assertEquals(new Integer(1),getter2.get("C"));
    assertNull(getter3.get("A"));
    assertEquals(new Integer(2),getter3.get("B"));
    assertNull(getter3.get("C"));
    assertEquals("03",getter4.get("A"));
    assertEquals("02",getter4.get("B"));
    assertEquals("01",getter4.get("C"));
    driver.process(topic1,"A",null);
    assertNull(getter1.get("A"));
    assertEquals("02",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    assertNull(getter2.get("A"));
    assertEquals(new Integer(2),getter2.get("B"));
    assertEquals(new Integer(1),getter2.get("C"));
    assertNull(getter3.get("A"));
    assertEquals(new Integer(2),getter3.get("B"));
    assertNull(getter3.get("C"));
    assertNull(getter4.get("A"));
    assertEquals("02",getter4.get("B"));
    assertEquals("01",getter4.get("C"));
  }
  finally {
    Utils.delete(stateDir);
  }
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStateStore() throws IOException {
  final Serializer<String> serializer=new StringSerializer();
  final Deserializer<String> deserializer=new StringDeserializer();
  String topic1="topic1";
  String topic2="topic2";
  File stateDir=Files.createTempDirectory("test").toFile();
  try {
    KStreamBuilder builder=new KStreamBuilder();
    KTableImpl<String,String,String> table1=(KTableImpl<String,String,String>)builder.table(serializer,serializer,deserializer,deserializer,topic1);
    KTableImpl<String,String,String> table2=(KTableImpl<String,String,String>)builder.table(serializer,serializer,deserializer,deserializer,topic2);
    KTableImpl<String,String,Integer> table1Mapped=(KTableImpl<String,String,Integer>)table1.mapValues(new ValueMapper<String,Integer>(){
      @Override public Integer apply(      String value){
        return new Integer(value);
      }
    }
);
    KTableImpl<String,Integer,Integer> table1MappedFiltered=(KTableImpl<String,Integer,Integer>)table1Mapped.filter(new Predicate<String,Integer>(){
      @Override public boolean test(      String key,      Integer value){
        return (value % 2) == 0;
      }
    }
);
    KStreamTestDriver driver=new KStreamTestDriver(builder,stateDir,null,null,null,null);
    driver.setTime(0L);
    assertEquals(0,driver.allStateStores().size());
  }
  finally {
    Utils.delete(stateDir);
  }
  try {
    KStreamBuilder builder=new KStreamBuilder();
    KTableImpl<String,String,String> table1=(KTableImpl<String,String,String>)builder.table(serializer,serializer,deserializer,deserializer,topic1);
    KTableImpl<String,String,String> table2=(KTableImpl<String,String,String>)builder.table(serializer,serializer,deserializer,deserializer,topic2);
    KTableImpl<String,String,Integer> table1Mapped=(KTableImpl<String,String,Integer>)table1.mapValues(new ValueMapper<String,Integer>(){
      @Override public Integer apply(      String value){
        return new Integer(value);
      }
    }
);
    KTableImpl<String,Integer,Integer> table1MappedFiltered=(KTableImpl<String,Integer,Integer>)table1Mapped.filter(new Predicate<String,Integer>(){
      @Override public boolean test(      String key,      Integer value){
        return (value % 2) == 0;
      }
    }
);
    table2.join(table1MappedFiltered,new ValueJoiner<String,Integer,String>(){
      @Override public String apply(      String v1,      Integer v2){
        return v1 + v2;
      }
    }
);
    KStreamTestDriver driver=new KStreamTestDriver(builder,stateDir,null,null,null,null);
    driver.setTime(0L);
    assertEquals(2,driver.allStateStores().size());
  }
  finally {
    Utils.delete(stateDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KTableKTableJoinTest </h4><pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSendingOldValues() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    KStreamBuilder builder=new KStreamBuilder();
    final int[] expectedKeys=new int[]{0,1,2,3};
    KTable<Integer,String> table1;
    KTable<Integer,String> table2;
    KTable<Integer,String> joined;
    MockProcessorSupplier<Integer,String> proc;
    table1=builder.table(keySerializer,valSerializer,keyDeserializer,valDeserializer,topic1);
    table2=builder.table(keySerializer,valSerializer,keyDeserializer,valDeserializer,topic2);
    joined=table1.join(table2,joiner);
    ((KTableImpl<?,?,?>)joined).enableSendingOldValues();
    proc=new MockProcessorSupplier<>();
    builder.addProcessor("proc",proc,((KTableImpl<?,?,?>)joined).name);
    KStreamTestDriver driver=new KStreamTestDriver(builder,baseDir);
    driver.setTime(0L);
    assertTrue(((KTableImpl<?,?,?>)table1).sendingOldValueEnabled());
    assertTrue(((KTableImpl<?,?,?>)table2).sendingOldValueEnabled());
    assertTrue(((KTableImpl<?,?,?>)joined).sendingOldValueEnabled());
    for (int i=0; i < 2; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(null<-null)","1:(null<-null)");
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],"Y" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+Y0<-null)","1:(X1+Y1<-null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+Y0<-X0+Y0)","1:(X1+Y1<-X1+Y1)","2:(null<-null)","3:(null<-null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+YY0<-X0+Y0)","1:(X1+YY1<-X1+Y1)","2:(X2+YY2<-null)","3:(X3+YY3<-null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+YY0<-X0+YY0)","1:(X1+YY1<-X1+YY1)","2:(X2+YY2<-X2+YY2)","3:(X3+YY3<-X3+YY3)");
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],null);
    }
    proc.checkAndClearResult("0:(null<-X0+YY0)","1:(null<-X1+YY1)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(null<-null)","1:(null<-null)","2:(XX2+YY2<-X2+YY2)","3:(XX3+YY3<-X3+YY3)");
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testJoin() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    KStreamBuilder builder=new KStreamBuilder();
    final int[] expectedKeys=new int[]{0,1,2,3};
    KTable<Integer,String> table1;
    KTable<Integer,String> table2;
    KTable<Integer,String> joined;
    MockProcessorSupplier<Integer,String> processor;
    processor=new MockProcessorSupplier<>();
    table1=builder.table(keySerializer,valSerializer,keyDeserializer,valDeserializer,topic1);
    table2=builder.table(keySerializer,valSerializer,keyDeserializer,valDeserializer,topic2);
    joined=table1.join(table2,joiner);
    joined.toStream().process(processor);
    Collection<Set<String>> copartitionGroups=builder.copartitionGroups();
    assertEquals(1,copartitionGroups.size());
    assertEquals(new HashSet<>(Arrays.asList(topic1,topic2)),copartitionGroups.iterator().next());
    KTableValueGetterSupplier<Integer,String> getterSupplier=((KTableImpl<Integer,String,String>)joined).valueGetterSupplier();
    KStreamTestDriver driver=new KStreamTestDriver(builder,baseDir);
    driver.setTime(0L);
    KTableValueGetter<Integer,String> getter=getterSupplier.get();
    getter.init(driver.context());
    for (int i=0; i < 2; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:null","1:null");
    checkJoinedValues(getter,kv(0,null),kv(1,null),kv(2,null),kv(3,null));
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],"Y" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+Y0","1:X1+Y1");
    checkJoinedValues(getter,kv(0,"X0+Y0"),kv(1,"X1+Y1"),kv(2,null),kv(3,null));
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+Y0","1:X1+Y1","2:null","3:null");
    checkJoinedValues(getter,kv(0,"X0+Y0"),kv(1,"X1+Y1"),kv(2,null),kv(3,null));
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+YY0","1:X1+YY1","2:X2+YY2","3:X3+YY3");
    checkJoinedValues(getter,kv(0,"X0+YY0"),kv(1,"X1+YY1"),kv(2,"X2+YY2"),kv(3,"X3+YY3"));
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+YY0","1:X1+YY1","2:X2+YY2","3:X3+YY3");
    checkJoinedValues(getter,kv(0,"X0+YY0"),kv(1,"X1+YY1"),kv(2,"X2+YY2"),kv(3,"X3+YY3"));
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],null);
    }
    processor.checkAndClearResult("0:null","1:null");
    checkJoinedValues(getter,kv(0,null),kv(1,null),kv(2,"X2+YY2"),kv(3,"X3+YY3"));
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:null","1:null","2:XX2+YY2","3:XX3+YY3");
    checkJoinedValues(getter,kv(0,null),kv(1,null),kv(2,"XX2+YY2"),kv(3,"XX3+YY3"));
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNotSendingOldValues() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    KStreamBuilder builder=new KStreamBuilder();
    final int[] expectedKeys=new int[]{0,1,2,3};
    KTable<Integer,String> table1;
    KTable<Integer,String> table2;
    KTable<Integer,String> joined;
    MockProcessorSupplier<Integer,String> proc;
    table1=builder.table(keySerializer,valSerializer,keyDeserializer,valDeserializer,topic1);
    table2=builder.table(keySerializer,valSerializer,keyDeserializer,valDeserializer,topic2);
    joined=table1.join(table2,joiner);
    proc=new MockProcessorSupplier<>();
    builder.addProcessor("proc",proc,((KTableImpl<?,?,?>)joined).name);
    KStreamTestDriver driver=new KStreamTestDriver(builder,baseDir);
    driver.setTime(0L);
    assertFalse(((KTableImpl<?,?,?>)table1).sendingOldValueEnabled());
    assertFalse(((KTableImpl<?,?,?>)table2).sendingOldValueEnabled());
    assertFalse(((KTableImpl<?,?,?>)joined).sendingOldValueEnabled());
    for (int i=0; i < 2; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(null<-null)","1:(null<-null)");
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],"Y" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+Y0<-null)","1:(X1+Y1<-null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+Y0<-null)","1:(X1+Y1<-null)","2:(null<-null)","3:(null<-null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+YY0<-null)","1:(X1+YY1<-null)","2:(X2+YY2<-null)","3:(X3+YY3<-null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+YY0<-null)","1:(X1+YY1<-null)","2:(X2+YY2<-null)","3:(X3+YY3<-null)");
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],null);
    }
    proc.checkAndClearResult("0:(null<-null)","1:(null<-null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(null<-null)","1:(null<-null)","2:(XX2+YY2<-null)","3:(XX3+YY3<-null)");
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KTableKTableLeftJoinTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testJoin() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    KStreamBuilder builder=new KStreamBuilder();
    final int[] expectedKeys=new int[]{0,1,2,3};
    KTable<Integer,String> table1;
    KTable<Integer,String> table2;
    KTable<Integer,String> joined;
    MockProcessorSupplier<Integer,String> processor;
    processor=new MockProcessorSupplier<>();
    table1=builder.table(keySerializer,valSerializer,keyDeserializer,valDeserializer,topic1);
    table2=builder.table(keySerializer,valSerializer,keyDeserializer,valDeserializer,topic2);
    joined=table1.leftJoin(table2,joiner);
    joined.toStream().process(processor);
    Collection<Set<String>> copartitionGroups=builder.copartitionGroups();
    assertEquals(1,copartitionGroups.size());
    assertEquals(new HashSet<>(Arrays.asList(topic1,topic2)),copartitionGroups.iterator().next());
    KTableValueGetterSupplier<Integer,String> getterSupplier=((KTableImpl<Integer,String,String>)joined).valueGetterSupplier();
    KStreamTestDriver driver=new KStreamTestDriver(builder,baseDir);
    driver.setTime(0L);
    KTableValueGetter<Integer,String> getter=getterSupplier.get();
    getter.init(driver.context());
    for (int i=0; i < 2; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+null","1:X1+null");
    checkJoinedValues(getter,kv(0,"X0+null"),kv(1,"X1+null"),kv(2,null),kv(3,null));
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],"Y" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+Y0","1:X1+Y1");
    checkJoinedValues(getter,kv(0,"X0+Y0"),kv(1,"X1+Y1"),kv(2,null),kv(3,null));
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+Y0","1:X1+Y1","2:X2+null","3:X3+null");
    checkJoinedValues(getter,kv(0,"X0+Y0"),kv(1,"X1+Y1"),kv(2,"X2+null"),kv(3,"X3+null"));
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+YY0","1:X1+YY1","2:X2+YY2","3:X3+YY3");
    checkJoinedValues(getter,kv(0,"X0+YY0"),kv(1,"X1+YY1"),kv(2,"X2+YY2"),kv(3,"X3+YY3"));
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+YY0","1:X1+YY1","2:X2+YY2","3:X3+YY3");
    checkJoinedValues(getter,kv(0,"X0+YY0"),kv(1,"X1+YY1"),kv(2,"X2+YY2"),kv(3,"X3+YY3"));
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],null);
    }
    processor.checkAndClearResult("0:X0+null","1:X1+null");
    checkJoinedValues(getter,kv(0,"X0+null"),kv(1,"X1+null"),kv(2,"X2+YY2"),kv(3,"X3+YY3"));
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+null","1:XX1+null","2:XX2+YY2","3:XX3+YY3");
    checkJoinedValues(getter,kv(0,"XX0+null"),kv(1,"XX1+null"),kv(2,"XX2+YY2"),kv(3,"XX3+YY3"));
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNotSendingOldValue() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    KStreamBuilder builder=new KStreamBuilder();
    final int[] expectedKeys=new int[]{0,1,2,3};
    KTable<Integer,String> table1;
    KTable<Integer,String> table2;
    KTable<Integer,String> joined;
    MockProcessorSupplier<Integer,String> proc;
    table1=builder.table(keySerializer,valSerializer,keyDeserializer,valDeserializer,topic1);
    table2=builder.table(keySerializer,valSerializer,keyDeserializer,valDeserializer,topic2);
    joined=table1.leftJoin(table2,joiner);
    proc=new MockProcessorSupplier<>();
    builder.addProcessor("proc",proc,((KTableImpl<?,?,?>)joined).name);
    KStreamTestDriver driver=new KStreamTestDriver(builder,baseDir);
    driver.setTime(0L);
    assertFalse(((KTableImpl<?,?,?>)table1).sendingOldValueEnabled());
    assertFalse(((KTableImpl<?,?,?>)table2).sendingOldValueEnabled());
    assertFalse(((KTableImpl<?,?,?>)joined).sendingOldValueEnabled());
    for (int i=0; i < 2; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+null<-null)","1:(X1+null<-null)");
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],"Y" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+Y0<-null)","1:(X1+Y1<-null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+Y0<-null)","1:(X1+Y1<-null)","2:(X2+null<-null)","3:(X3+null<-null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+YY0<-null)","1:(X1+YY1<-null)","2:(X2+YY2<-null)","3:(X3+YY3<-null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+YY0<-null)","1:(X1+YY1<-null)","2:(X2+YY2<-null)","3:(X3+YY3<-null)");
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],null);
    }
    proc.checkAndClearResult("0:(X0+null<-null)","1:(X1+null<-null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(XX0+null<-null)","1:(XX1+null<-null)","2:(XX2+YY2<-null)","3:(XX3+YY3<-null)");
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSendingOldValue() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    KStreamBuilder builder=new KStreamBuilder();
    final int[] expectedKeys=new int[]{0,1,2,3};
    KTable<Integer,String> table1;
    KTable<Integer,String> table2;
    KTable<Integer,String> joined;
    MockProcessorSupplier<Integer,String> proc;
    table1=builder.table(keySerializer,valSerializer,keyDeserializer,valDeserializer,topic1);
    table2=builder.table(keySerializer,valSerializer,keyDeserializer,valDeserializer,topic2);
    joined=table1.leftJoin(table2,joiner);
    ((KTableImpl<?,?,?>)joined).enableSendingOldValues();
    proc=new MockProcessorSupplier<>();
    builder.addProcessor("proc",proc,((KTableImpl<?,?,?>)joined).name);
    KStreamTestDriver driver=new KStreamTestDriver(builder,baseDir);
    driver.setTime(0L);
    assertTrue(((KTableImpl<?,?,?>)table1).sendingOldValueEnabled());
    assertTrue(((KTableImpl<?,?,?>)table2).sendingOldValueEnabled());
    assertTrue(((KTableImpl<?,?,?>)joined).sendingOldValueEnabled());
    for (int i=0; i < 2; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+null<-null)","1:(X1+null<-null)");
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],"Y" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+Y0<-X0+null)","1:(X1+Y1<-X1+null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+Y0<-X0+Y0)","1:(X1+Y1<-X1+Y1)","2:(X2+null<-null)","3:(X3+null<-null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+YY0<-X0+Y0)","1:(X1+YY1<-X1+Y1)","2:(X2+YY2<-X2+null)","3:(X3+YY3<-X3+null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+YY0<-X0+YY0)","1:(X1+YY1<-X1+YY1)","2:(X2+YY2<-X2+YY2)","3:(X3+YY3<-X3+YY3)");
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],null);
    }
    proc.checkAndClearResult("0:(X0+null<-X0+YY0)","1:(X1+null<-X1+YY1)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(XX0+null<-X0+null)","1:(XX1+null<-X1+null)","2:(XX2+YY2<-X2+YY2)","3:(XX3+YY3<-X3+YY3)");
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KTableKTableOuterJoinTest </h4><pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSendingOldValue() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    KStreamBuilder builder=new KStreamBuilder();
    final int[] expectedKeys=new int[]{0,1,2,3};
    KTable<Integer,String> table1;
    KTable<Integer,String> table2;
    KTable<Integer,String> joined;
    MockProcessorSupplier<Integer,String> proc;
    table1=builder.table(keySerializer,valSerializer,keyDeserializer,valDeserializer,topic1);
    table2=builder.table(keySerializer,valSerializer,keyDeserializer,valDeserializer,topic2);
    joined=table1.outerJoin(table2,joiner);
    ((KTableImpl<?,?,?>)joined).enableSendingOldValues();
    proc=new MockProcessorSupplier<>();
    builder.addProcessor("proc",proc,((KTableImpl<?,?,?>)joined).name);
    KStreamTestDriver driver=new KStreamTestDriver(builder,baseDir);
    driver.setTime(0L);
    assertTrue(((KTableImpl<?,?,?>)table1).sendingOldValueEnabled());
    assertTrue(((KTableImpl<?,?,?>)table2).sendingOldValueEnabled());
    assertTrue(((KTableImpl<?,?,?>)joined).sendingOldValueEnabled());
    for (int i=0; i < 2; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+null<-null)","1:(X1+null<-null)");
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],"Y" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+Y0<-X0+null)","1:(X1+Y1<-X1+null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+Y0<-X0+Y0)","1:(X1+Y1<-X1+Y1)","2:(X2+null<-null)","3:(X3+null<-null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+YY0<-X0+Y0)","1:(X1+YY1<-X1+Y1)","2:(X2+YY2<-X2+null)","3:(X3+YY3<-X3+null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+YY0<-X0+YY0)","1:(X1+YY1<-X1+YY1)","2:(X2+YY2<-X2+YY2)","3:(X3+YY3<-X3+YY3)");
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],null);
    }
    proc.checkAndClearResult("0:(X0+null<-X0+YY0)","1:(X1+null<-X1+YY1)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(XX0+null<-X0+null)","1:(XX1+null<-X1+null)","2:(XX2+YY2<-X2+YY2)","3:(XX3+YY3<-X3+YY3)");
    for (int i=1; i < 3; i++) {
      driver.process(topic1,expectedKeys[i],null);
    }
    proc.checkAndClearResult("1:(null<-XX1+null)","2:(null+YY2<-XX2+YY2)");
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNotSendingOldValue() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    KStreamBuilder builder=new KStreamBuilder();
    final int[] expectedKeys=new int[]{0,1,2,3};
    KTable<Integer,String> table1;
    KTable<Integer,String> table2;
    KTable<Integer,String> joined;
    MockProcessorSupplier<Integer,String> proc;
    table1=builder.table(keySerializer,valSerializer,keyDeserializer,valDeserializer,topic1);
    table2=builder.table(keySerializer,valSerializer,keyDeserializer,valDeserializer,topic2);
    joined=table1.outerJoin(table2,joiner);
    proc=new MockProcessorSupplier<>();
    builder.addProcessor("proc",proc,((KTableImpl<?,?,?>)joined).name);
    KStreamTestDriver driver=new KStreamTestDriver(builder,baseDir);
    driver.setTime(0L);
    assertFalse(((KTableImpl<?,?,?>)table1).sendingOldValueEnabled());
    assertFalse(((KTableImpl<?,?,?>)table2).sendingOldValueEnabled());
    assertFalse(((KTableImpl<?,?,?>)joined).sendingOldValueEnabled());
    for (int i=0; i < 2; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+null<-null)","1:(X1+null<-null)");
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],"Y" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+Y0<-null)","1:(X1+Y1<-null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+Y0<-null)","1:(X1+Y1<-null)","2:(X2+null<-null)","3:(X3+null<-null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+YY0<-null)","1:(X1+YY1<-null)","2:(X2+YY2<-null)","3:(X3+YY3<-null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(X0+YY0<-null)","1:(X1+YY1<-null)","2:(X2+YY2<-null)","3:(X3+YY3<-null)");
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],null);
    }
    proc.checkAndClearResult("0:(X0+null<-null)","1:(X1+null<-null)");
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    proc.checkAndClearResult("0:(XX0+null<-null)","1:(XX1+null<-null)","2:(XX2+YY2<-null)","3:(XX3+YY3<-null)");
    for (int i=1; i < 3; i++) {
      driver.process(topic1,expectedKeys[i],null);
    }
    proc.checkAndClearResult("1:(null<-null)","2:(null+YY2<-null)");
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testJoin() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    KStreamBuilder builder=new KStreamBuilder();
    final int[] expectedKeys=new int[]{0,1,2,3};
    KTable<Integer,String> table1;
    KTable<Integer,String> table2;
    KTable<Integer,String> joined;
    MockProcessorSupplier<Integer,String> processor;
    processor=new MockProcessorSupplier<>();
    table1=builder.table(keySerializer,valSerializer,keyDeserializer,valDeserializer,topic1);
    table2=builder.table(keySerializer,valSerializer,keyDeserializer,valDeserializer,topic2);
    joined=table1.outerJoin(table2,joiner);
    joined.toStream().process(processor);
    Collection<Set<String>> copartitionGroups=builder.copartitionGroups();
    assertEquals(1,copartitionGroups.size());
    assertEquals(new HashSet<>(Arrays.asList(topic1,topic2)),copartitionGroups.iterator().next());
    KTableValueGetterSupplier<Integer,String> getterSupplier=((KTableImpl<Integer,String,String>)joined).valueGetterSupplier();
    KStreamTestDriver driver=new KStreamTestDriver(builder,baseDir);
    driver.setTime(0L);
    KTableValueGetter<Integer,String> getter=getterSupplier.get();
    getter.init(driver.context());
    for (int i=0; i < 2; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+null","1:X1+null");
    checkJoinedValues(getter,kv(0,"X0+null"),kv(1,"X1+null"),kv(2,null),kv(3,null));
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],"Y" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+Y0","1:X1+Y1");
    checkJoinedValues(getter,kv(0,"X0+Y0"),kv(1,"X1+Y1"),kv(2,null),kv(3,null));
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+Y0","1:X1+Y1","2:X2+null","3:X3+null");
    checkJoinedValues(getter,kv(0,"X0+Y0"),kv(1,"X1+Y1"),kv(2,"X2+null"),kv(3,"X3+null"));
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic2,expectedKeys[i],"YY" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+YY0","1:X1+YY1","2:X2+YY2","3:X3+YY3");
    checkJoinedValues(getter,kv(0,"X0+YY0"),kv(1,"X1+YY1"),kv(2,"X2+YY2"),kv(3,"X3+YY3"));
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"X" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:X0+YY0","1:X1+YY1","2:X2+YY2","3:X3+YY3");
    checkJoinedValues(getter,kv(0,"X0+YY0"),kv(1,"X1+YY1"),kv(2,"X2+YY2"),kv(3,"X3+YY3"));
    for (int i=0; i < 2; i++) {
      driver.process(topic2,expectedKeys[i],null);
    }
    processor.checkAndClearResult("0:X0+null","1:X1+null");
    checkJoinedValues(getter,kv(0,"X0+null"),kv(1,"X1+null"),kv(2,"X2+YY2"),kv(3,"X3+YY3"));
    for (int i=0; i < expectedKeys.length; i++) {
      driver.process(topic1,expectedKeys[i],"XX" + expectedKeys[i]);
    }
    processor.checkAndClearResult("0:XX0+null","1:XX1+null","2:XX2+YY2","3:XX3+YY3");
    checkJoinedValues(getter,kv(0,"XX0+null"),kv(1,"XX1+null"),kv(2,"XX2+YY2"),kv(3,"XX3+YY3"));
    for (int i=1; i < 3; i++) {
      driver.process(topic1,expectedKeys[i],null);
    }
    processor.checkAndClearResult("1:null","2:null+YY2");
    checkJoinedValues(getter,kv(0,"XX0+null"),kv(1,null),kv(2,"null+YY2"),kv(3,"XX3+YY3"));
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KTableMapValuesTest </h4><pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNotSendingOldValue() throws IOException {
  File stateDir=Files.createTempDirectory("test").toFile();
  try {
    final Serializer<String> serializer=new StringSerializer();
    final Deserializer<String> deserializer=new StringDeserializer();
    final KStreamBuilder builder=new KStreamBuilder();
    String topic1="topic1";
    KTableImpl<String,String,String> table1=(KTableImpl<String,String,String>)builder.table(serializer,serializer,deserializer,deserializer,topic1);
    KTableImpl<String,String,Integer> table2=(KTableImpl<String,String,Integer>)table1.mapValues(new ValueMapper<String,Integer>(){
      @Override public Integer apply(      String value){
        return new Integer(value);
      }
    }
);
    MockProcessorSupplier<String,Integer> proc=new MockProcessorSupplier<>();
    builder.addProcessor("proc",proc,table2.name);
    KStreamTestDriver driver=new KStreamTestDriver(builder,stateDir,null,null,null,null);
    assertFalse(table1.sendingOldValueEnabled());
    assertFalse(table2.sendingOldValueEnabled());
    driver.process(topic1,"A","01");
    driver.process(topic1,"B","01");
    driver.process(topic1,"C","01");
    proc.checkAndClearResult("A:(1<-null)","B:(1<-null)","C:(1<-null)");
    driver.process(topic1,"A","02");
    driver.process(topic1,"B","02");
    proc.checkAndClearResult("A:(2<-null)","B:(2<-null)");
    driver.process(topic1,"A","03");
    proc.checkAndClearResult("A:(3<-null)");
    driver.process(topic1,"A",null);
    proc.checkAndClearResult("A:(null<-null)");
  }
  finally {
    Utils.delete(stateDir);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSendingOldValue() throws IOException {
  File stateDir=Files.createTempDirectory("test").toFile();
  try {
    final Serializer<String> serializer=new StringSerializer();
    final Deserializer<String> deserializer=new StringDeserializer();
    final KStreamBuilder builder=new KStreamBuilder();
    String topic1="topic1";
    KTableImpl<String,String,String> table1=(KTableImpl<String,String,String>)builder.table(serializer,serializer,deserializer,deserializer,topic1);
    KTableImpl<String,String,Integer> table2=(KTableImpl<String,String,Integer>)table1.mapValues(new ValueMapper<String,Integer>(){
      @Override public Integer apply(      String value){
        return new Integer(value);
      }
    }
);
    table2.enableSendingOldValues();
    MockProcessorSupplier<String,Integer> proc=new MockProcessorSupplier<>();
    builder.addProcessor("proc",proc,table2.name);
    KStreamTestDriver driver=new KStreamTestDriver(builder,stateDir,null,null,null,null);
    assertTrue(table1.sendingOldValueEnabled());
    assertTrue(table2.sendingOldValueEnabled());
    driver.process(topic1,"A","01");
    driver.process(topic1,"B","01");
    driver.process(topic1,"C","01");
    proc.checkAndClearResult("A:(1<-null)","B:(1<-null)","C:(1<-null)");
    driver.process(topic1,"A","02");
    driver.process(topic1,"B","02");
    proc.checkAndClearResult("A:(2<-1)","B:(2<-1)");
    driver.process(topic1,"A","03");
    proc.checkAndClearResult("A:(3<-2)");
    driver.process(topic1,"A",null);
    proc.checkAndClearResult("A:(null<-3)");
  }
  finally {
    Utils.delete(stateDir);
  }
}

</code></pre>

<br>
<pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValueGetter() throws IOException {
  File stateDir=Files.createTempDirectory("test").toFile();
  try {
    final Serializer<String> serializer=new StringSerializer();
    final Deserializer<String> deserializer=new StringDeserializer();
    final KStreamBuilder builder=new KStreamBuilder();
    String topic1="topic1";
    String topic2="topic2";
    KTableImpl<String,String,String> table1=(KTableImpl<String,String,String>)builder.table(serializer,serializer,deserializer,deserializer,topic1);
    KTableImpl<String,String,Integer> table2=(KTableImpl<String,String,Integer>)table1.mapValues(new ValueMapper<String,Integer>(){
      @Override public Integer apply(      String value){
        return new Integer(value);
      }
    }
);
    KTableImpl<String,Integer,Integer> table3=(KTableImpl<String,Integer,Integer>)table2.filter(new Predicate<String,Integer>(){
      @Override public boolean test(      String key,      Integer value){
        return (value % 2) == 0;
      }
    }
);
    KTableImpl<String,String,String> table4=(KTableImpl<String,String,String>)table1.through(topic2,serializer,serializer,deserializer,deserializer);
    KTableValueGetterSupplier<String,String> getterSupplier1=table1.valueGetterSupplier();
    KTableValueGetterSupplier<String,Integer> getterSupplier2=table2.valueGetterSupplier();
    KTableValueGetterSupplier<String,Integer> getterSupplier3=table3.valueGetterSupplier();
    KTableValueGetterSupplier<String,String> getterSupplier4=table4.valueGetterSupplier();
    KStreamTestDriver driver=new KStreamTestDriver(builder,stateDir,null,null,null,null);
    KTableValueGetter<String,String> getter1=getterSupplier1.get();
    getter1.init(driver.context());
    KTableValueGetter<String,Integer> getter2=getterSupplier2.get();
    getter2.init(driver.context());
    KTableValueGetter<String,Integer> getter3=getterSupplier3.get();
    getter3.init(driver.context());
    KTableValueGetter<String,String> getter4=getterSupplier4.get();
    getter4.init(driver.context());
    driver.process(topic1,"A","01");
    driver.process(topic1,"B","01");
    driver.process(topic1,"C","01");
    assertEquals("01",getter1.get("A"));
    assertEquals("01",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    assertEquals(new Integer(1),getter2.get("A"));
    assertEquals(new Integer(1),getter2.get("B"));
    assertEquals(new Integer(1),getter2.get("C"));
    assertNull(getter3.get("A"));
    assertNull(getter3.get("B"));
    assertNull(getter3.get("C"));
    assertEquals("01",getter4.get("A"));
    assertEquals("01",getter4.get("B"));
    assertEquals("01",getter4.get("C"));
    driver.process(topic1,"A","02");
    driver.process(topic1,"B","02");
    assertEquals("02",getter1.get("A"));
    assertEquals("02",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    assertEquals(new Integer(2),getter2.get("A"));
    assertEquals(new Integer(2),getter2.get("B"));
    assertEquals(new Integer(1),getter2.get("C"));
    assertEquals(new Integer(2),getter3.get("A"));
    assertEquals(new Integer(2),getter3.get("B"));
    assertNull(getter3.get("C"));
    assertEquals("02",getter4.get("A"));
    assertEquals("02",getter4.get("B"));
    assertEquals("01",getter4.get("C"));
    driver.process(topic1,"A","03");
    assertEquals("03",getter1.get("A"));
    assertEquals("02",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    assertEquals(new Integer(3),getter2.get("A"));
    assertEquals(new Integer(2),getter2.get("B"));
    assertEquals(new Integer(1),getter2.get("C"));
    assertNull(getter3.get("A"));
    assertEquals(new Integer(2),getter3.get("B"));
    assertNull(getter3.get("C"));
    assertEquals("03",getter4.get("A"));
    assertEquals("02",getter4.get("B"));
    assertEquals("01",getter4.get("C"));
    driver.process(topic1,"A",null);
    assertNull(getter1.get("A"));
    assertEquals("02",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    assertNull(getter2.get("A"));
    assertEquals(new Integer(2),getter2.get("B"));
    assertEquals(new Integer(1),getter2.get("C"));
    assertNull(getter3.get("A"));
    assertEquals(new Integer(2),getter3.get("B"));
    assertNull(getter3.get("C"));
    assertNull(getter4.get("A"));
    assertEquals("02",getter4.get("B"));
    assertEquals("01",getter4.get("C"));
  }
  finally {
    Utils.delete(stateDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KTableSourceTest </h4><pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValueGetter() throws IOException {
  File stateDir=Files.createTempDirectory("test").toFile();
  try {
    final KStreamBuilder builder=new KStreamBuilder();
    String topic1="topic1";
    KTableImpl<String,String,String> table1=(KTableImpl<String,String,String>)builder.table(strSerializer,strSerializer,strDeserializer,strDeserializer,topic1);
    KTableValueGetterSupplier<String,String> getterSupplier1=table1.valueGetterSupplier();
    KStreamTestDriver driver=new KStreamTestDriver(builder,stateDir,null,null,null,null);
    KTableValueGetter<String,String> getter1=getterSupplier1.get();
    getter1.init(driver.context());
    driver.process(topic1,"A","01");
    driver.process(topic1,"B","01");
    driver.process(topic1,"C","01");
    assertEquals("01",getter1.get("A"));
    assertEquals("01",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    driver.process(topic1,"A","02");
    driver.process(topic1,"B","02");
    assertEquals("02",getter1.get("A"));
    assertEquals("02",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    driver.process(topic1,"A","03");
    assertEquals("03",getter1.get("A"));
    assertEquals("02",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    driver.process(topic1,"A",null);
    driver.process(topic1,"B",null);
    assertNull(getter1.get("A"));
    assertNull(getter1.get("B"));
    assertEquals("01",getter1.get("C"));
  }
  finally {
    Utils.delete(stateDir);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSedingOldValue() throws IOException {
  File stateDir=Files.createTempDirectory("test").toFile();
  try {
    final KStreamBuilder builder=new KStreamBuilder();
    String topic1="topic1";
    KTableImpl<String,String,String> table1=(KTableImpl<String,String,String>)builder.table(strSerializer,strSerializer,strDeserializer,strDeserializer,topic1);
    table1.enableSendingOldValues();
    assertTrue(table1.sendingOldValueEnabled());
    MockProcessorSupplier<String,Integer> proc1=new MockProcessorSupplier<>();
    builder.addProcessor("proc1",proc1,table1.name);
    KStreamTestDriver driver=new KStreamTestDriver(builder,stateDir,null,null,null,null);
    driver.process(topic1,"A","01");
    driver.process(topic1,"B","01");
    driver.process(topic1,"C","01");
    proc1.checkAndClearResult("A:(01<-null)","B:(01<-null)","C:(01<-null)");
    driver.process(topic1,"A","02");
    driver.process(topic1,"B","02");
    proc1.checkAndClearResult("A:(02<-01)","B:(02<-01)");
    driver.process(topic1,"A","03");
    proc1.checkAndClearResult("A:(03<-02)");
    driver.process(topic1,"A",null);
    driver.process(topic1,"B",null);
    proc1.checkAndClearResult("A:(null<-03)","B:(null<-02)");
  }
  finally {
    Utils.delete(stateDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.WindowedStreamPartitionerTest </h4><pre class="type-8 type-13 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCopartitioning(){
  Random rand=new Random();
  DefaultPartitioner defaultPartitioner=new DefaultPartitioner();
  WindowedSerializer<Integer> windowedSerializer=new WindowedSerializer<>(keySerializer);
  WindowedStreamPartitioner<Integer,String> streamPartitioner=new WindowedStreamPartitioner<>(windowedSerializer);
  for (int k=0; k < 10; k++) {
    Integer key=rand.nextInt();
    byte[] keyBytes=keySerializer.serialize(topicName,key);
    String value=key.toString();
    byte[] valueBytes=valSerializer.serialize(topicName,value);
    Integer expected=defaultPartitioner.partition("topic",key,keyBytes,value,valueBytes,cluster);
    for (int w=0; w < 10; w++) {
      HoppingWindow window=new HoppingWindow(10 * w,20 * w);
      Windowed<Integer> windowedKey=new Windowed<>(key,window);
      Integer actual=streamPartitioner.partition(windowedKey,value,infos.size());
      assertEquals(expected,actual);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.WindowsTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void unlimitedWindows(){
  UnlimitedWindows windows=UnlimitedWindows.of("test").startOn(10L);
  Map<Long,UnlimitedWindow> matched=windows.windowsFor(21L);
  assertEquals(1,matched.size());
  assertEquals(new UnlimitedWindow(10L),matched.get(10L));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void tumblineWindows(){
  TumblingWindows windows=TumblingWindows.of("test").with(12L);
  Map<Long,TumblingWindow> matched=windows.windowsFor(21L);
  assertEquals(1,matched.size());
  assertEquals(new TumblingWindow(12L,24L),matched.get(12L));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void hoppingWindows(){
  HoppingWindows windows=HoppingWindows.of("test").with(12L).every(5L);
  Map<Long,HoppingWindow> matched=windows.windowsFor(21L);
  assertEquals(3,matched.size());
  assertEquals(new HoppingWindow(10L,22L),matched.get(10L));
  assertEquals(new HoppingWindow(15L,27L),matched.get(15L));
  assertEquals(new HoppingWindow(20L,32L),matched.get(20L));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.DefaultPartitionGrouperTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGrouping(){
  PartitionGrouper grouper=new DefaultPartitionGrouper();
  int topicGroupId;
  Map<TaskId,Set<TopicPartition>> expectedPartitionsForTask;
  Map<Integer,Set<String>> topicGroups;
  topicGroups=new HashMap<>();
  topicGroups.put(0,mkSet("topic1"));
  topicGroups.put(1,mkSet("topic2"));
  expectedPartitionsForTask=new HashMap<>();
  topicGroupId=0;
  expectedPartitionsForTask.put(new TaskId(topicGroupId,0),mkSet(new TopicPartition("topic1",0)));
  expectedPartitionsForTask.put(new TaskId(topicGroupId,1),mkSet(new TopicPartition("topic1",1)));
  expectedPartitionsForTask.put(new TaskId(topicGroupId,2),mkSet(new TopicPartition("topic1",2)));
  topicGroupId++;
  expectedPartitionsForTask.put(new TaskId(topicGroupId,0),mkSet(new TopicPartition("topic2",0)));
  expectedPartitionsForTask.put(new TaskId(topicGroupId,1),mkSet(new TopicPartition("topic2",1)));
  assertEquals(expectedPartitionsForTask,grouper.partitionGroups(topicGroups,metadata));
  topicGroups=new HashMap<>();
  topicGroups.put(0,mkSet("topic1","topic2"));
  expectedPartitionsForTask=new HashMap<>();
  topicGroupId=0;
  expectedPartitionsForTask.put(new TaskId(topicGroupId,0),mkSet(new TopicPartition("topic1",0),new TopicPartition("topic2",0)));
  expectedPartitionsForTask.put(new TaskId(topicGroupId,1),mkSet(new TopicPartition("topic1",1),new TopicPartition("topic2",1)));
  expectedPartitionsForTask.put(new TaskId(topicGroupId,2),mkSet(new TopicPartition("topic1",2)));
  assertEquals(expectedPartitionsForTask,grouper.partitionGroups(topicGroups,metadata));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.TopologyBuilderTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddStateStore(){
  final TopologyBuilder builder=new TopologyBuilder();
  List<StateStoreSupplier> suppliers;
  StateStoreSupplier supplier=new MockStateStoreSupplier("store-1",false);
  builder.addStateStore(supplier);
  suppliers=builder.build(null).stateStoreSuppliers();
  assertEquals(0,suppliers.size());
  builder.addSource("source-1","topic-1");
  builder.addProcessor("processor-1",new MockProcessorSupplier(),"source-1");
  builder.connectProcessorAndStateStores("processor-1","store-1");
  suppliers=builder.build(null).stateStoreSuppliers();
  assertEquals(1,suppliers.size());
  assertEquals(supplier.name(),suppliers.get(0).name());
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddSinkConnectedWithParent(){
  final TopologyBuilder builder=new TopologyBuilder();
  builder.addSource("source","source-topic");
  builder.addSink("sink","dest-topic","source");
  Map<Integer,Set<String>> nodeGroups=builder.nodeGroups();
  Set<String> nodeGroup=nodeGroups.get(0);
  assertTrue(nodeGroup.contains("sink"));
  assertTrue(nodeGroup.contains("source"));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSourceTopics(){
  final TopologyBuilder builder=new TopologyBuilder();
  builder.addSource("source-1","topic-1");
  builder.addSource("source-2","topic-2");
  builder.addSource("source-3","topic-3");
  assertEquals(3,builder.sourceTopics().size());
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddSinkConnectedWithMultipleParent(){
  final TopologyBuilder builder=new TopologyBuilder();
  builder.addSource("source","source-topic");
  builder.addSource("sourceII","source-topicII");
  builder.addSink("sink","dest-topic","source","sourceII");
  Map<Integer,Set<String>> nodeGroups=builder.nodeGroups();
  Set<String> nodeGroup=nodeGroups.get(0);
  assertTrue(nodeGroup.contains("sink"));
  assertTrue(nodeGroup.contains("source"));
  assertTrue(nodeGroup.contains("sourceII"));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTopicGroups(){
  final TopologyBuilder builder=new TopologyBuilder();
  builder.addSource("source-1","topic-1","topic-1x");
  builder.addSource("source-2","topic-2");
  builder.addSource("source-3","topic-3");
  builder.addSource("source-4","topic-4");
  builder.addSource("source-5","topic-5");
  builder.addProcessor("processor-1",new MockProcessorSupplier(),"source-1");
  builder.addProcessor("processor-2",new MockProcessorSupplier(),"source-2","processor-1");
  builder.copartitionSources(mkList("source-1","source-2"));
  builder.addProcessor("processor-3",new MockProcessorSupplier(),"source-3","source-4");
  Map<Integer,TopicsInfo> topicGroups=builder.topicGroups();
  Map<Integer,TopicsInfo> expectedTopicGroups=new HashMap<>();
  expectedTopicGroups.put(0,new TopicsInfo(mkSet("topic-1","topic-1x","topic-2"),Collections.<String>emptySet(),Collections.<String>emptySet()));
  expectedTopicGroups.put(1,new TopicsInfo(mkSet("topic-3","topic-4"),Collections.<String>emptySet(),Collections.<String>emptySet()));
  expectedTopicGroups.put(2,new TopicsInfo(mkSet("topic-5"),Collections.<String>emptySet(),Collections.<String>emptySet()));
  assertEquals(3,topicGroups.size());
  assertEquals(expectedTopicGroups,topicGroups);
  Collection<Set<String>> copartitionGroups=builder.copartitionGroups();
  assertEquals(mkSet(mkSet("topic-1","topic-1x","topic-2")),new HashSet<>(copartitionGroups));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBuild(){
  final TopologyBuilder builder=new TopologyBuilder();
  builder.addSource("source-1","topic-1","topic-1x");
  builder.addSource("source-2","topic-2");
  builder.addSource("source-3","topic-3");
  builder.addSource("source-4","topic-4");
  builder.addSource("source-5","topic-5");
  builder.addProcessor("processor-1",new MockProcessorSupplier(),"source-1");
  builder.addProcessor("processor-2",new MockProcessorSupplier(),"source-2","processor-1");
  builder.addProcessor("processor-3",new MockProcessorSupplier(),"source-3","source-4");
  ProcessorTopology topology0=builder.build(0);
  ProcessorTopology topology1=builder.build(1);
  ProcessorTopology topology2=builder.build(2);
  assertEquals(mkSet("source-1","source-2","processor-1","processor-2"),nodeNames(topology0.processors()));
  assertEquals(mkSet("source-3","source-4","processor-3"),nodeNames(topology1.processors()));
  assertEquals(mkSet("source-5"),nodeNames(topology2.processors()));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTopicGroupsByStateStore(){
  final TopologyBuilder builder=new TopologyBuilder();
  builder.addSource("source-1","topic-1","topic-1x");
  builder.addSource("source-2","topic-2");
  builder.addSource("source-3","topic-3");
  builder.addSource("source-4","topic-4");
  builder.addSource("source-5","topic-5");
  builder.addProcessor("processor-1",new MockProcessorSupplier(),"source-1");
  builder.addProcessor("processor-2",new MockProcessorSupplier(),"source-2");
  builder.addStateStore(new MockStateStoreSupplier("store-1",false),"processor-1","processor-2");
  builder.addProcessor("processor-3",new MockProcessorSupplier(),"source-3");
  builder.addProcessor("processor-4",new MockProcessorSupplier(),"source-4");
  builder.addStateStore(new MockStateStoreSupplier("store-2",false),"processor-3","processor-4");
  builder.addProcessor("processor-5",new MockProcessorSupplier(),"source-5");
  StateStoreSupplier supplier=new MockStateStoreSupplier("store-3",false);
  builder.addStateStore(supplier);
  builder.connectProcessorAndStateStores("processor-5","store-3");
  Map<Integer,TopicsInfo> topicGroups=builder.topicGroups();
  Map<Integer,TopicsInfo> expectedTopicGroups=new HashMap<>();
  expectedTopicGroups.put(0,new TopicsInfo(mkSet("topic-1","topic-1x","topic-2"),Collections.<String>emptySet(),mkSet("store-1" + ProcessorStateManager.STATE_CHANGELOG_TOPIC_SUFFIX)));
  expectedTopicGroups.put(1,new TopicsInfo(mkSet("topic-3","topic-4"),Collections.<String>emptySet(),mkSet("store-2" + ProcessorStateManager.STATE_CHANGELOG_TOPIC_SUFFIX)));
  expectedTopicGroups.put(2,new TopicsInfo(mkSet("topic-5"),Collections.<String>emptySet(),mkSet("store-3" + ProcessorStateManager.STATE_CHANGELOG_TOPIC_SUFFIX)));
  assertEquals(3,topicGroups.size());
  assertEquals(expectedTopicGroups,topicGroups);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.MinTimestampTrackerTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void testTracking(){
  TimestampTracker<String> tracker=new MinTimestampTracker<>();
  Object[] elems=new Object[]{elem(100),elem(101),elem(102),elem(98),elem(99),elem(100)};
  int insertionIndex=0;
  int removalIndex=0;
  tracker.addElement((Stamped<String>)elems[insertionIndex++]);
  assertEquals(100L,tracker.get());
  tracker.addElement((Stamped<String>)elems[insertionIndex++]);
  assertEquals(100L,tracker.get());
  tracker.removeElement((Stamped<String>)elems[removalIndex++]);
  assertEquals(101L,tracker.get());
  tracker.addElement((Stamped<String>)elems[insertionIndex++]);
  assertEquals(101L,tracker.get());
  tracker.addElement((Stamped<String>)elems[insertionIndex++]);
  assertEquals(98L,tracker.get());
  tracker.addElement((Stamped<String>)elems[insertionIndex++]);
  assertEquals(98L,tracker.get());
  tracker.addElement((Stamped<String>)elems[insertionIndex++]);
  assertEquals(98L,tracker.get());
  tracker.removeElement((Stamped<String>)elems[removalIndex++]);
  assertEquals(98L,tracker.get());
  tracker.removeElement((Stamped<String>)elems[removalIndex++]);
  assertEquals(98L,tracker.get());
  tracker.removeElement((Stamped<String>)elems[removalIndex++]);
  assertEquals(99L,tracker.get());
  tracker.removeElement((Stamped<String>)elems[removalIndex++]);
  assertEquals(100L,tracker.get());
  tracker.removeElement((Stamped<String>)elems[removalIndex++]);
  assertEquals(100L,tracker.get());
  assertEquals(insertionIndex,removalIndex);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.PartitionGroupTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTimeTracking(){
  assertEquals(0,group.numBuffered());
  List<ConsumerRecord<byte[],byte[]>> list1=Arrays.asList(new ConsumerRecord<>("topic",1,1,recordKey,recordValue),new ConsumerRecord<>("topic",1,3,recordKey,recordValue),new ConsumerRecord<>("topic",1,5,recordKey,recordValue));
  group.addRawRecords(partition1,list1);
  List<ConsumerRecord<byte[],byte[]>> list2=Arrays.asList(new ConsumerRecord<>("topic",1,2,recordKey,recordValue),new ConsumerRecord<>("topic",1,4,recordKey,recordValue),new ConsumerRecord<>("topic",1,6,recordKey,recordValue));
  group.addRawRecords(partition2,list2);
  assertEquals(6,group.numBuffered());
  assertEquals(3,group.numBuffered(partition1));
  assertEquals(3,group.numBuffered(partition2));
  assertEquals(TimestampTracker.NOT_KNOWN,group.timestamp());
  StampedRecord record;
  PartitionGroup.RecordInfo info=new PartitionGroup.RecordInfo();
  record=group.nextRecord(info);
  assertEquals(partition1,info.partition());
  assertEquals(1L,record.timestamp);
  assertEquals(5,group.numBuffered());
  assertEquals(2,group.numBuffered(partition1));
  assertEquals(3,group.numBuffered(partition2));
  assertEquals(TimestampTracker.NOT_KNOWN,group.timestamp());
  record=group.nextRecord(info);
  assertEquals(partition2,info.partition());
  assertEquals(2L,record.timestamp);
  assertEquals(4,group.numBuffered());
  assertEquals(2,group.numBuffered(partition1));
  assertEquals(2,group.numBuffered(partition2));
  assertEquals(3L,group.timestamp());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.ProcessorStateManagerTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegisterNonPersistentStore() throws IOException {
  File baseDir=Files.createTempDirectory(stateDir).toFile();
  try {
    long lastCheckpointedOffset=10L;
    MockRestoreConsumer restoreConsumer=new MockRestoreConsumer();
    OffsetCheckpoint checkpoint=new OffsetCheckpoint(new File(baseDir,ProcessorStateManager.CHECKPOINT_FILE_NAME));
    checkpoint.write(Collections.singletonMap(new TopicPartition(persistentStoreTopicName,2),lastCheckpointedOffset));
    restoreConsumer.updatePartitions(nonPersistentStoreTopicName,Utils.mkList(new PartitionInfo(nonPersistentStoreTopicName,1,Node.noNode(),new Node[0],new Node[0]),new PartitionInfo(nonPersistentStoreTopicName,2,Node.noNode(),new Node[0],new Node[0])));
    TopicPartition partition=new TopicPartition(persistentStoreTopicName,2);
    restoreConsumer.updateEndOffsets(Collections.singletonMap(partition,13L));
    MockStateStoreSupplier.MockStateStore nonPersistentStore=new MockStateStoreSupplier.MockStateStore(nonPersistentStoreName,false);
    ProcessorStateManager stateMgr=new ProcessorStateManager(jobId,2,noPartitions,baseDir,restoreConsumer,false);
    try {
      restoreConsumer.reset();
      ArrayList<Integer> expectedKeys=new ArrayList<>();
      long offset=-1L;
      for (int i=1; i <= 3; i++) {
        offset=(long)(i + 100);
        int key=i;
        expectedKeys.add(i);
        restoreConsumer.bufferRecord(new ConsumerRecord<>(nonPersistentStoreTopicName,2,offset,key,0));
      }
      stateMgr.register(nonPersistentStore,true,nonPersistentStore.stateRestoreCallback);
      assertEquals(new TopicPartition(nonPersistentStoreTopicName,2),restoreConsumer.assignedPartition);
      assertEquals(0L,restoreConsumer.seekOffset);
      assertTrue(restoreConsumer.seekToBeginingCalled);
      assertTrue(restoreConsumer.seekToEndCalled);
      assertEquals(expectedKeys,nonPersistentStore.keys);
    }
  finally {
      stateMgr.close(Collections.<TopicPartition,Long>emptyMap());
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegisterPersistentStore() throws IOException {
  File baseDir=Files.createTempDirectory(stateDir).toFile();
  try {
    long lastCheckpointedOffset=10L;
    OffsetCheckpoint checkpoint=new OffsetCheckpoint(new File(baseDir,ProcessorStateManager.CHECKPOINT_FILE_NAME));
    checkpoint.write(Collections.singletonMap(new TopicPartition(persistentStoreTopicName,2),lastCheckpointedOffset));
    MockRestoreConsumer restoreConsumer=new MockRestoreConsumer();
    restoreConsumer.updatePartitions(persistentStoreTopicName,Utils.mkList(new PartitionInfo(persistentStoreTopicName,1,Node.noNode(),new Node[0],new Node[0]),new PartitionInfo(persistentStoreTopicName,2,Node.noNode(),new Node[0],new Node[0])));
    TopicPartition partition=new TopicPartition(persistentStoreTopicName,2);
    restoreConsumer.updateEndOffsets(Collections.singletonMap(partition,13L));
    MockStateStoreSupplier.MockStateStore persistentStore=new MockStateStoreSupplier.MockStateStore("persistentStore",true);
    ProcessorStateManager stateMgr=new ProcessorStateManager(jobId,2,noPartitions,baseDir,restoreConsumer,false);
    try {
      restoreConsumer.reset();
      ArrayList<Integer> expectedKeys=new ArrayList<>();
      long offset;
      for (int i=1; i <= 3; i++) {
        offset=(long)i;
        int key=i * 10;
        expectedKeys.add(key);
        restoreConsumer.bufferRecord(new ConsumerRecord<>(persistentStoreTopicName,2,offset,key,0));
      }
      stateMgr.register(persistentStore,true,persistentStore.stateRestoreCallback);
      assertEquals(new TopicPartition(persistentStoreTopicName,2),restoreConsumer.assignedPartition);
      assertEquals(lastCheckpointedOffset,restoreConsumer.seekOffset);
      assertFalse(restoreConsumer.seekToBeginingCalled);
      assertTrue(restoreConsumer.seekToEndCalled);
      assertEquals(expectedKeys,persistentStore.keys);
    }
  finally {
      stateMgr.close(Collections.<TopicPartition,Long>emptyMap());
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClose() throws IOException {
  File baseDir=Files.createTempDirectory(stateDir).toFile();
  File checkpointFile=new File(baseDir,ProcessorStateManager.CHECKPOINT_FILE_NAME);
  try {
    OffsetCheckpoint oldCheckpoint=new OffsetCheckpoint(checkpointFile);
    oldCheckpoint.write(Collections.<TopicPartition,Long>emptyMap());
    MockRestoreConsumer restoreConsumer=new MockRestoreConsumer();
    restoreConsumer.updatePartitions(persistentStoreTopicName,Utils.mkList(new PartitionInfo(persistentStoreTopicName,1,Node.noNode(),new Node[0],new Node[0])));
    restoreConsumer.updatePartitions(nonPersistentStoreTopicName,Utils.mkList(new PartitionInfo(nonPersistentStoreTopicName,1,Node.noNode(),new Node[0],new Node[0])));
    HashMap<TopicPartition,Long> ackedOffsets=new HashMap<>();
    ackedOffsets.put(new TopicPartition(persistentStoreTopicName,1),123L);
    ackedOffsets.put(new TopicPartition(nonPersistentStoreTopicName,1),456L);
    ackedOffsets.put(new TopicPartition(ProcessorStateManager.storeChangelogTopic(jobId,"otherTopic"),1),789L);
    MockStateStoreSupplier.MockStateStore persistentStore=new MockStateStoreSupplier.MockStateStore(persistentStoreName,true);
    MockStateStoreSupplier.MockStateStore nonPersistentStore=new MockStateStoreSupplier.MockStateStore(nonPersistentStoreName,false);
    ProcessorStateManager stateMgr=new ProcessorStateManager(jobId,1,noPartitions,baseDir,restoreConsumer,false);
    try {
      assertFalse(checkpointFile.exists());
      restoreConsumer.reset();
      stateMgr.register(persistentStore,true,persistentStore.stateRestoreCallback);
      restoreConsumer.reset();
      stateMgr.register(nonPersistentStore,true,nonPersistentStore.stateRestoreCallback);
    }
  finally {
      stateMgr.close(ackedOffsets);
    }
    assertTrue(persistentStore.flushed);
    assertTrue(persistentStore.closed);
    assertTrue(nonPersistentStore.flushed);
    assertTrue(nonPersistentStore.closed);
    assertTrue(checkpointFile.exists());
    OffsetCheckpoint newCheckpoint=new OffsetCheckpoint(checkpointFile);
    Map<TopicPartition,Long> checkpointedOffsets=newCheckpoint.read();
    assertEquals(1,checkpointedOffsets.size());
    assertEquals(new Long(123L + 1L),checkpointedOffsets.get(new TopicPartition(persistentStoreTopicName,1)));
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetStore() throws IOException {
  File baseDir=Files.createTempDirectory(stateDir).toFile();
  try {
    MockRestoreConsumer restoreConsumer=new MockRestoreConsumer();
    restoreConsumer.updatePartitions(nonPersistentStoreTopicName,Utils.mkList(new PartitionInfo(nonPersistentStoreTopicName,1,Node.noNode(),new Node[0],new Node[0])));
    MockStateStoreSupplier.MockStateStore mockStateStore=new MockStateStoreSupplier.MockStateStore(nonPersistentStoreName,false);
    ProcessorStateManager stateMgr=new ProcessorStateManager(jobId,1,noPartitions,baseDir,restoreConsumer,false);
    try {
      stateMgr.register(mockStateStore,true,mockStateStore.stateRestoreCallback);
      assertNull(stateMgr.getStore("noSuchStore"));
      assertEquals(mockStateStore,stateMgr.getStore(nonPersistentStoreName));
    }
  finally {
      stateMgr.close(Collections.<TopicPartition,Long>emptyMap());
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangeLogOffsets() throws IOException {
  File baseDir=Files.createTempDirectory(stateDir).toFile();
  try {
    long lastCheckpointedOffset=10L;
    String storeName1="store1";
    String storeName2="store2";
    String storeName3="store3";
    String storeTopicName1=ProcessorStateManager.storeChangelogTopic(jobId,storeName1);
    String storeTopicName2=ProcessorStateManager.storeChangelogTopic(jobId,storeName2);
    String storeTopicName3=ProcessorStateManager.storeChangelogTopic(jobId,storeName3);
    OffsetCheckpoint checkpoint=new OffsetCheckpoint(new File(baseDir,ProcessorStateManager.CHECKPOINT_FILE_NAME));
    checkpoint.write(Collections.singletonMap(new TopicPartition(storeTopicName1,0),lastCheckpointedOffset));
    MockRestoreConsumer restoreConsumer=new MockRestoreConsumer();
    restoreConsumer.updatePartitions(storeTopicName1,Utils.mkList(new PartitionInfo(storeTopicName1,0,Node.noNode(),new Node[0],new Node[0])));
    restoreConsumer.updatePartitions(storeTopicName2,Utils.mkList(new PartitionInfo(storeTopicName2,0,Node.noNode(),new Node[0],new Node[0])));
    restoreConsumer.updatePartitions(storeTopicName3,Utils.mkList(new PartitionInfo(storeTopicName3,0,Node.noNode(),new Node[0],new Node[0]),new PartitionInfo(storeTopicName3,1,Node.noNode(),new Node[0],new Node[0])));
    TopicPartition partition1=new TopicPartition(storeTopicName1,0);
    TopicPartition partition2=new TopicPartition(storeTopicName2,0);
    TopicPartition partition3=new TopicPartition(storeTopicName3,1);
    Map<TopicPartition,Long> endOffsets=new HashMap<>();
    endOffsets.put(partition1,13L);
    endOffsets.put(partition2,17L);
    restoreConsumer.updateEndOffsets(endOffsets);
    MockStateStoreSupplier.MockStateStore store1=new MockStateStoreSupplier.MockStateStore(storeName1,true);
    MockStateStoreSupplier.MockStateStore store2=new MockStateStoreSupplier.MockStateStore(storeName2,true);
    MockStateStoreSupplier.MockStateStore store3=new MockStateStoreSupplier.MockStateStore(storeName3,true);
    Set<TopicPartition> sourcePartitions=Utils.mkSet(new TopicPartition(storeTopicName3,1));
    ProcessorStateManager stateMgr=new ProcessorStateManager(jobId,0,sourcePartitions,baseDir,restoreConsumer,true);
    try {
      restoreConsumer.reset();
      stateMgr.register(store1,true,store1.stateRestoreCallback);
      stateMgr.register(store2,true,store2.stateRestoreCallback);
      stateMgr.register(store3,true,store3.stateRestoreCallback);
      Map<TopicPartition,Long> changeLogOffsets=stateMgr.checkpointedOffsets();
      assertEquals(3,changeLogOffsets.size());
      assertTrue(changeLogOffsets.containsKey(partition1));
      assertTrue(changeLogOffsets.containsKey(partition2));
      assertTrue(changeLogOffsets.containsKey(partition3));
      assertEquals(lastCheckpointedOffset,(long)changeLogOffsets.get(partition1));
      assertEquals(-1L,(long)changeLogOffsets.get(partition2));
      assertEquals(-1L,(long)changeLogOffsets.get(partition3));
    }
  finally {
      stateMgr.close(Collections.<TopicPartition,Long>emptyMap());
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.ProcessorTopologyTest </h4><pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTopologyMetadata(){
  final TopologyBuilder builder=new TopologyBuilder();
  builder.addSource("source-1","topic-1");
  builder.addSource("source-2","topic-2","topic-3");
  builder.addProcessor("processor-1",new MockProcessorSupplier<>(),"source-1");
  builder.addProcessor("processor-2",new MockProcessorSupplier<>(),"source-1","source-2");
  builder.addSink("sink-1","topic-3","processor-1");
  builder.addSink("sink-2","topic-4","processor-1","processor-2");
  final ProcessorTopology topology=builder.build(null);
  assertEquals(6,topology.processors().size());
  assertEquals(2,topology.sources().size());
  assertEquals(3,topology.sourceTopics().size());
  assertNotNull(topology.source("topic-1"));
  assertNotNull(topology.source("topic-2"));
  assertNotNull(topology.source("topic-3"));
  assertEquals(topology.source("topic-2"),topology.source("topic-3"));
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDrivingStatefulTopology(){
  String storeName="entries";
  driver=new ProcessorTopologyTestDriver(config,createStatefulTopology(storeName),storeName);
  driver.process(INPUT_TOPIC,"key1","value1",STRING_SERIALIZER,STRING_SERIALIZER);
  driver.process(INPUT_TOPIC,"key2","value2",STRING_SERIALIZER,STRING_SERIALIZER);
  driver.process(INPUT_TOPIC,"key3","value3",STRING_SERIALIZER,STRING_SERIALIZER);
  driver.process(INPUT_TOPIC,"key1","value4",STRING_SERIALIZER,STRING_SERIALIZER);
  assertNoOutputRecord(OUTPUT_TOPIC_1);
  KeyValueStore<String,String> store=driver.getKeyValueStore("entries");
  assertEquals("value4",store.get("key1"));
  assertEquals("value2",store.get("key2"));
  assertEquals("value3",store.get("key3"));
  assertNull(store.get("key4"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.QuickUnionTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void testUnite(){
  QuickUnion<Long> qu=new QuickUnion<>();
  long[] ids={1L,2L,3L,4L,5L};
  for (  long id : ids) {
    qu.add(id);
  }
  assertEquals(5,roots(qu,ids).size());
  qu.unite(1L,2L);
  assertEquals(4,roots(qu,ids).size());
  assertEquals(qu.root(1L),qu.root(2L));
  qu.unite(3L,4L);
  assertEquals(3,roots(qu,ids).size());
  assertEquals(qu.root(1L),qu.root(2L));
  assertEquals(qu.root(3L),qu.root(4L));
  qu.unite(1L,5L);
  assertEquals(2,roots(qu,ids).size());
  assertEquals(qu.root(1L),qu.root(2L));
  assertEquals(qu.root(2L),qu.root(5L));
  assertEquals(qu.root(3L),qu.root(4L));
  qu.unite(3L,5L);
  assertEquals(1,roots(qu,ids).size());
  assertEquals(qu.root(1L),qu.root(2L));
  assertEquals(qu.root(2L),qu.root(3L));
  assertEquals(qu.root(3L),qu.root(4L));
  assertEquals(qu.root(4L),qu.root(5L));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUniteMany(){
  QuickUnion<Long> qu=new QuickUnion<>();
  long[] ids={1L,2L,3L,4L,5L};
  for (  long id : ids) {
    qu.add(id);
  }
  assertEquals(5,roots(qu,ids).size());
  qu.unite(1L,2L,3L,4L);
  assertEquals(2,roots(qu,ids).size());
  assertEquals(qu.root(1L),qu.root(2L));
  assertEquals(qu.root(2L),qu.root(3L));
  assertEquals(qu.root(3L),qu.root(4L));
  assertNotEquals(qu.root(1L),qu.root(5L));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.RecordQueueTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTimeTracking(){
  assertTrue(queue.isEmpty());
  List<ConsumerRecord<byte[],byte[]>> list1=Arrays.asList(new ConsumerRecord<>("topic",1,2,recordKey,recordValue),new ConsumerRecord<>("topic",1,1,recordKey,recordValue),new ConsumerRecord<>("topic",1,3,recordKey,recordValue));
  queue.addRawRecords(list1,timestampExtractor);
  assertEquals(3,queue.size());
  assertEquals(TimestampTracker.NOT_KNOWN,queue.timestamp());
  assertEquals(2L,queue.poll().timestamp);
  assertEquals(2,queue.size());
  assertEquals(1L,queue.timestamp());
  assertEquals(1L,queue.poll().timestamp);
  assertEquals(1,queue.size());
  assertEquals(3L,queue.timestamp());
  List<ConsumerRecord<byte[],byte[]>> list2=Arrays.asList(new ConsumerRecord<>("topic",1,4,recordKey,recordValue),new ConsumerRecord<>("topic",1,1,recordKey,recordValue),new ConsumerRecord<>("topic",1,2,recordKey,recordValue));
  queue.addRawRecords(list2,timestampExtractor);
  assertEquals(4,queue.size());
  assertEquals(3L,queue.timestamp());
  assertEquals(3L,queue.poll().timestamp);
  assertEquals(3,queue.size());
  assertEquals(3L,queue.timestamp());
  assertEquals(4L,queue.poll().timestamp);
  assertEquals(3L,queue.timestamp());
  assertEquals(1L,queue.poll().timestamp);
  assertEquals(3L,queue.timestamp());
  assertEquals(2L,queue.poll().timestamp);
  assertEquals(0,queue.size());
  assertEquals(3L,queue.timestamp());
  List<ConsumerRecord<byte[],byte[]>> list3=Arrays.asList(new ConsumerRecord<>("topic",1,4,recordKey,recordValue),new ConsumerRecord<>("topic",1,5,recordKey,recordValue),new ConsumerRecord<>("topic",1,6,recordKey,recordValue));
  queue.addRawRecords(list3,timestampExtractor);
  assertEquals(3,queue.size());
  assertEquals(3L,queue.timestamp());
  assertEquals(4L,queue.poll().timestamp);
  assertEquals(2,queue.size());
  assertEquals(5L,queue.timestamp());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.StandbyTaskTest </h4><pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void testUpdate() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    StreamsConfig config=createConfig(baseDir);
    StandbyTask task=new StandbyTask(taskId,jobId,topicPartitions,topology,consumer,restoreStateConsumer,config,null);
    restoreStateConsumer.assign(new ArrayList<>(task.changeLogPartitions()));
    for (    ConsumerRecord<Integer,Integer> record : Arrays.asList(new ConsumerRecord<>(partition2.topic(),partition2.partition(),10,1,100),new ConsumerRecord<>(partition2.topic(),partition2.partition(),20,2,100),new ConsumerRecord<>(partition2.topic(),partition2.partition(),30,3,100))) {
      restoreStateConsumer.bufferRecord(record);
    }
    for (    Map.Entry<TopicPartition,Long> entry : task.checkpointedOffsets().entrySet()) {
      TopicPartition partition=entry.getKey();
      long offset=entry.getValue();
      if (offset >= 0) {
        restoreStateConsumer.seek(partition,offset);
      }
 else {
        restoreStateConsumer.seekToBeginning(partition);
      }
    }
    task.update(partition2,restoreStateConsumer.poll(100).records(partition2));
    StandbyContextImpl context=(StandbyContextImpl)task.context();
    MockStateStoreSupplier.MockStateStore store1=(MockStateStoreSupplier.MockStateStore)context.getStateMgr().getStore(storeName1);
    MockStateStoreSupplier.MockStateStore store2=(MockStateStoreSupplier.MockStateStore)context.getStateMgr().getStore(storeName2);
    assertEquals(Collections.emptyList(),store1.keys);
    assertEquals(Utils.mkList(1,2,3),store2.keys);
    task.close();
    File taskDir=new File(StreamThread.makeStateDir(jobId,baseDir.getCanonicalPath()),taskId.toString());
    OffsetCheckpoint checkpoint=new OffsetCheckpoint(new File(taskDir,ProcessorStateManager.CHECKPOINT_FILE_NAME));
    Map<TopicPartition,Long> offsets=checkpoint.read();
    assertEquals(1,offsets.size());
    assertEquals(new Long(30L + 1L),offsets.get(partition2));
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testUpdateKTable() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    consumer.assign(Utils.mkList(ktable));
    Map<TopicPartition,OffsetAndMetadata> committedOffsets=new HashMap<>();
    committedOffsets.put(new TopicPartition(ktable.topic(),ktable.partition()),new OffsetAndMetadata(0L));
    consumer.commitSync(committedOffsets);
    restoreStateConsumer.updatePartitions("ktable1",Utils.mkList(new PartitionInfo("ktable1",0,Node.noNode(),new Node[0],new Node[0]),new PartitionInfo("ktable1",1,Node.noNode(),new Node[0],new Node[0]),new PartitionInfo("ktable1",2,Node.noNode(),new Node[0],new Node[0])));
    StreamsConfig config=createConfig(baseDir);
    StandbyTask task=new StandbyTask(taskId,jobId,ktablePartitions,ktableTopology,consumer,restoreStateConsumer,config,null);
    restoreStateConsumer.assign(new ArrayList<>(task.changeLogPartitions()));
    for (    ConsumerRecord<Integer,Integer> record : Arrays.asList(new ConsumerRecord<>(ktable.topic(),ktable.partition(),10,1,100),new ConsumerRecord<>(ktable.topic(),ktable.partition(),20,2,100),new ConsumerRecord<>(ktable.topic(),ktable.partition(),30,3,100),new ConsumerRecord<>(ktable.topic(),ktable.partition(),40,4,100),new ConsumerRecord<>(ktable.topic(),ktable.partition(),50,5,100))) {
      restoreStateConsumer.bufferRecord(record);
    }
    for (    Map.Entry<TopicPartition,Long> entry : task.checkpointedOffsets().entrySet()) {
      TopicPartition partition=entry.getKey();
      long offset=entry.getValue();
      if (offset >= 0) {
        restoreStateConsumer.seek(partition,offset);
      }
 else {
        restoreStateConsumer.seekToBeginning(partition);
      }
    }
    List<ConsumerRecord<byte[],byte[]>> remaining=task.update(ktable,restoreStateConsumer.poll(100).records(ktable));
    assertEquals(5,remaining.size());
    committedOffsets.put(new TopicPartition(ktable.topic(),ktable.partition()),new OffsetAndMetadata(10L));
    consumer.commitSync(committedOffsets);
    task.commit();
    remaining=task.update(ktable,remaining);
    assertEquals(5,remaining.size());
    committedOffsets.put(new TopicPartition(ktable.topic(),ktable.partition()),new OffsetAndMetadata(11L));
    consumer.commitSync(committedOffsets);
    task.commit();
    remaining=task.update(ktable,remaining);
    assertEquals(4,remaining.size());
    committedOffsets.put(new TopicPartition(ktable.topic(),ktable.partition()),new OffsetAndMetadata(45L));
    consumer.commitSync(committedOffsets);
    task.commit();
    remaining=task.update(ktable,remaining);
    assertEquals(1,remaining.size());
    committedOffsets.put(new TopicPartition(ktable.topic(),ktable.partition()),new OffsetAndMetadata(50L));
    consumer.commitSync(committedOffsets);
    task.commit();
    remaining=task.update(ktable,remaining);
    assertEquals(1,remaining.size());
    committedOffsets.put(new TopicPartition(ktable.topic(),ktable.partition()),new OffsetAndMetadata(60L));
    consumer.commitSync(committedOffsets);
    task.commit();
    remaining=task.update(ktable,remaining);
    assertNull(remaining);
    task.close();
    File taskDir=new File(StreamThread.makeStateDir(jobId,baseDir.getCanonicalPath()),taskId.toString());
    OffsetCheckpoint checkpoint=new OffsetCheckpoint(new File(taskDir,ProcessorStateManager.CHECKPOINT_FILE_NAME));
    Map<TopicPartition,Long> offsets=checkpoint.read();
    assertEquals(1,offsets.size());
    assertEquals(new Long(51L),offsets.get(ktable));
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.StreamPartitionAssignorTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOnAssignment() throws Exception {
  StreamsConfig config=new StreamsConfig(configProps());
  MockProducer<byte[],byte[]> producer=new MockProducer<>(true,serializer,serializer);
  MockConsumer<byte[],byte[]> consumer=new MockConsumer<>(OffsetResetStrategy.EARLIEST);
  MockConsumer<byte[],byte[]> mockRestoreConsumer=new MockConsumer<>(OffsetResetStrategy.LATEST);
  TopicPartition t2p3=new TopicPartition("topic2",3);
  TopologyBuilder builder=new TopologyBuilder();
  builder.addSource("source1","topic1");
  builder.addSource("source2","topic2");
  builder.addProcessor("processor",new MockProcessorSupplier(),"source1","source2");
  UUID uuid=UUID.randomUUID();
  String client1="client1";
  StreamThread thread=new StreamThread(builder,config,producer,consumer,mockRestoreConsumer,"test",client1,uuid,new Metrics(),new SystemTime());
  StreamPartitionAssignor partitionAssignor=new StreamPartitionAssignor();
  partitionAssignor.configure(config.getConsumerConfigs(thread,"test",client1));
  List<TaskId> activeTaskList=Utils.mkList(task0,task3);
  Map<TaskId,Set<TopicPartition>> standbyTasks=new HashMap<>();
  standbyTasks.put(task1,Utils.mkSet(new TopicPartition("t1",0)));
  standbyTasks.put(task2,Utils.mkSet(new TopicPartition("t2",0)));
  AssignmentInfo info=new AssignmentInfo(activeTaskList,standbyTasks);
  PartitionAssignor.Assignment assignment=new PartitionAssignor.Assignment(Utils.mkList(t1p0,t2p3),info.encode());
  partitionAssignor.onAssignment(assignment);
  assertEquals(Utils.mkSet(task0),partitionAssignor.tasksForPartition(t1p0));
  assertEquals(Utils.mkSet(task3),partitionAssignor.tasksForPartition(t2p3));
  assertEquals(standbyTasks,partitionAssignor.standbyTasks());
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignWithStates() throws Exception {
  StreamsConfig config=new StreamsConfig(configProps());
  MockProducer<byte[],byte[]> producer=new MockProducer<>(true,serializer,serializer);
  MockConsumer<byte[],byte[]> consumer=new MockConsumer<>(OffsetResetStrategy.EARLIEST);
  MockConsumer<byte[],byte[]> mockRestoreConsumer=new MockConsumer<>(OffsetResetStrategy.LATEST);
  TopologyBuilder builder=new TopologyBuilder();
  builder.addSource("source1","topic1");
  builder.addSource("source2","topic2");
  builder.addProcessor("processor-1",new MockProcessorSupplier(),"source1");
  builder.addStateStore(new MockStateStoreSupplier("store1",false),"processor-1");
  builder.addProcessor("processor-2",new MockProcessorSupplier(),"source2");
  builder.addStateStore(new MockStateStoreSupplier("store2",false),"processor-2");
  builder.addStateStore(new MockStateStoreSupplier("store3",false),"processor-2");
  List<String> topics=Utils.mkList("topic1","topic2");
  TaskId task00=new TaskId(0,0);
  TaskId task01=new TaskId(0,1);
  TaskId task02=new TaskId(0,2);
  TaskId task10=new TaskId(1,0);
  TaskId task11=new TaskId(1,1);
  TaskId task12=new TaskId(1,2);
  UUID uuid1=UUID.randomUUID();
  UUID uuid2=UUID.randomUUID();
  String client1="client1";
  String client2="client2";
  StreamThread thread10=new StreamThread(builder,config,producer,consumer,mockRestoreConsumer,"test",client1,uuid1,new Metrics(),new SystemTime());
  StreamPartitionAssignor partitionAssignor=new StreamPartitionAssignor();
  partitionAssignor.configure(config.getConsumerConfigs(thread10,"test",client1));
  Map<String,PartitionAssignor.Subscription> subscriptions=new HashMap<>();
  subscriptions.put("consumer10",new PartitionAssignor.Subscription(topics,new SubscriptionInfo(uuid1,Collections.<TaskId>emptySet(),Collections.<TaskId>emptySet()).encode()));
  subscriptions.put("consumer11",new PartitionAssignor.Subscription(topics,new SubscriptionInfo(uuid1,Collections.<TaskId>emptySet(),Collections.<TaskId>emptySet()).encode()));
  subscriptions.put("consumer20",new PartitionAssignor.Subscription(topics,new SubscriptionInfo(uuid2,Collections.<TaskId>emptySet(),Collections.<TaskId>emptySet()).encode()));
  Map<String,PartitionAssignor.Assignment> assignments=partitionAssignor.assign(metadata,subscriptions);
  assertEquals(2,assignments.get("consumer10").partitions().size());
  assertEquals(2,assignments.get("consumer11").partitions().size());
  assertEquals(2,assignments.get("consumer20").partitions().size());
  assertEquals(2,AssignmentInfo.decode(assignments.get("consumer10").userData()).activeTasks.size());
  assertEquals(2,AssignmentInfo.decode(assignments.get("consumer11").userData()).activeTasks.size());
  assertEquals(2,AssignmentInfo.decode(assignments.get("consumer20").userData()).activeTasks.size());
  assertEquals(Utils.mkSet(task00,task01,task02),partitionAssignor.tasksForState("store1"));
  assertEquals(Utils.mkSet(task10,task11,task12),partitionAssignor.tasksForState("store2"));
  assertEquals(Utils.mkSet(task10,task11,task12),partitionAssignor.tasksForState("store3"));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void testSubscription() throws Exception {
  StreamsConfig config=new StreamsConfig(configProps());
  MockProducer<byte[],byte[]> producer=new MockProducer<>(true,serializer,serializer);
  MockConsumer<byte[],byte[]> consumer=new MockConsumer<>(OffsetResetStrategy.EARLIEST);
  MockConsumer<byte[],byte[]> mockRestoreConsumer=new MockConsumer<>(OffsetResetStrategy.LATEST);
  TopologyBuilder builder=new TopologyBuilder();
  builder.addSource("source1","topic1");
  builder.addSource("source2","topic2");
  builder.addProcessor("processor",new MockProcessorSupplier(),"source1","source2");
  final Set<TaskId> prevTasks=Utils.mkSet(new TaskId(0,1),new TaskId(1,1),new TaskId(2,1));
  final Set<TaskId> cachedTasks=Utils.mkSet(new TaskId(0,1),new TaskId(1,1),new TaskId(2,1),new TaskId(0,2),new TaskId(1,2),new TaskId(2,2));
  String clientId="client-id";
  UUID processId=UUID.randomUUID();
  StreamThread thread=new StreamThread(builder,config,producer,consumer,mockRestoreConsumer,"test",clientId,processId,new Metrics(),new SystemTime()){
    @Override public Set<TaskId> prevTasks(){
      return prevTasks;
    }
    @Override public Set<TaskId> cachedTasks(){
      return cachedTasks;
    }
  }
;
  StreamPartitionAssignor partitionAssignor=new StreamPartitionAssignor();
  partitionAssignor.configure(config.getConsumerConfigs(thread,"test",clientId));
  PartitionAssignor.Subscription subscription=partitionAssignor.subscription(Utils.mkSet("topic1","topic2"));
  Collections.sort(subscription.topics());
  assertEquals(Utils.mkList("topic1","topic2"),subscription.topics());
  Set<TaskId> standbyTasks=new HashSet<>(cachedTasks);
  standbyTasks.removeAll(prevTasks);
  SubscriptionInfo info=new SubscriptionInfo(processId,prevTasks,standbyTasks);
  assertEquals(info.encode(),subscription.userData());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignBasic() throws Exception {
  StreamsConfig config=new StreamsConfig(configProps());
  MockProducer<byte[],byte[]> producer=new MockProducer<>(true,serializer,serializer);
  MockConsumer<byte[],byte[]> consumer=new MockConsumer<>(OffsetResetStrategy.EARLIEST);
  MockConsumer<byte[],byte[]> mockRestoreConsumer=new MockConsumer<>(OffsetResetStrategy.LATEST);
  TopologyBuilder builder=new TopologyBuilder();
  builder.addSource("source1","topic1");
  builder.addSource("source2","topic2");
  builder.addProcessor("processor",new MockProcessorSupplier(),"source1","source2");
  List<String> topics=Utils.mkList("topic1","topic2");
  Set<TaskId> allTasks=Utils.mkSet(task0,task1,task2);
  final Set<TaskId> prevTasks10=Utils.mkSet(task0);
  final Set<TaskId> prevTasks11=Utils.mkSet(task1);
  final Set<TaskId> prevTasks20=Utils.mkSet(task2);
  final Set<TaskId> standbyTasks10=Utils.mkSet(task1);
  final Set<TaskId> standbyTasks11=Utils.mkSet(task2);
  final Set<TaskId> standbyTasks20=Utils.mkSet(task0);
  UUID uuid1=UUID.randomUUID();
  UUID uuid2=UUID.randomUUID();
  String client1="client1";
  String client2="client2";
  StreamThread thread10=new StreamThread(builder,config,producer,consumer,mockRestoreConsumer,"test",client1,uuid1,new Metrics(),new SystemTime());
  StreamPartitionAssignor partitionAssignor=new StreamPartitionAssignor();
  partitionAssignor.configure(config.getConsumerConfigs(thread10,"test",client1));
  Map<String,PartitionAssignor.Subscription> subscriptions=new HashMap<>();
  subscriptions.put("consumer10",new PartitionAssignor.Subscription(topics,new SubscriptionInfo(uuid1,prevTasks10,standbyTasks10).encode()));
  subscriptions.put("consumer11",new PartitionAssignor.Subscription(topics,new SubscriptionInfo(uuid1,prevTasks11,standbyTasks11).encode()));
  subscriptions.put("consumer20",new PartitionAssignor.Subscription(topics,new SubscriptionInfo(uuid2,prevTasks20,standbyTasks20).encode()));
  Map<String,PartitionAssignor.Assignment> assignments=partitionAssignor.assign(metadata,subscriptions);
  assertEquals(Utils.mkSet(Utils.mkSet(t1p0,t2p0),Utils.mkSet(t1p1,t2p1)),Utils.mkSet(new HashSet<>(assignments.get("consumer10").partitions()),new HashSet<>(assignments.get("consumer11").partitions())));
  assertEquals(Utils.mkSet(t1p2,t2p2),new HashSet<>(assignments.get("consumer20").partitions()));
  Set<TaskId> allActiveTasks=new HashSet<>();
  AssignmentInfo info10=checkAssignment(assignments.get("consumer10"));
  allActiveTasks.addAll(info10.activeTasks);
  AssignmentInfo info11=checkAssignment(assignments.get("consumer11"));
  allActiveTasks.addAll(info11.activeTasks);
  assertEquals(Utils.mkSet(task0,task1),allActiveTasks);
  AssignmentInfo info20=checkAssignment(assignments.get("consumer20"));
  allActiveTasks.addAll(info20.activeTasks);
  assertEquals(3,allActiveTasks.size());
  assertEquals(allTasks,new HashSet<>(allActiveTasks));
  assertEquals(3,allActiveTasks.size());
  assertEquals(allTasks,allActiveTasks);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.StreamTaskTest </h4><pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testPauseResume() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    StreamsConfig config=createConfig(baseDir);
    StreamTask task=new StreamTask(new TaskId(1,1),"jobId",partitions,topology,consumer,producer,restoreStateConsumer,config,null);
    task.addRecords(partition1,records(new ConsumerRecord<>(partition1.topic(),partition1.partition(),10,recordKey,recordValue),new ConsumerRecord<>(partition1.topic(),partition1.partition(),20,recordKey,recordValue)));
    task.addRecords(partition2,records(new ConsumerRecord<>(partition2.topic(),partition2.partition(),35,recordKey,recordValue),new ConsumerRecord<>(partition2.topic(),partition2.partition(),45,recordKey,recordValue),new ConsumerRecord<>(partition2.topic(),partition2.partition(),55,recordKey,recordValue),new ConsumerRecord<>(partition2.topic(),partition2.partition(),65,recordKey,recordValue)));
    assertEquals(5,task.process());
    assertEquals(1,source1.numReceived);
    assertEquals(0,source2.numReceived);
    assertEquals(1,consumer.paused().size());
    assertTrue(consumer.paused().contains(partition2));
    task.addRecords(partition1,records(new ConsumerRecord<>(partition1.topic(),partition1.partition(),30,recordKey,recordValue),new ConsumerRecord<>(partition1.topic(),partition1.partition(),40,recordKey,recordValue),new ConsumerRecord<>(partition1.topic(),partition1.partition(),50,recordKey,recordValue)));
    assertEquals(2,consumer.paused().size());
    assertTrue(consumer.paused().contains(partition1));
    assertTrue(consumer.paused().contains(partition2));
    assertEquals(7,task.process());
    assertEquals(1,source1.numReceived);
    assertEquals(1,source2.numReceived);
    assertEquals(1,consumer.paused().size());
    assertTrue(consumer.paused().contains(partition1));
    assertEquals(6,task.process());
    assertEquals(2,source1.numReceived);
    assertEquals(1,source2.numReceived);
    assertEquals(0,consumer.paused().size());
    task.close();
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void testProcessOrder() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    StreamsConfig config=createConfig(baseDir);
    StreamTask task=new StreamTask(new TaskId(0,0),"jobId",partitions,topology,consumer,producer,restoreStateConsumer,config,null);
    task.addRecords(partition1,records(new ConsumerRecord<>(partition1.topic(),partition1.partition(),10,recordKey,recordValue),new ConsumerRecord<>(partition1.topic(),partition1.partition(),20,recordKey,recordValue),new ConsumerRecord<>(partition1.topic(),partition1.partition(),30,recordKey,recordValue)));
    task.addRecords(partition2,records(new ConsumerRecord<>(partition2.topic(),partition2.partition(),25,recordKey,recordValue),new ConsumerRecord<>(partition2.topic(),partition2.partition(),35,recordKey,recordValue),new ConsumerRecord<>(partition2.topic(),partition2.partition(),45,recordKey,recordValue)));
    assertEquals(5,task.process());
    assertEquals(1,source1.numReceived);
    assertEquals(0,source2.numReceived);
    assertEquals(4,task.process());
    assertEquals(1,source1.numReceived);
    assertEquals(1,source2.numReceived);
    assertEquals(3,task.process());
    assertEquals(2,source1.numReceived);
    assertEquals(1,source2.numReceived);
    assertEquals(2,task.process());
    assertEquals(3,source1.numReceived);
    assertEquals(1,source2.numReceived);
    assertEquals(1,task.process());
    assertEquals(3,source1.numReceived);
    assertEquals(2,source2.numReceived);
    assertEquals(0,task.process());
    assertEquals(3,source1.numReceived);
    assertEquals(3,source2.numReceived);
    task.close();
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.StreamThreadTest </h4><pre class="type-8 type-9 type-7 type-3 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testPartitionAssignmentChange() throws Exception {
  StreamsConfig config=new StreamsConfig(configProps());
  MockProducer<byte[],byte[]> producer=new MockProducer<>(true,serializer,serializer);
  MockConsumer<byte[],byte[]> consumer=new MockConsumer<>(OffsetResetStrategy.EARLIEST);
  final MockConsumer<byte[],byte[]> mockRestoreConsumer=new MockConsumer<>(OffsetResetStrategy.LATEST);
  TopologyBuilder builder=new TopologyBuilder();
  builder.addSource("source1","topic1");
  builder.addSource("source2","topic2");
  builder.addSource("source3","topic3");
  builder.addProcessor("processor",new MockProcessorSupplier(),"source2","source3");
  StreamThread thread=new StreamThread(builder,config,producer,consumer,mockRestoreConsumer,jobId,clientId,processId,new Metrics(),new SystemTime()){
    @Override protected StreamTask createStreamTask(    TaskId id,    Collection<TopicPartition> partitionsForTask){
      ProcessorTopology topology=builder.build(id.topicGroupId);
      return new TestStreamTask(id,jobId,partitionsForTask,topology,consumer,producer,mockRestoreConsumer,config);
    }
  }
;
  initPartitionGrouper(config,thread);
  ConsumerRebalanceListener rebalanceListener=thread.rebalanceListener;
  assertTrue(thread.tasks().isEmpty());
  List<TopicPartition> revokedPartitions;
  List<TopicPartition> assignedPartitions;
  Set<TopicPartition> expectedGroup1;
  Set<TopicPartition> expectedGroup2;
  revokedPartitions=Collections.emptyList();
  assignedPartitions=Collections.singletonList(t1p1);
  expectedGroup1=new HashSet<>(Arrays.asList(t1p1));
  rebalanceListener.onPartitionsRevoked(revokedPartitions);
  rebalanceListener.onPartitionsAssigned(assignedPartitions);
  assertTrue(thread.tasks().containsKey(task1));
  assertEquals(expectedGroup1,thread.tasks().get(task1).partitions());
  assertEquals(1,thread.tasks().size());
  revokedPartitions=assignedPartitions;
  assignedPartitions=Collections.singletonList(t1p2);
  expectedGroup2=new HashSet<>(Arrays.asList(t1p2));
  rebalanceListener.onPartitionsRevoked(revokedPartitions);
  rebalanceListener.onPartitionsAssigned(assignedPartitions);
  assertTrue(thread.tasks().containsKey(task2));
  assertEquals(expectedGroup2,thread.tasks().get(task2).partitions());
  assertEquals(1,thread.tasks().size());
  revokedPartitions=assignedPartitions;
  assignedPartitions=Arrays.asList(t1p1,t1p2);
  expectedGroup1=new HashSet<>(Collections.singleton(t1p1));
  expectedGroup2=new HashSet<>(Collections.singleton(t1p2));
  rebalanceListener.onPartitionsRevoked(revokedPartitions);
  rebalanceListener.onPartitionsAssigned(assignedPartitions);
  assertTrue(thread.tasks().containsKey(task1));
  assertTrue(thread.tasks().containsKey(task2));
  assertEquals(expectedGroup1,thread.tasks().get(task1).partitions());
  assertEquals(expectedGroup2,thread.tasks().get(task2).partitions());
  assertEquals(2,thread.tasks().size());
  revokedPartitions=assignedPartitions;
  assignedPartitions=Arrays.asList(t2p1,t2p2,t3p1,t3p2);
  expectedGroup1=new HashSet<>(Arrays.asList(t2p1,t3p1));
  expectedGroup2=new HashSet<>(Arrays.asList(t2p2,t3p2));
  rebalanceListener.onPartitionsRevoked(revokedPartitions);
  rebalanceListener.onPartitionsAssigned(assignedPartitions);
  assertTrue(thread.tasks().containsKey(task4));
  assertTrue(thread.tasks().containsKey(task5));
  assertEquals(expectedGroup1,thread.tasks().get(task4).partitions());
  assertEquals(expectedGroup2,thread.tasks().get(task5).partitions());
  assertEquals(2,thread.tasks().size());
  revokedPartitions=assignedPartitions;
  assignedPartitions=Arrays.asList(t1p1,t2p1,t3p1);
  expectedGroup1=new HashSet<>(Arrays.asList(t1p1));
  expectedGroup2=new HashSet<>(Arrays.asList(t2p1,t3p1));
  rebalanceListener.onPartitionsRevoked(revokedPartitions);
  rebalanceListener.onPartitionsAssigned(assignedPartitions);
  assertTrue(thread.tasks().containsKey(task1));
  assertTrue(thread.tasks().containsKey(task4));
  assertEquals(expectedGroup1,thread.tasks().get(task1).partitions());
  assertEquals(expectedGroup2,thread.tasks().get(task4).partitions());
  assertEquals(2,thread.tasks().size());
  revokedPartitions=assignedPartitions;
  assignedPartitions=Collections.emptyList();
  rebalanceListener.onPartitionsRevoked(revokedPartitions);
  rebalanceListener.onPartitionsAssigned(assignedPartitions);
  assertTrue(thread.tasks().isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMaybeCommit() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    final long commitInterval=1000L;
    Properties props=configProps();
    props.setProperty(StreamsConfig.STATE_DIR_CONFIG,baseDir.getCanonicalPath());
    props.setProperty(StreamsConfig.COMMIT_INTERVAL_MS_CONFIG,Long.toString(commitInterval));
    StreamsConfig config=new StreamsConfig(props);
    MockProducer<byte[],byte[]> producer=new MockProducer<>(true,serializer,serializer);
    MockConsumer<byte[],byte[]> consumer=new MockConsumer<>(OffsetResetStrategy.EARLIEST);
    final MockConsumer<byte[],byte[]> mockRestoreConsumer=new MockConsumer<>(OffsetResetStrategy.EARLIEST);
    MockTime mockTime=new MockTime();
    TopologyBuilder builder=new TopologyBuilder();
    builder.addSource("source1","topic1");
    StreamThread thread=new StreamThread(builder,config,producer,consumer,mockRestoreConsumer,jobId,clientId,processId,new Metrics(),mockTime){
      @Override public void maybeCommit(){
        super.maybeCommit();
      }
      @Override protected StreamTask createStreamTask(      TaskId id,      Collection<TopicPartition> partitionsForTask){
        ProcessorTopology topology=builder.build(id.topicGroupId);
        return new TestStreamTask(id,jobId,partitionsForTask,topology,consumer,producer,mockRestoreConsumer,config);
      }
    }
;
    initPartitionGrouper(config,thread);
    ConsumerRebalanceListener rebalanceListener=thread.rebalanceListener;
    List<TopicPartition> revokedPartitions;
    List<TopicPartition> assignedPartitions;
    revokedPartitions=Collections.emptyList();
    assignedPartitions=Arrays.asList(t1p1,t1p2);
    rebalanceListener.onPartitionsRevoked(revokedPartitions);
    rebalanceListener.onPartitionsAssigned(assignedPartitions);
    assertEquals(2,thread.tasks().size());
    mockTime.sleep(commitInterval - 10L);
    thread.maybeCommit();
    for (    StreamTask task : thread.tasks().values()) {
      assertFalse(((TestStreamTask)task).committed);
    }
    mockTime.sleep(11L);
    thread.maybeCommit();
    for (    StreamTask task : thread.tasks().values()) {
      assertTrue(((TestStreamTask)task).committed);
      ((TestStreamTask)task).committed=false;
    }
    mockTime.sleep(commitInterval - 10L);
    thread.maybeCommit();
    for (    StreamTask task : thread.tasks().values()) {
      assertFalse(((TestStreamTask)task).committed);
    }
    mockTime.sleep(11L);
    thread.maybeCommit();
    for (    StreamTask task : thread.tasks().values()) {
      assertTrue(((TestStreamTask)task).committed);
      ((TestStreamTask)task).committed=false;
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMaybeClean() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    final long cleanupDelay=1000L;
    Properties props=configProps();
    props.setProperty(StreamsConfig.STATE_CLEANUP_DELAY_MS_CONFIG,Long.toString(cleanupDelay));
    props.setProperty(StreamsConfig.STATE_DIR_CONFIG,baseDir.getCanonicalPath());
    StreamsConfig config=new StreamsConfig(props);
    File jobDir=new File(baseDir,jobId);
    jobDir.mkdir();
    File stateDir1=new File(jobDir,task1.toString());
    File stateDir2=new File(jobDir,task2.toString());
    File stateDir3=new File(jobDir,task3.toString());
    File extraDir=new File(jobDir,"X");
    stateDir1.mkdir();
    stateDir2.mkdir();
    stateDir3.mkdir();
    extraDir.mkdir();
    MockProducer<byte[],byte[]> producer=new MockProducer<>(true,serializer,serializer);
    MockConsumer<byte[],byte[]> consumer=new MockConsumer<>(OffsetResetStrategy.EARLIEST);
    final MockConsumer<byte[],byte[]> mockRestoreConsumer=new MockConsumer<>(OffsetResetStrategy.LATEST);
    MockTime mockTime=new MockTime();
    TopologyBuilder builder=new TopologyBuilder();
    builder.addSource("source1","topic1");
    StreamThread thread=new StreamThread(builder,config,producer,consumer,mockRestoreConsumer,jobId,clientId,processId,new Metrics(),mockTime){
      @Override public void maybeClean(){
        super.maybeClean();
      }
      @Override protected StreamTask createStreamTask(      TaskId id,      Collection<TopicPartition> partitionsForTask){
        ProcessorTopology topology=builder.build(id.topicGroupId);
        return new TestStreamTask(id,jobId,partitionsForTask,topology,consumer,producer,mockRestoreConsumer,config);
      }
    }
;
    initPartitionGrouper(config,thread);
    ConsumerRebalanceListener rebalanceListener=thread.rebalanceListener;
    assertTrue(thread.tasks().isEmpty());
    mockTime.sleep(cleanupDelay);
    assertTrue(stateDir1.exists());
    assertTrue(stateDir2.exists());
    assertTrue(stateDir3.exists());
    assertTrue(extraDir.exists());
    List<TopicPartition> revokedPartitions;
    List<TopicPartition> assignedPartitions;
    Map<Integer,StreamTask> prevTasks;
    revokedPartitions=Collections.emptyList();
    assignedPartitions=Arrays.asList(t1p1,t1p2);
    prevTasks=new HashMap(thread.tasks());
    rebalanceListener.onPartitionsRevoked(revokedPartitions);
    rebalanceListener.onPartitionsAssigned(assignedPartitions);
    assertTrue(prevTasks.isEmpty());
    assertEquals(2,thread.tasks().size());
    mockTime.sleep(cleanupDelay - 10L);
    thread.maybeClean();
    assertTrue(stateDir1.exists());
    assertTrue(stateDir2.exists());
    assertTrue(stateDir3.exists());
    assertTrue(extraDir.exists());
    mockTime.sleep(11L);
    thread.maybeClean();
    assertTrue(stateDir1.exists());
    assertTrue(stateDir2.exists());
    assertFalse(stateDir3.exists());
    assertTrue(extraDir.exists());
    revokedPartitions=assignedPartitions;
    assignedPartitions=Collections.emptyList();
    prevTasks=new HashMap(thread.tasks());
    rebalanceListener.onPartitionsRevoked(revokedPartitions);
    rebalanceListener.onPartitionsAssigned(assignedPartitions);
    assertEquals(2,prevTasks.size());
    for (    StreamTask task : prevTasks.values()) {
      assertTrue(((TestStreamTask)task).committed);
      ((TestStreamTask)task).committed=false;
    }
    assertTrue(thread.tasks().isEmpty());
    mockTime.sleep(cleanupDelay - 10L);
    thread.maybeClean();
    assertTrue(stateDir1.exists());
    assertTrue(stateDir2.exists());
    assertFalse(stateDir3.exists());
    assertTrue(extraDir.exists());
    mockTime.sleep(11L);
    thread.maybeClean();
    assertFalse(stateDir1.exists());
    assertFalse(stateDir2.exists());
    assertFalse(stateDir3.exists());
    assertTrue(extraDir.exists());
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.assignment.AssginmentInfoTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEncodeDecode(){
  List<TaskId> activeTasks=Arrays.asList(new TaskId(0,0),new TaskId(0,0),new TaskId(0,1),new TaskId(1,0));
  Map<TaskId,Set<TopicPartition>> standbyTasks=new HashMap<>();
  standbyTasks.put(new TaskId(1,1),Utils.mkSet(new TopicPartition("t1",1),new TopicPartition("t2",1)));
  standbyTasks.put(new TaskId(2,0),Utils.mkSet(new TopicPartition("t3",0),new TopicPartition("t3",0)));
  AssignmentInfo info=new AssignmentInfo(activeTasks,standbyTasks);
  AssignmentInfo decoded=AssignmentInfo.decode(info.encode());
  assertEquals(info,decoded);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.assignment.SubscriptionInfoTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEncodeDecode(){
  UUID processId=UUID.randomUUID();
  Set<TaskId> activeTasks=new HashSet<>(Arrays.asList(new TaskId(0,0),new TaskId(0,1),new TaskId(1,0)));
  Set<TaskId> standbyTasks=new HashSet<>(Arrays.asList(new TaskId(1,1),new TaskId(2,0)));
  SubscriptionInfo info=new SubscriptionInfo(processId,activeTasks,standbyTasks);
  SubscriptionInfo decoded=SubscriptionInfo.decode(info.encode());
  assertEquals(info,decoded);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.state.internals.AbstractKeyValueStoreTest </h4><pre class="type-13 type-14 type-10 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutGetRange(){
  KeyValueStoreTestDriver<Integer,String> driver=KeyValueStoreTestDriver.create(Integer.class,String.class);
  KeyValueStore<Integer,String> store=createKeyValueStore(driver.context(),Integer.class,String.class,false);
  try {
    store.put(0,"zero");
    store.put(1,"one");
    store.put(2,"two");
    store.put(4,"four");
    store.put(5,"five");
    assertEquals(5,driver.sizeOf(store));
    assertEquals("zero",store.get(0));
    assertEquals("one",store.get(1));
    assertEquals("two",store.get(2));
    assertNull(store.get(3));
    assertEquals("four",store.get(4));
    assertEquals("five",store.get(5));
    store.delete(5);
    store.flush();
    assertEquals("zero",driver.flushedEntryStored(0));
    assertEquals("one",driver.flushedEntryStored(1));
    assertEquals("two",driver.flushedEntryStored(2));
    assertEquals("four",driver.flushedEntryStored(4));
    assertEquals(null,driver.flushedEntryStored(5));
    assertEquals(false,driver.flushedEntryRemoved(0));
    assertEquals(false,driver.flushedEntryRemoved(1));
    assertEquals(false,driver.flushedEntryRemoved(2));
    assertEquals(false,driver.flushedEntryRemoved(4));
    assertEquals(true,driver.flushedEntryRemoved(5));
    try (KeyValueIterator<Integer,String> iter=store.range(2,4)){
      while (iter.hasNext()) {
        KeyValue<Integer,String> entry=iter.next();
        if (entry.key.equals(2))         assertEquals("two",entry.value);
 else         if (entry.key.equals(4))         assertEquals("four",entry.value);
 else         fail("Unexpected entry: " + entry);
      }
    }
     try (KeyValueIterator<Integer,String> iter=store.range(2,6)){
      while (iter.hasNext()) {
        KeyValue<Integer,String> entry=iter.next();
        if (entry.key.equals(2))         assertEquals("two",entry.value);
 else         if (entry.key.equals(4))         assertEquals("four",entry.value);
 else         fail("Unexpected entry: " + entry);
      }
    }
   }
  finally {
    store.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutGetRangeWithDefaultSerdes(){
  KeyValueStoreTestDriver<Integer,String> driver=KeyValueStoreTestDriver.create(Integer.class,String.class);
  KeyValueStore<Integer,String> store=createKeyValueStore(driver.context(),Integer.class,String.class,true);
  try {
    store.put(0,"zero");
    store.put(1,"one");
    store.put(2,"two");
    store.put(4,"four");
    store.put(5,"five");
    assertEquals(5,driver.sizeOf(store));
    assertEquals("zero",store.get(0));
    assertEquals("one",store.get(1));
    assertEquals("two",store.get(2));
    assertNull(store.get(3));
    assertEquals("four",store.get(4));
    assertEquals("five",store.get(5));
    store.delete(5);
    store.flush();
    assertEquals("zero",driver.flushedEntryStored(0));
    assertEquals("one",driver.flushedEntryStored(1));
    assertEquals("two",driver.flushedEntryStored(2));
    assertEquals("four",driver.flushedEntryStored(4));
    assertEquals(null,driver.flushedEntryStored(5));
    assertEquals(false,driver.flushedEntryRemoved(0));
    assertEquals(false,driver.flushedEntryRemoved(1));
    assertEquals(false,driver.flushedEntryRemoved(2));
    assertEquals(false,driver.flushedEntryRemoved(4));
    assertEquals(true,driver.flushedEntryRemoved(5));
  }
  finally {
    store.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRestoreWithDefaultSerdes(){
  KeyValueStoreTestDriver<Integer,String> driver=KeyValueStoreTestDriver.create(Integer.class,String.class);
  driver.addEntryToRestoreLog(0,"zero");
  driver.addEntryToRestoreLog(1,"one");
  driver.addEntryToRestoreLog(2,"two");
  driver.addEntryToRestoreLog(4,"four");
  KeyValueStore<Integer,String> store=createKeyValueStore(driver.context(),Integer.class,String.class,true);
  try {
    assertEquals(0,driver.checkForRestoredEntries(store));
    assertEquals(4,driver.sizeOf(store));
  }
  finally {
    store.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRestore(){
  KeyValueStoreTestDriver<Integer,String> driver=KeyValueStoreTestDriver.create(Integer.class,String.class);
  driver.addEntryToRestoreLog(0,"zero");
  driver.addEntryToRestoreLog(1,"one");
  driver.addEntryToRestoreLog(2,"two");
  driver.addEntryToRestoreLog(4,"four");
  KeyValueStore<Integer,String> store=createKeyValueStore(driver.context(),Integer.class,String.class,false);
  try {
    assertEquals(0,driver.checkForRestoredEntries(store));
    assertEquals(4,driver.sizeOf(store));
  }
  finally {
    store.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.state.internals.InMemoryLRUCacheStoreTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEvict(){
  KeyValueStoreTestDriver<Integer,String> driver=KeyValueStoreTestDriver.create(Integer.class,String.class);
  KeyValueStore<Integer,String> store=createKeyValueStore(driver.context(),Integer.class,String.class,false);
  try {
    store.put(0,"zero");
    store.put(1,"one");
    store.put(2,"two");
    store.put(3,"three");
    store.put(4,"four");
    store.put(5,"five");
    store.put(6,"six");
    store.put(7,"seven");
    store.put(8,"eight");
    store.put(9,"nine");
    assertEquals(10,driver.sizeOf(store));
    store.put(10,"ten");
    store.flush();
    assertEquals(10,driver.sizeOf(store));
    assertTrue(driver.flushedEntryRemoved(0));
    assertEquals(1,driver.numFlushedEntryRemoved());
    store.delete(1);
    store.flush();
    assertEquals(9,driver.sizeOf(store));
    assertTrue(driver.flushedEntryRemoved(0));
    assertTrue(driver.flushedEntryRemoved(1));
    assertEquals(2,driver.numFlushedEntryRemoved());
    store.put(11,"eleven");
    store.flush();
    assertEquals(10,driver.sizeOf(store));
    assertEquals(2,driver.numFlushedEntryRemoved());
    store.put(2,"two-again");
    store.flush();
    assertEquals(10,driver.sizeOf(store));
    assertEquals(2,driver.numFlushedEntryRemoved());
    store.put(12,"twelve");
    store.flush();
    assertEquals(10,driver.sizeOf(store));
    assertTrue(driver.flushedEntryRemoved(0));
    assertTrue(driver.flushedEntryRemoved(1));
    assertTrue(driver.flushedEntryRemoved(2));
    assertEquals(3,driver.numFlushedEntryRemoved());
  }
  finally {
    store.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.state.internals.OffsetCheckpointTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadWrite() throws IOException {
  File f=TestUtils.tempFile();
  OffsetCheckpoint checkpoint=new OffsetCheckpoint(f);
  try {
    Map<TopicPartition,Long> offsets=new HashMap<>();
    offsets.put(new TopicPartition(topic,0),0L);
    offsets.put(new TopicPartition(topic,1),1L);
    offsets.put(new TopicPartition(topic,2),2L);
    checkpoint.write(offsets);
    assertEquals(offsets,checkpoint.read());
    checkpoint.delete();
    assertFalse(f.exists());
    offsets.put(new TopicPartition(topic,3),3L);
    checkpoint.write(offsets);
    assertEquals(offsets,checkpoint.read());
  }
  finally {
    checkpoint.delete();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.state.internals.RocksDBWindowStoreTest </h4><pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutAndFetch() throws IOException {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    final List<KeyValue<byte[],byte[]>> changeLog=new ArrayList<>();
    Producer<byte[],byte[]> producer=new MockProducer<>(true,byteArraySerializer,byteArraySerializer);
    RecordCollector recordCollector=new RecordCollector(producer){
      @Override public <K1,V1>void send(      ProducerRecord<K1,V1> record,      Serializer<K1> keySerializer,      Serializer<V1> valueSerializer){
        changeLog.add(new KeyValue<>(keySerializer.serialize(record.topic(),record.key()),valueSerializer.serialize(record.topic(),record.value())));
      }
    }
;
    MockProcessorContext context=new MockProcessorContext(null,baseDir,byteArraySerializer,byteArrayDeserializer,byteArraySerializer,byteArrayDeserializer,recordCollector);
    WindowStore<Integer,String> store=createWindowStore(context,serdes);
    try {
      long startTime=segmentSize - 4L;
      context.setTime(startTime + 0L);
      store.put(0,"zero");
      context.setTime(startTime + 1L);
      store.put(1,"one");
      context.setTime(startTime + 2L);
      store.put(2,"two");
      context.setTime(startTime + 3L);
      context.setTime(startTime + 4L);
      store.put(4,"four");
      context.setTime(startTime + 5L);
      store.put(5,"five");
      assertEquals(Utils.mkList("zero"),toList(store.fetch(0,startTime + 0L - windowSize,startTime + 0L + windowSize)));
      assertEquals(Utils.mkList("one"),toList(store.fetch(1,startTime + 1L - windowSize,startTime + 1L + windowSize)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime + 2L - windowSize,startTime + 2L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(3,startTime + 3L - windowSize,startTime + 3L + windowSize)));
      assertEquals(Utils.mkList("four"),toList(store.fetch(4,startTime + 4L - windowSize,startTime + 4L + windowSize)));
      assertEquals(Utils.mkList("five"),toList(store.fetch(5,startTime + 5L - windowSize,startTime + 5L + windowSize)));
      context.setTime(startTime + 3L);
      store.put(2,"two+1");
      context.setTime(startTime + 4L);
      store.put(2,"two+2");
      context.setTime(startTime + 5L);
      store.put(2,"two+3");
      context.setTime(startTime + 6L);
      store.put(2,"two+4");
      context.setTime(startTime + 7L);
      store.put(2,"two+5");
      context.setTime(startTime + 8L);
      store.put(2,"two+6");
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime - 2L - windowSize,startTime - 2L + windowSize)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime - 1L - windowSize,startTime - 1L + windowSize)));
      assertEquals(Utils.mkList("two","two+1"),toList(store.fetch(2,startTime - windowSize,startTime + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2"),toList(store.fetch(2,startTime + 1L - windowSize,startTime + 1L + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2","two+3"),toList(store.fetch(2,startTime + 2L - windowSize,startTime + 2L + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2","two+3","two+4"),toList(store.fetch(2,startTime + 3L - windowSize,startTime + 3L + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2","two+3","two+4","two+5"),toList(store.fetch(2,startTime + 4L - windowSize,startTime + 4L + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2","two+3","two+4","two+5","two+6"),toList(store.fetch(2,startTime + 5L - windowSize,startTime + 5L + windowSize)));
      assertEquals(Utils.mkList("two+1","two+2","two+3","two+4","two+5","two+6"),toList(store.fetch(2,startTime + 6L - windowSize,startTime + 6L + windowSize)));
      assertEquals(Utils.mkList("two+2","two+3","two+4","two+5","two+6"),toList(store.fetch(2,startTime + 7L - windowSize,startTime + 7L + windowSize)));
      assertEquals(Utils.mkList("two+3","two+4","two+5","two+6"),toList(store.fetch(2,startTime + 8L - windowSize,startTime + 8L + windowSize)));
      assertEquals(Utils.mkList("two+4","two+5","two+6"),toList(store.fetch(2,startTime + 9L - windowSize,startTime + 9L + windowSize)));
      assertEquals(Utils.mkList("two+5","two+6"),toList(store.fetch(2,startTime + 10L - windowSize,startTime + 10L + windowSize)));
      assertEquals(Utils.mkList("two+6"),toList(store.fetch(2,startTime + 11L - windowSize,startTime + 11L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 12L - windowSize,startTime + 12L + windowSize)));
      store.flush();
      Map<Integer,Set<String>> entriesByKey=entriesByKey(changeLog,startTime);
      assertEquals(Utils.mkSet("zero@0"),entriesByKey.get(0));
      assertEquals(Utils.mkSet("one@1"),entriesByKey.get(1));
      assertEquals(Utils.mkSet("two@2","two+1@3","two+2@4","two+3@5","two+4@6","two+5@7","two+6@8"),entriesByKey.get(2));
      assertNull(entriesByKey.get(3));
      assertEquals(Utils.mkSet("four@4"),entriesByKey.get(4));
      assertEquals(Utils.mkSet("five@5"),entriesByKey.get(5));
      assertNull(entriesByKey.get(6));
    }
  finally {
      store.close();
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutAndFetchBefore() throws IOException {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    final List<KeyValue<byte[],byte[]>> changeLog=new ArrayList<>();
    Producer<byte[],byte[]> producer=new MockProducer<>(true,byteArraySerializer,byteArraySerializer);
    RecordCollector recordCollector=new RecordCollector(producer){
      @Override public <K1,V1>void send(      ProducerRecord<K1,V1> record,      Serializer<K1> keySerializer,      Serializer<V1> valueSerializer){
        changeLog.add(new KeyValue<>(keySerializer.serialize(record.topic(),record.key()),valueSerializer.serialize(record.topic(),record.value())));
      }
    }
;
    MockProcessorContext context=new MockProcessorContext(null,baseDir,byteArraySerializer,byteArrayDeserializer,byteArraySerializer,byteArrayDeserializer,recordCollector);
    WindowStore<Integer,String> store=createWindowStore(context,serdes);
    try {
      long startTime=segmentSize - 4L;
      context.setTime(startTime + 0L);
      store.put(0,"zero");
      context.setTime(startTime + 1L);
      store.put(1,"one");
      context.setTime(startTime + 2L);
      store.put(2,"two");
      context.setTime(startTime + 3L);
      context.setTime(startTime + 4L);
      store.put(4,"four");
      context.setTime(startTime + 5L);
      store.put(5,"five");
      assertEquals(Utils.mkList("zero"),toList(store.fetch(0,startTime + 0L - windowSize,startTime + 0L)));
      assertEquals(Utils.mkList("one"),toList(store.fetch(1,startTime + 1L - windowSize,startTime + 1L)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime + 2L - windowSize,startTime + 2L)));
      assertEquals(Utils.mkList(),toList(store.fetch(3,startTime + 3L - windowSize,startTime + 3L)));
      assertEquals(Utils.mkList("four"),toList(store.fetch(4,startTime + 4L - windowSize,startTime + 4L)));
      assertEquals(Utils.mkList("five"),toList(store.fetch(5,startTime + 5L - windowSize,startTime + 5L)));
      context.setTime(startTime + 3L);
      store.put(2,"two+1");
      context.setTime(startTime + 4L);
      store.put(2,"two+2");
      context.setTime(startTime + 5L);
      store.put(2,"two+3");
      context.setTime(startTime + 6L);
      store.put(2,"two+4");
      context.setTime(startTime + 7L);
      store.put(2,"two+5");
      context.setTime(startTime + 8L);
      store.put(2,"two+6");
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime - 1L - windowSize,startTime - 1L)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 0L - windowSize,startTime + 0L)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 1L - windowSize,startTime + 1L)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime + 2L - windowSize,startTime + 2L)));
      assertEquals(Utils.mkList("two","two+1"),toList(store.fetch(2,startTime + 3L - windowSize,startTime + 3L)));
      assertEquals(Utils.mkList("two","two+1","two+2"),toList(store.fetch(2,startTime + 4L - windowSize,startTime + 4L)));
      assertEquals(Utils.mkList("two","two+1","two+2","two+3"),toList(store.fetch(2,startTime + 5L - windowSize,startTime + 5L)));
      assertEquals(Utils.mkList("two+1","two+2","two+3","two+4"),toList(store.fetch(2,startTime + 6L - windowSize,startTime + 6L)));
      assertEquals(Utils.mkList("two+2","two+3","two+4","two+5"),toList(store.fetch(2,startTime + 7L - windowSize,startTime + 7L)));
      assertEquals(Utils.mkList("two+3","two+4","two+5","two+6"),toList(store.fetch(2,startTime + 8L - windowSize,startTime + 8L)));
      assertEquals(Utils.mkList("two+4","two+5","two+6"),toList(store.fetch(2,startTime + 9L - windowSize,startTime + 9L)));
      assertEquals(Utils.mkList("two+5","two+6"),toList(store.fetch(2,startTime + 10L - windowSize,startTime + 10L)));
      assertEquals(Utils.mkList("two+6"),toList(store.fetch(2,startTime + 11L - windowSize,startTime + 11L)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 12L - windowSize,startTime + 12L)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 13L - windowSize,startTime + 13L)));
      store.flush();
      Map<Integer,Set<String>> entriesByKey=entriesByKey(changeLog,startTime);
      assertEquals(Utils.mkSet("zero@0"),entriesByKey.get(0));
      assertEquals(Utils.mkSet("one@1"),entriesByKey.get(1));
      assertEquals(Utils.mkSet("two@2","two+1@3","two+2@4","two+3@5","two+4@6","two+5@7","two+6@8"),entriesByKey.get(2));
      assertNull(entriesByKey.get(3));
      assertEquals(Utils.mkSet("four@4"),entriesByKey.get(4));
      assertEquals(Utils.mkSet("five@5"),entriesByKey.get(5));
      assertNull(entriesByKey.get(6));
    }
  finally {
      store.close();
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPutSameKeyTimestamp() throws IOException {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    final List<KeyValue<byte[],byte[]>> changeLog=new ArrayList<>();
    Producer<byte[],byte[]> producer=new MockProducer<>(true,byteArraySerializer,byteArraySerializer);
    RecordCollector recordCollector=new RecordCollector(producer){
      @Override public <K1,V1>void send(      ProducerRecord<K1,V1> record,      Serializer<K1> keySerializer,      Serializer<V1> valueSerializer){
        changeLog.add(new KeyValue<>(keySerializer.serialize(record.topic(),record.key()),valueSerializer.serialize(record.topic(),record.value())));
      }
    }
;
    MockProcessorContext context=new MockProcessorContext(null,baseDir,byteArraySerializer,byteArrayDeserializer,byteArraySerializer,byteArrayDeserializer,recordCollector);
    WindowStore<Integer,String> store=createWindowStore(context,serdes);
    try {
      long startTime=segmentSize - 4L;
      context.setTime(startTime);
      store.put(0,"zero");
      assertEquals(Utils.mkList("zero"),toList(store.fetch(0,startTime - windowSize,startTime + windowSize)));
      context.setTime(startTime);
      store.put(0,"zero");
      context.setTime(startTime);
      store.put(0,"zero+");
      context.setTime(startTime);
      store.put(0,"zero++");
      assertEquals(Utils.mkList("zero","zero","zero+","zero++"),toList(store.fetch(0,startTime - windowSize,startTime + windowSize)));
      assertEquals(Utils.mkList("zero","zero","zero+","zero++"),toList(store.fetch(0,startTime + 1L - windowSize,startTime + 1L + windowSize)));
      assertEquals(Utils.mkList("zero","zero","zero+","zero++"),toList(store.fetch(0,startTime + 2L - windowSize,startTime + 2L + windowSize)));
      assertEquals(Utils.mkList("zero","zero","zero+","zero++"),toList(store.fetch(0,startTime + 3L - windowSize,startTime + 3L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(0,startTime + 4L - windowSize,startTime + 4L + windowSize)));
      store.flush();
      Map<Integer,Set<String>> entriesByKey=entriesByKey(changeLog,startTime);
      assertEquals(Utils.mkSet("zero@0","zero@0","zero+@0","zero++@0"),entriesByKey.get(0));
    }
  finally {
      store.close();
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRestore() throws IOException {
  final List<KeyValue<byte[],byte[]>> changeLog=new ArrayList<>();
  long startTime=segmentSize * 2;
  long incr=segmentSize / 2;
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    Producer<byte[],byte[]> producer=new MockProducer<>(true,byteArraySerializer,byteArraySerializer);
    RecordCollector recordCollector=new RecordCollector(producer){
      @Override public <K1,V1>void send(      ProducerRecord<K1,V1> record,      Serializer<K1> keySerializer,      Serializer<V1> valueSerializer){
        changeLog.add(new KeyValue<>(keySerializer.serialize(record.topic(),record.key()),valueSerializer.serialize(record.topic(),record.value())));
      }
    }
;
    MockProcessorContext context=new MockProcessorContext(null,baseDir,byteArraySerializer,byteArrayDeserializer,byteArraySerializer,byteArrayDeserializer,recordCollector);
    WindowStore<Integer,String> store=createWindowStore(context,serdes);
    try {
      context.setTime(startTime);
      store.put(0,"zero");
      context.setTime(startTime + incr);
      store.put(1,"one");
      context.setTime(startTime + incr * 2);
      store.put(2,"two");
      context.setTime(startTime + incr * 3);
      store.put(3,"three");
      context.setTime(startTime + incr * 4);
      store.put(4,"four");
      context.setTime(startTime + incr * 5);
      store.put(5,"five");
      context.setTime(startTime + incr * 6);
      store.put(6,"six");
      context.setTime(startTime + incr * 7);
      store.put(7,"seven");
      context.setTime(startTime + incr * 8);
      store.put(8,"eight");
      store.flush();
    }
  finally {
      store.close();
    }
  }
  finally {
    Utils.delete(baseDir);
  }
  File baseDir2=Files.createTempDirectory("test").toFile();
  try {
    Producer<byte[],byte[]> producer=new MockProducer<>(true,byteArraySerializer,byteArraySerializer);
    RecordCollector recordCollector=new RecordCollector(producer){
      @Override public <K1,V1>void send(      ProducerRecord<K1,V1> record,      Serializer<K1> keySerializer,      Serializer<V1> valueSerializer){
        changeLog.add(new KeyValue<>(keySerializer.serialize(record.topic(),record.key()),valueSerializer.serialize(record.topic(),record.value())));
      }
    }
;
    MockProcessorContext context=new MockProcessorContext(null,baseDir,byteArraySerializer,byteArrayDeserializer,byteArraySerializer,byteArrayDeserializer,recordCollector);
    WindowStore<Integer,String> store=createWindowStore(context,serdes);
    RocksDBWindowStore<Integer,String> inner=(RocksDBWindowStore<Integer,String>)((MeteredWindowStore<Integer,String>)store).inner();
    try {
      context.restore("window",changeLog);
      assertEquals(Utils.mkSet(4L,5L,6L),inner.segmentIds());
      assertEquals(Utils.mkList(),toList(store.fetch(0,startTime - windowSize,startTime + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(1,startTime + incr - windowSize,startTime + incr + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + incr * 2 - windowSize,startTime + incr * 2 + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(3,startTime + incr * 3 - windowSize,startTime + incr * 3 + windowSize)));
      assertEquals(Utils.mkList("four"),toList(store.fetch(4,startTime + incr * 4 - windowSize,startTime + incr * 4 + windowSize)));
      assertEquals(Utils.mkList("five"),toList(store.fetch(5,startTime + incr * 5 - windowSize,startTime + incr * 5 + windowSize)));
      assertEquals(Utils.mkList("six"),toList(store.fetch(6,startTime + incr * 6 - windowSize,startTime + incr * 6 + windowSize)));
      assertEquals(Utils.mkList("seven"),toList(store.fetch(7,startTime + incr * 7 - windowSize,startTime + incr * 7 + windowSize)));
      assertEquals(Utils.mkList("eight"),toList(store.fetch(8,startTime + incr * 8 - windowSize,startTime + incr * 8 + windowSize)));
      store.flush();
      assertEquals(Utils.mkSet(inner.directorySuffix(4L),inner.directorySuffix(5L),inner.directorySuffix(6L)),segmentDirs(baseDir));
    }
  finally {
      store.close();
    }
  }
  finally {
    Utils.delete(baseDir2);
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRolling() throws IOException {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    final List<KeyValue<byte[],byte[]>> changeLog=new ArrayList<>();
    Producer<byte[],byte[]> producer=new MockProducer<>(true,byteArraySerializer,byteArraySerializer);
    RecordCollector recordCollector=new RecordCollector(producer){
      @Override public <K1,V1>void send(      ProducerRecord<K1,V1> record,      Serializer<K1> keySerializer,      Serializer<V1> valueSerializer){
        changeLog.add(new KeyValue<>(keySerializer.serialize(record.topic(),record.key()),valueSerializer.serialize(record.topic(),record.value())));
      }
    }
;
    MockProcessorContext context=new MockProcessorContext(null,baseDir,byteArraySerializer,byteArrayDeserializer,byteArraySerializer,byteArrayDeserializer,recordCollector);
    WindowStore<Integer,String> store=createWindowStore(context,serdes);
    RocksDBWindowStore<Integer,String> inner=(RocksDBWindowStore<Integer,String>)((MeteredWindowStore<Integer,String>)store).inner();
    try {
      long startTime=segmentSize * 2;
      long incr=segmentSize / 2;
      context.setTime(startTime);
      store.put(0,"zero");
      assertEquals(Utils.mkSet(2L),inner.segmentIds());
      context.setTime(startTime + incr);
      store.put(1,"one");
      assertEquals(Utils.mkSet(2L),inner.segmentIds());
      context.setTime(startTime + incr * 2);
      store.put(2,"two");
      assertEquals(Utils.mkSet(2L,3L),inner.segmentIds());
      context.setTime(startTime + incr * 3);
      assertEquals(Utils.mkSet(2L,3L),inner.segmentIds());
      context.setTime(startTime + incr * 4);
      store.put(4,"four");
      assertEquals(Utils.mkSet(2L,3L,4L),inner.segmentIds());
      context.setTime(startTime + incr * 5);
      store.put(5,"five");
      assertEquals(Utils.mkSet(2L,3L,4L),inner.segmentIds());
      assertEquals(Utils.mkList("zero"),toList(store.fetch(0,startTime - windowSize,startTime + windowSize)));
      assertEquals(Utils.mkList("one"),toList(store.fetch(1,startTime + incr - windowSize,startTime + incr + windowSize)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime + incr * 2 - windowSize,startTime + incr * 2 + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(3,startTime + incr * 3 - windowSize,startTime + incr * 3 + windowSize)));
      assertEquals(Utils.mkList("four"),toList(store.fetch(4,startTime + incr * 4 - windowSize,startTime + incr * 4 + windowSize)));
      assertEquals(Utils.mkList("five"),toList(store.fetch(5,startTime + incr * 5 - windowSize,startTime + incr * 5 + windowSize)));
      context.setTime(startTime + incr * 6);
      store.put(6,"six");
      assertEquals(Utils.mkSet(3L,4L,5L),inner.segmentIds());
      assertEquals(Utils.mkList(),toList(store.fetch(0,startTime - windowSize,startTime + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(1,startTime + incr - windowSize,startTime + incr + windowSize)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime + incr * 2 - windowSize,startTime + incr * 2 + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(3,startTime + incr * 3 - windowSize,startTime + incr * 3 + windowSize)));
      assertEquals(Utils.mkList("four"),toList(store.fetch(4,startTime + incr * 4 - windowSize,startTime + incr * 4 + windowSize)));
      assertEquals(Utils.mkList("five"),toList(store.fetch(5,startTime + incr * 5 - windowSize,startTime + incr * 5 + windowSize)));
      assertEquals(Utils.mkList("six"),toList(store.fetch(6,startTime + incr * 6 - windowSize,startTime + incr * 6 + windowSize)));
      context.setTime(startTime + incr * 7);
      store.put(7,"seven");
      assertEquals(Utils.mkSet(3L,4L,5L),inner.segmentIds());
      assertEquals(Utils.mkList(),toList(store.fetch(0,startTime - windowSize,startTime + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(1,startTime + incr - windowSize,startTime + incr + windowSize)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime + incr * 2 - windowSize,startTime + incr * 2 + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(3,startTime + incr * 3 - windowSize,startTime + incr * 3 + windowSize)));
      assertEquals(Utils.mkList("four"),toList(store.fetch(4,startTime + incr * 4 - windowSize,startTime + incr * 4 + windowSize)));
      assertEquals(Utils.mkList("five"),toList(store.fetch(5,startTime + incr * 5 - windowSize,startTime + incr * 5 + windowSize)));
      assertEquals(Utils.mkList("six"),toList(store.fetch(6,startTime + incr * 6 - windowSize,startTime + incr * 6 + windowSize)));
      assertEquals(Utils.mkList("seven"),toList(store.fetch(7,startTime + incr * 7 - windowSize,startTime + incr * 7 + windowSize)));
      context.setTime(startTime + incr * 8);
      store.put(8,"eight");
      assertEquals(Utils.mkSet(4L,5L,6L),inner.segmentIds());
      assertEquals(Utils.mkList(),toList(store.fetch(0,startTime - windowSize,startTime + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(1,startTime + incr - windowSize,startTime + incr + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + incr * 2 - windowSize,startTime + incr * 2 + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(3,startTime + incr * 3 - windowSize,startTime + incr * 3 + windowSize)));
      assertEquals(Utils.mkList("four"),toList(store.fetch(4,startTime + incr * 4 - windowSize,startTime + incr * 4 + windowSize)));
      assertEquals(Utils.mkList("five"),toList(store.fetch(5,startTime + incr * 5 - windowSize,startTime + incr * 5 + windowSize)));
      assertEquals(Utils.mkList("six"),toList(store.fetch(6,startTime + incr * 6 - windowSize,startTime + incr * 6 + windowSize)));
      assertEquals(Utils.mkList("seven"),toList(store.fetch(7,startTime + incr * 7 - windowSize,startTime + incr * 7 + windowSize)));
      assertEquals(Utils.mkList("eight"),toList(store.fetch(8,startTime + incr * 8 - windowSize,startTime + incr * 8 + windowSize)));
      store.flush();
      assertEquals(Utils.mkSet(inner.directorySuffix(4L),inner.directorySuffix(5L),inner.directorySuffix(6L)),segmentDirs(baseDir));
    }
  finally {
      store.close();
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutAndFetchAfter() throws IOException {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    final List<KeyValue<byte[],byte[]>> changeLog=new ArrayList<>();
    Producer<byte[],byte[]> producer=new MockProducer<>(true,byteArraySerializer,byteArraySerializer);
    RecordCollector recordCollector=new RecordCollector(producer){
      @Override public <K1,V1>void send(      ProducerRecord<K1,V1> record,      Serializer<K1> keySerializer,      Serializer<V1> valueSerializer){
        changeLog.add(new KeyValue<>(keySerializer.serialize(record.topic(),record.key()),valueSerializer.serialize(record.topic(),record.value())));
      }
    }
;
    MockProcessorContext context=new MockProcessorContext(null,baseDir,byteArraySerializer,byteArrayDeserializer,byteArraySerializer,byteArrayDeserializer,recordCollector);
    WindowStore<Integer,String> store=createWindowStore(context,serdes);
    try {
      long startTime=segmentSize - 4L;
      context.setTime(startTime + 0L);
      store.put(0,"zero");
      context.setTime(startTime + 1L);
      store.put(1,"one");
      context.setTime(startTime + 2L);
      store.put(2,"two");
      context.setTime(startTime + 3L);
      context.setTime(startTime + 4L);
      store.put(4,"four");
      context.setTime(startTime + 5L);
      store.put(5,"five");
      assertEquals(Utils.mkList("zero"),toList(store.fetch(0,startTime + 0L,startTime + 0L + windowSize)));
      assertEquals(Utils.mkList("one"),toList(store.fetch(1,startTime + 1L,startTime + 1L + windowSize)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime + 2L,startTime + 2L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(3,startTime + 3L,startTime + 3L + windowSize)));
      assertEquals(Utils.mkList("four"),toList(store.fetch(4,startTime + 4L,startTime + 4L + windowSize)));
      assertEquals(Utils.mkList("five"),toList(store.fetch(5,startTime + 5L,startTime + 5L + windowSize)));
      context.setTime(startTime + 3L);
      store.put(2,"two+1");
      context.setTime(startTime + 4L);
      store.put(2,"two+2");
      context.setTime(startTime + 5L);
      store.put(2,"two+3");
      context.setTime(startTime + 6L);
      store.put(2,"two+4");
      context.setTime(startTime + 7L);
      store.put(2,"two+5");
      context.setTime(startTime + 8L);
      store.put(2,"two+6");
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime - 2L,startTime - 2L + windowSize)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime - 1L,startTime - 1L + windowSize)));
      assertEquals(Utils.mkList("two","two+1"),toList(store.fetch(2,startTime,startTime + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2"),toList(store.fetch(2,startTime + 1L,startTime + 1L + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2","two+3"),toList(store.fetch(2,startTime + 2L,startTime + 2L + windowSize)));
      assertEquals(Utils.mkList("two+1","two+2","two+3","two+4"),toList(store.fetch(2,startTime + 3L,startTime + 3L + windowSize)));
      assertEquals(Utils.mkList("two+2","two+3","two+4","two+5"),toList(store.fetch(2,startTime + 4L,startTime + 4L + windowSize)));
      assertEquals(Utils.mkList("two+3","two+4","two+5","two+6"),toList(store.fetch(2,startTime + 5L,startTime + 5L + windowSize)));
      assertEquals(Utils.mkList("two+4","two+5","two+6"),toList(store.fetch(2,startTime + 6L,startTime + 6L + windowSize)));
      assertEquals(Utils.mkList("two+5","two+6"),toList(store.fetch(2,startTime + 7L,startTime + 7L + windowSize)));
      assertEquals(Utils.mkList("two+6"),toList(store.fetch(2,startTime + 8L,startTime + 8L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 9L,startTime + 9L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 10L,startTime + 10L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 11L,startTime + 11L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 12L,startTime + 12L + windowSize)));
      store.flush();
      Map<Integer,Set<String>> entriesByKey=entriesByKey(changeLog,startTime);
      assertEquals(Utils.mkSet("zero@0"),entriesByKey.get(0));
      assertEquals(Utils.mkSet("one@1"),entriesByKey.get(1));
      assertEquals(Utils.mkSet("two@2","two+1@3","two+2@4","two+3@5","two+4@6","two+5@7","two+6@8"),entriesByKey.get(2));
      assertNull(entriesByKey.get(3));
      assertEquals(Utils.mkSet("four@4"),entriesByKey.get(4));
      assertEquals(Utils.mkSet("five@5"),entriesByKey.get(5));
      assertNull(entriesByKey.get(6));
    }
  finally {
      store.close();
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.state.internals.StoreChangeLoggerTest </h4><pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddRemove(){
  written.put(0,"zero");
  changeLogger.add(0);
  written.put(1,"one");
  changeLogger.add(1);
  written.put(2,"two");
  changeLogger.add(2);
  assertEquals(3,changeLogger.numDirty());
  assertEquals(0,changeLogger.numRemoved());
  changeLogger.delete(0);
  changeLogger.delete(1);
  written.put(3,"three");
  changeLogger.add(3);
  assertEquals(2,changeLogger.numDirty());
  assertEquals(2,changeLogger.numRemoved());
  written.put(0,"zero-again");
  changeLogger.add(0);
  assertEquals(3,changeLogger.numDirty());
  assertEquals(1,changeLogger.numRemoved());
  written.put(4,"four");
  changeLogger.add(4);
  changeLogger.maybeLogChange(getter);
  assertEquals(0,changeLogger.numDirty());
  assertEquals(0,changeLogger.numRemoved());
  assertEquals(5,logged.size());
  assertEquals("zero-again",logged.get(0));
  assertEquals(null,logged.get(1));
  assertEquals("two",logged.get(2));
  assertEquals("three",logged.get(3));
  assertEquals("four",logged.get(4));
}

</code></pre>

<br>
<pre class="type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRaw(){
  IntegerSerializer serializer=new IntegerSerializer();
  written.put(0,"zero");
  rawChangeLogger.add(serializer.serialize(topic,0));
  written.put(1,"one");
  rawChangeLogger.add(serializer.serialize(topic,1));
  written.put(2,"two");
  rawChangeLogger.add(serializer.serialize(topic,2));
  assertEquals(3,rawChangeLogger.numDirty());
  assertEquals(0,rawChangeLogger.numRemoved());
  rawChangeLogger.delete(serializer.serialize(topic,0));
  rawChangeLogger.delete(serializer.serialize(topic,1));
  written.put(3,"three");
  rawChangeLogger.add(serializer.serialize(topic,3));
  assertEquals(2,rawChangeLogger.numDirty());
  assertEquals(2,rawChangeLogger.numRemoved());
  written.put(0,"zero-again");
  rawChangeLogger.add(serializer.serialize(topic,0));
  assertEquals(3,rawChangeLogger.numDirty());
  assertEquals(1,rawChangeLogger.numRemoved());
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
