<h3><span class=" glyphicon glyphicon-tag"/>&nbspIterativeVerifier</h3><kbd>Verifies assertions in iterations</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.FetcherTest </h4><pre class="type-8 type-13 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testQuotaMetrics() throws Exception {
  List<ConsumerRecord<byte[],byte[]>> records;
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.seek(tp,0);
  for (int i=1; i < 4; i++) {
    fetcher.initFetches(cluster);
    client.prepareResponse(fetchResponse(this.records.buffer(),Errors.NONE.code(),100L,100 * i));
    consumerClient.poll(0);
    records=fetcher.fetchedRecords().get(tp);
    assertEquals(3,records.size());
  }
  Map<MetricName,KafkaMetric> allMetrics=metrics.metrics();
  KafkaMetric avgMetric=allMetrics.get(metrics.metricName("fetch-throttle-time-avg",metricGroup,""));
  KafkaMetric maxMetric=allMetrics.get(metrics.metricName("fetch-throttle-time-max",metricGroup,""));
  assertEquals(200,avgMetric.value(),EPSILON);
  assertEquals(300,maxMetric.value(),EPSILON);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.internals.DefaultPartitionerTest </h4><pre class="type-13 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRoundRobinWithUnavailablePartitions(){
  int countForPart0=0;
  int countForPart2=0;
  for (int i=1; i <= 100; i++) {
    int part=partitioner.partition("test",null,null,null,null,cluster);
    assertTrue("We should never choose a leader-less node in round robin",part == 0 || part == 2);
    if (part == 0)     countForPart0++;
 else     countForPart2++;
  }
  assertEquals("The distribution between two available partitions should be even",countForPart0,countForPart2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.internals.RecordAccumulatorTest </h4><pre class="type-13 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testExpiredBatches() throws InterruptedException {
  Time time=new SystemTime();
  long now=time.milliseconds();
  RecordAccumulator accum=new RecordAccumulator(1024,10 * 1024,CompressionType.NONE,10,100L,metrics,time);
  int appends=1024 / msgSize;
  for (int i=0; i < appends; i++) {
    accum.append(tp1,key,value,null,maxBlockTimeMs);
    assertEquals("No partitions should be ready.",0,accum.ready(cluster,now).readyNodes.size());
  }
  time.sleep(2000);
  accum.ready(cluster,now);
  accum.append(tp1,key,value,null,0);
  Set<Node> readyNodes=accum.ready(cluster,time.milliseconds()).readyNodes;
  assertEquals("Our partition's leader should be ready",Collections.singleton(node1),readyNodes);
  Cluster cluster=new Cluster(new ArrayList<Node>(),new ArrayList<PartitionInfo>(),Collections.<String>emptySet());
  now=time.milliseconds();
  List<RecordBatch> expiredBatches=accum.abortExpiredBatches(60,cluster,now);
  assertEquals(1,expiredBatches.size());
}

</code></pre>

<br>
<pre class="type-8 type-13 type-9 type-7 type-3 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFull() throws Exception {
  long now=time.milliseconds();
  RecordAccumulator accum=new RecordAccumulator(1024,10 * 1024,CompressionType.NONE,10L,100L,metrics,time);
  int appends=1024 / msgSize;
  for (int i=0; i < appends; i++) {
    accum.append(tp1,key,value,null,maxBlockTimeMs);
    assertEquals("No partitions should be ready.",0,accum.ready(cluster,now).readyNodes.size());
  }
  accum.append(tp1,key,value,null,maxBlockTimeMs);
  assertEquals("Our partition's leader should be ready",Collections.singleton(node1),accum.ready(cluster,time.milliseconds()).readyNodes);
  List<RecordBatch> batches=accum.drain(cluster,Collections.singleton(node1),Integer.MAX_VALUE,0).get(node1.id());
  assertEquals(1,batches.size());
  RecordBatch batch=batches.get(0);
  Iterator<LogEntry> iter=batch.records.iterator();
  for (int i=0; i < appends; i++) {
    LogEntry entry=iter.next();
    assertEquals("Keys should match",ByteBuffer.wrap(key),entry.record().key());
    assertEquals("Values should match",ByteBuffer.wrap(value),entry.record().value());
  }
  assertFalse("No more records",iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.metrics.stats.HistogramTest </h4><pre class="type-13 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testHistogram(){
  BinScheme scheme=new ConstantBinScheme(12,-5,5);
  Histogram hist=new Histogram(scheme);
  for (int i=-5; i < 5; i++)   hist.record(i);
  for (int i=0; i < 10; i++)   assertEquals(scheme.fromBin(i + 1),hist.value(i / 10.0 + EPS),EPS);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.network.SelectorTest </h4><pre class="type-8 type-13 type-14 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Send multiple requests to several connections in parallel. Validate that responses are received in the order that
 * requests were sent.
 */
@Test public void testNormalOperation() throws Exception {
  int conns=5;
  int reqs=500;
  InetSocketAddress addr=new InetSocketAddress("localhost",server.port);
  for (int i=0; i < conns; i++)   connect(Integer.toString(i),addr);
  Map<String,Integer> requests=new HashMap<String,Integer>();
  Map<String,Integer> responses=new HashMap<String,Integer>();
  int responseCount=0;
  for (int i=0; i < conns; i++) {
    String node=Integer.toString(i);
    selector.send(createSend(node,node + "-0"));
  }
  while (responseCount < conns * reqs) {
    selector.poll(0L);
    assertEquals("No disconnects should have occurred.",0,selector.disconnected().size());
    for (    NetworkReceive receive : selector.completedReceives()) {
      String[] pieces=asString(receive).split("-");
      assertEquals("Should be in the form 'conn-counter'",2,pieces.length);
      assertEquals("Check the source",receive.source(),pieces[0]);
      assertEquals("Check that the receive has kindly been rewound",0,receive.payload().position());
      if (responses.containsKey(receive.source())) {
        assertEquals("Check the request counter",(int)responses.get(receive.source()),Integer.parseInt(pieces[1]));
        responses.put(receive.source(),responses.get(receive.source()) + 1);
      }
 else {
        assertEquals("Check the request counter",0,Integer.parseInt(pieces[1]));
        responses.put(receive.source(),1);
      }
      responseCount++;
    }
    for (    Send send : selector.completedSends()) {
      String dest=send.destination();
      if (requests.containsKey(dest))       requests.put(dest,requests.get(dest) + 1);
 else       requests.put(dest,1);
      if (requests.get(dest) < reqs)       selector.send(createSend(dest,dest + "-" + requests.get(dest)));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.network.SslSelectorTest </h4><pre class="type-8 type-13 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Tests that SSL renegotiation initiated by the server are handled correctly by the client
 * @throws Exception
 */
@Test public void testRenegotiation() throws Exception {
  ChannelBuilder channelBuilder=new SslChannelBuilder(Mode.CLIENT){
    @Override protected SslTransportLayer buildTransportLayer(    SslFactory sslFactory,    String id,    SelectionKey key) throws IOException {
      SocketChannel socketChannel=(SocketChannel)key.channel();
      SslTransportLayer transportLayer=new SslTransportLayer(id,key,sslFactory.createSslEngine(socketChannel.socket().getInetAddress().getHostName(),socketChannel.socket().getPort()),true);
      transportLayer.startHandshake();
      return transportLayer;
    }
  }
;
  channelBuilder.configure(sslClientConfigs);
  Selector selector=new Selector(5000,metrics,time,"MetricGroup2",channelBuilder);
  try {
    int reqs=500;
    String node="0";
    InetSocketAddress addr=new InetSocketAddress("localhost",server.port);
    selector.connect(node,addr,BUFFER_SIZE,BUFFER_SIZE);
    int requests=0;
    int responses=0;
    int renegotiates=0;
    while (!selector.isChannelReady(node)) {
      selector.poll(1000L);
    }
    selector.send(createSend(node,node + "-" + 0));
    requests++;
    while (responses < reqs) {
      selector.poll(0L);
      if (responses >= 100 && renegotiates == 0) {
        renegotiates++;
        server.renegotiate();
      }
      assertEquals("No disconnects should have occurred.",0,selector.disconnected().size());
      for (      NetworkReceive receive : selector.completedReceives()) {
        String[] pieces=asString(receive).split("-");
        assertEquals("Should be in the form 'conn-counter'",2,pieces.length);
        assertEquals("Check the source",receive.source(),pieces[0]);
        assertEquals("Check that the receive has kindly been rewound",0,receive.payload().position());
        assertEquals("Check the request counter",responses,Integer.parseInt(pieces[1]));
        responses++;
      }
      for (int i=0; i < selector.completedSends().size() && requests < reqs && selector.isChannelReady(node); i++, requests++) {
        selector.send(createSend(node,node + "-" + requests));
      }
    }
  }
  finally {
    selector.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.record.MemoryRecordsTest </h4><pre class="type-8 type-13 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIterator(){
  MemoryRecords recs1=MemoryRecords.emptyRecords(ByteBuffer.allocate(1024),compression);
  MemoryRecords recs2=MemoryRecords.emptyRecords(ByteBuffer.allocate(1024),compression);
  List<Record> list=Arrays.asList(new Record("a".getBytes(),"1".getBytes()),new Record("b".getBytes(),"2".getBytes()),new Record("c".getBytes(),"3".getBytes()));
  for (int i=0; i < list.size(); i++) {
    Record r=list.get(i);
    recs1.append(i,r);
    recs2.append(i,toArray(r.key()),toArray(r.value()));
  }
  recs1.close();
  recs2.close();
  for (int iteration=0; iteration < 2; iteration++) {
    for (    MemoryRecords recs : Arrays.asList(recs1,recs2)) {
      Iterator<LogEntry> iter=recs.iterator();
      for (int i=0; i < list.size(); i++) {
        assertTrue(iter.hasNext());
        LogEntry entry=iter.next();
        assertEquals((long)i,entry.offset());
        assertEquals(list.get(i),entry.record());
        entry.record().ensureValid();
      }
      assertFalse(iter.hasNext());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.record.RecordTest </h4><pre class="type-8 type-13 type-10 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChecksum(){
  assertEquals(record.checksum(),record.computeChecksum());
  assertEquals(record.checksum(),Record.computeChecksum(this.key == null ? null : this.key.array(),this.value == null ? null : this.value.array(),this.compression,0,-1));
  assertTrue(record.isValid());
  for (int i=Record.CRC_OFFSET + Record.CRC_LENGTH; i < record.size(); i++) {
    Record copy=copyOf(record);
    copy.buffer().put(i,(byte)69);
    assertFalse(copy.isValid());
    try {
      copy.ensureValid();
      fail("Should fail the above test.");
    }
 catch (    InvalidRecordException e) {
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.utils.AbstractIteratorTest </h4><pre class="type-13 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIterator(){
  int max=10;
  List<Integer> l=new ArrayList<Integer>();
  for (int i=0; i < max; i++)   l.add(i);
  ListIterator<Integer> iter=new ListIterator<Integer>(l);
  for (int i=0; i < max; i++) {
    Integer value=i;
    assertEquals(value,iter.peek());
    assertTrue(iter.hasNext());
    assertEquals(value,iter.next());
  }
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.data.SchemaProjectorTest </h4><pre class="type-8 type-13 type-14 type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNumericTypeProjection() throws Exception {
  Schema[] promotableSchemas={Schema.INT8_SCHEMA,Schema.INT16_SCHEMA,Schema.INT32_SCHEMA,Schema.INT64_SCHEMA,Schema.FLOAT32_SCHEMA,Schema.FLOAT64_SCHEMA};
  Schema[] promotableOptionalSchemas={Schema.OPTIONAL_INT8_SCHEMA,Schema.OPTIONAL_INT16_SCHEMA,Schema.OPTIONAL_INT32_SCHEMA,Schema.OPTIONAL_INT64_SCHEMA,Schema.OPTIONAL_FLOAT32_SCHEMA,Schema.OPTIONAL_FLOAT64_SCHEMA};
  Object[] values={(byte)127,(short)255,32767,327890L,1.2F,1.2345};
  Map<Object,List<?>> expectedProjected=new HashMap<>();
  expectedProjected.put(values[0],Arrays.asList((byte)127,(short)127,127,127L,127.F,127.));
  expectedProjected.put(values[1],Arrays.asList((short)255,255,255L,255.F,255.));
  expectedProjected.put(values[2],Arrays.asList(32767,32767L,32767.F,32767.));
  expectedProjected.put(values[3],Arrays.asList(327890L,327890.F,327890.));
  expectedProjected.put(values[4],Arrays.asList(1.2F,1.2));
  expectedProjected.put(values[5],Arrays.asList(1.2345));
  Object promoted;
  for (int i=0; i < promotableSchemas.length; ++i) {
    Schema source=promotableSchemas[i];
    List<?> expected=expectedProjected.get(values[i]);
    for (int j=i; j < promotableSchemas.length; ++j) {
      Schema target=promotableSchemas[j];
      promoted=SchemaProjector.project(source,values[i],target);
      if (target.type() == Type.FLOAT64) {
        assertEquals((Double)(expected.get(j - i)),(double)promoted,1e-6);
      }
 else {
        assertEquals(expected.get(j - i),promoted);
      }
    }
    for (int j=i; j < promotableOptionalSchemas.length; ++j) {
      Schema target=promotableOptionalSchemas[j];
      promoted=SchemaProjector.project(source,values[i],target);
      if (target.type() == Type.FLOAT64) {
        assertEquals((Double)(expected.get(j - i)),(double)promoted,1e-6);
      }
 else {
        assertEquals(expected.get(j - i),promoted);
      }
    }
  }
  for (int i=0; i < promotableOptionalSchemas.length; ++i) {
    Schema source=promotableSchemas[i];
    List<?> expected=expectedProjected.get(values[i]);
    for (int j=i; j < promotableOptionalSchemas.length; ++j) {
      Schema target=promotableOptionalSchemas[j];
      promoted=SchemaProjector.project(source,values[i],target);
      if (target.type() == Type.FLOAT64) {
        assertEquals((Double)(expected.get(j - i)),(double)promoted,1e-6);
      }
 else {
        assertEquals(expected.get(j - i),promoted);
      }
    }
  }
  Schema[] nonPromotableSchemas={Schema.BOOLEAN_SCHEMA,Schema.BYTES_SCHEMA,Schema.STRING_SCHEMA};
  for (  Schema promotableSchema : promotableSchemas) {
    for (    Schema nonPromotableSchema : nonPromotableSchemas) {
      Object dummy=new Object();
      try {
        SchemaProjector.project(promotableSchema,dummy,nonPromotableSchema);
        fail("Cannot promote " + promotableSchema.type() + " to "+ nonPromotableSchema.type());
      }
 catch (      DataException e) {
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.file.FileStreamSinkConnectorTest </h4><pre class="type-13 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSinkTasks(){
  PowerMock.replayAll();
  connector.start(sinkProperties);
  List<Map<String,String>> taskConfigs=connector.taskConfigs(1);
  assertEquals(1,taskConfigs.size());
  assertEquals(FILENAME,taskConfigs.get(0).get(FileStreamSinkConnector.FILE_CONFIG));
  taskConfigs=connector.taskConfigs(2);
  assertEquals(2,taskConfigs.size());
  for (int i=0; i < 2; i++) {
    assertEquals(FILENAME,taskConfigs.get(0).get(FileStreamSinkConnector.FILE_CONFIG));
  }
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KStreamFlatMapTest </h4><pre class="type-13 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFlatMap(){
  KStreamBuilder builder=new KStreamBuilder();
  KeyValueMapper<Integer,String,Iterable<KeyValue<String,String>>> mapper=new KeyValueMapper<Integer,String,Iterable<KeyValue<String,String>>>(){
    @Override public Iterable<KeyValue<String,String>> apply(    Integer key,    String value){
      ArrayList<KeyValue<String,String>> result=new ArrayList<>();
      for (int i=0; i < key; i++) {
        result.add(KeyValue.pair(Integer.toString(key * 10 + i),value));
      }
      return result;
    }
  }
;
  final int[] expectedKeys={0,1,2,3};
  KStream<Integer,String> stream;
  MockProcessorSupplier<String,String> processor;
  processor=new MockProcessorSupplier<>();
  stream=builder.stream(keyDeserializer,valDeserializer,topicName);
  stream.flatMap(mapper).process(processor);
  KStreamTestDriver driver=new KStreamTestDriver(builder);
  for (int i=0; i < expectedKeys.length; i++) {
    driver.process(topicName,expectedKeys[i],"V" + expectedKeys[i]);
  }
  assertEquals(6,processor.processed.size());
  String[] expected={"10:V1","20:V2","21:V2","30:V3","31:V3","32:V3"};
  for (int i=0; i < expected.length; i++) {
    assertEquals(expected[i],processor.processed.get(i));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KStreamFlatMapValuesTest </h4><pre class="type-13 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFlatMapValues(){
  KStreamBuilder builder=new KStreamBuilder();
  ValueMapper<String,Iterable<String>> mapper=new ValueMapper<String,Iterable<String>>(){
    @Override public Iterable<String> apply(    String value){
      ArrayList<String> result=new ArrayList<String>();
      result.add(value.toLowerCase());
      result.add(value);
      return result;
    }
  }
;
  final int[] expectedKeys={0,1,2,3};
  KStream<Integer,String> stream;
  MockProcessorSupplier<Integer,String> processor;
  processor=new MockProcessorSupplier<>();
  stream=builder.stream(keyDeserializer,valDeserializer,topicName);
  stream.flatMapValues(mapper).process(processor);
  KStreamTestDriver driver=new KStreamTestDriver(builder);
  for (int i=0; i < expectedKeys.length; i++) {
    driver.process(topicName,expectedKeys[i],"V" + expectedKeys[i]);
  }
  assertEquals(8,processor.processed.size());
  String[] expected={"0:v0","0:V0","1:v1","1:V1","2:v2","2:V2","3:v3","3:V3"};
  for (int i=0; i < expected.length; i++) {
    assertEquals(expected[i],processor.processed.get(i));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KStreamMapTest </h4><pre class="type-13 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMap(){
  KStreamBuilder builder=new KStreamBuilder();
  KeyValueMapper<Integer,String,KeyValue<String,Integer>> mapper=new KeyValueMapper<Integer,String,KeyValue<String,Integer>>(){
    @Override public KeyValue<String,Integer> apply(    Integer key,    String value){
      return KeyValue.pair(value,key);
    }
  }
;
  final int[] expectedKeys=new int[]{0,1,2,3};
  KStream<Integer,String> stream;
  MockProcessorSupplier<String,Integer> processor;
  processor=new MockProcessorSupplier<>();
  stream=builder.stream(keyDeserializer,valDeserializer,topicName);
  stream.map(mapper).process(processor);
  KStreamTestDriver driver=new KStreamTestDriver(builder);
  for (int i=0; i < expectedKeys.length; i++) {
    driver.process(topicName,expectedKeys[i],"V" + expectedKeys[i]);
  }
  assertEquals(4,processor.processed.size());
  String[] expected=new String[]{"V0:0","V1:1","V2:2","V3:3"};
  for (int i=0; i < expected.length; i++) {
    assertEquals(expected[i],processor.processed.get(i));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KStreamMapValuesTest </h4><pre class="type-13 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFlatMapValues(){
  KStreamBuilder builder=new KStreamBuilder();
  ValueMapper<String,Integer> mapper=new ValueMapper<String,Integer>(){
    @Override public Integer apply(    String value){
      return value.length();
    }
  }
;
  final int[] expectedKeys={1,10,100,1000};
  KStream<Integer,String> stream;
  MockProcessorSupplier<Integer,Integer> processor=new MockProcessorSupplier<>();
  stream=builder.stream(keyDeserializer,valDeserializer,topicName);
  stream.mapValues(mapper).process(processor);
  KStreamTestDriver driver=new KStreamTestDriver(builder);
  for (int i=0; i < expectedKeys.length; i++) {
    driver.process(topicName,expectedKeys[i],Integer.toString(expectedKeys[i]));
  }
  assertEquals(4,processor.processed.size());
  String[] expected={"1:1","10:2","100:3","1000:4"};
  for (int i=0; i < expected.length; i++) {
    assertEquals(expected[i],processor.processed.get(i));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KStreamTransformTest </h4><pre class="type-13 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTransform(){
  KStreamBuilder builder=new KStreamBuilder();
  TransformerSupplier<Integer,Integer,KeyValue<Integer,Integer>> transformerSupplier=new TransformerSupplier<Integer,Integer,KeyValue<Integer,Integer>>(){
    public Transformer<Integer,Integer,KeyValue<Integer,Integer>> get(){
      return new Transformer<Integer,Integer,KeyValue<Integer,Integer>>(){
        private int total=0;
        @Override public void init(        ProcessorContext context){
        }
        @Override public KeyValue<Integer,Integer> transform(        Integer key,        Integer value){
          total+=value;
          return KeyValue.pair(key * 2,total);
        }
        @Override public void punctuate(        long timestamp){
        }
        @Override public void close(){
        }
      }
;
    }
  }
;
  final int[] expectedKeys={1,10,100,1000};
  KStream<Integer,Integer> stream;
  MockProcessorSupplier<Integer,Integer> processor=new MockProcessorSupplier<>();
  stream=builder.stream(keyDeserializer,valDeserializer,topicName);
  stream.transform(transformerSupplier).process(processor);
  KStreamTestDriver driver=new KStreamTestDriver(builder);
  for (int i=0; i < expectedKeys.length; i++) {
    driver.process(topicName,expectedKeys[i],expectedKeys[i] * 10);
  }
  assertEquals(4,processor.processed.size());
  String[] expected={"2:10","20:110","200:1110","2000:11110"};
  for (int i=0; i < expected.length; i++) {
    assertEquals(expected[i],processor.processed.get(i));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KStreamTransformValuesTest </h4><pre class="type-13 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTransform(){
  KStreamBuilder builder=new KStreamBuilder();
  ValueTransformerSupplier<Integer,Integer> valueTransformerSupplier=new ValueTransformerSupplier<Integer,Integer>(){
    public ValueTransformer<Integer,Integer> get(){
      return new ValueTransformer<Integer,Integer>(){
        private int total=0;
        @Override public void init(        ProcessorContext context){
        }
        @Override public Integer transform(        Integer value){
          total+=value;
          return total;
        }
        @Override public void punctuate(        long timestamp){
        }
        @Override public void close(){
        }
      }
;
    }
  }
;
  final int[] expectedKeys={1,10,100,1000};
  KStream<Integer,Integer> stream;
  MockProcessorSupplier<Integer,Integer> processor=new MockProcessorSupplier<>();
  stream=builder.stream(keyDeserializer,valDeserializer,topicName);
  stream.transformValues(valueTransformerSupplier).process(processor);
  KStreamTestDriver driver=new KStreamTestDriver(builder);
  for (int i=0; i < expectedKeys.length; i++) {
    driver.process(topicName,expectedKeys[i],expectedKeys[i] * 10);
  }
  assertEquals(4,processor.processed.size());
  String[] expected={"1:10","10:110","100:1110","1000:11110"};
  for (int i=0; i < expected.length; i++) {
    assertEquals(expected[i],processor.processed.get(i));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.WindowedStreamPartitionerTest </h4><pre class="type-8 type-13 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCopartitioning(){
  Random rand=new Random();
  DefaultPartitioner defaultPartitioner=new DefaultPartitioner();
  WindowedSerializer<Integer> windowedSerializer=new WindowedSerializer<>(keySerializer);
  WindowedStreamPartitioner<Integer,String> streamPartitioner=new WindowedStreamPartitioner<>(windowedSerializer);
  for (int k=0; k < 10; k++) {
    Integer key=rand.nextInt();
    byte[] keyBytes=keySerializer.serialize(topicName,key);
    String value=key.toString();
    byte[] valueBytes=valSerializer.serialize(topicName,value);
    Integer expected=defaultPartitioner.partition("topic",key,keyBytes,value,valueBytes,cluster);
    for (int w=0; w < 10; w++) {
      HoppingWindow window=new HoppingWindow(10 * w,20 * w);
      Windowed<Integer> windowedKey=new Windowed<>(key,window);
      Integer actual=streamPartitioner.partition(windowedKey,value,infos.size());
      assertEquals(expected,actual);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.state.internals.AbstractKeyValueStoreTest </h4><pre class="type-13 type-14 type-10 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutGetRange(){
  KeyValueStoreTestDriver<Integer,String> driver=KeyValueStoreTestDriver.create(Integer.class,String.class);
  KeyValueStore<Integer,String> store=createKeyValueStore(driver.context(),Integer.class,String.class,false);
  try {
    store.put(0,"zero");
    store.put(1,"one");
    store.put(2,"two");
    store.put(4,"four");
    store.put(5,"five");
    assertEquals(5,driver.sizeOf(store));
    assertEquals("zero",store.get(0));
    assertEquals("one",store.get(1));
    assertEquals("two",store.get(2));
    assertNull(store.get(3));
    assertEquals("four",store.get(4));
    assertEquals("five",store.get(5));
    store.delete(5);
    store.flush();
    assertEquals("zero",driver.flushedEntryStored(0));
    assertEquals("one",driver.flushedEntryStored(1));
    assertEquals("two",driver.flushedEntryStored(2));
    assertEquals("four",driver.flushedEntryStored(4));
    assertEquals(null,driver.flushedEntryStored(5));
    assertEquals(false,driver.flushedEntryRemoved(0));
    assertEquals(false,driver.flushedEntryRemoved(1));
    assertEquals(false,driver.flushedEntryRemoved(2));
    assertEquals(false,driver.flushedEntryRemoved(4));
    assertEquals(true,driver.flushedEntryRemoved(5));
    try (KeyValueIterator<Integer,String> iter=store.range(2,4)){
      while (iter.hasNext()) {
        KeyValue<Integer,String> entry=iter.next();
        if (entry.key.equals(2))         assertEquals("two",entry.value);
 else         if (entry.key.equals(4))         assertEquals("four",entry.value);
 else         fail("Unexpected entry: " + entry);
      }
    }
     try (KeyValueIterator<Integer,String> iter=store.range(2,6)){
      while (iter.hasNext()) {
        KeyValue<Integer,String> entry=iter.next();
        if (entry.key.equals(2))         assertEquals("two",entry.value);
 else         if (entry.key.equals(4))         assertEquals("four",entry.value);
 else         fail("Unexpected entry: " + entry);
      }
    }
   }
  finally {
    store.close();
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
