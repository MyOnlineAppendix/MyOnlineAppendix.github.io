<h3><span class=" glyphicon glyphicon-tag"/>&nbspHybridVerifier</h3><kbd>Contains more than 2 JUnit-based stereotypes</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.kafka.clients.MetadataTest </h4><pre class="type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@After public void tearDown(){
  assertNull("Exception in background thread : " + backgroundError.get(),backgroundError.get());
}

</code></pre>

<br>
<pre class="type-10 type-9 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests that {@link org.apache.kafka.clients.Metadata#awaitUpdate(int,long)} doesn't
 * wait forever with a max timeout value of 0
 * @throws Exception
 * @see https://issues.apache.org/jira/browse/KAFKA-1836
 */
@Test public void testMetadataUpdateWaitTime() throws Exception {
  long time=0;
  metadata.update(Cluster.empty(),time);
  assertFalse("No update needed.",metadata.timeToNextUpdate(time) == 0);
  try {
    metadata.awaitUpdate(metadata.requestUpdate(),0);
    fail("Wait on metadata update was expected to timeout, but it didn't");
  }
 catch (  TimeoutException te) {
  }
  final long twoSecondWait=2000;
  try {
    metadata.awaitUpdate(metadata.requestUpdate(),twoSecondWait);
    fail("Wait on metadata update was expected to timeout, but it didn't");
  }
 catch (  TimeoutException te) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.NetworkClientTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLeastLoadedNode(){
  Node leastNode=null;
  client.ready(node,time.milliseconds());
  awaitReady(client,node);
  client.poll(1,time.milliseconds());
  assertTrue("The client should be ready",client.isReady(node,time.milliseconds()));
  leastNode=client.leastLoadedNode(time.milliseconds());
  assertEquals("There should be one leastloadednode",leastNode.id(),node.id());
  time.sleep(reconnectBackoffMsTest);
  selector.close(node.idString());
  client.poll(1,time.milliseconds());
  assertFalse("After we forced the disconnection the client is no longer ready.",client.ready(node,time.milliseconds()));
  leastNode=client.leastLoadedNode(time.milliseconds());
  assertEquals("There should be NO leastloadednode",leastNode,null);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClose(){
  client.ready(node,time.milliseconds());
  awaitReady(client,node);
  client.poll(1,time.milliseconds());
  assertTrue("The client should be ready",client.isReady(node,time.milliseconds()));
  ProduceRequest produceRequest=new ProduceRequest((short)1,1000,Collections.<TopicPartition,ByteBuffer>emptyMap());
  RequestHeader reqHeader=client.nextRequestHeader(ApiKeys.PRODUCE);
  RequestSend send=new RequestSend(node.idString(),reqHeader,produceRequest.toStruct());
  ClientRequest request=new ClientRequest(time.milliseconds(),true,send,null);
  client.send(request,time.milliseconds());
  assertEquals("There should be 1 in-flight request after send",1,client.inFlightRequestCount(node.idString()));
  client.close(node.idString());
  assertEquals("There should be no in-flight request after close",0,client.inFlightRequestCount(node.idString()));
  assertFalse("Connection should not be ready after close",client.isReady(node,0));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.KafkaConsumerTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSubscription(){
  Properties props=new Properties();
  props.setProperty(ConsumerConfig.CLIENT_ID_CONFIG,"testSubscription");
  props.setProperty(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG,"localhost:9999");
  props.setProperty(ConsumerConfig.METRIC_REPORTER_CLASSES_CONFIG,MockMetricsReporter.class.getName());
  KafkaConsumer<byte[],byte[]> consumer=new KafkaConsumer<byte[],byte[]>(props,new ByteArrayDeserializer(),new ByteArrayDeserializer());
  consumer.subscribe(Collections.singletonList(topic));
  Assert.assertEquals(Collections.singleton(topic),consumer.subscription());
  Assert.assertTrue(consumer.assignment().isEmpty());
  consumer.subscribe(Collections.<String>emptyList());
  Assert.assertTrue(consumer.subscription().isEmpty());
  Assert.assertTrue(consumer.assignment().isEmpty());
  consumer.assign(Collections.singletonList(tp0));
  Assert.assertTrue(consumer.subscription().isEmpty());
  Assert.assertEquals(Collections.singleton(tp0),consumer.assignment());
  consumer.unsubscribe();
  Assert.assertTrue(consumer.subscription().isEmpty());
  Assert.assertTrue(consumer.assignment().isEmpty());
}

</code></pre>

<br>
<pre class="type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstructorClose() throws Exception {
  Properties props=new Properties();
  props.setProperty(ConsumerConfig.CLIENT_ID_CONFIG,"testConstructorClose");
  props.setProperty(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG,"some.invalid.hostname.foo.bar:9999");
  props.setProperty(ConsumerConfig.METRIC_REPORTER_CLASSES_CONFIG,MockMetricsReporter.class.getName());
  final int oldInitCount=MockMetricsReporter.INIT_COUNT.get();
  final int oldCloseCount=MockMetricsReporter.CLOSE_COUNT.get();
  try {
    KafkaConsumer<byte[],byte[]> consumer=new KafkaConsumer<byte[],byte[]>(props,new ByteArrayDeserializer(),new ByteArrayDeserializer());
  }
 catch (  KafkaException e) {
    Assert.assertEquals(oldInitCount + 1,MockMetricsReporter.INIT_COUNT.get());
    Assert.assertEquals(oldCloseCount + 1,MockMetricsReporter.CLOSE_COUNT.get());
    Assert.assertEquals("Failed to construct kafka consumer",e.getMessage());
    return;
  }
  Assert.fail("should have caught an exception and returned");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.MockConsumerTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleMock(){
  consumer.subscribe(Arrays.asList("test"),new NoOpConsumerRebalanceListener());
  assertEquals(0,consumer.poll(1000).count());
  consumer.rebalance(Arrays.asList(new TopicPartition("test",0),new TopicPartition("test",1)));
  HashMap<TopicPartition,Long> beginningOffsets=new HashMap<>();
  beginningOffsets.put(new TopicPartition("test",0),0L);
  beginningOffsets.put(new TopicPartition("test",1),0L);
  consumer.updateBeginningOffsets(beginningOffsets);
  consumer.seek(new TopicPartition("test",0),0);
  ConsumerRecord<String,String> rec1=new ConsumerRecord<String,String>("test",0,0,"key1","value1");
  ConsumerRecord<String,String> rec2=new ConsumerRecord<String,String>("test",0,1,"key2","value2");
  consumer.addRecord(rec1);
  consumer.addRecord(rec2);
  ConsumerRecords<String,String> recs=consumer.poll(1);
  Iterator<ConsumerRecord<String,String>> iter=recs.iterator();
  assertEquals(rec1,iter.next());
  assertEquals(rec2,iter.next());
  assertFalse(iter.hasNext());
  assertEquals(2L,consumer.position(new TopicPartition("test",0)));
  consumer.commitSync();
  assertEquals(2L,consumer.committed(new TopicPartition("test",0)).offset());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.RangeAssignorTest </h4><pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOneConsumerNoTopic(){
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Collections.<String>emptyList()));
  assertEquals(Collections.singleton(consumerId),assignment.keySet());
  assertTrue(assignment.get(consumerId).isEmpty());
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOneConsumerNonexistentTopic(){
  String topic="topic";
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic,0);
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Arrays.asList(topic)));
  assertEquals(Collections.singleton(consumerId),assignment.keySet());
  assertTrue(assignment.get(consumerId).isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.RoundRobinAssignorTest </h4><pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOneConsumerNoTopic(){
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Collections.<String>emptyList()));
  assertEquals(Collections.singleton(consumerId),assignment.keySet());
  assertTrue(assignment.get(consumerId).isEmpty());
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOneConsumerNonexistentTopic(){
  String topic="topic";
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic,0);
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Arrays.asList(topic)));
  assertEquals(Collections.singleton(consumerId),assignment.keySet());
  assertTrue(assignment.get(consumerId).isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.ConsumerCoordinatorTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommitOffsetAsyncDisconnected(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  MockCommitCallback cb=new MockCommitCallback();
  client.prepareResponse(offsetCommitResponse(Collections.singletonMap(tp,Errors.NONE.code())),true);
  coordinator.commitOffsetsAsync(Collections.singletonMap(tp,new OffsetAndMetadata(100L)),cb);
  consumerClient.poll(0);
  assertTrue(coordinator.coordinatorUnknown());
  assertEquals(1,cb.invoked);
  assertTrue(cb.exception instanceof DisconnectException);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRefreshOffsetLoadInProgress(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.needRefreshCommits();
  client.prepareResponse(offsetFetchResponse(tp,Errors.GROUP_LOAD_IN_PROGRESS.code(),"",100L));
  client.prepareResponse(offsetFetchResponse(tp,Errors.NONE.code(),"",100L));
  coordinator.refreshCommittedOffsetsIfNeeded();
  assertFalse(subscriptions.refreshCommitsNeeded());
  assertEquals(100L,subscriptions.committed(tp).offset());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommitOffsetAsyncCoordinatorNotAvailable(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  MockCommitCallback cb=new MockCommitCallback();
  client.prepareResponse(offsetCommitResponse(Collections.singletonMap(tp,Errors.GROUP_COORDINATOR_NOT_AVAILABLE.code())));
  coordinator.commitOffsetsAsync(Collections.singletonMap(tp,new OffsetAndMetadata(100L)),cb);
  consumerClient.poll(0);
  assertTrue(coordinator.coordinatorUnknown());
  assertEquals(1,cb.invoked);
  assertEquals(Errors.GROUP_COORDINATOR_NOT_AVAILABLE.exception(),cb.exception);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMaybeLeaveGroup(){
  final String consumerId="consumer";
  subscriptions.subscribe(Arrays.asList(topicName),rebalanceListener);
  subscriptions.needReassignment();
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(joinGroupFollowerResponse(1,consumerId,"leader",Errors.NONE.code()));
  client.prepareResponse(syncGroupResponse(Arrays.asList(tp),Errors.NONE.code()));
  coordinator.ensurePartitionAssignment();
  final AtomicBoolean received=new AtomicBoolean(false);
  client.prepareResponse(new MockClient.RequestMatcher(){
    @Override public boolean matches(    ClientRequest request){
      received.set(true);
      LeaveGroupRequest leaveRequest=new LeaveGroupRequest(request.request().body());
      return leaveRequest.memberId().equals(consumerId) && leaveRequest.groupId().equals(groupId);
    }
  }
,new LeaveGroupResponse(Errors.NONE.code()).toStruct());
  coordinator.maybeLeaveGroup();
  assertTrue(received.get());
  assertEquals(JoinGroupRequest.UNKNOWN_MEMBER_ID,coordinator.memberId);
  assertEquals(OffsetCommitRequest.DEFAULT_GENERATION_ID,coordinator.generation);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnknownMemberIdOnSyncGroup(){
  final String consumerId="consumer";
  subscriptions.subscribe(Arrays.asList(topicName),rebalanceListener);
  subscriptions.needReassignment();
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(joinGroupFollowerResponse(1,consumerId,"leader",Errors.NONE.code()));
  client.prepareResponse(syncGroupResponse(Collections.<TopicPartition>emptyList(),Errors.UNKNOWN_MEMBER_ID.code()));
  client.prepareResponse(new MockClient.RequestMatcher(){
    @Override public boolean matches(    ClientRequest request){
      JoinGroupRequest joinRequest=new JoinGroupRequest(request.request().body());
      return joinRequest.memberId().equals(JoinGroupRequest.UNKNOWN_MEMBER_ID);
    }
  }
,joinGroupFollowerResponse(2,consumerId,"leader",Errors.NONE.code()));
  client.prepareResponse(syncGroupResponse(Arrays.asList(tp),Errors.NONE.code()));
  coordinator.ensurePartitionAssignment();
  assertFalse(subscriptions.partitionAssignmentNeeded());
  assertEquals(Collections.singleton(tp),subscriptions.assignedPartitions());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommitOffsetOnly(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(offsetCommitResponse(Collections.singletonMap(tp,Errors.NONE.code())));
  AtomicBoolean success=new AtomicBoolean(false);
  coordinator.commitOffsetsAsync(Collections.singletonMap(tp,new OffsetAndMetadata(100L)),callback(success));
  consumerClient.poll(0);
  assertTrue(success.get());
  assertEquals(100L,subscriptions.committed(tp).offset());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIllegalGeneration(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  subscriptions.subscribe(Arrays.asList(topicName),rebalanceListener);
  subscriptions.assignFromSubscribed(Collections.singletonList(tp));
  time.sleep(sessionTimeoutMs);
  RequestFuture<Void> future=coordinator.sendHeartbeatRequest();
  assertEquals(1,consumerClient.pendingRequestCount());
  assertFalse(future.isDone());
  client.prepareResponse(heartbeatResponse(Errors.ILLEGAL_GENERATION.code()));
  time.sleep(sessionTimeoutMs);
  consumerClient.poll(0);
  assertTrue(future.isDone());
  assertTrue(future.failed());
  assertEquals(Errors.ILLEGAL_GENERATION.exception(),future.exception());
  assertTrue(coordinator.needRejoin());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDisconnectInJoin(){
  subscriptions.subscribe(Arrays.asList(topicName),rebalanceListener);
  subscriptions.needReassignment();
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(joinGroupFollowerResponse(1,"consumer","leader",Errors.NONE.code()),true);
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  client.prepareResponse(joinGroupFollowerResponse(1,"consumer","leader",Errors.NONE.code()));
  client.prepareResponse(syncGroupResponse(Arrays.asList(tp),Errors.NONE.code()));
  coordinator.ensurePartitionAssignment();
  assertFalse(subscriptions.partitionAssignmentNeeded());
  assertEquals(Collections.singleton(tp),subscriptions.assignedPartitions());
  assertEquals(1,rebalanceListener.revokedCount);
  assertEquals(1,rebalanceListener.assignedCount);
  assertEquals(Collections.singleton(tp),rebalanceListener.assigned);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCoordinatorDisconnect(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  time.sleep(sessionTimeoutMs);
  RequestFuture<Void> future=coordinator.sendHeartbeatRequest();
  assertEquals(1,consumerClient.pendingRequestCount());
  assertFalse(future.isDone());
  client.prepareResponse(heartbeatResponse(Errors.NONE.code()),true);
  time.sleep(sessionTimeoutMs);
  consumerClient.poll(0);
  assertTrue(future.isDone());
  assertTrue(future.failed());
  assertTrue(future.exception() instanceof DisconnectException);
  assertTrue(coordinator.coordinatorUnknown());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommitOffsetMetadata(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(offsetCommitResponse(Collections.singletonMap(tp,Errors.NONE.code())));
  AtomicBoolean success=new AtomicBoolean(false);
  coordinator.commitOffsetsAsync(Collections.singletonMap(tp,new OffsetAndMetadata(100L,"hello")),callback(success));
  consumerClient.poll(0);
  assertTrue(success.get());
  assertEquals(100L,subscriptions.committed(tp).offset());
  assertEquals("hello",subscriptions.committed(tp).metadata());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRefreshOffsetNotCoordinatorForConsumer(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.needRefreshCommits();
  client.prepareResponse(offsetFetchResponse(tp,Errors.NOT_COORDINATOR_FOR_GROUP.code(),"",100L));
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  client.prepareResponse(offsetFetchResponse(tp,Errors.NONE.code(),"",100L));
  coordinator.refreshCommittedOffsetsIfNeeded();
  assertFalse(subscriptions.refreshCommitsNeeded());
  assertEquals(100L,subscriptions.committed(tp).offset());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCoordinatorNotAvailable(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  time.sleep(sessionTimeoutMs);
  RequestFuture<Void> future=coordinator.sendHeartbeatRequest();
  assertEquals(1,consumerClient.pendingRequestCount());
  assertFalse(future.isDone());
  client.prepareResponse(heartbeatResponse(Errors.GROUP_COORDINATOR_NOT_AVAILABLE.code()));
  time.sleep(sessionTimeoutMs);
  consumerClient.poll(0);
  assertTrue(future.isDone());
  assertTrue(future.failed());
  assertEquals(Errors.GROUP_COORDINATOR_NOT_AVAILABLE.exception(),future.exception());
  assertTrue(coordinator.coordinatorUnknown());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNotCoordinator(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  time.sleep(sessionTimeoutMs);
  RequestFuture<Void> future=coordinator.sendHeartbeatRequest();
  assertEquals(1,consumerClient.pendingRequestCount());
  assertFalse(future.isDone());
  client.prepareResponse(heartbeatResponse(Errors.NOT_COORDINATOR_FOR_GROUP.code()));
  time.sleep(sessionTimeoutMs);
  consumerClient.poll(0);
  assertTrue(future.isDone());
  assertTrue(future.failed());
  assertEquals(Errors.NOT_COORDINATOR_FOR_GROUP.exception(),future.exception());
  assertTrue(coordinator.coordinatorUnknown());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRebalanceInProgressOnSyncGroup(){
  final String consumerId="consumer";
  subscriptions.subscribe(Arrays.asList(topicName),rebalanceListener);
  subscriptions.needReassignment();
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(joinGroupFollowerResponse(1,consumerId,"leader",Errors.NONE.code()));
  client.prepareResponse(syncGroupResponse(Collections.<TopicPartition>emptyList(),Errors.REBALANCE_IN_PROGRESS.code()));
  client.prepareResponse(joinGroupFollowerResponse(2,consumerId,"leader",Errors.NONE.code()));
  client.prepareResponse(syncGroupResponse(Arrays.asList(tp),Errors.NONE.code()));
  coordinator.ensurePartitionAssignment();
  assertFalse(subscriptions.partitionAssignmentNeeded());
  assertEquals(Collections.singleton(tp),subscriptions.assignedPartitions());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNormalJoinGroupLeader(){
  final String consumerId="leader";
  subscriptions.subscribe(Arrays.asList(topicName),rebalanceListener);
  subscriptions.needReassignment();
  metadata.setTopics(Arrays.asList(topicName));
  metadata.update(cluster,time.milliseconds());
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  Map<String,List<String>> memberSubscriptions=Collections.singletonMap(consumerId,Arrays.asList(topicName));
  partitionAssignor.prepare(Collections.singletonMap(consumerId,Arrays.asList(tp)));
  client.prepareResponse(joinGroupLeaderResponse(1,consumerId,memberSubscriptions,Errors.NONE.code()));
  client.prepareResponse(new MockClient.RequestMatcher(){
    @Override public boolean matches(    ClientRequest request){
      SyncGroupRequest sync=new SyncGroupRequest(request.request().body());
      return sync.memberId().equals(consumerId) && sync.generationId() == 1 && sync.groupAssignment().containsKey(consumerId);
    }
  }
,syncGroupResponse(Arrays.asList(tp),Errors.NONE.code()));
  coordinator.ensurePartitionAssignment();
  assertFalse(subscriptions.partitionAssignmentNeeded());
  assertEquals(Collections.singleton(tp),subscriptions.assignedPartitions());
  assertEquals(1,rebalanceListener.revokedCount);
  assertEquals(Collections.emptySet(),rebalanceListener.revoked);
  assertEquals(1,rebalanceListener.assignedCount);
  assertEquals(Collections.singleton(tp),rebalanceListener.assigned);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRefreshOffsetWithNoFetchableOffsets(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.needRefreshCommits();
  client.prepareResponse(offsetFetchResponse(tp,Errors.NONE.code(),"",-1L));
  coordinator.refreshCommittedOffsetsIfNeeded();
  assertFalse(subscriptions.refreshCommitsNeeded());
  assertEquals(null,subscriptions.committed(tp));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNormalJoinGroupFollower(){
  final String consumerId="consumer";
  subscriptions.subscribe(Arrays.asList(topicName),rebalanceListener);
  subscriptions.needReassignment();
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(joinGroupFollowerResponse(1,consumerId,"leader",Errors.NONE.code()));
  client.prepareResponse(new MockClient.RequestMatcher(){
    @Override public boolean matches(    ClientRequest request){
      SyncGroupRequest sync=new SyncGroupRequest(request.request().body());
      return sync.memberId().equals(consumerId) && sync.generationId() == 1 && sync.groupAssignment().isEmpty();
    }
  }
,syncGroupResponse(Arrays.asList(tp),Errors.NONE.code()));
  coordinator.ensurePartitionAssignment();
  assertFalse(subscriptions.partitionAssignmentNeeded());
  assertEquals(Collections.singleton(tp),subscriptions.assignedPartitions());
  assertEquals(1,rebalanceListener.revokedCount);
  assertEquals(1,rebalanceListener.assignedCount);
  assertEquals(Collections.singleton(tp),rebalanceListener.assigned);
}

</code></pre>

<br>
<pre class="type-3 type-6 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommitOffsetAsyncWithDefaultCallback(){
  int invokedBeforeTest=defaultOffsetCommitCallback.invoked;
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(offsetCommitResponse(Collections.singletonMap(tp,Errors.NONE.code())));
  coordinator.commitOffsetsAsync(Collections.singletonMap(tp,new OffsetAndMetadata(100L)),null);
  consumerClient.poll(0);
  assertEquals(invokedBeforeTest + 1,defaultOffsetCommitCallback.invoked);
  assertNull(defaultOffsetCommitCallback.exception);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIllegalGenerationOnSyncGroup(){
  final String consumerId="consumer";
  subscriptions.subscribe(Arrays.asList(topicName),rebalanceListener);
  subscriptions.needReassignment();
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(joinGroupFollowerResponse(1,consumerId,"leader",Errors.NONE.code()));
  client.prepareResponse(syncGroupResponse(Collections.<TopicPartition>emptyList(),Errors.ILLEGAL_GENERATION.code()));
  client.prepareResponse(new MockClient.RequestMatcher(){
    @Override public boolean matches(    ClientRequest request){
      JoinGroupRequest joinRequest=new JoinGroupRequest(request.request().body());
      return joinRequest.memberId().equals(JoinGroupRequest.UNKNOWN_MEMBER_ID);
    }
  }
,joinGroupFollowerResponse(2,consumerId,"leader",Errors.NONE.code()));
  client.prepareResponse(syncGroupResponse(Arrays.asList(tp),Errors.NONE.code()));
  coordinator.ensurePartitionAssignment();
  assertFalse(subscriptions.partitionAssignmentNeeded());
  assertEquals(Collections.singleton(tp),subscriptions.assignedPartitions());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRefreshOffset(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.needRefreshCommits();
  client.prepareResponse(offsetFetchResponse(tp,Errors.NONE.code(),"",100L));
  coordinator.refreshCommittedOffsetsIfNeeded();
  assertFalse(subscriptions.refreshCommitsNeeded());
  assertEquals(100L,subscriptions.committed(tp).offset());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNormalHeartbeat(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  time.sleep(sessionTimeoutMs);
  RequestFuture<Void> future=coordinator.sendHeartbeatRequest();
  assertEquals(1,consumerClient.pendingRequestCount());
  assertFalse(future.isDone());
  client.prepareResponse(heartbeatResponse(Errors.NONE.code()));
  consumerClient.poll(0);
  assertTrue(future.isDone());
  assertTrue(future.succeeded());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnknownConsumerId(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  subscriptions.subscribe(Arrays.asList(topicName),rebalanceListener);
  subscriptions.assignFromSubscribed(Collections.singletonList(tp));
  time.sleep(sessionTimeoutMs);
  RequestFuture<Void> future=coordinator.sendHeartbeatRequest();
  assertEquals(1,consumerClient.pendingRequestCount());
  assertFalse(future.isDone());
  client.prepareResponse(heartbeatResponse(Errors.UNKNOWN_MEMBER_ID.code()));
  time.sleep(sessionTimeoutMs);
  consumerClient.poll(0);
  assertTrue(future.isDone());
  assertTrue(future.failed());
  assertEquals(Errors.UNKNOWN_MEMBER_ID.exception(),future.exception());
  assertTrue(coordinator.needRejoin());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommitOffsetAsyncNotCoordinator(){
  client.prepareResponse(consumerMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  MockCommitCallback cb=new MockCommitCallback();
  client.prepareResponse(offsetCommitResponse(Collections.singletonMap(tp,Errors.NOT_COORDINATOR_FOR_GROUP.code())));
  coordinator.commitOffsetsAsync(Collections.singletonMap(tp,new OffsetAndMetadata(100L)),cb);
  consumerClient.poll(0);
  assertTrue(coordinator.coordinatorUnknown());
  assertEquals(1,cb.invoked);
  assertEquals(Errors.NOT_COORDINATOR_FOR_GROUP.exception(),cb.exception);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.ConsumerNetworkClientTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void send(){
  client.prepareResponse(heartbeatResponse(Errors.NONE.code()));
  RequestFuture<ClientResponse> future=consumerClient.send(node,ApiKeys.METADATA,heartbeatRequest());
  assertEquals(1,consumerClient.pendingRequestCount());
  assertEquals(1,consumerClient.pendingRequestCount(node));
  assertFalse(future.isDone());
  consumerClient.poll(future);
  assertTrue(future.isDone());
  assertTrue(future.succeeded());
  ClientResponse clientResponse=future.value();
  HeartbeatResponse response=new HeartbeatResponse(clientResponse.responseBody());
  assertEquals(Errors.NONE.code(),response.errorCode());
}

</code></pre>

<br>
<pre class="type-10 type-9 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void wakeup(){
  RequestFuture<ClientResponse> future=consumerClient.send(node,ApiKeys.METADATA,heartbeatRequest());
  consumerClient.wakeup();
  try {
    consumerClient.poll(0);
    fail();
  }
 catch (  WakeupException e) {
  }
  client.respond(heartbeatResponse(Errors.NONE.code()));
  consumerClient.poll(future);
  assertTrue(future.isDone());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multiSend(){
  client.prepareResponse(heartbeatResponse(Errors.NONE.code()));
  client.prepareResponse(heartbeatResponse(Errors.NONE.code()));
  RequestFuture<ClientResponse> future1=consumerClient.send(node,ApiKeys.METADATA,heartbeatRequest());
  RequestFuture<ClientResponse> future2=consumerClient.send(node,ApiKeys.METADATA,heartbeatRequest());
  assertEquals(2,consumerClient.pendingRequestCount());
  assertEquals(2,consumerClient.pendingRequestCount(node));
  consumerClient.awaitPendingRequests(node);
  assertTrue(future1.succeeded());
  assertTrue(future2.succeeded());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.ConsumerProtocolTest </h4><pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deserializeNullAssignmentUserData(){
  List<TopicPartition> partitions=Arrays.asList(new TopicPartition("foo",0),new TopicPartition("bar",2));
  ByteBuffer buffer=ConsumerProtocol.serializeAssignment(new PartitionAssignor.Assignment(partitions,null));
  PartitionAssignor.Assignment parsedAssignment=ConsumerProtocol.deserializeAssignment(buffer);
  assertEquals(toSet(partitions),toSet(parsedAssignment.partitions()));
  assertNull(parsedAssignment.userData());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void serializeDeserializeNullSubscriptionUserData(){
  Subscription subscription=new Subscription(Arrays.asList("foo","bar"),null);
  ByteBuffer buffer=ConsumerProtocol.serializeSubscription(subscription);
  Subscription parsedSubscription=ConsumerProtocol.deserializeSubscription(buffer);
  assertEquals(subscription.topics(),parsedSubscription.topics());
  assertNull(subscription.userData());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.FetcherTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateFetchPositionResetToEarliestOffset(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.needOffsetReset(tp,OffsetResetStrategy.EARLIEST);
  client.prepareResponse(listOffsetRequestMatcher(ListOffsetRequest.EARLIEST_TIMESTAMP),listOffsetResponse(Errors.NONE,Arrays.asList(5L)));
  fetcher.updateFetchPositions(Collections.singleton(tp));
  assertFalse(subscriptions.isOffsetResetNeeded(tp));
  assertTrue(subscriptions.isFetchable(tp));
  assertEquals(5,(long)subscriptions.position(tp));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateFetchPositionDisconnect(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.needOffsetReset(tp,OffsetResetStrategy.LATEST);
  client.prepareResponse(listOffsetRequestMatcher(ListOffsetRequest.LATEST_TIMESTAMP),listOffsetResponse(Errors.NONE,Arrays.asList(5L)),true);
  client.prepareResponse(listOffsetRequestMatcher(ListOffsetRequest.LATEST_TIMESTAMP),listOffsetResponse(Errors.NONE,Arrays.asList(5L)));
  fetcher.updateFetchPositions(Collections.singleton(tp));
  assertFalse(subscriptions.isOffsetResetNeeded(tp));
  assertTrue(subscriptions.isFetchable(tp));
  assertEquals(5,(long)subscriptions.position(tp));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFetchDisconnected(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.seek(tp,0);
  fetcher.initFetches(cluster);
  client.prepareResponse(fetchResponse(this.records.buffer(),Errors.NONE.code(),100L,0),true);
  consumerClient.poll(0);
  assertEquals(0,fetcher.fetchedRecords().size());
  assertFalse(subscriptions.isOffsetResetNeeded(tp));
  assertTrue(subscriptions.isFetchable(tp));
  assertEquals(0,(long)subscriptions.position(tp));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFetchedRecordsAfterSeek(){
  subscriptionsNoAutoReset.assignFromUser(Arrays.asList(tp));
  subscriptionsNoAutoReset.seek(tp,0);
  fetcherNoAutoReset.initFetches(cluster);
  client.prepareResponse(fetchResponse(this.records.buffer(),Errors.OFFSET_OUT_OF_RANGE.code(),100L,0));
  consumerClient.poll(0);
  assertFalse(subscriptionsNoAutoReset.isOffsetResetNeeded(tp));
  subscriptionsNoAutoReset.seek(tp,2);
  assertEquals(0,fetcherNoAutoReset.fetchedRecords().size());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateFetchPositionToCommitted(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.committed(tp,new OffsetAndMetadata(5));
  fetcher.updateFetchPositions(Collections.singleton(tp));
  assertTrue(subscriptions.isFetchable(tp));
  assertEquals(5,(long)subscriptions.position(tp));
}

</code></pre>

<br>
<pre class="type-10 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFetchOffsetOutOfRangeException(){
  subscriptionsNoAutoReset.assignFromUser(Arrays.asList(tp));
  subscriptionsNoAutoReset.seek(tp,0);
  fetcherNoAutoReset.initFetches(cluster);
  client.prepareResponse(fetchResponse(this.records.buffer(),Errors.OFFSET_OUT_OF_RANGE.code(),100L,0));
  consumerClient.poll(0);
  assertFalse(subscriptionsNoAutoReset.isOffsetResetNeeded(tp));
  try {
    fetcherNoAutoReset.fetchedRecords();
    fail("Should have thrown OffsetOutOfRangeException");
  }
 catch (  OffsetOutOfRangeException e) {
    assertTrue(e.offsetOutOfRangePartitions().containsKey(tp));
    assertEquals(e.offsetOutOfRangePartitions().size(),1);
  }
  assertEquals(0,fetcherNoAutoReset.fetchedRecords().size());
}

</code></pre>

<br>
<pre class="type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnauthorizedTopic(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.seek(tp,0);
  fetcher.initFetches(cluster);
  client.prepareResponse(fetchResponse(this.records.buffer(),Errors.TOPIC_AUTHORIZATION_FAILED.code(),100L,0));
  consumerClient.poll(0);
  try {
    fetcher.fetchedRecords();
    fail("fetchedRecords should have thrown");
  }
 catch (  TopicAuthorizationException e) {
    assertEquals(Collections.singleton(topicName),e.unauthorizedTopics());
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFetchOffsetOutOfRange(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.seek(tp,0);
  fetcher.initFetches(cluster);
  client.prepareResponse(fetchResponse(this.records.buffer(),Errors.OFFSET_OUT_OF_RANGE.code(),100L,0));
  consumerClient.poll(0);
  assertTrue(subscriptions.isOffsetResetNeeded(tp));
  assertEquals(0,fetcher.fetchedRecords().size());
  assertEquals(null,subscriptions.position(tp));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateFetchPositionResetToDefaultOffset(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  client.prepareResponse(listOffsetRequestMatcher(ListOffsetRequest.EARLIEST_TIMESTAMP),listOffsetResponse(Errors.NONE,Arrays.asList(5L)));
  fetcher.updateFetchPositions(Collections.singleton(tp));
  assertFalse(subscriptions.isOffsetResetNeeded(tp));
  assertTrue(subscriptions.isFetchable(tp));
  assertEquals(5,(long)subscriptions.position(tp));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateFetchPositionResetToLatestOffset(){
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.needOffsetReset(tp,OffsetResetStrategy.LATEST);
  client.prepareResponse(listOffsetRequestMatcher(ListOffsetRequest.LATEST_TIMESTAMP),listOffsetResponse(Errors.NONE,Arrays.asList(5L)));
  fetcher.updateFetchPositions(Collections.singleton(tp));
  assertFalse(subscriptions.isOffsetResetNeeded(tp));
  assertTrue(subscriptions.isFetchable(tp));
  assertEquals(5,(long)subscriptions.position(tp));
}

</code></pre>

<br>
<pre class="type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAllTopicsUnauthorized(){
  client.prepareResponse(new MetadataResponse(cluster,Collections.singletonMap(topicName,Errors.TOPIC_AUTHORIZATION_FAILED)).toStruct());
  try {
    fetcher.getAllTopicMetadata(10L);
    fail();
  }
 catch (  TopicAuthorizationException e) {
    assertEquals(Collections.singleton(topicName),e.unauthorizedTopics());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.RequestFutureTest </h4><pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testComposeSuccessCase(){
  RequestFuture<String> future=new RequestFuture<String>();
  RequestFuture<Integer> composed=future.compose(new RequestFutureAdapter<String,Integer>(){
    @Override public void onSuccess(    String value,    RequestFuture<Integer> future){
      future.complete(value.length());
    }
  }
);
  future.complete("hello");
  assertTrue(composed.isDone());
  assertTrue(composed.succeeded());
  assertEquals(5,(int)composed.value());
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testComposeFailureCase(){
  RequestFuture<String> future=new RequestFuture<String>();
  RequestFuture<Integer> composed=future.compose(new RequestFutureAdapter<String,Integer>(){
    @Override public void onSuccess(    String value,    RequestFuture<Integer> future){
      future.complete(value.length());
    }
  }
);
  RuntimeException e=new RuntimeException();
  future.raise(e);
  assertTrue(composed.isDone());
  assertTrue(composed.failed());
  assertEquals(e,composed.exception());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.SubscriptionStateTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void partitionReset(){
  state.assignFromUser(Arrays.asList(tp0));
  state.seek(tp0,5);
  assertEquals(5L,(long)state.position(tp0));
  state.needOffsetReset(tp0);
  assertFalse(state.isFetchable(tp0));
  assertTrue(state.isOffsetResetNeeded(tp0));
  assertEquals(null,state.position(tp0));
  state.seek(tp0,0);
  assertTrue(state.isFetchable(tp0));
  assertFalse(state.isOffsetResetNeeded(tp0));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void unsubscription(){
  state.subscribe(Pattern.compile(".*"),rebalanceListener);
  state.changeSubscription(Arrays.asList(topic,topic1));
  assertTrue(state.partitionAssignmentNeeded());
  state.assignFromSubscribed(asList(tp1));
  assertEquals(Collections.singleton(tp1),state.assignedPartitions());
  assertFalse(state.partitionAssignmentNeeded());
  state.unsubscribe();
  assertEquals(0,state.subscription().size());
  assertTrue(state.assignedPartitions().isEmpty());
  assertTrue(state.partitionAssignmentNeeded());
  state.assignFromUser(Arrays.asList(tp0));
  assertEquals(Collections.singleton(tp0),state.assignedPartitions());
  assertFalse(state.partitionAssignmentNeeded());
  state.unsubscribe();
  assertEquals(0,state.subscription().size());
  assertTrue(state.assignedPartitions().isEmpty());
  assertTrue(state.partitionAssignmentNeeded());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void topicSubscription(){
  state.subscribe(Arrays.asList(topic),rebalanceListener);
  assertEquals(1,state.subscription().size());
  assertTrue(state.partitionAssignmentNeeded());
  assertTrue(state.assignedPartitions().isEmpty());
  assertTrue(state.partitionsAutoAssigned());
  state.assignFromSubscribed(asList(tp0));
  state.seek(tp0,1);
  state.committed(tp0,new OffsetAndMetadata(1));
  assertAllPositions(tp0,1L);
  state.assignFromSubscribed(asList(tp1));
  assertTrue(state.isAssigned(tp1));
  assertFalse(state.partitionAssignmentNeeded());
  assertFalse(state.isAssigned(tp0));
  assertFalse(state.isFetchable(tp1));
  assertEquals(Collections.singleton(tp1),state.assignedPartitions());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void partitionAssignment(){
  state.assignFromUser(Arrays.asList(tp0));
  assertEquals(Collections.singleton(tp0),state.assignedPartitions());
  assertFalse(state.partitionAssignmentNeeded());
  state.committed(tp0,new OffsetAndMetadata(1));
  state.seek(tp0,1);
  assertTrue(state.isFetchable(tp0));
  assertAllPositions(tp0,1L);
  state.assignFromUser(Arrays.<TopicPartition>asList());
  assertTrue(state.assignedPartitions().isEmpty());
  assertFalse(state.isAssigned(tp0));
  assertFalse(state.isFetchable(tp0));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.KafkaProducerTest </h4><pre class="type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstructorFailureCloseResource(){
  Properties props=new Properties();
  props.setProperty(ProducerConfig.CLIENT_ID_CONFIG,"testConstructorClose");
  props.setProperty(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG,"some.invalid.hostname.foo.bar:9999");
  props.setProperty(ProducerConfig.METRIC_REPORTER_CLASSES_CONFIG,MockMetricsReporter.class.getName());
  final int oldInitCount=MockMetricsReporter.INIT_COUNT.get();
  final int oldCloseCount=MockMetricsReporter.CLOSE_COUNT.get();
  try {
    KafkaProducer<byte[],byte[]> producer=new KafkaProducer<byte[],byte[]>(props,new ByteArraySerializer(),new ByteArraySerializer());
  }
 catch (  KafkaException e) {
    Assert.assertEquals(oldInitCount + 1,MockMetricsReporter.INIT_COUNT.get());
    Assert.assertEquals(oldCloseCount + 1,MockMetricsReporter.CLOSE_COUNT.get());
    Assert.assertEquals("Failed to construct kafka producer",e.getMessage());
    return;
  }
  Assert.fail("should have caught an exception and returned");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.MockProducerTest </h4><pre class="type-10 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testManualCompletion() throws Exception {
  MockProducer<byte[],byte[]> producer=new MockProducer<byte[],byte[]>(false,new MockSerializer(),new MockSerializer());
  ProducerRecord<byte[],byte[]> record1=new ProducerRecord<byte[],byte[]>(topic,"key1".getBytes(),"value1".getBytes());
  ProducerRecord<byte[],byte[]> record2=new ProducerRecord<byte[],byte[]>(topic,"key2".getBytes(),"value2".getBytes());
  Future<RecordMetadata> md1=producer.send(record1);
  assertFalse("Send shouldn't have completed",md1.isDone());
  Future<RecordMetadata> md2=producer.send(record2);
  assertFalse("Send shouldn't have completed",md2.isDone());
  assertTrue("Complete the first request",producer.completeNext());
  assertFalse("Requst should be successful",isError(md1));
  assertFalse("Second request still incomplete",md2.isDone());
  IllegalArgumentException e=new IllegalArgumentException("blah");
  assertTrue("Complete the second request with an error",producer.errorNext(e));
  try {
    md2.get();
    fail("Expected error to be thrown");
  }
 catch (  ExecutionException err) {
    assertEquals(e,err.getCause());
  }
  assertFalse("No more requests to complete",producer.completeNext());
  Future<RecordMetadata> md3=producer.send(record1);
  Future<RecordMetadata> md4=producer.send(record2);
  assertTrue("Requests should not be completed.",!md3.isDone() && !md4.isDone());
  producer.flush();
  assertTrue("Requests should be completed.",md3.isDone() && md4.isDone());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void testAutoCompleteMock() throws Exception {
  MockProducer<byte[],byte[]> producer=new MockProducer<byte[],byte[]>(true,new MockSerializer(),new MockSerializer());
  ProducerRecord<byte[],byte[]> record=new ProducerRecord<byte[],byte[]>(topic,"key".getBytes(),"value".getBytes());
  Future<RecordMetadata> metadata=producer.send(record);
  assertTrue("Send should be immediately complete",metadata.isDone());
  assertFalse("Send should be successful",isError(metadata));
  assertEquals("Offset should be 0",0L,metadata.get().offset());
  assertEquals(topic,metadata.get().topic());
  assertEquals("We should have the record in our history",singletonList(record),producer.history());
  producer.clear();
  assertEquals("Clear should erase our history",0,producer.history().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.ProducerRecordTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEqualsAndHashCode(){
  ProducerRecord<String,Integer> producerRecord=new ProducerRecord<String,Integer>("test",1,"key",1);
  assertEquals(producerRecord,producerRecord);
  assertEquals(producerRecord.hashCode(),producerRecord.hashCode());
  ProducerRecord<String,Integer> equalRecord=new ProducerRecord<String,Integer>("test",1,"key",1);
  assertEquals(producerRecord,equalRecord);
  assertEquals(producerRecord.hashCode(),equalRecord.hashCode());
  ProducerRecord<String,Integer> topicMisMatch=new ProducerRecord<String,Integer>("test-1",1,"key",1);
  assertFalse(producerRecord.equals(topicMisMatch));
  ProducerRecord<String,Integer> partitionMismatch=new ProducerRecord<String,Integer>("test",2,"key",1);
  assertFalse(producerRecord.equals(partitionMismatch));
  ProducerRecord<String,Integer> keyMisMatch=new ProducerRecord<String,Integer>("test",1,"key-1",1);
  assertFalse(producerRecord.equals(keyMisMatch));
  ProducerRecord<String,Integer> valueMisMatch=new ProducerRecord<String,Integer>("test",1,"key",2);
  assertFalse(producerRecord.equals(valueMisMatch));
  ProducerRecord<String,Integer> nullFieldsRecord=new ProducerRecord<String,Integer>("topic",null,null,null);
  assertEquals(nullFieldsRecord,nullFieldsRecord);
  assertEquals(nullFieldsRecord.hashCode(),nullFieldsRecord.hashCode());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.RecordSendTest </h4><pre class="type-10 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that waiting on a request that never completes times out
 */
@Test public void testTimeout() throws Exception {
  ProduceRequestResult request=new ProduceRequestResult();
  FutureRecordMetadata future=new FutureRecordMetadata(request,relOffset);
  assertFalse("Request is not completed",future.isDone());
  try {
    future.get(5,TimeUnit.MILLISECONDS);
    fail("Should have thrown exception.");
  }
 catch (  TimeoutException e) {
  }
  request.done(topicPartition,baseOffset,null);
  assertTrue(future.isDone());
  assertEquals(baseOffset + relOffset,future.get().offset());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.internals.BufferPoolTest </h4><pre class="type-7 type-3 type-1 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that we cannot try to allocate more memory then we have in the whole pool
 */
@Test(expected=IllegalArgumentException.class) public void testCantAllocateMoreMemoryThanWeHave() throws Exception {
  BufferPool pool=new BufferPool(1024,512,metrics,time,metricGroup);
  ByteBuffer buffer=pool.allocate(1024,maxBlockTimeMs);
  assertEquals(1024,buffer.limit());
  pool.deallocate(buffer);
  buffer=pool.allocate(1025,maxBlockTimeMs);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This test creates lots of threads that hammer on the pool
 */
@Test public void testStressfulSituation() throws Exception {
  int numThreads=10;
  final int iterations=50000;
  final int poolableSize=1024;
  final long totalMemory=numThreads / 2 * poolableSize;
  final BufferPool pool=new BufferPool(totalMemory,poolableSize,metrics,time,metricGroup);
  List<StressTestThread> threads=new ArrayList<StressTestThread>();
  for (int i=0; i < numThreads; i++)   threads.add(new StressTestThread(pool,iterations));
  for (  StressTestThread thread : threads)   thread.start();
  for (  StressTestThread thread : threads)   thread.join();
  for (  StressTestThread thread : threads)   assertTrue("Thread should have completed all iterations successfully.",thread.success.get());
  assertEquals(totalMemory,pool.availableMemory());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.internals.DefaultPartitionerTest </h4><pre class="type-13 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRoundRobinWithUnavailablePartitions(){
  int countForPart0=0;
  int countForPart2=0;
  for (int i=1; i <= 100; i++) {
    int part=partitioner.partition("test",null,null,null,null,cluster);
    assertTrue("We should never choose a leader-less node in round robin",part == 0 || part == 2);
    if (part == 0)     countForPart0++;
 else     countForPart2++;
  }
  assertEquals("The distribution between two available partitions should be even",countForPart0,countForPart2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.internals.RecordAccumulatorTest </h4><pre class="type-8 type-9 type-7 type-3 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLinger() throws Exception {
  long lingerMs=10L;
  RecordAccumulator accum=new RecordAccumulator(1024,10 * 1024,CompressionType.NONE,lingerMs,100L,metrics,time);
  accum.append(tp1,key,value,null,maxBlockTimeMs);
  assertEquals("No partitions should be ready",0,accum.ready(cluster,time.milliseconds()).readyNodes.size());
  time.sleep(10);
  assertEquals("Our partition's leader should be ready",Collections.singleton(node1),accum.ready(cluster,time.milliseconds()).readyNodes);
  List<RecordBatch> batches=accum.drain(cluster,Collections.singleton(node1),Integer.MAX_VALUE,0).get(node1.id());
  assertEquals(1,batches.size());
  RecordBatch batch=batches.get(0);
  Iterator<LogEntry> iter=batch.records.iterator();
  LogEntry entry=iter.next();
  assertEquals("Keys should match",ByteBuffer.wrap(key),entry.record().key());
  assertEquals("Values should match",ByteBuffer.wrap(value),entry.record().value());
  assertFalse("No more records",iter.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNextReadyCheckDelay() throws Exception {
  long lingerMs=10L;
  RecordAccumulator accum=new RecordAccumulator(1024,10 * 1024,CompressionType.NONE,lingerMs,100L,metrics,time);
  int appends=1024 / msgSize;
  for (int i=0; i < appends; i++)   accum.append(tp1,key,value,null,maxBlockTimeMs);
  RecordAccumulator.ReadyCheckResult result=accum.ready(cluster,time.milliseconds());
  assertEquals("No nodes should be ready.",0,result.readyNodes.size());
  assertEquals("Next check time should be the linger time",lingerMs,result.nextReadyCheckDelayMs);
  time.sleep(lingerMs / 2);
  for (int i=0; i < appends; i++)   accum.append(tp3,key,value,null,maxBlockTimeMs);
  result=accum.ready(cluster,time.milliseconds());
  assertEquals("No nodes should be ready.",0,result.readyNodes.size());
  assertEquals("Next check time should be defined by node1, half remaining linger time",lingerMs / 2,result.nextReadyCheckDelayMs);
  for (int i=0; i < appends + 1; i++)   accum.append(tp2,key,value,null,maxBlockTimeMs);
  result=accum.ready(cluster,time.milliseconds());
  assertEquals("Node1 should be ready",Collections.singleton(node1),result.readyNodes);
  assertTrue("Next check time should be defined by node2, at most linger time",result.nextReadyCheckDelayMs <= lingerMs);
}

</code></pre>

<br>
<pre class="type-8 type-13 type-9 type-7 type-3 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFull() throws Exception {
  long now=time.milliseconds();
  RecordAccumulator accum=new RecordAccumulator(1024,10 * 1024,CompressionType.NONE,10L,100L,metrics,time);
  int appends=1024 / msgSize;
  for (int i=0; i < appends; i++) {
    accum.append(tp1,key,value,null,maxBlockTimeMs);
    assertEquals("No partitions should be ready.",0,accum.ready(cluster,now).readyNodes.size());
  }
  accum.append(tp1,key,value,null,maxBlockTimeMs);
  assertEquals("Our partition's leader should be ready",Collections.singleton(node1),accum.ready(cluster,time.milliseconds()).readyNodes);
  List<RecordBatch> batches=accum.drain(cluster,Collections.singleton(node1),Integer.MAX_VALUE,0).get(node1.id());
  assertEquals(1,batches.size());
  RecordBatch batch=batches.get(0);
  Iterator<LogEntry> iter=batch.records.iterator();
  for (int i=0; i < appends; i++) {
    LogEntry entry=iter.next();
    assertEquals("Keys should match",ByteBuffer.wrap(key),entry.record().key());
    assertEquals("Values should match",ByteBuffer.wrap(value),entry.record().value());
  }
  assertFalse("No more records",iter.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAbortIncompleteBatches() throws Exception {
  long lingerMs=Long.MAX_VALUE;
  final AtomicInteger numExceptionReceivedInCallback=new AtomicInteger(0);
  final RecordAccumulator accum=new RecordAccumulator(4 * 1024,64 * 1024,CompressionType.NONE,lingerMs,100L,metrics,time);
class TestCallback implements Callback {
    @Override public void onCompletion(    RecordMetadata metadata,    Exception exception){
      assertTrue(exception.getMessage().equals("Producer is closed forcefully."));
      numExceptionReceivedInCallback.incrementAndGet();
    }
  }
  for (int i=0; i < 100; i++)   accum.append(new TopicPartition(topic,i % 3),key,value,new TestCallback(),maxBlockTimeMs);
  RecordAccumulator.ReadyCheckResult result=accum.ready(cluster,time.milliseconds());
  assertEquals("No nodes should be ready.",0,result.readyNodes.size());
  accum.abortIncompleteBatches();
  assertEquals(numExceptionReceivedInCallback.get(),100);
  assertFalse(accum.hasUnsent());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFlush() throws Exception {
  long lingerMs=Long.MAX_VALUE;
  final RecordAccumulator accum=new RecordAccumulator(4 * 1024,64 * 1024,CompressionType.NONE,lingerMs,100L,metrics,time);
  for (int i=0; i < 100; i++)   accum.append(new TopicPartition(topic,i % 3),key,value,null,maxBlockTimeMs);
  RecordAccumulator.ReadyCheckResult result=accum.ready(cluster,time.milliseconds());
  assertEquals("No nodes should be ready.",0,result.readyNodes.size());
  accum.beginFlush();
  result=accum.ready(cluster,time.milliseconds());
  Map<Integer,List<RecordBatch>> results=accum.drain(cluster,result.readyNodes,Integer.MAX_VALUE,time.milliseconds());
  for (  List<RecordBatch> batches : results.values())   for (  RecordBatch batch : batches)   accum.deallocate(batch);
  accum.awaitFlushCompletion();
  assertFalse(accum.hasUnsent());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.internals.SenderTest </h4><pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRetries() throws Exception {
  int maxRetries=1;
  Metrics m=new Metrics();
  try {
    Sender sender=new Sender(client,metadata,this.accumulator,MAX_REQUEST_SIZE,ACKS_ALL,maxRetries,m,time,"clientId",REQUEST_TIMEOUT);
    Future<RecordMetadata> future=accumulator.append(tp,"key".getBytes(),"value".getBytes(),null,MAX_BLOCK_TIMEOUT).future;
    sender.run(time.milliseconds());
    sender.run(time.milliseconds());
    String id=client.requests().peek().request().destination();
    Node node=new Node(Integer.valueOf(id),"localhost",0);
    assertEquals(1,client.inFlightRequestCount());
    assertTrue("Client ready status should be true",client.isReady(node,0L));
    client.disconnect(id);
    assertEquals(0,client.inFlightRequestCount());
    assertFalse("Client ready status should be false",client.isReady(node,0L));
    sender.run(time.milliseconds());
    sender.run(time.milliseconds());
    sender.run(time.milliseconds());
    assertEquals(1,client.inFlightRequestCount());
    long offset=0;
    client.respond(produceResponse(tp,offset,Errors.NONE.code(),0));
    sender.run(time.milliseconds());
    assertTrue("Request should have retried and completed",future.isDone());
    assertEquals(offset,future.get().offset());
    future=accumulator.append(tp,"key".getBytes(),"value".getBytes(),null,MAX_BLOCK_TIMEOUT).future;
    sender.run(time.milliseconds());
    for (int i=0; i < maxRetries + 1; i++) {
      client.disconnect(client.requests().peek().request().destination());
      sender.run(time.milliseconds());
      sender.run(time.milliseconds());
      sender.run(time.milliseconds());
    }
    sender.run(time.milliseconds());
    completedWithError(future,Errors.NETWORK_EXCEPTION);
  }
  finally {
    m.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimple() throws Exception {
  long offset=0;
  Future<RecordMetadata> future=accumulator.append(tp,"key".getBytes(),"value".getBytes(),null,MAX_BLOCK_TIMEOUT).future;
  sender.run(time.milliseconds());
  sender.run(time.milliseconds());
  assertEquals("We should have a single produce request in flight.",1,client.inFlightRequestCount());
  client.respond(produceResponse(tp,offset,Errors.NONE.code(),0));
  sender.run(time.milliseconds());
  assertEquals("All requests completed.",offset,(long)client.inFlightRequestCount());
  sender.run(time.milliseconds());
  assertTrue("Request should be completed",future.isDone());
  assertEquals(offset,future.get().offset());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.cache.LRUCacheTest </h4><pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemove(){
  Cache<String,String> cache=new LRUCache<>(4);
  cache.put("a","b");
  cache.put("c","d");
  cache.put("e","f");
  assertEquals(3,cache.size());
  assertEquals(true,cache.remove("a"));
  assertEquals(2,cache.size());
  assertNull(cache.get("a"));
  assertEquals("d",cache.get("c"));
  assertEquals("f",cache.get("e"));
  assertEquals(false,cache.remove("key-does-not-exist"));
  assertEquals(true,cache.remove("c"));
  assertEquals(1,cache.size());
  assertNull(cache.get("c"));
  assertEquals("f",cache.get("e"));
  assertEquals(true,cache.remove("e"));
  assertEquals(0,cache.size());
  assertNull(cache.get("e"));
}

</code></pre>

<br>
<pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEviction(){
  Cache<String,String> cache=new LRUCache<>(2);
  cache.put("a","b");
  cache.put("c","d");
  assertEquals(2,cache.size());
  cache.put("e","f");
  assertEquals(2,cache.size());
  assertNull(cache.get("a"));
  assertEquals("d",cache.get("c"));
  assertEquals("f",cache.get("e"));
  cache.get("c");
  cache.put("g","h");
  assertEquals(2,cache.size());
  assertNull(cache.get("e"));
  assertEquals("d",cache.get("c"));
  assertEquals("h",cache.get("g"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.metrics.MetricsTest </h4><pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveSensor(){
  int size=metrics.metrics().size();
  Sensor parent1=metrics.sensor("test.parent1");
  parent1.add(metrics.metricName("test.parent1.count","grp1"),new Count());
  Sensor parent2=metrics.sensor("test.parent2");
  parent2.add(metrics.metricName("test.parent2.count","grp1"),new Count());
  Sensor child1=metrics.sensor("test.child1",parent1,parent2);
  child1.add(metrics.metricName("test.child1.count","grp1"),new Count());
  Sensor child2=metrics.sensor("test.child2",parent2);
  child2.add(metrics.metricName("test.child2.count","grp1"),new Count());
  Sensor grandChild1=metrics.sensor("test.gchild2",child2);
  grandChild1.add(metrics.metricName("test.gchild2.count","grp1"),new Count());
  Sensor sensor=metrics.getSensor("test.parent1");
  assertNotNull(sensor);
  metrics.removeSensor("test.parent1");
  assertNull(metrics.getSensor("test.parent1"));
  assertNull(metrics.metrics().get(metrics.metricName("test.parent1.count","grp1")));
  assertNull(metrics.getSensor("test.child1"));
  assertNull(metrics.childrenSensors().get(sensor));
  assertNull(metrics.metrics().get(metrics.metricName("test.child1.count","grp1")));
  sensor=metrics.getSensor("test.gchild2");
  assertNotNull(sensor);
  metrics.removeSensor("test.gchild2");
  assertNull(metrics.getSensor("test.gchild2"));
  assertNull(metrics.childrenSensors().get(sensor));
  assertNull(metrics.metrics().get(metrics.metricName("test.gchild2.count","grp1")));
  sensor=metrics.getSensor("test.child2");
  assertNotNull(sensor);
  metrics.removeSensor("test.child2");
  assertNull(metrics.getSensor("test.child2"));
  assertNull(metrics.childrenSensors().get(sensor));
  assertNull(metrics.metrics().get(metrics.metricName("test.child2.count","grp1")));
  sensor=metrics.getSensor("test.parent2");
  assertNotNull(sensor);
  metrics.removeSensor("test.parent2");
  assertNull(metrics.getSensor("test.parent2"));
  assertNull(metrics.childrenSensors().get(sensor));
  assertNull(metrics.metrics().get(metrics.metricName("test.parent2.count","grp1")));
  assertEquals(size,metrics.metrics().size());
}

</code></pre>

<br>
<pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHierarchicalSensors(){
  Sensor parent1=metrics.sensor("test.parent1");
  parent1.add(metrics.metricName("test.parent1.count","grp1"),new Count());
  Sensor parent2=metrics.sensor("test.parent2");
  parent2.add(metrics.metricName("test.parent2.count","grp1"),new Count());
  Sensor child1=metrics.sensor("test.child1",parent1,parent2);
  child1.add(metrics.metricName("test.child1.count","grp1"),new Count());
  Sensor child2=metrics.sensor("test.child2",parent1);
  child2.add(metrics.metricName("test.child2.count","grp1"),new Count());
  Sensor grandchild=metrics.sensor("test.grandchild",child1);
  grandchild.add(metrics.metricName("test.grandchild.count","grp1"),new Count());
  parent1.record();
  parent2.record();
  child1.record();
  child2.record();
  grandchild.record();
  double p1=parent1.metrics().get(0).value();
  double p2=parent2.metrics().get(0).value();
  double c1=child1.metrics().get(0).value();
  double c2=child2.metrics().get(0).value();
  double gc=grandchild.metrics().get(0).value();
  assertEquals(1.0,gc,EPS);
  assertEquals(1.0 + gc,c1,EPS);
  assertEquals(1.0,c2,EPS);
  assertEquals(1.0 + c1,p2,EPS);
  assertEquals(1.0 + c1 + c2,p1,EPS);
  assertEquals(Arrays.asList(child1,child2),metrics.childrenSensors().get(parent1));
  assertEquals(Arrays.asList(child1),metrics.childrenSensors().get(parent2));
  assertNull(metrics.childrenSensors().get(grandchild));
}

</code></pre>

<br>
<pre class="type-10 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMetricName(){
  MetricName n1=metrics.metricName("name","group","description","key1","value1","key2","value2");
  Map<String,String> tags=new HashMap<String,String>();
  tags.put("key1","value1");
  tags.put("key2","value2");
  MetricName n2=metrics.metricName("name","group","description",tags);
  assertEquals("metric names created in two different ways should be equal",n1,n2);
  try {
    metrics.metricName("name","group","description","key1");
    fail("Creating MetricName with an odd number of keyValue should fail");
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<pre class="type-10 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQuotas(){
  Sensor sensor=metrics.sensor("test");
  sensor.add(metrics.metricName("test1.total","grp1"),new Total(),new MetricConfig().quota(Quota.upperBound(5.0)));
  sensor.add(metrics.metricName("test2.total","grp1"),new Total(),new MetricConfig().quota(Quota.lowerBound(0.0)));
  sensor.record(5.0);
  try {
    sensor.record(1.0);
    fail("Should have gotten a quota violation.");
  }
 catch (  QuotaViolationException e) {
  }
  assertEquals(6.0,metrics.metrics().get(metrics.metricName("test1.total","grp1")).value(),EPS);
  sensor.record(-6.0);
  try {
    sensor.record(-1.0);
    fail("Should have gotten a quota violation.");
  }
 catch (  QuotaViolationException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveMetric(){
  int size=metrics.metrics().size();
  metrics.addMetric(metrics.metricName("test1","grp1"),new Count());
  metrics.addMetric(metrics.metricName("test2","grp1"),new Count());
  assertNotNull(metrics.removeMetric(metrics.metricName("test1","grp1")));
  assertNull(metrics.metrics().get(metrics.metricName("test1","grp1")));
  assertNotNull(metrics.metrics().get(metrics.metricName("test2","grp1")));
  assertNotNull(metrics.removeMetric(metrics.metricName("test2","grp1")));
  assertNull(metrics.metrics().get(metrics.metricName("test2","grp1")));
  assertEquals(size,metrics.metrics().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.protocol.types.ProtocolSerializationTest </h4><pre class="type-14 type-10 type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNulls(){
  for (  Field f : this.schema.fields()) {
    Object o=this.struct.get(f);
    try {
      this.struct.set(f,null);
      this.struct.validate();
      if (!f.type.isNullable())       fail("Should not allow serialization of null value.");
    }
 catch (    SchemaException e) {
      assertFalse(f.type.isNullable());
    }
 finally {
      this.struct.set(f,o);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.record.MemoryRecordsTest </h4><pre class="type-8 type-13 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIterator(){
  MemoryRecords recs1=MemoryRecords.emptyRecords(ByteBuffer.allocate(1024),compression);
  MemoryRecords recs2=MemoryRecords.emptyRecords(ByteBuffer.allocate(1024),compression);
  List<Record> list=Arrays.asList(new Record("a".getBytes(),"1".getBytes()),new Record("b".getBytes(),"2".getBytes()),new Record("c".getBytes(),"3".getBytes()));
  for (int i=0; i < list.size(); i++) {
    Record r=list.get(i);
    recs1.append(i,r);
    recs2.append(i,toArray(r.key()),toArray(r.value()));
  }
  recs1.close();
  recs2.close();
  for (int iteration=0; iteration < 2; iteration++) {
    for (    MemoryRecords recs : Arrays.asList(recs1,recs2)) {
      Iterator<LogEntry> iter=recs.iterator();
      for (int i=0; i < list.size(); i++) {
        assertTrue(iter.hasNext());
        LogEntry entry=iter.next();
        assertEquals((long)i,entry.offset());
        assertEquals(list.get(i),entry.record());
        entry.record().ensureValid();
      }
      assertFalse(iter.hasNext());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.record.RecordTest </h4><pre class="type-8 type-13 type-10 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChecksum(){
  assertEquals(record.checksum(),record.computeChecksum());
  assertEquals(record.checksum(),Record.computeChecksum(this.key == null ? null : this.key.array(),this.value == null ? null : this.value.array(),this.compression,0,-1));
  assertTrue(record.isValid());
  for (int i=Record.CRC_OFFSET + Record.CRC_LENGTH; i < record.size(); i++) {
    Record copy=copyOf(record);
    copy.buffer().put(i,(byte)69);
    assertFalse(copy.isValid());
    try {
      copy.ensureValid();
      fail("Should fail the above test.");
    }
 catch (    InvalidRecordException e) {
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.security.kerberos.KerberosNameTest </h4><pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testParse() throws IOException {
  List<String> rules=new ArrayList<>(Arrays.asList("RULE:[1:$1](App\\..*)s/App\\.(.*)/$1/g","RULE:[2:$1](App\\..*)s/App\\.(.*)/$1/g","DEFAULT"));
  KerberosShortNamer shortNamer=KerberosShortNamer.fromUnparsedRules("REALM.COM",rules);
  KerberosName name=KerberosName.parse("App.service-name/example.com@REALM.COM");
  assertEquals("App.service-name",name.serviceName());
  assertEquals("example.com",name.hostName());
  assertEquals("REALM.COM",name.realm());
  assertEquals("service-name",shortNamer.shortName(name));
  name=KerberosName.parse("App.service-name@REALM.COM");
  assertEquals("App.service-name",name.serviceName());
  assertNull(name.hostName());
  assertEquals("REALM.COM",name.realm());
  assertEquals("service-name",shortNamer.shortName(name));
  name=KerberosName.parse("user/host@REALM.COM");
  assertEquals("user",name.serviceName());
  assertEquals("host",name.hostName());
  assertEquals("REALM.COM",name.realm());
  assertEquals("user",shortNamer.shortName(name));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.security.ssl.SslFactoryTest </h4><pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSslFactoryConfiguration() throws Exception {
  File trustStoreFile=File.createTempFile("truststore",".jks");
  Map<String,Object> serverSslConfig=TestSslUtils.createSslConfig(false,true,Mode.SERVER,trustStoreFile,"server");
  SslFactory sslFactory=new SslFactory(Mode.SERVER);
  sslFactory.configure(serverSslConfig);
  SSLEngine engine=sslFactory.createSslEngine("localhost",0);
  assertNotNull(engine);
  String[] expectedProtocols={"TLSv1.2"};
  assertArrayEquals(expectedProtocols,engine.getEnabledProtocols());
  assertEquals(false,engine.getUseClientMode());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.utils.AbstractIteratorTest </h4><pre class="type-13 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIterator(){
  int max=10;
  List<Integer> l=new ArrayList<Integer>();
  for (int i=0; i < max; i++)   l.add(i);
  ListIterator<Integer> iter=new ListIterator<Integer>(l);
  for (int i=0; i < max; i++) {
    Integer value=i;
    assertEquals(value,iter.peek());
    assertTrue(iter.hasNext());
    assertEquals(value,iter.next());
  }
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.data.ConnectSchemaTest </h4><pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFieldsOnStructSchema(){
  Schema schema=SchemaBuilder.struct().field("foo",Schema.BOOLEAN_SCHEMA).field("bar",Schema.INT32_SCHEMA).build();
  assertEquals(2,schema.fields().size());
  Field foo=schema.field("foo");
  assertEquals(0,foo.index());
  Field bar=schema.field("bar");
  assertEquals(1,bar.index());
  assertNull(schema.field("other"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.data.SchemaProjectorTest </h4><pre class="type-8 type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMapProjection() throws Exception {
  Schema source=SchemaBuilder.map(Schema.INT32_SCHEMA,Schema.INT32_SCHEMA).optional().build();
  Schema target=SchemaBuilder.map(Schema.INT32_SCHEMA,Schema.INT32_SCHEMA).defaultValue(Collections.singletonMap(1,2)).build();
  Object projected=SchemaProjector.project(source,Collections.singletonMap(3,4),target);
  assertEquals(Collections.singletonMap(3,4),(Map<Integer,Integer>)projected);
  projected=SchemaProjector.project(source,null,target);
  assertEquals(Collections.singletonMap(1,2),(Map<Integer,Integer>)projected);
  Schema promotedTarget=SchemaBuilder.map(Schema.INT64_SCHEMA,Schema.FLOAT32_SCHEMA).defaultValue(Collections.singletonMap(3L,4.5F)).build();
  projected=SchemaProjector.project(source,Collections.singletonMap(3,4),promotedTarget);
  assertEquals(Collections.singletonMap(3L,4.F),(Map<Long,Float>)projected);
  projected=SchemaProjector.project(source,null,promotedTarget);
  assertEquals(Collections.singletonMap(3L,4.5F),(Map<Long,Float>)projected);
  Schema noDefaultValueTarget=SchemaBuilder.map(Schema.INT32_SCHEMA,Schema.INT32_SCHEMA).build();
  try {
    SchemaProjector.project(source,null,noDefaultValueTarget);
    fail("Reader does not provide a default value.");
  }
 catch (  SchemaProjectorException e) {
  }
  Schema nonPromotableTarget=SchemaBuilder.map(Schema.BOOLEAN_SCHEMA,Schema.STRING_SCHEMA).build();
  try {
    SchemaProjector.project(source,null,nonPromotableTarget);
    fail("Neither source type matches target type nor source type can be promoted to target type");
  }
 catch (  SchemaProjectorException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-10 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStructRemoveField() throws Exception {
  Schema source=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).field("field2",Schema.INT32_SCHEMA).build();
  Struct sourceStruct=new Struct(source);
  sourceStruct.put("field",1);
  sourceStruct.put("field2",234);
  Schema target=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).build();
  Struct targetStruct=(Struct)SchemaProjector.project(source,sourceStruct,target);
  assertEquals(1,targetStruct.get("field"));
  try {
    targetStruct.get("field2");
    fail("field2 is not part of the projected struct");
  }
 catch (  DataException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testArrayProjection() throws Exception {
  Schema source=SchemaBuilder.array(Schema.INT32_SCHEMA).build();
  Object projected=SchemaProjector.project(source,Arrays.asList(1,2,3),source);
  assertEquals(Arrays.asList(1,2,3),(List<Integer>)projected);
  Schema optionalSource=SchemaBuilder.array(Schema.INT32_SCHEMA).optional().build();
  Schema target=SchemaBuilder.array(Schema.INT32_SCHEMA).defaultValue(Arrays.asList(1,2,3)).build();
  projected=SchemaProjector.project(optionalSource,Arrays.asList(4,5),target);
  assertEquals(Arrays.asList(4,5),(List<Integer>)projected);
  projected=SchemaProjector.project(optionalSource,null,target);
  assertEquals(Arrays.asList(1,2,3),(List<Integer>)projected);
  Schema promotedTarget=SchemaBuilder.array(Schema.INT64_SCHEMA).defaultValue(Arrays.asList(1L,2L,3L)).build();
  projected=SchemaProjector.project(optionalSource,Arrays.asList(4,5),promotedTarget);
  List<Long> expectedProjected=Arrays.asList(4L,5L);
  assertEquals(expectedProjected,(List<Long>)projected);
  projected=SchemaProjector.project(optionalSource,null,promotedTarget);
  assertEquals(Arrays.asList(1L,2L,3L),(List<Long>)projected);
  Schema noDefaultValueTarget=SchemaBuilder.array(Schema.INT32_SCHEMA).build();
  try {
    SchemaProjector.project(optionalSource,null,noDefaultValueTarget);
    fail("Target schema does not provide a default value.");
  }
 catch (  SchemaProjectorException e) {
  }
  Schema nonPromotableTarget=SchemaBuilder.array(Schema.BOOLEAN_SCHEMA).build();
  try {
    SchemaProjector.project(optionalSource,null,nonPromotableTarget);
    fail("Neither source type matches target type nor source type can be promoted to target type");
  }
 catch (  SchemaProjectorException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLogicalTypeProjection() throws Exception {
  Schema[] logicalTypeSchemas={Decimal.schema(2),Date.SCHEMA,Time.SCHEMA,Timestamp.SCHEMA};
  Object projected;
  BigDecimal testDecimal=new BigDecimal(new BigInteger("156"),2);
  projected=SchemaProjector.project(Decimal.schema(2),testDecimal,Decimal.schema(2));
  assertEquals(testDecimal,projected);
  projected=SchemaProjector.project(Date.SCHEMA,1000,Date.SCHEMA);
  assertEquals(1000,projected);
  projected=SchemaProjector.project(Time.SCHEMA,231,Time.SCHEMA);
  assertEquals(231,projected);
  projected=SchemaProjector.project(Timestamp.SCHEMA,34567L,Timestamp.SCHEMA);
  assertEquals(34567L,projected);
  Schema namedSchema=SchemaBuilder.int32().name("invalidLogicalTypeName").build();
  for (  Schema logicalTypeSchema : logicalTypeSchemas) {
    try {
      SchemaProjector.project(logicalTypeSchema,null,Schema.BOOLEAN_SCHEMA);
      fail("Cannot project logical types to non-logical types.");
    }
 catch (    SchemaProjectorException e) {
    }
    try {
      SchemaProjector.project(logicalTypeSchema,null,namedSchema);
      fail("Reader name is not a valid logical type name.");
    }
 catch (    SchemaProjectorException e) {
    }
    try {
      SchemaProjector.project(Schema.BOOLEAN_SCHEMA,null,logicalTypeSchema);
      fail("Cannot project non-logical types to logical types.");
    }
 catch (    SchemaProjectorException e) {
    }
  }
}

</code></pre>

<br>
<pre class="type-8 type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPrimitiveTypeProjection() throws Exception {
  Object projected;
  projected=SchemaProjector.project(Schema.BOOLEAN_SCHEMA,false,Schema.BOOLEAN_SCHEMA);
  assertEquals(false,projected);
  byte[] bytes={(byte)1,(byte)2};
  projected=SchemaProjector.project(Schema.BYTES_SCHEMA,bytes,Schema.BYTES_SCHEMA);
  assertEquals(bytes,projected);
  projected=SchemaProjector.project(Schema.STRING_SCHEMA,"abc",Schema.STRING_SCHEMA);
  assertEquals("abc",projected);
  projected=SchemaProjector.project(Schema.BOOLEAN_SCHEMA,false,Schema.OPTIONAL_BOOLEAN_SCHEMA);
  assertEquals(false,projected);
  projected=SchemaProjector.project(Schema.BYTES_SCHEMA,bytes,Schema.OPTIONAL_BYTES_SCHEMA);
  assertEquals(bytes,projected);
  projected=SchemaProjector.project(Schema.STRING_SCHEMA,"abc",Schema.OPTIONAL_STRING_SCHEMA);
  assertEquals("abc",projected);
  try {
    SchemaProjector.project(Schema.OPTIONAL_BOOLEAN_SCHEMA,false,Schema.BOOLEAN_SCHEMA);
    fail("Cannot project optional schema to schema with no default value.");
  }
 catch (  DataException e) {
  }
  try {
    SchemaProjector.project(Schema.OPTIONAL_BYTES_SCHEMA,bytes,Schema.BYTES_SCHEMA);
    fail("Cannot project optional schema to schema with no default value.");
  }
 catch (  DataException e) {
  }
  try {
    SchemaProjector.project(Schema.OPTIONAL_STRING_SCHEMA,"abc",Schema.STRING_SCHEMA);
    fail("Cannot project optional schema to schema with no default value.");
  }
 catch (  DataException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-10 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStructAddField() throws Exception {
  Schema source=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).build();
  Struct sourceStruct=new Struct(source);
  sourceStruct.put("field",1);
  Schema target=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).field("field2",SchemaBuilder.int32().defaultValue(123).build()).build();
  Struct targetStruct=(Struct)SchemaProjector.project(source,sourceStruct,target);
  assertEquals(1,(int)targetStruct.getInt32("field"));
  assertEquals(123,(int)targetStruct.getInt32("field2"));
  Schema incompatibleTargetSchema=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).field("field2",Schema.INT32_SCHEMA).build();
  try {
    SchemaProjector.project(source,sourceStruct,incompatibleTargetSchema);
    fail("Incompatible schema.");
  }
 catch (  DataException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-13 type-14 type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNumericTypeProjection() throws Exception {
  Schema[] promotableSchemas={Schema.INT8_SCHEMA,Schema.INT16_SCHEMA,Schema.INT32_SCHEMA,Schema.INT64_SCHEMA,Schema.FLOAT32_SCHEMA,Schema.FLOAT64_SCHEMA};
  Schema[] promotableOptionalSchemas={Schema.OPTIONAL_INT8_SCHEMA,Schema.OPTIONAL_INT16_SCHEMA,Schema.OPTIONAL_INT32_SCHEMA,Schema.OPTIONAL_INT64_SCHEMA,Schema.OPTIONAL_FLOAT32_SCHEMA,Schema.OPTIONAL_FLOAT64_SCHEMA};
  Object[] values={(byte)127,(short)255,32767,327890L,1.2F,1.2345};
  Map<Object,List<?>> expectedProjected=new HashMap<>();
  expectedProjected.put(values[0],Arrays.asList((byte)127,(short)127,127,127L,127.F,127.));
  expectedProjected.put(values[1],Arrays.asList((short)255,255,255L,255.F,255.));
  expectedProjected.put(values[2],Arrays.asList(32767,32767L,32767.F,32767.));
  expectedProjected.put(values[3],Arrays.asList(327890L,327890.F,327890.));
  expectedProjected.put(values[4],Arrays.asList(1.2F,1.2));
  expectedProjected.put(values[5],Arrays.asList(1.2345));
  Object promoted;
  for (int i=0; i < promotableSchemas.length; ++i) {
    Schema source=promotableSchemas[i];
    List<?> expected=expectedProjected.get(values[i]);
    for (int j=i; j < promotableSchemas.length; ++j) {
      Schema target=promotableSchemas[j];
      promoted=SchemaProjector.project(source,values[i],target);
      if (target.type() == Type.FLOAT64) {
        assertEquals((Double)(expected.get(j - i)),(double)promoted,1e-6);
      }
 else {
        assertEquals(expected.get(j - i),promoted);
      }
    }
    for (int j=i; j < promotableOptionalSchemas.length; ++j) {
      Schema target=promotableOptionalSchemas[j];
      promoted=SchemaProjector.project(source,values[i],target);
      if (target.type() == Type.FLOAT64) {
        assertEquals((Double)(expected.get(j - i)),(double)promoted,1e-6);
      }
 else {
        assertEquals(expected.get(j - i),promoted);
      }
    }
  }
  for (int i=0; i < promotableOptionalSchemas.length; ++i) {
    Schema source=promotableSchemas[i];
    List<?> expected=expectedProjected.get(values[i]);
    for (int j=i; j < promotableOptionalSchemas.length; ++j) {
      Schema target=promotableOptionalSchemas[j];
      promoted=SchemaProjector.project(source,values[i],target);
      if (target.type() == Type.FLOAT64) {
        assertEquals((Double)(expected.get(j - i)),(double)promoted,1e-6);
      }
 else {
        assertEquals(expected.get(j - i),promoted);
      }
    }
  }
  Schema[] nonPromotableSchemas={Schema.BOOLEAN_SCHEMA,Schema.BYTES_SCHEMA,Schema.STRING_SCHEMA};
  for (  Schema promotableSchema : promotableSchemas) {
    for (    Schema nonPromotableSchema : nonPromotableSchemas) {
      Object dummy=new Object();
      try {
        SchemaProjector.project(promotableSchema,dummy,nonPromotableSchema);
        fail("Cannot promote " + promotableSchema.type() + " to "+ nonPromotableSchema.type());
      }
 catch (      DataException e) {
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.file.FileStreamSourceConnectorTest </h4><pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSourceTasksStdin(){
  PowerMock.replayAll();
  sourceProperties.remove(FileStreamSourceConnector.FILE_CONFIG);
  connector.start(sourceProperties);
  List<Map<String,String>> taskConfigs=connector.taskConfigs(1);
  assertEquals(1,taskConfigs.size());
  assertNull(taskConfigs.get(0).get(FileStreamSourceConnector.FILE_CONFIG));
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.json.JsonConverterTest </h4><pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void timeToJson() throws IOException {
  GregorianCalendar calendar=new GregorianCalendar(1970,Calendar.JANUARY,1,0,0,0);
  calendar.setTimeZone(TimeZone.getTimeZone("UTC"));
  calendar.add(Calendar.MILLISECOND,14400000);
  java.util.Date date=calendar.getTime();
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Time.SCHEMA,date));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"int32\", \"optional\": false, \"name\": \"org.apache.kafka.connect.data.Time\", \"version\": 1 }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  JsonNode payload=converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME);
  assertTrue(payload.isInt());
  assertEquals(14400000,payload.longValue());
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dateToJson() throws IOException {
  GregorianCalendar calendar=new GregorianCalendar(1970,Calendar.JANUARY,1,0,0,0);
  calendar.setTimeZone(TimeZone.getTimeZone("UTC"));
  calendar.add(Calendar.DATE,10000);
  java.util.Date date=calendar.getTime();
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Date.SCHEMA,date));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"int32\", \"optional\": false, \"name\": \"org.apache.kafka.connect.data.Date\", \"version\": 1 }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  JsonNode payload=converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME);
  assertTrue(payload.isInt());
  assertEquals(10000,payload.intValue());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nullSchemaAndPrimitiveToJson(){
  JsonNode converted=parse(converter.fromConnectData(TOPIC,null,true));
  validateEnvelopeNullSchema(converted);
  assertTrue(converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME).isNull());
  assertEquals(true,converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).booleanValue());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void noSchemaToJson(){
  Map<String,Boolean> props=Collections.singletonMap("schemas.enable",false);
  converter.configure(props,true);
  JsonNode converted=parse(converter.fromConnectData(TOPIC,null,true));
  assertTrue(converted.isBoolean());
  assertEquals(true,converted.booleanValue());
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void timestampToJson() throws IOException {
  GregorianCalendar calendar=new GregorianCalendar(1970,Calendar.JANUARY,1,0,0,0);
  calendar.setTimeZone(TimeZone.getTimeZone("UTC"));
  calendar.add(Calendar.MILLISECOND,2000000000);
  calendar.add(Calendar.MILLISECOND,2000000000);
  java.util.Date date=calendar.getTime();
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Timestamp.SCHEMA,date));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"int64\", \"optional\": false, \"name\": \"org.apache.kafka.connect.data.Timestamp\", \"version\": 1 }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  JsonNode payload=converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME);
  assertTrue(payload.isLong());
  assertEquals(4000000000L,payload.longValue());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nullSchemaAndMapNonStringKeysToJson(){
  Map<Object,Object> input=new HashMap<>();
  input.put("string",12);
  input.put(52,"string");
  input.put(false,true);
  JsonNode converted=parse(converter.fromConnectData(TOPIC,null,input));
  validateEnvelopeNullSchema(converted);
  assertTrue(converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME).isNull());
  assertTrue(converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).isArray());
  ArrayNode payload=(ArrayNode)converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME);
  assertEquals(3,payload.size());
  Set<JsonNode> payloadEntries=new HashSet<>();
  for (  JsonNode elem : payload)   payloadEntries.add(elem);
  assertEquals(new HashSet<>(Arrays.asList(JsonNodeFactory.instance.arrayNode().add("string").add(12),JsonNodeFactory.instance.arrayNode().add(52).add("string"),JsonNodeFactory.instance.arrayNode().add(false).add(true))),payloadEntries);
}

</code></pre>

<br>
<pre class="type-3 type-1 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=DataException.class) public void nullToConnect(){
  assertEquals(SchemaAndValue.NULL,converter.toConnectData(TOPIC,null));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nullSchemaAndMapToJson(){
  Map<String,Object> input=new HashMap<>();
  input.put("key1",12);
  input.put("key2","string");
  input.put("key3",true);
  JsonNode converted=parse(converter.fromConnectData(TOPIC,null,input));
  validateEnvelopeNullSchema(converted);
  assertTrue(converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME).isNull());
  assertEquals(JsonNodeFactory.instance.objectNode().put("key1",12).put("key2","string").put("key3",true),converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testJsonSchemaMetadataTranslation(){
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Schema.BOOLEAN_SCHEMA,true));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"boolean\", \"optional\": false }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertEquals(true,converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).booleanValue());
  converted=parse(converter.fromConnectData(TOPIC,Schema.OPTIONAL_BOOLEAN_SCHEMA,null));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"boolean\", \"optional\": true }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertTrue(converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).isNull());
  converted=parse(converter.fromConnectData(TOPIC,SchemaBuilder.bool().defaultValue(true).build(),true));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"boolean\", \"optional\": false, \"default\": true }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertEquals(true,converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).booleanValue());
  converted=parse(converter.fromConnectData(TOPIC,SchemaBuilder.bool().required().name("bool").version(3).doc("the documentation").parameter("foo","bar").build(),true));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"boolean\", \"optional\": false, \"name\": \"bool\", \"version\": 3, \"doc\": \"the documentation\", \"parameters\": { \"foo\": \"bar\" }}"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertEquals(true,converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).booleanValue());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void mapToJsonNonStringKeys(){
  Schema intIntMap=SchemaBuilder.map(Schema.INT32_SCHEMA,Schema.INT32_SCHEMA).build();
  Map<Integer,Integer> input=new HashMap<>();
  input.put(1,12);
  input.put(2,15);
  JsonNode converted=parse(converter.fromConnectData(TOPIC,intIntMap,input));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"map\", \"keys\": { \"type\" : \"int32\", \"optional\": false }, \"values\": { \"type\" : \"int32\", \"optional\": false }, \"optional\": false }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  assertTrue(converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME).isArray());
  ArrayNode payload=(ArrayNode)converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME);
  assertEquals(2,payload.size());
  Set<JsonNode> payloadEntries=new HashSet<>();
  for (  JsonNode elem : payload)   payloadEntries.add(elem);
  assertEquals(new HashSet<>(Arrays.asList(JsonNodeFactory.instance.arrayNode().add(1).add(12),JsonNodeFactory.instance.arrayNode().add(2).add(15))),payloadEntries);
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nullSchemaAndArrayToJson(){
  JsonNode converted=parse(converter.fromConnectData(TOPIC,null,Arrays.asList(1,"string",true)));
  validateEnvelopeNullSchema(converted);
  assertTrue(converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME).isNull());
  assertEquals(JsonNodeFactory.instance.arrayNode().add(1).add("string").add(true),converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.runtime.WorkerSinkTaskTest </h4><pre class="type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testErrorInRebalancePartitionRevocation() throws Exception {
  RuntimeException exception=new RuntimeException("Revocation error");
  expectInitializeTask();
  expectPollInitialAssignment();
  expectRebalanceRevocationError(exception);
  PowerMock.replayAll();
  workerTask.initialize(TASK_PROPS);
  workerTask.initializeAndStart();
  workerTask.poll(Long.MAX_VALUE);
  try {
    workerTask.poll(Long.MAX_VALUE);
    fail("Poll should have raised the rebalance exception");
  }
 catch (  RuntimeException e) {
    assertEquals(exception,e);
  }
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testErrorInRebalancePartitionAssignment() throws Exception {
  RuntimeException exception=new RuntimeException("Assignment error");
  expectInitializeTask();
  expectPollInitialAssignment();
  expectRebalanceAssignmentError(exception);
  PowerMock.replayAll();
  workerTask.initialize(TASK_PROPS);
  workerTask.initializeAndStart();
  workerTask.poll(Long.MAX_VALUE);
  try {
    workerTask.poll(Long.MAX_VALUE);
    fail("Poll should have raised the rebalance exception");
  }
 catch (  RuntimeException e) {
    assertEquals(exception,e);
  }
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.runtime.WorkerSinkTaskThreadedTest </h4><pre class="type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAssignmentPauseResume() throws Exception {
  expectInitializeTask();
  expectOnePoll().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      assertEquals(new HashSet<>(Arrays.asList(TOPIC_PARTITION,TOPIC_PARTITION2,TOPIC_PARTITION3)),sinkTaskContext.getValue().assignment());
      return null;
    }
  }
);
  EasyMock.expect(consumer.assignment()).andReturn(new HashSet<>(Arrays.asList(TOPIC_PARTITION,TOPIC_PARTITION2,TOPIC_PARTITION3)));
  expectOnePoll().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      try {
        sinkTaskContext.getValue().pause(UNASSIGNED_TOPIC_PARTITION);
        fail("Trying to pause unassigned partition should have thrown an Connect exception");
      }
 catch (      ConnectException e) {
      }
      sinkTaskContext.getValue().pause(TOPIC_PARTITION,TOPIC_PARTITION2);
      return null;
    }
  }
);
  consumer.pause(UNASSIGNED_TOPIC_PARTITION);
  PowerMock.expectLastCall().andThrow(new IllegalStateException("unassigned topic partition"));
  consumer.pause(TOPIC_PARTITION,TOPIC_PARTITION2);
  PowerMock.expectLastCall();
  expectOnePoll().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      try {
        sinkTaskContext.getValue().resume(UNASSIGNED_TOPIC_PARTITION);
        fail("Trying to resume unassigned partition should have thrown an Connect exception");
      }
 catch (      ConnectException e) {
      }
      sinkTaskContext.getValue().resume(TOPIC_PARTITION,TOPIC_PARTITION2);
      return null;
    }
  }
);
  consumer.resume(UNASSIGNED_TOPIC_PARTITION);
  PowerMock.expectLastCall().andThrow(new IllegalStateException("unassigned topic partition"));
  consumer.resume(TOPIC_PARTITION,TOPIC_PARTITION2);
  PowerMock.expectLastCall();
  expectStopTask(0);
  PowerMock.replayAll();
  workerTask.initialize(TASK_PROPS);
  workerTask.initializeAndStart();
  workerTask.iteration();
  workerTask.iteration();
  workerTask.iteration();
  workerTask.stop();
  workerTask.awaitStop(Long.MAX_VALUE);
  workerTask.close();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.runtime.WorkerSourceTaskTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommitFailure() throws Exception {
  createWorkerTask();
  sourceTask.initialize(EasyMock.anyObject(SourceTaskContext.class));
  EasyMock.expectLastCall();
  sourceTask.start(EMPTY_TASK_PROPS);
  EasyMock.expectLastCall();
  final CountDownLatch pollLatch=expectPolls(1);
  expectOffsetFlush(false);
  sourceTask.stop();
  EasyMock.expectLastCall();
  expectOffsetFlush(true);
  PowerMock.replayAll();
  workerTask.initialize(EMPTY_TASK_PROPS);
  executor.submit(workerTask);
  awaitPolls(pollLatch);
  assertFalse(workerTask.commitOffsets());
  workerTask.stop();
  assertEquals(true,workerTask.awaitStop(1000));
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSendRecordsRetries() throws Exception {
  createWorkerTask();
  SourceRecord record1=new SourceRecord(PARTITION,OFFSET,"topic",1,KEY_SCHEMA,KEY,RECORD_SCHEMA,RECORD);
  SourceRecord record2=new SourceRecord(PARTITION,OFFSET,"topic",2,KEY_SCHEMA,KEY,RECORD_SCHEMA,RECORD);
  SourceRecord record3=new SourceRecord(PARTITION,OFFSET,"topic",3,KEY_SCHEMA,KEY,RECORD_SCHEMA,RECORD);
  expectSendRecordOnce(false);
  expectSendRecordSyncFailure(new org.apache.kafka.common.errors.TimeoutException("retriable sync failure"));
  expectSendRecordOnce(true);
  expectSendRecordOnce(false);
  PowerMock.replayAll();
  Whitebox.setInternalState(workerTask,"toSend",Arrays.asList(record1,record2,record3));
  Whitebox.invokeMethod(workerTask,"sendRecords");
  assertEquals(true,Whitebox.getInternalState(workerTask,"lastSendFailed"));
  assertEquals(Arrays.asList(record2,record3),Whitebox.getInternalState(workerTask,"toSend"));
  Whitebox.invokeMethod(workerTask,"sendRecords");
  assertEquals(false,Whitebox.getInternalState(workerTask,"lastSendFailed"));
  assertNull(Whitebox.getInternalState(workerTask,"toSend"));
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommit() throws Exception {
  createWorkerTask();
  sourceTask.initialize(EasyMock.anyObject(SourceTaskContext.class));
  EasyMock.expectLastCall();
  sourceTask.start(EMPTY_TASK_PROPS);
  EasyMock.expectLastCall();
  final CountDownLatch pollLatch=expectPolls(1);
  expectOffsetFlush(true);
  sourceTask.stop();
  EasyMock.expectLastCall();
  expectOffsetFlush(true);
  PowerMock.replayAll();
  workerTask.initialize(EMPTY_TASK_PROPS);
  executor.submit(workerTask);
  awaitPolls(pollLatch);
  assertTrue(workerTask.commitOffsets());
  workerTask.stop();
  assertEquals(true,workerTask.awaitStop(1000));
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.runtime.WorkerTest </h4><pre class="type-10 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReconfigureConnectorTasks() throws Exception {
  offsetBackingStore.configure(EasyMock.anyObject(Map.class));
  EasyMock.expectLastCall();
  offsetBackingStore.start();
  EasyMock.expectLastCall();
  Connector connector=PowerMock.createMock(Connector.class);
  ConnectorContext ctx=PowerMock.createMock(ConnectorContext.class);
  PowerMock.mockStatic(Worker.class);
  PowerMock.expectPrivate(Worker.class,"instantiateConnector",new Object[]{WorkerTestConnector.class}).andReturn(connector);
  EasyMock.expect(connector.version()).andReturn("1.0");
  Map<String,String> props=new HashMap<>();
  props.put(ConnectorConfig.TOPICS_CONFIG,"foo,bar");
  props.put(ConnectorConfig.TASKS_MAX_CONFIG,"1");
  props.put(ConnectorConfig.NAME_CONFIG,CONNECTOR_ID);
  props.put(ConnectorConfig.CONNECTOR_CLASS_CONFIG,WorkerTestConnector.class.getName());
  connector.initialize(ctx);
  EasyMock.expectLastCall();
  connector.start(props);
  EasyMock.expectLastCall();
  EasyMock.<Class<? extends Task>>expect(connector.taskClass()).andReturn(TestSourceTask.class);
  Map<String,String> taskProps=new HashMap<>();
  taskProps.put("foo","bar");
  EasyMock.expect(connector.taskConfigs(2)).andReturn(Arrays.asList(taskProps,taskProps));
  connector.stop();
  EasyMock.expectLastCall();
  offsetBackingStore.stop();
  EasyMock.expectLastCall();
  PowerMock.replayAll();
  worker=new Worker(new MockTime(),config,offsetBackingStore);
  worker.start();
  ConnectorConfig config=new ConnectorConfig(props);
  assertEquals(Collections.emptySet(),worker.connectorNames());
  worker.addConnector(config,ctx);
  assertEquals(new HashSet<>(Arrays.asList(CONNECTOR_ID)),worker.connectorNames());
  try {
    worker.addConnector(config,ctx);
    fail("Should have thrown exception when trying to add connector with same name.");
  }
 catch (  ConnectException e) {
  }
  List<Map<String,String>> taskConfigs=worker.connectorTaskConfigs(CONNECTOR_ID,2,Arrays.asList("foo","bar"));
  Map<String,String> expectedTaskProps=new HashMap<>();
  expectedTaskProps.put("foo","bar");
  expectedTaskProps.put(TaskConfig.TASK_CLASS_CONFIG,TestSourceTask.class.getName());
  expectedTaskProps.put(SinkTask.TOPICS_CONFIG,"foo,bar");
  assertEquals(2,taskConfigs.size());
  assertEquals(expectedTaskProps,taskConfigs.get(0));
  assertEquals(expectedTaskProps,taskConfigs.get(1));
  worker.stopConnector(CONNECTOR_ID);
  assertEquals(Collections.emptySet(),worker.connectorNames());
  worker.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-10 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddRemoveConnector() throws Exception {
  offsetBackingStore.configure(EasyMock.anyObject(Map.class));
  EasyMock.expectLastCall();
  offsetBackingStore.start();
  EasyMock.expectLastCall();
  Connector connector=PowerMock.createMock(Connector.class);
  ConnectorContext ctx=PowerMock.createMock(ConnectorContext.class);
  PowerMock.mockStatic(Worker.class);
  PowerMock.expectPrivate(Worker.class,"instantiateConnector",new Object[]{WorkerTestConnector.class}).andReturn(connector);
  EasyMock.expect(connector.version()).andReturn("1.0");
  Map<String,String> props=new HashMap<>();
  props.put(ConnectorConfig.TOPICS_CONFIG,"foo,bar");
  props.put(ConnectorConfig.TASKS_MAX_CONFIG,"1");
  props.put(ConnectorConfig.NAME_CONFIG,CONNECTOR_ID);
  props.put(ConnectorConfig.CONNECTOR_CLASS_CONFIG,WorkerTestConnector.class.getName());
  connector.initialize(ctx);
  EasyMock.expectLastCall();
  connector.start(props);
  EasyMock.expectLastCall();
  connector.stop();
  EasyMock.expectLastCall();
  offsetBackingStore.stop();
  EasyMock.expectLastCall();
  PowerMock.replayAll();
  worker=new Worker(new MockTime(),config,offsetBackingStore);
  worker.start();
  ConnectorConfig config=new ConnectorConfig(props);
  assertEquals(Collections.emptySet(),worker.connectorNames());
  worker.addConnector(config,ctx);
  assertEquals(new HashSet<>(Arrays.asList(CONNECTOR_ID)),worker.connectorNames());
  try {
    worker.addConnector(config,ctx);
    fail("Should have thrown exception when trying to add connector with same name.");
  }
 catch (  ConnectException e) {
  }
  worker.stopConnector(CONNECTOR_ID);
  assertEquals(Collections.emptySet(),worker.connectorNames());
  worker.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.runtime.distributed.DistributedHerderTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutConnectorConfig() throws Exception {
  EasyMock.expect(member.memberId()).andStubReturn("leader");
  expectRebalance(1,Arrays.asList(CONN1),Collections.<ConnectorTaskId>emptyList());
  expectPostRebalanceCatchup(SNAPSHOT);
  worker.addConnector(EasyMock.<ConnectorConfig>anyObject(),EasyMock.<ConnectorContext>anyObject());
  PowerMock.expectLastCall();
  EasyMock.expect(worker.connectorTaskConfigs(CONN1,MAX_TASKS,null)).andReturn(TASK_CONFIGS);
  member.wakeup();
  PowerMock.expectLastCall().anyTimes();
  member.poll(EasyMock.anyInt());
  PowerMock.expectLastCall();
  member.ensureActive();
  PowerMock.expectLastCall();
  configStorage.putConnectorConfig(CONN1,CONN1_CONFIG_UPDATED);
  PowerMock.expectLastCall().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      connectorConfigCallback.onCompletion(null,CONN1);
      return null;
    }
  }
);
  EasyMock.expect(configStorage.snapshot()).andReturn(SNAPSHOT_UPDATED_CONN1_CONFIG);
  worker.stopConnector(CONN1);
  PowerMock.expectLastCall();
  Capture<ConnectorConfig> capturedUpdatedConfig=EasyMock.newCapture();
  worker.addConnector(EasyMock.capture(capturedUpdatedConfig),EasyMock.<ConnectorContext>anyObject());
  PowerMock.expectLastCall();
  EasyMock.expect(worker.connectorTaskConfigs(CONN1,MAX_TASKS,null)).andReturn(TASK_CONFIGS);
  member.poll(EasyMock.anyInt());
  PowerMock.expectLastCall();
  member.ensureActive();
  PowerMock.expectLastCall();
  member.poll(EasyMock.anyInt());
  PowerMock.expectLastCall();
  PowerMock.replayAll();
  FutureCallback<Map<String,String>> connectorConfigCb=new FutureCallback<>();
  herder.connectorConfig(CONN1,connectorConfigCb);
  herder.tick();
  assertTrue(connectorConfigCb.isDone());
  assertEquals(CONN1_CONFIG,connectorConfigCb.get());
  FutureCallback<Herder.Created<ConnectorInfo>> putConfigCb=new FutureCallback<>();
  herder.putConnectorConfig(CONN1,CONN1_CONFIG_UPDATED,true,putConfigCb);
  herder.tick();
  assertTrue(putConfigCb.isDone());
  ConnectorInfo updatedInfo=new ConnectorInfo(CONN1,CONN1_CONFIG_UPDATED,Arrays.asList(TASK0,TASK1,TASK2));
  assertEquals(new Herder.Created<>(false,updatedInfo),putConfigCb.get());
  connectorConfigCb=new FutureCallback<>();
  herder.connectorConfig(CONN1,connectorConfigCb);
  herder.tick();
  assertTrue(connectorConfigCb.isDone());
  assertEquals(CONN1_CONFIG_UPDATED,connectorConfigCb.get());
  assertEquals(Arrays.asList("foo","bar","baz"),capturedUpdatedConfig.getValue().getList(ConnectorConfig.TOPICS_CONFIG));
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessors() throws Exception {
  EasyMock.expect(member.memberId()).andStubReturn("leader");
  expectRebalance(1,Collections.<String>emptyList(),Collections.<ConnectorTaskId>emptyList());
  expectPostRebalanceCatchup(SNAPSHOT);
  member.wakeup();
  PowerMock.expectLastCall().anyTimes();
  member.poll(EasyMock.anyInt());
  PowerMock.expectLastCall();
  PowerMock.replayAll();
  FutureCallback<Collection<String>> listConnectorsCb=new FutureCallback<>();
  herder.connectors(listConnectorsCb);
  FutureCallback<ConnectorInfo> connectorInfoCb=new FutureCallback<>();
  herder.connectorInfo(CONN1,connectorInfoCb);
  FutureCallback<Map<String,String>> connectorConfigCb=new FutureCallback<>();
  herder.connectorConfig(CONN1,connectorConfigCb);
  FutureCallback<List<TaskInfo>> taskConfigsCb=new FutureCallback<>();
  herder.taskConfigs(CONN1,taskConfigsCb);
  herder.tick();
  assertTrue(listConnectorsCb.isDone());
  assertEquals(Collections.singleton(CONN1),listConnectorsCb.get());
  assertTrue(connectorInfoCb.isDone());
  ConnectorInfo info=new ConnectorInfo(CONN1,CONN1_CONFIG,Arrays.asList(TASK0,TASK1,TASK2));
  assertEquals(info,connectorInfoCb.get());
  assertTrue(connectorConfigCb.isDone());
  assertEquals(CONN1_CONFIG,connectorConfigCb.get());
  assertTrue(taskConfigsCb.isDone());
  assertEquals(Arrays.asList(new TaskInfo(TASK0,TASK_CONFIG),new TaskInfo(TASK1,TASK_CONFIG),new TaskInfo(TASK2,TASK_CONFIG)),taskConfigsCb.get());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.runtime.distributed.WorkerCoordinatorTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNormalJoinGroupFollower(){
  EasyMock.expect(configStorage.snapshot()).andReturn(configState1);
  PowerMock.replayAll();
  final String memberId="member";
  client.prepareResponse(groupMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(joinGroupFollowerResponse(1,memberId,"leader",Errors.NONE.code()));
  client.prepareResponse(new MockClient.RequestMatcher(){
    @Override public boolean matches(    ClientRequest request){
      SyncGroupRequest sync=new SyncGroupRequest(request.request().body());
      return sync.memberId().equals(memberId) && sync.generationId() == 1 && sync.groupAssignment().isEmpty();
    }
  }
,syncGroupResponse(ConnectProtocol.Assignment.NO_ERROR,"leader",1L,Collections.<String>emptyList(),Collections.singletonList(taskId0),Errors.NONE.code()));
  coordinator.ensureActiveGroup();
  assertFalse(coordinator.needRejoin());
  assertEquals(0,rebalanceListener.revokedCount);
  assertEquals(1,rebalanceListener.assignedCount);
  assertFalse(rebalanceListener.assignment.failed());
  assertEquals(1L,rebalanceListener.assignment.offset());
  assertEquals(Collections.emptyList(),rebalanceListener.assignment.connectors());
  assertEquals(Collections.singletonList(taskId0),rebalanceListener.assignment.tasks());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNormalJoinGroupLeader(){
  EasyMock.expect(configStorage.snapshot()).andReturn(configState1);
  PowerMock.replayAll();
  final String consumerId="leader";
  client.prepareResponse(groupMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  Map<String,Long> memberConfigOffsets=new HashMap<>();
  memberConfigOffsets.put("leader",1L);
  memberConfigOffsets.put("member",1L);
  client.prepareResponse(joinGroupLeaderResponse(1,consumerId,memberConfigOffsets,Errors.NONE.code()));
  client.prepareResponse(new MockClient.RequestMatcher(){
    @Override public boolean matches(    ClientRequest request){
      SyncGroupRequest sync=new SyncGroupRequest(request.request().body());
      return sync.memberId().equals(consumerId) && sync.generationId() == 1 && sync.groupAssignment().containsKey(consumerId);
    }
  }
,syncGroupResponse(ConnectProtocol.Assignment.NO_ERROR,"leader",1L,Collections.singletonList(connectorId),Collections.<ConnectorTaskId>emptyList(),Errors.NONE.code()));
  coordinator.ensureActiveGroup();
  assertFalse(coordinator.needRejoin());
  assertEquals(0,rebalanceListener.revokedCount);
  assertEquals(1,rebalanceListener.assignedCount);
  assertFalse(rebalanceListener.assignment.failed());
  assertEquals(1L,rebalanceListener.assignment.offset());
  assertEquals("leader",rebalanceListener.assignment.leader());
  assertEquals(Collections.singletonList(connectorId),rebalanceListener.assignment.connectors());
  assertEquals(Collections.emptyList(),rebalanceListener.assignment.tasks());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-9 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRejoinGroup(){
  EasyMock.expect(configStorage.snapshot()).andReturn(configState1);
  EasyMock.expect(configStorage.snapshot()).andReturn(configState1);
  PowerMock.replayAll();
  client.prepareResponse(groupMetadataResponse(node,Errors.NONE.code()));
  coordinator.ensureCoordinatorKnown();
  client.prepareResponse(joinGroupFollowerResponse(1,"consumer","leader",Errors.NONE.code()));
  client.prepareResponse(syncGroupResponse(ConnectProtocol.Assignment.NO_ERROR,"leader",1L,Collections.<String>emptyList(),Collections.singletonList(taskId0),Errors.NONE.code()));
  coordinator.ensureActiveGroup();
  assertEquals(0,rebalanceListener.revokedCount);
  assertEquals(1,rebalanceListener.assignedCount);
  assertFalse(rebalanceListener.assignment.failed());
  assertEquals(1L,rebalanceListener.assignment.offset());
  assertEquals(Collections.emptyList(),rebalanceListener.assignment.connectors());
  assertEquals(Collections.singletonList(taskId0),rebalanceListener.assignment.tasks());
  coordinator.requestRejoin();
  client.prepareResponse(joinGroupFollowerResponse(1,"consumer","leader",Errors.NONE.code()));
  client.prepareResponse(syncGroupResponse(ConnectProtocol.Assignment.NO_ERROR,"leader",1L,Collections.singletonList(connectorId),Collections.<ConnectorTaskId>emptyList(),Errors.NONE.code()));
  coordinator.ensureActiveGroup();
  assertEquals(1,rebalanceListener.revokedCount);
  assertEquals(Collections.emptyList(),rebalanceListener.revokedConnectors);
  assertEquals(Collections.singletonList(taskId0),rebalanceListener.revokedTasks);
  assertEquals(2,rebalanceListener.assignedCount);
  assertFalse(rebalanceListener.assignment.failed());
  assertEquals(1L,rebalanceListener.assignment.offset());
  assertEquals(Collections.singletonList(connectorId),rebalanceListener.assignment.connectors());
  assertEquals(Collections.emptyList(),rebalanceListener.assignment.tasks());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.runtime.standalone.StandaloneHerderTest </h4><pre class="type-10 type-9 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDestroyConnector() throws Exception {
  connector=PowerMock.createMock(BogusSourceConnector.class);
  expectAdd(CONNECTOR_NAME,BogusSourceConnector.class,BogusSourceTask.class,false);
  expectDestroy();
  PowerMock.replayAll();
  herder.putConnectorConfig(CONNECTOR_NAME,connectorConfig(CONNECTOR_NAME,BogusSourceConnector.class),false,createCallback);
  FutureCallback<Herder.Created<ConnectorInfo>> futureCb=new FutureCallback<>();
  herder.putConnectorConfig(CONNECTOR_NAME,null,true,futureCb);
  futureCb.get(1000L,TimeUnit.MILLISECONDS);
  futureCb=new FutureCallback<>();
  herder.putConnectorConfig(CONNECTOR_NAME,null,true,futureCb);
  try {
    futureCb.get(1000L,TimeUnit.MILLISECONDS);
    fail("Should have thrown NotFoundException");
  }
 catch (  ExecutionException e) {
    assertTrue(e.getCause() instanceof NotFoundException);
  }
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.storage.KafkaConfigStorageTest </h4><pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutConnectorConfig() throws Exception {
  expectConfigure();
  expectStart(Collections.EMPTY_LIST,Collections.EMPTY_MAP);
  expectConvertWriteAndRead(CONNECTOR_CONFIG_KEYS.get(0),KafkaConfigStorage.CONNECTOR_CONFIGURATION_V0,CONFIGS_SERIALIZED.get(0),"properties",SAMPLE_CONFIGS.get(0));
  connectorReconfiguredCallback.onCompletion(null,CONNECTOR_IDS.get(0));
  EasyMock.expectLastCall();
  expectConvertWriteAndRead(CONNECTOR_CONFIG_KEYS.get(1),KafkaConfigStorage.CONNECTOR_CONFIGURATION_V0,CONFIGS_SERIALIZED.get(1),"properties",SAMPLE_CONFIGS.get(1));
  connectorReconfiguredCallback.onCompletion(null,CONNECTOR_IDS.get(1));
  EasyMock.expectLastCall();
  expectConvertWriteAndRead(CONNECTOR_CONFIG_KEYS.get(1),KafkaConfigStorage.CONNECTOR_CONFIGURATION_V0,null,null,null);
  connectorReconfiguredCallback.onCompletion(null,CONNECTOR_IDS.get(1));
  EasyMock.expectLastCall();
  expectStop();
  PowerMock.replayAll();
  configStorage.configure(DEFAULT_CONFIG_STORAGE_PROPS);
  configStorage.start();
  ClusterConfigState configState=configStorage.snapshot();
  assertEquals(-1,configState.offset());
  assertNull(configState.connectorConfig(CONNECTOR_IDS.get(0)));
  assertNull(configState.connectorConfig(CONNECTOR_IDS.get(1)));
  configStorage.putConnectorConfig(CONNECTOR_IDS.get(0),SAMPLE_CONFIGS.get(0));
  configState=configStorage.snapshot();
  assertEquals(1,configState.offset());
  assertEquals(SAMPLE_CONFIGS.get(0),configState.connectorConfig(CONNECTOR_IDS.get(0)));
  assertNull(configState.connectorConfig(CONNECTOR_IDS.get(1)));
  configStorage.putConnectorConfig(CONNECTOR_IDS.get(1),SAMPLE_CONFIGS.get(1));
  configState=configStorage.snapshot();
  assertEquals(2,configState.offset());
  assertEquals(SAMPLE_CONFIGS.get(0),configState.connectorConfig(CONNECTOR_IDS.get(0)));
  assertEquals(SAMPLE_CONFIGS.get(1),configState.connectorConfig(CONNECTOR_IDS.get(1)));
  configStorage.putConnectorConfig(CONNECTOR_IDS.get(1),null);
  configState=configStorage.snapshot();
  assertEquals(3,configState.offset());
  assertEquals(SAMPLE_CONFIGS.get(0),configState.connectorConfig(CONNECTOR_IDS.get(0)));
  assertNull(configState.connectorConfig(CONNECTOR_IDS.get(1)));
  configStorage.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutTaskConfigs() throws Exception {
  expectConfigure();
  expectStart(Collections.EMPTY_LIST,Collections.EMPTY_MAP);
  expectReadToEnd(new LinkedHashMap<String,byte[]>());
  expectConvertWriteRead(TASK_CONFIG_KEYS.get(0),KafkaConfigStorage.TASK_CONFIGURATION_V0,CONFIGS_SERIALIZED.get(0),"properties",SAMPLE_CONFIGS.get(0));
  expectConvertWriteRead(TASK_CONFIG_KEYS.get(1),KafkaConfigStorage.TASK_CONFIGURATION_V0,CONFIGS_SERIALIZED.get(1),"properties",SAMPLE_CONFIGS.get(1));
  expectReadToEnd(new LinkedHashMap<String,byte[]>());
  expectConvertWriteRead(COMMIT_TASKS_CONFIG_KEYS.get(0),KafkaConfigStorage.CONNECTOR_TASKS_COMMIT_V0,CONFIGS_SERIALIZED.get(2),"tasks",2);
  tasksReconfiguredCallback.onCompletion(null,Arrays.asList(TASK_IDS.get(0),TASK_IDS.get(1)));
  EasyMock.expectLastCall();
  LinkedHashMap<String,byte[]> serializedConfigs=new LinkedHashMap<>();
  serializedConfigs.put(TASK_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(0));
  serializedConfigs.put(TASK_CONFIG_KEYS.get(1),CONFIGS_SERIALIZED.get(1));
  serializedConfigs.put(COMMIT_TASKS_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(2));
  expectReadToEnd(serializedConfigs);
  expectStop();
  PowerMock.replayAll();
  configStorage.configure(DEFAULT_CONFIG_STORAGE_PROPS);
  configStorage.start();
  whiteboxAddConnector(CONNECTOR_IDS.get(0),SAMPLE_CONFIGS.get(0),Collections.EMPTY_LIST);
  ClusterConfigState configState=configStorage.snapshot();
  assertEquals(-1,configState.offset());
  assertNull(configState.taskConfig(TASK_IDS.get(0)));
  assertNull(configState.taskConfig(TASK_IDS.get(1)));
  Map<ConnectorTaskId,Map<String,String>> taskConfigs=new HashMap<>();
  taskConfigs.put(TASK_IDS.get(0),SAMPLE_CONFIGS.get(0));
  taskConfigs.put(TASK_IDS.get(1),SAMPLE_CONFIGS.get(1));
  configStorage.putTaskConfigs(taskConfigs);
  configState=configStorage.snapshot();
  assertEquals(3,configState.offset());
  String connectorName=CONNECTOR_IDS.get(0);
  assertEquals(Arrays.asList(connectorName),new ArrayList<>(configState.connectors()));
  assertEquals(Arrays.asList(TASK_IDS.get(0),TASK_IDS.get(1)),configState.tasks(connectorName));
  assertEquals(SAMPLE_CONFIGS.get(0),configState.taskConfig(TASK_IDS.get(0)));
  assertEquals(SAMPLE_CONFIGS.get(1),configState.taskConfig(TASK_IDS.get(1)));
  assertEquals(Collections.EMPTY_SET,configState.inconsistentConnectors());
  configStorage.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-10 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutTaskConfigsDoesNotResolveAllInconsistencies() throws Exception {
  expectConfigure();
  List<ConsumerRecord<String,byte[]>> existingRecords=Arrays.asList(new ConsumerRecord<>(TOPIC,0,0,CONNECTOR_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(0)),new ConsumerRecord<>(TOPIC,0,2,TASK_CONFIG_KEYS.get(1),CONFIGS_SERIALIZED.get(2)),new ConsumerRecord<>(TOPIC,0,4,COMMIT_TASKS_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(4)),new ConsumerRecord<>(TOPIC,0,5,TASK_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(5)));
  LinkedHashMap<byte[],Struct> deserialized=new LinkedHashMap();
  deserialized.put(CONFIGS_SERIALIZED.get(0),CONNECTOR_CONFIG_STRUCTS.get(0));
  deserialized.put(CONFIGS_SERIALIZED.get(2),TASK_CONFIG_STRUCTS.get(0));
  deserialized.put(CONFIGS_SERIALIZED.get(4),TASKS_COMMIT_STRUCT_TWO_TASK_CONNECTOR);
  deserialized.put(CONFIGS_SERIALIZED.get(5),TASK_CONFIG_STRUCTS.get(1));
  logOffset=6;
  expectStart(existingRecords,deserialized);
  expectReadToEnd(new LinkedHashMap<String,byte[]>());
  expectReadToEnd(new LinkedHashMap<String,byte[]>());
  expectConvertWriteRead(TASK_CONFIG_KEYS.get(0),KafkaConfigStorage.TASK_CONFIGURATION_V0,CONFIGS_SERIALIZED.get(0),"properties",SAMPLE_CONFIGS.get(0));
  expectReadToEnd(new LinkedHashMap<String,byte[]>());
  expectConvertWriteRead(COMMIT_TASKS_CONFIG_KEYS.get(0),KafkaConfigStorage.CONNECTOR_TASKS_COMMIT_V0,CONFIGS_SERIALIZED.get(2),"tasks",1);
  tasksReconfiguredCallback.onCompletion(null,Arrays.asList(TASK_IDS.get(0)));
  EasyMock.expectLastCall();
  LinkedHashMap<String,byte[]> serializedConfigs=new LinkedHashMap<>();
  serializedConfigs.put(TASK_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(0));
  serializedConfigs.put(COMMIT_TASKS_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(2));
  expectReadToEnd(serializedConfigs);
  expectStop();
  PowerMock.replayAll();
  configStorage.configure(DEFAULT_CONFIG_STORAGE_PROPS);
  configStorage.start();
  ClusterConfigState configState=configStorage.snapshot();
  assertEquals(6,configState.offset());
  assertEquals(Arrays.asList(CONNECTOR_IDS.get(0)),new ArrayList<>(configState.connectors()));
  assertEquals(Collections.EMPTY_LIST,configState.tasks(CONNECTOR_IDS.get(0)));
  assertNull(configState.taskConfig(TASK_IDS.get(0)));
  assertNull(configState.taskConfig(TASK_IDS.get(1)));
  assertEquals(Collections.singleton(CONNECTOR_IDS.get(0)),configState.inconsistentConnectors());
  try {
    configStorage.putTaskConfigs(Collections.singletonMap(TASK_IDS.get(1),SAMPLE_CONFIGS.get(2)));
    fail("Should have failed due to incomplete task set.");
  }
 catch (  KafkaException e) {
  }
  configStorage.putTaskConfigs(Collections.singletonMap(TASK_IDS.get(0),SAMPLE_CONFIGS.get(0)));
  configState=configStorage.snapshot();
  assertEquals(8,configState.offset());
  assertEquals(Arrays.asList(CONNECTOR_IDS.get(0)),new ArrayList<>(configState.connectors()));
  assertEquals(Arrays.asList(TASK_IDS.get(0)),configState.tasks(CONNECTOR_IDS.get(0)));
  assertEquals(SAMPLE_CONFIGS.get(0),configState.taskConfig(TASK_IDS.get(0)));
  assertEquals(Collections.EMPTY_SET,configState.inconsistentConnectors());
  configStorage.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.storage.KafkaOffsetBackingStoreTest </h4><pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSet() throws Exception {
  expectConfigure();
  expectStart(Collections.EMPTY_LIST);
  expectStop();
  final Capture<Callback<Void>> firstGetReadToEndCallback=EasyMock.newCapture();
  storeLog.readToEnd(EasyMock.capture(firstGetReadToEndCallback));
  PowerMock.expectLastCall().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      firstGetReadToEndCallback.getValue().onCompletion(null,null);
      return null;
    }
  }
);
  Capture<org.apache.kafka.clients.producer.Callback> callback0=EasyMock.newCapture();
  storeLog.send(EasyMock.aryEq(TP0_KEY.array()),EasyMock.aryEq(TP0_VALUE.array()),EasyMock.capture(callback0));
  PowerMock.expectLastCall();
  Capture<org.apache.kafka.clients.producer.Callback> callback1=EasyMock.newCapture();
  storeLog.send(EasyMock.aryEq(TP1_KEY.array()),EasyMock.aryEq(TP1_VALUE.array()),EasyMock.capture(callback1));
  PowerMock.expectLastCall();
  final Capture<Callback<Void>> secondGetReadToEndCallback=EasyMock.newCapture();
  storeLog.readToEnd(EasyMock.capture(secondGetReadToEndCallback));
  PowerMock.expectLastCall().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      capturedConsumedCallback.getValue().onCompletion(null,new ConsumerRecord<>(TOPIC,0,0,TP0_KEY.array(),TP0_VALUE.array()));
      capturedConsumedCallback.getValue().onCompletion(null,new ConsumerRecord<>(TOPIC,1,0,TP1_KEY.array(),TP1_VALUE.array()));
      secondGetReadToEndCallback.getValue().onCompletion(null,null);
      return null;
    }
  }
);
  final Capture<Callback<Void>> thirdGetReadToEndCallback=EasyMock.newCapture();
  storeLog.readToEnd(EasyMock.capture(thirdGetReadToEndCallback));
  PowerMock.expectLastCall().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      capturedConsumedCallback.getValue().onCompletion(null,new ConsumerRecord<>(TOPIC,0,1,TP0_KEY.array(),TP0_VALUE_NEW.array()));
      capturedConsumedCallback.getValue().onCompletion(null,new ConsumerRecord<>(TOPIC,1,1,TP1_KEY.array(),TP1_VALUE_NEW.array()));
      thirdGetReadToEndCallback.getValue().onCompletion(null,null);
      return null;
    }
  }
);
  PowerMock.replayAll();
  store.configure(DEFAULT_PROPS);
  store.start();
  final AtomicBoolean getInvokedAndPassed=new AtomicBoolean(false);
  store.get(Arrays.asList(TP0_KEY,TP1_KEY),new Callback<Map<ByteBuffer,ByteBuffer>>(){
    @Override public void onCompletion(    Throwable error,    Map<ByteBuffer,ByteBuffer> result){
      assertEquals(null,result.get(TP0_KEY));
      assertEquals(null,result.get(TP1_KEY));
      getInvokedAndPassed.set(true);
    }
  }
).get(10000,TimeUnit.MILLISECONDS);
  assertTrue(getInvokedAndPassed.get());
  Map<ByteBuffer,ByteBuffer> toSet=new HashMap<>();
  toSet.put(TP0_KEY,TP0_VALUE);
  toSet.put(TP1_KEY,TP1_VALUE);
  final AtomicBoolean invoked=new AtomicBoolean(false);
  Future<Void> setFuture=store.set(toSet,new Callback<Void>(){
    @Override public void onCompletion(    Throwable error,    Void result){
      invoked.set(true);
    }
  }
);
  assertFalse(setFuture.isDone());
  callback1.getValue().onCompletion(null,null);
  assertFalse(invoked.get());
  callback0.getValue().onCompletion(null,null);
  setFuture.get(10000,TimeUnit.MILLISECONDS);
  assertTrue(invoked.get());
  final AtomicBoolean secondGetInvokedAndPassed=new AtomicBoolean(false);
  store.get(Arrays.asList(TP0_KEY,TP1_KEY),new Callback<Map<ByteBuffer,ByteBuffer>>(){
    @Override public void onCompletion(    Throwable error,    Map<ByteBuffer,ByteBuffer> result){
      assertEquals(TP0_VALUE,result.get(TP0_KEY));
      assertEquals(TP1_VALUE,result.get(TP1_KEY));
      secondGetInvokedAndPassed.set(true);
    }
  }
).get(10000,TimeUnit.MILLISECONDS);
  assertTrue(secondGetInvokedAndPassed.get());
  final AtomicBoolean thirdGetInvokedAndPassed=new AtomicBoolean(false);
  store.get(Arrays.asList(TP0_KEY,TP1_KEY),new Callback<Map<ByteBuffer,ByteBuffer>>(){
    @Override public void onCompletion(    Throwable error,    Map<ByteBuffer,ByteBuffer> result){
      assertEquals(TP0_VALUE_NEW,result.get(TP0_KEY));
      assertEquals(TP1_VALUE_NEW,result.get(TP1_KEY));
      thirdGetInvokedAndPassed.set(true);
    }
  }
).get(10000,TimeUnit.MILLISECONDS);
  assertTrue(thirdGetInvokedAndPassed.get());
  store.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-8 type-10 type-9 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetFailure() throws Exception {
  expectConfigure();
  expectStart(Collections.EMPTY_LIST);
  expectStop();
  Capture<org.apache.kafka.clients.producer.Callback> callback0=EasyMock.newCapture();
  storeLog.send(EasyMock.aryEq(TP0_KEY.array()),EasyMock.aryEq(TP0_VALUE.array()),EasyMock.capture(callback0));
  PowerMock.expectLastCall();
  Capture<org.apache.kafka.clients.producer.Callback> callback1=EasyMock.newCapture();
  storeLog.send(EasyMock.aryEq(TP1_KEY.array()),EasyMock.aryEq(TP1_VALUE.array()),EasyMock.capture(callback1));
  PowerMock.expectLastCall();
  Capture<org.apache.kafka.clients.producer.Callback> callback2=EasyMock.newCapture();
  storeLog.send(EasyMock.aryEq(TP2_KEY.array()),EasyMock.aryEq(TP2_VALUE.array()),EasyMock.capture(callback2));
  PowerMock.expectLastCall();
  PowerMock.replayAll();
  store.configure(DEFAULT_PROPS);
  store.start();
  Map<ByteBuffer,ByteBuffer> toSet=new HashMap<>();
  toSet.put(TP0_KEY,TP0_VALUE);
  toSet.put(TP1_KEY,TP1_VALUE);
  toSet.put(TP2_KEY,TP2_VALUE);
  final AtomicBoolean invoked=new AtomicBoolean(false);
  final AtomicBoolean invokedFailure=new AtomicBoolean(false);
  Future<Void> setFuture=store.set(toSet,new Callback<Void>(){
    @Override public void onCompletion(    Throwable error,    Void result){
      invoked.set(true);
      if (error != null)       invokedFailure.set(true);
    }
  }
);
  assertFalse(setFuture.isDone());
  callback1.getValue().onCompletion(null,null);
  assertFalse(invoked.get());
  callback2.getValue().onCompletion(null,new KafkaException("bogus error"));
  assertTrue(invoked.get());
  assertTrue(invokedFailure.get());
  callback0.getValue().onCompletion(null,null);
  try {
    setFuture.get(10000,TimeUnit.MILLISECONDS);
    fail("Should have seen KafkaException thrown when waiting on KafkaOffsetBackingStore.set() future");
  }
 catch (  ExecutionException e) {
    assertNotNull(e.getCause());
    assertTrue(e.getCause() instanceof KafkaException);
  }
  store.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.storage.OffsetStorageWriterTest </h4><pre class="type-9 type-7 type-1 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=ConnectException.class) public void testAlreadyFlushing() throws Exception {
  @SuppressWarnings("unchecked") final Callback<Void> callback=PowerMock.createMock(Callback.class);
  CountDownLatch allowStoreCompleteCountdown=new CountDownLatch(1);
  expectStore(OFFSET_KEY,OFFSET_KEY_SERIALIZED,OFFSET_VALUE,OFFSET_VALUE_SERIALIZED,null,false,allowStoreCompleteCountdown);
  PowerMock.replayAll();
  writer.offset(OFFSET_KEY,OFFSET_VALUE);
  assertTrue(writer.beginFlush());
  writer.doFlush(callback);
  assertTrue(writer.beginFlush());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.util.KafkaBasedLogTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSendAndReadToEnd() throws Exception {
  expectStart();
  TestFuture<RecordMetadata> tp0Future=new TestFuture<>();
  ProducerRecord<String,String> tp0Record=new ProducerRecord<>(TOPIC,TP0_KEY,TP0_VALUE);
  Capture<org.apache.kafka.clients.producer.Callback> callback0=EasyMock.newCapture();
  EasyMock.expect(producer.send(EasyMock.eq(tp0Record),EasyMock.capture(callback0))).andReturn(tp0Future);
  TestFuture<RecordMetadata> tp1Future=new TestFuture<>();
  ProducerRecord<String,String> tp1Record=new ProducerRecord<>(TOPIC,TP1_KEY,TP1_VALUE);
  Capture<org.apache.kafka.clients.producer.Callback> callback1=EasyMock.newCapture();
  EasyMock.expect(producer.send(EasyMock.eq(tp1Record),EasyMock.capture(callback1))).andReturn(tp1Future);
  producer.flush();
  PowerMock.expectLastCall();
  expectStop();
  PowerMock.replayAll();
  Map<TopicPartition,Long> endOffsets=new HashMap<>();
  endOffsets.put(TP0,0L);
  endOffsets.put(TP1,0L);
  consumer.updateEndOffsets(endOffsets);
  store.start();
  assertEquals(CONSUMER_ASSIGNMENT,consumer.assignment());
  assertEquals(0L,consumer.position(TP0));
  assertEquals(0L,consumer.position(TP1));
  final AtomicInteger invoked=new AtomicInteger(0);
  org.apache.kafka.clients.producer.Callback producerCallback=new org.apache.kafka.clients.producer.Callback(){
    @Override public void onCompletion(    RecordMetadata metadata,    Exception exception){
      invoked.incrementAndGet();
    }
  }
;
  store.send(TP0_KEY,TP0_VALUE,producerCallback);
  store.send(TP1_KEY,TP1_VALUE,producerCallback);
  assertEquals(0,invoked.get());
  tp1Future.resolve((RecordMetadata)null);
  callback1.getValue().onCompletion(null,null);
  assertEquals(1,invoked.get());
  tp0Future.resolve((RecordMetadata)null);
  callback0.getValue().onCompletion(null,null);
  assertEquals(2,invoked.get());
  final AtomicBoolean getInvoked=new AtomicBoolean(false);
  final FutureCallback<Void> readEndFutureCallback=new FutureCallback<>(new Callback<Void>(){
    @Override public void onCompletion(    Throwable error,    Void result){
      getInvoked.set(true);
    }
  }
);
  consumer.schedulePollTask(new Runnable(){
    @Override public void run(){
      store.readToEnd(readEndFutureCallback);
      consumer.schedulePollTask(new Runnable(){
        @Override public void run(){
          Map<TopicPartition,Long> newEndOffsets=new HashMap<>();
          newEndOffsets.put(TP0,2L);
          newEndOffsets.put(TP1,2L);
          consumer.updateEndOffsets(newEndOffsets);
        }
      }
);
      consumer.scheduleNopPollTask();
      consumer.scheduleNopPollTask();
      consumer.scheduleNopPollTask();
      consumer.schedulePollTask(new Runnable(){
        @Override public void run(){
          consumer.addRecord(new ConsumerRecord<>(TOPIC,0,0,TP0_KEY,TP0_VALUE));
          consumer.addRecord(new ConsumerRecord<>(TOPIC,0,1,TP0_KEY,TP0_VALUE_NEW));
          consumer.addRecord(new ConsumerRecord<>(TOPIC,1,0,TP1_KEY,TP1_VALUE));
        }
      }
);
      consumer.schedulePollTask(new Runnable(){
        @Override public void run(){
          consumer.addRecord(new ConsumerRecord<>(TOPIC,1,1,TP1_KEY,TP1_VALUE_NEW));
        }
      }
);
    }
  }
);
  readEndFutureCallback.get(10000,TimeUnit.MILLISECONDS);
  assertTrue(getInvoked.get());
  assertEquals(2,consumedRecords.size());
  assertEquals(2,consumedRecords.get(TP0).size());
  assertEquals(TP0_VALUE,consumedRecords.get(TP0).get(0).value());
  assertEquals(TP0_VALUE_NEW,consumedRecords.get(TP0).get(1).value());
  assertEquals(2,consumedRecords.get(TP1).size());
  assertEquals(TP1_VALUE,consumedRecords.get(TP1).get(0).value());
  assertEquals(TP1_VALUE_NEW,consumedRecords.get(TP1).get(1).value());
  store.stop();
  assertFalse(Whitebox.<Thread>getInternalState(store,"thread").isAlive());
  assertTrue(consumer.closed());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStartStop() throws Exception {
  expectStart();
  expectStop();
  PowerMock.replayAll();
  Map<TopicPartition,Long> endOffsets=new HashMap<>();
  endOffsets.put(TP0,0L);
  endOffsets.put(TP1,0L);
  consumer.updateEndOffsets(endOffsets);
  store.start();
  assertEquals(CONSUMER_ASSIGNMENT,consumer.assignment());
  store.stop();
  assertFalse(Whitebox.<Thread>getInternalState(store,"thread").isAlive());
  assertTrue(consumer.closed());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConsumerError() throws Exception {
  expectStart();
  expectStop();
  PowerMock.replayAll();
  final CountDownLatch finishedLatch=new CountDownLatch(1);
  Map<TopicPartition,Long> endOffsets=new HashMap<>();
  endOffsets.put(TP0,1L);
  endOffsets.put(TP1,1L);
  consumer.updateEndOffsets(endOffsets);
  consumer.schedulePollTask(new Runnable(){
    @Override public void run(){
      consumer.schedulePollTask(new Runnable(){
        @Override public void run(){
          consumer.setException(Errors.GROUP_COORDINATOR_NOT_AVAILABLE.exception());
        }
      }
);
      consumer.scheduleNopPollTask();
      consumer.scheduleNopPollTask();
      consumer.schedulePollTask(new Runnable(){
        @Override public void run(){
          consumer.addRecord(new ConsumerRecord<>(TOPIC,0,0,TP0_KEY,TP0_VALUE_NEW));
          consumer.addRecord(new ConsumerRecord<>(TOPIC,1,0,TP0_KEY,TP0_VALUE_NEW));
        }
      }
);
      consumer.schedulePollTask(new Runnable(){
        @Override public void run(){
          finishedLatch.countDown();
        }
      }
);
    }
  }
);
  store.start();
  assertTrue(finishedLatch.await(10000,TimeUnit.MILLISECONDS));
  assertEquals(CONSUMER_ASSIGNMENT,consumer.assignment());
  assertEquals(1L,consumer.position(TP0));
  store.stop();
  assertFalse(Whitebox.<Thread>getInternalState(store,"thread").isAlive());
  assertTrue(consumer.closed());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReloadOnStart() throws Exception {
  expectStart();
  expectStop();
  PowerMock.replayAll();
  Map<TopicPartition,Long> endOffsets=new HashMap<>();
  endOffsets.put(TP0,1L);
  endOffsets.put(TP1,1L);
  consumer.updateEndOffsets(endOffsets);
  final CountDownLatch finishedLatch=new CountDownLatch(1);
  consumer.schedulePollTask(new Runnable(){
    @Override public void run(){
      consumer.scheduleNopPollTask();
      consumer.scheduleNopPollTask();
      consumer.schedulePollTask(new Runnable(){
        @Override public void run(){
          consumer.addRecord(new ConsumerRecord<>(TOPIC,0,0,TP0_KEY,TP0_VALUE));
        }
      }
);
      consumer.scheduleNopPollTask();
      consumer.scheduleNopPollTask();
      consumer.schedulePollTask(new Runnable(){
        @Override public void run(){
          consumer.addRecord(new ConsumerRecord<>(TOPIC,1,0,TP1_KEY,TP1_VALUE));
        }
      }
);
      consumer.schedulePollTask(new Runnable(){
        @Override public void run(){
          finishedLatch.countDown();
        }
      }
);
    }
  }
);
  store.start();
  assertTrue(finishedLatch.await(10000,TimeUnit.MILLISECONDS));
  assertEquals(CONSUMER_ASSIGNMENT,consumer.assignment());
  assertEquals(2,consumedRecords.size());
  assertEquals(TP0_VALUE,consumedRecords.get(TP0).get(0).value());
  assertEquals(TP1_VALUE,consumedRecords.get(TP1).get(0).value());
  store.stop();
  assertFalse(Whitebox.<Thread>getInternalState(store,"thread").isAlive());
  assertTrue(consumer.closed());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testProducerError() throws Exception {
  expectStart();
  TestFuture<RecordMetadata> tp0Future=new TestFuture<>();
  ProducerRecord<String,String> tp0Record=new ProducerRecord<>(TOPIC,TP0_KEY,TP0_VALUE);
  Capture<org.apache.kafka.clients.producer.Callback> callback0=EasyMock.newCapture();
  EasyMock.expect(producer.send(EasyMock.eq(tp0Record),EasyMock.capture(callback0))).andReturn(tp0Future);
  expectStop();
  PowerMock.replayAll();
  Map<TopicPartition,Long> endOffsets=new HashMap<>();
  endOffsets.put(TP0,0L);
  endOffsets.put(TP1,0L);
  consumer.updateEndOffsets(endOffsets);
  store.start();
  assertEquals(CONSUMER_ASSIGNMENT,consumer.assignment());
  assertEquals(0L,consumer.position(TP0));
  assertEquals(0L,consumer.position(TP1));
  final AtomicReference<Throwable> setException=new AtomicReference<>();
  store.send(TP0_KEY,TP0_VALUE,new org.apache.kafka.clients.producer.Callback(){
    @Override public void onCompletion(    RecordMetadata metadata,    Exception exception){
      assertNull(setException.get());
      setException.set(exception);
    }
  }
);
  KafkaException exc=new LeaderNotAvailableException("Error");
  tp0Future.resolve(exc);
  callback0.getValue().onCompletion(null,exc);
  assertNotNull(setException.get());
  store.stop();
  assertFalse(Whitebox.<Thread>getInternalState(store,"thread").isAlive());
  assertTrue(consumer.closed());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.StreamsConfigTest </h4><pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRestoreConsumerConfigs() throws Exception {
  Map<String,Object> returnedProps=streamsConfig.getRestoreConsumerConfigs("client");
  assertEquals(returnedProps.get(ConsumerConfig.CLIENT_ID_CONFIG),"client-restore-consumer");
  assertNull(returnedProps.get(ConsumerConfig.GROUP_ID_CONFIG));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KTableFilterTest </h4><pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValueGetter() throws IOException {
  File stateDir=Files.createTempDirectory("test").toFile();
  try {
    final KStreamBuilder builder=new KStreamBuilder();
    String topic1="topic1";
    KTableImpl<String,Integer,Integer> table1=(KTableImpl<String,Integer,Integer>)builder.table(strSerializer,intSerializer,strDeserializer,intDeserializer,topic1);
    KTableImpl<String,Integer,Integer> table2=(KTableImpl<String,Integer,Integer>)table1.filter(new Predicate<String,Integer>(){
      @Override public boolean test(      String key,      Integer value){
        return (value % 2) == 0;
      }
    }
);
    KTableImpl<String,Integer,Integer> table3=(KTableImpl<String,Integer,Integer>)table1.filterOut(new Predicate<String,Integer>(){
      @Override public boolean test(      String key,      Integer value){
        return (value % 2) == 0;
      }
    }
);
    KTableValueGetterSupplier<String,Integer> getterSupplier2=table2.valueGetterSupplier();
    KTableValueGetterSupplier<String,Integer> getterSupplier3=table3.valueGetterSupplier();
    KStreamTestDriver driver=new KStreamTestDriver(builder,stateDir,null,null,null,null);
    KTableValueGetter<String,Integer> getter2=getterSupplier2.get();
    KTableValueGetter<String,Integer> getter3=getterSupplier3.get();
    getter2.init(driver.context());
    getter3.init(driver.context());
    driver.process(topic1,"A",1);
    driver.process(topic1,"B",1);
    driver.process(topic1,"C",1);
    assertNull(getter2.get("A"));
    assertNull(getter2.get("B"));
    assertNull(getter2.get("C"));
    assertEquals(1,(int)getter3.get("A"));
    assertEquals(1,(int)getter3.get("B"));
    assertEquals(1,(int)getter3.get("C"));
    driver.process(topic1,"A",2);
    driver.process(topic1,"B",2);
    assertEquals(2,(int)getter2.get("A"));
    assertEquals(2,(int)getter2.get("B"));
    assertNull(getter2.get("C"));
    assertNull(getter3.get("A"));
    assertNull(getter3.get("B"));
    assertEquals(1,(int)getter3.get("C"));
    driver.process(topic1,"A",3);
    assertNull(getter2.get("A"));
    assertEquals(2,(int)getter2.get("B"));
    assertNull(getter2.get("C"));
    assertEquals(3,(int)getter3.get("A"));
    assertNull(getter3.get("B"));
    assertEquals(1,(int)getter3.get("C"));
    driver.process(topic1,"A",null);
    driver.process(topic1,"B",null);
    assertNull(getter2.get("A"));
    assertNull(getter2.get("B"));
    assertNull(getter2.get("C"));
    assertNull(getter3.get("A"));
    assertNull(getter3.get("B"));
    assertEquals(1,(int)getter3.get("C"));
  }
  finally {
    Utils.delete(stateDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KTableImplTest </h4><pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValueGetter() throws IOException {
  File stateDir=Files.createTempDirectory("test").toFile();
  try {
    final Serializer<String> serializer=new StringSerializer();
    final Deserializer<String> deserializer=new StringDeserializer();
    final KStreamBuilder builder=new KStreamBuilder();
    String topic1="topic1";
    String topic2="topic2";
    KTableImpl<String,String,String> table1=(KTableImpl<String,String,String>)builder.table(serializer,serializer,deserializer,deserializer,topic1);
    KTableImpl<String,String,Integer> table2=(KTableImpl<String,String,Integer>)table1.mapValues(new ValueMapper<String,Integer>(){
      @Override public Integer apply(      String value){
        return new Integer(value);
      }
    }
);
    KTableImpl<String,Integer,Integer> table3=(KTableImpl<String,Integer,Integer>)table2.filter(new Predicate<String,Integer>(){
      @Override public boolean test(      String key,      Integer value){
        return (value % 2) == 0;
      }
    }
);
    KTableImpl<String,String,String> table4=(KTableImpl<String,String,String>)table1.through(topic2,serializer,serializer,deserializer,deserializer);
    KTableValueGetterSupplier<String,String> getterSupplier1=table1.valueGetterSupplier();
    KTableValueGetterSupplier<String,Integer> getterSupplier2=table2.valueGetterSupplier();
    KTableValueGetterSupplier<String,Integer> getterSupplier3=table3.valueGetterSupplier();
    KTableValueGetterSupplier<String,String> getterSupplier4=table4.valueGetterSupplier();
    KStreamTestDriver driver=new KStreamTestDriver(builder,stateDir,null,null,null,null);
    assertEquals(2,driver.allStateStores().size());
    KTableValueGetter<String,String> getter1=getterSupplier1.get();
    getter1.init(driver.context());
    KTableValueGetter<String,Integer> getter2=getterSupplier2.get();
    getter2.init(driver.context());
    KTableValueGetter<String,Integer> getter3=getterSupplier3.get();
    getter3.init(driver.context());
    KTableValueGetter<String,String> getter4=getterSupplier4.get();
    getter4.init(driver.context());
    driver.process(topic1,"A","01");
    driver.process(topic1,"B","01");
    driver.process(topic1,"C","01");
    assertEquals("01",getter1.get("A"));
    assertEquals("01",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    assertEquals(new Integer(1),getter2.get("A"));
    assertEquals(new Integer(1),getter2.get("B"));
    assertEquals(new Integer(1),getter2.get("C"));
    assertNull(getter3.get("A"));
    assertNull(getter3.get("B"));
    assertNull(getter3.get("C"));
    assertEquals("01",getter4.get("A"));
    assertEquals("01",getter4.get("B"));
    assertEquals("01",getter4.get("C"));
    driver.process(topic1,"A","02");
    driver.process(topic1,"B","02");
    assertEquals("02",getter1.get("A"));
    assertEquals("02",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    assertEquals(new Integer(2),getter2.get("A"));
    assertEquals(new Integer(2),getter2.get("B"));
    assertEquals(new Integer(1),getter2.get("C"));
    assertEquals(new Integer(2),getter3.get("A"));
    assertEquals(new Integer(2),getter3.get("B"));
    assertNull(getter3.get("C"));
    assertEquals("02",getter4.get("A"));
    assertEquals("02",getter4.get("B"));
    assertEquals("01",getter4.get("C"));
    driver.process(topic1,"A","03");
    assertEquals("03",getter1.get("A"));
    assertEquals("02",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    assertEquals(new Integer(3),getter2.get("A"));
    assertEquals(new Integer(2),getter2.get("B"));
    assertEquals(new Integer(1),getter2.get("C"));
    assertNull(getter3.get("A"));
    assertEquals(new Integer(2),getter3.get("B"));
    assertNull(getter3.get("C"));
    assertEquals("03",getter4.get("A"));
    assertEquals("02",getter4.get("B"));
    assertEquals("01",getter4.get("C"));
    driver.process(topic1,"A",null);
    assertNull(getter1.get("A"));
    assertEquals("02",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    assertNull(getter2.get("A"));
    assertEquals(new Integer(2),getter2.get("B"));
    assertEquals(new Integer(1),getter2.get("C"));
    assertNull(getter3.get("A"));
    assertEquals(new Integer(2),getter3.get("B"));
    assertNull(getter3.get("C"));
    assertNull(getter4.get("A"));
    assertEquals("02",getter4.get("B"));
    assertEquals("01",getter4.get("C"));
  }
  finally {
    Utils.delete(stateDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KTableMapValuesTest </h4><pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValueGetter() throws IOException {
  File stateDir=Files.createTempDirectory("test").toFile();
  try {
    final Serializer<String> serializer=new StringSerializer();
    final Deserializer<String> deserializer=new StringDeserializer();
    final KStreamBuilder builder=new KStreamBuilder();
    String topic1="topic1";
    String topic2="topic2";
    KTableImpl<String,String,String> table1=(KTableImpl<String,String,String>)builder.table(serializer,serializer,deserializer,deserializer,topic1);
    KTableImpl<String,String,Integer> table2=(KTableImpl<String,String,Integer>)table1.mapValues(new ValueMapper<String,Integer>(){
      @Override public Integer apply(      String value){
        return new Integer(value);
      }
    }
);
    KTableImpl<String,Integer,Integer> table3=(KTableImpl<String,Integer,Integer>)table2.filter(new Predicate<String,Integer>(){
      @Override public boolean test(      String key,      Integer value){
        return (value % 2) == 0;
      }
    }
);
    KTableImpl<String,String,String> table4=(KTableImpl<String,String,String>)table1.through(topic2,serializer,serializer,deserializer,deserializer);
    KTableValueGetterSupplier<String,String> getterSupplier1=table1.valueGetterSupplier();
    KTableValueGetterSupplier<String,Integer> getterSupplier2=table2.valueGetterSupplier();
    KTableValueGetterSupplier<String,Integer> getterSupplier3=table3.valueGetterSupplier();
    KTableValueGetterSupplier<String,String> getterSupplier4=table4.valueGetterSupplier();
    KStreamTestDriver driver=new KStreamTestDriver(builder,stateDir,null,null,null,null);
    KTableValueGetter<String,String> getter1=getterSupplier1.get();
    getter1.init(driver.context());
    KTableValueGetter<String,Integer> getter2=getterSupplier2.get();
    getter2.init(driver.context());
    KTableValueGetter<String,Integer> getter3=getterSupplier3.get();
    getter3.init(driver.context());
    KTableValueGetter<String,String> getter4=getterSupplier4.get();
    getter4.init(driver.context());
    driver.process(topic1,"A","01");
    driver.process(topic1,"B","01");
    driver.process(topic1,"C","01");
    assertEquals("01",getter1.get("A"));
    assertEquals("01",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    assertEquals(new Integer(1),getter2.get("A"));
    assertEquals(new Integer(1),getter2.get("B"));
    assertEquals(new Integer(1),getter2.get("C"));
    assertNull(getter3.get("A"));
    assertNull(getter3.get("B"));
    assertNull(getter3.get("C"));
    assertEquals("01",getter4.get("A"));
    assertEquals("01",getter4.get("B"));
    assertEquals("01",getter4.get("C"));
    driver.process(topic1,"A","02");
    driver.process(topic1,"B","02");
    assertEquals("02",getter1.get("A"));
    assertEquals("02",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    assertEquals(new Integer(2),getter2.get("A"));
    assertEquals(new Integer(2),getter2.get("B"));
    assertEquals(new Integer(1),getter2.get("C"));
    assertEquals(new Integer(2),getter3.get("A"));
    assertEquals(new Integer(2),getter3.get("B"));
    assertNull(getter3.get("C"));
    assertEquals("02",getter4.get("A"));
    assertEquals("02",getter4.get("B"));
    assertEquals("01",getter4.get("C"));
    driver.process(topic1,"A","03");
    assertEquals("03",getter1.get("A"));
    assertEquals("02",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    assertEquals(new Integer(3),getter2.get("A"));
    assertEquals(new Integer(2),getter2.get("B"));
    assertEquals(new Integer(1),getter2.get("C"));
    assertNull(getter3.get("A"));
    assertEquals(new Integer(2),getter3.get("B"));
    assertNull(getter3.get("C"));
    assertEquals("03",getter4.get("A"));
    assertEquals("02",getter4.get("B"));
    assertEquals("01",getter4.get("C"));
    driver.process(topic1,"A",null);
    assertNull(getter1.get("A"));
    assertEquals("02",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    assertNull(getter2.get("A"));
    assertEquals(new Integer(2),getter2.get("B"));
    assertEquals(new Integer(1),getter2.get("C"));
    assertNull(getter3.get("A"));
    assertEquals(new Integer(2),getter3.get("B"));
    assertNull(getter3.get("C"));
    assertNull(getter4.get("A"));
    assertEquals("02",getter4.get("B"));
    assertEquals("01",getter4.get("C"));
  }
  finally {
    Utils.delete(stateDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.KTableSourceTest </h4><pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValueGetter() throws IOException {
  File stateDir=Files.createTempDirectory("test").toFile();
  try {
    final KStreamBuilder builder=new KStreamBuilder();
    String topic1="topic1";
    KTableImpl<String,String,String> table1=(KTableImpl<String,String,String>)builder.table(strSerializer,strSerializer,strDeserializer,strDeserializer,topic1);
    KTableValueGetterSupplier<String,String> getterSupplier1=table1.valueGetterSupplier();
    KStreamTestDriver driver=new KStreamTestDriver(builder,stateDir,null,null,null,null);
    KTableValueGetter<String,String> getter1=getterSupplier1.get();
    getter1.init(driver.context());
    driver.process(topic1,"A","01");
    driver.process(topic1,"B","01");
    driver.process(topic1,"C","01");
    assertEquals("01",getter1.get("A"));
    assertEquals("01",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    driver.process(topic1,"A","02");
    driver.process(topic1,"B","02");
    assertEquals("02",getter1.get("A"));
    assertEquals("02",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    driver.process(topic1,"A","03");
    assertEquals("03",getter1.get("A"));
    assertEquals("02",getter1.get("B"));
    assertEquals("01",getter1.get("C"));
    driver.process(topic1,"A",null);
    driver.process(topic1,"B",null);
    assertNull(getter1.get("A"));
    assertNull(getter1.get("B"));
    assertEquals("01",getter1.get("C"));
  }
  finally {
    Utils.delete(stateDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.ProcessorStateManagerTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegisterNonPersistentStore() throws IOException {
  File baseDir=Files.createTempDirectory(stateDir).toFile();
  try {
    long lastCheckpointedOffset=10L;
    MockRestoreConsumer restoreConsumer=new MockRestoreConsumer();
    OffsetCheckpoint checkpoint=new OffsetCheckpoint(new File(baseDir,ProcessorStateManager.CHECKPOINT_FILE_NAME));
    checkpoint.write(Collections.singletonMap(new TopicPartition(persistentStoreTopicName,2),lastCheckpointedOffset));
    restoreConsumer.updatePartitions(nonPersistentStoreTopicName,Utils.mkList(new PartitionInfo(nonPersistentStoreTopicName,1,Node.noNode(),new Node[0],new Node[0]),new PartitionInfo(nonPersistentStoreTopicName,2,Node.noNode(),new Node[0],new Node[0])));
    TopicPartition partition=new TopicPartition(persistentStoreTopicName,2);
    restoreConsumer.updateEndOffsets(Collections.singletonMap(partition,13L));
    MockStateStoreSupplier.MockStateStore nonPersistentStore=new MockStateStoreSupplier.MockStateStore(nonPersistentStoreName,false);
    ProcessorStateManager stateMgr=new ProcessorStateManager(jobId,2,noPartitions,baseDir,restoreConsumer,false);
    try {
      restoreConsumer.reset();
      ArrayList<Integer> expectedKeys=new ArrayList<>();
      long offset=-1L;
      for (int i=1; i <= 3; i++) {
        offset=(long)(i + 100);
        int key=i;
        expectedKeys.add(i);
        restoreConsumer.bufferRecord(new ConsumerRecord<>(nonPersistentStoreTopicName,2,offset,key,0));
      }
      stateMgr.register(nonPersistentStore,true,nonPersistentStore.stateRestoreCallback);
      assertEquals(new TopicPartition(nonPersistentStoreTopicName,2),restoreConsumer.assignedPartition);
      assertEquals(0L,restoreConsumer.seekOffset);
      assertTrue(restoreConsumer.seekToBeginingCalled);
      assertTrue(restoreConsumer.seekToEndCalled);
      assertEquals(expectedKeys,nonPersistentStore.keys);
    }
  finally {
      stateMgr.close(Collections.<TopicPartition,Long>emptyMap());
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegisterPersistentStore() throws IOException {
  File baseDir=Files.createTempDirectory(stateDir).toFile();
  try {
    long lastCheckpointedOffset=10L;
    OffsetCheckpoint checkpoint=new OffsetCheckpoint(new File(baseDir,ProcessorStateManager.CHECKPOINT_FILE_NAME));
    checkpoint.write(Collections.singletonMap(new TopicPartition(persistentStoreTopicName,2),lastCheckpointedOffset));
    MockRestoreConsumer restoreConsumer=new MockRestoreConsumer();
    restoreConsumer.updatePartitions(persistentStoreTopicName,Utils.mkList(new PartitionInfo(persistentStoreTopicName,1,Node.noNode(),new Node[0],new Node[0]),new PartitionInfo(persistentStoreTopicName,2,Node.noNode(),new Node[0],new Node[0])));
    TopicPartition partition=new TopicPartition(persistentStoreTopicName,2);
    restoreConsumer.updateEndOffsets(Collections.singletonMap(partition,13L));
    MockStateStoreSupplier.MockStateStore persistentStore=new MockStateStoreSupplier.MockStateStore("persistentStore",true);
    ProcessorStateManager stateMgr=new ProcessorStateManager(jobId,2,noPartitions,baseDir,restoreConsumer,false);
    try {
      restoreConsumer.reset();
      ArrayList<Integer> expectedKeys=new ArrayList<>();
      long offset;
      for (int i=1; i <= 3; i++) {
        offset=(long)i;
        int key=i * 10;
        expectedKeys.add(key);
        restoreConsumer.bufferRecord(new ConsumerRecord<>(persistentStoreTopicName,2,offset,key,0));
      }
      stateMgr.register(persistentStore,true,persistentStore.stateRestoreCallback);
      assertEquals(new TopicPartition(persistentStoreTopicName,2),restoreConsumer.assignedPartition);
      assertEquals(lastCheckpointedOffset,restoreConsumer.seekOffset);
      assertFalse(restoreConsumer.seekToBeginingCalled);
      assertTrue(restoreConsumer.seekToEndCalled);
      assertEquals(expectedKeys,persistentStore.keys);
    }
  finally {
      stateMgr.close(Collections.<TopicPartition,Long>emptyMap());
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClose() throws IOException {
  File baseDir=Files.createTempDirectory(stateDir).toFile();
  File checkpointFile=new File(baseDir,ProcessorStateManager.CHECKPOINT_FILE_NAME);
  try {
    OffsetCheckpoint oldCheckpoint=new OffsetCheckpoint(checkpointFile);
    oldCheckpoint.write(Collections.<TopicPartition,Long>emptyMap());
    MockRestoreConsumer restoreConsumer=new MockRestoreConsumer();
    restoreConsumer.updatePartitions(persistentStoreTopicName,Utils.mkList(new PartitionInfo(persistentStoreTopicName,1,Node.noNode(),new Node[0],new Node[0])));
    restoreConsumer.updatePartitions(nonPersistentStoreTopicName,Utils.mkList(new PartitionInfo(nonPersistentStoreTopicName,1,Node.noNode(),new Node[0],new Node[0])));
    HashMap<TopicPartition,Long> ackedOffsets=new HashMap<>();
    ackedOffsets.put(new TopicPartition(persistentStoreTopicName,1),123L);
    ackedOffsets.put(new TopicPartition(nonPersistentStoreTopicName,1),456L);
    ackedOffsets.put(new TopicPartition(ProcessorStateManager.storeChangelogTopic(jobId,"otherTopic"),1),789L);
    MockStateStoreSupplier.MockStateStore persistentStore=new MockStateStoreSupplier.MockStateStore(persistentStoreName,true);
    MockStateStoreSupplier.MockStateStore nonPersistentStore=new MockStateStoreSupplier.MockStateStore(nonPersistentStoreName,false);
    ProcessorStateManager stateMgr=new ProcessorStateManager(jobId,1,noPartitions,baseDir,restoreConsumer,false);
    try {
      assertFalse(checkpointFile.exists());
      restoreConsumer.reset();
      stateMgr.register(persistentStore,true,persistentStore.stateRestoreCallback);
      restoreConsumer.reset();
      stateMgr.register(nonPersistentStore,true,nonPersistentStore.stateRestoreCallback);
    }
  finally {
      stateMgr.close(ackedOffsets);
    }
    assertTrue(persistentStore.flushed);
    assertTrue(persistentStore.closed);
    assertTrue(nonPersistentStore.flushed);
    assertTrue(nonPersistentStore.closed);
    assertTrue(checkpointFile.exists());
    OffsetCheckpoint newCheckpoint=new OffsetCheckpoint(checkpointFile);
    Map<TopicPartition,Long> checkpointedOffsets=newCheckpoint.read();
    assertEquals(1,checkpointedOffsets.size());
    assertEquals(new Long(123L + 1L),checkpointedOffsets.get(new TopicPartition(persistentStoreTopicName,1)));
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetStore() throws IOException {
  File baseDir=Files.createTempDirectory(stateDir).toFile();
  try {
    MockRestoreConsumer restoreConsumer=new MockRestoreConsumer();
    restoreConsumer.updatePartitions(nonPersistentStoreTopicName,Utils.mkList(new PartitionInfo(nonPersistentStoreTopicName,1,Node.noNode(),new Node[0],new Node[0])));
    MockStateStoreSupplier.MockStateStore mockStateStore=new MockStateStoreSupplier.MockStateStore(nonPersistentStoreName,false);
    ProcessorStateManager stateMgr=new ProcessorStateManager(jobId,1,noPartitions,baseDir,restoreConsumer,false);
    try {
      stateMgr.register(mockStateStore,true,mockStateStore.stateRestoreCallback);
      assertNull(stateMgr.getStore("noSuchStore"));
      assertEquals(mockStateStore,stateMgr.getStore(nonPersistentStoreName));
    }
  finally {
      stateMgr.close(Collections.<TopicPartition,Long>emptyMap());
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangeLogOffsets() throws IOException {
  File baseDir=Files.createTempDirectory(stateDir).toFile();
  try {
    long lastCheckpointedOffset=10L;
    String storeName1="store1";
    String storeName2="store2";
    String storeName3="store3";
    String storeTopicName1=ProcessorStateManager.storeChangelogTopic(jobId,storeName1);
    String storeTopicName2=ProcessorStateManager.storeChangelogTopic(jobId,storeName2);
    String storeTopicName3=ProcessorStateManager.storeChangelogTopic(jobId,storeName3);
    OffsetCheckpoint checkpoint=new OffsetCheckpoint(new File(baseDir,ProcessorStateManager.CHECKPOINT_FILE_NAME));
    checkpoint.write(Collections.singletonMap(new TopicPartition(storeTopicName1,0),lastCheckpointedOffset));
    MockRestoreConsumer restoreConsumer=new MockRestoreConsumer();
    restoreConsumer.updatePartitions(storeTopicName1,Utils.mkList(new PartitionInfo(storeTopicName1,0,Node.noNode(),new Node[0],new Node[0])));
    restoreConsumer.updatePartitions(storeTopicName2,Utils.mkList(new PartitionInfo(storeTopicName2,0,Node.noNode(),new Node[0],new Node[0])));
    restoreConsumer.updatePartitions(storeTopicName3,Utils.mkList(new PartitionInfo(storeTopicName3,0,Node.noNode(),new Node[0],new Node[0]),new PartitionInfo(storeTopicName3,1,Node.noNode(),new Node[0],new Node[0])));
    TopicPartition partition1=new TopicPartition(storeTopicName1,0);
    TopicPartition partition2=new TopicPartition(storeTopicName2,0);
    TopicPartition partition3=new TopicPartition(storeTopicName3,1);
    Map<TopicPartition,Long> endOffsets=new HashMap<>();
    endOffsets.put(partition1,13L);
    endOffsets.put(partition2,17L);
    restoreConsumer.updateEndOffsets(endOffsets);
    MockStateStoreSupplier.MockStateStore store1=new MockStateStoreSupplier.MockStateStore(storeName1,true);
    MockStateStoreSupplier.MockStateStore store2=new MockStateStoreSupplier.MockStateStore(storeName2,true);
    MockStateStoreSupplier.MockStateStore store3=new MockStateStoreSupplier.MockStateStore(storeName3,true);
    Set<TopicPartition> sourcePartitions=Utils.mkSet(new TopicPartition(storeTopicName3,1));
    ProcessorStateManager stateMgr=new ProcessorStateManager(jobId,0,sourcePartitions,baseDir,restoreConsumer,true);
    try {
      restoreConsumer.reset();
      stateMgr.register(store1,true,store1.stateRestoreCallback);
      stateMgr.register(store2,true,store2.stateRestoreCallback);
      stateMgr.register(store3,true,store3.stateRestoreCallback);
      Map<TopicPartition,Long> changeLogOffsets=stateMgr.checkpointedOffsets();
      assertEquals(3,changeLogOffsets.size());
      assertTrue(changeLogOffsets.containsKey(partition1));
      assertTrue(changeLogOffsets.containsKey(partition2));
      assertTrue(changeLogOffsets.containsKey(partition3));
      assertEquals(lastCheckpointedOffset,(long)changeLogOffsets.get(partition1));
      assertEquals(-1L,(long)changeLogOffsets.get(partition2));
      assertEquals(-1L,(long)changeLogOffsets.get(partition3));
    }
  finally {
      stateMgr.close(Collections.<TopicPartition,Long>emptyMap());
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.ProcessorTopologyTest </h4><pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTopologyMetadata(){
  final TopologyBuilder builder=new TopologyBuilder();
  builder.addSource("source-1","topic-1");
  builder.addSource("source-2","topic-2","topic-3");
  builder.addProcessor("processor-1",new MockProcessorSupplier<>(),"source-1");
  builder.addProcessor("processor-2",new MockProcessorSupplier<>(),"source-1","source-2");
  builder.addSink("sink-1","topic-3","processor-1");
  builder.addSink("sink-2","topic-4","processor-1","processor-2");
  final ProcessorTopology topology=builder.build(null);
  assertEquals(6,topology.processors().size());
  assertEquals(2,topology.sources().size());
  assertEquals(3,topology.sourceTopics().size());
  assertNotNull(topology.source("topic-1"));
  assertNotNull(topology.source("topic-2"));
  assertNotNull(topology.source("topic-3"));
  assertEquals(topology.source("topic-2"),topology.source("topic-3"));
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDrivingStatefulTopology(){
  String storeName="entries";
  driver=new ProcessorTopologyTestDriver(config,createStatefulTopology(storeName),storeName);
  driver.process(INPUT_TOPIC,"key1","value1",STRING_SERIALIZER,STRING_SERIALIZER);
  driver.process(INPUT_TOPIC,"key2","value2",STRING_SERIALIZER,STRING_SERIALIZER);
  driver.process(INPUT_TOPIC,"key3","value3",STRING_SERIALIZER,STRING_SERIALIZER);
  driver.process(INPUT_TOPIC,"key1","value4",STRING_SERIALIZER,STRING_SERIALIZER);
  assertNoOutputRecord(OUTPUT_TOPIC_1);
  KeyValueStore<String,String> store=driver.getKeyValueStore("entries");
  assertEquals("value4",store.get("key1"));
  assertEquals("value2",store.get("key2"));
  assertEquals("value3",store.get("key3"));
  assertNull(store.get("key4"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.RecordQueueTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTimeTracking(){
  assertTrue(queue.isEmpty());
  List<ConsumerRecord<byte[],byte[]>> list1=Arrays.asList(new ConsumerRecord<>("topic",1,2,recordKey,recordValue),new ConsumerRecord<>("topic",1,1,recordKey,recordValue),new ConsumerRecord<>("topic",1,3,recordKey,recordValue));
  queue.addRawRecords(list1,timestampExtractor);
  assertEquals(3,queue.size());
  assertEquals(TimestampTracker.NOT_KNOWN,queue.timestamp());
  assertEquals(2L,queue.poll().timestamp);
  assertEquals(2,queue.size());
  assertEquals(1L,queue.timestamp());
  assertEquals(1L,queue.poll().timestamp);
  assertEquals(1,queue.size());
  assertEquals(3L,queue.timestamp());
  List<ConsumerRecord<byte[],byte[]>> list2=Arrays.asList(new ConsumerRecord<>("topic",1,4,recordKey,recordValue),new ConsumerRecord<>("topic",1,1,recordKey,recordValue),new ConsumerRecord<>("topic",1,2,recordKey,recordValue));
  queue.addRawRecords(list2,timestampExtractor);
  assertEquals(4,queue.size());
  assertEquals(3L,queue.timestamp());
  assertEquals(3L,queue.poll().timestamp);
  assertEquals(3,queue.size());
  assertEquals(3L,queue.timestamp());
  assertEquals(4L,queue.poll().timestamp);
  assertEquals(3L,queue.timestamp());
  assertEquals(1L,queue.poll().timestamp);
  assertEquals(3L,queue.timestamp());
  assertEquals(2L,queue.poll().timestamp);
  assertEquals(0,queue.size());
  assertEquals(3L,queue.timestamp());
  List<ConsumerRecord<byte[],byte[]>> list3=Arrays.asList(new ConsumerRecord<>("topic",1,4,recordKey,recordValue),new ConsumerRecord<>("topic",1,5,recordKey,recordValue),new ConsumerRecord<>("topic",1,6,recordKey,recordValue));
  queue.addRawRecords(list3,timestampExtractor);
  assertEquals(3,queue.size());
  assertEquals(3L,queue.timestamp());
  assertEquals(4L,queue.poll().timestamp);
  assertEquals(2,queue.size());
  assertEquals(5L,queue.timestamp());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.StandbyTaskTest </h4><pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testUpdateKTable() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    consumer.assign(Utils.mkList(ktable));
    Map<TopicPartition,OffsetAndMetadata> committedOffsets=new HashMap<>();
    committedOffsets.put(new TopicPartition(ktable.topic(),ktable.partition()),new OffsetAndMetadata(0L));
    consumer.commitSync(committedOffsets);
    restoreStateConsumer.updatePartitions("ktable1",Utils.mkList(new PartitionInfo("ktable1",0,Node.noNode(),new Node[0],new Node[0]),new PartitionInfo("ktable1",1,Node.noNode(),new Node[0],new Node[0]),new PartitionInfo("ktable1",2,Node.noNode(),new Node[0],new Node[0])));
    StreamsConfig config=createConfig(baseDir);
    StandbyTask task=new StandbyTask(taskId,jobId,ktablePartitions,ktableTopology,consumer,restoreStateConsumer,config,null);
    restoreStateConsumer.assign(new ArrayList<>(task.changeLogPartitions()));
    for (    ConsumerRecord<Integer,Integer> record : Arrays.asList(new ConsumerRecord<>(ktable.topic(),ktable.partition(),10,1,100),new ConsumerRecord<>(ktable.topic(),ktable.partition(),20,2,100),new ConsumerRecord<>(ktable.topic(),ktable.partition(),30,3,100),new ConsumerRecord<>(ktable.topic(),ktable.partition(),40,4,100),new ConsumerRecord<>(ktable.topic(),ktable.partition(),50,5,100))) {
      restoreStateConsumer.bufferRecord(record);
    }
    for (    Map.Entry<TopicPartition,Long> entry : task.checkpointedOffsets().entrySet()) {
      TopicPartition partition=entry.getKey();
      long offset=entry.getValue();
      if (offset >= 0) {
        restoreStateConsumer.seek(partition,offset);
      }
 else {
        restoreStateConsumer.seekToBeginning(partition);
      }
    }
    List<ConsumerRecord<byte[],byte[]>> remaining=task.update(ktable,restoreStateConsumer.poll(100).records(ktable));
    assertEquals(5,remaining.size());
    committedOffsets.put(new TopicPartition(ktable.topic(),ktable.partition()),new OffsetAndMetadata(10L));
    consumer.commitSync(committedOffsets);
    task.commit();
    remaining=task.update(ktable,remaining);
    assertEquals(5,remaining.size());
    committedOffsets.put(new TopicPartition(ktable.topic(),ktable.partition()),new OffsetAndMetadata(11L));
    consumer.commitSync(committedOffsets);
    task.commit();
    remaining=task.update(ktable,remaining);
    assertEquals(4,remaining.size());
    committedOffsets.put(new TopicPartition(ktable.topic(),ktable.partition()),new OffsetAndMetadata(45L));
    consumer.commitSync(committedOffsets);
    task.commit();
    remaining=task.update(ktable,remaining);
    assertEquals(1,remaining.size());
    committedOffsets.put(new TopicPartition(ktable.topic(),ktable.partition()),new OffsetAndMetadata(50L));
    consumer.commitSync(committedOffsets);
    task.commit();
    remaining=task.update(ktable,remaining);
    assertEquals(1,remaining.size());
    committedOffsets.put(new TopicPartition(ktable.topic(),ktable.partition()),new OffsetAndMetadata(60L));
    consumer.commitSync(committedOffsets);
    task.commit();
    remaining=task.update(ktable,remaining);
    assertNull(remaining);
    task.close();
    File taskDir=new File(StreamThread.makeStateDir(jobId,baseDir.getCanonicalPath()),taskId.toString());
    OffsetCheckpoint checkpoint=new OffsetCheckpoint(new File(taskDir,ProcessorStateManager.CHECKPOINT_FILE_NAME));
    Map<TopicPartition,Long> offsets=checkpoint.read();
    assertEquals(1,offsets.size());
    assertEquals(new Long(51L),offsets.get(ktable));
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.StreamTaskTest </h4><pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testPauseResume() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    StreamsConfig config=createConfig(baseDir);
    StreamTask task=new StreamTask(new TaskId(1,1),"jobId",partitions,topology,consumer,producer,restoreStateConsumer,config,null);
    task.addRecords(partition1,records(new ConsumerRecord<>(partition1.topic(),partition1.partition(),10,recordKey,recordValue),new ConsumerRecord<>(partition1.topic(),partition1.partition(),20,recordKey,recordValue)));
    task.addRecords(partition2,records(new ConsumerRecord<>(partition2.topic(),partition2.partition(),35,recordKey,recordValue),new ConsumerRecord<>(partition2.topic(),partition2.partition(),45,recordKey,recordValue),new ConsumerRecord<>(partition2.topic(),partition2.partition(),55,recordKey,recordValue),new ConsumerRecord<>(partition2.topic(),partition2.partition(),65,recordKey,recordValue)));
    assertEquals(5,task.process());
    assertEquals(1,source1.numReceived);
    assertEquals(0,source2.numReceived);
    assertEquals(1,consumer.paused().size());
    assertTrue(consumer.paused().contains(partition2));
    task.addRecords(partition1,records(new ConsumerRecord<>(partition1.topic(),partition1.partition(),30,recordKey,recordValue),new ConsumerRecord<>(partition1.topic(),partition1.partition(),40,recordKey,recordValue),new ConsumerRecord<>(partition1.topic(),partition1.partition(),50,recordKey,recordValue)));
    assertEquals(2,consumer.paused().size());
    assertTrue(consumer.paused().contains(partition1));
    assertTrue(consumer.paused().contains(partition2));
    assertEquals(7,task.process());
    assertEquals(1,source1.numReceived);
    assertEquals(1,source2.numReceived);
    assertEquals(1,consumer.paused().size());
    assertTrue(consumer.paused().contains(partition1));
    assertEquals(6,task.process());
    assertEquals(2,source1.numReceived);
    assertEquals(1,source2.numReceived);
    assertEquals(0,consumer.paused().size());
    task.close();
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.StreamThreadTest </h4><pre class="type-8 type-9 type-7 type-3 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testPartitionAssignmentChange() throws Exception {
  StreamsConfig config=new StreamsConfig(configProps());
  MockProducer<byte[],byte[]> producer=new MockProducer<>(true,serializer,serializer);
  MockConsumer<byte[],byte[]> consumer=new MockConsumer<>(OffsetResetStrategy.EARLIEST);
  final MockConsumer<byte[],byte[]> mockRestoreConsumer=new MockConsumer<>(OffsetResetStrategy.LATEST);
  TopologyBuilder builder=new TopologyBuilder();
  builder.addSource("source1","topic1");
  builder.addSource("source2","topic2");
  builder.addSource("source3","topic3");
  builder.addProcessor("processor",new MockProcessorSupplier(),"source2","source3");
  StreamThread thread=new StreamThread(builder,config,producer,consumer,mockRestoreConsumer,jobId,clientId,processId,new Metrics(),new SystemTime()){
    @Override protected StreamTask createStreamTask(    TaskId id,    Collection<TopicPartition> partitionsForTask){
      ProcessorTopology topology=builder.build(id.topicGroupId);
      return new TestStreamTask(id,jobId,partitionsForTask,topology,consumer,producer,mockRestoreConsumer,config);
    }
  }
;
  initPartitionGrouper(config,thread);
  ConsumerRebalanceListener rebalanceListener=thread.rebalanceListener;
  assertTrue(thread.tasks().isEmpty());
  List<TopicPartition> revokedPartitions;
  List<TopicPartition> assignedPartitions;
  Set<TopicPartition> expectedGroup1;
  Set<TopicPartition> expectedGroup2;
  revokedPartitions=Collections.emptyList();
  assignedPartitions=Collections.singletonList(t1p1);
  expectedGroup1=new HashSet<>(Arrays.asList(t1p1));
  rebalanceListener.onPartitionsRevoked(revokedPartitions);
  rebalanceListener.onPartitionsAssigned(assignedPartitions);
  assertTrue(thread.tasks().containsKey(task1));
  assertEquals(expectedGroup1,thread.tasks().get(task1).partitions());
  assertEquals(1,thread.tasks().size());
  revokedPartitions=assignedPartitions;
  assignedPartitions=Collections.singletonList(t1p2);
  expectedGroup2=new HashSet<>(Arrays.asList(t1p2));
  rebalanceListener.onPartitionsRevoked(revokedPartitions);
  rebalanceListener.onPartitionsAssigned(assignedPartitions);
  assertTrue(thread.tasks().containsKey(task2));
  assertEquals(expectedGroup2,thread.tasks().get(task2).partitions());
  assertEquals(1,thread.tasks().size());
  revokedPartitions=assignedPartitions;
  assignedPartitions=Arrays.asList(t1p1,t1p2);
  expectedGroup1=new HashSet<>(Collections.singleton(t1p1));
  expectedGroup2=new HashSet<>(Collections.singleton(t1p2));
  rebalanceListener.onPartitionsRevoked(revokedPartitions);
  rebalanceListener.onPartitionsAssigned(assignedPartitions);
  assertTrue(thread.tasks().containsKey(task1));
  assertTrue(thread.tasks().containsKey(task2));
  assertEquals(expectedGroup1,thread.tasks().get(task1).partitions());
  assertEquals(expectedGroup2,thread.tasks().get(task2).partitions());
  assertEquals(2,thread.tasks().size());
  revokedPartitions=assignedPartitions;
  assignedPartitions=Arrays.asList(t2p1,t2p2,t3p1,t3p2);
  expectedGroup1=new HashSet<>(Arrays.asList(t2p1,t3p1));
  expectedGroup2=new HashSet<>(Arrays.asList(t2p2,t3p2));
  rebalanceListener.onPartitionsRevoked(revokedPartitions);
  rebalanceListener.onPartitionsAssigned(assignedPartitions);
  assertTrue(thread.tasks().containsKey(task4));
  assertTrue(thread.tasks().containsKey(task5));
  assertEquals(expectedGroup1,thread.tasks().get(task4).partitions());
  assertEquals(expectedGroup2,thread.tasks().get(task5).partitions());
  assertEquals(2,thread.tasks().size());
  revokedPartitions=assignedPartitions;
  assignedPartitions=Arrays.asList(t1p1,t2p1,t3p1);
  expectedGroup1=new HashSet<>(Arrays.asList(t1p1));
  expectedGroup2=new HashSet<>(Arrays.asList(t2p1,t3p1));
  rebalanceListener.onPartitionsRevoked(revokedPartitions);
  rebalanceListener.onPartitionsAssigned(assignedPartitions);
  assertTrue(thread.tasks().containsKey(task1));
  assertTrue(thread.tasks().containsKey(task4));
  assertEquals(expectedGroup1,thread.tasks().get(task1).partitions());
  assertEquals(expectedGroup2,thread.tasks().get(task4).partitions());
  assertEquals(2,thread.tasks().size());
  revokedPartitions=assignedPartitions;
  assignedPartitions=Collections.emptyList();
  rebalanceListener.onPartitionsRevoked(revokedPartitions);
  rebalanceListener.onPartitionsAssigned(assignedPartitions);
  assertTrue(thread.tasks().isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMaybeCommit() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    final long commitInterval=1000L;
    Properties props=configProps();
    props.setProperty(StreamsConfig.STATE_DIR_CONFIG,baseDir.getCanonicalPath());
    props.setProperty(StreamsConfig.COMMIT_INTERVAL_MS_CONFIG,Long.toString(commitInterval));
    StreamsConfig config=new StreamsConfig(props);
    MockProducer<byte[],byte[]> producer=new MockProducer<>(true,serializer,serializer);
    MockConsumer<byte[],byte[]> consumer=new MockConsumer<>(OffsetResetStrategy.EARLIEST);
    final MockConsumer<byte[],byte[]> mockRestoreConsumer=new MockConsumer<>(OffsetResetStrategy.EARLIEST);
    MockTime mockTime=new MockTime();
    TopologyBuilder builder=new TopologyBuilder();
    builder.addSource("source1","topic1");
    StreamThread thread=new StreamThread(builder,config,producer,consumer,mockRestoreConsumer,jobId,clientId,processId,new Metrics(),mockTime){
      @Override public void maybeCommit(){
        super.maybeCommit();
      }
      @Override protected StreamTask createStreamTask(      TaskId id,      Collection<TopicPartition> partitionsForTask){
        ProcessorTopology topology=builder.build(id.topicGroupId);
        return new TestStreamTask(id,jobId,partitionsForTask,topology,consumer,producer,mockRestoreConsumer,config);
      }
    }
;
    initPartitionGrouper(config,thread);
    ConsumerRebalanceListener rebalanceListener=thread.rebalanceListener;
    List<TopicPartition> revokedPartitions;
    List<TopicPartition> assignedPartitions;
    revokedPartitions=Collections.emptyList();
    assignedPartitions=Arrays.asList(t1p1,t1p2);
    rebalanceListener.onPartitionsRevoked(revokedPartitions);
    rebalanceListener.onPartitionsAssigned(assignedPartitions);
    assertEquals(2,thread.tasks().size());
    mockTime.sleep(commitInterval - 10L);
    thread.maybeCommit();
    for (    StreamTask task : thread.tasks().values()) {
      assertFalse(((TestStreamTask)task).committed);
    }
    mockTime.sleep(11L);
    thread.maybeCommit();
    for (    StreamTask task : thread.tasks().values()) {
      assertTrue(((TestStreamTask)task).committed);
      ((TestStreamTask)task).committed=false;
    }
    mockTime.sleep(commitInterval - 10L);
    thread.maybeCommit();
    for (    StreamTask task : thread.tasks().values()) {
      assertFalse(((TestStreamTask)task).committed);
    }
    mockTime.sleep(11L);
    thread.maybeCommit();
    for (    StreamTask task : thread.tasks().values()) {
      assertTrue(((TestStreamTask)task).committed);
      ((TestStreamTask)task).committed=false;
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-3 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMaybeClean() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    final long cleanupDelay=1000L;
    Properties props=configProps();
    props.setProperty(StreamsConfig.STATE_CLEANUP_DELAY_MS_CONFIG,Long.toString(cleanupDelay));
    props.setProperty(StreamsConfig.STATE_DIR_CONFIG,baseDir.getCanonicalPath());
    StreamsConfig config=new StreamsConfig(props);
    File jobDir=new File(baseDir,jobId);
    jobDir.mkdir();
    File stateDir1=new File(jobDir,task1.toString());
    File stateDir2=new File(jobDir,task2.toString());
    File stateDir3=new File(jobDir,task3.toString());
    File extraDir=new File(jobDir,"X");
    stateDir1.mkdir();
    stateDir2.mkdir();
    stateDir3.mkdir();
    extraDir.mkdir();
    MockProducer<byte[],byte[]> producer=new MockProducer<>(true,serializer,serializer);
    MockConsumer<byte[],byte[]> consumer=new MockConsumer<>(OffsetResetStrategy.EARLIEST);
    final MockConsumer<byte[],byte[]> mockRestoreConsumer=new MockConsumer<>(OffsetResetStrategy.LATEST);
    MockTime mockTime=new MockTime();
    TopologyBuilder builder=new TopologyBuilder();
    builder.addSource("source1","topic1");
    StreamThread thread=new StreamThread(builder,config,producer,consumer,mockRestoreConsumer,jobId,clientId,processId,new Metrics(),mockTime){
      @Override public void maybeClean(){
        super.maybeClean();
      }
      @Override protected StreamTask createStreamTask(      TaskId id,      Collection<TopicPartition> partitionsForTask){
        ProcessorTopology topology=builder.build(id.topicGroupId);
        return new TestStreamTask(id,jobId,partitionsForTask,topology,consumer,producer,mockRestoreConsumer,config);
      }
    }
;
    initPartitionGrouper(config,thread);
    ConsumerRebalanceListener rebalanceListener=thread.rebalanceListener;
    assertTrue(thread.tasks().isEmpty());
    mockTime.sleep(cleanupDelay);
    assertTrue(stateDir1.exists());
    assertTrue(stateDir2.exists());
    assertTrue(stateDir3.exists());
    assertTrue(extraDir.exists());
    List<TopicPartition> revokedPartitions;
    List<TopicPartition> assignedPartitions;
    Map<Integer,StreamTask> prevTasks;
    revokedPartitions=Collections.emptyList();
    assignedPartitions=Arrays.asList(t1p1,t1p2);
    prevTasks=new HashMap(thread.tasks());
    rebalanceListener.onPartitionsRevoked(revokedPartitions);
    rebalanceListener.onPartitionsAssigned(assignedPartitions);
    assertTrue(prevTasks.isEmpty());
    assertEquals(2,thread.tasks().size());
    mockTime.sleep(cleanupDelay - 10L);
    thread.maybeClean();
    assertTrue(stateDir1.exists());
    assertTrue(stateDir2.exists());
    assertTrue(stateDir3.exists());
    assertTrue(extraDir.exists());
    mockTime.sleep(11L);
    thread.maybeClean();
    assertTrue(stateDir1.exists());
    assertTrue(stateDir2.exists());
    assertFalse(stateDir3.exists());
    assertTrue(extraDir.exists());
    revokedPartitions=assignedPartitions;
    assignedPartitions=Collections.emptyList();
    prevTasks=new HashMap(thread.tasks());
    rebalanceListener.onPartitionsRevoked(revokedPartitions);
    rebalanceListener.onPartitionsAssigned(assignedPartitions);
    assertEquals(2,prevTasks.size());
    for (    StreamTask task : prevTasks.values()) {
      assertTrue(((TestStreamTask)task).committed);
      ((TestStreamTask)task).committed=false;
    }
    assertTrue(thread.tasks().isEmpty());
    mockTime.sleep(cleanupDelay - 10L);
    thread.maybeClean();
    assertTrue(stateDir1.exists());
    assertTrue(stateDir2.exists());
    assertFalse(stateDir3.exists());
    assertTrue(extraDir.exists());
    mockTime.sleep(11L);
    thread.maybeClean();
    assertFalse(stateDir1.exists());
    assertFalse(stateDir2.exists());
    assertFalse(stateDir3.exists());
    assertTrue(extraDir.exists());
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.assignment.TaskAssignorTest </h4><pre class="type-8 type-9 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStickiness(){
  List<Integer> tasks;
  Map<Integer,ClientState<Integer>> states;
  Map<Integer,ClientState<Integer>> assignments;
  int i;
  tasks=mkList(0,1,2,3,4,5);
  Collections.shuffle(tasks);
  states=new HashMap<>();
  i=0;
  for (  int task : tasks) {
    ClientState<Integer> state=new ClientState<>(1d);
    state.prevActiveTasks.add(task);
    state.prevAssignedTasks.add(task);
    states.put(i++,state);
  }
  assignments=TaskAssignor.assign(states,mkSet(0,1,2,3,4,5),0);
  for (  int client : states.keySet()) {
    Set<Integer> oldActive=states.get(client).prevActiveTasks;
    Set<Integer> oldAssigned=states.get(client).prevAssignedTasks;
    Set<Integer> newActive=assignments.get(client).activeTasks;
    Set<Integer> newAssigned=assignments.get(client).assignedTasks;
    assertEquals(oldActive,newActive);
    assertEquals(oldAssigned,newAssigned);
  }
  tasks=mkList(0,1,2,3,-1,-1);
  Collections.shuffle(tasks);
  states=new HashMap<>();
  i=0;
  for (  int task : tasks) {
    ClientState<Integer> state=new ClientState<>(1d);
    if (task >= 0) {
      state.prevActiveTasks.add(task);
      state.prevAssignedTasks.add(task);
    }
    states.put(i++,state);
  }
  assignments=TaskAssignor.assign(states,mkSet(0,1,2,3),0);
  for (  int client : states.keySet()) {
    Set<Integer> oldActive=states.get(client).prevActiveTasks;
    Set<Integer> oldAssigned=states.get(client).prevAssignedTasks;
    Set<Integer> newActive=assignments.get(client).activeTasks;
    Set<Integer> newAssigned=assignments.get(client).assignedTasks;
    assertEquals(oldActive,newActive);
    assertEquals(oldAssigned,newAssigned);
  }
  List<Set<Integer>> taskSets=mkList(mkSet(0,1),mkSet(2,3),mkSet(4,5),mkSet(6,7),mkSet(8,9),mkSet(10,11));
  Collections.shuffle(taskSets);
  states=new HashMap<>();
  i=0;
  for (  Set<Integer> taskSet : taskSets) {
    ClientState<Integer> state=new ClientState<>(1d);
    state.prevActiveTasks.addAll(taskSet);
    state.prevAssignedTasks.addAll(taskSet);
    states.put(i++,state);
  }
  assignments=TaskAssignor.assign(states,mkSet(0,1,2,3,4,5,6,7,8,9,10,11),0);
  for (  int client : states.keySet()) {
    Set<Integer> oldActive=states.get(client).prevActiveTasks;
    Set<Integer> oldAssigned=states.get(client).prevAssignedTasks;
    Set<Integer> newActive=assignments.get(client).activeTasks;
    Set<Integer> newAssigned=assignments.get(client).assignedTasks;
    Set<Integer> intersection=new HashSet<>();
    intersection.addAll(oldActive);
    intersection.retainAll(newActive);
    assertTrue(intersection.size() > 0);
    intersection.clear();
    intersection.addAll(oldAssigned);
    intersection.retainAll(newAssigned);
    assertTrue(intersection.size() > 0);
  }
}

</code></pre>

<br>
<pre class="type-9 type-3 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAssignWithStandby(){
  HashMap<Integer,ClientState<Integer>> states=new HashMap<>();
  for (int i=0; i < 6; i++) {
    states.put(i,new ClientState<Integer>(1d));
  }
  Set<Integer> tasks;
  Map<Integer,ClientState<Integer>> assignments;
  int numActiveTasks;
  int numAssignedTasks;
  tasks=mkSet(0,1,2,3,4,5);
  numActiveTasks=0;
  numAssignedTasks=0;
  assignments=TaskAssignor.assign(states,tasks,1);
  for (  ClientState<Integer> assignment : assignments.values()) {
    numActiveTasks+=assignment.activeTasks.size();
    numAssignedTasks+=assignment.assignedTasks.size();
    assertEquals(1,assignment.activeTasks.size());
    assertEquals(2,assignment.assignedTasks.size());
  }
  assertEquals(tasks.size(),numActiveTasks);
  assertEquals(tasks.size() * 2,numAssignedTasks);
  tasks=mkSet(0,1,2,3,4,5,6,7);
  assignments=TaskAssignor.assign(states,tasks,1);
  numActiveTasks=0;
  numAssignedTasks=0;
  for (  ClientState<Integer> assignment : assignments.values()) {
    numActiveTasks+=assignment.activeTasks.size();
    numAssignedTasks+=assignment.assignedTasks.size();
    assertTrue(1 <= assignment.activeTasks.size());
    assertTrue(2 >= assignment.activeTasks.size());
    assertTrue(2 <= assignment.assignedTasks.size());
    assertTrue(3 >= assignment.assignedTasks.size());
  }
  assertEquals(tasks.size(),numActiveTasks);
  assertEquals(tasks.size() * 2,numAssignedTasks);
  tasks=mkSet(0,1,2,3);
  assignments=TaskAssignor.assign(states,tasks,1);
  numActiveTasks=0;
  numAssignedTasks=0;
  for (  ClientState<Integer> assignment : assignments.values()) {
    numActiveTasks+=assignment.activeTasks.size();
    numAssignedTasks+=assignment.assignedTasks.size();
    assertTrue(0 <= assignment.activeTasks.size());
    assertTrue(1 >= assignment.activeTasks.size());
    assertTrue(1 <= assignment.assignedTasks.size());
    assertTrue(2 >= assignment.assignedTasks.size());
  }
  assertEquals(tasks.size(),numActiveTasks);
  assertEquals(tasks.size() * 2,numAssignedTasks);
  tasks=mkSet(0,1);
  assignments=TaskAssignor.assign(states,tasks,1);
  numActiveTasks=0;
  numAssignedTasks=0;
  for (  ClientState<Integer> assignment : assignments.values()) {
    numActiveTasks+=assignment.activeTasks.size();
    numAssignedTasks+=assignment.assignedTasks.size();
    assertTrue(0 <= assignment.activeTasks.size());
    assertTrue(1 >= assignment.activeTasks.size());
    assertTrue(0 <= assignment.assignedTasks.size());
    assertTrue(1 >= assignment.assignedTasks.size());
  }
  assertEquals(tasks.size(),numActiveTasks);
  assertEquals(tasks.size() * 2,numAssignedTasks);
  assignments=TaskAssignor.assign(states,tasks,2);
  numActiveTasks=0;
  numAssignedTasks=0;
  for (  ClientState<Integer> assignment : assignments.values()) {
    numActiveTasks+=assignment.activeTasks.size();
    numAssignedTasks+=assignment.assignedTasks.size();
    assertTrue(0 <= assignment.activeTasks.size());
    assertTrue(1 >= assignment.activeTasks.size());
    assertTrue(1 == assignment.assignedTasks.size());
  }
  assertEquals(tasks.size(),numActiveTasks);
  assertEquals(tasks.size() * 3,numAssignedTasks);
  assignments=TaskAssignor.assign(states,tasks,3);
  numActiveTasks=0;
  numAssignedTasks=0;
  for (  ClientState<Integer> assignment : assignments.values()) {
    numActiveTasks+=assignment.activeTasks.size();
    numAssignedTasks+=assignment.assignedTasks.size();
    assertTrue(0 <= assignment.activeTasks.size());
    assertTrue(1 >= assignment.activeTasks.size());
    assertTrue(1 <= assignment.assignedTasks.size());
    assertTrue(2 >= assignment.assignedTasks.size());
  }
  assertEquals(tasks.size(),numActiveTasks);
  assertEquals(tasks.size() * 4,numAssignedTasks);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAssignWithoutStandby(){
  HashMap<Integer,ClientState<Integer>> states=new HashMap<>();
  for (int i=0; i < 6; i++) {
    states.put(i,new ClientState<Integer>(1d));
  }
  Set<Integer> tasks;
  Map<Integer,ClientState<Integer>> assignments;
  int numActiveTasks;
  int numAssignedTasks;
  tasks=mkSet(0,1,2,3,4,5);
  assignments=TaskAssignor.assign(states,tasks,0);
  numActiveTasks=0;
  numAssignedTasks=0;
  for (  ClientState<Integer> assignment : assignments.values()) {
    numActiveTasks+=assignment.activeTasks.size();
    numAssignedTasks+=assignment.assignedTasks.size();
    assertEquals(1,assignment.activeTasks.size());
    assertEquals(1,assignment.assignedTasks.size());
  }
  assertEquals(tasks.size(),numActiveTasks);
  assertEquals(tasks.size(),numAssignedTasks);
  tasks=mkSet(0,1,2,3,4,5,6,7);
  assignments=TaskAssignor.assign(states,tasks,0);
  numActiveTasks=0;
  numAssignedTasks=0;
  for (  ClientState<Integer> assignment : assignments.values()) {
    numActiveTasks+=assignment.activeTasks.size();
    numAssignedTasks+=assignment.assignedTasks.size();
    assertTrue(1 <= assignment.activeTasks.size());
    assertTrue(2 >= assignment.activeTasks.size());
    assertTrue(1 <= assignment.assignedTasks.size());
    assertTrue(2 >= assignment.assignedTasks.size());
  }
  assertEquals(tasks.size(),numActiveTasks);
  assertEquals(tasks.size(),numAssignedTasks);
  tasks=mkSet(0,1,2,3);
  assignments=TaskAssignor.assign(states,tasks,0);
  numActiveTasks=0;
  numAssignedTasks=0;
  for (  ClientState<Integer> assignment : assignments.values()) {
    numActiveTasks+=assignment.activeTasks.size();
    numAssignedTasks+=assignment.assignedTasks.size();
    assertTrue(0 <= assignment.activeTasks.size());
    assertTrue(1 >= assignment.activeTasks.size());
    assertTrue(0 <= assignment.assignedTasks.size());
    assertTrue(1 >= assignment.assignedTasks.size());
  }
  assertEquals(tasks.size(),numActiveTasks);
  assertEquals(tasks.size(),numAssignedTasks);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.state.internals.AbstractKeyValueStoreTest </h4><pre class="type-13 type-14 type-10 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutGetRange(){
  KeyValueStoreTestDriver<Integer,String> driver=KeyValueStoreTestDriver.create(Integer.class,String.class);
  KeyValueStore<Integer,String> store=createKeyValueStore(driver.context(),Integer.class,String.class,false);
  try {
    store.put(0,"zero");
    store.put(1,"one");
    store.put(2,"two");
    store.put(4,"four");
    store.put(5,"five");
    assertEquals(5,driver.sizeOf(store));
    assertEquals("zero",store.get(0));
    assertEquals("one",store.get(1));
    assertEquals("two",store.get(2));
    assertNull(store.get(3));
    assertEquals("four",store.get(4));
    assertEquals("five",store.get(5));
    store.delete(5);
    store.flush();
    assertEquals("zero",driver.flushedEntryStored(0));
    assertEquals("one",driver.flushedEntryStored(1));
    assertEquals("two",driver.flushedEntryStored(2));
    assertEquals("four",driver.flushedEntryStored(4));
    assertEquals(null,driver.flushedEntryStored(5));
    assertEquals(false,driver.flushedEntryRemoved(0));
    assertEquals(false,driver.flushedEntryRemoved(1));
    assertEquals(false,driver.flushedEntryRemoved(2));
    assertEquals(false,driver.flushedEntryRemoved(4));
    assertEquals(true,driver.flushedEntryRemoved(5));
    try (KeyValueIterator<Integer,String> iter=store.range(2,4)){
      while (iter.hasNext()) {
        KeyValue<Integer,String> entry=iter.next();
        if (entry.key.equals(2))         assertEquals("two",entry.value);
 else         if (entry.key.equals(4))         assertEquals("four",entry.value);
 else         fail("Unexpected entry: " + entry);
      }
    }
     try (KeyValueIterator<Integer,String> iter=store.range(2,6)){
      while (iter.hasNext()) {
        KeyValue<Integer,String> entry=iter.next();
        if (entry.key.equals(2))         assertEquals("two",entry.value);
 else         if (entry.key.equals(4))         assertEquals("four",entry.value);
 else         fail("Unexpected entry: " + entry);
      }
    }
   }
  finally {
    store.close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutGetRangeWithDefaultSerdes(){
  KeyValueStoreTestDriver<Integer,String> driver=KeyValueStoreTestDriver.create(Integer.class,String.class);
  KeyValueStore<Integer,String> store=createKeyValueStore(driver.context(),Integer.class,String.class,true);
  try {
    store.put(0,"zero");
    store.put(1,"one");
    store.put(2,"two");
    store.put(4,"four");
    store.put(5,"five");
    assertEquals(5,driver.sizeOf(store));
    assertEquals("zero",store.get(0));
    assertEquals("one",store.get(1));
    assertEquals("two",store.get(2));
    assertNull(store.get(3));
    assertEquals("four",store.get(4));
    assertEquals("five",store.get(5));
    store.delete(5);
    store.flush();
    assertEquals("zero",driver.flushedEntryStored(0));
    assertEquals("one",driver.flushedEntryStored(1));
    assertEquals("two",driver.flushedEntryStored(2));
    assertEquals("four",driver.flushedEntryStored(4));
    assertEquals(null,driver.flushedEntryStored(5));
    assertEquals(false,driver.flushedEntryRemoved(0));
    assertEquals(false,driver.flushedEntryRemoved(1));
    assertEquals(false,driver.flushedEntryRemoved(2));
    assertEquals(false,driver.flushedEntryRemoved(4));
    assertEquals(true,driver.flushedEntryRemoved(5));
  }
  finally {
    store.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.state.internals.InMemoryLRUCacheStoreTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEvict(){
  KeyValueStoreTestDriver<Integer,String> driver=KeyValueStoreTestDriver.create(Integer.class,String.class);
  KeyValueStore<Integer,String> store=createKeyValueStore(driver.context(),Integer.class,String.class,false);
  try {
    store.put(0,"zero");
    store.put(1,"one");
    store.put(2,"two");
    store.put(3,"three");
    store.put(4,"four");
    store.put(5,"five");
    store.put(6,"six");
    store.put(7,"seven");
    store.put(8,"eight");
    store.put(9,"nine");
    assertEquals(10,driver.sizeOf(store));
    store.put(10,"ten");
    store.flush();
    assertEquals(10,driver.sizeOf(store));
    assertTrue(driver.flushedEntryRemoved(0));
    assertEquals(1,driver.numFlushedEntryRemoved());
    store.delete(1);
    store.flush();
    assertEquals(9,driver.sizeOf(store));
    assertTrue(driver.flushedEntryRemoved(0));
    assertTrue(driver.flushedEntryRemoved(1));
    assertEquals(2,driver.numFlushedEntryRemoved());
    store.put(11,"eleven");
    store.flush();
    assertEquals(10,driver.sizeOf(store));
    assertEquals(2,driver.numFlushedEntryRemoved());
    store.put(2,"two-again");
    store.flush();
    assertEquals(10,driver.sizeOf(store));
    assertEquals(2,driver.numFlushedEntryRemoved());
    store.put(12,"twelve");
    store.flush();
    assertEquals(10,driver.sizeOf(store));
    assertTrue(driver.flushedEntryRemoved(0));
    assertTrue(driver.flushedEntryRemoved(1));
    assertTrue(driver.flushedEntryRemoved(2));
    assertEquals(3,driver.numFlushedEntryRemoved());
  }
  finally {
    store.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.state.internals.OffsetCheckpointTest </h4><pre class="type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadWrite() throws IOException {
  File f=TestUtils.tempFile();
  OffsetCheckpoint checkpoint=new OffsetCheckpoint(f);
  try {
    Map<TopicPartition,Long> offsets=new HashMap<>();
    offsets.put(new TopicPartition(topic,0),0L);
    offsets.put(new TopicPartition(topic,1),1L);
    offsets.put(new TopicPartition(topic,2),2L);
    checkpoint.write(offsets);
    assertEquals(offsets,checkpoint.read());
    checkpoint.delete();
    assertFalse(f.exists());
    offsets.put(new TopicPartition(topic,3),3L);
    checkpoint.write(offsets);
    assertEquals(offsets,checkpoint.read());
  }
  finally {
    checkpoint.delete();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.state.internals.RocksDBWindowStoreTest </h4><pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutAndFetch() throws IOException {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    final List<KeyValue<byte[],byte[]>> changeLog=new ArrayList<>();
    Producer<byte[],byte[]> producer=new MockProducer<>(true,byteArraySerializer,byteArraySerializer);
    RecordCollector recordCollector=new RecordCollector(producer){
      @Override public <K1,V1>void send(      ProducerRecord<K1,V1> record,      Serializer<K1> keySerializer,      Serializer<V1> valueSerializer){
        changeLog.add(new KeyValue<>(keySerializer.serialize(record.topic(),record.key()),valueSerializer.serialize(record.topic(),record.value())));
      }
    }
;
    MockProcessorContext context=new MockProcessorContext(null,baseDir,byteArraySerializer,byteArrayDeserializer,byteArraySerializer,byteArrayDeserializer,recordCollector);
    WindowStore<Integer,String> store=createWindowStore(context,serdes);
    try {
      long startTime=segmentSize - 4L;
      context.setTime(startTime + 0L);
      store.put(0,"zero");
      context.setTime(startTime + 1L);
      store.put(1,"one");
      context.setTime(startTime + 2L);
      store.put(2,"two");
      context.setTime(startTime + 3L);
      context.setTime(startTime + 4L);
      store.put(4,"four");
      context.setTime(startTime + 5L);
      store.put(5,"five");
      assertEquals(Utils.mkList("zero"),toList(store.fetch(0,startTime + 0L - windowSize,startTime + 0L + windowSize)));
      assertEquals(Utils.mkList("one"),toList(store.fetch(1,startTime + 1L - windowSize,startTime + 1L + windowSize)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime + 2L - windowSize,startTime + 2L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(3,startTime + 3L - windowSize,startTime + 3L + windowSize)));
      assertEquals(Utils.mkList("four"),toList(store.fetch(4,startTime + 4L - windowSize,startTime + 4L + windowSize)));
      assertEquals(Utils.mkList("five"),toList(store.fetch(5,startTime + 5L - windowSize,startTime + 5L + windowSize)));
      context.setTime(startTime + 3L);
      store.put(2,"two+1");
      context.setTime(startTime + 4L);
      store.put(2,"two+2");
      context.setTime(startTime + 5L);
      store.put(2,"two+3");
      context.setTime(startTime + 6L);
      store.put(2,"two+4");
      context.setTime(startTime + 7L);
      store.put(2,"two+5");
      context.setTime(startTime + 8L);
      store.put(2,"two+6");
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime - 2L - windowSize,startTime - 2L + windowSize)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime - 1L - windowSize,startTime - 1L + windowSize)));
      assertEquals(Utils.mkList("two","two+1"),toList(store.fetch(2,startTime - windowSize,startTime + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2"),toList(store.fetch(2,startTime + 1L - windowSize,startTime + 1L + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2","two+3"),toList(store.fetch(2,startTime + 2L - windowSize,startTime + 2L + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2","two+3","two+4"),toList(store.fetch(2,startTime + 3L - windowSize,startTime + 3L + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2","two+3","two+4","two+5"),toList(store.fetch(2,startTime + 4L - windowSize,startTime + 4L + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2","two+3","two+4","two+5","two+6"),toList(store.fetch(2,startTime + 5L - windowSize,startTime + 5L + windowSize)));
      assertEquals(Utils.mkList("two+1","two+2","two+3","two+4","two+5","two+6"),toList(store.fetch(2,startTime + 6L - windowSize,startTime + 6L + windowSize)));
      assertEquals(Utils.mkList("two+2","two+3","two+4","two+5","two+6"),toList(store.fetch(2,startTime + 7L - windowSize,startTime + 7L + windowSize)));
      assertEquals(Utils.mkList("two+3","two+4","two+5","two+6"),toList(store.fetch(2,startTime + 8L - windowSize,startTime + 8L + windowSize)));
      assertEquals(Utils.mkList("two+4","two+5","two+6"),toList(store.fetch(2,startTime + 9L - windowSize,startTime + 9L + windowSize)));
      assertEquals(Utils.mkList("two+5","two+6"),toList(store.fetch(2,startTime + 10L - windowSize,startTime + 10L + windowSize)));
      assertEquals(Utils.mkList("two+6"),toList(store.fetch(2,startTime + 11L - windowSize,startTime + 11L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 12L - windowSize,startTime + 12L + windowSize)));
      store.flush();
      Map<Integer,Set<String>> entriesByKey=entriesByKey(changeLog,startTime);
      assertEquals(Utils.mkSet("zero@0"),entriesByKey.get(0));
      assertEquals(Utils.mkSet("one@1"),entriesByKey.get(1));
      assertEquals(Utils.mkSet("two@2","two+1@3","two+2@4","two+3@5","two+4@6","two+5@7","two+6@8"),entriesByKey.get(2));
      assertNull(entriesByKey.get(3));
      assertEquals(Utils.mkSet("four@4"),entriesByKey.get(4));
      assertEquals(Utils.mkSet("five@5"),entriesByKey.get(5));
      assertNull(entriesByKey.get(6));
    }
  finally {
      store.close();
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutAndFetchBefore() throws IOException {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    final List<KeyValue<byte[],byte[]>> changeLog=new ArrayList<>();
    Producer<byte[],byte[]> producer=new MockProducer<>(true,byteArraySerializer,byteArraySerializer);
    RecordCollector recordCollector=new RecordCollector(producer){
      @Override public <K1,V1>void send(      ProducerRecord<K1,V1> record,      Serializer<K1> keySerializer,      Serializer<V1> valueSerializer){
        changeLog.add(new KeyValue<>(keySerializer.serialize(record.topic(),record.key()),valueSerializer.serialize(record.topic(),record.value())));
      }
    }
;
    MockProcessorContext context=new MockProcessorContext(null,baseDir,byteArraySerializer,byteArrayDeserializer,byteArraySerializer,byteArrayDeserializer,recordCollector);
    WindowStore<Integer,String> store=createWindowStore(context,serdes);
    try {
      long startTime=segmentSize - 4L;
      context.setTime(startTime + 0L);
      store.put(0,"zero");
      context.setTime(startTime + 1L);
      store.put(1,"one");
      context.setTime(startTime + 2L);
      store.put(2,"two");
      context.setTime(startTime + 3L);
      context.setTime(startTime + 4L);
      store.put(4,"four");
      context.setTime(startTime + 5L);
      store.put(5,"five");
      assertEquals(Utils.mkList("zero"),toList(store.fetch(0,startTime + 0L - windowSize,startTime + 0L)));
      assertEquals(Utils.mkList("one"),toList(store.fetch(1,startTime + 1L - windowSize,startTime + 1L)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime + 2L - windowSize,startTime + 2L)));
      assertEquals(Utils.mkList(),toList(store.fetch(3,startTime + 3L - windowSize,startTime + 3L)));
      assertEquals(Utils.mkList("four"),toList(store.fetch(4,startTime + 4L - windowSize,startTime + 4L)));
      assertEquals(Utils.mkList("five"),toList(store.fetch(5,startTime + 5L - windowSize,startTime + 5L)));
      context.setTime(startTime + 3L);
      store.put(2,"two+1");
      context.setTime(startTime + 4L);
      store.put(2,"two+2");
      context.setTime(startTime + 5L);
      store.put(2,"two+3");
      context.setTime(startTime + 6L);
      store.put(2,"two+4");
      context.setTime(startTime + 7L);
      store.put(2,"two+5");
      context.setTime(startTime + 8L);
      store.put(2,"two+6");
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime - 1L - windowSize,startTime - 1L)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 0L - windowSize,startTime + 0L)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 1L - windowSize,startTime + 1L)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime + 2L - windowSize,startTime + 2L)));
      assertEquals(Utils.mkList("two","two+1"),toList(store.fetch(2,startTime + 3L - windowSize,startTime + 3L)));
      assertEquals(Utils.mkList("two","two+1","two+2"),toList(store.fetch(2,startTime + 4L - windowSize,startTime + 4L)));
      assertEquals(Utils.mkList("two","two+1","two+2","two+3"),toList(store.fetch(2,startTime + 5L - windowSize,startTime + 5L)));
      assertEquals(Utils.mkList("two+1","two+2","two+3","two+4"),toList(store.fetch(2,startTime + 6L - windowSize,startTime + 6L)));
      assertEquals(Utils.mkList("two+2","two+3","two+4","two+5"),toList(store.fetch(2,startTime + 7L - windowSize,startTime + 7L)));
      assertEquals(Utils.mkList("two+3","two+4","two+5","two+6"),toList(store.fetch(2,startTime + 8L - windowSize,startTime + 8L)));
      assertEquals(Utils.mkList("two+4","two+5","two+6"),toList(store.fetch(2,startTime + 9L - windowSize,startTime + 9L)));
      assertEquals(Utils.mkList("two+5","two+6"),toList(store.fetch(2,startTime + 10L - windowSize,startTime + 10L)));
      assertEquals(Utils.mkList("two+6"),toList(store.fetch(2,startTime + 11L - windowSize,startTime + 11L)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 12L - windowSize,startTime + 12L)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 13L - windowSize,startTime + 13L)));
      store.flush();
      Map<Integer,Set<String>> entriesByKey=entriesByKey(changeLog,startTime);
      assertEquals(Utils.mkSet("zero@0"),entriesByKey.get(0));
      assertEquals(Utils.mkSet("one@1"),entriesByKey.get(1));
      assertEquals(Utils.mkSet("two@2","two+1@3","two+2@4","two+3@5","two+4@6","two+5@7","two+6@8"),entriesByKey.get(2));
      assertNull(entriesByKey.get(3));
      assertEquals(Utils.mkSet("four@4"),entriesByKey.get(4));
      assertEquals(Utils.mkSet("five@5"),entriesByKey.get(5));
      assertNull(entriesByKey.get(6));
    }
  finally {
      store.close();
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutAndFetchAfter() throws IOException {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    final List<KeyValue<byte[],byte[]>> changeLog=new ArrayList<>();
    Producer<byte[],byte[]> producer=new MockProducer<>(true,byteArraySerializer,byteArraySerializer);
    RecordCollector recordCollector=new RecordCollector(producer){
      @Override public <K1,V1>void send(      ProducerRecord<K1,V1> record,      Serializer<K1> keySerializer,      Serializer<V1> valueSerializer){
        changeLog.add(new KeyValue<>(keySerializer.serialize(record.topic(),record.key()),valueSerializer.serialize(record.topic(),record.value())));
      }
    }
;
    MockProcessorContext context=new MockProcessorContext(null,baseDir,byteArraySerializer,byteArrayDeserializer,byteArraySerializer,byteArrayDeserializer,recordCollector);
    WindowStore<Integer,String> store=createWindowStore(context,serdes);
    try {
      long startTime=segmentSize - 4L;
      context.setTime(startTime + 0L);
      store.put(0,"zero");
      context.setTime(startTime + 1L);
      store.put(1,"one");
      context.setTime(startTime + 2L);
      store.put(2,"two");
      context.setTime(startTime + 3L);
      context.setTime(startTime + 4L);
      store.put(4,"four");
      context.setTime(startTime + 5L);
      store.put(5,"five");
      assertEquals(Utils.mkList("zero"),toList(store.fetch(0,startTime + 0L,startTime + 0L + windowSize)));
      assertEquals(Utils.mkList("one"),toList(store.fetch(1,startTime + 1L,startTime + 1L + windowSize)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime + 2L,startTime + 2L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(3,startTime + 3L,startTime + 3L + windowSize)));
      assertEquals(Utils.mkList("four"),toList(store.fetch(4,startTime + 4L,startTime + 4L + windowSize)));
      assertEquals(Utils.mkList("five"),toList(store.fetch(5,startTime + 5L,startTime + 5L + windowSize)));
      context.setTime(startTime + 3L);
      store.put(2,"two+1");
      context.setTime(startTime + 4L);
      store.put(2,"two+2");
      context.setTime(startTime + 5L);
      store.put(2,"two+3");
      context.setTime(startTime + 6L);
      store.put(2,"two+4");
      context.setTime(startTime + 7L);
      store.put(2,"two+5");
      context.setTime(startTime + 8L);
      store.put(2,"two+6");
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime - 2L,startTime - 2L + windowSize)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime - 1L,startTime - 1L + windowSize)));
      assertEquals(Utils.mkList("two","two+1"),toList(store.fetch(2,startTime,startTime + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2"),toList(store.fetch(2,startTime + 1L,startTime + 1L + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2","two+3"),toList(store.fetch(2,startTime + 2L,startTime + 2L + windowSize)));
      assertEquals(Utils.mkList("two+1","two+2","two+3","two+4"),toList(store.fetch(2,startTime + 3L,startTime + 3L + windowSize)));
      assertEquals(Utils.mkList("two+2","two+3","two+4","two+5"),toList(store.fetch(2,startTime + 4L,startTime + 4L + windowSize)));
      assertEquals(Utils.mkList("two+3","two+4","two+5","two+6"),toList(store.fetch(2,startTime + 5L,startTime + 5L + windowSize)));
      assertEquals(Utils.mkList("two+4","two+5","two+6"),toList(store.fetch(2,startTime + 6L,startTime + 6L + windowSize)));
      assertEquals(Utils.mkList("two+5","two+6"),toList(store.fetch(2,startTime + 7L,startTime + 7L + windowSize)));
      assertEquals(Utils.mkList("two+6"),toList(store.fetch(2,startTime + 8L,startTime + 8L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 9L,startTime + 9L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 10L,startTime + 10L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 11L,startTime + 11L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 12L,startTime + 12L + windowSize)));
      store.flush();
      Map<Integer,Set<String>> entriesByKey=entriesByKey(changeLog,startTime);
      assertEquals(Utils.mkSet("zero@0"),entriesByKey.get(0));
      assertEquals(Utils.mkSet("one@1"),entriesByKey.get(1));
      assertEquals(Utils.mkSet("two@2","two+1@3","two+2@4","two+3@5","two+4@6","two+5@7","two+6@8"),entriesByKey.get(2));
      assertNull(entriesByKey.get(3));
      assertEquals(Utils.mkSet("four@4"),entriesByKey.get(4));
      assertEquals(Utils.mkSet("five@5"),entriesByKey.get(5));
      assertNull(entriesByKey.get(6));
    }
  finally {
      store.close();
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
