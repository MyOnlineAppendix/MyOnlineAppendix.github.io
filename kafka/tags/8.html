<h3><span class=" glyphicon glyphicon-tag"/>&nbspAPIUtilityVerifier</h3><kbd>Verifies values of objects/variables related to API calls (Java or TPL) </kbd><br><br><br><h4 style="margin:0px">Class: org.apache.kafka.clients.MetadataTest </h4><pre class="type-8 type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testMetadata() throws Exception {
  long time=0;
  metadata.update(Cluster.empty(),time);
  assertFalse("No update needed.",metadata.timeToNextUpdate(time) == 0);
  metadata.requestUpdate();
  assertFalse("Still no updated needed due to backoff",metadata.timeToNextUpdate(time) == 0);
  time+=refreshBackoffMs;
  assertTrue("Update needed now that backoff time expired",metadata.timeToNextUpdate(time) == 0);
  String topic="my-topic";
  Thread t1=asyncFetch(topic);
  Thread t2=asyncFetch(topic);
  assertTrue("Awaiting update",t1.isAlive());
  assertTrue("Awaiting update",t2.isAlive());
  while (t1.isAlive() || t2.isAlive()) {
    if (metadata.timeToNextUpdate(time) == 0) {
      metadata.update(TestUtils.singletonCluster(topic,1),time);
      time+=refreshBackoffMs;
    }
    Thread.sleep(1);
  }
  t1.join();
  t2.join();
  assertFalse("No update needed.",metadata.timeToNextUpdate(time) == 0);
  time+=metadataExpireMs;
  assertTrue("Update needed due to stale metadata.",metadata.timeToNextUpdate(time) == 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.ConsumerConfigTest </h4><pre class="type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDeserializerToMapConfig(){
  Map<String,Object> configs=new HashMap<>();
  configs.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG,keyDeserializerClass);
  configs.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG,valueDeserializerClass);
  Map<String,Object> newConfigs=ConsumerConfig.addDeserializerToConfig(configs,null,null);
  assertEquals(newConfigs.get(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG),keyDeserializerClass);
  assertEquals(newConfigs.get(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG),valueDeserializerClass);
  configs.clear();
  configs.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG,valueDeserializerClass);
  newConfigs=ConsumerConfig.addDeserializerToConfig(configs,keyDeserializer,null);
  assertEquals(newConfigs.get(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG),keyDeserializerClass);
  assertEquals(newConfigs.get(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG),valueDeserializerClass);
  configs.clear();
  configs.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG,keyDeserializerClass);
  newConfigs=ConsumerConfig.addDeserializerToConfig(configs,null,valueDeserializer);
  assertEquals(newConfigs.get(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG),keyDeserializerClass);
  assertEquals(newConfigs.get(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG),valueDeserializerClass);
  configs.clear();
  newConfigs=ConsumerConfig.addDeserializerToConfig(configs,keyDeserializer,valueDeserializer);
  assertEquals(newConfigs.get(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG),keyDeserializerClass);
  assertEquals(newConfigs.get(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG),valueDeserializerClass);
}

</code></pre>

<br>
<pre class="type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDeserializerToPropertyConfig(){
  Properties properties=new Properties();
  properties.setProperty(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG,keyDeserializerClassName);
  properties.setProperty(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG,valueDeserializerClassName);
  Properties newProperties=ConsumerConfig.addDeserializerToConfig(properties,null,null);
  assertEquals(newProperties.get(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG),keyDeserializerClassName);
  assertEquals(newProperties.get(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG),valueDeserializerClassName);
  properties.clear();
  properties.setProperty(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG,valueDeserializerClassName);
  newProperties=ConsumerConfig.addDeserializerToConfig(properties,keyDeserializer,null);
  assertEquals(newProperties.get(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG),keyDeserializerClassName);
  assertEquals(newProperties.get(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG),valueDeserializerClassName);
  properties.clear();
  properties.setProperty(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG,keyDeserializerClassName);
  newProperties=ConsumerConfig.addDeserializerToConfig(properties,null,valueDeserializer);
  assertEquals(newProperties.get(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG),keyDeserializerClassName);
  assertEquals(newProperties.get(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG),valueDeserializerClassName);
  properties.clear();
  newProperties=ConsumerConfig.addDeserializerToConfig(properties,keyDeserializer,valueDeserializer);
  assertEquals(newProperties.get(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG),keyDeserializerClassName);
  assertEquals(newProperties.get(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG),valueDeserializerClassName);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.RangeAssignorTest </h4><pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOneConsumerNoTopic(){
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Collections.<String>emptyList()));
  assertEquals(Collections.singleton(consumerId),assignment.keySet());
  assertTrue(assignment.get(consumerId).isEmpty());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOneConsumerOneTopic(){
  String topic="topic";
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic,3);
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Arrays.asList(topic)));
  assertEquals(Collections.singleton(consumerId),assignment.keySet());
  assertAssignment(Arrays.asList(new TopicPartition(topic,0),new TopicPartition(topic,1),new TopicPartition(topic,2)),assignment.get(consumerId));
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOneConsumerMultipleTopics(){
  String topic1="topic1";
  String topic2="topic2";
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic1,1);
  partitionsPerTopic.put(topic2,2);
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Arrays.asList(topic1,topic2)));
  assertEquals(Collections.singleton(consumerId),assignment.keySet());
  assertAssignment(Arrays.asList(new TopicPartition(topic1,0),new TopicPartition(topic2,0),new TopicPartition(topic2,1)),assignment.get(consumerId));
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOneConsumerNonexistentTopic(){
  String topic="topic";
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic,0);
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Arrays.asList(topic)));
  assertEquals(Collections.singleton(consumerId),assignment.keySet());
  assertTrue(assignment.get(consumerId).isEmpty());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOnlyAssignsPartitionsFromSubscribedTopics(){
  String topic="topic";
  String otherTopic="other";
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic,3);
  partitionsPerTopic.put(otherTopic,3);
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Arrays.asList(topic)));
  assertEquals(Collections.singleton(consumerId),assignment.keySet());
  assertAssignment(Arrays.asList(new TopicPartition(topic,0),new TopicPartition(topic,1),new TopicPartition(topic,2)),assignment.get(consumerId));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.RoundRobinAssignorTest </h4><pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOneConsumerMultipleTopics(){
  String topic1="topic1";
  String topic2="topic2";
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic1,1);
  partitionsPerTopic.put(topic2,2);
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Arrays.asList(topic1,topic2)));
  assertEquals(Arrays.asList(new TopicPartition(topic1,0),new TopicPartition(topic2,0),new TopicPartition(topic2,1)),assignment.get(consumerId));
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOneConsumerNoTopic(){
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Collections.<String>emptyList()));
  assertEquals(Collections.singleton(consumerId),assignment.keySet());
  assertTrue(assignment.get(consumerId).isEmpty());
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOneConsumerNonexistentTopic(){
  String topic="topic";
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic,0);
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Arrays.asList(topic)));
  assertEquals(Collections.singleton(consumerId),assignment.keySet());
  assertTrue(assignment.get(consumerId).isEmpty());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOneConsumerOneTopic(){
  String topic="topic";
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic,3);
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Arrays.asList(topic)));
  assertEquals(Arrays.asList(new TopicPartition(topic,0),new TopicPartition(topic,1),new TopicPartition(topic,2)),assignment.get(consumerId));
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOnlyAssignsPartitionsFromSubscribedTopics(){
  String topic="topic";
  String otherTopic="other";
  String consumerId="consumer";
  Map<String,Integer> partitionsPerTopic=new HashMap<>();
  partitionsPerTopic.put(topic,3);
  partitionsPerTopic.put(otherTopic,3);
  Map<String,List<TopicPartition>> assignment=assignor.assign(partitionsPerTopic,Collections.singletonMap(consumerId,Arrays.asList(topic)));
  assertEquals(Arrays.asList(new TopicPartition(topic,0),new TopicPartition(topic,1),new TopicPartition(topic,2)),assignment.get(consumerId));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.SerializeCompatibilityOffsetAndMetadataTest </h4><pre class="type-8 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testOffsetMetadataSerializationCompatibility() throws IOException, ClassNotFoundException {
  Object deserializedObject=Serializer.deserialize(fileName);
  assertTrue(deserializedObject instanceof OffsetAndMetadata);
  checkValues((OffsetAndMetadata)deserializedObject);
}

</code></pre>

<br>
<pre class="type-8 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testSerializationRoundtrip() throws IOException, ClassNotFoundException {
  OffsetAndMetadata origOAM=new OffsetAndMetadata(offset,metadata);
  byte[] byteArray=Serializer.serialize(origOAM);
  Object deserializedObject=Serializer.deserialize(byteArray);
  assertTrue(deserializedObject instanceof OffsetAndMetadata);
  checkValues((OffsetAndMetadata)deserializedObject);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.ConsumerCoordinatorTest </h4><pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testProtocolMetadataOrder(){
  RoundRobinAssignor roundRobin=new RoundRobinAssignor();
  RangeAssignor range=new RangeAssignor();
  try (Metrics metrics=new Metrics(time)){
    ConsumerCoordinator coordinator=buildCoordinator(metrics,Arrays.<PartitionAssignor>asList(roundRobin,range));
    List<ProtocolMetadata> metadata=coordinator.metadata();
    assertEquals(2,metadata.size());
    assertEquals(roundRobin.name(),metadata.get(0).name());
    assertEquals(range.name(),metadata.get(1).name());
  }
   try (Metrics metrics=new Metrics(time)){
    ConsumerCoordinator coordinator=buildCoordinator(metrics,Arrays.<PartitionAssignor>asList(range,roundRobin));
    List<ProtocolMetadata> metadata=coordinator.metadata();
    assertEquals(2,metadata.size());
    assertEquals(range.name(),metadata.get(0).name());
    assertEquals(roundRobin.name(),metadata.get(1).name());
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.ConsumerProtocolTest </h4><pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void deserializeNewSubscriptionVersion(){
  short version=100;
  Schema subscriptionSchemaV100=new Schema(new Field(ConsumerProtocol.TOPICS_KEY_NAME,new ArrayOf(Type.STRING)),new Field(ConsumerProtocol.USER_DATA_KEY_NAME,Type.BYTES),new Field("foo",Type.STRING));
  Struct subscriptionV100=new Struct(subscriptionSchemaV100);
  subscriptionV100.set(ConsumerProtocol.TOPICS_KEY_NAME,new Object[]{"topic"});
  subscriptionV100.set(ConsumerProtocol.USER_DATA_KEY_NAME,ByteBuffer.wrap(new byte[0]));
  subscriptionV100.set("foo","bar");
  Struct headerV100=new Struct(ConsumerProtocol.CONSUMER_PROTOCOL_HEADER_SCHEMA);
  headerV100.set(ConsumerProtocol.VERSION_KEY_NAME,version);
  ByteBuffer buffer=ByteBuffer.allocate(subscriptionV100.sizeOf() + headerV100.sizeOf());
  headerV100.writeTo(buffer);
  subscriptionV100.writeTo(buffer);
  buffer.flip();
  Subscription subscription=ConsumerProtocol.deserializeSubscription(buffer);
  assertEquals(Arrays.asList("topic"),subscription.topics());
}

</code></pre>

<br>
<pre class="type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void serializeDeserializeAssignment(){
  List<TopicPartition> partitions=Arrays.asList(new TopicPartition("foo",0),new TopicPartition("bar",2));
  ByteBuffer buffer=ConsumerProtocol.serializeAssignment(new PartitionAssignor.Assignment(partitions));
  PartitionAssignor.Assignment parsedAssignment=ConsumerProtocol.deserializeAssignment(buffer);
  assertEquals(toSet(partitions),toSet(parsedAssignment.partitions()));
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void deserializeNewAssignmentVersion(){
  short version=100;
  Schema assignmentSchemaV100=new Schema(new Field(ConsumerProtocol.TOPIC_PARTITIONS_KEY_NAME,new ArrayOf(ConsumerProtocol.TOPIC_ASSIGNMENT_V0)),new Field(ConsumerProtocol.USER_DATA_KEY_NAME,Type.BYTES),new Field("foo",Type.STRING));
  Struct assignmentV100=new Struct(assignmentSchemaV100);
  assignmentV100.set(ConsumerProtocol.TOPIC_PARTITIONS_KEY_NAME,new Object[]{new Struct(ConsumerProtocol.TOPIC_ASSIGNMENT_V0).set(ConsumerProtocol.TOPIC_KEY_NAME,"foo").set(ConsumerProtocol.PARTITIONS_KEY_NAME,new Object[]{1})});
  assignmentV100.set(ConsumerProtocol.USER_DATA_KEY_NAME,ByteBuffer.wrap(new byte[0]));
  assignmentV100.set("foo","bar");
  Struct headerV100=new Struct(ConsumerProtocol.CONSUMER_PROTOCOL_HEADER_SCHEMA);
  headerV100.set(ConsumerProtocol.VERSION_KEY_NAME,version);
  ByteBuffer buffer=ByteBuffer.allocate(assignmentV100.sizeOf() + headerV100.sizeOf());
  headerV100.writeTo(buffer);
  assignmentV100.writeTo(buffer);
  buffer.flip();
  PartitionAssignor.Assignment assignment=ConsumerProtocol.deserializeAssignment(buffer);
  assertEquals(toSet(Arrays.asList(new TopicPartition("foo",1))),toSet(assignment.partitions()));
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deserializeNullAssignmentUserData(){
  List<TopicPartition> partitions=Arrays.asList(new TopicPartition("foo",0),new TopicPartition("bar",2));
  ByteBuffer buffer=ConsumerProtocol.serializeAssignment(new PartitionAssignor.Assignment(partitions,null));
  PartitionAssignor.Assignment parsedAssignment=ConsumerProtocol.deserializeAssignment(buffer);
  assertEquals(toSet(partitions),toSet(parsedAssignment.partitions()));
  assertNull(parsedAssignment.userData());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void serializeDeserializeNullSubscriptionUserData(){
  Subscription subscription=new Subscription(Arrays.asList("foo","bar"),null);
  ByteBuffer buffer=ConsumerProtocol.serializeSubscription(subscription);
  Subscription parsedSubscription=ConsumerProtocol.deserializeSubscription(buffer);
  assertEquals(subscription.topics(),parsedSubscription.topics());
  assertNull(subscription.userData());
}

</code></pre>

<br>
<pre class="type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void serializeDeserializeMetadata(){
  Subscription subscription=new Subscription(Arrays.asList("foo","bar"));
  ByteBuffer buffer=ConsumerProtocol.serializeSubscription(subscription);
  Subscription parsedSubscription=ConsumerProtocol.deserializeSubscription(buffer);
  assertEquals(subscription.topics(),parsedSubscription.topics());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.FetcherTest </h4><pre class="type-8 type-13 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testQuotaMetrics() throws Exception {
  List<ConsumerRecord<byte[],byte[]>> records;
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.seek(tp,0);
  for (int i=1; i < 4; i++) {
    fetcher.initFetches(cluster);
    client.prepareResponse(fetchResponse(this.records.buffer(),Errors.NONE.code(),100L,100 * i));
    consumerClient.poll(0);
    records=fetcher.fetchedRecords().get(tp);
    assertEquals(3,records.size());
  }
  Map<MetricName,KafkaMetric> allMetrics=metrics.metrics();
  KafkaMetric avgMetric=allMetrics.get(metrics.metricName("fetch-throttle-time-avg",metricGroup,""));
  KafkaMetric maxMetric=allMetrics.get(metrics.metricName("fetch-throttle-time-max",metricGroup,""));
  assertEquals(200,avgMetric.value(),EPSILON);
  assertEquals(300,maxMetric.value(),EPSILON);
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetTopicMetadataLeaderNotAvailable(){
  Cluster emptyCluster=new Cluster(this.cluster.nodes(),Collections.<PartitionInfo>emptyList(),Collections.<String>emptySet());
  client.prepareResponse(new MetadataResponse(emptyCluster,Collections.singletonMap(topicName,Errors.LEADER_NOT_AVAILABLE)).toStruct());
  client.prepareResponse(new MetadataResponse(this.cluster,Collections.<String,Errors>emptyMap()).toStruct());
  Map<String,List<PartitionInfo>> topicMetadata=fetcher.getTopicMetadata(Collections.singletonList(topicName),5000L);
  assertTrue(topicMetadata.containsKey(topicName));
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFetchNonContinuousRecords(){
  MemoryRecords records=MemoryRecords.emptyRecords(ByteBuffer.allocate(1024),CompressionType.NONE);
  records.append(15L,"key".getBytes(),"value-1".getBytes());
  records.append(20L,"key".getBytes(),"value-2".getBytes());
  records.append(30L,"key".getBytes(),"value-3".getBytes());
  records.close();
  List<ConsumerRecord<byte[],byte[]>> consumerRecords;
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.seek(tp,0);
  fetcher.initFetches(cluster);
  client.prepareResponse(fetchResponse(records.buffer(),Errors.NONE.code(),100L,0));
  consumerClient.poll(0);
  consumerRecords=fetcher.fetchedRecords().get(tp);
  assertEquals(3,consumerRecords.size());
  assertEquals(31L,(long)subscriptions.position(tp));
  assertEquals(15L,consumerRecords.get(0).offset());
  assertEquals(20L,consumerRecords.get(1).offset());
  assertEquals(30L,consumerRecords.get(2).offset());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetTopicMetadataUnknownTopic(){
  Cluster emptyCluster=new Cluster(this.cluster.nodes(),Collections.<PartitionInfo>emptyList(),Collections.<String>emptySet());
  client.prepareResponse(new MetadataResponse(emptyCluster,Collections.singletonMap(topicName,Errors.UNKNOWN_TOPIC_OR_PARTITION)).toStruct());
  Map<String,List<PartitionInfo>> topicMetadata=fetcher.getTopicMetadata(Collections.singletonList(topicName),5000L);
  assertNull(topicMetadata.get(topicName));
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFetchNormal(){
  List<ConsumerRecord<byte[],byte[]>> records;
  subscriptions.assignFromUser(Arrays.asList(tp));
  subscriptions.seek(tp,0);
  fetcher.initFetches(cluster);
  client.prepareResponse(fetchResponse(this.records.buffer(),Errors.NONE.code(),100L,0));
  consumerClient.poll(0);
  records=fetcher.fetchedRecords().get(tp);
  assertEquals(3,records.size());
  assertEquals(4L,(long)subscriptions.position(tp));
  long offset=1;
  for (  ConsumerRecord<byte[],byte[]> record : records) {
    assertEquals(offset,record.offset());
    offset+=1;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.consumer.internals.RequestFutureTest </h4><pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testComposeSuccessCase(){
  RequestFuture<String> future=new RequestFuture<String>();
  RequestFuture<Integer> composed=future.compose(new RequestFutureAdapter<String,Integer>(){
    @Override public void onSuccess(    String value,    RequestFuture<Integer> future){
      future.complete(value.length());
    }
  }
);
  future.complete("hello");
  assertTrue(composed.isDone());
  assertTrue(composed.succeeded());
  assertEquals(5,(int)composed.value());
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testComposeFailureCase(){
  RequestFuture<String> future=new RequestFuture<String>();
  RequestFuture<Integer> composed=future.compose(new RequestFutureAdapter<String,Integer>(){
    @Override public void onSuccess(    String value,    RequestFuture<Integer> future){
      future.complete(value.length());
    }
  }
);
  RuntimeException e=new RuntimeException();
  future.raise(e);
  assertTrue(composed.isDone());
  assertTrue(composed.failed());
  assertEquals(e,composed.exception());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.MockProducerTest </h4><pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPartitioner() throws Exception {
  PartitionInfo partitionInfo0=new PartitionInfo(topic,0,null,null,null);
  PartitionInfo partitionInfo1=new PartitionInfo(topic,1,null,null,null);
  Cluster cluster=new Cluster(new ArrayList<Node>(0),asList(partitionInfo0,partitionInfo1),Collections.<String>emptySet());
  MockProducer<String,String> producer=new MockProducer<String,String>(cluster,true,new DefaultPartitioner(),new StringSerializer(),new StringSerializer());
  ProducerRecord<String,String> record=new ProducerRecord<String,String>(topic,"key","value");
  Future<RecordMetadata> metadata=producer.send(record);
  assertEquals("Partition should be correct",1,metadata.get().partition());
  producer.clear();
  assertEquals("Clear should erase our history",0,producer.history().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.RecordSendTest </h4><pre class="type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test that an asynchronous request will eventually return the right offset
 */
@Test public void testBlocking() throws Exception {
  FutureRecordMetadata future=new FutureRecordMetadata(asyncRequest(baseOffset,null,50L),relOffset);
  assertEquals(baseOffset + relOffset,future.get().offset());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.internals.BufferPoolTest </h4><pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test that delayed allocation blocks
 */
@Test public void testDelayedAllocation() throws Exception {
  BufferPool pool=new BufferPool(5 * 1024,1024,metrics,time,metricGroup);
  ByteBuffer buffer=pool.allocate(1024,maxBlockTimeMs);
  CountDownLatch doDealloc=asyncDeallocate(pool,buffer);
  CountDownLatch allocation=asyncAllocate(pool,5 * 1024);
  assertEquals("Allocation shouldn't have happened yet, waiting on memory.",1L,allocation.getCount());
  doDealloc.countDown();
  allocation.await();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.internals.RecordAccumulatorTest </h4><pre class="type-8 type-9 type-7 type-3 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLinger() throws Exception {
  long lingerMs=10L;
  RecordAccumulator accum=new RecordAccumulator(1024,10 * 1024,CompressionType.NONE,lingerMs,100L,metrics,time);
  accum.append(tp1,key,value,null,maxBlockTimeMs);
  assertEquals("No partitions should be ready",0,accum.ready(cluster,time.milliseconds()).readyNodes.size());
  time.sleep(10);
  assertEquals("Our partition's leader should be ready",Collections.singleton(node1),accum.ready(cluster,time.milliseconds()).readyNodes);
  List<RecordBatch> batches=accum.drain(cluster,Collections.singleton(node1),Integer.MAX_VALUE,0).get(node1.id());
  assertEquals(1,batches.size());
  RecordBatch batch=batches.get(0);
  Iterator<LogEntry> iter=batch.records.iterator();
  LogEntry entry=iter.next();
  assertEquals("Keys should match",ByteBuffer.wrap(key),entry.record().key());
  assertEquals("Values should match",ByteBuffer.wrap(value),entry.record().value());
  assertFalse("No more records",iter.hasNext());
}

</code></pre>

<br>
<pre class="type-8 type-13 type-9 type-7 type-3 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFull() throws Exception {
  long now=time.milliseconds();
  RecordAccumulator accum=new RecordAccumulator(1024,10 * 1024,CompressionType.NONE,10L,100L,metrics,time);
  int appends=1024 / msgSize;
  for (int i=0; i < appends; i++) {
    accum.append(tp1,key,value,null,maxBlockTimeMs);
    assertEquals("No partitions should be ready.",0,accum.ready(cluster,now).readyNodes.size());
  }
  accum.append(tp1,key,value,null,maxBlockTimeMs);
  assertEquals("Our partition's leader should be ready",Collections.singleton(node1),accum.ready(cluster,time.milliseconds()).readyNodes);
  List<RecordBatch> batches=accum.drain(cluster,Collections.singleton(node1),Integer.MAX_VALUE,0).get(node1.id());
  assertEquals(1,batches.size());
  RecordBatch batch=batches.get(0);
  Iterator<LogEntry> iter=batch.records.iterator();
  for (int i=0; i < appends; i++) {
    LogEntry entry=iter.next();
    assertEquals("Keys should match",ByteBuffer.wrap(key),entry.record().key());
    assertEquals("Values should match",ByteBuffer.wrap(value),entry.record().value());
  }
  assertFalse("No more records",iter.hasNext());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPartialDrain() throws Exception {
  RecordAccumulator accum=new RecordAccumulator(1024,10 * 1024,CompressionType.NONE,10L,100L,metrics,time);
  int appends=1024 / msgSize + 1;
  List<TopicPartition> partitions=asList(tp1,tp2);
  for (  TopicPartition tp : partitions) {
    for (int i=0; i < appends; i++)     accum.append(tp,key,value,null,maxBlockTimeMs);
  }
  assertEquals("Partition's leader should be ready",Collections.singleton(node1),accum.ready(cluster,time.milliseconds()).readyNodes);
  List<RecordBatch> batches=accum.drain(cluster,Collections.singleton(node1),1024,0).get(node1.id());
  assertEquals("But due to size bound only one partition should have been retrieved",1,batches.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.clients.producer.internals.SenderTest </h4><pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRetries() throws Exception {
  int maxRetries=1;
  Metrics m=new Metrics();
  try {
    Sender sender=new Sender(client,metadata,this.accumulator,MAX_REQUEST_SIZE,ACKS_ALL,maxRetries,m,time,"clientId",REQUEST_TIMEOUT);
    Future<RecordMetadata> future=accumulator.append(tp,"key".getBytes(),"value".getBytes(),null,MAX_BLOCK_TIMEOUT).future;
    sender.run(time.milliseconds());
    sender.run(time.milliseconds());
    String id=client.requests().peek().request().destination();
    Node node=new Node(Integer.valueOf(id),"localhost",0);
    assertEquals(1,client.inFlightRequestCount());
    assertTrue("Client ready status should be true",client.isReady(node,0L));
    client.disconnect(id);
    assertEquals(0,client.inFlightRequestCount());
    assertFalse("Client ready status should be false",client.isReady(node,0L));
    sender.run(time.milliseconds());
    sender.run(time.milliseconds());
    sender.run(time.milliseconds());
    assertEquals(1,client.inFlightRequestCount());
    long offset=0;
    client.respond(produceResponse(tp,offset,Errors.NONE.code(),0));
    sender.run(time.milliseconds());
    assertTrue("Request should have retried and completed",future.isDone());
    assertEquals(offset,future.get().offset());
    future=accumulator.append(tp,"key".getBytes(),"value".getBytes(),null,MAX_BLOCK_TIMEOUT).future;
    sender.run(time.milliseconds());
    for (int i=0; i < maxRetries + 1; i++) {
      client.disconnect(client.requests().peek().request().destination());
      sender.run(time.milliseconds());
      sender.run(time.milliseconds());
      sender.run(time.milliseconds());
    }
    sender.run(time.milliseconds());
    completedWithError(future,Errors.NETWORK_EXCEPTION);
  }
  finally {
    m.close();
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testQuotaMetrics() throws Exception {
  final long offset=0;
  for (int i=1; i <= 3; i++) {
    Future<RecordMetadata> future=accumulator.append(tp,"key".getBytes(),"value".getBytes(),null,MAX_BLOCK_TIMEOUT).future;
    sender.run(time.milliseconds());
    client.respond(produceResponse(tp,offset,Errors.NONE.code(),100 * i));
    sender.run(time.milliseconds());
  }
  Map<MetricName,KafkaMetric> allMetrics=metrics.metrics();
  KafkaMetric avgMetric=allMetrics.get(metrics.metricName("produce-throttle-time-avg",METRIC_GROUP,""));
  KafkaMetric maxMetric=allMetrics.get(metrics.metricName("produce-throttle-time-max",METRIC_GROUP,""));
  assertEquals(200,avgMetric.value(),EPS);
  assertEquals(300,maxMetric.value(),EPS);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.SerializeCompatibilityTopicPartitionTest </h4><pre class="type-8 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testTopiPartitionSerializationCompatibility() throws IOException, ClassNotFoundException {
  Object deserializedObject=Serializer.deserialize(fileName);
  assertTrue(deserializedObject instanceof TopicPartition);
  checkValues((TopicPartition)deserializedObject);
}

</code></pre>

<br>
<pre class="type-8 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testSerializationRoundtrip() throws IOException, ClassNotFoundException {
  TopicPartition origTp=new TopicPartition(topicName,partNum);
  byte[] byteArray=Serializer.serialize(origTp);
  Object deserializedObject=Serializer.deserialize(byteArray);
  assertTrue(deserializedObject instanceof TopicPartition);
  checkValues((TopicPartition)deserializedObject);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.metrics.MetricsTest </h4><pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOldDataHasNoEffect(){
  Max max=new Max();
  long windowMs=100;
  int samples=2;
  MetricConfig config=new MetricConfig().timeWindow(windowMs,TimeUnit.MILLISECONDS).samples(samples);
  max.record(config,50,time.milliseconds());
  time.sleep(samples * windowMs);
  assertEquals(Double.NEGATIVE_INFINITY,max.measure(config,time.milliseconds()),EPS);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.network.SelectorTest </h4><pre class="type-8 type-13 type-14 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Send multiple requests to several connections in parallel. Validate that responses are received in the order that
 * requests were sent.
 */
@Test public void testNormalOperation() throws Exception {
  int conns=5;
  int reqs=500;
  InetSocketAddress addr=new InetSocketAddress("localhost",server.port);
  for (int i=0; i < conns; i++)   connect(Integer.toString(i),addr);
  Map<String,Integer> requests=new HashMap<String,Integer>();
  Map<String,Integer> responses=new HashMap<String,Integer>();
  int responseCount=0;
  for (int i=0; i < conns; i++) {
    String node=Integer.toString(i);
    selector.send(createSend(node,node + "-0"));
  }
  while (responseCount < conns * reqs) {
    selector.poll(0L);
    assertEquals("No disconnects should have occurred.",0,selector.disconnected().size());
    for (    NetworkReceive receive : selector.completedReceives()) {
      String[] pieces=asString(receive).split("-");
      assertEquals("Should be in the form 'conn-counter'",2,pieces.length);
      assertEquals("Check the source",receive.source(),pieces[0]);
      assertEquals("Check that the receive has kindly been rewound",0,receive.payload().position());
      if (responses.containsKey(receive.source())) {
        assertEquals("Check the request counter",(int)responses.get(receive.source()),Integer.parseInt(pieces[1]));
        responses.put(receive.source(),responses.get(receive.source()) + 1);
      }
 else {
        assertEquals("Check the request counter",0,Integer.parseInt(pieces[1]));
        responses.put(receive.source(),1);
      }
      responseCount++;
    }
    for (    Send send : selector.completedSends()) {
      String dest=send.destination();
      if (requests.containsKey(dest))       requests.put(dest,requests.get(dest) + 1);
 else       requests.put(dest,1);
      if (requests.get(dest) < reqs)       selector.send(createSend(dest,dest + "-" + requests.get(dest)));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.network.SslSelectorTest </h4><pre class="type-8 type-13 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Tests that SSL renegotiation initiated by the server are handled correctly by the client
 * @throws Exception
 */
@Test public void testRenegotiation() throws Exception {
  ChannelBuilder channelBuilder=new SslChannelBuilder(Mode.CLIENT){
    @Override protected SslTransportLayer buildTransportLayer(    SslFactory sslFactory,    String id,    SelectionKey key) throws IOException {
      SocketChannel socketChannel=(SocketChannel)key.channel();
      SslTransportLayer transportLayer=new SslTransportLayer(id,key,sslFactory.createSslEngine(socketChannel.socket().getInetAddress().getHostName(),socketChannel.socket().getPort()),true);
      transportLayer.startHandshake();
      return transportLayer;
    }
  }
;
  channelBuilder.configure(sslClientConfigs);
  Selector selector=new Selector(5000,metrics,time,"MetricGroup2",channelBuilder);
  try {
    int reqs=500;
    String node="0";
    InetSocketAddress addr=new InetSocketAddress("localhost",server.port);
    selector.connect(node,addr,BUFFER_SIZE,BUFFER_SIZE);
    int requests=0;
    int responses=0;
    int renegotiates=0;
    while (!selector.isChannelReady(node)) {
      selector.poll(1000L);
    }
    selector.send(createSend(node,node + "-" + 0));
    requests++;
    while (responses < reqs) {
      selector.poll(0L);
      if (responses >= 100 && renegotiates == 0) {
        renegotiates++;
        server.renegotiate();
      }
      assertEquals("No disconnects should have occurred.",0,selector.disconnected().size());
      for (      NetworkReceive receive : selector.completedReceives()) {
        String[] pieces=asString(receive).split("-");
        assertEquals("Should be in the form 'conn-counter'",2,pieces.length);
        assertEquals("Check the source",receive.source(),pieces[0]);
        assertEquals("Check that the receive has kindly been rewound",0,receive.payload().position());
        assertEquals("Check the request counter",responses,Integer.parseInt(pieces[1]));
        responses++;
      }
      for (int i=0; i < selector.completedSends().size() && requests < reqs && selector.isChannelReady(node); i++, requests++) {
        selector.send(createSend(node,node + "-" + requests));
      }
    }
  }
  finally {
    selector.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.record.MemoryRecordsTest </h4><pre class="type-8 type-13 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIterator(){
  MemoryRecords recs1=MemoryRecords.emptyRecords(ByteBuffer.allocate(1024),compression);
  MemoryRecords recs2=MemoryRecords.emptyRecords(ByteBuffer.allocate(1024),compression);
  List<Record> list=Arrays.asList(new Record("a".getBytes(),"1".getBytes()),new Record("b".getBytes(),"2".getBytes()),new Record("c".getBytes(),"3".getBytes()));
  for (int i=0; i < list.size(); i++) {
    Record r=list.get(i);
    recs1.append(i,r);
    recs2.append(i,toArray(r.key()),toArray(r.value()));
  }
  recs1.close();
  recs2.close();
  for (int iteration=0; iteration < 2; iteration++) {
    for (    MemoryRecords recs : Arrays.asList(recs1,recs2)) {
      Iterator<LogEntry> iter=recs.iterator();
      for (int i=0; i < list.size(); i++) {
        assertTrue(iter.hasNext());
        LogEntry entry=iter.next();
        assertEquals((long)i,entry.offset());
        assertEquals(list.get(i),entry.record());
        entry.record().ensureValid();
      }
      assertFalse(iter.hasNext());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.record.RecordTest </h4><pre class="type-8 type-13 type-10 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChecksum(){
  assertEquals(record.checksum(),record.computeChecksum());
  assertEquals(record.checksum(),Record.computeChecksum(this.key == null ? null : this.key.array(),this.value == null ? null : this.value.array(),this.compression,0,-1));
  assertTrue(record.isValid());
  for (int i=Record.CRC_OFFSET + Record.CRC_LENGTH; i < record.size(); i++) {
    Record copy=copyOf(record);
    copy.buffer().put(i,(byte)69);
    assertFalse(copy.isValid());
    try {
      copy.ensureValid();
      fail("Should fail the above test.");
    }
 catch (    InvalidRecordException e) {
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.requests.RequestResponseTest </h4><pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testControlledShutdownResponse(){
  ControlledShutdownResponse response=createControlledShutdownResponse();
  ByteBuffer buffer=ByteBuffer.allocate(response.sizeOf());
  response.writeTo(buffer);
  buffer.rewind();
  ControlledShutdownResponse deserialized=ControlledShutdownResponse.parse(buffer);
  assertEquals(response.errorCode(),deserialized.errorCode());
  assertEquals(response.partitionsRemaining(),deserialized.partitionsRemaining());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.security.kerberos.KerberosNameTest </h4><pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testParse() throws IOException {
  List<String> rules=new ArrayList<>(Arrays.asList("RULE:[1:$1](App\\..*)s/App\\.(.*)/$1/g","RULE:[2:$1](App\\..*)s/App\\.(.*)/$1/g","DEFAULT"));
  KerberosShortNamer shortNamer=KerberosShortNamer.fromUnparsedRules("REALM.COM",rules);
  KerberosName name=KerberosName.parse("App.service-name/example.com@REALM.COM");
  assertEquals("App.service-name",name.serviceName());
  assertEquals("example.com",name.hostName());
  assertEquals("REALM.COM",name.realm());
  assertEquals("service-name",shortNamer.shortName(name));
  name=KerberosName.parse("App.service-name@REALM.COM");
  assertEquals("App.service-name",name.serviceName());
  assertNull(name.hostName());
  assertEquals("REALM.COM",name.realm());
  assertEquals("service-name",shortNamer.shortName(name));
  name=KerberosName.parse("user/host@REALM.COM");
  assertEquals("user",name.serviceName());
  assertEquals("host",name.hostName());
  assertEquals("REALM.COM",name.realm());
  assertEquals("user",shortNamer.shortName(name));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.common.serialization.SerializationTest </h4><pre class="type-8 type-7 type-3 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testStringSerializer(){
  String str="my string";
  String mytopic="testTopic";
  List<String> encodings=new ArrayList<String>();
  encodings.add("UTF8");
  encodings.add("UTF-16");
  for (  String encoding : encodings) {
    SerDeser<String> serDeser=getStringSerDeser(encoding);
    Serializer<String> serializer=serDeser.serializer;
    Deserializer<String> deserializer=serDeser.deserializer;
    assertEquals("Should get the original string after serialization and deserialization with encoding " + encoding,str,deserializer.deserialize(mytopic,serializer.serialize(mytopic,str)));
    assertEquals("Should support null in serialization and deserialization with encoding " + encoding,null,deserializer.deserialize(mytopic,serializer.serialize(mytopic,null)));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.data.DecimalTest </h4><pre class="type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testToLogical(){
  Schema schema=Decimal.schema(2);
  BigDecimal converted=Decimal.toLogical(schema,TEST_BYTES);
  assertEquals(TEST_DECIMAL,converted);
  converted=Decimal.toLogical(schema,TEST_BYTES_NEGATIVE);
  assertEquals(TEST_DECIMAL_NEGATIVE,converted);
}

</code></pre>

<br>
<pre class="type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFromLogical(){
  Schema schema=Decimal.schema(TEST_SCALE);
  byte[] encoded=Decimal.fromLogical(schema,TEST_DECIMAL);
  assertArrayEquals(TEST_BYTES,encoded);
  encoded=Decimal.fromLogical(schema,TEST_DECIMAL_NEGATIVE);
  assertArrayEquals(TEST_BYTES_NEGATIVE,encoded);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.data.SchemaBuilderTest </h4><pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMapBuilder(){
  Schema schema=SchemaBuilder.map(Schema.INT8_SCHEMA,Schema.INT8_SCHEMA).build();
  assertTypeAndDefault(schema,Schema.Type.MAP,false,null);
  assertEquals(schema.keySchema(),Schema.INT8_SCHEMA);
  assertEquals(schema.valueSchema(),Schema.INT8_SCHEMA);
  assertNoMetadata(schema);
  Map<Byte,Byte> defMap=Collections.singletonMap((byte)5,(byte)10);
  schema=SchemaBuilder.map(Schema.INT8_SCHEMA,Schema.INT8_SCHEMA).defaultValue(defMap).build();
  assertTypeAndDefault(schema,Schema.Type.MAP,false,defMap);
  assertEquals(schema.keySchema(),Schema.INT8_SCHEMA);
  assertEquals(schema.valueSchema(),Schema.INT8_SCHEMA);
  assertNoMetadata(schema);
}

</code></pre>

<br>
<pre class="type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testArrayBuilder(){
  Schema schema=SchemaBuilder.array(Schema.INT8_SCHEMA).build();
  assertTypeAndDefault(schema,Schema.Type.ARRAY,false,null);
  assertEquals(schema.valueSchema(),Schema.INT8_SCHEMA);
  assertNoMetadata(schema);
  List<Byte> defArray=Arrays.asList((byte)1,(byte)2);
  schema=SchemaBuilder.array(Schema.INT8_SCHEMA).defaultValue(defArray).build();
  assertTypeAndDefault(schema,Schema.Type.ARRAY,false,defArray);
  assertEquals(schema.valueSchema(),Schema.INT8_SCHEMA);
  assertNoMetadata(schema);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.data.SchemaProjectorTest </h4><pre class="type-8 type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMapProjection() throws Exception {
  Schema source=SchemaBuilder.map(Schema.INT32_SCHEMA,Schema.INT32_SCHEMA).optional().build();
  Schema target=SchemaBuilder.map(Schema.INT32_SCHEMA,Schema.INT32_SCHEMA).defaultValue(Collections.singletonMap(1,2)).build();
  Object projected=SchemaProjector.project(source,Collections.singletonMap(3,4),target);
  assertEquals(Collections.singletonMap(3,4),(Map<Integer,Integer>)projected);
  projected=SchemaProjector.project(source,null,target);
  assertEquals(Collections.singletonMap(1,2),(Map<Integer,Integer>)projected);
  Schema promotedTarget=SchemaBuilder.map(Schema.INT64_SCHEMA,Schema.FLOAT32_SCHEMA).defaultValue(Collections.singletonMap(3L,4.5F)).build();
  projected=SchemaProjector.project(source,Collections.singletonMap(3,4),promotedTarget);
  assertEquals(Collections.singletonMap(3L,4.F),(Map<Long,Float>)projected);
  projected=SchemaProjector.project(source,null,promotedTarget);
  assertEquals(Collections.singletonMap(3L,4.5F),(Map<Long,Float>)projected);
  Schema noDefaultValueTarget=SchemaBuilder.map(Schema.INT32_SCHEMA,Schema.INT32_SCHEMA).build();
  try {
    SchemaProjector.project(source,null,noDefaultValueTarget);
    fail("Reader does not provide a default value.");
  }
 catch (  SchemaProjectorException e) {
  }
  Schema nonPromotableTarget=SchemaBuilder.map(Schema.BOOLEAN_SCHEMA,Schema.STRING_SCHEMA).build();
  try {
    SchemaProjector.project(source,null,nonPromotableTarget);
    fail("Neither source type matches target type nor source type can be promoted to target type");
  }
 catch (  SchemaProjectorException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStructDefaultValue() throws Exception {
  Schema source=SchemaBuilder.struct().optional().field("field",Schema.INT32_SCHEMA).field("field2",Schema.INT32_SCHEMA).build();
  SchemaBuilder builder=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).field("field2",Schema.INT32_SCHEMA);
  Struct defaultStruct=new Struct(builder).put("field",12).put("field2",345);
  builder.defaultValue(defaultStruct);
  Schema target=builder.build();
  Object projected=SchemaProjector.project(source,null,target);
  assertEquals(defaultStruct,projected);
  Struct sourceStruct=new Struct(source).put("field",45).put("field2",678);
  Struct targetStruct=(Struct)SchemaProjector.project(source,sourceStruct,target);
  assertEquals(sourceStruct.get("field"),targetStruct.get("field"));
  assertEquals(sourceStruct.get("field2"),targetStruct.get("field2"));
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNestedSchemaProjection() throws Exception {
  Schema sourceFlatSchema=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).build();
  Schema targetFlatSchema=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).field("field2",SchemaBuilder.int32().defaultValue(123).build()).build();
  Schema sourceNestedSchema=SchemaBuilder.struct().field("first",Schema.INT32_SCHEMA).field("second",Schema.STRING_SCHEMA).field("array",SchemaBuilder.array(Schema.INT32_SCHEMA).build()).field("map",SchemaBuilder.map(Schema.INT32_SCHEMA,Schema.STRING_SCHEMA).build()).field("nested",sourceFlatSchema).build();
  Schema targetNestedSchema=SchemaBuilder.struct().field("first",Schema.INT32_SCHEMA).field("second",Schema.STRING_SCHEMA).field("array",SchemaBuilder.array(Schema.INT32_SCHEMA).build()).field("map",SchemaBuilder.map(Schema.INT32_SCHEMA,Schema.STRING_SCHEMA).build()).field("nested",targetFlatSchema).build();
  Struct sourceFlatStruct=new Struct(sourceFlatSchema);
  sourceFlatStruct.put("field",113);
  Struct sourceNestedStruct=new Struct(sourceNestedSchema);
  sourceNestedStruct.put("first",1);
  sourceNestedStruct.put("second","abc");
  sourceNestedStruct.put("array",Arrays.asList(1,2));
  sourceNestedStruct.put("map",Collections.singletonMap(5,"def"));
  sourceNestedStruct.put("nested",sourceFlatStruct);
  Struct targetNestedStruct=(Struct)SchemaProjector.project(sourceNestedSchema,sourceNestedStruct,targetNestedSchema);
  assertEquals(1,targetNestedStruct.get("first"));
  assertEquals("abc",targetNestedStruct.get("second"));
  assertEquals(Arrays.asList(1,2),(List<Integer>)targetNestedStruct.get("array"));
  assertEquals(Collections.singletonMap(5,"def"),(Map<Integer,String>)targetNestedStruct.get("map"));
  Struct projectedStruct=(Struct)targetNestedStruct.get("nested");
  assertEquals(113,projectedStruct.get("field"));
  assertEquals(123,projectedStruct.get("field2"));
}

</code></pre>

<br>
<pre class="type-8 type-10 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStructRemoveField() throws Exception {
  Schema source=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).field("field2",Schema.INT32_SCHEMA).build();
  Struct sourceStruct=new Struct(source);
  sourceStruct.put("field",1);
  sourceStruct.put("field2",234);
  Schema target=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).build();
  Struct targetStruct=(Struct)SchemaProjector.project(source,sourceStruct,target);
  assertEquals(1,targetStruct.get("field"));
  try {
    targetStruct.get("field2");
    fail("field2 is not part of the projected struct");
  }
 catch (  DataException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testArrayProjection() throws Exception {
  Schema source=SchemaBuilder.array(Schema.INT32_SCHEMA).build();
  Object projected=SchemaProjector.project(source,Arrays.asList(1,2,3),source);
  assertEquals(Arrays.asList(1,2,3),(List<Integer>)projected);
  Schema optionalSource=SchemaBuilder.array(Schema.INT32_SCHEMA).optional().build();
  Schema target=SchemaBuilder.array(Schema.INT32_SCHEMA).defaultValue(Arrays.asList(1,2,3)).build();
  projected=SchemaProjector.project(optionalSource,Arrays.asList(4,5),target);
  assertEquals(Arrays.asList(4,5),(List<Integer>)projected);
  projected=SchemaProjector.project(optionalSource,null,target);
  assertEquals(Arrays.asList(1,2,3),(List<Integer>)projected);
  Schema promotedTarget=SchemaBuilder.array(Schema.INT64_SCHEMA).defaultValue(Arrays.asList(1L,2L,3L)).build();
  projected=SchemaProjector.project(optionalSource,Arrays.asList(4,5),promotedTarget);
  List<Long> expectedProjected=Arrays.asList(4L,5L);
  assertEquals(expectedProjected,(List<Long>)projected);
  projected=SchemaProjector.project(optionalSource,null,promotedTarget);
  assertEquals(Arrays.asList(1L,2L,3L),(List<Long>)projected);
  Schema noDefaultValueTarget=SchemaBuilder.array(Schema.INT32_SCHEMA).build();
  try {
    SchemaProjector.project(optionalSource,null,noDefaultValueTarget);
    fail("Target schema does not provide a default value.");
  }
 catch (  SchemaProjectorException e) {
  }
  Schema nonPromotableTarget=SchemaBuilder.array(Schema.BOOLEAN_SCHEMA).build();
  try {
    SchemaProjector.project(optionalSource,null,nonPromotableTarget);
    fail("Neither source type matches target type nor source type can be promoted to target type");
  }
 catch (  SchemaProjectorException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLogicalTypeProjection() throws Exception {
  Schema[] logicalTypeSchemas={Decimal.schema(2),Date.SCHEMA,Time.SCHEMA,Timestamp.SCHEMA};
  Object projected;
  BigDecimal testDecimal=new BigDecimal(new BigInteger("156"),2);
  projected=SchemaProjector.project(Decimal.schema(2),testDecimal,Decimal.schema(2));
  assertEquals(testDecimal,projected);
  projected=SchemaProjector.project(Date.SCHEMA,1000,Date.SCHEMA);
  assertEquals(1000,projected);
  projected=SchemaProjector.project(Time.SCHEMA,231,Time.SCHEMA);
  assertEquals(231,projected);
  projected=SchemaProjector.project(Timestamp.SCHEMA,34567L,Timestamp.SCHEMA);
  assertEquals(34567L,projected);
  Schema namedSchema=SchemaBuilder.int32().name("invalidLogicalTypeName").build();
  for (  Schema logicalTypeSchema : logicalTypeSchemas) {
    try {
      SchemaProjector.project(logicalTypeSchema,null,Schema.BOOLEAN_SCHEMA);
      fail("Cannot project logical types to non-logical types.");
    }
 catch (    SchemaProjectorException e) {
    }
    try {
      SchemaProjector.project(logicalTypeSchema,null,namedSchema);
      fail("Reader name is not a valid logical type name.");
    }
 catch (    SchemaProjectorException e) {
    }
    try {
      SchemaProjector.project(Schema.BOOLEAN_SCHEMA,null,logicalTypeSchema);
      fail("Cannot project non-logical types to logical types.");
    }
 catch (    SchemaProjectorException e) {
    }
  }
}

</code></pre>

<br>
<pre class="type-8 type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPrimitiveTypeProjection() throws Exception {
  Object projected;
  projected=SchemaProjector.project(Schema.BOOLEAN_SCHEMA,false,Schema.BOOLEAN_SCHEMA);
  assertEquals(false,projected);
  byte[] bytes={(byte)1,(byte)2};
  projected=SchemaProjector.project(Schema.BYTES_SCHEMA,bytes,Schema.BYTES_SCHEMA);
  assertEquals(bytes,projected);
  projected=SchemaProjector.project(Schema.STRING_SCHEMA,"abc",Schema.STRING_SCHEMA);
  assertEquals("abc",projected);
  projected=SchemaProjector.project(Schema.BOOLEAN_SCHEMA,false,Schema.OPTIONAL_BOOLEAN_SCHEMA);
  assertEquals(false,projected);
  projected=SchemaProjector.project(Schema.BYTES_SCHEMA,bytes,Schema.OPTIONAL_BYTES_SCHEMA);
  assertEquals(bytes,projected);
  projected=SchemaProjector.project(Schema.STRING_SCHEMA,"abc",Schema.OPTIONAL_STRING_SCHEMA);
  assertEquals("abc",projected);
  try {
    SchemaProjector.project(Schema.OPTIONAL_BOOLEAN_SCHEMA,false,Schema.BOOLEAN_SCHEMA);
    fail("Cannot project optional schema to schema with no default value.");
  }
 catch (  DataException e) {
  }
  try {
    SchemaProjector.project(Schema.OPTIONAL_BYTES_SCHEMA,bytes,Schema.BYTES_SCHEMA);
    fail("Cannot project optional schema to schema with no default value.");
  }
 catch (  DataException e) {
  }
  try {
    SchemaProjector.project(Schema.OPTIONAL_STRING_SCHEMA,"abc",Schema.STRING_SCHEMA);
    fail("Cannot project optional schema to schema with no default value.");
  }
 catch (  DataException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-10 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStructAddField() throws Exception {
  Schema source=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).build();
  Struct sourceStruct=new Struct(source);
  sourceStruct.put("field",1);
  Schema target=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).field("field2",SchemaBuilder.int32().defaultValue(123).build()).build();
  Struct targetStruct=(Struct)SchemaProjector.project(source,sourceStruct,target);
  assertEquals(1,(int)targetStruct.getInt32("field"));
  assertEquals(123,(int)targetStruct.getInt32("field2"));
  Schema incompatibleTargetSchema=SchemaBuilder.struct().field("field",Schema.INT32_SCHEMA).field("field2",Schema.INT32_SCHEMA).build();
  try {
    SchemaProjector.project(source,sourceStruct,incompatibleTargetSchema);
    fail("Incompatible schema.");
  }
 catch (  DataException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-13 type-14 type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNumericTypeProjection() throws Exception {
  Schema[] promotableSchemas={Schema.INT8_SCHEMA,Schema.INT16_SCHEMA,Schema.INT32_SCHEMA,Schema.INT64_SCHEMA,Schema.FLOAT32_SCHEMA,Schema.FLOAT64_SCHEMA};
  Schema[] promotableOptionalSchemas={Schema.OPTIONAL_INT8_SCHEMA,Schema.OPTIONAL_INT16_SCHEMA,Schema.OPTIONAL_INT32_SCHEMA,Schema.OPTIONAL_INT64_SCHEMA,Schema.OPTIONAL_FLOAT32_SCHEMA,Schema.OPTIONAL_FLOAT64_SCHEMA};
  Object[] values={(byte)127,(short)255,32767,327890L,1.2F,1.2345};
  Map<Object,List<?>> expectedProjected=new HashMap<>();
  expectedProjected.put(values[0],Arrays.asList((byte)127,(short)127,127,127L,127.F,127.));
  expectedProjected.put(values[1],Arrays.asList((short)255,255,255L,255.F,255.));
  expectedProjected.put(values[2],Arrays.asList(32767,32767L,32767.F,32767.));
  expectedProjected.put(values[3],Arrays.asList(327890L,327890.F,327890.));
  expectedProjected.put(values[4],Arrays.asList(1.2F,1.2));
  expectedProjected.put(values[5],Arrays.asList(1.2345));
  Object promoted;
  for (int i=0; i < promotableSchemas.length; ++i) {
    Schema source=promotableSchemas[i];
    List<?> expected=expectedProjected.get(values[i]);
    for (int j=i; j < promotableSchemas.length; ++j) {
      Schema target=promotableSchemas[j];
      promoted=SchemaProjector.project(source,values[i],target);
      if (target.type() == Type.FLOAT64) {
        assertEquals((Double)(expected.get(j - i)),(double)promoted,1e-6);
      }
 else {
        assertEquals(expected.get(j - i),promoted);
      }
    }
    for (int j=i; j < promotableOptionalSchemas.length; ++j) {
      Schema target=promotableOptionalSchemas[j];
      promoted=SchemaProjector.project(source,values[i],target);
      if (target.type() == Type.FLOAT64) {
        assertEquals((Double)(expected.get(j - i)),(double)promoted,1e-6);
      }
 else {
        assertEquals(expected.get(j - i),promoted);
      }
    }
  }
  for (int i=0; i < promotableOptionalSchemas.length; ++i) {
    Schema source=promotableSchemas[i];
    List<?> expected=expectedProjected.get(values[i]);
    for (int j=i; j < promotableOptionalSchemas.length; ++j) {
      Schema target=promotableOptionalSchemas[j];
      promoted=SchemaProjector.project(source,values[i],target);
      if (target.type() == Type.FLOAT64) {
        assertEquals((Double)(expected.get(j - i)),(double)promoted,1e-6);
      }
 else {
        assertEquals(expected.get(j - i),promoted);
      }
    }
  }
  Schema[] nonPromotableSchemas={Schema.BOOLEAN_SCHEMA,Schema.BYTES_SCHEMA,Schema.STRING_SCHEMA};
  for (  Schema promotableSchema : promotableSchemas) {
    for (    Schema nonPromotableSchema : nonPromotableSchemas) {
      Object dummy=new Object();
      try {
        SchemaProjector.project(promotableSchema,dummy,nonPromotableSchema);
        fail("Cannot promote " + promotableSchema.type() + " to "+ nonPromotableSchema.type());
      }
 catch (      DataException e) {
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.data.StructTest </h4><pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testComplexStruct(){
  List<Byte> array=Arrays.asList((byte)1,(byte)2);
  Map<Integer,String> map=Collections.singletonMap(1,"string");
  Struct struct=new Struct(NESTED_SCHEMA).put("array",array).put("map",map).put("nested",new Struct(NESTED_CHILD_SCHEMA).put("int8",(byte)12));
  List<Byte> arrayExtracted=struct.getArray("array");
  assertEquals(array,arrayExtracted);
  Map<Byte,Byte> mapExtracted=struct.getMap("map");
  assertEquals(map,mapExtracted);
  assertEquals((byte)12,struct.getStruct("nested").get("int8"));
  struct.validate();
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEquals(){
  Struct struct1=new Struct(FLAT_STRUCT_SCHEMA).put("int8",(byte)12).put("int16",(short)12).put("int32",12).put("int64",(long)12).put("float32",12.f).put("float64",12.).put("boolean",true).put("string","foobar").put("bytes",ByteBuffer.wrap("foobar".getBytes()));
  Struct struct2=new Struct(FLAT_STRUCT_SCHEMA).put("int8",(byte)12).put("int16",(short)12).put("int32",12).put("int64",(long)12).put("float32",12.f).put("float64",12.).put("boolean",true).put("string","foobar").put("bytes",ByteBuffer.wrap("foobar".getBytes()));
  Struct struct3=new Struct(FLAT_STRUCT_SCHEMA).put("int8",(byte)12).put("int16",(short)12).put("int32",12).put("int64",(long)12).put("float32",12.f).put("float64",12.).put("boolean",true).put("string","mismatching string").put("bytes",ByteBuffer.wrap("foobar".getBytes()));
  assertEquals(struct1,struct2);
  assertNotEquals(struct1,struct3);
  List<Byte> array=Arrays.asList((byte)1,(byte)2);
  Map<Integer,String> map=Collections.singletonMap(1,"string");
  struct1=new Struct(NESTED_SCHEMA).put("array",array).put("map",map).put("nested",new Struct(NESTED_CHILD_SCHEMA).put("int8",(byte)12));
  List<Byte> array2=Arrays.asList((byte)1,(byte)2);
  Map<Integer,String> map2=Collections.singletonMap(1,"string");
  struct2=new Struct(NESTED_SCHEMA).put("array",array2).put("map",map2).put("nested",new Struct(NESTED_CHILD_SCHEMA).put("int8",(byte)12));
  List<Byte> array3=Arrays.asList((byte)1,(byte)2,(byte)3);
  Map<Integer,String> map3=Collections.singletonMap(2,"string");
  struct3=new Struct(NESTED_SCHEMA).put("array",array3).put("map",map3).put("nested",new Struct(NESTED_CHILD_SCHEMA).put("int8",(byte)13));
  assertEquals(struct1,struct2);
  assertNotEquals(struct1,struct3);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.json.JsonConverterTest </h4><pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void timeToJson() throws IOException {
  GregorianCalendar calendar=new GregorianCalendar(1970,Calendar.JANUARY,1,0,0,0);
  calendar.setTimeZone(TimeZone.getTimeZone("UTC"));
  calendar.add(Calendar.MILLISECOND,14400000);
  java.util.Date date=calendar.getTime();
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Time.SCHEMA,date));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"int32\", \"optional\": false, \"name\": \"org.apache.kafka.connect.data.Time\", \"version\": 1 }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  JsonNode payload=converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME);
  assertTrue(payload.isInt());
  assertEquals(14400000,payload.longValue());
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dateToJson() throws IOException {
  GregorianCalendar calendar=new GregorianCalendar(1970,Calendar.JANUARY,1,0,0,0);
  calendar.setTimeZone(TimeZone.getTimeZone("UTC"));
  calendar.add(Calendar.DATE,10000);
  java.util.Date date=calendar.getTime();
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Date.SCHEMA,date));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"int32\", \"optional\": false, \"name\": \"org.apache.kafka.connect.data.Date\", \"version\": 1 }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  JsonNode payload=converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME);
  assertTrue(payload.isInt());
  assertEquals(10000,payload.intValue());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void timestampToConnect(){
  Schema schema=Timestamp.SCHEMA;
  GregorianCalendar calendar=new GregorianCalendar(1970,Calendar.JANUARY,1,0,0,0);
  calendar.setTimeZone(TimeZone.getTimeZone("UTC"));
  calendar.add(Calendar.MILLISECOND,2000000000);
  calendar.add(Calendar.MILLISECOND,2000000000);
  java.util.Date reference=calendar.getTime();
  String msg="{ \"schema\": { \"type\": \"int64\", \"name\": \"org.apache.kafka.connect.data.Timestamp\", \"version\": 1 }, \"payload\": 4000000000 }";
  SchemaAndValue schemaAndValue=converter.toConnectData(TOPIC,msg.getBytes());
  java.util.Date converted=(java.util.Date)schemaAndValue.value();
  assertEquals(schema,schemaAndValue.schema());
  assertEquals(reference,converted);
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void decimalToConnect(){
  Schema schema=Decimal.schema(2);
  BigDecimal reference=new BigDecimal(new BigInteger("156"),2);
  String msg="{ \"schema\": { \"type\": \"bytes\", \"name\": \"org.apache.kafka.connect.data.Decimal\", \"version\": 1, \"parameters\": { \"scale\": \"2\" } }, \"payload\": \"AJw=\" }";
  SchemaAndValue schemaAndValue=converter.toConnectData(TOPIC,msg.getBytes());
  BigDecimal converted=(BigDecimal)schemaAndValue.value();
  assertEquals(schema,schemaAndValue.schema());
  assertEquals(reference,converted);
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void timeToConnect(){
  Schema schema=Time.SCHEMA;
  GregorianCalendar calendar=new GregorianCalendar(1970,Calendar.JANUARY,1,0,0,0);
  calendar.setTimeZone(TimeZone.getTimeZone("UTC"));
  calendar.add(Calendar.MILLISECOND,14400000);
  java.util.Date reference=calendar.getTime();
  String msg="{ \"schema\": { \"type\": \"int32\", \"name\": \"org.apache.kafka.connect.data.Time\", \"version\": 1 }, \"payload\": 14400000 }";
  SchemaAndValue schemaAndValue=converter.toConnectData(TOPIC,msg.getBytes());
  java.util.Date converted=(java.util.Date)schemaAndValue.value();
  assertEquals(schema,schemaAndValue.schema());
  assertEquals(reference,converted);
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCacheSchemaToJsonConversion(){
  Cache<Schema,ObjectNode> cache=Whitebox.getInternalState(converter,"fromConnectSchemaCache");
  assertEquals(0,cache.size());
  converter.fromConnectData(TOPIC,SchemaBuilder.bool().build(),true);
  assertEquals(1,cache.size());
  converter.fromConnectData(TOPIC,SchemaBuilder.bool().build(),true);
  assertEquals(1,cache.size());
  converter.fromConnectData(TOPIC,SchemaBuilder.bool().optional().build(),true);
  assertEquals(2,cache.size());
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void timestampToJson() throws IOException {
  GregorianCalendar calendar=new GregorianCalendar(1970,Calendar.JANUARY,1,0,0,0);
  calendar.setTimeZone(TimeZone.getTimeZone("UTC"));
  calendar.add(Calendar.MILLISECOND,2000000000);
  calendar.add(Calendar.MILLISECOND,2000000000);
  java.util.Date date=calendar.getTime();
  JsonNode converted=parse(converter.fromConnectData(TOPIC,Timestamp.SCHEMA,date));
  validateEnvelope(converted);
  assertEquals(parse("{ \"type\": \"int64\", \"optional\": false, \"name\": \"org.apache.kafka.connect.data.Timestamp\", \"version\": 1 }"),converted.get(JsonSchema.ENVELOPE_SCHEMA_FIELD_NAME));
  JsonNode payload=converted.get(JsonSchema.ENVELOPE_PAYLOAD_FIELD_NAME);
  assertTrue(payload.isLong());
  assertEquals(4000000000L,payload.longValue());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void bytesToConnect() throws UnsupportedEncodingException {
  ByteBuffer reference=ByteBuffer.wrap("test-string".getBytes("UTF-8"));
  String msg="{ \"schema\": { \"type\": \"bytes\" }, \"payload\": \"dGVzdC1zdHJpbmc=\" }";
  SchemaAndValue schemaAndValue=converter.toConnectData(TOPIC,msg.getBytes());
  ByteBuffer converted=ByteBuffer.wrap((byte[])schemaAndValue.value());
  assertEquals(reference,converted);
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCacheSchemaToConnectConversion(){
  Cache<JsonNode,Schema> cache=Whitebox.getInternalState(converter,"toConnectSchemaCache");
  assertEquals(0,cache.size());
  converter.toConnectData(TOPIC,"{ \"schema\": { \"type\": \"boolean\" }, \"payload\": true }".getBytes());
  assertEquals(1,cache.size());
  converter.toConnectData(TOPIC,"{ \"schema\": { \"type\": \"boolean\" }, \"payload\": true }".getBytes());
  assertEquals(1,cache.size());
  converter.toConnectData(TOPIC,"{ \"schema\": { \"type\": \"boolean\", \"optional\": true }, \"payload\": true }".getBytes());
  assertEquals(2,cache.size());
  converter.toConnectData(TOPIC,"{ \"schema\": { \"type\": \"boolean\", \"optional\": false }, \"payload\": true }".getBytes());
  assertEquals(3,cache.size());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void dateToConnect(){
  Schema schema=Date.SCHEMA;
  GregorianCalendar calendar=new GregorianCalendar(1970,Calendar.JANUARY,1,0,0,0);
  calendar.setTimeZone(TimeZone.getTimeZone("UTC"));
  calendar.add(Calendar.DATE,10000);
  java.util.Date reference=calendar.getTime();
  String msg="{ \"schema\": { \"type\": \"int32\", \"name\": \"org.apache.kafka.connect.data.Date\", \"version\": 1 }, \"payload\": 10000 }";
  SchemaAndValue schemaAndValue=converter.toConnectData(TOPIC,msg.getBytes());
  java.util.Date converted=(java.util.Date)schemaAndValue.value();
  assertEquals(schema,schemaAndValue.schema());
  assertEquals(reference,converted);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.runtime.distributed.DistributedHerderTest </h4><pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessors() throws Exception {
  EasyMock.expect(member.memberId()).andStubReturn("leader");
  expectRebalance(1,Collections.<String>emptyList(),Collections.<ConnectorTaskId>emptyList());
  expectPostRebalanceCatchup(SNAPSHOT);
  member.wakeup();
  PowerMock.expectLastCall().anyTimes();
  member.poll(EasyMock.anyInt());
  PowerMock.expectLastCall();
  PowerMock.replayAll();
  FutureCallback<Collection<String>> listConnectorsCb=new FutureCallback<>();
  herder.connectors(listConnectorsCb);
  FutureCallback<ConnectorInfo> connectorInfoCb=new FutureCallback<>();
  herder.connectorInfo(CONN1,connectorInfoCb);
  FutureCallback<Map<String,String>> connectorConfigCb=new FutureCallback<>();
  herder.connectorConfig(CONN1,connectorConfigCb);
  FutureCallback<List<TaskInfo>> taskConfigsCb=new FutureCallback<>();
  herder.taskConfigs(CONN1,taskConfigsCb);
  herder.tick();
  assertTrue(listConnectorsCb.isDone());
  assertEquals(Collections.singleton(CONN1),listConnectorsCb.get());
  assertTrue(connectorInfoCb.isDone());
  ConnectorInfo info=new ConnectorInfo(CONN1,CONN1_CONFIG,Arrays.asList(TASK0,TASK1,TASK2));
  assertEquals(info,connectorInfoCb.get());
  assertTrue(connectorConfigCb.isDone());
  assertEquals(CONN1_CONFIG,connectorConfigCb.get());
  assertTrue(taskConfigsCb.isDone());
  assertEquals(Arrays.asList(new TaskInfo(TASK0,TASK_CONFIG),new TaskInfo(TASK1,TASK_CONFIG),new TaskInfo(TASK2,TASK_CONFIG)),taskConfigsCb.get());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.runtime.distributed.WorkerCoordinatorTest </h4><pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLeaderPerformAssignment2() throws Exception {
  EasyMock.expect(configStorage.snapshot()).andReturn(configState2);
  PowerMock.replayAll();
  coordinator.metadata();
  Map<String,ByteBuffer> configs=new HashMap<>();
  configs.put("leader",ConnectProtocol.serializeMetadata(new ConnectProtocol.WorkerState(LEADER_URL,1L)));
  configs.put("member",ConnectProtocol.serializeMetadata(new ConnectProtocol.WorkerState(MEMBER_URL,1L)));
  Map<String,ByteBuffer> result=Whitebox.invokeMethod(coordinator,"performAssignment","leader",WorkerCoordinator.DEFAULT_SUBPROTOCOL,configs);
  ConnectProtocol.Assignment leaderAssignment=ConnectProtocol.deserializeAssignment(result.get("leader"));
  assertEquals(false,leaderAssignment.failed());
  assertEquals("leader",leaderAssignment.leader());
  assertEquals(1,leaderAssignment.offset());
  assertEquals(Collections.singletonList(connectorId),leaderAssignment.connectors());
  assertEquals(Arrays.asList(taskId1,taskId2),leaderAssignment.tasks());
  ConnectProtocol.Assignment memberAssignment=ConnectProtocol.deserializeAssignment(result.get("member"));
  assertEquals(false,memberAssignment.failed());
  assertEquals("leader",memberAssignment.leader());
  assertEquals(1,memberAssignment.offset());
  assertEquals(Collections.singletonList(connectorId2),memberAssignment.connectors());
  assertEquals(Collections.singletonList(taskId0),memberAssignment.tasks());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLeaderPerformAssignment1() throws Exception {
  EasyMock.expect(configStorage.snapshot()).andReturn(configState1);
  PowerMock.replayAll();
  coordinator.metadata();
  Map<String,ByteBuffer> configs=new HashMap<>();
  configs.put("leader",ConnectProtocol.serializeMetadata(new ConnectProtocol.WorkerState(LEADER_URL,1L)));
  configs.put("member",ConnectProtocol.serializeMetadata(new ConnectProtocol.WorkerState(MEMBER_URL,1L)));
  Map<String,ByteBuffer> result=Whitebox.invokeMethod(coordinator,"performAssignment","leader",WorkerCoordinator.DEFAULT_SUBPROTOCOL,configs);
  ConnectProtocol.Assignment leaderAssignment=ConnectProtocol.deserializeAssignment(result.get("leader"));
  assertEquals(false,leaderAssignment.failed());
  assertEquals("leader",leaderAssignment.leader());
  assertEquals(1,leaderAssignment.offset());
  assertEquals(Collections.singletonList(connectorId),leaderAssignment.connectors());
  assertEquals(Collections.emptyList(),leaderAssignment.tasks());
  ConnectProtocol.Assignment memberAssignment=ConnectProtocol.deserializeAssignment(result.get("member"));
  assertEquals(false,memberAssignment.failed());
  assertEquals("leader",memberAssignment.leader());
  assertEquals(1,memberAssignment.offset());
  assertEquals(Collections.emptyList(),memberAssignment.connectors());
  assertEquals(Collections.singletonList(taskId0),memberAssignment.tasks());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMetadata(){
  EasyMock.expect(configStorage.snapshot()).andReturn(configState1);
  PowerMock.replayAll();
  List<ProtocolMetadata> serialized=coordinator.metadata();
  assertEquals(1,serialized.size());
  ProtocolMetadata defaultMetadata=serialized.get(0);
  assertEquals(WorkerCoordinator.DEFAULT_SUBPROTOCOL,defaultMetadata.name());
  ConnectProtocol.WorkerState state=ConnectProtocol.deserializeMetadata(defaultMetadata.metadata());
  assertEquals(1,state.offset());
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.storage.KafkaConfigStorageTest </h4><pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutTaskConfigs() throws Exception {
  expectConfigure();
  expectStart(Collections.EMPTY_LIST,Collections.EMPTY_MAP);
  expectReadToEnd(new LinkedHashMap<String,byte[]>());
  expectConvertWriteRead(TASK_CONFIG_KEYS.get(0),KafkaConfigStorage.TASK_CONFIGURATION_V0,CONFIGS_SERIALIZED.get(0),"properties",SAMPLE_CONFIGS.get(0));
  expectConvertWriteRead(TASK_CONFIG_KEYS.get(1),KafkaConfigStorage.TASK_CONFIGURATION_V0,CONFIGS_SERIALIZED.get(1),"properties",SAMPLE_CONFIGS.get(1));
  expectReadToEnd(new LinkedHashMap<String,byte[]>());
  expectConvertWriteRead(COMMIT_TASKS_CONFIG_KEYS.get(0),KafkaConfigStorage.CONNECTOR_TASKS_COMMIT_V0,CONFIGS_SERIALIZED.get(2),"tasks",2);
  tasksReconfiguredCallback.onCompletion(null,Arrays.asList(TASK_IDS.get(0),TASK_IDS.get(1)));
  EasyMock.expectLastCall();
  LinkedHashMap<String,byte[]> serializedConfigs=new LinkedHashMap<>();
  serializedConfigs.put(TASK_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(0));
  serializedConfigs.put(TASK_CONFIG_KEYS.get(1),CONFIGS_SERIALIZED.get(1));
  serializedConfigs.put(COMMIT_TASKS_CONFIG_KEYS.get(0),CONFIGS_SERIALIZED.get(2));
  expectReadToEnd(serializedConfigs);
  expectStop();
  PowerMock.replayAll();
  configStorage.configure(DEFAULT_CONFIG_STORAGE_PROPS);
  configStorage.start();
  whiteboxAddConnector(CONNECTOR_IDS.get(0),SAMPLE_CONFIGS.get(0),Collections.EMPTY_LIST);
  ClusterConfigState configState=configStorage.snapshot();
  assertEquals(-1,configState.offset());
  assertNull(configState.taskConfig(TASK_IDS.get(0)));
  assertNull(configState.taskConfig(TASK_IDS.get(1)));
  Map<ConnectorTaskId,Map<String,String>> taskConfigs=new HashMap<>();
  taskConfigs.put(TASK_IDS.get(0),SAMPLE_CONFIGS.get(0));
  taskConfigs.put(TASK_IDS.get(1),SAMPLE_CONFIGS.get(1));
  configStorage.putTaskConfigs(taskConfigs);
  configState=configStorage.snapshot();
  assertEquals(3,configState.offset());
  String connectorName=CONNECTOR_IDS.get(0);
  assertEquals(Arrays.asList(connectorName),new ArrayList<>(configState.connectors()));
  assertEquals(Arrays.asList(TASK_IDS.get(0),TASK_IDS.get(1)),configState.tasks(connectorName));
  assertEquals(SAMPLE_CONFIGS.get(0),configState.taskConfig(TASK_IDS.get(0)));
  assertEquals(SAMPLE_CONFIGS.get(1),configState.taskConfig(TASK_IDS.get(1)));
  assertEquals(Collections.EMPTY_SET,configState.inconsistentConnectors());
  configStorage.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.storage.KafkaOffsetBackingStoreTest </h4><pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSet() throws Exception {
  expectConfigure();
  expectStart(Collections.EMPTY_LIST);
  expectStop();
  final Capture<Callback<Void>> firstGetReadToEndCallback=EasyMock.newCapture();
  storeLog.readToEnd(EasyMock.capture(firstGetReadToEndCallback));
  PowerMock.expectLastCall().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      firstGetReadToEndCallback.getValue().onCompletion(null,null);
      return null;
    }
  }
);
  Capture<org.apache.kafka.clients.producer.Callback> callback0=EasyMock.newCapture();
  storeLog.send(EasyMock.aryEq(TP0_KEY.array()),EasyMock.aryEq(TP0_VALUE.array()),EasyMock.capture(callback0));
  PowerMock.expectLastCall();
  Capture<org.apache.kafka.clients.producer.Callback> callback1=EasyMock.newCapture();
  storeLog.send(EasyMock.aryEq(TP1_KEY.array()),EasyMock.aryEq(TP1_VALUE.array()),EasyMock.capture(callback1));
  PowerMock.expectLastCall();
  final Capture<Callback<Void>> secondGetReadToEndCallback=EasyMock.newCapture();
  storeLog.readToEnd(EasyMock.capture(secondGetReadToEndCallback));
  PowerMock.expectLastCall().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      capturedConsumedCallback.getValue().onCompletion(null,new ConsumerRecord<>(TOPIC,0,0,TP0_KEY.array(),TP0_VALUE.array()));
      capturedConsumedCallback.getValue().onCompletion(null,new ConsumerRecord<>(TOPIC,1,0,TP1_KEY.array(),TP1_VALUE.array()));
      secondGetReadToEndCallback.getValue().onCompletion(null,null);
      return null;
    }
  }
);
  final Capture<Callback<Void>> thirdGetReadToEndCallback=EasyMock.newCapture();
  storeLog.readToEnd(EasyMock.capture(thirdGetReadToEndCallback));
  PowerMock.expectLastCall().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      capturedConsumedCallback.getValue().onCompletion(null,new ConsumerRecord<>(TOPIC,0,1,TP0_KEY.array(),TP0_VALUE_NEW.array()));
      capturedConsumedCallback.getValue().onCompletion(null,new ConsumerRecord<>(TOPIC,1,1,TP1_KEY.array(),TP1_VALUE_NEW.array()));
      thirdGetReadToEndCallback.getValue().onCompletion(null,null);
      return null;
    }
  }
);
  PowerMock.replayAll();
  store.configure(DEFAULT_PROPS);
  store.start();
  final AtomicBoolean getInvokedAndPassed=new AtomicBoolean(false);
  store.get(Arrays.asList(TP0_KEY,TP1_KEY),new Callback<Map<ByteBuffer,ByteBuffer>>(){
    @Override public void onCompletion(    Throwable error,    Map<ByteBuffer,ByteBuffer> result){
      assertEquals(null,result.get(TP0_KEY));
      assertEquals(null,result.get(TP1_KEY));
      getInvokedAndPassed.set(true);
    }
  }
).get(10000,TimeUnit.MILLISECONDS);
  assertTrue(getInvokedAndPassed.get());
  Map<ByteBuffer,ByteBuffer> toSet=new HashMap<>();
  toSet.put(TP0_KEY,TP0_VALUE);
  toSet.put(TP1_KEY,TP1_VALUE);
  final AtomicBoolean invoked=new AtomicBoolean(false);
  Future<Void> setFuture=store.set(toSet,new Callback<Void>(){
    @Override public void onCompletion(    Throwable error,    Void result){
      invoked.set(true);
    }
  }
);
  assertFalse(setFuture.isDone());
  callback1.getValue().onCompletion(null,null);
  assertFalse(invoked.get());
  callback0.getValue().onCompletion(null,null);
  setFuture.get(10000,TimeUnit.MILLISECONDS);
  assertTrue(invoked.get());
  final AtomicBoolean secondGetInvokedAndPassed=new AtomicBoolean(false);
  store.get(Arrays.asList(TP0_KEY,TP1_KEY),new Callback<Map<ByteBuffer,ByteBuffer>>(){
    @Override public void onCompletion(    Throwable error,    Map<ByteBuffer,ByteBuffer> result){
      assertEquals(TP0_VALUE,result.get(TP0_KEY));
      assertEquals(TP1_VALUE,result.get(TP1_KEY));
      secondGetInvokedAndPassed.set(true);
    }
  }
).get(10000,TimeUnit.MILLISECONDS);
  assertTrue(secondGetInvokedAndPassed.get());
  final AtomicBoolean thirdGetInvokedAndPassed=new AtomicBoolean(false);
  store.get(Arrays.asList(TP0_KEY,TP1_KEY),new Callback<Map<ByteBuffer,ByteBuffer>>(){
    @Override public void onCompletion(    Throwable error,    Map<ByteBuffer,ByteBuffer> result){
      assertEquals(TP0_VALUE_NEW,result.get(TP0_KEY));
      assertEquals(TP1_VALUE_NEW,result.get(TP1_KEY));
      thirdGetInvokedAndPassed.set(true);
    }
  }
).get(10000,TimeUnit.MILLISECONDS);
  assertTrue(thirdGetInvokedAndPassed.get());
  store.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-8 type-10 type-9 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetFailure() throws Exception {
  expectConfigure();
  expectStart(Collections.EMPTY_LIST);
  expectStop();
  Capture<org.apache.kafka.clients.producer.Callback> callback0=EasyMock.newCapture();
  storeLog.send(EasyMock.aryEq(TP0_KEY.array()),EasyMock.aryEq(TP0_VALUE.array()),EasyMock.capture(callback0));
  PowerMock.expectLastCall();
  Capture<org.apache.kafka.clients.producer.Callback> callback1=EasyMock.newCapture();
  storeLog.send(EasyMock.aryEq(TP1_KEY.array()),EasyMock.aryEq(TP1_VALUE.array()),EasyMock.capture(callback1));
  PowerMock.expectLastCall();
  Capture<org.apache.kafka.clients.producer.Callback> callback2=EasyMock.newCapture();
  storeLog.send(EasyMock.aryEq(TP2_KEY.array()),EasyMock.aryEq(TP2_VALUE.array()),EasyMock.capture(callback2));
  PowerMock.expectLastCall();
  PowerMock.replayAll();
  store.configure(DEFAULT_PROPS);
  store.start();
  Map<ByteBuffer,ByteBuffer> toSet=new HashMap<>();
  toSet.put(TP0_KEY,TP0_VALUE);
  toSet.put(TP1_KEY,TP1_VALUE);
  toSet.put(TP2_KEY,TP2_VALUE);
  final AtomicBoolean invoked=new AtomicBoolean(false);
  final AtomicBoolean invokedFailure=new AtomicBoolean(false);
  Future<Void> setFuture=store.set(toSet,new Callback<Void>(){
    @Override public void onCompletion(    Throwable error,    Void result){
      invoked.set(true);
      if (error != null)       invokedFailure.set(true);
    }
  }
);
  assertFalse(setFuture.isDone());
  callback1.getValue().onCompletion(null,null);
  assertFalse(invoked.get());
  callback2.getValue().onCompletion(null,new KafkaException("bogus error"));
  assertTrue(invoked.get());
  assertTrue(invokedFailure.get());
  callback0.getValue().onCompletion(null,null);
  try {
    setFuture.get(10000,TimeUnit.MILLISECONDS);
    fail("Should have seen KafkaException thrown when waiting on KafkaOffsetBackingStore.set() future");
  }
 catch (  ExecutionException e) {
    assertNotNull(e.getCause());
    assertTrue(e.getCause() instanceof KafkaException);
  }
  store.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReloadOnStart() throws Exception {
  expectConfigure();
  expectStart(Arrays.asList(new ConsumerRecord<>(TOPIC,0,0,TP0_KEY.array(),TP0_VALUE.array()),new ConsumerRecord<>(TOPIC,1,0,TP1_KEY.array(),TP1_VALUE.array()),new ConsumerRecord<>(TOPIC,0,1,TP0_KEY.array(),TP0_VALUE_NEW.array()),new ConsumerRecord<>(TOPIC,1,1,TP1_KEY.array(),TP1_VALUE_NEW.array())));
  expectStop();
  PowerMock.replayAll();
  store.configure(DEFAULT_PROPS);
  store.start();
  HashMap<ByteBuffer,ByteBuffer> data=Whitebox.getInternalState(store,"data");
  assertEquals(TP0_VALUE_NEW,data.get(TP0_KEY));
  assertEquals(TP1_VALUE_NEW,data.get(TP1_KEY));
  store.stop();
  PowerMock.verifyAll();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.storage.StringConverterTest </h4><pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBytesToStringNonUtf8Encoding() throws UnsupportedEncodingException {
  converter.configure(Collections.singletonMap("converter.encoding","UTF-16"),true);
  SchemaAndValue data=converter.toConnectData(TOPIC,SAMPLE_STRING.getBytes("UTF-16"));
  assertEquals(Schema.OPTIONAL_STRING_SCHEMA,data.schema());
  assertEquals(SAMPLE_STRING,data.value());
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBytesToString(){
  SchemaAndValue data=converter.toConnectData(TOPIC,SAMPLE_STRING.getBytes());
  assertEquals(Schema.OPTIONAL_STRING_SCHEMA,data.schema());
  assertEquals(SAMPLE_STRING,data.value());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.util.ConnectorUtilsTest </h4><pre class="type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGroupPartitions(){
  List<List<Integer>> grouped=ConnectorUtils.groupPartitions(FIVE_ELEMENTS,1);
  assertEquals(Arrays.asList(FIVE_ELEMENTS),grouped);
  grouped=ConnectorUtils.groupPartitions(FIVE_ELEMENTS,2);
  assertEquals(Arrays.asList(Arrays.asList(1,2,3),Arrays.asList(4,5)),grouped);
  grouped=ConnectorUtils.groupPartitions(FIVE_ELEMENTS,3);
  assertEquals(Arrays.asList(Arrays.asList(1,2),Arrays.asList(3,4),Arrays.asList(5)),grouped);
  grouped=ConnectorUtils.groupPartitions(FIVE_ELEMENTS,5);
  assertEquals(Arrays.asList(Arrays.asList(1),Arrays.asList(2),Arrays.asList(3),Arrays.asList(4),Arrays.asList(5)),grouped);
  grouped=ConnectorUtils.groupPartitions(FIVE_ELEMENTS,7);
  assertEquals(Arrays.asList(Arrays.asList(1),Arrays.asList(2),Arrays.asList(3),Arrays.asList(4),Arrays.asList(5),Collections.EMPTY_LIST,Collections.EMPTY_LIST),grouped);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.connect.util.ShutdownableThreadTest </h4><pre class="type-8 type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testForcibleShutdown() throws InterruptedException {
  final CountDownLatch startedLatch=new CountDownLatch(1);
  ShutdownableThread thread=new ShutdownableThread("forcible"){
    @Override public void execute(){
      try {
        startedLatch.countDown();
        Thread.sleep(100000);
      }
 catch (      InterruptedException e) {
      }
    }
  }
;
  thread.start();
  startedLatch.await();
  thread.forceShutdown();
  thread.join(1000);
  assertFalse(thread.isAlive());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.kstream.internals.WindowedStreamPartitionerTest </h4><pre class="type-8 type-13 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCopartitioning(){
  Random rand=new Random();
  DefaultPartitioner defaultPartitioner=new DefaultPartitioner();
  WindowedSerializer<Integer> windowedSerializer=new WindowedSerializer<>(keySerializer);
  WindowedStreamPartitioner<Integer,String> streamPartitioner=new WindowedStreamPartitioner<>(windowedSerializer);
  for (int k=0; k < 10; k++) {
    Integer key=rand.nextInt();
    byte[] keyBytes=keySerializer.serialize(topicName,key);
    String value=key.toString();
    byte[] valueBytes=valSerializer.serialize(topicName,value);
    Integer expected=defaultPartitioner.partition("topic",key,keyBytes,value,valueBytes,cluster);
    for (int w=0; w < 10; w++) {
      HoppingWindow window=new HoppingWindow(10 * w,20 * w);
      Windowed<Integer> windowedKey=new Windowed<>(key,window);
      Integer actual=streamPartitioner.partition(windowedKey,value,infos.size());
      assertEquals(expected,actual);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.TopologyBuilderTest </h4><pre class="type-8 type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddSinkConnectedWithParent(){
  final TopologyBuilder builder=new TopologyBuilder();
  builder.addSource("source","source-topic");
  builder.addSink("sink","dest-topic","source");
  Map<Integer,Set<String>> nodeGroups=builder.nodeGroups();
  Set<String> nodeGroup=nodeGroups.get(0);
  assertTrue(nodeGroup.contains("sink"));
  assertTrue(nodeGroup.contains("source"));
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAddSinkConnectedWithMultipleParent(){
  final TopologyBuilder builder=new TopologyBuilder();
  builder.addSource("source","source-topic");
  builder.addSource("sourceII","source-topicII");
  builder.addSink("sink","dest-topic","source","sourceII");
  Map<Integer,Set<String>> nodeGroups=builder.nodeGroups();
  Set<String> nodeGroup=nodeGroups.get(0);
  assertTrue(nodeGroup.contains("sink"));
  assertTrue(nodeGroup.contains("source"));
  assertTrue(nodeGroup.contains("sourceII"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.ProcessorStateManagerTest </h4><pre class="type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testLockStateDirectory() throws IOException {
  File baseDir=Files.createTempDirectory(stateDir).toFile();
  try {
    FileLock lock;
    ProcessorStateManager stateMgr=new ProcessorStateManager(jobId,1,noPartitions,baseDir,new MockRestoreConsumer(),false);
    try {
      lock=ProcessorStateManager.lockStateDirectory(baseDir);
      assertNull(lock);
    }
  finally {
      stateMgr.close(Collections.<TopicPartition,Long>emptyMap());
    }
    lock=ProcessorStateManager.lockStateDirectory(baseDir);
    try {
      assertNotNull(lock);
    }
  finally {
      if (lock != null)       lock.release();
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClose() throws IOException {
  File baseDir=Files.createTempDirectory(stateDir).toFile();
  File checkpointFile=new File(baseDir,ProcessorStateManager.CHECKPOINT_FILE_NAME);
  try {
    OffsetCheckpoint oldCheckpoint=new OffsetCheckpoint(checkpointFile);
    oldCheckpoint.write(Collections.<TopicPartition,Long>emptyMap());
    MockRestoreConsumer restoreConsumer=new MockRestoreConsumer();
    restoreConsumer.updatePartitions(persistentStoreTopicName,Utils.mkList(new PartitionInfo(persistentStoreTopicName,1,Node.noNode(),new Node[0],new Node[0])));
    restoreConsumer.updatePartitions(nonPersistentStoreTopicName,Utils.mkList(new PartitionInfo(nonPersistentStoreTopicName,1,Node.noNode(),new Node[0],new Node[0])));
    HashMap<TopicPartition,Long> ackedOffsets=new HashMap<>();
    ackedOffsets.put(new TopicPartition(persistentStoreTopicName,1),123L);
    ackedOffsets.put(new TopicPartition(nonPersistentStoreTopicName,1),456L);
    ackedOffsets.put(new TopicPartition(ProcessorStateManager.storeChangelogTopic(jobId,"otherTopic"),1),789L);
    MockStateStoreSupplier.MockStateStore persistentStore=new MockStateStoreSupplier.MockStateStore(persistentStoreName,true);
    MockStateStoreSupplier.MockStateStore nonPersistentStore=new MockStateStoreSupplier.MockStateStore(nonPersistentStoreName,false);
    ProcessorStateManager stateMgr=new ProcessorStateManager(jobId,1,noPartitions,baseDir,restoreConsumer,false);
    try {
      assertFalse(checkpointFile.exists());
      restoreConsumer.reset();
      stateMgr.register(persistentStore,true,persistentStore.stateRestoreCallback);
      restoreConsumer.reset();
      stateMgr.register(nonPersistentStore,true,nonPersistentStore.stateRestoreCallback);
    }
  finally {
      stateMgr.close(ackedOffsets);
    }
    assertTrue(persistentStore.flushed);
    assertTrue(persistentStore.closed);
    assertTrue(nonPersistentStore.flushed);
    assertTrue(nonPersistentStore.closed);
    assertTrue(checkpointFile.exists());
    OffsetCheckpoint newCheckpoint=new OffsetCheckpoint(checkpointFile);
    Map<TopicPartition,Long> checkpointedOffsets=newCheckpoint.read();
    assertEquals(1,checkpointedOffsets.size());
    assertEquals(new Long(123L + 1L),checkpointedOffsets.get(new TopicPartition(persistentStoreTopicName,1)));
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetStore() throws IOException {
  File baseDir=Files.createTempDirectory(stateDir).toFile();
  try {
    MockRestoreConsumer restoreConsumer=new MockRestoreConsumer();
    restoreConsumer.updatePartitions(nonPersistentStoreTopicName,Utils.mkList(new PartitionInfo(nonPersistentStoreTopicName,1,Node.noNode(),new Node[0],new Node[0])));
    MockStateStoreSupplier.MockStateStore mockStateStore=new MockStateStoreSupplier.MockStateStore(nonPersistentStoreName,false);
    ProcessorStateManager stateMgr=new ProcessorStateManager(jobId,1,noPartitions,baseDir,restoreConsumer,false);
    try {
      stateMgr.register(mockStateStore,true,mockStateStore.stateRestoreCallback);
      assertNull(stateMgr.getStore("noSuchStore"));
      assertEquals(mockStateStore,stateMgr.getStore(nonPersistentStoreName));
    }
  finally {
      stateMgr.close(Collections.<TopicPartition,Long>emptyMap());
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangeLogOffsets() throws IOException {
  File baseDir=Files.createTempDirectory(stateDir).toFile();
  try {
    long lastCheckpointedOffset=10L;
    String storeName1="store1";
    String storeName2="store2";
    String storeName3="store3";
    String storeTopicName1=ProcessorStateManager.storeChangelogTopic(jobId,storeName1);
    String storeTopicName2=ProcessorStateManager.storeChangelogTopic(jobId,storeName2);
    String storeTopicName3=ProcessorStateManager.storeChangelogTopic(jobId,storeName3);
    OffsetCheckpoint checkpoint=new OffsetCheckpoint(new File(baseDir,ProcessorStateManager.CHECKPOINT_FILE_NAME));
    checkpoint.write(Collections.singletonMap(new TopicPartition(storeTopicName1,0),lastCheckpointedOffset));
    MockRestoreConsumer restoreConsumer=new MockRestoreConsumer();
    restoreConsumer.updatePartitions(storeTopicName1,Utils.mkList(new PartitionInfo(storeTopicName1,0,Node.noNode(),new Node[0],new Node[0])));
    restoreConsumer.updatePartitions(storeTopicName2,Utils.mkList(new PartitionInfo(storeTopicName2,0,Node.noNode(),new Node[0],new Node[0])));
    restoreConsumer.updatePartitions(storeTopicName3,Utils.mkList(new PartitionInfo(storeTopicName3,0,Node.noNode(),new Node[0],new Node[0]),new PartitionInfo(storeTopicName3,1,Node.noNode(),new Node[0],new Node[0])));
    TopicPartition partition1=new TopicPartition(storeTopicName1,0);
    TopicPartition partition2=new TopicPartition(storeTopicName2,0);
    TopicPartition partition3=new TopicPartition(storeTopicName3,1);
    Map<TopicPartition,Long> endOffsets=new HashMap<>();
    endOffsets.put(partition1,13L);
    endOffsets.put(partition2,17L);
    restoreConsumer.updateEndOffsets(endOffsets);
    MockStateStoreSupplier.MockStateStore store1=new MockStateStoreSupplier.MockStateStore(storeName1,true);
    MockStateStoreSupplier.MockStateStore store2=new MockStateStoreSupplier.MockStateStore(storeName2,true);
    MockStateStoreSupplier.MockStateStore store3=new MockStateStoreSupplier.MockStateStore(storeName3,true);
    Set<TopicPartition> sourcePartitions=Utils.mkSet(new TopicPartition(storeTopicName3,1));
    ProcessorStateManager stateMgr=new ProcessorStateManager(jobId,0,sourcePartitions,baseDir,restoreConsumer,true);
    try {
      restoreConsumer.reset();
      stateMgr.register(store1,true,store1.stateRestoreCallback);
      stateMgr.register(store2,true,store2.stateRestoreCallback);
      stateMgr.register(store3,true,store3.stateRestoreCallback);
      Map<TopicPartition,Long> changeLogOffsets=stateMgr.checkpointedOffsets();
      assertEquals(3,changeLogOffsets.size());
      assertTrue(changeLogOffsets.containsKey(partition1));
      assertTrue(changeLogOffsets.containsKey(partition2));
      assertTrue(changeLogOffsets.containsKey(partition3));
      assertEquals(lastCheckpointedOffset,(long)changeLogOffsets.get(partition1));
      assertEquals(-1L,(long)changeLogOffsets.get(partition2));
      assertEquals(-1L,(long)changeLogOffsets.get(partition3));
    }
  finally {
      stateMgr.close(Collections.<TopicPartition,Long>emptyMap());
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.ProcessorTopologyTest </h4><pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDrivingStatefulTopology(){
  String storeName="entries";
  driver=new ProcessorTopologyTestDriver(config,createStatefulTopology(storeName),storeName);
  driver.process(INPUT_TOPIC,"key1","value1",STRING_SERIALIZER,STRING_SERIALIZER);
  driver.process(INPUT_TOPIC,"key2","value2",STRING_SERIALIZER,STRING_SERIALIZER);
  driver.process(INPUT_TOPIC,"key3","value3",STRING_SERIALIZER,STRING_SERIALIZER);
  driver.process(INPUT_TOPIC,"key1","value4",STRING_SERIALIZER,STRING_SERIALIZER);
  assertNoOutputRecord(OUTPUT_TOPIC_1);
  KeyValueStore<String,String> store=driver.getKeyValueStore("entries");
  assertEquals("value4",store.get("key1"));
  assertEquals("value2",store.get("key2"));
  assertEquals("value3",store.get("key3"));
  assertNull(store.get("key4"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.StandbyTaskTest </h4><pre class="type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStorePartitions() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    StreamsConfig config=createConfig(baseDir);
    StandbyTask task=new StandbyTask(taskId,jobId,topicPartitions,topology,consumer,restoreStateConsumer,config,null);
    assertEquals(Utils.mkSet(partition2),new HashSet<>(task.changeLogPartitions()));
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void testUpdate() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    StreamsConfig config=createConfig(baseDir);
    StandbyTask task=new StandbyTask(taskId,jobId,topicPartitions,topology,consumer,restoreStateConsumer,config,null);
    restoreStateConsumer.assign(new ArrayList<>(task.changeLogPartitions()));
    for (    ConsumerRecord<Integer,Integer> record : Arrays.asList(new ConsumerRecord<>(partition2.topic(),partition2.partition(),10,1,100),new ConsumerRecord<>(partition2.topic(),partition2.partition(),20,2,100),new ConsumerRecord<>(partition2.topic(),partition2.partition(),30,3,100))) {
      restoreStateConsumer.bufferRecord(record);
    }
    for (    Map.Entry<TopicPartition,Long> entry : task.checkpointedOffsets().entrySet()) {
      TopicPartition partition=entry.getKey();
      long offset=entry.getValue();
      if (offset >= 0) {
        restoreStateConsumer.seek(partition,offset);
      }
 else {
        restoreStateConsumer.seekToBeginning(partition);
      }
    }
    task.update(partition2,restoreStateConsumer.poll(100).records(partition2));
    StandbyContextImpl context=(StandbyContextImpl)task.context();
    MockStateStoreSupplier.MockStateStore store1=(MockStateStoreSupplier.MockStateStore)context.getStateMgr().getStore(storeName1);
    MockStateStoreSupplier.MockStateStore store2=(MockStateStoreSupplier.MockStateStore)context.getStateMgr().getStore(storeName2);
    assertEquals(Collections.emptyList(),store1.keys);
    assertEquals(Utils.mkList(1,2,3),store2.keys);
    task.close();
    File taskDir=new File(StreamThread.makeStateDir(jobId,baseDir.getCanonicalPath()),taskId.toString());
    OffsetCheckpoint checkpoint=new OffsetCheckpoint(new File(taskDir,ProcessorStateManager.CHECKPOINT_FILE_NAME));
    Map<TopicPartition,Long> offsets=checkpoint.read();
    assertEquals(1,offsets.size());
    assertEquals(new Long(30L + 1L),offsets.get(partition2));
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testUpdateKTable() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    consumer.assign(Utils.mkList(ktable));
    Map<TopicPartition,OffsetAndMetadata> committedOffsets=new HashMap<>();
    committedOffsets.put(new TopicPartition(ktable.topic(),ktable.partition()),new OffsetAndMetadata(0L));
    consumer.commitSync(committedOffsets);
    restoreStateConsumer.updatePartitions("ktable1",Utils.mkList(new PartitionInfo("ktable1",0,Node.noNode(),new Node[0],new Node[0]),new PartitionInfo("ktable1",1,Node.noNode(),new Node[0],new Node[0]),new PartitionInfo("ktable1",2,Node.noNode(),new Node[0],new Node[0])));
    StreamsConfig config=createConfig(baseDir);
    StandbyTask task=new StandbyTask(taskId,jobId,ktablePartitions,ktableTopology,consumer,restoreStateConsumer,config,null);
    restoreStateConsumer.assign(new ArrayList<>(task.changeLogPartitions()));
    for (    ConsumerRecord<Integer,Integer> record : Arrays.asList(new ConsumerRecord<>(ktable.topic(),ktable.partition(),10,1,100),new ConsumerRecord<>(ktable.topic(),ktable.partition(),20,2,100),new ConsumerRecord<>(ktable.topic(),ktable.partition(),30,3,100),new ConsumerRecord<>(ktable.topic(),ktable.partition(),40,4,100),new ConsumerRecord<>(ktable.topic(),ktable.partition(),50,5,100))) {
      restoreStateConsumer.bufferRecord(record);
    }
    for (    Map.Entry<TopicPartition,Long> entry : task.checkpointedOffsets().entrySet()) {
      TopicPartition partition=entry.getKey();
      long offset=entry.getValue();
      if (offset >= 0) {
        restoreStateConsumer.seek(partition,offset);
      }
 else {
        restoreStateConsumer.seekToBeginning(partition);
      }
    }
    List<ConsumerRecord<byte[],byte[]>> remaining=task.update(ktable,restoreStateConsumer.poll(100).records(ktable));
    assertEquals(5,remaining.size());
    committedOffsets.put(new TopicPartition(ktable.topic(),ktable.partition()),new OffsetAndMetadata(10L));
    consumer.commitSync(committedOffsets);
    task.commit();
    remaining=task.update(ktable,remaining);
    assertEquals(5,remaining.size());
    committedOffsets.put(new TopicPartition(ktable.topic(),ktable.partition()),new OffsetAndMetadata(11L));
    consumer.commitSync(committedOffsets);
    task.commit();
    remaining=task.update(ktable,remaining);
    assertEquals(4,remaining.size());
    committedOffsets.put(new TopicPartition(ktable.topic(),ktable.partition()),new OffsetAndMetadata(45L));
    consumer.commitSync(committedOffsets);
    task.commit();
    remaining=task.update(ktable,remaining);
    assertEquals(1,remaining.size());
    committedOffsets.put(new TopicPartition(ktable.topic(),ktable.partition()),new OffsetAndMetadata(50L));
    consumer.commitSync(committedOffsets);
    task.commit();
    remaining=task.update(ktable,remaining);
    assertEquals(1,remaining.size());
    committedOffsets.put(new TopicPartition(ktable.topic(),ktable.partition()),new OffsetAndMetadata(60L));
    consumer.commitSync(committedOffsets);
    task.commit();
    remaining=task.update(ktable,remaining);
    assertNull(remaining);
    task.close();
    File taskDir=new File(StreamThread.makeStateDir(jobId,baseDir.getCanonicalPath()),taskId.toString());
    OffsetCheckpoint checkpoint=new OffsetCheckpoint(new File(taskDir,ProcessorStateManager.CHECKPOINT_FILE_NAME));
    Map<TopicPartition,Long> offsets=checkpoint.read();
    assertEquals(1,offsets.size());
    assertEquals(new Long(51L),offsets.get(ktable));
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.StreamPartitionAssignorTest </h4><pre class="type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignWithNewTasks() throws Exception {
  StreamsConfig config=new StreamsConfig(configProps());
  MockProducer<byte[],byte[]> producer=new MockProducer<>(true,serializer,serializer);
  MockConsumer<byte[],byte[]> consumer=new MockConsumer<>(OffsetResetStrategy.EARLIEST);
  MockConsumer<byte[],byte[]> mockRestoreConsumer=new MockConsumer<>(OffsetResetStrategy.LATEST);
  TopologyBuilder builder=new TopologyBuilder();
  builder.addSource("source1","topic1");
  builder.addSource("source2","topic2");
  builder.addSource("source3","topic3");
  builder.addProcessor("processor",new MockProcessorSupplier(),"source1","source2","source3");
  List<String> topics=Utils.mkList("topic1","topic2","topic3");
  Set<TaskId> allTasks=Utils.mkSet(task0,task1,task2,task3);
  final Set<TaskId> prevTasks10=Utils.mkSet(task0);
  final Set<TaskId> prevTasks11=Utils.mkSet(task1);
  final Set<TaskId> prevTasks20=Utils.mkSet(task2);
  UUID uuid1=UUID.randomUUID();
  UUID uuid2=UUID.randomUUID();
  String client1="client1";
  String client2="client2";
  StreamThread thread10=new StreamThread(builder,config,producer,consumer,mockRestoreConsumer,"test",client1,uuid1,new Metrics(),new SystemTime());
  StreamPartitionAssignor partitionAssignor=new StreamPartitionAssignor();
  partitionAssignor.configure(config.getConsumerConfigs(thread10,"test",client1));
  Map<String,PartitionAssignor.Subscription> subscriptions=new HashMap<>();
  subscriptions.put("consumer10",new PartitionAssignor.Subscription(topics,new SubscriptionInfo(uuid1,prevTasks10,Collections.<TaskId>emptySet()).encode()));
  subscriptions.put("consumer11",new PartitionAssignor.Subscription(topics,new SubscriptionInfo(uuid1,prevTasks11,Collections.<TaskId>emptySet()).encode()));
  subscriptions.put("consumer20",new PartitionAssignor.Subscription(topics,new SubscriptionInfo(uuid2,prevTasks20,Collections.<TaskId>emptySet()).encode()));
  Map<String,PartitionAssignor.Assignment> assignments=partitionAssignor.assign(metadata,subscriptions);
  Set<TaskId> allActiveTasks=new HashSet<>();
  Set<TopicPartition> allPartitions=new HashSet<>();
  AssignmentInfo info;
  info=AssignmentInfo.decode(assignments.get("consumer10").userData());
  allActiveTasks.addAll(info.activeTasks);
  allPartitions.addAll(assignments.get("consumer10").partitions());
  info=AssignmentInfo.decode(assignments.get("consumer11").userData());
  allActiveTasks.addAll(info.activeTasks);
  allPartitions.addAll(assignments.get("consumer11").partitions());
  info=AssignmentInfo.decode(assignments.get("consumer20").userData());
  allActiveTasks.addAll(info.activeTasks);
  allPartitions.addAll(assignments.get("consumer20").partitions());
  assertEquals(allTasks,allActiveTasks);
  assertEquals(Utils.mkSet(t1p0,t1p1,t1p2,t2p0,t2p1,t2p2,t3p0,t3p1,t3p2,t3p3),allPartitions);
}

</code></pre>

<br>
<pre class="type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignWithStandbyReplicas() throws Exception {
  Properties props=configProps();
  props.setProperty(StreamsConfig.NUM_STANDBY_REPLICAS_CONFIG,"1");
  StreamsConfig config=new StreamsConfig(props);
  MockProducer<byte[],byte[]> producer=new MockProducer<>(true,serializer,serializer);
  MockConsumer<byte[],byte[]> consumer=new MockConsumer<>(OffsetResetStrategy.EARLIEST);
  MockConsumer<byte[],byte[]> mockRestoreConsumer=new MockConsumer<>(OffsetResetStrategy.LATEST);
  TopologyBuilder builder=new TopologyBuilder();
  builder.addSource("source1","topic1");
  builder.addSource("source2","topic2");
  builder.addProcessor("processor",new MockProcessorSupplier(),"source1","source2");
  List<String> topics=Utils.mkList("topic1","topic2");
  Set<TaskId> allTasks=Utils.mkSet(task0,task1,task2);
  final Set<TaskId> prevTasks10=Utils.mkSet(task0);
  final Set<TaskId> prevTasks11=Utils.mkSet(task1);
  final Set<TaskId> prevTasks20=Utils.mkSet(task2);
  final Set<TaskId> standbyTasks10=Utils.mkSet(task1);
  final Set<TaskId> standbyTasks11=Utils.mkSet(task2);
  final Set<TaskId> standbyTasks20=Utils.mkSet(task0);
  UUID uuid1=UUID.randomUUID();
  UUID uuid2=UUID.randomUUID();
  String client1="client1";
  String client2="client2";
  StreamThread thread10=new StreamThread(builder,config,producer,consumer,mockRestoreConsumer,"test",client1,uuid1,new Metrics(),new SystemTime());
  StreamPartitionAssignor partitionAssignor=new StreamPartitionAssignor();
  partitionAssignor.configure(config.getConsumerConfigs(thread10,"test",client1));
  Map<String,PartitionAssignor.Subscription> subscriptions=new HashMap<>();
  subscriptions.put("consumer10",new PartitionAssignor.Subscription(topics,new SubscriptionInfo(uuid1,prevTasks10,standbyTasks10).encode()));
  subscriptions.put("consumer11",new PartitionAssignor.Subscription(topics,new SubscriptionInfo(uuid1,prevTasks11,standbyTasks11).encode()));
  subscriptions.put("consumer20",new PartitionAssignor.Subscription(topics,new SubscriptionInfo(uuid2,prevTasks20,standbyTasks20).encode()));
  Map<String,PartitionAssignor.Assignment> assignments=partitionAssignor.assign(metadata,subscriptions);
  Set<TaskId> allActiveTasks=new HashSet<>();
  Set<TaskId> allStandbyTasks=new HashSet<>();
  AssignmentInfo info10=checkAssignment(assignments.get("consumer10"));
  allActiveTasks.addAll(info10.activeTasks);
  allStandbyTasks.addAll(info10.standbyTasks.keySet());
  AssignmentInfo info11=checkAssignment(assignments.get("consumer11"));
  allActiveTasks.addAll(info11.activeTasks);
  allStandbyTasks.addAll(info11.standbyTasks.keySet());
  assertEquals(Utils.mkSet(task0,task1),new HashSet<>(allActiveTasks));
  assertEquals(Utils.mkSet(task2),new HashSet<>(allStandbyTasks));
  AssignmentInfo info20=checkAssignment(assignments.get("consumer20"));
  allActiveTasks.addAll(info20.activeTasks);
  allStandbyTasks.addAll(info20.standbyTasks.keySet());
  assertEquals(3,allActiveTasks.size());
  assertEquals(allTasks,allActiveTasks);
  assertEquals(3,allStandbyTasks.size());
  assertEquals(allTasks,allStandbyTasks);
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignBasic() throws Exception {
  StreamsConfig config=new StreamsConfig(configProps());
  MockProducer<byte[],byte[]> producer=new MockProducer<>(true,serializer,serializer);
  MockConsumer<byte[],byte[]> consumer=new MockConsumer<>(OffsetResetStrategy.EARLIEST);
  MockConsumer<byte[],byte[]> mockRestoreConsumer=new MockConsumer<>(OffsetResetStrategy.LATEST);
  TopologyBuilder builder=new TopologyBuilder();
  builder.addSource("source1","topic1");
  builder.addSource("source2","topic2");
  builder.addProcessor("processor",new MockProcessorSupplier(),"source1","source2");
  List<String> topics=Utils.mkList("topic1","topic2");
  Set<TaskId> allTasks=Utils.mkSet(task0,task1,task2);
  final Set<TaskId> prevTasks10=Utils.mkSet(task0);
  final Set<TaskId> prevTasks11=Utils.mkSet(task1);
  final Set<TaskId> prevTasks20=Utils.mkSet(task2);
  final Set<TaskId> standbyTasks10=Utils.mkSet(task1);
  final Set<TaskId> standbyTasks11=Utils.mkSet(task2);
  final Set<TaskId> standbyTasks20=Utils.mkSet(task0);
  UUID uuid1=UUID.randomUUID();
  UUID uuid2=UUID.randomUUID();
  String client1="client1";
  String client2="client2";
  StreamThread thread10=new StreamThread(builder,config,producer,consumer,mockRestoreConsumer,"test",client1,uuid1,new Metrics(),new SystemTime());
  StreamPartitionAssignor partitionAssignor=new StreamPartitionAssignor();
  partitionAssignor.configure(config.getConsumerConfigs(thread10,"test",client1));
  Map<String,PartitionAssignor.Subscription> subscriptions=new HashMap<>();
  subscriptions.put("consumer10",new PartitionAssignor.Subscription(topics,new SubscriptionInfo(uuid1,prevTasks10,standbyTasks10).encode()));
  subscriptions.put("consumer11",new PartitionAssignor.Subscription(topics,new SubscriptionInfo(uuid1,prevTasks11,standbyTasks11).encode()));
  subscriptions.put("consumer20",new PartitionAssignor.Subscription(topics,new SubscriptionInfo(uuid2,prevTasks20,standbyTasks20).encode()));
  Map<String,PartitionAssignor.Assignment> assignments=partitionAssignor.assign(metadata,subscriptions);
  assertEquals(Utils.mkSet(Utils.mkSet(t1p0,t2p0),Utils.mkSet(t1p1,t2p1)),Utils.mkSet(new HashSet<>(assignments.get("consumer10").partitions()),new HashSet<>(assignments.get("consumer11").partitions())));
  assertEquals(Utils.mkSet(t1p2,t2p2),new HashSet<>(assignments.get("consumer20").partitions()));
  Set<TaskId> allActiveTasks=new HashSet<>();
  AssignmentInfo info10=checkAssignment(assignments.get("consumer10"));
  allActiveTasks.addAll(info10.activeTasks);
  AssignmentInfo info11=checkAssignment(assignments.get("consumer11"));
  allActiveTasks.addAll(info11.activeTasks);
  assertEquals(Utils.mkSet(task0,task1),allActiveTasks);
  AssignmentInfo info20=checkAssignment(assignments.get("consumer20"));
  allActiveTasks.addAll(info20.activeTasks);
  assertEquals(3,allActiveTasks.size());
  assertEquals(allTasks,new HashSet<>(allActiveTasks));
  assertEquals(3,allActiveTasks.size());
  assertEquals(allTasks,allActiveTasks);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.StreamTaskTest </h4><pre class="type-8 type-9 type-7 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testPauseResume() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    StreamsConfig config=createConfig(baseDir);
    StreamTask task=new StreamTask(new TaskId(1,1),"jobId",partitions,topology,consumer,producer,restoreStateConsumer,config,null);
    task.addRecords(partition1,records(new ConsumerRecord<>(partition1.topic(),partition1.partition(),10,recordKey,recordValue),new ConsumerRecord<>(partition1.topic(),partition1.partition(),20,recordKey,recordValue)));
    task.addRecords(partition2,records(new ConsumerRecord<>(partition2.topic(),partition2.partition(),35,recordKey,recordValue),new ConsumerRecord<>(partition2.topic(),partition2.partition(),45,recordKey,recordValue),new ConsumerRecord<>(partition2.topic(),partition2.partition(),55,recordKey,recordValue),new ConsumerRecord<>(partition2.topic(),partition2.partition(),65,recordKey,recordValue)));
    assertEquals(5,task.process());
    assertEquals(1,source1.numReceived);
    assertEquals(0,source2.numReceived);
    assertEquals(1,consumer.paused().size());
    assertTrue(consumer.paused().contains(partition2));
    task.addRecords(partition1,records(new ConsumerRecord<>(partition1.topic(),partition1.partition(),30,recordKey,recordValue),new ConsumerRecord<>(partition1.topic(),partition1.partition(),40,recordKey,recordValue),new ConsumerRecord<>(partition1.topic(),partition1.partition(),50,recordKey,recordValue)));
    assertEquals(2,consumer.paused().size());
    assertTrue(consumer.paused().contains(partition1));
    assertTrue(consumer.paused().contains(partition2));
    assertEquals(7,task.process());
    assertEquals(1,source1.numReceived);
    assertEquals(1,source2.numReceived);
    assertEquals(1,consumer.paused().size());
    assertTrue(consumer.paused().contains(partition1));
    assertEquals(6,task.process());
    assertEquals(2,source1.numReceived);
    assertEquals(1,source2.numReceived);
    assertEquals(0,consumer.paused().size());
    task.close();
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void testProcessOrder() throws Exception {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    StreamsConfig config=createConfig(baseDir);
    StreamTask task=new StreamTask(new TaskId(0,0),"jobId",partitions,topology,consumer,producer,restoreStateConsumer,config,null);
    task.addRecords(partition1,records(new ConsumerRecord<>(partition1.topic(),partition1.partition(),10,recordKey,recordValue),new ConsumerRecord<>(partition1.topic(),partition1.partition(),20,recordKey,recordValue),new ConsumerRecord<>(partition1.topic(),partition1.partition(),30,recordKey,recordValue)));
    task.addRecords(partition2,records(new ConsumerRecord<>(partition2.topic(),partition2.partition(),25,recordKey,recordValue),new ConsumerRecord<>(partition2.topic(),partition2.partition(),35,recordKey,recordValue),new ConsumerRecord<>(partition2.topic(),partition2.partition(),45,recordKey,recordValue)));
    assertEquals(5,task.process());
    assertEquals(1,source1.numReceived);
    assertEquals(0,source2.numReceived);
    assertEquals(4,task.process());
    assertEquals(1,source1.numReceived);
    assertEquals(1,source2.numReceived);
    assertEquals(3,task.process());
    assertEquals(2,source1.numReceived);
    assertEquals(1,source2.numReceived);
    assertEquals(2,task.process());
    assertEquals(3,source1.numReceived);
    assertEquals(1,source2.numReceived);
    assertEquals(1,task.process());
    assertEquals(3,source1.numReceived);
    assertEquals(2,source2.numReceived);
    assertEquals(0,task.process());
    assertEquals(3,source1.numReceived);
    assertEquals(3,source2.numReceived);
    task.close();
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.StreamThreadTest </h4><pre class="type-8 type-9 type-7 type-3 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testPartitionAssignmentChange() throws Exception {
  StreamsConfig config=new StreamsConfig(configProps());
  MockProducer<byte[],byte[]> producer=new MockProducer<>(true,serializer,serializer);
  MockConsumer<byte[],byte[]> consumer=new MockConsumer<>(OffsetResetStrategy.EARLIEST);
  final MockConsumer<byte[],byte[]> mockRestoreConsumer=new MockConsumer<>(OffsetResetStrategy.LATEST);
  TopologyBuilder builder=new TopologyBuilder();
  builder.addSource("source1","topic1");
  builder.addSource("source2","topic2");
  builder.addSource("source3","topic3");
  builder.addProcessor("processor",new MockProcessorSupplier(),"source2","source3");
  StreamThread thread=new StreamThread(builder,config,producer,consumer,mockRestoreConsumer,jobId,clientId,processId,new Metrics(),new SystemTime()){
    @Override protected StreamTask createStreamTask(    TaskId id,    Collection<TopicPartition> partitionsForTask){
      ProcessorTopology topology=builder.build(id.topicGroupId);
      return new TestStreamTask(id,jobId,partitionsForTask,topology,consumer,producer,mockRestoreConsumer,config);
    }
  }
;
  initPartitionGrouper(config,thread);
  ConsumerRebalanceListener rebalanceListener=thread.rebalanceListener;
  assertTrue(thread.tasks().isEmpty());
  List<TopicPartition> revokedPartitions;
  List<TopicPartition> assignedPartitions;
  Set<TopicPartition> expectedGroup1;
  Set<TopicPartition> expectedGroup2;
  revokedPartitions=Collections.emptyList();
  assignedPartitions=Collections.singletonList(t1p1);
  expectedGroup1=new HashSet<>(Arrays.asList(t1p1));
  rebalanceListener.onPartitionsRevoked(revokedPartitions);
  rebalanceListener.onPartitionsAssigned(assignedPartitions);
  assertTrue(thread.tasks().containsKey(task1));
  assertEquals(expectedGroup1,thread.tasks().get(task1).partitions());
  assertEquals(1,thread.tasks().size());
  revokedPartitions=assignedPartitions;
  assignedPartitions=Collections.singletonList(t1p2);
  expectedGroup2=new HashSet<>(Arrays.asList(t1p2));
  rebalanceListener.onPartitionsRevoked(revokedPartitions);
  rebalanceListener.onPartitionsAssigned(assignedPartitions);
  assertTrue(thread.tasks().containsKey(task2));
  assertEquals(expectedGroup2,thread.tasks().get(task2).partitions());
  assertEquals(1,thread.tasks().size());
  revokedPartitions=assignedPartitions;
  assignedPartitions=Arrays.asList(t1p1,t1p2);
  expectedGroup1=new HashSet<>(Collections.singleton(t1p1));
  expectedGroup2=new HashSet<>(Collections.singleton(t1p2));
  rebalanceListener.onPartitionsRevoked(revokedPartitions);
  rebalanceListener.onPartitionsAssigned(assignedPartitions);
  assertTrue(thread.tasks().containsKey(task1));
  assertTrue(thread.tasks().containsKey(task2));
  assertEquals(expectedGroup1,thread.tasks().get(task1).partitions());
  assertEquals(expectedGroup2,thread.tasks().get(task2).partitions());
  assertEquals(2,thread.tasks().size());
  revokedPartitions=assignedPartitions;
  assignedPartitions=Arrays.asList(t2p1,t2p2,t3p1,t3p2);
  expectedGroup1=new HashSet<>(Arrays.asList(t2p1,t3p1));
  expectedGroup2=new HashSet<>(Arrays.asList(t2p2,t3p2));
  rebalanceListener.onPartitionsRevoked(revokedPartitions);
  rebalanceListener.onPartitionsAssigned(assignedPartitions);
  assertTrue(thread.tasks().containsKey(task4));
  assertTrue(thread.tasks().containsKey(task5));
  assertEquals(expectedGroup1,thread.tasks().get(task4).partitions());
  assertEquals(expectedGroup2,thread.tasks().get(task5).partitions());
  assertEquals(2,thread.tasks().size());
  revokedPartitions=assignedPartitions;
  assignedPartitions=Arrays.asList(t1p1,t2p1,t3p1);
  expectedGroup1=new HashSet<>(Arrays.asList(t1p1));
  expectedGroup2=new HashSet<>(Arrays.asList(t2p1,t3p1));
  rebalanceListener.onPartitionsRevoked(revokedPartitions);
  rebalanceListener.onPartitionsAssigned(assignedPartitions);
  assertTrue(thread.tasks().containsKey(task1));
  assertTrue(thread.tasks().containsKey(task4));
  assertEquals(expectedGroup1,thread.tasks().get(task1).partitions());
  assertEquals(expectedGroup2,thread.tasks().get(task4).partitions());
  assertEquals(2,thread.tasks().size());
  revokedPartitions=assignedPartitions;
  assignedPartitions=Collections.emptyList();
  rebalanceListener.onPartitionsRevoked(revokedPartitions);
  rebalanceListener.onPartitionsAssigned(assignedPartitions);
  assertTrue(thread.tasks().isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.processor.internals.assignment.TaskAssignorTest </h4><pre class="type-8 type-9 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStickiness(){
  List<Integer> tasks;
  Map<Integer,ClientState<Integer>> states;
  Map<Integer,ClientState<Integer>> assignments;
  int i;
  tasks=mkList(0,1,2,3,4,5);
  Collections.shuffle(tasks);
  states=new HashMap<>();
  i=0;
  for (  int task : tasks) {
    ClientState<Integer> state=new ClientState<>(1d);
    state.prevActiveTasks.add(task);
    state.prevAssignedTasks.add(task);
    states.put(i++,state);
  }
  assignments=TaskAssignor.assign(states,mkSet(0,1,2,3,4,5),0);
  for (  int client : states.keySet()) {
    Set<Integer> oldActive=states.get(client).prevActiveTasks;
    Set<Integer> oldAssigned=states.get(client).prevAssignedTasks;
    Set<Integer> newActive=assignments.get(client).activeTasks;
    Set<Integer> newAssigned=assignments.get(client).assignedTasks;
    assertEquals(oldActive,newActive);
    assertEquals(oldAssigned,newAssigned);
  }
  tasks=mkList(0,1,2,3,-1,-1);
  Collections.shuffle(tasks);
  states=new HashMap<>();
  i=0;
  for (  int task : tasks) {
    ClientState<Integer> state=new ClientState<>(1d);
    if (task >= 0) {
      state.prevActiveTasks.add(task);
      state.prevAssignedTasks.add(task);
    }
    states.put(i++,state);
  }
  assignments=TaskAssignor.assign(states,mkSet(0,1,2,3),0);
  for (  int client : states.keySet()) {
    Set<Integer> oldActive=states.get(client).prevActiveTasks;
    Set<Integer> oldAssigned=states.get(client).prevAssignedTasks;
    Set<Integer> newActive=assignments.get(client).activeTasks;
    Set<Integer> newAssigned=assignments.get(client).assignedTasks;
    assertEquals(oldActive,newActive);
    assertEquals(oldAssigned,newAssigned);
  }
  List<Set<Integer>> taskSets=mkList(mkSet(0,1),mkSet(2,3),mkSet(4,5),mkSet(6,7),mkSet(8,9),mkSet(10,11));
  Collections.shuffle(taskSets);
  states=new HashMap<>();
  i=0;
  for (  Set<Integer> taskSet : taskSets) {
    ClientState<Integer> state=new ClientState<>(1d);
    state.prevActiveTasks.addAll(taskSet);
    state.prevAssignedTasks.addAll(taskSet);
    states.put(i++,state);
  }
  assignments=TaskAssignor.assign(states,mkSet(0,1,2,3,4,5,6,7,8,9,10,11),0);
  for (  int client : states.keySet()) {
    Set<Integer> oldActive=states.get(client).prevActiveTasks;
    Set<Integer> oldAssigned=states.get(client).prevAssignedTasks;
    Set<Integer> newActive=assignments.get(client).activeTasks;
    Set<Integer> newAssigned=assignments.get(client).assignedTasks;
    Set<Integer> intersection=new HashSet<>();
    intersection.addAll(oldActive);
    intersection.retainAll(newActive);
    assertTrue(intersection.size() > 0);
    intersection.clear();
    intersection.addAll(oldAssigned);
    intersection.retainAll(newAssigned);
    assertTrue(intersection.size() > 0);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.kafka.streams.state.internals.RocksDBWindowStoreTest </h4><pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutAndFetch() throws IOException {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    final List<KeyValue<byte[],byte[]>> changeLog=new ArrayList<>();
    Producer<byte[],byte[]> producer=new MockProducer<>(true,byteArraySerializer,byteArraySerializer);
    RecordCollector recordCollector=new RecordCollector(producer){
      @Override public <K1,V1>void send(      ProducerRecord<K1,V1> record,      Serializer<K1> keySerializer,      Serializer<V1> valueSerializer){
        changeLog.add(new KeyValue<>(keySerializer.serialize(record.topic(),record.key()),valueSerializer.serialize(record.topic(),record.value())));
      }
    }
;
    MockProcessorContext context=new MockProcessorContext(null,baseDir,byteArraySerializer,byteArrayDeserializer,byteArraySerializer,byteArrayDeserializer,recordCollector);
    WindowStore<Integer,String> store=createWindowStore(context,serdes);
    try {
      long startTime=segmentSize - 4L;
      context.setTime(startTime + 0L);
      store.put(0,"zero");
      context.setTime(startTime + 1L);
      store.put(1,"one");
      context.setTime(startTime + 2L);
      store.put(2,"two");
      context.setTime(startTime + 3L);
      context.setTime(startTime + 4L);
      store.put(4,"four");
      context.setTime(startTime + 5L);
      store.put(5,"five");
      assertEquals(Utils.mkList("zero"),toList(store.fetch(0,startTime + 0L - windowSize,startTime + 0L + windowSize)));
      assertEquals(Utils.mkList("one"),toList(store.fetch(1,startTime + 1L - windowSize,startTime + 1L + windowSize)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime + 2L - windowSize,startTime + 2L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(3,startTime + 3L - windowSize,startTime + 3L + windowSize)));
      assertEquals(Utils.mkList("four"),toList(store.fetch(4,startTime + 4L - windowSize,startTime + 4L + windowSize)));
      assertEquals(Utils.mkList("five"),toList(store.fetch(5,startTime + 5L - windowSize,startTime + 5L + windowSize)));
      context.setTime(startTime + 3L);
      store.put(2,"two+1");
      context.setTime(startTime + 4L);
      store.put(2,"two+2");
      context.setTime(startTime + 5L);
      store.put(2,"two+3");
      context.setTime(startTime + 6L);
      store.put(2,"two+4");
      context.setTime(startTime + 7L);
      store.put(2,"two+5");
      context.setTime(startTime + 8L);
      store.put(2,"two+6");
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime - 2L - windowSize,startTime - 2L + windowSize)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime - 1L - windowSize,startTime - 1L + windowSize)));
      assertEquals(Utils.mkList("two","two+1"),toList(store.fetch(2,startTime - windowSize,startTime + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2"),toList(store.fetch(2,startTime + 1L - windowSize,startTime + 1L + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2","two+3"),toList(store.fetch(2,startTime + 2L - windowSize,startTime + 2L + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2","two+3","two+4"),toList(store.fetch(2,startTime + 3L - windowSize,startTime + 3L + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2","two+3","two+4","two+5"),toList(store.fetch(2,startTime + 4L - windowSize,startTime + 4L + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2","two+3","two+4","two+5","two+6"),toList(store.fetch(2,startTime + 5L - windowSize,startTime + 5L + windowSize)));
      assertEquals(Utils.mkList("two+1","two+2","two+3","two+4","two+5","two+6"),toList(store.fetch(2,startTime + 6L - windowSize,startTime + 6L + windowSize)));
      assertEquals(Utils.mkList("two+2","two+3","two+4","two+5","two+6"),toList(store.fetch(2,startTime + 7L - windowSize,startTime + 7L + windowSize)));
      assertEquals(Utils.mkList("two+3","two+4","two+5","two+6"),toList(store.fetch(2,startTime + 8L - windowSize,startTime + 8L + windowSize)));
      assertEquals(Utils.mkList("two+4","two+5","two+6"),toList(store.fetch(2,startTime + 9L - windowSize,startTime + 9L + windowSize)));
      assertEquals(Utils.mkList("two+5","two+6"),toList(store.fetch(2,startTime + 10L - windowSize,startTime + 10L + windowSize)));
      assertEquals(Utils.mkList("two+6"),toList(store.fetch(2,startTime + 11L - windowSize,startTime + 11L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 12L - windowSize,startTime + 12L + windowSize)));
      store.flush();
      Map<Integer,Set<String>> entriesByKey=entriesByKey(changeLog,startTime);
      assertEquals(Utils.mkSet("zero@0"),entriesByKey.get(0));
      assertEquals(Utils.mkSet("one@1"),entriesByKey.get(1));
      assertEquals(Utils.mkSet("two@2","two+1@3","two+2@4","two+3@5","two+4@6","two+5@7","two+6@8"),entriesByKey.get(2));
      assertNull(entriesByKey.get(3));
      assertEquals(Utils.mkSet("four@4"),entriesByKey.get(4));
      assertEquals(Utils.mkSet("five@5"),entriesByKey.get(5));
      assertNull(entriesByKey.get(6));
    }
  finally {
      store.close();
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutAndFetchBefore() throws IOException {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    final List<KeyValue<byte[],byte[]>> changeLog=new ArrayList<>();
    Producer<byte[],byte[]> producer=new MockProducer<>(true,byteArraySerializer,byteArraySerializer);
    RecordCollector recordCollector=new RecordCollector(producer){
      @Override public <K1,V1>void send(      ProducerRecord<K1,V1> record,      Serializer<K1> keySerializer,      Serializer<V1> valueSerializer){
        changeLog.add(new KeyValue<>(keySerializer.serialize(record.topic(),record.key()),valueSerializer.serialize(record.topic(),record.value())));
      }
    }
;
    MockProcessorContext context=new MockProcessorContext(null,baseDir,byteArraySerializer,byteArrayDeserializer,byteArraySerializer,byteArrayDeserializer,recordCollector);
    WindowStore<Integer,String> store=createWindowStore(context,serdes);
    try {
      long startTime=segmentSize - 4L;
      context.setTime(startTime + 0L);
      store.put(0,"zero");
      context.setTime(startTime + 1L);
      store.put(1,"one");
      context.setTime(startTime + 2L);
      store.put(2,"two");
      context.setTime(startTime + 3L);
      context.setTime(startTime + 4L);
      store.put(4,"four");
      context.setTime(startTime + 5L);
      store.put(5,"five");
      assertEquals(Utils.mkList("zero"),toList(store.fetch(0,startTime + 0L - windowSize,startTime + 0L)));
      assertEquals(Utils.mkList("one"),toList(store.fetch(1,startTime + 1L - windowSize,startTime + 1L)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime + 2L - windowSize,startTime + 2L)));
      assertEquals(Utils.mkList(),toList(store.fetch(3,startTime + 3L - windowSize,startTime + 3L)));
      assertEquals(Utils.mkList("four"),toList(store.fetch(4,startTime + 4L - windowSize,startTime + 4L)));
      assertEquals(Utils.mkList("five"),toList(store.fetch(5,startTime + 5L - windowSize,startTime + 5L)));
      context.setTime(startTime + 3L);
      store.put(2,"two+1");
      context.setTime(startTime + 4L);
      store.put(2,"two+2");
      context.setTime(startTime + 5L);
      store.put(2,"two+3");
      context.setTime(startTime + 6L);
      store.put(2,"two+4");
      context.setTime(startTime + 7L);
      store.put(2,"two+5");
      context.setTime(startTime + 8L);
      store.put(2,"two+6");
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime - 1L - windowSize,startTime - 1L)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 0L - windowSize,startTime + 0L)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 1L - windowSize,startTime + 1L)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime + 2L - windowSize,startTime + 2L)));
      assertEquals(Utils.mkList("two","two+1"),toList(store.fetch(2,startTime + 3L - windowSize,startTime + 3L)));
      assertEquals(Utils.mkList("two","two+1","two+2"),toList(store.fetch(2,startTime + 4L - windowSize,startTime + 4L)));
      assertEquals(Utils.mkList("two","two+1","two+2","two+3"),toList(store.fetch(2,startTime + 5L - windowSize,startTime + 5L)));
      assertEquals(Utils.mkList("two+1","two+2","two+3","two+4"),toList(store.fetch(2,startTime + 6L - windowSize,startTime + 6L)));
      assertEquals(Utils.mkList("two+2","two+3","two+4","two+5"),toList(store.fetch(2,startTime + 7L - windowSize,startTime + 7L)));
      assertEquals(Utils.mkList("two+3","two+4","two+5","two+6"),toList(store.fetch(2,startTime + 8L - windowSize,startTime + 8L)));
      assertEquals(Utils.mkList("two+4","two+5","two+6"),toList(store.fetch(2,startTime + 9L - windowSize,startTime + 9L)));
      assertEquals(Utils.mkList("two+5","two+6"),toList(store.fetch(2,startTime + 10L - windowSize,startTime + 10L)));
      assertEquals(Utils.mkList("two+6"),toList(store.fetch(2,startTime + 11L - windowSize,startTime + 11L)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 12L - windowSize,startTime + 12L)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 13L - windowSize,startTime + 13L)));
      store.flush();
      Map<Integer,Set<String>> entriesByKey=entriesByKey(changeLog,startTime);
      assertEquals(Utils.mkSet("zero@0"),entriesByKey.get(0));
      assertEquals(Utils.mkSet("one@1"),entriesByKey.get(1));
      assertEquals(Utils.mkSet("two@2","two+1@3","two+2@4","two+3@5","two+4@6","two+5@7","two+6@8"),entriesByKey.get(2));
      assertNull(entriesByKey.get(3));
      assertEquals(Utils.mkSet("four@4"),entriesByKey.get(4));
      assertEquals(Utils.mkSet("five@5"),entriesByKey.get(5));
      assertNull(entriesByKey.get(6));
    }
  finally {
      store.close();
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPutSameKeyTimestamp() throws IOException {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    final List<KeyValue<byte[],byte[]>> changeLog=new ArrayList<>();
    Producer<byte[],byte[]> producer=new MockProducer<>(true,byteArraySerializer,byteArraySerializer);
    RecordCollector recordCollector=new RecordCollector(producer){
      @Override public <K1,V1>void send(      ProducerRecord<K1,V1> record,      Serializer<K1> keySerializer,      Serializer<V1> valueSerializer){
        changeLog.add(new KeyValue<>(keySerializer.serialize(record.topic(),record.key()),valueSerializer.serialize(record.topic(),record.value())));
      }
    }
;
    MockProcessorContext context=new MockProcessorContext(null,baseDir,byteArraySerializer,byteArrayDeserializer,byteArraySerializer,byteArrayDeserializer,recordCollector);
    WindowStore<Integer,String> store=createWindowStore(context,serdes);
    try {
      long startTime=segmentSize - 4L;
      context.setTime(startTime);
      store.put(0,"zero");
      assertEquals(Utils.mkList("zero"),toList(store.fetch(0,startTime - windowSize,startTime + windowSize)));
      context.setTime(startTime);
      store.put(0,"zero");
      context.setTime(startTime);
      store.put(0,"zero+");
      context.setTime(startTime);
      store.put(0,"zero++");
      assertEquals(Utils.mkList("zero","zero","zero+","zero++"),toList(store.fetch(0,startTime - windowSize,startTime + windowSize)));
      assertEquals(Utils.mkList("zero","zero","zero+","zero++"),toList(store.fetch(0,startTime + 1L - windowSize,startTime + 1L + windowSize)));
      assertEquals(Utils.mkList("zero","zero","zero+","zero++"),toList(store.fetch(0,startTime + 2L - windowSize,startTime + 2L + windowSize)));
      assertEquals(Utils.mkList("zero","zero","zero+","zero++"),toList(store.fetch(0,startTime + 3L - windowSize,startTime + 3L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(0,startTime + 4L - windowSize,startTime + 4L + windowSize)));
      store.flush();
      Map<Integer,Set<String>> entriesByKey=entriesByKey(changeLog,startTime);
      assertEquals(Utils.mkSet("zero@0","zero@0","zero+@0","zero++@0"),entriesByKey.get(0));
    }
  finally {
      store.close();
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRestore() throws IOException {
  final List<KeyValue<byte[],byte[]>> changeLog=new ArrayList<>();
  long startTime=segmentSize * 2;
  long incr=segmentSize / 2;
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    Producer<byte[],byte[]> producer=new MockProducer<>(true,byteArraySerializer,byteArraySerializer);
    RecordCollector recordCollector=new RecordCollector(producer){
      @Override public <K1,V1>void send(      ProducerRecord<K1,V1> record,      Serializer<K1> keySerializer,      Serializer<V1> valueSerializer){
        changeLog.add(new KeyValue<>(keySerializer.serialize(record.topic(),record.key()),valueSerializer.serialize(record.topic(),record.value())));
      }
    }
;
    MockProcessorContext context=new MockProcessorContext(null,baseDir,byteArraySerializer,byteArrayDeserializer,byteArraySerializer,byteArrayDeserializer,recordCollector);
    WindowStore<Integer,String> store=createWindowStore(context,serdes);
    try {
      context.setTime(startTime);
      store.put(0,"zero");
      context.setTime(startTime + incr);
      store.put(1,"one");
      context.setTime(startTime + incr * 2);
      store.put(2,"two");
      context.setTime(startTime + incr * 3);
      store.put(3,"three");
      context.setTime(startTime + incr * 4);
      store.put(4,"four");
      context.setTime(startTime + incr * 5);
      store.put(5,"five");
      context.setTime(startTime + incr * 6);
      store.put(6,"six");
      context.setTime(startTime + incr * 7);
      store.put(7,"seven");
      context.setTime(startTime + incr * 8);
      store.put(8,"eight");
      store.flush();
    }
  finally {
      store.close();
    }
  }
  finally {
    Utils.delete(baseDir);
  }
  File baseDir2=Files.createTempDirectory("test").toFile();
  try {
    Producer<byte[],byte[]> producer=new MockProducer<>(true,byteArraySerializer,byteArraySerializer);
    RecordCollector recordCollector=new RecordCollector(producer){
      @Override public <K1,V1>void send(      ProducerRecord<K1,V1> record,      Serializer<K1> keySerializer,      Serializer<V1> valueSerializer){
        changeLog.add(new KeyValue<>(keySerializer.serialize(record.topic(),record.key()),valueSerializer.serialize(record.topic(),record.value())));
      }
    }
;
    MockProcessorContext context=new MockProcessorContext(null,baseDir,byteArraySerializer,byteArrayDeserializer,byteArraySerializer,byteArrayDeserializer,recordCollector);
    WindowStore<Integer,String> store=createWindowStore(context,serdes);
    RocksDBWindowStore<Integer,String> inner=(RocksDBWindowStore<Integer,String>)((MeteredWindowStore<Integer,String>)store).inner();
    try {
      context.restore("window",changeLog);
      assertEquals(Utils.mkSet(4L,5L,6L),inner.segmentIds());
      assertEquals(Utils.mkList(),toList(store.fetch(0,startTime - windowSize,startTime + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(1,startTime + incr - windowSize,startTime + incr + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + incr * 2 - windowSize,startTime + incr * 2 + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(3,startTime + incr * 3 - windowSize,startTime + incr * 3 + windowSize)));
      assertEquals(Utils.mkList("four"),toList(store.fetch(4,startTime + incr * 4 - windowSize,startTime + incr * 4 + windowSize)));
      assertEquals(Utils.mkList("five"),toList(store.fetch(5,startTime + incr * 5 - windowSize,startTime + incr * 5 + windowSize)));
      assertEquals(Utils.mkList("six"),toList(store.fetch(6,startTime + incr * 6 - windowSize,startTime + incr * 6 + windowSize)));
      assertEquals(Utils.mkList("seven"),toList(store.fetch(7,startTime + incr * 7 - windowSize,startTime + incr * 7 + windowSize)));
      assertEquals(Utils.mkList("eight"),toList(store.fetch(8,startTime + incr * 8 - windowSize,startTime + incr * 8 + windowSize)));
      store.flush();
      assertEquals(Utils.mkSet(inner.directorySuffix(4L),inner.directorySuffix(5L),inner.directorySuffix(6L)),segmentDirs(baseDir));
    }
  finally {
      store.close();
    }
  }
  finally {
    Utils.delete(baseDir2);
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRolling() throws IOException {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    final List<KeyValue<byte[],byte[]>> changeLog=new ArrayList<>();
    Producer<byte[],byte[]> producer=new MockProducer<>(true,byteArraySerializer,byteArraySerializer);
    RecordCollector recordCollector=new RecordCollector(producer){
      @Override public <K1,V1>void send(      ProducerRecord<K1,V1> record,      Serializer<K1> keySerializer,      Serializer<V1> valueSerializer){
        changeLog.add(new KeyValue<>(keySerializer.serialize(record.topic(),record.key()),valueSerializer.serialize(record.topic(),record.value())));
      }
    }
;
    MockProcessorContext context=new MockProcessorContext(null,baseDir,byteArraySerializer,byteArrayDeserializer,byteArraySerializer,byteArrayDeserializer,recordCollector);
    WindowStore<Integer,String> store=createWindowStore(context,serdes);
    RocksDBWindowStore<Integer,String> inner=(RocksDBWindowStore<Integer,String>)((MeteredWindowStore<Integer,String>)store).inner();
    try {
      long startTime=segmentSize * 2;
      long incr=segmentSize / 2;
      context.setTime(startTime);
      store.put(0,"zero");
      assertEquals(Utils.mkSet(2L),inner.segmentIds());
      context.setTime(startTime + incr);
      store.put(1,"one");
      assertEquals(Utils.mkSet(2L),inner.segmentIds());
      context.setTime(startTime + incr * 2);
      store.put(2,"two");
      assertEquals(Utils.mkSet(2L,3L),inner.segmentIds());
      context.setTime(startTime + incr * 3);
      assertEquals(Utils.mkSet(2L,3L),inner.segmentIds());
      context.setTime(startTime + incr * 4);
      store.put(4,"four");
      assertEquals(Utils.mkSet(2L,3L,4L),inner.segmentIds());
      context.setTime(startTime + incr * 5);
      store.put(5,"five");
      assertEquals(Utils.mkSet(2L,3L,4L),inner.segmentIds());
      assertEquals(Utils.mkList("zero"),toList(store.fetch(0,startTime - windowSize,startTime + windowSize)));
      assertEquals(Utils.mkList("one"),toList(store.fetch(1,startTime + incr - windowSize,startTime + incr + windowSize)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime + incr * 2 - windowSize,startTime + incr * 2 + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(3,startTime + incr * 3 - windowSize,startTime + incr * 3 + windowSize)));
      assertEquals(Utils.mkList("four"),toList(store.fetch(4,startTime + incr * 4 - windowSize,startTime + incr * 4 + windowSize)));
      assertEquals(Utils.mkList("five"),toList(store.fetch(5,startTime + incr * 5 - windowSize,startTime + incr * 5 + windowSize)));
      context.setTime(startTime + incr * 6);
      store.put(6,"six");
      assertEquals(Utils.mkSet(3L,4L,5L),inner.segmentIds());
      assertEquals(Utils.mkList(),toList(store.fetch(0,startTime - windowSize,startTime + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(1,startTime + incr - windowSize,startTime + incr + windowSize)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime + incr * 2 - windowSize,startTime + incr * 2 + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(3,startTime + incr * 3 - windowSize,startTime + incr * 3 + windowSize)));
      assertEquals(Utils.mkList("four"),toList(store.fetch(4,startTime + incr * 4 - windowSize,startTime + incr * 4 + windowSize)));
      assertEquals(Utils.mkList("five"),toList(store.fetch(5,startTime + incr * 5 - windowSize,startTime + incr * 5 + windowSize)));
      assertEquals(Utils.mkList("six"),toList(store.fetch(6,startTime + incr * 6 - windowSize,startTime + incr * 6 + windowSize)));
      context.setTime(startTime + incr * 7);
      store.put(7,"seven");
      assertEquals(Utils.mkSet(3L,4L,5L),inner.segmentIds());
      assertEquals(Utils.mkList(),toList(store.fetch(0,startTime - windowSize,startTime + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(1,startTime + incr - windowSize,startTime + incr + windowSize)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime + incr * 2 - windowSize,startTime + incr * 2 + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(3,startTime + incr * 3 - windowSize,startTime + incr * 3 + windowSize)));
      assertEquals(Utils.mkList("four"),toList(store.fetch(4,startTime + incr * 4 - windowSize,startTime + incr * 4 + windowSize)));
      assertEquals(Utils.mkList("five"),toList(store.fetch(5,startTime + incr * 5 - windowSize,startTime + incr * 5 + windowSize)));
      assertEquals(Utils.mkList("six"),toList(store.fetch(6,startTime + incr * 6 - windowSize,startTime + incr * 6 + windowSize)));
      assertEquals(Utils.mkList("seven"),toList(store.fetch(7,startTime + incr * 7 - windowSize,startTime + incr * 7 + windowSize)));
      context.setTime(startTime + incr * 8);
      store.put(8,"eight");
      assertEquals(Utils.mkSet(4L,5L,6L),inner.segmentIds());
      assertEquals(Utils.mkList(),toList(store.fetch(0,startTime - windowSize,startTime + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(1,startTime + incr - windowSize,startTime + incr + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + incr * 2 - windowSize,startTime + incr * 2 + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(3,startTime + incr * 3 - windowSize,startTime + incr * 3 + windowSize)));
      assertEquals(Utils.mkList("four"),toList(store.fetch(4,startTime + incr * 4 - windowSize,startTime + incr * 4 + windowSize)));
      assertEquals(Utils.mkList("five"),toList(store.fetch(5,startTime + incr * 5 - windowSize,startTime + incr * 5 + windowSize)));
      assertEquals(Utils.mkList("six"),toList(store.fetch(6,startTime + incr * 6 - windowSize,startTime + incr * 6 + windowSize)));
      assertEquals(Utils.mkList("seven"),toList(store.fetch(7,startTime + incr * 7 - windowSize,startTime + incr * 7 + windowSize)));
      assertEquals(Utils.mkList("eight"),toList(store.fetch(8,startTime + incr * 8 - windowSize,startTime + incr * 8 + windowSize)));
      store.flush();
      assertEquals(Utils.mkSet(inner.directorySuffix(4L),inner.directorySuffix(5L),inner.directorySuffix(6L)),segmentDirs(baseDir));
    }
  finally {
      store.close();
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<pre class="type-8 type-7 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutAndFetchAfter() throws IOException {
  File baseDir=Files.createTempDirectory("test").toFile();
  try {
    final List<KeyValue<byte[],byte[]>> changeLog=new ArrayList<>();
    Producer<byte[],byte[]> producer=new MockProducer<>(true,byteArraySerializer,byteArraySerializer);
    RecordCollector recordCollector=new RecordCollector(producer){
      @Override public <K1,V1>void send(      ProducerRecord<K1,V1> record,      Serializer<K1> keySerializer,      Serializer<V1> valueSerializer){
        changeLog.add(new KeyValue<>(keySerializer.serialize(record.topic(),record.key()),valueSerializer.serialize(record.topic(),record.value())));
      }
    }
;
    MockProcessorContext context=new MockProcessorContext(null,baseDir,byteArraySerializer,byteArrayDeserializer,byteArraySerializer,byteArrayDeserializer,recordCollector);
    WindowStore<Integer,String> store=createWindowStore(context,serdes);
    try {
      long startTime=segmentSize - 4L;
      context.setTime(startTime + 0L);
      store.put(0,"zero");
      context.setTime(startTime + 1L);
      store.put(1,"one");
      context.setTime(startTime + 2L);
      store.put(2,"two");
      context.setTime(startTime + 3L);
      context.setTime(startTime + 4L);
      store.put(4,"four");
      context.setTime(startTime + 5L);
      store.put(5,"five");
      assertEquals(Utils.mkList("zero"),toList(store.fetch(0,startTime + 0L,startTime + 0L + windowSize)));
      assertEquals(Utils.mkList("one"),toList(store.fetch(1,startTime + 1L,startTime + 1L + windowSize)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime + 2L,startTime + 2L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(3,startTime + 3L,startTime + 3L + windowSize)));
      assertEquals(Utils.mkList("four"),toList(store.fetch(4,startTime + 4L,startTime + 4L + windowSize)));
      assertEquals(Utils.mkList("five"),toList(store.fetch(5,startTime + 5L,startTime + 5L + windowSize)));
      context.setTime(startTime + 3L);
      store.put(2,"two+1");
      context.setTime(startTime + 4L);
      store.put(2,"two+2");
      context.setTime(startTime + 5L);
      store.put(2,"two+3");
      context.setTime(startTime + 6L);
      store.put(2,"two+4");
      context.setTime(startTime + 7L);
      store.put(2,"two+5");
      context.setTime(startTime + 8L);
      store.put(2,"two+6");
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime - 2L,startTime - 2L + windowSize)));
      assertEquals(Utils.mkList("two"),toList(store.fetch(2,startTime - 1L,startTime - 1L + windowSize)));
      assertEquals(Utils.mkList("two","two+1"),toList(store.fetch(2,startTime,startTime + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2"),toList(store.fetch(2,startTime + 1L,startTime + 1L + windowSize)));
      assertEquals(Utils.mkList("two","two+1","two+2","two+3"),toList(store.fetch(2,startTime + 2L,startTime + 2L + windowSize)));
      assertEquals(Utils.mkList("two+1","two+2","two+3","two+4"),toList(store.fetch(2,startTime + 3L,startTime + 3L + windowSize)));
      assertEquals(Utils.mkList("two+2","two+3","two+4","two+5"),toList(store.fetch(2,startTime + 4L,startTime + 4L + windowSize)));
      assertEquals(Utils.mkList("two+3","two+4","two+5","two+6"),toList(store.fetch(2,startTime + 5L,startTime + 5L + windowSize)));
      assertEquals(Utils.mkList("two+4","two+5","two+6"),toList(store.fetch(2,startTime + 6L,startTime + 6L + windowSize)));
      assertEquals(Utils.mkList("two+5","two+6"),toList(store.fetch(2,startTime + 7L,startTime + 7L + windowSize)));
      assertEquals(Utils.mkList("two+6"),toList(store.fetch(2,startTime + 8L,startTime + 8L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 9L,startTime + 9L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 10L,startTime + 10L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 11L,startTime + 11L + windowSize)));
      assertEquals(Utils.mkList(),toList(store.fetch(2,startTime + 12L,startTime + 12L + windowSize)));
      store.flush();
      Map<Integer,Set<String>> entriesByKey=entriesByKey(changeLog,startTime);
      assertEquals(Utils.mkSet("zero@0"),entriesByKey.get(0));
      assertEquals(Utils.mkSet("one@1"),entriesByKey.get(1));
      assertEquals(Utils.mkSet("two@2","two+1@3","two+2@4","two+3@5","two+4@6","two+5@7","two+6@8"),entriesByKey.get(2));
      assertNull(entriesByKey.get(3));
      assertEquals(Utils.mkSet("four@4"),entriesByKey.get(4));
      assertEquals(Utils.mkSet("five@5"),entriesByKey.get(5));
      assertNull(entriesByKey.get(6));
    }
  finally {
      store.close();
    }
  }
  finally {
    Utils.delete(baseDir);
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
