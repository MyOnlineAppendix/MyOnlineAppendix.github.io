<h3 style="margin:0px">Class: org.apache.commons.dbcp2.TestPoolingDriver (9 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(6)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(5)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(4)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Allocates resources before the execution of the test cases"><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >TestInitializer&nbsp;(1)</kbd></button>&nbsp;<button id="12"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('12')" data-toggle="tooltip" title="Releases resources used by the test cases"><kbd id="tag-12"class="label-info"style="display: inline-block;font-size:7pt" >TestCleaner&nbsp;(1)</kbd></button>&nbsp;<button id="14"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('14')" data-toggle="tooltip" title="Is not categorized by any of the available tags"><kbd id="tag-14"class="label-info"style="display: inline-block;font-size:7pt" >Unclassified&nbsp;(1)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Verifies assertions in iterations"><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >IterativeVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(1)</kbd></button>&nbsp;<button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * "http://issues.apache.org/bugzilla/show_bug.cgi?id=28912" 
 */
@Test public void testReportedBug28912() throws Exception {
  Connection conn1=getConnection();
  assertNotNull(conn1);
  assertFalse(conn1.isClosed());
  conn1.close();
  Connection conn2=getConnection();
  assertNotNull(conn2);
  assertTrue(conn1.isClosed());
  assertFalse(conn2.isClosed());
  conn1.close();
  assertTrue(conn1.isClosed());
  assertFalse(conn2.isClosed());
}

</code></pre>

<pre class="type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClosePool() throws Exception {
  Connection conn=DriverManager.getConnection("jdbc:apache:commons:dbcp:test");
  assertNotNull(conn);
  conn.close();
  PoolingDriver driver2=(PoolingDriver)DriverManager.getDriver("jdbc:apache:commons:dbcp:");
  driver2.closePool("test");
  try (Connection c=DriverManager.getConnection("jdbc:apache:commons:dbcp:test")){
    fail("expected SQLException");
  }
 catch (  SQLException e) {
  }
}

</code></pre>

<pre class="type-9 type-8 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * "http://issues.apache.org/bugzilla/show_bug.cgi?id=12400" 
 */
@Test public void testReportedBug12400() throws Exception {
  GenericObjectPoolConfig config=new GenericObjectPoolConfig();
  config.setMaxTotal(70);
  config.setMaxWaitMillis(60000);
  config.setMaxIdle(10);
  ConnectionFactory connectionFactory=new DriverManagerConnectionFactory("jdbc:apache:commons:testdriver","username","password");
  PoolableConnectionFactory poolableConnectionFactory=new PoolableConnectionFactory(connectionFactory,null);
  poolableConnectionFactory.setDefaultReadOnly(Boolean.FALSE);
  poolableConnectionFactory.setDefaultAutoCommit(Boolean.TRUE);
  ObjectPool<PoolableConnection> connectionPool=new GenericObjectPool<>(poolableConnectionFactory,config);
  poolableConnectionFactory.setPool(connectionPool);
  assertNotNull(poolableConnectionFactory);
  PoolingDriver driver2=new PoolingDriver();
  driver2.registerPool("neusoftim",connectionPool);
  Connection[] conn=new Connection[25];
  for (int i=0; i < 25; i++) {
    conn[i]=DriverManager.getConnection("jdbc:apache:commons:dbcp:neusoftim");
    for (int j=0; j < i; j++) {
      assertTrue(conn[j] != conn[i]);
      assertTrue(!conn[j].equals(conn[i]));
    }
  }
  for (int i=0; i < 25; i++) {
    conn[i].close();
  }
}

</code></pre>

<pre class="type-7 type-8 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setUp() throws Exception {
  DriverConnectionFactory cf=new DriverConnectionFactory(new TesterDriver(),"jdbc:apache:commons:testdriver",null);
  PoolableConnectionFactory pcf=new PoolableConnectionFactory(cf,null);
  pcf.setPoolStatements(true);
  pcf.setMaxOpenPrepatedStatements(10);
  pcf.setValidationQuery("SELECT COUNT(*) FROM DUAL");
  pcf.setDefaultReadOnly(Boolean.FALSE);
  pcf.setDefaultAutoCommit(Boolean.TRUE);
  GenericObjectPoolConfig poolConfig=new GenericObjectPoolConfig();
  poolConfig.setMaxTotal(getMaxTotal());
  poolConfig.setMaxWaitMillis(getMaxWaitMillis());
  poolConfig.setMinIdle(10);
  poolConfig.setTestOnBorrow(true);
  poolConfig.setTestOnReturn(true);
  poolConfig.setTestWhileIdle(true);
  poolConfig.setTimeBetweenEvictionRunsMillis(10000L);
  poolConfig.setNumTestsPerEvictionRun(5);
  poolConfig.setMinEvictableIdleTimeMillis(5000L);
  GenericObjectPool<PoolableConnection> pool=new GenericObjectPool<>(pcf,poolConfig);
  pcf.setPool(pool);
  assertNotNull(pcf);
  driver=new PoolingDriver(true);
  driver.registerPool("test",pool);
}

</code></pre>

<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
"></span><br>
@Override @After public void tearDown() throws Exception {
  driver.closePool("test");
  super.tearDown();
}

</code></pre>

<pre class="type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not categorized by any of the available tags">Unclassified</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Is not categorized by any of the available tags
"></span><br>
@Test public void testLogWriter() throws Exception {
  PrintStream ps=new PrintStream(new ByteArrayOutputStream(),false,"UTF-8");
  PrintWriter pw=new PrintWriter(new OutputStreamWriter(new ByteArrayOutputStream(),"UTF-8"));
  System.setErr(new PrintStream(new ByteArrayOutputStream(),false,"UTF-8"));
  SQLException ex;
  DriverManager.setLogWriter(pw);
  ex=new SQLException("A",new Exception("a"));
  ex.printStackTrace();
  ex.printStackTrace(ps);
  ex.printStackTrace(pw);
  ex=new SQLException("B");
  ex.printStackTrace();
  ex.printStackTrace(ps);
  ex.printStackTrace(pw);
  ex=new SQLException(null,new Exception("c"));
  ex.printStackTrace();
  ex.printStackTrace(ps);
  ex.printStackTrace(pw);
  ex=new SQLException((String)null);
  ex.printStackTrace();
  ex.printStackTrace(ps);
  ex.printStackTrace(pw);
  DriverManager.setLogWriter(null);
  ex=new SQLException("A",new Exception("a"));
  ex.printStackTrace();
  ex.printStackTrace(ps);
  ex.printStackTrace(pw);
  ex=new SQLException("B");
  ex.printStackTrace();
  ex.printStackTrace(ps);
  ex.printStackTrace(pw);
  ex=new SQLException(null,new Exception("c"));
  ex.printStackTrace();
  ex.printStackTrace(ps);
  ex.printStackTrace(pw);
  ex=new SQLException((String)null);
  ex.printStackTrace();
  ex.printStackTrace(ps);
  ex.printStackTrace(pw);
}

</code></pre>

<pre class="type-8 type-6 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidateConnection() throws Exception {
  Connection conn=DriverManager.getConnection("jdbc:apache:commons:dbcp:test");
  assertNotNull(conn);
  ObjectPool<?> pool=driver.getConnectionPool("test");
  assertEquals(1,pool.getNumActive());
  assertEquals(0,pool.getNumIdle());
  PoolingDriver driver2=(PoolingDriver)DriverManager.getDriver("jdbc:apache:commons:dbcp:");
  driver2.invalidateConnection(conn);
  assertEquals(0,pool.getNumActive());
  assertEquals(0,pool.getNumIdle());
  assertTrue(conn.isClosed());
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void test2(){
  ConnectionFactory connectionFactory=new DriverManagerConnectionFactory("jdbc:some:connect:string","username","password");
  PoolableConnectionFactory pcf=new PoolableConnectionFactory(connectionFactory,null);
  pcf.setDefaultReadOnly(Boolean.FALSE);
  pcf.setDefaultAutoCommit(Boolean.TRUE);
  GenericObjectPool<PoolableConnection> connectionPool=new GenericObjectPool<>(pcf);
  PoolingDriver driver2=new PoolingDriver();
  driver2.registerPool("example",connectionPool);
}

</code></pre>

<pre class="type-8 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void test1(){
  ConnectionFactory connectionFactory=new DriverManagerConnectionFactory("jdbc:some:connect:string","username","password");
  PoolableConnectionFactory pcf=new PoolableConnectionFactory(connectionFactory,null);
  pcf.setDefaultReadOnly(Boolean.FALSE);
  pcf.setDefaultAutoCommit(Boolean.TRUE);
  GenericObjectPool<PoolableConnection> connectionPool=new GenericObjectPool<>(pcf);
  pcf.setPool(connectionPool);
  DataSource ds=new PoolingDataSource<>(connectionPool);
  Assert.assertNotNull(ds);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
