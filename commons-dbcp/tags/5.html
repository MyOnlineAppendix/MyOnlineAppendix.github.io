<h3><span class=" glyphicon glyphicon-tag"/>&nbspHybridVerifier</h3><kbd>Contains more than 2 JUnit-based stereotypes</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestAbandonedBasicDataSource </h4><pre class="type-6 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAbandonedCloseWithExceptions() throws Exception {
  ds.setRemoveAbandonedTimeout(0);
  ds.setMaxTotal(1);
  ds.setAccessToUnderlyingConnectionAllowed(true);
  Connection conn1=getConnection();
  assertNotNull(conn1);
  assertEquals(1,ds.getNumActive());
  Connection conn2=getConnection();
  assertNotNull(conn2);
  assertEquals(1,ds.getNumActive());
  TesterConnection tconn1=(TesterConnection)((DelegatingConnection<?>)conn1).getInnermostDelegate();
  tconn1.setFailure(new IOException("network error"));
  TesterConnection tconn2=(TesterConnection)((DelegatingConnection<?>)conn2).getInnermostDelegate();
  tconn2.setFailure(new IOException("network error"));
  try {
    conn2.close();
  }
 catch (  SQLException ex) {
  }
  assertEquals(0,ds.getNumActive());
  try {
    conn1.close();
  }
 catch (  SQLException ex) {
  }
  assertEquals(0,ds.getNumActive());
  assertTrue(sw.toString().contains("testAbandonedCloseWithExceptions"));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAbandonedClose() throws Exception {
  ds.setRemoveAbandonedTimeout(0);
  ds.setMaxTotal(1);
  ds.setAccessToUnderlyingConnectionAllowed(true);
  Connection conn1=getConnection();
  assertNotNull(conn1);
  assertEquals(1,ds.getNumActive());
  Connection conn2=getConnection();
  assertNotNull(conn2);
  assertEquals(1,ds.getNumActive());
  assertTrue(((DelegatingConnection<?>)conn1).getInnermostDelegate().isClosed());
  conn2.close();
  assertEquals(0,ds.getNumActive());
  conn1.close();
  assertEquals(0,ds.getNumActive());
  assertTrue(sw.toString().contains("testAbandonedClose"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestBasicDataSource </h4><pre class="type-8 type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * JIRA: DBCP-437
 * Verify that BasicDataSource sets disconnect codes properties.
 * Functionality is verified in pcf tests.
 */
@Test public void testDisconnectSqlCodes() throws Exception {
  ArrayList<String> disconnectionSqlCodes=new ArrayList<>();
  disconnectionSqlCodes.add("XXX");
  ds.setDisconnectionSqlCodes(disconnectionSqlCodes);
  ds.setFastFailValidation(true);
  ds.getConnection();
  PoolableConnectionFactory pcf=(PoolableConnectionFactory)ds.getConnectionPool().getFactory();
  assertTrue(pcf.isFastFailValidation());
  assertTrue(pcf.getDisconnectionSqlCodes().contains("XXX"));
  assertEquals(1,pcf.getDisconnectionSqlCodes().size());
}

</code></pre>

<br>
<pre class="type-8 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * JIRA: DBCP-342, DBCP-93
 * Verify that when errors occur during BasicDataSource initialization, GenericObjectPool
 * Evictors are cleaned up.
 */
@Test public void testCreateDataSourceCleanupEvictor() throws Exception {
  ds.close();
  ds=null;
  ds=createDataSource();
  ds.setDriverClassName("org.apache.commons.dbcp2.TesterConnRequestCountDriver");
  ds.setUrl("jdbc:apache:commons:testerConnRequestCountDriver");
  ds.setValidationQuery("SELECT DUMMY FROM DUAL");
  ds.setUsername("username");
  ds.setPassword("wrong");
  ds.setTimeBetweenEvictionRunsMillis(100);
  ds.setMinIdle(2);
synchronized (TesterConnRequestCountDriver.class) {
    TesterConnRequestCountDriver.initConnRequestCount();
    for (int i=0; i < 10; i++) {
      try {
        @SuppressWarnings("unused") DataSource ds2=ds.createDataSource();
      }
 catch (      SQLException e) {
      }
    }
    Thread.sleep(1000);
    assertEquals(10,TesterConnRequestCountDriver.getConnectionRequestCount());
  }
  assertNull(ds.getConnectionPool());
}

</code></pre>

<br>
<pre class="type-8 type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMaxConnLifetimeExceeded() throws Exception {
  try {
    StackMessageLog.lock();
    ds.setMaxConnLifetimeMillis(100);
    Connection conn=ds.getConnection();
    assertEquals(1,ds.getNumActive());
    Thread.sleep(500);
    conn.close();
    assertEquals(0,ds.getNumIdle());
    String message=StackMessageLog.popMessage();
    assertTrue(message.indexOf("exceeds the maximum permitted value") > 0);
  }
  finally {
    StackMessageLog.clear();
    StackMessageLog.unLock();
  }
}

</code></pre>

<br>
<pre class="type-8 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmptyInitConnectionSql() throws Exception {
  ds.setConnectionInitSqls(Arrays.asList(new String[]{"","   "}));
  assertNotNull(ds.getConnectionInitSqls());
  assertEquals(0,ds.getConnectionInitSqls().size());
  ds.setConnectionInitSqls(null);
  assertNotNull(ds.getConnectionInitSqls());
  assertEquals(0,ds.getConnectionInitSqls().size());
}

</code></pre>

<br>
<pre class="type-8 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInitialSize() throws Exception {
  ds.setMaxTotal(20);
  ds.setMaxIdle(20);
  ds.setInitialSize(10);
  Connection conn=getConnection();
  assertNotNull(conn);
  conn.close();
  assertEquals(0,ds.getNumActive());
  assertEquals(10,ds.getNumIdle());
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultCatalog() throws Exception {
  Connection[] c=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=getConnection();
    assertTrue(c[i] != null);
    assertEquals(CATALOG,c[i].getCatalog());
  }
  for (  Connection element : c) {
    element.setCatalog("error");
    element.close();
  }
  for (int i=0; i < c.length; i++) {
    c[i]=getConnection();
    assertTrue(c[i] != null);
    assertEquals(CATALOG,c[i].getCatalog());
  }
  for (  Connection element : c) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTransactionIsolationBehavior() throws Exception {
  Connection conn=getConnection();
  assertNotNull(conn);
  assertEquals(Connection.TRANSACTION_READ_COMMITTED,conn.getTransactionIsolation());
  conn.setTransactionIsolation(Connection.TRANSACTION_READ_UNCOMMITTED);
  conn.close();
  Connection conn2=getConnection();
  assertEquals(Connection.TRANSACTION_READ_COMMITTED,conn2.getTransactionIsolation());
  Connection conn3=getConnection();
  assertEquals(Connection.TRANSACTION_READ_COMMITTED,conn3.getTransactionIsolation());
  conn2.close();
  conn3.close();
}

</code></pre>

<br>
<pre class="type-8 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Bugzilla Bug 29054:
 * The BasicDataSource.setTestOnReturn(boolean) is not carried through to
 * the GenericObjectPool variable _testOnReturn.
 */
@Test public void testPropertyTestOnReturn() throws Exception {
  ds.setValidationQuery("select 1 from dual");
  ds.setTestOnBorrow(false);
  ds.setTestWhileIdle(false);
  ds.setTestOnReturn(true);
  Connection conn=ds.getConnection();
  assertNotNull(conn);
  assertEquals(false,ds.getConnectionPool().getTestOnBorrow());
  assertEquals(false,ds.getConnectionPool().getTestWhileIdle());
  assertEquals(true,ds.getConnectionPool().getTestOnReturn());
}

</code></pre>

<br>
<pre class="type-8 type-6 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessToUnderlyingConnectionAllowed() throws Exception {
  ds.setAccessToUnderlyingConnectionAllowed(true);
  assertEquals(true,ds.isAccessToUnderlyingConnectionAllowed());
  Connection conn=getConnection();
  Connection dconn=((DelegatingConnection<?>)conn).getDelegate();
  assertNotNull(dconn);
  dconn=((DelegatingConnection<?>)conn).getInnermostDelegate();
  assertNotNull(dconn);
  assertTrue(dconn instanceof TesterConnection);
}

</code></pre>

<br>
<pre class="type-10 type-8 type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetProperties() throws Exception {
  ds.setConnectionProperties("name1=value1;name2=value2;name3=value3");
  assertEquals(3,ds.getConnectionProperties().size());
  assertEquals("value1",ds.getConnectionProperties().getProperty("name1"));
  assertEquals("value2",ds.getConnectionProperties().getProperty("name2"));
  assertEquals("value3",ds.getConnectionProperties().getProperty("name3"));
  ds.setConnectionProperties("name1=value1;name2=value2");
  assertEquals(2,ds.getConnectionProperties().size());
  assertEquals("value1",ds.getConnectionProperties().getProperty("name1"));
  assertEquals("value2",ds.getConnectionProperties().getProperty("name2"));
  assertFalse(ds.getConnectionProperties().containsKey("name3"));
  ds.setConnectionProperties("name1=value1;name2");
  assertEquals(2,ds.getConnectionProperties().size());
  assertEquals("value1",ds.getConnectionProperties().getProperty("name1"));
  assertEquals("",ds.getConnectionProperties().getProperty("name2"));
  ds.setConnectionProperties("name1=value1;name2=");
  assertEquals(2,ds.getConnectionProperties().size());
  assertEquals("value1",ds.getConnectionProperties().getProperty("name1"));
  assertEquals("",ds.getConnectionProperties().getProperty("name2"));
  ds.setConnectionProperties("name1=value1");
  assertEquals(1,ds.getConnectionProperties().size());
  assertEquals("value1",ds.getConnectionProperties().getProperty("name1"));
  ds.setConnectionProperties("name1=value1;");
  assertEquals(1,ds.getConnectionProperties().size());
  assertEquals("value1",ds.getConnectionProperties().getProperty("name1"));
  ds.setConnectionProperties("name1");
  assertEquals(1,ds.getConnectionProperties().size());
  assertEquals("",ds.getConnectionProperties().getProperty("name1"));
  try {
    ds.setConnectionProperties(null);
    fail("Expected NullPointerException");
  }
 catch (  NullPointerException e) {
  }
}

</code></pre>

<br>
<pre class="type-10 type-8 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Bugzilla Bug 29832: Broken behaviour for BasicDataSource.setMaxTotal(0)
 * MaxTotal == 0 should throw SQLException on getConnection.
 * Results from Bug 29863 in commons-pool.
 */
@Test public void testMaxTotalZero() throws Exception {
  ds.setMaxTotal(0);
  try {
    Connection conn=ds.getConnection();
    assertNotNull(conn);
    fail("SQLException expected");
  }
 catch (  SQLException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * JIRA DBCP-333: Check that a custom class loader is used.
 * @throws Exception
 */
@Test public void testDriverClassLoader() throws Exception {
  getConnection();
  ClassLoader cl=ds.getDriverClassLoader();
  assertNotNull(cl);
  assertTrue(cl instanceof TesterClassLoader);
  assertTrue(((TesterClassLoader)cl).didLoad(ds.getDriverClassName()));
}

</code></pre>

<br>
<pre class="type-10 type-8 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsClosedFailure() throws SQLException {
  ds.setAccessToUnderlyingConnectionAllowed(true);
  Connection conn=ds.getConnection();
  assertNotNull(conn);
  assertEquals(1,ds.getNumActive());
  TesterConnection tconn=(TesterConnection)((DelegatingConnection<?>)conn).getInnermostDelegate();
  tconn.setFailure(new IOException("network error"));
  try {
    conn.close();
    fail("Expected SQLException");
  }
 catch (  SQLException ex) {
  }
  assertEquals(0,ds.getNumActive());
}

</code></pre>

<br>
<pre class="type-10 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClose() throws Exception {
  ds.setAccessToUnderlyingConnectionAllowed(true);
  Connection activeConnection=getConnection();
  Connection rawActiveConnection=((DelegatingConnection<?>)activeConnection).getInnermostDelegate();
  assertFalse(activeConnection.isClosed());
  assertFalse(rawActiveConnection.isClosed());
  Connection idleConnection=getConnection();
  Connection rawIdleConnection=((DelegatingConnection<?>)idleConnection).getInnermostDelegate();
  assertFalse(idleConnection.isClosed());
  assertFalse(rawIdleConnection.isClosed());
  idleConnection.close();
  assertTrue(idleConnection.isClosed());
  assertFalse(rawIdleConnection.isClosed());
  ds.close();
  assertTrue(rawIdleConnection.isClosed());
  assertFalse(activeConnection.isClosed());
  assertFalse(rawActiveConnection.isClosed());
  activeConnection.close();
  assertTrue(activeConnection.isClosed());
  assertTrue(rawActiveConnection.isClosed());
  try {
    getConnection();
    fail("Expecting SQLException");
  }
 catch (  SQLException ex) {
  }
  ds.close();
}

</code></pre>

<br>
<pre class="type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetAutoCommitTrueOnClose() throws Exception {
  ds.setAccessToUnderlyingConnectionAllowed(true);
  ds.setDefaultAutoCommit(Boolean.FALSE);
  Connection conn=getConnection();
  assertNotNull(conn);
  assertEquals(false,conn.getAutoCommit());
  Connection dconn=((DelegatingConnection<?>)conn).getInnermostDelegate();
  assertNotNull(dconn);
  assertEquals(false,dconn.getAutoCommit());
  conn.close();
  assertEquals(true,dconn.getAutoCommit());
}

</code></pre>

<br>
<pre class="type-8 type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidateConnection() throws Exception {
  ds.setMaxTotal(2);
  Connection conn1=ds.getConnection();
  Connection conn2=ds.getConnection();
  ds.invalidateConnection(conn1);
  assertTrue(conn1.isClosed());
  assertEquals(1,ds.getNumActive());
  assertEquals(0,ds.getNumIdle());
  Connection conn3=ds.getConnection();
  conn2.close();
  conn3.close();
}

</code></pre>

<br>
<pre class="type-8 type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMaxConnLifetimeExceededMutedLog() throws Exception {
  try {
    StackMessageLog.lock();
    StackMessageLog.clear();
    ds.setMaxConnLifetimeMillis(100);
    ds.setLogExpiredConnections(false);
    Connection conn=ds.getConnection();
    assertEquals(1,ds.getNumActive());
    Thread.sleep(500);
    conn.close();
    assertEquals(0,ds.getNumIdle());
    assertTrue(StackMessageLog.isEmpty());
  }
  finally {
    StackMessageLog.clear();
    StackMessageLog.unLock();
  }
}

</code></pre>

<br>
<pre class="type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoAccessToUnderlyingConnectionAllowed() throws Exception {
  assertEquals(false,ds.isAccessToUnderlyingConnectionAllowed());
  Connection conn=getConnection();
  Connection dconn=((DelegatingConnection<?>)conn).getDelegate();
  assertNull(dconn);
  dconn=((DelegatingConnection<?>)conn).getInnermostDelegate();
  assertNull(dconn);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestBasicDataSourceFactory </h4><pre class="type-11 type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidateProperties() throws Exception {
  try {
    StackMessageLog.lock();
    StackMessageLog.clear();
    final Reference ref=new Reference("javax.sql.DataSource",BasicDataSourceFactory.class.getName(),null);
    ref.add(new StringRefAddr("foo","bar"));
    ref.add(new StringRefAddr("maxWait","100"));
    ref.add(new StringRefAddr("driverClassName","org.apache.commons.dbcp2.TesterDriver"));
    final BasicDataSourceFactory basicDataSourceFactory=new BasicDataSourceFactory();
    basicDataSourceFactory.getObjectInstance(ref,null,null,null);
    final List<String> messages=StackMessageLog.getAll();
    assertEquals(2,messages.size());
    for (    String message : messages) {
      if (message.contains("maxWait")) {
        assertTrue(message.contains("use maxWaitMillis"));
      }
 else {
        assertTrue(message.contains("foo"));
        assertTrue(message.contains("Ignoring unknown property"));
      }
    }
  }
  finally {
    StackMessageLog.clear();
    StackMessageLog.unLock();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestConnectionPool </h4><pre class="type-2 type-10 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimple2() throws Exception {
  Connection conn=newConnection();
  assertNotNull(conn);
{
    PreparedStatement stmt=conn.prepareStatement("select * from dual");
    assertNotNull(stmt);
    ResultSet rset=stmt.executeQuery();
    assertNotNull(rset);
    assertTrue(rset.next());
    rset.close();
    stmt.close();
  }
{
    PreparedStatement stmt=conn.prepareStatement("select * from dual");
    assertNotNull(stmt);
    ResultSet rset=stmt.executeQuery();
    assertNotNull(rset);
    assertTrue(rset.next());
    rset.close();
    stmt.close();
  }
  conn.close();
  try (Statement s=conn.createStatement()){
    fail("Can't use closed connections");
  }
 catch (  SQLException e) {
  }
  conn=newConnection();
  assertNotNull(conn);
{
    PreparedStatement stmt=conn.prepareStatement("select * from dual");
    assertNotNull(stmt);
    ResultSet rset=stmt.executeQuery();
    assertNotNull(rset);
    assertTrue(rset.next());
    rset.close();
    stmt.close();
  }
{
    PreparedStatement stmt=conn.prepareStatement("select * from dual");
    assertNotNull(stmt);
    ResultSet rset=stmt.executeQuery();
    assertNotNull(rset);
    assertTrue(rset.next());
    rset.close();
    stmt.close();
  }
  conn.close();
  conn=null;
}

</code></pre>

<br>
<pre class="type-2 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimple() throws Exception {
  Connection conn=newConnection();
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
}

</code></pre>

<br>
<pre class="type-2 type-9 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRepeatedBorrowAndReturn() throws Exception {
  for (int i=0; i < 100; i++) {
    Connection conn=newConnection();
    assertNotNull(conn);
    PreparedStatement stmt=conn.prepareStatement("select * from dual");
    assertNotNull(stmt);
    ResultSet rset=stmt.executeQuery();
    assertNotNull(rset);
    assertTrue(rset.next());
    rset.close();
    stmt.close();
    conn.close();
  }
}

</code></pre>

<br>
<pre class="type-2 type-9 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsClosed() throws Exception {
  for (int i=0; i < getMaxTotal(); i++) {
    Connection conn=newConnection();
    assertNotNull(conn);
    assertTrue(!conn.isClosed());
    PreparedStatement stmt=conn.prepareStatement("select * from dual");
    assertNotNull(stmt);
    ResultSet rset=stmt.executeQuery();
    assertNotNull(rset);
    assertTrue(rset.next());
    rset.close();
    stmt.close();
    conn.close();
    assertTrue(conn.isClosed());
  }
}

</code></pre>

<br>
<pre class="type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHashCode() throws Exception {
  Connection conn1=newConnection();
  assertNotNull(conn1);
  Connection conn2=newConnection();
  assertNotNull(conn2);
  assertTrue(conn1.hashCode() != conn2.hashCode());
}

</code></pre>

<br>
<pre class="type-2 type-9 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCanCloseResultSetTwice() throws Exception {
  Connection conn=newConnection();
  assertNotNull(conn);
  assertTrue(!conn.isClosed());
  for (int i=0; i < 2; i++) {
    PreparedStatement stmt=conn.prepareStatement("select * from dual");
    assertNotNull(stmt);
    ResultSet rset=stmt.executeQuery();
    assertNotNull(rset);
    assertFalse(isClosed(rset));
    rset.close();
    assertTrue(isClosed(rset));
    rset.close();
    assertTrue(isClosed(rset));
    rset.close();
    assertTrue(isClosed(rset));
  }
  conn.close();
}

</code></pre>

<br>
<pre class="type-9 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verify the close method can be called multiple times on a single connection without
 * an exception being thrown.
 */
@Test public void testCanCloseConnectionTwice() throws Exception {
  for (int i=0; i < getMaxTotal(); i++) {
    Connection conn=newConnection();
    assertNotNull(conn);
    assertTrue(!conn.isClosed());
    conn.close();
    assertTrue(conn.isClosed());
    conn.close();
    assertTrue(conn.isClosed());
  }
}

</code></pre>

<br>
<pre class="type-2 type-6 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPrepareStatementOptions() throws Exception {
  Connection conn=newConnection();
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual",ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE);
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  assertEquals(ResultSet.TYPE_SCROLL_SENSITIVE,rset.getType());
  assertEquals(ResultSet.CONCUR_UPDATABLE,rset.getConcurrency());
  rset.close();
  stmt.close();
  conn.close();
}

</code></pre>

<br>
<pre class="type-2 type-9 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCanCloseCallableStatementTwice() throws Exception {
  Connection conn=newConnection();
  assertNotNull(conn);
  assertTrue(!conn.isClosed());
  for (int i=0; i < 2; i++) {
    PreparedStatement stmt=conn.prepareCall("select * from dual");
    assertNotNull(stmt);
    assertFalse(isClosed(stmt));
    stmt.close();
    assertTrue(isClosed(stmt));
    stmt.close();
    assertTrue(isClosed(stmt));
    stmt.close();
    assertTrue(isClosed(stmt));
  }
  conn.close();
}

</code></pre>

<br>
<pre class="type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAutoCommitBehavior() throws Exception {
  Connection conn0=newConnection();
  assertNotNull("connection should not be null",conn0);
  assertTrue("autocommit should be true for conn0",conn0.getAutoCommit());
  Connection conn1=newConnection();
  assertTrue("autocommit should be true for conn1",conn1.getAutoCommit());
  conn1.close();
  assertTrue("autocommit should be true for conn0",conn0.getAutoCommit());
  conn0.setAutoCommit(false);
  assertFalse("autocommit should be false for conn0",conn0.getAutoCommit());
  conn0.close();
  Connection conn2=newConnection();
  assertTrue("autocommit should be true for conn2",conn2.getAutoCommit());
  Connection conn3=newConnection();
  assertTrue("autocommit should be true for conn3",conn3.getAutoCommit());
  conn2.close();
  conn3.close();
}

</code></pre>

<br>
<pre class="type-9 type-10 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMaxTotal() throws Exception {
  Connection[] c=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=newConnection();
    assertTrue(c[i] != null);
  }
  try {
    newConnection();
    fail("Allowed to open more than DefaultMaxTotal connections.");
  }
 catch (  java.sql.SQLException e) {
  }
  for (  Connection element : c) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClearWarnings() throws Exception {
  Connection[] c=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=newConnection();
    assertTrue(c[i] != null);
    try (CallableStatement cs=c[i].prepareCall("warning")){
    }
   }
  for (  Connection element : c) {
    assertNotNull(element.getWarnings());
  }
  for (  Connection element : c) {
    element.close();
  }
  for (int i=0; i < c.length; i++) {
    c[i]=newConnection();
  }
  for (  Connection element : c) {
    assertNull(element.getWarnings());
  }
  for (  Connection element : c) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-2 type-9 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCanClosePreparedStatementTwice() throws Exception {
  Connection conn=newConnection();
  assertNotNull(conn);
  assertTrue(!conn.isClosed());
  for (int i=0; i < 2; i++) {
    PreparedStatement stmt=conn.prepareStatement("select * from dual");
    assertNotNull(stmt);
    assertFalse(isClosed(stmt));
    stmt.close();
    assertTrue(isClosed(stmt));
    stmt.close();
    assertTrue(isClosed(stmt));
    stmt.close();
    assertTrue(isClosed(stmt));
  }
  conn.close();
}

</code></pre>

<br>
<pre class="type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * DBCP-128: BasicDataSource.getConnection()
 * Connections don't work as hashtable keys
 */
@Test public void testHashing() throws Exception {
  Connection con=getConnection();
  Hashtable<Connection,String> hash=new Hashtable<>();
  hash.put(con,"test");
  assertEquals("test",hash.get(con));
  assertTrue(hash.containsKey(con));
  assertTrue(hash.contains("test"));
  hash.clear();
  con.close();
}

</code></pre>

<br>
<pre class="type-2 type-9 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCanCloseStatementTwice() throws Exception {
  Connection conn=newConnection();
  assertNotNull(conn);
  assertTrue(!conn.isClosed());
  for (int i=0; i < 2; i++) {
    Statement stmt=conn.createStatement();
    assertNotNull(stmt);
    assertFalse(isClosed(stmt));
    stmt.close();
    assertTrue(isClosed(stmt));
    stmt.close();
    assertTrue(isClosed(stmt));
    stmt.close();
    assertTrue(isClosed(stmt));
  }
  conn.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestDelegatingConnection </h4><pre class="type-10 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verify fix for DBCP-241
 */
@Test public void testCheckOpenNull() throws Exception {
  try {
    conn.close();
    conn.checkOpen();
    fail("Expecting SQLException");
  }
 catch (  SQLException ex) {
    assertTrue(ex.getMessage().endsWith("is closed."));
  }
  try {
    conn=new DelegatingConnection<>(null);
    conn.setClosedInternal(true);
    conn.checkOpen();
    fail("Expecting SQLException");
  }
 catch (  SQLException ex) {
    assertTrue(ex.getMessage().endsWith("is null."));
  }
  try {
    PoolingConnection pc=new PoolingConnection(delegateConn2);
    pc.setStatementPool(new GenericKeyedObjectPool<>(pc));
    conn=new DelegatingConnection<>(pc);
    pc.close();
    conn.close();
    try (PreparedStatement ps=conn.prepareStatement("")){
    }
     fail("Expecting SQLException");
  }
 catch (  SQLException ex) {
    assertTrue(ex.getMessage().endsWith("is closed."));
  }
  try {
    conn=new DelegatingConnection<>(new RTEGeneratingConnection());
    conn.close();
    conn.checkOpen();
    fail("Expecting SQLException");
  }
 catch (  SQLException ex) {
    assertTrue(ex.getMessage().endsWith("is closed."));
  }
}

</code></pre>

<br>
<pre class="type-8 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConnectionToString() throws Exception {
  String s=conn.toString();
  assertNotNull(s);
  assertTrue(s.length() > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestPStmtPooling </h4><pre class="type-10 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClosePool() throws Exception {
  DriverManager.registerDriver(new TesterDriver());
  ConnectionFactory connFactory=new DriverManagerConnectionFactory("jdbc:apache:commons:testdriver","u1","p1");
  PoolableConnectionFactory pcf=new PoolableConnectionFactory(connFactory,null);
  pcf.setPoolStatements(true);
  pcf.setDefaultReadOnly(Boolean.FALSE);
  pcf.setDefaultAutoCommit(Boolean.TRUE);
  ObjectPool<PoolableConnection> connPool=new GenericObjectPool<>(pcf);
  pcf.setPool(connPool);
  PoolingDataSource<?> ds=new PoolingDataSource<>(connPool);
  ((PoolingDataSource<?>)ds).setAccessToUnderlyingConnectionAllowed(true);
  Connection conn=ds.getConnection();
  try (Statement s=conn.prepareStatement("select 1 from dual")){
  }
   Connection poolableConnection=((DelegatingConnection<?>)conn).getDelegate();
  Connection poolingConnection=((DelegatingConnection<?>)poolableConnection).getDelegate();
  poolingConnection.close();
  try (PreparedStatement ps=conn.prepareStatement("select 1 from dual")){
    fail("Expecting SQLException");
  }
 catch (  SQLException ex) {
    assertTrue(ex.getMessage().endsWith("invalid PoolingConnection."));
  }
  ds.close();
}

</code></pre>

<br>
<pre class="type-2 type-6 type-13 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verifies that executing close() on an already closed DelegatingStatement
 * that wraps a PoolablePreparedStatement does not "re-close" the PPS
 * (which could be in use by another client - see DBCP-414).
 */
@Test public void testMultipleClose() throws Exception {
  DataSource ds=createPDS();
  PreparedStatement stmt1=null;
  Connection conn=ds.getConnection();
  stmt1=conn.prepareStatement("select 1 from dual");
  PoolablePreparedStatement<?> pps1=getPoolablePreparedStatement(stmt1);
  conn.close();
  assertTrue(stmt1.isClosed());
  stmt1.close();
  assertTrue(stmt1.isClosed());
  Connection conn2=ds.getConnection();
  PreparedStatement stmt2=conn2.prepareStatement("select 1 from dual");
  Assert.assertSame(pps1,getPoolablePreparedStatement(stmt2));
  stmt1.close();
  assertTrue(!stmt2.isClosed());
  stmt2.executeQuery();
  conn2.close();
  assertTrue(stmt1.isClosed());
  assertTrue(stmt2.isClosed());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestPStmtPoolingBasicDataSource </h4><pre class="type-2 type-13 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPStmtPoolingWithNoClose() throws Exception {
  ds.setMaxTotal(1);
  ds.setMaxIdle(1);
  ds.setAccessToUnderlyingConnectionAllowed(true);
  Connection conn1=getConnection();
  assertNotNull(conn1);
  assertEquals(1,ds.getNumActive());
  assertEquals(0,ds.getNumIdle());
  PreparedStatement stmt1=conn1.prepareStatement("select 'a' from dual");
  assertNotNull(stmt1);
  Statement inner1=((DelegatingPreparedStatement)stmt1).getInnermostDelegate();
  assertNotNull(inner1);
  stmt1.close();
  Connection conn2=conn1;
  assertNotNull(conn2);
  assertEquals(1,ds.getNumActive());
  assertEquals(0,ds.getNumIdle());
  PreparedStatement stmt2=conn2.prepareStatement("select 'a' from dual");
  assertNotNull(stmt2);
  Statement inner2=((DelegatingPreparedStatement)stmt2).getInnermostDelegate();
  assertNotNull(inner2);
  assertSame(inner1,inner2);
}

</code></pre>

<br>
<pre class="type-2 type-10 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPreparedStatementPooling() throws Exception {
  Connection conn=getConnection();
  assertNotNull(conn);
  PreparedStatement stmt1=conn.prepareStatement("select 'a' from dual");
  assertNotNull(stmt1);
  PreparedStatement stmt2=conn.prepareStatement("select 'b' from dual");
  assertNotNull(stmt2);
  assertTrue(stmt1 != stmt2);
  PreparedStatement stmt3=null;
  try (PreparedStatement ps=conn.prepareStatement("select 'c' from dual")){
    fail("expected SQLException");
  }
 catch (  SQLException e) {
  }
  stmt2.close();
  stmt3=conn.prepareStatement("select 'c' from dual");
  assertNotNull(stmt3);
  assertTrue(stmt3 != stmt1);
  assertTrue(stmt3 != stmt2);
  stmt1.close();
  PreparedStatement stmt4=conn.prepareStatement("select 'a' from dual");
  assertNotNull(stmt4);
}

</code></pre>

<br>
<pre class="type-2 type-13 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPStmtPoolingAccrossClose() throws Exception {
  ds.setMaxTotal(1);
  ds.setMaxIdle(1);
  ds.setAccessToUnderlyingConnectionAllowed(true);
  Connection conn1=getConnection();
  assertNotNull(conn1);
  assertEquals(1,ds.getNumActive());
  assertEquals(0,ds.getNumIdle());
  PreparedStatement stmt1=conn1.prepareStatement("select 'a' from dual");
  assertNotNull(stmt1);
  Statement inner1=((DelegatingPreparedStatement)stmt1).getInnermostDelegate();
  assertNotNull(inner1);
  stmt1.close();
  conn1.close();
  assertEquals(0,ds.getNumActive());
  assertEquals(1,ds.getNumIdle());
  Connection conn2=getConnection();
  assertNotNull(conn2);
  assertEquals(1,ds.getNumActive());
  assertEquals(0,ds.getNumIdle());
  PreparedStatement stmt2=conn2.prepareStatement("select 'a' from dual");
  assertNotNull(stmt2);
  Statement inner2=((DelegatingPreparedStatement)stmt2).getInnermostDelegate();
  assertNotNull(inner2);
  assertSame(inner1,inner2);
}

</code></pre>

<br>
<pre class="type-2 type-10 type-13 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verifies that the prepared statement pool behaves as an LRU cache,
 * closing least-recently-used statements idle in the pool to make room
 * for new ones if necessary.
 */
@Test public void testLRUBehavior() throws Exception {
  ds.setMaxOpenPreparedStatements(3);
  Connection conn=getConnection();
  assertNotNull(conn);
  PreparedStatement stmt1=conn.prepareStatement("select 'a' from dual");
  PreparedStatement inner1=(PreparedStatement)((DelegatingPreparedStatement)stmt1).getInnermostDelegate();
  PreparedStatement stmt2=conn.prepareStatement("select 'b' from dual");
  PreparedStatement inner2=(PreparedStatement)((DelegatingPreparedStatement)stmt2).getInnermostDelegate();
  PreparedStatement stmt3=conn.prepareStatement("select 'c' from dual");
  PreparedStatement inner3=(PreparedStatement)((DelegatingPreparedStatement)stmt3).getInnermostDelegate();
  stmt1.close();
  Thread.sleep(100);
  stmt2.close();
  Thread.sleep(100);
  stmt3.close();
  PreparedStatement stmt4=conn.prepareStatement("select 'd' from dual");
  assertNotNull(stmt4);
  try {
    inner1.clearParameters();
    fail("expecting SQLExcption - statement should be closed");
  }
 catch (  SQLException ex) {
  }
  inner2.clearParameters();
  inner3.clearParameters();
  PreparedStatement stmt5=conn.prepareStatement("select 'a' from dual");
  PreparedStatement inner5=(PreparedStatement)((DelegatingPreparedStatement)stmt5).getInnermostDelegate();
  assertNotSame(inner5,inner1);
  try {
    inner2.clearParameters();
    fail("expecting SQLExcption - statement should be closed");
  }
 catch (  SQLException ex) {
  }
  inner3.clearParameters();
}

</code></pre>

<br>
<pre class="type-2 type-8 type-13 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPStmtCatalog() throws Exception {
  Connection conn=getConnection();
  conn.setCatalog("catalog1");
  DelegatingPreparedStatement stmt1=(DelegatingPreparedStatement)conn.prepareStatement("select 'a' from dual");
  TesterPreparedStatement inner1=(TesterPreparedStatement)stmt1.getInnermostDelegate();
  assertEquals("catalog1",inner1.getCatalog());
  stmt1.close();
  conn.setCatalog("catalog2");
  DelegatingPreparedStatement stmt2=(DelegatingPreparedStatement)conn.prepareStatement("select 'a' from dual");
  TesterPreparedStatement inner2=(TesterPreparedStatement)stmt2.getInnermostDelegate();
  assertEquals("catalog2",inner2.getCatalog());
  stmt2.close();
  conn.setCatalog("catalog1");
  DelegatingPreparedStatement stmt3=(DelegatingPreparedStatement)conn.prepareStatement("select 'a' from dual");
  TesterPreparedStatement inner3=(TesterPreparedStatement)stmt3.getInnermostDelegate();
  assertEquals("catalog1",inner3.getCatalog());
  stmt3.close();
  assertNotSame(inner1,inner2);
  assertSame(inner1,inner3);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestPoolableConnection </h4><pre class="type-10 type-8 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFastFailValidationCustomCodes() throws Exception {
  pool.setTestOnReturn(true);
  PoolableConnectionFactory factory=(PoolableConnectionFactory)pool.getFactory();
  factory.setFastFailValidation(true);
  ArrayList<String> disconnectionSqlCodes=new ArrayList<>();
  disconnectionSqlCodes.add("XXX");
  factory.setDisconnectionSqlCodes(disconnectionSqlCodes);
  PoolableConnection conn=pool.borrowObject();
  TesterConnection nativeConnection=(TesterConnection)conn.getInnermostDelegate();
  nativeConnection.setFailure(new SQLException("Fatal connection error.","XXX"));
  try {
    conn.createStatement();
    fail("Should throw SQL exception.");
  }
 catch (  SQLException ignored) {
    nativeConnection.setFailure(null);
  }
  conn.close();
  assertEquals("The pool should have no active connections",0,pool.getNumActive());
  assertEquals("The pool should have no idle connections",0,pool.getNumIdle());
}

</code></pre>

<br>
<pre class="type-8 type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClosingWrappedInDelegate() throws Exception {
  Assert.assertEquals(0,pool.getNumActive());
  Connection conn=pool.borrowObject();
  DelegatingConnection<Connection> outer=new DelegatingConnection<>(conn);
  Assert.assertFalse(outer.isClosed());
  Assert.assertFalse(conn.isClosed());
  Assert.assertEquals(1,pool.getNumActive());
  outer.close();
  Assert.assertTrue(outer.isClosed());
  Assert.assertTrue(conn.isClosed());
  Assert.assertEquals(0,pool.getNumActive());
  Assert.assertEquals(1,pool.getNumIdle());
}

</code></pre>

<br>
<pre class="type-10 type-8 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFastFailValidation() throws Exception {
  pool.setTestOnReturn(true);
  PoolableConnectionFactory factory=(PoolableConnectionFactory)pool.getFactory();
  factory.setFastFailValidation(true);
  PoolableConnection conn=pool.borrowObject();
  TesterConnection nativeConnection=(TesterConnection)conn.getInnermostDelegate();
  nativeConnection.setFailure(new SQLException("Not fatal error.","Invalid syntax."));
  try {
    conn.createStatement();
    fail("Should throw SQL exception.");
  }
 catch (  SQLException ignored) {
    nativeConnection.setFailure(null);
  }
  conn.validate("SELECT 1",1000);
  nativeConnection.setFailure(new SQLException("Fatal connection error.","01002"));
  try {
    conn.createStatement();
    fail("Should throw SQL exception.");
  }
 catch (  SQLException ignored) {
    nativeConnection.setFailure(null);
  }
  try {
    conn.validate("SELECT 1",1000);
    fail("Should throw SQL exception on validation.");
  }
 catch (  SQLException notValid) {
  }
  conn.close();
  assertEquals("The pool should have no active connections",0,pool.getNumActive());
  assertEquals("The pool should have no idle connections",0,pool.getNumIdle());
}

</code></pre>

<br>
<pre class="type-8 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConnectionPool() throws Exception {
  Connection c=pool.borrowObject();
  assertNotNull("Connection should be created and should not be null",c);
  assertEquals("There should be exactly one active object in the pool",1,pool.getNumActive());
  c.close();
  assertEquals("There should now be zero active objects in the pool",0,pool.getNumActive());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestPoolingDataSource </h4><pre class="type-8 type-6 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClose() throws Exception {
  Properties props=new Properties();
  props.setProperty("user","username");
  props.setProperty("password","password");
  PoolableConnectionFactory f=new PoolableConnectionFactory(new DriverConnectionFactory(new TesterDriver(),"jdbc:apache:commons:testdriver",props),null);
  f.setValidationQuery("SELECT DUMMY FROM DUAL");
  f.setDefaultReadOnly(Boolean.TRUE);
  f.setDefaultAutoCommit(Boolean.TRUE);
  GenericObjectPool<PoolableConnection> p=new GenericObjectPool<>(f);
  p.setMaxTotal(getMaxTotal());
  p.setMaxWaitMillis(getMaxWaitMillis());
  try (PoolingDataSource<PoolableConnection> dataSource=new PoolingDataSource<>(p)){
    Connection connection=dataSource.getConnection();
    assertNotNull(connection);
    connection.close();
  }
   assertTrue(p.isClosed());
  assertEquals(0,p.getNumIdle());
  assertEquals(0,p.getNumActive());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestPoolingDriver </h4><pre class="type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * "http://issues.apache.org/bugzilla/show_bug.cgi?id=28912" 
 */
@Test public void testReportedBug28912() throws Exception {
  Connection conn1=getConnection();
  assertNotNull(conn1);
  assertFalse(conn1.isClosed());
  conn1.close();
  Connection conn2=getConnection();
  assertNotNull(conn2);
  assertTrue(conn1.isClosed());
  assertFalse(conn2.isClosed());
  conn1.close();
  assertTrue(conn1.isClosed());
  assertFalse(conn2.isClosed());
}

</code></pre>

<br>
<pre class="type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClosePool() throws Exception {
  Connection conn=DriverManager.getConnection("jdbc:apache:commons:dbcp:test");
  assertNotNull(conn);
  conn.close();
  PoolingDriver driver2=(PoolingDriver)DriverManager.getDriver("jdbc:apache:commons:dbcp:");
  driver2.closePool("test");
  try (Connection c=DriverManager.getConnection("jdbc:apache:commons:dbcp:test")){
    fail("expected SQLException");
  }
 catch (  SQLException e) {
  }
}

</code></pre>

<br>
<pre class="type-9 type-8 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * "http://issues.apache.org/bugzilla/show_bug.cgi?id=12400" 
 */
@Test public void testReportedBug12400() throws Exception {
  GenericObjectPoolConfig config=new GenericObjectPoolConfig();
  config.setMaxTotal(70);
  config.setMaxWaitMillis(60000);
  config.setMaxIdle(10);
  ConnectionFactory connectionFactory=new DriverManagerConnectionFactory("jdbc:apache:commons:testdriver","username","password");
  PoolableConnectionFactory poolableConnectionFactory=new PoolableConnectionFactory(connectionFactory,null);
  poolableConnectionFactory.setDefaultReadOnly(Boolean.FALSE);
  poolableConnectionFactory.setDefaultAutoCommit(Boolean.TRUE);
  ObjectPool<PoolableConnection> connectionPool=new GenericObjectPool<>(poolableConnectionFactory,config);
  poolableConnectionFactory.setPool(connectionPool);
  assertNotNull(poolableConnectionFactory);
  PoolingDriver driver2=new PoolingDriver();
  driver2.registerPool("neusoftim",connectionPool);
  Connection[] conn=new Connection[25];
  for (int i=0; i < 25; i++) {
    conn[i]=DriverManager.getConnection("jdbc:apache:commons:dbcp:neusoftim");
    for (int j=0; j < i; j++) {
      assertTrue(conn[j] != conn[i]);
      assertTrue(!conn[j].equals(conn[i]));
    }
  }
  for (int i=0; i < 25; i++) {
    conn[i].close();
  }
}

</code></pre>

<br>
<pre class="type-7 type-8 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setUp() throws Exception {
  DriverConnectionFactory cf=new DriverConnectionFactory(new TesterDriver(),"jdbc:apache:commons:testdriver",null);
  PoolableConnectionFactory pcf=new PoolableConnectionFactory(cf,null);
  pcf.setPoolStatements(true);
  pcf.setMaxOpenPrepatedStatements(10);
  pcf.setValidationQuery("SELECT COUNT(*) FROM DUAL");
  pcf.setDefaultReadOnly(Boolean.FALSE);
  pcf.setDefaultAutoCommit(Boolean.TRUE);
  GenericObjectPoolConfig poolConfig=new GenericObjectPoolConfig();
  poolConfig.setMaxTotal(getMaxTotal());
  poolConfig.setMaxWaitMillis(getMaxWaitMillis());
  poolConfig.setMinIdle(10);
  poolConfig.setTestOnBorrow(true);
  poolConfig.setTestOnReturn(true);
  poolConfig.setTestWhileIdle(true);
  poolConfig.setTimeBetweenEvictionRunsMillis(10000L);
  poolConfig.setNumTestsPerEvictionRun(5);
  poolConfig.setMinEvictableIdleTimeMillis(5000L);
  GenericObjectPool<PoolableConnection> pool=new GenericObjectPool<>(pcf,poolConfig);
  pcf.setPool(pool);
  assertNotNull(pcf);
  driver=new PoolingDriver(true);
  driver.registerPool("test",pool);
}

</code></pre>

<br>
<pre class="type-8 type-6 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidateConnection() throws Exception {
  Connection conn=DriverManager.getConnection("jdbc:apache:commons:dbcp:test");
  assertNotNull(conn);
  ObjectPool<?> pool=driver.getConnectionPool("test");
  assertEquals(1,pool.getNumActive());
  assertEquals(0,pool.getNumIdle());
  PoolingDriver driver2=(PoolingDriver)DriverManager.getDriver("jdbc:apache:commons:dbcp:");
  driver2.invalidateConnection(conn);
  assertEquals(0,pool.getNumActive());
  assertEquals(0,pool.getNumIdle());
  assertTrue(conn.isClosed());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.cpdsadapter.TestDriverAdapterCPDS </h4><pre class="type-2 type-8 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleWithUsername() throws Exception {
  Connection conn=pcds.getPooledConnection("u1","p1").getConnection();
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
}

</code></pre>

<br>
<pre class="type-2 type-8 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimple() throws Exception {
  Connection conn=pcds.getPooledConnection().getConnection();
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.datasources.TestCPDSConnectionFactory </h4><pre class="type-10 type-8 type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * JIRA DBCP-216
 * Verify that pool counters are maintained properly and listeners are
 * cleaned up when a PooledConnection throws a connectionError event.
 */
@Test public void testConnectionErrorCleanup() throws Exception {
  CPDSConnectionFactory factory=new CPDSConnectionFactory(cpds,null,-1,false,"username","password");
  GenericObjectPool<PooledConnectionAndInfo> pool=new GenericObjectPool<>(factory);
  factory.setPool(pool);
  PooledConnection pcon1=pool.borrowObject().getPooledConnection();
  Connection con1=pcon1.getConnection();
  PooledConnection pcon2=pool.borrowObject().getPooledConnection();
  assertEquals(2,pool.getNumActive());
  assertEquals(0,pool.getNumIdle());
  PooledConnectionProxy pc=(PooledConnectionProxy)pcon1;
  assertTrue(pc.getListeners().contains(factory));
  pc.throwConnectionError();
  assertEquals(1,pool.getNumActive());
  assertEquals(0,pool.getNumIdle());
  pc.throwConnectionError();
  assertEquals(1,pool.getNumActive());
  assertEquals(0,pool.getNumIdle());
  PooledConnection pcon3=pool.borrowObject().getPooledConnection();
  assertTrue(!pcon3.equals(pcon1));
  assertTrue(!pc.getListeners().contains(factory));
  assertEquals(2,pool.getNumActive());
  assertEquals(0,pool.getNumIdle());
  pcon2.getConnection().close();
  pcon3.getConnection().close();
  assertEquals(2,pool.getNumIdle());
  assertEquals(0,pool.getNumActive());
  try {
    pc.getConnection();
    fail("Expecting SQLException using closed PooledConnection");
  }
 catch (  SQLException ex) {
  }
  con1.close();
  assertEquals(2,pool.getNumIdle());
  assertEquals(0,pool.getNumActive());
  factory.getPool().clear();
  assertEquals(0,pool.getNumIdle());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.datasources.TestInstanceKeyDataSource </h4><pre class="type-10 type-8 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verify that exception on setupDefaults does not leak PooledConnection
 * JIRA: DBCP-237
 */
@Test public void testExceptionOnSetupDefaults() throws Exception {
  DriverAdapterCPDS pcds;
  pcds=new DriverAdapterCPDS();
  pcds.setDriver("org.apache.commons.dbcp2.TesterDriver");
  pcds.setUrl("jdbc:apache:commons:testdriver");
  pcds.setUser("foo");
  pcds.setPassword("bar");
  pcds.setPoolPreparedStatements(false);
  ThrowOnSetupDefaultsDataSource tds=new ThrowOnSetupDefaultsDataSource();
  tds.setConnectionPoolDataSource(pcds);
  int numConnections=tds.getNumActive();
  try {
    tds.getConnection("foo","bar");
    fail("Expecting SQLException");
  }
 catch (  SQLException ex) {
  }
  assertEquals(numConnections,tds.getNumActive());
  tds.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.datasources.TestKeyedCPDSConnectionFactory </h4><pre class="type-10 type-8 type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * JIRA DBCP-216
 * Verify that pool counters are maintained properly and listeners are
 * cleaned up when a PooledConnection throws a connectionError event.
 */
@Test public void testConnectionErrorCleanup() throws Exception {
  UserPassKey key=new UserPassKey("username","password");
  KeyedCPDSConnectionFactory factory=new KeyedCPDSConnectionFactory(cpds,null,-1,false);
  KeyedObjectPool<UserPassKey,PooledConnectionAndInfo> pool=new GenericKeyedObjectPool<>(factory);
  factory.setPool(pool);
  PooledConnection pcon1=pool.borrowObject(key).getPooledConnection();
  Connection con1=pcon1.getConnection();
  PooledConnection pcon2=pool.borrowObject(key).getPooledConnection();
  assertEquals(2,pool.getNumActive(key));
  assertEquals(0,pool.getNumIdle(key));
  PooledConnectionProxy pc=(PooledConnectionProxy)pcon1;
  assertTrue(pc.getListeners().contains(factory));
  pc.throwConnectionError();
  assertEquals(1,pool.getNumActive(key));
  assertEquals(0,pool.getNumIdle(key));
  pc.throwConnectionError();
  assertEquals(1,pool.getNumActive(key));
  assertEquals(0,pool.getNumIdle(key));
  PooledConnection pcon3=pool.borrowObject(key).getPooledConnection();
  assertTrue(!pcon3.equals(pcon1));
  assertTrue(!pc.getListeners().contains(factory));
  assertEquals(2,pool.getNumActive(key));
  assertEquals(0,pool.getNumIdle(key));
  pcon2.getConnection().close();
  pcon3.getConnection().close();
  assertEquals(2,pool.getNumIdle(key));
  assertEquals(0,pool.getNumActive(key));
  try {
    pc.getConnection();
    fail("Expecting SQLException using closed PooledConnection");
  }
 catch (  SQLException ex) {
  }
  con1.close();
  assertEquals(2,pool.getNumIdle(key));
  assertEquals(0,pool.getNumActive(key));
  factory.getPool().clear();
  assertEquals(0,pool.getNumIdle(key));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.datasources.TestPerUserPoolDataSource </h4><pre class="type-2 type-9 type-10 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Test public void testMaxTotal() throws Exception {
  Connection[] c=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=ds.getConnection();
    assertTrue(c[i] != null);
  }
  try (Connection conn=ds.getConnection()){
    fail("Allowed to open more than DefaultMaxTotal connections.");
  }
 catch (  java.sql.SQLException e) {
  }
  for (  Connection element : c) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-8 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPerUserMethods() throws Exception {
  PerUserPoolDataSource tds=(PerUserPoolDataSource)ds;
  tds.setPerUserMaxTotal("u1",Integer.valueOf(5));
  tds.setPerUserMaxTotal("u2",Integer.valueOf(5));
  assertEquals(0,tds.getNumActive());
  assertEquals(0,tds.getNumActive("u1"));
  assertEquals(0,tds.getNumActive("u2"));
  assertEquals(0,tds.getNumIdle());
  assertEquals(0,tds.getNumIdle("u1"));
  assertEquals(0,tds.getNumIdle("u2"));
  Connection conn=tds.getConnection();
  assertNotNull(conn);
  assertEquals(1,tds.getNumActive());
  assertEquals(0,tds.getNumActive("u1"));
  assertEquals(0,tds.getNumActive("u2"));
  assertEquals(0,tds.getNumIdle());
  assertEquals(0,tds.getNumIdle("u1"));
  assertEquals(0,tds.getNumIdle("u2"));
  conn.close();
  assertEquals(0,tds.getNumActive());
  assertEquals(0,tds.getNumActive("u1"));
  assertEquals(0,tds.getNumActive("u2"));
  assertEquals(1,tds.getNumIdle());
  assertEquals(0,tds.getNumIdle("u1"));
  assertEquals(0,tds.getNumIdle("u2"));
  conn=tds.getConnection("u1","p1");
  assertNotNull(conn);
  assertEquals(0,tds.getNumActive());
  assertEquals(1,tds.getNumActive("u1"));
  assertEquals(0,tds.getNumActive("u2"));
  assertEquals(1,tds.getNumIdle());
  assertEquals(0,tds.getNumIdle("u1"));
  assertEquals(0,tds.getNumIdle("u2"));
  conn.close();
  assertEquals(0,tds.getNumActive());
  assertEquals(0,tds.getNumActive("u1"));
  assertEquals(0,tds.getNumActive("u2"));
  assertEquals(1,tds.getNumIdle());
  assertEquals(1,tds.getNumIdle("u1"));
  assertEquals(0,tds.getNumIdle("u2"));
}

</code></pre>

<br>
<pre class="type-2 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Test public void testSimple() throws Exception {
  Connection conn=ds.getConnection();
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
}

</code></pre>

<br>
<pre class="type-10 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangePassword() throws Exception {
  try (Connection c=ds.getConnection("foo","bay")){
    fail("Should have generated SQLException");
  }
 catch (  SQLException expected) {
  }
  Connection con1=ds.getConnection("foo","bar");
  Connection con2=ds.getConnection("foo","bar");
  Connection con3=ds.getConnection("foo","bar");
  con1.close();
  con2.close();
  TesterDriver.addUser("foo","bay");
  try {
    Connection con4=ds.getConnection("foo","bay");
    assertEquals("Should be no idle connections in the pool",0,((PerUserPoolDataSource)ds).getNumIdle("foo"));
    con4.close();
    assertEquals("Should be one idle connection in the pool",1,((PerUserPoolDataSource)ds).getNumIdle("foo"));
    try (Connection c=ds.getConnection("foo","bar")){
      fail("Should have generated SQLException");
    }
 catch (    SQLException expected) {
    }
    Connection con5=ds.getConnection("foo","bay");
    con3.close();
    ds.getConnection("foo","bay").close();
    assertEquals("Should be one idle connection in the pool",1,((PerUserPoolDataSource)ds).getNumIdle("foo"));
    con5.close();
  }
  finally {
    TesterDriver.addUser("foo","bar");
  }
}

</code></pre>

<br>
<pre class="type-8 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnregisteredUser() throws Exception {
  PerUserPoolDataSource tds=(PerUserPoolDataSource)ds;
  assertEquals(0,tds.getNumActive());
  assertEquals(0,tds.getNumIdle());
  Connection conn=tds.getConnection();
  assertNotNull(conn);
  assertEquals(1,tds.getNumActive());
  assertEquals(0,tds.getNumIdle());
  conn.close();
  assertEquals(0,tds.getNumActive());
  assertEquals(1,tds.getNumIdle());
  conn=tds.getConnection("u1","p1");
  assertNotNull(conn);
  assertEquals(0,tds.getNumActive());
  assertEquals(1,tds.getNumIdle());
  assertEquals(1,tds.getNumActive("u1"));
  assertEquals(0,tds.getNumIdle("u1"));
  conn.close();
  assertEquals(0,tds.getNumActive());
  assertEquals(1,tds.getNumIdle());
  assertEquals(0,tds.getNumActive("u1"));
  assertEquals(1,tds.getNumIdle("u1"));
}

</code></pre>

<br>
<pre class="type-2 type-10 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Test public void testSimple2() throws Exception {
  Connection conn=ds.getConnection();
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
  try (Statement s=conn.createStatement()){
    fail("Can't use closed connections");
  }
 catch (  SQLException e) {
  }
  conn=ds.getConnection();
  assertNotNull(conn);
  stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
  conn=null;
}

</code></pre>

<br>
<pre class="type-2 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleWithUsername() throws Exception {
  Connection conn=ds.getConnection("u1","p1");
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
}

</code></pre>

<br>
<pre class="type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTransactionIsolationBehavior() throws Exception {
  Connection conn=getConnection();
  assertNotNull(conn);
  assertEquals(Connection.TRANSACTION_READ_COMMITTED,conn.getTransactionIsolation());
  conn.setTransactionIsolation(Connection.TRANSACTION_READ_UNCOMMITTED);
  conn.close();
  Connection conn2=getConnection();
  assertEquals(Connection.TRANSACTION_READ_COMMITTED,conn2.getTransactionIsolation());
  Connection conn3=getConnection();
  assertEquals(Connection.TRANSACTION_READ_COMMITTED,conn3.getTransactionIsolation());
  conn2.close();
  conn3.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.datasources.TestSharedPoolDataSource </h4><pre class="type-2 type-10 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Test public void testSimple2() throws Exception {
  Connection conn=ds.getConnection();
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
  try (Statement s=conn.createStatement()){
    fail("Can't use closed connections");
  }
 catch (  SQLException e) {
  }
  conn=ds.getConnection();
  assertNotNull(conn);
  stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
  conn=null;
}

</code></pre>

<br>
<pre class="type-2 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleWithUsername() throws Exception {
  Connection conn=ds.getConnection("u1","p1");
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
}

</code></pre>

<br>
<pre class="type-2 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Test public void testSimple() throws Exception {
  Connection conn=ds.getConnection();
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
}

</code></pre>

<br>
<pre class="type-2 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPoolPrepareStatement() throws Exception {
  pcds.setPoolPreparedStatements(true);
  Connection conn=ds.getConnection();
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
}

</code></pre>

<br>
<pre class="type-2 type-9 type-10 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Test public void testMaxTotal() throws Exception {
  Connection[] c=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=ds.getConnection();
    assertTrue(c[i] != null);
  }
  try (Connection conn=ds.getConnection()){
    fail("Allowed to open more than DefaultMaxTotal connections.");
  }
 catch (  java.sql.SQLException e) {
  }
  for (  Connection element : c) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-10 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangePassword() throws Exception {
  try (Connection c=ds.getConnection("foo","bay")){
    fail("Should have generated SQLException");
  }
 catch (  SQLException expected) {
  }
  Connection con1=ds.getConnection("foo","bar");
  Connection con2=ds.getConnection("foo","bar");
  Connection con3=ds.getConnection("foo","bar");
  con1.close();
  con2.close();
  TesterDriver.addUser("foo","bay");
  try (Connection con4=ds.getConnection("foo","bay")){
    assertEquals("Should be no idle connections in the pool",0,((SharedPoolDataSource)ds).getNumIdle());
    con4.close();
    assertEquals("Should be one idle connection in the pool",1,((SharedPoolDataSource)ds).getNumIdle());
    try (Connection con4b=ds.getConnection("foo","bar")){
      fail("Should have generated SQLException");
    }
 catch (    SQLException expected) {
    }
    Connection con5=ds.getConnection("foo","bay");
    con3.close();
    ds.getConnection("foo","bay").close();
    assertEquals("Should be one idle connection in the pool",1,((SharedPoolDataSource)ds).getNumIdle());
    con5.close();
  }
  finally {
    TesterDriver.addUser("foo","bar");
  }
}

</code></pre>

<br>
<pre class="type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTransactionIsolationBehavior() throws Exception {
  Connection conn=getConnection();
  assertNotNull(conn);
  assertEquals(Connection.TRANSACTION_READ_COMMITTED,conn.getTransactionIsolation());
  conn.setTransactionIsolation(Connection.TRANSACTION_READ_UNCOMMITTED);
  conn.close();
  Connection conn2=getConnection();
  assertEquals(Connection.TRANSACTION_READ_COMMITTED,conn2.getTransactionIsolation());
  Connection conn3=getConnection();
  assertEquals(Connection.TRANSACTION_READ_COMMITTED,conn3.getTransactionIsolation());
  conn2.close();
  conn3.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.managed.TestBasicManagedDataSource </h4><pre class="type-10 type-8 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * JIRA: DBCP-294
 * Verify that PoolableConnections created by BasicManagedDataSource unregister themselves
 * when reallyClosed.
 */
@Test public void testReallyClose() throws Exception {
  BasicManagedDataSource basicManagedDataSource=new BasicManagedDataSource();
  basicManagedDataSource.setTransactionManager(new TransactionManagerImpl());
  basicManagedDataSource.setDriverClassName("org.apache.commons.dbcp2.TesterDriver");
  basicManagedDataSource.setUrl("jdbc:apache:commons:testdriver");
  basicManagedDataSource.setUsername("username");
  basicManagedDataSource.setPassword("password");
  basicManagedDataSource.setMaxIdle(1);
  ManagedConnection<?> conn=(ManagedConnection<?>)basicManagedDataSource.getConnection();
  assertNotNull(basicManagedDataSource.getTransactionRegistry().getXAResource(conn));
  ManagedConnection<?> conn2=(ManagedConnection<?>)basicManagedDataSource.getConnection();
  conn2.close();
  conn.close();
  try {
    basicManagedDataSource.getTransactionRegistry().getXAResource(conn);
    fail("Expecting SQLException - XAResources orphaned");
  }
 catch (  SQLException ex) {
  }
  conn2.close();
  basicManagedDataSource.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.managed.TestManagedDataSource </h4><pre class="type-8 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verify the accessToUnderlyingConnectionAllowed properly limits access to the physical connection.
 */
@Test public void testAccessToUnderlyingConnectionAllowed() throws Exception {
  ds.setAccessToUnderlyingConnectionAllowed(true);
  ManagedConnection<?> connection=(ManagedConnection<?>)newConnection();
  assertTrue(connection.isAccessToUnderlyingConnectionAllowed());
  assertNotNull(connection.getDelegate());
  assertNotNull(connection.getInnermostDelegate());
  connection.close();
  ds.setAccessToUnderlyingConnectionAllowed(false);
  connection=(ManagedConnection<?>)newConnection();
  assertFalse(connection.isAccessToUnderlyingConnectionAllowed());
  assertNull(connection.getDelegate());
  assertNull(connection.getInnermostDelegate());
  connection.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.managed.TestManagedDataSourceInTx </h4><pre class="type-9 type-13 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Test public void testConnectionsAreDistinct() throws Exception {
  Connection[] conn=new Connection[getMaxTotal()];
  for (int i=0; i < conn.length; i++) {
    conn[i]=newConnection();
    for (int j=0; j < i; j++) {
      Assert.assertNotSame(conn[j],conn[i]);
      Assert.assertNotEquals(conn[j],conn[i]);
      Assert.assertEquals(((DelegatingConnection<?>)conn[j]).getInnermostDelegateInternal(),((DelegatingConnection<?>)conn[i]).getInnermostDelegateInternal());
    }
  }
  for (  Connection element : conn) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Test public void testHashCode() throws Exception {
  Connection conn1=newConnection();
  assertNotNull(conn1);
  Connection conn2=newConnection();
  assertNotNull(conn2);
  Assert.assertNotEquals(conn1.hashCode(),conn2.hashCode());
}

</code></pre>

<br>
<pre class="type-10 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Test public void testAutoCommitBehavior() throws Exception {
  Connection connection=newConnection();
  assertFalse("Auto-commit should be disabled",connection.getAutoCommit());
  try {
    connection.setAutoCommit(true);
    fail("setAutoCommit method should be disabled while enlisted in a transaction");
  }
 catch (  SQLException e) {
  }
  assertFalse("Auto-commit should be disabled",connection.getAutoCommit());
  connection.close();
}

</code></pre>

<br>
<pre class="type-9 type-10 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Test public void testMaxTotal() throws Exception {
  Transaction[] transactions=new Transaction[getMaxTotal()];
  Connection[] c=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=newConnection();
    assertNotNull(c[i]);
    transactions[i]=transactionManager.suspend();
    assertNotNull(transactions[i]);
    transactionManager.begin();
  }
  try {
    newConnection();
    fail("Allowed to open more than DefaultMaxTotal connections.");
  }
 catch (  java.sql.SQLException e) {
  }
 finally {
    transactionManager.commit();
    for (int i=0; i < c.length; i++) {
      transactionManager.resume(transactions[i]);
      c[i].close();
      transactionManager.commit();
    }
  }
}

</code></pre>

<br>
<pre class="type-10 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadOnly() throws Exception {
  Connection connection=newConnection();
  assertTrue("Connection be read-only",connection.isReadOnly());
  try {
    connection.setReadOnly(true);
    fail("setReadOnly method should be disabled while enlisted in a transaction");
  }
 catch (  SQLException e) {
  }
  assertTrue("Connection be read-only",connection.isReadOnly());
  try {
    connection.setReadOnly(false);
    fail("setReadOnly method should be disabled while enlisted in a transaction");
  }
 catch (  SQLException e) {
  }
  assertTrue("Connection be read-only",connection.isReadOnly());
  connection.close();
}

</code></pre>

<br>
<pre class="type-10 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommit() throws Exception {
  Connection connection=newConnection();
  assertFalse("Connection should be open",connection.isClosed());
  try {
    connection.commit();
    fail("commit method should be disabled while enlisted in a transaction");
  }
 catch (  SQLException e) {
  }
  assertFalse("Connection should be open",connection.isClosed());
  connection.close();
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
