<h3><span class=" glyphicon glyphicon-tag"/>&nbspBooleanVerifier</h3><kbd>Verifies boolean conditions</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestAbandonedBasicDataSource </h4><pre class="type-6 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAbandonedCloseWithExceptions() throws Exception {
  ds.setRemoveAbandonedTimeout(0);
  ds.setMaxTotal(1);
  ds.setAccessToUnderlyingConnectionAllowed(true);
  Connection conn1=getConnection();
  assertNotNull(conn1);
  assertEquals(1,ds.getNumActive());
  Connection conn2=getConnection();
  assertNotNull(conn2);
  assertEquals(1,ds.getNumActive());
  TesterConnection tconn1=(TesterConnection)((DelegatingConnection<?>)conn1).getInnermostDelegate();
  tconn1.setFailure(new IOException("network error"));
  TesterConnection tconn2=(TesterConnection)((DelegatingConnection<?>)conn2).getInnermostDelegate();
  tconn2.setFailure(new IOException("network error"));
  try {
    conn2.close();
  }
 catch (  SQLException ex) {
  }
  assertEquals(0,ds.getNumActive());
  try {
    conn1.close();
  }
 catch (  SQLException ex) {
  }
  assertEquals(0,ds.getNumActive());
  assertTrue(sw.toString().contains("testAbandonedCloseWithExceptions"));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAbandonedClose() throws Exception {
  ds.setRemoveAbandonedTimeout(0);
  ds.setMaxTotal(1);
  ds.setAccessToUnderlyingConnectionAllowed(true);
  Connection conn1=getConnection();
  assertNotNull(conn1);
  assertEquals(1,ds.getNumActive());
  Connection conn2=getConnection();
  assertNotNull(conn2);
  assertEquals(1,ds.getNumActive());
  assertTrue(((DelegatingConnection<?>)conn1).getInnermostDelegate().isClosed());
  conn2.close();
  assertEquals(0,ds.getNumActive());
  conn1.close();
  assertEquals(0,ds.getNumActive());
  assertTrue(sw.toString().contains("testAbandonedClose"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestBasicDataSource </h4><pre class="type-8 type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * JIRA: DBCP-437
 * Verify that BasicDataSource sets disconnect codes properties.
 * Functionality is verified in pcf tests.
 */
@Test public void testDisconnectSqlCodes() throws Exception {
  ArrayList<String> disconnectionSqlCodes=new ArrayList<>();
  disconnectionSqlCodes.add("XXX");
  ds.setDisconnectionSqlCodes(disconnectionSqlCodes);
  ds.setFastFailValidation(true);
  ds.getConnection();
  PoolableConnectionFactory pcf=(PoolableConnectionFactory)ds.getConnectionPool().getFactory();
  assertTrue(pcf.isFastFailValidation());
  assertTrue(pcf.getDisconnectionSqlCodes().contains("XXX"));
  assertEquals(1,pcf.getDisconnectionSqlCodes().size());
}

</code></pre>

<br>
<pre class="type-8 type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMaxConnLifetimeExceeded() throws Exception {
  try {
    StackMessageLog.lock();
    ds.setMaxConnLifetimeMillis(100);
    Connection conn=ds.getConnection();
    assertEquals(1,ds.getNumActive());
    Thread.sleep(500);
    conn.close();
    assertEquals(0,ds.getNumIdle());
    String message=StackMessageLog.popMessage();
    assertTrue(message.indexOf("exceeds the maximum permitted value") > 0);
  }
  finally {
    StackMessageLog.clear();
    StackMessageLog.unLock();
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultCatalog() throws Exception {
  Connection[] c=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=getConnection();
    assertTrue(c[i] != null);
    assertEquals(CATALOG,c[i].getCatalog());
  }
  for (  Connection element : c) {
    element.setCatalog("error");
    element.close();
  }
  for (int i=0; i < c.length; i++) {
    c[i]=getConnection();
    assertTrue(c[i] != null);
    assertEquals(CATALOG,c[i].getCatalog());
  }
  for (  Connection element : c) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * JIRA: DBCP-444
 * Verify that invalidate does not return closed connection to the pool.
 */
@Test public void testConcurrentInvalidateBorrow() throws Exception {
  ds.setDriverClassName("org.apache.commons.dbcp2.TesterConnRequestCountDriver");
  ds.setUrl("jdbc:apache:commons:testerConnRequestCountDriver");
  ds.setTestOnBorrow(true);
  ds.setValidationQuery("SELECT DUMMY FROM DUAL");
  ds.setMaxTotal(8);
  ds.setLifo(true);
  ds.setMaxWaitMillis(-1);
  TestThread testThread1=new TestThread(1000,0);
  Thread t1=new Thread(testThread1);
  t1.start();
  TestThread testThread2=new TestThread(1000,0);
  Thread t2=new Thread(testThread1);
  t2.start();
  for (int i=0; i < 1000; i++) {
    Connection conn=ds.getConnection();
    ds.invalidateConnection(conn);
  }
  t1.join();
  t2.join();
  assertFalse(testThread1.failed());
  assertFalse(testThread2.failed());
  ds.close();
}

</code></pre>

<br>
<pre class="type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testConcurrentInitBorrow() throws Exception {
  ds.setDriverClassName("org.apache.commons.dbcp2.TesterConnectionDelayDriver");
  ds.setUrl("jdbc:apache:commons:testerConnectionDelayDriver:50");
  ds.setInitialSize(8);
  TestThread testThread=new TestThread(1,0);
  Thread t=new Thread(testThread);
  t.start();
  Thread.sleep(100);
  ds.getConnection();
  assertTrue(ds.getConnectionPool().getNumIdle() > 5);
  t.join();
  assertFalse(testThread.failed());
  ds.close();
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * JIRA DBCP-93: If an SQLException occurs after the GenericObjectPool is
 * initialized in createDataSource, the evictor task is not cleaned up.
 */
@Test public void testCreateDataSourceCleanupThreads() throws Exception {
  ds.close();
  ds=null;
  ds=createDataSource();
  ds.setDriverClassName("org.apache.commons.dbcp2.TesterDriver");
  ds.setUrl("jdbc:apache:commons:testdriver");
  ds.setMaxTotal(getMaxTotal());
  ds.setMaxWaitMillis(getMaxWaitMillis());
  ds.setDefaultAutoCommit(Boolean.TRUE);
  ds.setDefaultReadOnly(Boolean.FALSE);
  ds.setDefaultTransactionIsolation(Connection.TRANSACTION_READ_COMMITTED);
  ds.setDefaultCatalog(CATALOG);
  ds.setUsername("username");
  ds.setTimeBetweenEvictionRunsMillis(100);
  ds.setPassword("wrong");
  ds.setValidationQuery("SELECT DUMMY FROM DUAL");
  int threadCount=Thread.activeCount();
  for (int i=0; i < 10; i++) {
    try (Connection c=ds.getConnection()){
    }
 catch (    SQLException ex) {
    }
  }
  assertTrue(Thread.activeCount() <= threadCount + 1);
}

</code></pre>

<br>
<pre class="type-8 type-6 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessToUnderlyingConnectionAllowed() throws Exception {
  ds.setAccessToUnderlyingConnectionAllowed(true);
  assertEquals(true,ds.isAccessToUnderlyingConnectionAllowed());
  Connection conn=getConnection();
  Connection dconn=((DelegatingConnection<?>)conn).getDelegate();
  assertNotNull(dconn);
  dconn=((DelegatingConnection<?>)conn).getInnermostDelegate();
  assertNotNull(dconn);
  assertTrue(dconn instanceof TesterConnection);
}

</code></pre>

<br>
<pre class="type-10 type-8 type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetProperties() throws Exception {
  ds.setConnectionProperties("name1=value1;name2=value2;name3=value3");
  assertEquals(3,ds.getConnectionProperties().size());
  assertEquals("value1",ds.getConnectionProperties().getProperty("name1"));
  assertEquals("value2",ds.getConnectionProperties().getProperty("name2"));
  assertEquals("value3",ds.getConnectionProperties().getProperty("name3"));
  ds.setConnectionProperties("name1=value1;name2=value2");
  assertEquals(2,ds.getConnectionProperties().size());
  assertEquals("value1",ds.getConnectionProperties().getProperty("name1"));
  assertEquals("value2",ds.getConnectionProperties().getProperty("name2"));
  assertFalse(ds.getConnectionProperties().containsKey("name3"));
  ds.setConnectionProperties("name1=value1;name2");
  assertEquals(2,ds.getConnectionProperties().size());
  assertEquals("value1",ds.getConnectionProperties().getProperty("name1"));
  assertEquals("",ds.getConnectionProperties().getProperty("name2"));
  ds.setConnectionProperties("name1=value1;name2=");
  assertEquals(2,ds.getConnectionProperties().size());
  assertEquals("value1",ds.getConnectionProperties().getProperty("name1"));
  assertEquals("",ds.getConnectionProperties().getProperty("name2"));
  ds.setConnectionProperties("name1=value1");
  assertEquals(1,ds.getConnectionProperties().size());
  assertEquals("value1",ds.getConnectionProperties().getProperty("name1"));
  ds.setConnectionProperties("name1=value1;");
  assertEquals(1,ds.getConnectionProperties().size());
  assertEquals("value1",ds.getConnectionProperties().getProperty("name1"));
  ds.setConnectionProperties("name1");
  assertEquals(1,ds.getConnectionProperties().size());
  assertEquals("",ds.getConnectionProperties().getProperty("name1"));
  try {
    ds.setConnectionProperties(null);
    fail("Expected NullPointerException");
  }
 catch (  NullPointerException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * JIRA DBCP-333: Check that a custom class loader is used.
 * @throws Exception
 */
@Test public void testDriverClassLoader() throws Exception {
  getConnection();
  ClassLoader cl=ds.getDriverClassLoader();
  assertNotNull(cl);
  assertTrue(cl instanceof TesterClassLoader);
  assertTrue(((TesterClassLoader)cl).didLoad(ds.getDriverClassName()));
}

</code></pre>

<br>
<pre class="type-10 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClose() throws Exception {
  ds.setAccessToUnderlyingConnectionAllowed(true);
  Connection activeConnection=getConnection();
  Connection rawActiveConnection=((DelegatingConnection<?>)activeConnection).getInnermostDelegate();
  assertFalse(activeConnection.isClosed());
  assertFalse(rawActiveConnection.isClosed());
  Connection idleConnection=getConnection();
  Connection rawIdleConnection=((DelegatingConnection<?>)idleConnection).getInnermostDelegate();
  assertFalse(idleConnection.isClosed());
  assertFalse(rawIdleConnection.isClosed());
  idleConnection.close();
  assertTrue(idleConnection.isClosed());
  assertFalse(rawIdleConnection.isClosed());
  ds.close();
  assertTrue(rawIdleConnection.isClosed());
  assertFalse(activeConnection.isClosed());
  assertFalse(rawActiveConnection.isClosed());
  activeConnection.close();
  assertTrue(activeConnection.isClosed());
  assertTrue(rawActiveConnection.isClosed());
  try {
    getConnection();
    fail("Expecting SQLException");
  }
 catch (  SQLException ex) {
  }
  ds.close();
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testPoolCloseRTE() throws Exception {
  ds.setAccessToUnderlyingConnectionAllowed(true);
  Connection conn=ds.getConnection();
  TesterConnection tc=(TesterConnection)((DelegatingConnection<?>)conn).getInnermostDelegate();
  conn.close();
  tc.setFailure(new IllegalStateException("boom"));
  try {
    StackMessageLog.lock();
    StackMessageLog.clear();
    ds.close();
    assertTrue(StackMessageLog.popMessage().indexOf("boom") > 0);
  }
 catch (  IllegalStateException ex) {
    assertTrue(ex.getMessage().indexOf("boom") > 0);
  }
 finally {
    StackMessageLog.unLock();
  }
}

</code></pre>

<br>
<pre class="type-8 type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidateConnection() throws Exception {
  ds.setMaxTotal(2);
  Connection conn1=ds.getConnection();
  Connection conn2=ds.getConnection();
  ds.invalidateConnection(conn1);
  assertTrue(conn1.isClosed());
  assertEquals(1,ds.getNumActive());
  assertEquals(0,ds.getNumIdle());
  Connection conn3=ds.getConnection();
  conn2.close();
  conn3.close();
}

</code></pre>

<br>
<pre class="type-8 type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMaxConnLifetimeExceededMutedLog() throws Exception {
  try {
    StackMessageLog.lock();
    StackMessageLog.clear();
    ds.setMaxConnLifetimeMillis(100);
    ds.setLogExpiredConnections(false);
    Connection conn=ds.getConnection();
    assertEquals(1,ds.getNumActive());
    Thread.sleep(500);
    conn.close();
    assertEquals(0,ds.getNumIdle());
    assertTrue(StackMessageLog.isEmpty());
  }
  finally {
    StackMessageLog.clear();
    StackMessageLog.unLock();
  }
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * Verifies correct handling of exceptions generated by the underlying pool as it closes
 * connections in response to BDS#close. Exceptions have to be either swallowed by the
 * underlying pool and logged, or propagated and wrapped.
 */
@Test public void testPoolCloseCheckedException() throws Exception {
  ds.setAccessToUnderlyingConnectionAllowed(true);
  Connection conn=ds.getConnection();
  TesterConnection tc=(TesterConnection)((DelegatingConnection<?>)conn).getInnermostDelegate();
  conn.close();
  tc.setFailure(new SQLException("bang"));
  try {
    StackMessageLog.lock();
    StackMessageLog.clear();
    ds.close();
    assertTrue(StackMessageLog.popMessage().indexOf("bang") > 0);
  }
 catch (  SQLException ex) {
    assertTrue(ex.getMessage().indexOf("Cannot close") > 0);
    assertTrue(ex.getCause().getMessage().indexOf("bang") > 0);
  }
 finally {
    StackMessageLog.unLock();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestBasicDataSourceFactory </h4><pre class="type-11 type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidateProperties() throws Exception {
  try {
    StackMessageLog.lock();
    StackMessageLog.clear();
    final Reference ref=new Reference("javax.sql.DataSource",BasicDataSourceFactory.class.getName(),null);
    ref.add(new StringRefAddr("foo","bar"));
    ref.add(new StringRefAddr("maxWait","100"));
    ref.add(new StringRefAddr("driverClassName","org.apache.commons.dbcp2.TesterDriver"));
    final BasicDataSourceFactory basicDataSourceFactory=new BasicDataSourceFactory();
    basicDataSourceFactory.getObjectInstance(ref,null,null,null);
    final List<String> messages=StackMessageLog.getAll();
    assertEquals(2,messages.size());
    for (    String message : messages) {
      if (message.contains("maxWait")) {
        assertTrue(message.contains("use maxWaitMillis"));
      }
 else {
        assertTrue(message.contains("foo"));
        assertTrue(message.contains("Ignoring unknown property"));
      }
    }
  }
  finally {
    StackMessageLog.clear();
    StackMessageLog.unLock();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestConnectionPool </h4><pre class="type-2 type-10 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimple2() throws Exception {
  Connection conn=newConnection();
  assertNotNull(conn);
{
    PreparedStatement stmt=conn.prepareStatement("select * from dual");
    assertNotNull(stmt);
    ResultSet rset=stmt.executeQuery();
    assertNotNull(rset);
    assertTrue(rset.next());
    rset.close();
    stmt.close();
  }
{
    PreparedStatement stmt=conn.prepareStatement("select * from dual");
    assertNotNull(stmt);
    ResultSet rset=stmt.executeQuery();
    assertNotNull(rset);
    assertTrue(rset.next());
    rset.close();
    stmt.close();
  }
  conn.close();
  try (Statement s=conn.createStatement()){
    fail("Can't use closed connections");
  }
 catch (  SQLException e) {
  }
  conn=newConnection();
  assertNotNull(conn);
{
    PreparedStatement stmt=conn.prepareStatement("select * from dual");
    assertNotNull(stmt);
    ResultSet rset=stmt.executeQuery();
    assertNotNull(rset);
    assertTrue(rset.next());
    rset.close();
    stmt.close();
  }
{
    PreparedStatement stmt=conn.prepareStatement("select * from dual");
    assertNotNull(stmt);
    ResultSet rset=stmt.executeQuery();
    assertNotNull(rset);
    assertTrue(rset.next());
    rset.close();
    stmt.close();
  }
  conn.close();
  conn=null;
}

</code></pre>

<br>
<pre class="type-2 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimple() throws Exception {
  Connection conn=newConnection();
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
}

</code></pre>

<br>
<pre class="type-2 type-9 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRepeatedBorrowAndReturn() throws Exception {
  for (int i=0; i < 100; i++) {
    Connection conn=newConnection();
    assertNotNull(conn);
    PreparedStatement stmt=conn.prepareStatement("select * from dual");
    assertNotNull(stmt);
    ResultSet rset=stmt.executeQuery();
    assertNotNull(rset);
    assertTrue(rset.next());
    rset.close();
    stmt.close();
    conn.close();
  }
}

</code></pre>

<br>
<pre class="type-2 type-9 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsClosed() throws Exception {
  for (int i=0; i < getMaxTotal(); i++) {
    Connection conn=newConnection();
    assertNotNull(conn);
    assertTrue(!conn.isClosed());
    PreparedStatement stmt=conn.prepareStatement("select * from dual");
    assertNotNull(stmt);
    ResultSet rset=stmt.executeQuery();
    assertNotNull(rset);
    assertTrue(rset.next());
    rset.close();
    stmt.close();
    conn.close();
    assertTrue(conn.isClosed());
  }
}

</code></pre>

<br>
<pre class="type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHashCode() throws Exception {
  Connection conn1=newConnection();
  assertNotNull(conn1);
  Connection conn2=newConnection();
  assertNotNull(conn2);
  assertTrue(conn1.hashCode() != conn2.hashCode());
}

</code></pre>

<br>
<pre class="type-9 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
"></span><br>
/** 
 * "http://issues.apache.org/bugzilla/show_bug.cgi?id=12400" 
 */
@Test public void testConnectionsAreDistinct() throws Exception {
  Connection[] conn=new Connection[getMaxTotal()];
  for (int i=0; i < conn.length; i++) {
    conn[i]=newConnection();
    for (int j=0; j < i; j++) {
      assertTrue(conn[j] != conn[i]);
      assertTrue(!conn[j].equals(conn[i]));
    }
  }
  for (  Connection element : conn) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-2 type-9 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCanCloseResultSetTwice() throws Exception {
  Connection conn=newConnection();
  assertNotNull(conn);
  assertTrue(!conn.isClosed());
  for (int i=0; i < 2; i++) {
    PreparedStatement stmt=conn.prepareStatement("select * from dual");
    assertNotNull(stmt);
    ResultSet rset=stmt.executeQuery();
    assertNotNull(rset);
    assertFalse(isClosed(rset));
    rset.close();
    assertTrue(isClosed(rset));
    rset.close();
    assertTrue(isClosed(rset));
    rset.close();
    assertTrue(isClosed(rset));
  }
  conn.close();
}

</code></pre>

<br>
<pre class="type-9 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verify the close method can be called multiple times on a single connection without
 * an exception being thrown.
 */
@Test public void testCanCloseConnectionTwice() throws Exception {
  for (int i=0; i < getMaxTotal(); i++) {
    Connection conn=newConnection();
    assertNotNull(conn);
    assertTrue(!conn.isClosed());
    conn.close();
    assertTrue(conn.isClosed());
    conn.close();
    assertTrue(conn.isClosed());
  }
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testClosing() throws Exception {
  Connection[] c=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=newConnection();
  }
  c[0].close();
  assertTrue(c[0].isClosed());
  c[0]=newConnection();
  for (  Connection element : c) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-2 type-6 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPrepareStatementOptions() throws Exception {
  Connection conn=newConnection();
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual",ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE);
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  assertEquals(ResultSet.TYPE_SCROLL_SENSITIVE,rset.getType());
  assertEquals(ResultSet.CONCUR_UPDATABLE,rset.getConcurrency());
  rset.close();
  stmt.close();
  conn.close();
}

</code></pre>

<br>
<pre class="type-2 type-9 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCanCloseCallableStatementTwice() throws Exception {
  Connection conn=newConnection();
  assertNotNull(conn);
  assertTrue(!conn.isClosed());
  for (int i=0; i < 2; i++) {
    PreparedStatement stmt=conn.prepareCall("select * from dual");
    assertNotNull(stmt);
    assertFalse(isClosed(stmt));
    stmt.close();
    assertTrue(isClosed(stmt));
    stmt.close();
    assertTrue(isClosed(stmt));
    stmt.close();
    assertTrue(isClosed(stmt));
  }
  conn.close();
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testPooling() throws Exception {
  Connection[] c=new Connection[getMaxTotal()];
  Connection[] u=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=newConnection();
    if (c[i] instanceof DelegatingConnection) {
      u[i]=((DelegatingConnection<?>)c[i]).getInnermostDelegate();
    }
 else {
      for (int j=0; j <= i; j++) {
        c[j].close();
      }
      return;
    }
  }
  for (  Connection element : c) {
    element.close();
    Connection con=newConnection();
    Connection underCon=((DelegatingConnection<?>)con).getInnermostDelegate();
    assertTrue("Failed to get connection",underCon != null);
    boolean found=false;
    for (int j=0; j < c.length; j++) {
      if (underCon == u[j]) {
        found=true;
        break;
      }
    }
    assertTrue("New connection not from pool",found);
    con.close();
  }
}

</code></pre>

<br>
<pre class="type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAutoCommitBehavior() throws Exception {
  Connection conn0=newConnection();
  assertNotNull("connection should not be null",conn0);
  assertTrue("autocommit should be true for conn0",conn0.getAutoCommit());
  Connection conn1=newConnection();
  assertTrue("autocommit should be true for conn1",conn1.getAutoCommit());
  conn1.close();
  assertTrue("autocommit should be true for conn0",conn0.getAutoCommit());
  conn0.setAutoCommit(false);
  assertFalse("autocommit should be false for conn0",conn0.getAutoCommit());
  conn0.close();
  Connection conn2=newConnection();
  assertTrue("autocommit should be true for conn2",conn2.getAutoCommit());
  Connection conn3=newConnection();
  assertTrue("autocommit should be true for conn3",conn3.getAutoCommit());
  conn2.close();
  conn3.close();
}

</code></pre>

<br>
<pre class="type-9 type-10 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMaxTotal() throws Exception {
  Connection[] c=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=newConnection();
    assertTrue(c[i] != null);
  }
  try {
    newConnection();
    fail("Allowed to open more than DefaultMaxTotal connections.");
  }
 catch (  java.sql.SQLException e) {
  }
  for (  Connection element : c) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClearWarnings() throws Exception {
  Connection[] c=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=newConnection();
    assertTrue(c[i] != null);
    try (CallableStatement cs=c[i].prepareCall("warning")){
    }
   }
  for (  Connection element : c) {
    assertNotNull(element.getWarnings());
  }
  for (  Connection element : c) {
    element.close();
  }
  for (int i=0; i < c.length; i++) {
    c[i]=newConnection();
  }
  for (  Connection element : c) {
    assertNull(element.getWarnings());
  }
  for (  Connection element : c) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-2 type-9 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCanClosePreparedStatementTwice() throws Exception {
  Connection conn=newConnection();
  assertNotNull(conn);
  assertTrue(!conn.isClosed());
  for (int i=0; i < 2; i++) {
    PreparedStatement stmt=conn.prepareStatement("select * from dual");
    assertNotNull(stmt);
    assertFalse(isClosed(stmt));
    stmt.close();
    assertTrue(isClosed(stmt));
    stmt.close();
    assertTrue(isClosed(stmt));
    stmt.close();
    assertTrue(isClosed(stmt));
  }
  conn.close();
}

</code></pre>

<br>
<pre class="type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * DBCP-128: BasicDataSource.getConnection()
 * Connections don't work as hashtable keys
 */
@Test public void testHashing() throws Exception {
  Connection con=getConnection();
  Hashtable<Connection,String> hash=new Hashtable<>();
  hash.put(con,"test");
  assertEquals("test",hash.get(con));
  assertTrue(hash.containsKey(con));
  assertTrue(hash.contains("test"));
  hash.clear();
  con.close();
}

</code></pre>

<br>
<pre class="type-9 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
"></span><br>
@Test public void testOpening() throws Exception {
  Connection[] c=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=newConnection();
    assertTrue(c[i] != null);
    for (int j=0; j <= i; j++) {
      assertTrue(!c[j].isClosed());
    }
  }
  for (  Connection element : c) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-2 type-9 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCanCloseStatementTwice() throws Exception {
  Connection conn=newConnection();
  assertNotNull(conn);
  assertTrue(!conn.isClosed());
  for (int i=0; i < 2; i++) {
    Statement stmt=conn.createStatement();
    assertNotNull(stmt);
    assertFalse(isClosed(stmt));
    stmt.close();
    assertTrue(isClosed(stmt));
    stmt.close();
    assertTrue(isClosed(stmt));
    stmt.close();
    assertTrue(isClosed(stmt));
  }
  conn.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestDelegatingCallableStatement </h4><pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testExecuteQueryReturnsNotNull() throws Exception {
  delegateStmt=new TesterCallableStatement(delegateConn,"select * from foo");
  stmt=new DelegatingCallableStatement(conn,delegateStmt);
  assertTrue(null != stmt.executeQuery());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestDelegatingConnection </h4><pre class="type-10 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verify fix for DBCP-241
 */
@Test public void testCheckOpenNull() throws Exception {
  try {
    conn.close();
    conn.checkOpen();
    fail("Expecting SQLException");
  }
 catch (  SQLException ex) {
    assertTrue(ex.getMessage().endsWith("is closed."));
  }
  try {
    conn=new DelegatingConnection<>(null);
    conn.setClosedInternal(true);
    conn.checkOpen();
    fail("Expecting SQLException");
  }
 catch (  SQLException ex) {
    assertTrue(ex.getMessage().endsWith("is null."));
  }
  try {
    PoolingConnection pc=new PoolingConnection(delegateConn2);
    pc.setStatementPool(new GenericKeyedObjectPool<>(pc));
    conn=new DelegatingConnection<>(pc);
    pc.close();
    conn.close();
    try (PreparedStatement ps=conn.prepareStatement("")){
    }
     fail("Expecting SQLException");
  }
 catch (  SQLException ex) {
    assertTrue(ex.getMessage().endsWith("is closed."));
  }
  try {
    conn=new DelegatingConnection<>(new RTEGeneratingConnection());
    conn.close();
    conn.checkOpen();
    fail("Expecting SQLException");
  }
 catch (  SQLException ex) {
    assertTrue(ex.getMessage().endsWith("is closed."));
  }
}

</code></pre>

<br>
<pre class="type-8 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConnectionToString() throws Exception {
  String s=conn.toString();
  assertNotNull(s);
  assertTrue(s.length() > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestDelegatingDatabaseMetaData </h4><pre class="type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testCheckOpen() throws Exception {
  ResultSet rst=meta.getSchemas();
  assertTrue(!rst.isClosed());
  conn.close();
  assertTrue(rst.isClosed());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestDelegatingPreparedStatement </h4><pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testExecuteQueryReturnsNotNull() throws Exception {
  delegateStmt=new TesterPreparedStatement(delegateConn,"select * from foo");
  stmt=new DelegatingPreparedStatement(conn,delegateStmt);
  assertTrue(null != stmt.executeQuery());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestDelegatingStatement </h4><pre class="type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testIsWrapperFor() throws Exception {
  TesterConnection tstConn=new TesterConnection("test","test");
  TesterStatement tstStmt=new TesterStatementNonWrapping(tstConn);
  DelegatingConnection<TesterConnection> dconn=new DelegatingConnection<>(tstConn);
  DelegatingStatement stamt=new DelegatingStatement(dconn,tstStmt);
  Class<?> stmtProxyClass=Proxy.getProxyClass(this.getClass().getClassLoader(),Statement.class);
  assertTrue(stamt.isWrapperFor(DelegatingStatement.class));
  assertTrue(stamt.isWrapperFor(TesterStatement.class));
  assertFalse(stamt.isWrapperFor(stmtProxyClass));
  stamt.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestPStmtPooling </h4><pre class="type-10 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClosePool() throws Exception {
  DriverManager.registerDriver(new TesterDriver());
  ConnectionFactory connFactory=new DriverManagerConnectionFactory("jdbc:apache:commons:testdriver","u1","p1");
  PoolableConnectionFactory pcf=new PoolableConnectionFactory(connFactory,null);
  pcf.setPoolStatements(true);
  pcf.setDefaultReadOnly(Boolean.FALSE);
  pcf.setDefaultAutoCommit(Boolean.TRUE);
  ObjectPool<PoolableConnection> connPool=new GenericObjectPool<>(pcf);
  pcf.setPool(connPool);
  PoolingDataSource<?> ds=new PoolingDataSource<>(connPool);
  ((PoolingDataSource<?>)ds).setAccessToUnderlyingConnectionAllowed(true);
  Connection conn=ds.getConnection();
  try (Statement s=conn.prepareStatement("select 1 from dual")){
  }
   Connection poolableConnection=((DelegatingConnection<?>)conn).getDelegate();
  Connection poolingConnection=((DelegatingConnection<?>)poolableConnection).getDelegate();
  poolingConnection.close();
  try (PreparedStatement ps=conn.prepareStatement("select 1 from dual")){
    fail("Expecting SQLException");
  }
 catch (  SQLException ex) {
    assertTrue(ex.getMessage().endsWith("invalid PoolingConnection."));
  }
  ds.close();
}

</code></pre>

<br>
<pre class="type-2 type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testBatchUpdate() throws Exception {
  DriverManager.registerDriver(new TesterDriver());
  ConnectionFactory connFactory=new DriverManagerConnectionFactory("jdbc:apache:commons:testdriver","u1","p1");
  PoolableConnectionFactory pcf=new PoolableConnectionFactory(connFactory,null);
  pcf.setPoolStatements(true);
  pcf.setDefaultReadOnly(Boolean.FALSE);
  pcf.setDefaultAutoCommit(Boolean.TRUE);
  ObjectPool<PoolableConnection> connPool=new GenericObjectPool<>(pcf);
  pcf.setPool(connPool);
  PoolingDataSource<?> ds=new PoolingDataSource<>(connPool);
  Connection conn=ds.getConnection();
  PreparedStatement ps=conn.prepareStatement("select 1 from dual");
  Statement inner=((DelegatingPreparedStatement)ps).getInnermostDelegate();
  ps.addBatch();
  ps.close();
  conn.close();
  Assert.assertFalse(inner.isClosed());
  ds.close();
}

</code></pre>

<br>
<pre class="type-2 type-6 type-13 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verifies that executing close() on an already closed DelegatingStatement
 * that wraps a PoolablePreparedStatement does not "re-close" the PPS
 * (which could be in use by another client - see DBCP-414).
 */
@Test public void testMultipleClose() throws Exception {
  DataSource ds=createPDS();
  PreparedStatement stmt1=null;
  Connection conn=ds.getConnection();
  stmt1=conn.prepareStatement("select 1 from dual");
  PoolablePreparedStatement<?> pps1=getPoolablePreparedStatement(stmt1);
  conn.close();
  assertTrue(stmt1.isClosed());
  stmt1.close();
  assertTrue(stmt1.isClosed());
  Connection conn2=ds.getConnection();
  PreparedStatement stmt2=conn2.prepareStatement("select 1 from dual");
  Assert.assertSame(pps1,getPoolablePreparedStatement(stmt2));
  stmt1.close();
  assertTrue(!stmt2.isClosed());
  stmt2.executeQuery();
  conn2.close();
  assertTrue(stmt1.isClosed());
  assertTrue(stmt2.isClosed());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestPStmtPoolingBasicDataSource </h4><pre class="type-2 type-10 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPreparedStatementPooling() throws Exception {
  Connection conn=getConnection();
  assertNotNull(conn);
  PreparedStatement stmt1=conn.prepareStatement("select 'a' from dual");
  assertNotNull(stmt1);
  PreparedStatement stmt2=conn.prepareStatement("select 'b' from dual");
  assertNotNull(stmt2);
  assertTrue(stmt1 != stmt2);
  PreparedStatement stmt3=null;
  try (PreparedStatement ps=conn.prepareStatement("select 'c' from dual")){
    fail("expected SQLException");
  }
 catch (  SQLException e) {
  }
  stmt2.close();
  stmt3=conn.prepareStatement("select 'c' from dual");
  assertNotNull(stmt3);
  assertTrue(stmt3 != stmt1);
  assertTrue(stmt3 != stmt2);
  stmt1.close();
  PreparedStatement stmt4=conn.prepareStatement("select 'a' from dual");
  assertNotNull(stmt4);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestPoolableConnection </h4><pre class="type-8 type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClosingWrappedInDelegate() throws Exception {
  Assert.assertEquals(0,pool.getNumActive());
  Connection conn=pool.borrowObject();
  DelegatingConnection<Connection> outer=new DelegatingConnection<>(conn);
  Assert.assertFalse(outer.isClosed());
  Assert.assertFalse(conn.isClosed());
  Assert.assertEquals(1,pool.getNumActive());
  outer.close();
  Assert.assertTrue(outer.isClosed());
  Assert.assertTrue(conn.isClosed());
  Assert.assertEquals(0,pool.getNumActive());
  Assert.assertEquals(1,pool.getNumIdle());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestPoolingDataSource </h4><pre class="type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testPoolGuardConnectionWrapperEqualsNull() throws Exception {
  Connection con1=ds.getConnection();
  Connection con2=null;
  assertFalse(con1.equals(con2));
  con1.close();
}

</code></pre>

<br>
<pre class="type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testPoolGuardConnectionWrapperEqualsType() throws Exception {
  Connection con1=ds.getConnection();
  Integer con2=Integer.valueOf(0);
  assertFalse(con1.equals(con2));
  con1.close();
}

</code></pre>

<br>
<pre class="type-8 type-6 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClose() throws Exception {
  Properties props=new Properties();
  props.setProperty("user","username");
  props.setProperty("password","password");
  PoolableConnectionFactory f=new PoolableConnectionFactory(new DriverConnectionFactory(new TesterDriver(),"jdbc:apache:commons:testdriver",props),null);
  f.setValidationQuery("SELECT DUMMY FROM DUAL");
  f.setDefaultReadOnly(Boolean.TRUE);
  f.setDefaultAutoCommit(Boolean.TRUE);
  GenericObjectPool<PoolableConnection> p=new GenericObjectPool<>(f);
  p.setMaxTotal(getMaxTotal());
  p.setMaxWaitMillis(getMaxWaitMillis());
  try (PoolingDataSource<PoolableConnection> dataSource=new PoolingDataSource<>(p)){
    Connection connection=dataSource.getConnection();
    assertNotNull(connection);
    connection.close();
  }
   assertTrue(p.isClosed());
  assertEquals(0,p.getNumIdle());
  assertEquals(0,p.getNumActive());
}

</code></pre>

<br>
<pre class="type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
/** 
 * DBCP-412
 * Verify that omitting factory.setPool(pool) when setting up PDS does not
 * result in NPE.
 */
@Test public void testFixFactoryConfig() throws Exception {
  Properties props=new Properties();
  props.setProperty("user","username");
  props.setProperty("password","password");
  PoolableConnectionFactory f=new PoolableConnectionFactory(new DriverConnectionFactory(new TesterDriver(),"jdbc:apache:commons:testdriver",props),null);
  f.setValidationQuery("SELECT DUMMY FROM DUAL");
  f.setDefaultReadOnly(Boolean.TRUE);
  f.setDefaultAutoCommit(Boolean.TRUE);
  GenericObjectPool<PoolableConnection> p=new GenericObjectPool<>(f);
  p.setMaxTotal(getMaxTotal());
  p.setMaxWaitMillis(getMaxWaitMillis());
  ds=new PoolingDataSource<>(p);
  assertTrue(f.getPool().equals(p));
  ds.getConnection();
}

</code></pre>

<br>
<pre class="type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testPoolGuardConnectionWrapperEqualsFail() throws Exception {
  Connection con1=ds.getConnection();
  Connection con2=ds.getConnection();
  assertFalse(con1.equals(con2));
  con1.close();
  con2.close();
}

</code></pre>

<br>
<pre class="type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testPoolGuardConnectionWrapperEqualInnermost() throws Exception {
  ds.setAccessToUnderlyingConnectionAllowed(true);
  DelegatingConnection<?> con=(DelegatingConnection<?>)ds.getConnection();
  Connection inner=con.getInnermostDelegate();
  ds.setAccessToUnderlyingConnectionAllowed(false);
  DelegatingConnection<Connection> con2=new DelegatingConnection<>(inner);
  assertFalse(con2.equals(con));
  assertTrue(con.innermostDelegateEquals(con2.getInnermostDelegate()));
  assertTrue(con2.innermostDelegateEquals(inner));
  assertFalse(con.equals(con2));
}

</code></pre>

<br>
<pre class="type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testPoolGuardConnectionWrapperEqualsReflexive() throws Exception {
  Connection con=ds.getConnection();
  Connection con2=con;
  assertTrue(con2.equals(con));
  assertTrue(con.equals(con2));
  con.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestPoolingDriver </h4><pre class="type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * "http://issues.apache.org/bugzilla/show_bug.cgi?id=28912" 
 */
@Test public void testReportedBug28912() throws Exception {
  Connection conn1=getConnection();
  assertNotNull(conn1);
  assertFalse(conn1.isClosed());
  conn1.close();
  Connection conn2=getConnection();
  assertNotNull(conn2);
  assertTrue(conn1.isClosed());
  assertFalse(conn2.isClosed());
  conn1.close();
  assertTrue(conn1.isClosed());
  assertFalse(conn2.isClosed());
}

</code></pre>

<br>
<pre class="type-9 type-8 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * "http://issues.apache.org/bugzilla/show_bug.cgi?id=12400" 
 */
@Test public void testReportedBug12400() throws Exception {
  GenericObjectPoolConfig config=new GenericObjectPoolConfig();
  config.setMaxTotal(70);
  config.setMaxWaitMillis(60000);
  config.setMaxIdle(10);
  ConnectionFactory connectionFactory=new DriverManagerConnectionFactory("jdbc:apache:commons:testdriver","username","password");
  PoolableConnectionFactory poolableConnectionFactory=new PoolableConnectionFactory(connectionFactory,null);
  poolableConnectionFactory.setDefaultReadOnly(Boolean.FALSE);
  poolableConnectionFactory.setDefaultAutoCommit(Boolean.TRUE);
  ObjectPool<PoolableConnection> connectionPool=new GenericObjectPool<>(poolableConnectionFactory,config);
  poolableConnectionFactory.setPool(connectionPool);
  assertNotNull(poolableConnectionFactory);
  PoolingDriver driver2=new PoolingDriver();
  driver2.registerPool("neusoftim",connectionPool);
  Connection[] conn=new Connection[25];
  for (int i=0; i < 25; i++) {
    conn[i]=DriverManager.getConnection("jdbc:apache:commons:dbcp:neusoftim");
    for (int j=0; j < i; j++) {
      assertTrue(conn[j] != conn[i]);
      assertTrue(!conn[j].equals(conn[i]));
    }
  }
  for (int i=0; i < 25; i++) {
    conn[i].close();
  }
}

</code></pre>

<br>
<pre class="type-8 type-6 type-4 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidateConnection() throws Exception {
  Connection conn=DriverManager.getConnection("jdbc:apache:commons:dbcp:test");
  assertNotNull(conn);
  ObjectPool<?> pool=driver.getConnectionPool("test");
  assertEquals(1,pool.getNumActive());
  assertEquals(0,pool.getNumIdle());
  PoolingDriver driver2=(PoolingDriver)DriverManager.getDriver("jdbc:apache:commons:dbcp:");
  driver2.invalidateConnection(conn);
  assertEquals(0,pool.getNumActive());
  assertEquals(0,pool.getNumIdle());
  assertTrue(conn.isClosed());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.cpdsadapter.TestDriverAdapterCPDS </h4><pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testClosingWithUserName() throws Exception {
  Connection[] c=new Connection[10];
  for (int i=0; i < c.length; i++) {
    c[i]=pcds.getPooledConnection("u1","p1").getConnection();
  }
  c[0].close();
  assertTrue(c[0].isClosed());
  c[0]=pcds.getPooledConnection("u1","p1").getConnection();
  for (  Connection element : c) {
    element.close();
  }
  for (int i=0; i < c.length; i++) {
    c[i]=pcds.getPooledConnection("u1","p1").getConnection();
  }
  for (  Connection element : c) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
"></span><br>
@Test public void testDbcp367() throws Exception {
  ThreadDbcp367[] threads=new ThreadDbcp367[200];
  pcds.setPoolPreparedStatements(true);
  pcds.setMaxPreparedStatements(-1);
  pcds.setAccessToUnderlyingConnectionAllowed(true);
  SharedPoolDataSource spds=new SharedPoolDataSource();
  spds.setConnectionPoolDataSource(pcds);
  spds.setMaxTotal(threads.length + 10);
  spds.setDefaultMaxWaitMillis(-1);
  spds.setDefaultMaxIdle(10);
  spds.setDefaultAutoCommit(Boolean.FALSE);
  spds.setValidationQuery("SELECT 1");
  spds.setDefaultTimeBetweenEvictionRunsMillis(10000);
  spds.setDefaultNumTestsPerEvictionRun(-1);
  spds.setDefaultTestWhileIdle(true);
  spds.setDefaultTestOnBorrow(true);
  spds.setDefaultTestOnReturn(false);
  for (int i=0; i < threads.length; i++) {
    threads[i]=new ThreadDbcp367(spds);
    threads[i].start();
  }
  for (int i=0; i < threads.length; i++) {
    threads[i].join();
    Assert.assertFalse("Thread " + i + " has failed",threads[i].isFailed());
  }
}

</code></pre>

<br>
<pre class="type-2 type-8 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleWithUsername() throws Exception {
  Connection conn=pcds.getPooledConnection("u1","p1").getConnection();
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
}

</code></pre>

<br>
<pre class="type-2 type-8 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimple() throws Exception {
  Connection conn=pcds.getPooledConnection().getConnection();
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.datasources.TestCPDSConnectionFactory </h4><pre class="type-10 type-8 type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * JIRA DBCP-216
 * Verify that pool counters are maintained properly and listeners are
 * cleaned up when a PooledConnection throws a connectionError event.
 */
@Test public void testConnectionErrorCleanup() throws Exception {
  CPDSConnectionFactory factory=new CPDSConnectionFactory(cpds,null,-1,false,"username","password");
  GenericObjectPool<PooledConnectionAndInfo> pool=new GenericObjectPool<>(factory);
  factory.setPool(pool);
  PooledConnection pcon1=pool.borrowObject().getPooledConnection();
  Connection con1=pcon1.getConnection();
  PooledConnection pcon2=pool.borrowObject().getPooledConnection();
  assertEquals(2,pool.getNumActive());
  assertEquals(0,pool.getNumIdle());
  PooledConnectionProxy pc=(PooledConnectionProxy)pcon1;
  assertTrue(pc.getListeners().contains(factory));
  pc.throwConnectionError();
  assertEquals(1,pool.getNumActive());
  assertEquals(0,pool.getNumIdle());
  pc.throwConnectionError();
  assertEquals(1,pool.getNumActive());
  assertEquals(0,pool.getNumIdle());
  PooledConnection pcon3=pool.borrowObject().getPooledConnection();
  assertTrue(!pcon3.equals(pcon1));
  assertTrue(!pc.getListeners().contains(factory));
  assertEquals(2,pool.getNumActive());
  assertEquals(0,pool.getNumIdle());
  pcon2.getConnection().close();
  pcon3.getConnection().close();
  assertEquals(2,pool.getNumIdle());
  assertEquals(0,pool.getNumActive());
  try {
    pc.getConnection();
    fail("Expecting SQLException using closed PooledConnection");
  }
 catch (  SQLException ex) {
  }
  con1.close();
  assertEquals(2,pool.getNumIdle());
  assertEquals(0,pool.getNumActive());
  factory.getPool().clear();
  assertEquals(0,pool.getNumIdle());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.datasources.TestKeyedCPDSConnectionFactory </h4><pre class="type-10 type-8 type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * JIRA DBCP-216
 * Verify that pool counters are maintained properly and listeners are
 * cleaned up when a PooledConnection throws a connectionError event.
 */
@Test public void testConnectionErrorCleanup() throws Exception {
  UserPassKey key=new UserPassKey("username","password");
  KeyedCPDSConnectionFactory factory=new KeyedCPDSConnectionFactory(cpds,null,-1,false);
  KeyedObjectPool<UserPassKey,PooledConnectionAndInfo> pool=new GenericKeyedObjectPool<>(factory);
  factory.setPool(pool);
  PooledConnection pcon1=pool.borrowObject(key).getPooledConnection();
  Connection con1=pcon1.getConnection();
  PooledConnection pcon2=pool.borrowObject(key).getPooledConnection();
  assertEquals(2,pool.getNumActive(key));
  assertEquals(0,pool.getNumIdle(key));
  PooledConnectionProxy pc=(PooledConnectionProxy)pcon1;
  assertTrue(pc.getListeners().contains(factory));
  pc.throwConnectionError();
  assertEquals(1,pool.getNumActive(key));
  assertEquals(0,pool.getNumIdle(key));
  pc.throwConnectionError();
  assertEquals(1,pool.getNumActive(key));
  assertEquals(0,pool.getNumIdle(key));
  PooledConnection pcon3=pool.borrowObject(key).getPooledConnection();
  assertTrue(!pcon3.equals(pcon1));
  assertTrue(!pc.getListeners().contains(factory));
  assertEquals(2,pool.getNumActive(key));
  assertEquals(0,pool.getNumIdle(key));
  pcon2.getConnection().close();
  pcon3.getConnection().close();
  assertEquals(2,pool.getNumIdle(key));
  assertEquals(0,pool.getNumActive(key));
  try {
    pc.getConnection();
    fail("Expecting SQLException using closed PooledConnection");
  }
 catch (  SQLException ex) {
  }
  con1.close();
  assertEquals(2,pool.getNumIdle(key));
  assertEquals(0,pool.getNumActive(key));
  factory.getPool().clear();
  assertEquals(0,pool.getNumIdle(key));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.datasources.TestPerUserPoolDataSource </h4><pre class="type-2 type-9 type-10 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Test public void testMaxTotal() throws Exception {
  Connection[] c=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=ds.getConnection();
    assertTrue(c[i] != null);
  }
  try (Connection conn=ds.getConnection()){
    fail("Allowed to open more than DefaultMaxTotal connections.");
  }
 catch (  java.sql.SQLException e) {
  }
  for (  Connection element : c) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testClosingWithUserName() throws Exception {
  Connection[] c=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=ds.getConnection("u1","p1");
  }
  c[0].close();
  assertTrue(c[0].isClosed());
  c[0]=ds.getConnection("u1","p1");
  for (  Connection element : c) {
    element.close();
  }
  for (int i=0; i < c.length; i++) {
    c[i]=ds.getConnection("u1","p1");
  }
  for (  Connection element : c) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Override @Test public void testClosing() throws Exception {
  Connection[] c=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=ds.getConnection();
  }
  c[0].close();
  assertTrue(c[0].isClosed());
  c[0]=ds.getConnection();
  for (  Connection element : c) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-2 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Test public void testSimple() throws Exception {
  Connection conn=ds.getConnection();
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
}

</code></pre>

<br>
<pre class="type-2 type-9 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
"></span><br>
@Override @Test public void testOpening() throws Exception {
  Connection[] c=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=ds.getConnection();
    assertTrue(c[i] != null);
    for (int j=0; j <= i; j++) {
      assertTrue(!c[j].isClosed());
    }
  }
  for (  Connection element : c) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-2 type-10 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Test public void testSimple2() throws Exception {
  Connection conn=ds.getConnection();
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
  try (Statement s=conn.createStatement()){
    fail("Can't use closed connections");
  }
 catch (  SQLException e) {
  }
  conn=ds.getConnection();
  assertNotNull(conn);
  stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
  conn=null;
}

</code></pre>

<br>
<pre class="type-2 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleWithUsername() throws Exception {
  Connection conn=ds.getConnection("u1","p1");
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.datasources.TestSharedPoolDataSource </h4><pre class="type-2 type-10 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Test public void testSimple2() throws Exception {
  Connection conn=ds.getConnection();
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
  try (Statement s=conn.createStatement()){
    fail("Can't use closed connections");
  }
 catch (  SQLException e) {
  }
  conn=ds.getConnection();
  assertNotNull(conn);
  stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
  conn=null;
}

</code></pre>

<br>
<pre class="type-2 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleWithUsername() throws Exception {
  Connection conn=ds.getConnection("u1","p1");
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
}

</code></pre>

<br>
<pre class="type-2 type-9 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
"></span><br>
@Test public void testMaxWaitMillis() throws Exception {
  final int maxWaitMillis=1000;
  final int theadCount=20;
  ((SharedPoolDataSource)ds).setDefaultMaxWaitMillis(maxWaitMillis);
  Connection[] c=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=ds.getConnection("foo","bar");
    assertTrue(c[i] != null);
  }
  long start=System.currentTimeMillis();
  final PoolTest[] pts=new PoolTest[theadCount];
  ThreadGroup threadGroup=new ThreadGroup("testMaxWaitMillis");
  for (int i=0; i < pts.length; i++) {
    (pts[i]=new PoolTest(threadGroup,1,true)).start();
  }
  for (  final PoolTest poolTest : pts) {
    poolTest.getThread().join();
  }
  long end=System.currentTimeMillis();
  System.out.println("testMaxWaitMillis took " + (end - start) + " ms. maxWaitMillis: "+ maxWaitMillis);
  assertTrue(end - start < 2 * maxWaitMillis);
  for (  Connection element : c) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-2 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Test public void testSimple() throws Exception {
  Connection conn=ds.getConnection();
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Override @Test public void testClosing() throws Exception {
  Connection[] c=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=ds.getConnection();
  }
  c[0].close();
  assertTrue(c[0].isClosed());
  c[0]=ds.getConnection();
  for (  Connection element : c) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-2 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPoolPrepareStatement() throws Exception {
  pcds.setPoolPreparedStatements(true);
  Connection conn=ds.getConnection();
  assertNotNull(conn);
  PreparedStatement stmt=conn.prepareStatement("select * from dual");
  assertNotNull(stmt);
  ResultSet rset=stmt.executeQuery();
  assertNotNull(rset);
  assertTrue(rset.next());
  rset.close();
  stmt.close();
  conn.close();
}

</code></pre>

<br>
<pre class="type-2 type-9 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
"></span><br>
@Override @Test public void testOpening() throws Exception {
  Connection[] c=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=ds.getConnection();
    assertTrue(c[i] != null);
    for (int j=0; j <= i; j++) {
      assertTrue(!c[j].isClosed());
    }
  }
  for (  Connection element : c) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-2 type-9 type-10 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Test public void testMaxTotal() throws Exception {
  Connection[] c=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=ds.getConnection();
    assertTrue(c[i] != null);
  }
  try (Connection conn=ds.getConnection()){
    fail("Allowed to open more than DefaultMaxTotal connections.");
  }
 catch (  java.sql.SQLException e) {
  }
  for (  Connection element : c) {
    element.close();
  }
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testClosingWithUserName() throws Exception {
  Connection[] c=new Connection[getMaxTotal()];
  for (int i=0; i < c.length; i++) {
    c[i]=ds.getConnection("u1","p1");
  }
  c[0].close();
  assertTrue(c[0].isClosed());
  c[0]=ds.getConnection("u1","p1");
  for (  Connection element : c) {
    element.close();
  }
  for (int i=0; i < c.length; i++) {
    c[i]=ds.getConnection("u1","p1");
  }
  for (  Connection element : c) {
    element.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.managed.TestManagedDataSource </h4><pre class="type-8 type-6 type-3 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verify the accessToUnderlyingConnectionAllowed properly limits access to the physical connection.
 */
@Test public void testAccessToUnderlyingConnectionAllowed() throws Exception {
  ds.setAccessToUnderlyingConnectionAllowed(true);
  ManagedConnection<?> connection=(ManagedConnection<?>)newConnection();
  assertTrue(connection.isAccessToUnderlyingConnectionAllowed());
  assertNotNull(connection.getDelegate());
  assertNotNull(connection.getInnermostDelegate());
  connection.close();
  ds.setAccessToUnderlyingConnectionAllowed(false);
  connection=(ManagedConnection<?>)newConnection();
  assertFalse(connection.isAccessToUnderlyingConnectionAllowed());
  assertNull(connection.getDelegate());
  assertNull(connection.getInnermostDelegate());
  connection.close();
}

</code></pre>

<br>
<pre class="type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testManagedConnectionEqualsNull() throws Exception {
  Connection con1=ds.getConnection();
  Connection con2=null;
  assertFalse(con1.equals(con2));
  con1.close();
}

</code></pre>

<br>
<pre class="type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testManagedConnectionEqualsType() throws Exception {
  Connection con1=ds.getConnection();
  Integer con2=Integer.valueOf(0);
  assertFalse(con1.equals(con2));
  con1.close();
}

</code></pre>

<br>
<pre class="type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testManagedConnectionEqualInnermost() throws Exception {
  ds.setAccessToUnderlyingConnectionAllowed(true);
  DelegatingConnection<?> con=(DelegatingConnection<?>)ds.getConnection();
  Connection inner=con.getInnermostDelegate();
  ds.setAccessToUnderlyingConnectionAllowed(false);
  DelegatingConnection<Connection> con2=new DelegatingConnection<>(inner);
  assertFalse(con2.equals(con));
  assertTrue(con.innermostDelegateEquals(con2.getInnermostDelegate()));
  assertTrue(con2.innermostDelegateEquals(inner));
  assertFalse(con.equals(con2));
}

</code></pre>

<br>
<pre class="type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testManagedConnectionEqualsFail() throws Exception {
  Connection con1=ds.getConnection();
  Connection con2=ds.getConnection();
  assertFalse(con1.equals(con2));
  con1.close();
  con2.close();
}

</code></pre>

<br>
<pre class="type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
/** 
 * Verify that connection sharing is working (or not working) as expected.
 */
@Test public void testSharedConnection() throws Exception {
  DelegatingConnection<?> connectionA=(DelegatingConnection<?>)newConnection();
  DelegatingConnection<?> connectionB=(DelegatingConnection<?>)newConnection();
  assertFalse(connectionA.equals(connectionB));
  assertFalse(connectionB.equals(connectionA));
  assertFalse(connectionA.innermostDelegateEquals(connectionB.getInnermostDelegate()));
  assertFalse(connectionB.innermostDelegateEquals(connectionA.getInnermostDelegate()));
  connectionA.close();
  connectionB.close();
}

</code></pre>

<br>
<pre class="type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testManagedConnectionEqualsReflexive() throws Exception {
  Connection con=ds.getConnection();
  Connection con2=con;
  assertTrue(con2.equals(con));
  assertTrue(con.equals(con2));
  con.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.managed.TestManagedDataSourceInTx </h4><pre class="type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testCloseInTransaction() throws Exception {
  DelegatingConnection<?> connectionA=(DelegatingConnection<?>)newConnection();
  DelegatingConnection<?> connectionB=(DelegatingConnection<?>)newConnection();
  assertFalse(connectionA.equals(connectionB));
  assertFalse(connectionB.equals(connectionA));
  assertTrue(connectionA.innermostDelegateEquals(connectionB.getInnermostDelegate()));
  assertTrue(connectionB.innermostDelegateEquals(connectionA.getInnermostDelegate()));
  connectionA.close();
  connectionB.close();
  Connection connection=newConnection();
  assertFalse("Connection should be open",connection.isClosed());
  connection.close();
  assertTrue("Connection should be closed",connection.isClosed());
}

</code></pre>

<br>
<pre class="type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testSharedTransactionConversion() throws Exception {
  DelegatingConnection<?> connectionA=(DelegatingConnection<?>)newConnection();
  DelegatingConnection<?> connectionB=(DelegatingConnection<?>)newConnection();
  assertFalse(connectionA.equals(connectionB));
  assertFalse(connectionB.equals(connectionA));
  assertTrue(connectionA.innermostDelegateEquals(connectionB.getInnermostDelegate()));
  assertTrue(connectionB.innermostDelegateEquals(connectionA.getInnermostDelegate()));
  transactionManager.commit();
  connectionA.getAutoCommit();
  connectionB.getAutoCommit();
  assertFalse(connectionA.equals(connectionB));
  assertFalse(connectionB.equals(connectionA));
  assertFalse(connectionA.innermostDelegateEquals(connectionB.getInnermostDelegate()));
  assertFalse(connectionB.innermostDelegateEquals(connectionA.getInnermostDelegate()));
  transactionManager.begin();
  connectionA.getAutoCommit();
  connectionB.getAutoCommit();
  assertFalse(connectionA.equals(connectionB));
  assertFalse(connectionB.equals(connectionA));
  assertTrue(connectionA.innermostDelegateEquals(connectionB.getInnermostDelegate()));
  assertTrue(connectionB.innermostDelegateEquals(connectionA.getInnermostDelegate()));
  connectionA.close();
  connectionB.close();
}

</code></pre>

<br>
<pre class="type-8 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Override @Test public void testSharedConnection() throws Exception {
  DelegatingConnection<?> connectionA=(DelegatingConnection<?>)newConnection();
  DelegatingConnection<?> connectionB=(DelegatingConnection<?>)newConnection();
  assertFalse(connectionA.equals(connectionB));
  assertFalse(connectionB.equals(connectionA));
  assertTrue(connectionA.innermostDelegateEquals(connectionB.getInnermostDelegate()));
  assertTrue(connectionB.innermostDelegateEquals(connectionA.getInnermostDelegate()));
  connectionA.close();
  connectionB.close();
}

</code></pre>

<br>
<pre class="type-10 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Test public void testAutoCommitBehavior() throws Exception {
  Connection connection=newConnection();
  assertFalse("Auto-commit should be disabled",connection.getAutoCommit());
  try {
    connection.setAutoCommit(true);
    fail("setAutoCommit method should be disabled while enlisted in a transaction");
  }
 catch (  SQLException e) {
  }
  assertFalse("Auto-commit should be disabled",connection.getAutoCommit());
  connection.close();
}

</code></pre>

<br>
<pre class="type-10 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadOnly() throws Exception {
  Connection connection=newConnection();
  assertTrue("Connection be read-only",connection.isReadOnly());
  try {
    connection.setReadOnly(true);
    fail("setReadOnly method should be disabled while enlisted in a transaction");
  }
 catch (  SQLException e) {
  }
  assertTrue("Connection be read-only",connection.isReadOnly());
  try {
    connection.setReadOnly(false);
    fail("setReadOnly method should be disabled while enlisted in a transaction");
  }
 catch (  SQLException e) {
  }
  assertTrue("Connection be read-only",connection.isReadOnly());
  connection.close();
}

</code></pre>

<br>
<pre class="type-10 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommit() throws Exception {
  Connection connection=newConnection();
  assertFalse("Connection should be open",connection.isClosed());
  try {
    connection.commit();
    fail("commit method should be disabled while enlisted in a transaction");
  }
 catch (  SQLException e) {
  }
  assertFalse("Connection should be open",connection.isClosed());
  connection.close();
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
