<h3><span class=" glyphicon glyphicon-tag"/>&nbspExecutionTester</h3><kbd>Executes methods or other tests from the same test unit</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestAbandonedBasicDataSource </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Verify that lastUsed property is updated when a connection
 * creates or prepares a statement
 */
@Test public void testLastUsed() throws Exception {
  ds.setRemoveAbandonedTimeout(1);
  ds.setMaxTotal(2);
  try (Connection conn1=ds.getConnection()){
    Thread.sleep(500);
    try (Statement s=conn1.createStatement()){
    }
     Thread.sleep(800);
    Connection conn2=ds.getConnection();
    try (Statement s=conn1.createStatement()){
    }
     conn2.close();
    Thread.sleep(500);
    try (PreparedStatement ps=conn1.prepareStatement("SELECT 1 FROM DUAL")){
    }
     Thread.sleep(800);
    try (Connection c=ds.getConnection()){
    }
     try (Statement s=conn1.createStatement()){
    }
   }
 }

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * DBCP-343 - verify additional operations reset lastUsed on
 * the parent connection
 */
@Test public void testLastUsedUpdate() throws Exception {
  DelegatingConnection<?> conn=(DelegatingConnection<?>)ds.getConnection();
  PreparedStatement ps=conn.prepareStatement("");
  CallableStatement cs=conn.prepareCall("");
  Statement st=conn.prepareStatement("");
  checkLastUsedStatement(ps,conn);
  checkLastUsedPreparedStatement(ps,conn);
  checkLastUsedStatement(cs,conn);
  checkLastUsedPreparedStatement(cs,conn);
  checkLastUsedStatement(st,conn);
}

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Verify that lastUsed property is updated when a connection
 * prepares a callable statement.
 */
@Test public void testLastUsedPrepareCall() throws Exception {
  ds.setRemoveAbandonedTimeout(1);
  ds.setMaxTotal(2);
  try (Connection conn1=ds.getConnection()){
    Thread.sleep(500);
    try (CallableStatement cs=conn1.prepareCall("{call home}")){
    }
     Thread.sleep(800);
    Connection conn2=ds.getConnection();
    try (CallableStatement cs=conn1.prepareCall("{call home}")){
    }
     conn2.close();
    Thread.sleep(500);
    try (CallableStatement cs=conn1.prepareCall("{call home}")){
    }
     Thread.sleep(800);
    try (Connection c=ds.getConnection()){
    }
     try (Statement s=conn1.createStatement()){
    }
   }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestBasicDataSource </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Override @Test public void testPooling() throws Exception {
  ds.setAccessToUnderlyingConnectionAllowed(true);
  super.testPooling();
}

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testValidationQueryTimeoutSucceed() throws Exception {
  ds.setTestOnBorrow(true);
  ds.setTestOnReturn(true);
  ds.setValidationQueryTimeout(100);
  Connection con=ds.getConnection();
  con.close();
}

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testValidationQueryTimeoutZero() throws Exception {
  ds.setTestOnBorrow(true);
  ds.setTestOnReturn(true);
  ds.setValidationQueryTimeout(0);
  Connection con=ds.getConnection();
  con.close();
}

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testValidationQueryTimeoutNegative() throws Exception {
  ds.setTestOnBorrow(true);
  ds.setTestOnReturn(true);
  ds.setValidationQueryTimeout(-1);
  Connection con=ds.getConnection();
  con.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestBasicDataSourceFactory </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testProperties() throws Exception {
  BasicDataSource ds=BasicDataSourceFactory.createDataSource(getTestProperties());
  checkDataSourceProperties(ds);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestConnectionPool </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBackPointers() throws Exception {
  Connection conn=newConnection();
  assertBackPointers(conn,conn.createStatement());
  conn=newConnection();
  assertBackPointers(conn,conn.createStatement(0,0));
  conn=newConnection();
  assertBackPointers(conn,conn.createStatement(0,0,0));
  conn=newConnection();
  assertBackPointers(conn,conn.prepareStatement("select * from dual"));
  conn=newConnection();
  assertBackPointers(conn,conn.prepareStatement("select * from dual",0));
  conn=newConnection();
  assertBackPointers(conn,conn.prepareStatement("select * from dual",0,0));
  conn=newConnection();
  assertBackPointers(conn,conn.prepareStatement("select * from dual",0,0,0));
  conn=newConnection();
  assertBackPointers(conn,conn.prepareStatement("select * from dual",new int[0]));
  conn=newConnection();
  assertBackPointers(conn,conn.prepareStatement("select * from dual",new String[0]));
  conn=newConnection();
  assertBackPointers(conn,conn.prepareCall("select * from dual"));
  conn=newConnection();
  assertBackPointers(conn,conn.prepareCall("select * from dual",0,0));
  conn=newConnection();
  assertBackPointers(conn,conn.prepareCall("select * from dual",0,0,0));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestDriverManagerConnectionFactory </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDriverManagerInitWithProperties() throws Exception {
  testDriverManagerInit(true);
}

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDriverManagerInitWithCredentials() throws Exception {
  testDriverManagerInit(false);
}

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDriverManagerInitWithEmptyProperties() throws Exception {
  final ConnectionFactory connectionFactory=new DriverManagerConnectionFactory("jdbc:apache:commons:testdriver;user=foo;password=bar");
  connectionFactory.createConnection();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestJndi </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test SharedPoolDataSource bind and lookup
 * @throws Exception
 */
@Test public void testSharedPoolDataSourceBind() throws Exception {
  SharedPoolDataSource dataSource=new SharedPoolDataSource();
  checkBind(dataSource);
}

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test PerUserPoolDataSource bind and lookup
 * @throws Exception
 */
@Test public void testPerUserPoolDataSourceBind() throws Exception {
  PerUserPoolDataSource dataSource=new PerUserPoolDataSource();
  checkBind(dataSource);
}

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test BasicDatsource bind and lookup
 * @throws Exception
 */
@Test public void testBasicDataSourceBind() throws Exception {
  BasicDataSource dataSource=new BasicDataSource();
  checkBind(dataSource);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestPStmtPoolingBasicDataSource </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests high-concurrency contention for connections and pooled prepared statements.
 * DBCP-414
 */
@Test public void testMultipleThreads1() throws Exception {
  ds.setMaxWaitMillis(-1);
  ds.setMaxTotal(5);
  ds.setMaxOpenPreparedStatements(-1);
  multipleThreads(5,false,false,-1,3,100,10000);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestPoolingDriver </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void test2(){
  ConnectionFactory connectionFactory=new DriverManagerConnectionFactory("jdbc:some:connect:string","username","password");
  PoolableConnectionFactory pcf=new PoolableConnectionFactory(connectionFactory,null);
  pcf.setDefaultReadOnly(Boolean.FALSE);
  pcf.setDefaultAutoCommit(Boolean.TRUE);
  GenericObjectPool<PoolableConnection> connectionPool=new GenericObjectPool<>(pcf);
  PoolingDriver driver2=new PoolingDriver();
  driver2.registerPool("example",connectionPool);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.TestUtils </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClassLoads(){
  Utils.closeQuietly((Connection)null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.cpdsadapter.TestDriverAdapterCPDS </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * JIRA: DBCP-442
 */
@Test public void testNullValidationQuery() throws Exception {
  final SharedPoolDataSource spds=new SharedPoolDataSource();
  spds.setConnectionPoolDataSource(pcds);
  spds.setDefaultTestOnBorrow(true);
  final Connection c=spds.getConnection();
  c.close();
  spds.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.datasources.TestCPDSConnectionFactory </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * JIRA: DBCP-442
 */
@Test public void testNullValidationQuery() throws Exception {
  CPDSConnectionFactory factory=new CPDSConnectionFactory(cpds,null,-1,false,"username","password");
  GenericObjectPool<PooledConnectionAndInfo> pool=new GenericObjectPool<>(factory);
  factory.setPool(pool);
  pool.setTestOnBorrow(true);
  PooledConnection pcon=pool.borrowObject().getPooledConnection();
  Connection con=pcon.getConnection();
  con.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.datasources.TestKeyedCPDSConnectionFactory </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * JIRA: DBCP-442
 */
@Test public void testNullValidationQuery() throws Exception {
  UserPassKey key=new UserPassKey("username","password");
  KeyedCPDSConnectionFactory factory=new KeyedCPDSConnectionFactory(cpds,null,-1,false);
  GenericKeyedObjectPool<UserPassKey,PooledConnectionAndInfo> pool=new GenericKeyedObjectPool<>(factory);
  factory.setPool(pool);
  pool.setTestOnBorrow(true);
  PooledConnection pcon=pool.borrowObject(key).getPooledConnection();
  Connection con=pcon.getConnection();
  con.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.datasources.TestPerUserPoolDataSource </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultipleThreads2() throws Exception {
  final int defaultMaxWaitMillis=500;
  ((PerUserPoolDataSource)ds).setDefaultMaxWaitMillis(defaultMaxWaitMillis);
  ((PerUserPoolDataSource)ds).setPerUserMaxWaitMillis("foo",new Long(defaultMaxWaitMillis));
  multipleThreads(2 * defaultMaxWaitMillis,true,true,defaultMaxWaitMillis);
}

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultipleThreads1() throws Exception {
  final int defaultMaxWaitMillis=430;
  ((PerUserPoolDataSource)ds).setDefaultMaxWaitMillis(defaultMaxWaitMillis);
  ((PerUserPoolDataSource)ds).setPerUserMaxWaitMillis("foo",new Long(defaultMaxWaitMillis));
  multipleThreads(1,false,false,defaultMaxWaitMillis);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.datasources.TestSharedPoolDataSource </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Test pool close.  Illustrates BZ 37359.
 * @throws Exception
 */
@Test public void testClosePool() throws Exception {
  ((SharedPoolDataSource)ds).close();
  SharedPoolDataSource tds=new SharedPoolDataSource();
  tds.close();
}

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDbcp369(){
  final ArrayList<SharedPoolDataSource> dataSources=new ArrayList<>();
  for (int j=0; j < 10000; j++) {
    SharedPoolDataSource dataSource=new SharedPoolDataSource();
    dataSources.add(dataSource);
  }
  Thread t1=new Thread(new Runnable(){
    @Override public void run(){
      for (      SharedPoolDataSource dataSource : dataSources) {
        dataSource.setDataSourceName("a");
      }
    }
  }
);
  Thread t2=new Thread(new Runnable(){
    @Override public void run(){
      for (      SharedPoolDataSource dataSource : dataSources) {
        try {
          dataSource.close();
        }
 catch (        Exception e) {
        }
      }
    }
  }
);
  t1.start();
  t2.start();
  try {
    t1.join();
    t2.join();
  }
 catch (  InterruptedException ie) {
  }
}

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultipleThreads2() throws Exception {
  final int defaultMaxWaitMillis=500;
  ((SharedPoolDataSource)ds).setDefaultMaxWaitMillis(defaultMaxWaitMillis);
  multipleThreads(2 * defaultMaxWaitMillis,true,true,defaultMaxWaitMillis);
}

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPoolPreparedStatements() throws Exception {
  doTestPoolPreparedStatements(new PscbString());
  doTestPoolPreparedStatements(new PscbStringIntInt());
  doTestPoolPreparedStatements(new PscbStringInt());
  doTestPoolPreparedStatements(new PscbStringIntArray());
  doTestPoolPreparedStatements(new PscbStringStringArray());
  doTestPoolPreparedStatements(new PscbStringIntIntInt());
}

</code></pre>

<br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultipleThreads1() throws Exception {
  final int defaultMaxWaitMillis=430;
  ((SharedPoolDataSource)ds).setDefaultMaxWaitMillis(defaultMaxWaitMillis);
  multipleThreads(1,false,false,defaultMaxWaitMillis);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.managed.TestManagedDataSource </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNestedConnections() throws Exception {
  transactionManager.begin();
  Connection c1=null;
  Connection c2=null;
  c1=newConnection();
  c2=newConnection();
  transactionManager.commit();
  c1.close();
  c2.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.commons.dbcp2.managed.TestTransactionContext </h4><pre class="type-17 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * JIRA: DBCP-428
 */
@Test(expected=SQLException.class) public void testSetSharedConnectionEnlistFailure() throws Exception {
  final BasicManagedDataSource basicManagedDataSource=new BasicManagedDataSource();
  basicManagedDataSource.setTransactionManager(new TransactionManagerImpl());
  basicManagedDataSource.setDriverClassName("org.apache.commons.dbcp2.TesterDriver");
  basicManagedDataSource.setUrl("jdbc:apache:commons:testdriver");
  basicManagedDataSource.setUsername("username");
  basicManagedDataSource.setPassword("password");
  basicManagedDataSource.setMaxIdle(1);
  final ManagedConnection<?> conn=(ManagedConnection<?>)basicManagedDataSource.getConnection();
  final UncooperativeTransaction transaction=new UncooperativeTransaction();
  final TransactionContext transactionContext=new TransactionContext(basicManagedDataSource.getTransactionRegistry(),transaction);
  transactionContext.setSharedConnection(conn);
  basicManagedDataSource.close();
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
