<h3 style="margin:0px">Class: org.apache.cassandra.db.context.CounterContextTest (7 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(7)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(6)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Verifies values related to public fields."><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >PublicFieldVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="11"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('11')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-11"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="14"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('14')" data-toggle="tooltip" title="Verifies whether two objects/variables are the same"><kbd id="tag-14"class="label-info"style="display: inline-block;font-size:7pt" >IdentityVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetGlockAndCountOf(){
  ContextState state=ContextState.allocate(3,3,3);
  state.writeGlobal(CounterId.fromInt(1),1L,1L);
  state.writeRemote(CounterId.fromInt(2),2L,2L);
  state.writeLocal(CounterId.fromInt(3),3L,3L);
  state.writeGlobal(CounterId.fromInt(4),4L,4L);
  state.writeRemote(CounterId.fromInt(5),5L,5L);
  state.writeLocal(CounterId.fromInt(6),6L,6L);
  state.writeGlobal(CounterId.fromInt(7),7L,7L);
  state.writeRemote(CounterId.fromInt(8),8L,8L);
  state.writeLocal(CounterId.fromInt(9),9L,9L);
  assertEquals(ClockAndCount.create(1L,1L),cc.getClockAndCountOf(state.context,CounterId.fromInt(1)));
  assertEquals(ClockAndCount.create(2L,2L),cc.getClockAndCountOf(state.context,CounterId.fromInt(2)));
  assertEquals(ClockAndCount.create(3L,3L),cc.getClockAndCountOf(state.context,CounterId.fromInt(3)));
  assertEquals(ClockAndCount.create(4L,4L),cc.getClockAndCountOf(state.context,CounterId.fromInt(4)));
  assertEquals(ClockAndCount.create(5L,5L),cc.getClockAndCountOf(state.context,CounterId.fromInt(5)));
  assertEquals(ClockAndCount.create(6L,6L),cc.getClockAndCountOf(state.context,CounterId.fromInt(6)));
  assertEquals(ClockAndCount.create(7L,7L),cc.getClockAndCountOf(state.context,CounterId.fromInt(7)));
  assertEquals(ClockAndCount.create(8L,8L),cc.getClockAndCountOf(state.context,CounterId.fromInt(8)));
  assertEquals(ClockAndCount.create(9L,9L),cc.getClockAndCountOf(state.context,CounterId.fromInt(9)));
  assertEquals(ClockAndCount.create(0L,0L),cc.getClockAndCountOf(state.context,CounterId.fromInt(0)));
  assertEquals(ClockAndCount.create(0L,0L),cc.getClockAndCountOf(state.context,CounterId.fromInt(10)));
  assertEquals(ClockAndCount.create(0L,0L),cc.getClockAndCountOf(state.context,CounterId.fromInt(15)));
  assertEquals(ClockAndCount.create(0L,0L),cc.getClockAndCountOf(state.context,CounterId.fromInt(20)));
}

</code></pre>

<pre class="type-4 type-5 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMerge(){
  ContextState left=ContextState.allocate(0,1,3);
  left.writeRemote(CounterId.fromInt(1),1L,1L);
  left.writeRemote(CounterId.fromInt(2),2L,2L);
  left.writeRemote(CounterId.fromInt(4),6L,3L);
  left.writeLocal(CounterId.getLocalId(),7L,3L);
  ContextState right=ContextState.allocate(0,1,2);
  right.writeRemote(CounterId.fromInt(4),4L,4L);
  right.writeRemote(CounterId.fromInt(5),5L,5L);
  right.writeLocal(CounterId.getLocalId(),2L,9L);
  ByteBuffer merged=cc.merge(left.context,right.context);
  int hd=4;
  assertEquals(hd + 5 * stepLength,merged.remaining());
  assertTrue(Util.equalsCounterId(CounterId.getLocalId(),merged,hd + 4 * stepLength));
  assertEquals(9L,merged.getLong(merged.position() + hd + 4 * stepLength + idLength));
  assertEquals(12L,merged.getLong(merged.position() + hd + 4 * stepLength + idLength + clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(4),merged,hd + 2 * stepLength));
  assertEquals(6L,merged.getLong(merged.position() + hd + 2 * stepLength + idLength));
  assertEquals(3L,merged.getLong(merged.position() + hd + 2 * stepLength + idLength + clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(5),merged,hd + 3 * stepLength));
  assertEquals(5L,merged.getLong(merged.position() + hd + 3 * stepLength + idLength));
  assertEquals(5L,merged.getLong(merged.position() + hd + 3 * stepLength + idLength + clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(2),merged,hd + stepLength));
  assertEquals(2L,merged.getLong(merged.position() + hd + stepLength+ idLength));
  assertEquals(2L,merged.getLong(merged.position() + hd + stepLength+ idLength+ clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(1),merged,hd));
  assertEquals(1L,merged.getLong(merged.position() + hd + idLength));
  assertEquals(1L,merged.getLong(merged.position() + hd + idLength+ clockLength));
  left=ContextState.allocate(3,0,0);
  left.writeGlobal(CounterId.fromInt(1),1L,1L);
  left.writeGlobal(CounterId.fromInt(2),2L,2L);
  left.writeGlobal(CounterId.fromInt(3),3L,3L);
  right=ContextState.allocate(3,0,0);
  right.writeGlobal(CounterId.fromInt(3),6L,6L);
  right.writeGlobal(CounterId.fromInt(4),4L,4L);
  right.writeGlobal(CounterId.fromInt(5),5L,5L);
  merged=cc.merge(left.context,right.context);
  assertEquals(headerSizeLength + 5 * headerEltLength + 5 * stepLength,merged.remaining());
  assertEquals(18L,cc.total(merged));
  assertEquals(5,merged.getShort(merged.position()));
  int headerLength=headerSizeLength + 5 * headerEltLength;
  assertTrue(Util.equalsCounterId(CounterId.fromInt(1),merged,headerLength));
  assertEquals(1L,merged.getLong(merged.position() + headerLength + idLength));
  assertEquals(1L,merged.getLong(merged.position() + headerLength + idLength+ clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(2),merged,headerLength + stepLength));
  assertEquals(2L,merged.getLong(merged.position() + headerLength + stepLength+ idLength));
  assertEquals(2L,merged.getLong(merged.position() + headerLength + stepLength+ idLength+ clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(3),merged,headerLength + 2 * stepLength));
  assertEquals(6L,merged.getLong(merged.position() + headerLength + 2 * stepLength + idLength));
  assertEquals(6L,merged.getLong(merged.position() + headerLength + 2 * stepLength + idLength + clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(4),merged,headerLength + 3 * stepLength));
  assertEquals(4L,merged.getLong(merged.position() + headerLength + 3 * stepLength + idLength));
  assertEquals(4L,merged.getLong(merged.position() + headerLength + 3 * stepLength + idLength + clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(5),merged,headerLength + 4 * stepLength));
  assertEquals(5L,merged.getLong(merged.position() + headerLength + 4 * stepLength + idLength));
  assertEquals(5L,merged.getLong(merged.position() + headerLength + 4 * stepLength + idLength + clockLength));
  left=ContextState.allocate(1,0,0);
  left.writeGlobal(CounterId.fromInt(1),10L,20L);
  right=ContextState.allocate(1,0,0);
  right.writeGlobal(CounterId.fromInt(1),10L,30L);
  merged=cc.merge(left.context,right.context);
  headerLength=headerSizeLength + headerEltLength;
  assertEquals(headerLength + stepLength,merged.remaining());
  assertEquals(30L,cc.total(merged));
  assertEquals(1,merged.getShort(merged.position()));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(1),merged,headerLength));
  assertEquals(10L,merged.getLong(merged.position() + headerLength + idLength));
  assertEquals(30L,merged.getLong(merged.position() + headerLength + idLength+ clockLength));
  left=ContextState.allocate(2,0,0);
  left.writeGlobal(CounterId.fromInt(1),1L,1L);
  left.writeGlobal(CounterId.fromInt(2),1L,1L);
  right=ContextState.allocate(0,1,1);
  right.writeLocal(CounterId.fromInt(1),100L,100L);
  right.writeRemote(CounterId.fromInt(2),100L,100L);
  merged=cc.merge(left.context,right.context);
  headerLength=headerSizeLength + 2 * headerEltLength;
  assertEquals(headerLength + 2 * stepLength,merged.remaining());
  assertEquals(2L,cc.total(merged));
  assertEquals(2,merged.getShort(merged.position()));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(1),merged,headerLength));
  assertEquals(1L,merged.getLong(merged.position() + headerLength + idLength));
  assertEquals(1L,merged.getLong(merged.position() + headerLength + idLength+ clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(2),merged,headerLength + stepLength));
  assertEquals(1L,merged.getLong(merged.position() + headerLength + stepLength+ idLength));
  assertEquals(1L,merged.getLong(merged.position() + headerLength + stepLength+ idLength+ clockLength));
}

</code></pre>

<pre class="type-4 type-2 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testDiff(){
  ContextState left;
  ContextState right;
  left=ContextState.allocate(0,0,3);
  left.writeRemote(CounterId.fromInt(3),3L,0L);
  left.writeRemote(CounterId.fromInt(6),2L,0L);
  left.writeRemote(CounterId.fromInt(9),1L,0L);
  right=ContextState.wrap(ByteBufferUtil.clone(left.context));
  assertEquals(Relationship.EQUAL,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,4);
  left.writeRemote(CounterId.fromInt(3),3L,0L);
  left.writeRemote(CounterId.fromInt(6),2L,0L);
  left.writeRemote(CounterId.fromInt(9),1L,0L);
  left.writeRemote(CounterId.fromInt(12),0L,0L);
  right=ContextState.allocate(0,0,3);
  right.writeRemote(CounterId.fromInt(3),3L,0L);
  right.writeRemote(CounterId.fromInt(6),2L,0L);
  right.writeRemote(CounterId.fromInt(9),1L,0L);
  assertEquals(Relationship.GREATER_THAN,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,3);
  left.writeRemote(CounterId.fromInt(3),3L,0L);
  left.writeRemote(CounterId.fromInt(6),2L,0L);
  left.writeRemote(CounterId.fromInt(9),1L,0L);
  right=ContextState.allocate(0,0,4);
  right.writeRemote(CounterId.fromInt(3),3L,0L);
  right.writeRemote(CounterId.fromInt(6),2L,0L);
  right.writeRemote(CounterId.fromInt(9),1L,0L);
  right.writeRemote(CounterId.fromInt(12),0L,0L);
  assertEquals(Relationship.LESS_THAN,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,3);
  left.writeRemote(CounterId.fromInt(3),3L,0L);
  left.writeRemote(CounterId.fromInt(6),2L,0L);
  left.writeRemote(CounterId.fromInt(9),3L,0L);
  right=ContextState.allocate(0,0,3);
  right.writeRemote(CounterId.fromInt(3),3L,0L);
  right.writeRemote(CounterId.fromInt(6),2L,0L);
  right.writeRemote(CounterId.fromInt(9),1L,0L);
  assertEquals(Relationship.GREATER_THAN,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,3);
  left.writeRemote(CounterId.fromInt(3),3L,0L);
  left.writeRemote(CounterId.fromInt(6),2L,0L);
  left.writeRemote(CounterId.fromInt(9),3L,0L);
  right=ContextState.allocate(0,0,3);
  right.writeRemote(CounterId.fromInt(3),3L,0L);
  right.writeRemote(CounterId.fromInt(6),9L,0L);
  right.writeRemote(CounterId.fromInt(9),3L,0L);
  assertEquals(Relationship.LESS_THAN,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,3);
  left.writeRemote(CounterId.fromInt(3),1L,0L);
  left.writeRemote(CounterId.fromInt(4),1L,0L);
  left.writeRemote(CounterId.fromInt(9),1L,0L);
  right=ContextState.allocate(0,0,3);
  right.writeRemote(CounterId.fromInt(3),1L,0L);
  right.writeRemote(CounterId.fromInt(6),1L,0L);
  right.writeRemote(CounterId.fromInt(9),1L,0L);
  assertEquals(Relationship.DISJOINT,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,3);
  left.writeRemote(CounterId.fromInt(3),1L,0L);
  left.writeRemote(CounterId.fromInt(4),1L,0L);
  left.writeRemote(CounterId.fromInt(9),1L,0L);
  right=ContextState.allocate(0,0,3);
  right.writeRemote(CounterId.fromInt(2),1L,0L);
  right.writeRemote(CounterId.fromInt(6),1L,0L);
  right.writeRemote(CounterId.fromInt(12),1L,0L);
  assertEquals(Relationship.DISJOINT,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,3);
  left.writeRemote(CounterId.fromInt(3),1L,0L);
  left.writeRemote(CounterId.fromInt(6),3L,0L);
  left.writeRemote(CounterId.fromInt(9),1L,0L);
  right=ContextState.allocate(0,0,3);
  right.writeRemote(CounterId.fromInt(3),1L,0L);
  right.writeRemote(CounterId.fromInt(6),1L,0L);
  right.writeRemote(CounterId.fromInt(9),5L,0L);
  assertEquals(Relationship.DISJOINT,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,3);
  left.writeRemote(CounterId.fromInt(3),2L,0L);
  left.writeRemote(CounterId.fromInt(6),3L,0L);
  left.writeRemote(CounterId.fromInt(9),1L,0L);
  right=ContextState.allocate(0,0,3);
  right.writeRemote(CounterId.fromInt(3),1L,0L);
  right.writeRemote(CounterId.fromInt(6),9L,0L);
  right.writeRemote(CounterId.fromInt(9),5L,0L);
  assertEquals(Relationship.DISJOINT,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,4);
  left.writeRemote(CounterId.fromInt(3),2L,0L);
  left.writeRemote(CounterId.fromInt(6),3L,0L);
  left.writeRemote(CounterId.fromInt(9),1L,0L);
  left.writeRemote(CounterId.fromInt(12),1L,0L);
  right=ContextState.allocate(0,0,3);
  right.writeRemote(CounterId.fromInt(3),4L,0L);
  right.writeRemote(CounterId.fromInt(6),9L,0L);
  right.writeRemote(CounterId.fromInt(9),5L,0L);
  assertEquals(Relationship.DISJOINT,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,3);
  left.writeRemote(CounterId.fromInt(3),5L,0L);
  left.writeRemote(CounterId.fromInt(6),3L,0L);
  left.writeRemote(CounterId.fromInt(9),2L,0L);
  right=ContextState.allocate(0,0,4);
  right.writeRemote(CounterId.fromInt(3),4L,0L);
  right.writeRemote(CounterId.fromInt(6),3L,0L);
  right.writeRemote(CounterId.fromInt(9),2L,0L);
  right.writeRemote(CounterId.fromInt(12),1L,0L);
  assertEquals(Relationship.DISJOINT,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,3);
  left.writeRemote(CounterId.fromInt(3),5L,0L);
  left.writeRemote(CounterId.fromInt(6),2L,0L);
  left.writeRemote(CounterId.fromInt(9),2L,0L);
  right=ContextState.allocate(0,0,4);
  right.writeRemote(CounterId.fromInt(3),4L,0L);
  right.writeRemote(CounterId.fromInt(6),3L,0L);
  right.writeRemote(CounterId.fromInt(9),2L,0L);
  right.writeRemote(CounterId.fromInt(12),1L,0L);
  assertEquals(Relationship.DISJOINT,cc.diff(left.context,right.context));
  left=ContextState.allocate(0,0,4);
  left.writeRemote(CounterId.fromInt(3),5L,0L);
  left.writeRemote(CounterId.fromInt(6),2L,0L);
  left.writeRemote(CounterId.fromInt(7),2L,0L);
  left.writeRemote(CounterId.fromInt(9),2L,0L);
  right=ContextState.allocate(0,0,3);
  right.writeRemote(CounterId.fromInt(3),4L,0L);
  right.writeRemote(CounterId.fromInt(6),3L,0L);
  right.writeRemote(CounterId.fromInt(9),2L,0L);
  assertEquals(Relationship.DISJOINT,cc.diff(left.context,right.context));
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAllocate(){
  ContextState allGlobal=ContextState.allocate(3,0,0);
  assertEquals(headerSizeLength + 3 * headerEltLength + 3 * stepLength,allGlobal.context.remaining());
  ContextState allLocal=ContextState.allocate(0,3,0);
  assertEquals(headerSizeLength + 3 * headerEltLength + 3 * stepLength,allLocal.context.remaining());
  ContextState allRemote=ContextState.allocate(0,0,3);
  assertEquals(headerSizeLength + 3 * stepLength,allRemote.context.remaining());
  ContextState mixed=ContextState.allocate(1,1,1);
  assertEquals(headerSizeLength + 2 * headerEltLength + 3 * stepLength,mixed.context.remaining());
}

</code></pre>

<pre class="type-4 type-5 type-14 type-2 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClearLocal(){
  ContextState state;
  ByteBuffer marked;
  ByteBuffer cleared;
  state=ContextState.allocate(0,0,1);
  state.writeRemote(CounterId.fromInt(1),1L,1L);
  assertFalse(cc.shouldClearLocal(state.context));
  marked=cc.markLocalToBeCleared(state.context);
  assertEquals(0,marked.getShort(marked.position()));
  assertSame(state.context,marked);
  cleared=cc.clearAllLocal(marked);
  assertSame(cleared,marked);
  state=ContextState.allocate(0,1,0);
  state.writeLocal(CounterId.fromInt(1),1L,1L);
  assertFalse(cc.shouldClearLocal(state.context));
  marked=cc.markLocalToBeCleared(state.context);
  assertTrue(cc.shouldClearLocal(marked));
  assertEquals(-1,marked.getShort(marked.position()));
  assertNotSame(state.context,marked);
  cleared=cc.clearAllLocal(marked);
  assertFalse(cc.shouldClearLocal(cleared));
  assertEquals(0,cleared.getShort(cleared.position()));
  state=ContextState.allocate(2,1,0);
  state.writeLocal(CounterId.fromInt(1),1L,1L);
  state.writeGlobal(CounterId.fromInt(2),2L,2L);
  state.writeGlobal(CounterId.fromInt(3),3L,3L);
  assertFalse(cc.shouldClearLocal(state.context));
  marked=cc.markLocalToBeCleared(state.context);
  assertTrue(cc.shouldClearLocal(marked));
  assertEquals(-3,marked.getShort(marked.position()));
  assertEquals(0,marked.getShort(marked.position() + headerSizeLength));
  assertEquals(Short.MIN_VALUE + 1,marked.getShort(marked.position() + headerSizeLength + headerEltLength));
  assertEquals(Short.MIN_VALUE + 2,marked.getShort(marked.position() + headerSizeLength + 2 * headerEltLength));
  int headerLength=headerSizeLength + 3 * headerEltLength;
  assertTrue(Util.equalsCounterId(CounterId.fromInt(1),marked,headerLength));
  assertEquals(1L,marked.getLong(marked.position() + headerLength + idLength));
  assertEquals(1L,marked.getLong(marked.position() + headerLength + idLength+ clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(2),marked,headerLength + stepLength));
  assertEquals(2L,marked.getLong(marked.position() + headerLength + stepLength+ idLength));
  assertEquals(2L,marked.getLong(marked.position() + headerLength + stepLength+ idLength+ clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(3),marked,headerLength + 2 * stepLength));
  assertEquals(3L,marked.getLong(marked.position() + headerLength + 2 * stepLength + idLength));
  assertEquals(3L,marked.getLong(marked.position() + headerLength + 2 * stepLength + idLength + clockLength));
  cleared=cc.clearAllLocal(marked);
  assertFalse(cc.shouldClearLocal(cleared));
  assertEquals(2,cleared.getShort(cleared.position()));
  assertEquals(Short.MIN_VALUE + 1,cleared.getShort(marked.position() + headerEltLength));
  assertEquals(Short.MIN_VALUE + 2,cleared.getShort(marked.position() + headerSizeLength + headerEltLength));
  headerLength=headerSizeLength + 2 * headerEltLength;
  assertTrue(Util.equalsCounterId(CounterId.fromInt(1),cleared,headerLength));
  assertEquals(1L,cleared.getLong(cleared.position() + headerLength + idLength));
  assertEquals(1L,cleared.getLong(cleared.position() + headerLength + idLength+ clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(2),cleared,headerLength + stepLength));
  assertEquals(2L,cleared.getLong(cleared.position() + headerLength + stepLength+ idLength));
  assertEquals(2L,cleared.getLong(cleared.position() + headerLength + stepLength+ idLength+ clockLength));
  assertTrue(Util.equalsCounterId(CounterId.fromInt(3),cleared,headerLength + 2 * stepLength));
  assertEquals(3L,cleared.getLong(cleared.position() + headerLength + 2 * stepLength + idLength));
  assertEquals(3L,cleared.getLong(cleared.position() + headerLength + 2 * stepLength + idLength + clockLength));
  state=ContextState.allocate(1,0,0);
  state.writeGlobal(CounterId.fromInt(1),1L,1L);
  assertFalse(cc.shouldClearLocal(state.context));
  marked=cc.markLocalToBeCleared(state.context);
  assertEquals(1,marked.getShort(marked.position()));
  assertSame(state.context,marked);
  cleared=cc.clearAllLocal(marked);
  assertSame(cleared,marked);
}

</code></pre>

<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFindPositionOf(){
  ContextState state=ContextState.allocate(3,3,3);
  state.writeGlobal(CounterId.fromInt(1),1L,1L);
  state.writeRemote(CounterId.fromInt(2),2L,2L);
  state.writeLocal(CounterId.fromInt(3),3L,3L);
  state.writeGlobal(CounterId.fromInt(4),4L,4L);
  state.writeRemote(CounterId.fromInt(5),5L,5L);
  state.writeLocal(CounterId.fromInt(6),6L,6L);
  state.writeGlobal(CounterId.fromInt(7),7L,7L);
  state.writeRemote(CounterId.fromInt(8),8L,8L);
  state.writeLocal(CounterId.fromInt(9),9L,9L);
  int headerLength=headerSizeLength + 6 * headerEltLength;
  assertEquals(headerLength,cc.findPositionOf(state.context,CounterId.fromInt(1)));
  assertEquals(headerLength + stepLength,cc.findPositionOf(state.context,CounterId.fromInt(2)));
  assertEquals(headerLength + 2 * stepLength,cc.findPositionOf(state.context,CounterId.fromInt(3)));
  assertEquals(headerLength + 3 * stepLength,cc.findPositionOf(state.context,CounterId.fromInt(4)));
  assertEquals(headerLength + 4 * stepLength,cc.findPositionOf(state.context,CounterId.fromInt(5)));
  assertEquals(headerLength + 5 * stepLength,cc.findPositionOf(state.context,CounterId.fromInt(6)));
  assertEquals(headerLength + 6 * stepLength,cc.findPositionOf(state.context,CounterId.fromInt(7)));
  assertEquals(headerLength + 7 * stepLength,cc.findPositionOf(state.context,CounterId.fromInt(8)));
  assertEquals(headerLength + 8 * stepLength,cc.findPositionOf(state.context,CounterId.fromInt(9)));
  assertEquals(-1,cc.findPositionOf(state.context,CounterId.fromInt(0)));
  assertEquals(-1,cc.findPositionOf(state.context,CounterId.fromInt(10)));
  assertEquals(-1,cc.findPositionOf(state.context,CounterId.fromInt(15)));
  assertEquals(-1,cc.findPositionOf(state.context,CounterId.fromInt(20)));
}

</code></pre>

<pre class="type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTotal(){
  ContextState mixed=ContextState.allocate(0,1,4);
  mixed.writeRemote(CounterId.fromInt(1),1L,1L);
  mixed.writeRemote(CounterId.fromInt(2),2L,2L);
  mixed.writeRemote(CounterId.fromInt(4),4L,4L);
  mixed.writeRemote(CounterId.fromInt(5),5L,5L);
  mixed.writeLocal(CounterId.getLocalId(),12L,12L);
  assertEquals(24L,cc.total(mixed.context));
  ContextState global=ContextState.allocate(3,0,0);
  global.writeGlobal(CounterId.fromInt(1),1L,1L);
  global.writeGlobal(CounterId.fromInt(2),2L,2L);
  global.writeGlobal(CounterId.fromInt(3),3L,3L);
  assertEquals(6L,cc.total(global.context));
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
