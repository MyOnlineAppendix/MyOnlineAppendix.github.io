<h3><span class=" glyphicon glyphicon-tag"/>&nbspNullVerifier</h3><kbd>Verifies whether objects are null</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.cassandra.batchlog.BatchlogManagerTest </h4><pre class="type-7 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveBatch(){
  long initialAllBatches=BatchlogManager.instance.countAllBatches();
  CFMetaData cfm=Keyspace.open(KEYSPACE1).getColumnFamilyStore(CF_STANDARD5).metadata;
  long timestamp=(System.currentTimeMillis() - DatabaseDescriptor.getWriteRpcTimeout() * 2) * 1000;
  UUID uuid=UUIDGen.getTimeUUID();
  List<Mutation> mutations=new ArrayList<>(10);
  for (int j=0; j < 10; j++) {
    mutations.add(new RowUpdateBuilder(cfm,FBUtilities.timestampMicros(),ByteBufferUtil.bytes(j)).clustering("name" + j).add("val","val" + j).build());
  }
  BatchlogManager.store(Batch.createLocal(uuid,timestamp,mutations));
  Assert.assertEquals(initialAllBatches + 1,BatchlogManager.instance.countAllBatches());
  BatchlogManager.remove(uuid);
  assertEquals(initialAllBatches,BatchlogManager.instance.countAllBatches());
  String query=String.format("SELECT count(*) FROM %s.%s where id = %s",SystemKeyspace.NAME,SystemKeyspace.BATCHES,uuid);
  UntypedResultSet result=executeInternal(query);
  assertNotNull(result);
  assertEquals(0L,result.one().getLong("count"));
}

</code></pre>

<br>
<pre class="type-6 type-7 type-13 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("deprecation") public void testConversion() throws Exception {
  long initialAllBatches=BatchlogManager.instance.countAllBatches();
  long initialReplayedBatches=BatchlogManager.instance.getTotalBatchesReplayed();
  CFMetaData cfm=Schema.instance.getCFMetaData(KEYSPACE1,CF_STANDARD4);
  for (int i=0; i < 1400; i++) {
    Mutation mutation=new RowUpdateBuilder(cfm,FBUtilities.timestampMicros(),ByteBufferUtil.bytes(i)).clustering("name" + i).add("val","val" + i).build();
    long timestamp=i < 700 ? (System.currentTimeMillis() - BatchlogManager.getBatchlogTimeout()) : (System.currentTimeMillis() + BatchlogManager.getBatchlogTimeout());
    Mutation batchMutation=LegacyBatchlogMigrator.getStoreMutation(Batch.createLocal(UUIDGen.getTimeUUID(timestamp,i),TimeUnit.MILLISECONDS.toMicros(timestamp),Collections.singleton(mutation)),MessagingService.VERSION_20);
    assertTrue(LegacyBatchlogMigrator.isLegacyBatchlogMutation(batchMutation));
    LegacyBatchlogMigrator.handleLegacyMutation(batchMutation);
  }
  for (int i=1400; i < 1500; i++) {
    Mutation mutation=new RowUpdateBuilder(cfm,FBUtilities.timestampMicros(),ByteBufferUtil.bytes(i)).clustering("name" + i).add("val","val" + i).build();
    long timestamp=i < 1450 ? (System.currentTimeMillis() - BatchlogManager.getBatchlogTimeout()) : (System.currentTimeMillis() + BatchlogManager.getBatchlogTimeout());
    BatchlogManager.store(Batch.createLocal(UUIDGen.getTimeUUID(timestamp,i),FBUtilities.timestampMicros(),Collections.singleton(mutation)));
  }
  Keyspace.open(SystemKeyspace.NAME).getColumnFamilyStore(SystemKeyspace.BATCHES).forceBlockingFlush();
  assertEquals(1500,BatchlogManager.instance.countAllBatches() - initialAllBatches);
  assertEquals(0,BatchlogManager.instance.getTotalBatchesReplayed() - initialReplayedBatches);
  UntypedResultSet result=executeInternal(String.format("SELECT count(*) FROM \"%s\".\"%s\"",SystemKeyspace.NAME,SystemKeyspace.LEGACY_BATCHLOG));
  assertNotNull(result);
  assertEquals("Count in blog legacy",0,result.one().getLong("count"));
  result=executeInternal(String.format("SELECT count(*) FROM \"%s\".\"%s\"",SystemKeyspace.NAME,SystemKeyspace.BATCHES));
  assertNotNull(result);
  assertEquals("Count in blog",1500,result.one().getLong("count"));
  BatchlogManager.instance.performInitialReplay();
  assertEquals(750,BatchlogManager.instance.countAllBatches() - initialAllBatches);
  assertEquals(750,BatchlogManager.instance.getTotalBatchesReplayed() - initialReplayedBatches);
  for (int i=0; i < 1500; i++) {
    result=executeInternal(String.format("SELECT * FROM \"%s\".\"%s\" WHERE key = intAsBlob(%d)",KEYSPACE1,CF_STANDARD4,i));
    assertNotNull(result);
    if (i < 700 || i >= 1400 && i < 1450) {
      assertEquals(ByteBufferUtil.bytes(i),result.one().getBytes("key"));
      assertEquals("name" + i,result.one().getString("name"));
      assertEquals("val" + i,result.one().getString("val"));
    }
 else {
      assertTrue("Present at " + i,result.isEmpty());
    }
  }
  result=executeInternal(String.format("SELECT count(*) FROM \"%s\".\"%s\"",KEYSPACE1,CF_STANDARD4));
  assertNotNull(result);
  assertEquals(750,result.one().getLong("count"));
  result=executeInternal(String.format("SELECT count(*) FROM \"%s\".\"%s\"",SystemKeyspace.NAME,SystemKeyspace.BATCHES));
  assertNotNull(result);
  assertEquals("Count in blog after initial replay",750,result.one().getLong("count"));
  result=executeInternal(String.format("SELECT count(*) FROM \"%s\".\"%s\"",SystemKeyspace.NAME,SystemKeyspace.LEGACY_BATCHLOG));
  assertNotNull(result);
  assertEquals("Count in blog legacy after initial replay ",0,result.one().getLong("count"));
}

</code></pre>

<br>
<pre class="type-6 type-7 type-13 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTruncatedReplay() throws InterruptedException, ExecutionException {
  CFMetaData cf2=Schema.instance.getCFMetaData(KEYSPACE1,CF_STANDARD2);
  CFMetaData cf3=Schema.instance.getCFMetaData(KEYSPACE1,CF_STANDARD3);
  for (int i=0; i < 1000; i++) {
    Mutation mutation1=new RowUpdateBuilder(cf2,FBUtilities.timestampMicros(),ByteBufferUtil.bytes(i)).clustering("name" + i).add("val","val" + i).build();
    Mutation mutation2=new RowUpdateBuilder(cf3,FBUtilities.timestampMicros(),ByteBufferUtil.bytes(i)).clustering("name" + i).add("val","val" + i).build();
    List<Mutation> mutations=Lists.newArrayList(mutation1,mutation2);
    long timestamp=System.currentTimeMillis() - BatchlogManager.getBatchlogTimeout();
    if (i == 500)     SystemKeyspace.saveTruncationRecord(Keyspace.open(KEYSPACE1).getColumnFamilyStore(CF_STANDARD2),timestamp,ReplayPosition.NONE);
    if (i >= 500)     timestamp++;
 else     timestamp--;
    BatchlogManager.store(Batch.createLocal(UUIDGen.getTimeUUID(timestamp,i),FBUtilities.timestampMicros(),mutations));
  }
  Keyspace.open(SystemKeyspace.NAME).getColumnFamilyStore(SystemKeyspace.BATCHES).forceBlockingFlush();
  BatchlogManager.instance.startBatchlogReplay().get();
  for (int i=0; i < 1000; i++) {
    UntypedResultSet result=executeInternal(String.format("SELECT * FROM \"%s\".\"%s\" WHERE key = intAsBlob(%d)",KEYSPACE1,CF_STANDARD2,i));
    assertNotNull(result);
    if (i >= 500) {
      assertEquals(ByteBufferUtil.bytes(i),result.one().getBytes("key"));
      assertEquals("name" + i,result.one().getString("name"));
      assertEquals("val" + i,result.one().getString("val"));
    }
 else {
      assertTrue(result.isEmpty());
    }
  }
  for (int i=0; i < 1000; i++) {
    UntypedResultSet result=executeInternal(String.format("SELECT * FROM \"%s\".\"%s\" WHERE key = intAsBlob(%d)",KEYSPACE1,CF_STANDARD3,i));
    assertNotNull(result);
    assertEquals(ByteBufferUtil.bytes(i),result.one().getBytes("key"));
    assertEquals("name" + i,result.one().getString("name"));
    assertEquals("val" + i,result.one().getString("val"));
  }
}

</code></pre>

<br>
<pre class="type-7 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddBatch() throws IOException {
  long initialAllBatches=BatchlogManager.instance.countAllBatches();
  CFMetaData cfm=Keyspace.open(KEYSPACE1).getColumnFamilyStore(CF_STANDARD5).metadata;
  long timestamp=(System.currentTimeMillis() - DatabaseDescriptor.getWriteRpcTimeout() * 2) * 1000;
  UUID uuid=UUIDGen.getTimeUUID();
  List<Mutation> mutations=new ArrayList<>(10);
  for (int j=0; j < 10; j++) {
    mutations.add(new RowUpdateBuilder(cfm,FBUtilities.timestampMicros(),ByteBufferUtil.bytes(j)).clustering("name" + j).add("val","val" + j).build());
  }
  BatchlogManager.store(Batch.createLocal(uuid,timestamp,mutations));
  Assert.assertEquals(initialAllBatches + 1,BatchlogManager.instance.countAllBatches());
  String query=String.format("SELECT count(*) FROM %s.%s where id = %s",SystemKeyspace.NAME,SystemKeyspace.BATCHES,uuid);
  UntypedResultSet result=executeInternal(query);
  assertNotNull(result);
  assertEquals(1L,result.one().getLong("count"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cache.AutoSavingCacheTest </h4><pre class="type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSerializeAndLoadKeyCache() throws Exception {
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(CF_STANDARD1);
  for (int i=0; i < 2; i++) {
    ColumnDefinition colDef=ColumnDefinition.regularDef(cfs.metadata,ByteBufferUtil.bytes("col1"),AsciiType.instance);
    RowUpdateBuilder rowBuilder=new RowUpdateBuilder(cfs.metadata,System.currentTimeMillis(),"key1");
    rowBuilder.add(colDef,"val1");
    rowBuilder.build().apply();
    cfs.forceBlockingFlush();
  }
  Assert.assertEquals(2,cfs.getLiveSSTables().size());
  for (  SSTableReader sstable : cfs.getLiveSSTables())   sstable.getPosition(Util.dk("key1"),SSTableReader.Operator.EQ);
  AutoSavingCache<KeyCacheKey,RowIndexEntry> keyCache=CacheService.instance.keyCache;
  keyCache.submitWrite(keyCache.size()).get();
  keyCache.clear();
  Assert.assertEquals(0,keyCache.size());
  keyCache.loadSavedAsync().get();
  for (  SSTableReader sstable : cfs.getLiveSSTables())   Assert.assertNotNull(keyCache.get(new KeyCacheKey(cfs.metadata.ksAndCFName,sstable.descriptor,ByteBufferUtil.bytes("key1"))));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.config.DatabaseDescriptorTest </h4><pre class="type-7 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testKSMetaDataSerialization() throws ConfigurationException {
  for (  String ks : Schema.instance.getNonSystemKeyspaces()) {
    KeyspaceMetadata ksm=Schema.instance.getKSMetaData(ks);
    KeyspaceMetadata ksmDupe=ThriftConversion.fromThrift(ThriftConversion.toThrift(ksm));
    assertNotNull(ksmDupe);
    assertEquals(ksm,ksmDupe);
  }
}

</code></pre>

<br>
<pre class="type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTransKsMigration() throws ConfigurationException, IOException {
  SchemaLoader.cleanupAndLeaveDirs();
  Schema.instance.loadFromDisk();
  assertEquals(0,Schema.instance.getNonSystemKeyspaces().size());
  Gossiper.instance.start((int)(System.currentTimeMillis() / 1000));
  Keyspace.setInitialized();
  try {
    MigrationManager.announceNewKeyspace(KeyspaceMetadata.create("ks0",KeyspaceParams.simple(3)));
    MigrationManager.announceNewKeyspace(KeyspaceMetadata.create("ks1",KeyspaceParams.simple(3)));
    assertNotNull(Schema.instance.getKSMetaData("ks0"));
    assertNotNull(Schema.instance.getKSMetaData("ks1"));
    Schema.instance.clearKeyspaceMetadata(Schema.instance.getKSMetaData("ks0"));
    Schema.instance.clearKeyspaceMetadata(Schema.instance.getKSMetaData("ks1"));
    assertNull(Schema.instance.getKSMetaData("ks0"));
    assertNull(Schema.instance.getKSMetaData("ks1"));
    Schema.instance.loadFromDisk();
    assertNotNull(Schema.instance.getKSMetaData("ks0"));
    assertNotNull(Schema.instance.getKSMetaData("ks1"));
  }
  finally {
    Gossiper.instance.stop();
  }
}

</code></pre>

<br>
<pre class="type-7 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCFMetaDataSerialization() throws ConfigurationException, InvalidRequestException {
  for (  String keyspaceName : Schema.instance.getNonSystemKeyspaces()) {
    for (    CFMetaData cfm : Schema.instance.getTablesAndViews(keyspaceName)) {
      CFMetaData cfmDupe=ThriftConversion.fromThrift(ThriftConversion.toThrift(cfm));
      assertNotNull(cfmDupe);
      assertEquals(cfm,cfmDupe);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.DeleteTest </h4><pre class="type-6 type-5 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void lostDeletesTest(){
  Session session=sessionNet();
  for (int i=0; i < 500; i++) {
    session.execute(pstmtI.bind(1,1,"inhB","valB"));
    ResultSetFuture[] futures=load();
    Assert.assertTrue(futures[0].getUninterruptibly().isExhausted());
    Assert.assertTrue(futures[1].getUninterruptibly().isExhausted());
    Assert.assertNotNull(futures[2].getUninterruptibly().one());
    Assert.assertTrue(futures[3].getUninterruptibly().isExhausted());
    Assert.assertTrue(futures[4].getUninterruptibly().isExhausted());
    session.execute(pstmtU.bind("inhBu","valBu",1,1));
    futures=load();
    Assert.assertTrue(futures[0].getUninterruptibly().isExhausted());
    Assert.assertTrue(futures[1].getUninterruptibly().isExhausted());
    Assert.assertNotNull(futures[2].getUninterruptibly().one());
    Assert.assertTrue(futures[3].getUninterruptibly().isExhausted());
    Assert.assertTrue(futures[4].getUninterruptibly().isExhausted());
    session.execute(pstmtD.bind(1,1));
    futures=load();
    Assert.assertTrue(futures[0].getUninterruptibly().isExhausted());
    Assert.assertTrue(futures[1].getUninterruptibly().isExhausted());
    Assert.assertTrue(futures[2].getUninterruptibly().isExhausted());
    Assert.assertTrue(futures[3].getUninterruptibly().isExhausted());
    Assert.assertTrue(futures[4].getUninterruptibly().isExhausted());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.KeyCacheCqlTest </h4><pre class="type-6 type-7 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test2iKeyCachePaths() throws Throwable {
  String table=createTable("CREATE TABLE %s (" + commonColumnsDef + "PRIMARY KEY ((part_key_a, part_key_b),clust_key_a,clust_key_b,clust_key_c))");
  createIndex("CREATE INDEX some_index ON %s (col_int)");
  insertData(table,"some_index",true);
  clearCache();
  CacheMetrics metrics=CacheService.instance.keyCache.getMetrics();
  for (int i=0; i < 10; i++) {
    UntypedResultSet result=execute("SELECT part_key_a FROM %s WHERE col_int = ?",i);
    assertEquals(500,result.size());
  }
  long hits=metrics.hits.getCount();
  long requests=metrics.requests.getCount();
  assertEquals(0,hits);
  assertEquals(210,requests);
  for (int i=0; i < 10; i++) {
    UntypedResultSet result=execute("SELECT part_key_a FROM %s WHERE col_int = ?",i);
    assertEquals(500,result.size());
  }
  metrics=CacheService.instance.keyCache.getMetrics();
  hits=metrics.hits.getCount();
  requests=metrics.requests.getCount();
  assertEquals(200,hits);
  assertEquals(420,requests);
  CacheService.instance.keyCache.submitWrite(Integer.MAX_VALUE).get();
  int beforeSize=CacheService.instance.keyCache.size();
  CacheService.instance.keyCache.clear();
  Assert.assertEquals(0,CacheService.instance.keyCache.size());
  CacheService.instance.keyCache.loadSaved();
  assertEquals(beforeSize,CacheService.instance.keyCache.size());
  for (int i=0; i < 10; i++) {
    UntypedResultSet result=execute("SELECT part_key_a FROM %s WHERE col_int = ?",i);
    assertEquals(500,result.size());
  }
  assertNull(Schema.instance.getColumnFamilyStoreIncludingIndexes(Pair.create("foo","bar")));
  assertNull(Schema.instance.getColumnFamilyStoreIncludingIndexes(Pair.create(KEYSPACE,"bar")));
  dropTable("DROP TABLE %s");
  Schema.instance.updateVersion();
  CacheService.instance.keyCache.clear();
  CacheService.instance.keyCache.loadSaved();
  assertEquals(0,CacheService.instance.keyCache.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.ViewSchemaTest </h4><pre class="type-15 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccessAndSchema() throws Throwable {
  createTable("CREATE TABLE %s (" + "k int, " + "asciival ascii, "+ "bigintval bigint, "+ "PRIMARY KEY((k, asciival)))");
  execute("USE " + keyspace());
  executeNet(protocolVersion,"USE " + keyspace());
  createView("mv1_test","CREATE MATERIALIZED VIEW %s AS SELECT * FROM %%s WHERE bigintval IS NOT NULL AND k IS NOT NULL AND asciival IS NOT NULL PRIMARY KEY (bigintval, k, asciival)");
  updateView("INSERT INTO %s(k,asciival,bigintval)VALUES(?,?,?)",0,"foo",1L);
  try {
    updateView("INSERT INTO mv1_test(k,asciival,bigintval) VALUES(?,?,?)",1,"foo",2L);
    Assert.fail("Shouldn't be able to modify a MV directly");
  }
 catch (  Exception e) {
  }
  try {
    executeNet(protocolVersion,"ALTER TABLE mv1_test ADD foo text");
    Assert.fail("Should not be able to use alter table with MV");
  }
 catch (  Exception e) {
  }
  try {
    executeNet(protocolVersion,"ALTER TABLE mv1_test WITH compaction = { 'class' : 'LeveledCompactionStrategy' }");
    Assert.fail("Should not be able to use alter table with MV");
  }
 catch (  Exception e) {
  }
  executeNet(protocolVersion,"ALTER MATERIALIZED VIEW mv1_test WITH compaction = { 'class' : 'LeveledCompactionStrategy' }");
  executeNet(protocolVersion,"ALTER TABLE %s ADD foo text");
  CFMetaData metadata=Schema.instance.getCFMetaData(keyspace(),"mv1_test");
  Assert.assertNotNull(metadata.getColumnDefinition(ByteBufferUtil.bytes("foo")));
  updateView("INSERT INTO %s(k,asciival,bigintval,foo)VALUES(?,?,?,?)",0,"foo",1L,"bar");
  assertRows(execute("SELECT foo from %s"),row("bar"));
  executeNet(protocolVersion,"ALTER TABLE %s RENAME asciival TO bar");
  assertRows(execute("SELECT bar from %s"),row("foo"));
  metadata=Schema.instance.getCFMetaData(keyspace(),"mv1_test");
  Assert.assertNotNull(metadata.getColumnDefinition(ByteBufferUtil.bytes("bar")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.functions.TimeFctsTest </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testTimestampToUnixTimestampWithEmptyInput(){
  ByteBuffer output=executeFunction(TimeFcts.timestampToUnixTimestamp,ByteBufferUtil.EMPTY_BYTE_BUFFER);
  assertNull(output);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testTimestampToDateWithEmptyInput(){
  ByteBuffer output=executeFunction(TimeFcts.timestampToDate,ByteBufferUtil.EMPTY_BYTE_BUFFER);
  assertNull(output);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.validation.entities.SecondaryIndexTest </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void droppingIndexInvalidatesPreparedStatements() throws Throwable {
  createTable("CREATE TABLE %s (a int, b int, c int, PRIMARY KEY ((a), b))");
  createIndex("CREATE INDEX c_idx ON %s(c)");
  MD5Digest cqlId=prepareStatement("SELECT * FROM %s.%s WHERE c=?",false).statementId;
  Integer thriftId=prepareStatement("SELECT * FROM %s.%s WHERE c=?",true).toThriftPreparedResult().getItemId();
  assertNotNull(QueryProcessor.instance.getPrepared(cqlId));
  assertNotNull(QueryProcessor.instance.getPreparedForThrift(thriftId));
  dropIndex("DROP INDEX %s.c_idx");
  assertNull(QueryProcessor.instance.getPrepared(cqlId));
  assertNull(QueryProcessor.instance.getPreparedForThrift(thriftId));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.validation.entities.StaticColumnsTest </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
/** 
 * Migrated from cql_tests.py:TestCQL.static_columns_with_distinct_test()
 */
@Test public void testStaticColumnsWithDistinct() throws Throwable {
  createTable("CREATE TABLE %s( k int, p int, s int static, PRIMARY KEY (k, p) ) ");
  execute("INSERT INTO %s (k, p) VALUES (1, 1)");
  execute("INSERT INTO %s (k, p) VALUES (1, 2)");
  assertRows(execute("SELECT k, s FROM %s"),row(1,null),row(1,null));
  assertRows(execute("SELECT DISTINCT k, s FROM %s"),row(1,null));
  Object[][] rows=getRows(execute("SELECT DISTINCT s FROM %s WHERE k=1"));
  assertNull(rows[0][0]);
  assertEmpty(execute("SELECT DISTINCT s FROM %s WHERE k=2"));
  execute("INSERT INTO %s (k, p, s) VALUES (2, 1, 3)");
  execute("INSERT INTO %s (k, p) VALUES (2, 2)");
  assertRows(execute("SELECT k, s FROM %s"),row(1,null),row(1,null),row(2,3),row(2,3));
  assertRows(execute("SELECT DISTINCT k, s FROM %s"),row(1,null),row(2,3));
  rows=getRows(execute("SELECT DISTINCT s FROM %s WHERE k=1"));
  assertNull(rows[0][0]);
  assertRows(execute("SELECT DISTINCT s FROM %s WHERE k=2"),row(3));
  assertInvalid("SELECT DISTINCT s FROM %s");
  execute("TRUNCATE %s");
  for (int i=0; i < 10; i++)   for (int j=0; j < 10; j++)   execute("INSERT INTO %s (k, p, s) VALUES (?, ?, ?)",i,j,i);
  rows=getRows(execute("SELECT DISTINCT k, s FROM %s"));
  checkDistinctRows(rows,true,0,10,0,10);
  String keys="0, 1, 2, 3, 4, 5, 6, 7, 8, 9";
  rows=getRows(execute("SELECT DISTINCT k, s FROM %s WHERE k IN (" + keys + ")"));
  checkDistinctRows(rows,false,0,10,0,10);
  createTable("CREATE TABLE %s( k int, c1 int, c2 int, s1 int static, s2 int static, PRIMARY KEY (k, c1, c2))");
  for (int i=0; i < 10; i++)   for (int j=0; j < 5; j++)   for (int k=0; k < 5; k++)   execute("INSERT INTO %s (k, c1, c2, s1, s2) VALUES (?, ?, ?, ?, ?)",i,j,k,i,i + 1);
  rows=getRows(execute("SELECT DISTINCT k, s1 FROM %s"));
  checkDistinctRows(rows,true,0,10,0,10);
  rows=getRows(execute("SELECT DISTINCT k, s2 FROM %s"));
  checkDistinctRows(rows,true,0,10,1,11);
  rows=getRows(execute("SELECT DISTINCT k, s1 FROM %s LIMIT 10"));
  checkDistinctRows(rows,true,0,10,0,10);
  rows=getRows(execute("SELECT DISTINCT k, s1 FROM %s WHERE k IN (" + keys + ")"));
  checkDistinctRows(rows,false,0,10,0,10);
  rows=getRows(execute("SELECT DISTINCT k, s2 FROM %s WHERE k IN (" + keys + ")"));
  checkDistinctRows(rows,false,0,10,1,11);
  rows=getRows(execute("SELECT DISTINCT k, s1 FROM %s WHERE k IN (" + keys + ")"));
  checkDistinctRows(rows,true,0,10,0,10);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.validation.entities.TimestampTest </h4><pre class="type-13 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test timestmp and ttl
 * migrated from cql_tests.py:TestCQL.timestamp_and_ttl_test()
 */
@Test public void testTimestampTTL() throws Throwable {
  createTable("CREATE TABLE %s (k int PRIMARY KEY, c text, d text)");
  execute("INSERT INTO %s (k, c) VALUES (1, 'test')");
  execute("INSERT INTO %s (k, c) VALUES (2, 'test') USING TTL 400");
  Object[][] res=getRows(execute("SELECT k, c, writetime(c), ttl(c) FROM %s"));
  Assert.assertEquals(2,res.length);
  for (  Object[] r : res) {
    assertTrue(r[2] instanceof Integer || r[2] instanceof Long);
    if (r[0].equals(1))     assertNull(r[3]);
 else     assertTrue(r[3] instanceof Integer || r[2] instanceof Long);
  }
  res=getRows(execute("SELECT k, c, blobAsBigint(bigintAsBlob(writetime(c))), ttl(c) FROM %s"));
  Assert.assertEquals(2,res.length);
  for (  Object[] r : res) {
    assertTrue(r[2] instanceof Integer || r[2] instanceof Long);
    if (r[0].equals(1))     assertNull(r[3]);
 else     assertTrue(r[3] instanceof Integer || r[2] instanceof Long);
  }
  res=getRows(execute("SELECT k, c, writetime(c), blobAsInt(intAsBlob(ttl(c))) FROM %s"));
  Assert.assertEquals(2,res.length);
  for (  Object[] r : res) {
    assertTrue(r[2] instanceof Integer || r[2] instanceof Long);
    if (r[0].equals(1))     assertNull(r[3]);
 else     assertTrue(r[3] instanceof Integer || r[2] instanceof Long);
  }
  assertInvalid("SELECT k, c, writetime(k) FROM %s");
  assertRows(execute("SELECT k, d, writetime(d) FROM %s WHERE k = 1"),row(1,null,null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.validation.entities.UFTest </h4><pre class="type-6 type-5 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAmokUDF() throws Throwable {
  createTable("CREATE TABLE %s (key int primary key, dval double)");
  execute("INSERT INTO %s (key, dval) VALUES (?, ?)",1,1d);
  long udfWarnTimeout=DatabaseDescriptor.getUserDefinedFunctionWarnTimeout();
  long udfFailTimeout=DatabaseDescriptor.getUserDefinedFunctionFailTimeout();
  int maxTries=5;
  for (int i=1; i <= maxTries; i++) {
    try {
      DatabaseDescriptor.setUserDefinedFunctionWarnTimeout(10);
      DatabaseDescriptor.setUserDefinedFunctionFailTimeout(250);
      DatabaseDescriptor.setUserFunctionTimeoutPolicy(Config.UserFunctionTimeoutPolicy.ignore);
      ClientWarn.instance.captureWarnings();
      String fName=createFunction(KEYSPACE_PER_TEST,"double","CREATE OR REPLACE FUNCTION %s(val double) " + "RETURNS NULL ON NULL INPUT " + "RETURNS double "+ "LANGUAGE JAVA\n"+ "AS 'long t=System.currentTimeMillis()+110; while (t>System.currentTimeMillis()) { }; return 0d;'");
      execute("SELECT " + fName + "(dval) FROM %s WHERE key=1");
      List<String> warnings=ClientWarn.instance.getWarnings();
      Assert.assertNotNull(warnings);
      Assert.assertFalse(warnings.isEmpty());
      ClientWarn.instance.resetWarnings();
      fName=createFunction(KEYSPACE_PER_TEST,"double","CREATE OR REPLACE FUNCTION %s(val double) " + "RETURNS NULL ON NULL INPUT " + "RETURNS double "+ "LANGUAGE JAVA\n"+ "AS 'long t=System.currentTimeMillis()+500; while (t>System.currentTimeMillis()) { }; return 0d;';");
      assertInvalidMessage("ran longer than 250ms","SELECT " + fName + "(dval) FROM %s WHERE key=1");
      fName=createFunction(KEYSPACE_PER_TEST,"double","CREATE OR REPLACE FUNCTION %s(val double) " + "RETURNS NULL ON NULL INPUT " + "RETURNS double "+ "LANGUAGE JAVASCRIPT\n"+ "AS 'var t=java.lang.System.currentTimeMillis()+500; while (t>java.lang.System.currentTimeMillis()) { }; 0;';");
      assertInvalidMessage("ran longer than 250ms","SELECT " + fName + "(dval) FROM %s WHERE key=1");
      return;
    }
 catch (    Error|RuntimeException e) {
      if (i == maxTries)       throw e;
    }
 finally {
      DatabaseDescriptor.setUserDefinedFunctionWarnTimeout(udfWarnTimeout);
      DatabaseDescriptor.setUserDefinedFunctionFailTimeout(udfFailTimeout);
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testComplexNullValues() throws Throwable {
  String type=KEYSPACE + '.' + createType("CREATE TYPE %s (txt text, i int)");
  createTable("CREATE TABLE %s (key int primary key, lst list<double>, st set<text>, mp map<int, boolean>," + "tup frozen<tuple<double, text, int, boolean>>, udt frozen<" + type + ">)");
  String fList=createFunction(KEYSPACE,"list<double>","CREATE FUNCTION %s( coll list<double> ) " + "CALLED ON NULL INPUT " + "RETURNS list<double> "+ "LANGUAGE java\n"+ "AS $$return coll;$$;");
  String fSet=createFunction(KEYSPACE,"set<text>","CREATE FUNCTION %s( coll set<text> ) " + "CALLED ON NULL INPUT " + "RETURNS set<text> "+ "LANGUAGE java\n"+ "AS $$return coll;$$;");
  String fMap=createFunction(KEYSPACE,"map<int, boolean>","CREATE FUNCTION %s( coll map<int, boolean> ) " + "CALLED ON NULL INPUT " + "RETURNS map<int, boolean> "+ "LANGUAGE java\n"+ "AS $$return coll;$$;");
  String fTup=createFunction(KEYSPACE,"tuple<double, text, int, boolean>","CREATE FUNCTION %s( val tuple<double, text, int, boolean> ) " + "CALLED ON NULL INPUT " + "RETURNS tuple<double, text, int, boolean> "+ "LANGUAGE java\n"+ "AS $$return val;$$;");
  String fUdt=createFunction(KEYSPACE,type,"CREATE FUNCTION %s( val " + type + " ) "+ "CALLED ON NULL INPUT "+ "RETURNS "+ type+ " "+ "LANGUAGE java\n"+ "AS $$return val;$$;");
  List<Double> list=Arrays.asList(1d,2d,3d);
  Set<String> set=new TreeSet<>(Arrays.asList("one","three","two"));
  Map<Integer,Boolean> map=new TreeMap<>();
  map.put(1,true);
  map.put(2,false);
  map.put(3,true);
  Object t=tuple(1d,"one",42,false);
  execute("INSERT INTO %s (key, lst, st, mp, tup, udt) VALUES (1, ?, ?, ?, ?, {txt: 'one', i:1})",list,set,map,t);
  execute("INSERT INTO %s (key, lst, st, mp, tup, udt) VALUES (2, ?, ?, ?, ?, null)",null,null,null,null);
  execute("SELECT " + fList + "(lst), "+ fSet+ "(st), "+ fMap+ "(mp), "+ fTup+ "(tup), "+ fUdt+ "(udt) FROM %s WHERE key = 1");
  UntypedResultSet.Row row=execute("SELECT " + fList + "(lst) as l, "+ fSet+ "(st) as s, "+ fMap+ "(mp) as m, "+ fTup+ "(tup) as t, "+ fUdt+ "(udt) as u "+ "FROM %s WHERE key = 1").one();
  Assert.assertNotNull(row.getBytes("l"));
  Assert.assertNotNull(row.getBytes("s"));
  Assert.assertNotNull(row.getBytes("m"));
  Assert.assertNotNull(row.getBytes("t"));
  Assert.assertNotNull(row.getBytes("u"));
  row=execute("SELECT " + fList + "(lst) as l, "+ fSet+ "(st) as s, "+ fMap+ "(mp) as m, "+ fTup+ "(tup) as t, "+ fUdt+ "(udt) as u "+ "FROM %s WHERE key = 2").one();
  Assert.assertNull(row.getBytes("l"));
  Assert.assertNull(row.getBytes("s"));
  Assert.assertNull(row.getBytes("m"));
  Assert.assertNull(row.getBytes("t"));
  Assert.assertNull(row.getBytes("u"));
  for (  int version : PROTOCOL_VERSIONS) {
    Row r=executeNet(version,"SELECT " + fList + "(lst) as l, "+ fSet+ "(st) as s, "+ fMap+ "(mp) as m, "+ fTup+ "(tup) as t, "+ fUdt+ "(udt) as u "+ "FROM %s WHERE key = 1").one();
    Assert.assertNotNull(r.getBytesUnsafe("l"));
    Assert.assertNotNull(r.getBytesUnsafe("s"));
    Assert.assertNotNull(r.getBytesUnsafe("m"));
    Assert.assertNotNull(r.getBytesUnsafe("t"));
    Assert.assertNotNull(r.getBytesUnsafe("u"));
    r=executeNet(version,"SELECT " + fList + "(lst) as l, "+ fSet+ "(st) as s, "+ fMap+ "(mp) as m, "+ fTup+ "(tup) as t, "+ fUdt+ "(udt) as u "+ "FROM %s WHERE key = 2").one();
    Assert.assertNull(r.getBytesUnsafe("l"));
    Assert.assertNull(r.getBytesUnsafe("s"));
    Assert.assertNull(r.getBytesUnsafe("m"));
    Assert.assertNull(r.getBytesUnsafe("t"));
    Assert.assertNull(r.getBytesUnsafe("u"));
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFunctionWithReservedName() throws Throwable {
  execute("CREATE TABLE " + KEYSPACE_PER_TEST + ".second_tab (key int primary key, val double)");
  String fName=createFunction(KEYSPACE_PER_TEST,"","CREATE OR REPLACE FUNCTION %s() " + "RETURNS NULL ON NULL INPUT " + "RETURNS timestamp "+ "LANGUAGE JAVA "+ "AS 'return null;';");
  execute("INSERT INTO " + KEYSPACE_PER_TEST + ".second_tab (key, val) VALUES (?, ?)",1,1d);
  execute("INSERT INTO " + KEYSPACE_PER_TEST + ".second_tab (key, val) VALUES (?, ?)",2,2d);
  execute("INSERT INTO " + KEYSPACE_PER_TEST + ".second_tab (key, val) VALUES (?, ?)",3,3d);
  UntypedResultSet rows=execute("SELECT key, val, now() FROM " + KEYSPACE_PER_TEST + ".second_tab");
  Assert.assertEquals(3,rows.size());
  UntypedResultSet.Row row=rows.iterator().next();
  Date ts=row.getTimestamp(row.getColumns().get(2).name.toString());
  Assert.assertNotNull(ts);
  rows=execute("SELECT key, val, " + fName + "() FROM "+ KEYSPACE_PER_TEST+ ".second_tab");
  Assert.assertEquals(3,rows.size());
  row=rows.iterator().next();
  Assert.assertFalse(row.has(row.getColumns().get(2).name.toString()));
}

</code></pre>

<br>
<pre class="type-7 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUserTypeDrop() throws Throwable {
  String type=KEYSPACE + '.' + createType("CREATE TYPE %s (txt text, i int)");
  createTable("CREATE TABLE %s (key int primary key, udt frozen<" + type + ">)");
  String fName=createFunction(KEYSPACE,type,"CREATE FUNCTION %s( udt " + type + " ) "+ "CALLED ON NULL INPUT "+ "RETURNS int "+ "LANGUAGE java "+ "AS $$return "+ "     Integer.valueOf(udt.getInt(\"i\"));$$;");
  FunctionName fNameName=parseFunctionName(fName);
  Assert.assertEquals(1,Schema.instance.getFunctions(fNameName).size());
  ResultMessage.Prepared prepared=QueryProcessor.prepare(String.format("SELECT key, %s(udt) FROM %s.%s",fName,KEYSPACE,currentTable()),ClientState.forInternalCalls(),false);
  Assert.assertNotNull(QueryProcessor.instance.getPrepared(prepared.statementId));
  assertInvalidMessage("Cannot drop user type","DROP TYPE " + type);
  execute("DROP TABLE %s");
  assertInvalidMessage("as it is still used by function","DROP TYPE " + type);
  Assert.assertNull(QueryProcessor.instance.getPrepared(prepared.statementId));
  Assert.assertEquals(1,Schema.instance.getFunctions(fNameName).size());
}

</code></pre>

<br>
<pre class="type-7 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFunctionDropPreparedStatement() throws Throwable {
  createTable("CREATE TABLE %s (key int PRIMARY KEY, d double)");
  String fSin=createFunction(KEYSPACE_PER_TEST,"double","CREATE FUNCTION %s ( input double ) " + "CALLED ON NULL INPUT " + "RETURNS double "+ "LANGUAGE java "+ "AS 'return Double.valueOf(Math.sin(input.doubleValue()));'");
  FunctionName fSinName=parseFunctionName(fSin);
  Assert.assertEquals(1,Schema.instance.getFunctions(parseFunctionName(fSin)).size());
  ResultMessage.Prepared preparedSelect1=QueryProcessor.prepare(String.format("SELECT key, %s(d) FROM %s.%s",fSin,KEYSPACE,currentTable()),ClientState.forInternalCalls(),false);
  ResultMessage.Prepared preparedSelect2=QueryProcessor.prepare(String.format("SELECT key FROM %s.%s",KEYSPACE,currentTable()),ClientState.forInternalCalls(),false);
  ResultMessage.Prepared preparedInsert1=QueryProcessor.prepare(String.format("INSERT INTO %s.%s (key, d) VALUES (?, %s(?))",KEYSPACE,currentTable(),fSin),ClientState.forInternalCalls(),false);
  ResultMessage.Prepared preparedInsert2=QueryProcessor.prepare(String.format("INSERT INTO %s.%s (key, d) VALUES (?, ?)",KEYSPACE,currentTable()),ClientState.forInternalCalls(),false);
  Assert.assertNotNull(QueryProcessor.instance.getPrepared(preparedSelect1.statementId));
  Assert.assertNotNull(QueryProcessor.instance.getPrepared(preparedSelect2.statementId));
  Assert.assertNotNull(QueryProcessor.instance.getPrepared(preparedInsert1.statementId));
  Assert.assertNotNull(QueryProcessor.instance.getPrepared(preparedInsert2.statementId));
  execute("DROP FUNCTION " + fSin + "(double);");
  Assert.assertNull(QueryProcessor.instance.getPrepared(preparedSelect1.statementId));
  Assert.assertNotNull(QueryProcessor.instance.getPrepared(preparedSelect2.statementId));
  Assert.assertNull(QueryProcessor.instance.getPrepared(preparedInsert1.statementId));
  Assert.assertNotNull(QueryProcessor.instance.getPrepared(preparedInsert2.statementId));
  execute("CREATE FUNCTION " + fSin + " ( input double ) "+ "RETURNS NULL ON NULL INPUT "+ "RETURNS double "+ "LANGUAGE java "+ "AS 'return Double.valueOf(Math.sin(input));'");
  Assert.assertEquals(1,Schema.instance.getFunctions(fSinName).size());
  preparedSelect1=QueryProcessor.prepare(String.format("SELECT key, %s(d) FROM %s.%s",fSin,KEYSPACE,currentTable()),ClientState.forInternalCalls(),false);
  preparedInsert1=QueryProcessor.prepare(String.format("INSERT INTO %s.%s (key, d) VALUES (?, %s(?))",KEYSPACE,currentTable(),fSin),ClientState.forInternalCalls(),false);
  Assert.assertNotNull(QueryProcessor.instance.getPrepared(preparedSelect1.statementId));
  Assert.assertNotNull(QueryProcessor.instance.getPrepared(preparedInsert1.statementId));
  dropPerTestKeyspace();
  Assert.assertNull(QueryProcessor.instance.getPrepared(preparedSelect1.statementId));
  Assert.assertNotNull(QueryProcessor.instance.getPrepared(preparedSelect2.statementId));
  Assert.assertNull(QueryProcessor.instance.getPrepared(preparedInsert1.statementId));
  Assert.assertNotNull(QueryProcessor.instance.getPrepared(preparedInsert2.statementId));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.validation.miscellaneous.OverflowTest </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
/** 
 * Migrated from cql_tests.py:TestCQL.function_with_null_test()
 */
@Test public void testFunctionWithNull() throws Throwable {
  createTable("CREATE TABLE %s (k int PRIMARY KEY, t timeuuid,)");
  execute("INSERT INTO %s (k) VALUES (0)");
  Object[][] rows=getRows(execute("SELECT dateOf(t) FROM %s WHERE k=0"));
  assertNull(rows[0][0]);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.validation.operations.AggregationTest </h4><pre class="type-7 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testFunctionDropPreparedStatement() throws Throwable {
  String otherKS="cqltest_foo";
  execute("CREATE KEYSPACE IF NOT EXISTS " + otherKS + " WITH replication = {'class': 'SimpleStrategy', 'replication_factor': 3};");
  try {
    execute("CREATE TABLE " + otherKS + ".jsdp (a int primary key, b int)");
    String fState=createFunction(otherKS,"int, int","CREATE FUNCTION %s(a int, b int) " + "CALLED ON NULL INPUT " + "RETURNS int "+ "LANGUAGE javascript "+ "AS 'a + b;'");
    String a=createAggregate(otherKS,"int","CREATE AGGREGATE %s(int) " + "SFUNC " + shortFunctionName(fState) + " "+ "STYPE int");
    ResultMessage.Prepared prepared=QueryProcessor.prepare("SELECT " + a + "(b) FROM "+ otherKS+ ".jsdp",ClientState.forInternalCalls(),false);
    assertNotNull(QueryProcessor.instance.getPrepared(prepared.statementId));
    execute("DROP AGGREGATE " + a + "(int)");
    assertNull(QueryProcessor.instance.getPrepared(prepared.statementId));
    execute("CREATE AGGREGATE " + a + "(int) "+ "SFUNC "+ shortFunctionName(fState)+ " "+ "STYPE int");
    prepared=QueryProcessor.prepare("SELECT " + a + "(b) FROM "+ otherKS+ ".jsdp",ClientState.forInternalCalls(),false);
    assertNotNull(QueryProcessor.instance.getPrepared(prepared.statementId));
    execute("DROP KEYSPACE " + otherKS + ";");
    assertNull(QueryProcessor.instance.getPrepared(prepared.statementId));
  }
  finally {
    execute("DROP KEYSPACE IF EXISTS " + otherKS + ";");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.cql3.validation.operations.SelectOrderedPartitionerTest </h4><pre class="type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test undefined columns
 * migrated from cql_tests.py:TestCQL.undefined_column_handling_test()
 */
@Test public void testUndefinedColumns() throws Throwable {
  createTable("CREATE TABLE %s (k int PRIMARY KEY, v1 int, v2 int,)");
  execute("INSERT INTO %s (k, v1, v2) VALUES (0, 0, 0)");
  execute("INSERT INTO %s (k, v1) VALUES (1, 1)");
  execute("INSERT INTO %s (k, v1, v2) VALUES (2, 2, 2)");
  Object[][] rows=getRows(execute("SELECT v2 FROM %s"));
  assertEquals(0,rows[0][0]);
  assertEquals(null,rows[1][0]);
  assertEquals(2,rows[2][0]);
  rows=getRows(execute("SELECT v2 FROM %s WHERE k = 1"));
  assertEquals(1,rows.length);
  assertNull(rows[0][0]);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.ColumnFamilyStoreTest </h4><pre class="type-7 type-4 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScrubDataDirectories() throws Throwable {
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(CF_STANDARD1);
  ColumnFamilyStore.scrubDataDirectories(cfs.metadata);
  new RowUpdateBuilder(cfs.metadata,2,"key").clustering("name").add("val","2").build().applyUnsafe();
  cfs.forceBlockingFlush();
  Collection<SSTableReader> ssTables=cfs.getLiveSSTables();
  assertEquals(1,ssTables.size());
  SSTableReader ssTable=ssTables.iterator().next();
  String dataFileName=ssTable.descriptor.filenameFor(Component.DATA);
  String tmpDataFileName=ssTable.descriptor.tmpFilenameFor(Component.DATA);
  new File(dataFileName).renameTo(new File(tmpDataFileName));
  ssTable.selfRef().release();
  ColumnFamilyStore.scrubDataDirectories(cfs.metadata);
  List<File> ssTableFiles=new Directories(cfs.metadata).sstableLister(Directories.OnTxnErr.THROW).listFiles();
  assertNotNull(ssTableFiles);
  assertEquals(0,ssTableFiles.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.CounterCacheTest </h4><pre class="type-7 type-4 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadWrite(){
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(COUNTER1);
  cfs.truncateBlocking();
  CacheService.instance.invalidateCounterCache();
  Clustering c1=CBuilder.create(cfs.metadata.comparator).add(ByteBufferUtil.bytes(1)).build();
  Clustering c2=CBuilder.create(cfs.metadata.comparator).add(ByteBufferUtil.bytes(2)).build();
  ColumnDefinition cd=cfs.metadata.getColumnDefinition(ByteBufferUtil.bytes("c"));
  assertEquals(0,CacheService.instance.counterCache.size());
  assertNull(cfs.getCachedCounter(bytes(1),c1,cd,null));
  assertNull(cfs.getCachedCounter(bytes(1),c2,cd,null));
  assertNull(cfs.getCachedCounter(bytes(2),c1,cd,null));
  assertNull(cfs.getCachedCounter(bytes(2),c2,cd,null));
  cfs.putCachedCounter(bytes(1),c1,cd,null,ClockAndCount.create(1L,1L));
  cfs.putCachedCounter(bytes(1),c2,cd,null,ClockAndCount.create(1L,2L));
  cfs.putCachedCounter(bytes(2),c1,cd,null,ClockAndCount.create(2L,1L));
  cfs.putCachedCounter(bytes(2),c2,cd,null,ClockAndCount.create(2L,2L));
  assertEquals(ClockAndCount.create(1L,1L),cfs.getCachedCounter(bytes(1),c1,cd,null));
  assertEquals(ClockAndCount.create(1L,2L),cfs.getCachedCounter(bytes(1),c2,cd,null));
  assertEquals(ClockAndCount.create(2L,1L),cfs.getCachedCounter(bytes(2),c1,cd,null));
  assertEquals(ClockAndCount.create(2L,2L),cfs.getCachedCounter(bytes(2),c2,cd,null));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCounterCacheInvalidate(){
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(COUNTER1);
  cfs.truncateBlocking();
  CacheService.instance.invalidateCounterCache();
  Clustering c1=CBuilder.create(cfs.metadata.comparator).add(ByteBufferUtil.bytes(1)).build();
  Clustering c2=CBuilder.create(cfs.metadata.comparator).add(ByteBufferUtil.bytes(2)).build();
  ColumnDefinition cd=cfs.metadata.getColumnDefinition(ByteBufferUtil.bytes("c"));
  assertEquals(0,CacheService.instance.counterCache.size());
  assertNull(cfs.getCachedCounter(bytes(1),c1,cd,null));
  assertNull(cfs.getCachedCounter(bytes(1),c2,cd,null));
  assertNull(cfs.getCachedCounter(bytes(2),c1,cd,null));
  assertNull(cfs.getCachedCounter(bytes(2),c2,cd,null));
  assertNull(cfs.getCachedCounter(bytes(3),c1,cd,null));
  assertNull(cfs.getCachedCounter(bytes(3),c2,cd,null));
  cfs.putCachedCounter(bytes(1),c1,cd,null,ClockAndCount.create(1L,1L));
  cfs.putCachedCounter(bytes(1),c2,cd,null,ClockAndCount.create(1L,2L));
  cfs.putCachedCounter(bytes(2),c1,cd,null,ClockAndCount.create(2L,1L));
  cfs.putCachedCounter(bytes(2),c2,cd,null,ClockAndCount.create(2L,2L));
  cfs.putCachedCounter(bytes(3),c1,cd,null,ClockAndCount.create(3L,1L));
  cfs.putCachedCounter(bytes(3),c2,cd,null,ClockAndCount.create(3L,2L));
  assertEquals(ClockAndCount.create(1L,1L),cfs.getCachedCounter(bytes(1),c1,cd,null));
  assertEquals(ClockAndCount.create(1L,2L),cfs.getCachedCounter(bytes(1),c2,cd,null));
  assertEquals(ClockAndCount.create(2L,1L),cfs.getCachedCounter(bytes(2),c1,cd,null));
  assertEquals(ClockAndCount.create(2L,2L),cfs.getCachedCounter(bytes(2),c2,cd,null));
  assertEquals(ClockAndCount.create(3L,1L),cfs.getCachedCounter(bytes(3),c1,cd,null));
  assertEquals(ClockAndCount.create(3L,2L),cfs.getCachedCounter(bytes(3),c2,cd,null));
  cfs.invalidateCounterCache(Collections.singleton(new Bounds<Token>(cfs.decorateKey(bytes(1)).getToken(),cfs.decorateKey(bytes(2)).getToken())));
  assertEquals(2,CacheService.instance.counterCache.size());
  assertNull(cfs.getCachedCounter(bytes(1),c1,cd,null));
  assertNull(cfs.getCachedCounter(bytes(1),c2,cd,null));
  assertNull(cfs.getCachedCounter(bytes(2),c1,cd,null));
  assertNull(cfs.getCachedCounter(bytes(2),c2,cd,null));
  assertEquals(ClockAndCount.create(3L,1L),cfs.getCachedCounter(bytes(3),c1,cd,null));
  assertEquals(ClockAndCount.create(3L,2L),cfs.getCachedCounter(bytes(3),c2,cd,null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.ScrubTest </h4><pre class="type-7 type-13 type-15 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScrubCorruptedCounterRow() throws IOException, WriteTimeoutException {
  int numPartitions=1000;
  CompactionManager.instance.disableAutoCompaction();
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(COUNTER_CF);
  cfs.clearUnsafe();
  fillCounterCF(cfs,numPartitions);
  assertOrderedAll(cfs,numPartitions);
  assertEquals(1,cfs.getLiveSSTables().size());
  SSTableReader sstable=cfs.getLiveSSTables().iterator().next();
  overrideWithGarbage(sstable,ByteBufferUtil.bytes("0"),ByteBufferUtil.bytes("1"));
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(Arrays.asList(sstable),OperationType.SCRUB);Scrubber scrubber=new Scrubber(cfs,txn,false,false,true)){
    scrubber.scrub();
    fail("Expected a CorruptSSTableException to be thrown");
  }
 catch (  IOError err) {
  }
  Scrubber.ScrubResult scrubResult;
  try (LifecycleTransaction txn=cfs.getTracker().tryModify(Arrays.asList(sstable),OperationType.SCRUB);Scrubber scrubber=new Scrubber(cfs,txn,true,false,true)){
    scrubResult=scrubber.scrubWithResult();
  }
   assertNotNull(scrubResult);
  boolean compression=Boolean.parseBoolean(System.getProperty("cassandra.test.compression","false"));
  if (compression) {
    assertEquals(0,scrubResult.emptyRows);
    assertEquals(numPartitions,scrubResult.badRows + scrubResult.goodRows);
    assertTrue(scrubResult.goodRows >= scrubResult.badRows * 2);
  }
 else {
    assertEquals(0,scrubResult.emptyRows);
    assertEquals(1,scrubResult.badRows);
    assertEquals(numPartitions - 1,scrubResult.goodRows);
  }
  assertEquals(1,cfs.getLiveSSTables().size());
  assertOrderedAll(cfs,scrubResult.goodRows);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.SecondaryIndexTest </h4><pre class="type-7 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testCompositeIndexDeletions() throws IOException {
  ColumnFamilyStore cfs=Keyspace.open(KEYSPACE1).getColumnFamilyStore(WITH_COMPOSITE_INDEX);
  ByteBuffer bBB=ByteBufferUtil.bytes("birthdate");
  ColumnDefinition bDef=cfs.metadata.getColumnDefinition(bBB);
  ByteBuffer col=ByteBufferUtil.bytes("birthdate");
  new RowUpdateBuilder(cfs.metadata,0,"k1").clustering("c").add("birthdate",1L).build().applyUnsafe();
  assertIndexedOne(cfs,col,1L);
  RowUpdateBuilder.deleteRow(cfs.metadata,1,"k1","c").applyUnsafe();
  assertIndexedNone(cfs,col,1L);
  ReadCommand rc=Util.cmd(cfs).build();
  assertNull(cfs.indexManager.getBestIndexFor(rc));
  new RowUpdateBuilder(cfs.metadata,2,"k1").clustering("c").add("birthdate",1L).build().apply();
  ;
  assertIndexedOne(cfs,col,1L);
  RowUpdateBuilder.deleteRow(cfs.metadata,1,"k1","c").applyUnsafe();
  assertIndexedOne(cfs,col,1L);
  new RowUpdateBuilder(cfs.metadata,1,"k1").clustering("c").delete(bDef).build().applyUnsafe();
  assertIndexedOne(cfs,col,1L);
  RowUpdateBuilder.deleteRow(cfs.metadata,3,"k1","c").applyUnsafe();
  rc=Util.cmd(cfs).build();
  assertNull(cfs.indexManager.getBestIndexFor(rc));
  new RowUpdateBuilder(cfs.metadata,3,"k1").clustering("c").add("birthdate",1L).build().apply();
  ;
  rc=Util.cmd(cfs).build();
  assertNull(cfs.indexManager.getBestIndexFor(rc));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.commitlog.CommitLogDescriptorTest </h4><pre class="type-7 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Shouldn't happen in the real world (should only have either compression or enabledTdeOptions), but the header
 * functionality should be correct
 */
@Test public void writeAndReadHeader_WithCompressionAndEncryption() throws IOException {
  CommitLogDescriptor descriptor=new CommitLogDescriptor(CommitLogDescriptor.current_version,1,compression,enabledEncryption);
  ByteBuffer buffer=ByteBuffer.allocate(16 * 1024);
  CommitLogDescriptor.writeHeader(buffer,descriptor);
  buffer.flip();
  FileSegmentInputStream dataInput=new FileSegmentInputStream(buffer,null,0);
  CommitLogDescriptor result=CommitLogDescriptor.readHeader(dataInput,enabledEncryption);
  Assert.assertNotNull(result);
  Assert.assertEquals(compression,result.compression);
  Assert.assertTrue(result.getEncryptionContext().isEnabled());
  Assert.assertEquals(enabledEncryption,result.getEncryptionContext());
  Assert.assertArrayEquals(iv,result.getEncryptionContext().getIV());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void writeAndReadHeader_WithEncryptionHeader_EncryptionEnabledInYaml() throws IOException {
  CommitLogDescriptor descriptor=new CommitLogDescriptor(CommitLogDescriptor.current_version,1,null,enabledEncryption);
  ByteBuffer buffer=ByteBuffer.allocate(16 * 1024);
  CommitLogDescriptor.writeHeader(buffer,descriptor);
  buffer.flip();
  FileSegmentInputStream dataInput=new FileSegmentInputStream(buffer,null,0);
  CommitLogDescriptor result=CommitLogDescriptor.readHeader(dataInput,enabledEncryption);
  Assert.assertNotNull(result);
  Assert.assertNull(result.compression);
  Assert.assertTrue(result.getEncryptionContext().isEnabled());
  Assert.assertArrayEquals(iv,result.getEncryptionContext().getIV());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check that even though enabledTdeOptions is disabled in the yaml, we can still read the commit log header as encrypted.
 */
@Test public void writeAndReadHeader_WithEncryptionHeader_EncryptionDisabledInYaml() throws IOException {
  CommitLogDescriptor descriptor=new CommitLogDescriptor(CommitLogDescriptor.current_version,1,null,enabledEncryption);
  ByteBuffer buffer=ByteBuffer.allocate(16 * 1024);
  CommitLogDescriptor.writeHeader(buffer,descriptor);
  buffer.flip();
  FileSegmentInputStream dataInput=new FileSegmentInputStream(buffer,null,0);
  CommitLogDescriptor result=CommitLogDescriptor.readHeader(dataInput,previouslyEnabledEncryption);
  Assert.assertNotNull(result);
  Assert.assertNull(result.compression);
  Assert.assertTrue(result.getEncryptionContext().isEnabled());
  Assert.assertArrayEquals(iv,result.getEncryptionContext().getIV());
}

</code></pre>

<br>
<pre class="type-7 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void writeAndReadHeader_OnlyCompression() throws IOException {
  CommitLogDescriptor descriptor=new CommitLogDescriptor(CommitLogDescriptor.current_version,1,compression,neverEnabledEncryption);
  ByteBuffer buffer=ByteBuffer.allocate(16 * 1024);
  CommitLogDescriptor.writeHeader(buffer,descriptor);
  buffer.flip();
  FileSegmentInputStream dataInput=new FileSegmentInputStream(buffer,null,0);
  CommitLogDescriptor result=CommitLogDescriptor.readHeader(dataInput,neverEnabledEncryption);
  Assert.assertNotNull(result);
  Assert.assertEquals(compression,result.compression);
  Assert.assertFalse(result.getEncryptionContext().isEnabled());
}

</code></pre>

<br>
<pre class="type-7 type-5 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void writeAndReadHeader_NoCompressionOrEncryption() throws IOException {
  CommitLogDescriptor descriptor=new CommitLogDescriptor(CommitLogDescriptor.current_version,1,null,neverEnabledEncryption);
  ByteBuffer buffer=ByteBuffer.allocate(16 * 1024);
  CommitLogDescriptor.writeHeader(buffer,descriptor);
  buffer.flip();
  FileSegmentInputStream dataInput=new FileSegmentInputStream(buffer,null,0);
  CommitLogDescriptor result=CommitLogDescriptor.readHeader(dataInput,neverEnabledEncryption);
  Assert.assertNotNull(result);
  Assert.assertNull(result.compression);
  Assert.assertFalse(result.getEncryptionContext().isEnabled());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.compaction.CompactionControllerTest </h4><pre class="type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetFullyExpiredSSTables(){
  Keyspace keyspace=Keyspace.open(KEYSPACE);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF2);
  cfs.truncateBlocking();
  DecoratedKey key=Util.dk("k1");
  long timestamp1=FBUtilities.timestampMicros();
  long timestamp2=timestamp1 - 5;
  long timestamp3=timestamp2 - 5;
  applyDeleteMutation(cfs.metadata,key,timestamp2);
  cfs.forceBlockingFlush();
  Set<SSTableReader> compacting=Sets.newHashSet(cfs.getLiveSSTables());
  applyMutation(cfs.metadata,key,timestamp1);
  cfs.forceBlockingFlush();
  Set<SSTableReader> overlapping=Sets.difference(Sets.newHashSet(cfs.getLiveSSTables()),compacting);
  int gcBefore=(int)(System.currentTimeMillis() / 1000) + 5;
  Set<SSTableReader> expired=CompactionController.getFullyExpiredSSTables(cfs,compacting,overlapping,gcBefore);
  assertNotNull(expired);
  assertEquals(1,expired.size());
  assertEquals(compacting.iterator().next(),expired.iterator().next());
  applyMutation(cfs.metadata,key,timestamp3);
  expired=CompactionController.getFullyExpiredSSTables(cfs,compacting,overlapping,gcBefore);
  assertNotNull(expired);
  assertEquals(0,expired.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.compaction.DateTieredCompactionStrategyTest </h4><pre class="type-7 type-4 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDropExpiredSSTables() throws InterruptedException {
  Keyspace keyspace=Keyspace.open(KEYSPACE1);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(CF_STANDARD1);
  cfs.disableAutoCompaction();
  ByteBuffer value=ByteBuffer.wrap(new byte[100]);
  DecoratedKey key=Util.dk(String.valueOf("expired"));
  new RowUpdateBuilder(cfs.metadata,System.currentTimeMillis(),1,key.getKey()).clustering("column").add("val",value).build().applyUnsafe();
  cfs.forceBlockingFlush();
  SSTableReader expiredSSTable=cfs.getLiveSSTables().iterator().next();
  Thread.sleep(10);
  key=Util.dk(String.valueOf("nonexpired"));
  new RowUpdateBuilder(cfs.metadata,System.currentTimeMillis(),key.getKey()).clustering("column").add("val",value).build().applyUnsafe();
  cfs.forceBlockingFlush();
  assertEquals(cfs.getLiveSSTables().size(),2);
  Map<String,String> options=new HashMap<>();
  options.put(DateTieredCompactionStrategyOptions.BASE_TIME_KEY,"30");
  options.put(DateTieredCompactionStrategyOptions.TIMESTAMP_RESOLUTION_KEY,"MILLISECONDS");
  options.put(DateTieredCompactionStrategyOptions.MAX_SSTABLE_AGE_KEY,Double.toString((1d / (24 * 60 * 60))));
  options.put(DateTieredCompactionStrategyOptions.EXPIRED_SSTABLE_CHECK_FREQUENCY_SECONDS_KEY,"0");
  DateTieredCompactionStrategy dtcs=new DateTieredCompactionStrategy(cfs,options);
  for (  SSTableReader sstable : cfs.getLiveSSTables())   dtcs.addSSTable(sstable);
  dtcs.startup();
  assertNull(dtcs.getNextBackgroundTask((int)(System.currentTimeMillis() / 1000)));
  Thread.sleep(2000);
  AbstractCompactionTask t=dtcs.getNextBackgroundTask((int)(System.currentTimeMillis() / 1000));
  assertNotNull(t);
  assertEquals(1,Iterables.size(t.transaction.originals()));
  SSTableReader sstable=t.transaction.originals().iterator().next();
  assertEquals(sstable,expiredSSTable);
  t.transaction.abort();
  cfs.truncateBlocking();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.lifecycle.HelpersTest </h4><pre class="type-7 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMarkObsolete(){
  ColumnFamilyStore cfs=MockSchema.newCFS();
  LogTransaction txnLogs=new LogTransaction(OperationType.UNKNOWN);
  Iterable<SSTableReader> readers=Lists.newArrayList(MockSchema.sstable(1,cfs),MockSchema.sstable(2,cfs));
  List<LogTransaction.Obsoletion> obsoletions=new ArrayList<>();
  Assert.assertNull(Helpers.prepareForObsoletion(readers,txnLogs,obsoletions,null));
  assertNotNull(obsoletions);
  assertEquals(2,obsoletions.size());
  Throwable accumulate=Helpers.markObsolete(obsoletions,null);
  Assert.assertNull(accumulate);
  for (  SSTableReader reader : readers)   Assert.assertTrue(reader.isMarkedCompacted());
  accumulate=Helpers.markObsolete(obsoletions,null);
  assertNotNull(accumulate);
  txnLogs.finish();
}

</code></pre>

<br>
<pre class="type-7 type-5 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetupDeletionNotification(){
  ColumnFamilyStore cfs=MockSchema.newCFS();
  Iterable<SSTableReader> readers=Lists.newArrayList(MockSchema.sstable(1,cfs),MockSchema.sstable(2,cfs));
  Throwable accumulate=Helpers.setReplaced(readers,null);
  Assert.assertNull(accumulate);
  for (  SSTableReader reader : readers)   Assert.assertTrue(reader.isReplaced());
  accumulate=Helpers.setReplaced(readers,null);
  assertNotNull(accumulate);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.lifecycle.LogTransactionTest </h4><pre class="type-15 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetTemporaryFilesThrowsIfCompletingAfterObsoletion() throws Throwable {
  ColumnFamilyStore cfs=MockSchema.newCFS(KEYSPACE);
  File dataFolder=new Directories(cfs.metadata).getDirectoryForNewSSTables();
  SSTableReader sstable=sstable(dataFolder,cfs,0,128);
  LogTransaction logs=new LogTransaction(OperationType.COMPACTION);
  assertNotNull(logs);
  LogTransaction.SSTableTidier tidier=logs.obsoleted(sstable);
  sstable.markObsolete(tidier);
  sstable.selfRef().release();
  LogTransaction.waitForDeletions();
  try {
    LogAwareFileLister.getTemporaryFiles(dataFolder);
    fail("Expected runtime exception");
  }
 catch (  RuntimeException e) {
  }
  logs.finish();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-12 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies values related to public fields.
"></span><br>
@Test public void testCommitSameDesc() throws Throwable {
  ColumnFamilyStore cfs=MockSchema.newCFS(KEYSPACE);
  File dataFolder=new Directories(cfs.metadata).getDirectoryForNewSSTables();
  SSTableReader sstableOld1=sstable(dataFolder,cfs,0,128);
  SSTableReader sstableOld2=sstable(dataFolder,cfs,0,256);
  SSTableReader sstableNew=sstable(dataFolder,cfs,1,128);
  LogTransaction log=new LogTransaction(OperationType.COMPACTION);
  assertNotNull(log);
  log.trackNew(sstableNew);
  sstableOld1.setReplaced();
  LogTransaction.SSTableTidier tidier=log.obsoleted(sstableOld2);
  assertNotNull(tidier);
  log.finish();
  sstableOld2.markObsolete(tidier);
  sstableOld1.selfRef().release();
  sstableOld2.selfRef().release();
  assertFiles(dataFolder.getPath(),new HashSet<>(sstableNew.getAllFilePaths()));
  sstableNew.selfRef().release();
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testUntrack() throws Throwable {
  ColumnFamilyStore cfs=MockSchema.newCFS(KEYSPACE);
  File dataFolder=new Directories(cfs.metadata).getDirectoryForNewSSTables();
  SSTableReader sstableNew=sstable(dataFolder,cfs,1,128);
  LogTransaction log=new LogTransaction(OperationType.COMPACTION);
  assertNotNull(log);
  log.trackNew(sstableNew);
  log.untrackNew(sstableNew);
  log.finish();
  sstableNew.selfRef().release();
  Thread.sleep(1);
  LogTransaction.waitForDeletions();
  assertFiles(dataFolder.getPath(),Collections.<String>emptySet());
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testCommitOnlyNew() throws Throwable {
  ColumnFamilyStore cfs=MockSchema.newCFS(KEYSPACE);
  File dataFolder=new Directories(cfs.metadata).getDirectoryForNewSSTables();
  SSTableReader sstable=sstable(dataFolder,cfs,0,128);
  LogTransaction log=new LogTransaction(OperationType.COMPACTION);
  assertNotNull(log);
  log.trackNew(sstable);
  log.finish();
  assertFiles(dataFolder.getPath(),new HashSet<>(sstable.getAllFilePaths()));
  sstable.selfRef().release();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-12 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies values related to public fields.
"></span><br>
@Test public void testCommitOnlyOld() throws Throwable {
  ColumnFamilyStore cfs=MockSchema.newCFS(KEYSPACE);
  File dataFolder=new Directories(cfs.metadata).getDirectoryForNewSSTables();
  SSTableReader sstable=sstable(dataFolder,cfs,0,128);
  LogTransaction log=new LogTransaction(OperationType.COMPACTION);
  assertNotNull(log);
  LogTransaction.SSTableTidier tidier=log.obsoleted(sstable);
  assertNotNull(tidier);
  log.finish();
  sstable.markObsolete(tidier);
  sstable.selfRef().release();
  assertFiles(dataFolder.getPath(),new HashSet<>());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-12 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies values related to public fields.
"></span><br>
@Test public void testAbortOnlyOld() throws Throwable {
  ColumnFamilyStore cfs=MockSchema.newCFS(KEYSPACE);
  File dataFolder=new Directories(cfs.metadata).getDirectoryForNewSSTables();
  SSTableReader sstable=sstable(dataFolder,cfs,0,128);
  LogTransaction log=new LogTransaction(OperationType.COMPACTION);
  assertNotNull(log);
  LogTransaction.SSTableTidier tidier=log.obsoleted(sstable);
  assertNotNull(tidier);
  tidier.abort();
  log.abort();
  sstable.selfRef().release();
  assertFiles(dataFolder.getPath(),new HashSet<>(sstable.getAllFilePaths()));
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testGetTemporaryFilesSafeAfterObsoletion() throws Throwable {
  ColumnFamilyStore cfs=MockSchema.newCFS(KEYSPACE);
  File dataFolder=new Directories(cfs.metadata).getDirectoryForNewSSTables();
  SSTableReader sstable=sstable(dataFolder,cfs,0,128);
  LogTransaction logs=new LogTransaction(OperationType.COMPACTION);
  assertNotNull(logs);
  LogTransaction.SSTableTidier tidier=logs.obsoleted(sstable);
  logs.finish();
  sstable.markObsolete(tidier);
  sstable.selfRef().release();
  for (int i=0; i < 200; i++)   LogAwareFileLister.getTemporaryFiles(dataFolder);
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testAbortOnlyNew() throws Throwable {
  ColumnFamilyStore cfs=MockSchema.newCFS(KEYSPACE);
  File dataFolder=new Directories(cfs.metadata).getDirectoryForNewSSTables();
  SSTableReader sstable=sstable(dataFolder,cfs,0,128);
  LogTransaction log=new LogTransaction(OperationType.COMPACTION);
  assertNotNull(log);
  log.trackNew(sstable);
  log.abort();
  sstable.selfRef().release();
  assertFiles(dataFolder.getPath(),new HashSet<>());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.db.lifecycle.TrackerTest </h4><pre class="type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNotifications(){
  ColumnFamilyStore cfs=MockSchema.newCFS();
  SSTableReader r1=MockSchema.sstable(0,cfs), r2=MockSchema.sstable(1,cfs);
  Tracker tracker=new Tracker(null,false);
  MockListener listener=new MockListener(false);
  tracker.subscribe(listener);
  tracker.notifyAdded(singleton(r1));
  Assert.assertEquals(singleton(r1),((SSTableAddedNotification)listener.received.get(0)).added);
  listener.received.clear();
  tracker.notifyDeleting(r1);
  Assert.assertEquals(r1,((SSTableDeletingNotification)listener.received.get(0)).deleting);
  listener.received.clear();
  Assert.assertNull(tracker.notifySSTablesChanged(singleton(r1),singleton(r2),OperationType.COMPACTION,null));
  Assert.assertEquals(singleton(r1),((SSTableListChangedNotification)listener.received.get(0)).removed);
  Assert.assertEquals(singleton(r2),((SSTableListChangedNotification)listener.received.get(0)).added);
  listener.received.clear();
  tracker.notifySSTableRepairedStatusChanged(singleton(r1));
  Assert.assertEquals(singleton(r1),((SSTableRepairStatusChanged)listener.received.get(0)).sstable);
  listener.received.clear();
  Memtable memtable=MockSchema.memtable(cfs);
  tracker.notifyRenewed(memtable);
  Assert.assertEquals(memtable,((MemtableRenewedNotification)listener.received.get(0)).renewed);
  listener.received.clear();
  tracker.unsubscribe(listener);
  MockListener failListener=new MockListener(true);
  tracker.subscribe(failListener);
  tracker.subscribe(listener);
  Assert.assertNotNull(tracker.notifyAdded(singleton(r1),null));
  Assert.assertEquals(singleton(r1),((SSTableAddedNotification)listener.received.get(0)).added);
  listener.received.clear();
  Assert.assertNotNull(tracker.notifySSTablesChanged(singleton(r1),singleton(r2),OperationType.COMPACTION,null));
  Assert.assertEquals(singleton(r1),((SSTableListChangedNotification)listener.received.get(0)).removed);
  Assert.assertEquals(singleton(r2),((SSTableListChangedNotification)listener.received.get(0)).added);
  listener.received.clear();
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testApply(){
  final ColumnFamilyStore cfs=MockSchema.newCFS();
  final Tracker tracker=new Tracker(null,false);
  final View resultView=ViewTest.fakeView(0,0,cfs);
  final AtomicInteger count=new AtomicInteger();
  tracker.apply(new Predicate<View>(){
    public boolean apply(    View view){
      if (count.incrementAndGet() < 3)       tracker.view.set(ViewTest.fakeView(0,0,cfs));
      return true;
    }
  }
,new Function<View,View>(){
    @Nullable public View apply(    View view){
      return resultView;
    }
  }
);
  Assert.assertEquals(3,count.get());
  Assert.assertEquals(resultView,tracker.getView());
  count.set(0);
  Assert.assertNull(tracker.apply(new Predicate<View>(){
    public boolean apply(    View view){
      count.incrementAndGet();
      return false;
    }
  }
,null));
  Assert.assertEquals(1,count.get());
  Assert.assertEquals(resultView,tracker.getView());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTryModify(){
  ColumnFamilyStore cfs=MockSchema.newCFS();
  Tracker tracker=new Tracker(cfs,false);
  List<SSTableReader> readers=ImmutableList.of(MockSchema.sstable(0,true,cfs),MockSchema.sstable(1,cfs),MockSchema.sstable(2,cfs));
  tracker.addInitialSSTables(copyOf(readers));
  Assert.assertNull(tracker.tryModify(ImmutableList.of(MockSchema.sstable(0,cfs)),OperationType.COMPACTION));
  try (LifecycleTransaction txn=tracker.tryModify(readers.get(0),OperationType.COMPACTION)){
    Assert.assertNotNull(txn);
    Assert.assertNull(tracker.tryModify(readers.get(0),OperationType.COMPACTION));
    Assert.assertEquals(1,txn.originals().size());
    Assert.assertTrue(txn.originals().contains(readers.get(0)));
  }
   try (LifecycleTransaction txn=tracker.tryModify(Collections.<SSTableReader>emptyList(),OperationType.COMPACTION)){
    Assert.assertNotNull(txn);
    Assert.assertEquals(0,txn.originals().size());
  }
   readers.get(0).selfRef().release();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.hints.HintsBufferTest </h4><pre class="type-15 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("resource") public void testOverlyLargeAllocation(){
  HintsBuffer buffer=HintsBuffer.create(128);
  try {
    buffer.allocate(65 - HintsBuffer.ENTRY_OVERHEAD_SIZE);
    fail("Allocation of the buffer should have failed but hasn't");
  }
 catch (  IllegalArgumentException e) {
    assertEquals(String.format("Hint of %s bytes is too large - the maximum size is 64",65 - HintsBuffer.ENTRY_OVERHEAD_SIZE),e.getMessage());
  }
  try (HintsBuffer.Allocation allocation=buffer.allocate(64 - HintsBuffer.ENTRY_OVERHEAD_SIZE)){
    assertNotNull(allocation);
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.index.CustomIndexTest </h4><pre class="type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void validateOptions() throws Throwable {
  createTable("CREATE TABLE %s(k int, c int, v1 int, v2 int, PRIMARY KEY(k,c))");
  createIndex(String.format("CREATE CUSTOM INDEX ON %%s(c, v2) USING '%s' WITH OPTIONS = {'foo':'bar'}",IndexWithValidateOptions.class.getName()));
  assertNotNull(IndexWithValidateOptions.options);
  assertEquals("bar",IndexWithValidateOptions.options.get("foo"));
}

</code></pre>

<br>
<pre class="type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void validateOptionsWithCFMetaData() throws Throwable {
  createTable("CREATE TABLE %s(k int, c int, v1 int, v2 int, PRIMARY KEY(k,c))");
  createIndex(String.format("CREATE CUSTOM INDEX ON %%s(c, v2) USING '%s' WITH OPTIONS = {'foo':'bar'}",IndexWithOverloadedValidateOptions.class.getName()));
  CFMetaData cfm=getCurrentColumnFamilyStore().metadata;
  assertEquals(cfm,IndexWithOverloadedValidateOptions.cfm);
  assertNotNull(IndexWithOverloadedValidateOptions.options);
  assertEquals("bar",IndexWithOverloadedValidateOptions.options.get("foo"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.index.sasi.disk.TokenTreeTest </h4><pre class="type-6 type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void buildSerializeAndGet() throws Exception {
  final long tokMin=0;
  final long tokMax=1000;
  final TokenTree tokenTree=generateTree(tokMin,tokMax);
  for (long i=0; i <= tokMax; i++) {
    TokenTree.OnDiskToken result=tokenTree.get(i,KEY_CONVERTER);
    Assert.assertNotNull("failed to find object for token " + i,result);
    Set<Long> found=result.getOffsets();
    Assert.assertEquals(1,found.size());
    Assert.assertEquals(i,found.toArray()[0]);
  }
  Assert.assertNull("found missing object",tokenTree.get(tokMax + 10,KEY_CONVERTER));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.index.sasi.utils.RangeIntersectionIteratorTest </h4><pre class="type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIteratorPeeking(){
  RangeIterator.Builder<Long,Token> builder=RangeIntersectionIterator.builder();
  builder.add(new LongIterator(new long[]{10L}));
  long[] tokens=new long[150];
  for (int i=0; i < tokens.length; i++)   tokens[i]=i;
  builder.add(new LongIterator(tokens));
  RangeIterator<Long,Token> intersection=builder.build();
  Assert.assertNotNull(intersection);
  Assert.assertEquals(LookupIntersectionIterator.class,intersection.getClass());
  Assert.assertTrue(intersection.hasNext());
  Assert.assertEquals(convert(10L),convert(intersection));
  builder=RangeIntersectionIterator.builder();
  builder.add(new LongIterator(new long[]{1L,3L,5L,7L,9L}));
  builder.add(new LongIterator(new long[]{1L,2L,5L,6L}));
  intersection=builder.build();
  Assert.assertNotNull(intersection);
  Assert.assertEquals(BounceIntersectionIterator.class,intersection.getClass());
  Assert.assertTrue(intersection.hasNext());
  Assert.assertEquals(convert(1L,5L),convert(intersection));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.index.sasi.utils.RangeUnionIteratorTest </h4><pre class="type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSkipTo(){
  RangeUnionIterator.Builder<Long,Token> builder=RangeUnionIterator.builder();
  builder.add(new LongIterator(new long[]{1L,2L,3L}));
  builder.add(new LongIterator(new long[]{4L,5L,6L}));
  builder.add(new LongIterator(new long[]{7L,8L,9L}));
  RangeIterator<Long,Token> tokens=builder.build();
  Assert.assertNotNull(tokens);
  tokens.skipTo(5L);
  Assert.assertTrue(tokens.hasNext());
  Assert.assertEquals(5L,(long)tokens.next().get());
  tokens.skipTo(7L);
  Assert.assertTrue(tokens.hasNext());
  Assert.assertEquals(7L,(long)tokens.next().get());
  tokens.skipTo(10L);
  Assert.assertFalse(tokens.hasNext());
  Assert.assertEquals(1L,(long)tokens.getMinimum());
  Assert.assertEquals(9L,(long)tokens.getMaximum());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRangeIterator(){
  LongIterator tokens=new LongIterator(new long[]{0L,1L,2L,3L});
  Assert.assertEquals(0L,(long)tokens.getMinimum());
  Assert.assertEquals(3L,(long)tokens.getMaximum());
  for (int i=0; i <= 3; i++) {
    Assert.assertTrue(tokens.hasNext());
    Assert.assertEquals(i,(long)tokens.getCurrent());
    Assert.assertEquals(i,(long)tokens.next().get());
  }
  tokens=new LongIterator(new long[]{0L,1L,3L,5L});
  Assert.assertEquals(3L,(long)tokens.skipTo(2L).get());
  Assert.assertTrue(tokens.hasNext());
  Assert.assertEquals(3L,(long)tokens.getCurrent());
  Assert.assertEquals(3L,(long)tokens.next().get());
  Assert.assertEquals(5L,(long)tokens.skipTo(5L).get());
  Assert.assertTrue(tokens.hasNext());
  Assert.assertEquals(5L,(long)tokens.getCurrent());
  Assert.assertEquals(5L,(long)tokens.next().get());
  LongIterator empty=new LongIterator(new long[0]);
  Assert.assertNull(empty.skipTo(3L));
  Assert.assertFalse(empty.hasNext());
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRandomSequences(){
  ThreadLocalRandom random=ThreadLocalRandom.current();
  long[][] values=new long[random.nextInt(1,20)][];
  int numTests=random.nextInt(10,20);
  for (int tests=0; tests < numTests; tests++) {
    RangeUnionIterator.Builder<Long,Token> builder=RangeUnionIterator.builder();
    int totalCount=0;
    for (int i=0; i < values.length; i++) {
      long[] part=new long[random.nextInt(1,500)];
      for (int j=0; j < part.length; j++)       part[j]=random.nextLong();
      Arrays.sort(part);
      values[i]=part;
      builder.add(new LongIterator(part));
      totalCount+=part.length;
    }
    long[] totalOrdering=new long[totalCount];
    int index=0;
    for (    long[] part : values) {
      for (      long value : part)       totalOrdering[index++]=value;
    }
    Arrays.sort(totalOrdering);
    int count=0;
    RangeIterator<Long,Token> tokens=builder.build();
    Assert.assertNotNull(tokens);
    while (tokens.hasNext())     Assert.assertEquals(totalOrdering[count++],(long)tokens.next().get());
    Assert.assertEquals(totalCount,count);
  }
}

</code></pre>

<br>
<pre class="type-6 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMinMaxAndCount(){
  RangeUnionIterator.Builder<Long,Token> builder=RangeUnionIterator.builder();
  builder.add(new LongIterator(new long[]{1L,2L,3L}));
  builder.add(new LongIterator(new long[]{4L,5L,6L}));
  builder.add(new LongIterator(new long[]{7L,8L,9L}));
  Assert.assertEquals(9L,(long)builder.getMaximum());
  Assert.assertEquals(9L,builder.getTokenCount());
  RangeIterator<Long,Token> tokens=builder.build();
  Assert.assertNotNull(tokens);
  Assert.assertEquals(1L,(long)tokens.getMinimum());
  Assert.assertEquals(9L,(long)tokens.getMaximum());
  Assert.assertEquals(9L,tokens.getCount());
  for (long i=1; i < 10; i++) {
    Assert.assertTrue(tokens.hasNext());
    Assert.assertEquals(i,(long)tokens.next().get());
  }
  Assert.assertFalse(tokens.hasNext());
  Assert.assertEquals(1L,(long)tokens.getMinimum());
}

</code></pre>

<br>
<pre class="type-7 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBuilder(){
  RangeUnionIterator.Builder<Long,Token> builder=RangeUnionIterator.builder();
  Assert.assertNull(builder.getMinimum());
  Assert.assertNull(builder.getMaximum());
  Assert.assertEquals(0L,builder.getTokenCount());
  Assert.assertEquals(0L,builder.rangeCount());
  builder.add(new LongIterator(new long[]{1L,2L,3L}));
  builder.add(new LongIterator(new long[]{4L,5L,6L}));
  builder.add(new LongIterator(new long[]{7L,8L,9L}));
  Assert.assertEquals(1L,(long)builder.getMinimum());
  Assert.assertEquals(9L,(long)builder.getMaximum());
  Assert.assertEquals(9L,builder.getTokenCount());
  Assert.assertEquals(3L,builder.rangeCount());
  Assert.assertFalse(builder.statistics.isDisjoint());
  Assert.assertEquals(1L,(long)builder.ranges.poll().getMinimum());
  Assert.assertEquals(4L,(long)builder.ranges.poll().getMinimum());
  Assert.assertEquals(7L,(long)builder.ranges.poll().getMinimum());
  RangeIterator<Long,Token> tokens=RangeUnionIterator.build(new ArrayList<RangeIterator<Long,Token>>(){
{
      add(new LongIterator(new long[]{1L,2L,4L}));
      add(new LongIterator(new long[]{3L,5L,6L}));
    }
  }
);
  Assert.assertEquals(convert(1L,2L,3L,4L,5L,6L),convert(tokens));
  FileUtils.closeQuietly(tokens);
  RangeIterator emptyTokens=RangeUnionIterator.builder().build();
  Assert.assertNull(emptyTokens);
  builder=RangeUnionIterator.builder();
  Assert.assertEquals(0L,builder.add((RangeIterator<Long,Token>)null).rangeCount());
  Assert.assertEquals(0L,builder.add((List<RangeIterator<Long,Token>>)null).getTokenCount());
  Assert.assertEquals(0L,builder.add(new LongIterator(new long[]{})).rangeCount());
  RangeIterator<Long,Token> single=new LongIterator(new long[]{1L,2L,3L});
  RangeIterator<Long,Token> range=RangeIntersectionIterator.<Long,Token>builder().add(single).build();
  Assert.assertEquals(range,single);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.compress.CompressedRandomAccessReaderTest </h4><pre class="type-6 type-7 type-4 type-5 type-14 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDataCorruptionDetection() throws IOException {
  String CONTENT="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam vitae.";
  File file=new File("testDataCorruptionDetection");
  file.deleteOnExit();
  File metadata=new File(file.getPath() + ".meta");
  metadata.deleteOnExit();
  assertTrue(file.createNewFile());
  assertTrue(metadata.createNewFile());
  MetadataCollector sstableMetadataCollector=new MetadataCollector(new ClusteringComparator(BytesType.instance)).replayPosition(null);
  try (SequentialWriter writer=new CompressedSequentialWriter(file,metadata.getPath(),CompressionParams.snappy(),sstableMetadataCollector)){
    writer.write(CONTENT.getBytes());
    writer.finish();
  }
   try (ChannelProxy channel=new ChannelProxy(file)){
    CompressionMetadata meta=new CompressionMetadata(metadata.getPath(),file.length(),ChecksumType.CRC32);
    CompressionMetadata.Chunk chunk=meta.chunkFor(0);
    try (RandomAccessReader reader=new CompressedRandomAccessReader.Builder(channel,meta).build()){
      assertEquals(CONTENT,reader.readLine());
      Random random=new Random();
      RandomAccessFile checksumModifier=null;
      try {
        checksumModifier=new RandomAccessFile(file,"rw");
        byte[] checksum=new byte[4];
        checksumModifier.seek(chunk.length);
        checksumModifier.read(checksum);
        checksumModifier.seek(chunk.length);
        for (int i=0; i < checksum.length; i++) {
          checksumModifier.write(random.nextInt());
          SyncUtil.sync(checksumModifier);
          try (final RandomAccessReader r=new CompressedRandomAccessReader.Builder(channel,meta).build()){
            Throwable exception=null;
            try {
              r.readLine();
            }
 catch (            Throwable t) {
              exception=t;
            }
            assertNotNull(exception);
            assertSame(exception.getClass(),CorruptSSTableException.class);
            assertSame(exception.getCause().getClass(),CorruptBlockException.class);
          }
         }
        updateChecksum(checksumModifier,chunk.length,checksum);
        try (RandomAccessReader cr=new CompressedRandomAccessReader.Builder(channel,meta).build()){
          assertEquals(CONTENT,cr.readLine());
        }
       }
  finally {
        if (checksumModifier != null)         checksumModifier.close();
      }
    }
   }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.sstable.IndexSummaryManagerTest </h4><pre class="type-7 type-13 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testJMXFunctions() throws IOException {
  IndexSummaryManager manager=IndexSummaryManager.instance;
  manager.setResizeIntervalInMinutes(-1);
  assertNull(manager.getTimeToNextResize(TimeUnit.MINUTES));
  manager.setResizeIntervalInMinutes(10);
  assertEquals(10,manager.getResizeIntervalInMinutes());
  assertEquals(10,manager.getTimeToNextResize(TimeUnit.MINUTES),1);
  manager.setResizeIntervalInMinutes(15);
  assertEquals(15,manager.getResizeIntervalInMinutes());
  assertEquals(15,manager.getTimeToNextResize(TimeUnit.MINUTES),2);
  assertTrue(manager.getMemoryPoolCapacityInMB() >= 0);
  manager.setMemoryPoolCapacityInMB(10);
  assertEquals(10,manager.getMemoryPoolCapacityInMB());
  String ksname=KEYSPACE1;
  String cfname=CF_STANDARDLOWiINTERVAL;
  Keyspace keyspace=Keyspace.open(ksname);
  ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(cfname);
  cfs.truncateBlocking();
  cfs.disableAutoCompaction();
  ByteBuffer value=ByteBuffer.wrap(new byte[100]);
  int numSSTables=2;
  int numRows=10;
  for (int sstable=0; sstable < numSSTables; sstable++) {
    for (int row=0; row < numRows; row++) {
      String key=String.format("%3d",row);
      new RowUpdateBuilder(cfs.metadata,0,key).clustering("column").add("val",value).build().applyUnsafe();
    }
    cfs.forceBlockingFlush();
  }
  assertTrue(manager.getAverageIndexInterval() >= cfs.metadata.params.minIndexInterval);
  Map<String,Integer> intervals=manager.getIndexIntervals();
  for (  Map.Entry<String,Integer> entry : intervals.entrySet())   if (entry.getKey().contains(CF_STANDARDLOWiINTERVAL))   assertEquals(cfs.metadata.params.minIndexInterval,entry.getValue(),0.001);
  manager.setMemoryPoolCapacityInMB(0);
  manager.redistributeSummaries();
  assertTrue(manager.getAverageIndexInterval() > cfs.metadata.params.minIndexInterval);
  intervals=manager.getIndexIntervals();
  for (  Map.Entry<String,Integer> entry : intervals.entrySet()) {
    if (entry.getKey().contains(CF_STANDARDLOWiINTERVAL))     assertTrue(entry.getValue() >= cfs.metadata.params.minIndexInterval);
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCancelIndex() throws Exception {
  String ksname=KEYSPACE1;
  String cfname=CF_STANDARDLOWiINTERVAL;
  Keyspace keyspace=Keyspace.open(ksname);
  final ColumnFamilyStore cfs=keyspace.getColumnFamilyStore(cfname);
  final int numSSTables=4;
  int numRows=256;
  createSSTables(ksname,cfname,numSSTables,numRows);
  final List<SSTableReader> sstables=new ArrayList<>(cfs.getLiveSSTables());
  for (  SSTableReader sstable : sstables)   sstable.overrideReadMeter(new RestorableMeter(100.0,100.0));
  final long singleSummaryOffHeapSpace=sstables.get(0).getIndexSummaryOffHeapSize();
  final AtomicReference<CompactionInterruptedException> exception=new AtomicReference<>();
  Thread t=new Thread(new Runnable(){
    public void run(){
      try {
        try (LifecycleTransaction txn=cfs.getTracker().tryModify(sstables,OperationType.UNKNOWN)){
          redistributeSummaries(Collections.EMPTY_LIST,of(cfs.metadata.cfId,txn),singleSummaryOffHeapSpace);
        }
       }
 catch (      CompactionInterruptedException ex) {
        exception.set(ex);
      }
catch (      IOException ignored) {
      }
    }
  }
);
  t.start();
  while (CompactionManager.instance.getActiveCompactions() == 0 && t.isAlive())   Thread.sleep(1);
  CompactionManager.instance.stopCompaction("INDEX_SUMMARY");
  t.join();
  assertNotNull("Expected compaction interrupted exception",exception.get());
  assertTrue("Expected no active compactions",CompactionMetrics.getCompactions().isEmpty());
  Set<SSTableReader> beforeRedistributionSSTables=new HashSet<>(sstables);
  Set<SSTableReader> afterCancelSSTables=new HashSet<>(cfs.getLiveSSTables());
  Set<SSTableReader> disjoint=Sets.symmetricDifference(beforeRedistributionSSTables,afterCancelSSTables);
  assertTrue(String.format("Mismatched files before and after cancelling redistribution: %s",Joiner.on(",").join(disjoint)),disjoint.isEmpty());
  validateData(cfs,numRows);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.io.util.MmappedRegionsTest </h4><pre class="type-7 type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test(expected=AssertionError.class) public void testCopyCannotExtend() throws Exception {
  ByteBuffer buffer=allocateBuffer(128 * 1024);
  MmappedRegions snapshot;
  ChannelProxy channelCopy;
  try (ChannelProxy channel=new ChannelProxy(writeFile("testSnapshotCannotExtend",buffer));MmappedRegions regions=MmappedRegions.empty(channel)){
    regions.extend(buffer.capacity() / 2);
    snapshot=regions.sharedCopy();
    channelCopy=channel.sharedCopy();
  }
   try {
    snapshot.extend(buffer.capacity());
  }
  finally {
    assertNull(snapshot.close(null));
    assertNull(channelCopy.close(null));
  }
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCopy() throws Exception {
  ByteBuffer buffer=allocateBuffer(128 * 1024);
  MmappedRegions snapshot;
  ChannelProxy channelCopy;
  try (ChannelProxy channel=new ChannelProxy(writeFile("testSnapshot",buffer));MmappedRegions regions=MmappedRegions.map(channel,buffer.capacity() / 4)){
    regions.extend(buffer.capacity() / 2);
    regions.extend(3 * buffer.capacity() / 4);
    regions.extend(buffer.capacity());
    snapshot=regions.sharedCopy();
    channelCopy=channel.sharedCopy();
  }
   assertFalse(snapshot.isCleanedUp());
  final int SIZE=buffer.capacity() / 4;
  for (int i=0; i < buffer.capacity(); i++) {
    MmappedRegions.Region region=snapshot.floor(i);
    assertNotNull(region);
    assertEquals(SIZE * (i / SIZE),region.bottom());
    assertEquals(SIZE + (SIZE * (i / SIZE)),region.top());
    assertNotNull(region.buffer.duplicate().getInt());
  }
  assertNull(snapshot.close(null));
  assertNull(channelCopy.close(null));
  assertTrue(snapshot.isCleanedUp());
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSmallSegmentSize() throws Exception {
  int OLD_MAX_SEGMENT_SIZE=MmappedRegions.MAX_SEGMENT_SIZE;
  MmappedRegions.MAX_SEGMENT_SIZE=1024;
  ByteBuffer buffer=allocateBuffer(4096);
  try (ChannelProxy channel=new ChannelProxy(writeFile("testSmallSegmentSize",buffer));MmappedRegions regions=MmappedRegions.empty(channel)){
    regions.extend(1024);
    regions.extend(2048);
    regions.extend(4096);
    final int SIZE=MmappedRegions.MAX_SEGMENT_SIZE;
    for (int i=0; i < buffer.capacity(); i++) {
      MmappedRegions.Region region=regions.floor(i);
      assertNotNull(region);
      assertEquals(SIZE * (i / SIZE),region.bottom());
      assertEquals(SIZE + (SIZE * (i / SIZE)),region.top());
    }
  }
  finally {
    MmappedRegions.MAX_SEGMENT_SIZE=OLD_MAX_SEGMENT_SIZE;
  }
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAllocRegions() throws Exception {
  int OLD_MAX_SEGMENT_SIZE=MmappedRegions.MAX_SEGMENT_SIZE;
  MmappedRegions.MAX_SEGMENT_SIZE=1024;
  ByteBuffer buffer=allocateBuffer(MmappedRegions.MAX_SEGMENT_SIZE * MmappedRegions.REGION_ALLOC_SIZE * 3);
  try (ChannelProxy channel=new ChannelProxy(writeFile("testAllocRegions",buffer));MmappedRegions regions=MmappedRegions.empty(channel)){
    regions.extend(buffer.capacity());
    final int SIZE=MmappedRegions.MAX_SEGMENT_SIZE;
    for (int i=0; i < buffer.capacity(); i++) {
      MmappedRegions.Region region=regions.floor(i);
      assertNotNull(region);
      assertEquals(SIZE * (i / SIZE),region.bottom());
      assertEquals(SIZE + (SIZE * (i / SIZE)),region.top());
    }
  }
  finally {
    MmappedRegions.MAX_SEGMENT_SIZE=OLD_MAX_SEGMENT_SIZE;
  }
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-5 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMapForCompressionMetadata() throws Exception {
  int OLD_MAX_SEGMENT_SIZE=MmappedRegions.MAX_SEGMENT_SIZE;
  MmappedRegions.MAX_SEGMENT_SIZE=1024;
  ByteBuffer buffer=allocateBuffer(128 * 1024);
  File f=File.createTempFile("testMapForCompressionMetadata","1");
  f.deleteOnExit();
  File cf=File.createTempFile(f.getName() + ".metadata","1");
  cf.deleteOnExit();
  MetadataCollector sstableMetadataCollector=new MetadataCollector(new ClusteringComparator(BytesType.instance)).replayPosition(null);
  try (SequentialWriter writer=new CompressedSequentialWriter(f,cf.getAbsolutePath(),CompressionParams.snappy(),sstableMetadataCollector)){
    writer.write(buffer);
    writer.finish();
  }
   CompressionMetadata metadata=new CompressionMetadata(cf.getAbsolutePath(),f.length(),ChecksumType.CRC32);
  try (ChannelProxy channel=new ChannelProxy(f);MmappedRegions regions=MmappedRegions.map(channel,metadata)){
    assertFalse(regions.isEmpty());
    int i=0;
    while (i < buffer.capacity()) {
      CompressionMetadata.Chunk chunk=metadata.chunkFor(i);
      MmappedRegions.Region region=regions.floor(chunk.offset);
      assertNotNull(region);
      ByteBuffer compressedChunk=region.buffer.duplicate();
      assertNotNull(compressedChunk);
      assertEquals(chunk.length + 4,compressedChunk.capacity());
      assertEquals(chunk.offset,region.bottom());
      assertEquals(chunk.offset + chunk.length + 4,region.top());
      i+=metadata.chunkLength();
    }
  }
  finally {
    MmappedRegions.MAX_SEGMENT_SIZE=OLD_MAX_SEGMENT_SIZE;
    metadata.close();
  }
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExtendOutOfOrder() throws Exception {
  ByteBuffer buffer=allocateBuffer(4096);
  try (ChannelProxy channel=new ChannelProxy(writeFile("testExtendOutOfOrder",buffer));MmappedRegions regions=MmappedRegions.empty(channel)){
    regions.extend(4096);
    regions.extend(1024);
    regions.extend(2048);
    for (int i=0; i < buffer.capacity(); i++) {
      MmappedRegions.Region region=regions.floor(i);
      assertNotNull(region);
      assertEquals(0,region.bottom());
      assertEquals(4096,region.top());
    }
  }
 }

</code></pre>

<br>
<pre class="type-6 type-7 type-13 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTwoSegments() throws Exception {
  ByteBuffer buffer=allocateBuffer(2048);
  try (ChannelProxy channel=new ChannelProxy(writeFile("testTwoSegments",buffer));MmappedRegions regions=MmappedRegions.empty(channel)){
    regions.extend(1024);
    for (int i=0; i < 1024; i++) {
      MmappedRegions.Region region=regions.floor(i);
      assertNotNull(region);
      assertEquals(0,region.bottom());
      assertEquals(1024,region.top());
    }
    regions.extend(2048);
    for (int i=0; i < 2048; i++) {
      MmappedRegions.Region region=regions.floor(i);
      assertNotNull(region);
      if (i < 1024) {
        assertEquals(0,region.bottom());
        assertEquals(1024,region.top());
      }
 else {
        assertEquals(1024,region.bottom());
        assertEquals(2048,region.top());
      }
    }
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.locator.TokenMetadataTest </h4><pre class="type-4 type-5 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTopologyUpdate_RackConsolidation() throws UnknownHostException {
  final InetAddress first=InetAddress.getByName("127.0.0.1");
  final InetAddress second=InetAddress.getByName("127.0.0.6");
  final String DATA_CENTER="datacenter1";
  final String RACK1="rack1";
  final String RACK2="rack2";
  DatabaseDescriptor.setEndpointSnitch(new AbstractEndpointSnitch(){
    @Override public String getRack(    InetAddress endpoint){
      return endpoint.equals(first) ? RACK1 : RACK2;
    }
    @Override public String getDatacenter(    InetAddress endpoint){
      return DATA_CENTER;
    }
    @Override public int compareEndpoints(    InetAddress target,    InetAddress a1,    InetAddress a2){
      return 0;
    }
  }
);
  tmd.updateNormalToken(token(ONE),first);
  tmd.updateNormalToken(token(SIX),second);
  TokenMetadata tokenMetadata=tmd.cloneOnlyTokenMap();
  assertNotNull(tokenMetadata);
  TokenMetadata.Topology topology=tokenMetadata.getTopology();
  assertNotNull(topology);
  Multimap<String,InetAddress> allEndpoints=topology.getDatacenterEndpoints();
  assertNotNull(allEndpoints);
  assertTrue(allEndpoints.size() == 2);
  assertTrue(allEndpoints.containsKey(DATA_CENTER));
  assertTrue(allEndpoints.get(DATA_CENTER).contains(first));
  assertTrue(allEndpoints.get(DATA_CENTER).contains(second));
  Map<String,Multimap<String,InetAddress>> racks=topology.getDatacenterRacks();
  assertNotNull(racks);
  assertTrue(racks.size() == 1);
  assertTrue(racks.containsKey(DATA_CENTER));
  assertTrue(racks.get(DATA_CENTER).size() == 2);
  assertTrue(racks.get(DATA_CENTER).containsKey(RACK1));
  assertTrue(racks.get(DATA_CENTER).containsKey(RACK2));
  assertTrue(racks.get(DATA_CENTER).get(RACK1).contains(first));
  assertTrue(racks.get(DATA_CENTER).get(RACK2).contains(second));
  DatabaseDescriptor.setEndpointSnitch(new AbstractEndpointSnitch(){
    @Override public String getRack(    InetAddress endpoint){
      return RACK1;
    }
    @Override public String getDatacenter(    InetAddress endpoint){
      return DATA_CENTER;
    }
    @Override public int compareEndpoints(    InetAddress target,    InetAddress a1,    InetAddress a2){
      return 0;
    }
  }
);
  tokenMetadata.updateTopology(first);
  tokenMetadata.updateTopology(second);
  allEndpoints=topology.getDatacenterEndpoints();
  assertNotNull(allEndpoints);
  assertTrue(allEndpoints.size() == 2);
  assertTrue(allEndpoints.containsKey(DATA_CENTER));
  assertTrue(allEndpoints.get(DATA_CENTER).contains(first));
  assertTrue(allEndpoints.get(DATA_CENTER).contains(second));
  racks=topology.getDatacenterRacks();
  assertNotNull(racks);
  assertTrue(racks.size() == 1);
  assertTrue(racks.containsKey(DATA_CENTER));
  assertTrue(racks.get(DATA_CENTER).size() == 2);
  assertTrue(racks.get(DATA_CENTER).containsKey(RACK1));
  assertFalse(racks.get(DATA_CENTER).containsKey(RACK2));
  assertTrue(racks.get(DATA_CENTER).get(RACK1).contains(first));
  assertTrue(racks.get(DATA_CENTER).get(RACK1).contains(second));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTopologyUpdate_RackExpansion() throws UnknownHostException {
  final InetAddress first=InetAddress.getByName("127.0.0.1");
  final InetAddress second=InetAddress.getByName("127.0.0.6");
  final String DATA_CENTER="datacenter1";
  final String RACK1="rack1";
  final String RACK2="rack2";
  DatabaseDescriptor.setEndpointSnitch(new AbstractEndpointSnitch(){
    @Override public String getRack(    InetAddress endpoint){
      return RACK1;
    }
    @Override public String getDatacenter(    InetAddress endpoint){
      return DATA_CENTER;
    }
    @Override public int compareEndpoints(    InetAddress target,    InetAddress a1,    InetAddress a2){
      return 0;
    }
  }
);
  tmd.updateNormalToken(token(ONE),first);
  tmd.updateNormalToken(token(SIX),second);
  TokenMetadata tokenMetadata=tmd.cloneOnlyTokenMap();
  assertNotNull(tokenMetadata);
  TokenMetadata.Topology topology=tokenMetadata.getTopology();
  assertNotNull(topology);
  Multimap<String,InetAddress> allEndpoints=topology.getDatacenterEndpoints();
  assertNotNull(allEndpoints);
  assertTrue(allEndpoints.size() == 2);
  assertTrue(allEndpoints.containsKey(DATA_CENTER));
  assertTrue(allEndpoints.get(DATA_CENTER).contains(first));
  assertTrue(allEndpoints.get(DATA_CENTER).contains(second));
  Map<String,Multimap<String,InetAddress>> racks=topology.getDatacenterRacks();
  assertNotNull(racks);
  assertTrue(racks.size() == 1);
  assertTrue(racks.containsKey(DATA_CENTER));
  assertTrue(racks.get(DATA_CENTER).size() == 2);
  assertTrue(racks.get(DATA_CENTER).containsKey(RACK1));
  assertFalse(racks.get(DATA_CENTER).containsKey(RACK2));
  assertTrue(racks.get(DATA_CENTER).get(RACK1).contains(first));
  assertTrue(racks.get(DATA_CENTER).get(RACK1).contains(second));
  DatabaseDescriptor.setEndpointSnitch(new AbstractEndpointSnitch(){
    @Override public String getRack(    InetAddress endpoint){
      return endpoint.equals(first) ? RACK1 : RACK2;
    }
    @Override public String getDatacenter(    InetAddress endpoint){
      return DATA_CENTER;
    }
    @Override public int compareEndpoints(    InetAddress target,    InetAddress a1,    InetAddress a2){
      return 0;
    }
  }
);
  tokenMetadata.updateTopology();
  allEndpoints=topology.getDatacenterEndpoints();
  assertNotNull(allEndpoints);
  assertTrue(allEndpoints.size() == 2);
  assertTrue(allEndpoints.containsKey(DATA_CENTER));
  assertTrue(allEndpoints.get(DATA_CENTER).contains(first));
  assertTrue(allEndpoints.get(DATA_CENTER).contains(second));
  racks=topology.getDatacenterRacks();
  assertNotNull(racks);
  assertTrue(racks.size() == 1);
  assertTrue(racks.containsKey(DATA_CENTER));
  assertTrue(racks.get(DATA_CENTER).size() == 2);
  assertTrue(racks.get(DATA_CENTER).containsKey(RACK1));
  assertTrue(racks.get(DATA_CENTER).containsKey(RACK2));
  assertTrue(racks.get(DATA_CENTER).get(RACK1).contains(first));
  assertTrue(racks.get(DATA_CENTER).get(RACK2).contains(second));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.repair.ValidatorTest </h4><pre class="type-7 type-13 type-15 type-4 type-5 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidatorFailed() throws Throwable {
  Range<Token> range=new Range<>(partitioner.getMinimumToken(),partitioner.getRandomToken());
  final RepairJobDesc desc=new RepairJobDesc(UUID.randomUUID(),UUID.randomUUID(),keyspace,columnFamily,Arrays.asList(range));
  final SimpleCondition lock=new SimpleCondition();
  MessagingService.instance().addMessageSink(new IMessageSink(){
    public boolean allowOutgoingMessage(    MessageOut message,    int id,    InetAddress to){
      try {
        if (message.verb == MessagingService.Verb.REPAIR_MESSAGE) {
          RepairMessage m=(RepairMessage)message.payload;
          assertEquals(RepairMessage.Type.VALIDATION_COMPLETE,m.messageType);
          assertEquals(desc,m.desc);
          assertFalse(((ValidationComplete)m).success());
          assertNull(((ValidationComplete)m).trees);
        }
      }
  finally {
        lock.signalAll();
      }
      return false;
    }
    public boolean allowIncomingMessage(    MessageIn message,    int id){
      return false;
    }
  }
);
  InetAddress remote=InetAddress.getByName("127.0.0.2");
  Validator validator=new Validator(desc,remote,0);
  validator.fail();
  if (!lock.isSignaled())   lock.await();
}

</code></pre>

<br>
<pre class="type-7 type-13 type-4 type-5 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValidatorComplete() throws Throwable {
  Range<Token> range=new Range<>(partitioner.getMinimumToken(),partitioner.getRandomToken());
  final RepairJobDesc desc=new RepairJobDesc(UUID.randomUUID(),UUID.randomUUID(),keyspace,columnFamily,Arrays.asList(range));
  final SimpleCondition lock=new SimpleCondition();
  MessagingService.instance().addMessageSink(new IMessageSink(){
    public boolean allowOutgoingMessage(    MessageOut message,    int id,    InetAddress to){
      try {
        if (message.verb == MessagingService.Verb.REPAIR_MESSAGE) {
          RepairMessage m=(RepairMessage)message.payload;
          assertEquals(RepairMessage.Type.VALIDATION_COMPLETE,m.messageType);
          assertEquals(desc,m.desc);
          assertTrue(((ValidationComplete)m).success());
          assertNotNull(((ValidationComplete)m).trees);
        }
      }
  finally {
        lock.signalAll();
      }
      return false;
    }
    public boolean allowIncomingMessage(    MessageIn message,    int id){
      return false;
    }
  }
);
  InetAddress remote=InetAddress.getByName("127.0.0.2");
  ColumnFamilyStore cfs=Keyspace.open(keyspace).getColumnFamilyStore(columnFamily);
  Validator validator=new Validator(desc,remote,0);
  MerkleTrees tree=new MerkleTrees(partitioner);
  tree.addMerkleTrees((int)Math.pow(2,15),validator.desc.ranges);
  validator.prepare(cfs,tree);
  assertTrue(tree.size() > 1);
  Token mid=partitioner.midpoint(range.left,range.right);
  validator.add(EmptyIterators.unfilteredRow(cfs.metadata,new BufferDecoratedKey(mid,ByteBufferUtil.bytes("inconceivable!")),false));
  validator.complete();
  Token min=tree.partitioner().getMinimumToken();
  assertNotNull(tree.hash(new Range<>(min,min)));
  if (!lock.isSignaled())   lock.await();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.schema.DefsTest </h4><pre class="type-7 type-12 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies values related to public fields.
"></span><br>
@Test public void dropKSUnflushed() throws ConfigurationException {
  final KeyspaceMetadata ks=Schema.instance.getKSMetaData(KEYSPACE3);
  assertNotNull(ks);
  final CFMetaData cfm=ks.tables.getNullable(TABLE1);
  assertNotNull(cfm);
  for (int i=0; i < 100; i++)   QueryProcessor.executeInternal(String.format("INSERT INTO %s.%s (key, name, val) VALUES (?, ?, ?)",KEYSPACE3,TABLE1),"dropKs","col" + i,"anyvalue");
  MigrationManager.announceKeyspaceDrop(ks.name);
  assertNull(Schema.instance.getKSMetaData(ks.name));
}

</code></pre>

<br>
<pre class="type-7 type-5 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addNewTable() throws ConfigurationException {
  final String ksName=KEYSPACE1;
  final String tableName="anewtable";
  KeyspaceMetadata original=Schema.instance.getKSMetaData(ksName);
  CFMetaData cfm=addTestTable(original.name,tableName,"A New Table");
  assertFalse(Schema.instance.getKSMetaData(ksName).tables.get(cfm.cfName).isPresent());
  MigrationManager.announceNewColumnFamily(cfm);
  assertTrue(Schema.instance.getKSMetaData(ksName).tables.get(cfm.cfName).isPresent());
  assertEquals(cfm,Schema.instance.getKSMetaData(ksName).tables.get(cfm.cfName).get());
  QueryProcessor.executeInternal(String.format("INSERT INTO %s.%s (key, col, val) VALUES (?, ?, ?)",ksName,tableName),"key0","col0","val0");
  ColumnFamilyStore cfs=Keyspace.open(ksName).getColumnFamilyStore(tableName);
  assertNotNull(cfs);
  cfs.forceBlockingFlush();
  UntypedResultSet rows=QueryProcessor.executeInternal(String.format("SELECT * FROM %s.%s",ksName,tableName));
  assertRows(rows,row("key0","col0","val0"));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dropKS() throws ConfigurationException {
  final KeyspaceMetadata ks=Schema.instance.getKSMetaData(KEYSPACE1);
  assertNotNull(ks);
  final CFMetaData cfm=ks.tables.getNullable(TABLE2);
  assertNotNull(cfm);
  for (int i=0; i < 100; i++)   QueryProcessor.executeInternal(String.format("INSERT INTO %s.%s (key, name, val) VALUES (?, ?, ?)",KEYSPACE1,TABLE2),"dropKs","col" + i,"anyvalue");
  ColumnFamilyStore cfs=Keyspace.open(cfm.ksName).getColumnFamilyStore(cfm.cfName);
  assertNotNull(cfs);
  cfs.forceBlockingFlush();
  assertTrue(!cfs.getDirectories().sstableLister(Directories.OnTxnErr.THROW).list().isEmpty());
  MigrationManager.announceKeyspaceDrop(ks.name);
  assertNull(Schema.instance.getKSMetaData(ks.name));
  boolean success=true;
  try {
    QueryProcessor.executeInternal(String.format("INSERT INTO %s.%s (key, name, val) VALUES (?, ?, ?)",KEYSPACE1,TABLE2),"dropKs","col0","anyvalue");
  }
 catch (  Throwable th) {
    success=false;
  }
  assertFalse("This mutation should have failed since the KS no longer exists.",success);
  boolean threw=false;
  try {
    Keyspace.open(ks.name);
  }
 catch (  Throwable th) {
    threw=true;
  }
  assertTrue(threw);
}

</code></pre>

<br>
<pre class="type-7 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addNewKS() throws ConfigurationException {
  CFMetaData cfm=addTestTable("newkeyspace1","newstandard1","A new cf for a new ks");
  KeyspaceMetadata newKs=KeyspaceMetadata.create(cfm.ksName,KeyspaceParams.simple(5),Tables.of(cfm));
  MigrationManager.announceNewKeyspace(newKs);
  assertNotNull(Schema.instance.getKSMetaData(cfm.ksName));
  assertEquals(Schema.instance.getKSMetaData(cfm.ksName),newKs);
  QueryProcessor.executeInternal("INSERT INTO newkeyspace1.newstandard1 (key, col, val) VALUES (?, ?, ?)","key0","col0","val0");
  ColumnFamilyStore store=Keyspace.open(cfm.ksName).getColumnFamilyStore(cfm.cfName);
  assertNotNull(store);
  store.forceBlockingFlush();
  UntypedResultSet rows=QueryProcessor.executeInternal("SELECT * FROM newkeyspace1.newstandard1");
  assertRows(rows,row("key0","col0","val0"));
}

</code></pre>

<br>
<pre class="type-7 type-5 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createEmptyKsAddNewCf() throws ConfigurationException {
  assertNull(Schema.instance.getKSMetaData(EMPTY_KEYSPACE));
  KeyspaceMetadata newKs=KeyspaceMetadata.create(EMPTY_KEYSPACE,KeyspaceParams.simple(5));
  MigrationManager.announceNewKeyspace(newKs);
  assertNotNull(Schema.instance.getKSMetaData(EMPTY_KEYSPACE));
  String tableName="added_later";
  CFMetaData newCf=addTestTable(EMPTY_KEYSPACE,tableName,"A new CF to add to an empty KS");
  assertFalse(Schema.instance.getKSMetaData(newKs.name).tables.get(newCf.cfName).isPresent());
  MigrationManager.announceNewColumnFamily(newCf);
  assertTrue(Schema.instance.getKSMetaData(newKs.name).tables.get(newCf.cfName).isPresent());
  assertEquals(Schema.instance.getKSMetaData(newKs.name).tables.get(newCf.cfName).get(),newCf);
  QueryProcessor.executeInternal(String.format("INSERT INTO %s.%s (key, col, val) VALUES (?, ?, ?)",EMPTY_KEYSPACE,tableName),"key0","col0","val0");
  ColumnFamilyStore cfs=Keyspace.open(newKs.name).getColumnFamilyStore(newCf.cfName);
  assertNotNull(cfs);
  cfs.forceBlockingFlush();
  UntypedResultSet rows=QueryProcessor.executeInternal(String.format("SELECT * FROM %s.%s",EMPTY_KEYSPACE,tableName));
  assertRows(rows,row("key0","col0","val0"));
}

</code></pre>

<br>
<pre class="type-6 type-7 type-4 type-5 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCFMetaDataApply() throws ConfigurationException {
  CFMetaData cfm=CFMetaData.Builder.create(KEYSPACE1,"TestApplyCFM_CF").addPartitionKey("keys",BytesType.instance).addClusteringColumn("col",BytesType.instance).build();
  for (int i=0; i < 5; i++) {
    ByteBuffer name=ByteBuffer.wrap(new byte[]{(byte)i});
    cfm.addColumnDefinition(ColumnDefinition.regularDef(cfm,name,BytesType.instance));
  }
  cfm.comment("No comment").readRepairChance(0.5).gcGraceSeconds(100000).compaction(CompactionParams.scts(ImmutableMap.of("min_threshold","500","max_threshold","500")));
  assertNull(cfm.getColumnDefinition(ByteBuffer.wrap(new byte[]{5})));
  CFMetaData cfNew=cfm.copy();
  ColumnDefinition addIndexDef=ColumnDefinition.regularDef(cfm,ByteBuffer.wrap(new byte[]{5}),BytesType.instance);
  cfNew.addColumnDefinition(addIndexDef);
  ColumnDefinition removeIndexDef=ColumnDefinition.regularDef(cfm,ByteBuffer.wrap(new byte[]{0}),BytesType.instance);
  assertTrue(cfNew.removeColumnDefinition(removeIndexDef));
  cfm.apply(cfNew);
  for (int i=1; i < cfm.allColumns().size(); i++)   assertNotNull(cfm.getColumnDefinition(ByteBuffer.wrap(new byte[]{1})));
  assertNull(cfm.getColumnDefinition(ByteBuffer.wrap(new byte[]{0})));
  assertNotNull(cfm.getColumnDefinition(ByteBuffer.wrap(new byte[]{5})));
}

</code></pre>

<br>
<pre class="type-7 type-5 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateKeyspace() throws ConfigurationException {
  CFMetaData cf=addTestTable("UpdatedKeyspace","AddedStandard1","A new cf for a new ks");
  KeyspaceMetadata oldKs=KeyspaceMetadata.create(cf.ksName,KeyspaceParams.simple(5),Tables.of(cf));
  MigrationManager.announceNewKeyspace(oldKs);
  assertNotNull(Schema.instance.getKSMetaData(cf.ksName));
  assertEquals(Schema.instance.getKSMetaData(cf.ksName),oldKs);
  KeyspaceMetadata newBadKs2=KeyspaceMetadata.create(cf.ksName + "trash",KeyspaceParams.simple(4));
  try {
    MigrationManager.announceKeyspaceUpdate(newBadKs2);
    throw new AssertionError("Should not have been able to update a KS with an invalid KS name.");
  }
 catch (  ConfigurationException ex) {
  }
  Map<String,String> replicationMap=new HashMap<>();
  replicationMap.put(ReplicationParams.CLASS,OldNetworkTopologyStrategy.class.getName());
  replicationMap.put("replication_factor","1");
  KeyspaceMetadata newKs=KeyspaceMetadata.create(cf.ksName,KeyspaceParams.create(true,replicationMap));
  MigrationManager.announceKeyspaceUpdate(newKs);
  KeyspaceMetadata newFetchedKs=Schema.instance.getKSMetaData(newKs.name);
  assertEquals(newFetchedKs.params.replication.klass,newKs.params.replication.klass);
  assertFalse(newFetchedKs.params.replication.klass.equals(oldKs.params.replication.klass));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.security.JKSKeyProviderTest </h4><pre class="type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void getSecretKey_WithoutKeyPassword() throws IOException {
  tdeOptions.remove("key_password");
  Assert.assertNotNull(jksKeyProvider.getSecretKey(tdeOptions.key_alias));
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void getSecretKey_WithKeyPassword() throws IOException {
  Assert.assertNotNull(jksKeyProvider.getSecretKey(tdeOptions.key_alias));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.service.ClientWarningsTest </h4><pre class="type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testLargeBatchWithProtoV2() throws Exception {
  createTable("CREATE TABLE %s (pk int PRIMARY KEY, v text)");
  try (SimpleClient client=new SimpleClient(nativeAddr.getHostAddress(),nativePort,Server.VERSION_3)){
    client.connect(false);
    QueryMessage query=new QueryMessage(createBatchStatement(DatabaseDescriptor.getBatchSizeWarnThreshold()),QueryOptions.DEFAULT);
    Message.Response resp=client.execute(query);
    assertNull(resp.getWarnings());
  }
 }

</code></pre>

<br>
<pre class="type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnloggedBatchWithProtoV4() throws Exception {
  createTable("CREATE TABLE %s (pk int PRIMARY KEY, v text)");
  try (SimpleClient client=new SimpleClient(nativeAddr.getHostAddress(),nativePort,Server.VERSION_4)){
    client.connect(false);
    QueryMessage query=new QueryMessage(createBatchStatement2(1),QueryOptions.DEFAULT);
    Message.Response resp=client.execute(query);
    assertNull(resp.getWarnings());
    query=new QueryMessage(createBatchStatement2(DatabaseDescriptor.getBatchSizeWarnThreshold()),QueryOptions.DEFAULT);
    resp=client.execute(query);
    assertEquals(1,resp.getWarnings().size());
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.service.DataResolverTest </h4><pre class="type-7 type-4 type-5 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveDeletedCollection(){
  ReadCommand cmd=Util.cmd(cfs2,dk).withNowInSeconds(nowInSec).build();
  DataResolver resolver=new DataResolver(ks,cmd,ConsistencyLevel.ALL,2);
  long[] ts={100,200};
  Row.Builder builder=BTreeRow.unsortedBuilder(nowInSec);
  builder.newRow(Clustering.EMPTY);
  builder.addComplexDeletion(m,new DeletionTime(ts[0] - 1,nowInSec));
  builder.addCell(mapCell(0,0,ts[0]));
  InetAddress peer1=peer();
  resolver.preprocess(readResponseMessage(peer1,iter(PartitionUpdate.singleRowUpdate(cfm2,dk,builder.build())),cmd));
  builder.newRow(Clustering.EMPTY);
  DeletionTime expectedCmplxDelete=new DeletionTime(ts[1] - 1,nowInSec);
  builder.addComplexDeletion(m,expectedCmplxDelete);
  InetAddress peer2=peer();
  resolver.preprocess(readResponseMessage(peer2,iter(PartitionUpdate.singleRowUpdate(cfm2,dk,builder.build())),cmd));
  try (PartitionIterator data=resolver.resolve()){
    assertFalse(data.hasNext());
  }
   MessageOut<Mutation> msg;
  msg=getSentMessage(peer1);
  Iterator<Row> rowIter=msg.payload.getPartitionUpdate(cfm2.cfId).iterator();
  assertTrue(rowIter.hasNext());
  Row row=rowIter.next();
  assertFalse(rowIter.hasNext());
  ComplexColumnData cd=row.getComplexColumnData(m);
  assertEquals(Collections.emptySet(),Sets.newHashSet(cd));
  assertEquals(expectedCmplxDelete,cd.complexDeletion());
  Assert.assertNull(messageRecorder.sent.get(peer2));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveNewCollectionOverwritingDeleted(){
  ReadCommand cmd=Util.cmd(cfs2,dk).withNowInSeconds(nowInSec).build();
  DataResolver resolver=new DataResolver(ks,cmd,ConsistencyLevel.ALL,2);
  long[] ts={100,200};
  Row.Builder builder=BTreeRow.unsortedBuilder(nowInSec);
  builder.newRow(Clustering.EMPTY);
  builder.addComplexDeletion(m,new DeletionTime(ts[0] - 1,nowInSec));
  InetAddress peer1=peer();
  resolver.preprocess(readResponseMessage(peer1,iter(PartitionUpdate.singleRowUpdate(cfm2,dk,builder.build())),cmd));
  builder.newRow(Clustering.EMPTY);
  DeletionTime expectedCmplxDelete=new DeletionTime(ts[1] - 1,nowInSec);
  builder.addComplexDeletion(m,expectedCmplxDelete);
  Cell expectedCell=mapCell(1,1,ts[1]);
  builder.addCell(expectedCell);
  InetAddress peer2=peer();
  resolver.preprocess(readResponseMessage(peer2,iter(PartitionUpdate.singleRowUpdate(cfm2,dk,builder.build())),cmd));
  try (PartitionIterator data=resolver.resolve();RowIterator rows=Iterators.getOnlyElement(data)){
    Row row=Iterators.getOnlyElement(rows);
    assertColumns(row,"m");
    ComplexColumnData cd=row.getComplexColumnData(m);
    assertEquals(Collections.singleton(expectedCell),Sets.newHashSet(cd));
  }
   MessageOut<Mutation> msg;
  msg=getSentMessage(peer1);
  Row row=Iterators.getOnlyElement(msg.payload.getPartitionUpdate(cfm2.cfId).iterator());
  ComplexColumnData cd=row.getComplexColumnData(m);
  assertEquals(Collections.singleton(expectedCell),Sets.newHashSet(cd));
  assertEquals(expectedCmplxDelete,cd.complexDeletion());
  Assert.assertNull(messageRecorder.sent.get(peer2));
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveNewCollection(){
  ReadCommand cmd=Util.cmd(cfs2,dk).withNowInSeconds(nowInSec).build();
  DataResolver resolver=new DataResolver(ks,cmd,ConsistencyLevel.ALL,2);
  long[] ts={100,200};
  Row.Builder builder=BTreeRow.unsortedBuilder(nowInSec);
  builder.newRow(Clustering.EMPTY);
  DeletionTime expectedCmplxDelete=new DeletionTime(ts[0] - 1,nowInSec);
  builder.addComplexDeletion(m,expectedCmplxDelete);
  Cell expectedCell=mapCell(0,0,ts[0]);
  builder.addCell(expectedCell);
  InetAddress peer1=peer();
  resolver.preprocess(readResponseMessage(peer1,iter(PartitionUpdate.singleRowUpdate(cfm2,dk,builder.build())),cmd));
  InetAddress peer2=peer();
  resolver.preprocess(readResponseMessage(peer2,iter(PartitionUpdate.emptyUpdate(cfm2,dk))));
  try (PartitionIterator data=resolver.resolve();RowIterator rows=Iterators.getOnlyElement(data)){
    Row row=Iterators.getOnlyElement(rows);
    assertColumns(row,"m");
    ComplexColumnData cd=row.getComplexColumnData(m);
    assertEquals(Collections.singleton(expectedCell),Sets.newHashSet(cd));
  }
   Assert.assertNull(messageRecorder.sent.get(peer1));
  MessageOut<Mutation> msg;
  msg=getSentMessage(peer2);
  Iterator<Row> rowIter=msg.payload.getPartitionUpdate(cfm2.cfId).iterator();
  assertTrue(rowIter.hasNext());
  Row row=rowIter.next();
  assertFalse(rowIter.hasNext());
  ComplexColumnData cd=row.getComplexColumnData(m);
  assertEquals(Sets.newHashSet(expectedCell),Sets.newHashSet(cd));
  assertEquals(expectedCmplxDelete,cd.complexDeletion());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-5 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveComplexDelete(){
  ReadCommand cmd=Util.cmd(cfs2,dk).withNowInSeconds(nowInSec).build();
  DataResolver resolver=new DataResolver(ks,cmd,ConsistencyLevel.ALL,2);
  long[] ts={100,200};
  Row.Builder builder=BTreeRow.unsortedBuilder(nowInSec);
  builder.newRow(Clustering.EMPTY);
  builder.addComplexDeletion(m,new DeletionTime(ts[0] - 1,nowInSec));
  builder.addCell(mapCell(0,0,ts[0]));
  InetAddress peer1=peer();
  resolver.preprocess(readResponseMessage(peer1,iter(PartitionUpdate.singleRowUpdate(cfm2,dk,builder.build())),cmd));
  builder.newRow(Clustering.EMPTY);
  DeletionTime expectedCmplxDelete=new DeletionTime(ts[1] - 1,nowInSec);
  builder.addComplexDeletion(m,expectedCmplxDelete);
  Cell expectedCell=mapCell(1,1,ts[1]);
  builder.addCell(expectedCell);
  InetAddress peer2=peer();
  resolver.preprocess(readResponseMessage(peer2,iter(PartitionUpdate.singleRowUpdate(cfm2,dk,builder.build())),cmd));
  try (PartitionIterator data=resolver.resolve();RowIterator rows=Iterators.getOnlyElement(data)){
    Row row=Iterators.getOnlyElement(rows);
    assertColumns(row,"m");
    Assert.assertNull(row.getCell(m,CellPath.create(bb(0))));
    Assert.assertNotNull(row.getCell(m,CellPath.create(bb(1))));
  }
   MessageOut<Mutation> msg;
  msg=getSentMessage(peer1);
  Iterator<Row> rowIter=msg.payload.getPartitionUpdate(cfm2.cfId).iterator();
  assertTrue(rowIter.hasNext());
  Row row=rowIter.next();
  assertFalse(rowIter.hasNext());
  ComplexColumnData cd=row.getComplexColumnData(m);
  assertEquals(Collections.singleton(expectedCell),Sets.newHashSet(cd));
  assertEquals(expectedCmplxDelete,cd.complexDeletion());
  Assert.assertNull(messageRecorder.sent.get(peer2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.service.EmbeddedCassandraServiceTest </h4><pre class="type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmbeddedCassandraService() throws AuthenticationException, AuthorizationException, InvalidRequestException, UnavailableException, TimedOutException, TException, NotFoundException, CharacterCodingException {
  Cassandra.Client client=getClient();
  client.set_keyspace(KEYSPACE1);
  ByteBuffer key_user_id=ByteBufferUtil.bytes("1");
  long timestamp=System.currentTimeMillis();
  ColumnPath cp=new ColumnPath("Standard1");
  ColumnParent par=new ColumnParent("Standard1");
  cp.column=ByteBufferUtil.bytes("name");
  client.insert(key_user_id,par,new Column(ByteBufferUtil.bytes("name")).setValue(ByteBufferUtil.bytes("Ran")).setTimestamp(timestamp),ConsistencyLevel.ONE);
  ColumnOrSuperColumn got=client.get(key_user_id,cp,ConsistencyLevel.ONE);
  assertNotNull("Got a null ColumnOrSuperColumn",got);
  assertEquals("Ran",ByteBufferUtil.string(got.getColumn().value));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.service.LeaveAndBootstrapTest </h4><pre class="type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStateJumpToBootstrap() throws UnknownHostException {
  StorageService ss=StorageService.instance;
  TokenMetadata tmd=ss.getTokenMetadata();
  tmd.clearUnsafe();
  IPartitioner partitioner=RandomPartitioner.instance;
  VersionedValue.VersionedValueFactory valueFactory=new VersionedValue.VersionedValueFactory(partitioner);
  ArrayList<Token> endpointTokens=new ArrayList<Token>();
  ArrayList<Token> keyTokens=new ArrayList<Token>();
  List<InetAddress> hosts=new ArrayList<InetAddress>();
  List<UUID> hostIds=new ArrayList<UUID>();
  Util.createInitialRing(ss,partitioner,endpointTokens,keyTokens,hosts,hostIds,7);
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.leaving(Collections.singleton(endpointTokens.get(2))));
  assertTrue(tmd.isMember(hosts.get(2)));
  assertTrue(tmd.isLeaving(hosts.get(2)));
  assertTrue(tmd.getBootstrapTokens().isEmpty());
  Gossiper.instance.injectApplicationState(hosts.get(2),ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(4))));
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.bootstrapping(Collections.<Token>singleton(keyTokens.get(4))));
  assertFalse(tmd.isMember(hosts.get(2)));
  assertFalse(tmd.isLeaving(hosts.get(2)));
  assertEquals(hosts.get(2),tmd.getBootstrapTokens().get(keyTokens.get(4)));
  Gossiper.instance.injectApplicationState(hosts.get(3),ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(1))));
  ss.onChange(hosts.get(3),ApplicationState.STATUS,valueFactory.bootstrapping(Collections.<Token>singleton(keyTokens.get(1))));
  assertFalse(tmd.isMember(hosts.get(3)));
  assertFalse(tmd.isLeaving(hosts.get(3)));
  assertEquals(hosts.get(2),tmd.getBootstrapTokens().get(keyTokens.get(4)));
  assertEquals(hosts.get(3),tmd.getBootstrapTokens().get(keyTokens.get(1)));
  Gossiper.instance.injectApplicationState(hosts.get(2),ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(3))));
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.bootstrapping(Collections.<Token>singleton(keyTokens.get(3))));
  assertFalse(tmd.isMember(hosts.get(2)));
  assertFalse(tmd.isLeaving(hosts.get(2)));
  assertEquals(hosts.get(2),tmd.getBootstrapTokens().get(keyTokens.get(3)));
  assertNull(tmd.getBootstrapTokens().get(keyTokens.get(4)));
  assertEquals(hosts.get(3),tmd.getBootstrapTokens().get(keyTokens.get(1)));
  Gossiper.instance.injectApplicationState(hosts.get(3),ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(2))));
  Gossiper.instance.injectApplicationState(hosts.get(2),ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(3))));
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.normal(Collections.singleton(keyTokens.get(3))));
  ss.onChange(hosts.get(3),ApplicationState.STATUS,valueFactory.normal(Collections.singleton(keyTokens.get(2))));
  assertTrue(tmd.isMember(hosts.get(2)));
  assertFalse(tmd.isLeaving(hosts.get(2)));
  assertEquals(keyTokens.get(3),tmd.getToken(hosts.get(2)));
  assertTrue(tmd.isMember(hosts.get(3)));
  assertFalse(tmd.isLeaving(hosts.get(3)));
  assertEquals(keyTokens.get(2),tmd.getToken(hosts.get(3)));
  assertTrue(tmd.getBootstrapTokens().isEmpty());
}

</code></pre>

<br>
<pre class="type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStateJumpToLeaving() throws UnknownHostException {
  StorageService ss=StorageService.instance;
  TokenMetadata tmd=ss.getTokenMetadata();
  tmd.clearUnsafe();
  IPartitioner partitioner=RandomPartitioner.instance;
  VersionedValue.VersionedValueFactory valueFactory=new VersionedValue.VersionedValueFactory(partitioner);
  ArrayList<Token> endpointTokens=new ArrayList<Token>();
  ArrayList<Token> keyTokens=new ArrayList<Token>();
  List<InetAddress> hosts=new ArrayList<InetAddress>();
  List<UUID> hostIds=new ArrayList<UUID>();
  Util.createInitialRing(ss,partitioner,endpointTokens,keyTokens,hosts,hostIds,6);
  Gossiper.instance.injectApplicationState(hosts.get(2),ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(0))));
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.leaving(Collections.singleton(keyTokens.get(0))));
  assertEquals(keyTokens.get(0),tmd.getToken(hosts.get(2)));
  assertTrue(tmd.isLeaving(hosts.get(2)));
  assertNull(tmd.getEndpoint(endpointTokens.get(2)));
  Gossiper.instance.injectApplicationState(hosts.get(2),ApplicationState.TOKENS,valueFactory.tokens(Collections.singleton(keyTokens.get(1))));
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.bootstrapping(Collections.<Token>singleton(keyTokens.get(1))));
  assertFalse(tmd.isLeaving(hosts.get(2)));
  assertEquals(1,tmd.getBootstrapTokens().size());
  assertEquals(hosts.get(2),tmd.getBootstrapTokens().get(keyTokens.get(1)));
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.leaving(Collections.singleton(keyTokens.get(1))));
  assertEquals(hosts.get(2),tmd.getEndpoint(keyTokens.get(1)));
  assertTrue(tmd.isLeaving(hosts.get(2)));
  assertTrue(tmd.getBootstrapTokens().isEmpty());
  ss.onChange(hosts.get(2),ApplicationState.STATUS,valueFactory.left(Collections.singleton(keyTokens.get(1)),Gossiper.computeExpireTime()));
  assertFalse(tmd.isMember(hosts.get(2)));
  assertFalse(tmd.isLeaving(hosts.get(2)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.streaming.StreamTransferTaskTest </h4><pre class="type-7 type-4 type-5 type-2 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScheduleTimeout() throws Exception {
  String ks=KEYSPACE1;
  String cf="Standard1";
  InetAddress peer=FBUtilities.getBroadcastAddress();
  StreamSession session=new StreamSession(peer,peer,null,0,true,false);
  ColumnFamilyStore cfs=Keyspace.open(ks).getColumnFamilyStore(cf);
  for (int i=0; i < 2; i++) {
    SchemaLoader.insertData(ks,cf,i,1);
    cfs.forceBlockingFlush();
  }
  StreamTransferTask task=new StreamTransferTask(session,cfs.metadata.cfId);
  for (  SSTableReader sstable : cfs.getLiveSSTables()) {
    List<Range<Token>> ranges=new ArrayList<>();
    ranges.add(new Range<>(sstable.first.getToken(),sstable.last.getToken()));
    task.addTransferFile(sstable.selfRef(),1,sstable.getPositionsForRanges(ranges),0);
  }
  assertEquals(2,task.getTotalNumberOfFiles());
  Future f=task.scheduleTimeout(0,0,TimeUnit.NANOSECONDS);
  f.get();
  f=task.scheduleTimeout(1,10,TimeUnit.MILLISECONDS);
  task.complete(1);
  try {
    f.get();
    Assert.assertTrue(false);
  }
 catch (  CancellationException ex) {
  }
  assertEquals(StreamSession.State.WAIT_COMPLETE,session.state());
  assertNull(task.scheduleTimeout(1,1,TimeUnit.SECONDS));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.triggers.TriggerExecutorTest </h4><pre class="type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void sameKeySameCfPartialRowMutations() throws ConfigurationException, InvalidRequestException {
  CFMetaData metadata=makeCfMetaData("ks1","cf1",TriggerMetadata.create("test",SameKeySameCfPartialTrigger.class.getName()));
  PartitionUpdate cf1=makeCf(metadata,"k1","k1v1",null);
  PartitionUpdate cf2=makeCf(metadata,"k2","k2v1",null);
  Mutation rm1=new Mutation("ks1",cf1.partitionKey()).add(cf1);
  Mutation rm2=new Mutation("ks1",cf2.partitionKey()).add(cf2);
  List<? extends IMutation> tmutations=new ArrayList<>(TriggerExecutor.instance.execute(Arrays.asList(rm1,rm2)));
  assertEquals(2,tmutations.size());
  Collections.sort(tmutations,new RmComparator());
  List<PartitionUpdate> mutatedCFs=new ArrayList<>(tmutations.get(0).getPartitionUpdates());
  assertEquals(1,mutatedCFs.size());
  Row row=mutatedCFs.get(0).iterator().next();
  assertEquals(bytes("k1v1"),row.getCell(metadata.getColumnDefinition(bytes("c1"))).value());
  assertNull(row.getCell(metadata.getColumnDefinition(bytes("c2"))));
  mutatedCFs=new ArrayList<>(tmutations.get(1).getPartitionUpdates());
  assertEquals(1,mutatedCFs.size());
  row=mutatedCFs.get(0).iterator().next();
  assertEquals(bytes("k2v1"),row.getCell(metadata.getColumnDefinition(bytes("c1"))).value());
  assertEquals(bytes("trigger"),row.getCell(metadata.getColumnDefinition(bytes("c2"))).value());
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void sameKeyDifferentKsRowMutations() throws ConfigurationException, InvalidRequestException {
  CFMetaData metadata=makeCfMetaData("ks1","cf1",TriggerMetadata.create("test",SameKeyDifferentKsTrigger.class.getName()));
  PartitionUpdate cf1=makeCf(metadata,"k1","k1v1",null);
  PartitionUpdate cf2=makeCf(metadata,"k2","k2v1",null);
  Mutation rm1=new Mutation("ks1",cf1.partitionKey()).add(cf1);
  Mutation rm2=new Mutation("ks1",cf2.partitionKey()).add(cf2);
  List<? extends IMutation> tmutations=new ArrayList<>(TriggerExecutor.instance.execute(Arrays.asList(rm1,rm2)));
  assertEquals(4,tmutations.size());
  Collections.sort(tmutations,new RmComparator());
  List<PartitionUpdate> mutatedCFs=new ArrayList<>(tmutations.get(0).getPartitionUpdates());
  assertEquals(1,mutatedCFs.size());
  Row row=mutatedCFs.get(0).iterator().next();
  assertEquals(bytes("k1v1"),row.getCell(metadata.getColumnDefinition(bytes("c1"))).value());
  assertNull(row.getCell(metadata.getColumnDefinition(bytes("c2"))));
  mutatedCFs=new ArrayList<>(tmutations.get(1).getPartitionUpdates());
  assertEquals(1,mutatedCFs.size());
  row=mutatedCFs.get(0).iterator().next();
  assertEquals(bytes("k2v1"),row.getCell(metadata.getColumnDefinition(bytes("c1"))).value());
  assertNull(row.getCell(metadata.getColumnDefinition(bytes("c2"))));
  mutatedCFs=new ArrayList<>(tmutations.get(2).getPartitionUpdates());
  assertEquals(1,mutatedCFs.size());
  row=mutatedCFs.get(0).iterator().next();
  assertNull(row.getCell(metadata.getColumnDefinition(bytes("c1"))));
  assertEquals(bytes("trigger"),row.getCell(metadata.getColumnDefinition(bytes("c2"))).value());
  mutatedCFs=new ArrayList<>(tmutations.get(3).getPartitionUpdates());
  assertEquals(1,mutatedCFs.size());
  row=mutatedCFs.get(0).iterator().next();
  assertNull(row.getCell(metadata.getColumnDefinition(bytes("c1"))));
  assertEquals(bytes("trigger"),row.getCell(metadata.getColumnDefinition(bytes("c2"))).value());
}

</code></pre>

<br>
<pre class="type-7 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void noTriggerMutations() throws ConfigurationException, InvalidRequestException {
  CFMetaData metadata=makeCfMetaData("ks1","cf1",TriggerMetadata.create("test",NoOpTrigger.class.getName()));
  Mutation rm=new Mutation(makeCf(metadata,"k1","v1",null));
  assertNull(TriggerExecutor.instance.execute(Collections.singletonList(rm)));
}

</code></pre>

<br>
<pre class="type-7 type-13 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void sameKeyDifferentCfRowMutations() throws ConfigurationException, InvalidRequestException {
  CFMetaData metadata=makeCfMetaData("ks1","cf1",TriggerMetadata.create("test",SameKeyDifferentCfTrigger.class.getName()));
  PartitionUpdate cf1=makeCf(metadata,"k1","k1v1",null);
  PartitionUpdate cf2=makeCf(metadata,"k2","k2v1",null);
  Mutation rm1=new Mutation("ks1",cf1.partitionKey()).add(cf1);
  Mutation rm2=new Mutation("ks1",cf2.partitionKey()).add(cf2);
  List<? extends IMutation> tmutations=new ArrayList<>(TriggerExecutor.instance.execute(Arrays.asList(rm1,rm2)));
  assertEquals(2,tmutations.size());
  Collections.sort(tmutations,new RmComparator());
  List<PartitionUpdate> mutatedCFs=new ArrayList<>(tmutations.get(0).getPartitionUpdates());
  assertEquals(2,mutatedCFs.size());
  for (  PartitionUpdate update : mutatedCFs) {
    if (update.metadata().cfName.equals("cf1")) {
      Row row=update.iterator().next();
      assertEquals(bytes("k1v1"),row.getCell(metadata.getColumnDefinition(bytes("c1"))).value());
      assertNull(row.getCell(metadata.getColumnDefinition(bytes("c2"))));
    }
 else {
      Row row=update.iterator().next();
      assertNull(row.getCell(metadata.getColumnDefinition(bytes("c1"))));
      assertEquals(bytes("trigger"),row.getCell(metadata.getColumnDefinition(bytes("c2"))).value());
    }
  }
  mutatedCFs=new ArrayList<>(tmutations.get(1).getPartitionUpdates());
  assertEquals(2,mutatedCFs.size());
  for (  PartitionUpdate update : mutatedCFs) {
    if (update.metadata().cfName.equals("cf1")) {
      Row row=update.iterator().next();
      assertEquals(bytes("k2v1"),row.getCell(metadata.getColumnDefinition(bytes("c1"))).value());
      assertNull(row.getCell(metadata.getColumnDefinition(bytes("c2"))));
    }
 else {
      Row row=update.iterator().next();
      assertNull(row.getCell(metadata.getColumnDefinition(bytes("c1"))));
      assertEquals(bytes("trigger"),row.getCell(metadata.getColumnDefinition(bytes("c2"))).value());
    }
  }
}

</code></pre>

<br>
<pre class="type-7 type-4 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void differentKeyRowMutations() throws ConfigurationException, InvalidRequestException {
  CFMetaData metadata=makeCfMetaData("ks1","cf1",TriggerMetadata.create("test",DifferentKeyTrigger.class.getName()));
  PartitionUpdate cf1=makeCf(metadata,"k1","v1",null);
  Mutation rm=new Mutation("ks1",cf1.partitionKey()).add(cf1);
  List<? extends IMutation> tmutations=new ArrayList<>(TriggerExecutor.instance.execute(Arrays.asList(rm)));
  assertEquals(2,tmutations.size());
  Collections.sort(tmutations,new RmComparator());
  assertEquals(bytes("k1"),tmutations.get(0).key().getKey());
  assertEquals(bytes("otherKey"),tmutations.get(1).key().getKey());
  List<PartitionUpdate> mutatedCFs=new ArrayList<>(tmutations.get(0).getPartitionUpdates());
  assertEquals(1,mutatedCFs.size());
  Row row=mutatedCFs.get(0).iterator().next();
  assertEquals(bytes("v1"),row.getCell(metadata.getColumnDefinition(bytes("c1"))).value());
  assertNull(row.getCell(metadata.getColumnDefinition(bytes("c2"))));
  mutatedCFs=new ArrayList<>(tmutations.get(1).getPartitionUpdates());
  assertEquals(1,mutatedCFs.size());
  row=mutatedCFs.get(0).iterator().next();
  assertEquals(bytes("trigger"),row.getCell(metadata.getColumnDefinition(bytes("c2"))).value());
  assertNull(row.getCell(metadata.getColumnDefinition(bytes("c1"))));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.CoalescingStrategiesTest </h4><pre class="type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDisabledCoalescingStrateg() throws Exception {
  cs=newStrategy("DISABLED",200);
  add(42);
  add(42);
  cs.coalesce(input,output,128);
  assertEquals(2,output.size());
  assertNull(parker.parks.poll());
  clear();
  runBlocker(queueParked);
  add(42);
  add(42);
  release();
  assertEquals(2,output.size());
  assertNull(parker.parks.poll());
}

</code></pre>

<br>
<pre class="type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMovingAverageCoalescingStrategy() throws Exception {
  cs=newStrategy("org.apache.cassandra.utils.CoalescingStrategies$MovingAverageCoalescingStrategy",200);
  add(201);
  add(401);
  cs.coalesce(input,output,128);
  assertEquals(2,output.size());
  assertNull(parker.parks.poll());
  clear();
  runBlocker(queueParked);
  add(601);
  add(801);
  release();
  assertEquals(2,output.size());
  assertNull(parker.parks.poll());
  clear();
  runBlocker(queueParked);
  add(0);
  release();
  assertEquals(1,output.size());
  assertNull(parker.parks.poll());
  clear();
  add(0);
  cs.coalesce(input,output,128);
  assertEquals(1,output.size());
  assertNull(parker.parks.poll());
  clear();
  for (long ii=0; ii < 128; ii++)   add(ii * 1000);
  cs.coalesce(input,output,128);
  assertEquals(output.size(),128);
  assertTrue(parker.parks.isEmpty());
  clear();
  runBlocker(queueParked);
  add(129 * 1000);
  release();
  assertTrue(parker.parks.isEmpty());
  clear();
  cs=newStrategy("MOVINGAVERAGE",200);
  for (long ii=0; ii < 128; ii++)   add(ii * 99);
  cs.coalesce(input,output,128);
  assertEquals(output.size(),128);
  assertTrue(parker.parks.isEmpty());
  clear();
  runBlocker(queueParked);
  add(128 * 99);
  add(129 * 99);
  release();
  assertEquals(2,output.size());
  assertEquals(toNanos(198),parker.parks.poll().longValue());
}

</code></pre>

<br>
<pre class="type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTimeHorizonStrategy() throws Exception {
  cs=newStrategy("TIMEHORIZON",200);
  add(201);
  add(401);
  cs.coalesce(input,output,128);
  assertEquals(2,output.size());
  assertNull(parker.parks.poll());
  clear();
  runBlocker(queueParked);
  add(601);
  add(801);
  release();
  assertEquals(2,output.size());
  assertNull(parker.parks.poll());
  clear();
  runBlocker(queueParked);
  add(0);
  release();
  assertEquals(1,output.size());
  assertNull(parker.parks.poll());
  clear();
  add(0);
  cs.coalesce(input,output,128);
  assertEquals(1,output.size());
  assertNull(parker.parks.poll());
  clear();
  for (long ii=0; ii < 128; ii++)   add(ii * 1000);
  cs.coalesce(input,output,128);
  assertEquals(output.size(),128);
  assertTrue(parker.parks.isEmpty());
  clear();
  runBlocker(queueParked);
  add(129 * 1000);
  release();
  assertTrue(parker.parks.isEmpty());
  clear();
  cs=newStrategy("TIMEHORIZON",200);
  primeTimeHorizonAverage(99);
  clear();
  runBlocker(queueParked);
  add(100000 * 99);
  queueRelease.release();
  parker.parked.acquire();
  add(100001 * 99);
  parker.permits.release();
  fut.get();
  assertEquals(2,output.size());
  assertEquals(toNanos(198),parker.parks.poll().longValue());
  clear();
  add(Integer.MAX_VALUE);
  cs.coalesce(input,output,128);
  assertEquals(1,output.size());
  assertTrue(parker.parks.isEmpty());
  clear();
  add(0);
  cs.coalesce(input,output,128);
  assertEquals(1,output.size());
  assertTrue(parker.parks.isEmpty());
}

</code></pre>

<br>
<pre class="type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFixedCoalescingStrategy() throws Exception {
  cs=newStrategy("FIXED",200);
  add(42);
  add(42);
  cs.coalesce(input,output,128);
  assertEquals(2,output.size());
  assertNull(parker.parks.poll());
  clear();
  runBlocker(queueParked);
  add(42);
  add(42);
  add(42);
  release();
  assertEquals(3,output.size());
  assertEquals(toNanos(200),parker.parks.poll().longValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.MerkleTreeTest </h4><pre class="type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testHashInner(){
  byte[] val=DUMMY;
  byte[] lchildval=hashed(val,3,3,2);
  byte[] rchildval=hashed(val,2,2);
  byte[] fullval=hashed(val,3,3,2,2,2);
  Range<Token> full=new Range<>(tok(-1),tok(-1));
  Range<Token> lchild=new Range<>(tok(-1),tok(4));
  Range<Token> rchild=new Range<>(tok(4),tok(-1));
  Range<Token> invalid=new Range<>(tok(1),tok(-1));
  mt.split(tok(4));
  mt.split(tok(2));
  mt.split(tok(6));
  mt.split(tok(1));
  assertNull(mt.hash(full));
  assertNull(mt.hash(lchild));
  assertNull(mt.hash(rchild));
  assertNull(mt.hash(invalid));
  mt.get(tok(1)).hash(val);
  mt.get(tok(2)).hash(val);
  mt.get(tok(4)).hash(val);
  mt.get(tok(6)).hash(val);
  mt.get(tok(-1)).hash(val);
  assertHashEquals(fullval,mt.hash(full));
  assertHashEquals(lchildval,mt.hash(lchild));
  assertHashEquals(rchildval,mt.hash(rchild));
  assertNull(mt.hash(invalid));
}

</code></pre>

<br>
<pre class="type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testHashPartial(){
  byte[] val=DUMMY;
  byte[] leftval=hashed(val,1,1);
  byte[] partialval=hashed(val,1);
  Range<Token> left=new Range<>(tok(-1),tok(4));
  Range<Token> partial=new Range<>(tok(2),tok(4));
  Range<Token> right=new Range<>(tok(4),tok(-1));
  Range<Token> linvalid=new Range<>(tok(1),tok(4));
  Range<Token> rinvalid=new Range<>(tok(4),tok(6));
  mt.split(tok(4));
  mt.split(tok(2));
  assertNull(mt.hash(left));
  assertNull(mt.hash(partial));
  assertNull(mt.hash(right));
  assertNull(mt.hash(linvalid));
  assertNull(mt.hash(rinvalid));
  mt.get(tok(2)).hash(val);
  mt.get(tok(4)).hash(val);
  mt.get(tok(-1)).hash(val);
  assertHashEquals(leftval,mt.hash(left));
  assertHashEquals(partialval,mt.hash(partial));
  assertHashEquals(val,mt.hash(right));
  assertNull(mt.hash(linvalid));
  assertNull(mt.hash(rinvalid));
}

</code></pre>

<br>
<pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testHashFull(){
  byte[] val=DUMMY;
  Range<Token> range=new Range<>(tok(-1),tok(-1));
  assertNull(mt.hash(range));
  mt.get(tok(-1)).hash(val);
  assertHashEquals(val,mt.hash(range));
}

</code></pre>

<br>
<pre class="type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testHashDegenerate(){
  TOKEN_SCALE=new BigInteger("32");
  byte[] val=DUMMY;
  byte[] childfullval=hashed(val,5,5,4);
  byte[] fullval=hashed(val,5,5,4,3,2,1);
  Range<Token> childfull=new Range<>(tok(-1),tok(4));
  Range<Token> full=new Range<>(tok(-1),tok(-1));
  Range<Token> invalid=new Range<>(tok(4),tok(-1));
  mt=new MerkleTree(partitioner,fullRange(),RECOMMENDED_DEPTH,Integer.MAX_VALUE);
  mt.split(tok(16));
  mt.split(tok(8));
  mt.split(tok(4));
  mt.split(tok(2));
  mt.split(tok(1));
  assertNull(mt.hash(full));
  assertNull(mt.hash(childfull));
  assertNull(mt.hash(invalid));
  mt.get(tok(1)).hash(val);
  mt.get(tok(2)).hash(val);
  mt.get(tok(4)).hash(val);
  mt.get(tok(8)).hash(val);
  mt.get(tok(16)).hash(val);
  mt.get(tok(-1)).hash(val);
  assertHashEquals(fullval,mt.hash(full));
  assertHashEquals(childfullval,mt.hash(childfull));
  assertNull(mt.hash(invalid));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.MerkleTreesTest </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testHashFull(){
  byte[] val=DUMMY;
  Range<Token> range=new Range<>(tok(-1),tok(-1));
  assertNull(mts.hash(range));
  mts.get(tok(-1)).hash(val);
  assertHashEquals(val,mts.hash(range));
}

</code></pre>

<br>
<pre class="type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testHashInner(){
  byte[] val=DUMMY;
  byte[] lchildval=hashed(val,3,3,2);
  byte[] rchildval=hashed(val,2,2);
  byte[] fullval=hashed(val,3,3,2,2,2);
  Range<Token> full=new Range<>(tok(-1),tok(-1));
  Range<Token> lchild=new Range<>(tok(-1),tok(4));
  Range<Token> rchild=new Range<>(tok(4),tok(-1));
  Range<Token> invalid=new Range<>(tok(1),tok(-1));
  mts.split(tok(4));
  mts.split(tok(2));
  mts.split(tok(6));
  mts.split(tok(1));
  assertNull(mts.hash(full));
  assertNull(mts.hash(lchild));
  assertNull(mts.hash(rchild));
  assertNull(mts.hash(invalid));
  mts.get(tok(1)).hash(val);
  mts.get(tok(2)).hash(val);
  mts.get(tok(4)).hash(val);
  mts.get(tok(6)).hash(val);
  mts.get(tok(-1)).hash(val);
  assertHashEquals(fullval,mts.hash(full));
  assertHashEquals(lchildval,mts.hash(lchild));
  assertHashEquals(rchildval,mts.hash(rchild));
  assertNull(mts.hash(invalid));
}

</code></pre>

<br>
<pre class="type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testHashPartial(){
  byte[] val=DUMMY;
  byte[] leftval=hashed(val,1,1);
  byte[] partialval=hashed(val,1);
  Range<Token> left=new Range<>(tok(-1),tok(4));
  Range<Token> partial=new Range<>(tok(2),tok(4));
  Range<Token> right=new Range<>(tok(4),tok(-1));
  Range<Token> linvalid=new Range<>(tok(1),tok(4));
  Range<Token> rinvalid=new Range<>(tok(4),tok(6));
  mts.split(tok(4));
  mts.split(tok(2));
  assertNull(mts.hash(left));
  assertNull(mts.hash(partial));
  assertNull(mts.hash(right));
  assertNull(mts.hash(linvalid));
  assertNull(mts.hash(rinvalid));
  mts.get(tok(2)).hash(val);
  mts.get(tok(4)).hash(val);
  mts.get(tok(-1)).hash(val);
  assertHashEquals(leftval,mts.hash(left));
  assertHashEquals(partialval,mts.hash(partial));
  assertHashEquals(val,mts.hash(right));
  assertNull(mts.hash(linvalid));
  assertNull(mts.hash(rinvalid));
}

</code></pre>

<br>
<pre class="type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testHashDegenerate(){
  TOKEN_SCALE=new BigInteger("32");
  byte[] val=DUMMY;
  byte[] childfullval=hashed(val,5,5,4);
  byte[] fullval=hashed(val,5,5,4,3,2,1);
  Range<Token> childfull=new Range<>(tok(-1),tok(4));
  Range<Token> full=new Range<>(tok(-1),tok(-1));
  Range<Token> invalid=new Range<>(tok(4),tok(-1));
  mts.split(tok(16));
  mts.split(tok(8));
  mts.split(tok(4));
  mts.split(tok(2));
  mts.split(tok(1));
  assertNull(mts.hash(full));
  assertNull(mts.hash(childfull));
  assertNull(mts.hash(invalid));
  mts.get(tok(1)).hash(val);
  mts.get(tok(2)).hash(val);
  mts.get(tok(4)).hash(val);
  mts.get(tok(8)).hash(val);
  mts.get(tok(16)).hash(val);
  mts.get(tok(-1)).hash(val);
  assertHashEquals(fullval,mts.hash(full));
  assertHashEquals(childfullval,mts.hash(childfull));
  assertNull(mts.hash(invalid));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.SerializationsTest </h4><pre class="type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testEstimatedHistogramRead() throws IOException {
  if (EXECUTE_WRITES)   testEstimatedHistogramWrite();
  try (DataInputStreamPlus in=getInput("utils.EstimatedHistogram.bin")){
    Assert.assertNotNull(EstimatedHistogram.serializer.deserialize(in));
    Assert.assertNotNull(EstimatedHistogram.serializer.deserialize(in));
    Assert.assertNotNull(EstimatedHistogram.serializer.deserialize(in));
  }
 }

</code></pre>

<br>
<pre class="type-7 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testBloomFilterReadMURMUR3pre30() throws IOException {
  if (EXECUTE_WRITES)   testBloomFilterWrite(true,false);
  try (DataInputStream in=getInput("2.1","utils.BloomFilter.bin");IFilter filter=FilterFactory.deserialize(in,true,false)){
    Assert.assertNotNull(filter);
  }
 }

</code></pre>

<br>
<pre class="type-7 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testBloomFilterReadMURMUR3() throws IOException {
  if (EXECUTE_WRITES)   testBloomFilterWrite(true,true);
  try (DataInputStream in=getInput("3.0","utils.BloomFilter.bin");IFilter filter=FilterFactory.deserialize(in,true,true)){
    Assert.assertNotNull(filter);
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.btree.BTreeRemovalTest </h4><pre class="type-6 type-7 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveFromRootWhichIsALeaf(){
  for (int size=1; size < 9; ++size) {
    final Object[] btree=new Object[(size & 1) == 1 ? size : size + 1];
    for (int i=0; i < size; ++i)     btree[i]=i + 1;
    for (int i=0; i < size; ++i) {
      final Object[] result=remove(btree,CMP,i + 1);
      assertTrue("size " + size,BTree.isWellFormed(result,CMP));
      for (int j=0; j < i; ++j)       assertEquals("size " + size + "elem "+ j,btree[j],result[j]);
      for (int j=i; j < size - 1; ++j)       assertEquals("size " + size + "elem "+ j,btree[j + 1],result[j]);
      for (int j=size - 1; j < result.length; ++j)       assertNull("size " + size + "elem "+ j,result[j]);
    }
{
      final Object[] result=remove(btree,CMP,0);
      assertTrue("size " + size,BTree.isWellFormed(result,CMP));
      assertBTree(btree,result);
    }
{
      final Object[] result=remove(btree,CMP,size + 1);
      assertTrue("size " + size,BTree.isWellFormed(result,CMP));
      assertBTree(btree,result);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.concurrent.AbstractTransactionalTest </h4><pre class="type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testPrepare() throws Exception {
  TestableTransaction txn;
  txn=newTest();
  txn.assertInProgress();
  txn.testing.prepareToCommit();
  txn.assertPrepared();
  txn.testing.close();
  txn.assertAborted();
  txn=newTest();
  txn.assertInProgress();
  txn.testing.prepareToCommit();
  txn.assertPrepared();
  Assert.assertNull(txn.testing.abort(null));
  txn.assertAborted();
}

</code></pre>

<br>
<pre class="type-4 type-5 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBadCommit() throws Exception {
  TestableTransaction txn;
  txn=newTest();
  try {
    txn.testing.commit(null);
    Assert.assertTrue(false);
  }
 catch (  IllegalStateException t) {
  }
  txn.assertInProgress();
  Assert.assertNull(txn.testing.abort(null));
  txn.assertAborted();
  try {
    txn.testing.commit(null);
    Assert.assertTrue(false);
  }
 catch (  IllegalStateException t) {
  }
  txn.assertAborted();
}

</code></pre>

<br>
<pre class="type-4 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testNoPrepare() throws Exception {
  TestableTransaction txn;
  txn=newTest();
  txn.assertInProgress();
  txn.testing.close();
  txn.assertAborted();
  txn=newTest();
  txn.assertInProgress();
  Assert.assertNull(txn.testing.abort(null));
  txn.assertAborted();
}

</code></pre>

<br>
<pre class="type-4 type-5 type-12 type-8 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommit() throws Exception {
  TestableTransaction txn=newTest();
  txn.assertInProgress();
  txn.testing.prepareToCommit();
  txn.assertPrepared();
  Assert.assertNull(txn.testing.commit(null));
  txn.assertCommitted();
  txn.testing.close();
  txn.assertCommitted();
  Throwable t=txn.testing.abort(null);
  Assert.assertTrue(t instanceof IllegalStateException);
  txn.assertCommitted();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.memory.BufferPoolTest </h4><pre class="type-7 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDifferentSizes() throws InterruptedException {
  final int size1=1024;
  final int size2=2048;
  ByteBuffer buffer1=BufferPool.get(size1);
  assertNotNull(buffer1);
  assertEquals(size1,buffer1.capacity());
  ByteBuffer buffer2=BufferPool.get(size2);
  assertNotNull(buffer2);
  assertEquals(size2,buffer2.capacity());
  BufferPool.Chunk chunk=BufferPool.currentChunk();
  assertNotNull(chunk);
  assertEquals(BufferPool.GlobalPool.MACRO_CHUNK_SIZE,BufferPool.sizeInBytes());
  BufferPool.put(buffer1);
  BufferPool.put(buffer2);
  assertEquals(null,BufferPool.currentChunk());
  assertEquals(BufferPool.GlobalPool.MACRO_CHUNK_SIZE,BufferPool.sizeInBytes());
}

</code></pre>

<br>
<pre class="type-6 type-7 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompactIfOutOfCapacity(){
  final int size=4096;
  final int numBuffersInChunk=BufferPool.GlobalPool.MACRO_CHUNK_SIZE / size;
  List<ByteBuffer> buffers=new ArrayList<>(numBuffersInChunk);
  Set<Long> addresses=new HashSet<>(numBuffersInChunk);
  for (int i=0; i < numBuffersInChunk; i++) {
    ByteBuffer buffer=BufferPool.get(size);
    buffers.add(buffer);
    addresses.add(MemoryUtil.getAddress(buffer));
  }
  for (int i=numBuffersInChunk - 1; i >= 0; i--)   BufferPool.put(buffers.get(i));
  buffers.clear();
  for (int i=0; i < numBuffersInChunk; i++) {
    ByteBuffer buffer=BufferPool.get(size);
    assertNotNull(buffer);
    assertEquals(size,buffer.capacity());
    addresses.remove(MemoryUtil.getAddress(buffer));
    buffers.add(buffer);
  }
  assertTrue(addresses.isEmpty());
  for (  ByteBuffer buffer : buffers)   BufferPool.put(buffer);
}

</code></pre>

<br>
<pre class="type-7 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBigRequest(){
  final int size=BufferPool.CHUNK_SIZE + 1;
  ByteBuffer buffer=BufferPool.get(size);
  assertNotNull(buffer);
  assertEquals(size,buffer.capacity());
  BufferPool.put(buffer);
}

</code></pre>

<br>
<pre class="type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testZeroSizeRequest(){
  ByteBuffer buffer=BufferPool.get(0);
  assertNotNull(buffer);
  assertEquals(0,buffer.capacity());
  BufferPool.put(buffer);
}

</code></pre>

<br>
<pre class="type-6 type-7 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDifferentSizeBuffersOnOneChunk(){
  int[] sizes=new int[]{5,1024,4096,8,16000,78,512,256,63,55,89,90,255,32,2048,128};
  int sum=0;
  List<ByteBuffer> buffers=new ArrayList<>(sizes.length);
  for (int i=0; i < sizes.length; i++) {
    ByteBuffer buffer=BufferPool.get(sizes[i]);
    assertNotNull(buffer);
    assertTrue(buffer.capacity() >= sizes[i]);
    buffers.add(buffer);
    sum+=BufferPool.currentChunk().roundUp(buffer.capacity());
  }
  assertTrue(sum <= BufferPool.GlobalPool.MACRO_CHUNK_SIZE);
  BufferPool.Chunk chunk=BufferPool.currentChunk();
  assertNotNull(chunk);
  Random rnd=new Random();
  rnd.setSeed(298347529L);
  while (!buffers.isEmpty()) {
    int index=rnd.nextInt(buffers.size());
    ByteBuffer buffer=buffers.remove(index);
    BufferPool.put(buffer);
  }
  assertEquals(null,BufferPool.currentChunk());
  assertEquals(0,chunk.free());
}

</code></pre>

<br>
<pre class="type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHeapBuffer(){
  ByteBuffer buffer=BufferPool.get(1024,BufferType.ON_HEAP);
  assertNotNull(buffer);
  assertEquals(1024,buffer.capacity());
  assertFalse(buffer.isDirect());
  assertNotNull(buffer.array());
  BufferPool.put(buffer);
}

</code></pre>

<br>
<pre class="type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBufferPoolDisabled(){
  BufferPool.DISABLED=true;
  BufferPool.ALLOCATE_ON_HEAP_WHEN_EXAHUSTED=true;
  ByteBuffer buffer=BufferPool.get(1024);
  assertEquals(0,BufferPool.numChunks());
  assertNotNull(buffer);
  assertEquals(1024,buffer.capacity());
  assertFalse(buffer.isDirect());
  assertNotNull(buffer.array());
  BufferPool.put(buffer);
  assertEquals(0,BufferPool.numChunks());
  BufferPool.ALLOCATE_ON_HEAP_WHEN_EXAHUSTED=false;
  buffer=BufferPool.get(1024);
  assertEquals(0,BufferPool.numChunks());
  assertNotNull(buffer);
  assertEquals(1024,buffer.capacity());
  assertTrue(buffer.isDirect());
  BufferPool.put(buffer);
  assertEquals(0,BufferPool.numChunks());
  BufferPool.DISABLED=false;
  BufferPool.ALLOCATE_ON_HEAP_WHEN_EXAHUSTED=true;
}

</code></pre>

<br>
<pre class="type-6 type-7 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChunkExhausted(){
  final int size=BufferPool.CHUNK_SIZE / 64;
  int[] sizes=new int[128];
  Arrays.fill(sizes,size);
  int sum=0;
  List<ByteBuffer> buffers=new ArrayList<>(sizes.length);
  for (int i=0; i < sizes.length; i++) {
    ByteBuffer buffer=BufferPool.get(sizes[i]);
    assertNotNull(buffer);
    assertTrue(buffer.capacity() >= sizes[i]);
    buffers.add(buffer);
    sum+=buffer.capacity();
  }
  assertTrue(sum <= BufferPool.GlobalPool.MACRO_CHUNK_SIZE);
  BufferPool.Chunk chunk=BufferPool.currentChunk();
  assertNotNull(chunk);
  for (int i=0; i < sizes.length; i++) {
    BufferPool.put(buffers.get(i));
  }
  assertEquals(null,BufferPool.currentChunk());
  assertEquals(0,chunk.free());
}

</code></pre>

<br>
<pre class="type-7 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPut() throws InterruptedException {
  final int size=RandomAccessReader.DEFAULT_BUFFER_SIZE;
  ByteBuffer buffer=BufferPool.get(size);
  assertNotNull(buffer);
  assertEquals(size,buffer.capacity());
  assertEquals(true,buffer.isDirect());
  BufferPool.Chunk chunk=BufferPool.currentChunk();
  assertNotNull(chunk);
  assertEquals(BufferPool.GlobalPool.MACRO_CHUNK_SIZE,BufferPool.sizeInBytes());
  BufferPool.put(buffer);
  assertEquals(null,BufferPool.currentChunk());
  assertEquals(BufferPool.GlobalPool.MACRO_CHUNK_SIZE,BufferPool.sizeInBytes());
}

</code></pre>

<br>
<pre class="type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFillUpChunks(){
  final int size=RandomAccessReader.DEFAULT_BUFFER_SIZE;
  final int numBuffers=BufferPool.CHUNK_SIZE / size;
  List<ByteBuffer> buffers1=new ArrayList<>(numBuffers);
  List<ByteBuffer> buffers2=new ArrayList<>(numBuffers);
  for (int i=0; i < numBuffers; i++)   buffers1.add(BufferPool.get(size));
  BufferPool.Chunk chunk1=BufferPool.currentChunk();
  assertNotNull(chunk1);
  for (int i=0; i < numBuffers; i++)   buffers2.add(BufferPool.get(size));
  assertEquals(2,BufferPool.numChunks());
  for (  ByteBuffer buffer : buffers1)   BufferPool.put(buffer);
  assertEquals(1,BufferPool.numChunks());
  for (  ByteBuffer buffer : buffers2)   BufferPool.put(buffer);
  assertEquals(0,BufferPool.numChunks());
  buffers2.clear();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cassandra.utils.memory.NativeAllocatorTest </h4><pre class="type-7 type-4 type-5 type-2 type-12 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBookKeeping() throws ExecutionException, InterruptedException {
{
    final ScheduledExecutorService exec=Executors.newScheduledThreadPool(2);
    final OpOrder order=new OpOrder();
    final OpOrder.Group group=order.start();
    final CountDownLatch canClean=new CountDownLatch(1);
    final CountDownLatch isClean=new CountDownLatch(1);
    final AtomicReference<NativeAllocator> allocatorRef=new AtomicReference<>();
    final AtomicReference<OpOrder.Barrier> barrier=new AtomicReference<>();
    final NativeAllocator allocator=new NativeAllocator(new NativePool(1,100,0.75f,new Runnable(){
      public void run(){
        try {
          canClean.await();
        }
 catch (        InterruptedException e) {
          throw new AssertionError();
        }
        if (isClean.getCount() > 0) {
          allocatorRef.get().offHeap().released(80);
          isClean.countDown();
        }
      }
    }
));
    allocatorRef.set(allocator);
    final Runnable markBlocking=new Runnable(){
      public void run(){
        barrier.set(order.newBarrier());
        barrier.get().issue();
        barrier.get().markBlocking();
      }
    }
;
    final Runnable run=new Runnable(){
      public void run(){
        allocator.allocate(10,group);
        Assert.assertEquals(10,allocator.offHeap().owns());
        allocator.offHeap().adjust(-10,group);
        Assert.assertEquals(0,allocator.offHeap().owns());
        allocator.offHeap().adjust(10,group);
        Assert.assertEquals(10,allocator.offHeap().owns());
        boolean success=false;
        try {
          allocator.offHeap().allocate(-10,group);
        }
 catch (        AssertionError e) {
          success=true;
        }
        Assert.assertTrue(success);
        Uninterruptibles.sleepUninterruptibly(10L,TimeUnit.MILLISECONDS);
        Assert.assertEquals(1,isClean.getCount());
        allocator.allocate(70,group);
        Assert.assertEquals(80,allocator.offHeap().owns());
        canClean.countDown();
        try {
          isClean.await(10L,TimeUnit.MILLISECONDS);
        }
 catch (        InterruptedException e) {
          throw new AssertionError();
        }
        Assert.assertEquals(0,isClean.getCount());
        Assert.assertEquals(0,allocator.offHeap().owns());
        exec.schedule(markBlocking,10L,TimeUnit.MILLISECONDS);
        allocator.allocate(110,group);
        Assert.assertNotNull(barrier.get());
        Assert.assertEquals(110,allocator.offHeap().owns());
      }
    }
;
    exec.submit(run).get();
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
